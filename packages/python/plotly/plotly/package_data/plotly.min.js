/**
* plotly.js v2.30.1-91-g1c101914f
* Copyright 2012-2024, Plotly, Inc.
* All rights reserved.
* Licensed under the MIT license
*/
(function (g, f) {
    if ("object" == typeof exports && "object" == typeof module) {
      module.exports = f();
    } else if ("function" == typeof define && define.amd) {
      define("Plotly", [], f);
    } else if ("object" == typeof exports) {
      exports["Plotly"] = f();
    } else {
      g["Plotly"] = f();
    }
  }(this, () => {
var exports = {};
var module = { exports };
"use strict";var nq=Object.defineProperty;var DQe=Object.getOwnPropertyDescriptor;var IQe=Object.getOwnPropertyNames;var FQe=Object.prototype.hasOwnProperty;var Bs=(e,t)=>()=>(e&&(t=e(e=0)),t);var ne=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),qQe=(e,t)=>{for(var r in t)nq(e,r,{get:t[r],enumerable:!0})},zQe=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of IQe(t))!FQe.call(e,n)&&n!==r&&nq(e,n,{get:()=>t[n],enumerable:!(i=DQe(t,n))||i.enumerable});return e};var Yb=e=>zQe(nq({},"__esModule",{value:!0}),e);var xk=ne(DJ=>{"use strict";DJ.version="2.30.1-91-g1c101914f"});var FJ=ne((IJ,_k)=>{(function(t,r,i){r[t]=r[t]||i(),typeof _k!="undefined"&&_k.exports?_k.exports=r[t]:typeof define=="function"&&define.amd&&define(function(){return r[t]})})("Promise",typeof window!="undefined"?window:IJ,function(){"use strict";var t,r,i,n=Object.prototype.toString,a=typeof setImmediate!="undefined"?function(M){return setImmediate(M)}:setTimeout;try{Object.defineProperty({},"x",{}),t=function(M,b,w,k){return Object.defineProperty(M,b,{value:w,writable:!0,configurable:k!==!1})}}catch(p){t=function(b,w,k){return b[w]=k,b}}i=function(){var M,b,w;function k(x,E){this.fn=x,this.self=E,this.next=void 0}return{add:function(E,S){w=new k(E,S),b?b.next=w:M=w,b=w,w=void 0},drain:function(){var E=M;for(M=b=r=void 0;E;)E.fn.call(E.self),E=E.next}}}();function o(p,M){i.add(p,M),r||(r=a(i.drain))}function s(p){var M,b=typeof p;return p!=null&&(b=="object"||b=="function")&&(M=p.then),typeof M=="function"?M:!1}function l(){for(var p=0;p<this.chain.length;p++)u(this,this.state===1?this.chain[p].success:this.chain[p].failure,this.chain[p]);this.chain.length=0}function u(p,M,b){var w,k;try{M===!1?b.reject(p.msg):(M===!0?w=p.msg:w=M.call(void 0,p.msg),w===b.promise?b.reject(TypeError("Promise-chain cycle")):(k=s(w))?k.call(w,b.resolve,b.reject):b.resolve(w))}catch(x){b.reject(x)}}function f(p){var M,b=this;if(!b.triggered){b.triggered=!0,b.def&&(b=b.def);try{(M=s(p))?o(function(){var w=new v(b);try{M.call(p,function(){f.apply(w,arguments)},function(){c.apply(w,arguments)})}catch(k){c.call(w,k)}}):(b.msg=p,b.state=1,b.chain.length>0&&o(l,b))}catch(w){c.call(new v(b),w)}}}function c(p){var M=this;M.triggered||(M.triggered=!0,M.def&&(M=M.def),M.msg=p,M.state=2,M.chain.length>0&&o(l,M))}function h(p,M,b,w){for(var k=0;k<M.length;k++)(function(E){p.resolve(M[E]).then(function(g){b(E,g)},w)})(k)}function v(p){this.def=p,this.triggered=!1}function d(p){this.promise=p,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function _(p){if(typeof p!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var M=new d(this);this.then=function(w,k){var x={success:typeof w=="function"?w:!0,failure:typeof k=="function"?k:!1};return x.promise=new this.constructor(function(S,g){if(typeof S!="function"||typeof g!="function")throw TypeError("Not a function");x.resolve=S,x.reject=g}),M.chain.push(x),M.state!==0&&o(l,M),x.promise},this.catch=function(w){return this.then(void 0,w)};try{p.call(void 0,function(w){f.call(M,w)},function(w){c.call(M,w)})}catch(b){c.call(M,b)}}var T=t({},"constructor",_,!1);return _.prototype=T,t(T,"__NPO__",0,!1),t(_,"resolve",function(M){var b=this;return M&&typeof M=="object"&&M.__NPO__===1?M:new b(function(k,x){if(typeof k!="function"||typeof x!="function")throw TypeError("Not a function");k(M)})}),t(_,"reject",function(M){return new this(function(w,k){if(typeof w!="function"||typeof k!="function")throw TypeError("Not a function");k(M)})}),t(_,"all",function(M){var b=this;return n.call(M)!="[object Array]"?b.reject(TypeError("Not an array")):M.length===0?b.resolve([]):new b(function(k,x){if(typeof k!="function"||typeof x!="function")throw TypeError("Not a function");var E=M.length,S=Array(E),g=0;h(b,M,function(A,P){S[A]=P,++g===E&&k(S)},x)})}),t(_,"race",function(M){var b=this;return n.call(M)!="[object Array]"?b.reject(TypeError("Not an array")):new b(function(k,x){if(typeof k!="function"||typeof x!="function")throw TypeError("Not a function");h(b,M,function(S,g){k(g)},x)})}),_})});var Ai=ne((zQt,bk)=>{(function(){var e={version:"3.8.0"},t=[].slice,r=function(U){return t.call(U)},i=self.document;function n(U){return U&&(U.ownerDocument||U.document||U).documentElement}function a(U){return U&&(U.ownerDocument&&U.ownerDocument.defaultView||U.document&&U||U.defaultView)}if(i)try{r(i.documentElement.childNodes)[0].nodeType}catch(U){r=function(Q){for(var se=Q.length,ye=new Array(se);se--;)ye[se]=Q[se];return ye}}if(Date.now||(Date.now=function(){return+new Date}),i)try{i.createElement("DIV").style.setProperty("opacity",0,"")}catch(U){var o=this.Element.prototype,s=o.setAttribute,l=o.setAttributeNS,u=this.CSSStyleDeclaration.prototype,f=u.setProperty;o.setAttribute=function(Q,se){s.call(this,Q,se+"")},o.setAttributeNS=function(Q,se,ye){l.call(this,Q,se,ye+"")},u.setProperty=function(Q,se,ye){f.call(this,Q,se+"",ye)}}e.ascending=c;function c(U,Q){return U<Q?-1:U>Q?1:U>=Q?0:NaN}e.descending=function(U,Q){return Q<U?-1:Q>U?1:Q>=U?0:NaN},e.min=function(U,Q){var se=-1,ye=U.length,_e,Ae;if(arguments.length===1){for(;++se<ye;)if((Ae=U[se])!=null&&Ae>=Ae){_e=Ae;break}for(;++se<ye;)(Ae=U[se])!=null&&_e>Ae&&(_e=Ae)}else{for(;++se<ye;)if((Ae=Q.call(U,U[se],se))!=null&&Ae>=Ae){_e=Ae;break}for(;++se<ye;)(Ae=Q.call(U,U[se],se))!=null&&_e>Ae&&(_e=Ae)}return _e},e.max=function(U,Q){var se=-1,ye=U.length,_e,Ae;if(arguments.length===1){for(;++se<ye;)if((Ae=U[se])!=null&&Ae>=Ae){_e=Ae;break}for(;++se<ye;)(Ae=U[se])!=null&&Ae>_e&&(_e=Ae)}else{for(;++se<ye;)if((Ae=Q.call(U,U[se],se))!=null&&Ae>=Ae){_e=Ae;break}for(;++se<ye;)(Ae=Q.call(U,U[se],se))!=null&&Ae>_e&&(_e=Ae)}return _e},e.extent=function(U,Q){var se=-1,ye=U.length,_e,Ae,Ge;if(arguments.length===1){for(;++se<ye;)if((Ae=U[se])!=null&&Ae>=Ae){_e=Ge=Ae;break}for(;++se<ye;)(Ae=U[se])!=null&&(_e>Ae&&(_e=Ae),Ge<Ae&&(Ge=Ae))}else{for(;++se<ye;)if((Ae=Q.call(U,U[se],se))!=null&&Ae>=Ae){_e=Ge=Ae;break}for(;++se<ye;)(Ae=Q.call(U,U[se],se))!=null&&(_e>Ae&&(_e=Ae),Ge<Ae&&(Ge=Ae))}return[_e,Ge]};function h(U){return U===null?NaN:+U}function v(U){return!isNaN(U)}e.sum=function(U,Q){var se=0,ye=U.length,_e,Ae=-1;if(arguments.length===1)for(;++Ae<ye;)v(_e=+U[Ae])&&(se+=_e);else for(;++Ae<ye;)v(_e=+Q.call(U,U[Ae],Ae))&&(se+=_e);return se},e.mean=function(U,Q){var se=0,ye=U.length,_e,Ae=-1,Ge=ye;if(arguments.length===1)for(;++Ae<ye;)v(_e=h(U[Ae]))?se+=_e:--Ge;else for(;++Ae<ye;)v(_e=h(Q.call(U,U[Ae],Ae)))?se+=_e:--Ge;if(Ge)return se/Ge},e.quantile=function(U,Q){var se=(U.length-1)*Q+1,ye=Math.floor(se),_e=+U[ye-1],Ae=se-ye;return Ae?_e+Ae*(U[ye]-_e):_e},e.median=function(U,Q){var se=[],ye=U.length,_e,Ae=-1;if(arguments.length===1)for(;++Ae<ye;)v(_e=h(U[Ae]))&&se.push(_e);else for(;++Ae<ye;)v(_e=h(Q.call(U,U[Ae],Ae)))&&se.push(_e);if(se.length)return e.quantile(se.sort(c),.5)},e.variance=function(U,Q){var se=U.length,ye=0,_e,Ae,Ge=0,Le=-1,tt=0;if(arguments.length===1)for(;++Le<se;)v(_e=h(U[Le]))&&(Ae=_e-ye,ye+=Ae/++tt,Ge+=Ae*(_e-ye));else for(;++Le<se;)v(_e=h(Q.call(U,U[Le],Le)))&&(Ae=_e-ye,ye+=Ae/++tt,Ge+=Ae*(_e-ye));if(tt>1)return Ge/(tt-1)},e.deviation=function(){var U=e.variance.apply(this,arguments);return U&&Math.sqrt(U)};function d(U){return{left:function(Q,se,ye,_e){for(arguments.length<3&&(ye=0),arguments.length<4&&(_e=Q.length);ye<_e;){var Ae=ye+_e>>>1;U(Q[Ae],se)<0?ye=Ae+1:_e=Ae}return ye},right:function(Q,se,ye,_e){for(arguments.length<3&&(ye=0),arguments.length<4&&(_e=Q.length);ye<_e;){var Ae=ye+_e>>>1;U(Q[Ae],se)>0?_e=Ae:ye=Ae+1}return ye}}}var _=d(c);e.bisectLeft=_.left,e.bisect=e.bisectRight=_.right,e.bisector=function(U){return d(U.length===1?function(Q,se){return c(U(Q),se)}:U)},e.shuffle=function(U,Q,se){(ye=arguments.length)<3&&(se=U.length,ye<2&&(Q=0));for(var ye=se-Q,_e,Ae;ye;)Ae=Math.random()*ye--|0,_e=U[ye+Q],U[ye+Q]=U[Ae+Q],U[Ae+Q]=_e;return U},e.permute=function(U,Q){for(var se=Q.length,ye=new Array(se);se--;)ye[se]=U[Q[se]];return ye},e.pairs=function(U){for(var Q=0,se=U.length-1,ye,_e=U[0],Ae=new Array(se<0?0:se);Q<se;)Ae[Q]=[ye=_e,_e=U[++Q]];return Ae},e.transpose=function(U){if(!(Ae=U.length))return[];for(var Q=-1,se=e.min(U,T),ye=new Array(se);++Q<se;)for(var _e=-1,Ae,Ge=ye[Q]=new Array(Ae);++_e<Ae;)Ge[_e]=U[_e][Q];return ye};function T(U){return U.length}e.zip=function(){return e.transpose(arguments)},e.keys=function(U){var Q=[];for(var se in U)Q.push(se);return Q},e.values=function(U){var Q=[];for(var se in U)Q.push(U[se]);return Q},e.entries=function(U){var Q=[];for(var se in U)Q.push({key:se,value:U[se]});return Q},e.merge=function(U){for(var Q=U.length,se,ye=-1,_e=0,Ae,Ge;++ye<Q;)_e+=U[ye].length;for(Ae=new Array(_e);--Q>=0;)for(Ge=U[Q],se=Ge.length;--se>=0;)Ae[--_e]=Ge[se];return Ae};var p=Math.abs;e.range=function(U,Q,se){if(arguments.length<3&&(se=1,arguments.length<2&&(Q=U,U=0)),(Q-U)/se===1/0)throw new Error("infinite range");var ye=[],_e=M(p(se)),Ae=-1,Ge;if(U*=_e,Q*=_e,se*=_e,se<0)for(;(Ge=U+se*++Ae)>Q;)ye.push(Ge/_e);else for(;(Ge=U+se*++Ae)<Q;)ye.push(Ge/_e);return ye};function M(U){for(var Q=1;U*Q%1;)Q*=10;return Q}function b(U,Q){for(var se in Q)Object.defineProperty(U.prototype,se,{value:Q[se],enumerable:!1})}e.map=function(U,Q){var se=new w;if(U instanceof w)U.forEach(function(Le,tt){se.set(Le,tt)});else if(Array.isArray(U)){var ye=-1,_e=U.length,Ae;if(arguments.length===1)for(;++ye<_e;)se.set(ye,U[ye]);else for(;++ye<_e;)se.set(Q.call(U,Ae=U[ye],ye),Ae)}else for(var Ge in U)se.set(Ge,U[Ge]);return se};function w(){this._=Object.create(null)}var k="__proto__",x="\0";b(w,{has:g,get:function(U){return this._[E(U)]},set:function(U,Q){return this._[E(U)]=Q},remove:C,keys:A,values:function(){var U=[];for(var Q in this._)U.push(this._[Q]);return U},entries:function(){var U=[];for(var Q in this._)U.push({key:S(Q),value:this._[Q]});return U},size:P,empty:D,forEach:function(U){for(var Q in this._)U.call(this,S(Q),this._[Q])}});function E(U){return(U+="")===k||U[0]===x?x+U:U}function S(U){return(U+="")[0]===x?U.slice(1):U}function g(U){return E(U)in this._}function C(U){return(U=E(U))in this._&&delete this._[U]}function A(){var U=[];for(var Q in this._)U.push(S(Q));return U}function P(){var U=0;for(var Q in this._)++U;return U}function D(){for(var U in this._)return!1;return!0}e.nest=function(){var U={},Q=[],se=[],ye,_e;function Ae(Le,tt,St){if(St>=Q.length)return _e?_e.call(U,tt):ye?tt.sort(ye):tt;for(var Ct=-1,rr=tt.length,tr=Q[St++],Tr,Er,ir,gr=new w,wr;++Ct<rr;)(wr=gr.get(Tr=tr(Er=tt[Ct])))?wr.push(Er):gr.set(Tr,[Er]);return Le?(Er=Le(),ir=function(Pr,kr){Er.set(Pr,Ae(Le,kr,St))}):(Er={},ir=function(Pr,kr){Er[Pr]=Ae(Le,kr,St)}),gr.forEach(ir),Er}function Ge(Le,tt){if(tt>=Q.length)return Le;var St=[],Ct=se[tt++];return Le.forEach(function(rr,tr){St.push({key:rr,values:Ge(tr,tt)})}),Ct?St.sort(function(rr,tr){return Ct(rr.key,tr.key)}):St}return U.map=function(Le,tt){return Ae(tt,Le,0)},U.entries=function(Le){return Ge(Ae(e.map,Le,0),0)},U.key=function(Le){return Q.push(Le),U},U.sortKeys=function(Le){return se[Q.length-1]=Le,U},U.sortValues=function(Le){return ye=Le,U},U.rollup=function(Le){return _e=Le,U},U},e.set=function(U){var Q=new z;if(U)for(var se=0,ye=U.length;se<ye;++se)Q.add(U[se]);return Q};function z(){this._=Object.create(null)}b(z,{has:g,add:function(U){return this._[E(U+="")]=!0,U},remove:C,values:A,size:P,empty:D,forEach:function(U){for(var Q in this._)U.call(this,S(Q))}}),e.behavior={};function O(U){return U}e.rebind=function(U,Q){for(var se=1,ye=arguments.length,_e;++se<ye;)U[_e=arguments[se]]=V(U,Q,Q[_e]);return U};function V(U,Q,se){return function(){var ye=se.apply(Q,arguments);return ye===Q?U:ye}}function B(U,Q){if(Q in U)return Q;Q=Q.charAt(0).toUpperCase()+Q.slice(1);for(var se=0,ye=F.length;se<ye;++se){var _e=F[se]+Q;if(_e in U)return _e}}var F=["webkit","ms","moz","Moz","o","O"];function N(){}e.dispatch=function(){for(var U=new Z,Q=-1,se=arguments.length;++Q<se;)U[arguments[Q]]=J(U);return U};function Z(){}Z.prototype.on=function(U,Q){var se=U.indexOf("."),ye="";if(se>=0&&(ye=U.slice(se+1),U=U.slice(0,se)),U)return arguments.length<2?this[U].on(ye):this[U].on(ye,Q);if(arguments.length===2){if(Q==null)for(U in this)this.hasOwnProperty(U)&&this[U].on(ye,null);return this}};function J(U){var Q=[],se=new w;function ye(){for(var _e=Q,Ae=-1,Ge=_e.length,Le;++Ae<Ge;)(Le=_e[Ae].on)&&Le.apply(this,arguments);return U}return ye.on=function(_e,Ae){var Ge=se.get(_e),Le;return arguments.length<2?Ge&&Ge.on:(Ge&&(Ge.on=null,Q=Q.slice(0,Le=Q.indexOf(Ge)).concat(Q.slice(Le+1)),se.remove(_e)),Ae&&Q.push(se.set(_e,{on:Ae})),U)},ye}e.event=null;function re(){e.event.preventDefault()}function ue(){for(var U=e.event,Q;Q=U.sourceEvent;)U=Q;return U}function fe(U){for(var Q=new Z,se=0,ye=arguments.length;++se<ye;)Q[arguments[se]]=J(Q);return Q.of=function(_e,Ae){return function(Ge){try{var Le=Ge.sourceEvent=e.event;Ge.target=U,e.event=Ge,Q[Ge.type].apply(_e,Ae)}finally{e.event=Le}}},Q}e.requote=function(U){return U.replace(K,"\\$&")};var K=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,X={}.__proto__?function(U,Q){U.__proto__=Q}:function(U,Q){for(var se in Q)U[se]=Q[se]};function ae(U){return X(U,ce),U}var oe=function(U,Q){return Q.querySelector(U)},me=function(U,Q){return Q.querySelectorAll(U)},xe=function(U,Q){var se=U.matches||U[B(U,"matchesSelector")];return xe=function(ye,_e){return se.call(ye,_e)},xe(U,Q)};typeof Sizzle=="function"&&(oe=function(U,Q){return Sizzle(U,Q)[0]||null},me=Sizzle,xe=Sizzle.matchesSelector),e.selection=function(){return e.select(i.documentElement)};var ce=e.selection.prototype=[];ce.select=function(U){var Q=[],se,ye,_e,Ae;U=ie(U);for(var Ge=-1,Le=this.length;++Ge<Le;){Q.push(se=[]),se.parentNode=(_e=this[Ge]).parentNode;for(var tt=-1,St=_e.length;++tt<St;)(Ae=_e[tt])?(se.push(ye=U.call(Ae,Ae.__data__,tt,Ge)),ye&&"__data__"in Ae&&(ye.__data__=Ae.__data__)):se.push(null)}return ae(Q)};function ie(U){return typeof U=="function"?U:function(){return oe(U,this)}}ce.selectAll=function(U){var Q=[],se,ye;U=ge(U);for(var _e=-1,Ae=this.length;++_e<Ae;)for(var Ge=this[_e],Le=-1,tt=Ge.length;++Le<tt;)(ye=Ge[Le])&&(Q.push(se=r(U.call(ye,ye.__data__,Le,_e))),se.parentNode=ye);return ae(Q)};function ge(U){return typeof U=="function"?U:function(){return me(U,this)}}var le="http://www.w3.org/1999/xhtml",we={svg:"http://www.w3.org/2000/svg",xhtml:le,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};e.ns={prefix:we,qualify:function(U){var Q=U.indexOf(":"),se=U;return Q>=0&&(se=U.slice(0,Q))!=="xmlns"&&(U=U.slice(Q+1)),we.hasOwnProperty(se)?{space:we[se],local:U}:U}},ce.attr=function(U,Q){if(arguments.length<2){if(typeof U=="string"){var se=this.node();return U=e.ns.qualify(U),U.local?se.getAttributeNS(U.space,U.local):se.getAttribute(U)}for(Q in U)this.each(Re(Q,U[Q]));return this}return this.each(Re(U,Q))};function Re(U,Q){U=e.ns.qualify(U);function se(){this.removeAttribute(U)}function ye(){this.removeAttributeNS(U.space,U.local)}function _e(){this.setAttribute(U,Q)}function Ae(){this.setAttributeNS(U.space,U.local,Q)}function Ge(){var tt=Q.apply(this,arguments);tt==null?this.removeAttribute(U):this.setAttribute(U,tt)}function Le(){var tt=Q.apply(this,arguments);tt==null?this.removeAttributeNS(U.space,U.local):this.setAttributeNS(U.space,U.local,tt)}return Q==null?U.local?ye:se:typeof Q=="function"?U.local?Le:Ge:U.local?Ae:_e}function qe(U){return U.trim().replace(/\s+/g," ")}ce.classed=function(U,Q){if(arguments.length<2){if(typeof U=="string"){var se=this.node(),ye=(U=Pe(U)).length,_e=-1;if(Q=se.classList){for(;++_e<ye;)if(!Q.contains(U[_e]))return!1}else for(Q=se.getAttribute("class");++_e<ye;)if(!et(U[_e]).test(Q))return!1;return!0}for(Q in U)this.each(Ie(Q,U[Q]));return this}return this.each(Ie(U,Q))};function et(U){return new RegExp("(?:^|\\s+)"+e.requote(U)+"(?:\\s+|$)","g")}function Pe(U){return(U+"").trim().split(/^|\s+/)}function Ie(U,Q){U=Pe(U).map(ut);var se=U.length;function ye(){for(var Ae=-1;++Ae<se;)U[Ae](this,Q)}function _e(){for(var Ae=-1,Ge=Q.apply(this,arguments);++Ae<se;)U[Ae](this,Ge)}return typeof Q=="function"?_e:ye}function ut(U){var Q=et(U);return function(se,ye){if(_e=se.classList)return ye?_e.add(U):_e.remove(U);var _e=se.getAttribute("class")||"";ye?(Q.lastIndex=0,Q.test(_e)||se.setAttribute("class",qe(_e+" "+U))):se.setAttribute("class",qe(_e.replace(Q," ")))}}ce.style=function(U,Q,se){var ye=arguments.length;if(ye<3){if(typeof U!="string"){ye<2&&(Q="");for(se in U)this.each(ft(se,U[se],Q));return this}if(ye<2){var _e=this.node();return a(_e).getComputedStyle(_e,null).getPropertyValue(U)}se=""}return this.each(ft(U,Q,se))};function ft(U,Q,se){function ye(){this.style.removeProperty(U)}function _e(){this.style.setProperty(U,Q,se)}function Ae(){var Ge=Q.apply(this,arguments);Ge==null?this.style.removeProperty(U):this.style.setProperty(U,Ge,se)}return Q==null?ye:typeof Q=="function"?Ae:_e}ce.property=function(U,Q){if(arguments.length<2){if(typeof U=="string")return this.node()[U];for(Q in U)this.each(je(Q,U[Q]));return this}return this.each(je(U,Q))};function je(U,Q){function se(){delete this[U]}function ye(){this[U]=Q}function _e(){var Ae=Q.apply(this,arguments);Ae==null?delete this[U]:this[U]=Ae}return Q==null?se:typeof Q=="function"?_e:ye}ce.text=function(U){return arguments.length?this.each(typeof U=="function"?function(){var Q=U.apply(this,arguments);this.textContent=Q==null?"":Q}:U==null?function(){this.textContent=""}:function(){this.textContent=U}):this.node().textContent},ce.html=function(U){return arguments.length?this.each(typeof U=="function"?function(){var Q=U.apply(this,arguments);this.innerHTML=Q==null?"":Q}:U==null?function(){this.innerHTML=""}:function(){this.innerHTML=U}):this.node().innerHTML},ce.append=function(U){return U=_t(U),this.select(function(){return this.appendChild(U.apply(this,arguments))})};function _t(U){function Q(){var ye=this.ownerDocument,_e=this.namespaceURI;return _e===le&&ye.documentElement.namespaceURI===le?ye.createElement(U):ye.createElementNS(_e,U)}function se(){return this.ownerDocument.createElementNS(U.space,U.local)}return typeof U=="function"?U:(U=e.ns.qualify(U)).local?se:Q}ce.insert=function(U,Q){return U=_t(U),Q=ie(Q),this.select(function(){return this.insertBefore(U.apply(this,arguments),Q.apply(this,arguments)||null)})},ce.remove=function(){return this.each(Bt)};function Bt(){var U=this.parentNode;U&&U.removeChild(this)}ce.data=function(U,Q){var se=-1,ye=this.length,_e,Ae;if(!arguments.length){for(U=new Array(ye=(_e=this[0]).length);++se<ye;)(Ae=_e[se])&&(U[se]=Ae.__data__);return U}function Ge(Ct,rr){var tr,Tr=Ct.length,Er=rr.length,ir=Math.min(Tr,Er),gr=new Array(Er),wr=new Array(Er),Pr=new Array(Tr),kr,pr;if(Q){var yn=new w,bn=new Array(Tr),In;for(tr=-1;++tr<Tr;)(kr=Ct[tr])&&(yn.has(In=Q.call(kr,kr.__data__,tr))?Pr[tr]=kr:yn.set(In,kr),bn[tr]=In);for(tr=-1;++tr<Er;)(kr=yn.get(In=Q.call(rr,pr=rr[tr],tr)))?kr!==!0&&(gr[tr]=kr,kr.__data__=pr):wr[tr]=Lt(pr),yn.set(In,!0);for(tr=-1;++tr<Tr;)tr in bn&&yn.get(bn[tr])!==!0&&(Pr[tr]=Ct[tr])}else{for(tr=-1;++tr<ir;)kr=Ct[tr],pr=rr[tr],kr?(kr.__data__=pr,gr[tr]=kr):wr[tr]=Lt(pr);for(;tr<Er;++tr)wr[tr]=Lt(rr[tr]);for(;tr<Tr;++tr)Pr[tr]=Ct[tr]}wr.update=gr,wr.parentNode=gr.parentNode=Pr.parentNode=Ct.parentNode,Le.push(wr),tt.push(gr),St.push(Pr)}var Le=it([]),tt=ae([]),St=ae([]);if(typeof U=="function")for(;++se<ye;)Ge(_e=this[se],U.call(_e,_e.parentNode.__data__,se));else for(;++se<ye;)Ge(_e=this[se],U);return tt.enter=function(){return Le},tt.exit=function(){return St},tt};function Lt(U){return{__data__:U}}ce.datum=function(U){return arguments.length?this.property("__data__",U):this.property("__data__")},ce.filter=function(U){var Q=[],se,ye,_e;typeof U!="function"&&(U=Me(U));for(var Ae=0,Ge=this.length;Ae<Ge;Ae++){Q.push(se=[]),se.parentNode=(ye=this[Ae]).parentNode;for(var Le=0,tt=ye.length;Le<tt;Le++)(_e=ye[Le])&&U.call(_e,_e.__data__,Le,Ae)&&se.push(_e)}return ae(Q)};function Me(U){return function(){return xe(this,U)}}ce.order=function(){for(var U=-1,Q=this.length;++U<Q;)for(var se=this[U],ye=se.length-1,_e=se[ye],Ae;--ye>=0;)(Ae=se[ye])&&(_e&&_e!==Ae.nextSibling&&_e.parentNode.insertBefore(Ae,_e),_e=Ae);return this},ce.sort=function(U){U=Ze.apply(this,arguments);for(var Q=-1,se=this.length;++Q<se;)this[Q].sort(U);return this.order()};function Ze(U){return arguments.length||(U=c),function(Q,se){return Q&&se?U(Q.__data__,se.__data__):!Q-!se}}ce.each=function(U){return dt(this,function(Q,se,ye){U.call(Q,Q.__data__,se,ye)})};function dt(U,Q){for(var se=0,ye=U.length;se<ye;se++)for(var _e=U[se],Ae=0,Ge=_e.length,Le;Ae<Ge;Ae++)(Le=_e[Ae])&&Q(Le,Ae,se);return U}ce.call=function(U){var Q=r(arguments);return U.apply(Q[0]=this,Q),this},ce.empty=function(){return!this.node()},ce.node=function(){for(var U=0,Q=this.length;U<Q;U++)for(var se=this[U],ye=0,_e=se.length;ye<_e;ye++){var Ae=se[ye];if(Ae)return Ae}return null},ce.size=function(){var U=0;return dt(this,function(){++U}),U};function it(U){return X(U,vt),U}var vt=[];e.selection.enter=it,e.selection.enter.prototype=vt,vt.append=ce.append,vt.empty=ce.empty,vt.node=ce.node,vt.call=ce.call,vt.size=ce.size,vt.select=function(U){for(var Q=[],se,ye,_e,Ae,Ge,Le=-1,tt=this.length;++Le<tt;){_e=(Ae=this[Le]).update,Q.push(se=[]),se.parentNode=Ae.parentNode;for(var St=-1,Ct=Ae.length;++St<Ct;)(Ge=Ae[St])?(se.push(_e[St]=ye=U.call(Ae.parentNode,Ge.__data__,St,Le)),ye.__data__=Ge.__data__):se.push(null)}return ae(Q)},vt.insert=function(U,Q){return arguments.length<2&&(Q=rt(this)),ce.insert.call(this,U,Q)};function rt(U){var Q,se;return function(ye,_e,Ae){var Ge=U[Ae].update,Le=Ge.length,tt;for(Ae!=se&&(se=Ae,Q=0),_e>=Q&&(Q=_e+1);!(tt=Ge[Q])&&++Q<Le;);return tt}}e.select=function(U){var Q;return typeof U=="string"?(Q=[oe(U,i)],Q.parentNode=i.documentElement):(Q=[U],Q.parentNode=n(U)),ae([Q])},e.selectAll=function(U){var Q;return typeof U=="string"?(Q=r(me(U,i)),Q.parentNode=i.documentElement):(Q=r(U),Q.parentNode=null),ae([Q])},ce.on=function(U,Q,se){var ye=arguments.length;if(ye<3){if(typeof U!="string"){ye<2&&(Q=!1);for(se in U)this.each(We(se,U[se],Q));return this}if(ye<2)return(ye=this.node()["__on"+U])&&ye._;se=!1}return this.each(We(U,Q,se))};function We(U,Q,se){var ye="__on"+U,_e=U.indexOf("."),Ae=mt;_e>0&&(U=U.slice(0,_e));var Ge=ht.get(U);Ge&&(U=Ge,Ae=er);function Le(){var Ct=this[ye];Ct&&(this.removeEventListener(U,Ct,Ct.$),delete this[ye])}function tt(){var Ct=Ae(Q,r(arguments));Le.call(this),this.addEventListener(U,this[ye]=Ct,Ct.$=se),Ct._=Q}function St(){var Ct=new RegExp("^__on([^.]+)"+e.requote(U)+"$"),rr;for(var tr in this)if(rr=tr.match(Ct)){var Tr=this[tr];this.removeEventListener(rr[1],Tr,Tr.$),delete this[tr]}}return _e?Q?tt:Le:Q?N:St}var ht=e.map({mouseenter:"mouseover",mouseleave:"mouseout"});i&&ht.forEach(function(U){"on"+U in i&&ht.remove(U)});function mt(U,Q){return function(se){var ye=e.event;e.event=se,Q[0]=this.__data__;try{U.apply(this,Q)}finally{e.event=ye}}}function er(U,Q){var se=mt(U,Q);return function(ye){var _e=this,Ae=ye.relatedTarget;(!Ae||Ae!==_e&&!(Ae.compareDocumentPosition(_e)&8))&&se.call(_e,ye)}}var $t,cr=0;function or(U){var Q=".dragsuppress-"+ ++cr,se="click"+Q,ye=e.select(a(U)).on("touchmove"+Q,re).on("dragstart"+Q,re).on("selectstart"+Q,re);if($t==null&&($t="onselectstart"in U?!1:B(U.style,"userSelect")),$t){var _e=n(U).style,Ae=_e[$t];_e[$t]="none"}return function(Ge){if(ye.on(Q,null),$t&&(_e[$t]=Ae),Ge){var Le=function(){ye.on(se,null)};ye.on(se,function(){re(),Le()},!0),setTimeout(Le,0)}}}e.mouse=function(U){return Ot(U,ue())};var vr=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Ot(U,Q){Q.changedTouches&&(Q=Q.changedTouches[0]);var se=U.ownerSVGElement||U;if(se.createSVGPoint){var ye=se.createSVGPoint();if(vr<0){var _e=a(U);if(_e.scrollX||_e.scrollY){se=e.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var Ae=se[0][0].getScreenCTM();vr=!(Ae.f||Ae.e),se.remove()}}return vr?(ye.x=Q.pageX,ye.y=Q.pageY):(ye.x=Q.clientX,ye.y=Q.clientY),ye=ye.matrixTransform(U.getScreenCTM().inverse()),[ye.x,ye.y]}var Ge=U.getBoundingClientRect();return[Q.clientX-Ge.left-U.clientLeft,Q.clientY-Ge.top-U.clientTop]}e.touch=function(U,Q,se){if(arguments.length<3&&(se=Q,Q=ue().changedTouches),Q){for(var ye=0,_e=Q.length,Ae;ye<_e;++ye)if((Ae=Q[ye]).identifier===se)return Ot(U,Ae)}},e.behavior.drag=function(){var U=fe(_e,"drag","dragstart","dragend"),Q=null,se=Ae(N,e.mouse,a,"mousemove","mouseup"),ye=Ae(yt,e.touch,O,"touchmove","touchend");function _e(){this.on("mousedown.drag",se).on("touchstart.drag",ye)}function Ae(Ge,Le,tt,St,Ct){return function(){var rr=this,tr=e.event.target.correspondingElement||e.event.target,Tr=rr.parentNode,Er=U.of(rr,arguments),ir=0,gr=Ge(),wr=".drag"+(gr==null?"":"-"+gr),Pr,kr=e.select(tt(tr)).on(St+wr,bn).on(Ct+wr,In),pr=or(tr),yn=Le(Tr,gr);Q?(Pr=Q.apply(rr,arguments),Pr=[Pr.x-yn[0],Pr.y-yn[1]]):Pr=[0,0],Er({type:"dragstart"});function bn(){var Xn=Le(Tr,gr),Ci,Fi;Xn&&(Ci=Xn[0]-yn[0],Fi=Xn[1]-yn[1],ir|=Ci|Fi,yn=Xn,Er({type:"drag",x:Xn[0]+Pr[0],y:Xn[1]+Pr[1],dx:Ci,dy:Fi}))}function In(){Le(Tr,gr)&&(kr.on(St+wr,null).on(Ct+wr,null),pr(ir),Er({type:"dragend"}))}}}return _e.origin=function(Ge){return arguments.length?(Q=Ge,_e):Q},e.rebind(_e,U,"on")};function yt(){return e.event.changedTouches[0].identifier}e.touches=function(U,Q){return arguments.length<2&&(Q=ue().touches),Q?r(Q).map(function(se){var ye=Ot(U,se);return ye.identifier=se.identifier,ye}):[]};var Et=1e-6,Je=Et*Et,Ke=Math.PI,At=2*Ke,Ee=At-Et,de=Ke/2,Te=Ke/180,nt=180/Ke;function Mt(U){return U>0?1:U<0?-1:0}function Kt(U,Q,se){return(Q[0]-U[0])*(se[1]-U[1])-(Q[1]-U[1])*(se[0]-U[0])}function Jt(U){return U>1?0:U<-1?Ke:Math.acos(U)}function Fr(U){return U>1?de:U<-1?-de:Math.asin(U)}function Vr(U){return((U=Math.exp(U))-1/U)/2}function mr(U){return((U=Math.exp(U))+1/U)/2}function zr(U){return((U=Math.exp(2*U))-1)/(U+1)}function an(U){return(U=Math.sin(U/2))*U}var ni=Math.SQRT2,mn=2,fi=4;e.interpolateZoom=function(U,Q){var se=U[0],ye=U[1],_e=U[2],Ae=Q[0],Ge=Q[1],Le=Q[2],tt=Ae-se,St=Ge-ye,Ct=tt*tt+St*St,rr,tr;if(Ct<Je)tr=Math.log(Le/_e)/ni,rr=function(Pr){return[se+Pr*tt,ye+Pr*St,_e*Math.exp(ni*Pr*tr)]};else{var Tr=Math.sqrt(Ct),Er=(Le*Le-_e*_e+fi*Ct)/(2*_e*mn*Tr),ir=(Le*Le-_e*_e-fi*Ct)/(2*Le*mn*Tr),gr=Math.log(Math.sqrt(Er*Er+1)-Er),wr=Math.log(Math.sqrt(ir*ir+1)-ir);tr=(wr-gr)/ni,rr=function(Pr){var kr=Pr*tr,pr=mr(gr),yn=_e/(mn*Tr)*(pr*zr(ni*kr+gr)-Vr(gr));return[se+yn*tt,ye+yn*St,_e*pr/mr(ni*kr+gr)]}}return rr.duration=tr*1e3,rr},e.behavior.zoom=function(){var U={x:0,y:0,k:1},Q,se,ye,_e=[960,500],Ae=Wi,Ge=250,Le=0,tt="mousedown.zoom",St="mousemove.zoom",Ct="mouseup.zoom",rr,tr="touchstart.zoom",Tr,Er=fe(kr,"zoomstart","zoom","zoomend"),ir,gr,wr,Pr;Zi||(Zi="onwheel"in i?(si=function(){return-e.event.deltaY*(e.event.deltaMode?120:1)},"wheel"):"onmousewheel"in i?(si=function(){return e.event.wheelDelta},"mousewheel"):(si=function(){return-e.event.detail},"MozMousePixelScroll"));function kr(Sn){Sn.on(tt,va).on(Zi+".zoom",Po).on("dblclick.zoom",Ao).on(tr,go)}kr.event=function(Sn){Sn.each(function(){var da=Er.of(this,arguments),Sa=U;ds?e.select(this).transition().each("start.zoom",function(){U=this.__chart__||{x:0,y:0,k:1},Fi(da)}).tween("zoom:zoom",function(){var La=_e[0],Ts=_e[1],Gs=se?se[0]:La/2,yl=se?se[1]:Ts/2,ls=e.interpolateZoom([(Gs-U.x)/U.k,(yl-U.y)/U.k,La/U.k],[(Gs-Sa.x)/Sa.k,(yl-Sa.y)/Sa.k,La/Sa.k]);return function(Wl){var Ye=ls(Wl),Gt=La/Ye[2];this.__chart__=U={x:Gs-Ye[0]*Gt,y:yl-Ye[1]*Gt,k:Gt},xa(da)}}).each("interrupt.zoom",function(){Gi(da)}).each("end.zoom",function(){Gi(da)}):(this.__chart__=U,Fi(da),xa(da),Gi(da))})},kr.translate=function(Sn){return arguments.length?(U={x:+Sn[0],y:+Sn[1],k:U.k},Ci(),kr):[U.x,U.y]},kr.scale=function(Sn){return arguments.length?(U={x:U.x,y:U.y,k:null},bn(+Sn),Ci(),kr):U.k},kr.scaleExtent=function(Sn){return arguments.length?(Ae=Sn==null?Wi:[+Sn[0],+Sn[1]],kr):Ae},kr.center=function(Sn){return arguments.length?(ye=Sn&&[+Sn[0],+Sn[1]],kr):ye},kr.size=function(Sn){return arguments.length?(_e=Sn&&[+Sn[0],+Sn[1]],kr):_e},kr.duration=function(Sn){return arguments.length?(Ge=+Sn,kr):Ge},kr.x=function(Sn){return arguments.length?(gr=Sn,ir=Sn.copy(),U={x:0,y:0,k:1},kr):gr},kr.y=function(Sn){return arguments.length?(Pr=Sn,wr=Sn.copy(),U={x:0,y:0,k:1},kr):Pr};function pr(Sn){return[(Sn[0]-U.x)/U.k,(Sn[1]-U.y)/U.k]}function yn(Sn){return[Sn[0]*U.k+U.x,Sn[1]*U.k+U.y]}function bn(Sn){U.k=Math.max(Ae[0],Math.min(Ae[1],Sn))}function In(Sn,da){da=yn(da),U.x+=Sn[0]-da[0],U.y+=Sn[1]-da[1]}function Xn(Sn,da,Sa,La){Sn.__chart__={x:U.x,y:U.y,k:U.k},bn(Math.pow(2,La)),In(se=da,Sa),Sn=e.select(Sn),Ge>0&&(Sn=Sn.transition().duration(Ge)),Sn.call(kr.event)}function Ci(){gr&&gr.domain(ir.range().map(function(Sn){return(Sn-U.x)/U.k}).map(ir.invert)),Pr&&Pr.domain(wr.range().map(function(Sn){return(Sn-U.y)/U.k}).map(wr.invert))}function Fi(Sn){Le++||Sn({type:"zoomstart"})}function xa(Sn){Ci(),Sn({type:"zoom",scale:U.k,translate:[U.x,U.y]})}function Gi(Sn){--Le||(Sn({type:"zoomend"}),se=null)}function va(){var Sn=this,da=Er.of(Sn,arguments),Sa=0,La=e.select(a(Sn)).on(St,yl).on(Ct,ls),Ts=pr(e.mouse(Sn)),Gs=or(Sn);pa.call(Sn),Fi(da);function yl(){Sa=1,In(e.mouse(Sn),Ts),xa(da)}function ls(){La.on(St,null).on(Ct,null),Gs(Sa),Gi(da)}}function go(){var Sn=this,da=Er.of(Sn,arguments),Sa={},La=0,Ts,Gs=".zoom-"+e.event.changedTouches[0].identifier,yl="touchmove"+Gs,ls="touchend"+Gs,Wl=[],Ye=e.select(Sn),Gt=or(Sn);Or(),Fi(da),Ye.on(tt,null).on(tr,Or);function lr(){var Kr=e.touches(Sn);return Ts=U.k,Kr.forEach(function(xn){xn.identifier in Sa&&(Sa[xn.identifier]=pr(xn))}),Kr}function Or(){var Kr=e.event.target;e.select(Kr).on(yl,$r).on(ls,jr),Wl.push(Kr);for(var xn=e.event.changedTouches,Qn=0,Wn=xn.length;Qn<Wn;++Qn)Sa[xn[Qn].identifier]=null;var Rn=lr(),ia=Date.now();if(Rn.length===1){if(ia-Tr<500){var Un=Rn[0];Xn(Sn,Un,Sa[Un.identifier],Math.floor(Math.log(U.k)/Math.LN2)+1),re()}Tr=ia}else if(Rn.length>1){var Un=Rn[0],Bn=Rn[1],_n=Un[0]-Bn[0],Br=Un[1]-Bn[1];La=_n*_n+Br*Br}}function $r(){var Kr=e.touches(Sn),xn,Qn,Wn,Rn;pa.call(Sn);for(var ia=0,Un=Kr.length;ia<Un;++ia,Rn=null)if(Wn=Kr[ia],Rn=Sa[Wn.identifier]){if(Qn)break;xn=Wn,Qn=Rn}if(Rn){var Bn=(Bn=Wn[0]-xn[0])*Bn+(Bn=Wn[1]-xn[1])*Bn,_n=La&&Math.sqrt(Bn/La);xn=[(xn[0]+Wn[0])/2,(xn[1]+Wn[1])/2],Qn=[(Qn[0]+Rn[0])/2,(Qn[1]+Rn[1])/2],bn(_n*Ts)}Tr=null,In(xn,Qn),xa(da)}function jr(){if(e.event.touches.length){for(var Kr=e.event.changedTouches,xn=0,Qn=Kr.length;xn<Qn;++xn)delete Sa[Kr[xn].identifier];for(var Wn in Sa)return void lr()}e.selectAll(Wl).on(Gs,null),Ye.on(tt,va).on(tr,go),Gt(),Gi(da)}}function Po(){var Sn=Er.of(this,arguments);rr?clearTimeout(rr):(pa.call(this),Q=pr(se=ye||e.mouse(this)),Fi(Sn)),rr=setTimeout(function(){rr=null,Gi(Sn)},50),re(),bn(Math.pow(2,si()*.002)*U.k),In(se,Q),xa(Sn)}function Ao(){var Sn=e.mouse(this),da=Math.log(U.k)/Math.LN2;Xn(this,Sn,pr(Sn),e.event.shiftKey?Math.ceil(da)-1:Math.floor(da)+1)}return e.rebind(kr,Er,"on")};var Wi=[0,1/0],si,Zi;e.color=Ei;function Ei(){}Ei.prototype.toString=function(){return this.rgb()+""},e.hsl=ot;function ot(U,Q,se){return this instanceof ot?(this.h=+U,this.s=+Q,void(this.l=+se)):arguments.length<2?U instanceof ot?new ot(U.h,U.s,U.l):zi(""+U,ya,ot):new ot(U,Q,se)}var Be=ot.prototype=new Ei;Be.brighter=function(U){return U=Math.pow(.7,arguments.length?U:1),new ot(this.h,this.s,this.l/U)},Be.darker=function(U){return U=Math.pow(.7,arguments.length?U:1),new ot(this.h,this.s,U*this.l)},Be.rgb=function(){return lt(this.h,this.s,this.l)};function lt(U,Q,se){var ye,_e;U=isNaN(U)?0:(U%=360)<0?U+360:U,Q=isNaN(Q)||Q<0?0:Q>1?1:Q,se=se<0?0:se>1?1:se,_e=se<=.5?se*(1+Q):se+Q-se*Q,ye=2*se-_e;function Ae(Le){return Le>360?Le-=360:Le<0&&(Le+=360),Le<60?ye+(_e-ye)*Le/60:Le<180?_e:Le<240?ye+(_e-ye)*(240-Le)/60:ye}function Ge(Le){return Math.round(Ae(Le)*255)}return new ji(Ge(U+120),Ge(U),Ge(U-120))}e.hcl=xt;function xt(U,Q,se){return this instanceof xt?(this.h=+U,this.c=+Q,void(this.l=+se)):arguments.length<2?U instanceof xt?new xt(U.h,U.c,U.l):U instanceof yr?qn(U.l,U.a,U.b):qn((U=zn((U=e.rgb(U)).r,U.g,U.b)).l,U.a,U.b):new xt(U,Q,se)}var Nt=xt.prototype=new Ei;Nt.brighter=function(U){return new xt(this.h,this.c,Math.min(100,this.l+dr*(arguments.length?U:1)))},Nt.darker=function(U){return new xt(this.h,this.c,Math.max(0,this.l-dr*(arguments.length?U:1)))},Nt.rgb=function(){return nr(this.h,this.c,this.l).rgb()};function nr(U,Q,se){return isNaN(U)&&(U=0),isNaN(Q)&&(Q=0),new yr(se,Math.cos(U*=Te)*Q,Math.sin(U)*Q)}e.lab=yr;function yr(U,Q,se){return this instanceof yr?(this.l=+U,this.a=+Q,void(this.b=+se)):arguments.length<2?U instanceof yr?new yr(U.l,U.a,U.b):U instanceof xt?nr(U.h,U.c,U.l):zn((U=ji(U)).r,U.g,U.b):new yr(U,Q,se)}var dr=18,Rr=.95047,Gr=1,Yr=1.08883,dn=yr.prototype=new Ei;dn.brighter=function(U){return new yr(Math.min(100,this.l+dr*(arguments.length?U:1)),this.a,this.b)},dn.darker=function(U){return new yr(Math.max(0,this.l-dr*(arguments.length?U:1)),this.a,this.b)},dn.rgb=function(){return Wr(this.l,this.a,this.b)};function Wr(U,Q,se){var ye=(U+16)/116,_e=ye+Q/500,Ae=ye-se/200;return _e=vi(_e)*Rr,ye=vi(ye)*Gr,Ae=vi(Ae)*Yr,new ji(Ui(3.2404542*_e-1.5371385*ye-.4985314*Ae),Ui(-.969266*_e+1.8760108*ye+.041556*Ae),Ui(.0556434*_e-.2040259*ye+1.0572252*Ae))}function qn(U,Q,se){return U>0?new xt(Math.atan2(se,Q)*nt,Math.sqrt(Q*Q+se*se),U):new xt(NaN,NaN,U)}function vi(U){return U>.206893034?U*U*U:(U-4/29)/7.787037}function Mi(U){return U>.008856?Math.pow(U,1/3):7.787037*U+4/29}function Ui(U){return Math.round(255*(U<=.00304?12.92*U:1.055*Math.pow(U,1/2.4)-.055))}e.rgb=ji;function ji(U,Q,se){return this instanceof ji?(this.r=~~U,this.g=~~Q,void(this.b=~~se)):arguments.length<2?U instanceof ji?new ji(U.r,U.g,U.b):zi(""+U,ji,lt):new ji(U,Q,se)}function ea(U){return new ji(U>>16,U>>8&255,U&255)}function Ra(U){return ea(U)+""}var Li=ji.prototype=new Ei;Li.brighter=function(U){U=Math.pow(.7,arguments.length?U:1);var Q=this.r,se=this.g,ye=this.b,_e=30;return!Q&&!se&&!ye?new ji(_e,_e,_e):(Q&&Q<_e&&(Q=_e),se&&se<_e&&(se=_e),ye&&ye<_e&&(ye=_e),new ji(Math.min(255,Q/U),Math.min(255,se/U),Math.min(255,ye/U)))},Li.darker=function(U){return U=Math.pow(.7,arguments.length?U:1),new ji(U*this.r,U*this.g,U*this.b)},Li.hsl=function(){return ya(this.r,this.g,this.b)},Li.toString=function(){return"#"+Yn(this.r)+Yn(this.g)+Yn(this.b)};function Yn(U){return U<16?"0"+Math.max(0,U).toString(16):Math.min(255,U).toString(16)}function zi(U,Q,se){var ye=0,_e=0,Ae=0,Ge,Le,tt;if(Ge=/([a-z]+)\((.*)\)/.exec(U=U.toLowerCase()),Ge)switch(Le=Ge[2].split(","),Ge[1]){case"hsl":return se(parseFloat(Le[0]),parseFloat(Le[1])/100,parseFloat(Le[2])/100);case"rgb":return Q(Ut(Le[0]),Ut(Le[1]),Ut(Le[2]))}return(tt=ur.get(U))?Q(tt.r,tt.g,tt.b):(U!=null&&U.charAt(0)==="#"&&!isNaN(tt=parseInt(U.slice(1),16))&&(U.length===4?(ye=(tt&3840)>>4,ye=ye>>4|ye,_e=tt&240,_e=_e>>4|_e,Ae=tt&15,Ae=Ae<<4|Ae):U.length===7&&(ye=(tt&16711680)>>16,_e=(tt&65280)>>8,Ae=tt&255)),Q(ye,_e,Ae))}function ya(U,Q,se){var ye=Math.min(U/=255,Q/=255,se/=255),_e=Math.max(U,Q,se),Ae=_e-ye,Ge,Le,tt=(_e+ye)/2;return Ae?(Le=tt<.5?Ae/(_e+ye):Ae/(2-_e-ye),U==_e?Ge=(Q-se)/Ae+(Q<se?6:0):Q==_e?Ge=(se-U)/Ae+2:Ge=(U-Q)/Ae+4,Ge*=60):(Ge=NaN,Le=tt>0&&tt<1?0:Ge),new ot(Ge,Le,tt)}function zn(U,Q,se){U=Xe(U),Q=Xe(Q),se=Xe(se);var ye=Mi((.4124564*U+.3575761*Q+.1804375*se)/Rr),_e=Mi((.2126729*U+.7151522*Q+.072175*se)/Gr),Ae=Mi((.0193339*U+.119192*Q+.9503041*se)/Yr);return yr(116*_e-16,500*(ye-_e),200*(_e-Ae))}function Xe(U){return(U/=255)<=.04045?U/12.92:Math.pow((U+.055)/1.055,2.4)}function Ut(U){var Q=parseFloat(U);return U.charAt(U.length-1)==="%"?Math.round(Q*2.55):Q}var ur=e.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ur.forEach(function(U,Q){ur.set(U,ea(Q))});function br(U){return typeof U=="function"?U:function(){return U}}e.functor=br,e.xhr=Jr(O);function Jr(U){return function(Q,se,ye){return arguments.length===2&&typeof se=="function"&&(ye=se,se=null),sn(Q,se,U,ye)}}function sn(U,Q,se,ye){var _e={},Ae=e.dispatch("beforesend","progress","load","error"),Ge={},Le=new XMLHttpRequest,tt=null;self.XDomainRequest&&!("withCredentials"in Le)&&/^(http(s)?:)?\/\//.test(U)&&(Le=new XDomainRequest),"onload"in Le?Le.onload=Le.onerror=St:Le.onreadystatechange=function(){Le.readyState>3&&St()};function St(){var Ct=Le.status,rr;if(!Ct&&Cr(Le)||Ct>=200&&Ct<300||Ct===304){try{rr=se.call(_e,Le)}catch(tr){Ae.error.call(_e,tr);return}Ae.load.call(_e,rr)}else Ae.error.call(_e,Le)}return Le.onprogress=function(Ct){var rr=e.event;e.event=Ct;try{Ae.progress.call(_e,Le)}finally{e.event=rr}},_e.header=function(Ct,rr){return Ct=(Ct+"").toLowerCase(),arguments.length<2?Ge[Ct]:(rr==null?delete Ge[Ct]:Ge[Ct]=rr+"",_e)},_e.mimeType=function(Ct){return arguments.length?(Q=Ct==null?null:Ct+"",_e):Q},_e.responseType=function(Ct){return arguments.length?(tt=Ct,_e):tt},_e.response=function(Ct){return se=Ct,_e},["get","post"].forEach(function(Ct){_e[Ct]=function(){return _e.send.apply(_e,[Ct].concat(r(arguments)))}}),_e.send=function(Ct,rr,tr){if(arguments.length===2&&typeof rr=="function"&&(tr=rr,rr=null),Le.open(Ct,U,!0),Q!=null&&!("accept"in Ge)&&(Ge.accept=Q+",*/*"),Le.setRequestHeader)for(var Tr in Ge)Le.setRequestHeader(Tr,Ge[Tr]);return Q!=null&&Le.overrideMimeType&&Le.overrideMimeType(Q),tt!=null&&(Le.responseType=tt),tr!=null&&_e.on("error",tr).on("load",function(Er){tr(null,Er)}),Ae.beforesend.call(_e,Le),Le.send(rr==null?null:rr),_e},_e.abort=function(){return Le.abort(),_e},e.rebind(_e,Ae,"on"),ye==null?_e:_e.get(gn(ye))}function gn(U){return U.length===1?function(Q,se){U(Q==null?se:null)}:U}function Cr(U){var Q=U.responseType;return Q&&Q!=="text"?U.response:U.responseText}e.dsv=function(U,Q){var se=new RegExp('["'+U+`
]`),ye=U.charCodeAt(0);function _e(St,Ct,rr){arguments.length<3&&(rr=Ct,Ct=null);var tr=sn(St,Q,Ct==null?Ae:Ge(Ct),rr);return tr.row=function(Tr){return arguments.length?tr.response((Ct=Tr)==null?Ae:Ge(Tr)):Ct},tr}function Ae(St){return _e.parse(St.responseText)}function Ge(St){return function(Ct){return _e.parse(Ct.responseText,St)}}_e.parse=function(St,Ct){var rr;return _e.parseRows(St,function(tr,Tr){if(rr)return rr(tr,Tr-1);var Er=function(ir){for(var gr={},wr=tr.length,Pr=0;Pr<wr;++Pr)gr[tr[Pr]]=ir[Pr];return gr};rr=Ct?function(ir,gr){return Ct(Er(ir),gr)}:Er})},_e.parseRows=function(St,Ct){var rr={},tr={},Tr=[],Er=St.length,ir=0,gr=0,wr,Pr;function kr(){if(ir>=Er)return tr;if(Pr)return Pr=!1,rr;var yn=ir;if(St.charCodeAt(yn)===34){for(var bn=yn;bn++<Er;)if(St.charCodeAt(bn)===34){if(St.charCodeAt(bn+1)!==34)break;++bn}ir=bn+2;var In=St.charCodeAt(bn+1);return In===13?(Pr=!0,St.charCodeAt(bn+2)===10&&++ir):In===10&&(Pr=!0),St.slice(yn+1,bn).replace(/""/g,'"')}for(;ir<Er;){var In=St.charCodeAt(ir++),Xn=1;if(In===10)Pr=!0;else if(In===13)Pr=!0,St.charCodeAt(ir)===10&&(++ir,++Xn);else if(In!==ye)continue;return St.slice(yn,ir-Xn)}return St.slice(yn)}for(;(wr=kr())!==tr;){for(var pr=[];wr!==rr&&wr!==tr;)pr.push(wr),wr=kr();Ct&&(pr=Ct(pr,gr++))==null||Tr.push(pr)}return Tr},_e.format=function(St){if(Array.isArray(St[0]))return _e.formatRows(St);var Ct=new z,rr=[];return St.forEach(function(tr){for(var Tr in tr)Ct.has(Tr)||rr.push(Ct.add(Tr))}),[rr.map(tt).join(U)].concat(St.map(function(tr){return rr.map(function(Tr){return tt(tr[Tr])}).join(U)})).join(`
`)},_e.formatRows=function(St){return St.map(Le).join(`
`)};function Le(St){return St.map(tt).join(U)}function tt(St){return se.test(St)?'"'+St.replace(/\"/g,'""')+'"':St}return _e},e.csv=e.dsv(",","text/csv"),e.tsv=e.dsv("	","text/tab-separated-values");var hn,gi,Hn,qi,fa=this[B(this,"requestAnimationFrame")]||function(U){setTimeout(U,17)};e.timer=function(){eo.apply(this,arguments)};function eo(U,Q,se){var ye=arguments.length;ye<2&&(Q=0),ye<3&&(se=Date.now());var _e=se+Q,Ae={c:U,t:_e,n:null};return gi?gi.n=Ae:hn=Ae,gi=Ae,Hn||(qi=clearTimeout(qi),Hn=1,fa(ma)),Ae}function ma(){var U=so(),Q=ja()-U;Q>24?(isFinite(Q)&&(clearTimeout(qi),qi=setTimeout(ma,Q)),Hn=0):(Hn=1,fa(ma))}e.timer.flush=function(){so(),ja()};function so(){for(var U=Date.now(),Q=hn;Q;)U>=Q.t&&Q.c(U-Q.t)&&(Q.c=null),Q=Q.n;return U}function ja(){for(var U,Q=hn,se=1/0;Q;)Q.c?(Q.t<se&&(se=Q.t),Q=(U=Q).n):Q=U?U.n=Q.n:hn=Q.n;return gi=U,se}e.round=function(U,Q){return Q?Math.round(U*(Q=Math.pow(10,Q)))/Q:Math.round(U)},e.geom={};function Xo(U){return U[0]}function Uo(U){return U[1]}e.geom.hull=function(U){var Q=Xo,se=Uo;if(arguments.length)return ye(U);function ye(_e){if(_e.length<3)return[];var Ae=br(Q),Ge=br(se),Le,tt=_e.length,St=[],Ct=[];for(Le=0;Le<tt;Le++)St.push([+Ae.call(this,_e[Le],Le),+Ge.call(this,_e[Le],Le),Le]);for(St.sort(as),Le=0;Le<tt;Le++)Ct.push([St[Le][0],-St[Le][1]]);var rr=ms(St),tr=ms(Ct),Tr=tr[0]===rr[0],Er=tr[tr.length-1]===rr[rr.length-1],ir=[];for(Le=rr.length-1;Le>=0;--Le)ir.push(_e[St[rr[Le]][2]]);for(Le=+Tr;Le<tr.length-Er;++Le)ir.push(_e[St[tr[Le]][2]]);return ir}return ye.x=function(_e){return arguments.length?(Q=_e,ye):Q},ye.y=function(_e){return arguments.length?(se=_e,ye):se},ye};function ms(U){for(var Q=U.length,se=[0,1],ye=2,_e=2;_e<Q;_e++){for(;ye>1&&Kt(U[se[ye-2]],U[se[ye-1]],U[_e])<=0;)--ye;se[ye++]=_e}return se.slice(0,ye)}function as(U,Q){return U[0]-Q[0]||U[1]-Q[1]}e.geom.polygon=function(U){return X(U,il),U};var il=e.geom.polygon.prototype=[];il.area=function(){for(var U=-1,Q=this.length,se,ye=this[Q-1],_e=0;++U<Q;)se=ye,ye=this[U],_e+=se[1]*ye[0]-se[0]*ye[1];return _e*.5},il.centroid=function(U){var Q=-1,se=this.length,ye=0,_e=0,Ae,Ge=this[se-1],Le;for(arguments.length||(U=-1/(6*this.area()));++Q<se;)Ae=Ge,Ge=this[Q],Le=Ae[0]*Ge[1]-Ge[0]*Ae[1],ye+=(Ae[0]+Ge[0])*Le,_e+=(Ae[1]+Ge[1])*Le;return[ye*U,_e*U]},il.clip=function(U){for(var Q,se=Eo(U),ye=-1,_e=this.length-Eo(this),Ae,Ge,Le=this[_e-1],tt,St,Ct;++ye<_e;){for(Q=U.slice(),U.length=0,tt=this[ye],St=Q[(Ge=Q.length-se)-1],Ae=-1;++Ae<Ge;)Ct=Q[Ae],oo(Ct,Le,tt)?(oo(St,Le,tt)||U.push(cs(St,Ct,Le,tt)),U.push(Ct)):oo(St,Le,tt)&&U.push(cs(St,Ct,Le,tt)),St=Ct;se&&U.push(U[0]),Le=tt}return U};function oo(U,Q,se){return(se[0]-Q[0])*(U[1]-Q[1])<(se[1]-Q[1])*(U[0]-Q[0])}function cs(U,Q,se,ye){var _e=U[0],Ae=se[0],Ge=Q[0]-_e,Le=ye[0]-Ae,tt=U[1],St=se[1],Ct=Q[1]-tt,rr=ye[1]-St,tr=(Le*(tt-St)-rr*(_e-Ae))/(rr*Ge-Le*Ct);return[_e+tr*Ge,tt+tr*Ct]}function Eo(U){var Q=U[0],se=U[U.length-1];return!(Q[0]-se[0]||Q[1]-se[1])}var hs,Jo,Qo,Oa=[],co,Al,$l=[];function Nu(){ko(this),this.edge=this.site=this.circle=null}function os(U){var Q=Oa.pop()||new Nu;return Q.site=U,Q}function vn(U){Aa(U),Qo.remove(U),Oa.push(U),ko(U)}function bi(U){var Q=U.circle,se=Q.x,ye=Q.cy,_e={x:se,y:ye},Ae=U.P,Ge=U.N,Le=[U];vn(U);for(var tt=Ae;tt.circle&&p(se-tt.circle.x)<Et&&p(ye-tt.circle.cy)<Et;)Ae=tt.P,Le.unshift(tt),vn(tt),tt=Ae;Le.unshift(tt),Aa(tt);for(var St=Ge;St.circle&&p(se-St.circle.x)<Et&&p(ye-St.circle.cy)<Et;)Ge=St.N,Le.push(St),vn(St),St=Ge;Le.push(St),Aa(St);var Ct=Le.length,rr;for(rr=1;rr<Ct;++rr)St=Le[rr],tt=Le[rr-1],dl(St.edge,tt.site,St.site,_e);tt=Le[0],St=Le[Ct-1],St.edge=Rf(tt.site,St.site,null,_e),ii(tt),ii(St)}function ac(U){for(var Q=U.x,se=U.y,ye,_e,Ae,Ge,Le=Qo._;Le;)if(Ae=Pl(Le,se)-Q,Ae>Et)Le=Le.L;else if(Ge=Q-ss(Le,se),Ge>Et){if(!Le.R){ye=Le;break}Le=Le.R}else{Ae>-Et?(ye=Le.P,_e=Le):Ge>-Et?(ye=Le,_e=Le.N):ye=_e=Le;break}var tt=os(U);if(Qo.insert(ye,tt),!(!ye&&!_e)){if(ye===_e){Aa(ye),_e=os(ye.site),Qo.insert(tt,_e),tt.edge=_e.edge=Rf(ye.site,tt.site),ii(ye),ii(_e);return}if(!_e){tt.edge=Rf(ye.site,tt.site);return}Aa(ye),Aa(_e);var St=ye.site,Ct=St.x,rr=St.y,tr=U.x-Ct,Tr=U.y-rr,Er=_e.site,ir=Er.x-Ct,gr=Er.y-rr,wr=2*(tr*gr-Tr*ir),Pr=tr*tr+Tr*Tr,kr=ir*ir+gr*gr,pr={x:(gr*Pr-Tr*kr)/wr+Ct,y:(tr*kr-ir*Pr)/wr+rr};dl(_e.edge,St,Er,pr),tt.edge=Rf(St,U,null,pr),_e.edge=Rf(U,Er,null,pr),ii(ye),ii(_e)}}function Pl(U,Q){var se=U.site,ye=se.x,_e=se.y,Ae=_e-Q;if(!Ae)return ye;var Ge=U.P;if(!Ge)return-1/0;se=Ge.site;var Le=se.x,tt=se.y,St=tt-Q;if(!St)return Le;var Ct=Le-ye,rr=1/Ae-1/St,tr=Ct/St;return rr?(-tr+Math.sqrt(tr*tr-2*rr*(Ct*Ct/(-2*St)-tt+St/2+_e-Ae/2)))/rr+ye:(ye+Le)/2}function ss(U,Q){var se=U.N;if(se)return Pl(se,Q);var ye=U.site;return ye.y===Q?ye.x:1/0}function vl(U){this.site=U,this.edges=[]}vl.prototype.prepare=function(){for(var U=this.edges,Q=U.length,se;Q--;)se=U[Q].edge,(!se.b||!se.a)&&U.splice(Q,1);return U.sort(Rl),U.length};function $o(U){for(var Q=U[0][0],se=U[1][0],ye=U[0][1],_e=U[1][1],Ae,Ge,Le,tt,St=Jo,Ct=St.length,rr,tr,Tr,Er,ir,gr;Ct--;)if(rr=St[Ct],!(!rr||!rr.prepare()))for(Tr=rr.edges,Er=Tr.length,tr=0;tr<Er;)gr=Tr[tr].end(),Le=gr.x,tt=gr.y,ir=Tr[++tr%Er].start(),Ae=ir.x,Ge=ir.y,(p(Le-Ae)>Et||p(tt-Ge)>Et)&&(Tr.splice(tr,0,new ff(Wc(rr.site,gr,p(Le-Q)<Et&&_e-tt>Et?{x:Q,y:p(Ae-Q)<Et?Ge:_e}:p(tt-_e)<Et&&se-Le>Et?{x:p(Ge-_e)<Et?Ae:se,y:_e}:p(Le-se)<Et&&tt-ye>Et?{x:se,y:p(Ae-se)<Et?Ge:ye}:p(tt-ye)<Et&&Le-Q>Et?{x:p(Ge-ye)<Et?Ae:Q,y:ye}:null),rr.site,null)),++Er)}function Rl(U,Q){return Q.angle-U.angle}function xu(){ko(this),this.x=this.y=this.arc=this.site=this.cy=null}function ii(U){var Q=U.P,se=U.N;if(!(!Q||!se)){var ye=Q.site,_e=U.site,Ae=se.site;if(ye!==Ae){var Ge=_e.x,Le=_e.y,tt=ye.x-Ge,St=ye.y-Le,Ct=Ae.x-Ge,gr=Ae.y-Le,rr=2*(tt*gr-St*Ct);if(!(rr>=-Je)){var tr=tt*tt+St*St,Tr=Ct*Ct+gr*gr,Er=(gr*tr-St*Tr)/rr,ir=(tt*Tr-Ct*tr)/rr,gr=ir+Le,wr=$l.pop()||new xu;wr.arc=U,wr.site=_e,wr.x=Er+Ge,wr.y=gr+Math.sqrt(Er*Er+ir*ir),wr.cy=gr,U.circle=wr;for(var Pr=null,kr=Al._;kr;)if(wr.y<kr.y||wr.y===kr.y&&wr.x<=kr.x)if(kr.L)kr=kr.L;else{Pr=kr.P;break}else if(kr.R)kr=kr.R;else{Pr=kr;break}Al.insert(Pr,wr),Pr||(co=wr)}}}}function Aa(U){var Q=U.circle;Q&&(Q.P||(co=Q.N),Al.remove(Q),$l.push(Q),ko(Q),U.circle=null)}function Ca(U,Q,se,ye){return function(_e){var Ae=_e.a,Ge=_e.b,Le=Ae.x,tt=Ae.y,St=Ge.x,Ct=Ge.y,rr=0,tr=1,Tr=St-Le,Er=Ct-tt,ir;if(ir=U-Le,!(!Tr&&ir>0)){if(ir/=Tr,Tr<0){if(ir<rr)return;ir<tr&&(tr=ir)}else if(Tr>0){if(ir>tr)return;ir>rr&&(rr=ir)}if(ir=se-Le,!(!Tr&&ir<0)){if(ir/=Tr,Tr<0){if(ir>tr)return;ir>rr&&(rr=ir)}else if(Tr>0){if(ir<rr)return;ir<tr&&(tr=ir)}if(ir=Q-tt,!(!Er&&ir>0)){if(ir/=Er,Er<0){if(ir<rr)return;ir<tr&&(tr=ir)}else if(Er>0){if(ir>tr)return;ir>rr&&(rr=ir)}if(ir=ye-tt,!(!Er&&ir<0)){if(ir/=Er,Er<0){if(ir>tr)return;ir>rr&&(rr=ir)}else if(Er>0){if(ir<rr)return;ir<tr&&(tr=ir)}return rr>0&&(_e.a={x:Le+rr*Tr,y:tt+rr*Er}),tr<1&&(_e.b={x:Le+tr*Tr,y:tt+tr*Er}),_e}}}}}}function Fs(U){for(var Q=hs,se=Ca(U[0][0],U[0][1],U[1][0],U[1][1]),ye=Q.length,_e;ye--;)_e=Q[ye],(!Pf(_e,U)||!se(_e)||p(_e.a.x-_e.b.x)<Et&&p(_e.a.y-_e.b.y)<Et)&&(_e.a=_e.b=null,Q.splice(ye,1))}function Pf(U,Q){var se=U.b;if(se)return!0;var ye=U.a,_e=Q[0][0],Ae=Q[1][0],Ge=Q[0][1],Le=Q[1][1],tt=U.l,St=U.r,Ct=tt.x,rr=tt.y,tr=St.x,Tr=St.y,Er=(Ct+tr)/2,ir=(rr+Tr)/2,gr,wr;if(Tr===rr){if(Er<_e||Er>=Ae)return;if(Ct>tr){if(!ye)ye={x:Er,y:Ge};else if(ye.y>=Le)return;se={x:Er,y:Le}}else{if(!ye)ye={x:Er,y:Le};else if(ye.y<Ge)return;se={x:Er,y:Ge}}}else if(gr=(Ct-tr)/(Tr-rr),wr=ir-gr*Er,gr<-1||gr>1)if(Ct>tr){if(!ye)ye={x:(Ge-wr)/gr,y:Ge};else if(ye.y>=Le)return;se={x:(Le-wr)/gr,y:Le}}else{if(!ye)ye={x:(Le-wr)/gr,y:Le};else if(ye.y<Ge)return;se={x:(Ge-wr)/gr,y:Ge}}else if(rr<Tr){if(!ye)ye={x:_e,y:gr*_e+wr};else if(ye.x>=Ae)return;se={x:Ae,y:gr*Ae+wr}}else{if(!ye)ye={x:Ae,y:gr*Ae+wr};else if(ye.x<_e)return;se={x:_e,y:gr*_e+wr}}return U.a=ye,U.b=se,!0}function Ma(U,Q){this.l=U,this.r=Q,this.a=this.b=null}function Rf(U,Q,se,ye){var _e=new Ma(U,Q);return hs.push(_e),se&&dl(_e,U,Q,se),ye&&dl(_e,Q,U,ye),Jo[U.i].edges.push(new ff(_e,U,Q)),Jo[Q.i].edges.push(new ff(_e,Q,U)),_e}function Wc(U,Q,se){var ye=new Ma(U,null);return ye.a=Q,ye.b=se,hs.push(ye),ye}function dl(U,Q,se,ye){!U.a&&!U.b?(U.a=ye,U.l=Q,U.r=se):U.l===se?U.b=ye:U.a=ye}function ff(U,Q,se){var ye=U.a,_e=U.b;this.edge=U,this.site=Q,this.angle=se?Math.atan2(se.y-Q.y,se.x-Q.x):U.l===Q?Math.atan2(_e.x-ye.x,ye.y-_e.y):Math.atan2(ye.x-_e.x,_e.y-ye.y)}ff.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function $s(){this._=null}function ko(U){U.U=U.C=U.L=U.R=U.P=U.N=null}$s.prototype={insert:function(U,Q){var se,ye,_e;if(U){if(Q.P=U,Q.N=U.N,U.N&&(U.N.P=Q),U.N=Q,U.R){for(U=U.R;U.L;)U=U.L;U.L=Q}else U.R=Q;se=U}else this._?(U=Ah(this._),Q.P=null,Q.N=U,U.P=U.L=Q,se=U):(Q.P=Q.N=null,this._=Q,se=null);for(Q.L=Q.R=null,Q.U=se,Q.C=!0,U=Q;se&&se.C;)ye=se.U,se===ye.L?(_e=ye.R,_e&&_e.C?(se.C=_e.C=!1,ye.C=!0,U=ye):(U===se.R&&(eu(this,se),U=se,se=U.U),se.C=!1,ye.C=!0,_u(this,ye))):(_e=ye.L,_e&&_e.C?(se.C=_e.C=!1,ye.C=!0,U=ye):(U===se.L&&(_u(this,se),U=se,se=U.U),se.C=!1,ye.C=!0,eu(this,ye))),se=U.U;this._.C=!1},remove:function(U){U.N&&(U.N.P=U.P),U.P&&(U.P.N=U.N),U.N=U.P=null;var Q=U.U,se,ye=U.L,_e=U.R,Ae,Ge;if(ye?_e?Ae=Ah(_e):Ae=ye:Ae=_e,Q?Q.L===U?Q.L=Ae:Q.R=Ae:this._=Ae,ye&&_e?(Ge=Ae.C,Ae.C=U.C,Ae.L=ye,ye.U=Ae,Ae!==_e?(Q=Ae.U,Ae.U=U.U,U=Ae.R,Q.L=U,Ae.R=_e,_e.U=Ae):(Ae.U=Q,Q=Ae,U=Ae.R)):(Ge=U.C,U=Ae),U&&(U.U=Q),!Ge){if(U&&U.C){U.C=!1;return}do{if(U===this._)break;if(U===Q.L){if(se=Q.R,se.C&&(se.C=!1,Q.C=!0,eu(this,Q),se=Q.R),se.L&&se.L.C||se.R&&se.R.C){(!se.R||!se.R.C)&&(se.L.C=!1,se.C=!0,_u(this,se),se=Q.R),se.C=Q.C,Q.C=se.R.C=!1,eu(this,Q),U=this._;break}}else if(se=Q.L,se.C&&(se.C=!1,Q.C=!0,_u(this,Q),se=Q.L),se.L&&se.L.C||se.R&&se.R.C){(!se.L||!se.L.C)&&(se.R.C=!1,se.C=!0,eu(this,se),se=Q.L),se.C=Q.C,Q.C=se.L.C=!1,_u(this,Q),U=this._;break}se.C=!0,U=Q,Q=Q.U}while(!U.C);U&&(U.C=!1)}}};function eu(U,Q){var se=Q,ye=Q.R,_e=se.U;_e?_e.L===se?_e.L=ye:_e.R=ye:U._=ye,ye.U=_e,se.U=ye,se.R=ye.L,se.R&&(se.R.U=se),ye.L=se}function _u(U,Q){var se=Q,ye=Q.L,_e=se.U;_e?_e.L===se?_e.L=ye:_e.R=ye:U._=ye,ye.U=_e,se.U=ye,se.L=ye.R,se.L&&(se.L.U=se),ye.R=se}function Ah(U){for(;U.L;)U=U.L;return U}function Uu(U,Q){var se=U.sort(nv).pop(),ye,_e,Ae;for(hs=[],Jo=new Array(U.length),Qo=new $s,Al=new $s;;)if(Ae=co,se&&(!Ae||se.y<Ae.y||se.y===Ae.y&&se.x<Ae.x))(se.x!==ye||se.y!==_e)&&(Jo[se.i]=new vl(se),ac(se),ye=se.x,_e=se.y),se=U.pop();else if(Ae)bi(Ae.arc);else break;Q&&(Fs(Q),$o(Q));var Ge={cells:Jo,edges:hs};return Qo=Al=hs=Jo=null,Ge}function nv(U,Q){return Q.y-U.y||Q.x-U.x}e.geom.voronoi=function(U){var Q=Xo,se=Uo,ye=Q,_e=se,Ae=Ac;if(U)return Ge(U);function Ge(tt){var St=new Array(tt.length),Ct=Ae[0][0],rr=Ae[0][1],tr=Ae[1][0],Tr=Ae[1][1];return Uu(Le(tt),Ae).cells.forEach(function(Er,ir){var gr=Er.edges,wr=Er.site,Pr=St[ir]=gr.length?gr.map(function(kr){var pr=kr.start();return[pr.x,pr.y]}):wr.x>=Ct&&wr.x<=tr&&wr.y>=rr&&wr.y<=Tr?[[Ct,Tr],[tr,Tr],[tr,rr],[Ct,rr]]:[];Pr.point=tt[ir]}),St}function Le(tt){return tt.map(function(St,Ct){return{x:Math.round(ye(St,Ct)/Et)*Et,y:Math.round(_e(St,Ct)/Et)*Et,i:Ct}})}return Ge.links=function(tt){return Uu(Le(tt)).edges.filter(function(St){return St.l&&St.r}).map(function(St){return{source:tt[St.l.i],target:tt[St.r.i]}})},Ge.triangles=function(tt){var St=[];return Uu(Le(tt)).cells.forEach(function(Ct,rr){for(var tr=Ct.site,Tr=Ct.edges.sort(Rl),Er=-1,ir=Tr.length,gr,wr,Pr=Tr[ir-1].edge,kr=Pr.l===tr?Pr.r:Pr.l;++Er<ir;)gr=Pr,wr=kr,Pr=Tr[Er].edge,kr=Pr.l===tr?Pr.r:Pr.l,rr<wr.i&&rr<kr.i&&lo(tr,wr,kr)<0&&St.push([tt[rr],tt[wr.i],tt[kr.i]])}),St},Ge.x=function(tt){return arguments.length?(ye=br(Q=tt),Ge):Q},Ge.y=function(tt){return arguments.length?(_e=br(se=tt),Ge):se},Ge.clipExtent=function(tt){return arguments.length?(Ae=tt==null?Ac:tt,Ge):Ae===Ac?null:Ae},Ge.size=function(tt){return arguments.length?Ge.clipExtent(tt&&[[0,0],tt]):Ae===Ac?null:Ae&&Ae[1]},Ge};var Ac=[[-1e6,-1e6],[1e6,1e6]];function lo(U,Q,se){return(U.x-se.x)*(Q.y-U.y)-(U.x-Q.x)*(se.y-U.y)}e.geom.delaunay=function(U){return e.geom.voronoi().triangles(U)},e.geom.quadtree=function(U,Q,se,ye,_e){var Ae=Xo,Ge=Uo,Le;if(Le=arguments.length)return Ae=Df,Ge=Mh,Le===3&&(_e=se,ye=Q,se=Q=0),tt(U);function tt(St){var Ct,rr=br(Ae),tr=br(Ge),Tr,Er,ir,gr,wr,Pr,kr,pr;if(Q!=null)wr=Q,Pr=se,kr=ye,pr=_e;else if(kr=pr=-(wr=Pr=1/0),Tr=[],Er=[],gr=St.length,Le)for(ir=0;ir<gr;++ir)Ct=St[ir],Ct.x<wr&&(wr=Ct.x),Ct.y<Pr&&(Pr=Ct.y),Ct.x>kr&&(kr=Ct.x),Ct.y>pr&&(pr=Ct.y),Tr.push(Ct.x),Er.push(Ct.y);else for(ir=0;ir<gr;++ir){var yn=+rr(Ct=St[ir],ir),bn=+tr(Ct,ir);yn<wr&&(wr=yn),bn<Pr&&(Pr=bn),yn>kr&&(kr=yn),bn>pr&&(pr=bn),Tr.push(yn),Er.push(bn)}var In=kr-wr,Xn=pr-Pr;In>Xn?pr=Pr+In:kr=wr+Xn;function Ci(Gi,va,go,Po,Ao,Sn,da,Sa){if(!(isNaN(go)||isNaN(Po)))if(Gi.leaf){var La=Gi.x,Ts=Gi.y;if(La!=null)if(p(La-go)+p(Ts-Po)<.01)Fi(Gi,va,go,Po,Ao,Sn,da,Sa);else{var Gs=Gi.point;Gi.x=Gi.y=Gi.point=null,Fi(Gi,Gs,La,Ts,Ao,Sn,da,Sa),Fi(Gi,va,go,Po,Ao,Sn,da,Sa)}else Gi.x=go,Gi.y=Po,Gi.point=va}else Fi(Gi,va,go,Po,Ao,Sn,da,Sa)}function Fi(Gi,va,go,Po,Ao,Sn,da,Sa){var La=(Ao+da)*.5,Ts=(Sn+Sa)*.5,Gs=go>=La,yl=Po>=Ts,ls=yl<<1|Gs;Gi.leaf=!1,Gi=Gi.nodes[ls]||(Gi.nodes[ls]=Us()),Gs?Ao=La:da=La,yl?Sn=Ts:Sa=Ts,Ci(Gi,va,go,Po,Ao,Sn,da,Sa)}var xa=Us();if(xa.add=function(Gi){Ci(xa,Gi,+rr(Gi,++ir),+tr(Gi,ir),wr,Pr,kr,pr)},xa.visit=function(Gi){xs(Gi,xa,wr,Pr,kr,pr)},xa.find=function(Gi){return Sh(xa,Gi[0],Gi[1],wr,Pr,kr,pr)},ir=-1,Q==null){for(;++ir<gr;)Ci(xa,St[ir],Tr[ir],Er[ir],wr,Pr,kr,pr);--ir}else St.forEach(xa.add);return Tr=Er=St=Ct=null,xa}return tt.x=function(St){return arguments.length?(Ae=St,tt):Ae},tt.y=function(St){return arguments.length?(Ge=St,tt):Ge},tt.extent=function(St){return arguments.length?(St==null?Q=se=ye=_e=null:(Q=+St[0][0],se=+St[0][1],ye=+St[1][0],_e=+St[1][1]),tt):Q==null?null:[[Q,se],[ye,_e]]},tt.size=function(St){return arguments.length?(St==null?Q=se=ye=_e=null:(Q=se=0,ye=+St[0],_e=+St[1]),tt):Q==null?null:[ye-Q,_e-se]},tt};function Df(U){return U.x}function Mh(U){return U.y}function Us(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function xs(U,Q,se,ye,_e,Ae){if(!U(Q,se,ye,_e,Ae)){var Ge=(se+_e)*.5,Le=(ye+Ae)*.5,tt=Q.nodes;tt[0]&&xs(U,tt[0],se,ye,Ge,Le),tt[1]&&xs(U,tt[1],Ge,ye,_e,Le),tt[2]&&xs(U,tt[2],se,Le,Ge,Ae),tt[3]&&xs(U,tt[3],Ge,Le,_e,Ae)}}function Sh(U,Q,se,ye,_e,Ae,Ge){var Le=1/0,tt;return function St(Ct,rr,tr,Tr,Er){if(!(rr>Ae||tr>Ge||Tr<ye||Er<_e)){if(ir=Ct.point){var ir,gr=Q-Ct.x,wr=se-Ct.y,Pr=gr*gr+wr*wr;if(Pr<Le){var kr=Math.sqrt(Le=Pr);ye=Q-kr,_e=se-kr,Ae=Q+kr,Ge=se+kr,tt=ir}}for(var pr=Ct.nodes,yn=(rr+Tr)*.5,bn=(tr+Er)*.5,In=Q>=yn,Xn=se>=bn,Ci=Xn<<1|In,Fi=Ci+4;Ci<Fi;++Ci)if(Ct=pr[Ci&3])switch(Ci&3){case 0:St(Ct,rr,tr,yn,bn);break;case 1:St(Ct,yn,tr,Tr,bn);break;case 2:St(Ct,rr,bn,yn,Er);break;case 3:St(Ct,yn,bn,Tr,Er);break}}}(U,ye,_e,Ae,Ge),tt}e.interpolateRgb=cf;function cf(U,Q){U=e.rgb(U),Q=e.rgb(Q);var se=U.r,ye=U.g,_e=U.b,Ae=Q.r-se,Ge=Q.g-ye,Le=Q.b-_e;return function(tt){return"#"+Yn(Math.round(se+Ae*tt))+Yn(Math.round(ye+Ge*tt))+Yn(Math.round(_e+Le*tt))}}e.interpolateObject=To;function To(U,Q){var se={},ye={},_e;for(_e in U)_e in Q?se[_e]=qs(U[_e],Q[_e]):ye[_e]=U[_e];for(_e in Q)_e in U||(ye[_e]=Q[_e]);return function(Ae){for(_e in se)ye[_e]=se[_e](Ae);return ye}}e.interpolateNumber=vs;function vs(U,Q){return U=+U,Q=+Q,function(se){return U*(1-se)+Q*se}}e.interpolateString=po;function po(U,Q){var se=Co.lastIndex=Mc.lastIndex=0,ye,_e,Ae,Ge=-1,Le=[],tt=[];for(U=U+"",Q=Q+"";(ye=Co.exec(U))&&(_e=Mc.exec(Q));)(Ae=_e.index)>se&&(Ae=Q.slice(se,Ae),Le[Ge]?Le[Ge]+=Ae:Le[++Ge]=Ae),(ye=ye[0])===(_e=_e[0])?Le[Ge]?Le[Ge]+=_e:Le[++Ge]=_e:(Le[++Ge]=null,tt.push({i:Ge,x:vs(ye,_e)})),se=Mc.lastIndex;return se<Q.length&&(Ae=Q.slice(se),Le[Ge]?Le[Ge]+=Ae:Le[++Ge]=Ae),Le.length<2?tt[0]?(Q=tt[0].x,function(St){return Q(St)+""}):function(){return Q}:(Q=tt.length,function(St){for(var Ct=0,rr;Ct<Q;++Ct)Le[(rr=tt[Ct]).i]=rr.x(St);return Le.join("")})}var Co=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mc=new RegExp(Co.source,"g");e.interpolate=qs;function qs(U,Q){for(var se=e.interpolators.length,ye;--se>=0&&!(ye=e.interpolators[se](U,Q)););return ye}e.interpolators=[function(U,Q){var se=typeof Q;return(se==="string"?ur.has(Q.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(Q)?cf:po:Q instanceof Ei?cf:Array.isArray(Q)?Vl:se==="object"&&isNaN(Q)?To:vs)(U,Q)}],e.interpolateArray=Vl;function Vl(U,Q){var se=[],ye=[],_e=U.length,Ae=Q.length,Ge=Math.min(U.length,Q.length),Le;for(Le=0;Le<Ge;++Le)se.push(qs(U[Le],Q[Le]));for(;Le<_e;++Le)ye[Le]=U[Le];for(;Le<Ae;++Le)ye[Le]=Q[Le];return function(tt){for(Le=0;Le<Ge;++Le)ye[Le]=se[Le](tt);return ye}}var hf=function(){return O},_d=e.map({linear:hf,poly:iv,quad:function(){return Dv},cubic:function(){return vf},sin:function(){return Eh},exp:function(){return av},circle:function(){return wu},elastic:Iv,back:ov,bounce:function(){return kh}}),bu=e.map({in:O,out:Hl,"in-out":ho,"out-in":function(U){return ho(Hl(U))}});e.ease=function(U){var Q=U.indexOf("-"),se=Q>=0?U.slice(0,Q):U,ye=Q>=0?U.slice(Q+1):"in";return se=_d.get(se)||hf,ye=bu.get(ye)||O,Wp(ye(se.apply(null,t.call(arguments,1))))};function Wp(U){return function(Q){return Q<=0?0:Q>=1?1:U(Q)}}function Hl(U){return function(Q){return 1-U(1-Q)}}function ho(U){return function(Q){return .5*(Q<.5?U(2*Q):2-U(2-2*Q))}}function Dv(U){return U*U}function vf(U){return U*U*U}function Gl(U){if(U<=0)return 0;if(U>=1)return 1;var Q=U*U,se=Q*U;return 4*(U<.5?se:3*(U-Q)+se-.75)}function iv(U){return function(Q){return Math.pow(Q,U)}}function Eh(U){return 1-Math.cos(U*de)}function av(U){return Math.pow(2,10*(U-1))}function wu(U){return 1-Math.sqrt(1-U*U)}function Iv(U,Q){var se;return arguments.length<2&&(Q=.45),arguments.length?se=Q/At*Math.asin(1/U):(U=1,se=Q/4),function(ye){return 1+U*Math.pow(2,-10*ye)*Math.sin((ye-se)*At/Q)}}function ov(U){return U||(U=1.70158),function(Q){return Q*Q*((U+1)*Q-U)}}function kh(U){return U<1/2.75?7.5625*U*U:U<2/2.75?7.5625*(U-=1.5/2.75)*U+.75:U<2.5/2.75?7.5625*(U-=2.25/2.75)*U+.9375:7.5625*(U-=2.625/2.75)*U+.984375}e.interpolateHcl=sv;function sv(U,Q){U=e.hcl(U),Q=e.hcl(Q);var se=U.h,ye=U.c,_e=U.l,Ae=Q.h-se,Ge=Q.c-ye,Le=Q.l-_e;return isNaN(Ge)&&(Ge=0,ye=isNaN(ye)?Q.c:ye),isNaN(Ae)?(Ae=0,se=isNaN(se)?Q.h:se):Ae>180?Ae-=360:Ae<-180&&(Ae+=360),function(tt){return nr(se+Ae*tt,ye+Ge*tt,_e+Le*tt)+""}}e.interpolateHsl=bd;function bd(U,Q){U=e.hsl(U),Q=e.hsl(Q);var se=U.h,ye=U.s,_e=U.l,Ae=Q.h-se,Ge=Q.s-ye,Le=Q.l-_e;return isNaN(Ge)&&(Ge=0,ye=isNaN(ye)?Q.s:ye),isNaN(Ae)?(Ae=0,se=isNaN(se)?Q.h:se):Ae>180?Ae-=360:Ae<-180&&(Ae+=360),function(tt){return lt(se+Ae*tt,ye+Ge*tt,_e+Le*tt)+""}}e.interpolateLab=Hd;function Hd(U,Q){U=e.lab(U),Q=e.lab(Q);var se=U.l,ye=U.a,_e=U.b,Ae=Q.l-se,Ge=Q.a-ye,Le=Q.b-_e;return function(tt){return Wr(se+Ae*tt,ye+Ge*tt,_e+Le*tt)+""}}e.interpolateRound=If;function If(U,Q){return Q-=U,function(se){return Math.round(U+Q*se)}}e.transform=function(U){var Q=i.createElementNS(e.ns.prefix.svg,"g");return(e.transform=function(se){if(se!=null){Q.setAttribute("transform",se);var ye=Q.transform.baseVal.consolidate()}return new Fv(ye?ye.matrix:Sc)})(U)};function Fv(U){var Q=[U.a,U.b],se=[U.c,U.d],ye=Ch(Q),_e=oc(Q,se),Ae=Ch(Vu(se,Q,-_e))||0;Q[0]*se[1]<se[0]*Q[1]&&(Q[0]*=-1,Q[1]*=-1,ye*=-1,_e*=-1),this.rotate=(ye?Math.atan2(Q[1],Q[0]):Math.atan2(-se[0],se[1]))*nt,this.translate=[U.e,U.f],this.scale=[ye,Ae],this.skew=Ae?Math.atan2(_e,Ae)*nt:0}Fv.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function oc(U,Q){return U[0]*Q[0]+U[1]*Q[1]}function Ch(U){var Q=Math.sqrt(oc(U,U));return Q&&(U[0]/=Q,U[1]/=Q),Q}function Vu(U,Q,se){return U[0]+=se*Q[0],U[1]+=se*Q[1],U}var Sc={a:1,b:0,c:0,d:1,e:0,f:0};e.interpolateTransform=uv;function Ff(U){return U.length?U.pop()+",":""}function qv(U,Q,se,ye){if(U[0]!==Q[0]||U[1]!==Q[1]){var _e=se.push("translate(",null,",",null,")");ye.push({i:_e-4,x:vs(U[0],Q[0])},{i:_e-2,x:vs(U[1],Q[1])})}else(Q[0]||Q[1])&&se.push("translate("+Q+")")}function zv(U,Q,se,ye){U!==Q?(U-Q>180?Q+=360:Q-U>180&&(U+=360),ye.push({i:se.push(Ff(se)+"rotate(",null,")")-2,x:vs(U,Q)})):Q&&se.push(Ff(se)+"rotate("+Q+")")}function Ov(U,Q,se,ye){U!==Q?ye.push({i:se.push(Ff(se)+"skewX(",null,")")-2,x:vs(U,Q)}):Q&&se.push(Ff(se)+"skewX("+Q+")")}function lv(U,Q,se,ye){if(U[0]!==Q[0]||U[1]!==Q[1]){var _e=se.push(Ff(se)+"scale(",null,",",null,")");ye.push({i:_e-4,x:vs(U[0],Q[0])},{i:_e-2,x:vs(U[1],Q[1])})}else(Q[0]!==1||Q[1]!==1)&&se.push(Ff(se)+"scale("+Q+")")}function uv(U,Q){var se=[],ye=[];return U=e.transform(U),Q=e.transform(Q),qv(U.translate,Q.translate,se,ye),zv(U.rotate,Q.rotate,se,ye),Ov(U.skew,Q.skew,se,ye),lv(U.scale,Q.scale,se,ye),U=Q=null,function(_e){for(var Ae=-1,Ge=ye.length,Le;++Ae<Ge;)se[(Le=ye[Ae]).i]=Le.x(_e);return se.join("")}}function Bv(U,Q){return Q=(Q-=U=+U)||1/Q,function(se){return(se-U)/Q}}function tu(U,Q){return Q=(Q-=U=+U)||1/Q,function(se){return Math.max(0,Math.min(1,(se-U)/Q))}}e.layout={},e.layout.bundle=function(){return function(U){for(var Q=[],se=-1,ye=U.length;++se<ye;)Q.push(fv(U[se]));return Q}};function fv(U){for(var Q=U.source,se=U.target,ye=ru(Q,se),_e=[Q];Q!==ye;)Q=Q.parent,_e.push(Q);for(var Ae=_e.length;se!==ye;)_e.splice(Ae,0,se),se=se.parent;return _e}function al(U){for(var Q=[],se=U.parent;se!=null;)Q.push(U),U=se,se=se.parent;return Q.push(U),Q}function ru(U,Q){if(U===Q)return U;for(var se=al(U),ye=al(Q),_e=se.pop(),Ae=ye.pop(),Ge=null;_e===Ae;)Ge=_e,_e=se.pop(),Ae=ye.pop();return Ge}e.layout.chord=function(){var U={},Q,se,ye,_e,Ae=0,Ge,Le,tt;function St(){var rr={},tr=[],Tr=e.range(_e),Er=[],ir,gr,wr,Pr,kr;for(Q=[],se=[],ir=0,Pr=-1;++Pr<_e;){for(gr=0,kr=-1;++kr<_e;)gr+=ye[Pr][kr];tr.push(gr),Er.push(e.range(_e)),ir+=gr}for(Ge&&Tr.sort(function(xa,Gi){return Ge(tr[xa],tr[Gi])}),Le&&Er.forEach(function(xa,Gi){xa.sort(function(va,go){return Le(ye[Gi][va],ye[Gi][go])})}),ir=(At-Ae*_e)/ir,gr=0,Pr=-1;++Pr<_e;){for(wr=gr,kr=-1;++kr<_e;){var pr=Tr[Pr],yn=Er[pr][kr],bn=ye[pr][yn],In=gr,Xn=gr+=bn*ir;rr[pr+"-"+yn]={index:pr,subindex:yn,startAngle:In,endAngle:Xn,value:bn}}se[pr]={index:pr,startAngle:wr,endAngle:gr,value:tr[pr]},gr+=Ae}for(Pr=-1;++Pr<_e;)for(kr=Pr-1;++kr<_e;){var Ci=rr[Pr+"-"+kr],Fi=rr[kr+"-"+Pr];(Ci.value||Fi.value)&&Q.push(Ci.value<Fi.value?{source:Fi,target:Ci}:{source:Ci,target:Fi})}tt&&Ct()}function Ct(){Q.sort(function(rr,tr){return tt((rr.source.value+rr.target.value)/2,(tr.source.value+tr.target.value)/2)})}return U.matrix=function(rr){return arguments.length?(_e=(ye=rr)&&ye.length,Q=se=null,U):ye},U.padding=function(rr){return arguments.length?(Ae=rr,Q=se=null,U):Ae},U.sortGroups=function(rr){return arguments.length?(Ge=rr,Q=se=null,U):Ge},U.sortSubgroups=function(rr){return arguments.length?(Le=rr,Q=null,U):Le},U.sortChords=function(rr){return arguments.length?(tt=rr,Q&&Ct(),U):tt},U.chords=function(){return Q||St(),Q},U.groups=function(){return se||St(),se},U},e.layout.force=function(){var U={},Q=e.dispatch("start","tick","end"),se,ye=[1,1],_e,Ae,Ge=.9,Le=zs,tt=Gd,St=-30,Ct=Yd,rr=.1,tr=.64,Tr=[],Er=[],ir,gr,wr;function Pr(pr){return function(yn,bn,In,Xn){if(yn.point!==pr){var Ci=yn.cx-pr.x,Fi=yn.cy-pr.y,xa=Xn-bn,Gi=Ci*Ci+Fi*Fi;if(xa*xa/tr<Gi){if(Gi<Ct){var va=yn.charge/Gi;pr.px-=Ci*va,pr.py-=Fi*va}return!0}if(yn.point&&Gi&&Gi<Ct){var va=yn.pointCharge/Gi;pr.px-=Ci*va,pr.py-=Fi*va}}return!yn.charge}}U.tick=function(){if((Ae*=.99)<.005)return se=null,Q.end({type:"end",alpha:Ae=0}),!0;var pr=Tr.length,yn=Er.length,bn,In,Xn,Ci,Fi,xa,Gi,va,go;for(In=0;In<yn;++In)Xn=Er[In],Ci=Xn.source,Fi=Xn.target,va=Fi.x-Ci.x,go=Fi.y-Ci.y,(xa=va*va+go*go)&&(xa=Ae*gr[In]*((xa=Math.sqrt(xa))-ir[In])/xa,va*=xa,go*=xa,Fi.x-=va*(Gi=Ci.weight+Fi.weight?Ci.weight/(Ci.weight+Fi.weight):.5),Fi.y-=go*Gi,Ci.x+=va*(Gi=1-Gi),Ci.y+=go*Gi);if((Gi=Ae*rr)&&(va=ye[0]/2,go=ye[1]/2,In=-1,Gi))for(;++In<pr;)Xn=Tr[In],Xn.x+=(va-Xn.x)*Gi,Xn.y+=(go-Xn.y)*Gi;if(St)for(Dl(bn=e.geom.quadtree(Tr),Ae,wr),In=-1;++In<pr;)(Xn=Tr[In]).fixed||bn.visit(Pr(Xn));for(In=-1;++In<pr;)Xn=Tr[In],Xn.fixed?(Xn.x=Xn.px,Xn.y=Xn.py):(Xn.x-=(Xn.px-(Xn.px=Xn.x))*Ge,Xn.y-=(Xn.py-(Xn.py=Xn.y))*Ge);Q.tick({type:"tick",alpha:Ae})},U.nodes=function(pr){return arguments.length?(Tr=pr,U):Tr},U.links=function(pr){return arguments.length?(Er=pr,U):Er},U.size=function(pr){return arguments.length?(ye=pr,U):ye},U.linkDistance=function(pr){return arguments.length?(Le=typeof pr=="function"?pr:+pr,U):Le},U.distance=U.linkDistance,U.linkStrength=function(pr){return arguments.length?(tt=typeof pr=="function"?pr:+pr,U):tt},U.friction=function(pr){return arguments.length?(Ge=+pr,U):Ge},U.charge=function(pr){return arguments.length?(St=typeof pr=="function"?pr:+pr,U):St},U.chargeDistance=function(pr){return arguments.length?(Ct=pr*pr,U):Math.sqrt(Ct)},U.gravity=function(pr){return arguments.length?(rr=+pr,U):rr},U.theta=function(pr){return arguments.length?(tr=pr*pr,U):Math.sqrt(tr)},U.alpha=function(pr){return arguments.length?(pr=+pr,Ae?pr>0?Ae=pr:(se.c=null,se.t=NaN,se=null,Q.end({type:"end",alpha:Ae=0})):pr>0&&(Q.start({type:"start",alpha:Ae=pr}),se=eo(U.tick)),U):Ae},U.start=function(){var pr,yn=Tr.length,bn=Er.length,In=ye[0],Xn=ye[1],Ci,Fi;for(pr=0;pr<yn;++pr)(Fi=Tr[pr]).index=pr,Fi.weight=0;for(pr=0;pr<bn;++pr)Fi=Er[pr],typeof Fi.source=="number"&&(Fi.source=Tr[Fi.source]),typeof Fi.target=="number"&&(Fi.target=Tr[Fi.target]),++Fi.source.weight,++Fi.target.weight;for(pr=0;pr<yn;++pr)Fi=Tr[pr],isNaN(Fi.x)&&(Fi.x=xa("x",In)),isNaN(Fi.y)&&(Fi.y=xa("y",Xn)),isNaN(Fi.px)&&(Fi.px=Fi.x),isNaN(Fi.py)&&(Fi.py=Fi.y);if(ir=[],typeof Le=="function")for(pr=0;pr<bn;++pr)ir[pr]=+Le.call(this,Er[pr],pr);else for(pr=0;pr<bn;++pr)ir[pr]=Le;if(gr=[],typeof tt=="function")for(pr=0;pr<bn;++pr)gr[pr]=+tt.call(this,Er[pr],pr);else for(pr=0;pr<bn;++pr)gr[pr]=tt;if(wr=[],typeof St=="function")for(pr=0;pr<yn;++pr)wr[pr]=+St.call(this,Tr[pr],pr);else for(pr=0;pr<yn;++pr)wr[pr]=St;function xa(Gi,va){if(!Ci){for(Ci=new Array(yn),Ao=0;Ao<yn;++Ao)Ci[Ao]=[];for(Ao=0;Ao<bn;++Ao){var go=Er[Ao];Ci[go.source.index].push(go.target),Ci[go.target.index].push(go.source)}}for(var Po=Ci[pr],Ao=-1,Sn=Po.length,da;++Ao<Sn;)if(!isNaN(da=Po[Ao][Gi]))return da;return Math.random()*va}return U.resume()},U.resume=function(){return U.alpha(.1)},U.stop=function(){return U.alpha(0)},U.drag=function(){if(_e||(_e=e.behavior.drag().origin(O).on("dragstart.force",qf).on("drag.force",kr).on("dragend.force",Vs)),!arguments.length)return _e;this.on("mouseover.force",Xc).on("mouseout.force",zf).call(_e)};function kr(pr){pr.px=e.event.x,pr.py=e.event.y,U.resume()}return e.rebind(U,Q,"on")};function qf(U){U.fixed|=2}function Vs(U){U.fixed&=-7}function Xc(U){U.fixed|=4,U.px=U.x,U.py=U.y}function zf(U){U.fixed&=-5}function Dl(U,Q,se){var ye=0,_e=0;if(U.charge=0,!U.leaf)for(var Ae=U.nodes,Ge=Ae.length,Le=-1,tt;++Le<Ge;)tt=Ae[Le],tt!=null&&(Dl(tt,Q,se),U.charge+=tt.charge,ye+=tt.charge*tt.cx,_e+=tt.charge*tt.cy);if(U.point){U.leaf||(U.point.x+=Math.random()-.5,U.point.y+=Math.random()-.5);var St=Q*se[U.point.index];U.charge+=U.pointCharge=St,ye+=St*U.point.x,_e+=St*U.point.y}U.cx=ye/U.charge,U.cy=_e/U.charge}var zs=20,Gd=1,Yd=1/0;e.layout.hierarchy=function(){var U=jc,Q=Wd,se=Zc;function ye(_e){var Ae=[_e],Ge=[],Le;for(_e.depth=0;(Le=Ae.pop())!=null;)if(Ge.push(Le),(St=Q.call(ye,Le,Le.depth))&&(tt=St.length)){for(var tt,St,Ct;--tt>=0;)Ae.push(Ct=St[tt]),Ct.parent=Le,Ct.depth=Le.depth+1;se&&(Le.value=0),Le.children=St}else se&&(Le.value=+se.call(ye,Le,Le.depth)||0),delete Le.children;return nu(_e,function(rr){var tr,Tr;U&&(tr=rr.children)&&tr.sort(U),se&&(Tr=rr.parent)&&(Tr.value+=rr.value)}),Ge}return ye.sort=function(_e){return arguments.length?(U=_e,ye):U},ye.children=function(_e){return arguments.length?(Q=_e,ye):Q},ye.value=function(_e){return arguments.length?(se=_e,ye):se},ye.revalue=function(_e){return se&&(df(_e,function(Ae){Ae.children&&(Ae.value=0)}),nu(_e,function(Ae){var Ge;Ae.children||(Ae.value=+se.call(ye,Ae,Ae.depth)||0),(Ge=Ae.parent)&&(Ge.value+=Ae.value)})),_e},ye};function Tu(U,Q){return e.rebind(U,Q,"sort","children","value"),U.nodes=U,U.links=Au,U}function df(U,Q){for(var se=[U];(U=se.pop())!=null;)if(Q(U),(_e=U.children)&&(ye=_e.length))for(var ye,_e;--ye>=0;)se.push(_e[ye])}function nu(U,Q){for(var se=[U],ye=[];(U=se.pop())!=null;)if(ye.push(U),(Ge=U.children)&&(Ae=Ge.length))for(var _e=-1,Ae,Ge;++_e<Ae;)se.push(Ge[_e]);for(;(U=ye.pop())!=null;)Q(U)}function Wd(U){return U.children}function Zc(U){return U.value}function jc(U,Q){return Q.value-U.value}function Au(U){return e.merge(U.map(function(Q){return(Q.children||[]).map(function(se){return{source:Q,target:se}})}))}e.layout.partition=function(){var U=e.layout.hierarchy(),Q=[1,1];function se(Ae,Ge,Le,tt){var St=Ae.children;if(Ae.x=Ge,Ae.y=Ae.depth*tt,Ae.dx=Le,Ae.dy=tt,St&&(rr=St.length)){var Ct=-1,rr,tr,Tr;for(Le=Ae.value?Le/Ae.value:0;++Ct<rr;)se(tr=St[Ct],Ge,Tr=tr.value*Le,tt),Ge+=Tr}}function ye(Ae){var Ge=Ae.children,Le=0;if(Ge&&(St=Ge.length))for(var tt=-1,St;++tt<St;)Le=Math.max(Le,ye(Ge[tt]));return 1+Le}function _e(Ae,Ge){var Le=U.call(this,Ae,Ge);return se(Le[0],0,Q[0],Q[1]/ye(Le[0])),Le}return _e.size=function(Ae){return arguments.length?(Q=Ae,_e):Q},Tu(_e,U)},e.layout.pie=function(){var U=Number,Q=Nv,se=0,ye=At,_e=0;function Ae(Ge){var Le=Ge.length,tt=Ge.map(function(Pr,kr){return+U.call(Ae,Pr,kr)}),St=+(typeof se=="function"?se.apply(this,arguments):se),Ct=(typeof ye=="function"?ye.apply(this,arguments):ye)-St,rr=Math.min(Math.abs(Ct)/Le,+(typeof _e=="function"?_e.apply(this,arguments):_e)),tr=rr*(Ct<0?-1:1),Tr=e.sum(tt),Er=Tr?(Ct-Le*tr)/Tr:0,ir=e.range(Le),gr=[],wr;return Q!=null&&ir.sort(Q===Nv?function(Pr,kr){return tt[kr]-tt[Pr]}:function(Pr,kr){return Q(Ge[Pr],Ge[kr])}),ir.forEach(function(Pr){gr[Pr]={data:Ge[Pr],value:wr=tt[Pr],startAngle:St,endAngle:St+=wr*Er+tr,padAngle:rr}}),gr}return Ae.value=function(Ge){return arguments.length?(U=Ge,Ae):U},Ae.sort=function(Ge){return arguments.length?(Q=Ge,Ae):Q},Ae.startAngle=function(Ge){return arguments.length?(se=Ge,Ae):se},Ae.endAngle=function(Ge){return arguments.length?(ye=Ge,Ae):ye},Ae.padAngle=function(Ge){return arguments.length?(_e=Ge,Ae):_e},Ae};var Nv={};e.layout.stack=function(){var U=O,Q=Ec,se=Lh,ye=Uv,_e=cv,Ae=hv;function Ge(Le,tt){if(!(Er=Le.length))return Le;var St=Le.map(function(Pr,kr){return U.call(Ge,Pr,kr)}),Ct=St.map(function(Pr){return Pr.map(function(kr,pr){return[_e.call(Ge,kr,pr),Ae.call(Ge,kr,pr)]})}),rr=Q.call(Ge,Ct,tt);St=e.permute(St,rr),Ct=e.permute(Ct,rr);var tr=se.call(Ge,Ct,tt),Tr=St[0].length,Er,ir,gr,wr;for(gr=0;gr<Tr;++gr)for(ye.call(Ge,St[0][gr],wr=tr[gr],Ct[0][gr][1]),ir=1;ir<Er;++ir)ye.call(Ge,St[ir][gr],wr+=Ct[ir-1][gr][1],Ct[ir][gr][1]);return Le}return Ge.values=function(Le){return arguments.length?(U=Le,Ge):U},Ge.order=function(Le){return arguments.length?(Q=typeof Le=="function"?Le:Kc.get(Le)||Ec,Ge):Q},Ge.offset=function(Le){return arguments.length?(se=typeof Le=="function"?Le:Of.get(Le)||Lh,Ge):se},Ge.x=function(Le){return arguments.length?(_e=Le,Ge):_e},Ge.y=function(Le){return arguments.length?(Ae=Le,Ge):Ae},Ge.out=function(Le){return arguments.length?(ye=Le,Ge):ye},Ge};function cv(U){return U.x}function hv(U){return U.y}function Uv(U,Q,se){U.y0=Q,U.y=se}var Kc=e.map({"inside-out":function(U){var Q=U.length,se,ye,_e=U.map(wd),Ae=U.map(Oo),Ge=e.range(Q).sort(function(rr,tr){return _e[rr]-_e[tr]}),Le=0,tt=0,St=[],Ct=[];for(se=0;se<Q;++se)ye=Ge[se],Le<tt?(Le+=Ae[ye],St.push(ye)):(tt+=Ae[ye],Ct.push(ye));return Ct.reverse().concat(St)},reverse:function(U){return e.range(U.length).reverse()},default:Ec}),Of=e.map({silhouette:function(U){var Q=U.length,se=U[0].length,ye=[],_e=0,Ae,Ge,Le,tt=[];for(Ge=0;Ge<se;++Ge){for(Ae=0,Le=0;Ae<Q;Ae++)Le+=U[Ae][Ge][1];Le>_e&&(_e=Le),ye.push(Le)}for(Ge=0;Ge<se;++Ge)tt[Ge]=(_e-ye[Ge])/2;return tt},wiggle:function(U){var Q=U.length,se=U[0],ye=se.length,_e,Ae,Ge,Le,tt,St,Ct,rr,tr,Tr=[];for(Tr[0]=rr=tr=0,Ae=1;Ae<ye;++Ae){for(_e=0,Le=0;_e<Q;++_e)Le+=U[_e][Ae][1];for(_e=0,tt=0,Ct=se[Ae][0]-se[Ae-1][0];_e<Q;++_e){for(Ge=0,St=(U[_e][Ae][1]-U[_e][Ae-1][1])/(2*Ct);Ge<_e;++Ge)St+=(U[Ge][Ae][1]-U[Ge][Ae-1][1])/Ct;tt+=St*U[_e][Ae][1]}Tr[Ae]=rr-=Le?tt/Le*Ct:0,rr<tr&&(tr=rr)}for(Ae=0;Ae<ye;++Ae)Tr[Ae]-=tr;return Tr},expand:function(U){var Q=U.length,se=U[0].length,ye=1/Q,_e,Ae,Ge,Le=[];for(Ae=0;Ae<se;++Ae){for(_e=0,Ge=0;_e<Q;_e++)Ge+=U[_e][Ae][1];if(Ge)for(_e=0;_e<Q;_e++)U[_e][Ae][1]/=Ge;else for(_e=0;_e<Q;_e++)U[_e][Ae][1]=ye}for(Ae=0;Ae<se;++Ae)Le[Ae]=0;return Le},zero:Lh});function Ec(U){return e.range(U.length)}function Lh(U){for(var Q=-1,se=U[0].length,ye=[];++Q<se;)ye[Q]=0;return ye}function wd(U){for(var Q=1,se=0,ye=U[0][1],_e,Ae=U.length;Q<Ae;++Q)(_e=U[Q][1])>ye&&(se=Q,ye=_e);return se}function Oo(U){return U.reduce(Jc,0)}function Jc(U,Q){return U+Q[1]}e.layout.histogram=function(){var U=!0,Q=Number,se=Qc,ye=kc;function _e(Ae,tr){for(var Le=[],tt=Ae.map(Q,this),St=se.call(this,tt,tr),Ct=ye.call(this,St,tt,tr),rr,tr=-1,Tr=tt.length,Er=Ct.length-1,ir=U?1:1/Tr,gr;++tr<Er;)rr=Le[tr]=[],rr.dx=Ct[tr+1]-(rr.x=Ct[tr]),rr.y=0;if(Er>0)for(tr=-1;++tr<Tr;)gr=tt[tr],gr>=St[0]&&gr<=St[1]&&(rr=Le[e.bisect(Ct,gr,1,Er)-1],rr.y+=ir,rr.push(Ae[tr]));return Le}return _e.value=function(Ae){return arguments.length?(Q=Ae,_e):Q},_e.range=function(Ae){return arguments.length?(se=br(Ae),_e):se},_e.bins=function(Ae){return arguments.length?(ye=typeof Ae=="number"?function(Ge){return Cc(Ge,Ae)}:br(Ae),_e):ye},_e.frequency=function(Ae){return arguments.length?(U=!!Ae,_e):U},_e};function kc(U,Q){return Cc(U,Math.ceil(Math.log(Q.length)/Math.LN2+1))}function Cc(U,Q){for(var se=-1,ye=+U[0],_e=(U[1]-ye)/Q,Ae=[];++se<=Q;)Ae[se]=_e*se+ye;return Ae}function Qc(U){return[e.min(U),e.max(U)]}e.layout.pack=function(){var U=e.layout.hierarchy().sort(pf),Q=0,se=[1,1],ye;function _e(Ae,Ge){var Le=U.call(this,Ae,Ge),tt=Le[0],St=se[0],Ct=se[1],rr=ye==null?Math.sqrt:typeof ye=="function"?ye:function(){return ye};if(tt.x=tt.y=0,nu(tt,function(Tr){Tr.r=+rr(Tr.value)}),nu(tt,vv),Q){var tr=Q*(ye?1:Math.max(2*tt.r/St,2*tt.r/Ct))/2;nu(tt,function(Tr){Tr.r+=tr}),nu(tt,vv),nu(tt,function(Tr){Tr.r-=tr})}return Uf(tt,St/2,Ct/2,ye?1:1/Math.max(2*tt.r/St,2*tt.r/Ct)),Le}return _e.size=function(Ae){return arguments.length?(se=Ae,_e):se},_e.radius=function(Ae){return arguments.length?(ye=Ae==null||typeof Ae=="function"?Ae:+Ae,_e):ye},_e.padding=function(Ae){return arguments.length?(Q=+Ae,_e):Q},Tu(_e,U)};function pf(U,Q){return U.value-Q.value}function sc(U,Q){var se=U._pack_next;U._pack_next=Q,Q._pack_prev=U,Q._pack_next=se,se._pack_prev=Q}function Vv(U,Q){U._pack_next=Q,Q._pack_prev=U}function Hs(U,Q){var se=Q.x-U.x,ye=Q.y-U.y,_e=U.r+Q.r;return .999*_e*_e>se*se+ye*ye}function vv(U){if(!(Q=U.children)||!(tr=Q.length))return;var Q,se=1/0,ye=-1/0,_e=1/0,Ae=-1/0,Ge,Le,tt,St,Ct,rr,tr;function Tr(pr){se=Math.min(pr.x-pr.r,se),ye=Math.max(pr.x+pr.r,ye),_e=Math.min(pr.y-pr.r,_e),Ae=Math.max(pr.y+pr.r,Ae)}if(Q.forEach(Bf),Ge=Q[0],Ge.x=-Ge.r,Ge.y=0,Tr(Ge),tr>1&&(Le=Q[1],Le.x=Le.r,Le.y=0,Tr(Le),tr>2))for(tt=Q[2],_s(Ge,Le,tt),Tr(tt),sc(Ge,tt),Ge._pack_prev=tt,sc(tt,Le),Le=Ge._pack_next,St=3;St<tr;St++){_s(Ge,Le,tt=Q[St]);var Er=0,ir=1,gr=1;for(Ct=Le._pack_next;Ct!==Le;Ct=Ct._pack_next,ir++)if(Hs(Ct,tt)){Er=1;break}if(Er==1)for(rr=Ge._pack_prev;rr!==Ct._pack_prev&&!Hs(rr,tt);rr=rr._pack_prev,gr++);Er?(ir<gr||ir==gr&&Le.r<Ge.r?Vv(Ge,Le=Ct):Vv(Ge=rr,Le),St--):(sc(Ge,tt),Le=tt,Tr(tt))}var wr=(se+ye)/2,Pr=(_e+Ae)/2,kr=0;for(St=0;St<tr;St++)tt=Q[St],tt.x-=wr,tt.y-=Pr,kr=Math.max(kr,tt.r+Math.sqrt(tt.x*tt.x+tt.y*tt.y));U.r=kr,Q.forEach(Nf)}function Bf(U){U._pack_next=U._pack_prev=U}function Nf(U){delete U._pack_next,delete U._pack_prev}function Uf(U,Q,se,ye){var _e=U.children;if(U.x=Q+=ye*U.x,U.y=se+=ye*U.y,U.r*=ye,_e)for(var Ae=-1,Ge=_e.length;++Ae<Ge;)Uf(_e[Ae],Q,se,ye)}function _s(U,Q,se){var ye=U.r+se.r,_e=Q.x-U.x,Ae=Q.y-U.y;if(ye&&(_e||Ae)){var Ge=Q.r+se.r,Le=_e*_e+Ae*Ae;Ge*=Ge,ye*=ye;var tt=.5+(ye-Ge)/(2*Le),St=Math.sqrt(Math.max(0,2*Ge*(ye+Le)-(ye-=Le)*ye-Ge*Ge))/(2*Le);se.x=U.x+tt*_e+St*Ae,se.y=U.y+tt*Ae-St*_e}else se.x=U.x+ye,se.y=U.y}e.layout.tree=function(){var U=e.layout.hierarchy().sort(null).value(null),Q=pl,se=[1,1],ye=null;function _e(Ct,rr){var tr=U.call(this,Ct,rr),Tr=tr[0],Er=Ae(Tr);if(nu(Er,Ge),Er.parent.m=-Er.z,df(Er,Le),ye)df(Tr,St);else{var ir=Tr,gr=Tr,wr=Tr;df(Tr,function(yn){yn.x<ir.x&&(ir=yn),yn.x>gr.x&&(gr=yn),yn.depth>wr.depth&&(wr=yn)});var Pr=Q(ir,gr)/2-ir.x,kr=se[0]/(gr.x+Q(gr,ir)/2+Pr),pr=se[1]/(wr.depth||1);df(Tr,function(yn){yn.x=(yn.x+Pr)*kr,yn.y=yn.depth*pr})}return tr}function Ae(Ct){for(var rr={A:null,children:[Ct]},tr=[rr],Tr;(Tr=tr.pop())!=null;)for(var Er=Tr.children,ir,gr=0,wr=Er.length;gr<wr;++gr)tr.push((Er[gr]=ir={_:Er[gr],parent:Tr,children:(ir=Er[gr].children)&&ir.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:gr}).a=ir);return rr.children[0]}function Ge(Ct){var rr=Ct.children,tr=Ct.parent.children,Tr=Ct.i?tr[Ct.i-1]:null;if(rr.length){Ph(Ct);var Er=(rr[0].z+rr[rr.length-1].z)/2;Tr?(Ct.z=Tr.z+Q(Ct._,Tr._),Ct.m=Ct.z-Er):Ct.z=Er}else Tr&&(Ct.z=Tr.z+Q(Ct._,Tr._));Ct.parent.A=tt(Ct,Tr,Ct.parent.A||tr[0])}function Le(Ct){Ct._.x=Ct.z+Ct.parent.m,Ct.m+=Ct.parent.m}function tt(Ct,rr,tr){if(rr){for(var Tr=Ct,Er=Ct,ir=rr,gr=Tr.parent.children[0],wr=Tr.m,Pr=Er.m,kr=ir.m,pr=gr.m,yn;ir=Vf(ir),Tr=Hu(Tr),ir&&Tr;)gr=Hu(gr),Er=Vf(Er),Er.a=Ct,yn=ir.z+kr-Tr.z-wr+Q(ir._,Tr._),yn>0&&(Gu(Ue(ir,Ct,tr),Ct,yn),wr+=yn,Pr+=yn),kr+=ir.m,wr+=Tr.m,pr+=gr.m,Pr+=Er.m;ir&&!Vf(Er)&&(Er.t=ir,Er.m+=kr-Pr),Tr&&!Hu(gr)&&(gr.t=Tr,gr.m+=wr-pr,tr=Ct)}return tr}function St(Ct){Ct.x*=se[0],Ct.y=Ct.depth*se[1]}return _e.separation=function(Ct){return arguments.length?(Q=Ct,_e):Q},_e.size=function(Ct){return arguments.length?(ye=(se=Ct)==null?St:null,_e):ye?null:se},_e.nodeSize=function(Ct){return arguments.length?(ye=(se=Ct)==null?null:St,_e):ye?se:null},Tu(_e,U)};function pl(U,Q){return U.parent==Q.parent?1:2}function Hu(U){var Q=U.children;return Q.length?Q[0]:U.t}function Vf(U){var Q=U.children,se;return(se=Q.length)?Q[se-1]:U.t}function Gu(U,Q,se){var ye=se/(Q.i-U.i);Q.c-=ye,Q.s+=se,U.c+=ye,Q.z+=se,Q.m+=se}function Ph(U){for(var Q=0,se=0,ye=U.children,_e=ye.length,Ae;--_e>=0;)Ae=ye[_e],Ae.z+=Q,Ae.m+=Q,Q+=Ae.s+(se+=Ae.c)}function Ue(U,Q,se){return U.a.parent===Q.parent?U.a:se}e.layout.cluster=function(){var U=e.layout.hierarchy().sort(null).value(null),Q=pl,se=[1,1],ye=!1;function _e(Ae,Ge){var Le=U.call(this,Ae,Ge),tt=Le[0],St,Ct=0;nu(tt,function(ir){var gr=ir.children;gr&&gr.length?(ir.x=Ht(gr),ir.y=at(gr)):(ir.x=St?Ct+=Q(ir,St):0,ir.y=0,St=ir)});var rr=It(tt),tr=fr(tt),Tr=rr.x-Q(rr,tr)/2,Er=tr.x+Q(tr,rr)/2;return nu(tt,ye?function(ir){ir.x=(ir.x-tt.x)*se[0],ir.y=(tt.y-ir.y)*se[1]}:function(ir){ir.x=(ir.x-Tr)/(Er-Tr)*se[0],ir.y=(1-(tt.y?ir.y/tt.y:1))*se[1]}),Le}return _e.separation=function(Ae){return arguments.length?(Q=Ae,_e):Q},_e.size=function(Ae){return arguments.length?(ye=(se=Ae)==null,_e):ye?null:se},_e.nodeSize=function(Ae){return arguments.length?(ye=(se=Ae)!=null,_e):ye?se:null},Tu(_e,U)};function at(U){return 1+e.max(U,function(Q){return Q.y})}function Ht(U){return U.reduce(function(Q,se){return Q+se.x},0)/U.length}function It(U){var Q=U.children;return Q&&Q.length?It(Q[0]):U}function fr(U){var Q=U.children,se;return Q&&(se=Q.length)?fr(Q[se-1]):U}e.layout.treemap=function(){var U=e.layout.hierarchy(),Q=Math.round,se=[1,1],ye=null,_e=Lr,Ae=!1,Ge,Le="squarify",tt=.5*(1+Math.sqrt(5));function St(ir,gr){for(var wr=-1,Pr=ir.length,kr,pr;++wr<Pr;)pr=(kr=ir[wr]).value*(gr<0?0:gr),kr.area=isNaN(pr)||pr<=0?0:pr}function Ct(ir){var gr=ir.children;if(gr&&gr.length){var wr=_e(ir),Pr=[],kr=gr.slice(),pr,yn=1/0,bn,In=Le==="slice"?wr.dx:Le==="dice"?wr.dy:Le==="slice-dice"?ir.depth&1?wr.dy:wr.dx:Math.min(wr.dx,wr.dy),Xn;for(St(kr,wr.dx*wr.dy/ir.value),Pr.area=0;(Xn=kr.length)>0;)Pr.push(pr=kr[Xn-1]),Pr.area+=pr.area,Le!=="squarify"||(bn=tr(Pr,In))<=yn?(kr.pop(),yn=bn):(Pr.area-=Pr.pop().area,Tr(Pr,In,wr,!1),In=Math.min(wr.dx,wr.dy),Pr.length=Pr.area=0,yn=1/0);Pr.length&&(Tr(Pr,In,wr,!0),Pr.length=Pr.area=0),gr.forEach(Ct)}}function rr(ir){var gr=ir.children;if(gr&&gr.length){var wr=_e(ir),Pr=gr.slice(),kr,pr=[];for(St(Pr,wr.dx*wr.dy/ir.value),pr.area=0;kr=Pr.pop();)pr.push(kr),pr.area+=kr.area,kr.z!=null&&(Tr(pr,kr.z?wr.dx:wr.dy,wr,!Pr.length),pr.length=pr.area=0);gr.forEach(rr)}}function tr(ir,gr){for(var wr=ir.area,Pr,kr=0,pr=1/0,yn=-1,bn=ir.length;++yn<bn;)(Pr=ir[yn].area)&&(Pr<pr&&(pr=Pr),Pr>kr&&(kr=Pr));return wr*=wr,gr*=gr,wr?Math.max(gr*kr*tt/wr,wr/(gr*pr*tt)):1/0}function Tr(ir,gr,wr,Pr){var kr=-1,pr=ir.length,yn=wr.x,bn=wr.y,In=gr?Q(ir.area/gr):0,Xn;if(gr==wr.dx){for((Pr||In>wr.dy)&&(In=wr.dy);++kr<pr;)Xn=ir[kr],Xn.x=yn,Xn.y=bn,Xn.dy=In,yn+=Xn.dx=Math.min(wr.x+wr.dx-yn,In?Q(Xn.area/In):0);Xn.z=!0,Xn.dx+=wr.x+wr.dx-yn,wr.y+=In,wr.dy-=In}else{for((Pr||In>wr.dx)&&(In=wr.dx);++kr<pr;)Xn=ir[kr],Xn.x=yn,Xn.y=bn,Xn.dx=In,bn+=Xn.dy=Math.min(wr.y+wr.dy-bn,In?Q(Xn.area/In):0);Xn.z=!1,Xn.dy+=wr.y+wr.dy-bn,wr.x+=In,wr.dx-=In}}function Er(ir){var gr=Ge||U(ir),wr=gr[0];return wr.x=wr.y=0,wr.value?(wr.dx=se[0],wr.dy=se[1]):wr.dx=wr.dy=0,Ge&&U.revalue(wr),St([wr],wr.dx*wr.dy/wr.value),(Ge?rr:Ct)(wr),Ae&&(Ge=gr),gr}return Er.size=function(ir){return arguments.length?(se=ir,Er):se},Er.padding=function(ir){if(!arguments.length)return ye;function gr(kr){var pr=ir.call(Er,kr,kr.depth);return pr==null?Lr(kr):qr(kr,typeof pr=="number"?[pr,pr,pr,pr]:pr)}function wr(kr){return qr(kr,ir)}var Pr;return _e=(ye=ir)==null?Lr:(Pr=typeof ir)=="function"?gr:(Pr==="number"&&(ir=[ir,ir,ir,ir]),wr),Er},Er.round=function(ir){return arguments.length?(Q=ir?Math.round:Number,Er):Q!=Number},Er.sticky=function(ir){return arguments.length?(Ae=ir,Ge=null,Er):Ae},Er.ratio=function(ir){return arguments.length?(tt=ir,Er):tt},Er.mode=function(ir){return arguments.length?(Le=ir+"",Er):Le},Tu(Er,U)};function Lr(U){return{x:U.x,y:U.y,dx:U.dx,dy:U.dy}}function qr(U,Q){var se=U.x+Q[3],ye=U.y+Q[0],_e=U.dx-Q[1]-Q[3],Ae=U.dy-Q[0]-Q[2];return _e<0&&(se+=_e/2,_e=0),Ae<0&&(ye+=Ae/2,Ae=0),{x:se,y:ye,dx:_e,dy:Ae}}e.random={normal:function(U,Q){var se=arguments.length;return se<2&&(Q=1),se<1&&(U=0),function(){var ye,_e,Ae;do ye=Math.random()*2-1,_e=Math.random()*2-1,Ae=ye*ye+_e*_e;while(!Ae||Ae>1);return U+Q*ye*Math.sqrt(-2*Math.log(Ae)/Ae)}},logNormal:function(){var U=e.random.normal.apply(e,arguments);return function(){return Math.exp(U())}},bates:function(U){var Q=e.random.irwinHall(U);return function(){return Q()/U}},irwinHall:function(U){return function(){for(var Q=0,se=0;se<U;se++)Q+=Math.random();return Q}}},e.scale={};function Zr(U){var Q=U[0],se=U[U.length-1];return Q<se?[Q,se]:[se,Q]}function nn(U){return U.rangeExtent?U.rangeExtent():Zr(U.range())}function An(U,Q,se,ye){var _e=se(U[0],U[1]),Ae=ye(Q[0],Q[1]);return function(Ge){return Ae(_e(Ge))}}function Nr(U,Q){var se=0,ye=U.length-1,_e=U[se],Ae=U[ye],Ge;return Ae<_e&&(Ge=se,se=ye,ye=Ge,Ge=_e,_e=Ae,Ae=Ge),U[se]=Q.floor(_e),U[ye]=Q.ceil(Ae),U}function tn(U){return U?{floor:function(Q){return Math.floor(Q/U)*U},ceil:function(Q){return Math.ceil(Q/U)*U}}:rn}var rn={floor:O,ceil:O};function wn(U,Q,se,ye){var _e=[],Ae=[],Ge=0,Le=Math.min(U.length,Q.length)-1;for(U[Le]<U[0]&&(U=U.slice().reverse(),Q=Q.slice().reverse());++Ge<=Le;)_e.push(se(U[Ge-1],U[Ge])),Ae.push(ye(Q[Ge-1],Q[Ge]));return function(tt){var St=e.bisect(U,tt,1,Le)-1;return Ae[St](_e[St](tt))}}e.scale.linear=function(){return Gn([0,1],[0,1],qs,!1)};function Gn(U,Q,se,ye){var _e,Ae;function Ge(){var tt=Math.min(U.length,Q.length)>2?wn:An,St=ye?tu:Bv;return _e=tt(U,Q,St,se),Ae=tt(Q,U,St,qs),Le}function Le(tt){return _e(tt)}return Le.invert=function(tt){return Ae(tt)},Le.domain=function(tt){return arguments.length?(U=tt.map(Number),Ge()):U},Le.range=function(tt){return arguments.length?(Q=tt,Ge()):Q},Le.rangeRound=function(tt){return Le.range(tt).interpolate(If)},Le.clamp=function(tt){return arguments.length?(ye=tt,Ge()):ye},Le.interpolate=function(tt){return arguments.length?(se=tt,Ge()):se},Le.ticks=function(tt){return Ki(U,tt)},Le.tickFormat=function(tt,St){return d3_scale_linearTickFormat(U,tt,St)},Le.nice=function(tt){return Ii(U,tt),Ge()},Le.copy=function(){return Gn(U,Q,se,ye)},Ge()}function Oi(U,Q){return e.rebind(U,Q,"range","rangeRound","interpolate","clamp")}function Ii(U,Q){return Nr(U,tn(Hi(U,Q)[2])),Nr(U,tn(Hi(U,Q)[2])),U}function Hi(U,Q){Q==null&&(Q=10);var se=Zr(U),ye=se[1]-se[0],_e=Math.pow(10,Math.floor(Math.log(ye/Q)/Math.LN10)),Ae=Q/ye*_e;return Ae<=.15?_e*=10:Ae<=.35?_e*=5:Ae<=.75&&(_e*=2),se[0]=Math.ceil(se[0]/_e)*_e,se[1]=Math.floor(se[1]/_e)*_e+_e*.5,se[2]=_e,se}function Ki(U,Q){return e.range.apply(e,Hi(U,Q))}var On={s:1,g:1,p:1,r:1,e:1};function $n(U){return-Math.floor(Math.log(U)/Math.LN10+.01)}function Ji(U,Q){var se=$n(Q[2]);return U in On?Math.abs(se-$n(Math.max(p(Q[0]),p(Q[1]))))+ +(U!=="e"):se-(U==="%")*2}e.scale.log=function(){return ca(e.scale.linear().domain([0,1]),10,!0,[1,10])};function ca(U,Q,se,ye){function _e(Le){return(se?Math.log(Le<0?0:Le):-Math.log(Le>0?0:-Le))/Math.log(Q)}function Ae(Le){return se?Math.pow(Q,Le):-Math.pow(Q,-Le)}function Ge(Le){return U(_e(Le))}return Ge.invert=function(Le){return Ae(U.invert(Le))},Ge.domain=function(Le){return arguments.length?(se=Le[0]>=0,U.domain((ye=Le.map(Number)).map(_e)),Ge):ye},Ge.base=function(Le){return arguments.length?(Q=+Le,U.domain(ye.map(_e)),Ge):Q},Ge.nice=function(){var Le=Nr(ye.map(_e),se?Math:Ka);return U.domain(Le),ye=Le.map(Ae),Ge},Ge.ticks=function(){var Le=Zr(ye),tt=[],St=Le[0],Ct=Le[1],rr=Math.floor(_e(St)),tr=Math.ceil(_e(Ct)),Tr=Q%1?2:Q;if(isFinite(tr-rr)){if(se){for(;rr<tr;rr++)for(var Er=1;Er<Tr;Er++)tt.push(Ae(rr)*Er);tt.push(Ae(rr))}else for(tt.push(Ae(rr));rr++<tr;)for(var Er=Tr-1;Er>0;Er--)tt.push(Ae(rr)*Er);for(rr=0;tt[rr]<St;rr++);for(tr=tt.length;tt[tr-1]>Ct;tr--);tt=tt.slice(rr,tr)}return tt},Ge.copy=function(){return ca(U.copy(),Q,se,ye)},Oi(Ge,U)}var Ka={floor:function(U){return-Math.ceil(-U)},ceil:function(U){return-Math.floor(-U)}};e.scale.pow=function(){return mo(e.scale.linear(),1,[0,1])};function mo(U,Q,se){var ye=vo(Q),_e=vo(1/Q);function Ae(Ge){return U(ye(Ge))}return Ae.invert=function(Ge){return _e(U.invert(Ge))},Ae.domain=function(Ge){return arguments.length?(U.domain((se=Ge.map(Number)).map(ye)),Ae):se},Ae.ticks=function(Ge){return Ki(se,Ge)},Ae.tickFormat=function(Ge,Le){return d3_scale_linearTickFormat(se,Ge,Le)},Ae.nice=function(Ge){return Ae.domain(Ii(se,Ge))},Ae.exponent=function(Ge){return arguments.length?(ye=vo(Q=Ge),_e=vo(1/Q),U.domain(se.map(ye)),Ae):Q},Ae.copy=function(){return mo(U.copy(),Q,se)},Oi(Ae,U)}function vo(U){return function(Q){return Q<0?-Math.pow(-Q,U):Math.pow(Q,U)}}e.scale.sqrt=function(){return e.scale.pow().exponent(.5)},e.scale.ordinal=function(){return xo([],{t:"range",a:[[]]})};function xo(U,Q){var se,ye,_e;function Ae(Le){return ye[((se.get(Le)||(Q.t==="range"?se.set(Le,U.push(Le)):NaN))-1)%ye.length]}function Ge(Le,tt){return e.range(U.length).map(function(St){return Le+tt*St})}return Ae.domain=function(Le){if(!arguments.length)return U;U=[],se=new w;for(var tt=-1,St=Le.length,Ct;++tt<St;)se.has(Ct=Le[tt])||se.set(Ct,U.push(Ct));return Ae[Q.t].apply(Ae,Q.a)},Ae.range=function(Le){return arguments.length?(ye=Le,_e=0,Q={t:"range",a:arguments},Ae):ye},Ae.rangePoints=function(Le,tt){arguments.length<2&&(tt=0);var St=Le[0],Ct=Le[1],rr=U.length<2?(St=(St+Ct)/2,0):(Ct-St)/(U.length-1+tt);return ye=Ge(St+rr*tt/2,rr),_e=0,Q={t:"rangePoints",a:arguments},Ae},Ae.rangeRoundPoints=function(Le,tt){arguments.length<2&&(tt=0);var St=Le[0],Ct=Le[1],rr=U.length<2?(St=Ct=Math.round((St+Ct)/2),0):(Ct-St)/(U.length-1+tt)|0;return ye=Ge(St+Math.round(rr*tt/2+(Ct-St-(U.length-1+tt)*rr)/2),rr),_e=0,Q={t:"rangeRoundPoints",a:arguments},Ae},Ae.rangeBands=function(Le,tt,St){arguments.length<2&&(tt=0),arguments.length<3&&(St=tt);var Ct=Le[1]<Le[0],rr=Le[Ct-0],tr=Le[1-Ct],Tr=(tr-rr)/(U.length-tt+2*St);return ye=Ge(rr+Tr*St,Tr),Ct&&ye.reverse(),_e=Tr*(1-tt),Q={t:"rangeBands",a:arguments},Ae},Ae.rangeRoundBands=function(Le,tt,St){arguments.length<2&&(tt=0),arguments.length<3&&(St=tt);var Ct=Le[1]<Le[0],rr=Le[Ct-0],tr=Le[1-Ct],Tr=Math.floor((tr-rr)/(U.length-tt+2*St));return ye=Ge(rr+Math.round((tr-rr-(U.length-tt)*Tr)/2),Tr),Ct&&ye.reverse(),_e=Math.round(Tr*(1-tt)),Q={t:"rangeRoundBands",a:arguments},Ae},Ae.rangeBand=function(){return _e},Ae.rangeExtent=function(){return Zr(Q.a[0])},Ae.copy=function(){return xo(U,Q)},Ae.domain(U)}e.scale.category10=function(){return e.scale.ordinal().range(Na)},e.scale.category20=function(){return e.scale.ordinal().range(bs)},e.scale.category20b=function(){return e.scale.ordinal().range(Zo)},e.scale.category20c=function(){return e.scale.ordinal().range(Bo)};var Na=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Ra),bs=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Ra),Zo=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Ra),Bo=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Ra);e.scale.quantile=function(){return hi([],[])};function hi(U,Q){var se;function ye(){var Ae=0,Ge=Q.length;for(se=[];++Ae<Ge;)se[Ae-1]=e.quantile(U,Ae/Ge);return _e}function _e(Ae){if(!isNaN(Ae=+Ae))return Q[e.bisect(se,Ae)]}return _e.domain=function(Ae){return arguments.length?(U=Ae.map(h).filter(v).sort(c),ye()):U},_e.range=function(Ae){return arguments.length?(Q=Ae,ye()):Q},_e.quantiles=function(){return se},_e.invertExtent=function(Ae){return Ae=Q.indexOf(Ae),Ae<0?[NaN,NaN]:[Ae>0?se[Ae-1]:U[0],Ae<se.length?se[Ae]:U[U.length-1]]},_e.copy=function(){return hi(U,Q)},ye()}e.scale.quantize=function(){return ta(0,1,[0,1])};function ta(U,Q,se){var ye,_e;function Ae(Le){return se[Math.max(0,Math.min(_e,Math.floor(ye*(Le-U))))]}function Ge(){return ye=se.length/(Q-U),_e=se.length-1,Ae}return Ae.domain=function(Le){return arguments.length?(U=+Le[0],Q=+Le[Le.length-1],Ge()):[U,Q]},Ae.range=function(Le){return arguments.length?(se=Le,Ge()):se},Ae.invertExtent=function(Le){return Le=se.indexOf(Le),Le=Le<0?NaN:Le/ye+U,[Le,Le+1/ye]},Ae.copy=function(){return ta(U,Q,se)},Ge()}e.scale.threshold=function(){return ws([.5],[0,1])};function ws(U,Q){function se(ye){if(ye<=ye)return Q[e.bisect(U,ye)]}return se.domain=function(ye){return arguments.length?(U=ye,se):U},se.range=function(ye){return arguments.length?(Q=ye,se):Q},se.invertExtent=function(ye){return ye=Q.indexOf(ye),[U[ye-1],U[ye]]},se.copy=function(){return ws(U,Q)},se}e.scale.identity=function(){return Ml([0,1])};function Ml(U){function Q(se){return+se}return Q.invert=Q,Q.domain=Q.range=function(se){return arguments.length?(U=se.map(Q),Q):U},Q.ticks=function(se){return Ki(U,se)},Q.tickFormat=function(se,ye){return d3_scale_linearTickFormat(U,se,ye)},Q.copy=function(){return Ml(U)},Q}e.svg={};function Yl(){return 0}e.svg.arc=function(){var U=Yu,Q=Hf,se=Yl,ye=iu,_e=au,Ae=Lc,Ge=Pc;function Le(){var St=Math.max(0,+U.apply(this,arguments)),Ct=Math.max(0,+Q.apply(this,arguments)),rr=_e.apply(this,arguments)-de,tr=Ae.apply(this,arguments)-de,Tr=Math.abs(tr-rr),Er=rr>tr?0:1;if(Ct<St&&(ir=Ct,Ct=St,St=ir),Tr>=Ee)return tt(Ct,Er)+(St?tt(St,1-Er):"")+"Z";var ir,gr,wr,Pr,kr=0,pr=0,yn,bn,In,Xn,Ci,Fi,xa,Gi,va=[];if((Pr=(+Ge.apply(this,arguments)||0)/2)&&(wr=ye===iu?Math.sqrt(St*St+Ct*Ct):+ye.apply(this,arguments),Er||(pr*=-1),Ct&&(pr=Fr(wr/Ct*Math.sin(Pr))),St&&(kr=Fr(wr/St*Math.sin(Pr)))),Ct){yn=Ct*Math.cos(rr+pr),bn=Ct*Math.sin(rr+pr),In=Ct*Math.cos(tr-pr),Xn=Ct*Math.sin(tr-pr);var go=Math.abs(tr-rr-2*pr)<=Ke?0:1;if(pr&&lc(yn,bn,In,Xn)===Er^go){var Po=(rr+tr)/2;yn=Ct*Math.cos(Po),bn=Ct*Math.sin(Po),In=Xn=null}}else yn=bn=0;if(St){Ci=St*Math.cos(tr-kr),Fi=St*Math.sin(tr-kr),xa=St*Math.cos(rr+kr),Gi=St*Math.sin(rr+kr);var Ao=Math.abs(rr-tr+2*kr)<=Ke?0:1;if(kr&&lc(Ci,Fi,xa,Gi)===1-Er^Ao){var Sn=(rr+tr)/2;Ci=St*Math.cos(Sn),Fi=St*Math.sin(Sn),xa=Gi=null}}else Ci=Fi=0;if(Tr>Et&&(ir=Math.min(Math.abs(Ct-St)/2,+se.apply(this,arguments)))>.001){gr=St<Ct^Er?0:1;var da=ir,Sa=ir;if(Tr<Ke){var La=xa==null?[Ci,Fi]:In==null?[yn,bn]:cs([yn,bn],[xa,Gi],[In,Xn],[Ci,Fi]),Ts=yn-La[0],Gs=bn-La[1],yl=In-La[0],ls=Xn-La[1],Wl=1/Math.sin(Math.acos((Ts*yl+Gs*ls)/(Math.sqrt(Ts*Ts+Gs*Gs)*Math.sqrt(yl*yl+ls*ls)))/2),Ye=Math.sqrt(La[0]*La[0]+La[1]*La[1]);Sa=Math.min(ir,(St-Ye)/(Wl-1)),da=Math.min(ir,(Ct-Ye)/(Wl+1))}if(In!=null){var Gt=Rh(xa==null?[Ci,Fi]:[xa,Gi],[yn,bn],Ct,da,Er),lr=Rh([In,Xn],[Ci,Fi],Ct,da,Er);ir===da?va.push("M",Gt[0],"A",da,",",da," 0 0,",gr," ",Gt[1],"A",Ct,",",Ct," 0 ",1-Er^lc(Gt[1][0],Gt[1][1],lr[1][0],lr[1][1]),",",Er," ",lr[1],"A",da,",",da," 0 0,",gr," ",lr[0]):va.push("M",Gt[0],"A",da,",",da," 0 1,",gr," ",lr[0])}else va.push("M",yn,",",bn);if(xa!=null){var Or=Rh([yn,bn],[xa,Gi],St,-Sa,Er),$r=Rh([Ci,Fi],In==null?[yn,bn]:[In,Xn],St,-Sa,Er);ir===Sa?va.push("L",$r[0],"A",Sa,",",Sa," 0 0,",gr," ",$r[1],"A",St,",",St," 0 ",Er^lc($r[1][0],$r[1][1],Or[1][0],Or[1][1]),",",1-Er," ",Or[1],"A",Sa,",",Sa," 0 0,",gr," ",Or[0]):va.push("L",$r[0],"A",Sa,",",Sa," 0 0,",gr," ",Or[0])}else va.push("L",Ci,",",Fi)}else va.push("M",yn,",",bn),In!=null&&va.push("A",Ct,",",Ct," 0 ",go,",",Er," ",In,",",Xn),va.push("L",Ci,",",Fi),xa!=null&&va.push("A",St,",",St," 0 ",Ao,",",1-Er," ",xa,",",Gi);return va.push("Z"),va.join("")}function tt(St,Ct){return"M0,"+St+"A"+St+","+St+" 0 1,"+Ct+" 0,"+-St+"A"+St+","+St+" 0 1,"+Ct+" 0,"+St}return Le.innerRadius=function(St){return arguments.length?(U=br(St),Le):U},Le.outerRadius=function(St){return arguments.length?(Q=br(St),Le):Q},Le.cornerRadius=function(St){return arguments.length?(se=br(St),Le):se},Le.padRadius=function(St){return arguments.length?(ye=St==iu?iu:br(St),Le):ye},Le.startAngle=function(St){return arguments.length?(_e=br(St),Le):_e},Le.endAngle=function(St){return arguments.length?(Ae=br(St),Le):Ae},Le.padAngle=function(St){return arguments.length?(Ge=br(St),Le):Ge},Le.centroid=function(){var St=(+U.apply(this,arguments)+ +Q.apply(this,arguments))/2,Ct=(+_e.apply(this,arguments)+ +Ae.apply(this,arguments))/2-de;return[Math.cos(Ct)*St,Math.sin(Ct)*St]},Le};var iu="auto";function Yu(U){return U.innerRadius}function Hf(U){return U.outerRadius}function au(U){return U.startAngle}function Lc(U){return U.endAngle}function Pc(U){return U&&U.padAngle}function lc(U,Q,se,ye){return(U-se)*Q-(Q-ye)*U>0?0:1}function Rh(U,Q,se,ye,_e){var Ae=U[0]-Q[0],Ge=U[1]-Q[1],Le=(_e?ye:-ye)/Math.sqrt(Ae*Ae+Ge*Ge),tt=Le*Ge,St=-Le*Ae,Ct=U[0]+tt,rr=U[1]+St,tr=Q[0]+tt,Tr=Q[1]+St,Er=(Ct+tr)/2,ir=(rr+Tr)/2,gr=tr-Ct,wr=Tr-rr,Pr=gr*gr+wr*wr,kr=se-ye,pr=Ct*Tr-tr*rr,yn=(wr<0?-1:1)*Math.sqrt(Math.max(0,kr*kr*Pr-pr*pr)),bn=(pr*wr-gr*yn)/Pr,In=(-pr*gr-wr*yn)/Pr,Xn=(pr*wr+gr*yn)/Pr,Ci=(-pr*gr+wr*yn)/Pr,Fi=bn-Er,xa=In-ir,Gi=Xn-Er,va=Ci-ir;return Fi*Fi+xa*xa>Gi*Gi+va*va&&(bn=Xn,In=Ci),[[bn-tt,In-St],[bn*se/kr,In*se/kr]]}function $c(){return!0}function uc(U){var Q=Xo,se=Uo,ye=$c,_e=Wu,Ae=_e.key,Ge=.7;function Le(tt){var St=[],Ct=[],rr=-1,tr=tt.length,Tr,Er=br(Q),ir=br(se);function gr(){St.push("M",_e(U(Ct),Ge))}for(;++rr<tr;)ye.call(this,Tr=tt[rr],rr)?Ct.push([+Er.call(this,Tr,rr),+ir.call(this,Tr,rr)]):Ct.length&&(gr(),Ct=[]);return Ct.length&&gr(),St.length?St.join(""):null}return Le.x=function(tt){return arguments.length?(Q=tt,Le):Q},Le.y=function(tt){return arguments.length?(se=tt,Le):se},Le.defined=function(tt){return arguments.length?(ye=tt,Le):ye},Le.interpolate=function(tt){return arguments.length?(typeof tt=="function"?Ae=_e=tt:Ae=(_e=gf.get(tt)||Wu).key,Le):Ae},Le.tension=function(tt){return arguments.length?(Ge=tt,Le):Ge},Le}e.svg.line=function(){return uc(O)};var gf=e.map({linear:Wu,"linear-closed":Dh,step:Hv,"step-before":Ih,"step-after":Gv,basis:Gf,"basis-open":Fh,"basis-closed":Yv,bundle:qh,cardinal:eh,"cardinal-open":Rc,"cardinal-closed":Mu,monotone:zt});gf.forEach(function(U,Q){Q.key=U,Q.closed=/-closed$/.test(U)});function Wu(U){return U.length>1?U.join("L"):U+"Z"}function Dh(U){return U.join("L")+"Z"}function Hv(U){for(var Q=0,se=U.length,ye=U[0],_e=[ye[0],",",ye[1]];++Q<se;)_e.push("H",(ye[0]+(ye=U[Q])[0])/2,"V",ye[1]);return se>1&&_e.push("H",ye[0]),_e.join("")}function Ih(U){for(var Q=0,se=U.length,ye=U[0],_e=[ye[0],",",ye[1]];++Q<se;)_e.push("V",(ye=U[Q])[1],"H",ye[0]);return _e.join("")}function Gv(U){for(var Q=0,se=U.length,ye=U[0],_e=[ye[0],",",ye[1]];++Q<se;)_e.push("H",(ye=U[Q])[0],"V",ye[1]);return _e.join("")}function Rc(U,Q){return U.length<4?Wu(U):U[1]+th(U.slice(1,-1),rh(U,Q))}function Mu(U,Q){return U.length<3?Dh(U):U[0]+th((U.push(U[0]),U),rh([U[U.length-2]].concat(U,[U[1]]),Q))}function eh(U,Q){return U.length<3?Wu(U):U[0]+th(U,rh(U,Q))}function th(U,Q){if(Q.length<1||U.length!=Q.length&&U.length!=Q.length+2)return Wu(U);var se=U.length!=Q.length,ye="",_e=U[0],Ae=U[1],Ge=Q[0],Le=Ge,tt=1;if(se&&(ye+="Q"+(Ae[0]-Ge[0]*2/3)+","+(Ae[1]-Ge[1]*2/3)+","+Ae[0]+","+Ae[1],_e=U[1],tt=2),Q.length>1){Le=Q[1],Ae=U[tt],tt++,ye+="C"+(_e[0]+Ge[0])+","+(_e[1]+Ge[1])+","+(Ae[0]-Le[0])+","+(Ae[1]-Le[1])+","+Ae[0]+","+Ae[1];for(var St=2;St<Q.length;St++,tt++)Ae=U[tt],Le=Q[St],ye+="S"+(Ae[0]-Le[0])+","+(Ae[1]-Le[1])+","+Ae[0]+","+Ae[1]}if(se){var Ct=U[tt];ye+="Q"+(Ae[0]+Le[0]*2/3)+","+(Ae[1]+Le[1]*2/3)+","+Ct[0]+","+Ct[1]}return ye}function rh(U,Q){for(var se=[],ye=(1-Q)/2,_e,Ae=U[0],Ge=U[1],Le=1,tt=U.length;++Le<tt;)_e=Ae,Ae=Ge,Ge=U[Le],se.push([ye*(Ge[0]-_e[0]),ye*(Ge[1]-_e[1])]);return se}function Gf(U){if(U.length<3)return Wu(U);var Q=1,se=U.length,ye=U[0],_e=ye[0],Ae=ye[1],Ge=[_e,_e,_e,(ye=U[1])[0]],Le=[Ae,Ae,Ae,ye[1]],tt=[_e,",",Ae,"L",ou(Ce,Ge),",",ou(Ce,Le)];for(U.push(U[se-1]);++Q<=se;)ye=U[Q],Ge.shift(),Ge.push(ye[0]),Le.shift(),Le.push(ye[1]),De(tt,Ge,Le);return U.pop(),tt.push("L",ye),tt.join("")}function Fh(U){if(U.length<4)return Wu(U);for(var Q=[],se=-1,ye=U.length,_e,Ae=[0],Ge=[0];++se<3;)_e=U[se],Ae.push(_e[0]),Ge.push(_e[1]);for(Q.push(ou(Ce,Ae)+","+ou(Ce,Ge)),--se;++se<ye;)_e=U[se],Ae.shift(),Ae.push(_e[0]),Ge.shift(),Ge.push(_e[1]),De(Q,Ae,Ge);return Q.join("")}function Yv(U){for(var Q,se=-1,ye=U.length,_e=ye+4,Ae,Ge=[],Le=[];++se<4;)Ae=U[se%ye],Ge.push(Ae[0]),Le.push(Ae[1]);for(Q=[ou(Ce,Ge),",",ou(Ce,Le)],--se;++se<_e;)Ae=U[se%ye],Ge.shift(),Ge.push(Ae[0]),Le.shift(),Le.push(Ae[1]),De(Q,Ge,Le);return Q.join("")}function qh(U,Q){var se=U.length-1;if(se)for(var ye=U[0][0],_e=U[0][1],Ae=U[se][0]-ye,Ge=U[se][1]-_e,Le=-1,tt,St;++Le<=se;)tt=U[Le],St=Le/se,tt[0]=Q*tt[0]+(1-Q)*(ye+St*Ae),tt[1]=Q*tt[1]+(1-Q)*(_e+St*Ge);return Gf(U)}function ou(U,Q){return U[0]*Q[0]+U[1]*Q[1]+U[2]*Q[2]+U[3]*Q[3]}var ve=[0,2/3,1/3,0],be=[0,1/3,2/3,0],Ce=[0,1/6,2/3,1/6];function De(U,Q,se){U.push("C",ou(ve,Q),",",ou(ve,se),",",ou(be,Q),",",ou(be,se),",",ou(Ce,Q),",",ou(Ce,se))}function He(U,Q){return(Q[1]-U[1])/(Q[0]-U[0])}function Ve(U){for(var Q=0,se=U.length-1,ye=[],_e=U[0],Ae=U[1],Ge=ye[0]=He(_e,Ae);++Q<se;)ye[Q]=(Ge+(Ge=He(_e=Ae,Ae=U[Q+1])))/2;return ye[Q]=Ge,ye}function Qe(U){for(var Q=[],se,ye,_e,Ae,Ge=Ve(U),Le=-1,tt=U.length-1;++Le<tt;)se=He(U[Le],U[Le+1]),p(se)<Et?Ge[Le]=Ge[Le+1]=0:(ye=Ge[Le]/se,_e=Ge[Le+1]/se,Ae=ye*ye+_e*_e,Ae>9&&(Ae=se*3/Math.sqrt(Ae),Ge[Le]=Ae*ye,Ge[Le+1]=Ae*_e));for(Le=-1;++Le<=tt;)Ae=(U[Math.min(tt,Le+1)][0]-U[Math.max(0,Le-1)][0])/(6*(1+Ge[Le]*Ge[Le])),Q.push([Ae||0,Ge[Le]*Ae||0]);return Q}function zt(U){return U.length<3?Wu(U):U[0]+th(U,Qe(U))}e.svg.line.radial=function(){var U=uc(jt);return U.radius=U.x,delete U.x,U.angle=U.y,delete U.y,U};function jt(U){for(var Q,se=-1,ye=U.length,_e,Ae;++se<ye;)Q=U[se],_e=Q[0],Ae=Q[1]-de,Q[0]=_e*Math.cos(Ae),Q[1]=_e*Math.sin(Ae);return U}function qt(U){var Q=Xo,se=Xo,ye=0,_e=Uo,Ae=$c,Ge=Wu,Le=Ge.key,tt=Ge,St="L",Ct=.7;function rr(tr){var Tr=[],Er=[],ir=[],gr=-1,wr=tr.length,Pr,kr=br(Q),pr=br(ye),yn=Q===se?function(){return In}:br(se),bn=ye===_e?function(){return Xn}:br(_e),In,Xn;function Ci(){Tr.push("M",Ge(U(ir),Ct),St,tt(U(Er.reverse()),Ct),"Z")}for(;++gr<wr;)Ae.call(this,Pr=tr[gr],gr)?(Er.push([In=+kr.call(this,Pr,gr),Xn=+pr.call(this,Pr,gr)]),ir.push([+yn.call(this,Pr,gr),+bn.call(this,Pr,gr)])):Er.length&&(Ci(),Er=[],ir=[]);return Er.length&&Ci(),Tr.length?Tr.join(""):null}return rr.x=function(tr){return arguments.length?(Q=se=tr,rr):se},rr.x0=function(tr){return arguments.length?(Q=tr,rr):Q},rr.x1=function(tr){return arguments.length?(se=tr,rr):se},rr.y=function(tr){return arguments.length?(ye=_e=tr,rr):_e},rr.y0=function(tr){return arguments.length?(ye=tr,rr):ye},rr.y1=function(tr){return arguments.length?(_e=tr,rr):_e},rr.defined=function(tr){return arguments.length?(Ae=tr,rr):Ae},rr.interpolate=function(tr){return arguments.length?(typeof tr=="function"?Le=Ge=tr:Le=(Ge=gf.get(tr)||Wu).key,tt=Ge.reverse||Ge,St=Ge.closed?"M":"L",rr):Le},rr.tension=function(tr){return arguments.length?(Ct=tr,rr):Ct},rr}Ih.reverse=Gv,Gv.reverse=Ih,e.svg.area=function(){return qt(O)},e.svg.area.radial=function(){var U=qt(jt);return U.radius=U.x,delete U.x,U.innerRadius=U.x0,delete U.x0,U.outerRadius=U.x1,delete U.x1,U.angle=U.y,delete U.y,U.startAngle=U.y0,delete U.y0,U.endAngle=U.y1,delete U.y1,U};function Qt(U){return U.source}function ar(U){return U.target}e.svg.chord=function(){var U=Qt,Q=ar,se=_r,ye=au,_e=Lc;function Ae(Ct,rr){var tr=Ge(this,U,Ct,rr),Tr=Ge(this,Q,Ct,rr);return"M"+tr.p0+tt(tr.r,tr.p1,tr.a1-tr.a0)+(Le(tr,Tr)?St(tr.r,tr.p1,tr.r,tr.p0):St(tr.r,tr.p1,Tr.r,Tr.p0)+tt(Tr.r,Tr.p1,Tr.a1-Tr.a0)+St(Tr.r,Tr.p1,tr.r,tr.p0))+"Z"}function Ge(Ct,rr,tr,Tr){var Er=rr.call(Ct,tr,Tr),ir=se.call(Ct,Er,Tr),gr=ye.call(Ct,Er,Tr)-de,wr=_e.call(Ct,Er,Tr)-de;return{r:ir,a0:gr,a1:wr,p0:[ir*Math.cos(gr),ir*Math.sin(gr)],p1:[ir*Math.cos(wr),ir*Math.sin(wr)]}}function Le(Ct,rr){return Ct.a0==rr.a0&&Ct.a1==rr.a1}function tt(Ct,rr,tr){return"A"+Ct+","+Ct+" 0 "+ +(tr>Ke)+",1 "+rr}function St(Ct,rr,tr,Tr){return"Q 0,0 "+Tr}return Ae.radius=function(Ct){return arguments.length?(se=br(Ct),Ae):se},Ae.source=function(Ct){return arguments.length?(U=br(Ct),Ae):U},Ae.target=function(Ct){return arguments.length?(Q=br(Ct),Ae):Q},Ae.startAngle=function(Ct){return arguments.length?(ye=br(Ct),Ae):ye},Ae.endAngle=function(Ct){return arguments.length?(_e=br(Ct),Ae):_e},Ae};function _r(U){return U.radius}e.svg.diagonal=function(){var U=Qt,Q=ar,se=Sr;function ye(_e,Ae){var Ge=U.call(this,_e,Ae),Le=Q.call(this,_e,Ae),tt=(Ge.y+Le.y)/2,St=[Ge,{x:Ge.x,y:tt},{x:Le.x,y:tt},Le];return St=St.map(se),"M"+St[0]+"C"+St[1]+" "+St[2]+" "+St[3]}return ye.source=function(_e){return arguments.length?(U=br(_e),ye):U},ye.target=function(_e){return arguments.length?(Q=br(_e),ye):Q},ye.projection=function(_e){return arguments.length?(se=_e,ye):se},ye};function Sr(U){return[U.x,U.y]}e.svg.diagonal.radial=function(){var U=e.svg.diagonal(),Q=Sr,se=U.projection;return U.projection=function(ye){return arguments.length?se(Hr(Q=ye)):Q},U};function Hr(U){return function(){var Q=U.apply(this,arguments),se=Q[0],ye=Q[1]-de;return[se*Math.cos(ye),se*Math.sin(ye)]}}e.svg.symbol=function(){var U=kn,Q=ln;function se(ye,_e){return(Qi.get(U.call(this,ye,_e))||yi)(Q.call(this,ye,_e))}return se.type=function(ye){return arguments.length?(U=br(ye),se):U},se.size=function(ye){return arguments.length?(Q=br(ye),se):Q},se};function ln(){return 64}function kn(){return"circle"}function yi(U){var Q=Math.sqrt(U/Ke);return"M0,"+Q+"A"+Q+","+Q+" 0 1,1 0,"+-Q+"A"+Q+","+Q+" 0 1,1 0,"+Q+"Z"}var Qi=e.map({circle:yi,cross:function(U){var Q=Math.sqrt(U/5)/2;return"M"+-3*Q+","+-Q+"H"+-Q+"V"+-3*Q+"H"+Q+"V"+-Q+"H"+3*Q+"V"+Q+"H"+Q+"V"+3*Q+"H"+-Q+"V"+Q+"H"+-3*Q+"Z"},diamond:function(U){var Q=Math.sqrt(U/(2*sa)),se=Q*sa;return"M0,"+-Q+"L"+se+",0 0,"+Q+" "+-se+",0Z"},square:function(U){var Q=Math.sqrt(U)/2;return"M"+-Q+","+-Q+"L"+Q+","+-Q+" "+Q+","+Q+" "+-Q+","+Q+"Z"},"triangle-down":function(U){var Q=Math.sqrt(U/ra),se=Q*ra/2;return"M0,"+se+"L"+Q+","+-se+" "+-Q+","+-se+"Z"},"triangle-up":function(U){var Q=Math.sqrt(U/ra),se=Q*ra/2;return"M0,"+-se+"L"+Q+","+se+" "+-Q+","+se+"Z"}});e.svg.symbolTypes=Qi.keys();var ra=Math.sqrt(3),sa=Math.tan(30*Te);ce.transition=function(U){for(var Q=ds||++qa,se=Ya(U),ye=[],_e,Ae,Ge=ol||{time:Date.now(),ease:Gl,delay:0,duration:250},Le=-1,tt=this.length;++Le<tt;){ye.push(_e=[]);for(var St=this[Le],Ct=-1,rr=St.length;++Ct<rr;)(Ae=St[Ct])&&Il(Ae,Ct,se,Q,Ge),_e.push(Ae)}return jo(ye,se,Q)},ce.interrupt=function(U){return this.each(U==null?pa:Lo(Ya(U)))};var pa=Lo(Ya());function Lo(U){return function(){var Q,se,ye;(Q=this[U])&&(ye=Q[se=Q.active])&&(ye.timer.c=null,ye.timer.t=NaN,--Q.count?delete Q[se]:delete this[U],Q.active+=.5,ye.event&&ye.event.interrupt.call(this,this.__data__,ye.index))}}function jo(U,Q,se){return X(U,ba),U.namespace=Q,U.id=se,U}var ba=[],qa=0,ds,ol;ba.call=ce.call,ba.empty=ce.empty,ba.node=ce.node,ba.size=ce.size,e.transition=function(U,Q){return U&&U.transition?ds?U.transition(Q):U:e.selection().transition(U)},e.transition.prototype=ba,ba.select=function(U){var Q=this.id,se=this.namespace,ye=[],_e,Ae,Ge;U=ie(U);for(var Le=-1,tt=this.length;++Le<tt;){ye.push(_e=[]);for(var St=this[Le],Ct=-1,rr=St.length;++Ct<rr;)(Ge=St[Ct])&&(Ae=U.call(Ge,Ge.__data__,Ct,Le))?("__data__"in Ge&&(Ae.__data__=Ge.__data__),Il(Ae,Ct,se,Q,Ge[se][Q]),_e.push(Ae)):_e.push(null)}return jo(ye,se,Q)},ba.selectAll=function(U){var Q=this.id,se=this.namespace,ye=[],_e,Ae,Ge,Le,tt;U=ge(U);for(var St=-1,Ct=this.length;++St<Ct;)for(var rr=this[St],tr=-1,Tr=rr.length;++tr<Tr;)if(Ge=rr[tr]){tt=Ge[se][Q],Ae=U.call(Ge,Ge.__data__,tr,St),ye.push(_e=[]);for(var Er=-1,ir=Ae.length;++Er<ir;)(Le=Ae[Er])&&Il(Le,Er,se,Q,tt),_e.push(Le)}return jo(ye,se,Q)},ba.filter=function(U){var Q=[],se,ye,_e;typeof U!="function"&&(U=Me(U));for(var Ae=0,Ge=this.length;Ae<Ge;Ae++){Q.push(se=[]);for(var ye=this[Ae],Le=0,tt=ye.length;Le<tt;Le++)(_e=ye[Le])&&U.call(_e,_e.__data__,Le,Ae)&&se.push(_e)}return jo(Q,this.namespace,this.id)},ba.tween=function(U,Q){var se=this.id,ye=this.namespace;return arguments.length<2?this.node()[ye][se].tween.get(U):dt(this,Q==null?function(_e){_e[ye][se].tween.remove(U)}:function(_e){_e[ye][se].tween.set(U,Q)})};function el(U,Q,se,ye){var _e=U.id,Ae=U.namespace;return dt(U,typeof se=="function"?function(Ge,Le,tt){Ge[Ae][_e].tween.set(Q,ye(se.call(Ge,Ge.__data__,Le,tt)))}:(se=ye(se),function(Ge){Ge[Ae][_e].tween.set(Q,se)}))}ba.attr=function(U,Q){if(arguments.length<2){for(Q in U)this.attr(Q,U[Q]);return this}var se=U=="transform"?uv:qs,ye=e.ns.qualify(U);function _e(){this.removeAttribute(ye)}function Ae(){this.removeAttributeNS(ye.space,ye.local)}function Ge(tt){return tt==null?_e:(tt+="",function(){var St=this.getAttribute(ye),Ct;return St!==tt&&(Ct=se(St,tt),function(rr){this.setAttribute(ye,Ct(rr))})})}function Le(tt){return tt==null?Ae:(tt+="",function(){var St=this.getAttributeNS(ye.space,ye.local),Ct;return St!==tt&&(Ct=se(St,tt),function(rr){this.setAttributeNS(ye.space,ye.local,Ct(rr))})})}return el(this,"attr."+U,Q,ye.local?Le:Ge)},ba.attrTween=function(U,Q){var se=e.ns.qualify(U);function ye(Ae,Ge){var Le=Q.call(this,Ae,Ge,this.getAttribute(se));return Le&&function(tt){this.setAttribute(se,Le(tt))}}function _e(Ae,Ge){var Le=Q.call(this,Ae,Ge,this.getAttributeNS(se.space,se.local));return Le&&function(tt){this.setAttributeNS(se.space,se.local,Le(tt))}}return this.tween("attr."+U,se.local?_e:ye)},ba.style=function(U,Q,se){var ye=arguments.length;if(ye<3){if(typeof U!="string"){ye<2&&(Q="");for(se in U)this.style(se,U[se],Q);return this}se=""}function _e(){this.style.removeProperty(U)}function Ae(Ge){return Ge==null?_e:(Ge+="",function(){var Le=a(this).getComputedStyle(this,null).getPropertyValue(U),tt;return Le!==Ge&&(tt=qs(Le,Ge),function(St){this.style.setProperty(U,tt(St),se)})})}return el(this,"style."+U,Q,Ae)},ba.styleTween=function(U,Q,se){arguments.length<3&&(se="");function ye(_e,Ae){var Ge=Q.call(this,_e,Ae,a(this).getComputedStyle(this,null).getPropertyValue(U));return Ge&&function(Le){this.style.setProperty(U,Ge(Le),se)}}return this.tween("style."+U,ye)},ba.text=function(U){return el(this,"text",U,to)};function to(U){return U==null&&(U=""),function(){this.textContent=U}}ba.remove=function(){var U=this.namespace;return this.each("end.transition",function(){var Q;this[U].count<2&&(Q=this.parentNode)&&Q.removeChild(this)})},ba.ease=function(U){var Q=this.id,se=this.namespace;return arguments.length<1?this.node()[se][Q].ease:(typeof U!="function"&&(U=e.ease.apply(e,arguments)),dt(this,function(ye){ye[se][Q].ease=U}))},ba.delay=function(U){var Q=this.id,se=this.namespace;return arguments.length<1?this.node()[se][Q].delay:dt(this,typeof U=="function"?function(ye,_e,Ae){ye[se][Q].delay=+U.call(ye,ye.__data__,_e,Ae)}:(U=+U,function(ye){ye[se][Q].delay=U}))},ba.duration=function(U){var Q=this.id,se=this.namespace;return arguments.length<1?this.node()[se][Q].duration:dt(this,typeof U=="function"?function(ye,_e,Ae){ye[se][Q].duration=Math.max(1,U.call(ye,ye.__data__,_e,Ae))}:(U=Math.max(1,U),function(ye){ye[se][Q].duration=U}))},ba.each=function(U,Q){var se=this.id,ye=this.namespace;if(arguments.length<2){var _e=ol,Ae=ds;try{ds=se,dt(this,function(Ge,Le,tt){ol=Ge[ye][se],U.call(Ge,Ge.__data__,Le,tt)})}finally{ol=_e,ds=Ae}}else dt(this,function(Ge){var Le=Ge[ye][se];(Le.event||(Le.event=e.dispatch("start","end","interrupt"))).on(U,Q)});return this},ba.transition=function(){for(var U=this.id,Q=++qa,se=this.namespace,ye=[],_e,Ae,Ge,Le,tt=0,St=this.length;tt<St;tt++){ye.push(_e=[]);for(var Ae=this[tt],Ct=0,rr=Ae.length;Ct<rr;Ct++)(Ge=Ae[Ct])&&(Le=Ge[se][U],Il(Ge,Ct,se,Q,{time:Le.time,ease:Le.ease,delay:Le.delay+Le.duration,duration:Le.duration})),_e.push(Ge)}return jo(ye,se,Q)};function Ya(U){return U==null?"__transition__":"__transition_"+U+"__"}function Il(U,Q,se,ye,_e){var Ae=U[se]||(U[se]={active:0,count:0}),Ge=Ae[ye],Le,tt,St,Ct,rr;function tr(ir){var gr=Ge.delay;if(tt.t=gr+Le,gr<=ir)return Tr(ir-gr);tt.c=Tr}function Tr(ir){var gr=Ae.active,wr=Ae[gr];wr&&(wr.timer.c=null,wr.timer.t=NaN,--Ae.count,delete Ae[gr],wr.event&&wr.event.interrupt.call(U,U.__data__,wr.index));for(var Pr in Ae)if(+Pr<ye){var kr=Ae[Pr];kr.timer.c=null,kr.timer.t=NaN,--Ae.count,delete Ae[Pr]}tt.c=Er,eo(function(){return tt.c&&Er(ir||1)&&(tt.c=null,tt.t=NaN),1},0,Le),Ae.active=ye,Ge.event&&Ge.event.start.call(U,U.__data__,Q),rr=[],Ge.tween.forEach(function(pr,yn){(yn=yn.call(U,U.__data__,Q))&&rr.push(yn)}),Ct=Ge.ease,St=Ge.duration}function Er(ir){for(var gr=ir/St,wr=Ct(gr),Pr=rr.length;Pr>0;)rr[--Pr].call(U,wr);if(gr>=1)return Ge.event&&Ge.event.end.call(U,U.__data__,Q),--Ae.count?delete Ae[ye]:delete U[se],1}Ge||(Le=_e.time,tt=eo(tr,0,Le),Ge=Ae[ye]={tween:new w,time:Le,timer:tt,delay:_e.delay,duration:_e.duration,ease:_e.ease,index:Q},_e=null,++Ae.count)}e.svg.axis=function(){var U=e.scale.linear(),Q=Sl,se=6,ye=6,_e=3,Ae=[10],Ge=null,Le;function tt(St){St.each(function(){var Ct=e.select(this),rr=this.__chart__||U,tr=this.__chart__=U.copy(),Tr=Ge==null?tr.ticks?tr.ticks.apply(tr,Ae):tr.domain():Ge,Er=Le==null?tr.tickFormat?tr.tickFormat.apply(tr,Ae):O:Le,ir=Ct.selectAll(".tick").data(Tr,tr),gr=ir.enter().insert("g",".domain").attr("class","tick").style("opacity",Et),wr=e.transition(ir.exit()).style("opacity",Et).remove(),Pr=e.transition(ir.order()).style("opacity",1),kr=Math.max(se,0)+_e,pr,yn=nn(tr),bn=Ct.selectAll(".domain").data([0]),In=(bn.enter().append("path").attr("class","domain"),e.transition(bn));gr.append("line"),gr.append("text");var Xn=gr.select("line"),Ci=Pr.select("line"),Fi=ir.select("text").text(Er),xa=gr.select("text"),Gi=Pr.select("text"),va=Q==="top"||Q==="left"?-1:1,go,Po,Ao,Sn;if(Q==="bottom"||Q==="top"?(pr=su,go="x",Ao="y",Po="x2",Sn="y2",Fi.attr("dy",va<0?"0em":".71em").style("text-anchor","middle"),In.attr("d","M"+yn[0]+","+va*ye+"V0H"+yn[1]+"V"+va*ye)):(pr=Fl,go="y",Ao="x",Po="y2",Sn="x2",Fi.attr("dy",".32em").style("text-anchor",va<0?"end":"start"),In.attr("d","M"+va*ye+","+yn[0]+"H0V"+yn[1]+"H"+va*ye)),Xn.attr(Sn,va*se),xa.attr(Ao,va*kr),Ci.attr(Po,0).attr(Sn,va*se),Gi.attr(go,0).attr(Ao,va*kr),tr.rangeBand){var da=tr,Sa=da.rangeBand()/2;rr=tr=function(La){return da(La)+Sa}}else rr.rangeBand?rr=tr:wr.call(pr,tr,rr);gr.call(pr,rr,tr),Pr.call(pr,tr,tr)})}return tt.scale=function(St){return arguments.length?(U=St,tt):U},tt.orient=function(St){return arguments.length?(Q=St in Su?St+"":Sl,tt):Q},tt.ticks=function(){return arguments.length?(Ae=r(arguments),tt):Ae},tt.tickValues=function(St){return arguments.length?(Ge=St,tt):Ge},tt.tickFormat=function(St){return arguments.length?(Le=St,tt):Le},tt.tickSize=function(St){var Ct=arguments.length;return Ct?(se=+St,ye=+arguments[Ct-1],tt):se},tt.innerTickSize=function(St){return arguments.length?(se=+St,tt):se},tt.outerTickSize=function(St){return arguments.length?(ye=+St,tt):ye},tt.tickPadding=function(St){return arguments.length?(_e=+St,tt):_e},tt.tickSubdivide=function(){return arguments.length&&tt},tt};var Sl="bottom",Su={top:1,right:1,bottom:1,left:1};function su(U,Q,se){U.attr("transform",function(ye){var _e=Q(ye);return"translate("+(isFinite(_e)?_e:se(ye))+",0)"})}function Fl(U,Q,se){U.attr("transform",function(ye){var _e=Q(ye);return"translate(0,"+(isFinite(_e)?_e:se(ye))+")"})}e.svg.brush=function(){var U=fe(Ct,"brushstart","brush","brushend"),Q=null,se=null,ye=[0,0],_e=[0,0],Ae,Ge,Le=!0,tt=!0,St=yf[0];function Ct(ir){ir.each(function(){var gr=e.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Er).on("touchstart.brush",Er),wr=gr.selectAll(".background").data([0]);wr.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),gr.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Pr=gr.selectAll(".resize").data(St,O);Pr.exit().remove(),Pr.enter().append("g").attr("class",function(bn){return"resize "+bn}).style("cursor",function(bn){return El[bn]}).append("rect").attr("x",function(bn){return/[ew]$/.test(bn)?-3:null}).attr("y",function(bn){return/^[ns]/.test(bn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Pr.style("display",Ct.empty()?"none":null);var kr=e.transition(gr),pr=e.transition(wr),yn;Q&&(yn=nn(Q),pr.attr("x",yn[0]).attr("width",yn[1]-yn[0]),tr(kr)),se&&(yn=nn(se),pr.attr("y",yn[0]).attr("height",yn[1]-yn[0]),Tr(kr)),rr(kr)})}Ct.event=function(ir){ir.each(function(){var gr=U.of(this,arguments),wr={x:ye,y:_e,i:Ae,j:Ge},Pr=this.__chart__||wr;this.__chart__=wr,ds?e.select(this).transition().each("start.brush",function(){Ae=Pr.i,Ge=Pr.j,ye=Pr.x,_e=Pr.y,gr({type:"brushstart"})}).tween("brush:brush",function(){var kr=Vl(ye,wr.x),pr=Vl(_e,wr.y);return Ae=Ge=null,function(yn){ye=wr.x=kr(yn),_e=wr.y=pr(yn),gr({type:"brush",mode:"resize"})}}).each("end.brush",function(){Ae=wr.i,Ge=wr.j,gr({type:"brush",mode:"resize"}),gr({type:"brushend"})}):(gr({type:"brushstart"}),gr({type:"brush",mode:"resize"}),gr({type:"brushend"}))})};function rr(ir){ir.selectAll(".resize").attr("transform",function(gr){return"translate("+ye[+/e$/.test(gr)]+","+_e[+/^s/.test(gr)]+")"})}function tr(ir){ir.select(".extent").attr("x",ye[0]),ir.selectAll(".extent,.n>rect,.s>rect").attr("width",ye[1]-ye[0])}function Tr(ir){ir.select(".extent").attr("y",_e[0]),ir.selectAll(".extent,.e>rect,.w>rect").attr("height",_e[1]-_e[0])}function Er(){var ir=this,gr=e.select(e.event.target),wr=U.of(ir,arguments),Pr=e.select(ir),kr=gr.datum(),pr=!/^(n|s)$/.test(kr)&&Q,yn=!/^(e|w)$/.test(kr)&&se,bn=gr.classed("extent"),In=or(ir),Xn,Ci=e.mouse(ir),Fi,xa=e.select(a(ir)).on("keydown.brush",go).on("keyup.brush",Po);if(e.event.changedTouches?xa.on("touchmove.brush",Ao).on("touchend.brush",da):xa.on("mousemove.brush",Ao).on("mouseup.brush",da),Pr.interrupt().selectAll("*").interrupt(),bn)Ci[0]=ye[0]-Ci[0],Ci[1]=_e[0]-Ci[1];else if(kr){var Gi=+/w$/.test(kr),va=+/^n/.test(kr);Fi=[ye[1-Gi]-Ci[0],_e[1-va]-Ci[1]],Ci[0]=ye[Gi],Ci[1]=_e[va]}else e.event.altKey&&(Xn=Ci.slice());Pr.style("pointer-events","none").selectAll(".resize").style("display",null),e.select("body").style("cursor",gr.style("cursor")),wr({type:"brushstart"}),Ao();function go(){e.event.keyCode==32&&(bn||(Xn=null,Ci[0]-=ye[1],Ci[1]-=_e[1],bn=2),re())}function Po(){e.event.keyCode==32&&bn==2&&(Ci[0]+=ye[1],Ci[1]+=_e[1],bn=0,re())}function Ao(){var Sa=e.mouse(ir),La=!1;Fi&&(Sa[0]+=Fi[0],Sa[1]+=Fi[1]),bn||(e.event.altKey?(Xn||(Xn=[(ye[0]+ye[1])/2,(_e[0]+_e[1])/2]),Ci[0]=ye[+(Sa[0]<Xn[0])],Ci[1]=_e[+(Sa[1]<Xn[1])]):Xn=null),pr&&Sn(Sa,Q,0)&&(tr(Pr),La=!0),yn&&Sn(Sa,se,1)&&(Tr(Pr),La=!0),La&&(rr(Pr),wr({type:"brush",mode:bn?"move":"resize"}))}function Sn(Sa,La,Ts){var Gs=nn(La),yl=Gs[0],ls=Gs[1],Wl=Ci[Ts],Ye=Ts?_e:ye,Gt=Ye[1]-Ye[0],lr,Or;if(bn&&(yl-=Wl,ls-=Gt+Wl),lr=(Ts?tt:Le)?Math.max(yl,Math.min(ls,Sa[Ts])):Sa[Ts],bn?Or=(lr+=Wl)+Gt:(Xn&&(Wl=Math.max(yl,Math.min(ls,2*Xn[Ts]-lr))),Wl<lr?(Or=lr,lr=Wl):Or=Wl),Ye[0]!=lr||Ye[1]!=Or)return Ts?Ge=null:Ae=null,Ye[0]=lr,Ye[1]=Or,!0}function da(){Ao(),Pr.style("pointer-events","all").selectAll(".resize").style("display",Ct.empty()?"none":null),e.select("body").style("cursor",null),xa.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),In(),wr({type:"brushend"})}}return Ct.x=function(ir){return arguments.length?(Q=ir,St=yf[!Q<<1|!se],Ct):Q},Ct.y=function(ir){return arguments.length?(se=ir,St=yf[!Q<<1|!se],Ct):se},Ct.clamp=function(ir){return arguments.length?(Q&&se?(Le=!!ir[0],tt=!!ir[1]):Q?Le=!!ir:se&&(tt=!!ir),Ct):Q&&se?[Le,tt]:Q?Le:se?tt:null},Ct.extent=function(ir){var gr,wr,Pr,kr,pr;return arguments.length?(Q&&(gr=ir[0],wr=ir[1],se&&(gr=gr[0],wr=wr[0]),Ae=[gr,wr],Q.invert&&(gr=Q(gr),wr=Q(wr)),wr<gr&&(pr=gr,gr=wr,wr=pr),(gr!=ye[0]||wr!=ye[1])&&(ye=[gr,wr])),se&&(Pr=ir[0],kr=ir[1],Q&&(Pr=Pr[1],kr=kr[1]),Ge=[Pr,kr],se.invert&&(Pr=se(Pr),kr=se(kr)),kr<Pr&&(pr=Pr,Pr=kr,kr=pr),(Pr!=_e[0]||kr!=_e[1])&&(_e=[Pr,kr])),Ct):(Q&&(Ae?(gr=Ae[0],wr=Ae[1]):(gr=ye[0],wr=ye[1],Q.invert&&(gr=Q.invert(gr),wr=Q.invert(wr)),wr<gr&&(pr=gr,gr=wr,wr=pr))),se&&(Ge?(Pr=Ge[0],kr=Ge[1]):(Pr=_e[0],kr=_e[1],se.invert&&(Pr=se.invert(Pr),kr=se.invert(kr)),kr<Pr&&(pr=Pr,Pr=kr,kr=pr))),Q&&se?[[gr,Pr],[wr,kr]]:Q?[gr,wr]:se&&[Pr,kr])},Ct.clear=function(){return Ct.empty()||(ye=[0,0],_e=[0,0],Ae=Ge=null),Ct},Ct.empty=function(){return!!Q&&ye[0]==ye[1]||!!se&&_e[0]==_e[1]},e.rebind(Ct,U,"on")};var El={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},yf=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];e.text=Jr(function(U){return U.responseText}),e.json=function(U,Q){return sn(U,"application/json",Xu,Q)};function Xu(U){return JSON.parse(U.responseText)}e.html=function(U,Q){return sn(U,"text/html",Zu,Q)};function Zu(U){var Q=i.createRange();return Q.selectNode(i.body),Q.createContextualFragment(U.responseText)}e.xml=Jr(function(U){return U.responseXML}),typeof define=="function"&&define.amd?define(e):typeof bk=="object"&&bk.exports?bk.exports=e:this.d3=e}).apply(self)});var iq=ne((wk,qJ)=>{(function(e,t){typeof wk=="object"&&typeof qJ!="undefined"?t(wk):typeof define=="function"&&define.amd?define(["exports"],t):(e=e||self,t(e.d3=e.d3||{}))})(wk,function(e){"use strict";var t=new Date,r=new Date;function i(Me,Ze,dt,it){function vt(rt){return Me(rt=arguments.length===0?new Date:new Date(+rt)),rt}return vt.floor=function(rt){return Me(rt=new Date(+rt)),rt},vt.ceil=function(rt){return Me(rt=new Date(rt-1)),Ze(rt,1),Me(rt),rt},vt.round=function(rt){var We=vt(rt),ht=vt.ceil(rt);return rt-We<ht-rt?We:ht},vt.offset=function(rt,We){return Ze(rt=new Date(+rt),We==null?1:Math.floor(We)),rt},vt.range=function(rt,We,ht){var mt=[],er;if(rt=vt.ceil(rt),ht=ht==null?1:Math.floor(ht),!(rt<We)||!(ht>0))return mt;do mt.push(er=new Date(+rt)),Ze(rt,ht),Me(rt);while(er<rt&&rt<We);return mt},vt.filter=function(rt){return i(function(We){if(We>=We)for(;Me(We),!rt(We);)We.setTime(We-1)},function(We,ht){if(We>=We)if(ht<0)for(;++ht<=0;)for(;Ze(We,-1),!rt(We););else for(;--ht>=0;)for(;Ze(We,1),!rt(We););})},dt&&(vt.count=function(rt,We){return t.setTime(+rt),r.setTime(+We),Me(t),Me(r),Math.floor(dt(t,r))},vt.every=function(rt){return rt=Math.floor(rt),!isFinite(rt)||!(rt>0)?null:rt>1?vt.filter(it?function(We){return it(We)%rt===0}:function(We){return vt.count(0,We)%rt===0}):vt}),vt}var n=i(function(){},function(Me,Ze){Me.setTime(+Me+Ze)},function(Me,Ze){return Ze-Me});n.every=function(Me){return Me=Math.floor(Me),!isFinite(Me)||!(Me>0)?null:Me>1?i(function(Ze){Ze.setTime(Math.floor(Ze/Me)*Me)},function(Ze,dt){Ze.setTime(+Ze+dt*Me)},function(Ze,dt){return(dt-Ze)/Me}):n};var a=n.range,o=1e3,s=6e4,l=36e5,u=864e5,f=6048e5,c=i(function(Me){Me.setTime(Me-Me.getMilliseconds())},function(Me,Ze){Me.setTime(+Me+Ze*o)},function(Me,Ze){return(Ze-Me)/o},function(Me){return Me.getUTCSeconds()}),h=c.range,v=i(function(Me){Me.setTime(Me-Me.getMilliseconds()-Me.getSeconds()*o)},function(Me,Ze){Me.setTime(+Me+Ze*s)},function(Me,Ze){return(Ze-Me)/s},function(Me){return Me.getMinutes()}),d=v.range,_=i(function(Me){Me.setTime(Me-Me.getMilliseconds()-Me.getSeconds()*o-Me.getMinutes()*s)},function(Me,Ze){Me.setTime(+Me+Ze*l)},function(Me,Ze){return(Ze-Me)/l},function(Me){return Me.getHours()}),T=_.range,p=i(function(Me){Me.setHours(0,0,0,0)},function(Me,Ze){Me.setDate(Me.getDate()+Ze)},function(Me,Ze){return(Ze-Me-(Ze.getTimezoneOffset()-Me.getTimezoneOffset())*s)/u},function(Me){return Me.getDate()-1}),M=p.range;function b(Me){return i(function(Ze){Ze.setDate(Ze.getDate()-(Ze.getDay()+7-Me)%7),Ze.setHours(0,0,0,0)},function(Ze,dt){Ze.setDate(Ze.getDate()+dt*7)},function(Ze,dt){return(dt-Ze-(dt.getTimezoneOffset()-Ze.getTimezoneOffset())*s)/f})}var w=b(0),k=b(1),x=b(2),E=b(3),S=b(4),g=b(5),C=b(6),A=w.range,P=k.range,D=x.range,z=E.range,O=S.range,V=g.range,B=C.range,F=i(function(Me){Me.setDate(1),Me.setHours(0,0,0,0)},function(Me,Ze){Me.setMonth(Me.getMonth()+Ze)},function(Me,Ze){return Ze.getMonth()-Me.getMonth()+(Ze.getFullYear()-Me.getFullYear())*12},function(Me){return Me.getMonth()}),N=F.range,Z=i(function(Me){Me.setMonth(0,1),Me.setHours(0,0,0,0)},function(Me,Ze){Me.setFullYear(Me.getFullYear()+Ze)},function(Me,Ze){return Ze.getFullYear()-Me.getFullYear()},function(Me){return Me.getFullYear()});Z.every=function(Me){return!isFinite(Me=Math.floor(Me))||!(Me>0)?null:i(function(Ze){Ze.setFullYear(Math.floor(Ze.getFullYear()/Me)*Me),Ze.setMonth(0,1),Ze.setHours(0,0,0,0)},function(Ze,dt){Ze.setFullYear(Ze.getFullYear()+dt*Me)})};var J=Z.range,re=i(function(Me){Me.setUTCSeconds(0,0)},function(Me,Ze){Me.setTime(+Me+Ze*s)},function(Me,Ze){return(Ze-Me)/s},function(Me){return Me.getUTCMinutes()}),ue=re.range,fe=i(function(Me){Me.setUTCMinutes(0,0,0)},function(Me,Ze){Me.setTime(+Me+Ze*l)},function(Me,Ze){return(Ze-Me)/l},function(Me){return Me.getUTCHours()}),K=fe.range,X=i(function(Me){Me.setUTCHours(0,0,0,0)},function(Me,Ze){Me.setUTCDate(Me.getUTCDate()+Ze)},function(Me,Ze){return(Ze-Me)/u},function(Me){return Me.getUTCDate()-1}),ae=X.range;function oe(Me){return i(function(Ze){Ze.setUTCDate(Ze.getUTCDate()-(Ze.getUTCDay()+7-Me)%7),Ze.setUTCHours(0,0,0,0)},function(Ze,dt){Ze.setUTCDate(Ze.getUTCDate()+dt*7)},function(Ze,dt){return(dt-Ze)/f})}var me=oe(0),xe=oe(1),ce=oe(2),ie=oe(3),ge=oe(4),le=oe(5),we=oe(6),Re=me.range,qe=xe.range,et=ce.range,Pe=ie.range,Ie=ge.range,ut=le.range,ft=we.range,je=i(function(Me){Me.setUTCDate(1),Me.setUTCHours(0,0,0,0)},function(Me,Ze){Me.setUTCMonth(Me.getUTCMonth()+Ze)},function(Me,Ze){return Ze.getUTCMonth()-Me.getUTCMonth()+(Ze.getUTCFullYear()-Me.getUTCFullYear())*12},function(Me){return Me.getUTCMonth()}),_t=je.range,Bt=i(function(Me){Me.setUTCMonth(0,1),Me.setUTCHours(0,0,0,0)},function(Me,Ze){Me.setUTCFullYear(Me.getUTCFullYear()+Ze)},function(Me,Ze){return Ze.getUTCFullYear()-Me.getUTCFullYear()},function(Me){return Me.getUTCFullYear()});Bt.every=function(Me){return!isFinite(Me=Math.floor(Me))||!(Me>0)?null:i(function(Ze){Ze.setUTCFullYear(Math.floor(Ze.getUTCFullYear()/Me)*Me),Ze.setUTCMonth(0,1),Ze.setUTCHours(0,0,0,0)},function(Ze,dt){Ze.setUTCFullYear(Ze.getUTCFullYear()+dt*Me)})};var Lt=Bt.range;e.timeDay=p,e.timeDays=M,e.timeFriday=g,e.timeFridays=V,e.timeHour=_,e.timeHours=T,e.timeInterval=i,e.timeMillisecond=n,e.timeMilliseconds=a,e.timeMinute=v,e.timeMinutes=d,e.timeMonday=k,e.timeMondays=P,e.timeMonth=F,e.timeMonths=N,e.timeSaturday=C,e.timeSaturdays=B,e.timeSecond=c,e.timeSeconds=h,e.timeSunday=w,e.timeSundays=A,e.timeThursday=S,e.timeThursdays=O,e.timeTuesday=x,e.timeTuesdays=D,e.timeWednesday=E,e.timeWednesdays=z,e.timeWeek=w,e.timeWeeks=A,e.timeYear=Z,e.timeYears=J,e.utcDay=X,e.utcDays=ae,e.utcFriday=le,e.utcFridays=ut,e.utcHour=fe,e.utcHours=K,e.utcMillisecond=n,e.utcMilliseconds=a,e.utcMinute=re,e.utcMinutes=ue,e.utcMonday=xe,e.utcMondays=qe,e.utcMonth=je,e.utcMonths=_t,e.utcSaturday=we,e.utcSaturdays=ft,e.utcSecond=c,e.utcSeconds=h,e.utcSunday=me,e.utcSundays=Re,e.utcThursday=ge,e.utcThursdays=Ie,e.utcTuesday=ce,e.utcTuesdays=et,e.utcWednesday=ie,e.utcWednesdays=Pe,e.utcWeek=me,e.utcWeeks=Re,e.utcYear=Bt,e.utcYears=Lt,Object.defineProperty(e,"__esModule",{value:!0})})});var Wb=ne((Tk,zJ)=>{(function(e,t){typeof Tk=="object"&&typeof zJ!="undefined"?t(Tk,iq()):typeof define=="function"&&define.amd?define(["exports","d3-time"],t):(e=e||self,t(e.d3=e.d3||{},e.d3))})(Tk,function(e,t){"use strict";function r(yt){if(0<=yt.y&&yt.y<100){var Et=new Date(-1,yt.m,yt.d,yt.H,yt.M,yt.S,yt.L);return Et.setFullYear(yt.y),Et}return new Date(yt.y,yt.m,yt.d,yt.H,yt.M,yt.S,yt.L)}function i(yt){if(0<=yt.y&&yt.y<100){var Et=new Date(Date.UTC(-1,yt.m,yt.d,yt.H,yt.M,yt.S,yt.L));return Et.setUTCFullYear(yt.y),Et}return new Date(Date.UTC(yt.y,yt.m,yt.d,yt.H,yt.M,yt.S,yt.L))}function n(yt,Et,Je){return{y:yt,m:Et,d:Je,H:0,M:0,S:0,L:0}}function a(yt){var Et=yt.dateTime,Je=yt.date,Ke=yt.time,At=yt.periods,Ee=yt.days,de=yt.shortDays,Te=yt.months,nt=yt.shortMonths,Mt=h(At),Kt=v(At),Jt=h(Ee),Fr=v(Ee),Vr=h(de),mr=v(de),zr=h(Te),an=v(Te),ni=h(nt),mn=v(nt),fi={a:Gr,A:Yr,b:dn,B:Wr,c:null,d:F,e:F,f:ue,H:N,I:Z,j:J,L:re,m:fe,M:K,p:qn,q:vi,Q:We,s:ht,S:X,u:ae,U:oe,V:me,w:xe,W:ce,x:null,X:null,y:ie,Y:ge,Z:le,"%":rt},Wi={a:Mi,A:Ui,b:ji,B:ea,c:null,d:we,e:we,f:Ie,H:Re,I:qe,j:et,L:Pe,m:ut,M:ft,p:Ra,q:Li,Q:We,s:ht,S:je,u:_t,U:Bt,V:Lt,w:Me,W:Ze,x:null,X:null,y:dt,Y:it,Z:vt,"%":rt},si={a:lt,A:xt,b:Nt,B:nr,c:yr,d:S,e:S,f:z,H:C,I:C,j:g,L:D,m:E,M:A,p:Be,q:x,Q:V,s:B,S:P,u:_,U:T,V:p,w:d,W:M,x:dr,X:Rr,y:w,Y:b,Z:k,"%":O};fi.x=Zi(Je,fi),fi.X=Zi(Ke,fi),fi.c=Zi(Et,fi),Wi.x=Zi(Je,Wi),Wi.X=Zi(Ke,Wi),Wi.c=Zi(Et,Wi);function Zi(Yn,zi){return function(ya){var zn=[],Xe=-1,Ut=0,ur=Yn.length,br,Jr,sn;for(ya instanceof Date||(ya=new Date(+ya));++Xe<ur;)Yn.charCodeAt(Xe)===37&&(zn.push(Yn.slice(Ut,Xe)),(Jr=o[br=Yn.charAt(++Xe)])!=null?br=Yn.charAt(++Xe):Jr=br==="e"?" ":"0",(sn=zi[br])&&(br=sn(ya,Jr)),zn.push(br),Ut=Xe+1);return zn.push(Yn.slice(Ut,Xe)),zn.join("")}}function Ei(Yn,zi){return function(ya){var zn=n(1900,void 0,1),Xe=ot(zn,Yn,ya+="",0),Ut,ur;if(Xe!=ya.length)return null;if("Q"in zn)return new Date(zn.Q);if("s"in zn)return new Date(zn.s*1e3+("L"in zn?zn.L:0));if(zi&&!("Z"in zn)&&(zn.Z=0),"p"in zn&&(zn.H=zn.H%12+zn.p*12),zn.m===void 0&&(zn.m="q"in zn?zn.q:0),"V"in zn){if(zn.V<1||zn.V>53)return null;"w"in zn||(zn.w=1),"Z"in zn?(Ut=i(n(zn.y,0,1)),ur=Ut.getUTCDay(),Ut=ur>4||ur===0?t.utcMonday.ceil(Ut):t.utcMonday(Ut),Ut=t.utcDay.offset(Ut,(zn.V-1)*7),zn.y=Ut.getUTCFullYear(),zn.m=Ut.getUTCMonth(),zn.d=Ut.getUTCDate()+(zn.w+6)%7):(Ut=r(n(zn.y,0,1)),ur=Ut.getDay(),Ut=ur>4||ur===0?t.timeMonday.ceil(Ut):t.timeMonday(Ut),Ut=t.timeDay.offset(Ut,(zn.V-1)*7),zn.y=Ut.getFullYear(),zn.m=Ut.getMonth(),zn.d=Ut.getDate()+(zn.w+6)%7)}else("W"in zn||"U"in zn)&&("w"in zn||(zn.w="u"in zn?zn.u%7:"W"in zn?1:0),ur="Z"in zn?i(n(zn.y,0,1)).getUTCDay():r(n(zn.y,0,1)).getDay(),zn.m=0,zn.d="W"in zn?(zn.w+6)%7+zn.W*7-(ur+5)%7:zn.w+zn.U*7-(ur+6)%7);return"Z"in zn?(zn.H+=zn.Z/100|0,zn.M+=zn.Z%100,i(zn)):r(zn)}}function ot(Yn,zi,ya,zn){for(var Xe=0,Ut=zi.length,ur=ya.length,br,Jr;Xe<Ut;){if(zn>=ur)return-1;if(br=zi.charCodeAt(Xe++),br===37){if(br=zi.charAt(Xe++),Jr=si[br in o?zi.charAt(Xe++):br],!Jr||(zn=Jr(Yn,ya,zn))<0)return-1}else if(br!=ya.charCodeAt(zn++))return-1}return zn}function Be(Yn,zi,ya){var zn=Mt.exec(zi.slice(ya));return zn?(Yn.p=Kt[zn[0].toLowerCase()],ya+zn[0].length):-1}function lt(Yn,zi,ya){var zn=Vr.exec(zi.slice(ya));return zn?(Yn.w=mr[zn[0].toLowerCase()],ya+zn[0].length):-1}function xt(Yn,zi,ya){var zn=Jt.exec(zi.slice(ya));return zn?(Yn.w=Fr[zn[0].toLowerCase()],ya+zn[0].length):-1}function Nt(Yn,zi,ya){var zn=ni.exec(zi.slice(ya));return zn?(Yn.m=mn[zn[0].toLowerCase()],ya+zn[0].length):-1}function nr(Yn,zi,ya){var zn=zr.exec(zi.slice(ya));return zn?(Yn.m=an[zn[0].toLowerCase()],ya+zn[0].length):-1}function yr(Yn,zi,ya){return ot(Yn,Et,zi,ya)}function dr(Yn,zi,ya){return ot(Yn,Je,zi,ya)}function Rr(Yn,zi,ya){return ot(Yn,Ke,zi,ya)}function Gr(Yn){return de[Yn.getDay()]}function Yr(Yn){return Ee[Yn.getDay()]}function dn(Yn){return nt[Yn.getMonth()]}function Wr(Yn){return Te[Yn.getMonth()]}function qn(Yn){return At[+(Yn.getHours()>=12)]}function vi(Yn){return 1+~~(Yn.getMonth()/3)}function Mi(Yn){return de[Yn.getUTCDay()]}function Ui(Yn){return Ee[Yn.getUTCDay()]}function ji(Yn){return nt[Yn.getUTCMonth()]}function ea(Yn){return Te[Yn.getUTCMonth()]}function Ra(Yn){return At[+(Yn.getUTCHours()>=12)]}function Li(Yn){return 1+~~(Yn.getUTCMonth()/3)}return{format:function(Yn){var zi=Zi(Yn+="",fi);return zi.toString=function(){return Yn},zi},parse:function(Yn){var zi=Ei(Yn+="",!1);return zi.toString=function(){return Yn},zi},utcFormat:function(Yn){var zi=Zi(Yn+="",Wi);return zi.toString=function(){return Yn},zi},utcParse:function(Yn){var zi=Ei(Yn+="",!0);return zi.toString=function(){return Yn},zi}}}var o={"-":"",_:" ",0:"0"},s=/^\s*\d+/,l=/^%/,u=/[\\^$*+?|[\]().{}]/g;function f(yt,Et,Je){var Ke=yt<0?"-":"",At=(Ke?-yt:yt)+"",Ee=At.length;return Ke+(Ee<Je?new Array(Je-Ee+1).join(Et)+At:At)}function c(yt){return yt.replace(u,"\\$&")}function h(yt){return new RegExp("^(?:"+yt.map(c).join("|")+")","i")}function v(yt){for(var Et={},Je=-1,Ke=yt.length;++Je<Ke;)Et[yt[Je].toLowerCase()]=Je;return Et}function d(yt,Et,Je){var Ke=s.exec(Et.slice(Je,Je+1));return Ke?(yt.w=+Ke[0],Je+Ke[0].length):-1}function _(yt,Et,Je){var Ke=s.exec(Et.slice(Je,Je+1));return Ke?(yt.u=+Ke[0],Je+Ke[0].length):-1}function T(yt,Et,Je){var Ke=s.exec(Et.slice(Je,Je+2));return Ke?(yt.U=+Ke[0],Je+Ke[0].length):-1}function p(yt,Et,Je){var Ke=s.exec(Et.slice(Je,Je+2));return Ke?(yt.V=+Ke[0],Je+Ke[0].length):-1}function M(yt,Et,Je){var Ke=s.exec(Et.slice(Je,Je+2));return Ke?(yt.W=+Ke[0],Je+Ke[0].length):-1}function b(yt,Et,Je){var Ke=s.exec(Et.slice(Je,Je+4));return Ke?(yt.y=+Ke[0],Je+Ke[0].length):-1}function w(yt,Et,Je){var Ke=s.exec(Et.slice(Je,Je+2));return Ke?(yt.y=+Ke[0]+(+Ke[0]>68?1900:2e3),Je+Ke[0].length):-1}function k(yt,Et,Je){var Ke=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Et.slice(Je,Je+6));return Ke?(yt.Z=Ke[1]?0:-(Ke[2]+(Ke[3]||"00")),Je+Ke[0].length):-1}function x(yt,Et,Je){var Ke=s.exec(Et.slice(Je,Je+1));return Ke?(yt.q=Ke[0]*3-3,Je+Ke[0].length):-1}function E(yt,Et,Je){var Ke=s.exec(Et.slice(Je,Je+2));return Ke?(yt.m=Ke[0]-1,Je+Ke[0].length):-1}function S(yt,Et,Je){var Ke=s.exec(Et.slice(Je,Je+2));return Ke?(yt.d=+Ke[0],Je+Ke[0].length):-1}function g(yt,Et,Je){var Ke=s.exec(Et.slice(Je,Je+3));return Ke?(yt.m=0,yt.d=+Ke[0],Je+Ke[0].length):-1}function C(yt,Et,Je){var Ke=s.exec(Et.slice(Je,Je+2));return Ke?(yt.H=+Ke[0],Je+Ke[0].length):-1}function A(yt,Et,Je){var Ke=s.exec(Et.slice(Je,Je+2));return Ke?(yt.M=+Ke[0],Je+Ke[0].length):-1}function P(yt,Et,Je){var Ke=s.exec(Et.slice(Je,Je+2));return Ke?(yt.S=+Ke[0],Je+Ke[0].length):-1}function D(yt,Et,Je){var Ke=s.exec(Et.slice(Je,Je+3));return Ke?(yt.L=+Ke[0],Je+Ke[0].length):-1}function z(yt,Et,Je){var Ke=s.exec(Et.slice(Je,Je+6));return Ke?(yt.L=Math.floor(Ke[0]/1e3),Je+Ke[0].length):-1}function O(yt,Et,Je){var Ke=l.exec(Et.slice(Je,Je+1));return Ke?Je+Ke[0].length:-1}function V(yt,Et,Je){var Ke=s.exec(Et.slice(Je));return Ke?(yt.Q=+Ke[0],Je+Ke[0].length):-1}function B(yt,Et,Je){var Ke=s.exec(Et.slice(Je));return Ke?(yt.s=+Ke[0],Je+Ke[0].length):-1}function F(yt,Et){return f(yt.getDate(),Et,2)}function N(yt,Et){return f(yt.getHours(),Et,2)}function Z(yt,Et){return f(yt.getHours()%12||12,Et,2)}function J(yt,Et){return f(1+t.timeDay.count(t.timeYear(yt),yt),Et,3)}function re(yt,Et){return f(yt.getMilliseconds(),Et,3)}function ue(yt,Et){return re(yt,Et)+"000"}function fe(yt,Et){return f(yt.getMonth()+1,Et,2)}function K(yt,Et){return f(yt.getMinutes(),Et,2)}function X(yt,Et){return f(yt.getSeconds(),Et,2)}function ae(yt){var Et=yt.getDay();return Et===0?7:Et}function oe(yt,Et){return f(t.timeSunday.count(t.timeYear(yt)-1,yt),Et,2)}function me(yt,Et){var Je=yt.getDay();return yt=Je>=4||Je===0?t.timeThursday(yt):t.timeThursday.ceil(yt),f(t.timeThursday.count(t.timeYear(yt),yt)+(t.timeYear(yt).getDay()===4),Et,2)}function xe(yt){return yt.getDay()}function ce(yt,Et){return f(t.timeMonday.count(t.timeYear(yt)-1,yt),Et,2)}function ie(yt,Et){return f(yt.getFullYear()%100,Et,2)}function ge(yt,Et){return f(yt.getFullYear()%1e4,Et,4)}function le(yt){var Et=yt.getTimezoneOffset();return(Et>0?"-":(Et*=-1,"+"))+f(Et/60|0,"0",2)+f(Et%60,"0",2)}function we(yt,Et){return f(yt.getUTCDate(),Et,2)}function Re(yt,Et){return f(yt.getUTCHours(),Et,2)}function qe(yt,Et){return f(yt.getUTCHours()%12||12,Et,2)}function et(yt,Et){return f(1+t.utcDay.count(t.utcYear(yt),yt),Et,3)}function Pe(yt,Et){return f(yt.getUTCMilliseconds(),Et,3)}function Ie(yt,Et){return Pe(yt,Et)+"000"}function ut(yt,Et){return f(yt.getUTCMonth()+1,Et,2)}function ft(yt,Et){return f(yt.getUTCMinutes(),Et,2)}function je(yt,Et){return f(yt.getUTCSeconds(),Et,2)}function _t(yt){var Et=yt.getUTCDay();return Et===0?7:Et}function Bt(yt,Et){return f(t.utcSunday.count(t.utcYear(yt)-1,yt),Et,2)}function Lt(yt,Et){var Je=yt.getUTCDay();return yt=Je>=4||Je===0?t.utcThursday(yt):t.utcThursday.ceil(yt),f(t.utcThursday.count(t.utcYear(yt),yt)+(t.utcYear(yt).getUTCDay()===4),Et,2)}function Me(yt){return yt.getUTCDay()}function Ze(yt,Et){return f(t.utcMonday.count(t.utcYear(yt)-1,yt),Et,2)}function dt(yt,Et){return f(yt.getUTCFullYear()%100,Et,2)}function it(yt,Et){return f(yt.getUTCFullYear()%1e4,Et,4)}function vt(){return"+0000"}function rt(){return"%"}function We(yt){return+yt}function ht(yt){return Math.floor(+yt/1e3)}var mt;er({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function er(yt){return mt=a(yt),e.timeFormat=mt.format,e.timeParse=mt.parse,e.utcFormat=mt.utcFormat,e.utcParse=mt.utcParse,mt}var $t="%Y-%m-%dT%H:%M:%S.%LZ";function cr(yt){return yt.toISOString()}var or=Date.prototype.toISOString?cr:e.utcFormat($t);function vr(yt){var Et=new Date(yt);return isNaN(Et)?null:Et}var Ot=+new Date("2000-01-01T00:00:00.000Z")?vr:e.utcParse($t);e.isoFormat=or,e.isoParse=Ot,e.timeFormatDefaultLocale=er,e.timeFormatLocale=a,Object.defineProperty(e,"__esModule",{value:!0})})});var aq=ne((Ak,OJ)=>{(function(e,t){typeof Ak=="object"&&typeof OJ!="undefined"?t(Ak):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis!="undefined"?globalThis:e||self,t(e.d3=e.d3||{}))})(Ak,function(e){"use strict";function t(E){return Math.abs(E=Math.round(E))>=1e21?E.toLocaleString("en").replace(/,/g,""):E.toString(10)}function r(E,S){if((g=(E=S?E.toExponential(S-1):E.toExponential()).indexOf("e"))<0)return null;var g,C=E.slice(0,g);return[C.length>1?C[0]+C.slice(2):C,+E.slice(g+1)]}function i(E){return E=r(Math.abs(E)),E?E[1]:NaN}function n(E,S){return function(g,C){for(var A=g.length,P=[],D=0,z=E[0],O=0;A>0&&z>0&&(O+z+1>C&&(z=Math.max(1,C-O)),P.push(g.substring(A-=z,A+z)),!((O+=z+1)>C));)z=E[D=(D+1)%E.length];return P.reverse().join(S)}}function a(E){return function(S){return S.replace(/[0-9]/g,function(g){return E[+g]})}}var o=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function s(E){if(!(S=o.exec(E)))throw new Error("invalid format: "+E);var S;return new l({fill:S[1],align:S[2],sign:S[3],symbol:S[4],zero:S[5],width:S[6],comma:S[7],precision:S[8]&&S[8].slice(1),trim:S[9],type:S[10]})}s.prototype=l.prototype;function l(E){this.fill=E.fill===void 0?" ":E.fill+"",this.align=E.align===void 0?">":E.align+"",this.sign=E.sign===void 0?"-":E.sign+"",this.symbol=E.symbol===void 0?"":E.symbol+"",this.zero=!!E.zero,this.width=E.width===void 0?void 0:+E.width,this.comma=!!E.comma,this.precision=E.precision===void 0?void 0:+E.precision,this.trim=!!E.trim,this.type=E.type===void 0?"":E.type+""}l.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function u(E){e:for(var S=E.length,g=1,C=-1,A;g<S;++g)switch(E[g]){case".":C=A=g;break;case"0":C===0&&(C=g),A=g;break;default:if(!+E[g])break e;C>0&&(C=0);break}return C>0?E.slice(0,C)+E.slice(A+1):E}var f;function c(E,S){var g=r(E,S);if(!g)return E+"";var C=g[0],A=g[1],P=A-(f=Math.max(-8,Math.min(8,Math.floor(A/3)))*3)+1,D=C.length;return P===D?C:P>D?C+new Array(P-D+1).join("0"):P>0?C.slice(0,P)+"."+C.slice(P):"0."+new Array(1-P).join("0")+r(E,Math.max(0,S+P-1))[0]}function h(E,S){var g=r(E,S);if(!g)return E+"";var C=g[0],A=g[1];return A<0?"0."+new Array(-A).join("0")+C:C.length>A+1?C.slice(0,A+1)+"."+C.slice(A+1):C+new Array(A-C.length+2).join("0")}var v={"%":function(E,S){return(E*100).toFixed(S)},b:function(E){return Math.round(E).toString(2)},c:function(E){return E+""},d:t,e:function(E,S){return E.toExponential(S)},f:function(E,S){return E.toFixed(S)},g:function(E,S){return E.toPrecision(S)},o:function(E){return Math.round(E).toString(8)},p:function(E,S){return h(E*100,S)},r:h,s:c,X:function(E){return Math.round(E).toString(16).toUpperCase()},x:function(E){return Math.round(E).toString(16)}};function d(E){return E}var _=Array.prototype.map,T=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function p(E){var S=E.grouping===void 0||E.thousands===void 0?d:n(_.call(E.grouping,Number),E.thousands+""),g=E.currency===void 0?"":E.currency[0]+"",C=E.currency===void 0?"":E.currency[1]+"",A=E.decimal===void 0?".":E.decimal+"",P=E.numerals===void 0?d:a(_.call(E.numerals,String)),D=E.percent===void 0?"%":E.percent+"",z=E.minus===void 0?"-":E.minus+"",O=E.nan===void 0?"NaN":E.nan+"";function V(F){F=s(F);var N=F.fill,Z=F.align,J=F.sign,re=F.symbol,ue=F.zero,fe=F.width,K=F.comma,X=F.precision,ae=F.trim,oe=F.type;oe==="n"?(K=!0,oe="g"):v[oe]||(X===void 0&&(X=12),ae=!0,oe="g"),(ue||N==="0"&&Z==="=")&&(ue=!0,N="0",Z="=");var me=re==="$"?g:re==="#"&&/[boxX]/.test(oe)?"0"+oe.toLowerCase():"",xe=re==="$"?C:/[%p]/.test(oe)?D:"",ce=v[oe],ie=/[defgprs%]/.test(oe);X=X===void 0?6:/[gprs]/.test(oe)?Math.max(1,Math.min(21,X)):Math.max(0,Math.min(20,X));function ge(le){var we=me,Re=xe,qe,et,Pe;if(oe==="c")Re=ce(le)+Re,le="";else{le=+le;var Ie=le<0||1/le<0;if(le=isNaN(le)?O:ce(Math.abs(le),X),ae&&(le=u(le)),Ie&&+le==0&&J!=="+"&&(Ie=!1),we=(Ie?J==="("?J:z:J==="-"||J==="("?"":J)+we,Re=(oe==="s"?T[8+f/3]:"")+Re+(Ie&&J==="("?")":""),ie){for(qe=-1,et=le.length;++qe<et;)if(Pe=le.charCodeAt(qe),48>Pe||Pe>57){Re=(Pe===46?A+le.slice(qe+1):le.slice(qe))+Re,le=le.slice(0,qe);break}}}K&&!ue&&(le=S(le,1/0));var ut=we.length+le.length+Re.length,ft=ut<fe?new Array(fe-ut+1).join(N):"";switch(K&&ue&&(le=S(ft+le,ft.length?fe-Re.length:1/0),ft=""),Z){case"<":le=we+le+Re+ft;break;case"=":le=we+ft+le+Re;break;case"^":le=ft.slice(0,ut=ft.length>>1)+we+le+Re+ft.slice(ut);break;default:le=ft+we+le+Re;break}return P(le)}return ge.toString=function(){return F+""},ge}function B(F,N){var Z=V((F=s(F),F.type="f",F)),J=Math.max(-8,Math.min(8,Math.floor(i(N)/3)))*3,re=Math.pow(10,-J),ue=T[8+J/3];return function(fe){return Z(re*fe)+ue}}return{format:V,formatPrefix:B}}var M;b({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function b(E){return M=p(E),e.format=M.format,e.formatPrefix=M.formatPrefix,M}function w(E){return Math.max(0,-i(Math.abs(E)))}function k(E,S){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(i(S)/3)))*3-i(Math.abs(E)))}function x(E,S){return E=Math.abs(E),S=Math.abs(S)-E,Math.max(0,i(S)-i(E))+1}e.FormatSpecifier=l,e.formatDefaultLocale=b,e.formatLocale=p,e.formatSpecifier=s,e.precisionFixed=w,e.precisionPrefix=k,e.precisionRound=x,Object.defineProperty(e,"__esModule",{value:!0})})});var NJ=ne((OQt,BJ)=>{"use strict";BJ.exports=function(e){for(var t=e.length,r,i=0;i<t;i++)if(r=e.charCodeAt(i),(r<9||r>13)&&r!==32&&r!==133&&r!==160&&r!==5760&&r!==6158&&(r<8192||r>8205)&&r!==8232&&r!==8233&&r!==8239&&r!==8287&&r!==8288&&r!==12288&&r!==65279)return!1;return!0}});var la=ne((BQt,UJ)=>{"use strict";var OQe=NJ();UJ.exports=function(e){var t=typeof e;if(t==="string"){var r=e;if(e=+e,e===0&&OQe(r))return!1}else if(t!=="number")return!1;return e-e<1}});var $a=ne((NQt,VJ)=>{"use strict";VJ.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"}});var oq=ne((Mk,HJ)=>{(function(e,t){typeof Mk=="object"&&typeof HJ!="undefined"?t(Mk):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis!="undefined"?globalThis:e||self,t(e["base64-arraybuffer"]={}))})(Mk,function(e){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=typeof Uint8Array=="undefined"?[]:new Uint8Array(256),i=0;i<t.length;i++)r[t.charCodeAt(i)]=i;var n=function(o){var s=new Uint8Array(o),l,u=s.length,f="";for(l=0;l<u;l+=3)f+=t[s[l]>>2],f+=t[(s[l]&3)<<4|s[l+1]>>4],f+=t[(s[l+1]&15)<<2|s[l+2]>>6],f+=t[s[l+2]&63];return u%3===2?f=f.substring(0,f.length-1)+"=":u%3===1&&(f=f.substring(0,f.length-2)+"=="),f},a=function(o){var s=o.length*.75,l=o.length,u,f=0,c,h,v,d;o[o.length-1]==="="&&(s--,o[o.length-2]==="="&&s--);var _=new ArrayBuffer(s),T=new Uint8Array(_);for(u=0;u<l;u+=4)c=r[o.charCodeAt(u)],h=r[o.charCodeAt(u+1)],v=r[o.charCodeAt(u+2)],d=r[o.charCodeAt(u+3)],T[f++]=c<<2|h>>4,T[f++]=(h&15)<<4|v>>2,T[f++]=(v&3)<<6|d&63;return _};e.decode=a,e.encode=n,Object.defineProperty(e,"__esModule",{value:!0})})});var Lg=ne((UQt,GJ)=>{"use strict";GJ.exports=function(t){return window&&window.process&&window.process.versions?Object.prototype.toString.call(t)==="[object Object]":Object.prototype.toString.call(t)==="[object Object]"&&Object.getPrototypeOf(t).hasOwnProperty("hasOwnProperty")}});var uh=ne(Jp=>{"use strict";var BQe=oq().decode,NQe=Lg(),sq=Array.isArray,UQe=ArrayBuffer,VQe=DataView;function YJ(e){return UQe.isView(e)&&!(e instanceof VQe)}Jp.isTypedArray=YJ;function Sk(e){return sq(e)||YJ(e)}Jp.isArrayOrTypedArray=Sk;function HQe(e){return!Sk(e[0])}Jp.isArray1D=HQe;Jp.ensureArray=function(e,t){return sq(e)||(e=[]),e.length=t,e};var cc={u1c:typeof Uint8ClampedArray=="undefined"?void 0:Uint8ClampedArray,i1:typeof Int8Array=="undefined"?void 0:Int8Array,u1:typeof Uint8Array=="undefined"?void 0:Uint8Array,i2:typeof Int16Array=="undefined"?void 0:Int16Array,u2:typeof Uint16Array=="undefined"?void 0:Uint16Array,i4:typeof Int32Array=="undefined"?void 0:Int32Array,u4:typeof Uint32Array=="undefined"?void 0:Uint32Array,f4:typeof Float32Array=="undefined"?void 0:Float32Array,f8:typeof Float64Array=="undefined"?void 0:Float64Array};cc.uint8c=cc.u1c;cc.uint8=cc.u1;cc.int8=cc.i1;cc.uint16=cc.u2;cc.int16=cc.i2;cc.uint32=cc.u4;cc.int32=cc.i4;cc.float32=cc.f4;cc.float64=cc.f8;function lq(e){return e.constructor===ArrayBuffer}Jp.isArrayBuffer=lq;Jp.decodeTypedArraySpec=function(e){var t=[],r=GQe(e),i=r.dtype,n=cc[i];if(!n)throw new Error('Error in dtype: "'+i+'"');var a=n.BYTES_PER_ELEMENT,o=r.bdata;lq(o)||(o=BQe(o));var s=r.shape===void 0?[o.byteLength/a]:(""+r.shape).split(",");s.reverse();var l=s.length,u,f,c=+s[0],h=a*c,v=0;if(l===1)t=new n(o);else if(l===2)for(u=+s[1],f=0;f<u;f++)t[f]=new n(o,v,c),v+=h;else if(l===3){u=+s[1];for(var d=+s[2],_=0;_<d;_++)for(t[_]=[],f=0;f<u;f++)t[_][f]=new n(o,v,c),v+=h}else throw new Error("ndim: "+l+'is not supported with the shape:"'+r.shape+'"');return t.bdata=r.bdata,t.dtype=r.dtype,t.shape=s.reverse().join(","),e._inputArray=t,t};Jp.isTypedArraySpec=function(e){return NQe(e)&&e.hasOwnProperty("dtype")&&typeof e.dtype=="string"&&e.hasOwnProperty("bdata")&&(typeof e.bdata=="string"||lq(e.bdata))&&(e.shape===void 0||e.hasOwnProperty("shape")&&(typeof e.shape=="string"||typeof e.shape=="number"))};function GQe(e){return{bdata:e.bdata,dtype:e.dtype,shape:e.shape}}Jp.concat=function(){var e=[],t=!0,r=0,i,n,a,o,s,l,u,f;for(a=0;a<arguments.length;a++)o=arguments[a],l=o.length,l&&(n?e.push(o):(n=o,s=l),sq(o)?i=!1:(t=!1,r?i!==o.constructor&&(i=!1):i=o.constructor),r+=l);if(!r)return[];if(!e.length)return n;if(t)return n.concat.apply(n,e);if(i){for(u=new i(r),u.set(n),a=0;a<e.length;a++)o=e[a],u.set(o,s),s+=o.length;return u}for(u=new Array(r),f=0;f<n.length;f++)u[f]=n[f];for(a=0;a<e.length;a++){for(o=e[a],f=0;f<o.length;f++)u[s+f]=o[f];s+=f}return u};Jp.maxRowLength=function(e){return WJ(e,Math.max,0)};Jp.minRowLength=function(e){return WJ(e,Math.min,1/0)};function WJ(e,t,r){if(Sk(e))if(Sk(e[0])){for(var i=r,n=0;n<e.length;n++)i=t(i,e[n].length);return i}else return e.length;return 0}});var nA=ne((HQt,JJ)=>{"use strict";var XJ=la(),fq=uh().isArrayOrTypedArray;JJ.exports=function(t,r){if(XJ(r))r=String(r);else if(typeof r!="string"||r.substr(r.length-4)==="[-1]")throw"bad property string";var i=r.split("."),n,a,o,s;for(s=0;s<i.length;s++)if(String(i[s]).slice(0,2)==="__")throw"bad property string";for(s=0;s<i.length;){if(n=String(i[s]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),n){if(n[1])i[s]=n[1];else if(s===0)i.splice(0,1);else throw"bad property string";for(a=n[2].substr(1,n[2].length-2).split("]["),o=0;o<a.length;o++)s++,i.splice(s,0,Number(a[o]))}s++}return typeof t!="object"?ZQe(t,r,i):{set:jJ(t,i,r),get:ZJ(t,i),astr:r,parts:i,obj:t}};function ZJ(e,t){return function(){var r=e,i,n,a,o,s;for(o=0;o<t.length-1;o++){if(i=t[o],i===-1){for(n=!0,a=[],s=0;s<r.length;s++)a[s]=ZJ(r[s],t.slice(o+1))(),a[s]!==a[0]&&(n=!1);return n?a[0]:a}if(typeof i=="number"&&!fq(r)||(r=r[i],typeof r!="object"||r===null))return}if(!(typeof r!="object"||r===null)&&(a=r[t[o]],a!==null))return a}}var YQe=/(^|\.)args\[/;function uq(e,t){return e===void 0||e===null&&!t.match(YQe)}function jJ(e,t,r){return function(i){var n=e,a="",o=[[e,a]],s=uq(i,r),l,u;for(u=0;u<t.length-1;u++){if(l=t[u],typeof l=="number"&&!fq(n))throw"array index but container is not an array";if(l===-1){if(s=!XQe(n,t.slice(u+1),i,r),s)break;return}if(!KJ(n,l,t[u+1],s))break;if(n=n[l],typeof n!="object"||n===null)throw"container is not an object";a=WQe(a,l),o.push([n,a])}if(s){if(u===t.length-1&&(delete n[t[u]],Array.isArray(n)&&+t[u]===n.length-1))for(;n.length&&n[n.length-1]===void 0;)n.pop()}else n[t[u]]=i}}function WQe(e,t){var r=t;return XJ(t)?r="["+t+"]":e&&(r="."+t),e+r}function XQe(e,t,r,i){var n=fq(r),a=!0,o=r,s=i.replace("-1",0),l=n?!1:uq(r,s),u=t[0],f;for(f=0;f<e.length;f++)s=i.replace("-1",f),n&&(o=r[f%r.length],l=uq(o,s)),l&&(a=!1),KJ(e,f,u,l)&&jJ(e[f],t,i.replace("-1",f))(o);return a}function KJ(e,t,r,i){if(e[t]===void 0){if(i)return!1;typeof r=="number"?e[t]=[]:e[t]={}}return!0}function ZQe(e,t,r){return{set:function(){throw"bad container"},get:function(){},astr:t,parts:r,obj:e}}});var tQ=ne((GQt,eQ)=>{"use strict";var Xb=nA(),jQe=/^\w*$/,KQe=0,QJ=1,Ek=2,$J=3,K1=4;eQ.exports=function(t,r,i,n){i=i||"name",n=n||"value";var a,o,s,l={};r&&r.length?(s=Xb(t,r),o=s.get()):o=t,r=r||"";var u={};if(o)for(a=0;a<o.length;a++)u[o[a][i]]=a;var f=jQe.test(n),c={set:function(h,v){var d=v===null?K1:KQe;if(!o){if(!s||d===K1)return;o=[],s.set(o)}var _=u[h];if(_===void 0){if(d===K1)return;d=d|$J,_=o.length,u[h]=_}else v!==(f?o[_][n]:Xb(o[_],n).get())&&(d=d|Ek);var T=o[_]=o[_]||{};return T[i]=h,f?T[n]=v:Xb(T,n).set(v),v!==null&&(d=d&~K1),l[_]=l[_]|d,c},get:function(h){if(o){var v=u[h];if(v!==void 0)return f?o[v][n]:Xb(o[v],n).get()}},rename:function(h,v){var d=u[h];return d===void 0||(l[d]=l[d]|QJ,u[v]=d,delete u[h],o[d][i]=v),c},remove:function(h){var v=u[h];if(v===void 0)return c;var d=o[v];if(Object.keys(d).length>2)return l[v]=l[v]|Ek,c.set(h,null);if(f){for(a=v;a<o.length;a++)l[a]=l[a]|$J;for(a=v;a<o.length;a++)u[o[a][i]]--;o.splice(v,1),delete u[h]}else Xb(d,n).set(null),l[v]=l[v]|Ek|K1;return c},constructUpdate:function(){for(var h,v,d={},_=Object.keys(l),T=0;T<_.length;T++)v=_[T],h=r+"["+v+"]",o[v]?(l[v]&QJ&&(d[h+"."+i]=o[v][i]),l[v]&Ek&&(f?d[h+"."+n]=l[v]&K1?null:o[v][n]:d[h+"."+n]=l[v]&K1?null:Xb(o[v],n).get())):d[h]=null;return d}};return c}});var nQ=ne((YQt,rQ)=>{"use strict";var JQe=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,QQe=/^[^\.\[\]]+$/;rQ.exports=function(e,t){for(;t;){var r=e.match(JQe);if(r)e=r[1];else if(e.match(QQe))e="";else throw new Error("bad relativeAttr call:"+[e,t]);if(t.charAt(0)==="^")t=t.slice(1);else break}return e&&t.charAt(0)!=="["?e+"."+t:e+t}});var kk=ne((WQt,iQ)=>{"use strict";var $Qe=la();iQ.exports=function(t,r){if(t>0)return Math.log(t)/Math.LN10;var i=Math.log(Math.min(r[0],r[1]))/Math.LN10;return $Qe(i)||(i=Math.log(Math.max(r[0],r[1]))/Math.LN10-6),i}});var sQ=ne((XQt,oQ)=>{"use strict";var aQ=uh().isArrayOrTypedArray,iA=Lg();oQ.exports=function e(t,r){for(var i in r){var n=r[i],a=t[i];if(a!==n)if(i.charAt(0)==="_"||typeof n=="function"){if(i in t)continue;t[i]=n}else if(aQ(n)&&aQ(a)&&iA(n[0])){if(i==="customdata"||i==="ids")continue;for(var o=Math.min(n.length,a.length),s=0;s<o;s++)a[s]!==n[s]&&iA(n[s])&&iA(a[s])&&e(a[s],n[s])}else iA(n)&&iA(a)&&(e(a,n),Object.keys(a).length||delete t[i])}}});var Zb=ne((ZQt,lQ)=>{"use strict";function e$e(e,t){var r=e%t;return r<0?r+t:r}function t$e(e,t){return Math.abs(e)>t/2?e-Math.round(e/t)*t:e}lQ.exports={mod:e$e,modHalf:t$e}});var Xf=ne((jQt,Ck)=>{(function(e){var t=/^\s+/,r=/\s+$/,i=0,n=e.round,a=e.min,o=e.max,s=e.random;function l(ie,ge){if(ie=ie||"",ge=ge||{},ie instanceof l)return ie;if(!(this instanceof l))return new l(ie,ge);var le=u(ie);this._originalInput=ie,this._r=le.r,this._g=le.g,this._b=le.b,this._a=le.a,this._roundA=n(100*this._a)/100,this._format=ge.format||le.format,this._gradientType=ge.gradientType,this._r<1&&(this._r=n(this._r)),this._g<1&&(this._g=n(this._g)),this._b<1&&(this._b=n(this._b)),this._ok=le.ok,this._tc_id=i++}l.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var ie=this.toRgb();return(ie.r*299+ie.g*587+ie.b*114)/1e3},getLuminance:function(){var ie=this.toRgb(),ge,le,we,Re,qe,et;return ge=ie.r/255,le=ie.g/255,we=ie.b/255,ge<=.03928?Re=ge/12.92:Re=e.pow((ge+.055)/1.055,2.4),le<=.03928?qe=le/12.92:qe=e.pow((le+.055)/1.055,2.4),we<=.03928?et=we/12.92:et=e.pow((we+.055)/1.055,2.4),.2126*Re+.7152*qe+.0722*et},setAlpha:function(ie){return this._a=F(ie),this._roundA=n(100*this._a)/100,this},toHsv:function(){var ie=v(this._r,this._g,this._b);return{h:ie.h*360,s:ie.s,v:ie.v,a:this._a}},toHsvString:function(){var ie=v(this._r,this._g,this._b),ge=n(ie.h*360),le=n(ie.s*100),we=n(ie.v*100);return this._a==1?"hsv("+ge+", "+le+"%, "+we+"%)":"hsva("+ge+", "+le+"%, "+we+"%, "+this._roundA+")"},toHsl:function(){var ie=c(this._r,this._g,this._b);return{h:ie.h*360,s:ie.s,l:ie.l,a:this._a}},toHslString:function(){var ie=c(this._r,this._g,this._b),ge=n(ie.h*360),le=n(ie.s*100),we=n(ie.l*100);return this._a==1?"hsl("+ge+", "+le+"%, "+we+"%)":"hsla("+ge+", "+le+"%, "+we+"%, "+this._roundA+")"},toHex:function(ie){return _(this._r,this._g,this._b,ie)},toHexString:function(ie){return"#"+this.toHex(ie)},toHex8:function(ie){return T(this._r,this._g,this._b,this._a,ie)},toHex8String:function(ie){return"#"+this.toHex8(ie)},toRgb:function(){return{r:n(this._r),g:n(this._g),b:n(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+n(this._r)+", "+n(this._g)+", "+n(this._b)+")":"rgba("+n(this._r)+", "+n(this._g)+", "+n(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:n(N(this._r,255)*100)+"%",g:n(N(this._g,255)*100)+"%",b:n(N(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+n(N(this._r,255)*100)+"%, "+n(N(this._g,255)*100)+"%, "+n(N(this._b,255)*100)+"%)":"rgba("+n(N(this._r,255)*100)+"%, "+n(N(this._g,255)*100)+"%, "+n(N(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:V[_(this._r,this._g,this._b,!0)]||!1},toFilter:function(ie){var ge="#"+p(this._r,this._g,this._b,this._a),le=ge,we=this._gradientType?"GradientType = 1, ":"";if(ie){var Re=l(ie);le="#"+p(Re._r,Re._g,Re._b,Re._a)}return"progid:DXImageTransform.Microsoft.gradient("+we+"startColorstr="+ge+",endColorstr="+le+")"},toString:function(ie){var ge=!!ie;ie=ie||this._format;var le=!1,we=this._a<1&&this._a>=0,Re=!ge&&we&&(ie==="hex"||ie==="hex6"||ie==="hex3"||ie==="hex4"||ie==="hex8"||ie==="name");return Re?ie==="name"&&this._a===0?this.toName():this.toRgbString():(ie==="rgb"&&(le=this.toRgbString()),ie==="prgb"&&(le=this.toPercentageRgbString()),(ie==="hex"||ie==="hex6")&&(le=this.toHexString()),ie==="hex3"&&(le=this.toHexString(!0)),ie==="hex4"&&(le=this.toHex8String(!0)),ie==="hex8"&&(le=this.toHex8String()),ie==="name"&&(le=this.toName()),ie==="hsl"&&(le=this.toHslString()),ie==="hsv"&&(le=this.toHsvString()),le||this.toHexString())},clone:function(){return l(this.toString())},_applyModification:function(ie,ge){var le=ie.apply(null,[this].concat([].slice.call(ge)));return this._r=le._r,this._g=le._g,this._b=le._b,this.setAlpha(le._a),this},lighten:function(){return this._applyModification(k,arguments)},brighten:function(){return this._applyModification(x,arguments)},darken:function(){return this._applyModification(E,arguments)},desaturate:function(){return this._applyModification(M,arguments)},saturate:function(){return this._applyModification(b,arguments)},greyscale:function(){return this._applyModification(w,arguments)},spin:function(){return this._applyModification(S,arguments)},_applyCombination:function(ie,ge){return ie.apply(null,[this].concat([].slice.call(ge)))},analogous:function(){return this._applyCombination(D,arguments)},complement:function(){return this._applyCombination(g,arguments)},monochromatic:function(){return this._applyCombination(z,arguments)},splitcomplement:function(){return this._applyCombination(P,arguments)},triad:function(){return this._applyCombination(C,arguments)},tetrad:function(){return this._applyCombination(A,arguments)}},l.fromRatio=function(ie,ge){if(typeof ie=="object"){var le={};for(var we in ie)ie.hasOwnProperty(we)&&(we==="a"?le[we]=ie[we]:le[we]=K(ie[we]));ie=le}return l(ie,ge)};function u(ie){var ge={r:0,g:0,b:0},le=1,we=null,Re=null,qe=null,et=!1,Pe=!1;return typeof ie=="string"&&(ie=xe(ie)),typeof ie=="object"&&(me(ie.r)&&me(ie.g)&&me(ie.b)?(ge=f(ie.r,ie.g,ie.b),et=!0,Pe=String(ie.r).substr(-1)==="%"?"prgb":"rgb"):me(ie.h)&&me(ie.s)&&me(ie.v)?(we=K(ie.s),Re=K(ie.v),ge=d(ie.h,we,Re),et=!0,Pe="hsv"):me(ie.h)&&me(ie.s)&&me(ie.l)&&(we=K(ie.s),qe=K(ie.l),ge=h(ie.h,we,qe),et=!0,Pe="hsl"),ie.hasOwnProperty("a")&&(le=ie.a)),le=F(le),{ok:et,format:ie.format||Pe,r:a(255,o(ge.r,0)),g:a(255,o(ge.g,0)),b:a(255,o(ge.b,0)),a:le}}function f(ie,ge,le){return{r:N(ie,255)*255,g:N(ge,255)*255,b:N(le,255)*255}}function c(ie,ge,le){ie=N(ie,255),ge=N(ge,255),le=N(le,255);var we=o(ie,ge,le),Re=a(ie,ge,le),qe,et,Pe=(we+Re)/2;if(we==Re)qe=et=0;else{var Ie=we-Re;switch(et=Pe>.5?Ie/(2-we-Re):Ie/(we+Re),we){case ie:qe=(ge-le)/Ie+(ge<le?6:0);break;case ge:qe=(le-ie)/Ie+2;break;case le:qe=(ie-ge)/Ie+4;break}qe/=6}return{h:qe,s:et,l:Pe}}function h(ie,ge,le){var we,Re,qe;ie=N(ie,360),ge=N(ge,100),le=N(le,100);function et(ut,ft,je){return je<0&&(je+=1),je>1&&(je-=1),je<1/6?ut+(ft-ut)*6*je:je<1/2?ft:je<2/3?ut+(ft-ut)*(2/3-je)*6:ut}if(ge===0)we=Re=qe=le;else{var Pe=le<.5?le*(1+ge):le+ge-le*ge,Ie=2*le-Pe;we=et(Ie,Pe,ie+1/3),Re=et(Ie,Pe,ie),qe=et(Ie,Pe,ie-1/3)}return{r:we*255,g:Re*255,b:qe*255}}function v(ie,ge,le){ie=N(ie,255),ge=N(ge,255),le=N(le,255);var we=o(ie,ge,le),Re=a(ie,ge,le),qe,et,Pe=we,Ie=we-Re;if(et=we===0?0:Ie/we,we==Re)qe=0;else{switch(we){case ie:qe=(ge-le)/Ie+(ge<le?6:0);break;case ge:qe=(le-ie)/Ie+2;break;case le:qe=(ie-ge)/Ie+4;break}qe/=6}return{h:qe,s:et,v:Pe}}function d(ie,ge,le){ie=N(ie,360)*6,ge=N(ge,100),le=N(le,100);var we=e.floor(ie),Re=ie-we,qe=le*(1-ge),et=le*(1-Re*ge),Pe=le*(1-(1-Re)*ge),Ie=we%6,ut=[le,et,qe,qe,Pe,le][Ie],ft=[Pe,le,le,et,qe,qe][Ie],je=[qe,qe,Pe,le,le,et][Ie];return{r:ut*255,g:ft*255,b:je*255}}function _(ie,ge,le,we){var Re=[fe(n(ie).toString(16)),fe(n(ge).toString(16)),fe(n(le).toString(16))];return we&&Re[0].charAt(0)==Re[0].charAt(1)&&Re[1].charAt(0)==Re[1].charAt(1)&&Re[2].charAt(0)==Re[2].charAt(1)?Re[0].charAt(0)+Re[1].charAt(0)+Re[2].charAt(0):Re.join("")}function T(ie,ge,le,we,Re){var qe=[fe(n(ie).toString(16)),fe(n(ge).toString(16)),fe(n(le).toString(16)),fe(X(we))];return Re&&qe[0].charAt(0)==qe[0].charAt(1)&&qe[1].charAt(0)==qe[1].charAt(1)&&qe[2].charAt(0)==qe[2].charAt(1)&&qe[3].charAt(0)==qe[3].charAt(1)?qe[0].charAt(0)+qe[1].charAt(0)+qe[2].charAt(0)+qe[3].charAt(0):qe.join("")}function p(ie,ge,le,we){var Re=[fe(X(we)),fe(n(ie).toString(16)),fe(n(ge).toString(16)),fe(n(le).toString(16))];return Re.join("")}l.equals=function(ie,ge){return!ie||!ge?!1:l(ie).toRgbString()==l(ge).toRgbString()},l.random=function(){return l.fromRatio({r:s(),g:s(),b:s()})};function M(ie,ge){ge=ge===0?0:ge||10;var le=l(ie).toHsl();return le.s-=ge/100,le.s=Z(le.s),l(le)}function b(ie,ge){ge=ge===0?0:ge||10;var le=l(ie).toHsl();return le.s+=ge/100,le.s=Z(le.s),l(le)}function w(ie){return l(ie).desaturate(100)}function k(ie,ge){ge=ge===0?0:ge||10;var le=l(ie).toHsl();return le.l+=ge/100,le.l=Z(le.l),l(le)}function x(ie,ge){ge=ge===0?0:ge||10;var le=l(ie).toRgb();return le.r=o(0,a(255,le.r-n(255*-(ge/100)))),le.g=o(0,a(255,le.g-n(255*-(ge/100)))),le.b=o(0,a(255,le.b-n(255*-(ge/100)))),l(le)}function E(ie,ge){ge=ge===0?0:ge||10;var le=l(ie).toHsl();return le.l-=ge/100,le.l=Z(le.l),l(le)}function S(ie,ge){var le=l(ie).toHsl(),we=(le.h+ge)%360;return le.h=we<0?360+we:we,l(le)}function g(ie){var ge=l(ie).toHsl();return ge.h=(ge.h+180)%360,l(ge)}function C(ie){var ge=l(ie).toHsl(),le=ge.h;return[l(ie),l({h:(le+120)%360,s:ge.s,l:ge.l}),l({h:(le+240)%360,s:ge.s,l:ge.l})]}function A(ie){var ge=l(ie).toHsl(),le=ge.h;return[l(ie),l({h:(le+90)%360,s:ge.s,l:ge.l}),l({h:(le+180)%360,s:ge.s,l:ge.l}),l({h:(le+270)%360,s:ge.s,l:ge.l})]}function P(ie){var ge=l(ie).toHsl(),le=ge.h;return[l(ie),l({h:(le+72)%360,s:ge.s,l:ge.l}),l({h:(le+216)%360,s:ge.s,l:ge.l})]}function D(ie,ge,le){ge=ge||6,le=le||30;var we=l(ie).toHsl(),Re=360/le,qe=[l(ie)];for(we.h=(we.h-(Re*ge>>1)+720)%360;--ge;)we.h=(we.h+Re)%360,qe.push(l(we));return qe}function z(ie,ge){ge=ge||6;for(var le=l(ie).toHsv(),we=le.h,Re=le.s,qe=le.v,et=[],Pe=1/ge;ge--;)et.push(l({h:we,s:Re,v:qe})),qe=(qe+Pe)%1;return et}l.mix=function(ie,ge,le){le=le===0?0:le||50;var we=l(ie).toRgb(),Re=l(ge).toRgb(),qe=le/100,et={r:(Re.r-we.r)*qe+we.r,g:(Re.g-we.g)*qe+we.g,b:(Re.b-we.b)*qe+we.b,a:(Re.a-we.a)*qe+we.a};return l(et)},l.readability=function(ie,ge){var le=l(ie),we=l(ge);return(e.max(le.getLuminance(),we.getLuminance())+.05)/(e.min(le.getLuminance(),we.getLuminance())+.05)},l.isReadable=function(ie,ge,le){var we=l.readability(ie,ge),Re,qe;switch(qe=!1,Re=ce(le),Re.level+Re.size){case"AAsmall":case"AAAlarge":qe=we>=4.5;break;case"AAlarge":qe=we>=3;break;case"AAAsmall":qe=we>=7;break}return qe},l.mostReadable=function(ie,ge,le){var we=null,Re=0,qe,et,Pe,Ie;le=le||{},et=le.includeFallbackColors,Pe=le.level,Ie=le.size;for(var ut=0;ut<ge.length;ut++)qe=l.readability(ie,ge[ut]),qe>Re&&(Re=qe,we=l(ge[ut]));return l.isReadable(ie,we,{level:Pe,size:Ie})||!et?we:(le.includeFallbackColors=!1,l.mostReadable(ie,["#fff","#000"],le))};var O=l.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},V=l.hexNames=B(O);function B(ie){var ge={};for(var le in ie)ie.hasOwnProperty(le)&&(ge[ie[le]]=le);return ge}function F(ie){return ie=parseFloat(ie),(isNaN(ie)||ie<0||ie>1)&&(ie=1),ie}function N(ie,ge){re(ie)&&(ie="100%");var le=ue(ie);return ie=a(ge,o(0,parseFloat(ie))),le&&(ie=parseInt(ie*ge,10)/100),e.abs(ie-ge)<1e-6?1:ie%ge/parseFloat(ge)}function Z(ie){return a(1,o(0,ie))}function J(ie){return parseInt(ie,16)}function re(ie){return typeof ie=="string"&&ie.indexOf(".")!=-1&&parseFloat(ie)===1}function ue(ie){return typeof ie=="string"&&ie.indexOf("%")!=-1}function fe(ie){return ie.length==1?"0"+ie:""+ie}function K(ie){return ie<=1&&(ie=ie*100+"%"),ie}function X(ie){return e.round(parseFloat(ie)*255).toString(16)}function ae(ie){return J(ie)/255}var oe=function(){var ie="[-\\+]?\\d+%?",ge="[-\\+]?\\d*\\.\\d+%?",le="(?:"+ge+")|(?:"+ie+")",we="[\\s|\\(]+("+le+")[,|\\s]+("+le+")[,|\\s]+("+le+")\\s*\\)?",Re="[\\s|\\(]+("+le+")[,|\\s]+("+le+")[,|\\s]+("+le+")[,|\\s]+("+le+")\\s*\\)?";return{CSS_UNIT:new RegExp(le),rgb:new RegExp("rgb"+we),rgba:new RegExp("rgba"+Re),hsl:new RegExp("hsl"+we),hsla:new RegExp("hsla"+Re),hsv:new RegExp("hsv"+we),hsva:new RegExp("hsva"+Re),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function me(ie){return!!oe.CSS_UNIT.exec(ie)}function xe(ie){ie=ie.replace(t,"").replace(r,"").toLowerCase();var ge=!1;if(O[ie])ie=O[ie],ge=!0;else if(ie=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var le;return(le=oe.rgb.exec(ie))?{r:le[1],g:le[2],b:le[3]}:(le=oe.rgba.exec(ie))?{r:le[1],g:le[2],b:le[3],a:le[4]}:(le=oe.hsl.exec(ie))?{h:le[1],s:le[2],l:le[3]}:(le=oe.hsla.exec(ie))?{h:le[1],s:le[2],l:le[3],a:le[4]}:(le=oe.hsv.exec(ie))?{h:le[1],s:le[2],v:le[3]}:(le=oe.hsva.exec(ie))?{h:le[1],s:le[2],v:le[3],a:le[4]}:(le=oe.hex8.exec(ie))?{r:J(le[1]),g:J(le[2]),b:J(le[3]),a:ae(le[4]),format:ge?"name":"hex8"}:(le=oe.hex6.exec(ie))?{r:J(le[1]),g:J(le[2]),b:J(le[3]),format:ge?"name":"hex"}:(le=oe.hex4.exec(ie))?{r:J(le[1]+""+le[1]),g:J(le[2]+""+le[2]),b:J(le[3]+""+le[3]),a:ae(le[4]+""+le[4]),format:ge?"name":"hex8"}:(le=oe.hex3.exec(ie))?{r:J(le[1]+""+le[1]),g:J(le[2]+""+le[2]),b:J(le[3]+""+le[3]),format:ge?"name":"hex"}:!1}function ce(ie){var ge,le;return ie=ie||{level:"AA",size:"small"},ge=(ie.level||"AA").toUpperCase(),le=(ie.size||"small").toLowerCase(),ge!=="AA"&&ge!=="AAA"&&(ge="AA"),le!=="small"&&le!=="large"&&(le="small"),{level:ge,size:le}}typeof Ck!="undefined"&&Ck.exports?Ck.exports=l:typeof define=="function"&&define.amd?define(function(){return l}):window.tinycolor=l})(Math)});var ll=ne((KQt,uQ)=>{"use strict";uQ.exports=function(e){var t=e.editType,r=e.colorEditType;r===void 0&&(r=t);var i={family:{valType:"string",noBlank:!0,strict:!0,editType:t},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:r},editType:t};return e.autoSize&&(i.size.dflt="auto"),e.autoColor&&(i.color.dflt="auto"),e.arrayOk&&(i.family.arrayOk=!0,i.size.arrayOk=!0,i.color.arrayOk=!0),i}});var aA=ne((JQt,fQ)=>{"use strict";fQ.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}});var Pg=ne((QQt,vQ)=>{"use strict";var cQ=aA(),hQ=ll(),cq=hQ({editType:"none"});cq.family.dflt=cQ.HOVERFONT;cq.size.dflt=cQ.HOVERFONTSIZE;vQ.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:cq,grouptitlefont:hQ({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}});var oa=ne(lA=>{"use strict";var dQ=Lg(),oA=Array.isArray;function r$e(e,t){var r,i;for(r=0;r<e.length;r++){if(i=e[r],i!==null&&typeof i=="object")return!1;i!==void 0&&(t[r]=i)}return!0}lA.extendFlat=function(){return sA(arguments,!1,!1,!1)};lA.extendDeep=function(){return sA(arguments,!0,!1,!1)};lA.extendDeepAll=function(){return sA(arguments,!0,!0,!1)};lA.extendDeepNoArrays=function(){return sA(arguments,!0,!1,!0)};function sA(e,t,r,i){var n=e[0],a=e.length,o,s,l,u,f,c,h;if(a===2&&oA(n)&&oA(e[1])&&n.length===0){if(h=r$e(e[1],n),h)return n;n.splice(0,n.length)}for(var v=1;v<a;v++){o=e[v];for(s in o)l=n[s],u=o[s],i&&oA(u)?n[s]=u:t&&u&&(dQ(u)||(f=oA(u)))?(f?(f=!1,c=l&&oA(l)?l:[]):c=l&&dQ(l)?l:{},n[s]=sA([c,u],t,r,i)):(typeof u!="undefined"||r)&&(n[s]=u)}return n}});var jb=ne((e$t,pQ)=>{"use strict";var n$e=ll(),Lk=Pg().hoverlabel,Pk=oa().extendFlat;pQ.exports={hoverlabel:{bgcolor:Pk({},Lk.bgcolor,{arrayOk:!0}),bordercolor:Pk({},Lk.bordercolor,{arrayOk:!0}),font:n$e({arrayOk:!0,editType:"none"}),align:Pk({},Lk.align,{arrayOk:!0}),namelength:Pk({},Lk.namelength,{arrayOk:!0}),editType:"none"}}});var es=ne((t$t,gQ)=>{"use strict";var i$e=ll(),a$e=jb();gQ.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:i$e({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:a$e.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}});var J1=ne((r$t,xQ)=>{"use strict";var o$e=Xf(),Rk={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},yQ=Rk.RdBu;function s$e(e,t){if(t||(t=yQ),!e)return t;function r(){try{e=Rk[e]||JSON.parse(e)}catch(i){e=t}}return typeof e=="string"&&(r(),typeof e=="string"&&r()),mQ(e)?e:t}function mQ(e){var t=0;if(!Array.isArray(e)||e.length<2||!e[0]||!e[e.length-1]||+e[0][0]!=0||+e[e.length-1][0]!=1)return!1;for(var r=0;r<e.length;r++){var i=e[r];if(i.length!==2||+i[0]<t||!o$e(i[1]).isValid())return!1;t=+i[0]}return!0}function l$e(e){return Rk[e]!==void 0?!0:mQ(e)}xQ.exports={scales:Rk,defaultScale:yQ,get:s$e,isValid:l$e}});var Ku=ne(Q1=>{"use strict";Q1.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];Q1.defaultLine="#444";Q1.lightLine="#eee";Q1.background="#fff";Q1.borderLine="#BEC8D9";Q1.lightFraction=100*10/11});var _i=ne((i$t,_Q)=>{"use strict";var Kv=Xf(),u$e=la(),f$e=uh().isTypedArray,Zf=_Q.exports={},Dk=Ku();Zf.defaults=Dk.defaults;var c$e=Zf.defaultLine=Dk.defaultLine;Zf.lightLine=Dk.lightLine;var vq=Zf.background=Dk.background;Zf.tinyRGB=function(e){var t=e.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"};Zf.rgb=function(e){return Zf.tinyRGB(Kv(e))};Zf.opacity=function(e){return e?Kv(e).getAlpha():0};Zf.addOpacity=function(e,t){var r=Kv(e).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+t+")"};Zf.combine=function(e,t){var r=Kv(e).toRgb();if(r.a===1)return Kv(e).toRgbString();var i=Kv(t||vq).toRgb(),n=i.a===1?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a},a={r:n.r*(1-r.a)+r.r*r.a,g:n.g*(1-r.a)+r.g*r.a,b:n.b*(1-r.a)+r.b*r.a};return Kv(a).toRgbString()};Zf.interpolate=function(e,t,r){var i=Kv(e).toRgb(),n=Kv(t).toRgb(),a={r:r*i.r+(1-r)*n.r,g:r*i.g+(1-r)*n.g,b:r*i.b+(1-r)*n.b};return Kv(a).toRgbString()};Zf.contrast=function(e,t,r){var i=Kv(e);i.getAlpha()!==1&&(i=Kv(Zf.combine(e,vq)));var n=i.isDark()?t?i.lighten(t):vq:r?i.darken(r):c$e;return n.toString()};Zf.stroke=function(e,t){var r=Kv(t);e.style({stroke:Zf.tinyRGB(r),"stroke-opacity":r.getAlpha()})};Zf.fill=function(e,t){var r=Kv(t);e.style({fill:Zf.tinyRGB(r),"fill-opacity":r.getAlpha()})};Zf.clean=function(e){if(!(!e||typeof e!="object")){var t=Object.keys(e),r,i,n,a;for(r=0;r<t.length;r++)if(n=t[r],a=e[n],n.substr(n.length-5)==="color")if(Array.isArray(a))for(i=0;i<a.length;i++)a[i]=hq(a[i]);else e[n]=hq(a);else if(n.substr(n.length-10)==="colorscale"&&Array.isArray(a))for(i=0;i<a.length;i++)Array.isArray(a[i])&&(a[i][1]=hq(a[i][1]));else if(Array.isArray(a)){var o=a[0];if(!Array.isArray(o)&&o&&typeof o=="object")for(i=0;i<a.length;i++)Zf.clean(a[i])}else a&&typeof a=="object"&&!f$e(a)&&Zf.clean(a)}};function hq(e){if(u$e(e)||typeof e!="string")return e;var t=e.trim();if(t.substr(0,3)!=="rgb")return e;var r=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!r)return e;var i=r[1].trim().split(/\s*[\s,]\s*/),n=t.charAt(3)==="a"&&i.length===4;if(!n&&i.length!==3)return e;for(var a=0;a<i.length;a++){if(!i[a].length||(i[a]=Number(i[a]),!(i[a]>=0)))return e;if(a===3)i[a]>1&&(i[a]=1);else if(i[a]>=1)return e}var o=Math.round(i[0]*255)+", "+Math.round(i[1]*255)+", "+Math.round(i[2]*255);return n?"rgba("+o+", "+i[3]+")":"rgb("+o+")"}});var Yy=ne((a$t,bQ)=>{"use strict";bQ.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}});var Kb=ne(wQ=>{"use strict";wQ.counter=function(e,t,r,i){var n=(t||"")+(r?"":"$"),a=i===!1?"":"^";return e==="xy"?new RegExp(a+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+n):new RegExp(a+e+"([2-9]|[1-9][0-9]+)?"+n)}});var MQ=ne(Jv=>{"use strict";var dq=la(),TQ=Xf(),h$e=es(),v$e=J1(),d$e=_i(),p$e=Yy().DESELECTDIM,Jb=nA(),AQ=Kb().counter,g$e=Zb().modHalf,D0=uh().isArrayOrTypedArray,Ik=uh().isTypedArraySpec,Fk=uh().decodeTypedArraySpec;Jv.valObjectMeta={data_array:{coerceFunction:function(e,t,r){t.set(D0(e)?e:Ik(e)?Fk(e):r)}},enumerated:{coerceFunction:function(e,t,r,i){i.coerceNumber&&(e=+e),i.values.indexOf(e)===-1?t.set(r):t.set(e)},validateFunction:function(e,t){t.coerceNumber&&(e=+e);for(var r=t.values,i=0;i<r.length;i++){var n=String(r[i]);if(n.charAt(0)==="/"&&n.charAt(n.length-1)==="/"){var a=new RegExp(n.substr(1,n.length-2));if(a.test(e))return!0}else if(e===r[i])return!0}return!1}},boolean:{coerceFunction:function(e,t,r){e===!0||e===!1?t.set(e):t.set(r)}},number:{coerceFunction:function(e,t,r,i){!dq(e)||i.min!==void 0&&e<i.min||i.max!==void 0&&e>i.max?t.set(r):t.set(+e)}},integer:{coerceFunction:function(e,t,r,i){e%1||!dq(e)||i.min!==void 0&&e<i.min||i.max!==void 0&&e>i.max?t.set(r):t.set(+e)}},string:{coerceFunction:function(e,t,r,i){if(typeof e!="string"){var n=typeof e=="number";i.strict===!0||!n?t.set(r):t.set(String(e))}else i.noBlank&&!e?t.set(r):t.set(e)}},color:{coerceFunction:function(e,t,r){TQ(e).isValid()?t.set(e):t.set(r)}},colorlist:{coerceFunction:function(e,t,r){function i(n){return TQ(n).isValid()}!Array.isArray(e)||!e.length?t.set(r):e.every(i)?t.set(e):t.set(r)}},colorscale:{coerceFunction:function(e,t,r){t.set(v$e.get(e,r))}},angle:{coerceFunction:function(e,t,r){e==="auto"?t.set("auto"):dq(e)?t.set(g$e(+e,360)):t.set(r)}},subplotid:{coerceFunction:function(e,t,r,i){var n=i.regex||AQ(r);if(typeof e=="string"&&n.test(e)){t.set(e);return}t.set(r)},validateFunction:function(e,t){var r=t.dflt;return e===r?!0:typeof e!="string"?!1:!!AQ(r).test(e)}},flaglist:{coerceFunction:function(e,t,r,i){if((i.extras||[]).indexOf(e)!==-1){t.set(e);return}if(typeof e!="string"){t.set(r);return}for(var n=e.split("+"),a=0;a<n.length;){var o=n[a];i.flags.indexOf(o)===-1||n.indexOf(o)<a?n.splice(a,1):a++}n.length?t.set(n.join("+")):t.set(r)}},any:{coerceFunction:function(e,t,r){e===void 0?t.set(r):t.set(Ik(e)?Fk(e):e)}},info_array:{coerceFunction:function(e,t,r,i){function n(M,b,w){var k,x={set:function(E){k=E}};return w===void 0&&(w=b.dflt),Jv.valObjectMeta[b.valType].coerceFunction(M,x,w,b),k}if(Ik(e)&&(e=Fk(e)),!D0(e)){t.set(r);return}var a=i.dimensions===2||i.dimensions==="1-2"&&Array.isArray(e)&&D0(e[0]),o=i.items,s=[],l=Array.isArray(o),u=l&&a&&D0(o[0]),f=a&&l&&!u,c=l&&!f?o.length:e.length,h,v,d,_,T,p;if(r=Array.isArray(r)?r:[],a)for(h=0;h<c;h++)for(s[h]=[],d=D0(e[h])?e[h]:[],f?T=o.length:l?T=o[h].length:T=d.length,v=0;v<T;v++)f?_=o[v]:l?_=o[h][v]:_=o,p=n(d[v],_,(r[h]||[])[v]),p!==void 0&&(s[h][v]=p);else for(h=0;h<c;h++)p=n(e[h],l?o[h]:o,r[h]),p!==void 0&&(s[h]=p);t.set(s)},validateFunction:function(e,t){if(!D0(e))return!1;var r=t.items,i=Array.isArray(r),n=t.dimensions===2;if(!t.freeLength&&e.length!==r.length)return!1;for(var a=0;a<e.length;a++)if(n){if(!D0(e[a])||!t.freeLength&&e[a].length!==r[a].length)return!1;for(var o=0;o<e[a].length;o++)if(!qk(e[a][o],i?r[a][o]:r))return!1}else if(!qk(e[a],i?r[a]:r))return!1;return!0}}};Jv.coerce=function(e,t,r,i,n){var a=Jb(r,i).get(),o=Jb(e,i),s=Jb(t,i),l=o.get(),u=t._template;if(l===void 0&&u&&(l=Jb(u,i).get(),u=0),n===void 0&&(n=a.dflt),a.arrayOk){if(D0(l))return s.set(l),l;if(Ik(l))return l=Fk(l),s.set(l),l}var f=Jv.valObjectMeta[a.valType].coerceFunction;f(l,s,n,a);var c=s.get();return u&&c===n&&!qk(l,a)&&(l=Jb(u,i).get(),f(l,s,n,a),c=s.get()),c};Jv.coerce2=function(e,t,r,i,n){var a=Jb(e,i),o=Jv.coerce(e,t,r,i,n),s=a.get();return s!=null?o:!1};Jv.coerceFont=function(e,t,r){var i={};return r=r||{},i.family=e(t+".family",r.family),i.size=e(t+".size",r.size),i.color=e(t+".color",r.color),i};Jv.coercePattern=function(e,t,r,i){var n=e(t+".shape");if(n){e(t+".solidity"),e(t+".size");var a=e(t+".fillmode"),o=a==="overlay";if(!i){var s=e(t+".bgcolor",o?r:void 0);e(t+".fgcolor",o?d$e.contrast(s):r)}e(t+".fgopacity",o?.5:1)}};Jv.coerceHoverinfo=function(e,t,r){var i=t._module.attributes,n=i.hoverinfo?i:h$e,a=n.hoverinfo,o;if(r._dataLength===1){var s=a.dflt==="all"?a.flags.slice():a.dflt.split("+");s.splice(s.indexOf("name"),1),o=s.join("+")}return Jv.coerce(e,t,n,"hoverinfo",o)};Jv.coerceSelectionMarkerOpacity=function(e,t){if(e.marker){var r=e.marker.opacity;if(r!==void 0){var i,n;!D0(r)&&!e.selected&&!e.unselected&&(i=r,n=p$e*r),t("selected.marker.opacity",i),t("unselected.marker.opacity",n)}}};function qk(e,t){var r=Jv.valObjectMeta[t.valType];if(t.arrayOk&&D0(e))return!0;if(r.validateFunction)return r.validateFunction(e,t);var i={},n=i,a={set:function(o){n=o}};return r.coerceFunction(e,a,i,t),n!==i}Jv.validate=qk});var $1=ne((l$t,CQ)=>{"use strict";var SQ={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},EQ={};function kQ(e,t){for(var r in e){var i=e[r];i.valType?t[r]=i.dflt:(t[r]||(t[r]={}),kQ(i,t[r]))}}kQ(SQ,EQ);CQ.exports={configAttributes:SQ,dfltConfig:EQ}});var gq=ne((u$t,LQ)=>{"use strict";var pq=Ai(),y$e=la(),uA=[];LQ.exports=function(e,t){if(uA.indexOf(e)!==-1)return;uA.push(e);var r=1e3;y$e(t)?r=t:t==="long"&&(r=3e3);var i=pq.select("body").selectAll(".plotly-notifier").data([0]);i.enter().append("div").classed("plotly-notifier",!0);var n=i.selectAll(".notifier-note").data(uA);function a(o){o.duration(700).style("opacity",0).each("end",function(s){var l=uA.indexOf(s);l!==-1&&uA.splice(l,1),pq.select(this).remove()})}n.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(o){var s=pq.select(this);s.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){s.transition().call(a)});for(var l=s.append("p"),u=o.split(/<br\s*\/?>/g),f=0;f<u.length;f++)f&&l.append("br"),l.append("span").text(u[f]);t==="stick"?s.transition().duration(350).style("opacity",1):s.transition().duration(700).style("opacity",1).transition().delay(r).call(a)})}});var Wy=ne((f$t,PQ)=>{"use strict";var Qb=$1().dfltConfig,yq=gq(),mq=PQ.exports={};mq.log=function(){var e;if(Qb.logging>1){var t=["LOG:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.trace.apply(console,t)}if(Qb.notifyOnLogging>1){var r=[];for(e=0;e<arguments.length;e++)r.push(arguments[e]);yq(r.join("<br>"),"long")}};mq.warn=function(){var e;if(Qb.logging>0){var t=["WARN:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.trace.apply(console,t)}if(Qb.notifyOnLogging>0){var r=[];for(e=0;e<arguments.length;e++)r.push(arguments[e]);yq(r.join("<br>"),"stick")}};mq.error=function(){var e;if(Qb.logging>0){var t=["ERROR:"];for(e=0;e<arguments.length;e++)t.push(arguments[e]);console.error.apply(console,t)}if(Qb.notifyOnLogging>0){var r=[];for(e=0;e<arguments.length;e++)r.push(arguments[e]);yq(r.join("<br>"),"stick")}}});var zk=ne((c$t,RQ)=>{"use strict";RQ.exports=function(){}});var xq=ne((h$t,DQ)=>{"use strict";DQ.exports=function(t,r){if(r instanceof RegExp){for(var i=r.toString(),n=0;n<t.length;n++)if(t[n]instanceof RegExp&&t[n].toString()===i)return t;t.push(r)}else(r||r===0)&&t.indexOf(r)===-1&&t.push(r);return t}});var FQ=ne((v$t,IQ)=>{IQ.exports=m$e;function m$e(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var zQ=ne((d$t,qQ)=>{qQ.exports=x$e;function x$e(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}});var BQ=ne((p$t,OQ)=>{OQ.exports=_$e;function _$e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}});var _q=ne((g$t,NQ)=>{NQ.exports=b$e;function b$e(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var VQ=ne((y$t,UQ)=>{UQ.exports=w$e;function w$e(e,t){if(e===t){var r=t[1],i=t[2],n=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=a,e[11]=t[14],e[12]=n,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}});var GQ=ne((m$t,HQ)=>{HQ.exports=T$e;function T$e(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],f=t[8],c=t[9],h=t[10],v=t[11],d=t[12],_=t[13],T=t[14],p=t[15],M=r*s-i*o,b=r*l-n*o,w=r*u-a*o,k=i*l-n*s,x=i*u-a*s,E=n*u-a*l,S=f*_-c*d,g=f*T-h*d,C=f*p-v*d,A=c*T-h*_,P=c*p-v*_,D=h*p-v*T,z=M*D-b*P+w*A+k*C-x*g+E*S;return z?(z=1/z,e[0]=(s*D-l*P+u*A)*z,e[1]=(n*P-i*D-a*A)*z,e[2]=(_*E-T*x+p*k)*z,e[3]=(h*x-c*E-v*k)*z,e[4]=(l*C-o*D-u*g)*z,e[5]=(r*D-n*C+a*g)*z,e[6]=(T*w-d*E-p*b)*z,e[7]=(f*E-h*w+v*b)*z,e[8]=(o*P-s*C+u*S)*z,e[9]=(i*C-r*P-a*S)*z,e[10]=(d*x-_*w+p*M)*z,e[11]=(c*w-f*x-v*M)*z,e[12]=(s*g-o*A-l*S)*z,e[13]=(r*A-i*g+n*S)*z,e[14]=(_*b-d*k-T*M)*z,e[15]=(f*k-c*b+h*M)*z,e):null}});var WQ=ne((x$t,YQ)=>{YQ.exports=A$e;function A$e(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],f=t[8],c=t[9],h=t[10],v=t[11],d=t[12],_=t[13],T=t[14],p=t[15];return e[0]=s*(h*p-v*T)-c*(l*p-u*T)+_*(l*v-u*h),e[1]=-(i*(h*p-v*T)-c*(n*p-a*T)+_*(n*v-a*h)),e[2]=i*(l*p-u*T)-s*(n*p-a*T)+_*(n*u-a*l),e[3]=-(i*(l*v-u*h)-s*(n*v-a*h)+c*(n*u-a*l)),e[4]=-(o*(h*p-v*T)-f*(l*p-u*T)+d*(l*v-u*h)),e[5]=r*(h*p-v*T)-f*(n*p-a*T)+d*(n*v-a*h),e[6]=-(r*(l*p-u*T)-o*(n*p-a*T)+d*(n*u-a*l)),e[7]=r*(l*v-u*h)-o*(n*v-a*h)+f*(n*u-a*l),e[8]=o*(c*p-v*_)-f*(s*p-u*_)+d*(s*v-u*c),e[9]=-(r*(c*p-v*_)-f*(i*p-a*_)+d*(i*v-a*c)),e[10]=r*(s*p-u*_)-o*(i*p-a*_)+d*(i*u-a*s),e[11]=-(r*(s*v-u*c)-o*(i*v-a*c)+f*(i*u-a*s)),e[12]=-(o*(c*T-h*_)-f*(s*T-l*_)+d*(s*h-l*c)),e[13]=r*(c*T-h*_)-f*(i*T-n*_)+d*(i*h-n*c),e[14]=-(r*(s*T-l*_)-o*(i*T-n*_)+d*(i*l-n*s)),e[15]=r*(s*h-l*c)-o*(i*h-n*c)+f*(i*l-n*s),e}});var ZQ=ne((_$t,XQ)=>{XQ.exports=M$e;function M$e(e){var t=e[0],r=e[1],i=e[2],n=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],f=e[9],c=e[10],h=e[11],v=e[12],d=e[13],_=e[14],T=e[15],p=t*o-r*a,M=t*s-i*a,b=t*l-n*a,w=r*s-i*o,k=r*l-n*o,x=i*l-n*s,E=u*d-f*v,S=u*_-c*v,g=u*T-h*v,C=f*_-c*d,A=f*T-h*d,P=c*T-h*_;return p*P-M*A+b*C+w*g-k*S+x*E}});var KQ=ne((b$t,jQ)=>{jQ.exports=S$e;function S$e(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],f=t[7],c=t[8],h=t[9],v=t[10],d=t[11],_=t[12],T=t[13],p=t[14],M=t[15],b=r[0],w=r[1],k=r[2],x=r[3];return e[0]=b*i+w*s+k*c+x*_,e[1]=b*n+w*l+k*h+x*T,e[2]=b*a+w*u+k*v+x*p,e[3]=b*o+w*f+k*d+x*M,b=r[4],w=r[5],k=r[6],x=r[7],e[4]=b*i+w*s+k*c+x*_,e[5]=b*n+w*l+k*h+x*T,e[6]=b*a+w*u+k*v+x*p,e[7]=b*o+w*f+k*d+x*M,b=r[8],w=r[9],k=r[10],x=r[11],e[8]=b*i+w*s+k*c+x*_,e[9]=b*n+w*l+k*h+x*T,e[10]=b*a+w*u+k*v+x*p,e[11]=b*o+w*f+k*d+x*M,b=r[12],w=r[13],k=r[14],x=r[15],e[12]=b*i+w*s+k*c+x*_,e[13]=b*n+w*l+k*h+x*T,e[14]=b*a+w*u+k*v+x*p,e[15]=b*o+w*f+k*d+x*M,e}});var QQ=ne((w$t,JQ)=>{JQ.exports=E$e;function E$e(e,t,r){var i=r[0],n=r[1],a=r[2],o,s,l,u,f,c,h,v,d,_,T,p;return t===e?(e[12]=t[0]*i+t[4]*n+t[8]*a+t[12],e[13]=t[1]*i+t[5]*n+t[9]*a+t[13],e[14]=t[2]*i+t[6]*n+t[10]*a+t[14],e[15]=t[3]*i+t[7]*n+t[11]*a+t[15]):(o=t[0],s=t[1],l=t[2],u=t[3],f=t[4],c=t[5],h=t[6],v=t[7],d=t[8],_=t[9],T=t[10],p=t[11],e[0]=o,e[1]=s,e[2]=l,e[3]=u,e[4]=f,e[5]=c,e[6]=h,e[7]=v,e[8]=d,e[9]=_,e[10]=T,e[11]=p,e[12]=o*i+f*n+d*a+t[12],e[13]=s*i+c*n+_*a+t[13],e[14]=l*i+h*n+T*a+t[14],e[15]=u*i+v*n+p*a+t[15]),e}});var e$=ne((T$t,$Q)=>{$Q.exports=k$e;function k$e(e,t,r){var i=r[0],n=r[1],a=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}});var r$=ne((A$t,t$)=>{t$.exports=C$e;function C$e(e,t,r,i){var n=i[0],a=i[1],o=i[2],s=Math.sqrt(n*n+a*a+o*o),l,u,f,c,h,v,d,_,T,p,M,b,w,k,x,E,S,g,C,A,P,D,z,O;return Math.abs(s)<1e-6?null:(s=1/s,n*=s,a*=s,o*=s,l=Math.sin(r),u=Math.cos(r),f=1-u,c=t[0],h=t[1],v=t[2],d=t[3],_=t[4],T=t[5],p=t[6],M=t[7],b=t[8],w=t[9],k=t[10],x=t[11],E=n*n*f+u,S=a*n*f+o*l,g=o*n*f-a*l,C=n*a*f-o*l,A=a*a*f+u,P=o*a*f+n*l,D=n*o*f+a*l,z=a*o*f-n*l,O=o*o*f+u,e[0]=c*E+_*S+b*g,e[1]=h*E+T*S+w*g,e[2]=v*E+p*S+k*g,e[3]=d*E+M*S+x*g,e[4]=c*C+_*A+b*P,e[5]=h*C+T*A+w*P,e[6]=v*C+p*A+k*P,e[7]=d*C+M*A+x*P,e[8]=c*D+_*z+b*O,e[9]=h*D+T*z+w*O,e[10]=v*D+p*z+k*O,e[11]=d*D+M*z+x*O,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}});var i$=ne((M$t,n$)=>{n$.exports=L$e;function L$e(e,t,r){var i=Math.sin(r),n=Math.cos(r),a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],f=t[9],c=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*n+u*i,e[5]=o*n+f*i,e[6]=s*n+c*i,e[7]=l*n+h*i,e[8]=u*n-a*i,e[9]=f*n-o*i,e[10]=c*n-s*i,e[11]=h*n-l*i,e}});var o$=ne((S$t,a$)=>{a$.exports=P$e;function P$e(e,t,r){var i=Math.sin(r),n=Math.cos(r),a=t[0],o=t[1],s=t[2],l=t[3],u=t[8],f=t[9],c=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*n-u*i,e[1]=o*n-f*i,e[2]=s*n-c*i,e[3]=l*n-h*i,e[8]=a*i+u*n,e[9]=o*i+f*n,e[10]=s*i+c*n,e[11]=l*i+h*n,e}});var l$=ne((E$t,s$)=>{s$.exports=R$e;function R$e(e,t,r){var i=Math.sin(r),n=Math.cos(r),a=t[0],o=t[1],s=t[2],l=t[3],u=t[4],f=t[5],c=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*n+u*i,e[1]=o*n+f*i,e[2]=s*n+c*i,e[3]=l*n+h*i,e[4]=u*n-a*i,e[5]=f*n-o*i,e[6]=c*n-s*i,e[7]=h*n-l*i,e}});var f$=ne((k$t,u$)=>{u$.exports=D$e;function D$e(e,t,r){var i,n,a,o=r[0],s=r[1],l=r[2],u=Math.sqrt(o*o+s*s+l*l);return Math.abs(u)<1e-6?null:(u=1/u,o*=u,s*=u,l*=u,i=Math.sin(t),n=Math.cos(t),a=1-n,e[0]=o*o*a+n,e[1]=s*o*a+l*i,e[2]=l*o*a-s*i,e[3]=0,e[4]=o*s*a-l*i,e[5]=s*s*a+n,e[6]=l*s*a+o*i,e[7]=0,e[8]=o*l*a+s*i,e[9]=s*l*a-o*i,e[10]=l*l*a+n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}});var h$=ne((C$t,c$)=>{c$.exports=I$e;function I$e(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=i+i,l=n+n,u=a+a,f=i*s,c=i*l,h=i*u,v=n*l,d=n*u,_=a*u,T=o*s,p=o*l,M=o*u;return e[0]=1-(v+_),e[1]=c+M,e[2]=h-p,e[3]=0,e[4]=c-M,e[5]=1-(f+_),e[6]=d+T,e[7]=0,e[8]=h+p,e[9]=d-T,e[10]=1-(f+v),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}});var d$=ne((L$t,v$)=>{v$.exports=F$e;function F$e(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var g$=ne((P$t,p$)=>{p$.exports=q$e;function q$e(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}});var m$=ne((R$t,y$)=>{y$.exports=z$e;function z$e(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var _$=ne((D$t,x$)=>{x$.exports=O$e;function O$e(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var w$=ne((I$t,b$)=>{b$.exports=B$e;function B$e(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var bq=ne((F$t,T$)=>{T$.exports=N$e;function N$e(e,t){var r=t[0],i=t[1],n=t[2],a=t[3],o=r+r,s=i+i,l=n+n,u=r*o,f=i*o,c=i*s,h=n*o,v=n*s,d=n*l,_=a*o,T=a*s,p=a*l;return e[0]=1-c-d,e[1]=f+p,e[2]=h-T,e[3]=0,e[4]=f-p,e[5]=1-u-d,e[6]=v+_,e[7]=0,e[8]=h+T,e[9]=v-_,e[10]=1-u-c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}});var M$=ne((q$t,A$)=>{A$.exports=U$e;function U$e(e,t,r,i,n,a,o){var s=1/(r-t),l=1/(n-i),u=1/(a-o);return e[0]=a*2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a*2*l,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(n+i)*l,e[10]=(o+a)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*u,e[15]=0,e}});var E$=ne((z$t,S$)=>{S$.exports=V$e;function V$e(e,t,r,i,n){var a=1/Math.tan(t/2),o=1/(i-n);return e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(n+i)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*n*i*o,e[15]=0,e}});var C$=ne((O$t,k$)=>{k$.exports=H$e;function H$e(e,t,r,i){var n=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+s),u=2/(n+a);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-((o-s)*l*.5),e[9]=(n-a)*u*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e}});var P$=ne((B$t,L$)=>{L$.exports=G$e;function G$e(e,t,r,i,n,a,o){var s=1/(t-r),l=1/(i-n),u=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*s,e[13]=(n+i)*l,e[14]=(o+a)*u,e[15]=1,e}});var D$=ne((N$t,R$)=>{var Y$e=_q();R$.exports=W$e;function W$e(e,t,r,i){var n,a,o,s,l,u,f,c,h,v,d=t[0],_=t[1],T=t[2],p=i[0],M=i[1],b=i[2],w=r[0],k=r[1],x=r[2];return Math.abs(d-w)<1e-6&&Math.abs(_-k)<1e-6&&Math.abs(T-x)<1e-6?Y$e(e):(f=d-w,c=_-k,h=T-x,v=1/Math.sqrt(f*f+c*c+h*h),f*=v,c*=v,h*=v,n=M*h-b*c,a=b*f-p*h,o=p*c-M*f,v=Math.sqrt(n*n+a*a+o*o),v?(v=1/v,n*=v,a*=v,o*=v):(n=0,a=0,o=0),s=c*o-h*a,l=h*n-f*o,u=f*a-c*n,v=Math.sqrt(s*s+l*l+u*u),v?(v=1/v,s*=v,l*=v,u*=v):(s=0,l=0,u=0),e[0]=n,e[1]=s,e[2]=f,e[3]=0,e[4]=a,e[5]=l,e[6]=c,e[7]=0,e[8]=o,e[9]=u,e[10]=h,e[11]=0,e[12]=-(n*d+a*_+o*T),e[13]=-(s*d+l*_+u*T),e[14]=-(f*d+c*_+h*T),e[15]=1,e)}});var F$=ne((U$t,I$)=>{I$.exports=X$e;function X$e(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}});var wq=ne((V$t,q$)=>{q$.exports={create:FQ(),clone:zQ(),copy:BQ(),identity:_q(),transpose:VQ(),invert:GQ(),adjoint:WQ(),determinant:ZQ(),multiply:KQ(),translate:QQ(),scale:e$(),rotate:r$(),rotateX:i$(),rotateY:o$(),rotateZ:l$(),fromRotation:f$(),fromRotationTranslation:h$(),fromScaling:d$(),fromTranslation:g$(),fromXRotation:m$(),fromYRotation:_$(),fromZRotation:w$(),fromQuat:bq(),frustum:M$(),perspective:E$(),perspectiveFromFieldOfView:C$(),ortho:P$(),lookAt:D$(),str:F$()}});var Ok=ne(Ru=>{"use strict";var Z$e=wq();Ru.init2dArray=function(e,t){for(var r=new Array(e),i=0;i<e;i++)r[i]=new Array(t);return r};Ru.transposeRagged=function(e){var t=0,r=e.length,i,n;for(i=0;i<r;i++)t=Math.max(t,e[i].length);var a=new Array(t);for(i=0;i<t;i++)for(a[i]=new Array(r),n=0;n<r;n++)a[i][n]=e[n][i];return a};Ru.dot=function(e,t){if(!(e.length&&t.length)||e.length!==t.length)return null;var r=e.length,i,n;if(e[0].length)for(i=new Array(r),n=0;n<r;n++)i[n]=Ru.dot(e[n],t);else if(t[0].length){var a=Ru.transposeRagged(t);for(i=new Array(a.length),n=0;n<a.length;n++)i[n]=Ru.dot(e,a[n])}else for(i=0,n=0;n<r;n++)i+=e[n]*t[n];return i};Ru.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]};Ru.rotationMatrix=function(e){var t=e*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]};Ru.rotationXYMatrix=function(e,t,r){return Ru.dot(Ru.dot(Ru.translationMatrix(t,r),Ru.rotationMatrix(e)),Ru.translationMatrix(-t,-r))};Ru.apply3DTransform=function(e){return function(){var t=arguments,r=arguments.length===1?t[0]:[t[0],t[1],t[2]||0];return Ru.dot(e,[r[0],r[1],r[2],1]).slice(0,3)}};Ru.apply2DTransform=function(e){return function(){var t=arguments;t.length===3&&(t=t[0]);var r=arguments.length===1?t[0]:[t[0],t[1]];return Ru.dot(e,[r[0],r[1],1]).slice(0,2)}};Ru.apply2DTransform2=function(e){var t=Ru.apply2DTransform(e);return function(r){return t(r.slice(0,2)).concat(t(r.slice(2,4)))}};Ru.convertCssMatrix=function(e){if(e){var t=e.length;if(t===16)return e;if(t===6)return[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};Ru.inverseTransformMatrix=function(e){var t=[];return Z$e.invert(t,e),[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]]}});var fA=ne((G$t,U$)=>{"use strict";var j$e=Ai(),K$e=Wy(),J$e=Ok(),Q$e=wq();function $$e(e){var t;if(typeof e=="string"){if(t=document.getElementById(e),t===null)throw new Error("No DOM element with id '"+e+"' exists on the page.");return t}else if(e==null)throw new Error("DOM element provided is null or undefined");return e}function eet(e){var t=j$e.select(e);return t.node()instanceof HTMLElement&&t.size()&&t.classed("js-plotly-plot")}function z$(e){var t=e&&e.parentNode;t&&t.removeChild(e)}function tet(e,t){O$("global",e,t)}function O$(e,t,r){var i="plotly.js-style-"+e,n=document.getElementById(i);n||(n=document.createElement("style"),n.setAttribute("id",i),n.appendChild(document.createTextNode("")),document.head.appendChild(n));var a=n.sheet;a.insertRule?a.insertRule(t+"{"+r+"}",0):a.addRule?a.addRule(t,r,0):K$e.warn("addStyleRule failed")}function ret(e){var t="plotly.js-style-"+e,r=document.getElementById(t);r&&z$(r)}function net(e){var t=N$(e),r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach(function(i){var n=B$(i);if(n){var a=J$e.convertCssMatrix(n);r=Q$e.multiply(r,r,a)}}),r}function B$(e){var t=window.getComputedStyle(e,null),r=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform");return r==="none"?null:r.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(i){return+i})}function N$(e){for(var t=[];iet(e);)t.push(e),e=e.parentNode;return t}function iet(e){return e&&(e instanceof Element||e instanceof HTMLElement)}function aet(e,t){return e&&t&&e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom}U$.exports={getGraphDiv:$$e,isPlotDiv:eet,removeElement:z$,addStyleRule:tet,addRelatedStyleRule:O$,deleteRelatedStyleRule:ret,getFullTransformMatrix:net,getElementTransformMatrix:B$,getElementAndAncestors:N$,equalDomRects:aet}});var cA=ne((Y$t,V$)=>{"use strict";V$.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}});var Xs=ne((W$t,j$)=>{"use strict";var G$=oa().extendFlat,oet=Lg(),Y$={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},W$={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},set=Y$.flags.slice().concat(["fullReplot"]),uet=W$.flags.slice().concat("layoutReplot");j$.exports={traces:Y$,layout:W$,traceFlags:function(){return H$(set)},layoutFlags:function(){return H$(uet)},update:function(e,t){var r=t.editType;if(r&&r!=="none")for(var i=r.split("+"),n=0;n<i.length;n++)e[i[n]]=!0},overrideAll:X$};function H$(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!1;return t}function X$(e,t,r){var i=G$({},e);for(var n in i){var a=i[n];oet(a)&&(i[n]=Z$(a,t,r,n))}return r==="from-root"&&(i.editType=t),i}function Z$(e,t,r,i){if(e.valType){var n=G$({},e);if(n.editType=t,Array.isArray(e.items)){n.items=new Array(e.items.length);for(var a=0;a<e.items.length;a++)n.items[a]=Z$(e.items[a],t,"from-root")}return n}else return X$(e,t,i.charAt(0)==="_"?"nested":"from-root")}});var hc=ne(Tq=>{"use strict";Tq.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"};Tq.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}});var Aq=ne((Z$t,K$)=>{"use strict";K$.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}});var Ba=ne(Bk=>{"use strict";var J$=Aq(),j$t=J$.FORMAT_LINK,K$t=J$.DATE_FORMAT_LINK;function Mq(e){var t=e.description?" "+e.description:"",r=e.keys||[];if(r.length>0){for(var i=[],n=0;n<r.length;n++)i[n]="`"+r[n]+"`";t=t+"Finally, the template string has access to ",r.length===1?t=t+"variable "+i[0]:t=t+"variables "+i.slice(0,-1).join(", ")+" and "+i.slice(-1)+"."}return t}Bk.hovertemplateAttrs=function(e,t){e=e||{},t=t||{};var r=Mq(t),i={valType:"string",dflt:"",editType:e.editType||"none"};return e.arrayOk!==!1&&(i.arrayOk=!0),i};Bk.texttemplateAttrs=function(e,t){e=e||{},t=t||{};var r=Mq(t),i={valType:"string",dflt:"",editType:e.editType||"calc"};return e.arrayOk!==!1&&(i.arrayOk=!0),i};Bk.shapeTexttemplateAttrs=function(e,t){e=e||{},t=t||{};var r=e.newshape?"new ":"",i=Mq(t),n={valType:"string",dflt:"",editType:e.editType||"arraydraw"};return n}});var Vk=ne((Q$t,$$)=>{"use strict";function Xy(e,t){return t?t.d2l(e):e}function Q$(e,t){return t?t.l2d(e):e}function fet(e){return e.x0}function cet(e){return e.x1}function het(e){return e.y0}function vet(e){return e.y1}function Nk(e,t){return Xy(e.x1,t)-Xy(e.x0,t)}function Uk(e,t,r){return Xy(e.y1,r)-Xy(e.y0,r)}function det(e,t){return Math.abs(Nk(e,t))}function pet(e,t,r){return Math.abs(Uk(e,t,r))}function get(e,t,r){return e.type!=="line"?void 0:Math.sqrt(Math.pow(Nk(e,t),2)+Math.pow(Uk(e,t,r),2))}function yet(e,t){return Q$((Xy(e.x1,t)+Xy(e.x0,t))/2,t)}function met(e,t,r){return Q$((Xy(e.y1,r)+Xy(e.y0,r))/2,r)}function xet(e,t,r){return e.type!=="line"?void 0:Uk(e,t,r)/Nk(e,t)}$$.exports={x0:fet,x1:cet,y0:het,y1:vet,slope:xet,dx:Nk,dy:Uk,width:det,height:pet,length:get,xcenter:yet,ycenter:met}});var ree=ne(($$t,tee)=>{"use strict";var _et=Xs().overrideAll,ex=es(),eee=ll(),bet=hc().dash,Zy=oa().extendFlat,wet=Ba().shapeTexttemplateAttrs,Tet=Vk();tee.exports=_et({newshape:{visible:Zy({},ex.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:Zy({},ex.legend,{}),legendgroup:Zy({},ex.legendgroup,{}),legendgrouptitle:{text:Zy({},ex.legendgrouptitle.text,{}),font:eee({})},legendrank:Zy({},ex.legendrank,{}),legendwidth:Zy({},ex.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:Zy({},bet,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:Zy({},ex.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:wet({newshape:!0},{keys:Object.keys(Tet)}),font:eee({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")});var iee=ne((eer,nee)=>{"use strict";var Aet=hc().dash,Met=oa().extendFlat;nee.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:Met({},Aet,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}});var Hk=ne((ter,aee)=>{"use strict";aee.exports=function(e){var t=e.editType;return{t:{valType:"number",dflt:0,editType:t},r:{valType:"number",dflt:0,editType:t},b:{valType:"number",dflt:0,editType:t},l:{valType:"number",dflt:0,editType:t},editType:t}}});var tx=ne((rer,uee)=>{"use strict";var Sq=ll(),Eet=cA(),Gk=Ku(),oee=ree(),see=iee(),ket=Hk(),lee=oa().extendFlat,Yk=Sq({editType:"calc"});Yk.family.dflt='"Open Sans", verdana, arial, sans-serif';Yk.size.dflt=12;Yk.color.dflt=Gk.defaultLine;uee.exports={font:Yk,title:{text:{valType:"string",editType:"layoutstyle"},font:Sq({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:lee(ket({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:Gk.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:Gk.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:Gk.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:oee.newshape,activeshape:oee.activeshape,newselection:see.newselection,activeselection:see.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:lee({},Eet.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:Sq({editType:"layoutstyle"})}}});var wi=ne(Za=>{"use strict";var $b=Wy(),fee=zk(),cee=xq(),Cet=Lg(),Let=fA().addStyleRule,hee=oa(),Pet=es(),Ret=tx(),Det=hee.extendFlat,Wk=hee.extendDeepAll;Za.modules={};Za.allCategories={};Za.allTypes=[];Za.subplotsRegistry={};Za.transformsRegistry={};Za.componentsRegistry={};Za.layoutArrayContainers=[];Za.layoutArrayRegexes=[];Za.traceLayoutAttributes={};Za.localeRegistry={};Za.apiMethodRegistry={};Za.collectableSubplotTypes=null;Za.register=function(t){if(Za.collectableSubplotTypes=null,t)t&&!Array.isArray(t)&&(t=[t]);else throw new Error("No argument passed to Plotly.register.");for(var r=0;r<t.length;r++){var i=t[r];if(!i)throw new Error("Invalid module was attempted to be registered!");switch(i.moduleType){case"trace":Iet(i);break;case"transform":zet(i);break;case"component":qet(i);break;case"locale":Oet(i);break;case"apiMethod":var n=i.name;Za.apiMethodRegistry[n]=i.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}};Za.getModule=function(e){var t=Za.modules[yee(e)];return t?t._module:!1};Za.traceIs=function(e,t){if(e=yee(e),e==="various")return!1;var r=Za.modules[e];return r||(e&&$b.log("Unrecognized trace type "+e+"."),r=Za.modules[Pet.type.dflt]),!!r.categories[t]};Za.getTransformIndices=function(e,t){for(var r=[],i=e.transforms||[],n=0;n<i.length;n++)i[n].type===t&&r.push(n);return r};Za.hasTransform=function(e,t){for(var r=e.transforms||[],i=0;i<r.length;i++)if(r[i].type===t)return!0;return!1};Za.getComponentMethod=function(e,t){var r=Za.componentsRegistry[e];return r&&r[t]||fee};Za.call=function(){var e=arguments[0],t=[].slice.call(arguments,1);return Za.apiMethodRegistry[e].apply(null,t)};function Iet(e){var t=e.name,r=e.categories,i=e.meta;if(Za.modules[t]){$b.log("Type "+t+" already registered");return}Za.subplotsRegistry[e.basePlotModule.name]||Fet(e.basePlotModule);for(var n={},a=0;a<r.length;a++)n[r[a]]=!0,Za.allCategories[r[a]]=!0;Za.modules[t]={_module:e,categories:n},i&&Object.keys(i).length&&(Za.modules[t].meta=i),Za.allTypes.push(t);for(var o in Za.componentsRegistry)dee(o,t);e.layoutAttributes&&Det(Za.traceLayoutAttributes,e.layoutAttributes);var s=e.basePlotModule,l=s.name;if(l==="mapbox"){var u=s.constants.styleRules;for(var f in u)Let(".js-plotly-plot .plotly .mapboxgl-"+f,u[f])}(l==="geo"||l==="mapbox")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function Fet(e){var t=e.name;if(Za.subplotsRegistry[t]){$b.log("Plot type "+t+" already registered.");return}vee(e),Za.subplotsRegistry[t]=e;for(var r in Za.componentsRegistry)gee(r,e.name)}function qet(e){if(typeof e.name!="string")throw new Error("Component module *name* must be a string.");var t=e.name;Za.componentsRegistry[t]=e,e.layoutAttributes&&(e.layoutAttributes._isLinkedToArray&&cee(Za.layoutArrayContainers,t),vee(e));for(var r in Za.modules)dee(t,r);for(var i in Za.subplotsRegistry)gee(t,i);for(var n in Za.transformsRegistry)pee(t,n);e.schema&&e.schema.layout&&Wk(Ret,e.schema.layout)}function zet(e){if(typeof e.name!="string")throw new Error("Transform module *name* must be a string.");var t="Transform module "+e.name,r=typeof e.transform=="function",i=typeof e.calcTransform=="function";if(!r&&!i)throw new Error(t+" is missing a *transform* or *calcTransform* method.");r&&i&&$b.log([t+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),Cet(e.attributes)||$b.log(t+" registered without an *attributes* object."),typeof e.supplyDefaults!="function"&&$b.log(t+" registered without a *supplyDefaults* method."),Za.transformsRegistry[e.name]=e;for(var n in Za.componentsRegistry)pee(n,e.name)}function Oet(e){var t=e.name,r=t.split("-")[0],i=e.dictionary,n=e.format,a=i&&Object.keys(i).length,o=n&&Object.keys(n).length,s=Za.localeRegistry,l=s[t];if(l||(s[t]=l={}),r!==t){var u=s[r];u||(s[r]=u={}),a&&u.dictionary===l.dictionary&&(u.dictionary=i),o&&u.format===l.format&&(u.format=n)}a&&(l.dictionary=i),o&&(l.format=n)}function vee(e){if(e.layoutAttributes){var t=e.layoutAttributes._arrayAttrRegexps;if(t)for(var r=0;r<t.length;r++)cee(Za.layoutArrayRegexes,t[r])}}function dee(e,t){var r=Za.componentsRegistry[e].schema;if(!(!r||!r.traces)){var i=r.traces[t];i&&Wk(Za.modules[t]._module.attributes,i)}}function pee(e,t){var r=Za.componentsRegistry[e].schema;if(!(!r||!r.transforms)){var i=r.transforms[t];i&&Wk(Za.transformsRegistry[t].attributes,i)}}function gee(e,t){var r=Za.componentsRegistry[e].schema;if(!(!r||!r.subplots)){var i=Za.subplotsRegistry[t],n=i.layoutAttributes,a=i.attr==="subplot"?i.name:i.attr;Array.isArray(a)&&(a=a[0]);var o=r.subplots[a];n&&o&&Wk(n,o)}}function yee(e){return typeof e=="object"&&(e=e.type),e}});var See=ne(Du=>{"use strict";var Bet=Wb().timeFormat,Aee=la(),Eq=Wy(),Ky=Zb().mod,r2=$a(),Jd=r2.BADNUM,Qv=r2.ONEDAY,hA=r2.ONEHOUR,jy=r2.ONEMIN,t2=r2.ONESEC,vA=r2.EPOCHJD,Rg=wi(),mee=Wb().utcFormat,Net=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,Uet=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,xee=new Date().getFullYear()-70;function Dg(e){return e&&Rg.componentsRegistry.calendars&&typeof e=="string"&&e!=="gregorian"}Du.dateTick0=function(e,t){var r=Vet(e,!!t);if(t<2)return r;var i=Du.dateTime2ms(r,e);return i+=Qv*(t-1),Du.ms2DateTime(i,0,e)};function Vet(e,t){return Dg(e)?t?Rg.getComponentMethod("calendars","CANONICAL_SUNDAY")[e]:Rg.getComponentMethod("calendars","CANONICAL_TICK")[e]:t?"2000-01-02":"2000-01-01"}Du.dfltRange=function(e){return Dg(e)?Rg.getComponentMethod("calendars","DFLTRANGE")[e]:["2000-01-01","2001-01-01"]};Du.isJSDate=function(e){return typeof e=="object"&&e!==null&&typeof e.getTime=="function"};var Zk,jk;Du.dateTime2ms=function(e,t){if(Du.isJSDate(e)){var r=e.getTimezoneOffset()*jy,i=(e.getUTCMinutes()-e.getMinutes())*jy+(e.getUTCSeconds()-e.getSeconds())*t2+(e.getUTCMilliseconds()-e.getMilliseconds());if(i){var n=3*jy;r=r-n/2+Ky(i-r+n/2,n)}return e=Number(e)-r,e>=Zk&&e<=jk?e:Jd}if(typeof e!="string"&&typeof e!="number")return Jd;e=String(e);var a=Dg(t),o=e.charAt(0);a&&(o==="G"||o==="g")&&(e=e.substr(1),t="");var s=a&&t.substr(0,7)==="chinese",l=e.match(s?Uet:Net);if(!l)return Jd;var u=l[1],f=l[3]||"1",c=Number(l[5]||1),h=Number(l[7]||0),v=Number(l[9]||0),d=Number(l[11]||0);if(a){if(u.length===2)return Jd;u=Number(u);var _;try{var T=Rg.getComponentMethod("calendars","getCal")(t);if(s){var p=f.charAt(f.length-1)==="i";f=parseInt(f,10),_=T.newDate(u,T.toMonthIndex(u,f,p),c)}else _=T.newDate(u,Number(f),c)}catch(b){return Jd}return _?(_.toJD()-vA)*Qv+h*hA+v*jy+d*t2:Jd}u.length===2?u=(Number(u)+2e3-xee)%100+xee:u=Number(u),f-=1;var M=new Date(Date.UTC(2e3,f,c,h,v));return M.setUTCFullYear(u),M.getUTCMonth()!==f||M.getUTCDate()!==c?Jd:M.getTime()+d*t2};Zk=Du.MIN_MS=Du.dateTime2ms("-9999");jk=Du.MAX_MS=Du.dateTime2ms("9999-12-31 23:59:59.9999");Du.isDateTime=function(e,t){return Du.dateTime2ms(e,t)!==Jd};function e2(e,t){return String(e+Math.pow(10,t)).substr(1)}var Xk=90*Qv,_ee=3*hA,bee=5*jy;Du.ms2DateTime=function(e,t,r){if(typeof e!="number"||!(e>=Zk&&e<=jk))return Jd;t||(t=0);var i=Math.floor(Ky(e+.05,1)*10),n=Math.round(e-i/10),a,o,s,l,u,f;if(Dg(r)){var c=Math.floor(n/Qv)+vA,h=Math.floor(Ky(e,Qv));try{a=Rg.getComponentMethod("calendars","getCal")(r).fromJD(c).formatDate("yyyy-mm-dd")}catch(v){a=mee("G%Y-%m-%d")(new Date(n))}if(a.charAt(0)==="-")for(;a.length<11;)a="-0"+a.substr(1);else for(;a.length<10;)a="0"+a;o=t<Xk?Math.floor(h/hA):0,s=t<Xk?Math.floor(h%hA/jy):0,l=t<_ee?Math.floor(h%jy/t2):0,u=t<bee?h%t2*10+i:0}else f=new Date(n),a=mee("%Y-%m-%d")(f),o=t<Xk?f.getUTCHours():0,s=t<Xk?f.getUTCMinutes():0,l=t<_ee?f.getUTCSeconds():0,u=t<bee?f.getUTCMilliseconds()*10+i:0;return Mee(a,o,s,l,u)};Du.ms2DateTimeLocal=function(e){if(!(e>=Zk+Qv&&e<=jk-Qv))return Jd;var t=Math.floor(Ky(e+.05,1)*10),r=new Date(Math.round(e-t/10)),i=Bet("%Y-%m-%d")(r),n=r.getHours(),a=r.getMinutes(),o=r.getSeconds(),s=r.getUTCMilliseconds()*10+t;return Mee(i,n,a,o,s)};function Mee(e,t,r,i,n){if((t||r||i||n)&&(e+=" "+e2(t,2)+":"+e2(r,2),(i||n)&&(e+=":"+e2(i,2),n))){for(var a=4;n%10===0;)a-=1,n/=10;e+="."+e2(n,a)}return e}Du.cleanDate=function(e,t,r){if(e===Jd)return t;if(Du.isJSDate(e)||typeof e=="number"&&isFinite(e)){if(Dg(r))return Eq.error("JS Dates and milliseconds are incompatible with world calendars",e),t;if(e=Du.ms2DateTimeLocal(+e),!e&&t!==void 0)return t}else if(!Du.isDateTime(e,r))return Eq.error("unrecognized date",e),t;return e};var Het=/%\d?f/g,Get=/%h/g,Yet={1:"1",2:"1",3:"2",4:"2"};function wee(e,t,r,i){e=e.replace(Het,function(a){var o=Math.min(+a.charAt(1)||6,6),s=(t/1e3%1+2).toFixed(o).substr(2).replace(/0+$/,"")||"0";return s});var n=new Date(Math.floor(t+.05));if(e=e.replace(Get,function(){return Yet[r("%q")(n)]}),Dg(i))try{e=Rg.getComponentMethod("calendars","worldCalFmt")(e,t,i)}catch(a){return"Invalid"}return r(e)(n)}var Wet=[59,59.9,59.99,59.999,59.9999];function Xet(e,t){var r=Ky(e+.05,Qv),i=e2(Math.floor(r/hA),2)+":"+e2(Ky(Math.floor(r/jy),60),2);if(t!=="M"){Aee(t)||(t=0);var n=Math.min(Ky(e/t2,60),Wet[t]),a=(100+n).toFixed(t).substr(1);t>0&&(a=a.replace(/0+$/,"").replace(/[\.]$/,"")),i+=":"+a}return i}Du.formatDate=function(e,t,r,i,n,a){if(n=Dg(n)&&n,!t)if(r==="y")t=a.year;else if(r==="m")t=a.month;else if(r==="d")t=a.dayMonth+`
`+a.year;else return Xet(e,r)+`
`+wee(a.dayMonthYear,e,i,n);return wee(t,e,i,n)};var Tee=3*Qv;Du.incrementMonth=function(e,t,r){r=Dg(r)&&r;var i=Ky(e,Qv);if(e=Math.round(e-i),r)try{var n=Math.round(e/Qv)+vA,a=Rg.getComponentMethod("calendars","getCal")(r),o=a.fromJD(n);return t%12?a.add(o,t,"m"):a.add(o,t/12,"y"),(o.toJD()-vA)*Qv+i}catch(l){Eq.error("invalid ms "+e+" in calendar "+r)}var s=new Date(e+Tee);return s.setUTCMonth(s.getUTCMonth()+t)+i-Tee};Du.findExactDates=function(e,t){for(var r=0,i=0,n=0,a=0,o,s,l=Dg(t)&&Rg.getComponentMethod("calendars","getCal")(t),u=0;u<e.length;u++){if(s=e[u],!Aee(s)){a++;continue}if(!(s%Qv))if(l)try{o=l.fromJD(s/Qv+vA),o.day()===1?o.month()===1?r++:i++:n++}catch(c){}else o=new Date(s),o.getUTCDate()===1?o.getUTCMonth()===0?r++:i++:n++}i+=r,n+=i;var f=e.length-a;return{exactYears:r/f,exactMonths:i/f,exactDays:n/f}}});var dA=ne((aer,Eee)=>{"use strict";Eee.exports=function(t){return t}});var Kk=ne(Ig=>{"use strict";var Zet=la(),jet=Wy(),Ket=dA(),Jet=$a().BADNUM,kq=1e-9;Ig.findBin=function(e,t,r){if(Zet(t.start))return r?Math.ceil((e-t.start)/t.size-kq)-1:Math.floor((e-t.start)/t.size+kq);var i=0,n=t.length,a=0,o=n>1?(t[n-1]-t[0])/(n-1):1,s,l;for(o>=0?l=r?Qet:$et:l=r?ttt:ett,e+=o*kq*(r?-1:1)*(o>=0?1:-1);i<n&&a++<100;)s=Math.floor((i+n)/2),l(t[s],e)?i=s+1:n=s;return a>90&&jet.log("Long binary search..."),i-1};function Qet(e,t){return e<t}function $et(e,t){return e<=t}function ett(e,t){return e>t}function ttt(e,t){return e>=t}Ig.sorterAsc=function(e,t){return e-t};Ig.sorterDes=function(e,t){return t-e};Ig.distinctVals=function(e){var t=e.slice();t.sort(Ig.sorterAsc);var r;for(r=t.length-1;r>-1&&t[r]===Jet;r--);for(var i=t[r]-t[0]||1,n=i/(r||1)/1e4,a=[],o,s=0;s<=r;s++){var l=t[s],u=l-o;o===void 0?(a.push(l),o=l):u>n&&(i=Math.min(i,u),a.push(l),o=l)}return{vals:a,minDiff:i}};Ig.roundUp=function(e,t,r){for(var i=0,n=t.length-1,a,o=0,s=r?0:1,l=r?1:0,u=r?Math.ceil:Math.floor;i<n&&o++<100;)a=u((i+n)/2),t[a]<=e?i=a+s:n=a-l;return t[i]};Ig.sort=function(e,t){for(var r=0,i=0,n=1;n<e.length;n++){var a=t(e[n],e[n-1]);if(a<0?r=1:a>0&&(i=1),r&&i)return e.sort(t)}return i?e:e.reverse()};Ig.findIndexOfMin=function(e,t){t=t||Ket;for(var r=1/0,i,n=0;n<e.length;n++){var a=t(e[n]);a<r&&(r=a,i=n)}return i}});var rx=ne((ser,kee)=>{"use strict";kee.exports=function(t){return Object.keys(t).sort()}});var Cee=ne(jf=>{"use strict";var pA=la(),rtt=uh().isArrayOrTypedArray;jf.aggNums=function(e,t,r,i){var n,a;if((!i||i>r.length)&&(i=r.length),pA(t)||(t=!1),rtt(r[0])){for(a=new Array(i),n=0;n<i;n++)a[n]=jf.aggNums(e,t,r[n]);r=a}for(n=0;n<i;n++)pA(t)?pA(r[n])&&(t=e(+t,+r[n])):t=r[n];return t};jf.len=function(e){return jf.aggNums(function(t){return t+1},0,e)};jf.mean=function(e,t){return t||(t=jf.len(e)),jf.aggNums(function(r,i){return r+i},0,e)/t};jf.midRange=function(e){if(!(e===void 0||e.length===0))return(jf.aggNums(Math.max,null,e)+jf.aggNums(Math.min,null,e))/2};jf.variance=function(e,t,r){return t||(t=jf.len(e)),pA(r)||(r=jf.mean(e,t)),jf.aggNums(function(i,n){return i+Math.pow(n-r,2)},0,e)/t};jf.stdev=function(e,t,r){return Math.sqrt(jf.variance(e,t,r))};jf.median=function(e){var t=e.slice().sort();return jf.interp(t,.5)};jf.interp=function(e,t){if(!pA(t))throw"n should be a finite number";if(t=t*e.length-.5,t<0)return e[0];if(t>e.length-1)return e[e.length-1];var r=t%1;return r*e[Math.ceil(t)]+(1-r)*e[Math.floor(t)]}});var Iee=ne((uer,Dee)=>{"use strict";var Lee=Zb(),Cq=Lee.mod,ntt=Lee.modHalf,gA=Math.PI,Jy=2*gA;function itt(e){return e/180*gA}function att(e){return e/gA*180}function Lq(e){return Math.abs(e[1]-e[0])>Jy-1e-14}function Pee(e,t){return ntt(t-e,Jy)}function ott(e,t){return Math.abs(Pee(e,t))}function Ree(e,t){if(Lq(t))return!0;var r,i;t[0]<t[1]?(r=t[0],i=t[1]):(r=t[1],i=t[0]),r=Cq(r,Jy),i=Cq(i,Jy),r>i&&(i+=Jy);var n=Cq(e,Jy),a=n+Jy;return n>=r&&n<=i||a>=r&&a<=i}function stt(e,t,r,i){if(!Ree(t,i))return!1;var n,a;return r[0]<r[1]?(n=r[0],a=r[1]):(n=r[1],a=r[0]),e>=n&&e<=a}function Pq(e,t,r,i,n,a,o){n=n||0,a=a||0;var s=Lq([r,i]),l,u,f,c,h;s?(l=0,u=gA,f=Jy):r<i?(l=r,f=i):(l=i,f=r),e<t?(c=e,h=t):(c=t,h=e);function v(p,M){return[p*Math.cos(M)+n,a-p*Math.sin(M)]}var d=Math.abs(f-l)<=gA?0:1;function _(p,M,b){return"A"+[p,p]+" "+[0,d,b]+" "+v(p,M)}var T;return s?c===null?T="M"+v(h,l)+_(h,u,0)+_(h,f,0)+"Z":T="M"+v(c,l)+_(c,u,0)+_(c,f,0)+"ZM"+v(h,l)+_(h,u,1)+_(h,f,1)+"Z":c===null?(T="M"+v(h,l)+_(h,f,0),o&&(T+="L0,0Z")):T="M"+v(c,l)+"L"+v(h,l)+_(h,f,0)+"L"+v(c,f)+_(c,l,1)+"Z",T}function ltt(e,t,r,i,n){return Pq(null,e,t,r,i,n,0)}function utt(e,t,r,i,n){return Pq(null,e,t,r,i,n,1)}function ftt(e,t,r,i,n,a){return Pq(e,t,r,i,n,a,1)}Dee.exports={deg2rad:itt,rad2deg:att,angleDelta:Pee,angleDist:ott,isFullCircle:Lq,isAngleInsideSector:Ree,isPtInsideSector:stt,pathArc:ltt,pathSector:utt,pathAnnulus:ftt}});var Fee=ne(nx=>{"use strict";nx.isLeftAnchor=function(t){return t.xanchor==="left"||t.xanchor==="auto"&&t.x<=1/3};nx.isCenterAnchor=function(t){return t.xanchor==="center"||t.xanchor==="auto"&&t.x>1/3&&t.x<2/3};nx.isRightAnchor=function(t){return t.xanchor==="right"||t.xanchor==="auto"&&t.x>=2/3};nx.isTopAnchor=function(t){return t.yanchor==="top"||t.yanchor==="auto"&&t.y>=2/3};nx.isMiddleAnchor=function(t){return t.yanchor==="middle"||t.yanchor==="auto"&&t.y>1/3&&t.y<2/3};nx.isBottomAnchor=function(t){return t.yanchor==="bottom"||t.yanchor==="auto"&&t.y<=1/3}});var Oee=ne(ix=>{"use strict";var Rq=Zb().mod;ix.segmentsIntersect=zee;function zee(e,t,r,i,n,a,o,s){var l=r-e,u=n-e,f=o-n,c=i-t,h=a-t,v=s-a,d=l*v-f*c;if(d===0)return null;var _=(u*v-f*h)/d,T=(u*c-l*h)/d;return T<0||T>1||_<0||_>1?null:{x:e+l*_,y:t+c*_}}ix.segmentDistance=function(t,r,i,n,a,o,s,l){if(zee(t,r,i,n,a,o,s,l))return 0;var u=i-t,f=n-r,c=s-a,h=l-o,v=u*u+f*f,d=c*c+h*h,_=Math.min(Jk(u,f,v,a-t,o-r),Jk(u,f,v,s-t,l-r),Jk(c,h,d,t-a,r-o),Jk(c,h,d,i-a,n-o));return Math.sqrt(_)};function Jk(e,t,r,i,n){var a=i*e+n*t;if(a<0)return i*i+n*n;if(a>r){var o=i-e,s=n-t;return o*o+s*s}else{var l=i*t-n*e;return l*l/r}}var Qk,Dq,qee;ix.getTextLocation=function(t,r,i,n){if((t!==Dq||n!==qee)&&(Qk={},Dq=t,qee=n),Qk[i])return Qk[i];var a=t.getPointAtLength(Rq(i-n/2,r)),o=t.getPointAtLength(Rq(i+n/2,r)),s=Math.atan((o.y-a.y)/(o.x-a.x)),l=t.getPointAtLength(Rq(i,r)),u=(l.x*4+a.x+o.x)/6,f=(l.y*4+a.y+o.y)/6,c={x:u,y:f,theta:s};return Qk[i]=c,c};ix.clearLocationCache=function(){Dq=null};ix.getVisibleSegment=function(t,r,i){var n=r.left,a=r.right,o=r.top,s=r.bottom,l=0,u=t.getTotalLength(),f=u,c,h;function v(_){var T=t.getPointAtLength(_);_===0?c=T:_===u&&(h=T);var p=T.x<n?n-T.x:T.x>a?T.x-a:0,M=T.y<o?o-T.y:T.y>s?T.y-s:0;return Math.sqrt(p*p+M*M)}for(var d=v(l);d;){if(l+=d+i,l>f)return;d=v(l)}for(d=v(f);d;){if(f-=d+i,l>f)return;d=v(f)}return{min:l,max:f,len:f-l,total:u,isClosed:l===0&&f===u&&Math.abs(c.x-h.x)<.1&&Math.abs(c.y-h.y)<.1}};ix.findPointOnPath=function(t,r,i,n){n=n||{};for(var a=n.pathLength||t.getTotalLength(),o=n.tolerance||.001,s=n.iterationLimit||30,l=t.getPointAtLength(0)[i]>t.getPointAtLength(a)[i]?-1:1,u=0,f=0,c=a,h,v,d;u<s;){if(h=(f+c)/2,v=t.getPointAtLength(h),d=v[i]-r,Math.abs(d)<o)return v;l*d>0?c=h:f=h,u++}return v}});var $k=ne(yA=>{"use strict";var Fg={};yA.throttle=function(t,r,i){var n=Fg[t],a=Date.now();if(!n){for(var o in Fg)Fg[o].ts<a-6e4&&delete Fg[o];n=Fg[t]={ts:0,timer:null}}Bee(n);function s(){i(),n.ts=Date.now(),n.onDone&&(n.onDone(),n.onDone=null)}if(a>n.ts+r){s();return}n.timer=setTimeout(function(){s(),n.timer=null},r)};yA.done=function(e){var t=Fg[e];return!t||!t.timer?Promise.resolve():new Promise(function(r){var i=t.onDone;t.onDone=function(){i&&i(),r(),t.onDone=null}})};yA.clear=function(e){if(e)Bee(Fg[e]),delete Fg[e];else for(var t in Fg)yA.clear(t)};function Bee(e){e&&e.timer!==null&&(clearTimeout(e.timer),e.timer=null)}});var Uee=ne((ver,Nee)=>{"use strict";Nee.exports=function(t){t._responsiveChartHandler&&(window.removeEventListener("resize",t._responsiveChartHandler),delete t._responsiveChartHandler)}});var Vee=ne((der,eC)=>{"use strict";eC.exports=Iq;eC.exports.isMobile=Iq;eC.exports.default=Iq;var ctt=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,htt=/CrOS/,vtt=/android|ipad|playbook|silk/i;function Iq(e){e||(e={});let t=e.ua;if(!t&&typeof navigator!="undefined"&&(t=navigator.userAgent),t&&t.headers&&typeof t.headers["user-agent"]=="string"&&(t=t.headers["user-agent"]),typeof t!="string")return!1;let r=ctt.test(t)&&!htt.test(t)||!!e.tablet&&vtt.test(t);return!r&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&t.indexOf("Macintosh")!==-1&&t.indexOf("Safari")!==-1&&(r=!0),r}});var Gee=ne((per,Hee)=>{"use strict";var dtt=la(),ptt=Vee();Hee.exports=function(t){var r;if(t&&t.hasOwnProperty("userAgent")?r=t.userAgent:r=gtt(),typeof r!="string")return!0;var i=ptt({ua:{headers:{"user-agent":r}},tablet:!0,featureDetect:!1});if(!i)for(var n=r.split(" "),a=1;a<n.length;a++){var o=n[a];if(o.indexOf("Safari")!==-1)for(var s=a-1;s>-1;s--){var l=n[s];if(l.substr(0,8)==="Version/"){var u=l.substr(8).split(".")[0];if(dtt(u)&&(u=+u),u>=13)return!0}}}return i};function gtt(){var e;return typeof navigator!="undefined"&&(e=navigator.userAgent),e&&e.headers&&typeof e.headers["user-agent"]=="string"&&(e=e.headers["user-agent"]),e}});var Wee=ne((ger,Yee)=>{"use strict";var ytt=Ai();Yee.exports=function(t,r,i){var n=t.selectAll("g."+i.replace(/\s/g,".")).data(r,function(o){return o[0].trace.uid});n.exit().remove(),n.enter().append("g").attr("class",i),n.order();var a=t.classed("rangeplot")?"nodeRangePlot3":"node3";return n.each(function(o){o[0][a]=ytt.select(this)}),n}});var Zee=ne((yer,Xee)=>{"use strict";var mtt=wi();Xee.exports=function(t,r){for(var i=t._context.locale,n=0;n<2;n++){for(var a=t._context.locales,o=0;o<2;o++){var s=(a[i]||{}).dictionary;if(s){var l=s[r];if(l)return l}a=mtt.localeRegistry}var u=i.split("-")[0];if(u===i)break;i=u}return r}});var Fq=ne((mer,jee)=>{"use strict";jee.exports=function(t){for(var r={},i=[],n=0,a=0;a<t.length;a++){var o=t[a];r[o]!==1&&(r[o]=1,i[n++]=o)}return i}});var Jee=ne((xer,Kee)=>{"use strict";Kee.exports=function(t){for(var r=btt(t)?_tt:xtt,i=[],n=0;n<t.length;n++){var a=t[n];r(a)&&i.push(a)}return i};function xtt(e){return e.visible===!0}function _tt(e){var t=e[0].trace;return t.visible===!0&&t._length!==0}function btt(e){return Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace}});var $ee=ne((_er,Qee)=>{"use strict";Qee.exports=function(t,r){if(!r)return t;var i=1/Math.abs(r),n=i>1?(i*t+i*r)/i:t+r,a=String(n).length;if(a>16){var o=String(r).length,s=String(t).length;if(a>=s+o){var l=parseFloat(n).toPrecision(12);l.indexOf("e+")===-1&&(n=+l)}}return n}});var tte=ne((ber,ete)=>{"use strict";var wtt=la(),Ttt=$a().BADNUM,Att=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;ete.exports=function(t){return typeof t=="string"&&(t=t.replace(Att,"")),wtt(t)?Number(t):Ttt}});var Wt=ne((wer,dte)=>{"use strict";var mA=Ai(),Mtt=Wb().utcFormat,Stt=aq().format,ste=la(),lte=$a(),ute=lte.FP_SAFE,Ett=-ute,rte=lte.BADNUM,Mr=dte.exports={};Mr.adjustFormat=function(t){return!t||/^\d[.]\df/.test(t)||/[.]\d%/.test(t)?t:t==="0.f"?"~f":/^\d%/.test(t)?"~%":/^\ds/.test(t)?"~s":!/^[~,.0$]/.test(t)&&/[&fps]/.test(t)?"~"+t:t};var nte={};Mr.warnBadFormat=function(e){var t=String(e);nte[t]||(nte[t]=1,Mr.warn('encountered bad format: "'+t+'"'))};Mr.noFormat=function(e){return String(e)};Mr.numberFormat=function(e){var t;try{t=Stt(Mr.adjustFormat(e))}catch(r){return Mr.warnBadFormat(e),Mr.noFormat}return t};Mr.nestedProperty=nA();Mr.keyedContainer=tQ();Mr.relativeAttr=nQ();Mr.isPlainObject=Lg();Mr.toLogRange=kk();Mr.relinkPrivateKeys=sQ();var Qy=uh();Mr.isArrayBuffer=Qy.isArrayBuffer;Mr.isTypedArray=Qy.isTypedArray;Mr.isArrayOrTypedArray=Qy.isArrayOrTypedArray;Mr.isArray1D=Qy.isArray1D;Mr.ensureArray=Qy.ensureArray;Mr.concat=Qy.concat;Mr.maxRowLength=Qy.maxRowLength;Mr.minRowLength=Qy.minRowLength;var fte=Zb();Mr.mod=fte.mod;Mr.modHalf=fte.modHalf;var $y=MQ();Mr.valObjectMeta=$y.valObjectMeta;Mr.coerce=$y.coerce;Mr.coerce2=$y.coerce2;Mr.coerceFont=$y.coerceFont;Mr.coercePattern=$y.coercePattern;Mr.coerceHoverinfo=$y.coerceHoverinfo;Mr.coerceSelectionMarkerOpacity=$y.coerceSelectionMarkerOpacity;Mr.validate=$y.validate;var Ed=See();Mr.dateTime2ms=Ed.dateTime2ms;Mr.isDateTime=Ed.isDateTime;Mr.ms2DateTime=Ed.ms2DateTime;Mr.ms2DateTimeLocal=Ed.ms2DateTimeLocal;Mr.cleanDate=Ed.cleanDate;Mr.isJSDate=Ed.isJSDate;Mr.formatDate=Ed.formatDate;Mr.incrementMonth=Ed.incrementMonth;Mr.dateTick0=Ed.dateTick0;Mr.dfltRange=Ed.dfltRange;Mr.findExactDates=Ed.findExactDates;Mr.MIN_MS=Ed.MIN_MS;Mr.MAX_MS=Ed.MAX_MS;var ax=Kk();Mr.findBin=ax.findBin;Mr.sorterAsc=ax.sorterAsc;Mr.sorterDes=ax.sorterDes;Mr.distinctVals=ax.distinctVals;Mr.roundUp=ax.roundUp;Mr.sort=ax.sort;Mr.findIndexOfMin=ax.findIndexOfMin;Mr.sortObjectKeys=rx();var em=Cee();Mr.aggNums=em.aggNums;Mr.len=em.len;Mr.mean=em.mean;Mr.median=em.median;Mr.midRange=em.midRange;Mr.variance=em.variance;Mr.stdev=em.stdev;Mr.interp=em.interp;var Qp=Ok();Mr.init2dArray=Qp.init2dArray;Mr.transposeRagged=Qp.transposeRagged;Mr.dot=Qp.dot;Mr.translationMatrix=Qp.translationMatrix;Mr.rotationMatrix=Qp.rotationMatrix;Mr.rotationXYMatrix=Qp.rotationXYMatrix;Mr.apply3DTransform=Qp.apply3DTransform;Mr.apply2DTransform=Qp.apply2DTransform;Mr.apply2DTransform2=Qp.apply2DTransform2;Mr.convertCssMatrix=Qp.convertCssMatrix;Mr.inverseTransformMatrix=Qp.inverseTransformMatrix;var I0=Iee();Mr.deg2rad=I0.deg2rad;Mr.rad2deg=I0.rad2deg;Mr.angleDelta=I0.angleDelta;Mr.angleDist=I0.angleDist;Mr.isFullCircle=I0.isFullCircle;Mr.isAngleInsideSector=I0.isAngleInsideSector;Mr.isPtInsideSector=I0.isPtInsideSector;Mr.pathArc=I0.pathArc;Mr.pathSector=I0.pathSector;Mr.pathAnnulus=I0.pathAnnulus;var i2=Fee();Mr.isLeftAnchor=i2.isLeftAnchor;Mr.isCenterAnchor=i2.isCenterAnchor;Mr.isRightAnchor=i2.isRightAnchor;Mr.isTopAnchor=i2.isTopAnchor;Mr.isMiddleAnchor=i2.isMiddleAnchor;Mr.isBottomAnchor=i2.isBottomAnchor;var a2=Oee();Mr.segmentsIntersect=a2.segmentsIntersect;Mr.segmentDistance=a2.segmentDistance;Mr.getTextLocation=a2.getTextLocation;Mr.clearLocationCache=a2.clearLocationCache;Mr.getVisibleSegment=a2.getVisibleSegment;Mr.findPointOnPath=a2.findPointOnPath;var nC=oa();Mr.extendFlat=nC.extendFlat;Mr.extendDeep=nC.extendDeep;Mr.extendDeepAll=nC.extendDeepAll;Mr.extendDeepNoArrays=nC.extendDeepNoArrays;var qq=Wy();Mr.log=qq.log;Mr.warn=qq.warn;Mr.error=qq.error;var ktt=Kb();Mr.counterRegex=ktt.counter;var zq=$k();Mr.throttle=zq.throttle;Mr.throttleDone=zq.done;Mr.clearThrottle=zq.clear;var F0=fA();Mr.getGraphDiv=F0.getGraphDiv;Mr.isPlotDiv=F0.isPlotDiv;Mr.removeElement=F0.removeElement;Mr.addStyleRule=F0.addStyleRule;Mr.addRelatedStyleRule=F0.addRelatedStyleRule;Mr.deleteRelatedStyleRule=F0.deleteRelatedStyleRule;Mr.getFullTransformMatrix=F0.getFullTransformMatrix;Mr.getElementTransformMatrix=F0.getElementTransformMatrix;Mr.getElementAndAncestors=F0.getElementAndAncestors;Mr.equalDomRects=F0.equalDomRects;Mr.clearResponsive=Uee();Mr.preserveDrawingBuffer=Gee();Mr.makeTraceGroups=Wee();Mr._=Zee();Mr.notifier=gq();Mr.filterUnique=Fq();Mr.filterVisible=Jee();Mr.pushUnique=xq();Mr.increment=$ee();Mr.cleanNumber=tte();Mr.ensureNumber=function(t){return ste(t)?(t=Number(t),t>ute||t<Ett?rte:t):rte};Mr.isIndex=function(e,t){return t!==void 0&&e>=t?!1:ste(e)&&e>=0&&e%1===0};Mr.noop=zk();Mr.identity=dA();Mr.repeat=function(e,t){for(var r=new Array(t),i=0;i<t;i++)r[i]=e;return r};Mr.swapAttrs=function(e,t,r,i){r||(r="x"),i||(i="y");for(var n=0;n<t.length;n++){var a=t[n],o=Mr.nestedProperty(e,a.replace("?",r)),s=Mr.nestedProperty(e,a.replace("?",i)),l=o.get();o.set(s.get()),s.set(l)}};Mr.raiseToTop=function(t){t.parentNode.appendChild(t)};Mr.cancelTransition=function(e){return e.transition().duration(0)};Mr.constrain=function(e,t,r){return t>r?Math.max(r,Math.min(t,e)):Math.max(t,Math.min(r,e))};Mr.bBoxIntersect=function(e,t,r){return r=r||0,e.left<=t.right+r&&t.left<=e.right+r&&e.top<=t.bottom+r&&t.top<=e.bottom+r};Mr.simpleMap=function(e,t,r,i,n){for(var a=e.length,o=new Array(a),s=0;s<a;s++)o[s]=t(e[s],r,i,n);return o};Mr.randstr=function e(t,r,i,n){if(i||(i=16),r===void 0&&(r=24),r<=0)return"0";var a=Math.log(Math.pow(2,r))/Math.log(i),o="",s,l,u;for(s=2;a===1/0;s*=2)a=Math.log(Math.pow(2,r/s))/Math.log(i)*s;var f=a-Math.floor(a);for(s=0;s<Math.floor(a);s++)u=Math.floor(Math.random()*i).toString(i),o=u+o;f&&(l=Math.pow(i,f),u=Math.floor(Math.random()*l).toString(i),o=u+o);var c=parseInt(o,i);return t&&t[o]||c!==1/0&&c>=Math.pow(2,r)?n>10?(Mr.warn("randstr failed uniqueness"),o):e(t,r,i,(n||0)+1):o};Mr.OptionControl=function(e,t){e||(e={}),t||(t="opt");var r={};return r.optionList=[],r._newoption=function(i){i[t]=e,r[i.name]=i,r.optionList.push(i)},r["_"+t]=e,r};Mr.smooth=function(e,t){if(t=Math.round(t)||0,t<2)return e;var r=e.length,i=2*r,n=2*t-1,a=new Array(n),o=new Array(r),s,l,u,f;for(s=0;s<n;s++)a[s]=(1-Math.cos(Math.PI*(s+1)/t))/(2*t);for(s=0;s<r;s++){for(f=0,l=0;l<n;l++)u=s+l+1-t,u<-r?u-=i*Math.round(u/i):u>=i&&(u-=i*Math.floor(u/i)),u<0?u=-1-u:u>=r&&(u=i-1-u),f+=e[u]*a[l];o[s]=f}return o};Mr.syncOrAsync=function(e,t,r){var i,n;function a(){return Mr.syncOrAsync(e,t,r)}for(;e.length;)if(n=e.splice(0,1)[0],i=n(t),i&&i.then)return i.then(a);return r&&r(t)};Mr.stripTrailingSlash=function(e){return e.substr(-1)==="/"?e.substr(0,e.length-1):e};Mr.noneOrAll=function(e,t,r){if(e){var i=!1,n=!0,a,o;for(a=0;a<r.length;a++)o=e[r[a]],o!=null?i=!0:n=!1;if(i&&!n)for(a=0;a<r.length;a++)e[r[a]]=t[r[a]]}};Mr.mergeArray=function(e,t,r,i){var n=typeof i=="function";if(Mr.isArrayOrTypedArray(e))for(var a=Math.min(e.length,t.length),o=0;o<a;o++){var s=e[o];t[o][r]=n?i(s):s}};Mr.mergeArrayCastPositive=function(e,t,r){return Mr.mergeArray(e,t,r,function(i){var n=+i;return isFinite(n)&&n>0?n:0})};Mr.fillArray=function(e,t,r,i){if(i=i||Mr.identity,Mr.isArrayOrTypedArray(e))for(var n=0;n<t.length;n++)t[n][r]=i(e[n])};Mr.castOption=function(e,t,r,i){i=i||Mr.identity;var n=Mr.nestedProperty(e,r).get();return Mr.isArrayOrTypedArray(n)?Array.isArray(t)&&Mr.isArrayOrTypedArray(n[t[0]])?i(n[t[0]][t[1]]):i(n[t]):n};Mr.extractOption=function(e,t,r,i){if(r in e)return e[r];var n=Mr.nestedProperty(t,i).get();if(!Array.isArray(n))return n};function cte(e){var t={};for(var r in e)for(var i=e[r],n=0;n<i.length;n++)t[i[n]]=+r;return t}Mr.tagSelected=function(e,t,r){var i=t.selectedpoints,n=t._indexToPoints,a;n&&(a=cte(n));function o(c){return c!==void 0&&c<e.length}for(var s=0;s<i.length;s++){var l=i[s];if(Mr.isIndex(l)||Mr.isArrayOrTypedArray(l)&&Mr.isIndex(l[0])&&Mr.isIndex(l[1])){var u=a?a[l]:l,f=r?r[u]:u;o(f)&&(e[f].selected=1)}}};Mr.selIndices2selPoints=function(e){var t=e.selectedpoints,r=e._indexToPoints;if(r){for(var i=cte(r),n=[],a=0;a<t.length;a++){var o=t[a];if(Mr.isIndex(o)){var s=i[o];Mr.isIndex(s)&&n.push(s)}}return n}else return t};Mr.getTargetArray=function(e,t){var r=t.target;if(typeof r=="string"&&r){var i=Mr.nestedProperty(e,r).get();return Mr.isArrayOrTypedArray(i)?i:!1}else if(Mr.isArrayOrTypedArray(r))return r;return!1};function hte(e,t,r){var i={};typeof t!="object"&&(t={});var n=r==="pieLike"?-1:3,a=Object.keys(e),o,s,l;for(o=0;o<a.length;o++)s=a[o],l=e[s],!(s.charAt(0)==="_"||typeof l=="function")&&(s==="module"?i[s]=l:Array.isArray(l)?s==="colorscale"||n===-1?i[s]=l.slice():i[s]=l.slice(0,n):Mr.isTypedArray(l)?n===-1?i[s]=l.subarray():i[s]=l.subarray(0,n):l&&typeof l=="object"?i[s]=hte(e[s],t[s],r):i[s]=l);for(a=Object.keys(t),o=0;o<a.length;o++)s=a[o],l=t[s],(typeof l!="object"||!(s in i)||typeof i[s]!="object")&&(i[s]=l);return i}Mr.minExtend=hte;Mr.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)};Mr.containsAny=function(e,t){for(var r=0;r<t.length;r++)if(e.indexOf(t[r])!==-1)return!0;return!1};Mr.isIE=function(){return typeof window.navigator.msSaveBlob!="undefined"};var Ctt=/Version\/[\d\.]+.*Safari/;Mr.isSafari=function(){return Ctt.test(window.navigator.userAgent)};var Ltt=/iPad|iPhone|iPod/;Mr.isIOS=function(){return Ltt.test(window.navigator.userAgent)};var Ptt=/Firefox\/(\d+)\.\d+/;Mr.getFirefoxVersion=function(){var e=Ptt.exec(window.navigator.userAgent);if(e&&e.length===2){var t=parseInt(e[1]);if(!isNaN(t))return t}return null};Mr.isD3Selection=function(e){return e instanceof mA.selection};Mr.ensureSingle=function(e,t,r,i){var n=e.select(t+(r?"."+r:""));if(n.size())return n;var a=e.append(t);return r&&a.classed(r,!0),i&&a.call(i),a};Mr.ensureSingleById=function(e,t,r,i){var n=e.select(t+"#"+r);if(n.size())return n;var a=e.append(t).attr("id",r);return i&&a.call(i),a};Mr.objectFromPath=function(e,t){for(var r=e.split("."),i,n=i={},a=0;a<r.length;a++){var o=r[a],s=null,l=r[a].match(/(.*)\[([0-9]+)\]/);l?(o=l[1],s=l[2],i=i[o]=[],a===r.length-1?i[s]=t:i[s]={},i=i[s]):(a===r.length-1?i[o]=t:i[o]={},i=i[o])}return n};var Rtt=/^([^\[\.]+)\.(.+)?/,Dtt=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function tC(e){return e.slice(0,2)==="__"}Mr.expandObjectPaths=function(e){var t,r,i,n,a,o,s;if(typeof e=="object"&&!Array.isArray(e)){for(r in e)if(e.hasOwnProperty(r))if(t=r.match(Rtt)){if(n=e[r],i=t[1],tC(i))continue;delete e[r],e[i]=Mr.extendDeepNoArrays(e[i]||{},Mr.objectFromPath(r,Mr.expandObjectPaths(n))[i])}else if(t=r.match(Dtt)){if(n=e[r],i=t[1],tC(i))continue;if(a=parseInt(t[2]),delete e[r],e[i]=e[i]||[],t[3]===".")s=t[4],o=e[i][a]=e[i][a]||{},Mr.extendDeepNoArrays(o,Mr.objectFromPath(s,Mr.expandObjectPaths(n)));else{if(tC(i))continue;e[i][a]=Mr.expandObjectPaths(n)}}else{if(tC(r))continue;e[r]=Mr.expandObjectPaths(e[r])}}return e};Mr.numSeparate=function(e,t,r){if(r||(r=!1),typeof t!="string"||t.length===0)throw new Error("Separator string required for formatting!");typeof e=="number"&&(e=String(e));var i=/(\d+)(\d{3})/,n=t.charAt(0),a=t.charAt(1),o=e.split("."),s=o[0],l=o.length>1?n+o[1]:"";if(a&&(o.length>1||s.length>4||r))for(;i.test(s);)s=s.replace(i,"$1"+a+"$2");return s+l};Mr.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var vte=/^\w*$/;Mr.templateString=function(e,t){var r={};return e.replace(Mr.TEMPLATE_STRING_REGEX,function(i,n){var a;return vte.test(n)?a=t[n]:(r[n]=r[n]||Mr.nestedProperty(t,n).get,a=r[n]()),Mr.isValidTextValue(a)?a:""})};var Itt={max:10,count:0,name:"hovertemplate"};Mr.hovertemplateString=function(){return Oq.apply(Itt,arguments)};var Ftt={max:10,count:0,name:"texttemplate"};Mr.texttemplateString=function(){return Oq.apply(Ftt,arguments)};var qtt=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/;function ztt(e){var t=e.match(qtt);return t?{key:t[1],op:t[2],number:Number(t[3])}:{key:e,op:null,number:null}}var Ott={max:10,count:0,name:"texttemplate",parseMultDiv:!0};Mr.texttemplateStringForShapes=function(){return Oq.apply(Ott,arguments)};var ite=/^[:|\|]/;function Oq(e,t,r){var i=this,n=arguments;t||(t={});var a={};return e.replace(Mr.TEMPLATE_STRING_REGEX,function(o,s,l){var u=s==="xother"||s==="yother",f=s==="_xother"||s==="_yother",c=s==="_xother_"||s==="_yother_",h=s==="xother_"||s==="yother_",v=u||f||h||c,d=s;(f||c)&&(d=d.substring(1)),(h||c)&&(d=d.substring(0,d.length-1));var _=null,T=null;if(i.parseMultDiv){var p=ztt(d);d=p.key,_=p.op,T=p.number}var M;if(v){if(M=t[d],M===void 0)return""}else{var b,w;for(w=3;w<n.length;w++)if(b=n[w],!!b){if(b.hasOwnProperty(d)){M=b[d];break}if(vte.test(d)||(M=Mr.nestedProperty(b,d).get(),M=a[d]||Mr.nestedProperty(b,d).get(),M&&(a[d]=M)),M!==void 0)break}}if(M!==void 0&&(_==="*"&&(M*=T),_==="/"&&(M/=T)),M===void 0&&i)return i.count<i.max&&(Mr.warn("Variable '"+d+"' in "+i.name+" could not be found!"),M=o),i.count===i.max&&Mr.warn("Too many "+i.name+" warnings - additional warnings will be suppressed"),i.count++,o;if(l){var k;if(l[0]===":"&&(k=r?r.numberFormat:Mr.numberFormat,M!==""&&(M=k(l.replace(ite,""))(M))),l[0]==="|"){k=r?r.timeFormat:Mtt;var x=Mr.dateTime2ms(M);M=Mr.formatDate(x,l.replace(ite,""),!1,k)}}else{var E=d+"Label";t.hasOwnProperty(E)&&(M=t[E])}return v&&(M="("+M+")",(f||c)&&(M=" "+M),(h||c)&&(M=M+" ")),M})}var rC=48,ate=57;Mr.subplotSort=function(e,t){for(var r=Math.min(e.length,t.length)+1,i=0,n=0,a=0;a<r;a++){var o=e.charCodeAt(a)||0,s=t.charCodeAt(a)||0,l=o>=rC&&o<=ate,u=s>=rC&&s<=ate;if(l&&(i=10*i+o-rC),u&&(n=10*n+s-rC),!l||!u){if(i!==n)return i-n;if(o!==s)return o-s}}return n-i};var n2=2e9;Mr.seedPseudoRandom=function(){n2=2e9};Mr.pseudoRandom=function(){var e=n2;return n2=(69069*n2+1)%4294967296,Math.abs(n2-e)<429496729?Mr.pseudoRandom():n2/4294967296};Mr.fillText=function(e,t,r){var i=Array.isArray(r)?function(o){r.push(o)}:function(o){r.text=o},n=Mr.extractOption(e,t,"htx","hovertext");if(Mr.isValidTextValue(n))return i(n);var a=Mr.extractOption(e,t,"tx","text");if(Mr.isValidTextValue(a))return i(a)};Mr.isValidTextValue=function(e){return e||e===0};Mr.formatPercent=function(e,t){t=t||0;for(var r=(Math.round(100*e*Math.pow(10,t))*Math.pow(.1,t)).toFixed(t)+"%",i=0;i<t;i++)r.indexOf(".")!==-1&&(r=r.replace("0%","%"),r=r.replace(".%","%"));return r};Mr.isHidden=function(e){var t=window.getComputedStyle(e).display;return!t||t==="none"};Mr.strTranslate=function(e,t){return e||t?"translate("+e+","+t+")":""};Mr.strRotate=function(e){return e?"rotate("+e+")":""};Mr.strScale=function(e){return e!==1?"scale("+e+")":""};Mr.getTextTransform=function(e){var t=e.noCenter,r=e.textX,i=e.textY,n=e.targetX,a=e.targetY,o=e.anchorX||0,s=e.anchorY||0,l=e.rotate,u=e.scale;return u?u>1&&(u=1):u=0,Mr.strTranslate(n-u*(r+o),a-u*(i+s))+Mr.strScale(u)+(l?"rotate("+l+(t?"":" "+r+" "+i)+")":"")};Mr.setTransormAndDisplay=function(e,t){e.attr("transform",Mr.getTextTransform(t)),e.style("display",t.scale?null:"none")};Mr.ensureUniformFontSize=function(e,t){var r=Mr.extendFlat({},t);return r.size=Math.max(t.size,e._fullLayout.uniformtext.minsize||0),r};Mr.join2=function(e,t,r){var i=e.length;return i>1?e.slice(0,-1).join(t)+r+e[i-1]:e.join(t)};Mr.bigFont=function(e){return Math.round(1.2*e)};var ote=Mr.getFirefoxVersion(),Btt=ote!==null&&ote<86;Mr.getPositionFromD3Event=function(){return Btt?[mA.event.layerX,mA.event.layerY]:[mA.event.offsetX,mA.event.offsetY]}});var yte=ne(()=>{"use strict";var Ntt=Wt(),pte={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(Bq in pte)gte=Bq.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),Ntt.addStyleRule(gte,pte[Bq]);var gte,Bq});var Nq=ne((Mer,mte)=>{mte.exports=!0});var Vq=ne((Ser,xte)=>{"use strict";var Utt=Nq(),Uq;typeof window.matchMedia=="function"?Uq=!window.matchMedia("(hover: none)").matches:Uq=Utt;xte.exports=Uq});var ox=ne((Eer,Hq)=>{"use strict";var o2=typeof Reflect=="object"?Reflect:null,_te=o2&&typeof o2.apply=="function"?o2.apply:function(t,r,i){return Function.prototype.apply.call(t,r,i)},iC;o2&&typeof o2.ownKeys=="function"?iC=o2.ownKeys:Object.getOwnPropertySymbols?iC=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:iC=function(t){return Object.getOwnPropertyNames(t)};function Vtt(e){console&&console.warn&&console.warn(e)}var wte=Number.isNaN||function(t){return t!==t};function xl(){xl.init.call(this)}Hq.exports=xl;Hq.exports.once=Wtt;xl.EventEmitter=xl;xl.prototype._events=void 0;xl.prototype._eventsCount=0;xl.prototype._maxListeners=void 0;var bte=10;function aC(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(xl,"defaultMaxListeners",{enumerable:!0,get:function(){return bte},set:function(e){if(typeof e!="number"||e<0||wte(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");bte=e}});xl.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};xl.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||wte(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Tte(e){return e._maxListeners===void 0?xl.defaultMaxListeners:e._maxListeners}xl.prototype.getMaxListeners=function(){return Tte(this)};xl.prototype.emit=function(t){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var n=t==="error",a=this._events;if(a!==void 0)n=n&&a.error===void 0;else if(!n)return!1;if(n){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=a[t];if(l===void 0)return!1;if(typeof l=="function")_te(l,this,r);else for(var u=l.length,f=kte(l,u),i=0;i<u;++i)_te(f[i],this,r);return!0};function Ate(e,t,r,i){var n,a,o;if(aC(r),a=e._events,a===void 0?(a=e._events=Object.create(null),e._eventsCount=0):(a.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),o=a[t]),o===void 0)o=a[t]=r,++e._eventsCount;else if(typeof o=="function"?o=a[t]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),n=Tte(e),n>0&&o.length>n&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=o.length,Vtt(s)}return e}xl.prototype.addListener=function(t,r){return Ate(this,t,r,!1)};xl.prototype.on=xl.prototype.addListener;xl.prototype.prependListener=function(t,r){return Ate(this,t,r,!0)};function Htt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Mte(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=Htt.bind(i);return n.listener=r,i.wrapFn=n,n}xl.prototype.once=function(t,r){return aC(r),this.on(t,Mte(this,t,r)),this};xl.prototype.prependOnceListener=function(t,r){return aC(r),this.prependListener(t,Mte(this,t,r)),this};xl.prototype.removeListener=function(t,r){var i,n,a,o,s;if(aC(r),n=this._events,n===void 0)return this;if(i=n[t],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||r));else if(typeof i!="function"){for(a=-1,o=i.length-1;o>=0;o--)if(i[o]===r||i[o].listener===r){s=i[o].listener,a=o;break}if(a<0)return this;a===0?i.shift():Gtt(i,a),i.length===1&&(n[t]=i[0]),n.removeListener!==void 0&&this.emit("removeListener",t,s||r)}return this};xl.prototype.off=xl.prototype.removeListener;xl.prototype.removeAllListeners=function(t){var r,i,n;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var a=Object.keys(i),o;for(n=0;n<a.length;++n)o=a[n],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(n=r.length-1;n>=0;n--)this.removeListener(t,r[n]);return this};function Ste(e,t,r){var i=e._events;if(i===void 0)return[];var n=i[t];return n===void 0?[]:typeof n=="function"?r?[n.listener||n]:[n]:r?Ytt(n):kte(n,n.length)}xl.prototype.listeners=function(t){return Ste(this,t,!0)};xl.prototype.rawListeners=function(t){return Ste(this,t,!1)};xl.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Ete.call(e,t)};xl.prototype.listenerCount=Ete;function Ete(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}xl.prototype.eventNames=function(){return this._eventsCount>0?iC(this._events):[]};function kte(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}function Gtt(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function Ytt(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function Wtt(e,t){return new Promise(function(r,i){function n(o){e.removeListener(t,a),i(o)}function a(){typeof e.removeListener=="function"&&e.removeListener("error",n),r([].slice.call(arguments))}Cte(e,t,a,{once:!0}),t!=="error"&&Xtt(e,n,{once:!0})})}function Xtt(e,t,r){typeof e.on=="function"&&Cte(e,"error",t,r)}function Cte(e,t,r,i){if(typeof e.on=="function")i.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function n(a){i.once&&e.removeEventListener(t,n),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}});var s2=ne((ker,Lte)=>{"use strict";var Gq=ox().EventEmitter,Ztt={init:function(e){if(e._ev instanceof Gq)return e;var t=new Gq,r=new Gq;return e._ev=t,e._internalEv=r,e.on=t.on.bind(t),e.once=t.once.bind(t),e.removeListener=t.removeListener.bind(t),e.removeAllListeners=t.removeAllListeners.bind(t),e._internalOn=r.on.bind(r),e._internalOnce=r.once.bind(r),e._removeInternalListener=r.removeListener.bind(r),e._removeAllInternalListeners=r.removeAllListeners.bind(r),e.emit=function(i,n){typeof jQuery!="undefined"&&jQuery(e).trigger(i,n),t.emit(i,n),r.emit(i,n)},e},triggerHandler:function(e,t,r){var i,n;typeof jQuery!="undefined"&&(i=jQuery(e).triggerHandler(t,r));var a=e._ev;if(!a)return i;var o=a._events[t];if(!o)return i;function s(u){if(u.listener){if(a.removeListener(t,u.listener),!u.fired)return u.fired=!0,u.listener.apply(a,[r])}else return u.apply(a,[r])}o=Array.isArray(o)?o:[o];var l;for(l=0;l<o.length-1;l++)s(o[l]);return n=s(o[l]),i!==void 0?i:n},purge:function(e){return delete e._ev,delete e.on,delete e.once,delete e.removeListener,delete e.removeAllListeners,delete e.emit,delete e._ev,delete e._internalEv,delete e._internalOn,delete e._internalOnce,delete e._removeInternalListener,delete e._removeAllInternalListeners,e}};Lte.exports=Ztt});var Dte=ne((Cer,Rte)=>{"use strict";var Pte=Wt(),jtt=$1().dfltConfig;function Ktt(e,t){for(var r=[],i,n=0;n<t.length;n++)i=t[n],i===e?r[n]=i:typeof i=="object"?r[n]=Array.isArray(i)?Pte.extendDeep([],i):Pte.extendDeepAll({},i):r[n]=i;return r}var qg={};qg.add=function(e,t,r,i,n){var a,o;if(e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},o=e.undoQueue.index,e.autoplay){e.undoQueue.inSequence||(e.autoplay=!1);return}!e.undoQueue.sequence||e.undoQueue.beginSequence?(a={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(o,e.undoQueue.queue.length-o,a),e.undoQueue.index+=1):a=e.undoQueue.queue[o-1],e.undoQueue.beginSequence=!1,a&&(a.undo.calls.unshift(t),a.undo.args.unshift(r),a.redo.calls.push(i),a.redo.args.push(n)),e.undoQueue.queue.length>jtt.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--)};qg.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0};qg.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1};qg.undo=function(t){var r,i;if(!(t.undoQueue===void 0||isNaN(t.undoQueue.index)||t.undoQueue.index<=0)){for(t.undoQueue.index--,r=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,i=0;i<r.undo.calls.length;i++)qg.plotDo(t,r.undo.calls[i],r.undo.args[i]);t.undoQueue.inSequence=!1,t.autoplay=!1}};qg.redo=function(t){var r,i;if(!(t.undoQueue===void 0||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length)){for(r=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,i=0;i<r.redo.calls.length;i++)qg.plotDo(t,r.redo.calls[i],r.redo.args[i]);t.undoQueue.inSequence=!1,t.autoplay=!1,t.undoQueue.index++}};qg.plotDo=function(e,t,r){e.autoplay=!0,r=Ktt(e,r),t.apply(null,r)};Rte.exports=qg});var Yq=ne((Ler,Ite)=>{"use strict";Ite.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}});var tm=ne(Ju=>{"use strict";var fh=wi(),bA=Wt(),_A=es(),Wq=tx(),Jtt=Yq(),Qtt=cA(),$tt=$1().configAttributes,Fte=Xs(),Qd=bA.extendDeepAll,l2=bA.isPlainObject,ert=bA.isArrayOrTypedArray,oC=bA.nestedProperty,trt=bA.valObjectMeta,Xq="_isSubplotObj",sC="_isLinkedToArray",rrt="_arrayAttrRegexps",zte="_deprecated",Zq=[Xq,sC,rrt,zte];Ju.IS_SUBPLOT_OBJ=Xq;Ju.IS_LINKED_TO_ARRAY=sC;Ju.DEPRECATED=zte;Ju.UNDERSCORE_ATTRS=Zq;Ju.get=function(){var e={};fh.allTypes.forEach(function(r){e[r]=irt(r)});var t={};return Object.keys(fh.transformsRegistry).forEach(function(r){t[r]=ort(r)}),{defs:{valObjects:trt,metaKeys:Zq.concat(["description","role","editType","impliedEdits"]),editType:{traces:Fte.traces,layout:Fte.layout},impliedEdits:{}},traces:e,layout:art(),transforms:t,frames:srt(),animation:sx(Qtt),config:sx($tt)}};Ju.crawl=function(e,t,r,i){var n=r||0;i=i||"",Object.keys(e).forEach(function(a){var o=e[a];if(Zq.indexOf(a)===-1){var s=(i?i+".":"")+a;t(o,a,e,n,s),!Ju.isValObject(o)&&l2(o)&&a!=="impliedEdits"&&Ju.crawl(o,t,n+1,s)}})};Ju.isValObject=function(e){return e&&e.valType!==void 0};Ju.findArrayAttributes=function(e){var t=[],r=[],i=[],n,a;function o(h,v,d,_){r=r.slice(0,_).concat([v]),i=i.slice(0,_).concat([h&&h._isLinkedToArray]);var T=h&&(h.valType==="data_array"||h.arrayOk===!0)&&!(r[_-1]==="colorbar"&&(v==="ticktext"||v==="tickvals"));T&&s(n,0,"")}function s(h,v,d){var _=h[r[v]],T=d+r[v];if(v===r.length-1)ert(_)&&t.push(a+T);else if(i[v]){if(Array.isArray(_))for(var p=0;p<_.length;p++)l2(_[p])&&s(_[p],v+1,T+"["+p+"].")}else l2(_)&&s(_,v+1,T+".")}n=e,a="",Ju.crawl(_A,o),e._module&&e._module.attributes&&Ju.crawl(e._module.attributes,o);var l=e.transforms;if(l)for(var u=0;u<l.length;u++){var f=l[u],c=f._module;c&&(a="transforms["+u+"].",n=f,Ju.crawl(c.attributes,o))}return t};Ju.getTraceValObject=function(e,t){var r=t[0],i=1,n,a;if(r==="transforms"){if(t.length===1)return _A.transforms;var o=e.transforms;if(!Array.isArray(o)||!o.length)return!1;var s=t[1];if(!xA(s)||s>=o.length)return!1;n=(fh.transformsRegistry[o[s].type]||{}).attributes,a=n&&n[t[2]],i=3}else{var l=e._module;if(l||(l=(fh.modules[e.type||_A.type.dflt]||{})._module),!l)return!1;if(n=l.attributes,a=n&&n[r],!a){var u=l.basePlotModule;u&&u.attributes&&(a=u.attributes[r])}a||(a=_A[r])}return Ote(a,t,i)};Ju.getLayoutValObject=function(e,t){var r=nrt(e,t[0]);return Ote(r,t,1)};function nrt(e,t){var r,i,n,a,o=e._basePlotModules;if(o){var s;for(r=0;r<o.length;r++){if(n=o[r],n.attrRegex&&n.attrRegex.test(t)){if(n.layoutAttrOverrides)return n.layoutAttrOverrides;!s&&n.layoutAttributes&&(s=n.layoutAttributes)}var l=n.baseLayoutAttrOverrides;if(l&&t in l)return l[t]}if(s)return s}var u=e._modules;if(u){for(r=0;r<u.length;r++)if(a=u[r].layoutAttributes,a&&t in a)return a[t]}for(i in fh.componentsRegistry){if(n=fh.componentsRegistry[i],n.name==="colorscale"&&t.indexOf("coloraxis")===0)return n.layoutAttributes[t];if(!n.schema&&t===n.name)return n.layoutAttributes}return t in Wq?Wq[t]:!1}function Ote(e,t,r){if(!e)return!1;if(e._isLinkedToArray){if(xA(t[r]))r++;else if(r<t.length)return!1}for(;r<t.length;r++){var i=e[t[r]];if(l2(i))e=i;else break;if(r===t.length-1)break;if(e._isLinkedToArray){if(r++,!xA(t[r]))return!1}else if(e.valType==="info_array"){r++;var n=t[r];if(!xA(n))return!1;var a=e.items;if(Array.isArray(a)){if(n>=a.length)return!1;if(e.dimensions===2){if(r++,t.length===r)return e;var o=t[r];if(!xA(o))return!1;e=a[n][o]}else e=a[n]}else e=a}}return e}function xA(e){return e===Math.round(e)&&e>=0}function irt(e){var t,r;t=fh.modules[e]._module,r=t.basePlotModule;var i={};i.type=null;var n=Qd({},_A),a=Qd({},t.attributes);Ju.crawl(a,function(l,u,f,c,h){oC(n,h).set(void 0),l===void 0&&oC(a,h).set(void 0)}),Qd(i,n),fh.traceIs(e,"noOpacity")&&delete i.opacity,fh.traceIs(e,"showLegend")||(delete i.showlegend,delete i.legendgroup),fh.traceIs(e,"noHover")&&(delete i.hoverinfo,delete i.hoverlabel),t.selectPoints||delete i.selectedpoints,Qd(i,a),r.attributes&&Qd(i,r.attributes),i.type=e;var o={meta:t.meta||{},categories:t.categories||{},animatable:!!t.animatable,type:e,attributes:sx(i)};if(t.layoutAttributes){var s={};Qd(s,t.layoutAttributes),o.layoutAttributes=sx(s)}return t.animatable||Ju.crawl(o,function(l){Ju.isValObject(l)&&"anim"in l&&delete l.anim}),o}function art(){var e={},t,r;Qd(e,Wq);for(t in fh.subplotsRegistry)if(r=fh.subplotsRegistry[t],!!r.layoutAttributes)if(Array.isArray(r.attr))for(var i=0;i<r.attr.length;i++)qte(e,r,r.attr[i]);else{var n=r.attr==="subplot"?r.name:r.attr;qte(e,r,n)}for(t in fh.componentsRegistry){r=fh.componentsRegistry[t];var a=r.schema;if(a&&(a.subplots||a.layout)){var o=a.subplots;if(o&&o.xaxis&&!o.yaxis)for(var s in o.xaxis)delete e.yaxis[s];delete e.xaxis.shift,delete e.xaxis.autoshift}else r.name==="colorscale"?Qd(e,r.layoutAttributes):r.layoutAttributes&&Bte(e,r.layoutAttributes,r.name)}return{layoutAttributes:sx(e)}}function ort(e){var t=fh.transformsRegistry[e],r=Qd({},t.attributes);return Object.keys(fh.componentsRegistry).forEach(function(i){var n=fh.componentsRegistry[i];n.schema&&n.schema.transforms&&n.schema.transforms[e]&&Object.keys(n.schema.transforms[e]).forEach(function(a){Bte(r,n.schema.transforms[e][a],a)})}),{attributes:sx(r)}}function srt(){var e={frames:Qd({},Jtt)};return sx(e),e.frames}function sx(e){return lrt(e),urt(e),frt(e),e}function lrt(e){function t(i){return{valType:"string",editType:"none"}}function r(i,n,a){Ju.isValObject(i)?(i.arrayOk===!0||i.valType==="data_array")&&(a[n+"src"]=t(n)):l2(i)&&(i.role="object")}Ju.crawl(e,r)}function urt(e){function t(r,i,n){if(r){var a=r[sC];a&&(delete r[sC],n[i]={items:{}},n[i].items[a]=r,n[i].role="object")}}Ju.crawl(e,t)}function frt(e){function t(r){for(var i in r)if(l2(r[i]))t(r[i]);else if(Array.isArray(r[i]))for(var n=0;n<r[i].length;n++)t(r[i][n]);else r[i]instanceof RegExp&&(r[i]=r[i].toString())}t(e)}function qte(e,t,r){var i=oC(e,r),n=Qd({},t.layoutAttributes);n[Xq]=!0,i.set(n)}function Bte(e,t,r){var i=oC(e,r);i.set(Qd(i.get()||{},t))}});var So=ne(lx=>{"use strict";var u2=Wt(),crt=es(),rm="templateitemname",jq={name:{valType:"string",editType:"none"}};jq[rm]={valType:"string",editType:"calc"};lx.templatedArray=function(e,t){return t._isLinkedToArray=e,t.name=jq.name,t[rm]=jq[rm],t};lx.traceTemplater=function(e){var t={},r,i;for(r in e)i=e[r],Array.isArray(i)&&i.length&&(t[r]=0);function n(a){r=u2.coerce(a,{},crt,"type");var o={type:r,_template:null};if(r in t){i=e[r];var s=t[r]%i.length;t[r]++,o._template=i[s]}return o}return{newTrace:n}};lx.newContainer=function(e,t,r){var i=e._template,n=i&&(i[t]||r&&i[r]);u2.isPlainObject(n)||(n=null);var a=e[t]={_template:n};return a};lx.arrayTemplater=function(e,t,r){var i=e._template,n=i&&i[Ute(t)],a=i&&i[t];(!Array.isArray(a)||!a.length)&&(a=[]);var o={};function s(u){var f={name:u.name,_input:u},c=f[rm]=u[rm];if(!Nte(c))return f._template=n,f;for(var h=0;h<a.length;h++){var v=a[h];if(v.name===c)return o[c]=1,f._template=v,f}return f[r]=u[r]||!1,f._template=!1,f}function l(){for(var u=[],f=0;f<a.length;f++){var c=a[f],h=c.name;if(Nte(h)&&!o[h]){var v={_template:c,name:h,_input:{_templateitemname:h}};v[rm]=c[rm],u.push(v),o[h]=1}}return u}return{newItem:s,defaultItems:l}};function Nte(e){return e&&typeof e=="string"}function Ute(e){var t=e.length-1;return e.charAt(t)!=="s"&&u2.warn("bad argument to arrayDefaultKey: "+e),e.substr(0,e.length-1)+"defaults"}lx.arrayDefaultKey=Ute;lx.arrayEditor=function(e,t,r){var i=(u2.nestedProperty(e,t).get()||[]).length,n=r._index,a=n>=i&&(r._input||{})._templateitemname;a&&(n=i);var o=t+"["+n+"]",s;function l(){s={},a&&(s[o]={},s[o][rm]=a)}l();function u(v,d){s[v]=d}function f(v,d){a?u2.nestedProperty(s[o],v).set(d):s[o+"."+v]=d}function c(){var v=s;return l(),v}function h(v,d){v&&f(v,d);var _=c();for(var T in _)u2.nestedProperty(e,T).set(_[T])}return{modifyBase:u,modifyItem:f,getUpdateObj:c,applyUpdate:h}}});var wf=ne((Der,Vte)=>{"use strict";var wA=Kb().counter;Vte.exports={idRegex:{x:wA("x","( domain)?"),y:wA("y","( domain)?")},attrRegex:wA("[xy]axis"),xAxisMatch:wA("xaxis"),yAxisMatch:wA("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}});var zl=ne($v=>{"use strict";var hrt=wi(),Kq=wf();$v.id2name=function(t){if(!(typeof t!="string"||!t.match(Kq.AX_ID_PATTERN))){var r=t.split(" ")[0].substr(1);return r==="1"&&(r=""),t.charAt(0)+"axis"+r}};$v.name2id=function(t){if(t.match(Kq.AX_NAME_PATTERN)){var r=t.substr(5);return r==="1"&&(r=""),t.charAt(0)+r}};$v.cleanId=function(t,r,i){var n=/( domain)$/.test(t);if(!(typeof t!="string"||!t.match(Kq.AX_ID_PATTERN))&&!(r&&t.charAt(0)!==r)&&!(n&&!i)){var a=t.split(" ")[0].substr(1).replace(/^0+/,"");return a==="1"&&(a=""),t.charAt(0)+a+(n&&i?" domain":"")}};$v.list=function(e,t,r){var i=e._fullLayout;if(!i)return[];var n=$v.listIds(e,t),a=new Array(n.length),o;for(o=0;o<n.length;o++){var s=n[o];a[o]=i[s.charAt(0)+"axis"+s.substr(1)]}if(!r){var l=i._subplots.gl3d||[];for(o=0;o<l.length;o++){var u=i[l[o]];t?a.push(u[t+"axis"]):a.push(u.xaxis,u.yaxis,u.zaxis)}}return a};$v.listIds=function(e,t){var r=e._fullLayout;if(!r)return[];var i=r._subplots;return t?i[t+"axis"]:i.xaxis.concat(i.yaxis)};$v.getFromId=function(e,t,r){var i=e._fullLayout;return t=t===void 0||typeof t!="string"?t:t.replace(" domain",""),r==="x"?t=t.replace(/y[0-9]*/,""):r==="y"&&(t=t.replace(/x[0-9]*/,"")),i[$v.id2name(t)]};$v.getFromTrace=function(e,t,r){var i=e._fullLayout,n=null;if(hrt.traceIs(t,"gl3d")){var a=t.scene;a.substr(0,5)==="scene"&&(n=i[a][r+"axis"])}else n=$v.getFromId(e,t[r+"axis"]||r);return n};$v.idSort=function(e,t){var r=e.charAt(0),i=t.charAt(0);return r!==i?r>i?1:-1:+(e.substr(1)||1)-+(t.substr(1)||1)};$v.ref2id=function(e){return/^[xyz]/.test(e)?e.split(" ")[0]:!1};function Hte(e,t){if(t&&t.length){for(var r=0;r<t.length;r++)if(t[r][e])return!0}return!1}$v.isLinked=function(e,t){return Hte(t,e._axisMatchGroups)||Hte(t,e._axisConstraintGroups)}});var nm=ne((Fer,Gte)=>{"use strict";function vrt(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".outline-controllers").remove()}function drt(e){var t=e._fullLayout._zoomlayer;t&&t.selectAll(".select-outline").remove(),e._fullLayout._outlining=!1}Gte.exports={clearOutlineControllers:vrt,clearOutline:drt}});var lC=ne((qer,Yte)=>{"use strict";Yte.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}});var vc=ne(uC=>{"use strict";var TA=wi(),prt=wf().SUBPLOT_PATTERN;uC.getSubplotCalcData=function(e,t,r){var i=TA.subplotsRegistry[t];if(!i)return[];for(var n=i.attr,a=[],o=0;o<e.length;o++){var s=e[o],l=s[0].trace;l[n]===r&&a.push(s)}return a};uC.getModuleCalcData=function(e,t){var r=[],i=[],n;if(typeof t=="string"?n=TA.getModule(t).plot:typeof t=="function"?n=t:n=t.plot,!n)return[r,e];for(var a=0;a<e.length;a++){var o=e[a],s=o[0].trace;s.visible!==!0||s._length===0||(s._module&&s._module.plot===n?r.push(o):i.push(o))}return[r,i]};uC.getSubplotData=function(t,r,i){if(!TA.subplotsRegistry[r])return[];var n=TA.subplotsRegistry[r].attr,a=[],o,s,l;if(r==="gl2d"){var u=i.match(prt);s="x"+u[1],l="y"+u[2]}for(var f=0;f<t.length;f++)o=t[f],r==="gl2d"&&TA.traceIs(o,"gl2d")?o[n[0]]===s&&o[n[1]]===l&&a.push(o):o[n]===i&&a.push(o);return a}});var jte=ne(ux=>{"use strict";var grt=wi(),f2=Wt();ux.manageCommandObserver=function(e,t,r,i){var n={},a=!0;t&&t._commandObserver&&(n=t._commandObserver),n.cache||(n.cache={}),n.lookupTable={};var o=ux.hasSimpleAPICommandBindings(e,r,n.lookupTable);if(t&&t._commandObserver){if(o)return n;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,n}if(o){Wte(e,o,n.cache),n.check=function(){if(a){var f=Wte(e,o,n.cache);return f.changed&&i&&n.lookupTable[f.value]!==void 0&&(n.disable(),Promise.resolve(i({value:f.value,type:o.type,prop:o.prop,traces:o.traces,index:n.lookupTable[f.value]})).then(n.enable,n.enable)),f.changed}};for(var s=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],l=0;l<s.length;l++)e._internalOn(s[l],n.check);n.remove=function(){for(var u=0;u<s.length;u++)e._removeInternalListener(s[u],n.check)}}else f2.log("Unable to automatically bind plot updates to API command"),n.lookupTable={},n.remove=function(){};return n.disable=function(){a=!1},n.enable=function(){a=!0},t&&(t._commandObserver=n),n};ux.hasSimpleAPICommandBindings=function(e,t,r){var i,n=t.length,a;for(i=0;i<n;i++){var o,s=t[i],l=s.method,u=s.args;if(Array.isArray(u)||(u=[]),!l)return!1;var f=ux.computeAPICommandBindings(e,l,u);if(f.length!==1)return!1;if(!a)a=f[0],Array.isArray(a.traces)&&a.traces.sort();else{if(o=f[0],o.type!==a.type||o.prop!==a.prop)return!1;if(Array.isArray(a.traces))if(Array.isArray(o.traces)){o.traces.sort();for(var c=0;c<a.traces.length;c++)if(a.traces[c]!==o.traces[c])return!1}else return!1;else if(o.prop!==a.prop)return!1}o=f[0];var h=o.value;if(Array.isArray(h))if(h.length===1)h=h[0];else return!1;r&&(r[h]=i)}return a};function Wte(e,t,r){var i,n,a,o=!1;if(t.type==="data")i=e._fullData[t.traces!==null?t.traces[0]:0];else if(t.type==="layout")i=e._fullLayout;else return!1;return n=f2.nestedProperty(i,t.prop).get(),a=r[t.type]=r[t.type]||{},a.hasOwnProperty(t.prop)&&a[t.prop]!==n&&(o=!0),a[t.prop]=n,{changed:o,value:n}}ux.executeAPICommand=function(e,t,r){if(t==="skip")return Promise.resolve();var i=grt.apiMethodRegistry[t],n=[e];Array.isArray(r)||(r=[]);for(var a=0;a<r.length;a++)n.push(r[a]);return i.apply(null,n).catch(function(o){return f2.warn("API call to Plotly."+t+" rejected.",o),Promise.reject(o)})};ux.computeAPICommandBindings=function(e,t,r){var i;switch(Array.isArray(r)||(r=[]),t){case"restyle":i=Zte(e,r);break;case"relayout":i=Xte(e,r);break;case"update":i=Zte(e,[r[0],r[2]]).concat(Xte(e,[r[1]]));break;case"animate":i=yrt(e,r);break;default:i=[]}return i};function yrt(e,t){return Array.isArray(t[0])&&t[0].length===1&&["string","number"].indexOf(typeof t[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]:[]}function Xte(e,t){var r=[],i=t[0],n={};if(typeof i=="string")n[i]=t[1];else if(f2.isPlainObject(i))n=i;else return r;return Jq(n,function(a,o,s){r.push({type:"layout",prop:a,value:s})},"",0),r}function Zte(e,t){var r,i,n,a,o=[];if(i=t[0],n=t[1],r=t[2],a={},typeof i=="string")a[i]=n;else if(f2.isPlainObject(i))a=i,r===void 0&&(r=n);else return o;return r===void 0&&(r=null),Jq(a,function(s,l,u){var f,c;if(Array.isArray(u)){c=u.slice();var h=Math.min(c.length,e.data.length);r&&(h=Math.min(h,r.length)),f=[];for(var v=0;v<h;v++)f[v]=r?r[v]:v}else c=u,f=r?r.slice():null;if(f===null)Array.isArray(c)&&(c=c[0]);else if(Array.isArray(f)){if(!Array.isArray(c)){var d=c;c=[];for(var _=0;_<f.length;_++)c[_]=d}c.length=Math.min(f.length,c.length)}o.push({type:"data",prop:s,traces:f,value:c})},"",0),o}function Jq(e,t,r,i){Object.keys(e).forEach(function(n){var a=e[n];if(n[0]!=="_"){var o=r+(i>0?".":"")+n;f2.isPlainObject(a)?Jq(a,t,o,i+1):t(o,n,a)}})}});var Zs=ne((Ber,ure)=>{"use strict";var tre=Ai(),mrt=Wb().timeFormatLocale,xrt=aq().formatLocale,AA=la(),_rt=oq(),Ho=wi(),rre=tm(),brt=So(),ki=Wt(),nre=_i(),Kte=$a().BADNUM,ed=zl(),wrt=nm().clearOutline,Trt=lC(),$q=cA(),Art=Yq(),Mrt=vc().getModuleCalcData,Qq=ki.relinkPrivateKeys,c2=ki._,li=ure.exports={};ki.extendFlat(li,Ho);li.attributes=es();li.attributes.type.values=li.allTypes;li.fontAttrs=ll();li.layoutAttributes=tx();li.fontWeight="normal";var cC=li.transformsRegistry,hC=jte();li.executeAPICommand=hC.executeAPICommand;li.computeAPICommandBindings=hC.computeAPICommandBindings;li.manageCommandObserver=hC.manageCommandObserver;li.hasSimpleAPICommandBindings=hC.hasSimpleAPICommandBindings;li.redrawText=function(e){return e=ki.getGraphDiv(e),new Promise(function(t){setTimeout(function(){e._fullLayout&&(Ho.getComponentMethod("annotations","draw")(e),Ho.getComponentMethod("legend","draw")(e),Ho.getComponentMethod("colorbar","draw")(e),t(li.previousPromises(e)))},300)})};li.resize=function(e){e=ki.getGraphDiv(e);var t,r=new Promise(function(i,n){(!e||ki.isHidden(e))&&n(new Error("Resize must be passed a displayed plot div element.")),e._redrawTimer&&clearTimeout(e._redrawTimer),e._resolveResize&&(t=e._resolveResize),e._resolveResize=i,e._redrawTimer=setTimeout(function(){if(!e.layout||e.layout.width&&e.layout.height||ki.isHidden(e)){i(e);return}delete e.layout.width,delete e.layout.height;var a=e.changed;e.autoplay=!0,Ho.call("relayout",e,{autosize:!0}).then(function(){e.changed=a,e._resolveResize===i&&(delete e._resolveResize,i(e))})},100)});return t&&t(r),r};li.previousPromises=function(e){if((e._promises||[]).length)return Promise.all(e._promises).then(function(){e._promises=[]})};li.addLinks=function(e){if(!(!e._context.showLink&&!e._context.showSources)){var t=e._fullLayout,r=ki.ensureSingle(t._paper,"text","js-plot-link-container",function(l){l.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:nre.defaultLine,"pointer-events":"all"}).each(function(){var u=tre.select(this);u.append("tspan").classed("js-link-to-tool",!0),u.append("tspan").classed("js-link-spacer",!0),u.append("tspan").classed("js-sourcelinks",!0)})}),i=r.node(),n={y:t._paper.attr("height")-9};document.body.contains(i)&&i.getComputedTextLength()>=t.width-20?(n["text-anchor"]="start",n.x=5):(n["text-anchor"]="end",n.x=t._paper.attr("width")-7),r.attr(n);var a=r.select(".js-link-to-tool"),o=r.select(".js-link-spacer"),s=r.select(".js-sourcelinks");e._context.showSources&&e._context.showSources(e),e._context.showLink&&Srt(e,a),o.text(a.text()&&s.text()?" - ":"")}};function Srt(e,t){t.text("");var r=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" \xBB");if(e._context.sendData)r.on("click",function(){li.sendDataToCloud(e)});else{var i=window.location.pathname.split("/"),n=window.location.search;r.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+i[2].split(".")[0]+"/"+i[1]+n})}}li.sendDataToCloud=function(e){var t=(window.PLOTLYENV||{}).BASE_URL||e._context.plotlyServerURL;if(t){e.emit("plotly_beforeexport");var r=tre.select(e).append("div").attr("id","hiddenform").style("display","none"),i=r.append("form").attr({action:t+"/external",method:"post",target:"_blank"}),n=i.append("input").attr({type:"text",name:"data"});return n.node().value=li.graphJson(e,!1,"keepdata"),i.node().submit(),r.remove(),e.emit("plotly_afterexport"),!1}};var Ert=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],krt=["year","month","dayMonth","dayMonthYear"];li.supplyDefaults=function(e,t){var r=t&&t.skipUpdateCalc,i=e._fullLayout||{};if(i._skipDefaults){delete i._skipDefaults;return}var n=e._fullLayout={},a=e.layout||{},o=e._fullData||[],s=e._fullData=[],l=e.data||[],u=e.calcdata||[],f=e._context||{},c;e._transitionData||li.createTransitionData(e),n._dfltTitle={plot:c2(e,"Click to enter Plot title"),x:c2(e,"Click to enter X axis title"),y:c2(e,"Click to enter Y axis title"),colorbar:c2(e,"Click to enter Colorscale title"),annotation:c2(e,"new text")},n._traceWord=c2(e,"trace");var h=Jte(e,Ert);if(n._mapboxAccessToken=f.mapboxAccessToken,i._initialAutoSizeIsDone){var v=i.width,d=i.height;li.supplyLayoutGlobalDefaults(a,n,h),a.width||(n.width=v),a.height||(n.height=d),li.sanitizeMargins(n)}else{li.supplyLayoutGlobalDefaults(a,n,h);var _=!a.width||!a.height,T=n.autosize,p=f.autosizable,M=_&&(T||p);M?li.plotAutoSize(e,a,n):_&&li.sanitizeMargins(n),!T&&_&&(a.width=n.width,a.height=n.height)}n._d3locale=Prt(h,n.separators),n._extraFormat=Jte(e,krt),n._initialAutoSizeIsDone=!0,n._dataLength=l.length,n._modules=[],n._visibleModules=[],n._basePlotModules=[];var b=n._subplots=Lrt(),w=n._splomAxes={x:{},y:{}},k=n._splomSubplots={};n._splomGridDflt={},n._scatterStackOpts={},n._firstScatter={},n._alignmentOpts={},n._colorAxes={},n._requestRangeslider={},n._traceUids=Crt(o,l),n._globalTransforms=(e._context||{}).globalTransforms,li.supplyDataDefaults(l,s,a,n);var x=Object.keys(w.x),E=Object.keys(w.y);if(x.length>1&&E.length>1){for(Ho.getComponentMethod("grid","sizeDefaults")(a,n),c=0;c<x.length;c++)ki.pushUnique(b.xaxis,x[c]);for(c=0;c<E.length;c++)ki.pushUnique(b.yaxis,E[c]);for(var S in k)ki.pushUnique(b.cartesian,S)}if(n._has=li._hasPlotType.bind(n),o.length===s.length)for(c=0;c<s.length;c++)Qq(s[c],o[c]);li.supplyLayoutModuleDefaults(a,n,s,e._transitionData);var g=n._visibleModules,C=[];for(c=0;c<g.length;c++){var A=g[c].crossTraceDefaults;A&&ki.pushUnique(C,A)}for(c=0;c<C.length;c++)C[c](s,n);n._hasOnlyLargeSploms=n._basePlotModules.length===1&&n._basePlotModules[0].name==="splom"&&x.length>15&&E.length>15&&n.shapes.length===0&&n.images.length===0,li.linkSubplots(s,n,o,i),li.cleanPlot(s,n,o,i);var P=!!(i._has&&i._has("gl2d")),D=!!(n._has&&n._has("gl2d")),z=!!(i._has&&i._has("cartesian")),O=!!(n._has&&n._has("cartesian")),V=z||P,B=O||D;V&&!B?i._bgLayer.remove():B&&!V&&(n._shouldCreateBgLayer=!0),i._zoomlayer&&!e._dragging&&wrt({_fullLayout:i}),Rrt(s,n),Qq(n,i),Ho.getComponentMethod("colorscale","crossTraceDefaults")(s,n),n._preGUI||(n._preGUI={}),n._tracePreGUI||(n._tracePreGUI={});var F=n._tracePreGUI,N={},Z;for(Z in F)N[Z]="old";for(c=0;c<s.length;c++)Z=s[c]._fullInput.uid,N[Z]||(F[Z]={}),N[Z]="new";for(Z in N)N[Z]==="old"&&delete F[Z];are(n),Ho.getComponentMethod("rangeslider","makeData")(n),!r&&u.length===s.length&&li.supplyDefaultsUpdateCalc(u,s)};li.supplyDefaultsUpdateCalc=function(e,t){for(var r=0;r<t.length;r++){var i=t[r],n=(e[r]||[])[0];if(n&&n.trace){var a=n.trace;if(a._hasCalcTransform){var o=a._arrayAttrs,s,l,u;for(s=0;s<o.length;s++)l=o[s],u=ki.nestedProperty(a,l).get().slice(),ki.nestedProperty(i,l).set(u)}n.trace=i}}};function Crt(e,t){var r=t.length,i=[],n,a;for(n=0;n<e.length;n++){var o=e[n]._fullInput;o!==a&&i.push(o),a=o}var s=i.length,l=new Array(r),u={};function f(v,d){l[d]=v,u[v]=1}function c(v,d){if(v&&typeof v=="string"&&!u[v])return f(v,d),!0}for(n=0;n<r;n++){var h=t[n].uid;typeof h=="number"&&(h=String(h)),!c(h,n)&&(n<s&&c(i[n].uid,n)||f(ki.randstr(u),n))}return l}function Lrt(){var e=Ho.collectableSubplotTypes,t={},r,i;if(!e){e=[];var n=Ho.subplotsRegistry;for(var a in n){var o=n[a],s=o.attr;if(s&&(e.push(a),Array.isArray(s)))for(i=0;i<s.length;i++)ki.pushUnique(e,s[i])}}for(r=0;r<e.length;r++)t[e[r]]=[];return t}function Jte(e,t){var r=e._context.locale;r||(r="en-US");var i=!1,n={};function a(c){for(var h=!0,v=0;v<t.length;v++){var d=t[v];n[d]||(c[d]?n[d]=c[d]:h=!1)}h&&(i=!0)}for(var o=0;o<2;o++){for(var s=e._context.locales,l=0;l<2;l++){var u=(s[r]||{}).format;if(u&&(a(u),i))break;s=Ho.localeRegistry}var f=r.split("-")[0];if(i||f===r)break;r=f}return i||a(Ho.localeRegistry.en.format),n}function Prt(e,t){return e.decimal=t.charAt(0),e.thousands=t.charAt(1),{numberFormat:function(r){try{r=xrt(e).format(ki.adjustFormat(r))}catch(i){return ki.warnBadFormat(r),ki.noFormat}return r},timeFormat:mrt(e).utcFormat}}function Rrt(e,t){var r,i=[];t.meta&&(r=t._meta={meta:t.meta,layout:{meta:t.meta}});for(var n=0;n<e.length;n++){var a=e[n];a.meta?i[a.index]=a._meta={meta:a.meta}:t.meta&&(a._meta={meta:t.meta}),t.meta&&(a._meta.layout={meta:t.meta})}i.length&&(r||(r=t._meta={}),r.data=i)}li.createTransitionData=function(e){e._transitionData||(e._transitionData={}),e._transitionData._frames||(e._transitionData._frames=[]),e._transitionData._frameHash||(e._transitionData._frameHash={}),e._transitionData._counter||(e._transitionData._counter=0),e._transitionData._interruptCallbacks||(e._transitionData._interruptCallbacks=[])};li._hasPlotType=function(e){var t,r=this._basePlotModules||[];for(t=0;t<r.length;t++)if(r[t].name===e)return!0;var i=this._modules||[];for(t=0;t<i.length;t++){var n=i[t].name;if(n===e)return!0;var a=Ho.modules[n];if(a&&a.categories[e])return!0}return!1};li.cleanPlot=function(e,t,r,i){var n,a,o=i._basePlotModules||[];for(n=0;n<o.length;n++){var s=o[n];s.clean&&s.clean(e,t,r,i)}var l=i._has&&i._has("gl"),u=t._has&&t._has("gl");l&&!u&&i._glcontainer!==void 0&&(i._glcontainer.selectAll(".gl-canvas").remove(),i._glcontainer.selectAll(".no-webgl").remove(),i._glcanvas=null);var f=!!i._infolayer;e:for(n=0;n<r.length;n++){var c=r[n],h=c.uid;for(a=0;a<e.length;a++){var v=e[a];if(h===v.uid)continue e}f&&i._infolayer.select(".cb"+h).remove()}};li.linkSubplots=function(e,t,r,i){var n,a,o=i._plots||{},s=t._plots={},l=t._subplots,u={_fullData:e,_fullLayout:t},f=l.cartesian.concat(l.gl2d||[]);for(n=0;n<f.length;n++){var c=f[n],h=o[c],v=ed.getFromId(u,c,"x"),d=ed.getFromId(u,c,"y"),_;for(h?_=s[c]=h:(_=s[c]={},_.id=c),v._counterAxes.push(d._id),d._counterAxes.push(v._id),v._subplotsWith.push(c),d._subplotsWith.push(c),_.xaxis=v,_.yaxis=d,_._hasClipOnAxisFalse=!1,a=0;a<e.length;a++){var T=e[a];if(T.xaxis===_.xaxis._id&&T.yaxis===_.yaxis._id&&T.cliponaxis===!1){_._hasClipOnAxisFalse=!0;break}}}var p=ed.list(u,null,!0),M;for(n=0;n<p.length;n++){M=p[n];var b=null;M.overlaying&&(b=ed.getFromId(u,M.overlaying),b&&b.overlaying&&(M.overlaying=!1,b=null)),M._mainAxis=b||M,b&&(M.domain=b.domain.slice()),M._anchorAxis=M.anchor==="free"?null:ed.getFromId(u,M.anchor)}for(n=0;n<p.length;n++)if(M=p[n],M._counterAxes.sort(ed.idSort),M._subplotsWith.sort(ki.subplotSort),M._mainSubplot=Drt(M,t),M._counterAxes.length&&(M.spikemode&&M.spikemode.indexOf("across")!==-1||M.automargin&&M.mirror&&M.anchor!=="free"||Ho.getComponentMethod("rangeslider","isVisible")(M))){var w=1,k=0;for(a=0;a<M._counterAxes.length;a++){var x=ed.getFromId(u,M._counterAxes[a]);w=Math.min(w,x.domain[0]),k=Math.max(k,x.domain[1])}w<k&&(M._counterDomainMin=w,M._counterDomainMax=k)}};function Drt(e,t){var r={_fullLayout:t},i=e._id.charAt(0)==="x",n=e._mainAxis._anchorAxis,a="",o="",s="";if(n&&(s=n._mainAxis._id,a=i?e._id+s:s+e._id),!a||!t._plots[a]){a="";for(var l=e._counterAxes,u=0;u<l.length;u++){var f=l[u],c=i?e._id+f:f+e._id;o||(o=c);var h=ed.getFromId(r,f);if(s&&h.overlaying===s){a=c;break}}}return a||o}li.clearExpandedTraceDefaultColors=function(e){var t,r,i;function n(o,s,l,u){r[u]=s,r.length=u+1,o.valType==="color"&&o.dflt===void 0&&t.push(r.join("."))}for(r=[],t=e._module._colorAttrs,t||(e._module._colorAttrs=t=[],rre.crawl(e._module.attributes,n)),i=0;i<t.length;i++){var a=ki.nestedProperty(e,"_input."+t[i]);a.get()||ki.nestedProperty(e,t[i]).set(null)}};li.supplyDataDefaults=function(e,t,r,i){var n=i._modules,a=i._visibleModules,o=i._basePlotModules,s=0,l=0,u,f,c;i._transformModules=[];function h(E){t.push(E);var S=E._module;S&&(ki.pushUnique(n,S),E.visible===!0&&ki.pushUnique(a,S),ki.pushUnique(o,E._module.basePlotModule),s++,E._input.visible!==!1&&l++)}var v={},d=[],_=(r.template||{}).data||{},T=brt.traceTemplater(_);for(u=0;u<e.length;u++){if(c=e[u],f=T.newTrace(c),f.uid=i._traceUids[u],li.supplyTraceDefaults(c,f,l,i,u),f.index=u,f._input=c,f._expandedIndex=s,f.transforms&&f.transforms.length)for(var p=c.visible!==!1&&f.visible===!1,M=Irt(f,t,r,i),b=0;b<M.length;b++){var w=M[b],k={_template:f._template,type:f.type,uid:f.uid+b};p&&w.visible===!1&&delete w.visible,li.supplyTraceDefaults(w,k,s,i,u),Qq(k,w),k.index=u,k._input=c,k._fullInput=f,k._expandedIndex=s,k._expandedInput=w,h(k)}else f._fullInput=f,f._expandedInput=f,h(f);Ho.traceIs(f,"carpetAxis")&&(v[f.carpet]=f),Ho.traceIs(f,"carpetDependent")&&d.push(u)}for(u=0;u<d.length;u++)if(f=t[d[u]],!!f.visible){var x=v[f.carpet];if(f._carpet=x,!x||!x.visible){f.visible=!1;continue}f.xaxis=x.xaxis,f.yaxis=x.yaxis}};li.supplyAnimationDefaults=function(e){e=e||{};var t,r={};function i(n,a){return ki.coerce(e||{},r,$q,n,a)}if(i("mode"),i("direction"),i("fromcurrent"),Array.isArray(e.frame))for(r.frame=[],t=0;t<e.frame.length;t++)r.frame[t]=li.supplyAnimationFrameDefaults(e.frame[t]||{});else r.frame=li.supplyAnimationFrameDefaults(e.frame||{});if(Array.isArray(e.transition))for(r.transition=[],t=0;t<e.transition.length;t++)r.transition[t]=li.supplyAnimationTransitionDefaults(e.transition[t]||{});else r.transition=li.supplyAnimationTransitionDefaults(e.transition||{});return r};li.supplyAnimationFrameDefaults=function(e){var t={};function r(i,n){return ki.coerce(e||{},t,$q.frame,i,n)}return r("duration"),r("redraw"),t};li.supplyAnimationTransitionDefaults=function(e){var t={};function r(i,n){return ki.coerce(e||{},t,$q.transition,i,n)}return r("duration"),r("easing"),t};li.supplyFrameDefaults=function(e){var t={};function r(i,n){return ki.coerce(e,t,Art,i,n)}return r("group"),r("name"),r("traces"),r("baseframe"),r("data"),r("layout"),t};li.supplyTraceDefaults=function(e,t,r,i,n){var a=i.colorway||nre.defaults,o=a[r%a.length],s;function l(b,w){return ki.coerce(e,t,li.attributes,b,w)}var u=l("visible");l("type"),l("name",i._traceWord+" "+n),l("uirevision",i.uirevision);var f=li.getModule(t);if(t._module=f,f){var c=f.basePlotModule,h=c.attr,v=c.attributes;if(h&&v){var d=i._subplots,_="";if(u||c.name!=="gl2d"){if(Array.isArray(h))for(s=0;s<h.length;s++){var T=h[s],p=ki.coerce(e,t,v,T);d[T]&&ki.pushUnique(d[T],p),_+=p}else _=ki.coerce(e,t,v,h);d[c.name]&&ki.pushUnique(d[c.name],_)}}}if(u){if(l("customdata"),l("ids"),l("meta"),Ho.traceIs(t,"showLegend")?(ki.coerce(e,t,f.attributes.showlegend?f.attributes:li.attributes,"showlegend"),l("legend"),l("legendwidth"),l("legendgroup"),l("legendgrouptitle.text"),l("legendrank"),t._dfltShowLegend=!0):t._dfltShowLegend=!1,f&&f.supplyDefaults(e,t,o,i),Ho.traceIs(t,"noOpacity")||l("opacity"),Ho.traceIs(t,"notLegendIsolatable")&&(t.visible=!!t.visible),Ho.traceIs(t,"noHover")||(t.hovertemplate||ki.coerceHoverinfo(e,t,i),t.type!=="parcats"&&Ho.getComponentMethod("fx","supplyDefaults")(e,t,o,i)),f&&f.selectPoints){var M=l("selectedpoints");ki.isTypedArray(M)&&(t.selectedpoints=Array.from(M))}li.supplyTransformDefaults(e,t,i)}return t};function ire(e){var t=e.transforms;if(Array.isArray(t)&&t.length)for(var r=0;r<t.length;r++){var i=t[r],n=i._module||cC[i.type];if(n&&n.makesData)return!0}return!1}li.hasMakesDataTransform=ire;li.supplyTransformDefaults=function(e,t,r){if(t._length||ire(e)){var i=r._globalTransforms||[],n=r._transformModules||[];if(!(!Array.isArray(e.transforms)&&i.length===0))for(var a=e.transforms||[],o=i.concat(a),s=t.transforms=[],l=0;l<o.length;l++){var u=o[l],f=u.type,c=cC[f],h,v=!(u._module&&u._module===c),d=c&&typeof c.transform=="function";c||ki.warn("Unrecognized transform type "+f+"."),c&&c.supplyDefaults&&(v||d)?(h=c.supplyDefaults(u,t,r,e),h.type=f,h._module=c,ki.pushUnique(n,c)):h=ki.extendFlat({},u),s.push(h)}}};function Irt(e,t,r,i){for(var n=e.transforms,a=[e],o=0;o<n.length;o++){var s=n[o],l=cC[s.type];l&&l.transform&&(a=l.transform(a,{transform:s,fullTrace:e,fullData:t,layout:r,fullLayout:i,transformIndex:o}))}return a}li.supplyLayoutGlobalDefaults=function(e,t,r){function i(c,h){return ki.coerce(e,t,li.layoutAttributes,c,h)}var n=e.template;ki.isPlainObject(n)&&(t.template=n,t._template=n.layout,t._dataTemplate=n.data),i("autotypenumbers");var a=ki.coerceFont(i,"font"),o=a.size;ki.coerceFont(i,"title.font",ki.extendFlat({},a,{size:Math.round(o*1.4)})),i("title.text",t._dfltTitle.plot),i("title.xref");var s=i("title.yref");i("title.pad.t"),i("title.pad.r"),i("title.pad.b"),i("title.pad.l");var l=i("title.automargin");i("title.x"),i("title.xanchor"),i("title.y"),i("title.yanchor"),l&&(s==="paper"&&(t.title.y!==0&&(t.title.y=1),t.title.yanchor==="auto"&&(t.title.yanchor=t.title.y===0?"top":"bottom")),s==="container"&&(t.title.y==="auto"&&(t.title.y=1),t.title.yanchor==="auto"&&(t.title.yanchor=t.title.y<.5?"bottom":"top")));var u=i("uniformtext.mode");u&&i("uniformtext.minsize"),i("autosize",!(e.width&&e.height)),i("width"),i("height"),i("minreducedwidth"),i("minreducedheight"),i("margin.l"),i("margin.r"),i("margin.t"),i("margin.b"),i("margin.pad"),i("margin.autoexpand"),e.width&&e.height&&li.sanitizeMargins(t),Ho.getComponentMethod("grid","sizeDefaults")(e,t),i("paper_bgcolor"),i("separators",r.decimal+r.thousands),i("hidesources"),i("colorway"),i("datarevision");var f=i("uirevision");i("editrevision",f),i("selectionrevision",f),Ho.getComponentMethod("modebar","supplyLayoutDefaults")(e,t),Ho.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(e,t,i),Ho.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(e,t,i),i("meta"),ki.isPlainObject(e.transition)&&(i("transition.duration"),i("transition.easing"),i("transition.ordering")),Ho.getComponentMethod("calendars","handleDefaults")(e,t,"calendar"),Ho.getComponentMethod("fx","supplyLayoutGlobalDefaults")(e,t,i),ki.coerce(e,t,Trt,"scattermode")};function fC(e){return typeof e=="string"&&e.substr(e.length-2)==="px"&&parseFloat(e)}li.plotAutoSize=function(t,r,i){var n=t._context||{},a=n.frameMargins,o,s,l=ki.isPlotDiv(t);if(l&&t.emit("plotly_autosize"),n.fillFrame)o=window.innerWidth,s=window.innerHeight,document.body.style.overflow="hidden";else{var u=l?window.getComputedStyle(t):{};if(o=fC(u.width)||fC(u.maxWidth)||i.width,s=fC(u.height)||fC(u.maxHeight)||i.height,AA(a)&&a>0){var f=1-2*a;o=Math.round(f*o),s=Math.round(f*s)}}var c=li.layoutAttributes.width.min,h=li.layoutAttributes.height.min;o<c&&(o=c),s<h&&(s=h);var v=!r.width&&Math.abs(i.width-o)>1,d=!r.height&&Math.abs(i.height-s)>1;(d||v)&&(v&&(i.width=o),d&&(i.height=s)),t._initialAutoSize||(t._initialAutoSize={width:o,height:s}),li.sanitizeMargins(i)};li.supplyLayoutModuleDefaults=function(e,t,r,i){var n=Ho.componentsRegistry,a=t._basePlotModules,o,s,l,u=Ho.subplotsRegistry.cartesian;for(o in n)l=n[o],l.includeBasePlot&&l.includeBasePlot(e,t);a.length||a.push(u),t._has("cartesian")&&(Ho.getComponentMethod("grid","contentDefaults")(e,t),u.finalizeSubplots(e,t));for(var f in t._subplots)t._subplots[f].sort(ki.subplotSort);for(s=0;s<a.length;s++)l=a[s],l.supplyLayoutDefaults&&l.supplyLayoutDefaults(e,t,r);var c=t._modules;for(s=0;s<c.length;s++)l=c[s],l.supplyLayoutDefaults&&l.supplyLayoutDefaults(e,t,r);var h=t._transformModules;for(s=0;s<h.length;s++)l=h[s],l.supplyLayoutDefaults&&l.supplyLayoutDefaults(e,t,r,i);for(o in n)l=n[o],l.supplyLayoutDefaults&&l.supplyLayoutDefaults(e,t,r)};li.purge=function(e){var t=e._fullLayout||{};t._glcontainer!==void 0&&(t._glcontainer.selectAll(".gl-canvas").remove(),t._glcontainer.remove(),t._glcanvas=null),t._modeBar&&t._modeBar.destroy(),e._transitionData&&(e._transitionData._interruptCallbacks&&(e._transitionData._interruptCallbacks.length=0),e._transitionData._animationRaf&&window.cancelAnimationFrame(e._transitionData._animationRaf)),ki.clearThrottle(),ki.clearResponsive(e),delete e.data,delete e.layout,delete e._fullData,delete e._fullLayout,delete e.calcdata,delete e.empty,delete e.fid,delete e.undoqueue,delete e.undonum,delete e.autoplay,delete e.changed,delete e._promises,delete e._redrawTimer,delete e._hmlumcount,delete e._hmpixcount,delete e._transitionData,delete e._transitioning,delete e._initialAutoSize,delete e._transitioningWithDuration,delete e._dragging,delete e._dragged,delete e._dragdata,delete e._hoverdata,delete e._snapshotInProgress,delete e._editing,delete e._mouseDownTime,delete e._legendMouseDownTime,e.removeAllListeners&&e.removeAllListeners()};li.style=function(e){var t=e._fullLayout._visibleModules,r=[],i;for(i=0;i<t.length;i++){var n=t[i];n.style&&ki.pushUnique(r,n.style)}for(i=0;i<r.length;i++)r[i](e)};li.sanitizeMargins=function(e){if(!(!e||!e.margin)){var t=e.width,r=e.height,i=e.margin,n=t-(i.l+i.r),a=r-(i.t+i.b),o;n<0&&(o=(t-1)/(i.l+i.r),i.l=Math.floor(o*i.l),i.r=Math.floor(o*i.r)),a<0&&(o=(r-1)/(i.t+i.b),i.t=Math.floor(o*i.t),i.b=Math.floor(o*i.b))}};li.clearAutoMarginIds=function(e){e._fullLayout._pushmarginIds={}};li.allowAutoMargin=function(e,t){e._fullLayout._pushmarginIds[t]=1};function are(e){var t=e.margin;if(!e._size){var r=e._size={l:Math.round(t.l),r:Math.round(t.r),t:Math.round(t.t),b:Math.round(t.b),p:Math.round(t.pad)};r.w=Math.round(e.width)-r.l-r.r,r.h=Math.round(e.height)-r.t-r.b}e._pushmargin||(e._pushmargin={}),e._pushmarginIds||(e._pushmarginIds={}),e._reservedMargin||(e._reservedMargin={})}var ore=2,sre=2;li.autoMargin=function(e,t,r){var i=e._fullLayout,n=i.width,a=i.height,o=i.margin,s=i.minreducedwidth,l=i.minreducedheight,u=ki.constrain(n-o.l-o.r,ore,s),f=ki.constrain(a-o.t-o.b,sre,l),c=Math.max(0,n-u),h=Math.max(0,a-f),v=i._pushmargin,d=i._pushmarginIds;if(o.autoexpand!==!1){if(!r)delete v[t],delete d[t];else{var _=r.pad;if(_===void 0&&(_=Math.min(12,o.l,o.r,o.t,o.b)),c){var T=(r.l+r.r)/c;T>1&&(r.l/=T,r.r/=T)}if(h){var p=(r.t+r.b)/h;p>1&&(r.t/=p,r.b/=p)}var M=r.xl!==void 0?r.xl:r.x,b=r.xr!==void 0?r.xr:r.x,w=r.yt!==void 0?r.yt:r.y,k=r.yb!==void 0?r.yb:r.y;v[t]={l:{val:M,size:r.l+_},r:{val:b,size:r.r+_},b:{val:k,size:r.b+_},t:{val:w,size:r.t+_}},d[t]=1}if(!i._replotting)return li.doAutoMargin(e)}};function Frt(e){if("_redrawFromAutoMarginCount"in e._fullLayout)return!1;var t=ed.list(e,"",!0);for(var r in t)if(t[r].autoshift||t[r].shift)return!0;return!1}li.doAutoMargin=function(e){var t=e._fullLayout,r=t.width,i=t.height;t._size||(t._size={}),are(t);var n=t._size,a=t.margin,o={t:0,b:0,l:0,r:0},s=ki.extendFlat({},n),l=a.l,u=a.r,f=a.t,c=a.b,h=t._pushmargin,v=t._pushmarginIds,d=t.minreducedwidth,_=t.minreducedheight;if(a.autoexpand!==!1){for(var T in h)v[T]||delete h[T];var p=e._fullLayout._reservedMargin;for(var M in p)for(var b in p[M]){var w=p[M][b];o[b]=Math.max(o[b],w)}h.base={l:{val:0,size:l},r:{val:1,size:u},t:{val:1,size:f},b:{val:0,size:c}};for(var k in o){var x=0;for(var E in h)E!=="base"&&AA(h[E][k].size)&&(x=h[E][k].size>x?h[E][k].size:x);var S=Math.max(0,a[k]-x);o[k]=Math.max(0,o[k]-S)}for(var g in h){var C=h[g].l||{},A=h[g].b||{},P=C.val,D=C.size,z=A.val,O=A.size,V=r-o.r-o.l,B=i-o.t-o.b;for(var F in h){if(AA(D)&&h[F].r){var N=h[F].r.val,Z=h[F].r.size;if(N>P){var J=(D*N+(Z-V)*P)/(N-P),re=(Z*(1-P)+(D-V)*(1-N))/(N-P);J+re>l+u&&(l=J,u=re)}}if(AA(O)&&h[F].t){var ue=h[F].t.val,fe=h[F].t.size;if(ue>z){var K=(O*ue+(fe-B)*z)/(ue-z),X=(fe*(1-z)+(O-B)*(1-ue))/(ue-z);K+X>c+f&&(c=K,f=X)}}}}}var ae=ki.constrain(r-a.l-a.r,ore,d),oe=ki.constrain(i-a.t-a.b,sre,_),me=Math.max(0,r-ae),xe=Math.max(0,i-oe);if(me){var ce=(l+u)/me;ce>1&&(l/=ce,u/=ce)}if(xe){var ie=(c+f)/xe;ie>1&&(c/=ie,f/=ie)}if(n.l=Math.round(l)+o.l,n.r=Math.round(u)+o.r,n.t=Math.round(f)+o.t,n.b=Math.round(c)+o.b,n.p=Math.round(a.pad),n.w=Math.round(r)-n.l-n.r,n.h=Math.round(i)-n.t-n.b,!t._replotting&&(li.didMarginChange(s,n)||Frt(e))){"_redrawFromAutoMarginCount"in t?t._redrawFromAutoMarginCount++:t._redrawFromAutoMarginCount=1;var ge=3*(1+Object.keys(v).length);if(t._redrawFromAutoMarginCount<ge)return Ho.call("_doPlot",e);t._size=s,ki.warn("Too many auto-margin redraws.")}qrt(e)};function qrt(e){var t=ed.list(e,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(r){for(var i=0;i<t.length;i++){var n=t[i][r];n&&n()}})}var Qte=["l","r","t","b","p","w","h"];li.didMarginChange=function(e,t){for(var r=0;r<Qte.length;r++){var i=Qte[r],n=e[i],a=t[i];if(!AA(n)||Math.abs(a-n)>1)return!0}return!1};li.graphJson=function(e,t,r,i,n,a){(n&&t&&!e._fullData||n&&!t&&!e._fullLayout)&&li.supplyDefaults(e);var o=n?e._fullData:e.data,s=n?e._fullLayout:e.layout,l=(e._transitionData||{})._frames;function u(h,v){if(typeof h=="function")return v?"_function_":null;if(ki.isPlainObject(h)){var d={},_;return Object.keys(h).sort().forEach(function(b){if(["_","["].indexOf(b.charAt(0))===-1){if(typeof h[b]=="function"){v&&(d[b]="_function");return}if(r==="keepdata"){if(b.substr(b.length-3)==="src")return}else if(r==="keepstream"){if(_=h[b+"src"],typeof _=="string"&&_.indexOf(":")>0&&!ki.isPlainObject(h.stream))return}else if(r!=="keepall"&&(_=h[b+"src"],typeof _=="string"&&_.indexOf(":")>0))return;d[b]=u(h[b],v)}}),d}var T=Array.isArray(h),p=ki.isTypedArray(h);if((T||p)&&h.dtype&&h.shape){var M=h.bdata;return u({dtype:h.dtype,shape:h.shape,bdata:ki.isArrayBuffer(M)?_rt.encode(M):M},v)}return T?h.map(function(b){return u(b,v)}):p?ki.simpleMap(h,ki.identity):ki.isJSDate(h)?ki.ms2DateTimeLocal(+h):h}var f={data:(o||[]).map(function(h){var v=u(h);return t&&delete v.fit,v})};if(!t&&(f.layout=u(s),n)){var c=s._size;f.layout.computed={margin:{b:c.b,l:c.l,r:c.r,t:c.t}}}return l&&(f.frames=u(l)),a&&(f.config=u(e._context,!0)),i==="object"?f:JSON.stringify(f)};li.modifyFrames=function(e,t){var r,i,n,a=e._transitionData._frames,o=e._transitionData._frameHash;for(r=0;r<t.length;r++)switch(i=t[r],i.type){case"replace":n=i.value;var s=(a[i.index]||{}).name,l=n.name;a[i.index]=o[l]=n,l!==s&&(delete o[s],o[l]=n);break;case"insert":n=i.value,o[n.name]=n,a.splice(i.index,0,n);break;case"delete":n=a[i.index],delete o[n.name],a.splice(i.index,1);break}return Promise.resolve()};li.computeFrame=function(e,t){var r=e._transitionData._frameHash,i,n,a,o;if(!t)throw new Error("computeFrame must be given a string frame name");var s=r[t.toString()];if(!s)return!1;for(var l=[s],u=[s.name];s.baseframe&&(s=r[s.baseframe.toString()])&&u.indexOf(s.name)===-1;)l.push(s),u.push(s.name);for(var f={};s=l.pop();)if(s.layout&&(f.layout=li.extendLayout(f.layout,s.layout)),s.data){if(f.data||(f.data=[]),n=s.traces,!n)for(n=[],i=0;i<s.data.length;i++)n[i]=i;for(f.traces||(f.traces=[]),i=0;i<s.data.length;i++)a=n[i],a!=null&&(o=f.traces.indexOf(a),o===-1&&(o=f.data.length,f.traces[o]=a),f.data[o]=li.extendTrace(f.data[o],s.data[i]))}return f};li.recomputeFrameHash=function(e){for(var t=e._transitionData._frameHash={},r=e._transitionData._frames,i=0;i<r.length;i++){var n=r[i];n&&n.name&&(t[n.name]=n)}};li.extendObjectWithContainers=function(e,t,r){var i,n,a,o,s,l,u,f,c=ki.extendDeepNoArrays({},t||{}),h=ki.expandObjectPaths(c),v={};if(r&&r.length)for(a=0;a<r.length;a++)i=ki.nestedProperty(h,r[a]),n=i.get(),n===void 0?ki.nestedProperty(v,r[a]).set(null):(i.set(null),ki.nestedProperty(v,r[a]).set(n));if(e=ki.extendDeepNoArrays(e||{},h),r&&r.length){for(a=0;a<r.length;a++)if(s=ki.nestedProperty(v,r[a]),u=s.get(),!!u){for(l=ki.nestedProperty(e,r[a]),f=l.get(),Array.isArray(f)||(f=[],l.set(f)),o=0;o<u.length;o++){var d=u[o];d===null?f[o]=null:f[o]=li.extendObjectWithContainers(f[o],d)}l.set(f)}}return e};li.dataArrayContainers=["transforms","dimensions"];li.layoutArrayContainers=Ho.layoutArrayContainers;li.extendTrace=function(e,t){return li.extendObjectWithContainers(e,t,li.dataArrayContainers)};li.extendLayout=function(e,t){return li.extendObjectWithContainers(e,t,li.layoutArrayContainers)};li.transition=function(e,t,r,i,n,a){var o={redraw:n.redraw},s={},l=[];return o.prepareFn=function(){for(var u=Array.isArray(t)?t.length:0,f=i.slice(0,u),c=0;c<f.length;c++){var h=f[c],v=e._fullData[h],d=v._module;if(d){if(d.animatable){var _=d.basePlotModule.name;s[_]||(s[_]=[]),s[_].push(h)}e.data[f[c]]=li.extendTrace(e.data[f[c]],t[c])}}var T=ki.expandObjectPaths(ki.extendDeepNoArrays({},r)),p=/^[xy]axis[0-9]*$/;for(var M in T)p.test(M)&&delete T[M].range;li.extendLayout(e.layout,T),delete e.calcdata,li.supplyDefaults(e),li.doCalcdata(e);var b=ki.expandObjectPaths(r);if(b){var w=e._fullLayout._plots;for(var k in w){var x=w[k],E=x.xaxis,S=x.yaxis,g=E.range.slice(),C=S.range.slice(),A=null,P=null,D=null,z=null;Array.isArray(b[E._name+".range"])?A=b[E._name+".range"].slice():Array.isArray((b[E._name]||{}).range)&&(A=b[E._name].range.slice()),Array.isArray(b[S._name+".range"])?P=b[S._name+".range"].slice():Array.isArray((b[S._name]||{}).range)&&(P=b[S._name].range.slice()),g&&A&&(E.r2l(g[0])!==E.r2l(A[0])||E.r2l(g[1])!==E.r2l(A[1]))&&(D={xr0:g,xr1:A}),C&&P&&(S.r2l(C[0])!==S.r2l(P[0])||S.r2l(C[1])!==S.r2l(P[1]))&&(z={yr0:C,yr1:P}),(D||z)&&l.push(ki.extendFlat({plotinfo:x},D,z))}}return Promise.resolve()},o.runFn=function(u){var f,c=e._fullLayout._basePlotModules,h=l.length,v;if(r)for(v=0;v<c.length;v++)c[v].transitionAxes&&c[v].transitionAxes(e,l,a,u);h?(f=ki.extendFlat({},a),f.duration=0,delete s.cartesian):f=a;for(var d in s){var _=s[d],T=e._fullData[_[0]]._module;T.basePlotModule.plot(e,_,f,u)}},lre(e,a,o)};li.transitionFromReact=function(e,t,r,i){var n=e._fullLayout,a=n.transition,o={},s=[];return o.prepareFn=function(){var l=n._plots;o.redraw=!1,t.anim==="some"&&(o.redraw=!0),r.anim==="some"&&(o.redraw=!0);for(var u in l){var f=l[u],c=f.xaxis,h=f.yaxis,v=i[c._name].range.slice(),d=i[h._name].range.slice(),_=c.range.slice(),T=h.range.slice();c.setScale(),h.setScale();var p=null,M=null;(c.r2l(v[0])!==c.r2l(_[0])||c.r2l(v[1])!==c.r2l(_[1]))&&(p={xr0:v,xr1:_}),(h.r2l(d[0])!==h.r2l(T[0])||h.r2l(d[1])!==h.r2l(T[1]))&&(M={yr0:d,yr1:T}),(p||M)&&s.push(ki.extendFlat({plotinfo:f},p,M))}return Promise.resolve()},o.runFn=function(l){for(var u=e._fullData,f=e._fullLayout,c=f._basePlotModules,h,v,d,_=[],T=0;T<u.length;T++)_.push(T);function p(){if(e._fullLayout)for(var b=0;b<c.length;b++)c[b].transitionAxes&&c[b].transitionAxes(e,s,h,l)}function M(){if(e._fullLayout)for(var b=0;b<c.length;b++)c[b].plot(e,d,v,l)}s.length&&t.anim?a.ordering==="traces first"?(h=ki.extendFlat({},a,{duration:0}),d=_,v=a,setTimeout(p,a.duration),M()):(h=a,d=null,v=ki.extendFlat({},a,{duration:0}),setTimeout(M,h.duration),p()):s.length?(h=a,p()):t.anim&&(d=_,v=a,M())},lre(e,a,o)};function lre(e,t,r){var i=!1;function n(c){var h=Promise.resolve();if(!c)return h;for(;c.length;)h=h.then(c.shift());return h}function a(c){if(c)for(;c.length;)c.shift()}function o(){return e.emit("plotly_transitioning",[]),new Promise(function(c){e._transitioning=!0,t.duration>0&&(e._transitioningWithDuration=!0),e._transitionData._interruptCallbacks.push(function(){i=!0}),r.redraw&&e._transitionData._interruptCallbacks.push(function(){return Ho.call("redraw",e)}),e._transitionData._interruptCallbacks.push(function(){e.emit("plotly_transitioninterrupted",[])});var h=0,v=0;function d(){return h++,function(){v++,!i&&v===h&&s(c)}}r.runFn(d),setTimeout(d())})}function s(c){if(e._transitionData)return a(e._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(r.redraw)return Ho.call("redraw",e)}).then(function(){e._transitioning=!1,e._transitioningWithDuration=!1,e.emit("plotly_transitioned",[])}).then(c)}function l(){if(e._transitionData)return e._transitioning=!1,n(e._transitionData._interruptCallbacks)}var u=[li.previousPromises,l,r.prepareFn,li.rehover,li.reselect,o],f=ki.syncOrAsync(u,e);return(!f||!f.then)&&(f=Promise.resolve()),f.then(function(){return e})}li.doCalcdata=function(e,t){var r=ed.list(e),i=e._fullData,n=e._fullLayout,a,o,s,l,u=new Array(i.length),f=(e.calcdata||[]).slice();for(e.calcdata=u,n._numBoxes=0,n._numViolins=0,n._violinScaleGroupStats={},e._hmpixcount=0,e._hmlumcount=0,n._piecolormap={},n._sunburstcolormap={},n._treemapcolormap={},n._iciclecolormap={},n._funnelareacolormap={},s=0;s<i.length;s++)if(Array.isArray(t)&&t.indexOf(s)===-1){u[s]=f[s];continue}for(s=0;s<i.length;s++)a=i[s],a._arrayAttrs=rre.findArrayAttributes(a),a._extremes={};var c=n._subplots.polar||[];for(s=0;s<c.length;s++)r.push(n[c[s]].radialaxis,n[c[s]].angularaxis);for(var h in n._colorAxes){var v=n[h];v.cauto!==!1&&(delete v.cmin,delete v.cmax)}var d=!1;function _(M){if(a=i[M],o=a._module,a.visible===!0&&a.transforms){if(o&&o.calc){var b=o.calc(e,a);b[0]&&b[0].t&&b[0].t._scene&&delete b[0].t._scene.dirty}for(l=0;l<a.transforms.length;l++){var w=a.transforms[l];o=cC[w.type],o&&o.calcTransform&&(a._hasCalcTransform=!0,d=!0,o.calcTransform(e,a,w))}}}function T(M,b){if(a=i[M],o=a._module,!!o.isContainer===b){var w=[];if(a.visible===!0&&a._length!==0){delete a._indexToPoints;var k=a.transforms||[];for(l=k.length-1;l>=0;l--)if(k[l].enabled){a._indexToPoints=k[l]._indexToPoints;break}o&&o.calc&&(w=o.calc(e,a))}(!Array.isArray(w)||!w[0])&&(w=[{x:Kte,y:Kte}]),w[0].t||(w[0].t={}),w[0].trace=a,u[M]=w}}for($te(r,i,n),s=0;s<i.length;s++)T(s,!0);for(s=0;s<i.length;s++)_(s);for(d&&$te(r,i,n),s=0;s<i.length;s++)T(s,!0);for(s=0;s<i.length;s++)T(s,!1);ere(e);var p=Ort(r,e);if(p.length){for(n._numBoxes=0,n._numViolins=0,s=0;s<p.length;s++)T(p[s],!0);for(s=0;s<p.length;s++)T(p[s],!1);ere(e)}Ho.getComponentMethod("fx","calc")(e),Ho.getComponentMethod("errorbars","calc")(e)};var zrt=/(total|sum|min|max|mean|median) (ascending|descending)/;function Ort(e,t){var r=[],i,n,a,o,s;function l(F,N,Z){var J=N._id.charAt(0);if(F==="histogram2dcontour"){var re=N._counterAxes[0],ue=ed.getFromId(t,re),fe=J==="x"||re==="x"&&ue.type==="category",K=J==="y"||re==="y"&&ue.type==="category";return function(X,ae){return X===0||ae===0||fe&&X===Z[ae].length-1||K&&ae===Z.length-1?-1:(J==="y"?ae:X)-1}}else return function(X,ae){return J==="y"?ae:X}}var u={min:function(F){return ki.aggNums(Math.min,null,F)},max:function(F){return ki.aggNums(Math.max,null,F)},sum:function(F){return ki.aggNums(function(N,Z){return N+Z},null,F)},total:function(F){return ki.aggNums(function(N,Z){return N+Z},null,F)},mean:function(F){return ki.mean(F)},median:function(F){return ki.median(F)}};function f(F,N){return F[1]-N[1]}function c(F,N){return N[1]-F[1]}for(i=0;i<e.length;i++){var h=e[i];if(h.type==="category"){var v=h.categoryorder.match(zrt);if(v){var d=v[1],_=v[2],T=h._id.charAt(0),p=T==="x",M=[];for(n=0;n<h._categories.length;n++)M.push([h._categories[n],[]]);for(n=0;n<h._traceIndices.length;n++){var b=h._traceIndices[n],w=t._fullData[b];if(w.visible===!0){var k=w.type;Ho.traceIs(w,"histogram")&&(delete w._xautoBinFinished,delete w._yautoBinFinished);var x=k==="splom",E=k==="scattergl",S=t.calcdata[b];for(a=0;a<S.length;a++){var g=S[a],C,A;if(x){var P=w._axesDim[h._id];if(!p){var D=w._diag[P][0];D&&(h=t._fullLayout[ed.id2name(D)])}var z=g.trace.dimensions[P].values;for(o=0;o<z.length;o++)for(C=h._categoriesMap[z[o]],s=0;s<g.trace.dimensions.length;s++)if(s!==P){var O=g.trace.dimensions[s];M[C][1].push(O.values[o])}}else if(E){for(o=0;o<g.t.x.length;o++)p?(C=g.t.x[o],A=g.t.y[o]):(C=g.t.y[o],A=g.t.x[o]),M[C][1].push(A);g.t&&g.t._scene&&delete g.t._scene.dirty}else if(g.hasOwnProperty("z")){A=g.z;var V=l(w.type,h,A);for(o=0;o<A.length;o++)for(s=0;s<A[o].length;s++)C=V(s,o),C+1&&M[C][1].push(A[o][s])}else for(C=g.p,C===void 0&&(C=g[T]),A=g.s,A===void 0&&(A=g.v),A===void 0&&(A=p?g.y:g.x),Array.isArray(A)||(A===void 0?A=[]:A=[A]),o=0;o<A.length;o++)M[C][1].push(A[o])}}}h._categoriesValue=M;var B=[];for(n=0;n<M.length;n++)B.push([M[n][0],u[d](M[n][1])]);B.sort(_==="descending"?c:f),h._categoriesAggregatedValue=B,h._initialCategories=B.map(function(F){return F[0]}),r=r.concat(h.sortByInitialCategories())}}}return r}function $te(e,t,r){var i={};function n(l){l.clearCalc(),l.type==="multicategory"&&l.setupMultiCategory(t),i[l._id]=1}ki.simpleMap(e,n);for(var a=r._axisMatchGroups||[],o=0;o<a.length;o++)for(var s in a[o])i[s]||n(r[ed.id2name(s)])}function ere(e){var t=e._fullLayout,r=t._visibleModules,i={},n,a,o;for(a=0;a<r.length;a++){var s=r[a],l=s.crossTraceCalc;if(l){var u=s.basePlotModule.name;i[u]?ki.pushUnique(i[u],l):i[u]=[l]}}for(o in i){var f=i[o],c=t._subplots[o];if(Array.isArray(c))for(n=0;n<c.length;n++){var h=c[n],v=o==="cartesian"?t._plots[h]:t[h];for(a=0;a<f.length;a++)f[a](e,v,h)}else for(a=0;a<f.length;a++)f[a](e)}}li.rehover=function(e){e._fullLayout._rehover&&e._fullLayout._rehover()};li.redrag=function(e){e._fullLayout._redrag&&e._fullLayout._redrag()};li.reselect=function(e){var t=e._fullLayout,r=(e.layout||{}).selections,i=t._previousSelections;t._previousSelections=r;var n=t._reselect||JSON.stringify(r)!==JSON.stringify(i);Ho.getComponentMethod("selections","reselect")(e,n)};li.generalUpdatePerTraceModule=function(e,t,r,i){var n=t.traceHash,a={},o;for(o=0;o<r.length;o++){var s=r[o],l=s[0].trace;l.visible&&(a[l.type]=a[l.type]||[],a[l.type].push(s))}for(var u in n)if(!a[u]){var f=n[u][0],c=f[0].trace;c.visible=!1,a[u]=[f]}for(var h in a){var v=a[h],d=v[0][0].trace._module;d.plot(e,t,ki.filterVisible(v),i)}t.traceHash=a};li.plotBasePlot=function(e,t,r,i,n){var a=Ho.getModule(e),o=Mrt(t.calcdata,a)[0];a.plot(t,o,i,n)};li.cleanBasePlot=function(e,t,r,i,n){var a=n._has&&n._has(e),o=r._has&&r._has(e);a&&!o&&n["_"+e+"layer"].selectAll("g.trace").remove()}});var kd=ne(fx=>{"use strict";fx.xmlns="http://www.w3.org/2000/xmlns/";fx.svg="http://www.w3.org/2000/svg";fx.xlink="http://www.w3.org/1999/xlink";fx.svgAttrs={xmlns:fx.svg,"xmlns:xlink":fx.xlink}});var Tf=ne((Uer,fre)=>{"use strict";fre.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}});var Es=ne($d=>{"use strict";var Qu=Ai(),zg=Wt(),Brt=zg.strTranslate,ez=kd(),Nrt=Tf().LINE_SPACING,Urt=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;$d.convertToTspans=function(e,t,r){var i=e.text(),n=!e.attr("data-notex")&&t&&t._context.typesetMath&&typeof MathJax!="undefined"&&i.match(Urt),a=Qu.select(e.node().parentNode);if(a.empty())return;var o=e.attr("class")?e.attr("class").split(" ")[0]:"text";o+="-math",a.selectAll("svg."+o).remove(),a.selectAll("g."+o+"-group").remove(),e.style("display",null).attr({"data-unformatted":i,"data-math":"N"});function s(){a.empty()||(o=e.attr("class")+"-math",a.select("svg."+o).remove()),e.text("").style("white-space","pre");var l=ent(e.node(),i);l&&e.style("pointer-events","all"),$d.positionText(e),r&&r.call(e)}return n?(t&&t._promises||[]).push(new Promise(function(l){e.style("display","none");var u=parseInt(e.node().style.fontSize,10),f={fontSize:u};Yrt(n[2],f,function(c,h,v){a.selectAll("svg."+o).remove(),a.selectAll("g."+o+"-group").remove();var d=c&&c.select("svg");if(!d||!d.node()){s(),l();return}var _=a.append("g").classed(o+"-group",!0).attr({"pointer-events":"none","data-unformatted":i,"data-math":"Y"});_.node().appendChild(d.node()),h&&h.node()&&d.node().insertBefore(h.node().cloneNode(!0),d.node().firstChild);var T=v.width,p=v.height;d.attr({class:o,height:p,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var M=e.node().style.fill||"black",b=d.select("g");b.attr({fill:M,stroke:M});var w=b.node().getBoundingClientRect(),k=w.width,x=w.height;(k>T||x>p)&&(d.style("overflow","hidden"),w=d.node().getBoundingClientRect(),k=w.width,x=w.height);var E=+e.attr("x"),S=+e.attr("y"),g=u||e.node().getBoundingClientRect().height,C=-g/4;if(o[0]==="y")_.attr({transform:"rotate("+[-90,E,S]+")"+Brt(-k/2,C-x/2)});else if(o[0]==="l")S=C-x/2;else if(o[0]==="a"&&o.indexOf("atitle")!==0)E=0,S=C;else{var A=e.attr("text-anchor");E=E-k*(A==="middle"?.5:A==="end"?1:0),S=S+C-x/2}d.attr({x:E,y:S}),r&&r.call(e,_),l(_)})})):s(),e};var Vrt=/(<|&lt;|&#60;)/g,Hrt=/(>|&gt;|&#62;)/g;function Grt(e){return e.replace(Vrt,"\\lt ").replace(Hrt,"\\gt ")}var cre=[["$","$"],["\\(","\\)"]];function Yrt(e,t,r){var i=parseInt((MathJax.version||"").split(".")[0]);if(i!==2&&i!==3){zg.warn("No MathJax version:",MathJax.version);return}var n,a,o,s,l=function(){return a=zg.extendDeepAll({},MathJax.Hub.config),o=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:cre},displayAlign:"left"})},u=function(){a=zg.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=cre},f=function(){if(n=MathJax.Hub.config.menuSettings.renderer,n!=="SVG")return MathJax.Hub.setRenderer("SVG")},c=function(){n=MathJax.config.startup.output,n!=="svg"&&(MathJax.config.startup.output="svg")},h=function(){var M="math-output-"+zg.randstr({},64);s=Qu.select("body").append("div").attr({id:M}).style({visibility:"hidden",position:"absolute","font-size":t.fontSize+"px"}).text(Grt(e));var b=s.node();return i===2?MathJax.Hub.Typeset(b):MathJax.typeset([b])},v=function(){var M=s.select(i===2?".MathJax_SVG":".MathJax"),b=!M.empty()&&s.select("svg").node();if(!b)zg.log("There was an error in the tex syntax.",e),r();else{var w=b.getBoundingClientRect(),k;i===2?k=Qu.select("body").select("#MathJax_SVG_glyphs"):k=M.select("defs"),r(M,k,w)}s.remove()},d=function(){if(n!=="SVG")return MathJax.Hub.setRenderer(n)},_=function(){n!=="svg"&&(MathJax.config.startup.output=n)},T=function(){return o!==void 0&&(MathJax.Hub.processSectionDelay=o),MathJax.Hub.Config(a)},p=function(){MathJax.config=a};i===2?MathJax.Hub.Queue(l,f,h,v,d,T):i===3&&(u(),c(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){h(),v(),_(),p()}))}var pre={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},Wrt={sub:"0.3em",sup:"-0.6em"},Xrt={sub:"-0.21em",sup:"0.42em"},hre="\u200B",vre=["http:","https:","mailto:","",void 0,":"],gre=$d.NEWLINES=/(\r\n?|\n)/g,rz=/(<[^<>]*>)/,nz=/<(\/?)([^ >]*)(\s+(.*))?>/i,Zrt=/<br(\s+.*)?>/i;$d.BR_TAG_ALL=/<br(\s+.*)?>/gi;var yre=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,mre=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,xre=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,jrt=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function cx(e,t){if(!e)return null;var r=e.match(t),i=r&&(r[3]||r[4]);return i&&vC(i)}var Krt=/(^|;)\s*color:/;$d.plainText=function(e,t){t=t||{};for(var r=t.len!==void 0&&t.len!==-1?t.len:1/0,i=t.allowedTags!==void 0?t.allowedTags:["br"],n="...",a=n.length,o=e.split(rz),s=[],l="",u=0,f=0;f<o.length;f++){var c=o[f],h=c.match(nz),v=h&&h[2].toLowerCase();if(v)i.indexOf(v)!==-1&&(s.push(c),l=v);else{var d=c.length;if(u+d<r)s.push(c),u+=d;else if(u<r){var _=r-u;l&&(l!=="br"||_<=a||d<=a)&&s.pop(),r>a?s.push(c.substr(0,_-a)+n):s.push(c.substr(0,_));break}l=""}}return s.join("")};var Jrt={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},Qrt=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function vC(e){return e.replace(Qrt,function(t,r){var i;return r.charAt(0)==="#"?i=$rt(r.charAt(1)==="x"?parseInt(r.substr(2),16):parseInt(r.substr(1),10)):i=Jrt[r],i||t})}$d.convertEntities=vC;function $rt(e){if(!(e>1114111)){var t=String.fromCodePoint;if(t)return t(e);var r=String.fromCharCode;return e<=65535?r(e):r((e>>10)+55232,e%1024+56320)}}function ent(e,t){t=t.replace(gre," ");var r=!1,i=[],n,a=-1;function o(){a++;var x=document.createElementNS(ez.svg,"tspan");Qu.select(x).attr({class:"line",dy:a*Nrt+"em"}),e.appendChild(x),n=x;var E=i;if(i=[{node:x}],E.length>1)for(var S=1;S<E.length;S++)s(E[S])}function s(x){var E=x.type,S={},g;if(E==="a"){g="a";var C=x.target,A=x.href,P=x.popup;A&&(S={"xlink:xlink:show":C==="_blank"||C.charAt(0)!=="_"?"new":"replace",target:C,"xlink:xlink:href":A},P&&(S.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+P+'");return false;'))}else g="tspan";x.style&&(S.style=x.style);var D=document.createElementNS(ez.svg,g);if(E==="sup"||E==="sub"){l(n,hre),n.appendChild(D);var z=document.createElementNS(ez.svg,"tspan");l(z,hre),Qu.select(z).attr("dy",Xrt[E]),S.dy=Wrt[E],n.appendChild(D),n.appendChild(z)}else n.appendChild(D);Qu.select(D).attr(S),n=x.node=D,i.push(x)}function l(x,E){x.appendChild(document.createTextNode(E))}function u(x){if(i.length===1){zg.log("Ignoring unexpected end tag </"+x+">.",t);return}var E=i.pop();x!==E.type&&zg.log("Start tag <"+E.type+"> doesnt match end tag <"+x+">. Pretending it did match.",t),n=i[i.length-1].node}var f=Zrt.test(t);f?o():(n=e,i=[{node:e}]);for(var c=t.split(rz),h=0;h<c.length;h++){var v=c[h],d=v.match(nz),_=d&&d[2].toLowerCase(),T=pre[_];if(_==="br")o();else if(T===void 0)l(n,vC(v));else if(d[1])u(_);else{var p=d[4],M={type:_},b=cx(p,yre);if(b?(b=b.replace(Krt,"$1 fill:"),T&&(b+=";"+T)):T&&(b=T),b&&(M.style=b),_==="a"){r=!0;var w=cx(p,mre);if(w){var k=_re(w);k&&(M.href=k,M.target=cx(p,xre)||"_blank",M.popup=cx(p,jrt))}}s(M)}}return r}function _re(e){var t=encodeURI(decodeURI(e)),r=document.createElement("a"),i=document.createElement("a");r.href=e,i.href=t;var n=r.protocol,a=i.protocol;return vre.indexOf(n)!==-1&&vre.indexOf(a)!==-1?t:""}$d.sanitizeHTML=function(t){t=t.replace(gre," ");for(var r=document.createElement("p"),i=r,n=[],a=t.split(rz),o=0;o<a.length;o++){var s=a[o],l=s.match(nz),u=l&&l[2].toLowerCase();if(u in pre)if(l[1])n.length&&(i=n.pop());else{var f=l[4],c=cx(f,yre),h=c?{style:c}:{};if(u==="a"){var v=cx(f,mre);if(v){var d=_re(v);if(d){h.href=d;var _=cx(f,xre);_&&(h.target=_)}}}var T=document.createElement(u);i.appendChild(T),Qu.select(T).attr(h),i=T,n.push(T)}else i.appendChild(document.createTextNode(vC(s)))}var p="innerHTML";return r[p]};$d.lineCount=function(t){return t.selectAll("tspan.line").size()||1};$d.positionText=function(t,r,i){return t.each(function(){var n=Qu.select(this);function a(l,u){return u===void 0?(u=n.attr(l),u===null&&(n.attr(l,0),u=0)):n.attr(l,u),u}var o=a("x",r),s=a("y",i);this.nodeName==="text"&&n.selectAll("tspan.line").attr({x:o,y:s})})};function dre(e,t,r){var i=r.horizontalAlign,n=r.verticalAlign||"top",a=e.node().getBoundingClientRect(),o=t.node().getBoundingClientRect(),s,l,u;return n==="bottom"?l=function(){return a.bottom-s.height}:n==="middle"?l=function(){return a.top+(a.height-s.height)/2}:l=function(){return a.top},i==="right"?u=function(){return a.right-s.width}:i==="center"?u=function(){return a.left+(a.width-s.width)/2}:u=function(){return a.left},function(){s=this.node().getBoundingClientRect();var f=u()-o.left,c=l()-o.top,h=r.gd||{};if(r.gd){h._fullLayout._calcInverseTransform(h);var v=zg.apply3DTransform(h._fullLayout._invTransform)(f,c);f=v[0],c=v[1]}return this.style({top:c+"px",left:f+"px","z-index":1e3}),this}}var tz="1px ";$d.makeTextShadow=function(e){var t=tz,r=tz,i=tz;return t+r+i+e+", -"+t+"-"+r+i+e+", "+t+"-"+r+i+e+", -"+t+r+i+e};$d.makeEditable=function(e,t){var r=t.gd,i=t.delegate,n=Qu.dispatch("edit","input","cancel"),a=i||e;if(e.style({"pointer-events":i?"none":"all"}),e.size()!==1)throw new Error("boo");function o(){l(),e.style({opacity:0});var u=a.attr("class"),f;u?f="."+u.split(" ")[0]+"-math-group":f="[class*=-math-group]",f&&Qu.select(e.node().parentNode).select(f).style({opacity:0})}function s(u){var f=u.node(),c=document.createRange();c.selectNodeContents(f);var h=window.getSelection();h.removeAllRanges(),h.addRange(c),f.focus()}function l(){var u=Qu.select(r),f=u.select(".svg-container"),c=f.append("div"),h=e.node().style,v=parseFloat(h.fontSize||12),d=t.text;d===void 0&&(d=e.attr("data-unformatted")),c.classed("plugin-editable editable",!0).style({position:"absolute","font-family":h.fontFamily||"Arial","font-size":v,color:t.fill||h.fill||"black",opacity:1,"background-color":t.background||"transparent",outline:"#ffffff33 1px solid",margin:[-v/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(d).call(dre(e,f,t)).on("blur",function(){r._editing=!1,e.text(this.textContent).style({opacity:1});var _=Qu.select(this).attr("class"),T;_?T="."+_.split(" ")[0]+"-math-group":T="[class*=-math-group]",T&&Qu.select(e.node().parentNode).select(T).style({opacity:0});var p=this.textContent;Qu.select(this).transition().duration(0).remove(),Qu.select(document).on("mouseup",null),n.edit.call(e,p)}).on("focus",function(){var _=this;r._editing=!0,Qu.select(document).on("mouseup",function(){if(Qu.event.target===_)return!1;document.activeElement===c.node()&&c.node().blur()})}).on("keyup",function(){Qu.event.which===27?(r._editing=!1,e.style({opacity:1}),Qu.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),n.cancel.call(e,this.textContent)):(n.input.call(e,this.textContent),Qu.select(this).call(dre(e,f,t)))}).on("keydown",function(){Qu.event.which===13&&this.blur()}).call(s)}return t.immediate?o():a.on("click",o),Qu.rebind(e,n,"on")}});var Uh=ne((Her,kre)=>{"use strict";var tnt=Ai(),pC=Xf(),SA=la(),dC=Wt(),bre=_i(),rnt=J1().isValid;function nnt(e,t,r){var i=t?dC.nestedProperty(e,t).get()||{}:e,n=i[r||"color"];n&&n._inputArray&&(n=n._inputArray);var a=!1;if(dC.isArrayOrTypedArray(n)){for(var o=0;o<n.length;o++)if(SA(n[o])){a=!0;break}}return dC.isPlainObject(i)&&(a||i.showscale===!0||SA(i.cmin)&&SA(i.cmax)||rnt(i.colorscale)||dC.isPlainObject(i.colorbar))}var wre=["showscale","autocolorscale","colorscale","reversescale","colorbar"],MA=["min","max","mid","auto"];function Are(e){var t=e._colorAx,r=t||e,i={},n,a,o;for(a=0;a<wre.length;a++)o=wre[a],i[o]=r[o];if(t)for(n="c",a=0;a<MA.length;a++)o=MA[a],i[o]=r["c"+o];else{var s;for(a=0;a<MA.length;a++){if(o=MA[a],s="c"+o,s in r){i[o]=r[s];continue}s="z"+o,s in r&&(i[o]=r[s])}n=s.charAt(0)}return i._sync=function(l,u){var f=MA.indexOf(l)!==-1?n+l:l;r[f]=r["_"+f]=u},i}function Mre(e){for(var t=Are(e),r=t.min,i=t.max,n=t.reversescale?Sre(t.colorscale):t.colorscale,a=n.length,o=new Array(a),s=new Array(a),l=0;l<a;l++){var u=n[l];o[l]=r+u[0]*(i-r),s[l]=u[1]}return{domain:o,range:s}}function Sre(e){for(var t=e.length,r=new Array(t),i=t-1,n=0;i>=0;i--,n++){var a=e[i];r[n]=[1-a[0],a[1]]}return r}function Ere(e,t){t=t||{};for(var r=e.domain,i=e.range,n=i.length,a=new Array(n),o=0;o<n;o++){var s=pC(i[o]).toRgb();a[o]=[s.r,s.g,s.b,s.a]}var l=tnt.scale.linear().domain(r).range(a).clamp(!0),u=t.noNumericCheck,f=t.returnArray,c;return u&&f?c=l:u?c=function(h){return Tre(l(h))}:f?c=function(h){return SA(h)?l(h):pC(h).isValid()?h:bre.defaultLine}:c=function(h){return SA(h)?Tre(l(h)):pC(h).isValid()?h:bre.defaultLine},c.domain=l.domain,c.range=function(){return i},c}function int(e,t){return Ere(Mre(e),t)}function Tre(e){var t={r:e[0],g:e[1],b:e[2],a:e[3]};return pC(t).toRgbString()}kre.exports={hasColorscale:nnt,extractOpts:Are,extractScale:Mre,flipScale:Sre,makeColorScaleFunc:Ere,makeColorScaleFuncFromTrace:int}});var kl=ne((Ger,Pre)=>{"use strict";var Cre=Aq(),ant=Cre.FORMAT_LINK,ont=Cre.DATE_FORMAT_LINK;function snt(e,t){return{valType:"string",dflt:"",editType:"none",description:(t?iz:Lre)("hover text",e)+["By default the values are formatted using "+(t?"generic number format":"`"+e+"axis.hoverformat`")+"."].join(" ")}}function iz(e,t){return["Sets the "+e+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+ant+"."].join(" ")}function Lre(e,t){return iz(e,t)+[" And for dates see: "+ont+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}Pre.exports={axisHoverFormat:snt,descriptionOnlyNumbers:iz,descriptionWithDates:Lre}});var dc=ne((Yer,Xre)=>{"use strict";var az=ll(),h2=Ku(),Wre=hc().dash,sz=oa().extendFlat,Rre=So().templatedArray,Dre=kl().descriptionWithDates,lnt=$a().ONEDAY,q0=wf(),unt=q0.HOUR_PATTERN,fnt=q0.WEEKDAY_PATTERN,oz={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},cnt=sz({},oz,{values:oz.values.slice().concat(["sync"])});function Ire(e){return{valType:"integer",min:0,dflt:e?5:0,editType:"ticks"}}var Fre={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},qre={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},zre={valType:"data_array",editType:"ticks"},Ore={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function Bre(e){var t={valType:"number",min:0,editType:"ticks"};return e||(t.dflt=5),t}function Nre(e){var t={valType:"number",min:0,editType:"ticks"};return e||(t.dflt=1),t}var Ure={valType:"color",dflt:h2.defaultLine,editType:"ticks"},Vre={valType:"color",dflt:h2.lightLine,editType:"ticks"};function Hre(e){var t={valType:"number",min:0,editType:"ticks"};return e||(t.dflt=1),t}var Gre=sz({},Wre,{editType:"ticks"}),Yre={valType:"boolean",editType:"ticks"};Xre.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:h2.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:az({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[q0.idRegex.x.toString(),q0.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[q0.idRegex.x.toString(),q0.idRegex.y.toString()],editType:"calc"},rangebreaks:Rre("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[fnt,unt,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:lnt},editType:"calc"}),tickmode:cnt,nticks:Ire(),tick0:Fre,dtick:qre,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:zre,ticktext:{valType:"data_array",editType:"ticks"},ticks:Ore,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:Bre(),tickwidth:Nre(),tickcolor:Ure,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:sz({},Wre,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:az({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:Dre("tick label")},tickformatstops:Rre("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:Dre("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:h2.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:Yre,gridcolor:Vre,gridwidth:Hre(),griddash:Gre,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:h2.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:h2.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",q0.idRegex.x.toString(),q0.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",q0.idRegex.x.toString(),q0.idRegex.y.toString()],editType:"plot"},minor:{tickmode:oz,nticks:Ire("minor"),tick0:Fre,dtick:qre,tickvals:zre,ticks:Ore,ticklen:Bre("minor"),tickwidth:Nre("minor"),tickcolor:Ure,gridcolor:Vre,gridwidth:Hre("minor"),griddash:Gre,showgrid:Yre,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:az({editType:"ticks"})}}});var gC=ne((Wer,jre)=>{"use strict";var _l=dc(),lz=ll(),Zre=oa().extendFlat,hnt=Xs().overrideAll;jre.exports=hnt({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:_l.linecolor,outlinewidth:_l.linewidth,bordercolor:_l.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:_l.minor.tickmode,nticks:_l.nticks,tick0:_l.tick0,dtick:_l.dtick,tickvals:_l.tickvals,ticktext:_l.ticktext,ticks:Zre({},_l.ticks,{dflt:""}),ticklabeloverflow:Zre({},_l.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:_l.ticklen,tickwidth:_l.tickwidth,tickcolor:_l.tickcolor,ticklabelstep:_l.ticklabelstep,showticklabels:_l.showticklabels,labelalias:_l.labelalias,tickfont:lz({}),tickangle:_l.tickangle,tickformat:_l.tickformat,tickformatstops:_l.tickformatstops,tickprefix:_l.tickprefix,showtickprefix:_l.showtickprefix,ticksuffix:_l.ticksuffix,showticksuffix:_l.showticksuffix,separatethousands:_l.separatethousands,exponentformat:_l.exponentformat,minexponent:_l.minexponent,showexponent:_l.showexponent,title:{text:{valType:"string"},font:lz({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:lz({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")});var Ps=ne((Zer,Jre)=>{"use strict";var vnt=gC(),dnt=Kb().counter,pnt=rx(),Kre=J1().scales,Xer=pnt(Kre);function yC(e){return"`"+e+"`"}Jre.exports=function(t,r){t=t||"",r=r||{};var i=r.cLetter||"c",n="onlyIfNumerical"in r?r.onlyIfNumerical:!!t,a="noScale"in r?r.noScale:t==="marker.line",o="showScaleDflt"in r?r.showScaleDflt:i==="z",s=typeof r.colorscaleDflt=="string"?Kre[r.colorscaleDflt]:null,l=r.editTypeOverride||"",u=t?t+".":"",f,c;"colorAttr"in r?(f=r.colorAttr,c=r.colorAttr):(f={z:"z",c:"color"}[i],c="in "+yC(u+f));var h=n?" Has an effect only if "+c+" is set to a numerical array.":"",v=i+"auto",d=i+"min",_=i+"max",T=i+"mid",p=yC(u+v),M=yC(u+d),b=yC(u+_),w=M+" and "+b,k={};k[d]=k[_]=void 0;var x={};x[v]=!1;var E={};return f==="color"&&(E.color={valType:"color",arrayOk:!0,editType:l||"style"},r.anim&&(E.color.anim=!0)),E[v]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:k},E[d]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:x},E[_]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:x},E[T]={valType:"number",dflt:null,editType:"calc",impliedEdits:k},E.colorscale={valType:"colorscale",editType:"calc",dflt:s,impliedEdits:{autocolorscale:!1}},E.autocolorscale={valType:"boolean",dflt:r.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},E.reversescale={valType:"boolean",dflt:!1,editType:"plot"},a||(E.showscale={valType:"boolean",dflt:o,editType:"calc"},E.colorbar=vnt),r.noColorAxis||(E.coloraxis={valType:"subplotid",regex:dnt("coloraxis"),dflt:null,editType:"calc"}),E}});var fz=ne((jer,Qre)=>{"use strict";var gnt=oa().extendFlat,ynt=Ps(),uz=J1().scales;Qre.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:uz.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:uz.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:uz.RdBu,editType:"calc"}},coloraxis:gnt({_isSubplotObj:!0,editType:"calc"},ynt("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}});var cz=ne((Ker,$re)=>{"use strict";var mnt=Wt();$re.exports=function(t){return mnt.isPlainObject(t.colorbar)}});var dz=ne(vz=>{"use strict";var hz=la(),ene=Wt(),tne=$a(),xnt=tne.ONEDAY,_nt=tne.ONEWEEK;vz.dtick=function(e,t){var r=t==="log",i=t==="date",n=t==="category",a=i?xnt:1;if(!e)return a;if(hz(e))return e=Number(e),e<=0?a:n?Math.max(1,Math.round(e)):i?Math.max(.1,e):e;if(typeof e!="string"||!(i||r))return a;var o=e.charAt(0),s=e.substr(1);return s=hz(s)?Number(s):0,s<=0||!(i&&o==="M"&&s===Math.round(s)||r&&o==="L"||r&&o==="D"&&(s===1||s===2))?a:e};vz.tick0=function(e,t,r,i){if(t==="date")return ene.cleanDate(e,ene.dateTick0(r,i%_nt===0?1:0));if(!(i==="D1"||i==="D2"))return hz(e)?Number(e):0}});var hx=ne((Qer,nne)=>{"use strict";var rne=dz(),bnt=Wt().isArrayOrTypedArray,wnt=uh().isTypedArraySpec,Tnt=uh().decodeTypedArraySpec;nne.exports=function(t,r,i,n,a){a||(a={});var o=a.isMinor,s=o?t.minor||{}:t,l=o?r.minor:r,u=o?"minor.":"";function f(M){var b=s[M];return wnt(b)&&(b=Tnt(b)),b!==void 0?b:(l._template||{})[M]}var c=f("tick0"),h=f("dtick"),v=f("tickvals"),d=bnt(v)?"array":h?"linear":"auto",_=i(u+"tickmode",d);if(_==="auto"||_==="sync")i(u+"nticks");else if(_==="linear"){var T=l.dtick=rne.dtick(h,n);l.tick0=rne.tick0(c,n,r.calendar,T)}else if(n!=="multicategory"){var p=i(u+"tickvals");p===void 0?l.tickmode="auto":o||i("ticktext")}}});var v2=ne(($er,ane)=>{"use strict";var pz=Wt(),ine=dc();ane.exports=function(t,r,i,n){var a=n.isMinor,o=a?t.minor||{}:t,s=a?r.minor:r,l=a?ine.minor:ine,u=a?"minor.":"",f=pz.coerce2(o,s,l,"ticklen",a?(r.ticklen||5)*.6:void 0),c=pz.coerce2(o,s,l,"tickwidth",a?r.tickwidth||1:void 0),h=pz.coerce2(o,s,l,"tickcolor",(a?r.tickcolor:void 0)||s.color),v=i(u+"ticks",!a&&n.outerTicks||f||c||h?"outside":"");v||(delete s.ticklen,delete s.tickwidth,delete s.tickcolor)}});var gz=ne((etr,one)=>{"use strict";one.exports=function(t){var r=["showexponent","showtickprefix","showticksuffix"],i=r.filter(function(a){return t[a]!==void 0}),n=function(a){return t[a]===t[i[0]]};if(i.every(n)||i.length===1)return t[i[0]]}});var ch=ne((ttr,sne)=>{"use strict";var mC=Wt(),Ant=So();sne.exports=function(t,r,i){var n=i.name,a=i.inclusionAttr||"visible",o=r[n],s=mC.isArrayOrTypedArray(t[n])?t[n]:[],l=r[n]=[],u=Ant.arrayTemplater(r,n,a),f,c;for(f=0;f<s.length;f++){var h=s[f];mC.isPlainObject(h)?c=u.newItem(h):(c=u.newItem({}),c[a]=!1),c._index=f,c[a]!==!1&&i.handleItemDefaults(h,c,r,i),l.push(c)}var v=u.defaultItems();for(f=0;f<v.length;f++)c=v[f],c._index=l.length,i.handleItemDefaults({},c,r,i,{}),l.push(c);if(mC.isArrayOrTypedArray(o)){var d=Math.min(o.length,l.length);for(f=0;f<d;f++)mC.relinkPrivateKeys(l[f],o[f])}return l}});var im=ne((rtr,une)=>{"use strict";var yz=Wt(),Mnt=_i().contrast,lne=dc(),Snt=gz(),Ent=ch();une.exports=function(t,r,i,n,a){a||(a={});var o=i("labelalias");yz.isPlainObject(o)||delete r.labelalias;var s=Snt(t),l=i("showticklabels");if(l){var u=a.font||{},f=r.color,c=r.ticklabelposition||"",h=c.indexOf("inside")!==-1?Mnt(a.bgColor):f&&f!==lne.color.dflt?f:u.color;if(yz.coerceFont(i,"tickfont",{family:u.family,size:u.size,color:h}),!a.noTicklabelstep&&n!=="multicategory"&&n!=="log"&&i("ticklabelstep"),!a.noAng){var v=i("tickangle");!a.noAutotickangles&&v==="auto"&&i("autotickangles")}if(n!=="category"){var d=i("tickformat");Ent(t,r,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:knt}),r.tickformatstops.length||delete r.tickformatstops,!a.noExp&&!d&&n!=="date"&&(i("showexponent",s),i("exponentformat"),i("minexponent"),i("separatethousands"))}}};function knt(e,t){function r(n,a){return yz.coerce(e,t,lne.tickformatstops,n,a)}var i=r("enabled");i&&(r("dtickrange"),r("value"))}});var am=ne((ntr,fne)=>{"use strict";var Cnt=gz();fne.exports=function(t,r,i,n,a){a||(a={});var o=a.tickSuffixDflt,s=Cnt(t),l=i("tickprefix");l&&i("showtickprefix",s);var u=i("ticksuffix",o);u&&i("showticksuffix",s)}});var mz=ne((itr,cne)=>{"use strict";var om=Wt(),Lnt=So(),Pnt=hx(),Rnt=v2(),Dnt=im(),Int=am(),Fnt=gC();cne.exports=function(t,r,i){var n=Lnt.newContainer(r,"colorbar"),a=t.colorbar||{};function o(A,P){return om.coerce(a,n,Fnt,A,P)}var s=i.margin||{t:0,b:0,l:0,r:0},l=i.width-s.l-s.r,u=i.height-s.t-s.b,f=o("orientation"),c=f==="v",h=o("thicknessmode");o("thickness",h==="fraction"?30/(c?l:u):30);var v=o("lenmode");o("len",v==="fraction"?1:c?u:l);var d=o("yref"),_=o("xref"),T=d==="paper",p=_==="paper",M,b,w,k="left";c?(w="middle",k=p?"left":"right",M=p?1.02:1,b=.5):(w=T?"bottom":"top",k="center",M=.5,b=T?1.02:1),om.coerce(a,n,{x:{valType:"number",min:p?-2:0,max:p?3:1,dflt:M}},"x"),om.coerce(a,n,{y:{valType:"number",min:T?-2:0,max:T?3:1,dflt:b}},"y"),o("xanchor",k),o("xpad"),o("yanchor",w),o("ypad"),om.noneOrAll(a,n,["x","y"]),o("outlinecolor"),o("outlinewidth"),o("bordercolor"),o("borderwidth"),o("bgcolor");var x=om.coerce(a,n,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:c?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");o("ticklabeloverflow",x.indexOf("inside")!==-1?"hide past domain":"hide past div"),Pnt(a,n,o,"linear");var E=i.font,S={noAutotickangles:!0,outerTicks:!1,font:E};x.indexOf("inside")!==-1&&(S.bgColor="black"),Int(a,n,o,"linear",S),Dnt(a,n,o,"linear",S),Rnt(a,n,o,"linear",S),o("title.text",i._dfltTitle.colorbar);var g=n.showticklabels?n.tickfont:E,C=om.extendFlat({},g,{color:E.color,size:om.bigFont(g.size)});om.coerceFont(o,"title.font",C),o("title.side",c?"top":"right")}});var Kf=ne((atr,dne)=>{"use strict";var hne=la(),_z=Wt(),qnt=cz(),znt=mz(),vne=J1().isValid,Ont=wi().traceIs;function xz(e,t){var r=t.slice(0,t.length-1);return t?_z.nestedProperty(e,r).get()||{}:e}dne.exports=function e(t,r,i,n,a){var o=a.prefix,s=a.cLetter,l="_module"in r,u=xz(t,o),f=xz(r,o),c=xz(r._template||{},o)||{},h=function(){return delete t.coloraxis,delete r.coloraxis,e(t,r,i,n,a)};if(l){var v=i._colorAxes||{},d=n(o+"coloraxis");if(d){var _=Ont(r,"contour")&&_z.nestedProperty(r,"contours.coloring").get()||"heatmap",T=v[d];T?(T[2].push(h),T[0]!==_&&(T[0]=!1,_z.warn(["Ignoring coloraxis:",d,"setting","as it is linked to incompatible colorscales."].join(" ")))):v[d]=[_,r,[h]];return}}var p=u[s+"min"],M=u[s+"max"],b=hne(p)&&hne(M)&&p<M,w=n(o+s+"auto",!b);w?n(o+s+"mid"):(n(o+s+"min"),n(o+s+"max"));var k=u.colorscale,x=c.colorscale,E;if(k!==void 0&&(E=!vne(k)),x!==void 0&&(E=!vne(x)),n(o+"autocolorscale",E),n(o+"colorscale"),n(o+"reversescale"),o!=="marker.line."){var S;o&&l&&(S=qnt(u));var g=n(o+"showscale",S);g&&(o&&c&&(f._template=c),znt(u,f,i))}}});var mne=ne((otr,yne)=>{"use strict";var pne=Wt(),Bnt=So(),gne=fz(),Nnt=Kf();yne.exports=function(t,r){function i(c,h){return pne.coerce(t,r,gne,c,h)}i("colorscale.sequential"),i("colorscale.sequentialminus"),i("colorscale.diverging");var n=r._colorAxes,a,o;function s(c,h){return pne.coerce(a,o,gne.coloraxis,c,h)}for(var l in n){var u=n[l];if(u[0])a=t[l]||{},o=Bnt.newContainer(r,l,"coloraxis"),o._name=l,Nnt(a,o,r,s,{prefix:"",cLetter:"c"});else{for(var f=0;f<u[2].length;f++)u[2][f]();delete r._colorAxes[l]}}}});var _ne=ne((str,xne)=>{"use strict";var Unt=Wt(),Vnt=Uh().hasColorscale,Hnt=Uh().extractOpts;xne.exports=function(t,r){function i(f,c){var h=f["_"+c];h!==void 0&&(f[c]=h)}function n(f,c){var h=c.container?Unt.nestedProperty(f,c.container).get():f;if(h)if(h.coloraxis)h._colorAx=r[h.coloraxis];else{var v=Hnt(h),d=v.auto;(d||v.min===void 0)&&i(h,c.min),(d||v.max===void 0)&&i(h,c.max),v.autocolorscale&&i(h,"colorscale")}}for(var a=0;a<t.length;a++){var o=t[a],s=o._module.colorbar;if(s)if(Array.isArray(s))for(var l=0;l<s.length;l++)n(o,s[l]);else n(o,s);Vnt(o,"marker.line")&&n(o,{container:"marker.line",min:"cmin",max:"cmax"})}for(var u in r._colorAxes)n(r[u],{min:"cmin",max:"cmax"})}});var gv=ne((ltr,wne)=>{"use strict";var bne=la(),bz=Wt(),Gnt=Uh().extractOpts;wne.exports=function(t,r,i){var n=t._fullLayout,a=i.vals,o=i.containerStr,s=o?bz.nestedProperty(r,o).get():r,l=Gnt(s),u=l.auto!==!1,f=l.min,c=l.max,h=l.mid,v=function(){return bz.aggNums(Math.min,null,a)},d=function(){return bz.aggNums(Math.max,null,a)};if(f===void 0?f=v():u&&(s._colorAx&&bne(f)?f=Math.min(f,v()):f=v()),c===void 0?c=d():u&&(s._colorAx&&bne(c)?c=Math.max(c,d()):c=d()),u&&h!==void 0&&(c-h>h-f?f=h-(c-h):c-h<h-f&&(c=h+(h-f))),f===c&&(f-=.5,c+=.5),l._sync("min",f),l._sync("max",c),l.autocolorscale){var _;f*c<0?_=n.colorscale.diverging:f>=0?_=n.colorscale.sequential:_=n.colorscale.sequentialminus,l._sync("colorscale",_)}}});var ul=ne((utr,Tne)=>{"use strict";var xC=J1(),d2=Uh();Tne.exports={moduleType:"component",name:"colorscale",attributes:Ps(),layoutAttributes:fz(),supplyLayoutDefaults:mne(),handleDefaults:Kf(),crossTraceDefaults:_ne(),calc:gv(),scales:xC.scales,defaultScale:xC.defaultScale,getScale:xC.get,isValidScale:xC.isValid,hasColorscale:d2.hasColorscale,extractOpts:d2.extractOpts,extractScale:d2.extractScale,flipScale:d2.flipScale,makeColorScaleFunc:d2.makeColorScaleFunc,makeColorScaleFuncFromTrace:d2.makeColorScaleFuncFromTrace}});var js=ne((ftr,Mne)=>{"use strict";var Ane=Wt(),Ynt=uh().isTypedArraySpec;Mne.exports={hasLines:function(e){return e.visible&&e.mode&&e.mode.indexOf("lines")!==-1},hasMarkers:function(e){return e.visible&&(e.mode&&e.mode.indexOf("markers")!==-1||e.type==="splom")},hasText:function(e){return e.visible&&e.mode&&e.mode.indexOf("text")!==-1},isBubble:function(e){var t=e.marker;return Ane.isPlainObject(t)&&(Ane.isArrayOrTypedArray(t.size)||Ynt(t.size))}}});var EA=ne((ctr,Sne)=>{"use strict";var Wnt=la();Sne.exports=function(t,r){r||(r=2);var i=t.marker,n=i.sizeref||1,a=i.sizemin||0,o=i.sizemode==="area"?function(s){return Math.sqrt(s/n)}:function(s){return s/n};return function(s){var l=o(s/r);return Wnt(l)&&l>0?Math.max(l,a):0}}});var td=ne(hh=>{"use strict";var Ene=Wt();hh.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo};hh.isTraceInSubplots=function(e,t){if(e.type==="splom"){for(var r=e.xaxes||[],i=e.yaxes||[],n=0;n<r.length;n++)for(var a=0;a<i.length;a++)if(t.indexOf(r[n]+i[a])!==-1)return!0;return!1}return t.indexOf(hh.getSubplot(e))!==-1};hh.flat=function(e,t){for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=t;return r};hh.p2c=function(e,t){for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=e[i].p2c(t);return r};hh.getDistanceFunction=function(e,t,r,i){return e==="closest"?i||hh.quadrature(t,r):e.charAt(0)==="x"?t:r};hh.getClosest=function(e,t,r){if(r.index!==!1)r.index>=0&&r.index<e.length?r.distance=0:r.index=!1;else for(var i=0;i<e.length;i++){var n=t(e[i]);n<=r.distance&&(r.index=i,r.distance=n)}return r};hh.inbox=function(e,t,r){return e*t<0||e===0?r:1/0};hh.quadrature=function(e,t){return function(r){var i=e(r),n=t(r);return Math.sqrt(i*i+n*n)}};hh.makeEventData=function(e,t,r){var i="index"in e?e.index:e.pointNumber,n={data:t._input,fullData:t,curveNumber:t.index,pointNumber:i};if(t._indexToPoints){var a=t._indexToPoints[i];a.length===1?n.pointIndex=a[0]:n.pointIndices=a}else n.pointIndex=i;return t._module.eventData?n=t._module.eventData(n,e,t,r,i):("xVal"in e?n.x=e.xVal:"x"in e&&(n.x=e.x),"yVal"in e?n.y=e.yVal:"y"in e&&(n.y=e.y),e.xa&&(n.xaxis=e.xa),e.ya&&(n.yaxis=e.ya),e.zLabelVal!==void 0&&(n.z=e.zLabelVal)),hh.appendArrayPointValue(n,t,i),n};hh.appendArrayPointValue=function(e,t,r){var i=t._arrayAttrs;if(i)for(var n=0;n<i.length;n++){var a=i[n],o=kne(a);if(e[o]===void 0){var s=Ene.nestedProperty(t,a).get(),l=Cne(s,r);l!==void 0&&(e[o]=l)}}};hh.appendArrayMultiPointValues=function(e,t,r){var i=t._arrayAttrs;if(i)for(var n=0;n<i.length;n++){var a=i[n],o=kne(a);if(e[o]===void 0){for(var s=Ene.nestedProperty(t,a).get(),l=new Array(r.length),u=0;u<r.length;u++)l[u]=Cne(s,r[u]);e[o]=l}}};var Xnt={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function kne(e){return Xnt[e]||e}function Cne(e,t){if(Array.isArray(t)){if(Array.isArray(e)&&Array.isArray(e[t[0]]))return e[t[0]][t[1]]}else return e[t]}var Znt={x:!0,y:!0},jnt={"x unified":!0,"y unified":!0};hh.isUnifiedHover=function(e){return typeof e!="string"?!1:!!jnt[e]};hh.isXYhover=function(e){return typeof e!="string"?!1:!!Znt[e]}});var kA=ne((vtr,Lne)=>{Lne.exports=Jnt;var wz={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},Knt=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function Jnt(e){var t=[];return e.replace(Knt,function(r,i,n){var a=i.toLowerCase();for(n=$nt(n),a=="m"&&n.length>2&&(t.push([i].concat(n.splice(0,2))),a="l",i=i=="m"?"l":"L");;){if(n.length==wz[a])return n.unshift(i),t.push(n);if(n.length<wz[a])throw new Error("malformed path data");t.push([i].concat(n.splice(0,wz[a])))}}),t}var Qnt=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function $nt(e){var t=e.match(Qnt);return t?t.map(Number):[]}});var zne=ne((dtr,qne)=>{"use strict";var eit=kA(),Jn=Ai().round,Ua="M0,0Z",Pne=Math.sqrt(2),sm=Math.sqrt(3),Tz=Math.PI,Az=Math.cos,Mz=Math.sin;qne.exports={circle:{n:0,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2),n="M"+i+",0A"+i+","+i+" 0 1,1 0,-"+i+"A"+i+","+i+" 0 0,1 "+i+",0Z";return r?Ha(t,r,n):n}},square:{n:1,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2);return Ha(t,r,"M"+i+","+i+"H-"+i+"V-"+i+"H"+i+"Z")}},diamond:{n:2,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.3,2);return Ha(t,r,"M"+i+",0L0,"+i+"L-"+i+",0L0,-"+i+"Z")}},cross:{n:3,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*.4,2),n=Jn(e*1.2,2);return Ha(t,r,"M"+n+","+i+"H"+i+"V"+n+"H-"+i+"V"+i+"H-"+n+"V-"+i+"H-"+i+"V-"+n+"H"+i+"V-"+i+"H"+n+"Z")}},x:{n:4,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*.8/Pne,2),n="l"+i+","+i,a="l"+i+",-"+i,o="l-"+i+",-"+i,s="l-"+i+","+i;return Ha(t,r,"M0,"+i+n+a+o+a+o+s+o+s+n+s+n+"Z")}},"triangle-up":{n:5,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*2/sm,2),n=Jn(e/2,2),a=Jn(e,2);return Ha(t,r,"M-"+i+","+n+"H"+i+"L0,-"+a+"Z")}},"triangle-down":{n:6,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*2/sm,2),n=Jn(e/2,2),a=Jn(e,2);return Ha(t,r,"M-"+i+",-"+n+"H"+i+"L0,"+a+"Z")}},"triangle-left":{n:7,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*2/sm,2),n=Jn(e/2,2),a=Jn(e,2);return Ha(t,r,"M"+n+",-"+i+"V"+i+"L-"+a+",0Z")}},"triangle-right":{n:8,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*2/sm,2),n=Jn(e/2,2),a=Jn(e,2);return Ha(t,r,"M-"+n+",-"+i+"V"+i+"L"+a+",0Z")}},"triangle-ne":{n:9,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*.6,2),n=Jn(e*1.2,2);return Ha(t,r,"M-"+n+",-"+i+"H"+i+"V"+n+"Z")}},"triangle-se":{n:10,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*.6,2),n=Jn(e*1.2,2);return Ha(t,r,"M"+i+",-"+n+"V"+i+"H-"+n+"Z")}},"triangle-sw":{n:11,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*.6,2),n=Jn(e*1.2,2);return Ha(t,r,"M"+n+","+i+"H-"+i+"V-"+n+"Z")}},"triangle-nw":{n:12,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*.6,2),n=Jn(e*1.2,2);return Ha(t,r,"M-"+i+","+n+"V-"+i+"H"+n+"Z")}},pentagon:{n:13,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*.951,2),n=Jn(e*.588,2),a=Jn(-e,2),o=Jn(e*-.309,2),s=Jn(e*.809,2);return Ha(t,r,"M"+i+","+o+"L"+n+","+s+"H-"+n+"L-"+i+","+o+"L0,"+a+"Z")}},hexagon:{n:14,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2),n=Jn(e/2,2),a=Jn(e*sm/2,2);return Ha(t,r,"M"+a+",-"+n+"V"+n+"L0,"+i+"L-"+a+","+n+"V-"+n+"L0,-"+i+"Z")}},hexagon2:{n:15,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2),n=Jn(e/2,2),a=Jn(e*sm/2,2);return Ha(t,r,"M-"+n+","+a+"H"+n+"L"+i+",0L"+n+",-"+a+"H-"+n+"L-"+i+",0Z")}},octagon:{n:16,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*.924,2),n=Jn(e*.383,2);return Ha(t,r,"M-"+n+",-"+i+"H"+n+"L"+i+",-"+n+"V"+n+"L"+n+","+i+"H-"+n+"L-"+i+","+n+"V-"+n+"Z")}},star:{n:17,f:function(e,t,r){if(Va(t))return Ua;var i=e*1.4,n=Jn(i*.225,2),a=Jn(i*.951,2),o=Jn(i*.363,2),s=Jn(i*.588,2),l=Jn(-i,2),u=Jn(i*-.309,2),f=Jn(i*.118,2),c=Jn(i*.809,2),h=Jn(i*.382,2);return Ha(t,r,"M"+n+","+u+"H"+a+"L"+o+","+f+"L"+s+","+c+"L0,"+h+"L-"+s+","+c+"L-"+o+","+f+"L-"+a+","+u+"H-"+n+"L0,"+l+"Z")}},hexagram:{n:18,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*.66,2),n=Jn(e*.38,2),a=Jn(e*.76,2);return Ha(t,r,"M-"+a+",0l-"+n+",-"+i+"h"+a+"l"+n+",-"+i+"l"+n+","+i+"h"+a+"l-"+n+","+i+"l"+n+","+i+"h-"+a+"l-"+n+","+i+"l-"+n+",-"+i+"h-"+a+"Z")}},"star-triangle-up":{n:19,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*sm*.8,2),n=Jn(e*.8,2),a=Jn(e*1.6,2),o=Jn(e*4,2),s="A "+o+","+o+" 0 0 1 ";return Ha(t,r,"M-"+i+","+n+s+i+","+n+s+"0,-"+a+s+"-"+i+","+n+"Z")}},"star-triangle-down":{n:20,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*sm*.8,2),n=Jn(e*.8,2),a=Jn(e*1.6,2),o=Jn(e*4,2),s="A "+o+","+o+" 0 0 1 ";return Ha(t,r,"M"+i+",-"+n+s+"-"+i+",-"+n+s+"0,"+a+s+i+",-"+n+"Z")}},"star-square":{n:21,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.1,2),n=Jn(e*2,2),a="A "+n+","+n+" 0 0 1 ";return Ha(t,r,"M-"+i+",-"+i+a+"-"+i+","+i+a+i+","+i+a+i+",-"+i+a+"-"+i+",-"+i+"Z")}},"star-diamond":{n:22,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.4,2),n=Jn(e*1.9,2),a="A "+n+","+n+" 0 0 1 ";return Ha(t,r,"M-"+i+",0"+a+"0,"+i+a+i+",0"+a+"0,-"+i+a+"-"+i+",0Z")}},"diamond-tall":{n:23,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*.7,2),n=Jn(e*1.4,2);return Ha(t,r,"M0,"+n+"L"+i+",0L0,-"+n+"L-"+i+",0Z")}},"diamond-wide":{n:24,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.4,2),n=Jn(e*.7,2);return Ha(t,r,"M0,"+n+"L"+i+",0L0,-"+n+"L-"+i+",0Z")}},hourglass:{n:25,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2);return Ha(t,r,"M"+i+","+i+"H-"+i+"L"+i+",-"+i+"H-"+i+"Z")},noDot:!0},bowtie:{n:26,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2);return Ha(t,r,"M"+i+","+i+"V-"+i+"L-"+i+","+i+"V-"+i+"Z")},noDot:!0},"circle-cross":{n:27,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2);return Ha(t,r,"M0,"+i+"V-"+i+"M"+i+",0H-"+i+"M"+i+",0A"+i+","+i+" 0 1,1 0,-"+i+"A"+i+","+i+" 0 0,1 "+i+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2),n=Jn(e/Pne,2);return Ha(t,r,"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+i+",0A"+i+","+i+" 0 1,1 0,-"+i+"A"+i+","+i+" 0 0,1 "+i+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2);return Ha(t,r,"M0,"+i+"V-"+i+"M"+i+",0H-"+i+"M"+i+","+i+"H-"+i+"V-"+i+"H"+i+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2);return Ha(t,r,"M"+i+","+i+"L-"+i+",-"+i+"M"+i+",-"+i+"L-"+i+","+i+"M"+i+","+i+"H-"+i+"V-"+i+"H"+i+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.3,2);return Ha(t,r,"M"+i+",0L0,"+i+"L-"+i+",0L0,-"+i+"ZM0,-"+i+"V"+i+"M-"+i+",0H"+i)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.3,2),n=Jn(e*.65,2);return Ha(t,r,"M"+i+",0L0,"+i+"L-"+i+",0L0,-"+i+"ZM-"+n+",-"+n+"L"+n+","+n+"M-"+n+","+n+"L"+n+",-"+n)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.4,2);return Ha(t,r,"M0,"+i+"V-"+i+"M"+i+",0H-"+i)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2);return Ha(t,r,"M"+i+","+i+"L-"+i+",-"+i+"M"+i+",-"+i+"L-"+i+","+i)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.2,2),n=Jn(e*.85,2);return Ha(t,r,"M0,"+i+"V-"+i+"M"+i+",0H-"+i+"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e/2,2),n=Jn(e,2);return Ha(t,r,"M"+i+","+n+"V-"+n+"M"+(i-n)+",-"+n+"V"+n+"M"+n+","+i+"H-"+n+"M-"+n+","+(i-n)+"H"+n)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.2,2),n=Jn(e*1.6,2),a=Jn(e*.8,2);return Ha(t,r,"M-"+i+","+a+"L0,0M"+i+","+a+"L0,0M0,-"+n+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.2,2),n=Jn(e*1.6,2),a=Jn(e*.8,2);return Ha(t,r,"M-"+i+",-"+a+"L0,0M"+i+",-"+a+"L0,0M0,"+n+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.2,2),n=Jn(e*1.6,2),a=Jn(e*.8,2);return Ha(t,r,"M"+a+","+i+"L0,0M"+a+",-"+i+"L0,0M-"+n+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.2,2),n=Jn(e*1.6,2),a=Jn(e*.8,2);return Ha(t,r,"M-"+a+","+i+"L0,0M-"+a+",-"+i+"L0,0M"+n+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.4,2);return Ha(t,r,"M"+i+",0H-"+i)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*1.4,2);return Ha(t,r,"M0,"+i+"V-"+i)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2);return Ha(t,r,"M"+i+",-"+i+"L-"+i+","+i)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2);return Ha(t,r,"M"+i+","+i+"L-"+i+",-"+i)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2),n=Jn(e*2,2);return Ha(t,r,"M0,0L-"+i+","+n+"H"+i+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2),n=Jn(e*2,2);return Ha(t,r,"M0,0L-"+i+",-"+n+"H"+i+"Z")},noDot:!0},"arrow-left":{n:47,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*2,2),n=Jn(e,2);return Ha(t,r,"M0,0L"+i+",-"+n+"V"+n+"Z")},noDot:!0},"arrow-right":{n:48,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*2,2),n=Jn(e,2);return Ha(t,r,"M0,0L-"+i+",-"+n+"V"+n+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2),n=Jn(e*2,2);return Ha(t,r,"M-"+i+",0H"+i+"M0,0L-"+i+","+n+"H"+i+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e,2),n=Jn(e*2,2);return Ha(t,r,"M-"+i+",0H"+i+"M0,0L-"+i+",-"+n+"H"+i+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*2,2),n=Jn(e,2);return Ha(t,r,"M0,-"+n+"V"+n+"M0,0L"+i+",-"+n+"V"+n+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(e,t,r){if(Va(t))return Ua;var i=Jn(e*2,2),n=Jn(e,2);return Ha(t,r,"M0,-"+n+"V"+n+"M0,0L-"+i+",-"+n+"V"+n+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(e,t,r){if(Va(t))return Ua;var i=Tz/2.5,n=2*e*Az(i),a=2*e*Mz(i);return Ha(t,r,"M0,0L"+-n+","+a+"L"+n+","+a+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(e,t,r){if(Va(t))return Ua;var i=Tz/4,n=2*e*Az(i),a=2*e*Mz(i);return Ha(t,r,"M0,0L"+-n+","+a+"A "+2*e+","+2*e+" 0 0 1 "+n+","+a+"Z")},backoff:.4,noDot:!0}};function Va(e){return e===null}var Rne,Dne,Ine,Fne;function Ha(e,t,r){if((!e||e%360===0)&&!t)return r;if(Ine===e&&Fne===t&&Rne===r)return Dne;Ine=e,Fne=t,Rne=r;function i(T,p){var M=Az(T),b=Mz(T),w=p[0],k=p[1]+(t||0);return[w*M-k*b,w*b+k*M]}for(var n=e/180*Tz,a=0,o=0,s=eit(r),l="",u=0;u<s.length;u++){var f=s[u],c=f[0],h=a,v=o;if(c==="M"||c==="L")a=+f[1],o=+f[2];else if(c==="m"||c==="l")a+=+f[1],o+=+f[2];else if(c==="H")a=+f[1];else if(c==="h")a+=+f[1];else if(c==="V")o=+f[1];else if(c==="v")o+=+f[1];else if(c==="A"){a=+f[1],o=+f[2];var d=i(n,[+f[6],+f[7]]);f[6]=d[0],f[7]=d[1],f[3]=+f[3]+e}(c==="H"||c==="V")&&(c="L"),(c==="h"||c==="v")&&(c="l"),(c==="m"||c==="l")&&(a-=h,o-=v);var _=i(n,[a,o]);(c==="H"||c==="V")&&(c="L"),(c==="M"||c==="L"||c==="m"||c==="l")&&(f[1]=_[0],f[2]=_[1]),f[0]=c,l+=f[0]+f.slice(1).join(",")}return Dne=l,l}});var aa=ne((ptr,nie)=>{"use strict";var Jf=Ai(),ks=Wt(),tit=ks.numberFormat,gx=la(),Lz=Xf(),bC=wi(),vh=_i(),rit=ul(),LA=ks.strTranslate,Pz=Es(),nit=kd(),iit=Tf(),ait=iit.LINE_SPACING,Xne=Yy().DESELECTDIM,oit=js(),sit=EA(),lit=td().appendArrayPointValue,ui=nie.exports={};ui.font=function(e,t,r,i){ks.isPlainObject(t)&&(i=t.color,r=t.size,t=t.family),t&&e.style("font-family",t),r+1&&e.style("font-size",r+"px"),i&&e.call(vh.fill,i)};ui.setPosition=function(e,t,r){e.attr("x",t).attr("y",r)};ui.setSize=function(e,t,r){e.attr("width",t).attr("height",r)};ui.setRect=function(e,t,r,i,n){e.call(ui.setPosition,t,r).call(ui.setSize,i,n)};ui.translatePoint=function(e,t,r,i){var n=r.c2p(e.x),a=i.c2p(e.y);if(gx(n)&&gx(a)&&t.node())t.node().nodeName==="text"?t.attr("x",n).attr("y",a):t.attr("transform",LA(n,a));else return!1;return!0};ui.translatePoints=function(e,t,r){e.each(function(i){var n=Jf.select(this);ui.translatePoint(i,n,t,r)})};ui.hideOutsideRangePoint=function(e,t,r,i,n,a){t.attr("display",r.isPtWithinRange(e,n)&&i.isPtWithinRange(e,a)?null:"none")};ui.hideOutsideRangePoints=function(e,t){if(t._hasClipOnAxisFalse){var r=t.xaxis,i=t.yaxis;e.each(function(n){var a=n[0].trace,o=a.xcalendar,s=a.ycalendar,l=bC.traceIs(a,"bar-like")?".bartext":".point,.textpoint";e.selectAll(l).each(function(u){ui.hideOutsideRangePoint(u,Jf.select(this),r,i,o,s)})})}};ui.crispRound=function(e,t,r){return!t||!gx(t)?r||0:e._context.staticPlot?t:t<1?1:Math.round(t)};ui.singleLineStyle=function(e,t,r,i,n){t.style("fill","none");var a=(((e||[])[0]||{}).trace||{}).line||{},o=r||a.width||0,s=n||a.dash||"";vh.stroke(t,i||a.color),ui.dashLine(t,s,o)};ui.lineGroupStyle=function(e,t,r,i){e.style("fill","none").each(function(n){var a=(((n||[])[0]||{}).trace||{}).line||{},o=t||a.width||0,s=i||a.dash||"";Jf.select(this).call(vh.stroke,r||a.color).call(ui.dashLine,s,o)})};ui.dashLine=function(e,t,r){r=+r||0,t=ui.dashStyle(t,r),e.style({"stroke-dasharray":t,"stroke-width":r+"px"})};ui.dashStyle=function(e,t){t=+t||1;var r=Math.max(t,3);return e==="solid"?e="":e==="dot"?e=r+"px,"+r+"px":e==="dash"?e=3*r+"px,"+3*r+"px":e==="longdash"?e=5*r+"px,"+5*r+"px":e==="dashdot"?e=3*r+"px,"+r+"px,"+r+"px,"+r+"px":e==="longdashdot"&&(e=5*r+"px,"+2*r+"px,"+r+"px,"+2*r+"px"),e};function Zne(e,t,r,i){var n=t.fillpattern,a=t.fillgradient,o=n&&ui.getPatternAttr(n.shape,0,"");if(o){var s=ui.getPatternAttr(n.bgcolor,0,null),l=ui.getPatternAttr(n.fgcolor,0,null),u=n.fgopacity,f=ui.getPatternAttr(n.size,0,8),c=ui.getPatternAttr(n.solidity,0,.3),h=t.uid;ui.pattern(e,"point",r,h,o,f,c,void 0,n.fillmode,s,l,u)}else if(a&&a.type!=="none"){var v=a.type,d="scatterfill-"+t.uid;if(i&&(d="legendfill-"+t.uid),!i&&(a.start!==void 0||a.stop!==void 0)){var _,T;v==="horizontal"?(_={x:a.start,y:0},T={x:a.stop,y:0}):v==="vertical"&&(_={x:0,y:a.start},T={x:0,y:a.stop}),_.x=t._xA.c2p(_.x===void 0?t._extremes.x.min[0].val:_.x,!0),_.y=t._yA.c2p(_.y===void 0?t._extremes.y.min[0].val:_.y,!0),T.x=t._xA.c2p(T.x===void 0?t._extremes.x.max[0].val:T.x,!0),T.y=t._yA.c2p(T.y===void 0?t._extremes.y.max[0].val:T.y,!0),e.call(Jne,r,d,"linear",a.colorscale,"fill",_,T,!0,!1)}else v==="horizontal"&&(v=v+"reversed"),e.call(ui.gradient,r,d,v,a.colorscale,"fill")}else t.fillcolor&&e.call(vh.fill,t.fillcolor)}ui.singleFillStyle=function(e,t){var r=Jf.select(e.node()),i=r.data(),n=((i[0]||[])[0]||{}).trace||{};Zne(e,n,t,!1)};ui.fillGroupStyle=function(e,t,r){e.style("stroke-width",0).each(function(i){var n=Jf.select(this);i[0].trace&&Zne(n,i[0].trace,t,r)})};var One=zne();ui.symbolNames=[];ui.symbolFuncs=[];ui.symbolBackOffs=[];ui.symbolNeedLines={};ui.symbolNoDot={};ui.symbolNoFill={};ui.symbolList=[];Object.keys(One).forEach(function(e){var t=One[e],r=t.n;ui.symbolList.push(r,String(r),e,r+100,String(r+100),e+"-open"),ui.symbolNames[r]=e,ui.symbolFuncs[r]=t.f,ui.symbolBackOffs[r]=t.backoff||0,t.needLine&&(ui.symbolNeedLines[r]=!0),t.noDot?ui.symbolNoDot[r]=!0:ui.symbolList.push(r+200,String(r+200),e+"-dot",r+300,String(r+300),e+"-open-dot"),t.noFill&&(ui.symbolNoFill[r]=!0)});var uit=ui.symbolNames.length,fit="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";ui.symbolNumber=function(e){if(gx(e))e=+e;else if(typeof e=="string"){var t=0;e.indexOf("-open")>0&&(t=100,e=e.replace("-open","")),e.indexOf("-dot")>0&&(t+=200,e=e.replace("-dot","")),e=ui.symbolNames.indexOf(e),e>=0&&(e+=t)}return e%100>=uit||e>=400?0:Math.floor(Math.max(e,0))};function jne(e,t,r,i){var n=e%100;return ui.symbolFuncs[n](t,r,i)+(e>=200?fit:"")}var Bne=tit("~f"),Kne={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};ui.gradient=function(e,t,r,i,n,a){var o=Kne[i];return Jne(e,t,r,o.type,n,a,o.start,o.stop,!1,o.reversed)};function Jne(e,t,r,i,n,a,o,s,l,u){var f=n.length,c;i==="linear"?c={node:"linearGradient",attrs:{x1:o.x,y1:o.y,x2:s.x,y2:s.y,gradientUnits:l?"userSpaceOnUse":"objectBoundingBox"},reversed:u}:i==="radial"&&(c={node:"radialGradient",reversed:u});for(var h=new Array(f),v=0;v<f;v++)c.reversed?h[f-1-v]=[Bne((1-n[v][0])*100),n[v][1]]:h[v]=[Bne(n[v][0]*100),n[v][1]];var d=t._fullLayout,_="g"+d._uid+"-"+r,T=d._defs.select(".gradients").selectAll("#"+_).data([i+h.join(";")],ks.identity);T.exit().remove(),T.enter().append(c.node).each(function(){var p=Jf.select(this);c.attrs&&p.attr(c.attrs),p.attr("id",_);var M=p.selectAll("stop").data(h);M.exit().remove(),M.enter().append("stop"),M.each(function(b){var w=Lz(b[1]);Jf.select(this).attr({offset:b[0]+"%","stop-color":vh.tinyRGB(w),"stop-opacity":w.getAlpha()})})}),e.style(a,Rz(_,t)).style(a+"-opacity",null),e.classed("gradient_filled",!0)}ui.pattern=function(e,t,r,i,n,a,o,s,l,u,f,c){var h=t==="legend";s&&(l==="overlay"?(u=s,f=vh.contrast(u)):(u=void 0,f=s));var v=r._fullLayout,d="p"+v._uid+"-"+i,_,T,p=function(D,z,O,V,B){return V+(B-V)*(D-z)/(O-z)},M,b,w,k,x={},E=Lz(f),S=vh.tinyRGB(E),g=E.getAlpha(),C=c*g;switch(n){case"/":_=a*Math.sqrt(2),T=a*Math.sqrt(2),M="M-"+_/4+","+T/4+"l"+_/2+",-"+T/2+"M0,"+T+"L"+_+",0M"+_/4*3+","+T/4*5+"l"+_/2+",-"+T/2,b=o*a,k="path",x={d:M,opacity:C,stroke:S,"stroke-width":b+"px"};break;case"\\":_=a*Math.sqrt(2),T=a*Math.sqrt(2),M="M"+_/4*3+",-"+T/4+"l"+_/2+","+T/2+"M0,0L"+_+","+T+"M-"+_/4+","+T/4*3+"l"+_/2+","+T/2,b=o*a,k="path",x={d:M,opacity:C,stroke:S,"stroke-width":b+"px"};break;case"x":_=a*Math.sqrt(2),T=a*Math.sqrt(2),M="M-"+_/4+","+T/4+"l"+_/2+",-"+T/2+"M0,"+T+"L"+_+",0M"+_/4*3+","+T/4*5+"l"+_/2+",-"+T/2+"M"+_/4*3+",-"+T/4+"l"+_/2+","+T/2+"M0,0L"+_+","+T+"M-"+_/4+","+T/4*3+"l"+_/2+","+T/2,b=a-a*Math.sqrt(1-o),k="path",x={d:M,opacity:C,stroke:S,"stroke-width":b+"px"};break;case"|":_=a,T=a,k="path",M="M"+_/2+",0L"+_/2+","+T,b=o*a,k="path",x={d:M,opacity:C,stroke:S,"stroke-width":b+"px"};break;case"-":_=a,T=a,k="path",M="M0,"+T/2+"L"+_+","+T/2,b=o*a,k="path",x={d:M,opacity:C,stroke:S,"stroke-width":b+"px"};break;case"+":_=a,T=a,k="path",M="M"+_/2+",0L"+_/2+","+T+"M0,"+T/2+"L"+_+","+T/2,b=a-a*Math.sqrt(1-o),k="path",x={d:M,opacity:C,stroke:S,"stroke-width":b+"px"};break;case".":_=a,T=a,o<Math.PI/4?w=Math.sqrt(o*a*a/Math.PI):w=p(o,Math.PI/4,1,a/2,a/Math.sqrt(2)),k="circle",x={cx:_/2,cy:T/2,r:w,opacity:C,fill:S};break}var A=[n||"noSh",u||"noBg",f||"noFg",a,o].join(";"),P=v._defs.select(".patterns").selectAll("#"+d).data([A],ks.identity);P.exit().remove(),P.enter().append("pattern").each(function(){var D=Jf.select(this);if(D.attr({id:d,width:_+"px",height:T+"px",patternUnits:"userSpaceOnUse",patternTransform:h?"scale(0.8)":""}),u){var z=Lz(u),O=vh.tinyRGB(z),V=z.getAlpha(),B=D.selectAll("rect").data([0]);B.exit().remove(),B.enter().append("rect").attr({width:_+"px",height:T+"px",fill:O,"fill-opacity":V})}var F=D.selectAll(k).data([0]);F.exit().remove(),F.enter().append(k).attr(x)}),e.style("fill",Rz(d,r)).style("fill-opacity",null),e.classed("pattern_filled",!0)};ui.initGradients=function(e){var t=e._fullLayout,r=ks.ensureSingle(t._defs,"g","gradients");r.selectAll("linearGradient,radialGradient").remove(),Jf.select(e).selectAll(".gradient_filled").classed("gradient_filled",!1)};ui.initPatterns=function(e){var t=e._fullLayout,r=ks.ensureSingle(t._defs,"g","patterns");r.selectAll("pattern").remove(),Jf.select(e).selectAll(".pattern_filled").classed("pattern_filled",!1)};ui.getPatternAttr=function(e,t,r){return e&&ks.isArrayOrTypedArray(e)?t<e.length?e[t]:r:e};ui.pointStyle=function(e,t,r,i){if(e.size()){var n=ui.makePointStyleFns(t);e.each(function(a){ui.singlePointStyle(a,Jf.select(this),t,n,r,i)})}};ui.singlePointStyle=function(e,t,r,i,n,a){var o=r.marker,s=o.line;if(a&&a.i>=0&&e.i===void 0&&(e.i=a.i),t.style("opacity",i.selectedOpacityFn?i.selectedOpacityFn(e):e.mo===void 0?o.opacity:e.mo),i.ms2mrc){var l;e.ms==="various"||o.size==="various"?l=3:l=i.ms2mrc(e.ms),e.mrc=l,i.selectedSizeFn&&(l=e.mrc=i.selectedSizeFn(e));var u=ui.symbolNumber(e.mx||o.symbol)||0;e.om=u%200>=100;var f=Iz(e,r),c=Dz(e,r);t.attr("d",jne(u,l,f,c))}var h=!1,v,d,_;if(e.so)_=s.outlierwidth,d=s.outliercolor,v=o.outliercolor;else{var T=(s||{}).width;_=(e.mlw+1||T+1||(e.trace?(e.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in e?d=e.mlcc=i.lineScale(e.mlc):ks.isArrayOrTypedArray(s.color)?d=vh.defaultLine:d=s.color,ks.isArrayOrTypedArray(o.color)&&(v=vh.defaultLine,h=!0),"mc"in e?v=e.mcc=i.markerScale(e.mc):v=o.color||o.colors||"rgba(0,0,0,0)",i.selectedColorFn&&(v=i.selectedColorFn(e))}if(e.om)t.call(vh.stroke,v).style({"stroke-width":(_||1)+"px",fill:"none"});else{t.style("stroke-width",(e.isBlank?0:_)+"px");var p=o.gradient,M=e.mgt;M?h=!0:M=p&&p.type,ks.isArrayOrTypedArray(M)&&(M=M[0],Kne[M]||(M=0));var b=o.pattern,w=b&&ui.getPatternAttr(b.shape,e.i,"");if(M&&M!=="none"){var k=e.mgc;k?h=!0:k=p.color;var x=r.uid;h&&(x+="-"+e.i),ui.gradient(t,n,x,M,[[0,k],[1,v]],"fill")}else if(w){var E=!1,S=b.fgcolor;!S&&a&&a.color&&(S=a.color,E=!0);var g=ui.getPatternAttr(S,e.i,a&&a.color||null),C=ui.getPatternAttr(b.bgcolor,e.i,null),A=b.fgopacity,P=ui.getPatternAttr(b.size,e.i,8),D=ui.getPatternAttr(b.solidity,e.i,.3);E=E||e.mcc||ks.isArrayOrTypedArray(b.shape)||ks.isArrayOrTypedArray(b.bgcolor)||ks.isArrayOrTypedArray(b.fgcolor)||ks.isArrayOrTypedArray(b.size)||ks.isArrayOrTypedArray(b.solidity);var z=r.uid;E&&(z+="-"+e.i),ui.pattern(t,"point",n,z,w,P,D,e.mcc,b.fillmode,C,g,A)}else ks.isArrayOrTypedArray(v)?vh.fill(t,v[e.i]):vh.fill(t,v);_&&vh.stroke(t,d)}};ui.makePointStyleFns=function(e){var t={},r=e.marker;return t.markerScale=ui.tryColorscale(r,""),t.lineScale=ui.tryColorscale(r,"line"),bC.traceIs(e,"symbols")&&(t.ms2mrc=oit.isBubble(e)?sit(e):function(){return(r.size||6)/2}),e.selectedpoints&&ks.extendFlat(t,ui.makeSelectedPointStyleFns(e)),t};ui.makeSelectedPointStyleFns=function(e){var t={},r=e.selected||{},i=e.unselected||{},n=e.marker||{},a=r.marker||{},o=i.marker||{},s=n.opacity,l=a.opacity,u=o.opacity,f=l!==void 0,c=u!==void 0;(ks.isArrayOrTypedArray(s)||f||c)&&(t.selectedOpacityFn=function(w){var k=w.mo===void 0?n.opacity:w.mo;return w.selected?f?l:k:c?u:Xne*k});var h=n.color,v=a.color,d=o.color;(v||d)&&(t.selectedColorFn=function(w){var k=w.mcc||h;return w.selected?v||k:d||k});var _=n.size,T=a.size,p=o.size,M=T!==void 0,b=p!==void 0;return bC.traceIs(e,"symbols")&&(M||b)&&(t.selectedSizeFn=function(w){var k=w.mrc||_/2;return w.selected?M?T/2:k:b?p/2:k}),t};ui.makeSelectedTextStyleFns=function(e){var t={},r=e.selected||{},i=e.unselected||{},n=e.textfont||{},a=r.textfont||{},o=i.textfont||{},s=n.color,l=a.color,u=o.color;return t.selectedTextColorFn=function(f){var c=f.tc||s;return f.selected?l||c:u||(l?c:vh.addOpacity(c,Xne))},t};ui.selectedPointStyle=function(e,t){if(!(!e.size()||!t.selectedpoints)){var r=ui.makeSelectedPointStyleFns(t),i=t.marker||{},n=[];r.selectedOpacityFn&&n.push(function(a,o){a.style("opacity",r.selectedOpacityFn(o))}),r.selectedColorFn&&n.push(function(a,o){vh.fill(a,r.selectedColorFn(o))}),r.selectedSizeFn&&n.push(function(a,o){var s=o.mx||i.symbol||0,l=r.selectedSizeFn(o);a.attr("d",jne(ui.symbolNumber(s),l,Iz(o,t),Dz(o,t))),o.mrc2=l}),n.length&&e.each(function(a){for(var o=Jf.select(this),s=0;s<n.length;s++)n[s](o,a)})}};ui.tryColorscale=function(e,t){var r=t?ks.nestedProperty(e,t).get():e;if(r){var i=r.color;if((r.colorscale||r._colorAx)&&ks.isArrayOrTypedArray(i))return rit.makeColorScaleFuncFromTrace(r)}return ks.identity};var Sz={start:1,end:-1,middle:0,bottom:1,top:-1};function Qne(e,t,r,i,n){var a=Jf.select(e.node().parentNode),o=t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle",s=t.indexOf("left")!==-1?"end":t.indexOf("right")!==-1?"start":"middle",l=i?i/.8+1:0,u=(Pz.lineCount(e)-1)*ait+1,f=Sz[s]*l,c=r*.75+Sz[o]*l+(Sz[o]-1)*u*r/2;e.attr("text-anchor",s),n||a.attr("transform",LA(f,c))}function $ne(e,t){var r=e.ts||t.textfont.size;return gx(r)&&r>0?r:0}ui.textPointStyle=function(e,t,r){if(e.size()){var i;if(t.selectedpoints){var n=ui.makeSelectedTextStyleFns(t);i=n.selectedTextColorFn}var a=t.texttemplate,o=r._fullLayout;e.each(function(s){var l=Jf.select(this),u=a?ks.extractOption(s,t,"txt","texttemplate"):ks.extractOption(s,t,"tx","text");if(!u&&u!==0){l.remove();return}if(a){var f=t._module.formatLabels,c=f?f(s,t,o):{},h={};lit(h,t,s.i);var v=t._meta||{};u=ks.texttemplateString(u,c,o._d3locale,h,s,v)}var d=s.tp||t.textposition,_=$ne(s,t),T=i?i(s):s.tc||t.textfont.color;l.call(ui.font,s.tf||t.textfont.family,_,T).text(u).call(Pz.convertToTspans,r).call(Qne,d,_,s.mrc)})}};ui.selectedTextStyle=function(e,t){if(!(!e.size()||!t.selectedpoints)){var r=ui.makeSelectedTextStyleFns(t);e.each(function(i){var n=Jf.select(this),a=r.selectedTextColorFn(i),o=i.tp||t.textposition,s=$ne(i,t);vh.fill(n,a);var l=bC.traceIs(t,"bar-like");Qne(n,o,s,i.mrc2||i.mrc,l)})}};var Nne=.5;ui.smoothopen=function(e,t){if(e.length<3)return"M"+e.join("L");var r="M"+e[0],i=[],n;for(n=1;n<e.length-1;n++)i.push(_C(e[n-1],e[n],e[n+1],t));for(r+="Q"+i[0][0]+" "+e[1],n=2;n<e.length-1;n++)r+="C"+i[n-2][1]+" "+i[n-1][0]+" "+e[n];return r+="Q"+i[e.length-3][1]+" "+e[e.length-1],r};ui.smoothclosed=function(e,t){if(e.length<3)return"M"+e.join("L")+"Z";var r="M"+e[0],i=e.length-1,n=[_C(e[i],e[0],e[1],t)],a;for(a=1;a<i;a++)n.push(_C(e[a-1],e[a],e[a+1],t));for(n.push(_C(e[i-1],e[i],e[0],t)),a=1;a<=i;a++)r+="C"+n[a-1][1]+" "+n[a][0]+" "+e[a];return r+="C"+n[i][1]+" "+n[0][0]+" "+e[0]+"Z",r};var eie,tie;function p2(e,t,r){return r&&(e=rie(e)),t?px(e[1]):dx(e[0])}function dx(e){var t=Jf.round(e,2);return eie=t,t}function px(e){var t=Jf.round(e,2);return tie=t,t}function _C(e,t,r,i){var n=e[0]-t[0],a=e[1]-t[1],o=r[0]-t[0],s=r[1]-t[1],l=Math.pow(n*n+a*a,Nne/2),u=Math.pow(o*o+s*s,Nne/2),f=(u*u*n-l*l*o)*i,c=(u*u*a-l*l*s)*i,h=3*u*(l+u),v=3*l*(l+u);return[[dx(t[0]+(h&&f/h)),px(t[1]+(h&&c/h))],[dx(t[0]-(v&&f/v)),px(t[1]-(v&&c/v))]]}var cit={hv:function(e,t,r){return"H"+dx(t[0])+"V"+p2(t,1,r)},vh:function(e,t,r){return"V"+px(t[1])+"H"+p2(t,0,r)},hvh:function(e,t,r){return"H"+dx((e[0]+t[0])/2)+"V"+px(t[1])+"H"+p2(t,0,r)},vhv:function(e,t,r){return"V"+px((e[1]+t[1])/2)+"H"+dx(t[0])+"V"+p2(t,1,r)}},hit=function(e,t,r){return"L"+p2(t,0,r)+","+p2(t,1,r)};ui.steps=function(e){var t=cit[e]||hit;return function(r){for(var i="M"+dx(r[0][0])+","+px(r[0][1]),n=r.length,a=1;a<n;a++)i+=t(r[a-1],r[a],a===n-1);return i}};function rie(e,t){var r=e.backoff,i=e.trace,n=e.d,a=e.i;if(r&&i&&i.marker&&i.marker.angle%360===0&&i.line&&i.line.shape!=="spline"){var o=ks.isArrayOrTypedArray(r),s=e,l=t?t[0]:eie||0,u=t?t[1]:tie||0,f=s[0],c=s[1],h=f-l,v=c-u,d=Math.atan2(v,h),_=o?r[a]:r;if(_==="auto"){var T=s.i;i.type==="scatter"&&T--;var p=s.marker,M=p.symbol;ks.isArrayOrTypedArray(M)&&(M=M[T]);var b=p.size;ks.isArrayOrTypedArray(b)&&(b=b[T]),_=p?ui.symbolBackOffs[ui.symbolNumber(M)]*b:0,_+=ui.getMarkerStandoff(n[T],i)||0}var w=f-_*Math.cos(d),k=c-_*Math.sin(d);(w<=f&&w>=l||w>=f&&w<=l)&&(k<=c&&k>=u||k>=c&&k<=u)&&(e=[w,k])}return e}ui.applyBackoff=rie;ui.makeTester=function(){var e=ks.ensureSingleById(Jf.select("body"),"svg","js-plotly-tester",function(r){r.attr(nit.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),t=ks.ensureSingle(e,"path","js-reference-point",function(r){r.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});ui.tester=e,ui.testref=t};ui.savedBBoxes={};var Ez=0,vit=1e4;ui.bBox=function(e,t,r){r||(r=Une(e));var i;if(r){if(i=ui.savedBBoxes[r],i)return ks.extendFlat({},i)}else if(e.childNodes.length===1){var n=e.childNodes[0];if(r=Une(n),r){var a=+n.getAttribute("x")||0,o=+n.getAttribute("y")||0,s=n.getAttribute("transform");if(!s){var l=ui.bBox(n,!1,r);return a&&(l.left+=a,l.right+=a),o&&(l.top+=o,l.bottom+=o),l}if(r+="~"+a+"~"+o+"~"+s,i=ui.savedBBoxes[r],i)return ks.extendFlat({},i)}}var u,f;t?u=e:(f=ui.tester.node(),u=e.cloneNode(!0),f.appendChild(u)),Jf.select(u).attr("transform",null).call(Pz.positionText,0,0);var c=u.getBoundingClientRect(),h=ui.testref.node().getBoundingClientRect();t||f.removeChild(u);var v={height:c.height,width:c.width,left:c.left-h.left,top:c.top-h.top,right:c.right-h.left,bottom:c.bottom-h.top};return Ez>=vit&&(ui.savedBBoxes={},Ez=0),r&&(ui.savedBBoxes[r]=v),Ez++,ks.extendFlat({},v)};function Une(e){var t=e.getAttribute("data-unformatted");if(t!==null)return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}ui.setClipUrl=function(e,t,r){e.attr("clip-path",Rz(t,r))};function Rz(e,t){if(!e)return null;var r=t._context,i=r._exportedPlot?"":r._baseUrl||"";return i?"url('"+i+"#"+e+"')":"url(#"+e+")"}ui.getTranslate=function(e){var t=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,r=e.attr?"attr":"getAttribute",i=e[r]("transform")||"",n=i.replace(t,function(a,o,s){return[o,s].join(" ")}).split(" ");return{x:+n[0]||0,y:+n[1]||0}};ui.setTranslate=function(e,t,r){var i=/(\btranslate\(.*?\);?)/,n=e.attr?"attr":"getAttribute",a=e.attr?"attr":"setAttribute",o=e[n]("transform")||"";return t=t||0,r=r||0,o=o.replace(i,"").trim(),o+=LA(t,r),o=o.trim(),e[a]("transform",o),o};ui.getScale=function(e){var t=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,r=e.attr?"attr":"getAttribute",i=e[r]("transform")||"",n=i.replace(t,function(a,o,s){return[o,s].join(" ")}).split(" ");return{x:+n[0]||1,y:+n[1]||1}};ui.setScale=function(e,t,r){var i=/(\bscale\(.*?\);?)/,n=e.attr?"attr":"getAttribute",a=e.attr?"attr":"setAttribute",o=e[n]("transform")||"";return t=t||1,r=r||1,o=o.replace(i,"").trim(),o+="scale("+t+","+r+")",o=o.trim(),e[a]("transform",o),o};var dit=/\s*sc.*/;ui.setPointGroupScale=function(e,t,r){if(t=t||1,r=r||1,!!e){var i=t===1&&r===1?"":"scale("+t+","+r+")";e.each(function(){var n=(this.getAttribute("transform")||"").replace(dit,"");n+=i,n=n.trim(),this.setAttribute("transform",n)})}};var pit=/translate\([^)]*\)\s*$/;ui.setTextPointsScale=function(e,t,r){e&&e.each(function(){var i,n=Jf.select(this),a=n.select("text");if(a.node()){var o=parseFloat(a.attr("x")||0),s=parseFloat(a.attr("y")||0),l=(n.attr("transform")||"").match(pit);t===1&&r===1?i=[]:i=[LA(o,s),"scale("+t+","+r+")",LA(-o,-s)],l&&i.push(l),n.attr("transform",i.join(""))}})};function Dz(e,t){var r;return e&&(r=e.mf),r===void 0&&(r=t.marker&&t.marker.standoff||0),!t._geo&&!t._xA?-r:r}ui.getMarkerStandoff=Dz;var CA=Math.atan2,vx=Math.cos,g2=Math.sin;function Vne(e,t){var r=t[0],i=t[1];return[r*vx(e)-i*g2(e),r*g2(e)+i*vx(e)]}var Hne,Gne,Yne,Wne,kz,Cz;function Iz(e,t){var r=e.ma;r===void 0&&(r=t.marker.angle,(!r||ks.isArrayOrTypedArray(r))&&(r=0));var i,n,a=t.marker.angleref;if(a==="previous"||a==="north"){if(t._geo){var o=t._geo.project(e.lonlat);i=o[0],n=o[1]}else{var s=t._xA,l=t._yA;if(s&&l)i=s.c2p(e.x),n=l.c2p(e.y);else return 90}if(t._geo){var u=e.lonlat[0],f=e.lonlat[1],c=t._geo.project([u,f+1e-5]),h=t._geo.project([u+1e-5,f]),v=CA(h[1]-n,h[0]-i),d=CA(c[1]-n,c[0]-i),_;if(a==="north")_=r/180*Math.PI;else if(a==="previous"){var T=u/180*Math.PI,p=f/180*Math.PI,M=Hne/180*Math.PI,b=Gne/180*Math.PI,w=M-T,k=vx(b)*g2(w),x=g2(b)*vx(p)-vx(b)*g2(p)*vx(w);_=-CA(k,x)-Math.PI,Hne=u,Gne=f}var E=Vne(v,[vx(_),0]),S=Vne(d,[g2(_),0]);r=CA(E[1]+S[1],E[0]+S[0])/Math.PI*180,a==="previous"&&!(Cz===t.uid&&e.i===kz+1)&&(r=null)}if(a==="previous"&&!t._geo)if(Cz===t.uid&&e.i===kz+1&&gx(i)&&gx(n)){var g=i-Yne,C=n-Wne,A=t.line&&t.line.shape||"",P=A.slice(A.length-1);P==="h"&&(C=0),P==="v"&&(g=0),r+=CA(C,g)/Math.PI*180+90}else r=null}return Yne=i,Wne=n,kz=e.i,Cz=t.uid,r}ui.getMarkerAngle=Iz});var yx=ne((gtr,cie)=>{"use strict";var wC=Ai(),git=la(),iie=Zs(),aie=wi(),y2=Wt(),oie=y2.strTranslate,sie=aa(),lie=_i(),Fz=Es(),uie=Yy(),yit=Tf().OPPOSITE_SIDE,fie=/ [XY][0-9]* /;function mit(e,t,r){var i=r.propContainer,n=r.propName,a=r.placeholder,o=r.traceIndex,s=r.avoid||{},l=r.attributes,u=r.transform,f=r.containerGroup,c=e._fullLayout,h=1,v=!1,d=i.title,_=(d&&d.text?d.text:"").trim(),T=d&&d.font?d.font:{},p=T.family,M=T.size,b=T.color,w;n==="title.text"?w="titleText":n.indexOf("axis")!==-1?w="axisTitleText":n.indexOf("colorbar"!==-1)&&(w="colorbarTitleText");var k=e._context.edits[w];_===""?h=0:_.replace(fie," % ")===a.replace(fie," % ")&&(h=.2,v=!0,k||(_="")),r._meta?_=y2.templateString(_,r._meta):c._meta&&(_=y2.templateString(_,c._meta));var x=_||k,E;f||(f=y2.ensureSingle(c._infolayer,"g","g-"+t),E=c._hColorbarMoveTitle);var S=f.selectAll("text").data(x?[0]:[]);if(S.enter().append("text"),S.text(_).attr("class",t),S.exit().remove(),!x)return f;function g(D){y2.syncOrAsync([C,A],D)}function C(D){var z;return!u&&E&&(u={}),u?(z="",u.rotate&&(z+="rotate("+[u.rotate,l.x,l.y]+")"),(u.offset||E)&&(z+=oie(0,(u.offset||0)-(E||0)))):z=null,D.attr("transform",z),D.style({"font-family":p,"font-size":wC.round(M,2)+"px",fill:lie.rgb(b),opacity:h*lie.opacity(b),"font-weight":iie.fontWeight}).attr(l).call(Fz.convertToTspans,e),iie.previousPromises(e)}function A(D){var z=wC.select(D.node().parentNode);if(s&&s.selection&&s.side&&_){z.attr("transform",null);var O=yit[s.side],V=s.side==="left"||s.side==="top"?-1:1,B=git(s.pad)?s.pad:2,F=sie.bBox(z.node()),N={t:0,b:0,l:0,r:0},Z=e._fullLayout._reservedMargin;for(var J in Z)for(var re in Z[J]){var ue=Z[J][re];N[re]=Math.max(N[re],ue)}var fe={left:N.l,top:N.t,right:c.width-N.r,bottom:c.height-N.b},K=s.maxShift||V*(fe[s.side]-F[s.side]),X=0;if(K<0)X=K;else{var ae=s.offsetLeft||0,oe=s.offsetTop||0;F.left-=ae,F.right-=ae,F.top-=oe,F.bottom-=oe,s.selection.each(function(){var xe=sie.bBox(this);y2.bBoxIntersect(F,xe,B)&&(X=Math.max(X,V*(xe[s.side]-F[O])+B))}),X=Math.min(K,X),i._titleScoot=Math.abs(X)}if(X>0||K<0){var me={left:[-X,0],right:[X,0],top:[0,-X],bottom:[0,X]}[s.side];z.attr("transform",oie(me[0],me[1]))}}}S.call(g);function P(){h=0,v=!0,S.text(a).on("mouseover.opacity",function(){wC.select(this).transition().duration(uie.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){wC.select(this).transition().duration(uie.HIDE_PLACEHOLDER).style("opacity",0)})}return k&&(_?S.on(".opacity",null):P(),S.call(Fz.makeEditable,{gd:e}).on("edit",function(D){o!==void 0?aie.call("_guiRestyle",e,n,D,o):aie.call("_guiRelayout",e,n,D)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(g)}).on("input",function(D){this.text(D||" ").call(Fz.positionText,l.x,l.y)})),S.classed("js-placeholder",v),f}cie.exports={draw:mit}});var B0=ne((ytr,gie)=>{"use strict";var xit=Ai(),_it=Wb().utcFormat,Ks=Wt(),bit=Ks.numberFormat,z0=la(),lm=Ks.cleanNumber,wit=Ks.ms2DateTime,hie=Ks.dateTime2ms,O0=Ks.ensureNumber,vie=Ks.isArrayOrTypedArray,um=$a(),TC=um.FP_SAFE,$p=um.BADNUM,Tit=um.LOG_CLIP,Ait=um.ONEWEEK,AC=um.ONEDAY,MC=um.ONEHOUR,die=um.ONEMIN,pie=um.ONESEC,SC=zl(),CC=wf(),EC=CC.HOUR_PATTERN,kC=CC.WEEKDAY_PATTERN;function PA(e){return Math.pow(10,e)}function qz(e){return e!=null}gie.exports=function(t,r){r=r||{};var i=t._id||"x",n=i.charAt(0);function a(w,k){if(w>0)return Math.log(w)/Math.LN10;if(w<=0&&k&&t.range&&t.range.length===2){var x=t.range[0],E=t.range[1];return .5*(x+E-2*Tit*Math.abs(x-E))}else return $p}function o(w,k,x,E){if((E||{}).msUTC&&z0(w))return+w;var S=hie(w,x||t.calendar);if(S===$p)if(z0(w)){w=+w;var g=Math.floor(Ks.mod(w+.05,1)*10),C=Math.round(w-g/10);S=hie(new Date(C))+g/10}else return $p;return S}function s(w,k,x){return wit(w,k,x||t.calendar)}function l(w){return t._categories[Math.round(w)]}function u(w){if(qz(w)){if(t._categoriesMap===void 0&&(t._categoriesMap={}),t._categoriesMap[w]!==void 0)return t._categoriesMap[w];t._categories.push(typeof w=="number"?String(w):w);var k=t._categories.length-1;return t._categoriesMap[w]=k,k}return $p}function f(w,k){for(var x=new Array(k),E=0;E<k;E++){var S=(w[0]||[])[E],g=(w[1]||[])[E];x[E]=c([S,g])}return x}function c(w){if(t._categoriesMap)return t._categoriesMap[w]}function h(w){var k=c(w);if(k!==void 0)return k;if(z0(w))return+w}function v(w){return z0(w)?+w:c(w)}function d(w,k,x){return xit.round(x+k*w,2)}function _(w,k,x){return(w-x)/k}var T=function(k){return z0(k)?d(k,t._m,t._b):$p},p=function(w){return _(w,t._m,t._b)};if(t.rangebreaks){var M=n==="y";T=function(w){if(!z0(w))return $p;var k=t._rangebreaks.length;if(!k)return d(w,t._m,t._b);var x=M;t.range[0]>t.range[1]&&(x=!x);for(var E=x?-1:1,S=E*w,g=0,C=0;C<k;C++){var A=E*t._rangebreaks[C].min,P=E*t._rangebreaks[C].max;if(S<A)break;if(S>P)g=C+1;else{g=S<(A+P)/2?C:C+1;break}}var D=t._B[g]||0;return isFinite(D)?d(w,t._m2,D):0},p=function(w){var k=t._rangebreaks.length;if(!k)return _(w,t._m,t._b);for(var x=0,E=0;E<k&&!(w<t._rangebreaks[E].pmin);E++)w>t._rangebreaks[E].pmax&&(x=E+1);return _(w,t._m2,t._B[x])}}t.c2l=t.type==="log"?a:O0,t.l2c=t.type==="log"?PA:O0,t.l2p=T,t.p2l=p,t.c2p=t.type==="log"?function(w,k){return T(a(w,k))}:T,t.p2c=t.type==="log"?function(w){return PA(p(w))}:p,["linear","-"].indexOf(t.type)!==-1?(t.d2r=t.r2d=t.d2c=t.r2c=t.d2l=t.r2l=lm,t.c2d=t.c2r=t.l2d=t.l2r=O0,t.d2p=t.r2p=function(w){return t.l2p(lm(w))},t.p2d=t.p2r=p,t.cleanPos=O0):t.type==="log"?(t.d2r=t.d2l=function(w,k){return a(lm(w),k)},t.r2d=t.r2c=function(w){return PA(lm(w))},t.d2c=t.r2l=lm,t.c2d=t.l2r=O0,t.c2r=a,t.l2d=PA,t.d2p=function(w,k){return t.l2p(t.d2r(w,k))},t.p2d=function(w){return PA(p(w))},t.r2p=function(w){return t.l2p(lm(w))},t.p2r=p,t.cleanPos=O0):t.type==="date"?(t.d2r=t.r2d=Ks.identity,t.d2c=t.r2c=t.d2l=t.r2l=o,t.c2d=t.c2r=t.l2d=t.l2r=s,t.d2p=t.r2p=function(w,k,x){return t.l2p(o(w,0,x))},t.p2d=t.p2r=function(w,k,x){return s(p(w),k,x)},t.cleanPos=function(w){return Ks.cleanDate(w,$p,t.calendar)}):t.type==="category"?(t.d2c=t.d2l=u,t.r2d=t.c2d=t.l2d=l,t.d2r=t.d2l_noadd=h,t.r2c=function(w){var k=v(w);return k!==void 0?k:t.fraction2r(.5)},t.l2r=t.c2r=O0,t.r2l=v,t.d2p=function(w){return t.l2p(t.r2c(w))},t.p2d=function(w){return l(p(w))},t.r2p=t.d2p,t.p2r=p,t.cleanPos=function(w){return typeof w=="string"&&w!==""?w:O0(w)}):t.type==="multicategory"&&(t.r2d=t.c2d=t.l2d=l,t.d2r=t.d2l_noadd=h,t.r2c=function(w){var k=h(w);return k!==void 0?k:t.fraction2r(.5)},t.r2c_just_indices=c,t.l2r=t.c2r=O0,t.r2l=h,t.d2p=function(w){return t.l2p(t.r2c(w))},t.p2d=function(w){return l(p(w))},t.r2p=t.d2p,t.p2r=p,t.cleanPos=function(w){return Array.isArray(w)||typeof w=="string"&&w!==""?w:O0(w)},t.setupMultiCategory=function(w){var k=t._traceIndices,x,E,S=t._matchGroup;if(S&&t._categories.length===0){for(var g in S)if(g!==i){var C=r[SC.id2name(g)];k=k.concat(C._traceIndices)}}var A=[[0,{}],[0,{}]],P=[];for(x=0;x<k.length;x++){var D=w[k[x]];if(n in D){var z=D[n],O=D._length||Ks.minRowLength(z);if(vie(z[0])&&vie(z[1]))for(E=0;E<O;E++){var V=z[0][E],B=z[1][E];qz(V)&&qz(B)&&(P.push([V,B]),V in A[0][1]||(A[0][1][V]=A[0][0]++),B in A[1][1]||(A[1][1][B]=A[1][0]++))}}}for(P.sort(function(F,N){var Z=A[0][1],J=Z[F[0]]-Z[N[0]];if(J)return J;var re=A[1][1];return re[F[1]]-re[N[1]]}),x=0;x<P.length;x++)u(P[x])}),t.fraction2r=function(w){var k=t.r2l(t.range[0]),x=t.r2l(t.range[1]);return t.l2r(k+w*(x-k))},t.r2fraction=function(w){var k=t.r2l(t.range[0]),x=t.r2l(t.range[1]);return(t.r2l(w)-k)/(x-k)},t.limitRange=function(w){var k=t.minallowed,x=t.maxallowed;if(!(k===void 0&&x===void 0)){w||(w="range");var E=Ks.nestedProperty(t,w).get(),S=Ks.simpleMap(E,t.r2l),g=S[1]<S[0];g&&S.reverse();var C=Ks.simpleMap([k,x],t.r2l);if(k!==void 0&&S[0]<C[0]&&(E[g?1:0]=k),x!==void 0&&S[1]>C[1]&&(E[g?0:1]=x),E[0]===E[1]){var A=t.l2r(k),P=t.l2r(x);if(k!==void 0){var D=A+1;x!==void 0&&(D=Math.min(D,P)),E[g?1:0]=D}if(x!==void 0){var z=P+1;k!==void 0&&(z=Math.max(z,A)),E[g?0:1]=z}}}},t.cleanRange=function(w,k){t._cleanRange(w,k),t.limitRange(w)},t._cleanRange=function(w,k){k||(k={}),w||(w="range");var x=Ks.nestedProperty(t,w).get(),E,S;if(t.type==="date"?S=Ks.dfltRange(t.calendar):n==="y"?S=CC.DFLTRANGEY:t._name==="realaxis"?S=[0,1]:S=k.dfltRange||CC.DFLTRANGEX,S=S.slice(),(t.rangemode==="tozero"||t.rangemode==="nonnegative")&&(S[0]=0),!x||x.length!==2){Ks.nestedProperty(t,w).set(S);return}var g=x[0]===null,C=x[1]===null;for(t.type==="date"&&!t.autorange&&(x[0]=Ks.cleanDate(x[0],$p,t.calendar),x[1]=Ks.cleanDate(x[1],$p,t.calendar)),E=0;E<2;E++)if(t.type==="date"){if(!Ks.isDateTime(x[E],t.calendar)){t[w]=S;break}if(t.r2l(x[0])===t.r2l(x[1])){var A=Ks.constrain(t.r2l(x[0]),Ks.MIN_MS+1e3,Ks.MAX_MS-1e3);x[0]=t.l2r(A-1e3),x[1]=t.l2r(A+1e3);break}}else{if(!z0(x[E]))if(!(g||C)&&z0(x[1-E]))x[E]=x[1-E]*(E?10:.1);else{t[w]=S;break}if(x[E]<-TC?x[E]=-TC:x[E]>TC&&(x[E]=TC),x[0]===x[1]){var P=Math.max(1,Math.abs(x[0]*1e-6));x[0]-=P,x[1]+=P}}},t.setScale=function(w){var k=r._size;if(t.overlaying){var x=SC.getFromId({_fullLayout:r},t.overlaying);t.domain=x.domain}var E=w&&t._r?"_r":"range",S=t.calendar;t.cleanRange(E);var g=t.r2l(t[E][0],S),C=t.r2l(t[E][1],S),A=n==="y";if(A?(t._offset=k.t+(1-t.domain[1])*k.h,t._length=k.h*(t.domain[1]-t.domain[0]),t._m=t._length/(g-C),t._b=-t._m*C):(t._offset=k.l+t.domain[0]*k.w,t._length=k.w*(t.domain[1]-t.domain[0]),t._m=t._length/(C-g),t._b=-t._m*g),t._rangebreaks=[],t._lBreaks=0,t._m2=0,t._B=[],t.rangebreaks){var P,D;if(t._rangebreaks=t.locateBreaks(Math.min(g,C),Math.max(g,C)),t._rangebreaks.length){for(P=0;P<t._rangebreaks.length;P++)D=t._rangebreaks[P],t._lBreaks+=Math.abs(D.max-D.min);var z=A;g>C&&(z=!z),z&&t._rangebreaks.reverse();var O=z?-1:1;for(t._m2=O*t._length/(Math.abs(C-g)-t._lBreaks),t._B.push(-t._m2*(A?C:g)),P=0;P<t._rangebreaks.length;P++)D=t._rangebreaks[P],t._B.push(t._B[t._B.length-1]-O*t._m2*(D.max-D.min));for(P=0;P<t._rangebreaks.length;P++)D=t._rangebreaks[P],D.pmin=T(D.min),D.pmax=T(D.max)}}if(!isFinite(t._m)||!isFinite(t._b)||t._length<0)throw r._replotting=!1,new Error("Something went wrong with axis scaling")},t.maskBreaks=function(w){var k=t.rangebreaks||[],x,E,S,g,C;k._cachedPatterns||(k._cachedPatterns=k.map(function(Z){return Z.enabled&&Z.bounds?Ks.simpleMap(Z.bounds,Z.pattern?lm:t.d2c):null})),k._cachedValues||(k._cachedValues=k.map(function(Z){return Z.enabled&&Z.values?Ks.simpleMap(Z.values,t.d2c).sort(Ks.sorterAsc):null}));for(var A=0;A<k.length;A++){var P=k[A];if(P.enabled){if(P.bounds){var D=P.pattern;switch(x=k._cachedPatterns[A],E=x[0],S=x[1],D){case kC:C=new Date(w),g=C.getUTCDay(),E>S&&(S+=7,g<E&&(g+=7));break;case EC:C=new Date(w);var z=C.getUTCHours(),O=C.getUTCMinutes(),V=C.getUTCSeconds(),B=C.getUTCMilliseconds();g=z+(O/60+V/3600+B/36e5),E>S&&(S+=24,g<E&&(g+=24));break;case"":g=w;break}if(g>=E&&g<S)return $p}else for(var F=k._cachedValues[A],N=0;N<F.length;N++)if(E=F[N],S=E+P.dvalue,w>=E&&w<S)return $p}}return w},t.locateBreaks=function(w,k){var x,E,S,g,C=[];if(!t.rangebreaks)return C;var A=t.rangebreaks.slice().sort(function(re,ue){return re.pattern===kC&&ue.pattern===EC?-1:ue.pattern===kC&&re.pattern===EC?1:0}),P=function(re,ue){if(re=Ks.constrain(re,w,k),ue=Ks.constrain(ue,w,k),re!==ue){for(var fe=!0,K=0;K<C.length;K++){var X=C[K];re<X.max&&ue>=X.min&&(re<X.min&&(X.min=re),ue>X.max&&(X.max=ue),fe=!1)}fe&&C.push({min:re,max:ue})}};for(x=0;x<A.length;x++){var D=A[x];if(D.enabled)if(D.bounds){var z=w,O=k;D.pattern&&(z=Math.floor(z)),E=Ks.simpleMap(D.bounds,D.pattern?lm:t.r2l),S=E[0],g=E[1];var V=new Date(z),B,F;switch(D.pattern){case kC:F=Ait,B=((g<S?7:0)+(g-S))*AC,z+=S*AC-(V.getUTCDay()*AC+V.getUTCHours()*MC+V.getUTCMinutes()*die+V.getUTCSeconds()*pie+V.getUTCMilliseconds());break;case EC:F=AC,B=((g<S?24:0)+(g-S))*MC,z+=S*MC-(V.getUTCHours()*MC+V.getUTCMinutes()*die+V.getUTCSeconds()*pie+V.getUTCMilliseconds());break;default:z=Math.min(E[0],E[1]),O=Math.max(E[0],E[1]),F=O-z,B=F}for(var N=z;N<O;N+=F)P(N,N+B)}else for(var Z=Ks.simpleMap(D.values,t.d2c),J=0;J<Z.length;J++)S=Z[J],g=S+D.dvalue,P(S,g)}return C.sort(function(re,ue){return re.min-ue.min}),C},t.makeCalcdata=function(w,k,x){var E,S,g,C,A=t.type,P=A==="date"&&w[k+"calendar"];if(k in w){if(E=w[k],C=w._length||Ks.minRowLength(E),Ks.isTypedArray(E)&&(A==="linear"||A==="log")){if(C===E.length)return E;if(E.subarray)return E.subarray(0,C)}if(A==="multicategory")return f(E,C);for(S=new Array(C),g=0;g<C;g++)S[g]=t.d2c(E[g],0,P,x)}else{var D=k+"0"in w?t.d2c(w[k+"0"],0,P):0,z=w["d"+k]?Number(w["d"+k]):1;for(E=w[{x:"y",y:"x"}[k]],C=w._length||E.length,S=new Array(C),g=0;g<C;g++)S[g]=D+g*z}if(t.rangebreaks)for(g=0;g<C;g++)S[g]=t.maskBreaks(S[g]);return S},t.isValidRange=function(w,k){return Array.isArray(w)&&w.length===2&&(k&&w[0]===null||z0(t.r2l(w[0])))&&(k&&w[1]===null||z0(t.r2l(w[1])))},t.getAutorangeDflt=function(w,k){var x=!t.isValidRange(w,"nullOk");return x&&k&&k.reverseDflt?x="reversed":w&&(w[0]===null&&w[1]===null?x=!0:w[0]===null&&w[1]!==null?x="min":w[0]!==null&&w[1]===null&&(x="max")),x},t.isReversed=function(){var w=t.autorange;return w==="reversed"||w==="min reversed"||w==="max reversed"},t.isPtWithinRange=function(w,k){var x=t.c2l(w[n],null,k),E=t.r2l(t.range[0]),S=t.r2l(t.range[1]);return E<S?E<=x&&x<=S:S<=x&&x<=E},t._emptyCategories=function(){t._categories=[],t._categoriesMap={}},t.clearCalc=function(){var w=t._matchGroup;if(w){var k=null,x=null;for(var E in w){var S=r[SC.id2name(E)];if(S._categories){k=S._categories,x=S._categoriesMap;break}}k&&x?(t._categories=k,t._categoriesMap=x):t._emptyCategories()}else t._emptyCategories();if(t._initialCategories)for(var g=0;g<t._initialCategories.length;g++)u(t._initialCategories[g])},t.sortByInitialCategories=function(){var w=[];if(t._emptyCategories(),t._initialCategories)for(var k=0;k<t._initialCategories.length;k++)u(t._initialCategories[k]);w=w.concat(t._traceIndices);var x=t._matchGroup;for(var E in x)if(i!==E){var S=r[SC.id2name(E)];S._categories=t._categories,S._categoriesMap=t._categoriesMap,w=w.concat(S._traceIndices)}return w};var b=r._d3locale;t.type==="date"&&(t._dateFormat=b?b.timeFormat:_it,t._extraFormat=r._extraFormat),t._separators=r.separators,t._numFormat=b?b.numberFormat:bit,delete t._minDtick,delete t._forceTick0}});var m2=ne((mtr,_ie)=>{"use strict";var yie=la(),zz=Wt(),Mit=$a().BADNUM,LC=zz.isArrayOrTypedArray,Sit=zz.isDateTime,Eit=zz.cleanNumber,mie=Math.round;_ie.exports=function(t,r,i){var n=t,a=i.noMultiCategory;if(LC(n)&&!n.length)return"-";if(!a&&Rit(n))return"multicategory";if(a&&Array.isArray(n[0])){for(var o=[],s=0;s<n.length;s++)if(LC(n[s]))for(var l=0;l<n[s].length;l++)o.push(n[s][l]);n=o}if(Lit(n,r))return"date";var u=i.autotypenumbers!=="strict";return Pit(n,u)?"category":Cit(n,u)?"linear":"-"};function kit(e,t){return t?yie(e):typeof e=="number"}function Cit(e,t){for(var r=e.length,i=0;i<r;i++)if(kit(e[i],t))return!0;return!1}function Lit(e,t){for(var r=e.length,i=xie(r),n=0,a=0,o={},s=0;s<r;s+=i){var l=mie(s),u=e[l],f=String(u);o[f]||(o[f]=1,Sit(u,t)&&n++,yie(u)&&a++)}return n>a*2}function xie(e){return Math.max(1,(e-1)/1e3)}function Pit(e,t){for(var r=e.length,i=xie(r),n=0,a=0,o={},s=0;s<r;s+=i){var l=mie(s),u=e[l],f=String(u);if(!o[f]){o[f]=1;var c=typeof u;c==="boolean"?a++:(t?Eit(u)!==Mit:c==="number")?n++:c==="string"&&a++}}return a>n*2}function Rit(e){return LC(e[0])&&LC(e[1])}});var Cd=ne((xtr,kie)=>{"use strict";var Dit=Ai(),Aie=la(),fm=Wt(),PC=$a().FP_SAFE,Iit=wi(),Fit=aa(),Mie=zl(),qit=Mie.getFromId,zit=Mie.isLinked;kie.exports={applyAutorangeOptions:Eie,getAutoRange:Oz,makePadFn:Bz,doAutoRange:Bit,findExtremes:Nit,concatExtremes:Vz};function Oz(e,t){var r,i,n=[],a=e._fullLayout,o=Bz(a,t,0),s=Bz(a,t,1),l=Vz(e,t),u=l.min,f=l.max;if(u.length===0||f.length===0)return fm.simpleMap(t.range,t.r2l);var c=u[0].val,h=f[0].val;for(r=1;r<u.length&&c===h;r++)c=Math.min(c,u[r].val);for(r=1;r<f.length&&c===h;r++)h=Math.max(h,f[r].val);var v=t.autorange,d=v==="reversed"||v==="min reversed"||v==="max reversed";if(!d&&t.range){var _=fm.simpleMap(t.range,t.r2l);d=_[1]<_[0]}t.autorange==="reversed"&&(t.autorange=!0);var T=t.rangemode,p=T==="tozero",M=T==="nonnegative",b=t._length,w=b/10,k=0,x,E,S,g,C,A;for(r=0;r<u.length;r++)for(x=u[r],i=0;i<f.length;i++)E=f[i],A=E.val-x.val-bie(t,x.val,E.val),A>0&&(C=b-o(x)-s(E),C>w?A/C>k&&(S=x,g=E,k=A/C):A/b>k&&(S={val:x.val,nopad:1},g={val:E.val,nopad:1},k=A/b));function P(B,F){return Math.max(B,s(F))}if(c===h){var D=c-1,z=c+1;if(p)if(c===0)n=[0,1];else{var O=(c>0?f:u).reduce(P,0),V=c/(1-Math.min(.5,O/b));n=c>0?[0,V]:[V,0]}else M?n=[Math.max(0,D),Math.max(1,z)]:n=[D,z]}else p?(S.val>=0&&(S={val:0,nopad:1}),g.val<=0&&(g={val:0,nopad:1})):M&&(S.val-k*o(S)<0&&(S={val:0,nopad:1}),g.val<=0&&(g={val:1,nopad:1})),k=(g.val-S.val-bie(t,x.val,E.val))/(b-o(S)-s(g)),n=[S.val-k*o(S),g.val+k*s(g)];return n=Eie(n,t),t.limitRange&&t.limitRange(),d&&n.reverse(),fm.simpleMap(n,t.l2r||Number)}function bie(e,t,r){var i=0;if(e.rangebreaks)for(var n=e.locateBreaks(t,r),a=0;a<n.length;a++){var o=n[a];i+=o.max-o.min}return i}function Bz(e,t,r){var i=.05*t._length,n=t._anchorAxis||{};if((t.ticklabelposition||"").indexOf("inside")!==-1||(n.ticklabelposition||"").indexOf("inside")!==-1){var a=t.isReversed();if(!a){var o=fm.simpleMap(t.range,t.r2l);a=o[1]<o[0]}a&&(r=!r)}var s=0;return zit(e,t._id)||(s=Oit(e,t,r)),i=Math.max(s,i),t.constrain==="domain"&&t._inputDomain&&(i*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])),function(u){return u.nopad?0:u.pad+(u.extrapad?i:s)}}var wie=3;function Oit(e,t,r){var i=0,n=t._id.charAt(0)==="x";for(var a in e._plots){var o=e._plots[a];if(!(t._id!==o.xaxis._id&&t._id!==o.yaxis._id)){var s=(n?o.yaxis:o.xaxis)||{};if((s.ticklabelposition||"").indexOf("inside")!==-1&&(!r&&(s.side==="left"||s.side==="bottom")||r&&(s.side==="top"||s.side==="right"))){if(s._vals){var l=fm.deg2rad(s._tickAngles[s._id+"tick"]||0),u=Math.abs(Math.cos(l)),f=Math.abs(Math.sin(l));if(!s._vals[0].bb){var c=s._id+"tick",h=s._selections[c];h.each(function(M){var b=Dit.select(this),w=b.select(".text-math-group");w.empty()&&(M.bb=Fit.bBox(b.node()))})}for(var v=0;v<s._vals.length;v++){var d=s._vals[v],_=d.bb;if(_){var T=2*wie+_.width,p=2*wie+_.height;i=Math.max(i,n?Math.max(T*u,p*f):Math.max(p*u,T*f))}}}s.ticks==="inside"&&s.ticklabelposition==="inside"&&(i+=s.ticklen||0)}}}return i}function Vz(e,t,r){var i=t._id,n=e._fullData,a=e._fullLayout,o=[],s=[],l,u,f;function c(T,p){for(l=0;l<p.length;l++){var M=T[p[l]],b=(M._extremes||{})[i];if(M.visible===!0&&b){for(u=0;u<b.min.length;u++)f=b.min[u],Nz(o,f.val,f.pad,{extrapad:f.extrapad});for(u=0;u<b.max.length;u++)f=b.max[u],Uz(s,f.val,f.pad,{extrapad:f.extrapad})}}}if(c(n,t._traceIndices),c(a.annotations||[],t._annIndices||[]),c(a.shapes||[],t._shapeIndices||[]),t._matchGroup&&!r){for(var h in t._matchGroup)if(h!==t._id){var v=qit(e,h),d=Vz(e,v,!0),_=t._length/v._length;for(u=0;u<d.min.length;u++)f=d.min[u],Nz(o,f.val,f.pad*_,{extrapad:f.extrapad});for(u=0;u<d.max.length;u++)f=d.max[u],Uz(s,f.val,f.pad*_,{extrapad:f.extrapad})}}return{min:o,max:s}}function Bit(e,t,r){if(t.setScale(),t.autorange){t.range=r?r.slice():Oz(e,t),t._r=t.range.slice(),t._rl=fm.simpleMap(t._r,t.r2l);var i=t._input,n={};n[t._attr+".range"]=t.range,n[t._attr+".autorange"]=t.autorange,Iit.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,n),i.range=t.range.slice(),i.autorange=t.autorange}var a=t._anchorAxis;if(a&&a.rangeslider){var o=a.rangeslider[t._name];o&&o.rangemode==="auto"&&(o.range=Oz(e,t)),a._input.rangeslider[t._name]=fm.extendFlat({},o)}}function Nit(e,t,r){r||(r={}),e._m||e.setScale();var i=[],n=[],a=t.length,o=r.padded||!1,s=r.tozero&&(e.type==="linear"||e.type==="-"),l=e.type==="log",u=!1,f=r.vpadLinearized||!1,c,h,v,d,_,T,p,M,b;function w(P){if(Array.isArray(P))return u=!0,function(z){return Math.max(Number(P[z]||0),0)};var D=Math.max(Number(P||0),0);return function(){return D}}var k=w((e._m>0?r.ppadplus:r.ppadminus)||r.ppad||0),x=w((e._m>0?r.ppadminus:r.ppadplus)||r.ppad||0),E=w(r.vpadplus||r.vpad),S=w(r.vpadminus||r.vpad);if(!u){if(M=1/0,b=-1/0,l)for(c=0;c<a;c++)h=t[c],h<M&&h>0&&(M=h),h>b&&h<PC&&(b=h);else for(c=0;c<a;c++)h=t[c],h<M&&h>-PC&&(M=h),h>b&&h<PC&&(b=h);t=[M,b],a=2}var g={tozero:s,extrapad:o};function C(P){v=t[P],Aie(v)&&(T=k(P),p=x(P),f?(d=e.c2l(v)-S(P),_=e.c2l(v)+E(P)):(M=v-S(P),b=v+E(P),l&&M<b/10&&(M=b/10),d=e.c2l(M),_=e.c2l(b)),s&&(d=Math.min(0,d),_=Math.max(0,_)),Tie(d)&&Nz(i,d,p,g),Tie(_)&&Uz(n,_,T,g))}var A=Math.min(6,a);for(c=0;c<A;c++)C(c);for(c=a-1;c>=A;c--)C(c);return{min:i,max:n,opts:r}}function Nz(e,t,r,i){Sie(e,t,r,i,Uit)}function Uz(e,t,r,i){Sie(e,t,r,i,Vit)}function Sie(e,t,r,i,n){for(var a=i.tozero,o=i.extrapad,s=!0,l=0;l<e.length&&s;l++){var u=e[l];if(n(u.val,t)&&u.pad>=r&&(u.extrapad||!o)){s=!1;break}else n(t,u.val)&&u.pad<=r&&(o||!u.extrapad)&&(e.splice(l,1),l--)}if(s){var f=a&&t===0;e.push({val:t,pad:f?0:r,extrapad:f?!1:o})}}function Tie(e){return Aie(e)&&Math.abs(e)<PC}function Uit(e,t){return e<=t}function Vit(e,t){return e>=t}function Hit(e,t){var r=t.autorangeoptions;return r&&r.minallowed!==void 0&&RC(t,r.minallowed,r.maxallowed)?r.minallowed:r&&r.clipmin!==void 0&&RC(t,r.clipmin,r.clipmax)?Math.max(e,t.d2l(r.clipmin)):e}function Git(e,t){var r=t.autorangeoptions;return r&&r.maxallowed!==void 0&&RC(t,r.minallowed,r.maxallowed)?r.maxallowed:r&&r.clipmax!==void 0&&RC(t,r.clipmin,r.clipmax)?Math.min(e,t.d2l(r.clipmax)):e}function RC(e,t,r){return t!==void 0&&r!==void 0?(t=e.d2l(t),r=e.d2l(r),t<r):!0}function Eie(e,t){if(!t||!t.autorangeoptions)return e;var r=e[0],i=e[1],n=t.autorangeoptions.include;if(n!==void 0){var a=t.d2l(r),o=t.d2l(i);fm.isArrayOrTypedArray(n)||(n=[n]);for(var s=0;s<n.length;s++){var l=t.d2l(n[s]);a>=l&&(a=l,r=l),o<=l&&(o=l,i=l)}}return r=Hit(r,t),i=Git(i,t),[r,i]}});var Xi=ne((_tr,jie)=>{"use strict";var ep=Ai(),$u=la(),_2=Zs(),RA=wi(),Ia=Wt(),b2=Ia.strTranslate,x2=Es(),Yit=yx(),DA=_i(),Ld=aa(),Wit=dc(),Cie=dz(),Vh=$a(),Xit=Vh.ONEMAXYEAR,qC=Vh.ONEAVGYEAR,Wz=Vh.ONEMINYEAR,Zit=Vh.ONEMAXQUARTER,Xz=Vh.ONEAVGQUARTER,Zz=Vh.ONEMINQUARTER,jit=Vh.ONEMAXMONTH,w2=Vh.ONEAVGMONTH,jz=Vh.ONEMINMONTH,tp=Vh.ONEWEEK,yv=Vh.ONEDAY,mx=yv/2,Og=Vh.ONEHOUR,zC=Vh.ONEMIN,Kz=Vh.ONESEC,xx=Vh.MINUS_SIGN,UC=Vh.BADNUM,Jz={K:"zeroline"},Qz={K:"gridline",L:"path"},$z={K:"minor-gridline",L:"path"},Bie={K:"tick",L:"path"},Lie={K:"tick",L:"text"},Pie={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},VC=Tf(),DC=VC.MID_SHIFT,_x=VC.CAP_SHIFT,OC=VC.LINE_SPACING,Kit=VC.OPPOSITE_SIDE,BC=3,Dn=jie.exports={};Dn.setConvert=B0();var Jit=m2(),Bg=zl(),Qit=Bg.idSort,$it=Bg.isLinked;Dn.id2name=Bg.id2name;Dn.name2id=Bg.name2id;Dn.cleanId=Bg.cleanId;Dn.list=Bg.list;Dn.listIds=Bg.listIds;Dn.getFromId=Bg.getFromId;Dn.getFromTrace=Bg.getFromTrace;var Nie=Cd();Dn.getAutoRange=Nie.getAutoRange;Dn.findExtremes=Nie.findExtremes;var eat=1e-4;function iO(e){var t=(e[1]-e[0])*eat;return[e[0]-t,e[1]+t]}Dn.coerceRef=function(e,t,r,i,n,a){var o=i.charAt(i.length-1),s=r._fullLayout._subplots[o+"axis"],l=i+"ref",u={};return n||(n=s[0]||(typeof a=="string"?a:a[0])),a||(a=n),s=s.concat(s.map(function(f){return f+" domain"})),u[l]={valType:"enumerated",values:s.concat(a?typeof a=="string"?[a]:a:[]),dflt:n},Ia.coerce(e,t,u,l)};Dn.getRefType=function(e){return e===void 0?e:e==="paper"?"paper":e==="pixel"?"pixel":/( domain)$/.test(e)?"domain":"range"};Dn.coercePosition=function(e,t,r,i,n,a){var o,s,l=Dn.getRefType(i);if(l!=="range")o=Ia.ensureNumber,s=r(n,a);else{var u=Dn.getFromId(t,i);a=u.fraction2r(a),s=r(n,a),o=u.cleanPos}e[n]=o(s)};Dn.cleanPosition=function(e,t,r){var i=r==="paper"||r==="pixel"?Ia.ensureNumber:Dn.getFromId(t,r).cleanPos;return i(e)};Dn.redrawComponents=function(e,t){t=t||Dn.listIds(e);var r=e._fullLayout;function i(n,a,o,s){for(var l=RA.getComponentMethod(n,a),u={},f=0;f<t.length;f++)for(var c=r[Dn.id2name(t[f])],h=c[o],v=0;v<h.length;v++){var d=h[v];if(!u[d]&&(l(e,d),u[d]=1,s))return}}i("annotations","drawOne","_annIndices"),i("shapes","drawOne","_shapeIndices"),i("images","draw","_imgIndices",!0),i("selections","drawOne","_selectionIndices")};var tat=Dn.getDataConversions=function(e,t,r,i){var n,a=r==="x"||r==="y"||r==="z"?r:i;if(Ia.isArrayOrTypedArray(a)){if(n={type:Jit(i,void 0,{autotypenumbers:e._fullLayout.autotypenumbers}),_categories:[]},Dn.setConvert(n),n.type==="category")for(var o=0;o<i.length;o++)n.d2c(i[o])}else n=Dn.getFromTrace(e,t,a);return n?{d2c:n.d2c,c2d:n.c2d}:a==="ids"?{d2c:Die,c2d:Die}:{d2c:Rie,c2d:Rie}};function Rie(e){return+e}function Die(e){return String(e)}Dn.getDataToCoordFunc=function(e,t,r,i){return tat(e,t,r,i).d2c};Dn.counterLetter=function(e){var t=e.charAt(0);if(t==="x")return"y";if(t==="y")return"x"};Dn.minDtick=function(e,t,r,i){["log","category","multicategory"].indexOf(e.type)!==-1||!i?e._minDtick=0:e._minDtick===void 0?(e._minDtick=t,e._forceTick0=r):e._minDtick&&((e._minDtick/t+1e-6)%1<2e-6&&((r-e._forceTick0)/t%1+1.000001)%1<2e-6?(e._minDtick=t,e._forceTick0=r):((t/e._minDtick+1e-6)%1>2e-6||((r-e._forceTick0)/e._minDtick%1+1.000001)%1>2e-6)&&(e._minDtick=0))};Dn.saveRangeInitial=function(e,t){for(var r=Dn.list(e,"",!0),i=!1,n=0;n<r.length;n++){var a=r[n],o=a._rangeInitial0===void 0&&a._rangeInitial1===void 0,s=o||a.range[0]!==a._rangeInitial0||a.range[1]!==a._rangeInitial1,l=a.autorange;(o&&l!==!0||t&&s)&&(a._rangeInitial0=l==="min"||l==="max reversed"?void 0:a.range[0],a._rangeInitial1=l==="max"||l==="min reversed"?void 0:a.range[1],a._autorangeInitial=l,i=!0)}return i};Dn.saveShowSpikeInitial=function(e,t){for(var r=Dn.list(e,"",!0),i=!1,n="on",a=0;a<r.length;a++){var o=r[a],s=o._showSpikeInitial===void 0,l=s||o.showspikes!==o._showspikes;(s||t&&l)&&(o._showSpikeInitial=o.showspikes,i=!0),n==="on"&&!o.showspikes&&(n="off")}return e._fullLayout._cartesianSpikesEnabled=n,i};Dn.autoBin=function(e,t,r,i,n,a){var o=Ia.aggNums(Math.min,null,e),s=Ia.aggNums(Math.max,null,e);if(t.type==="category"||t.type==="multicategory")return{start:o-.5,end:s+.5,size:Math.max(1,Math.round(a)||1),_dataSpan:s-o};n||(n=t.calendar);var l;if(t.type==="log"?l={type:"linear",range:[o,s]}:l={type:t.type,range:Ia.simpleMap([o,s],t.c2r,0,n),calendar:n},Dn.setConvert(l),a=a&&Cie.dtick(a,l.type),a)l.dtick=a,l.tick0=Cie.tick0(void 0,l.type,n);else{var u;if(r)u=(s-o)/r;else{var f=Ia.distinctVals(e),c=Math.pow(10,Math.floor(Math.log(f.minDiff)/Math.LN10)),h=c*Ia.roundUp(f.minDiff/c,[.9,1.9,4.9,9.9],!0);u=Math.max(h,2*Ia.stdev(e)/Math.pow(e.length,i?.25:.4)),$u(u)||(u=1)}Dn.autoTicks(l,u)}var v=l.dtick,d=Dn.tickIncrement(Dn.tickFirst(l),v,"reverse",n),_,T;if(typeof v=="number")d=rat(d,e,l,o,s),T=1+Math.floor((s-d)/v),_=d+T*v;else for(l.dtick.charAt(0)==="M"&&(d=nat(d,e,v,o,n)),_=d,T=0;_<=s;)_=Dn.tickIncrement(_,v,!1,n),T++;return{start:t.c2r(d,0,n),end:t.c2r(_,0,n),size:v,_dataSpan:s-o}};function rat(e,t,r,i,n){var a=0,o=0,s=0,l=0;function u(v){return(1+(v-e)*100/r.dtick)%100<2}for(var f=0;f<t.length;f++)t[f]%1===0?s++:$u(t[f])||l++,u(t[f])&&a++,u(t[f]+r.dtick/2)&&o++;var c=t.length-l;if(s===c&&r.type!=="date")r.dtick<1?e=i-.5*r.dtick:(e-=.5,e+r.dtick<i&&(e+=r.dtick));else if(o<c*.1&&(a>c*.3||u(i)||u(n))){var h=r.dtick/2;e+=e+h<i?h:-h}return e}function nat(e,t,r,i,n){var a=Ia.findExactDates(t,n),o=.8;if(a.exactDays>o){var s=Number(r.substr(1));a.exactYears>o&&s%12===0?e=Dn.tickIncrement(e,"M6","reverse")+yv*1.5:a.exactMonths>o?e=Dn.tickIncrement(e,"M1","reverse")+yv*15.5:e-=mx;var l=Dn.tickIncrement(e,r);if(l<=i)return l}return e}Dn.prepMinorTicks=function(e,t,r){if(!t.minor.dtick){delete e.dtick;var i=t.dtick&&$u(t._tmin),n;if(i){var a=Dn.tickIncrement(t._tmin,t.dtick,!0);n=[t._tmin,a*.99+t._tmin*.01]}else{var o=Ia.simpleMap(t.range,t.r2l);n=[o[0],.8*o[0]+.2*o[1]]}if(e.range=Ia.simpleMap(n,t.l2r),e._isMinor=!0,Dn.prepTicks(e,r),i){var s=$u(t.dtick),l=$u(e.dtick),u=s?t.dtick:+t.dtick.substring(1),f=l?e.dtick:+e.dtick.substring(1);s&&l?Hz(u,f)?u===2*tp&&f===2*yv&&(e.dtick=tp):u===2*tp&&f===3*yv?e.dtick=tp:u===tp&&!(t._input.minor||{}).nticks?e.dtick=yv:Iie(u/f,2.5)?e.dtick=u/2:e.dtick=u:String(t.dtick).charAt(0)==="M"?l?e.dtick="M1":Hz(u,f)?u>=12&&f===2&&(e.dtick="M3"):e.dtick=t.dtick:String(e.dtick).charAt(0)==="L"?String(t.dtick).charAt(0)==="L"?Hz(u,f)||(e.dtick=Iie(u/f,2.5)?t.dtick/2:t.dtick):e.dtick="D1":e.dtick==="D2"&&+t.dtick>1&&(e.dtick=1)}e.range=t.range}t.minor._tick0Init===void 0&&(e.tick0=t.tick0)};function Hz(e,t){return Math.abs((e/t+.5)%1-.5)<.001}function Iie(e,t){return Math.abs(e/t-1)<.001}Dn.prepTicks=function(e,t){var r=Ia.simpleMap(e.range,e.r2l,void 0,void 0,t);if(e.tickmode==="auto"||!e.dtick){var i=e.nticks,n;i||(e.type==="category"||e.type==="multicategory"?(n=e.tickfont?Ia.bigFont(e.tickfont.size||12):15,i=e._length/n):(n=e._id.charAt(0)==="y"?40:80,i=Ia.constrain(e._length/n,4,9)+1),e._name==="radialaxis"&&(i*=2)),e.minor&&e.minor.tickmode!=="array"||e.tickmode==="array"&&(i*=100),e._roughDTick=Math.abs(r[1]-r[0])/i,Dn.autoTicks(e,e._roughDTick),e._minDtick>0&&e.dtick<e._minDtick*2&&(e.dtick=e._minDtick,e.tick0=e.l2r(e._forceTick0))}e.ticklabelmode==="period"&&iat(e),e.tick0||(e.tick0=e.type==="date"?"2000-01-01":0),e.type==="date"&&e.dtick<.1&&(e.dtick=.1),Gie(e)};function Gz(e){return+e.substring(1)}function iat(e){var t;function r(){return!($u(e.dtick)||e.dtick.charAt(0)!=="M")}var i=r(),n=Dn.getTickFormat(e);if(n){var a=e._dtickInit!==e.dtick;/%[fLQsSMX]/.test(n)||(/%[HI]/.test(n)?(t=Og,a&&!i&&e.dtick<Og&&(e.dtick=Og)):/%p/.test(n)?(t=mx,a&&!i&&e.dtick<mx&&(e.dtick=mx)):/%[Aadejuwx]/.test(n)?(t=yv,a&&!i&&e.dtick<yv&&(e.dtick=yv)):/%[UVW]/.test(n)?(t=tp,a&&!i&&e.dtick<tp&&(e.dtick=tp)):/%[Bbm]/.test(n)?(t=w2,a&&(i?Gz(e.dtick)<1:e.dtick<jz)&&(e.dtick="M1")):/%[q]/.test(n)?(t=Xz,a&&(i?Gz(e.dtick)<3:e.dtick<Zz)&&(e.dtick="M3")):/%[Yy]/.test(n)&&(t=qC,a&&(i?Gz(e.dtick)<12:e.dtick<Wz)&&(e.dtick="M12")))}i=r(),i&&e.tick0===e._dowTick0&&(e.tick0=e._rawTick0),e._definedDelta=t}function aat(e,t,r){for(var i=0;i<e.length;i++){var n=e[i].value,a=i,o=i+1;i<e.length-1?(a=i,o=i+1):i>0?(a=i-1,o=i):(a=i,o=i);var s=e[a].value,l=e[o].value,u=Math.abs(l-s),f=r||u,c=0;f>=Wz?u>=Wz&&u<=Xit?c=u:c=qC:r===Xz&&f>=Zz?u>=Zz&&u<=Zit?c=u:c=Xz:f>=jz?u>=jz&&u<=jit?c=u:c=w2:r===tp&&f>=tp?c=tp:f>=yv?c=yv:r===mx&&f>=mx?c=mx:r===Og&&f>=Og&&(c=Og);var h;c>=u&&(c=u,h=!0);var v=n+c;if(t.rangebreaks&&c>0){for(var d=84,_=0,T=0;T<d;T++){var p=(T+.5)/d;t.maskBreaks(n*(1-p)+p*v)!==UC&&_++}c*=_/d,c||(e[i].drop=!0),h&&u>tp&&(c=u)}(c>0||i===0)&&(e[i].periodX=n+c/2)}}Dn.calcTicks=function(t,r){for(var i=t.type,n=t.calendar,a=t.ticklabelstep,o=t.ticklabelmode==="period",s=Ia.simpleMap(t.range,t.r2l,void 0,void 0,r),l=s[1]<s[0],u=Math.min(s[0],s[1]),f=Math.max(s[0],s[1]),c=Math.max(1e3,t._length||0),h=[],v=[],d=[],_=[],T=t.minor&&(t.minor.ticks||t.minor.showgrid),p=1;p>=(T?0:1);p--){var M=!p;p?(t._dtickInit=t.dtick,t._tick0Init=t.tick0):(t.minor._dtickInit=t.minor.dtick,t.minor._tick0Init=t.minor.tick0);var b=p?t:Ia.extendFlat({},t,t.minor);if(M?Dn.prepMinorTicks(b,t,r):Dn.prepTicks(b,r),b.tickmode==="array"){p?(d=[],h=Fie(t,!M)):(_=[],v=Fie(t,!M));continue}if(b.tickmode==="sync"){d=[],h=oat(t);continue}var w=iO(s),k=w[0],x=w[1],E=$u(b.dtick),S=i==="log"&&!(E||b.dtick.charAt(0)==="L"),g=Dn.tickFirst(b,r);if(p){if(t._tmin=g,g<k!==l)break;(i==="category"||i==="multicategory")&&(x=l?Math.max(-.5,x):Math.min(t._categories.length-.5,x))}var C=null,A=g,P;if(p){var D;E?D=t.dtick:i==="date"?typeof t.dtick=="string"&&t.dtick.charAt(0)==="M"&&(D=w2*t.dtick.substring(1)):D=t._roughDTick,P=Math.round((t.r2l(A)-t.r2l(t.tick0))/D)-1}var z=b.dtick;for(b.rangebreaks&&b._tick0Init!==b.tick0&&(A=Yz(A,t),l||(A=Dn.tickIncrement(A,z,!l,n))),p&&o&&(A=Dn.tickIncrement(A,z,!l,n),P--);l?A>=x:A<=x;A=Dn.tickIncrement(A,z,l,n)){if(p&&P++,b.rangebreaks&&!l){if(A<k)continue;if(b.maskBreaks(A)===UC&&Yz(A,b)>=f)break}if(d.length>c||A===C)break;C=A;var O={value:A};p?(S&&A!==(A|0)&&(O.simpleLabel=!0),a>1&&P%a&&(O.skipLabel=!0),d.push(O)):(O.minor=!0,_.push(O))}}if(T){var V=t.minor.ticks==="inside"&&t.ticks==="outside"||t.minor.ticks==="outside"&&t.ticks==="inside";if(!V){for(var B=d.map(function(we){return we.value}),F=[],N=0;N<_.length;N++){var Z=_[N],J=Z.value;if(B.indexOf(J)===-1){for(var re=!1,ue=0;!re&&ue<d.length;ue++)1e7+d[ue].value===1e7+J&&(re=!0);re||F.push(Z)}}_=F}}o&&aat(d,t,t._definedDelta);var fe;if(t.rangebreaks){var K=t._id.charAt(0)==="y",X=1;t.tickmode==="auto"&&(X=t.tickfont?t.tickfont.size:12);var ae=NaN;for(fe=d.length-1;fe>-1;fe--){if(d[fe].drop){d.splice(fe,1);continue}d[fe].value=Yz(d[fe].value,t);var oe=t.c2p(d[fe].value);(K?ae>oe-X:ae<oe+X)?d.splice(l?fe+1:fe,1):ae=oe}}sO(t)&&Math.abs(s[1]-s[0])===360&&d.pop(),t._tmax=(d[d.length-1]||{}).value,t._prevDateHead="",t._inCalcTicks=!0;var me,xe=function(we){we.text="",t._prevDateHead=me};d=d.concat(_);var ce,ie;for(fe=0;fe<d.length;fe++){var ge=d[fe].minor,le=d[fe].value;ge?v.push({x:le,minor:!0}):(me=t._prevDateHead,ce=Dn.tickText(t,le,!1,d[fe].simpleLabel),ie=d[fe].periodX,ie!==void 0&&(ce.periodX=ie,(ie>f||ie<u)&&(ie>f&&(ce.periodX=f),ie<u&&(ce.periodX=u),xe(ce))),d[fe].skipLabel&&xe(ce),h.push(ce))}return h=h.concat(v),t._inCalcTicks=!1,o&&h.length&&(h[0].noTick=!0),h};function Uie(e,t){return e.rangebreaks&&(t=t.filter(function(r){return e.maskBreaks(r.x)!==UC})),t}function oat(e){var t=e._mainAxis,r=[];if(t._vals){for(var i=0;i<t._vals.length;i++)if(!t._vals[i].noTick){var n=t.l2p(t._vals[i].x),a=e.p2l(n),o=Dn.tickText(e,a);t._vals[i].minor&&(o.minor=!0,o.text=""),r.push(o)}}return r=Uie(e,r),r}function Fie(e,t){var r=Ia.simpleMap(e.range,e.r2l),i=iO(r),n=Math.min(i[0],i[1]),a=Math.max(i[0],i[1]),o=e.type==="category"?e.d2l_noadd:e.d2l;e.type==="log"&&String(e.dtick).charAt(0)!=="L"&&(e.dtick="L"+Math.pow(10,Math.floor(Math.min(e.range[0],e.range[1]))-1));for(var s=[],l=0;l<=1;l++)if(!(t!==void 0&&(t&&l||t===!1&&!l))&&!(l&&!e.minor)){var u=l?e.minor.tickvals:e.tickvals,f=l?[]:e.ticktext;if(u){Ia.isArrayOrTypedArray(f)||(f=[]);for(var c=0;c<u.length;c++){var h=o(u[c]);if(h>n&&h<a){var v=Dn.tickText(e,h,!1,String(f[c]));l&&(v.minor=!0,v.text=""),s.push(v)}}}}return s=Uie(e,s),s}var IC=[2,5,10],qie=[1,2,3,6,12],zie=[1,2,5,10,15,30],sat=[1,2,3,7,14],Vie=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Hie=[-.301,0,.301,.699,1],lat=[15,30,45,90,180];function N0(e,t,r){return t*Ia.roundUp(e/t,r)}Dn.autoTicks=function(e,t,r){var i;function n(c){return Math.pow(c,Math.floor(Math.log(t)/Math.LN10))}if(e.type==="date"){e.tick0=Ia.dateTick0(e.calendar,0);var a=2*t;if(a>qC)t/=qC,i=n(10),e.dtick="M"+12*N0(t,i,IC);else if(a>w2)t/=w2,e.dtick="M"+N0(t,1,qie);else if(a>yv){if(e.dtick=N0(t,yv,e._hasDayOfWeekBreaks?[1,2,7,14]:sat),!r){var o=Dn.getTickFormat(e),s=e.ticklabelmode==="period";s&&(e._rawTick0=e.tick0),/%[uVW]/.test(o)?e.tick0=Ia.dateTick0(e.calendar,2):e.tick0=Ia.dateTick0(e.calendar,1),s&&(e._dowTick0=e.tick0)}}else a>Og?e.dtick=N0(t,Og,qie):a>zC?e.dtick=N0(t,zC,zie):a>Kz?e.dtick=N0(t,Kz,zie):(i=n(10),e.dtick=N0(t,i,IC))}else if(e.type==="log"){e.tick0=0;var l=Ia.simpleMap(e.range,e.r2l);if(e._isMinor&&(t*=1.5),t>.7)e.dtick=Math.ceil(t);else if(Math.abs(l[1]-l[0])<1){var u=1.5*Math.abs((l[1]-l[0])/t);t=Math.abs(Math.pow(10,l[1])-Math.pow(10,l[0]))/u,i=n(10),e.dtick="L"+N0(t,i,IC)}else e.dtick=t>.3?"D2":"D1"}else e.type==="category"||e.type==="multicategory"?(e.tick0=0,e.dtick=Math.ceil(Math.max(t,1))):sO(e)?(e.tick0=0,i=1,e.dtick=N0(t,i,lat)):(e.tick0=0,i=n(10),e.dtick=N0(t,i,IC));if(e.dtick===0&&(e.dtick=1),!$u(e.dtick)&&typeof e.dtick!="string"){var f=e.dtick;throw e.dtick=1,"ax.dtick error: "+String(f)}};function Gie(e){var t=e.dtick;if(e._tickexponent=0,!$u(t)&&typeof t!="string"&&(t=1),(e.type==="category"||e.type==="multicategory")&&(e._tickround=null),e.type==="date"){var r=e.r2l(e.tick0),i=e.l2r(r).replace(/(^-|i)/g,""),n=i.length;if(String(t).charAt(0)==="M")n>10||i.substr(5)!=="01-01"?e._tickround="d":e._tickround=+t.substr(1)%12===0?"y":"m";else if(t>=yv&&n<=10||t>=yv*15)e._tickround="d";else if(t>=zC&&n<=16||t>=Og)e._tickround="M";else if(t>=Kz&&n<=19||t>=zC)e._tickround="S";else{var a=e.l2r(r+t).replace(/^-/,"").length;e._tickround=Math.max(n,a)-20,e._tickround<0&&(e._tickround=4)}}else if($u(t)||t.charAt(0)==="L"){var o=e.range.map(e.r2d||Number);$u(t)||(t=Number(t.substr(1))),e._tickround=2-Math.floor(Math.log(t)/Math.LN10+.01);var s=Math.max(Math.abs(o[0]),Math.abs(o[1])),l=Math.floor(Math.log(s)/Math.LN10+.01),u=e.minexponent===void 0?3:e.minexponent;Math.abs(l)>u&&(NC(e.exponentformat)&&!aO(l)?e._tickexponent=3*Math.round((l-1)/3):e._tickexponent=l)}else e._tickround=null}Dn.tickIncrement=function(e,t,r,i){var n=r?-1:1;if($u(t))return Ia.increment(e,n*t);var a=t.charAt(0),o=n*Number(t.substr(1));if(a==="M")return Ia.incrementMonth(e,o,i);if(a==="L")return Math.log(Math.pow(10,e)+o)/Math.LN10;if(a==="D"){var s=t==="D2"?Hie:Vie,l=e+n*.01,u=Ia.roundUp(Ia.mod(l,1),s,r);return Math.floor(l)+Math.log(ep.round(Math.pow(10,u),1))/Math.LN10}throw"unrecognized dtick "+String(t)};Dn.tickFirst=function(e,t){var r=e.r2l||Number,i=Ia.simpleMap(e.range,r,void 0,void 0,t),n=i[1]<i[0],a=n?Math.floor:Math.ceil,o=iO(i)[0],s=e.dtick,l=r(e.tick0);if($u(s)){var u=a((o-l)/s)*s+l;return(e.type==="category"||e.type==="multicategory")&&(u=Ia.constrain(u,0,e._categories.length-1)),u}var f=s.charAt(0),c=Number(s.substr(1));if(f==="M"){for(var h=0,v=l,d,_,T;h<10;){if(d=Dn.tickIncrement(v,s,n,e.calendar),(d-o)*(v-o)<=0)return n?Math.min(v,d):Math.max(v,d);_=(o-(v+d)/2)/(d-v),T=f+(Math.abs(Math.round(_))||1)*c,v=Dn.tickIncrement(v,T,_<0?!n:n,e.calendar),h++}return Ia.error("tickFirst did not converge",e),v}else{if(f==="L")return Math.log(a((Math.pow(10,o)-l)/c)*c+l)/Math.LN10;if(f==="D"){var p=s==="D2"?Hie:Vie,M=Ia.roundUp(Ia.mod(o,1),p,n);return Math.floor(o)+Math.log(ep.round(Math.pow(10,M),1))/Math.LN10}else throw"unrecognized dtick "+String(s)}};Dn.tickText=function(e,t,r,i){var n=Yie(e,t),a=e.tickmode==="array",o=r||a,s=e.type,l=s==="category"?e.d2l_noadd:e.d2l,u,f=function(T){var p=e.l2p(T);return p>=0&&p<=e._length?T:null};if(a&&Ia.isArrayOrTypedArray(e.ticktext)){var c=Ia.simpleMap(e.range,e.r2l),h=(Math.abs(c[1]-c[0])-(e._lBreaks||0))/1e4;for(u=0;u<e.ticktext.length&&!(Math.abs(t-l(e.tickvals[u]))<h);u++);if(u<e.ticktext.length)return n.text=String(e.ticktext[u]),n.xbnd=[f(n.x-.5),f(n.x+e.dtick-.5)],n}function v(T){if(T===void 0)return!0;if(r)return T==="none";var p={first:e._tmin,last:e._tmax}[T];return T!=="all"&&t!==p}var d=r?"never":e.exponentformat!=="none"&&v(e.showexponent)?"hide":"";if(s==="date"?uat(e,n,r,o):s==="log"?fat(e,n,r,o,d):s==="category"?cat(e,n):s==="multicategory"?hat(e,n,r):sO(e)?dat(e,n,r,o,d):vat(e,n,r,o,d),i||(e.tickprefix&&!v(e.showtickprefix)&&(n.text=e.tickprefix+n.text),e.ticksuffix&&!v(e.showticksuffix)&&(n.text+=e.ticksuffix)),e.labelalias&&e.labelalias.hasOwnProperty(n.text)){var _=e.labelalias[n.text];typeof _=="string"&&(n.text=_)}return(e.tickson==="boundaries"||e.showdividers)&&(n.xbnd=[f(n.x-.5),f(n.x+e.dtick-.5)]),n};Dn.hoverLabelText=function(e,t,r){r&&(e=Ia.extendFlat({},e,{hoverformat:r}));var i=Ia.isArrayOrTypedArray(t)?t[0]:t,n=Ia.isArrayOrTypedArray(t)?t[1]:void 0;if(n!==void 0&&n!==i)return Dn.hoverLabelText(e,i,r)+" - "+Dn.hoverLabelText(e,n,r);var a=e.type==="log"&&i<=0,o=Dn.tickText(e,e.c2l(a?-i:i),"hover").text;return a?i===0?"0":xx+o:o};function Yie(e,t,r){var i=e.tickfont||{};return{x:t,dx:0,dy:0,text:r||"",fontSize:i.size,font:i.family,fontColor:i.color}}function uat(e,t,r,i){var n=e._tickround,a=r&&e.hoverformat||Dn.getTickFormat(e);i=!a&&i,i&&($u(n)?n=4:n={y:"m",m:"d",d:"M",M:"S",S:4}[n]);var o=Ia.formatDate(t.x,a,n,e._dateFormat,e.calendar,e._extraFormat),s,l=o.indexOf(`
`);if(l!==-1&&(s=o.substr(l+1),o=o.substr(0,l)),i&&(s!==void 0&&(o==="00:00:00"||o==="00:00")?(o=s,s=""):o.length===8&&(o=o.replace(/:00$/,""))),s)if(r)n==="d"?o+=", "+s:o=s+(o?", "+o:"");else if(!e._inCalcTicks||e._prevDateHead!==s)e._prevDateHead=s,o+="<br>"+s;else{var u=FA(e),f=e._trueSide||e.side;(!u&&f==="top"||u&&f==="bottom")&&(o+="<br> ")}t.text=o}function fat(e,t,r,i,n){var a=e.dtick,o=t.x,s=e.tickformat,l=typeof a=="string"&&a.charAt(0);if(n==="never"&&(n=""),i&&l!=="L"&&(a="L3",l="L"),s||l==="L")t.text=IA(Math.pow(10,o),e,n,i);else if($u(a)||l==="D"&&Ia.mod(o+.01,1)<.1){var u=Math.round(o),f=Math.abs(u),c=e.exponentformat;c==="power"||NC(c)&&aO(u)?(u===0?t.text=1:u===1?t.text="10":t.text="10<sup>"+(u>1?"":xx)+f+"</sup>",t.fontSize*=1.25):(c==="e"||c==="E")&&f>2?t.text="1"+c+(u>0?"+":xx)+f:(t.text=IA(Math.pow(10,o),e,"","fakehover"),a==="D1"&&e._id.charAt(0)==="y"&&(t.dy-=t.fontSize/6))}else if(l==="D")t.text=String(Math.round(Math.pow(10,Ia.mod(o,1)))),t.fontSize*=.75;else throw"unrecognized dtick "+String(a);if(e.dtick==="D1"){var h=String(t.text).charAt(0);(h==="0"||h==="1")&&(e._id.charAt(0)==="y"?t.dx-=t.fontSize/4:(t.dy+=t.fontSize/2,t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(o<0?.5:.25)))}}function cat(e,t){var r=e._categories[Math.round(t.x)];r===void 0&&(r=""),t.text=String(r)}function hat(e,t,r){var i=Math.round(t.x),n=e._categories[i]||[],a=n[1]===void 0?"":String(n[1]),o=n[0]===void 0?"":String(n[0]);r?t.text=o+" - "+a:(t.text=a,t.text2=o)}function vat(e,t,r,i,n){n==="never"?n="":e.showexponent==="all"&&Math.abs(t.x/e.dtick)<1e-6&&(n="hide"),t.text=IA(t.x,e,n,i)}function dat(e,t,r,i,n){if(e.thetaunit==="radians"&&!r){var a=t.x/180;if(a===0)t.text="0";else{var o=pat(a);if(o[1]>=100)t.text=IA(Ia.deg2rad(t.x),e,n,i);else{var s=t.x<0;o[1]===1?o[0]===1?t.text="\u03C0":t.text=o[0]+"\u03C0":t.text=["<sup>",o[0],"</sup>","\u2044","<sub>",o[1],"</sub>","\u03C0"].join(""),s&&(t.text=xx+t.text)}}}else t.text=IA(t.x,e,n,i)}function pat(e){function t(s,l){return Math.abs(s-l)<=1e-6}function r(s,l){return t(l,0)?s:r(l,s%l)}function i(s){for(var l=1;!t(Math.round(s*l)/l,s);)l*=10;return l}var n=i(e),a=e*n,o=Math.abs(r(a,n));return[Math.round(a/o),Math.round(n/o)]}var gat=["f","p","n","\u03BC","m","","k","M","G","T"];function NC(e){return e==="SI"||e==="B"}function aO(e){return e>14||e<-15}function IA(e,t,r,i){var n=e<0,a=t._tickround,o=r||t.exponentformat||"B",s=t._tickexponent,l=Dn.getTickFormat(t),u=t.separatethousands;if(i){var f={exponentformat:o,minexponent:t.minexponent,dtick:t.showexponent==="none"?t.dtick:$u(e)&&Math.abs(e)||1,range:t.showexponent==="none"?t.range.map(t.r2d):[0,e||1]};Gie(f),a=(Number(f._tickround)||0)+4,s=f._tickexponent,t.hoverformat&&(l=t.hoverformat)}if(l)return t._numFormat(l)(e).replace(/-/g,xx);var c=Math.pow(10,-a)/2;if(o==="none"&&(s=0),e=Math.abs(e),e<c)e="0",n=!1;else{if(e+=c,s&&(e*=Math.pow(10,-s),a+=s),a===0)e=String(Math.floor(e));else if(a<0){e=String(Math.round(e)),e=e.substr(0,e.length+a);for(var h=a;h<0;h++)e+="0"}else{e=String(e);var v=e.indexOf(".")+1;v&&(e=e.substr(0,v+a).replace(/\.?0+$/,""))}e=Ia.numSeparate(e,t._separators,u)}if(s&&o!=="hide"){NC(o)&&aO(s)&&(o="power");var d;s<0?d=xx+-s:o!=="power"?d="+"+s:d=String(s),o==="e"||o==="E"?e+=o+d:o==="power"?e+="\xD710<sup>"+d+"</sup>":o==="B"&&s===9?e+="B":NC(o)&&(e+=gat[s/3+5])}return n?xx+e:e}Dn.getTickFormat=function(e){var t;function r(l){return typeof l!="string"?l:Number(l.replace("M",""))*w2}function i(l,u){var f=["L","D"];if(typeof l==typeof u){if(typeof l=="number")return l-u;var c=f.indexOf(l.charAt(0)),h=f.indexOf(u.charAt(0));return c===h?Number(l.replace(/(L|D)/g,""))-Number(u.replace(/(L|D)/g,"")):c-h}else return typeof l=="number"?1:-1}function n(l,u,f){var c=f||function(d){return d},h=u[0],v=u[1];return(!h&&typeof h!="number"||c(h)<=c(l))&&(!v&&typeof v!="number"||c(v)>=c(l))}function a(l,u){var f=u[0]===null,c=u[1]===null,h=i(l,u[0])>=0,v=i(l,u[1])<=0;return(f||h)&&(c||v)}var o,s;if(e.tickformatstops&&e.tickformatstops.length>0)switch(e.type){case"date":case"linear":{for(t=0;t<e.tickformatstops.length;t++)if(s=e.tickformatstops[t],s.enabled&&n(e.dtick,s.dtickrange,r)){o=s;break}break}case"log":{for(t=0;t<e.tickformatstops.length;t++)if(s=e.tickformatstops[t],s.enabled&&a(e.dtick,s.dtickrange)){o=s;break}break}default:}return o?o.value:e.tickformat};Dn.getSubplots=function(e,t){var r=e._fullLayout._subplots,i=r.cartesian.concat(r.gl2d||[]),n=t?Dn.findSubplotsWithAxis(i,t):i;return n.sort(function(a,o){var s=a.substr(1).split("y"),l=o.substr(1).split("y");return s[0]===l[0]?+s[1]-+l[1]:+s[0]-+l[0]}),n};Dn.findSubplotsWithAxis=function(e,t){for(var r=new RegExp(t._id.charAt(0)==="x"?"^"+t._id+"y":t._id+"$"),i=[],n=0;n<e.length;n++){var a=e[n];r.test(a)&&i.push(a)}return i};Dn.makeClipPaths=function(e){var t=e._fullLayout;if(!t._hasOnlyLargeSploms){var r={_offset:0,_length:t.width,_id:""},i={_offset:0,_length:t.height,_id:""},n=Dn.list(e,"x",!0),a=Dn.list(e,"y",!0),o=[],s,l;for(s=0;s<n.length;s++)for(o.push({x:n[s],y:i}),l=0;l<a.length;l++)s===0&&o.push({x:r,y:a[l]}),o.push({x:n[s],y:a[l]});var u=t._clips.selectAll(".axesclip").data(o,function(f){return f.x._id+f.y._id});u.enter().append("clipPath").classed("axesclip",!0).attr("id",function(f){return"clip"+t._uid+f.x._id+f.y._id}).append("rect"),u.exit().remove(),u.each(function(f){ep.select(this).select("rect").attr({x:f.x._offset||0,y:f.y._offset||0,width:f.x._length||1,height:f.y._length||1})})}};Dn.draw=function(e,t,r){var i=e._fullLayout;t==="redraw"&&i._paper.selectAll("g.subplot").each(function(l){var u=l[0],f=i._plots[u];if(f){var c=f.xaxis,h=f.yaxis;f.xaxislayer.selectAll("."+c._id+"tick").remove(),f.yaxislayer.selectAll("."+h._id+"tick").remove(),f.xaxislayer.selectAll("."+c._id+"tick2").remove(),f.yaxislayer.selectAll("."+h._id+"tick2").remove(),f.xaxislayer.selectAll("."+c._id+"divider").remove(),f.yaxislayer.selectAll("."+h._id+"divider").remove(),f.minorGridlayer&&f.minorGridlayer.selectAll("path").remove(),f.gridlayer&&f.gridlayer.selectAll("path").remove(),f.zerolinelayer&&f.zerolinelayer.selectAll("path").remove(),i._infolayer.select(".g-"+c._id+"title").remove(),i._infolayer.select(".g-"+h._id+"title").remove()}});var n=!t||t==="redraw"?Dn.listIds(e):t,a=Dn.list(e),o=a.filter(function(l){return l.autoshift}).map(function(l){return l.overlaying});n.map(function(l){var u=Dn.getFromId(e,l);if(u.tickmode==="sync"&&u.overlaying){var f=n.findIndex(function(c){return c===u.overlaying});f>=0&&n.unshift(n.splice(f,1).shift())}});var s={false:{left:0,right:0}};return Ia.syncOrAsync(n.map(function(l){return function(){if(l){var u=Dn.getFromId(e,l);r||(r={}),r.axShifts=s,r.overlayingShiftedAx=o;var f=Dn.drawOne(e,u,r);return u._shiftPusher&&nO(u,u._fullDepth||0,s,!0),u._r=u.range.slice(),u._rl=Ia.simpleMap(u._r,u.r2l),f}}}))};Dn.drawOne=function(e,t,r){r=r||{};var i=r.axShifts||{},n=r.overlayingShiftedAx||[],a,o,s;t.setScale();var l=e._fullLayout,u=t._id,f=u.charAt(0),c=Dn.counterLetter(u),h=l._plots[t._mainSubplot];if(!h)return;if(t._shiftPusher=t.autoshift||n.indexOf(t._id)!==-1||n.indexOf(t.overlaying)!==-1,t._shiftPusher&t.anchor==="free"){var v=t.linewidth/2||0;t.ticks==="inside"&&(v+=t.ticklen),nO(t,v,i,!0),nO(t,t.shift||0,i,!1)}(r.skipTitle!==!0||t._shift===void 0)&&(t._shift=Cat(t,i));var d=h[f+"axislayer"],_=t._mainLinePosition,T=_+=t._shift,p=t._mainMirrorPosition,M=t._vals=Dn.calcTicks(t),b=[t.mirror,T,p].join("_");for(a=0;a<M.length;a++)M[a].axInfo=b;t._selections={},t._tickAngles&&(t._prevTickAngles=t._tickAngles),t._tickAngles={},t._depth=null;var w={};function k(Pe){var Ie=u+(Pe||"tick");return w[Ie]||(w[Ie]=_at(t,Ie,T)),w[Ie]}if(t.visible){var x=Dn.makeTransTickFn(t),E=Dn.makeTransTickLabelFn(t),S,g,C=t.ticks==="inside",A=t.ticks==="outside";if(t.tickson==="boundaries"){var P=yat(t,M);g=Dn.clipEnds(t,P),S=C?g:P}else g=Dn.clipEnds(t,M),S=C&&t.ticklabelmode!=="period"?g:M;var D=t._gridVals=g,z=xat(t,M);if(!l._hasOnlyLargeSploms){var O=t._subplotsWith,V={};for(a=0;a<O.length;a++){o=O[a],s=l._plots[o];var B=s[c+"axis"],F=B._mainAxis._id;if(!V[F]){V[F]=1;var N=f==="x"?"M0,"+B._offset+"v"+B._length:"M"+B._offset+",0h"+B._length;Dn.drawGrid(e,t,{vals:D,counterAxis:B,layer:s.gridlayer.select("."+u),minorLayer:s.minorGridlayer.select("."+u),path:N,transFn:x}),Dn.drawZeroLine(e,t,{counterAxis:B,layer:s.zerolinelayer,path:N,transFn:x})}}}var Z,J=Dn.getTickSigns(t),re=Dn.getTickSigns(t,"minor");if(t.ticks||t.minor&&t.minor.ticks){var ue=Dn.makeTickPath(t,T,J[2]),fe=Dn.makeTickPath(t,T,re[2],{minor:!0}),K,X,ae,oe;if(t._anchorAxis&&t.mirror&&t.mirror!==!0?(K=Dn.makeTickPath(t,p,J[3]),X=Dn.makeTickPath(t,p,re[3],{minor:!0}),ae=ue+K,oe=fe+X):(K="",X="",ae=ue,oe=fe),t.showdividers&&A&&t.tickson==="boundaries"){var me={};for(a=0;a<z.length;a++)me[z[a].x]=1;Z=function(Pe){return me[Pe.x]?K:ae}}else Z=function(Pe){return Pe.minor?oe:ae}}if(Dn.drawTicks(e,t,{vals:S,layer:d,path:Z,transFn:x}),t.mirror==="allticks"){var xe=Object.keys(t._linepositions||{});for(a=0;a<xe.length;a++){o=xe[a],s=l._plots[o];var ce=t._linepositions[o]||[],ie=ce[0],ge=ce[1],le=ce[2],we=Dn.makeTickPath(t,ie,le?J[0]:re[0],{minor:le})+Dn.makeTickPath(t,ge,le?J[1]:re[1],{minor:le});Dn.drawTicks(e,t,{vals:S,layer:s[f+"axislayer"],path:we,transFn:x})}}var Re=[];if(Re.push(function(){return Dn.drawLabels(e,t,{vals:M,layer:d,plotinfo:s,transFn:E,labelFns:Dn.makeLabelFns(t,T)})}),t.type==="multicategory"){var qe={x:2,y:10}[f];Re.push(function(){var Pe={x:"height",y:"width"}[f],Ie=k()[Pe]+qe+(t._tickAngles[u+"tick"]?t.tickfont.size*OC:0);return Dn.drawLabels(e,t,{vals:mat(t,M),layer:d,cls:u+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:x,labelFns:Dn.makeLabelFns(t,T+Ie*J[4])})}),Re.push(function(){return t._depth=J[4]*(k("tick2")[t.side]-T),wat(e,t,{vals:z,layer:d,path:Dn.makeTickPath(t,T,J[4],{len:t._depth}),transFn:x})})}else t.title.hasOwnProperty("standoff")&&Re.push(function(){t._depth=J[4]*(k()[t.side]-T)});var et=RA.getComponentMethod("rangeslider","isVisible")(t);return!r.skipTitle&&!(et&&t.side==="bottom")&&Re.push(function(){return Tat(e,t)}),Re.push(function(){var Pe=t.side.charAt(0),Ie=Kit[t.side].charAt(0),ut=Dn.getPxPosition(e,t),ft=A?t.ticklen:0,je,_t,Bt,Lt;(t.automargin||et||t._shiftPusher)&&(t.type==="multicategory"?je=k("tick2"):(je=k(),f==="x"&&Pe==="b"&&(t._depth=Math.max(je.width>0?je.bottom-ut:0,ft))));var Me=0,Ze=0;if(t._shiftPusher&&(Me=Math.max(ft,je.height>0?Pe==="l"?ut-je.left:je.right-ut:0),t.title.text!==l._dfltTitle[f]&&(Ze=(t._titleStandoff||0)+(t._titleScoot||0),Pe==="l"&&(Ze+=tO(t))),t._fullDepth=Math.max(Me,Ze)),t.automargin){_t={x:0,y:0,r:0,l:0,t:0,b:0};var dt=[0,1],it=typeof t._shift=="number"?t._shift:0;if(f==="x"){if(Pe==="b"?_t[Pe]=t._depth:(_t[Pe]=t._depth=Math.max(je.width>0?ut-je.top:0,ft),dt.reverse()),je.width>0){var vt=je.right-(t._offset+t._length);vt>0&&(_t.xr=1,_t.r=vt);var rt=t._offset-je.left;rt>0&&(_t.xl=0,_t.l=rt)}}else if(Pe==="l"?(t._depth=Math.max(je.height>0?ut-je.left:0,ft),_t[Pe]=t._depth-it):(t._depth=Math.max(je.height>0?je.right-ut:0,ft),_t[Pe]=t._depth+it,dt.reverse()),je.height>0){var We=je.bottom-(t._offset+t._length);We>0&&(_t.yb=0,_t.b=We);var ht=t._offset-je.top;ht>0&&(_t.yt=1,_t.t=ht)}_t[c]=t.anchor==="free"?t.position:t._anchorAxis.domain[dt[0]],t.title.text!==l._dfltTitle[f]&&(_t[Pe]+=tO(t)+(t.title.standoff||0)),t.mirror&&t.anchor!=="free"&&(Bt={x:0,y:0,r:0,l:0,t:0,b:0},Bt[Ie]=t.linewidth,t.mirror&&t.mirror!==!0&&(Bt[Ie]+=ft),t.mirror===!0||t.mirror==="ticks"?Bt[c]=t._anchorAxis.domain[dt[1]]:(t.mirror==="all"||t.mirror==="allticks")&&(Bt[c]=[t._counterDomainMin,t._counterDomainMax][dt[1]]))}et&&(Lt=RA.getComponentMethod("rangeslider","autoMarginOpts")(e,t)),typeof t.automargin=="string"&&(Oie(_t,t.automargin),Oie(Bt,t.automargin)),_2.autoMargin(e,oO(t),_t),_2.autoMargin(e,Xie(t),Bt),_2.autoMargin(e,Zie(t),Lt)}),Ia.syncOrAsync(Re)}};function Oie(e,t){if(e){var r=Object.keys(Pie).reduce(function(i,n){return t.indexOf(n)!==-1&&Pie[n].forEach(function(a){i[a]=1}),i},{});Object.keys(e).forEach(function(i){r[i]||(i.length===1?e[i]=0:delete e[i])})}}function yat(e,t){var r=[],i,n=function(a,o){var s=a.xbnd[o];s!==null&&r.push(Ia.extendFlat({},a,{x:s}))};if(t.length){for(i=0;i<t.length;i++)n(t[i],0);n(t[i-1],1)}return r}function mat(e,t){for(var r=[],i={},n=0;n<t.length;n++){var a=t[n];i[a.text2]?i[a.text2].push(a.x):i[a.text2]=[a.x]}for(var o in i)r.push(Yie(e,Ia.interp(i[o],.5),o));return r}function xat(e,t){var r=[],i,n,a=t.length&&t[t.length-1].x<t[0].x,o=function(l,u){var f=l.xbnd[u];f!==null&&r.push(Ia.extendFlat({},l,{x:f}))};if(e.showdividers&&t.length){for(i=0;i<t.length;i++){var s=t[i];s.text2!==n&&o(s,a?1:0),n=s.text2}o(t[i-1],a?0:1)}return r}function _at(e,t,r){var i,n,a,o;if(e._selections[t].size())i=1/0,n=-1/0,a=1/0,o=-1/0,e._selections[t].each(function(){var l=rO(this),u=Ld.bBox(l.node().parentNode);i=Math.min(i,u.top),n=Math.max(n,u.bottom),a=Math.min(a,u.left),o=Math.max(o,u.right)});else{var s=Dn.makeLabelFns(e,r);i=n=s.yFn({dx:0,dy:0,fontSize:0}),a=o=s.xFn({dx:0,dy:0,fontSize:0})}return{top:i,bottom:n,left:a,right:o,height:n-i,width:o-a}}Dn.getTickSigns=function(e,t){var r=e._id.charAt(0),i={x:"top",y:"right"}[r],n=e.side===i?1:-1,a=[-1,1,n,-n],o=t?(e.minor||{}).ticks:e.ticks;return o!=="inside"==(r==="x")&&(a=a.map(function(s){return-s})),e.side&&a.push({l:-1,t:-1,r:1,b:1}[e.side.charAt(0)]),a};Dn.makeTransTickFn=function(e){return e._id.charAt(0)==="x"?function(t){return b2(e._offset+e.l2p(t.x),0)}:function(t){return b2(0,e._offset+e.l2p(t.x))}};Dn.makeTransTickLabelFn=function(e){var t=bat(e),r=t[0],i=t[1];return e._id.charAt(0)==="x"?function(n){return b2(r+e._offset+e.l2p(eO(n)),i)}:function(n){return b2(i,r+e._offset+e.l2p(eO(n)))}};function eO(e){return e.periodX!==void 0?e.periodX:e.x}function bat(e){var t=e.ticklabelposition||"",r=function(v){return t.indexOf(v)!==-1},i=r("top"),n=r("left"),a=r("right"),o=r("bottom"),s=r("inside"),l=o||n||i||a;if(!l&&!s)return[0,0];var u=e.side,f=l?(e.tickwidth||0)/2:0,c=BC,h=e.tickfont?e.tickfont.size:12;return(o||i)&&(f+=h*_x,c+=(e.linewidth||0)/2),(n||a)&&(f+=(e.linewidth||0)/2,c+=BC),s&&u==="top"&&(c-=h*(1-_x)),(n||i)&&(f=-f),(u==="bottom"||u==="right")&&(c=-c),[l?f:0,s?c:0]}Dn.makeTickPath=function(e,t,r,i){i||(i={});var n=i.minor;if(n&&!e.minor)return"";var a=i.len!==void 0?i.len:n?e.minor.ticklen:e.ticklen,o=e._id.charAt(0),s=(e.linewidth||1)/2;return o==="x"?"M0,"+(t+s*r)+"v"+a*r:"M"+(t+s*r)+",0h"+a*r};Dn.makeLabelFns=function(e,t,r){var i=e.ticklabelposition||"",n=function(P){return i.indexOf(P)!==-1},a=n("top"),o=n("left"),s=n("right"),l=n("bottom"),u=l||o||a||s,f=n("inside"),c=i==="inside"&&e.ticks==="inside"||!f&&e.ticks==="outside"&&e.tickson!=="boundaries",h=0,v=0,d=c?e.ticklen:0;if(f?d*=-1:u&&(d=0),c&&(h+=d,r)){var _=Ia.deg2rad(r);h=d*Math.cos(_)+1,v=d*Math.sin(_)}e.showticklabels&&(c||e.showline)&&(h+=.2*e.tickfont.size),h+=(e.linewidth||1)/2*(f?-1:1);var T={labelStandoff:h,labelShift:v},p,M,b,w,k=0,x=e.side,E=e._id.charAt(0),S=e.tickangle,g;if(E==="x")g=!f&&x==="bottom"||f&&x==="top",w=g?1:-1,f&&(w*=-1),p=v*w,M=t+h*w,b=g?1:-.2,Math.abs(S)===90&&(f?b+=DC:S===-90&&x==="bottom"?b=_x:S===90&&x==="top"?b=DC:b=.5,k=DC/2*(S/90)),T.xFn=function(P){return P.dx+p+k*P.fontSize},T.yFn=function(P){return P.dy+M+P.fontSize*b},T.anchorFn=function(P,D){if(u){if(o)return"end";if(s)return"start"}return!$u(D)||D===0||D===180?"middle":D*w<0!==f?"end":"start"},T.heightFn=function(P,D,z){return D<-60||D>60?-.5*z:e.side==="top"!==f?-z:0};else if(E==="y"){if(g=!f&&x==="left"||f&&x==="right",w=g?1:-1,f&&(w*=-1),p=h,M=v*w,b=0,!f&&Math.abs(S)===90&&(S===-90&&x==="left"||S===90&&x==="right"?b=_x:b=.5),f){var C=$u(S)?+S:0;if(C!==0){var A=Ia.deg2rad(C);k=Math.abs(Math.sin(A))*_x*w,b=0}}T.xFn=function(P){return P.dx+t-(p+P.fontSize*b)*w+k*P.fontSize},T.yFn=function(P){return P.dy+M+P.fontSize*DC},T.anchorFn=function(P,D){return $u(D)&&Math.abs(D)===90?"middle":g?"end":"start"},T.heightFn=function(P,D,z){return e.side==="right"&&(D*=-1),D<-30?-z:D<30?-.5*z:0}}return T};function HC(e){return[e.text,e.x,e.axInfo,e.font,e.fontSize,e.fontColor].join("_")}Dn.drawTicks=function(e,t,r){r=r||{};var i=t._id+"tick",n=[].concat(t.minor&&t.minor.ticks?r.vals.filter(function(o){return o.minor&&!o.noTick}):[]).concat(t.ticks?r.vals.filter(function(o){return!o.minor&&!o.noTick}):[]),a=r.layer.selectAll("path."+i).data(n,HC);a.exit().remove(),a.enter().append("path").classed(i,1).classed("ticks",1).classed("crisp",r.crisp!==!1).each(function(o){return DA.stroke(ep.select(this),o.minor?t.minor.tickcolor:t.tickcolor)}).style("stroke-width",function(o){return Ld.crispRound(e,o.minor?t.minor.tickwidth:t.tickwidth,1)+"px"}).attr("d",r.path).style("display",null),GC(t,[Bie]),a.attr("transform",r.transFn)};Dn.drawGrid=function(e,t,r){if(r=r||{},t.tickmode!=="sync"){var i=t._id+"grid",n=t.minor&&t.minor.showgrid,a=n?r.vals.filter(function(p){return p.minor}):[],o=t.showgrid?r.vals.filter(function(p){return!p.minor}):[],s=r.counterAxis;if(s&&Dn.shouldShowZeroLine(e,t,s))for(var l=t.tickmode==="array",u=0;u<o.length;u++){var f=o[u].x;if(l?!f:Math.abs(f)<t.dtick/100)if(o=o.slice(0,u).concat(o.slice(u+1)),l)u--;else break}t._gw=Ld.crispRound(e,t.gridwidth,1);for(var c=n?Ld.crispRound(e,t.minor.gridwidth,1):0,h=r.layer,v=r.minorLayer,d=1;d>=0;d--){var _=d?h:v;if(_){var T=_.selectAll("path."+i).data(d?o:a,HC);T.exit().remove(),T.enter().append("path").classed(i,1).classed("crisp",r.crisp!==!1),T.attr("transform",r.transFn).attr("d",r.path).each(function(p){return DA.stroke(ep.select(this),p.minor?t.minor.gridcolor:t.gridcolor||"#ddd")}).style("stroke-dasharray",function(p){return Ld.dashStyle(p.minor?t.minor.griddash:t.griddash,p.minor?t.minor.gridwidth:t.gridwidth)}).style("stroke-width",function(p){return(p.minor?c:t._gw)+"px"}).style("display",null),typeof r.path=="function"&&T.attr("d",r.path)}}GC(t,[Qz,$z])}};Dn.drawZeroLine=function(e,t,r){r=r||r;var i=t._id+"zl",n=Dn.shouldShowZeroLine(e,t,r.counterAxis),a=r.layer.selectAll("path."+i).data(n?[{x:0,id:t._id}]:[]);a.exit().remove(),a.enter().append("path").classed(i,1).classed("zl",1).classed("crisp",r.crisp!==!1).each(function(){r.layer.selectAll("path").sort(function(o,s){return Qit(o.id,s.id)})}),a.attr("transform",r.transFn).attr("d",r.path).call(DA.stroke,t.zerolinecolor||DA.defaultLine).style("stroke-width",Ld.crispRound(e,t.zerolinewidth,t._gw||1)+"px").style("display",null),GC(t,[Jz])};Dn.drawLabels=function(e,t,r){r=r||{};var i=e._fullLayout,n=t._id,a=r.cls||n+"tick",o=r.vals.filter(function(F){return F.text}),s=r.labelFns,l=r.secondary?0:t.tickangle,u=(t._prevTickAngles||{})[a],f=r.layer.selectAll("g."+a).data(t.showticklabels?o:[],HC),c=[];f.enter().append("g").classed(a,1).append("text").attr("text-anchor","middle").each(function(F){var N=ep.select(this),Z=e._promises.length;N.call(x2.positionText,s.xFn(F),s.yFn(F)).call(Ld.font,F.font,F.fontSize,F.fontColor).text(F.text).call(x2.convertToTspans,e),e._promises[Z]?c.push(e._promises.pop().then(function(){h(N,l)})):h(N,l)}),GC(t,[Lie]),f.exit().remove(),r.repositionOnUpdate&&f.each(function(F){ep.select(this).select("text").call(x2.positionText,s.xFn(F),s.yFn(F))});function h(F,N){F.each(function(Z){var J=ep.select(this),re=J.select(".text-math-group"),ue=s.anchorFn(Z,N),fe=r.transFn.call(J.node(),Z)+($u(N)&&+N!=0?" rotate("+N+","+s.xFn(Z)+","+(s.yFn(Z)-Z.fontSize/2)+")":""),K=x2.lineCount(J),X=OC*Z.fontSize,ae=s.heightFn(Z,$u(N)?+N:0,(K-1)*X);if(ae&&(fe+=b2(0,ae)),re.empty()){var oe=J.select("text");oe.attr({transform:fe,"text-anchor":ue}),oe.style("opacity",1),t._adjustTickLabelsOverflow&&t._adjustTickLabelsOverflow()}else{var me=Ld.bBox(re.node()).width,xe=me*{end:-.5,start:.5}[ue];re.attr("transform",fe+b2(xe,0))}})}t._adjustTickLabelsOverflow=function(){var F=t.ticklabeloverflow;if(!(!F||F==="allow")){var N=F.indexOf("hide")!==-1,Z=t._id.charAt(0)==="x",J=0,re=Z?e._fullLayout.width:e._fullLayout.height;if(F.indexOf("domain")!==-1){var ue=Ia.simpleMap(t.range,t.r2l);J=t.l2p(ue[0])+t._offset,re=t.l2p(ue[1])+t._offset}var fe=Math.min(J,re),K=Math.max(J,re),X=t.side,ae=1/0,oe=-1/0;f.each(function(ie){var ge=ep.select(this),le=ge.select(".text-math-group");if(le.empty()){var we=Ld.bBox(ge.node()),Re=0;Z?(we.right>K||we.left<fe)&&(Re=1):(we.bottom>K||we.top+(t.tickangle?0:ie.fontSize/4)<fe)&&(Re=1);var qe=ge.select("text");Re?N&&qe.style("opacity",0):(qe.style("opacity",1),X==="bottom"||X==="right"?ae=Math.min(ae,Z?we.top:we.left):ae=-1/0,X==="top"||X==="left"?oe=Math.max(oe,Z?we.bottom:we.right):oe=1/0)}});for(var me in i._plots){var xe=i._plots[me];if(!(t._id!==xe.xaxis._id&&t._id!==xe.yaxis._id)){var ce=Z?xe.yaxis:xe.xaxis;ce&&(ce["_visibleLabelMin_"+t._id]=ae,ce["_visibleLabelMax_"+t._id]=oe)}}}},t._hideCounterAxisInsideTickLabels=function(F){var N=t._id.charAt(0)==="x",Z=[];for(var J in i._plots){var re=i._plots[J];t._id!==re.xaxis._id&&t._id!==re.yaxis._id||Z.push(N?re.yaxis:re.xaxis)}Z.forEach(function(ue,fe){ue&&FA(ue)&&(F||[Jz,$z,Qz,Bie,Lie]).forEach(function(K){var X=K.K==="tick"&&K.L==="text"&&t.ticklabelmode==="period",ae=i._plots[t._mainSubplot],oe;K.K===Jz.K?oe=ae.zerolinelayer.selectAll("."+t._id+"zl"):K.K===$z.K?oe=ae.minorGridlayer.selectAll("."+t._id):K.K===Qz.K?oe=ae.gridlayer.selectAll("."+t._id):oe=ae[t._id.charAt(0)+"axislayer"],oe.each(function(){var me=ep.select(this);K.L&&(me=me.selectAll(K.L)),me.each(function(xe){var ce=t.l2p(X?eO(xe):xe.x)+t._offset,ie=ep.select(this);ce<t["_visibleLabelMax_"+ue._id]&&ce>t["_visibleLabelMin_"+ue._id]?ie.style("display","none"):K.K==="tick"&&!fe&&ie.style("display",null)})})})})},h(f,u+1?u:l);function v(){return c.length&&Promise.all(c)}var d=null;function _(){if(h(f,l),o.length&&t.autotickangles&&(t.type!=="log"||String(t.dtick).charAt(0)!=="D")){d=t.autotickangles[0];var F=0,N=[],Z,J=1;if(f.each(function(ft){F=Math.max(F,ft.fontSize);var je=t.l2p(ft.x),_t=rO(this),Bt=Ld.bBox(_t.node());J=Math.max(J,x2.lineCount(_t)),N.push({top:0,bottom:10,height:10,left:je-Bt.width/2,right:je+Bt.width/2+2,width:Bt.width+2})}),(t.tickson==="boundaries"||t.showdividers)&&!r.secondary){var re=2;for(t.ticks&&(re+=t.tickwidth/2),Z=0;Z<N.length;Z++){var ue=o[Z].xbnd,fe=N[Z];if(ue[0]!==null&&fe.left-t.l2p(ue[0])<re||ue[1]!==null&&t.l2p(ue[1])-fe.right<re){d=90;break}}}else{var K=o.length,X=Math.abs((o[K-1].x-o[0].x)*t._m)/(K-1),ae=t.ticklabelposition||"",oe=function(ft){return ae.indexOf(ft)!==-1},me=oe("top"),xe=oe("left"),ce=oe("right"),ie=oe("bottom"),ge=ie||xe||me||ce,le=ge?(t.tickwidth||0)+2*BC:0,we=X,Re=F*1.25*J,qe=Math.sqrt(Math.pow(we,2)+Math.pow(Re,2)),et=we/qe,Pe=t.autotickangles.map(function(ft){return ft*Math.PI/180}),Ie=Pe.find(function(ft){return Math.abs(Math.cos(ft))<=et});Ie===void 0&&(Ie=Pe.reduce(function(ft,je){return Math.abs(Math.cos(ft))<Math.abs(Math.cos(je))?ft:je},Pe[0]));var ut=Ie*(180/Math.PI);for(Z=0;Z<N.length-1;Z++)if(Ia.bBoxIntersect(N[Z],N[Z+1],le)){d=ut;break}}d&&h(f,d)}}t._selections&&(t._selections[a]=f);var T=[v];t.automargin&&i._redrawFromAutoMarginCount&&u===90?(d=u,T.push(function(){h(f,u)})):T.push(_),t._tickAngles&&T.push(function(){t._tickAngles[a]=d===null?$u(l)?l:0:d});var p=function(){var F=0,N=0;return f.each(function(Z,J){var re=rO(this),ue=re.select(".text-math-group");if(ue.empty()){var fe;t._vals[J]&&(fe=t._vals[J].bb||Ld.bBox(re.node()),t._vals[J].bb=fe),F=Math.max(F,fe.width),N=Math.max(N,fe.height)}}),{labelsMaxW:F,labelsMaxH:N}},M=t._anchorAxis;if(M&&(M.autorange||M.insiderange)&&FA(t)&&!$it(i,t._id)&&(i._insideTickLabelsUpdaterange||(i._insideTickLabelsUpdaterange={}),M.autorange&&(i._insideTickLabelsUpdaterange[M._name+".autorange"]=M.autorange,T.push(p)),M.insiderange)){var b=p(),w=t._id.charAt(0)==="y"?b.labelsMaxW:b.labelsMaxH;w+=2*BC,t.ticklabelposition==="inside"&&(w+=t.ticklen||0);var k=t.side==="right"||t.side==="top"?1:-1,x=k===1?1:0,E=k===1?0:1,S=[];S[E]=M.range[E];var g=M.range,C=M.r2p(g[x]),A=M.r2p(g[E]),P=i._insideTickLabelsUpdaterange[M._name+".range"];if(P){var D=M.r2p(P[x]),z=M.r2p(P[E]),O=k*(t._id.charAt(0)==="y"?1:-1);O*C<O*D&&(C=D,S[x]=g[x]=P[x]),O*A>O*z&&(A=z,S[E]=g[E]=P[E])}var V=Math.abs(A-C);V-w>0?(V-=w,w*=1+w/V):w=0,t._id.charAt(0)!=="y"&&(w=-w),S[x]=M.p2r(M.r2p(g[x])+k*w),M.autorange==="min"||M.autorange==="max reversed"?(S[0]=null,M._rangeInitial0=void 0,M._rangeInitial1=void 0):(M.autorange==="max"||M.autorange==="min reversed")&&(S[1]=null,M._rangeInitial0=void 0,M._rangeInitial1=void 0),i._insideTickLabelsUpdaterange[M._name+".range"]=S}var B=Ia.syncOrAsync(T);return B&&B.then&&e._promises.push(B),B};function wat(e,t,r){var i=t._id+"divider",n=r.vals,a=r.layer.selectAll("path."+i).data(n,HC);a.exit().remove(),a.enter().insert("path",":first-child").classed(i,1).classed("crisp",1).call(DA.stroke,t.dividercolor).style("stroke-width",Ld.crispRound(e,t.dividerwidth,1)+"px"),a.attr("transform",r.transFn).attr("d",r.path)}Dn.getPxPosition=function(e,t){var r=e._fullLayout._size,i=t._id.charAt(0),n=t.side,a;if(t.anchor!=="free"?a=t._anchorAxis:i==="x"?a={_offset:r.t+(1-(t.position||0))*r.h,_length:0}:i==="y"&&(a={_offset:r.l+(t.position||0)*r.w+t._shift,_length:0}),n==="top"||n==="left")return a._offset;if(n==="bottom"||n==="right")return a._offset+a._length};function tO(e){var t=e.title.font.size,r=(e.title.text.match(x2.BR_TAG_ALL)||[]).length;return e.title.hasOwnProperty("standoff")?r?t*(_x+r*OC):t*_x:r?t*(r+1)*OC:t}function Tat(e,t){var r=e._fullLayout,i=t._id,n=i.charAt(0),a=t.title.font.size,o;if(t.title.hasOwnProperty("standoff"))o=t._depth+t.title.standoff+tO(t);else{var s=FA(t);if(t.type==="multicategory")o=t._depth;else{var l=1.5*a;s&&(l=.5*a,t.ticks==="outside"&&(l+=t.ticklen)),o=10+l+(t.linewidth?t.linewidth-1:0)}s||(n==="x"?o+=t.side==="top"?a*(t.showticklabels?1:0):a*(t.showticklabels?1.5:.5):o+=t.side==="right"?a*(t.showticklabels?1:.5):a*(t.showticklabels?.5:0))}var u=Dn.getPxPosition(e,t),f,c,h;n==="x"?(c=t._offset+t._length/2,h=t.side==="top"?u-o:u+o):(h=t._offset+t._length/2,c=t.side==="right"?u+o:u-o,f={rotate:"-90",offset:0});var v;if(t.type!=="multicategory"){var d=t._selections[t._id+"tick"];if(v={selection:d,side:t.side},d&&d.node()&&d.node().parentNode){var _=Ld.getTranslate(d.node().parentNode);v.offsetLeft=_.x,v.offsetTop=_.y}t.title.hasOwnProperty("standoff")&&(v.pad=0)}return t._titleStandoff=o,Yit.draw(e,i+"title",{propContainer:t,propName:t._name+".title.text",placeholder:r._dfltTitle[n],avoid:v,transform:f,attributes:{x:c,y:h,"text-anchor":"middle"}})}Dn.shouldShowZeroLine=function(e,t,r){var i=Ia.simpleMap(t.range,t.r2l);return i[0]*i[1]<=0&&t.zeroline&&(t.type==="linear"||t.type==="-")&&!(t.rangebreaks&&t.maskBreaks(0)===UC)&&(Wie(t,0)||!Aat(e,t,r,i)||Mat(e,t))};Dn.clipEnds=function(e,t){return t.filter(function(r){return Wie(e,r.x)})};function Wie(e,t){var r=e.l2p(t);return r>1&&r<e._length-1}function Aat(e,t,r,i){var n=r._mainAxis;if(!n)return;var a=e._fullLayout,o=t._id.charAt(0),s=Dn.counterLetter(t._id),l=t._offset+(Math.abs(i[0])<Math.abs(i[1])==(o==="x")?0:t._length);function u(d){if(!d.showline||!d.linewidth)return!1;var _=Math.max((d.linewidth+t.zerolinewidth)/2,1);function T(b){return typeof b=="number"&&Math.abs(b-l)<_}if(T(d._mainLinePosition)||T(d._mainMirrorPosition))return!0;var p=d._linepositions||{};for(var M in p)if(T(p[M][0])||T(p[M][1]))return!0}var f=a._plots[r._mainSubplot];if(!(f.mainplotinfo||f).overlays.length)return u(r,l);for(var c=Dn.list(e,s),h=0;h<c.length;h++){var v=c[h];if(v._mainAxis===n&&u(v,l))return!0}}function Mat(e,t){for(var r=e._fullData,i=t._mainSubplot,n=t._id.charAt(0),a=0;a<r.length;a++){var o=r[a];if(o.visible===!0&&o.xaxis+o.yaxis===i&&(RA.traceIs(o,"bar-like")&&o.orientation==={x:"h",y:"v"}[n]||o.fill&&o.fill.charAt(o.fill.length-1)===n))return!0}return!1}function rO(e){var t=ep.select(e),r=t.select(".text-math-group");return r.empty()?t.select("text"):r}Dn.allowAutoMargin=function(e){for(var t=Dn.list(e,"",!0),r=0;r<t.length;r++){var i=t[r];i.automargin&&(_2.allowAutoMargin(e,oO(i)),i.mirror&&_2.allowAutoMargin(e,Xie(i))),RA.getComponentMethod("rangeslider","isVisible")(i)&&_2.allowAutoMargin(e,Zie(i))}};function oO(e){return e._id+".automargin"}function Xie(e){return oO(e)+".mirror"}function Zie(e){return e._id+".rangeslider"}Dn.swap=function(e,t){for(var r=Sat(e,t),i=0;i<r.length;i++)Eat(e,r[i].x,r[i].y)};function Sat(e,t){var r=[],i,n;for(i=0;i<t.length;i++){var a=[],o=e._fullData[t[i]].xaxis,s=e._fullData[t[i]].yaxis;if(!(!o||!s)){for(n=0;n<r.length;n++)(r[n].x.indexOf(o)!==-1||r[n].y.indexOf(s)!==-1)&&a.push(n);if(!a.length){r.push({x:[o],y:[s]});continue}var l=r[a[0]],u;if(a.length>1)for(n=1;n<a.length;n++)u=r[a[n]],FC(l.x,u.x),FC(l.y,u.y);FC(l.x,[o]),FC(l.y,[s])}}return r}function FC(e,t){for(var r=0;r<t.length;r++)e.indexOf(t[r])===-1&&e.push(t[r])}function Eat(e,t,r){var i=[],n=[],a=e.layout,o,s;for(o=0;o<t.length;o++)i.push(Dn.getFromId(e,t[o]));for(o=0;o<r.length;o++)n.push(Dn.getFromId(e,r[o]));var l=Object.keys(Wit),u=["anchor","domain","overlaying","position","side","tickangle","editType"],f=["linear","log"];for(o=0;o<l.length;o++){var c=l[o],h=i[0][c],v=n[0][c],d=!0,_=!1,T=!1;if(!(c.charAt(0)==="_"||typeof h=="function"||u.indexOf(c)!==-1)){for(s=1;s<i.length&&d;s++){var p=i[s][c];c==="type"&&f.indexOf(h)!==-1&&f.indexOf(p)!==-1&&h!==p?_=!0:p!==h&&(d=!1)}for(s=1;s<n.length&&d;s++){var M=n[s][c];c==="type"&&f.indexOf(v)!==-1&&f.indexOf(M)!==-1&&v!==M?T=!0:n[s][c]!==v&&(d=!1)}d&&(_&&(a[i[0]._name].type="linear"),T&&(a[n[0]._name].type="linear"),kat(a,c,i,n,e._fullLayout._dfltTitle))}}for(o=0;o<e._fullLayout.annotations.length;o++){var b=e._fullLayout.annotations[o];t.indexOf(b.xref)!==-1&&r.indexOf(b.yref)!==-1&&Ia.swapAttrs(a.annotations[o],["?"])}}function kat(e,t,r,i,n){var a=Ia.nestedProperty,o=a(e[r[0]._name],t).get(),s=a(e[i[0]._name],t).get(),l;for(t==="title"&&(o&&o.text===n.x&&(o.text=n.y),s&&s.text===n.y&&(s.text=n.x)),l=0;l<r.length;l++)a(e,r[l]._name+"."+t).set(s);for(l=0;l<i.length;l++)a(e,i[l]._name+"."+t).set(o)}function sO(e){return e._id==="angularaxis"}function Yz(e,t){for(var r=t._rangebreaks.length,i=0;i<r;i++){var n=t._rangebreaks[i];if(e>=n.min&&e<n.max)return n.max}return e}function FA(e){return(e.ticklabelposition||"").indexOf("inside")!==-1}function GC(e,t){FA(e._anchorAxis||{})&&e._hideCounterAxisInsideTickLabels&&e._hideCounterAxisInsideTickLabels(t)}function nO(e,t,r,i){var n=e.anchor!=="free"&&(e.overlaying===void 0||e.overlaying===!1)?e._id:e.overlaying,a;i?a=e.side==="right"?t:-t:a=t,n in r||(r[n]={}),e.side in r[n]||(r[n][e.side]=0),r[n][e.side]+=a}function Cat(e,t){return e.autoshift?t[e.overlaying][e.side]:e.shift||0}});var lO=ne((btr,Kie)=>{"use strict";Kie.exports=function(t,r,i){var n,a;if(i){var o=r==="reversed"||r==="min reversed"||r==="max reversed";n=i[o?1:0],a=i[o?0:1]}var s=t("autorangeoptions.minallowed",a===null?n:void 0),l=t("autorangeoptions.maxallowed",n===null?a:void 0);s===void 0&&t("autorangeoptions.clipmin"),l===void 0&&t("autorangeoptions.clipmax"),t("autorangeoptions.include")}});var uO=ne((wtr,Jie)=>{"use strict";var Lat=lO();Jie.exports=function(t,r,i,n){var a=r._template||{},o=r.type||a.type||"-";i("minallowed"),i("maxallowed");var s=i("range");if(!s){var l;!n.noInsiderange&&o!=="log"&&(l=i("insiderange"),l&&(l[0]===null||l[1]===null)&&(r.insiderange=!1,l=void 0),l&&(s=i("range",l)))}var u=r.getAutorangeDflt(s,n),f=i("autorange",u),c;s&&(s[0]===null&&s[1]===null||(s[0]===null||s[1]===null)&&(f==="reversed"||f===!0)||s[0]!==null&&(f==="min"||f==="max reversed")||s[1]!==null&&(f==="max"||f==="min reversed"))&&(s=void 0,delete r.range,r.autorange=!0,c=!0),c||(u=r.getAutorangeDflt(s,n),f=i("autorange",u)),f&&(Lat(i,f,s),(o==="linear"||o==="-")&&i("rangemode")),r.cleanRange()}});var fO=ne((Ttr,Qie)=>{var Pat={left:0,top:0};Qie.exports=Rat;function Rat(e,t,r){t=t||e.currentTarget||e.srcElement,Array.isArray(r)||(r=[0,0]);var i=e.clientX||0,n=e.clientY||0,a=Dat(t);return r[0]=i-a.left,r[1]=n-a.top,r}function Dat(e){return e===window||e===document||e===document.body?Pat:e.getBoundingClientRect()}});var qA=ne((Atr,$ie)=>{"use strict";var Iat=Nq();function Fat(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(r){e=!1}return e}$ie.exports=Iat&&Fat()});var tae=ne((Mtr,eae)=>{"use strict";eae.exports=function(t,r,i,n,a){var o=(t-i)/(n-i),s=o+r/(n-i),l=(o+s)/2;return a==="left"||a==="bottom"?o:a==="center"||a==="middle"?l:a==="right"||a==="top"?s:o<2/3-l?o:s>4/3-l?s:l}});var iae=ne((Str,nae)=>{"use strict";var rae=Wt(),qat=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];nae.exports=function(t,r,i,n){return i==="left"?t=0:i==="center"?t=1:i==="right"?t=2:t=rae.constrain(Math.floor(t*3),0,2),n==="bottom"?r=0:n==="middle"?r=1:n==="top"?r=2:r=rae.constrain(Math.floor(r*3),0,2),qat[r][t]}});var oae=ne((Etr,aae)=>{"use strict";var zat=s2(),Oat=$k(),Bat=fA().getGraphDiv,Nat=aA(),cO=aae.exports={};cO.wrapped=function(e,t,r){e=Bat(e),e._fullLayout&&Oat.clear(e._fullLayout._uid+Nat.HOVERID),cO.raw(e,t,r)};cO.raw=function(t,r){var i=t._fullLayout,n=t._hoverdata;r||(r={}),!(r.target&&!t._dragged&&zat.triggerHandler(t,"plotly_beforehover",r)===!1)&&(i._hoverlayer.selectAll("g").remove(),i._hoverlayer.selectAll("line").remove(),i._hoverlayer.selectAll("circle").remove(),t._hoverdata=void 0,r.target&&n&&t.emit("plotly_unhover",{event:r,points:n}))}});var Hh=ne((ktr,uae)=>{"use strict";var Uat=fO(),hO=Vq(),Vat=qA(),Hat=Wt().removeElement,Gat=wf(),bx=uae.exports={};bx.align=tae();bx.getCursor=iae();var sae=oae();bx.unhover=sae.wrapped;bx.unhoverRaw=sae.raw;bx.init=function(t){var r=t.gd,i=1,n=r._context.doubleClickDelay,a=t.element,o,s,l,u,f,c,h,v;r._mouseDownTime||(r._mouseDownTime=0),a.style.pointerEvents="all",a.onmousedown=T,Vat?(a._ontouchstart&&a.removeEventListener("touchstart",a._ontouchstart),a._ontouchstart=T,a.addEventListener("touchstart",T,{passive:!1})):a.ontouchstart=T;function d(b,w,k){return Math.abs(b)<k&&(b=0),Math.abs(w)<k&&(w=0),[b,w]}var _=t.clampFn||d;function T(b){r._dragged=!1,r._dragging=!0;var w=vO(b);o=w[0],s=w[1],h=b.target,c=b,v=b.buttons===2||b.ctrlKey,typeof b.clientX=="undefined"&&typeof b.clientY=="undefined"&&(b.clientX=o,b.clientY=s),l=new Date().getTime(),l-r._mouseDownTime<n?i+=1:(i=1,r._mouseDownTime=l),t.prepFn&&t.prepFn(b,o,s),hO&&!v?(f=lae(),f.style.cursor=window.getComputedStyle(a).cursor):hO||(f=document,u=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(a).cursor),document.addEventListener("mouseup",M),document.addEventListener("touchend",M),t.dragmode!==!1&&(b.preventDefault(),document.addEventListener("mousemove",p),document.addEventListener("touchmove",p,{passive:!1}))}function p(b){b.preventDefault();var w=vO(b),k=t.minDrag||Gat.MINDRAG,x=_(w[0]-o,w[1]-s,k),E=x[0],S=x[1];(E||S)&&(r._dragged=!0,bx.unhover(r,b)),r._dragged&&t.moveFn&&!v&&(r._dragdata={element:a,dx:E,dy:S},t.moveFn(E,S))}function M(b){if(delete r._dragdata,t.dragmode!==!1&&(b.preventDefault(),document.removeEventListener("mousemove",p),document.removeEventListener("touchmove",p)),document.removeEventListener("mouseup",M),document.removeEventListener("touchend",M),hO?Hat(f):u&&(f.documentElement.style.cursor=u,u=null),!r._dragging){r._dragged=!1;return}if(r._dragging=!1,new Date().getTime()-r._mouseDownTime>n&&(i=Math.max(i-1,1)),r._dragged)t.doneFn&&t.doneFn();else if(t.clickFn&&t.clickFn(i,c),!v){var w;try{w=new MouseEvent("click",b)}catch(x){var k=vO(b);w=document.createEvent("MouseEvents"),w.initMouseEvent("click",b.bubbles,b.cancelable,b.view,b.detail,b.screenX,b.screenY,k[0],k[1],b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.button,b.relatedTarget)}h.dispatchEvent(w)}r._dragging=!1,r._dragged=!1}};function lae(){var e=document.createElement("div");e.className="dragcover";var t=e.style;return t.position="fixed",t.left=0,t.right=0,t.top=0,t.bottom=0,t.zIndex=999999999,t.background="none",document.body.appendChild(e),e}bx.coverSlip=lae;function vO(e){return Uat(e.changedTouches?e.changedTouches[0]:e,document.body)}});var e0=ne((Ctr,fae)=>{"use strict";fae.exports=function(t,r){(t.attr("class")||"").split(" ").forEach(function(i){i.indexOf("cursor-")===0&&t.classed(i,!1)}),r&&t.classed("cursor-"+r,!0)}});var vae=ne((Ltr,hae)=>{"use strict";var dO=e0(),zA="data-savedcursor",cae="!!";hae.exports=function(t,r){var i=t.attr(zA);if(r){if(!i){for(var n=(t.attr("class")||"").split(" "),a=0;a<n.length;a++){var o=n[a];o.indexOf("cursor-")===0&&t.attr(zA,o.substr(7)).classed(o,!1)}t.attr(zA)||t.attr(zA,cae)}dO(t,r)}else i&&(t.attr(zA,null),i===cae?dO(t):dO(t,i))}});var gO=ne((Ptr,dae)=>{"use strict";var pO=ll(),Yat=Ku();dae.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:Yat.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:pO({editType:"legend"}),grouptitlefont:pO({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:pO({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}});var WC=ne(YC=>{"use strict";YC.isGrouped=function(t){return(t.traceorder||"").indexOf("grouped")!==-1};YC.isVertical=function(t){return t.orientation!=="h"};YC.isReversed=function(t){return(t.traceorder||"").indexOf("reversed")!==-1}});var xO=ne((Dtr,pae)=>{"use strict";var yO=wi(),rd=Wt(),Wat=So(),Xat=es(),Zat=gO(),jat=tx(),mO=WC();function Kat(e,t,r,i){var n=t[e]||{},a=Wat.newContainer(r,e);function o(B,F){return rd.coerce(n,a,Zat,B,F)}var s=rd.coerceFont(o,"font",r.font);o("bgcolor",r.paper_bgcolor),o("bordercolor");var l=o("visible");if(l){for(var u,f=function(B,F){var N=u._input,Z=u;return rd.coerce(N,Z,Xat,B,F)},c=r.font||{},h=rd.coerceFont(o,"grouptitlefont",rd.extendFlat({},c,{size:Math.round(c.size*1.1)})),v=0,d=!1,_="normal",T=(r.shapes||[]).filter(function(B){return B.showlegend}),p=i.concat(T).filter(function(B){return e===(B.legend||"legend")}),M=0;M<p.length;M++)if(u=p[M],!!u.visible){var b=u._isShape;(u.showlegend||u._dfltShowLegend&&!(u._module&&u._module.attributes&&u._module.attributes.showlegend&&u._module.attributes.showlegend.dflt===!1))&&(v++,u.showlegend&&(d=!0,(!b&&yO.traceIs(u,"pie-like")||u._input.showlegend===!0)&&v++),rd.coerceFont(f,"legendgrouptitle.font",h)),(!b&&yO.traceIs(u,"bar")&&r.barmode==="stack"||["tonextx","tonexty"].indexOf(u.fill)!==-1)&&(_=mO.isGrouped({traceorder:_})?"grouped+reversed":"reversed"),u.legendgroup!==void 0&&u.legendgroup!==""&&(_=mO.isReversed({traceorder:_})?"reversed+grouped":"grouped")}var w=rd.coerce(t,r,jat,"showlegend",d&&v>(e==="legend"?1:0));if(w===!1&&(r[e]=void 0),!(w===!1&&!n.uirevision)&&(o("uirevision",r.uirevision),w!==!1)){o("borderwidth");var k=o("orientation"),x=o("yref"),E=o("xref"),S=k==="h",g=x==="paper",C=E==="paper",A,P,D,z="left";S?(A=0,yO.getComponentMethod("rangeslider","isVisible")(t.xaxis)?g?(P=1.1,D="bottom"):(P=1,D="top"):g?(P=-.1,D="top"):(P=0,D="bottom")):(P=1,D="auto",C?A=1.02:(A=1,z="right")),rd.coerce(n,a,{x:{valType:"number",editType:"legend",min:C?-2:0,max:C?3:1,dflt:A}},"x"),rd.coerce(n,a,{y:{valType:"number",editType:"legend",min:g?-2:0,max:g?3:1,dflt:P}},"y"),o("traceorder",_),mO.isGrouped(r[e])&&o("tracegroupgap"),o("entrywidth"),o("entrywidthmode"),o("indentation"),o("itemsizing"),o("itemwidth"),o("itemclick"),o("itemdoubleclick"),o("groupclick"),o("xanchor",z),o("yanchor",D),o("valign"),rd.noneOrAll(n,a,["x","y"]);var O=o("title.text");if(O){o("title.side",S?"left":"top");var V=rd.extendFlat({},s,{size:rd.bigFont(s.size)});rd.coerceFont(o,"title.font",V)}}}}pae.exports=function(t,r,i){var n,a=i.slice(),o=r.shapes;if(o)for(n=0;n<o.length;n++){var s=o[n];if(s.showlegend){var l={_input:s._input,visible:s.visible,showlegend:s.showlegend,legend:s.legend};a.push(l)}}var u=["legend"];for(n=0;n<a.length;n++)rd.pushUnique(u,a[n].legend);for(r._legends=[],n=0;n<u.length;n++){var f=u[n];Kat(f,t,r,a),r[f]&&r[f].visible&&(r[f]._id=f),r._legends.push(f)}}});var yae=ne((Itr,gae)=>{"use strict";var cm=wi(),XC=Wt(),Jat=XC.pushUnique,_O=!0;gae.exports=function(t,r,i){var n=r._fullLayout;if(r._dragged||r._editing)return;var a=n.legend.itemclick,o=n.legend.itemdoubleclick,s=n.legend.groupclick;i===1&&a==="toggle"&&o==="toggleothers"&&_O&&r.data&&r._context.showTips&&XC.notifier(XC._(r,"Double-click on legend to isolate one trace"),"long"),_O=!1;var l;if(i===1?l=a:i===2&&(l=o),!l)return;var u=s==="togglegroup",f=n.hiddenlabels?n.hiddenlabels.slice():[],c=t.data()[0][0];if(c.groupTitle&&c.noClick)return;var h=r._fullData,v=(n.shapes||[]).filter(function(ut){return ut.showlegend}),d=h.concat(v),_=c.trace;_._isShape&&(_=_._fullInput);var T=_.legendgroup,p,M,b,w,k,x,E={},S=[],g=[],C=[];function A(ut,ft){var je=S.indexOf(ut),_t=E.visible;return _t||(_t=E.visible=[]),S.indexOf(ut)===-1&&(S.push(ut),je=S.length-1),_t[je]=ft,je}var P=(n.shapes||[]).map(function(ut){return ut._input}),D=!1;function z(ut,ft){P[ut].visible=ft,D=!0}function O(ut,ft){if(!(c.groupTitle&&!u)){var je=ut._fullInput||ut,_t=je._isShape,Bt=je.index;if(Bt===void 0&&(Bt=je._index),cm.hasTransform(je,"groupby")){var Lt=g[Bt];if(!Lt){var Me=cm.getTransformIndices(je,"groupby"),Ze=Me[Me.length-1];Lt=XC.keyedContainer(je,"transforms["+Ze+"].styles","target","value.visible"),g[Bt]=Lt}var dt=Lt.get(ut._group);dt===void 0&&(dt=!0),dt!==!1&&Lt.set(ut._group,ft),C[Bt]=A(Bt,je.visible!==!1)}else{var it=je.visible===!1?!1:ft;_t?z(Bt,it):A(Bt,it)}}}var V=_.legend,B=_._fullInput,F=B&&B._isShape;if(!F&&cm.traceIs(_,"pie-like")){var N=c.label,Z=f.indexOf(N);if(l==="toggle")Z===-1?f.push(N):f.splice(Z,1);else if(l==="toggleothers"){var J=Z!==-1,re=[];for(p=0;p<r.calcdata.length;p++){var ue=r.calcdata[p];for(M=0;M<ue.length;M++){var fe=ue[M],K=fe.label;V===ue[0].trace.legend&&N!==K&&(f.indexOf(K)===-1&&(J=!0),Jat(f,K),re.push(K))}}if(!J)for(var X=0;X<re.length;X++){var ae=f.indexOf(re[X]);ae!==-1&&f.splice(ae,1)}}cm.call("_guiRelayout",r,"hiddenlabels",f)}else{var oe=T&&T.length,me=[],xe;if(oe)for(p=0;p<d.length;p++)xe=d[p],xe.visible&&xe.legendgroup===T&&me.push(p);if(l==="toggle"){var ce;switch(_.visible){case!0:ce="legendonly";break;case!1:ce=!1;break;case"legendonly":ce=!0;break}if(oe)if(u)for(p=0;p<d.length;p++){var ie=d[p];ie.visible!==!1&&ie.legendgroup===T&&O(ie,ce)}else O(_,ce);else O(_,ce)}else if(l==="toggleothers"){var ge,le,we,Re,qe,et=!0;for(p=0;p<d.length;p++)if(qe=d[p],ge=qe===_,we=qe.showlegend!==!0,!(ge||we)&&(le=oe&&qe.legendgroup===T,!le&&qe.legend===V&&qe.visible===!0&&!cm.traceIs(qe,"notLegendIsolatable"))){et=!1;break}for(p=0;p<d.length;p++)if(qe=d[p],!(qe.visible===!1||qe.legend!==V)&&!cm.traceIs(qe,"notLegendIsolatable"))switch(_.visible){case"legendonly":O(qe,!0);break;case!0:Re=et?!0:"legendonly",ge=qe===_,we=qe.showlegend!==!0&&!qe.legendgroup,le=ge||oe&&qe.legendgroup===T,O(qe,le||we?!0:Re);break}}for(p=0;p<g.length;p++)if(b=g[p],!!b){var Pe=b.constructUpdate(),Ie=Object.keys(Pe);for(M=0;M<Ie.length;M++)w=Ie[M],x=E[w]=E[w]||[],x[C[p]]=Pe[w]}for(k=Object.keys(E),p=0;p<k.length;p++)for(w=k[p],M=0;M<S.length;M++)E[w].hasOwnProperty(M)||(E[w][M]=void 0);D?cm.call("_guiUpdate",r,E,{shapes:P},S):cm.call("_guiRestyle",r,E,S)}}});var bO=ne((Ftr,mae)=>{"use strict";mae.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}});var bae=ne((qtr,_ae)=>{"use strict";var xae=wi(),wO=WC();_ae.exports=function(t,r,i){var n=r._inHover,a=wO.isGrouped(r),o=wO.isReversed(r),s={},l=[],u=!1,f={},c=0,h=0,v,d;function _(B,F,N){if(r.visible!==!1&&!(i&&B!==r._id))if(F===""||!wO.isGrouped(r)){var Z="~~i"+c;l.push(Z),s[Z]=[N],c++}else l.indexOf(F)===-1?(l.push(F),u=!0,s[F]=[N]):s[F].push(N)}for(v=0;v<t.length;v++){var T=t[v],p=T[0],M=p.trace,b=M.legend,w=M.legendgroup;if(!(!n&&(!M.visible||!M.showlegend)))if(xae.traceIs(M,"pie-like"))for(f[w]||(f[w]={}),d=0;d<T.length;d++){var k=T[d].label;f[w][k]||(_(b,w,{label:k,color:T[d].color,i:T[d].i,trace:M,pts:T[d].pts}),f[w][k]=!0,h=Math.max(h,(k||"").length))}else _(b,w,p),h=Math.max(h,(M.name||"").length)}if(!l.length)return[];var x=!u||!a,E=[];for(v=0;v<l.length;v++){var S=s[l[v]];x?E.push(S[0]):E.push(S)}for(x&&(E=[E]),v=0;v<E.length;v++){var g=1/0;for(d=0;d<E[v].length;d++){var C=E[v][d].trace.legendrank;g>C&&(g=C)}E[v][0]._groupMinRank=g,E[v][0]._preGroupSort=v}var A=function(B,F){return B[0]._groupMinRank-F[0]._groupMinRank||B[0]._preGroupSort-F[0]._preGroupSort},P=function(B,F){return B.trace.legendrank-F.trace.legendrank||B._preSort-F._preSort};for(E.forEach(function(B,F){B[0]._preGroupSort=F}),E.sort(A),v=0;v<E.length;v++){E[v].forEach(function(B,F){B._preSort=F}),E[v].sort(P);var D=E[v][0].trace,z=null;for(d=0;d<E[v].length;d++){var O=E[v][d].trace.legendgrouptitle;if(O&&O.text){z=O,n&&(O.font=r._groupTitleFont);break}}if(o&&E[v].reverse(),z){var V=!1;for(d=0;d<E[v].length;d++)if(xae.traceIs(E[v][d].trace,"pie-like")){V=!0;break}E[v].unshift({i:-1,groupTitle:z,noClick:V,trace:{showlegend:D.showlegend,legendgroup:D.legendgroup,visible:r.groupclick==="toggleitem"?!0:D.visible}})}for(d=0;d<E[v].length;d++)E[v][d]=[E[v][d]]}return r._lgroupsLength=E.length,r._maxNameLength=h,E}});var hm=ne(wx=>{"use strict";var ZC=Wt();function wae(e){return e.indexOf("e")!==-1?e.replace(/[.]?0+e/,"e"):e.indexOf(".")!==-1?e.replace(/[.]?0+$/,""):e}wx.formatPiePercent=function(t,r){var i=wae((t*100).toPrecision(3));return ZC.numSeparate(i,r)+"%"};wx.formatPieValue=function(t,r){var i=wae(t.toPrecision(10));return ZC.numSeparate(i,r)};wx.getFirstFilled=function(t,r){if(ZC.isArrayOrTypedArray(t))for(var i=0;i<r.length;i++){var n=t[r[i]];if(n||n===0||n==="")return n}};wx.castOption=function(t,r){if(ZC.isArrayOrTypedArray(t))return wx.getFirstFilled(t,r);if(t)return t};wx.getRotationAngle=function(e){return(e==="auto"?0:e)*Math.PI/180}});var Aae=ne((Otr,Tae)=>{"use strict";var Qat=aa(),$at=_i();Tae.exports=function(t,r,i,n){var a=i.marker.pattern;a&&a.shape?Qat.pointStyle(t,i,n,r):$at.fill(t,r.color)}});var T2=ne((Btr,Eae)=>{"use strict";var Mae=_i(),Sae=hm().castOption,eot=Aae();Eae.exports=function(t,r,i,n){var a=i.marker.line,o=Sae(a.color,r.pts)||Mae.defaultLine,s=Sae(a.width,r.pts)||0;t.call(eot,r,i,n).style("stroke-width",s).call(Mae.stroke,o)}});var SO=ne((Ntr,Dae)=>{"use strict";var Gh=Ai(),TO=wi(),dh=Wt(),kae=dh.strTranslate,mv=aa(),rp=_i(),AO=Uh().extractOpts,jC=js(),tot=T2(),rot=hm().castOption,not=bO(),Cae=12,Lae=5,Tx=2,iot=10,A2=5;Dae.exports=function(t,r,i){var n=r._fullLayout;i||(i=n.legend);var a=i.itemsizing==="constant",o=i.itemwidth,s=(o+not.itemGap*2)/2,l=kae(s,0),u=function(E,S,g,C){var A;if(E+1)A=E;else if(S&&S.width>0)A=S.width;else return 0;return a?C:Math.min(A,g)};t.each(function(E){var S=Gh.select(this),g=dh.ensureSingle(S,"g","layers");g.style("opacity",E[0].trace.opacity);var C=i.indentation,A=i.valign,P=E[0].lineHeight,D=E[0].height;if(A==="middle"&&C===0||!P||!D)g.attr("transform",null);else{var z={top:1,bottom:-1}[A],O=z*(.5*(P-D+3))||0,V=i.indentation;g.attr("transform",kae(V,O))}var B=g.selectAll("g.legendfill").data([E]);B.enter().append("g").classed("legendfill",!0);var F=g.selectAll("g.legendlines").data([E]);F.enter().append("g").classed("legendlines",!0);var N=g.selectAll("g.legendsymbols").data([E]);N.enter().append("g").classed("legendsymbols",!0),N.selectAll("g.legendpoints").data([E]).enter().append("g").classed("legendpoints",!0)}).each(x).each(h).each(d).each(v).each(T).each(w).each(b).each(f).each(c).each(p).each(M);function f(E){var S=Pae(E),g=S.showFill,C=S.showLine,A=S.showGradientLine,P=S.showGradientFill,D=S.anyFill,z=S.anyLine,O=E[0],V=O.trace,B,F,N=AO(V),Z=N.colorscale,J=N.reversescale,re=function(me){if(me.size())if(g)mv.fillGroupStyle(me,r,!0);else{var xe="legendfill-"+V.uid;mv.gradient(me,r,xe,MO(J),Z,"fill")}},ue=function(me){if(me.size()){var xe="legendline-"+V.uid;mv.lineGroupStyle(me),mv.gradient(me,r,xe,MO(J),Z,"stroke")}},fe=jC.hasMarkers(V)||!D?"M5,0":z?"M5,-2":"M5,-3",K=Gh.select(this),X=K.select(".legendfill").selectAll("path").data(g||P?[E]:[]);if(X.enter().append("path").classed("js-fill",!0),X.exit().remove(),X.attr("d",fe+"h"+o+"v6h-"+o+"z").call(re),C||A){var ae=u(void 0,V.line,iot,Lae);F=dh.minExtend(V,{line:{width:ae}}),B=[dh.minExtend(O,{trace:F})]}var oe=K.select(".legendlines").selectAll("path").data(C||A?[B]:[]);oe.enter().append("path").classed("js-line",!0),oe.exit().remove(),oe.attr("d",fe+(A?"l"+o+",0.0001":"h"+o)).call(C?mv.lineGroupStyle:ue)}function c(E){var S=Pae(E),g=S.anyFill,C=S.anyLine,A=S.showLine,P=S.showMarker,D=E[0],z=D.trace,O=!P&&!C&&!g&&jC.hasText(z),V,B;function F(X,ae,oe,me){var xe=dh.nestedProperty(z,X).get(),ce=dh.isArrayOrTypedArray(xe)&&ae?ae(xe):xe;if(a&&ce&&me!==void 0&&(ce=me),oe){if(ce<oe[0])return oe[0];if(ce>oe[1])return oe[1]}return ce}function N(X){return D._distinct&&D.index&&X[D.index]?X[D.index]:X[0]}if(P||O||A){var Z={},J={};if(P){Z.mc=F("marker.color",N),Z.mx=F("marker.symbol",N),Z.mo=F("marker.opacity",dh.mean,[.2,1]),Z.mlc=F("marker.line.color",N),Z.mlw=F("marker.line.width",dh.mean,[0,5],Tx),J.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var re=F("marker.size",dh.mean,[2,16],Cae);Z.ms=re,J.marker.size=re}A&&(J.line={width:F("line.width",N,[0,10],Lae)}),O&&(Z.tx="Aa",Z.tp=F("textposition",N),Z.ts=10,Z.tc=F("textfont.color",N),Z.tf=F("textfont.family",N)),V=[dh.minExtend(D,Z)],B=dh.minExtend(z,J),B.selectedpoints=null,B.texttemplate=null}var ue=Gh.select(this).select("g.legendpoints"),fe=ue.selectAll("path.scatterpts").data(P?V:[]);fe.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",l),fe.exit().remove(),fe.call(mv.pointStyle,B,r),P&&(V[0].mrc=3);var K=ue.selectAll("g.pointtext").data(O?V:[]);K.enter().append("g").classed("pointtext",!0).append("text").attr("transform",l),K.exit().remove(),K.selectAll("text").call(mv.textPointStyle,B,r)}function h(E){var S=E[0].trace,g=S.type==="waterfall";if(E[0]._distinct&&g){var C=E[0].trace[E[0].dir].marker;return E[0].mc=C.color,E[0].mlw=C.line.width,E[0].mlc=C.line.color,_(E,this,"waterfall")}var A=[];S.visible&&g&&(A=E[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var P=Gh.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(A);P.enter().append("path").classed("legendwaterfall",!0).attr("transform",l).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(D){var z=Gh.select(this),O=S[D[0]].marker,V=u(void 0,O.line,A2,Tx);z.attr("d",D[1]).style("stroke-width",V+"px").call(rp.fill,O.color),V&&z.call(rp.stroke,O.line.color)})}function v(E){_(E,this)}function d(E){_(E,this,"funnel")}function _(E,S,g){var C=E[0].trace,A=C.marker||{},P=A.line||{},D=A.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",z=g?C.visible&&C.type===g:TO.traceIs(C,"bar"),O=Gh.select(S).select("g.legendpoints").selectAll("path.legend"+g).data(z?[E]:[]);O.enter().append("path").classed("legend"+g,!0).attr("d",D).attr("transform",l),O.exit().remove(),O.each(function(V){var B=Gh.select(this),F=V[0],N=u(F.mlw,A.line,A2,Tx);B.style("stroke-width",N+"px");var Z=F.mcc;if(!i._inHover&&"mc"in F){var J=AO(A),re=J.mid;re===void 0&&(re=(J.max+J.min)/2),Z=mv.tryColorscale(A,"")(re)}var ue=Z||F.mc||A.color,fe=A.pattern,K=fe&&mv.getPatternAttr(fe.shape,0,"");if(K){var X=mv.getPatternAttr(fe.bgcolor,0,null),ae=mv.getPatternAttr(fe.fgcolor,0,null),oe=fe.fgopacity,me=Rae(fe.size,8,10),xe=Rae(fe.solidity,.5,1),ce="legend-"+C.uid;B.call(mv.pattern,"legend",r,ce,K,me,xe,Z,fe.fillmode,X,ae,oe)}else B.call(rp.fill,ue);N&&rp.stroke(B,F.mlc||P.color)})}function T(E){var S=E[0].trace,g=Gh.select(this).select("g.legendpoints").selectAll("path.legendbox").data(S.visible&&TO.traceIs(S,"box-violin")?[E]:[]);g.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",l),g.exit().remove(),g.each(function(){var C=Gh.select(this);if((S.boxpoints==="all"||S.points==="all")&&rp.opacity(S.fillcolor)===0&&rp.opacity((S.line||{}).color)===0){var A=dh.minExtend(S,{marker:{size:a?Cae:dh.constrain(S.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});g.call(mv.pointStyle,A,r)}else{var P=u(void 0,S.line,A2,Tx);C.style("stroke-width",P+"px").call(rp.fill,S.fillcolor),P&&rp.stroke(C,S.line.color)}})}function p(E){var S=E[0].trace,g=Gh.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(S.visible&&S.type==="candlestick"?[E,E]:[]);g.enter().append("path").classed("legendcandle",!0).attr("d",function(C,A){return A?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",l).style("stroke-miterlimit",1),g.exit().remove(),g.each(function(C,A){var P=Gh.select(this),D=S[A?"increasing":"decreasing"],z=u(void 0,D.line,A2,Tx);P.style("stroke-width",z+"px").call(rp.fill,D.fillcolor),z&&rp.stroke(P,D.line.color)})}function M(E){var S=E[0].trace,g=Gh.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(S.visible&&S.type==="ohlc"?[E,E]:[]);g.enter().append("path").classed("legendohlc",!0).attr("d",function(C,A){return A?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",l).style("stroke-miterlimit",1),g.exit().remove(),g.each(function(C,A){var P=Gh.select(this),D=S[A?"increasing":"decreasing"],z=u(void 0,D.line,A2,Tx);P.style("fill","none").call(mv.dashLine,D.line.dash,z),z&&rp.stroke(P,D.line.color)})}function b(E){k(E,this,"pie")}function w(E){k(E,this,"funnelarea")}function k(E,S,g){var C=E[0],A=C.trace,P=g?A.visible&&A.type===g:TO.traceIs(A,g),D=Gh.select(S).select("g.legendpoints").selectAll("path.legend"+g).data(P?[E]:[]);if(D.enter().append("path").classed("legend"+g,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",l),D.exit().remove(),D.size()){var z=A.marker||{},O=u(rot(z.line.width,C.pts),z.line,A2,Tx),V="pieLike",B=dh.minExtend(A,{marker:{line:{width:O}}},V),F=dh.minExtend(C,{trace:B},V);tot(D,F,B,r)}}function x(E){var S=E[0].trace,g,C=[];if(S.visible)switch(S.type){case"histogram2d":case"heatmap":C=[["M-15,-2V4H15V-2Z"]],g=!0;break;case"choropleth":case"choroplethmapbox":C=[["M-6,-6V6H6V-6Z"]],g=!0;break;case"densitymapbox":C=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],g="radial";break;case"cone":C=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],g=!1;break;case"streamtube":C=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],g=!1;break;case"surface":C=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],g=!0;break;case"mesh3d":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],g=!1;break;case"volume":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],g=!0;break;case"isosurface":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],g=!1;break}var A=Gh.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(C);A.enter().append("path").classed("legend3dandfriends",!0).attr("transform",l).style("stroke-miterlimit",1),A.exit().remove(),A.each(function(P,D){var z=Gh.select(this),O=AO(S),V=O.colorscale,B=O.reversescale,F=function(re){if(re.size()){var ue="legendfill-"+S.uid;mv.gradient(re,r,ue,MO(B,g==="radial"),V,"fill")}},N;if(V){if(!g){var J=V.length;N=D===0?V[B?J-1:0][1]:D===1?V[B?0:J-1][1]:V[Math.floor((J-1)/2)][1]}}else{var Z=S.vertexcolor||S.facecolor||S.color;N=dh.isArrayOrTypedArray(Z)?Z[D]||Z[0]:Z}z.attr("d",P[0]),N?z.call(rp.fill,N):z.call(F)})}};function MO(e,t){var r=t?"radial":"horizontal";return r+(e?"":"reversed")}function Pae(e){var t=e[0].trace,r=t.contours,i=jC.hasLines(t),n=jC.hasMarkers(t),a=t.visible&&t.fill&&t.fill!=="none",o=!1,s=!1;if(r){var l=r.coloring;l==="lines"?o=!0:i=l==="none"||l==="heatmap"||r.showlines,r.type==="constraint"?a=r._operation!=="=":(l==="fill"||l==="heatmap")&&(s=!0)}return{showMarker:n,showLine:i,showFill:a,showGradientLine:o,showGradientFill:s,anyLine:i||o,anyFill:a||s}}function Rae(e,t,r){return e&&dh.isArrayOrTypedArray(e)?t:e>r?r:e}});var LO=ne((Utr,Hae)=>{"use strict";var nd=Ai(),Iu=Wt(),kO=Zs(),vm=wi(),Iae=s2(),EO=Hh(),ef=aa(),JC=_i(),Ax=Es(),Fae=yae(),Af=bO(),CO=Tf(),Uae=CO.LINE_SPACING,S2=CO.FROM_TL,qae=CO.FROM_BR,zae=bae(),aot=SO(),Oae=WC(),M2=1,oot=/^legend[0-9]*$/;Hae.exports=function(t,r){if(r)Bae(t,r);else{var i=t._fullLayout,n=i._legends,a=i._infolayer.selectAll('[class^="legend"]');a.each(function(){var u=nd.select(this),f=u.attr("class"),c=f.split(" ")[0];c.match(oot)&&n.indexOf(c)===-1&&u.remove()});for(var o=0;o<n.length;o++){var s=n[o],l=t._fullLayout[s];Bae(t,l)}}};function sot(e,t,r){if(!(t.title.side!=="top center"&&t.title.side!=="top right")){var i=t.title.font,n=i.size*Uae,a=0,o=e.node(),s=ef.bBox(o).width;t.title.side==="top center"?a=.5*(t._width-2*r-2*Af.titlePad-s):t.title.side==="top right"&&(a=t._width-2*r-2*Af.titlePad-s),Ax.positionText(e,r+Af.titlePad+a,r+n)}}function Bae(e,t){var r=t||{},i=e._fullLayout,n=t4(r),a,o,s=r._inHover;if(s?(o=r.layer,a="hover"):(o=i._infolayer,a=n),!!o){a+=i._uid,e._legendMouseDownTime||(e._legendMouseDownTime=0);var l;if(s){if(!r.entries)return;l=zae(r.entries,r)}else{for(var u=(e.calcdata||[]).slice(),f=i.shapes,c=0;c<f.length;c++){var h=f[c];if(h.showlegend){var v={_isShape:!0,_fullInput:h,index:h._index,name:h.name||h.label.text||"shape "+h._index,legend:h.legend,legendgroup:h.legendgroup,legendgrouptitle:h.legendgrouptitle,legendrank:h.legendrank,legendwidth:h.legendwidth,showlegend:h.showlegend,visible:h.visible,opacity:h.opacity,mode:h.type==="line"?"lines":"markers",line:h.line,marker:{line:h.line,color:h.fillcolor,size:12,symbol:h.type==="rect"?"square":h.type==="circle"?"circle":"hexagon2"}};u.push([{trace:v}])}}l=i.showlegend&&zae(u,r,i._legends.length>1)}var d=i.hiddenlabels||[];if(!s&&(!i.showlegend||!l.length))return o.selectAll("."+n).remove(),i._topdefs.select("#"+a).remove(),kO.autoMargin(e,n);var _=Iu.ensureSingle(o,"g",n,function(S){s||S.attr("pointer-events","all")}),T=Iu.ensureSingleById(i._topdefs,"clipPath",a,function(S){S.append("rect")}),p=Iu.ensureSingle(_,"rect","bg",function(S){S.attr("shape-rendering","crispEdges")});p.call(JC.stroke,r.bordercolor).call(JC.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px");var M=Iu.ensureSingle(_,"g","scrollbox"),b=r.title;r._titleWidth=0,r._titleHeight=0;var w;b.text?(w=Iu.ensureSingle(M,"text",n+"titletext"),w.attr("text-anchor","start").call(ef.font,b.font).text(b.text),QC(w,M,e,r,M2)):M.selectAll("."+n+"titletext").remove();var k=Iu.ensureSingle(_,"rect","scrollbar",function(S){S.attr(Af.scrollBarEnterAttrs).call(JC.fill,Af.scrollBarColor)}),x=M.selectAll("g.groups").data(l);x.enter().append("g").attr("class","groups"),x.exit().remove();var E=x.selectAll("g.traces").data(Iu.identity);E.enter().append("g").attr("class","traces"),E.exit().remove(),E.style("opacity",function(S){var g=S[0].trace;return vm.traceIs(g,"pie-like")?d.indexOf(S[0].label)!==-1?.5:1:g.visible==="legendonly"?.5:1}).each(function(){nd.select(this).call(lot,e,r)}).call(aot,e,r).each(function(){s||nd.select(this).call(uot,e,n)}),Iu.syncOrAsync([kO.previousPromises,function(){return hot(e,x,E,r)},function(){var S=i._size,g=r.borderwidth,C=r.xref==="paper",A=r.yref==="paper";if(b.text&&sot(w,r,g),!s){var P,D;C?P=S.l+S.w*r.x-S2[$C(r)]*r._width:P=i.width*r.x-S2[$C(r)]*r._width,A?D=S.t+S.h*(1-r.y)-S2[e4(r)]*r._effHeight:D=i.height*(1-r.y)-S2[e4(r)]*r._effHeight;var z=vot(e,n,P,D);if(z)return;if(i.margin.autoexpand){var O=P,V=D;P=C?Iu.constrain(P,0,i.width-r._width):O,D=A?Iu.constrain(D,0,i.height-r._effHeight):V,P!==O&&Iu.log("Constrain "+n+".x to make legend fit inside graph"),D!==V&&Iu.log("Constrain "+n+".y to make legend fit inside graph")}ef.setTranslate(_,P,D)}if(k.on(".drag",null),_.on("wheel",null),s||r._height<=r._maxHeight||e._context.staticPlot){var B=r._effHeight;s&&(B=r._height),p.attr({width:r._width-g,height:B-g,x:g/2,y:g/2}),ef.setTranslate(M,0,0),T.select("rect").attr({width:r._width-2*g,height:B-2*g,x:g,y:g}),ef.setClipUrl(M,a,e),ef.setRect(k,0,0,0,0),delete r._scrollY}else{var F=Math.max(Af.scrollBarMinHeight,r._effHeight*r._effHeight/r._height),N=r._effHeight-F-2*Af.scrollBarMargin,Z=r._height-r._effHeight,J=N/Z,re=Math.min(r._scrollY||0,Z);p.attr({width:r._width-2*g+Af.scrollBarWidth+Af.scrollBarMargin,height:r._effHeight-g,x:g/2,y:g/2}),T.select("rect").attr({width:r._width-2*g+Af.scrollBarWidth+Af.scrollBarMargin,height:r._effHeight-2*g,x:g,y:g+re}),ef.setClipUrl(M,a,e),xe(re,F,J),_.on("wheel",function(){re=Iu.constrain(r._scrollY+nd.event.deltaY/N*Z,0,Z),xe(re,F,J),re!==0&&re!==Z&&nd.event.preventDefault()});var ue,fe,K,X=function(we,Re,qe){var et=(qe-Re)/J+we;return Iu.constrain(et,0,Z)},ae=function(we,Re,qe){var et=(Re-qe)/J+we;return Iu.constrain(et,0,Z)},oe=nd.behavior.drag().on("dragstart",function(){var we=nd.event.sourceEvent;we.type==="touchstart"?ue=we.changedTouches[0].clientY:ue=we.clientY,K=re}).on("drag",function(){var we=nd.event.sourceEvent;we.buttons===2||we.ctrlKey||(we.type==="touchmove"?fe=we.changedTouches[0].clientY:fe=we.clientY,re=X(K,ue,fe),xe(re,F,J))});k.call(oe);var me=nd.behavior.drag().on("dragstart",function(){var we=nd.event.sourceEvent;we.type==="touchstart"&&(ue=we.changedTouches[0].clientY,K=re)}).on("drag",function(){var we=nd.event.sourceEvent;we.type==="touchmove"&&(fe=we.changedTouches[0].clientY,re=ae(K,ue,fe),xe(re,F,J))});M.call(me)}function xe(we,Re,qe){r._scrollY=e._fullLayout[n]._scrollY=we,ef.setTranslate(M,0,-we),ef.setRect(k,r._width,Af.scrollBarMargin+we*qe,Af.scrollBarWidth,Re),T.select("rect").attr("y",g+we)}if(e._context.edits.legendPosition){var ce,ie,ge,le;_.classed("cursor-move",!0),EO.init({element:_.node(),gd:e,prepFn:function(){var we=ef.getTranslate(_);ge=we.x,le=we.y},moveFn:function(we,Re){var qe=ge+we,et=le+Re;ef.setTranslate(_,qe,et),ce=EO.align(qe,r._width,S.l,S.l+S.w,r.xanchor),ie=EO.align(et+r._height,-r._height,S.t+S.h,S.t,r.yanchor)},doneFn:function(){if(ce!==void 0&&ie!==void 0){var we={};we[n+".x"]=ce,we[n+".y"]=ie,vm.call("_guiRelayout",e,we)}},clickFn:function(we,Re){var qe=o.selectAll("g.traces").filter(function(){var et=this.getBoundingClientRect();return Re.clientX>=et.left&&Re.clientX<=et.right&&Re.clientY>=et.top&&Re.clientY<=et.bottom});qe.size()>0&&Vae(e,_,qe,we,Re)}})}}],e)}}function KC(e,t,r){var i=e[0],n=i.width,a=t.entrywidthmode,o=i.trace.legendwidth||t.entrywidth;return a==="fraction"?t._maxWidth*o:r+(o||n)}function Vae(e,t,r,i,n){var a=r.data()[0][0].trace,o={event:n,node:r.node(),curveNumber:a.index,expandedIndex:a._expandedIndex,data:e.data,layout:e.layout,frames:e._transitionData._frames,config:e._context,fullData:e._fullData,fullLayout:e._fullLayout};a._group&&(o.group=a._group),vm.traceIs(a,"pie-like")&&(o.label=r.datum()[0].label);var s=Iae.triggerHandler(e,"plotly_legendclick",o);if(i===1){if(s===!1)return;t._clickTimeout=setTimeout(function(){e._fullLayout&&Fae(r,e,i)},e._context.doubleClickDelay)}else if(i===2){t._clickTimeout&&clearTimeout(t._clickTimeout),e._legendMouseDownTime=0;var l=Iae.triggerHandler(e,"plotly_legenddoubleclick",o);l!==!1&&s!==!1&&Fae(r,e,i)}}function lot(e,t,r){var i=t4(r),n=e.data()[0][0],a=n.trace,o=vm.traceIs(a,"pie-like"),s=!r._inHover&&t._context.edits.legendText&&!o,l=r._maxNameLength,u,f;n.groupTitle?(u=n.groupTitle.text,f=n.groupTitle.font):(f=r.font,r.entries?u=n.text:(u=o?n.label:a.name,a._meta&&(u=Iu.templateString(u,a._meta))));var c=Iu.ensureSingle(e,"text",i+"text");c.attr("text-anchor","start").call(ef.font,f).text(s?Nae(u,l):u);var h=r.indentation+r.itemwidth+Af.itemGap*2;Ax.positionText(c,h,0),s?c.call(Ax.makeEditable,{gd:t,text:u}).call(QC,e,t,r).on("edit",function(v){this.text(Nae(v,l)).call(QC,e,t,r);var d=n.trace._fullInput||{},_={};if(vm.hasTransform(d,"groupby")){var T=vm.getTransformIndices(d,"groupby"),p=T[T.length-1],M=Iu.keyedContainer(d,"transforms["+p+"].styles","target","value.name");M.set(n.trace._group,v),_=M.constructUpdate()}else _.name=v;return d._isShape?vm.call("_guiRelayout",t,"shapes["+a.index+"].name",_.name):vm.call("_guiRestyle",t,_,a.index)}):QC(c,e,t,r)}function Nae(e,t){var r=Math.max(4,t);if(e&&e.trim().length>=r/2)return e;e=e||"";for(var i=r-e.length;i>0;i--)e+=" ";return e}function uot(e,t,r){var i=t._context.doubleClickDelay,n,a=1,o=Iu.ensureSingle(e,"rect",r+"toggle",function(s){t._context.staticPlot||s.style("cursor","pointer").attr("pointer-events","all"),s.call(JC.fill,"rgba(0,0,0,0)")});t._context.staticPlot||(o.on("mousedown",function(){n=new Date().getTime(),n-t._legendMouseDownTime<i?a+=1:(a=1,t._legendMouseDownTime=n)}),o.on("mouseup",function(){if(!(t._dragged||t._editing)){var s=t._fullLayout[r];new Date().getTime()-t._legendMouseDownTime>i&&(a=Math.max(a-1,1)),Vae(t,s,e,a,nd.event)}}))}function QC(e,t,r,i,n){i._inHover&&e.attr("data-notex",!0),Ax.convertToTspans(e,r,function(){fot(t,r,i,n)})}function fot(e,t,r,i){var n=e.data()[0][0];if(!r._inHover&&n&&!n.trace.showlegend){e.remove();return}var a=e.select("g[class*=math-group]"),o=a.node(),s=t4(r);r||(r=t._fullLayout[s]);var l=r.borderwidth,u;i===M2?u=r.title.font:n.groupTitle?u=n.groupTitle.font:u=r.font;var f=u.size*Uae,c,h;if(o){var v=ef.bBox(o);c=v.height,h=v.width,i===M2?ef.setTranslate(a,l,l+c*.75):ef.setTranslate(a,0,c*.25)}else{var d="."+s+(i===M2?"title":"")+"text",_=e.select(d),T=Ax.lineCount(_),p=_.node();if(c=f*T,h=p?ef.bBox(p).width:0,i===M2)r.title.side==="left"&&(h+=Af.itemGap*2),Ax.positionText(_,l+Af.titlePad,l+f);else{var M=Af.itemGap*2+r.indentation+r.itemwidth;n.groupTitle&&(M=Af.itemGap,h-=r.indentation+r.itemwidth),Ax.positionText(_,M,-f*((T-1)/2-.3))}}i===M2?(r._titleWidth=h,r._titleHeight=c):(n.lineHeight=f,n.height=Math.max(c,16)+3,n.width=h)}function cot(e){var t=0,r=0,i=e.title.side;return i&&(i.indexOf("left")!==-1&&(t=e._titleWidth),i.indexOf("top")!==-1&&(r=e._titleHeight)),[t,r]}function hot(e,t,r,i){var n=e._fullLayout,a=t4(i);i||(i=n[a]);var o=n._size,s=Oae.isVertical(i),l=Oae.isGrouped(i),u=i.entrywidthmode==="fraction",f=i.borderwidth,c=2*f,h=Af.itemGap,v=i.indentation+i.itemwidth+h*2,d=2*(f+h),_=e4(i),T=i.y<0||i.y===0&&_==="top",p=i.y>1||i.y===1&&_==="bottom",M=i.tracegroupgap,b={};i._maxHeight=Math.max(T||p?n.height/2:o.h,30);var w=0;i._width=0,i._height=0;var k=cot(i);if(s)r.each(function(K){var X=K[0].height;ef.setTranslate(this,f+k[0],f+k[1]+i._height+X/2+h),i._height+=X,i._width=Math.max(i._width,K[0].width)}),w=v+i._width,i._width+=h+v+c,i._height+=d,l&&(t.each(function(K,X){ef.setTranslate(this,0,X*i.tracegroupgap)}),i._height+=(i._lgroupsLength-1)*i.tracegroupgap);else{var x=$C(i),E=i.x<0||i.x===0&&x==="right",S=i.x>1||i.x===1&&x==="left",g=p||T,C=n.width/2;i._maxWidth=Math.max(E?g&&x==="left"?o.l+o.w:C:S?g&&x==="right"?o.r+o.w:C:o.w,2*v);var A=0,P=0;r.each(function(K){var X=KC(K,i,v);A=Math.max(A,X),P+=X}),w=null;var D=0;if(l){var z=0,O=0,V=0;t.each(function(){var K=0,X=0;nd.select(this).selectAll("g.traces").each(function(oe){var me=KC(oe,i,v),xe=oe[0].height;ef.setTranslate(this,k[0],k[1]+f+h+xe/2+X),X+=xe,K=Math.max(K,me),b[oe[0].trace.legendgroup]=K});var ae=K+h;O>0&&ae+f+O>i._maxWidth?(D=Math.max(D,O),O=0,V+=z+M,z=X):z=Math.max(z,X),ef.setTranslate(this,O,V),O+=ae}),i._width=Math.max(D,O)+f,i._height=V+z+d}else{var B=r.size(),F=P+c+(B-1)*h<i._maxWidth,N=0,Z=0,J=0,re=0;r.each(function(K){var X=K[0].height,ae=KC(K,i,v,l),oe=F?ae:A;u||(oe+=h),oe+f+Z-h>=i._maxWidth&&(D=Math.max(D,re),Z=0,J+=N,i._height+=N,N=0),ef.setTranslate(this,k[0]+f+Z,k[1]+f+J+X/2+h),re=Z+ae+h,Z+=oe,N=Math.max(N,X)}),F?(i._width=Z+c,i._height=N+d):(i._width=Math.max(D,re)+c,i._height+=N+d)}}i._width=Math.ceil(Math.max(i._width+k[0],i._titleWidth+2*(f+Af.titlePad))),i._height=Math.ceil(Math.max(i._height+k[1],i._titleHeight+2*(f+Af.itemGap))),i._effHeight=Math.min(i._height,i._maxHeight);var ue=e._context.edits,fe=ue.legendText||ue.legendPosition;r.each(function(K){var X=nd.select(this).select("."+a+"toggle"),ae=K[0].height,oe=K[0].trace.legendgroup,me=KC(K,i,v);l&&oe!==""&&(me=b[oe]);var xe=fe?v:w||me;!s&&!u&&(xe+=h/2),ef.setRect(X,0,-ae/2,xe,ae)})}function vot(e,t,r,i){var n=e._fullLayout,a=n[t],o=$C(a),s=e4(a),l=a.xref==="paper",u=a.yref==="paper";e._fullLayout._reservedMargin[t]={};var f=a.y<.5?"b":"t",c=a.x<.5?"l":"r",h={r:n.width-r,l:r+a._width,b:n.height-i,t:i+a._effHeight};if(l&&u)return kO.autoMargin(e,t,{x:a.x,y:a.y,l:a._width*S2[o],r:a._width*qae[o],b:a._effHeight*qae[s],t:a._effHeight*S2[s]});l?e._fullLayout._reservedMargin[t][f]=h[f]:u||a.orientation==="v"?e._fullLayout._reservedMargin[t][c]=h[c]:e._fullLayout._reservedMargin[t][f]=h[f]}function $C(e){return Iu.isRightAnchor(e)?"right":Iu.isCenterAnchor(e)?"center":"left"}function e4(e){return Iu.isBottomAnchor(e)?"bottom":Iu.isMiddleAnchor(e)?"middle":"top"}function t4(e){return e._id||"legend"}});var IO=ne(DO=>{"use strict";var Mx=Ai(),Ng=la(),Gae=Xf(),Fu=Wt(),PO=Fu.strTranslate,dot=Fu.strRotate,pot=s2(),np=Es(),got=vae(),U0=aa(),Qf=_i(),r4=Hh(),dm=Xi(),k2=wi(),t0=td(),Sx=aA(),yot=xO(),mot=LO(),Jae=Sx.YANGLE,RO=Math.PI*Jae/180,xot=1/Math.sin(RO),_ot=Math.cos(RO),bot=Math.sin(RO),Cl=Sx.HOVERARROWSIZE,bo=Sx.HOVERTEXTPAD,Yae={box:!0,ohlc:!0,violin:!0,candlestick:!0},wot={scatter:!0,scattergl:!0,splom:!0};DO.hover=function(t,r,i,n){t=Fu.getGraphDiv(t);var a=r.target;Fu.throttle(t._fullLayout._uid+Sx.HOVERID,Sx.HOVERMINTIME,function(){Tot(t,r,i,n,a)})};DO.loneHover=function(t,r){var i=!0;Array.isArray(t)||(i=!1,t=[t]);var n=r.gd,a=roe(n),o=noe(n),s=t.map(function(T){var p=T._x0||T.x0||T.x||0,M=T._x1||T.x1||T.x||0,b=T._y0||T.y0||T.y||0,w=T._y1||T.y1||T.y||0,k=T.eventData;if(k){var x=Math.min(p,M),E=Math.max(p,M),S=Math.min(b,w),g=Math.max(b,w),C=T.trace;if(k2.traceIs(C,"gl3d")){var A=n._fullLayout[C.scene]._scene.container,P=A.offsetLeft,D=A.offsetTop;x+=P,E+=P,S+=D,g+=D}k.bbox={x0:x+o,x1:E+o,y0:S+a,y1:g+a},r.inOut_bbox&&r.inOut_bbox.push(k.bbox)}else k=!1;return{color:T.color||Qf.defaultLine,x0:T.x0||T.x||0,x1:T.x1||T.x||0,y0:T.y0||T.y||0,y1:T.y1||T.y||0,xLabel:T.xLabel,yLabel:T.yLabel,zLabel:T.zLabel,text:T.text,name:T.name,idealAlign:T.idealAlign,borderColor:T.borderColor,fontFamily:T.fontFamily,fontSize:T.fontSize,fontColor:T.fontColor,nameLength:T.nameLength,textAlign:T.textAlign,trace:T.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:T.hovertemplate||!1,hovertemplateLabels:T.hovertemplateLabels||!1,eventData:k}}),l=!1,u=$ae(s,{gd:n,hovermode:"closest",rotateLabels:l,bgColor:r.bgColor||Qf.background,container:Mx.select(r.container),outerContainer:r.outerContainer||r.container}),f=u.hoverLabels,c=5,h=0,v=0;f.sort(function(T,p){return T.y0-p.y0}).each(function(T,p){var M=T.y0-T.by/2;M-c<h?T.offset=h-M+c:T.offset=0,h=M+T.by+T.offset,p===r.anchorIndex&&(v=T.offset)}).each(function(T){T.offset-=v});var d=n._fullLayout._invScaleX,_=n._fullLayout._invScaleY;return toe(f,l,d,_),i?f:f.node()};function Tot(e,t,r,i,n){r||(r="xy");var a=Array.isArray(r)?r:[r],o=e._fullLayout,s=o._plots||[],l=s[r],u=o._has("cartesian");if(l){var f=l.overlays.map(function(Mt){return Mt.id});a=a.concat(f)}for(var c=a.length,h=new Array(c),v=new Array(c),d=!1,_=0;_<c;_++){var T=a[_];if(s[T])d=!0,h[_]=s[T].xaxis,v[_]=s[T].yaxis;else if(o[T]&&o[T]._subplot){var p=o[T]._subplot;h[_]=p.xaxis,v[_]=p.yaxis}else{Fu.warn("Unrecognized subplot: "+T);return}}var M=t.hovermode||o.hovermode;if(M&&!d&&(M="closest"),["x","y","closest","x unified","y unified"].indexOf(M)===-1||!e.calcdata||e.querySelector(".zoombox")||e._dragging)return r4.unhoverRaw(e,t);var b=o.hoverdistance;b===-1&&(b=1/0);var w=o.spikedistance;w===-1&&(w=1/0);var k=[],x=[],E,S,g,C,A,P,D,z,O,V,B,F,N,Z={hLinePoint:null,vLinePoint:null},J=!1;if(Array.isArray(t))for(M="array",g=0;g<t.length;g++)A=e.calcdata[t[g].curveNumber||0],A&&(P=A[0].trace,A[0].trace.hoverinfo!=="skip"&&(x.push(A),P.orientation==="h"&&(J=!0)));else{for(C=0;C<e.calcdata.length;C++)A=e.calcdata[C],P=A[0].trace,P.hoverinfo!=="skip"&&t0.isTraceInSubplots(P,a)&&(x.push(A),P.orientation==="h"&&(J=!0));var re=!n,ue,fe;if(re)"xpx"in t?ue=t.xpx:ue=h[0]._length/2,"ypx"in t?fe=t.ypx:fe=v[0]._length/2;else{if(pot.triggerHandler(e,"plotly_beforehover",t)===!1)return;var K=n.getBoundingClientRect();ue=t.clientX-K.left,fe=t.clientY-K.top,o._calcInverseTransform(e);var X=Fu.apply3DTransform(o._invTransform)(ue,fe);if(ue=X[0],fe=X[1],ue<0||ue>h[0]._length||fe<0||fe>v[0]._length)return r4.unhoverRaw(e,t)}if(t.pointerX=ue+h[0]._offset,t.pointerY=fe+v[0]._offset,"xval"in t?E=t0.flat(a,t.xval):E=t0.p2c(h,ue),"yval"in t?S=t0.flat(a,t.yval):S=t0.p2c(v,fe),!Ng(E[0])||!Ng(S[0]))return Fu.warn("Fx.hover failed",t,e),r4.unhoverRaw(e,t)}var ae=1/0;function oe(Mt,Kt){for(C=0;C<x.length;C++)if(A=x[C],!(!A||!A[0]||!A[0].trace)&&(P=A[0].trace,!(P.visible!==!0||P._length===0)&&["carpet","contourcarpet"].indexOf(P._module.name)===-1)){if(P.type==="splom"?(z=0,D=a[z]):(D=t0.getSubplot(P),z=a.indexOf(D)),O=M,t0.isUnifiedHover(O)&&(O=O.charAt(0)),F={cd:A,trace:P,xa:h[z],ya:v[z],maxHoverDistance:b,maxSpikeDistance:w,index:!1,distance:Math.min(ae,b),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:Qf.defaultLine,name:P.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},o[D]&&(F.subplot=o[D]._subplot),o._splomScenes&&o._splomScenes[P.uid]&&(F.scene=o._splomScenes[P.uid]),N=k.length,O==="array"){var Jt=t[C];"pointNumber"in Jt?(F.index=Jt.pointNumber,O="closest"):(O="","xval"in Jt&&(V=Jt.xval,O="x"),"yval"in Jt&&(B=Jt.yval,O=O?"closest":"y"))}else Mt!==void 0&&Kt!==void 0?(V=Mt,B=Kt):(V=E[z],B=S[z]);if(b!==0)if(P._module&&P._module.hoverPoints){var Fr=P._module.hoverPoints(F,V,B,O,{finiteRange:!0,hoverLayer:o._hoverlayer});if(Fr)for(var Vr,mr=0;mr<Fr.length;mr++)Vr=Fr[mr],Ng(Vr.x0)&&Ng(Vr.y0)&&k.push(Eot(Vr,M))}else Fu.log("Unrecognized trace type in hover:",P);if(M==="closest"&&k.length>N&&(k.splice(0,N),ae=k[0].distance),u&&w!==0&&k.length===0){F.distance=w,F.index=!1;var zr=P._module.hoverPoints(F,V,B,"closest",{hoverLayer:o._hoverlayer});if(zr&&(zr=zr.filter(function(si){return si.spikeDistance<=w})),zr&&zr.length){var an,ni=zr.filter(function(si){return si.xa.showspikes&&si.xa.spikesnap!=="hovered data"});if(ni.length){var mn=ni[0];Ng(mn.x0)&&Ng(mn.y0)&&(an=xe(mn),(!Z.vLinePoint||Z.vLinePoint.spikeDistance>an.spikeDistance)&&(Z.vLinePoint=an))}var fi=zr.filter(function(si){return si.ya.showspikes&&si.ya.spikesnap!=="hovered data"});if(fi.length){var Wi=fi[0];Ng(Wi.x0)&&Ng(Wi.y0)&&(an=xe(Wi),(!Z.hLinePoint||Z.hLinePoint.spikeDistance>an.spikeDistance)&&(Z.hLinePoint=an))}}}}}oe();function me(Mt,Kt,Jt){for(var Fr=null,Vr=1/0,mr,zr=0;zr<Mt.length;zr++)mr=Mt[zr].spikeDistance,Jt&&zr===0&&(mr=-1/0),mr<=Vr&&mr<=Kt&&(Fr=Mt[zr],Vr=mr);return Fr}function xe(Mt){return Mt?{xa:Mt.xa,ya:Mt.ya,x:Mt.xSpike!==void 0?Mt.xSpike:(Mt.x0+Mt.x1)/2,y:Mt.ySpike!==void 0?Mt.ySpike:(Mt.y0+Mt.y1)/2,distance:Mt.distance,spikeDistance:Mt.spikeDistance,curveNumber:Mt.trace.index,color:Mt.color,pointNumber:Mt.index}:null}var ce={fullLayout:o,container:o._hoverlayer,event:t},ie=e._spikepoints,ge={vLinePoint:Z.vLinePoint,hLinePoint:Z.hLinePoint};e._spikepoints=ge;var le=function(){k.sort(function(Mt,Kt){return Mt.distance-Kt.distance}),k=Cot(k,M)};le();var we=M.charAt(0),Re=(we==="x"||we==="y")&&k[0]&&wot[k[0].trace.type];if(u&&w!==0&&k.length!==0){var qe=k.filter(function(Mt){return Mt.ya.showspikes}),et=me(qe,w,Re);Z.hLinePoint=xe(et);var Pe=k.filter(function(Mt){return Mt.xa.showspikes}),Ie=me(Pe,w,Re);Z.vLinePoint=xe(Ie)}if(k.length===0){var ut=r4.unhoverRaw(e,t);return u&&(Z.hLinePoint!==null||Z.vLinePoint!==null)&&Zae(ie)&&Xae(e,Z,ce),ut}if(u&&Zae(ie)&&Xae(e,Z,ce),t0.isXYhover(O)&&k[0].length!==0&&k[0].trace.type!=="splom"){var ft=k[0];Yae[ft.trace.type]?k=k.filter(function(Mt){return Mt.trace.index===ft.trace.index}):k=[ft];var je=k.length,_t=Kae("x",ft,o),Bt=Kae("y",ft,o);oe(_t,Bt);var Lt=[],Me={},Ze=0,dt=function(Mt){var Kt=Yae[Mt.trace.type]?Qae(Mt):Mt.trace.index;if(!Me[Kt])Ze++,Me[Kt]=Ze,Lt.push(Mt);else{var Jt=Me[Kt]-1,Fr=Lt[Jt];Jt>0&&Math.abs(Mt.distance)<Math.abs(Fr.distance)&&(Lt[Jt]=Mt)}},it;for(it=0;it<je;it++)dt(k[it]);for(it=k.length-1;it>je-1;it--)dt(k[it]);k=Lt,le()}var vt=e._hoverdata,rt=[],We=roe(e),ht=noe(e);for(g=0;g<k.length;g++){var mt=k[g],er=t0.makeEventData(mt,mt.trace,mt.cd);if(mt.hovertemplate!==!1){var $t=!1;mt.cd[mt.index]&&mt.cd[mt.index].ht&&($t=mt.cd[mt.index].ht),mt.hovertemplate=$t||mt.trace.hovertemplate||!1}if(mt.xa&&mt.ya){var cr=mt.x0+mt.xa._offset,or=mt.x1+mt.xa._offset,vr=mt.y0+mt.ya._offset,Ot=mt.y1+mt.ya._offset,yt=Math.min(cr,or),Et=Math.max(cr,or),Je=Math.min(vr,Ot),Ke=Math.max(vr,Ot);er.bbox={x0:yt+ht,x1:Et+ht,y0:Je+We,y1:Ke+We}}mt.eventData=[er],rt.push(er)}e._hoverdata=rt;var At=M==="y"&&(x.length>1||k.length>1)||M==="closest"&&J&&k.length>1,Ee=Qf.combine(o.plot_bgcolor||Qf.background,o.paper_bgcolor),de=$ae(k,{gd:e,hovermode:M,rotateLabels:At,bgColor:Ee,container:o._hoverlayer,outerContainer:o._paper.node(),commonLabelOpts:o.hoverlabel,hoverdistance:o.hoverdistance}),Te=de.hoverLabels;if(t0.isUnifiedHover(M)||(Mot(Te,At,o,de.commonLabelBoundingBox),toe(Te,At,o._invScaleX,o._invScaleY)),n&&n.tagName){var nt=k2.getComponentMethod("annotations","hasClickToShow")(e,rt);got(Mx.select(n),nt?"pointer":"")}!n||i||!kot(e,t,vt)||(vt&&e.emit("plotly_unhover",{event:t,points:vt}),e.emit("plotly_hover",{event:t,points:e._hoverdata,xaxes:h,yaxes:v,xvals:E,yvals:S}))}function Qae(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa?e.xa._id:"",e.ya?e.ya._id:""].join(",")}var Aot=/<extra>([\s\S]*)<\/extra>/;function $ae(e,t){var r=t.gd,i=r._fullLayout,n=t.hovermode,a=t.rotateLabels,o=t.bgColor,s=t.container,l=t.outerContainer,u=t.commonLabelOpts||{};if(e.length===0)return[[]];var f=t.fontFamily||Sx.HOVERFONT,c=t.fontSize||Sx.HOVERFONTSIZE,h=e[0],v=h.xa,d=h.ya,_=n.charAt(0),T=_+"Label",p=h[T];if(p===void 0&&v.type==="multicategory")for(var M=0;M<e.length&&(p=e[M][T],p===void 0);M++);var b=E2(r,l),w=b.top,k=b.width,x=b.height,E=p!==void 0&&h.distance<=t.hoverdistance&&(n==="x"||n==="y");if(E){var S=!0,g,C;for(g=0;g<e.length;g++)if(S&&e[g].zLabel===void 0&&(S=!1),C=e[g].hoverinfo||e[g].trace.hoverinfo,C){var A=Array.isArray(C)?C:C.split("+");if(A.indexOf("all")===-1&&A.indexOf(n)===-1){E=!1;break}}S&&(E=!1)}var P=s.selectAll("g.axistext").data(E?[0]:[]);P.enter().append("g").classed("axistext",!0),P.exit().remove();var D={minX:0,maxX:0,minY:0,maxY:0};if(P.each(function(){var je=Mx.select(this),_t=Fu.ensureSingle(je,"path","",function(Ke){Ke.style({"stroke-width":"1px"})}),Bt=Fu.ensureSingle(je,"text","",function(Ke){Ke.attr("data-notex",1)}),Lt=u.bgcolor||Qf.defaultLine,Me=u.bordercolor||Qf.contrast(Lt),Ze=Qf.contrast(Lt),dt={family:u.font.family||f,size:u.font.size||c,color:u.font.color||Ze};_t.style({fill:Lt,stroke:Me}),Bt.text(p).call(U0.font,dt).call(np.positionText,0,0).call(np.convertToTspans,r),je.attr("transform","");var it=E2(r,Bt.node()),vt,rt;if(n==="x"){var We=v.side==="top"?"-":"";Bt.attr("text-anchor","middle").call(np.positionText,0,v.side==="top"?w-it.bottom-Cl-bo:w-it.top+Cl+bo),vt=v._offset+(h.x0+h.x1)/2,rt=d._offset+(v.side==="top"?0:d._length);var ht=it.width/2+bo,mt=vt;vt<ht?mt=ht:vt>i.width-ht&&(mt=i.width-ht),_t.attr("d","M"+(vt-mt)+",0L"+(vt-mt+Cl)+","+We+Cl+"H"+ht+"v"+We+(bo*2+it.height)+"H"+-ht+"V"+We+Cl+"H"+(vt-mt-Cl)+"Z"),vt=mt,D.minX=vt-ht,D.maxX=vt+ht,v.side==="top"?(D.minY=rt-(bo*2+it.height),D.maxY=rt-bo):(D.minY=rt+bo,D.maxY=rt+(bo*2+it.height))}else{var er,$t,cr;d.side==="right"?(er="start",$t=1,cr="",vt=v._offset+v._length):(er="end",$t=-1,cr="-",vt=v._offset),rt=d._offset+(h.y0+h.y1)/2,Bt.attr("text-anchor",er),_t.attr("d","M0,0L"+cr+Cl+","+Cl+"V"+(bo+it.height/2)+"h"+cr+(bo*2+it.width)+"V-"+(bo+it.height/2)+"H"+cr+Cl+"V-"+Cl+"Z"),D.minY=rt-(bo+it.height/2),D.maxY=rt+(bo+it.height/2),d.side==="right"?(D.minX=vt+Cl,D.maxX=vt+Cl+(bo*2+it.width)):(D.minX=vt-Cl-(bo*2+it.width),D.maxX=vt-Cl);var or=it.height/2,vr=w-it.top-or,Ot="clip"+i._uid+"commonlabel"+d._id,yt;if(vt<it.width+2*bo+Cl){yt="M-"+(Cl+bo)+"-"+or+"h-"+(it.width-bo)+"V"+or+"h"+(it.width-bo)+"Z";var Et=it.width-vt+bo;np.positionText(Bt,Et,vr),er==="end"&&Bt.selectAll("tspan").each(function(){var Ke=Mx.select(this),At=U0.tester.append("text").text(Ke.text()).call(U0.font,dt),Ee=E2(r,At.node());Math.round(Ee.width)<Math.round(it.width)&&Ke.attr("x",Et-Ee.width),At.remove()})}else np.positionText(Bt,$t*(bo+Cl),vr),yt=null;var Je=i._topclips.selectAll("#"+Ot).data(yt?[0]:[]);Je.enter().append("clipPath").attr("id",Ot).append("path"),Je.exit().remove(),Je.select("path").attr("d",yt),U0.setClipUrl(Bt,yt?Ot:null,r)}je.attr("transform",PO(vt,rt))}),t0.isUnifiedHover(n)){s.selectAll("g.hovertext").remove();var z=e.filter(function(je){return je.hoverinfo!=="none"});if(z.length===0)return[];var O=i.hoverlabel,V=O.font,B={showlegend:!0,legend:{title:{text:p,font:V},font:V,bgcolor:O.bgcolor,bordercolor:O.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:i.legend?i.legend.traceorder:void 0,orientation:"v"}},F={font:V};yot(B,F,r._fullData);var N=F.legend;N.entries=[];for(var Z=0;Z<z.length;Z++){var J=z[Z];if(J.hoverinfo!=="none"){var re=Wae(J,!0,n,i,p),ue=re[0],fe=re[1];J.name=fe,fe!==""?J.text=fe+" : "+ue:J.text=ue;var K=J.cd[J.index];K&&(K.mc&&(J.mc=K.mc),K.mcc&&(J.mc=K.mcc),K.mlc&&(J.mlc=K.mlc),K.mlcc&&(J.mlc=K.mlcc),K.mlw&&(J.mlw=K.mlw),K.mrc&&(J.mrc=K.mrc),K.dir&&(J.dir=K.dir)),J._distinct=!0,N.entries.push([J])}}N.entries.sort(function(je,_t){return je[0].trace.index-_t[0].trace.index}),N.layer=s,N._inHover=!0,N._groupTitleFont=O.grouptitlefont,mot(r,N);var X=s.select("g.legend"),ae=E2(r,X.node()),oe=ae.width+2*bo,me=ae.height+2*bo,xe=z[0],ce=(xe.x0+xe.x1)/2,ie=(xe.y0+xe.y1)/2,ge=!(k2.traceIs(xe.trace,"bar-like")||k2.traceIs(xe.trace,"box-violin")),le,we;_==="y"?ge?(we=ie-bo,le=ie+bo):(we=Math.min.apply(null,z.map(function(je){return Math.min(je.y0,je.y1)})),le=Math.max.apply(null,z.map(function(je){return Math.max(je.y0,je.y1)}))):we=le=Fu.mean(z.map(function(je){return(je.y0+je.y1)/2}))-me/2;var Re,qe;_==="x"?ge?(Re=ce+bo,qe=ce-bo):(Re=Math.max.apply(null,z.map(function(je){return Math.max(je.x0,je.x1)})),qe=Math.min.apply(null,z.map(function(je){return Math.min(je.x0,je.x1)}))):Re=qe=Fu.mean(z.map(function(je){return(je.x0+je.x1)/2}))-oe/2;var et=v._offset,Pe=d._offset;le+=Pe,Re+=et,qe+=et-oe,we+=Pe-me;var Ie,ut;return Re+oe<k&&Re>=0?Ie=Re:qe+oe<k&&qe>=0?Ie=qe:et+oe<k?Ie=et:Re-ce<ce-qe+oe?Ie=k-oe:Ie=0,Ie+=bo,le+me<x&&le>=0?ut=le:we+me<x&&we>=0?ut=we:Pe+me<x?ut=Pe:le-ie<ie-we+me?ut=x-me:ut=0,ut+=bo,X.attr("transform",PO(Ie-1,ut-1)),X}var ft=s.selectAll("g.hovertext").data(e,function(je){return Qae(je)});return ft.enter().append("g").classed("hovertext",!0).each(function(){var je=Mx.select(this);je.append("rect").call(Qf.fill,Qf.addOpacity(o,.8)),je.append("text").classed("name",!0),je.append("path").style("stroke-width","1px"),je.append("text").classed("nums",!0).call(U0.font,f,c)}),ft.exit().remove(),ft.each(function(je){var _t=Mx.select(this).attr("transform",""),Bt=je.color;Array.isArray(Bt)&&(Bt=Bt[je.eventData[0].pointNumber]);var Lt=je.bgcolor||Bt,Me=Qf.combine(Qf.opacity(Lt)?Lt:Qf.defaultLine,o),Ze=Qf.combine(Qf.opacity(Bt)?Bt:Qf.defaultLine,o),dt=je.borderColor||Qf.contrast(Me),it=Wae(je,E,n,i,p,_t),vt=it[0],rt=it[1],We=_t.select("text.nums").call(U0.font,je.fontFamily||f,je.fontSize||c,je.fontColor||dt).text(vt).attr("data-notex",1).call(np.positionText,0,0).call(np.convertToTspans,r),ht=_t.select("text.name"),mt=0,er=0;if(rt&&rt!==vt){ht.call(U0.font,je.fontFamily||f,je.fontSize||c,Ze).text(rt).attr("data-notex",1).call(np.positionText,0,0).call(np.convertToTspans,r);var $t=E2(r,ht.node());mt=$t.width+2*bo,er=$t.height+2*bo}else ht.remove(),_t.select("rect").remove();_t.select("path").style({fill:Me,stroke:dt});var cr=je.xa._offset+(je.x0+je.x1)/2,or=je.ya._offset+(je.y0+je.y1)/2,vr=Math.abs(je.x1-je.x0),Ot=Math.abs(je.y1-je.y0),yt=E2(r,We.node()),Et=yt.width/i._invScaleX,Je=yt.height/i._invScaleY;je.ty0=(w-yt.top)/i._invScaleY,je.bx=Et+2*bo,je.by=Math.max(Je+2*bo,er),je.anchor="start",je.txwidth=Et,je.tx2width=mt,je.offset=0;var Ke=(Et+Cl+bo+mt)*i._invScaleX,At,Ee;if(a)je.pos=cr,At=or+Ot/2+Ke<=x,Ee=or-Ot/2-Ke>=0,(je.idealAlign==="top"||!At)&&Ee?(or-=Ot/2,je.anchor="end"):At?(or+=Ot/2,je.anchor="start"):je.anchor="middle",je.crossPos=or;else{if(je.pos=or,At=cr+vr/2+Ke<=k,Ee=cr-vr/2-Ke>=0,(je.idealAlign==="left"||!At)&&Ee)cr-=vr/2,je.anchor="end";else if(At)cr+=vr/2,je.anchor="start";else{je.anchor="middle";var de=Ke/2,Te=cr+de-k,nt=cr-de;Te>0&&(cr-=Te),nt<0&&(cr+=-nt)}je.crossPos=cr}We.attr("text-anchor",je.anchor),mt&&ht.attr("text-anchor",je.anchor),_t.attr("transform",PO(cr,or)+(a?dot(Jae):""))}),{hoverLabels:ft,commonLabelBoundingBox:D}}function Wae(e,t,r,i,n,a){var o="",s="";e.nameOverride!==void 0&&(e.name=e.nameOverride),e.name&&(e.trace._meta&&(e.name=Fu.templateString(e.name,e.trace._meta)),o=jae(e.name,e.nameLength));var l=r.charAt(0),u=l==="x"?"y":"x";e.zLabel!==void 0?(e.xLabel!==void 0&&(s+="x: "+e.xLabel+"<br>"),e.yLabel!==void 0&&(s+="y: "+e.yLabel+"<br>"),e.trace.type!=="choropleth"&&e.trace.type!=="choroplethmapbox"&&(s+=(s?"z: ":"")+e.zLabel)):t&&e[l+"Label"]===n?s=e[u+"Label"]||"":e.xLabel===void 0?e.yLabel!==void 0&&e.trace.type!=="scattercarpet"&&(s=e.yLabel):e.yLabel===void 0?s=e.xLabel:s="("+e.xLabel+", "+e.yLabel+")",(e.text||e.text===0)&&!Array.isArray(e.text)&&(s+=(s?"<br>":"")+e.text),e.extraText!==void 0&&(s+=(s?"<br>":"")+e.extraText),a&&s===""&&!e.hovertemplate&&(o===""&&a.remove(),s=o);var f=e.hovertemplate||!1;if(f){var c=e.hovertemplateLabels||e;e[l+"Label"]!==n&&(c[l+"other"]=c[l+"Val"],c[l+"otherLabel"]=c[l+"Label"]),s=Fu.hovertemplateString(f,c,i._d3locale,e.eventData[0]||{},e.trace._meta),s=s.replace(Aot,function(h,v){return o=jae(v,e.nameLength),""})}return[s,o]}function Mot(e,t,r,i){var n=t?"xa":"ya",a=t?"ya":"xa",o=0,s=1,l=e.size(),u=new Array(l),f=0,c=i.minX,h=i.maxX,v=i.minY,d=i.maxY,_=function(V){return V*r._invScaleX},T=function(V){return V*r._invScaleY};e.each(function(V){var B=V[n],F=V[a],N=B._id.charAt(0)==="x",Z=B.range;f===0&&Z&&Z[0]>Z[1]!==N&&(s=-1);var J=0,re=N?r.width:r.height;if(r.hovermode==="x"||r.hovermode==="y"){var ue=eoe(V,t),fe=V.anchor,K=fe==="end"?-1:1,X,ae;if(fe==="middle")X=V.crossPos+(N?T(ue.y-V.by/2):_(V.bx/2+V.tx2width/2)),ae=X+(N?T(V.by):_(V.bx));else if(N)X=V.crossPos+T(Cl+ue.y)-T(V.by/2-Cl),ae=X+T(V.by);else{var oe=_(K*Cl+ue.x),me=oe+_(K*V.bx);X=V.crossPos+Math.min(oe,me),ae=V.crossPos+Math.max(oe,me)}N?v!==void 0&&d!==void 0&&Math.min(ae,d)-Math.max(X,v)>1&&(F.side==="left"?(J=F._mainLinePosition,re=r.width):re=F._mainLinePosition):c!==void 0&&h!==void 0&&Math.min(ae,h)-Math.max(X,c)>1&&(F.side==="top"?(J=F._mainLinePosition,re=r.height):re=F._mainLinePosition)}u[f++]=[{datum:V,traceIndex:V.trace.index,dp:0,pos:V.pos,posref:V.posref,size:V.by*(N?xot:1)/2,pmin:J,pmax:re}]}),u.sort(function(V,B){return V[0].posref-B[0].posref||s*(B[0].traceIndex-V[0].traceIndex)});var p,M,b,w,k,x,E;function S(V){var B=V[0],F=V[V.length-1];if(M=B.pmin-B.pos-B.dp+B.size,b=F.pos+F.dp+F.size-B.pmax,M>.01){for(k=V.length-1;k>=0;k--)V[k].dp+=M;p=!1}if(!(b<.01)){if(M<-.01){for(k=V.length-1;k>=0;k--)V[k].dp-=b;p=!1}if(p){var N=0;for(w=0;w<V.length;w++)x=V[w],x.pos+x.dp+x.size>B.pmax&&N++;for(w=V.length-1;w>=0&&!(N<=0);w--)x=V[w],x.pos>B.pmax-1&&(x.del=!0,N--);for(w=0;w<V.length&&!(N<=0);w++)if(x=V[w],x.pos<B.pmin+1)for(x.del=!0,N--,b=x.size*2,k=V.length-1;k>=0;k--)V[k].dp-=b;for(w=V.length-1;w>=0&&!(N<=0);w--)x=V[w],x.pos+x.dp+x.size>B.pmax&&(x.del=!0,N--)}}}for(;!p&&o<=l;){for(o++,p=!0,w=0;w<u.length-1;){var g=u[w],C=u[w+1],A=g[g.length-1],P=C[0];if(M=A.pos+A.dp+A.size-P.pos-P.dp+P.size,M>.01&&A.pmin===P.pmin&&A.pmax===P.pmax){for(k=C.length-1;k>=0;k--)C[k].dp+=M;for(g.push.apply(g,C),u.splice(w+1,1),E=0,k=g.length-1;k>=0;k--)E+=g[k].dp;for(b=E/g.length,k=g.length-1;k>=0;k--)g[k].dp-=b;p=!1}else w++}u.forEach(S)}for(w=u.length-1;w>=0;w--){var D=u[w];for(k=D.length-1;k>=0;k--){var z=D[k],O=z.datum;O.offset=z.dp,O.del=z.del}}}function eoe(e,t){var r=0,i=e.offset;return t&&(i*=-bot,r=e.offset*_ot),{x:r,y:i}}function Sot(e){var t={start:1,end:-1,middle:0}[e.anchor],r=t*(Cl+bo),i=r+t*(e.txwidth+bo),n=e.anchor==="middle";return n&&(r-=e.tx2width/2,i+=e.txwidth/2+bo),{alignShift:t,textShiftX:r,text2ShiftX:i}}function toe(e,t,r,i){var n=function(o){return o*r},a=function(o){return o*i};e.each(function(o){var s=Mx.select(this);if(o.del)return s.remove();var l=s.select("text.nums"),u=o.anchor,f=u==="end"?-1:1,c=Sot(o),h=eoe(o,t),v=h.x,d=h.y,_=u==="middle";s.select("path").attr("d",_?"M-"+n(o.bx/2+o.tx2width/2)+","+a(d-o.by/2)+"h"+n(o.bx)+"v"+a(o.by)+"h-"+n(o.bx)+"Z":"M0,0L"+n(f*Cl+v)+","+a(Cl+d)+"v"+a(o.by/2-Cl)+"h"+n(f*o.bx)+"v-"+a(o.by)+"H"+n(f*Cl+v)+"V"+a(d-Cl)+"Z");var T=v+c.textShiftX,p=d+o.ty0-o.by/2+bo,M=o.textAlign||"auto";M!=="auto"&&(M==="left"&&u!=="start"?(l.attr("text-anchor","start"),T=_?-o.bx/2-o.tx2width/2+bo:-o.bx-bo):M==="right"&&u!=="end"&&(l.attr("text-anchor","end"),T=_?o.bx/2-o.tx2width/2-bo:o.bx+bo)),l.call(np.positionText,n(T),a(p)),o.tx2width&&(s.select("text.name").call(np.positionText,n(c.text2ShiftX+c.alignShift*bo+v),a(d+o.ty0-o.by/2+bo)),s.select("rect").call(U0.setRect,n(c.text2ShiftX+(c.alignShift-1)*o.tx2width/2+v),a(d-o.by/2-1),n(o.tx2width),a(o.by+2)))})}function Eot(e,t){var r=e.index,i=e.trace||{},n=e.cd[0],a=e.cd[r]||{};function o(h){return h||Ng(h)&&h===0}var s=Array.isArray(r)?function(h,v){var d=Fu.castOption(n,r,h);return o(d)?d:Fu.extractOption({},i,"",v)}:function(h,v){return Fu.extractOption(a,i,h,v)};function l(h,v,d){var _=s(v,d);o(_)&&(e[h]=_)}if(l("hoverinfo","hi","hoverinfo"),l("bgcolor","hbg","hoverlabel.bgcolor"),l("borderColor","hbc","hoverlabel.bordercolor"),l("fontFamily","htf","hoverlabel.font.family"),l("fontSize","hts","hoverlabel.font.size"),l("fontColor","htc","hoverlabel.font.color"),l("nameLength","hnl","hoverlabel.namelength"),l("textAlign","hta","hoverlabel.align"),e.posref=t==="y"||t==="closest"&&i.orientation==="h"?e.xa._offset+(e.x0+e.x1)/2:e.ya._offset+(e.y0+e.y1)/2,e.x0=Fu.constrain(e.x0,0,e.xa._length),e.x1=Fu.constrain(e.x1,0,e.xa._length),e.y0=Fu.constrain(e.y0,0,e.ya._length),e.y1=Fu.constrain(e.y1,0,e.ya._length),e.xLabelVal!==void 0&&(e.xLabel="xLabel"in e?e.xLabel:dm.hoverLabelText(e.xa,e.xLabelVal,i.xhoverformat),e.xVal=e.xa.c2d(e.xLabelVal)),e.yLabelVal!==void 0&&(e.yLabel="yLabel"in e?e.yLabel:dm.hoverLabelText(e.ya,e.yLabelVal,i.yhoverformat),e.yVal=e.ya.c2d(e.yLabelVal)),e.zLabelVal!==void 0&&e.zLabel===void 0&&(e.zLabel=String(e.zLabelVal)),!isNaN(e.xerr)&&!(e.xa.type==="log"&&e.xerr<=0)){var u=dm.tickText(e.xa,e.xa.c2l(e.xerr),"hover").text;e.xerrneg!==void 0?e.xLabel+=" +"+u+" / -"+dm.tickText(e.xa,e.xa.c2l(e.xerrneg),"hover").text:e.xLabel+=" \xB1 "+u,t==="x"&&(e.distance+=1)}if(!isNaN(e.yerr)&&!(e.ya.type==="log"&&e.yerr<=0)){var f=dm.tickText(e.ya,e.ya.c2l(e.yerr),"hover").text;e.yerrneg!==void 0?e.yLabel+=" +"+f+" / -"+dm.tickText(e.ya,e.ya.c2l(e.yerrneg),"hover").text:e.yLabel+=" \xB1 "+f,t==="y"&&(e.distance+=1)}var c=e.hoverinfo||e.trace.hoverinfo;return c&&c!=="all"&&(c=Array.isArray(c)?c:c.split("+"),c.indexOf("x")===-1&&(e.xLabel=void 0),c.indexOf("y")===-1&&(e.yLabel=void 0),c.indexOf("z")===-1&&(e.zLabel=void 0),c.indexOf("text")===-1&&(e.text=void 0),c.indexOf("name")===-1&&(e.name=void 0)),e}function Xae(e,t,r){var i=r.container,n=r.fullLayout,a=n._size,o=r.event,s=!!t.hLinePoint,l=!!t.vLinePoint,u,f;if(i.selectAll(".spikeline").remove(),!!(l||s)){var c=Qf.combine(n.plot_bgcolor,n.paper_bgcolor);if(s){var h=t.hLinePoint,v,d;u=h&&h.xa,f=h&&h.ya;var _=f.spikesnap;_==="cursor"?(v=o.pointerX,d=o.pointerY):(v=u._offset+h.x,d=f._offset+h.y);var T=Gae.readability(h.color,c)<1.5?Qf.contrast(c):h.color,p=f.spikemode,M=f.spikethickness,b=f.spikecolor||T,w=dm.getPxPosition(e,f),k,x;if(p.indexOf("toaxis")!==-1||p.indexOf("across")!==-1){if(p.indexOf("toaxis")!==-1&&(k=w,x=v),p.indexOf("across")!==-1){var E=f._counterDomainMin,S=f._counterDomainMax;f.anchor==="free"&&(E=Math.min(E,f.position),S=Math.max(S,f.position)),k=a.l+E*a.w,x=a.l+S*a.w}i.insert("line",":first-child").attr({x1:k,x2:x,y1:d,y2:d,"stroke-width":M,stroke:b,"stroke-dasharray":U0.dashStyle(f.spikedash,M)}).classed("spikeline",!0).classed("crisp",!0),i.insert("line",":first-child").attr({x1:k,x2:x,y1:d,y2:d,"stroke-width":M+2,stroke:c}).classed("spikeline",!0).classed("crisp",!0)}p.indexOf("marker")!==-1&&i.insert("circle",":first-child").attr({cx:w+(f.side!=="right"?M:-M),cy:d,r:M,fill:b}).classed("spikeline",!0)}if(l){var g=t.vLinePoint,C,A;u=g&&g.xa,f=g&&g.ya;var P=u.spikesnap;P==="cursor"?(C=o.pointerX,A=o.pointerY):(C=u._offset+g.x,A=f._offset+g.y);var D=Gae.readability(g.color,c)<1.5?Qf.contrast(c):g.color,z=u.spikemode,O=u.spikethickness,V=u.spikecolor||D,B=dm.getPxPosition(e,u),F,N;if(z.indexOf("toaxis")!==-1||z.indexOf("across")!==-1){if(z.indexOf("toaxis")!==-1&&(F=B,N=A),z.indexOf("across")!==-1){var Z=u._counterDomainMin,J=u._counterDomainMax;u.anchor==="free"&&(Z=Math.min(Z,u.position),J=Math.max(J,u.position)),F=a.t+(1-J)*a.h,N=a.t+(1-Z)*a.h}i.insert("line",":first-child").attr({x1:C,x2:C,y1:F,y2:N,"stroke-width":O,stroke:V,"stroke-dasharray":U0.dashStyle(u.spikedash,O)}).classed("spikeline",!0).classed("crisp",!0),i.insert("line",":first-child").attr({x1:C,x2:C,y1:F,y2:N,"stroke-width":O+2,stroke:c}).classed("spikeline",!0).classed("crisp",!0)}z.indexOf("marker")!==-1&&i.insert("circle",":first-child").attr({cx:C,cy:B-(u.side!=="top"?O:-O),r:O,fill:V}).classed("spikeline",!0)}}}function kot(e,t,r){if(!r||r.length!==e._hoverdata.length)return!0;for(var i=r.length-1;i>=0;i--){var n=r[i],a=e._hoverdata[i];if(n.curveNumber!==a.curveNumber||String(n.pointNumber)!==String(a.pointNumber)||String(n.pointNumbers)!==String(a.pointNumbers))return!0}return!1}function Zae(e,t){return!t||t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint}function jae(e,t){return np.plainText(e||"",{len:t,allowedTags:["br","sub","sup","b","i","em"]})}function Cot(e,t){for(var r=t.charAt(0),i=[],n=[],a=[],o=0;o<e.length;o++){var s=e[o];k2.traceIs(s.trace,"bar-like")||k2.traceIs(s.trace,"box-violin")?a.push(s):s.trace[r+"period"]?n.push(s):i.push(s)}return i.concat(n).concat(a)}function Kae(e,t,r){var i=t[e+"a"],n=t[e+"Val"],a=t.cd[0];if(i.type==="category"||i.type==="multicategory")n=i._categoriesMap[n];else if(i.type==="date"){var o=t.trace[e+"periodalignment"];if(o){var s=t.cd[t.index],l=s[e+"Start"];l===void 0&&(l=s[e]);var u=s[e+"End"];u===void 0&&(u=s[e]);var f=u-l;o==="end"?n+=f:o==="middle"&&(n+=f/2)}n=i.d2c(n)}return a&&a.t&&a.t.posLetter===i._id&&(r.boxmode==="group"||r.violinmode==="group")&&(n+=a.t.dPos),n}function roe(e){return e.offsetTop+e.clientTop}function noe(e){return e.offsetLeft+e.clientLeft}function E2(e,t){var r=e._fullLayout,i=t.getBoundingClientRect(),n=i.left,a=i.top,o=n+i.width,s=a+i.height,l=Fu.apply3DTransform(r._invTransform)(n,a),u=Fu.apply3DTransform(r._invTransform)(o,s),f=l[0],c=l[1],h=u[0],v=u[1];return{x:f,y:c,width:h-f,height:v-c,top:Math.min(c,v),left:Math.min(f,h),right:Math.max(f,h),bottom:Math.max(c,v)}}});var OA=ne((Htr,ioe)=>{"use strict";var Lot=Wt(),Pot=_i(),Rot=td().isUnifiedHover;ioe.exports=function(t,r,i,n){n=n||{};var a=r.legend;function o(s){n.font[s]||(n.font[s]=a?r.legend.font[s]:r.font[s])}r&&Rot(r.hovermode)&&(n.font||(n.font={}),o("size"),o("family"),o("color"),a?(n.bgcolor||(n.bgcolor=Pot.combine(r.legend.bgcolor,r.paper_bgcolor)),n.bordercolor||(n.bordercolor=r.legend.bordercolor)):n.bgcolor||(n.bgcolor=r.paper_bgcolor)),i("hoverlabel.bgcolor",n.bgcolor),i("hoverlabel.bordercolor",n.bordercolor),i("hoverlabel.namelength",n.namelength),Lot.coerceFont(i,"hoverlabel.font",n.font),i("hoverlabel.align",n.align)}});var ooe=ne((Gtr,aoe)=>{"use strict";var Dot=Wt(),Iot=OA(),Fot=Pg();aoe.exports=function(t,r){function i(n,a){return Dot.coerce(t,r,Fot,n,a)}Iot(t,r,i)}});var uoe=ne((Ytr,loe)=>{"use strict";var soe=Wt(),qot=jb(),zot=OA();loe.exports=function(t,r,i,n){function a(s,l){return soe.coerce(t,r,qot,s,l)}var o=soe.extendFlat({},n.hoverlabel);r.hovertemplate&&(o.namelength=-1),zot(t,r,a,o)}});var FO=ne((Wtr,foe)=>{"use strict";var Oot=Wt(),Bot=Pg();foe.exports=function(t,r){function i(n,a){return r[n]!==void 0?r[n]:Oot.coerce(t,r,Bot,n,a)}return i("clickmode"),i("hovermode")}});var voe=ne((Xtr,hoe)=>{"use strict";var coe=Wt(),Not=Pg(),Uot=FO(),Vot=OA();hoe.exports=function(t,r){function i(u,f){return coe.coerce(t,r,Not,u,f)}var n=Uot(t,r);n&&(i("hoverdistance"),i("spikedistance"));var a=i("dragmode");a==="select"&&i("selectdirection");var o=r._has("mapbox"),s=r._has("geo"),l=r._basePlotModules.length;r.dragmode==="zoom"&&((o||s)&&l===1||o&&s&&l===2)&&(r.dragmode="pan"),Vot(t,r,i),coe.coerceFont(i,"hoverlabel.grouptitlefont",r.hoverlabel.font)}});var goe=ne((Ztr,poe)=>{"use strict";var qO=Wt(),doe=wi();poe.exports=function(t){var r=t.calcdata,i=t._fullLayout;function n(u){return function(f){return qO.coerceHoverinfo({hoverinfo:f},{_module:u._module},i)}}for(var a=0;a<r.length;a++){var o=r[a],s=o[0].trace;if(!doe.traceIs(s,"pie-like")){var l=doe.traceIs(s,"2dMap")?Hot:qO.fillArray;l(s.hoverinfo,o,"hi",n(s)),s.hovertemplate&&l(s.hovertemplate,o,"ht"),s.hoverlabel&&(l(s.hoverlabel.bgcolor,o,"hbg"),l(s.hoverlabel.bordercolor,o,"hbc"),l(s.hoverlabel.font.size,o,"hts"),l(s.hoverlabel.font.color,o,"htc"),l(s.hoverlabel.font.family,o,"htf"),l(s.hoverlabel.namelength,o,"hnl"),l(s.hoverlabel.align,o,"hta"))}}};function Hot(e,t,r,i){i=i||qO.identity,Array.isArray(e)&&(t[0][r]=i(e))}});var moe=ne((jtr,yoe)=>{"use strict";var Got=wi(),Yot=IO().hover;yoe.exports=function(t,r,i){var n=Got.getComponentMethod("annotations","onClick")(t,t._hoverdata);i!==void 0&&Yot(t,r,i,!0);function a(){t.emit("plotly_click",{points:t._hoverdata,event:r})}t._hoverdata&&r&&r.target&&(n&&n.then?n.then(a):a(),r.stopImmediatePropagation&&r.stopImmediatePropagation())}});var Ol=ne((Ktr,boe)=>{"use strict";var Wot=Ai(),n4=Wt(),Xot=Hh(),BA=td(),xoe=Pg(),_oe=IO();boe.exports={moduleType:"component",name:"fx",constants:aA(),schema:{layout:xoe},attributes:jb(),layoutAttributes:xoe,supplyLayoutGlobalDefaults:ooe(),supplyDefaults:uoe(),supplyLayoutDefaults:voe(),calc:goe(),getDistanceFunction:BA.getDistanceFunction,getClosest:BA.getClosest,inbox:BA.inbox,quadrature:BA.quadrature,appendArrayPointValue:BA.appendArrayPointValue,castHoverOption:jot,castHoverinfo:Kot,hover:_oe.hover,unhover:Xot.unhover,loneHover:_oe.loneHover,loneUnhover:Zot,click:moe()};function Zot(e){var t=n4.isD3Selection(e)?e:Wot.select(e);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()}function jot(e,t,r){return n4.castOption(e,t,"hoverlabel."+r)}function Kot(e,t,r){function i(n){return n4.coerceHoverinfo({hoverinfo:n},{_module:e._module},t)}return n4.castOption(e,r,"hoverinfo",i)}});var r0=ne(Ug=>{"use strict";Ug.selectMode=function(e){return e==="lasso"||e==="select"};Ug.drawMode=function(e){return e==="drawclosedpath"||e==="drawopenpath"||e==="drawline"||e==="drawrect"||e==="drawcircle"};Ug.openMode=function(e){return e==="drawline"||e==="drawopenpath"};Ug.rectMode=function(e){return e==="select"||e==="drawline"||e==="drawrect"||e==="drawcircle"};Ug.freeMode=function(e){return e==="lasso"||e==="drawclosedpath"||e==="drawopenpath"};Ug.selectingOrDrawing=function(e){return Ug.freeMode(e)||Ug.rectMode(e)}});var NA=ne((Qtr,woe)=>{"use strict";woe.exports=function(t){var r=t._fullLayout;r._glcanvas&&r._glcanvas.size()&&r._glcanvas.each(function(i){i.regl&&i.regl.clear({color:!0,depth:!0})})}});var i4=ne(($tr,Toe)=>{"use strict";Toe.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}});var o4=ne((err,Aoe)=>{"use strict";var a4=32;Aoe.exports={CIRCLE_SIDES:a4,i000:0,i090:a4/4,i180:a4/2,i270:a4/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}});var s4=ne((trr,Soe)=>{"use strict";var Jot=Wt().strTranslate;function Moe(e,t){switch(e.type){case"log":return e.p2d(t);case"date":return e.p2r(t,0,e.calendar);default:return e.p2r(t)}}function Qot(e,t){switch(e.type){case"log":return e.d2p(t);case"date":return e.r2p(t,0,e.calendar);default:return e.r2p(t)}}function $ot(e){var t=e._id.charAt(0)==="y"?1:0;return function(r){return Moe(e,r[t])}}function est(e){return Jot(e.xaxis._offset,e.yaxis._offset)}Soe.exports={p2r:Moe,r2p:Qot,axValue:$ot,getTransform:est}});var pm=ne(Vg=>{"use strict";var tst=kA(),Coe=o4(),C2=Coe.CIRCLE_SIDES,zO=Coe.SQRT2,Loe=s4(),Eoe=Loe.p2r,koe=Loe.r2p,rst=[0,3,4,5,6,1,2],nst=[0,3,4,1,2];Vg.writePaths=function(e){var t=e.length;if(!t)return"M0,0Z";for(var r="",i=0;i<t;i++)for(var n=e[i].length,a=0;a<n;a++){var o=e[i][a][0];if(o==="Z")r+="Z";else for(var s=e[i][a].length,l=0;l<s;l++){var u=l;o==="Q"||o==="S"?u=nst[l]:o==="C"&&(u=rst[l]),r+=e[i][a][u],l>0&&l<s-1&&(r+=",")}}return r};Vg.readPaths=function(e,t,r,i){var n=tst(e),a=[],o=-1,s=function(){o++,a[o]=[]},l,u=0,f=0,c,h,v=function(){c=u,h=f};v();for(var d=0;d<n.length;d++){var _=[],T,p,M,b,w=n[d][0],k=w;switch(w){case"M":s(),u=+n[d][1],f=+n[d][2],_.push([k,u,f]),v();break;case"Q":case"S":T=+n[d][1],M=+n[d][2],u=+n[d][3],f=+n[d][4],_.push([k,u,f,T,M]);break;case"C":T=+n[d][1],M=+n[d][2],p=+n[d][3],b=+n[d][4],u=+n[d][5],f=+n[d][6],_.push([k,u,f,T,M,p,b]);break;case"T":case"L":u=+n[d][1],f=+n[d][2],_.push([k,u,f]);break;case"H":k="L",u=+n[d][1],_.push([k,u,f]);break;case"V":k="L",f=+n[d][1],_.push([k,u,f]);break;case"A":k="L";var x=+n[d][1],E=+n[d][2];+n[d][4]||(x=-x,E=-E);var S=u-x,g=f;for(l=1;l<=C2/2;l++){var C=2*Math.PI*l/C2;_.push([k,S+x*Math.cos(C),g+E*Math.sin(C)])}break;case"Z":(u!==c||f!==h)&&(u=c,f=h,_.push([k,u,f]));break}for(var A=(r||{}).domain,P=t._fullLayout._size,D=r&&r.xsizemode==="pixel",z=r&&r.ysizemode==="pixel",O=i===!1,V=0;V<_.length;V++){for(l=0;l+2<7;l+=2){var B=_[V][l+1],F=_[V][l+2];B===void 0||F===void 0||(u=B,f=F,r&&(r.xaxis&&r.xaxis.p2r?(O&&(B-=r.xaxis._offset),D?B=koe(r.xaxis,r.xanchor)+B:B=Eoe(r.xaxis,B)):(O&&(B-=P.l),A?B=A.x[0]+B/P.w:B=B/P.w),r.yaxis&&r.yaxis.p2r?(O&&(F-=r.yaxis._offset),z?F=koe(r.yaxis,r.yanchor)-F:F=Eoe(r.yaxis,F)):(O&&(F-=P.t),A?F=A.y[1]-F/P.h:F=1-F/P.h)),_[V][l+1]=B,_[V][l+2]=F)}a[o].push(_[V].slice())}}return a};function UA(e,t){return Math.abs(e-t)<=1e-6}function l4(e,t){var r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+i*i)}Vg.pointsOnRectangle=function(e){var t=e.length;if(t!==5)return!1;for(var r=1;r<3;r++){var i=e[0][r]-e[1][r],n=e[3][r]-e[2][r];if(!UA(i,n))return!1;var a=e[0][r]-e[3][r],o=e[1][r]-e[2][r];if(!UA(a,o))return!1}return!UA(e[0][1],e[1][1])&&!UA(e[0][1],e[3][1])?!1:!!(l4(e[0],e[1])*l4(e[0],e[3]))};Vg.pointsOnEllipse=function(e){var t=e.length;if(t!==C2+1)return!1;t=C2;for(var r=0;r<t;r++){var i=(t*2-r)%t,n=(t/2+i)%t,a=(t/2+r)%t;if(!UA(l4(e[r],e[a]),l4(e[i],e[n])))return!1}return!0};Vg.handleEllipse=function(e,t,r){if(!e)return[t,r];var i=Vg.ellipseOver({x0:t[0],y0:t[1],x1:r[0],y1:r[1]}),n=(i.x1+i.x0)/2,a=(i.y1+i.y0)/2,o=(i.x1-i.x0)/2,s=(i.y1-i.y0)/2;o||(o=s=s/zO),s||(s=o=o/zO);for(var l=[],u=0;u<C2;u++){var f=u*2*Math.PI/C2;l.push([n+o*Math.cos(f),a+s*Math.sin(f)])}return l};Vg.ellipseOver=function(e){var t=e.x0,r=e.y0,i=e.x1,n=e.y1,a=i-t,o=n-r;t-=a,r-=o;var s=(t+i)/2,l=(r+n)/2,u=zO;return a*=u,o*=u,{x0:s-a,y0:l-o,x1:s+a,y1:l+o}};Vg.fixDatesForPaths=function(e,t,r){var i=t.type==="date",n=r.type==="date";if(!i&&!n)return e;for(var a=0;a<e.length;a++)for(var o=0;o<e[a].length;o++)for(var s=0;s+2<e[a][o].length;s+=2)i&&(e[a][o][s+1]=e[a][o][s+1].replace(" ","_")),n&&(e[a][o][s+2]=e[a][o][s+2].replace(" ","_"));return e}});var c4=ne((nrr,Ooe)=>{"use strict";var Foe=r0(),ist=Foe.drawMode,ast=Foe.openMode,L2=o4(),Poe=L2.i000,Roe=L2.i090,Doe=L2.i180,Ioe=L2.i270,ost=L2.cos45,sst=L2.sin45,qoe=s4(),u4=qoe.p2r,gm=qoe.r2p,lst=nm(),ust=lst.clearOutline,f4=pm(),fst=f4.readPaths,cst=f4.writePaths,hst=f4.ellipseOver,vst=f4.fixDatesForPaths;function dst(e,t){if(e.length){var r=e[0][0];if(r){var i=t.gd,n=t.isActiveShape,a=t.dragmode,o=(i.layout||{}).shapes||[];if(!ist(a)&&n!==void 0){var s=i._fullLayout._activeShapeIndex;if(s<o.length)switch(i._fullLayout.shapes[s].type){case"rect":a="drawrect";break;case"circle":a="drawcircle";break;case"line":a="drawline";break;case"path":var l=o[s].path||"";l[l.length-1]==="Z"?a="drawclosedpath":a="drawopenpath";break}}var u=zoe(e,t,a);ust(i);for(var f=t.editHelpers,c=(f||{}).modifyItem,h=[],v=0;v<o.length;v++){var d=i._fullLayout.shapes[v];if(h[v]=d._input,n!==void 0&&v===i._fullLayout._activeShapeIndex){var _=u;switch(d.type){case"line":case"rect":case"circle":c("x0",_.x0),c("x1",_.x1),c("y0",_.y0),c("y1",_.y1);break;case"path":c("path",_.path);break}}}return n===void 0?(h.push(u),h):f?f.getUpdateObj():{}}}}function zoe(e,t,r){var i=e[0][0],n=t.gd,a=i.getAttribute("d"),o=n._fullLayout.newshape,s=t.plotinfo,l=t.isActiveShape,u=s.xaxis,f=s.yaxis,c=!!s.domain||!s.xaxis,h=!!s.domain||!s.yaxis,v=ast(r),d=fst(a,n,s,l),_={editable:!0,visible:o.visible,name:o.name,showlegend:o.showlegend,legend:o.legend,legendwidth:o.legendwidth,legendgroup:o.legendgroup,legendgrouptitle:{text:o.legendgrouptitle.text,font:o.legendgrouptitle.font},legendrank:o.legendrank,label:o.label,xref:c?"paper":u._id,yref:h?"paper":f._id,layer:o.layer,opacity:o.opacity,line:{color:o.line.color,width:o.line.width,dash:o.line.dash}};v||(_.fillcolor=o.fillcolor,_.fillrule=o.fillrule);var T;if(d.length===1&&(T=d[0]),T&&T.length===5&&r==="drawrect")_.type="rect",_.x0=T[0][1],_.y0=T[0][2],_.x1=T[2][1],_.y1=T[2][2];else if(T&&r==="drawline")_.type="line",_.x0=T[0][1],_.y0=T[0][2],_.x1=T[1][1],_.y1=T[1][2];else if(T&&r==="drawcircle"){_.type="circle";var p=T[Poe][1],M=T[Roe][1],b=T[Doe][1],w=T[Ioe][1],k=T[Poe][2],x=T[Roe][2],E=T[Doe][2],S=T[Ioe][2],g=s.xaxis&&(s.xaxis.type==="date"||s.xaxis.type==="log"),C=s.yaxis&&(s.yaxis.type==="date"||s.yaxis.type==="log");g&&(p=gm(s.xaxis,p),M=gm(s.xaxis,M),b=gm(s.xaxis,b),w=gm(s.xaxis,w)),C&&(k=gm(s.yaxis,k),x=gm(s.yaxis,x),E=gm(s.yaxis,E),S=gm(s.yaxis,S));var A=(M+w)/2,P=(k+E)/2,D=(w-M+b-p)/2,z=(S-x+E-k)/2,O=hst({x0:A,y0:P,x1:A+D*ost,y1:P+z*sst});g&&(O.x0=u4(s.xaxis,O.x0),O.x1=u4(s.xaxis,O.x1)),C&&(O.y0=u4(s.yaxis,O.y0),O.y1=u4(s.yaxis,O.y1)),_.x0=O.x0,_.y0=O.y0,_.x1=O.x1,_.y1=O.y1}else _.type="path",u&&f&&vst(d,u,f),_.path=cst(d),T=null;return _}Ooe.exports={newShapes:dst,createShapeObj:zoe}});var BO=ne((irr,Boe)=>{"use strict";var pst=r0(),gst=pst.selectMode,yst=nm(),mst=yst.clearOutline,OO=pm(),xst=OO.readPaths,_st=OO.writePaths,bst=OO.fixDatesForPaths;Boe.exports=function(t,r){if(t.length){var i=t[0][0];if(i){var n=i.getAttribute("d"),a=r.gd,o=a._fullLayout.newselection,s=r.plotinfo,l=s.xaxis,u=s.yaxis,f=r.isActiveSelection,c=r.dragmode,h=(a.layout||{}).selections||[];if(!gst(c)&&f!==void 0){var v=a._fullLayout._activeSelectionIndex;if(v<h.length)switch(a._fullLayout.selections[v].type){case"rect":c="select";break;case"path":c="lasso";break}}var d=xst(n,a,s,f),_={xref:l._id,yref:u._id,opacity:o.opacity,line:{color:o.line.color,width:o.line.width,dash:o.line.dash}},T;d.length===1&&(T=d[0]),T&&T.length===5&&c==="select"?(_.type="rect",_.x0=T[0][1],_.y0=T[0][2],_.x1=T[2][1],_.y1=T[2][2]):(_.type="path",l&&u&&bst(d,l,u),_.path=_st(d),T=null),mst(a);for(var p=r.editHelpers,M=(p||{}).modifyItem,b=[],w=0;w<h.length;w++){var k=a._fullLayout.selections[w];if(!k){b[w]=k;continue}if(b[w]=k._input,f!==void 0&&w===a._fullLayout._activeSelectionIndex){var x=_;switch(k.type){case"rect":M("x0",x.x0),M("x1",x.x1),M("y0",x.y0),M("y1",x.y1);break;case"path":M("path",x.path);break}}}return f===void 0?(b.push(_),b):p?p.getUpdateObj():{}}}}});var VA=ne((arr,Noe)=>{"use strict";Noe.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}});var ym=ne(pc=>{"use strict";var Ex=VA(),Uoe=Wt(),h4=Xi();pc.rangeToShapePosition=function(e){return e.type==="log"?e.r2d:function(t){return t}};pc.shapePositionToRange=function(e){return e.type==="log"?e.d2r:function(t){return t}};pc.decodeDate=function(e){return function(t){return t.replace&&(t=t.replace("_"," ")),e(t)}};pc.encodeDate=function(e){return function(t){return e(t).replace(" ","_")}};pc.extractPathCoords=function(e,t,r){var i=[],n=e.match(Ex.segmentRE);return n.forEach(function(a){var o=t[a.charAt(0)].drawn;if(o!==void 0){var s=a.substr(1).match(Ex.paramRE);if(!(!s||s.length<o)){var l=s[o],u=r?l:Uoe.cleanNumber(l);i.push(u)}}}),i};pc.getDataToPixel=function(e,t,r,i){var n=e._fullLayout._size,a;if(t)if(i==="domain")a=function(s){return t._length*(r?1-s:s)+t._offset};else{var o=pc.shapePositionToRange(t);a=function(s){return t._offset+t.r2p(o(s,!0))},t.type==="date"&&(a=pc.decodeDate(a))}else r?a=function(s){return n.t+n.h*(1-s)}:a=function(s){return n.l+n.w*s};return a};pc.getPixelToData=function(e,t,r,i){var n=e._fullLayout._size,a;if(t)if(i==="domain")a=function(s){var l=(s-t._offset)/t._length;return r?1-l:l};else{var o=pc.rangeToShapePosition(t);a=function(s){return o(t.p2r(s-t._offset))}}else r?a=function(s){return 1-(s-n.t)/n.h}:a=function(s){return(s-n.l)/n.w};return a};pc.roundPositionForSharpStrokeRendering=function(e,t){var r=Math.round(t%2)===1,i=Math.round(e);return r?i+.5:i};pc.makeShapesOptionsAndPlotinfo=function(e,t){var r=e._fullLayout.shapes[t]||{},i=e._fullLayout._plots[r.xref+r.yref],n=!!i;return n?i._hadPlotinfo=!0:(i={},r.xref&&r.xref!=="paper"&&(i.xaxis=e._fullLayout[r.xref+"axis"]),r.yref&&r.yref!=="paper"&&(i.yaxis=e._fullLayout[r.yref+"axis"])),i.xsizemode=r.xsizemode,i.ysizemode=r.ysizemode,i.xanchor=r.xanchor,i.yanchor=r.yanchor,{options:r,plotinfo:i}};pc.makeSelectionsOptionsAndPlotinfo=function(e,t){var r=e._fullLayout.selections[t]||{},i=e._fullLayout._plots[r.xref+r.yref],n=!!i;return n?i._hadPlotinfo=!0:(i={},r.xref&&(i.xaxis=e._fullLayout[r.xref+"axis"]),r.yref&&(i.yaxis=e._fullLayout[r.yref+"axis"])),{options:r,plotinfo:i}};pc.getPathString=function(e,t){var r=t.type,i=h4.getRefType(t.xref),n=h4.getRefType(t.yref),a=h4.getFromId(e,t.xref),o=h4.getFromId(e,t.yref),s=e._fullLayout._size,l,u,f,c,h,v,d,_;if(a?i==="domain"?u=function(g){return a._offset+a._length*g}:(l=pc.shapePositionToRange(a),u=function(g){return a._offset+a.r2p(l(g,!0))}):u=function(g){return s.l+s.w*g},o?n==="domain"?c=function(g){return o._offset+o._length*(1-g)}:(f=pc.shapePositionToRange(o),c=function(g){return o._offset+o.r2p(f(g,!0))}):c=function(g){return s.t+s.h*(1-g)},r==="path")return a&&a.type==="date"&&(u=pc.decodeDate(u)),o&&o.type==="date"&&(c=pc.decodeDate(c)),wst(t,u,c);if(t.xsizemode==="pixel"){var T=u(t.xanchor);h=T+t.x0,v=T+t.x1}else h=u(t.x0),v=u(t.x1);if(t.ysizemode==="pixel"){var p=c(t.yanchor);d=p-t.y0,_=p-t.y1}else d=c(t.y0),_=c(t.y1);if(r==="line")return"M"+h+","+d+"L"+v+","+_;if(r==="rect")return"M"+h+","+d+"H"+v+"V"+_+"H"+h+"Z";var M=(h+v)/2,b=(d+_)/2,w=Math.abs(M-h),k=Math.abs(b-d),x="A"+w+","+k,E=M+w+","+b,S=M+","+(b-k);return"M"+E+x+" 0 1,1 "+S+x+" 0 0,1 "+E+"Z"};function wst(e,t,r){var i=e.path,n=e.xsizemode,a=e.ysizemode,o=e.xanchor,s=e.yanchor;return i.replace(Ex.segmentRE,function(l){var u=0,f=l.charAt(0),c=Ex.paramIsX[f],h=Ex.paramIsY[f],v=Ex.numParams[f],d=l.substr(1).replace(Ex.paramRE,function(_){return c[u]?n==="pixel"?_=t(o)+Number(_):_=t(_):h[u]&&(a==="pixel"?_=r(s)-Number(_):_=r(_)),u++,u>v&&(_="X"),_});return u>v&&(d=d.replace(/[\s,]*X.*/,""),Uoe.log("Ignoring extra params in segment "+l)),f+d})}});var UO=ne((srr,Yoe)=>{"use strict";var Tst=Wt(),P2=Xi(),Voe=Es(),Hoe=aa(),Ast=pm().readPaths,NO=ym(),Mst=NO.getPathString,Goe=Vk(),Sst=Tf().FROM_TL;Yoe.exports=function(t,r,i,n){if(n.selectAll(".shape-label").remove(),!!(i.label.text||i.label.texttemplate)){var a;if(i.label.texttemplate){var o={};if(i.type!=="path"){var s=P2.getFromId(t,i.xref),l=P2.getFromId(t,i.yref);for(var u in Goe){var f=Goe[u](i,s,l);f!==void 0&&(o[u]=f)}}a=Tst.texttemplateStringForShapes(i.label.texttemplate,{},t._fullLayout._d3locale,o)}else a=i.label.text;var c={"data-index":r},h=i.label.font,v={"data-notex":1},d=n.append("g").attr(c).classed("shape-label",!0),_=d.append("text").attr(v).classed("shape-label-text",!0).text(a),T,p,M,b;if(i.path){var w=Mst(t,i),k=Ast(w,t);T=1/0,M=1/0,p=-1/0,b=-1/0;for(var x=0;x<k.length;x++)for(var E=0;E<k[x].length;E++)for(var S=k[x][E],g=1;g<S.length;g+=2){var C=S[g],A=S[g+1];T=Math.min(T,C),p=Math.max(p,C),M=Math.min(M,A),b=Math.max(b,A)}}else{var P=P2.getFromId(t,i.xref),D=P2.getRefType(i.xref),z=P2.getFromId(t,i.yref),O=P2.getRefType(i.yref),V=NO.getDataToPixel(t,P,!1,D),B=NO.getDataToPixel(t,z,!0,O);T=V(i.x0),p=V(i.x1),M=B(i.y0),b=B(i.y1)}var F=i.label.textangle;F==="auto"&&(i.type==="line"?F=Est(T,M,p,b):F=0),_.call(function(fe){return fe.call(Hoe.font,h).attr({}),Voe.convertToTspans(fe,t),fe});var N=Hoe.bBox(_.node()),Z=kst(T,M,p,b,i,F,N),J=Z.textx,re=Z.texty,ue=Z.xanchor;_.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[ue],y:re,x:J,transform:"rotate("+F+","+J+","+re+")"}).call(Voe.positionText,J,re)}};function Est(e,t,r,i){var n,a;return a=Math.abs(r-e),r>=e?n=t-i:n=i-t,-180/Math.PI*Math.atan2(n,a)}function kst(e,t,r,i,n,a,o){var s=n.label.textposition,l=n.label.textangle,u=n.label.padding,f=n.type,c=Math.PI/180*a,h=Math.sin(c),v=Math.cos(c),d=n.label.xanchor,_=n.label.yanchor,T,p,M,b;if(f==="line"){s==="start"?(T=e,p=t):s==="end"?(T=r,p=i):(T=(e+r)/2,p=(t+i)/2),d==="auto"&&(s==="start"?l==="auto"?r>e?d="left":r<e?d="right":d="center":r>e?d="right":r<e?d="left":d="center":s==="end"?l==="auto"?r>e?d="right":r<e?d="left":d="center":r>e?d="left":r<e?d="right":d="center":d="center");var w={left:1,center:0,right:-1},k={bottom:-1,middle:0,top:1};if(l==="auto"){var x=k[_];M=-u*h*x,b=u*v*x}else{var E=w[d],S=k[_];M=u*E,b=u*S}T=T+M,p=p+b}else M=u+3,s.indexOf("right")!==-1?(T=Math.max(e,r)-M,d==="auto"&&(d="right")):s.indexOf("left")!==-1?(T=Math.min(e,r)+M,d==="auto"&&(d="left")):(T=(e+r)/2,d==="auto"&&(d="center")),s.indexOf("top")!==-1?p=Math.min(t,i):s.indexOf("bottom")!==-1?p=Math.max(t,i):p=(t+i)/2,b=u,_==="bottom"?p=p-b:_==="top"&&(p=p+b);var g=Sst[_],C=n.label.font.size,A=o.height,P=(A*g-C)*h,D=-(A*g-C)*v;return{textx:T+P,texty:p+D,xanchor:d}}});var p4=ne((lrr,$oe)=>{"use strict";var Cst=Wt(),Lst=Cst.strTranslate,Woe=Hh(),joe=r0(),Pst=joe.drawMode,Koe=joe.selectMode,Joe=wi(),Xoe=_i(),d4=o4(),Rst=d4.i000,Dst=d4.i090,Ist=d4.i180,Fst=d4.i270,qst=nm(),Qoe=qst.clearOutlineControllers,HO=pm(),v4=HO.pointsOnRectangle,VO=HO.pointsOnEllipse,zst=HO.writePaths,Ost=c4().newShapes,Bst=c4().createShapeObj,Nst=BO(),Ust=UO();$oe.exports=function e(t,r,i,n){n||(n=0);var a=i.gd;function o(){e(t,r,i,n++),(VO(t[0])||i.hasText)&&s({redrawing:!0})}function s(B){var F={};i.isActiveShape!==void 0&&(i.isActiveShape=!1,F=Ost(r,i)),i.isActiveSelection!==void 0&&(i.isActiveSelection=!1,F=Nst(r,i),a._fullLayout._reselect=!0),Object.keys(F).length&&Joe.call((B||{}).redrawing?"relayout":"_guiRelayout",a,F)}var l=a._fullLayout,u=l._zoomlayer,f=i.dragmode,c=Pst(f),h=Koe(f);(c||h)&&(a._fullLayout._outlining=!0),Qoe(a),r.attr("d",zst(t));var v,d,_,T,p;if(!n&&(i.isActiveShape||i.isActiveSelection)){p=Vst([],t);var M=u.append("g").attr("class","outline-controllers");C(M),V()}if(c&&i.hasText){var b=u.select(".label-temp"),w=Bst(r,i,i.dragmode);Ust(a,"label-temp",w,b)}function k(B){_=+B.srcElement.getAttribute("data-i"),T=+B.srcElement.getAttribute("data-j"),v[_][T].moveFn=x}function x(B,F){if(t.length){var N=p[_][T][1],Z=p[_][T][2],J=t[_],re=J.length;if(v4(J)){var ue=B,fe=F;if(i.isActiveSelection){var K=Zoe(J,T);K[1]===J[T][1]?fe=0:ue=0}for(var X=0;X<re;X++)if(X!==T){var ae=J[X];ae[1]===J[T][1]&&(ae[1]=N+ue),ae[2]===J[T][2]&&(ae[2]=Z+fe)}if(J[T][1]=N+ue,J[T][2]=Z+fe,!v4(J))for(var oe=0;oe<re;oe++)for(var me=0;me<J[oe].length;me++)J[oe][me]=p[_][oe][me]}else J[T][1]=N+B,J[T][2]=Z+F;o()}}function E(){s()}function S(){if(t.length&&t[_]&&t[_].length){for(var B=[],F=0;F<t[_].length;F++)F!==T&&B.push(t[_][F]);B.length>1&&!(B.length===2&&B[1][0]==="Z")&&(T===0&&(B[0][0]="M"),t[_]=B,o(),s())}}function g(B,F){if(B===2){_=+F.srcElement.getAttribute("data-i"),T=+F.srcElement.getAttribute("data-j");var N=t[_];!v4(N)&&!VO(N)&&S()}}function C(B){v=[];for(var F=0;F<t.length;F++){var N=t[F],Z=v4(N),J=!Z&&VO(N);v[F]=[];for(var re=N.length,ue=0;ue<re;ue++)if(N[ue][0]!=="Z"&&!(J&&ue!==Rst&&ue!==Dst&&ue!==Ist&&ue!==Fst)){var fe=Z&&i.isActiveSelection,K;fe&&(K=Zoe(N,ue));var X=N[ue][1],ae=N[ue][2],oe=B.append(fe?"rect":"circle").attr("data-i",F).attr("data-j",ue).style({fill:Xoe.background,stroke:Xoe.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(fe){var me=K[1]-X,xe=K[2]-ae,ce=xe?5:Math.max(Math.min(25,Math.abs(me)-5),5),ie=me?5:Math.max(Math.min(25,Math.abs(xe)-5),5);oe.classed(xe?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",ce).attr("height",ie).attr("x",X-ce/2).attr("y",ae-ie/2).attr("transform",Lst(me/2,xe/2))}else oe.classed("cursor-grab",!0).attr("r",5).attr("cx",X).attr("cy",ae);v[F][ue]={element:oe.node(),gd:a,prepFn:k,doneFn:E,clickFn:g},Woe.init(v[F][ue])}}}function A(B,F){if(t.length)for(var N=0;N<t.length;N++)for(var Z=0;Z<t[N].length;Z++)for(var J=0;J+2<t[N][Z].length;J+=2)t[N][Z][J+1]=p[N][Z][J+1]+B,t[N][Z][J+2]=p[N][Z][J+2]+F}function P(B,F){A(B,F),o()}function D(B){_=+B.srcElement.getAttribute("data-i"),_||(_=0),d[_].moveFn=P}function z(){s()}function O(B){B===2&&Hst(a)}function V(){if(d=[],!!t.length){var B=0;d[B]={element:r[0][0],gd:a,prepFn:D,doneFn:z,clickFn:O},Woe.init(d[B])}}};function Vst(e,t){for(var r=0;r<t.length;r++){var i=t[r];e[r]=[];for(var n=0;n<i.length;n++){e[r][n]=[];for(var a=0;a<i[n].length;a++)e[r][n][a]=i[n][a]}}return e}function Zoe(e,t){var r=e[t][1],i=e[t][2],n=e.length,a,o,s;return a=(t+1)%n,o=e[a][1],s=e[a][2],o===r&&s===i&&(a=(t+2)%n,o=e[a][1],s=e[a][2]),[a,o,s]}function Hst(e){if(Koe(e._fullLayout.dragmode)){Qoe(e);var t=e._fullLayout._activeSelectionIndex,r=(e.layout||{}).selections||[];if(t<r.length){for(var i=[],n=0;n<r.length;n++)n!==t&&i.push(r[n]);delete e._fullLayout._activeSelectionIndex;var a=e._fullLayout.selections[t];e._fullLayout._deselect={xref:a.xref,yref:a.yref},Joe.call("_guiRelayout",e,{selections:i})}}}});var x4=ne((urr,use)=>{"use strict";var Gst=Ai(),ase=wi(),ese=Wt(),R2=Xi(),Yst=pm().readPaths,Wst=p4(),y4=UO(),ose=nm().clearOutlineControllers,GO=_i(),WO=aa(),Xst=So().arrayEditor,tse=Hh(),rse=e0(),kx=VA(),id=ym(),YO=id.getPathString;use.exports={draw:XO,drawOne:sse,eraseActiveShape:Kst,drawLabel:y4};function XO(e){var t=e._fullLayout;t._shapeUpperLayer.selectAll("path").remove(),t._shapeLowerLayer.selectAll("path").remove(),t._shapeUpperLayer.selectAll("text").remove(),t._shapeLowerLayer.selectAll("text").remove();for(var r in t._plots){var i=t._plots[r].shapelayer;i&&(i.selectAll("path").remove(),i.selectAll("text").remove())}for(var n=0;n<t.shapes.length;n++)t.shapes[n].visible===!0&&sse(e,n)}function g4(e){return!!e._fullLayout._outlining}function m4(e){return!e._context.edits.shapePosition}function sse(e,t){e._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+t+'"]').remove();var r=id.makeShapesOptionsAndPlotinfo(e,t),i=r.options,n=r.plotinfo;if(!i._input||i.visible!==!0)return;if(i.layer!=="below")o(e._fullLayout._shapeUpperLayer);else if(i.xref==="paper"||i.yref==="paper")o(e._fullLayout._shapeLowerLayer);else if(n._hadPlotinfo){var a=n.mainplotinfo||n;o(a.shapelayer)}else o(e._fullLayout._shapeLowerLayer);function o(s){var l=YO(e,i),u={"data-index":t,"fill-rule":i.fillrule,d:l},f=i.opacity,c=i.fillcolor,h=i.line.width?i.line.color:"rgba(0,0,0,0)",v=i.line.width,d=i.line.dash;!v&&i.editable===!0&&(v=5,d="solid");var _=l[l.length-1]!=="Z",T=m4(e)&&i.editable&&e._fullLayout._activeShapeIndex===t;T&&(c=_?"rgba(0,0,0,0)":e._fullLayout.activeshape.fillcolor,f=e._fullLayout.activeshape.opacity);var p=s.append("g").classed("shape-group",!0).attr({"data-index":t}),M=p.append("path").attr(u).style("opacity",f).call(GO.stroke,h).call(GO.fill,c).call(WO.dashLine,d,v);lse(p,e,i),y4(e,t,i,p);var b;if((T||e._context.edits.shapePosition)&&(b=Xst(e.layout,"shapes",i)),T){M.style({cursor:"move"});var w={element:M.node(),plotinfo:n,gd:e,editHelpers:b,hasText:i.label.text||i.label.texttemplate,isActiveShape:!0},k=Yst(l,e);Wst(k,M,w)}else e._context.edits.shapePosition?Zst(e,M,i,t,s,b):i.editable===!0&&M.style("pointer-events",_||GO.opacity(c)*f<=.5?"stroke":"all");M.node().addEventListener("click",function(){return jst(e,M)})}}function lse(e,t,r){var i=(r.xref+r.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");WO.setClipUrl(e,i?"clip"+t._fullLayout._uid+i:null,t)}function Zst(e,t,r,i,n,a){var o=10,s=10,l=r.xsizemode==="pixel",u=r.ysizemode==="pixel",f=r.type==="line",c=r.type==="path",h=a.modifyItem,v,d,_,T,p,M,b,w,k,x,E,S,g,C,A,P=Gst.select(t.node().parentNode),D=R2.getFromId(e,r.xref),z=R2.getRefType(r.xref),O=R2.getFromId(e,r.yref),V=R2.getRefType(r.yref),B=id.getDataToPixel(e,D,!1,z),F=id.getDataToPixel(e,O,!0,V),N=id.getPixelToData(e,D,!1,z),Z=id.getPixelToData(e,O,!0,V),J=fe(),re={element:J.node(),gd:e,prepFn:ae,doneFn:oe,clickFn:me},ue;tse.init(re),J.node().onmousemove=X;function fe(){return f?K():t}function K(){var we=10,Re=Math.max(r.line.width,we),qe=n.append("g").attr("data-index",i).attr("drag-helper",!0);qe.append("path").attr("d",t.attr("d")).style({cursor:"move","stroke-width":Re,"stroke-opacity":"0"});var et={"fill-opacity":"0"},Pe=Math.max(Re/2,we);return qe.append("circle").attr({"data-line-point":"start-point",cx:l?B(r.xanchor)+r.x0:B(r.x0),cy:u?F(r.yanchor)-r.y0:F(r.y0),r:Pe}).style(et).classed("cursor-grab",!0),qe.append("circle").attr({"data-line-point":"end-point",cx:l?B(r.xanchor)+r.x1:B(r.x1),cy:u?F(r.yanchor)-r.y1:F(r.y1),r:Pe}).style(et).classed("cursor-grab",!0),qe}function X(we){if(g4(e)){ue=null;return}if(f)we.target.tagName==="path"?ue="move":ue=we.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Re=re.element.getBoundingClientRect(),qe=Re.right-Re.left,et=Re.bottom-Re.top,Pe=we.clientX-Re.left,Ie=we.clientY-Re.top,ut=!c&&qe>o&&et>s&&!we.shiftKey?tse.getCursor(Pe/qe,1-Ie/et):"move";rse(t,ut),ue=ut.split("-")[0]}}function ae(we){g4(e)||(l&&(p=B(r.xanchor)),u&&(M=F(r.yanchor)),r.type==="path"?A=r.path:(v=l?r.x0:B(r.x0),d=u?r.y0:F(r.y0),_=l?r.x1:B(r.x1),T=u?r.y1:F(r.y1)),v<_?(k=v,g="x0",x=_,C="x1"):(k=_,g="x1",x=v,C="x0"),!u&&d<T||u&&d>T?(b=d,E="y0",w=T,S="y1"):(b=T,E="y1",w=d,S="y0"),X(we),ie(n,r),le(t,r,e),re.moveFn=ue==="move"?xe:ce,re.altKey=we.altKey)}function oe(){g4(e)||(rse(t),ge(n),lse(t,e,r),ase.call("_guiRelayout",e,a.getUpdateObj()))}function me(){g4(e)||ge(n)}function xe(we,Re){if(r.type==="path"){var qe=function(Ie){return Ie},et=qe,Pe=qe;l?h("xanchor",r.xanchor=N(p+we)):(et=function(ut){return N(B(ut)+we)},D&&D.type==="date"&&(et=id.encodeDate(et))),u?h("yanchor",r.yanchor=Z(M+Re)):(Pe=function(ut){return Z(F(ut)+Re)},O&&O.type==="date"&&(Pe=id.encodeDate(Pe))),h("path",r.path=nse(A,et,Pe))}else l?h("xanchor",r.xanchor=N(p+we)):(h("x0",r.x0=N(v+we)),h("x1",r.x1=N(_+we))),u?h("yanchor",r.yanchor=Z(M+Re)):(h("y0",r.y0=Z(d+Re)),h("y1",r.y1=Z(T+Re)));t.attr("d",YO(e,r)),ie(n,r),y4(e,i,r,P)}function ce(we,Re){if(c){var qe=function(We){return We},et=qe,Pe=qe;l?h("xanchor",r.xanchor=N(p+we)):(et=function(ht){return N(B(ht)+we)},D&&D.type==="date"&&(et=id.encodeDate(et))),u?h("yanchor",r.yanchor=Z(M+Re)):(Pe=function(ht){return Z(F(ht)+Re)},O&&O.type==="date"&&(Pe=id.encodeDate(Pe))),h("path",r.path=nse(A,et,Pe))}else if(f){if(ue==="resize-over-start-point"){var Ie=v+we,ut=u?d-Re:d+Re;h("x0",r.x0=l?Ie:N(Ie)),h("y0",r.y0=u?ut:Z(ut))}else if(ue==="resize-over-end-point"){var ft=_+we,je=u?T-Re:T+Re;h("x1",r.x1=l?ft:N(ft)),h("y1",r.y1=u?je:Z(je))}}else{var _t=function(We){return ue.indexOf(We)!==-1},Bt=_t("n"),Lt=_t("s"),Me=_t("w"),Ze=_t("e"),dt=Bt?b+Re:b,it=Lt?w+Re:w,vt=Me?k+we:k,rt=Ze?x+we:x;u&&(Bt&&(dt=b-Re),Lt&&(it=w-Re)),(!u&&it-dt>s||u&&dt-it>s)&&(h(E,r[E]=u?dt:Z(dt)),h(S,r[S]=u?it:Z(it))),rt-vt>o&&(h(g,r[g]=l?vt:N(vt)),h(C,r[C]=l?rt:N(rt)))}t.attr("d",YO(e,r)),ie(n,r),y4(e,i,r,P)}function ie(we,Re){(l||u)&&qe();function qe(){var et=Re.type!=="path",Pe=we.selectAll(".visual-cue").data([0]),Ie=1;Pe.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":Ie}).classed("visual-cue",!0);var ut=B(l?Re.xanchor:ese.midRange(et?[Re.x0,Re.x1]:id.extractPathCoords(Re.path,kx.paramIsX))),ft=F(u?Re.yanchor:ese.midRange(et?[Re.y0,Re.y1]:id.extractPathCoords(Re.path,kx.paramIsY)));if(ut=id.roundPositionForSharpStrokeRendering(ut,Ie),ft=id.roundPositionForSharpStrokeRendering(ft,Ie),l&&u){var je="M"+(ut-1-Ie)+","+(ft-1-Ie)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";Pe.attr("d",je)}else if(l){var _t="M"+(ut-1-Ie)+","+(ft-9-Ie)+"v18 h2 v-18 Z";Pe.attr("d",_t)}else{var Bt="M"+(ut-9-Ie)+","+(ft-1-Ie)+"h18 v2 h-18 Z";Pe.attr("d",Bt)}}}function ge(we){we.selectAll(".visual-cue").remove()}function le(we,Re,qe){var et=Re.xref,Pe=Re.yref,Ie=R2.getFromId(qe,et),ut=R2.getFromId(qe,Pe),ft="";et!=="paper"&&!Ie.autorange&&(ft+=et),Pe!=="paper"&&!ut.autorange&&(ft+=Pe),WO.setClipUrl(we,ft?"clip"+qe._fullLayout._uid+ft:null,qe)}}function nse(e,t,r){return e.replace(kx.segmentRE,function(i){var n=0,a=i.charAt(0),o=kx.paramIsX[a],s=kx.paramIsY[a],l=kx.numParams[a],u=i.substr(1).replace(kx.paramRE,function(f){return n>=l||(o[n]?f=t(f):s[n]&&(f=r(f)),n++),f});return a+u})}function jst(e,t){if(m4(e)){var r=t.node(),i=+r.getAttribute("data-index");if(i>=0){if(i===e._fullLayout._activeShapeIndex){ise(e);return}e._fullLayout._activeShapeIndex=i,e._fullLayout._deactivateShape=ise,XO(e)}}}function ise(e){if(m4(e)){var t=e._fullLayout._activeShapeIndex;t>=0&&(ose(e),delete e._fullLayout._activeShapeIndex,XO(e))}}function Kst(e){if(m4(e)){ose(e);var t=e._fullLayout._activeShapeIndex,r=(e.layout||{}).shapes||[];if(t<r.length){for(var i=[],n=0;n<r.length;n++)n!==t&&i.push(r[n]);return delete e._fullLayout._activeShapeIndex,ase.call("_guiRelayout",e,{shapes:i})}}}});var JO=ne((frr,pse)=>{"use strict";var ip=wi(),fse=Zs(),cse=zl(),Go=i4(),Jst=x4().eraseActiveShape,D2=Wt(),wo=D2._,Yo=pse.exports={};Yo.toImage={name:"toImage",title:function(e){var t=e._context.toImageButtonOptions||{},r=t.format||"png";return r==="png"?wo(e,"Download plot as a png"):wo(e,"Download plot")},icon:Go.camera,click:function(e){var t=e._context.toImageButtonOptions,r={format:t.format||"png"};D2.notifier(wo(e,"Taking snapshot - this may take a few seconds"),"long"),r.format!=="svg"&&D2.isIE()&&(D2.notifier(wo(e,"IE only supports svg.  Changing format to svg."),"long"),r.format="svg"),["filename","width","height","scale"].forEach(function(i){i in t&&(r[i]=t[i])}),ip.call("downloadImage",e,r).then(function(i){D2.notifier(wo(e,"Snapshot succeeded")+" - "+i,"long")}).catch(function(){D2.notifier(wo(e,"Sorry, there was a problem downloading your snapshot!"),"long")})}};Yo.sendDataToCloud={name:"sendDataToCloud",title:function(e){return wo(e,"Edit in Chart Studio")},icon:Go.disk,click:function(e){fse.sendDataToCloud(e)}};Yo.editInChartStudio={name:"editInChartStudio",title:function(e){return wo(e,"Edit in Chart Studio")},icon:Go.pencil,click:function(e){fse.sendDataToCloud(e)}};Yo.zoom2d={name:"zoom2d",_cat:"zoom",title:function(e){return wo(e,"Zoom")},attr:"dragmode",val:"zoom",icon:Go.zoombox,click:Yh};Yo.pan2d={name:"pan2d",_cat:"pan",title:function(e){return wo(e,"Pan")},attr:"dragmode",val:"pan",icon:Go.pan,click:Yh};Yo.select2d={name:"select2d",_cat:"select",title:function(e){return wo(e,"Box Select")},attr:"dragmode",val:"select",icon:Go.selectbox,click:Yh};Yo.lasso2d={name:"lasso2d",_cat:"lasso",title:function(e){return wo(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:Go.lasso,click:Yh};Yo.drawclosedpath={name:"drawclosedpath",title:function(e){return wo(e,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:Go.drawclosedpath,click:Yh};Yo.drawopenpath={name:"drawopenpath",title:function(e){return wo(e,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:Go.drawopenpath,click:Yh};Yo.drawline={name:"drawline",title:function(e){return wo(e,"Draw line")},attr:"dragmode",val:"drawline",icon:Go.drawline,click:Yh};Yo.drawrect={name:"drawrect",title:function(e){return wo(e,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:Go.drawrect,click:Yh};Yo.drawcircle={name:"drawcircle",title:function(e){return wo(e,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:Go.drawcircle,click:Yh};Yo.eraseshape={name:"eraseshape",title:function(e){return wo(e,"Erase active shape")},icon:Go.eraseshape,click:Jst};Yo.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(e){return wo(e,"Zoom in")},attr:"zoom",val:"in",icon:Go.zoom_plus,click:Yh};Yo.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(e){return wo(e,"Zoom out")},attr:"zoom",val:"out",icon:Go.zoom_minus,click:Yh};Yo.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(e){return wo(e,"Autoscale")},attr:"zoom",val:"auto",icon:Go.autoscale,click:Yh};Yo.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(e){return wo(e,"Reset axes")},attr:"zoom",val:"reset",icon:Go.home,click:Yh};Yo.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(e){return wo(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:Go.tooltip_basic,gravity:"ne",click:Yh};Yo.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(e){return wo(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:Go.tooltip_compare,gravity:"ne",click:Yh};function Yh(e,t){var r=t.currentTarget,i=r.getAttribute("data-attr"),n=r.getAttribute("data-val")||!0,a=e._fullLayout,o={},s=cse.list(e,null,!0),l=a._cartesianSpikesEnabled,u,f;if(i==="zoom"){var c=n==="in"?.5:2,h=(1+c)/2,v=(1-c)/2,d;for(f=0;f<s.length;f++)if(u=s[f],!u.fixedrange)if(d=u._name,n==="auto")o[d+".autorange"]=!0;else if(n==="reset")u._rangeInitial0===void 0&&u._rangeInitial1===void 0?o[d+".autorange"]=!0:u._rangeInitial0===void 0?(o[d+".autorange"]=u._autorangeInitial,o[d+".range"]=[null,u._rangeInitial1]):u._rangeInitial1===void 0?(o[d+".range"]=[u._rangeInitial0,null],o[d+".autorange"]=u._autorangeInitial):o[d+".range"]=[u._rangeInitial0,u._rangeInitial1],u._showSpikeInitial!==void 0&&(o[d+".showspikes"]=u._showSpikeInitial,l==="on"&&!u._showSpikeInitial&&(l="off"));else{var _=[u.r2l(u.range[0]),u.r2l(u.range[1])],T=[h*_[0]+v*_[1],h*_[1]+v*_[0]];o[d+".range[0]"]=u.l2r(T[0]),o[d+".range[1]"]=u.l2r(T[1])}}else i==="hovermode"&&(n==="x"||n==="y")&&(n=a._isHoriz?"y":"x",r.setAttribute("data-val",n)),o[i]=n;a._cartesianSpikesEnabled=l,ip.call("_guiRelayout",e,o)}Yo.zoom3d={name:"zoom3d",_cat:"zoom",title:function(e){return wo(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:Go.zoombox,click:b4};Yo.pan3d={name:"pan3d",_cat:"pan",title:function(e){return wo(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:Go.pan,click:b4};Yo.orbitRotation={name:"orbitRotation",title:function(e){return wo(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:Go["3d_rotate"],click:b4};Yo.tableRotation={name:"tableRotation",title:function(e){return wo(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:Go["z-axis"],click:b4};function b4(e,t){for(var r=t.currentTarget,i=r.getAttribute("data-attr"),n=r.getAttribute("data-val")||!0,a=e._fullLayout._subplots.gl3d||[],o={},s=i.split("."),l=0;l<a.length;l++)o[a[l]+"."+s[1]]=n;var u=n==="pan"?n:"zoom";o.dragmode=u,ip.call("_guiRelayout",e,o)}Yo.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(e){return wo(e,"Reset camera to default")},attr:"resetDefault",icon:Go.home,click:ZO};Yo.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(e){return wo(e,"Reset camera to last save")},attr:"resetLastSave",icon:Go.movie,click:ZO};function ZO(e,t){for(var r=t.currentTarget,i=r.getAttribute("data-attr"),n=i==="resetLastSave",a=i==="resetDefault",o=e._fullLayout,s=o._subplots.gl3d||[],l={},u=0;u<s.length;u++){var f=s[u],c=f+".camera",h=f+".aspectratio",v=f+".aspectmode",d=o[f]._scene,_;n?(l[c+".up"]=d.viewInitial.up,l[c+".eye"]=d.viewInitial.eye,l[c+".center"]=d.viewInitial.center,_=!0):a&&(l[c+".up"]=null,l[c+".eye"]=null,l[c+".center"]=null,_=!0),_&&(l[h+".x"]=d.viewInitial.aspectratio.x,l[h+".y"]=d.viewInitial.aspectratio.y,l[h+".z"]=d.viewInitial.aspectratio.z,l[v]=d.viewInitial.aspectmode)}ip.call("_guiRelayout",e,l)}Yo.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(e){return wo(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Go.tooltip_basic,gravity:"ne",click:Qst};function hse(e,t){var r=t.currentTarget,i=r._previousVal,n=e._fullLayout,a=n._subplots.gl3d||[],o=["xaxis","yaxis","zaxis"],s={},l={};if(i)l=i,r._previousVal=null;else{for(var u=0;u<a.length;u++){var f=a[u],c=n[f],h=f+".hovermode";s[h]=c.hovermode,l[h]=!1;for(var v=0;v<3;v++){var d=o[v],_=f+"."+d+".showspikes";l[_]=!1,s[_]=c[d].showspikes}}r._previousVal=s}return l}function Qst(e,t){var r=hse(e,t);ip.call("_guiRelayout",e,r)}Yo.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(e){return wo(e,"Zoom in")},attr:"zoom",val:"in",icon:Go.zoom_plus,click:jO};Yo.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(e){return wo(e,"Zoom out")},attr:"zoom",val:"out",icon:Go.zoom_minus,click:jO};Yo.resetGeo={name:"resetGeo",_cat:"reset",title:function(e){return wo(e,"Reset")},attr:"reset",val:null,icon:Go.autoscale,click:jO};Yo.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(e){return wo(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Go.tooltip_basic,gravity:"ne",click:KO};function jO(e,t){for(var r=t.currentTarget,i=r.getAttribute("data-attr"),n=r.getAttribute("data-val")||!0,a=e._fullLayout,o=a._subplots.geo||[],s=0;s<o.length;s++){var l=o[s],u=a[l];if(i==="zoom"){var f=u.projection.scale,c=n==="in"?2*f:.5*f;ip.call("_guiRelayout",e,l+".projection.scale",c)}}i==="reset"&&_4(e,"geo")}Yo.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(e){return wo(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Go.tooltip_basic,gravity:"ne",click:KO};Yo.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(e){return wo(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:Go.tooltip_basic,gravity:"ne",click:KO};function vse(e){var t=e._fullLayout;return t.hovermode?!1:t._has("cartesian")?t._isHoriz?"y":"x":"closest"}function KO(e){var t=vse(e);ip.call("_guiRelayout",e,"hovermode",t)}Yo.resetViewSankey={name:"resetSankeyGroup",title:function(e){return wo(e,"Reset view")},icon:Go.home,click:function(e){for(var t={"node.groups":[],"node.x":[],"node.y":[]},r=0;r<e._fullData.length;r++){var i=e._fullData[r]._viewInitial;t["node.groups"].push(i.node.groups.slice()),t["node.x"].push(i.node.x.slice()),t["node.y"].push(i.node.y.slice())}ip.call("restyle",e,t)}};Yo.toggleHover={name:"toggleHover",title:function(e){return wo(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:Go.tooltip_basic,gravity:"ne",click:function(e,t){var r=hse(e,t);r.hovermode=vse(e),ip.call("_guiRelayout",e,r)}};Yo.resetViews={name:"resetViews",title:function(e){return wo(e,"Reset views")},icon:Go.home,click:function(e,t){var r=t.currentTarget;r.setAttribute("data-attr","zoom"),r.setAttribute("data-val","reset"),Yh(e,t),r.setAttribute("data-attr","resetLastSave"),ZO(e,t),_4(e,"geo"),_4(e,"mapbox")}};Yo.toggleSpikelines={name:"toggleSpikelines",title:function(e){return wo(e,"Toggle Spike Lines")},icon:Go.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout,r=t._cartesianSpikesEnabled;t._cartesianSpikesEnabled=r==="on"?"off":"on",ip.call("_guiRelayout",e,$st(e))}};function $st(e){for(var t=e._fullLayout,r=t._cartesianSpikesEnabled==="on",i=cse.list(e,null,!0),n={},a=0;a<i.length;a++){var o=i[a];n[o._name+".showspikes"]=r?!0:o._showSpikeInitial}return n}Yo.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(e){return wo(e,"Reset view")},attr:"reset",icon:Go.home,click:function(e){_4(e,"mapbox")}};Yo.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(e){return wo(e,"Zoom in")},attr:"zoom",val:"in",icon:Go.zoom_plus,click:dse};Yo.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(e){return wo(e,"Zoom out")},attr:"zoom",val:"out",icon:Go.zoom_minus,click:dse};function dse(e,t){for(var r=t.currentTarget,i=r.getAttribute("data-val"),n=e._fullLayout,a=n._subplots.mapbox||[],o=1.05,s={},l=0;l<a.length;l++){var u=a[l],f=n[u].zoom,c=i==="in"?o*f:f/o;s[u+".zoom"]=c}ip.call("_guiRelayout",e,s)}function _4(e,t){for(var r=e._fullLayout,i=r._subplots[t]||[],n={},a=0;a<i.length;a++)for(var o=i[a],s=r[o]._subplot,l=s.viewInitial,u=Object.keys(l),f=0;f<u.length;f++){var c=u[f];n[o+"."+c]=l[c]}ip.call("_guiRelayout",e,n)}});var QO=ne((crr,xse)=>{"use strict";var gse=JO(),elt=Object.keys(gse),yse=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],mse=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(yse),I2=[],tlt=function(e){if(mse.indexOf(e._cat||e.name)===-1){var t=e.name,r=(e._cat||e.name).toLowerCase();I2.indexOf(t)===-1&&I2.push(t),I2.indexOf(r)===-1&&I2.push(r)}};elt.forEach(function(e){tlt(gse[e])});I2.sort();xse.exports={DRAW_MODES:yse,backButtons:mse,foreButtons:I2}});var $O=ne((vrr,_se)=>{"use strict";var hrr=QO();_se.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}});var wse=ne((drr,bse)=>{"use strict";var rlt=Wt(),HA=_i(),nlt=So(),ilt=$O();bse.exports=function(t,r){var i=t.modebar||{},n=nlt.newContainer(r,"modebar");function a(s,l){return rlt.coerce(i,n,ilt,s,l)}a("orientation"),a("bgcolor",HA.addOpacity(r.paper_bgcolor,.5));var o=HA.contrast(HA.rgb(r.modebar.bgcolor));a("color",HA.addOpacity(o,.3)),a("activecolor",HA.addOpacity(o,.7)),a("uirevision",r.uirevision),a("add"),a("remove")}});var Sse=ne((prr,Mse)=>{"use strict";var e7=Ai(),alt=la(),Hg=Wt(),Tse=i4(),olt=xk().version,slt=new DOMParser;function Ase(e){this.container=e.container,this.element=document.createElement("div"),this.update(e.graphInfo,e.buttons),this.container.appendChild(this.element)}var V0=Ase.prototype;V0.update=function(e,t){this.graphInfo=e;var r=this.graphInfo._context,i=this.graphInfo._fullLayout,n="modebar-"+i._uid;this.element.setAttribute("id",n),this._uid=n,this.element.className="modebar",r.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),i.modebar.orientation==="v"&&(this.element.className+=" vertical",t=t.reverse());var a=i.modebar,o=r.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";Hg.deleteRelatedStyleRule(n),Hg.addRelatedStyleRule(n,o+"#"+n+" .modebar-group","background-color: "+a.bgcolor),Hg.addRelatedStyleRule(n,"#"+n+" .modebar-btn .icon path","fill: "+a.color),Hg.addRelatedStyleRule(n,"#"+n+" .modebar-btn:hover .icon path","fill: "+a.activecolor),Hg.addRelatedStyleRule(n,"#"+n+" .modebar-btn.active .icon path","fill: "+a.activecolor);var s=!this.hasButtons(t),l=this.hasLogo!==r.displaylogo,u=this.locale!==r.locale;if(this.locale=r.locale,(s||l||u)&&(this.removeAllButtons(),this.updateButtons(t),r.watermark||r.displaylogo)){var f=this.getLogo();r.watermark&&(f.className=f.className+" watermark"),i.modebar.orientation==="v"?this.element.insertBefore(f,this.element.childNodes[0]):this.element.appendChild(f),this.hasLogo=!0}this.updateActiveButton()};V0.updateButtons=function(e){var t=this;this.buttons=e,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(r){var i=t.createGroup();r.forEach(function(n){var a=n.name;if(!a)throw new Error("must provide button 'name' in button config");if(t.buttonsNames.indexOf(a)!==-1)throw new Error("button name '"+a+"' is taken");t.buttonsNames.push(a);var o=t.createButton(n);t.buttonElements.push(o),i.appendChild(o)}),t.element.appendChild(i)})};V0.createGroup=function(){var e=document.createElement("div");return e.className="modebar-group",e};V0.createButton=function(e){var t=this,r=document.createElement("a");r.setAttribute("rel","tooltip"),r.className="modebar-btn";var i=e.title;i===void 0?i=e.name:typeof i=="function"&&(i=i(this.graphInfo)),(i||i===0)&&r.setAttribute("data-title",i),e.attr!==void 0&&r.setAttribute("data-attr",e.attr);var n=e.val;n!==void 0&&(typeof n=="function"&&(n=n(this.graphInfo)),r.setAttribute("data-val",n));var a=e.click;if(typeof a!="function")throw new Error("must provide button 'click' function in button config");r.addEventListener("click",function(s){e.click(t.graphInfo,s),t.updateActiveButton(s.currentTarget)}),r.setAttribute("data-toggle",e.toggle||!1),e.toggle&&e7.select(r).classed("active",!0);var o=e.icon;return typeof o=="function"?r.appendChild(o()):r.appendChild(this.createIcon(o||Tse.question)),r.setAttribute("data-gravity",e.gravity||"n"),r};V0.createIcon=function(e){var t=alt(e.height)?Number(e.height):e.ascent-e.descent,r="http://www.w3.org/2000/svg",i;if(e.path){i=document.createElementNS(r,"svg"),i.setAttribute("viewBox",[0,0,e.width,t].join(" ")),i.setAttribute("class","icon");var n=document.createElementNS(r,"path");n.setAttribute("d",e.path),e.transform?n.setAttribute("transform",e.transform):e.ascent!==void 0&&n.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")"),i.appendChild(n)}if(e.svg){var a=slt.parseFromString(e.svg,"application/xml");i=a.childNodes[0]}return i.setAttribute("height","1em"),i.setAttribute("width","1em"),i};V0.updateActiveButton=function(e){var t=this.graphInfo._fullLayout,r=e!==void 0?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(i){var n=i.getAttribute("data-val")||!0,a=i.getAttribute("data-attr"),o=i.getAttribute("data-toggle")==="true",s=e7.select(i);if(o)a===r&&s.classed("active",!s.classed("active"));else{var l=a===null?a:Hg.nestedProperty(t,a).get();s.classed("active",l===n)}})};V0.hasButtons=function(e){var t=this.buttons;if(!t||e.length!==t.length)return!1;for(var r=0;r<e.length;++r){if(e[r].length!==t[r].length)return!1;for(var i=0;i<e[r].length;i++)if(e[r][i].name!==t[r][i].name)return!1}return!0};function llt(e){return e+" (v"+olt+")"}V0.getLogo=function(){var e=this.createGroup(),t=document.createElement("a");return t.href="https://plotly.com/",t.target="_blank",t.setAttribute("data-title",llt(Hg._(this.graphInfo,"Produced with Plotly.js"))),t.className="modebar-btn plotlyjsicon modebar-btn--logo",t.appendChild(this.createIcon(Tse.newplotlylogo)),e.appendChild(t),e};V0.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1};V0.destroy=function(){Hg.removeElement(this.container.querySelector(".modebar")),Hg.deleteRelatedStyleRule(this._uid)};function ult(e,t){var r=e._fullLayout,i=new Ase({graphInfo:e,container:r._modebardiv.node(),buttons:t});return r._privateplot&&e7.select(i.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),i}Mse.exports=ult});var Cse=ne((grr,kse)=>{"use strict";var flt=zl(),Ese=js(),t7=wi(),clt=td().isUnifiedHover,hlt=Sse(),w4=JO(),vlt=QO().DRAW_MODES,dlt=Wt().extendDeep;kse.exports=function(t){var r=t._fullLayout,i=t._context,n=r._modeBar;if(!i.displayModeBar&&!i.watermark){n&&(n.destroy(),delete r._modeBar);return}if(!Array.isArray(i.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(i.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var a=i.modeBarButtons,o;Array.isArray(a)&&a.length?o=_lt(a):!i.displayModeBar&&i.watermark?o=[]:o=plt(t),n?n.update(t,o):r._modeBar=hlt(t,o)};function plt(e){var t=e._fullLayout,r=e._fullData,i=e._context;function n(F,N){if(typeof N=="string"){if(N.toLowerCase()===F.toLowerCase())return!0}else{var Z=N.name,J=N._cat||N.name;if(Z===F||J===F.toLowerCase())return!0}return!1}var a=t.modebar.add;typeof a=="string"&&(a=[a]);var o=t.modebar.remove;typeof o=="string"&&(o=[o]);var s=i.modeBarButtonsToAdd.concat(a.filter(function(F){for(var N=0;N<i.modeBarButtonsToRemove.length;N++)if(n(F,i.modeBarButtonsToRemove[N]))return!1;return!0})),l=i.modeBarButtonsToRemove.concat(o.filter(function(F){for(var N=0;N<i.modeBarButtonsToAdd.length;N++)if(n(F,i.modeBarButtonsToAdd[N]))return!1;return!0})),u=t._has("cartesian"),f=t._has("gl3d"),c=t._has("geo"),h=t._has("pie"),v=t._has("funnelarea"),d=t._has("gl2d"),_=t._has("ternary"),T=t._has("mapbox"),p=t._has("polar"),M=t._has("smith"),b=t._has("sankey"),w=glt(t),k=clt(t.hovermode),x=[];function E(F){if(F.length){for(var N=[],Z=0;Z<F.length;Z++){for(var J=F[Z],re=w4[J],ue=re.name.toLowerCase(),fe=(re._cat||re.name).toLowerCase(),K=!1,X=0;X<l.length;X++){var ae=l[X].toLowerCase();if(ae===ue||ae===fe){K=!0;break}}K||N.push(w4[J])}x.push(N)}}var S=["toImage"];i.showEditInChartStudio?S.push("editInChartStudio"):i.showSendToCloud&&S.push("sendDataToCloud"),E(S);var g=[],C=[],A=[],P=[];(u||d||h||v||_)+c+f+T+p+M>1?(C=["toggleHover"],A=["resetViews"]):c?(g=["zoomInGeo","zoomOutGeo"],C=["hoverClosestGeo"],A=["resetGeo"]):f?(C=["hoverClosest3d"],A=["resetCameraDefault3d","resetCameraLastSave3d"]):T?(g=["zoomInMapbox","zoomOutMapbox"],C=["toggleHover"],A=["resetViewMapbox"]):d?C=["hoverClosestGl2d"]:h?C=["hoverClosestPie"]:b?(C=["hoverClosestCartesian","hoverCompareCartesian"],A=["resetViewSankey"]):C=["toggleHover"],u&&(C=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(mlt(r)||k)&&(C=[]),(u||d)&&!w&&(g=["zoomIn2d","zoomOut2d","autoScale2d"],A[0]!=="resetViews"&&(A=["resetScale2d"])),f?P=["zoom3d","pan3d","orbitRotation","tableRotation"]:(u||d)&&!w||_?P=["zoom2d","pan2d"]:T||c?P=["pan2d"]:p&&(P=["zoom2d"]),ylt(r)&&P.push("select2d","lasso2d");var D=[],z=function(F){D.indexOf(F)===-1&&C.indexOf(F)!==-1&&D.push(F)};if(Array.isArray(s)){for(var O=[],V=0;V<s.length;V++){var B=s[V];typeof B=="string"?(B=B.toLowerCase(),vlt.indexOf(B)!==-1?(t._has("mapbox")||t._has("cartesian"))&&P.push(B):B==="togglespikelines"?z("toggleSpikelines"):B==="togglehover"?z("toggleHover"):B==="hovercompare"?z("hoverCompareCartesian"):B==="hoverclosest"?(z("hoverClosestCartesian"),z("hoverClosestGeo"),z("hoverClosest3d"),z("hoverClosestGl2d"),z("hoverClosestPie")):B==="v1hovermode"&&(z("toggleHover"),z("hoverClosestCartesian"),z("hoverCompareCartesian"),z("hoverClosestGeo"),z("hoverClosest3d"),z("hoverClosestGl2d"),z("hoverClosestPie"))):O.push(B)}s=O}return E(P),E(g.concat(A)),E(D),xlt(x,s)}function glt(e){for(var t=flt.list({_fullLayout:e},null,!0),r=0;r<t.length;r++)if(!t[r].fixedrange)return!1;return!0}function ylt(e){for(var t=!1,r=0;r<e.length&&!t;r++){var i=e[r];!i._module||!i._module.selectPoints||(t7.traceIs(i,"scatter-like")?(Ese.hasMarkers(i)||Ese.hasText(i))&&(t=!0):t7.traceIs(i,"box-violin")?(i.boxpoints==="all"||i.points==="all")&&(t=!0):t=!0)}return t}function mlt(e){for(var t=0;t<e.length;t++)if(!t7.traceIs(e[t],"noHover"))return!1;return!0}function xlt(e,t){if(t.length)if(Array.isArray(t[0]))for(var r=0;r<t.length;r++)e.push(t[r]);else e.push(t);return e}function _lt(e){for(var t=dlt([],e),r=0;r<t.length;r++)for(var i=t[r],n=0;n<i.length;n++){var a=i[n];if(typeof a=="string")if(w4[a]!==void 0)t[r][n]=w4[a];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return t}});var r7=ne((yrr,Lse)=>{"use strict";Lse.exports={moduleType:"component",name:"modebar",layoutAttributes:$O(),supplyLayoutDefaults:wse(),manage:Cse()}});var n7=ne((mrr,Pse)=>{"use strict";var blt=Tf().FROM_BL;Pse.exports=function(t,r,i){i===void 0&&(i=blt[t.constraintoward||"center"]);var n=[t.r2l(t.range[0]),t.r2l(t.range[1])],a=n[0]+(n[1]-n[0])*i;t.range=t._input.range=[t.l2r(a+(n[0]-a)*r),t.l2r(a+(n[1]-a)*r)],t.setScale()}});var mm=ne(GA=>{"use strict";var Cx=Wt(),i7=Cd(),n0=zl().id2name,wlt=dc(),Rse=n7(),Tlt=B0(),Alt=$a().ALMOST_EQUAL,Mlt=Tf().FROM_BL;GA.handleDefaults=function(e,t,r){var i=r.axIds,n=r.axHasImage,a=t._axisConstraintGroups=[],o=t._axisMatchGroups=[],s,l,u,f,c,h,v,d;for(s=0;s<i.length;s++)f=n0(i[s]),c=e[f],h=t[f],Slt(c,h,{axIds:i,layoutOut:t,hasImage:n[f]});function _(S,g){for(s=0;s<S.length;s++){l=S[s];for(u in l)t[n0(u)][g]=l}}for(_(o,"_matchGroup"),s=0;s<a.length;s++){l=a[s];for(u in l)if(h=t[n0(u)],h.fixedrange){for(var T in l){var p=n0(T);(e[p]||{}).fixedrange===!1&&Cx.warn("fixedrange was specified as false for axis "+p+" but was overridden because another axis in its constraint group has fixedrange true"),t[p].fixedrange=!0}break}}for(s=0;s<a.length;){l=a[s];for(u in l){h=t[n0(u)],h._matchGroup&&Object.keys(h._matchGroup).length===Object.keys(l).length&&(a.splice(s,1),s--);break}s++}_(a,"_constraintGroup");var M=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],b=!1,w=!1;function k(){d=h[v],v==="rangebreaks"&&(w=h._hasDayOfWeekBreaks)}for(s=0;s<o.length;s++){l=o[s];for(var x=0;x<M.length;x++){v=M[x],d=null;var E;for(u in l)if(f=n0(u),c=e[f],h=t[f],v in h){if(!h.matches&&(E=h,v in c)){k();break}d===null&&v in c&&k()}if(v==="range"&&d&&c.range&&c.range.length===2&&c.range[0]!==null&&c.range[1]!==null&&(b=!0),v==="autorange"&&d===null&&b&&(d=!1),d===null&&v in E&&(d=E[v]),d!==null)for(u in l)h=t[n0(u)],h[v]=v==="range"?d.slice():d,v==="rangebreaks"&&(h._hasDayOfWeekBreaks=w,Tlt(h,t))}}};function Slt(e,t,r){var i=r.axIds,n=r.layoutOut,a=r.hasImage,o=n._axisConstraintGroups,s=n._axisMatchGroups,l=t._id,u=l.charAt(0),f=((n._splomAxes||{})[u]||{})[l]||{},c=t._id,h=c.charAt(0)==="x";t._matchGroup=null,t._constraintGroup=null;function v(P,D){return Cx.coerce(e,t,wlt,P,D)}v("constrain",a?"domain":"range"),Cx.coerce(e,t,{constraintoward:{valType:"enumerated",values:h?["left","center","right"]:["bottom","middle","top"],dflt:h?"center":"middle"}},"constraintoward");var d=t.type,_,T,p=[];for(_=0;_<i.length;_++)if(T=i[_],T!==c){var M=n[n0(T)];M.type===d&&p.push(T)}var b=Fse(o,c);if(b){var w=[];for(_=0;_<p.length;_++)T=p[_],b[T]||w.push(T);p=w}var k=p.length,x,E;k&&(e.matches||f.matches)&&(x=Cx.coerce(e,t,{matches:{valType:"enumerated",values:p,dflt:p.indexOf(f.matches)!==-1?f.matches:void 0}},"matches"));var S=a&&!h?t.anchor:void 0;if(k&&!x&&(e.scaleanchor||S)&&(E=Cx.coerce(e,t,{scaleanchor:{valType:"enumerated",values:p.concat([!1])}},"scaleanchor",S)),x){t._matchGroup=a7(s,c,x,1);var g=n[n0(x)],C=Dse(n,t)/Dse(n,g);h!==(x.charAt(0)==="x")&&(C=(h?"x":"y")+C),a7(o,c,x,C)}else e.matches&&i.indexOf(e.matches)!==-1&&Cx.warn("ignored "+t._name+'.matches: "'+e.matches+'" to avoid an infinite loop');if(E){var A=v("scaleratio");A||(A=t.scaleratio=1),a7(o,c,E,A)}else e.scaleanchor&&i.indexOf(e.scaleanchor)!==-1&&Cx.warn("ignored "+t._name+'.scaleanchor: "'+e.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function Dse(e,t){var r=t.domain;return r||(r=e[n0(t.overlaying)].domain),r[1]-r[0]}function Fse(e,t){for(var r=0;r<e.length;r++)if(e[r][t])return e[r];return null}function a7(e,t,r,i){var n,a,o,s,l,u=Fse(e,t);u===null?(u={},u[t]=1,l=e.length,e.push(u)):l=e.indexOf(u);var f=Object.keys(u);for(n=0;n<e.length;n++)if(o=e[n],n!==l&&o[r]){var c=o[r];for(a=0;a<f.length;a++)s=f[a],o[s]=o7(c,o7(i,u[s]));e.splice(l,1);return}if(i!==1)for(a=0;a<f.length;a++){var h=f[a];u[h]=o7(i,u[h])}u[r]=1}function o7(e,t){var r="",i="",n,a;typeof e=="string"&&(r=e.match(/^[xy]*/)[0],n=r.length,e=+e.substr(n)),typeof t=="string"&&(i=t.match(/^[xy]*/)[0],a=i.length,t=+t.substr(a));var o=e*t;return!n&&!a?o:!n||!a||r.charAt(0)===i.charAt(0)?r+i+e*t:n===a?o:(n>a?r.substr(a):i.substr(n))+o}function Elt(e,t){for(var r=t._size,i=r.h/r.w,n={},a=Object.keys(e),o=0;o<a.length;o++){var s=a[o],l=e[s];if(typeof l=="string"){var u=l.match(/^[xy]*/)[0],f=u.length;l=+l.substr(f);for(var c=u.charAt(0)==="y"?i:1/i,h=0;h<f;h++)l*=c}n[s]=l}return n}GA.enforce=function(t){var r=t._fullLayout,i=r._axisConstraintGroups||[],n,a,o,s,l,u,f,c;for(n=0;n<i.length;n++){o=Elt(i[n],r);var h=Object.keys(o),v=1/0,d=0,_=1/0,T={},p={},M=!1;for(a=0;a<h.length;a++)s=h[a],p[s]=l=r[n0(s)],l._inputDomain?l.domain=l._inputDomain.slice():l._inputDomain=l.domain.slice(),l._inputRange||(l._inputRange=l.range.slice()),l.setScale(),T[s]=u=Math.abs(l._m)/o[s],v=Math.min(v,u),(l.constrain==="domain"||!l._constraintShrinkable)&&(_=Math.min(_,u)),delete l._constraintShrinkable,d=Math.max(d,u),l.constrain==="domain"&&(M=!0);if(!(v>Alt*d&&!M)){for(a=0;a<h.length;a++)if(s=h[a],u=T[s],l=p[s],f=l.constrain,u!==_||f==="domain")if(c=u/_,f==="range")Rse(l,c);else{var b=l._inputDomain,w=(l.domain[1]-l.domain[0])/(b[1]-b[0]),k=(l.r2l(l.range[1])-l.r2l(l.range[0]))/(l.r2l(l._inputRange[1])-l.r2l(l._inputRange[0]));if(c/=w,c*k<1){l.domain=l._input.domain=b.slice(),Rse(l,c);continue}if(k<1&&(l.range=l._input.range=l._inputRange.slice(),c*=k),l.autorange){var x=l.r2l(l.range[0]),E=l.r2l(l.range[1]),S=(x+E)/2,g=S,C=S,A=Math.abs(E-S),P=S-A*c*1.0001,D=S+A*c*1.0001,z=i7.makePadFn(r,l,0),O=i7.makePadFn(r,l,1);Ise(l,c);var V=Math.abs(l._m),B=i7.concatExtremes(t,l),F=B.min,N=B.max,Z,J;for(J=0;J<F.length;J++)Z=F[J].val-z(F[J])/V,Z>P&&Z<g&&(g=Z);for(J=0;J<N.length;J++)Z=N[J].val+O(N[J])/V,Z<D&&Z>C&&(C=Z);var re=(C-g)/(2*A);c/=re,g=l.l2r(g),C=l.l2r(C),l.range=l._input.range=x<E?[g,C]:[C,g]}Ise(l,c)}}}};GA.getAxisGroup=function(t,r){for(var i=t._axisMatchGroups,n=0;n<i.length;n++){var a=i[n];if(a[r])return"g"+n}return r};GA.clean=function(t,r){if(r._inputDomain){for(var i=!1,n=r._id,a=t._fullLayout._axisConstraintGroups,o=0;o<a.length;o++)if(a[o][n]){i=!0;break}(!i||r.constrain!=="domain")&&(r._input.domain=r.domain=r._inputDomain,delete r._inputDomain)}};function Ise(e,t){var r=e._inputDomain,i=Mlt[e.constraintoward],n=r[0]+(r[1]-r[0])*i;e.domain=e._input.domain=[n+(r[0]-n)/t,n+(r[1]-n)/t],e.setScale()}});var XA=ne($f=>{"use strict";var Nse=Ai(),Wh=wi(),Pd=Zs(),ap=Wt(),qse=Es(),s7=NA(),YA=_i(),F2=aa(),klt=yx(),Use=r7(),WA=Xi(),Gg=Tf(),Vse=mm(),Clt=Vse.enforce,Llt=Vse.clean,zse=Cd().doAutoRange,Hse="start",Plt="middle",Gse="end";$f.layoutStyles=function(e){return ap.syncOrAsync([Pd.doAutoMargin,Dlt],e)};function Rlt(e,t,r){for(var i=0;i<r.length;i++){var n=r[i][0],a=r[i][1];if(!(n[0]>=e[1]||n[1]<=e[0])&&a[0]<t[1]&&a[1]>t[0])return!0}return!1}function Dlt(e){var t=e._fullLayout,r=t._size,i=r.p,n=WA.list(e,"",!0),a,o,s,l,u,f;if(t._paperdiv.style({width:e._context.responsive&&t.autosize&&!e._context._hasZeroWidth&&!e.layout.width?"100%":t.width+"px",height:e._context.responsive&&t.autosize&&!e._context._hasZeroHeight&&!e.layout.height?"100%":t.height+"px"}).selectAll(".main-svg").call(F2.setSize,t.width,t.height),e._context.setBackground(e,t.paper_bgcolor),$f.drawMainTitle(e),Use.manage(e),!t._has("cartesian"))return Pd.previousPromises(e);function c(ce,ie,ge){var le=ce._lw/2;if(ce._id.charAt(0)==="x"){if(ie){if(ge==="top")return ie._offset-i-le}else return r.t+r.h*(1-(ce.position||0))+le%1;return ie._offset+ie._length+i+le}if(ie){if(ge==="right")return ie._offset+ie._length+i+le}else return r.l+r.w*(ce.position||0)+le%1;return ie._offset-i-le}for(a=0;a<n.length;a++){l=n[a];var h=l._anchorAxis;l._linepositions={},l._lw=F2.crispRound(e,l.linewidth,1),l._mainLinePosition=c(l,h,l.side),l._mainMirrorPosition=l.mirror&&h?c(l,h,Gg.OPPOSITE_SIDE[l.side]):null}var v=[],d=[],_=[],T=YA.opacity(t.paper_bgcolor)===1&&YA.opacity(t.plot_bgcolor)===1&&t.paper_bgcolor===t.plot_bgcolor;for(o in t._plots)if(s=t._plots[o],s.mainplot)s.bg&&s.bg.remove(),s.bg=void 0;else{var p=s.xaxis.domain,M=s.yaxis.domain,b=s.plotgroup;if(Rlt(p,M,_)){var w=b.node(),k=s.bg=ap.ensureSingle(b,"rect","bg");w.insertBefore(k.node(),w.childNodes[0]),d.push(o)}else b.select("rect.bg").remove(),_.push([p,M]),T||(v.push(o),d.push(o))}var x=t._bgLayer.selectAll(".bg").data(v);for(x.enter().append("rect").classed("bg",!0),x.exit().remove(),x.each(function(ce){t._plots[ce].bg=Nse.select(this)}),a=0;a<d.length;a++)s=t._plots[d[a]],u=s.xaxis,f=s.yaxis,s.bg&&u._offset!==void 0&&f._offset!==void 0&&s.bg.call(F2.setRect,u._offset-i,f._offset-i,u._length+2*i,f._length+2*i).call(YA.fill,t.plot_bgcolor).style("stroke-width",0);if(!t._hasOnlyLargeSploms)for(o in t._plots){s=t._plots[o],u=s.xaxis,f=s.yaxis;var E=s.clipId="clip"+t._uid+o+"plot",S=ap.ensureSingleById(t._clips,"clipPath",E,function(ce){ce.classed("plotclip",!0).append("rect")});s.clipRect=S.select("rect").attr({width:u._length,height:f._length}),F2.setTranslate(s.plot,u._offset,f._offset);var g,C;s._hasClipOnAxisFalse?(g=null,C=E):(g=E,C=null),F2.setClipUrl(s.plot,g,e),s.layerClipId=C}var A,P,D,z,O,V,B,F,N,Z,J,re,ue;function fe(ce){return"M"+A+","+ce+"H"+P}function K(ce){return"M"+u._offset+","+ce+"h"+u._length}function X(ce){return"M"+ce+","+F+"V"+B}function ae(ce){return f._shift!==void 0&&(ce+=f._shift),"M"+ce+","+f._offset+"v"+f._length}function oe(ce,ie,ge){if(!ce.showline||o!==ce._mainSubplot)return"";if(!ce._anchorAxis)return ge(ce._mainLinePosition);var le=ie(ce._mainLinePosition);return ce.mirror&&(le+=ie(ce._mainMirrorPosition)),le}for(o in t._plots){s=t._plots[o],u=s.xaxis,f=s.yaxis;var me="M0,0";Ose(u,o)&&(O=T4(u,"left",f,n),A=u._offset-(O?i+O:0),V=T4(u,"right",f,n),P=u._offset+u._length+(V?i+V:0),D=c(u,f,"bottom"),z=c(u,f,"top"),ue=!u._anchorAxis||o!==u._mainSubplot,ue&&(u.mirror==="allticks"||u.mirror==="all")&&(u._linepositions[o]=[D,z]),me=oe(u,fe,K),ue&&u.showline&&(u.mirror==="all"||u.mirror==="allticks")&&(me+=fe(D)+fe(z)),s.xlines.style("stroke-width",u._lw+"px").call(YA.stroke,u.showline?u.linecolor:"rgba(0,0,0,0)")),s.xlines.attr("d",me);var xe="M0,0";Ose(f,o)&&(J=T4(f,"bottom",u,n),B=f._offset+f._length+(J?i:0),re=T4(f,"top",u,n),F=f._offset-(re?i:0),N=c(f,u,"left"),Z=c(f,u,"right"),ue=!f._anchorAxis||o!==f._mainSubplot,ue&&(f.mirror==="allticks"||f.mirror==="all")&&(f._linepositions[o]=[N,Z]),xe=oe(f,X,ae),ue&&f.showline&&(f.mirror==="all"||f.mirror==="allticks")&&(xe+=X(N)+X(Z)),s.ylines.style("stroke-width",f._lw+"px").call(YA.stroke,f.showline?f.linecolor:"rgba(0,0,0,0)")),s.ylines.attr("d",xe)}return WA.makeClipPaths(e),Pd.previousPromises(e)}function Ose(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||e.mirror==="all"||e.mirror==="allticks")}function Bse(e,t,r){if(!r.showline||!r._lw)return!1;if(r.mirror==="all"||r.mirror==="allticks")return!0;var i=r._anchorAxis;if(!i)return!1;var n=Gg.FROM_BL[t];return r.side===t?i.domain[n]===e.domain[n]:r.mirror&&i.domain[1-n]===e.domain[1-n]}function T4(e,t,r,i){if(Bse(e,t,r))return r._lw;for(var n=0;n<i.length;n++){var a=i[n];if(a._mainAxis===r._mainAxis&&Bse(e,t,a))return a._lw}return 0}$f.drawMainTitle=function(e){var t=e._fullLayout.title,r=e._fullLayout,i=Ult(r),n=Vlt(r),a=Blt(r,n),o=Olt(r,i);if(klt.draw(e,"gtitle",{propContainer:r,propName:"title.text",placeholder:r._dfltTitle.plot,attributes:{x:o,y:a,"text-anchor":i,dy:n}}),t.text&&t.automargin){var s=Nse.selectAll(".gtitle"),l=F2.bBox(s.node()).height,u=qlt(e,t,l);if(u>0){zlt(e,a,u,l),s.attr({x:o,y:a,"text-anchor":i,dy:Nlt(t.yanchor)}).call(qse.positionText,o,a);var f=(t.text.match(qse.BR_TAG_ALL)||[]).length;if(f){var c=Gg.LINE_SPACING*f+Gg.MID_SHIFT;t.y===0&&(c=-c),s.selectAll(".line").each(function(){var h=+this.getAttribute("dy").slice(0,-2)-c+"em";this.setAttribute("dy",h)})}}}};function Ilt(e,t,r,i,n){var a=t.yref==="paper"?e._fullLayout._size.h:e._fullLayout.height,o=ap.isTopAnchor(t)?i:i-n,s=r==="b"?a-o:o;return ap.isTopAnchor(t)&&r==="t"||ap.isBottomAnchor(t)&&r==="b"?!1:s<n}function Flt(e,t,r,i,n){var a=0;return r==="middle"&&(a+=n/2),e==="t"?(r==="top"&&(a+=n),a+=i-t*i):(r==="bottom"&&(a+=n),a+=t*i),a}function qlt(e,t,r){var i=t.y,n=t.yanchor,a=i>.5?"t":"b",o=e._fullLayout.margin[a],s=0;return t.yref==="paper"?s=r+t.pad.t+t.pad.b:t.yref==="container"&&(s=Flt(a,i,n,e._fullLayout.height,r)+t.pad.t+t.pad.b),s>o?s:0}function zlt(e,t,r,i){var n="title.automargin",a=e._fullLayout.title,o=a.y>.5?"t":"b",s={x:a.x,y:a.y,t:0,b:0},l={};a.yref==="paper"&&Ilt(e,a,o,t,i)?s[o]=r:a.yref==="container"&&(l[o]=r,e._fullLayout._reservedMargin[n]=l),Pd.allowAutoMargin(e,n),Pd.autoMargin(e,n,s)}function Olt(e,t){var r=e.title,i=e._size,n=0;switch(t===Hse?n=r.pad.l:t===Gse&&(n=-r.pad.r),r.xref){case"paper":return i.l+i.w*r.x+n;case"container":default:return e.width*r.x+n}}function Blt(e,t){var r=e.title,i=e._size,n=0;if(t==="0em"||!t?n=-r.pad.b:t===Gg.CAP_SHIFT+"em"&&(n=r.pad.t),r.y==="auto")return i.t/2;switch(r.yref){case"paper":return i.t+i.h-i.h*r.y+n;case"container":default:return e.height-e.height*r.y+n}}function Nlt(e){return e==="top"?Gg.CAP_SHIFT+.3+"em":e==="bottom"?"-0.3em":Gg.MID_SHIFT+"em"}function Ult(e){var t=e.title,r=Plt;return ap.isRightAnchor(t)?r=Gse:ap.isLeftAnchor(t)&&(r=Hse),r}function Vlt(e){var t=e.title,r="0em";return ap.isTopAnchor(t)?r=Gg.CAP_SHIFT+"em":ap.isMiddleAnchor(t)&&(r=Gg.MID_SHIFT+"em"),r}$f.doTraceStyle=function(e){var t=e.calcdata,r=[],i;for(i=0;i<t.length;i++){var n=t[i],a=n[0]||{},o=a.trace||{},s=o._module||{},l=s.arraysToCalcdata;l&&l(n,o);var u=s.editStyle;u&&r.push({fn:u,cd0:a})}if(r.length){for(i=0;i<r.length;i++){var f=r[i];f.fn(e,f.cd0)}s7(e),$f.redrawReglTraces(e)}return Pd.style(e),Wh.getComponentMethod("legend","draw")(e),Pd.previousPromises(e)};$f.doColorBars=function(e){return Wh.getComponentMethod("colorbar","draw")(e),Pd.previousPromises(e)};$f.layoutReplot=function(e){var t=e.layout;return e.layout=void 0,Wh.call("_doPlot",e,"",t)};$f.doLegend=function(e){return Wh.getComponentMethod("legend","draw")(e),Pd.previousPromises(e)};$f.doTicksRelayout=function(e){return WA.draw(e,"redraw"),e._fullLayout._hasOnlyLargeSploms&&(Wh.subplotsRegistry.splom.updateGrid(e),s7(e),$f.redrawReglTraces(e)),$f.drawMainTitle(e),Pd.previousPromises(e)};$f.doModeBar=function(e){var t=e._fullLayout;Use.manage(e);for(var r=0;r<t._basePlotModules.length;r++){var i=t._basePlotModules[r].updateFx;i&&i(e)}return Pd.previousPromises(e)};$f.doCamera=function(e){for(var t=e._fullLayout,r=t._subplots.gl3d,i=0;i<r.length;i++){var n=t[r[i]],a=n._scene;a.setViewport(n)}};$f.drawData=function(e){var t=e._fullLayout;s7(e);for(var r=t._basePlotModules,i=0;i<r.length;i++)r[i].plot(e);return $f.redrawReglTraces(e),Pd.style(e),Wh.getComponentMethod("selections","draw")(e),Wh.getComponentMethod("shapes","draw")(e),Wh.getComponentMethod("annotations","draw")(e),Wh.getComponentMethod("images","draw")(e),t._replotting=!1,Pd.previousPromises(e)};$f.redrawReglTraces=function(e){var t=e._fullLayout;if(t._has("regl")){var r=e._fullData,i=[],n=[],a,o;for(t._hasOnlyLargeSploms&&t._splomGrid.draw(),a=0;a<r.length;a++){var s=r[a];s.visible===!0&&s._length!==0&&(s.type==="splom"?t._splomScenes[s.uid].draw():s.type==="scattergl"?ap.pushUnique(i,s.xaxis+s.yaxis):s.type==="scatterpolargl"&&ap.pushUnique(n,s.subplot))}for(a=0;a<i.length;a++)o=t._plots[i[a]],o._scene&&o._scene.draw();for(a=0;a<n.length;a++)o=t[n[a]]._subplot,o._scene&&o._scene.draw()}};$f.doAutoRangeAndConstraints=function(e){for(var t=WA.list(e,"",!0),r,i={},n=0;n<t.length;n++)if(r=t[n],!i[r._id]){i[r._id]=1,Llt(e,r),zse(e,r);var a=r._matchGroup;if(a)for(var o in a){var s=WA.getFromId(e,o);zse(e,s,r.range),i[o]=1}}Clt(e)};$f.finalDraw=function(e){Wh.getComponentMethod("rangeslider","draw")(e),Wh.getComponentMethod("rangeselector","draw")(e)};$f.drawMarginPushers=function(e){Wh.getComponentMethod("legend","draw")(e),Wh.getComponentMethod("rangeselector","draw")(e),Wh.getComponentMethod("sliders","draw")(e),Wh.getComponentMethod("updatemenus","draw")(e),Wh.getComponentMethod("colorbar","draw")(e)}});var f7=ne((brr,jse)=>{"use strict";var Hlt=pm().readPaths,Glt=p4(),Yse=nm().clearOutlineControllers,l7=_i(),Wse=aa(),Ylt=So().arrayEditor,Xse=ym(),Wlt=Xse.getPathString;jse.exports={draw:A4,drawOne:Zse,activateLastSelection:jlt};function A4(e){var t=e._fullLayout;Yse(e),t._selectionLayer.selectAll("path").remove();for(var r in t._plots){var i=t._plots[r].selectionLayer;i&&i.selectAll("path").remove()}for(var n=0;n<t.selections.length;n++)Zse(e,n)}function M4(e){return e._context.editSelection}function Zse(e,t){e._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+t+'"]').remove();var r=Xse.makeSelectionsOptionsAndPlotinfo(e,t),i=r.options,n=r.plotinfo;if(!i._input)return;a(e._fullLayout._selectionLayer);function a(o){var s=Wlt(e,i),l={"data-index":t,"fill-rule":"evenodd",d:s},u=i.opacity,f="rgba(0,0,0,0)",c=i.line.color||l7.contrast(e._fullLayout.plot_bgcolor),h=i.line.width,v=i.line.dash;h||(h=5,v="solid");var d=M4(e)&&e._fullLayout._activeSelectionIndex===t;d&&(f=e._fullLayout.activeselection.fillcolor,u=e._fullLayout.activeselection.opacity);for(var _=[],T=1;T>=0;T--){var p=o.append("path").attr(l).style("opacity",T?.1:u).call(l7.stroke,c).call(l7.fill,f).call(Wse.dashLine,T?"solid":v,T?4+h:h);if(Xlt(p,e,i),d){var M=Ylt(e.layout,"selections",i);p.style({cursor:"move"});var b={element:p.node(),plotinfo:n,gd:e,editHelpers:M,isActiveSelection:!0},w=Hlt(s,e);Glt(w,p,b)}else p.style("pointer-events",T?"all":"none");_[T]=p}var k=_[0],x=_[1];x.node().addEventListener("click",function(){return Zlt(e,k)})}}function Xlt(e,t,r){var i=r.xref+r.yref;Wse.setClipUrl(e,"clip"+t._fullLayout._uid+i,t)}function Zlt(e,t){if(M4(e)){var r=t.node(),i=+r.getAttribute("data-index");if(i>=0){if(i===e._fullLayout._activeSelectionIndex){u7(e);return}e._fullLayout._activeSelectionIndex=i,e._fullLayout._deactivateSelection=u7,A4(e)}}}function jlt(e){if(M4(e)){var t=e._fullLayout.selections.length-1;e._fullLayout._activeSelectionIndex=t,e._fullLayout._deactivateSelection=u7,A4(e)}}function u7(e){if(M4(e)){var t=e._fullLayout._activeSelectionIndex;t>=0&&(Yse(e),delete e._fullLayout._activeSelectionIndex,A4(e))}}});var Jse=ne((wrr,Kse)=>{function Klt(){var e,t=0,r=!1;function i(n,a){return e.list.push({type:n,data:a?JSON.parse(JSON.stringify(a)):void 0}),e}return e={list:[],segmentId:function(){return t++},checkIntersection:function(n,a){return i("check",{seg1:n,seg2:a})},segmentChop:function(n,a){return i("div_seg",{seg:n,pt:a}),i("chop",{seg:n,pt:a})},statusRemove:function(n){return i("pop_seg",{seg:n})},segmentUpdate:function(n){return i("seg_update",{seg:n})},segmentNew:function(n,a){return i("new_seg",{seg:n,primary:a})},segmentRemove:function(n){return i("rem_seg",{seg:n})},tempStatus:function(n,a,o){return i("temp_status",{seg:n,above:a,below:o})},rewind:function(n){return i("rewind",{seg:n})},status:function(n,a,o){return i("status",{seg:n,above:a,below:o})},vert:function(n){return n===r?e:(r=n,i("vert",{x:n}))},log:function(n){return typeof n!="string"&&(n=JSON.stringify(n,!1,"  ")),i("log",{txt:n})},reset:function(){return i("reset")},selected:function(n){return i("selected",{segs:n})},chainStart:function(n){return i("chain_start",{seg:n})},chainRemoveHead:function(n,a){return i("chain_rem_head",{index:n,pt:a})},chainRemoveTail:function(n,a){return i("chain_rem_tail",{index:n,pt:a})},chainNew:function(n,a){return i("chain_new",{pt1:n,pt2:a})},chainMatch:function(n){return i("chain_match",{index:n})},chainClose:function(n){return i("chain_close",{index:n})},chainAddHead:function(n,a){return i("chain_add_head",{index:n,pt:a})},chainAddTail:function(n,a){return i("chain_add_tail",{index:n,pt:a})},chainConnect:function(n,a){return i("chain_con",{index1:n,index2:a})},chainReverse:function(n){return i("chain_rev",{index:n})},chainJoin:function(n,a){return i("chain_join",{index1:n,index2:a})},done:function(){return i("done")}},e}Kse.exports=Klt});var $se=ne((Trr,Qse)=>{function Jlt(e){typeof e!="number"&&(e=1e-10);var t={epsilon:function(r){return typeof r=="number"&&(e=r),e},pointAboveOrOnLine:function(r,i,n){var a=i[0],o=i[1],s=n[0],l=n[1],u=r[0],f=r[1];return(s-a)*(f-o)-(l-o)*(u-a)>=-e},pointBetween:function(r,i,n){var a=r[1]-i[1],o=n[0]-i[0],s=r[0]-i[0],l=n[1]-i[1],u=s*o+a*l;if(u<e)return!1;var f=o*o+l*l;return!(u-f>-e)},pointsSameX:function(r,i){return Math.abs(r[0]-i[0])<e},pointsSameY:function(r,i){return Math.abs(r[1]-i[1])<e},pointsSame:function(r,i){return t.pointsSameX(r,i)&&t.pointsSameY(r,i)},pointsCompare:function(r,i){return t.pointsSameX(r,i)?t.pointsSameY(r,i)?0:r[1]<i[1]?-1:1:r[0]<i[0]?-1:1},pointsCollinear:function(r,i,n){var a=r[0]-i[0],o=r[1]-i[1],s=i[0]-n[0],l=i[1]-n[1];return Math.abs(a*l-s*o)<e},linesIntersect:function(r,i,n,a){var o=i[0]-r[0],s=i[1]-r[1],l=a[0]-n[0],u=a[1]-n[1],f=o*u-s*l;if(Math.abs(f)<e)return!1;var c=r[0]-n[0],h=r[1]-n[1],v=(l*h-u*c)/f,d=(o*h-s*c)/f,_={alongA:0,alongB:0,pt:[r[0]+v*o,r[1]+v*s]};return v<=-e?_.alongA=-2:v<e?_.alongA=-1:v-1<=-e?_.alongA=0:v-1<e?_.alongA=1:_.alongA=2,d<=-e?_.alongB=-2:d<e?_.alongB=-1:d-1<=-e?_.alongB=0:d-1<e?_.alongB=1:_.alongB=2,_},pointInsideRegion:function(r,i){for(var n=r[0],a=r[1],o=i[i.length-1][0],s=i[i.length-1][1],l=!1,u=0;u<i.length;u++){var f=i[u][0],c=i[u][1];c-a>e!=s-a>e&&(o-f)*(a-c)/(s-c)+f-n>e&&(l=!l),o=f,s=c}return l}};return t}Qse.exports=Jlt});var tle=ne((Arr,ele)=>{var Qlt={create:function(){var e={root:{root:!0,next:null},exists:function(t){return!(t===null||t===e.root)},isEmpty:function(){return e.root.next===null},getHead:function(){return e.root.next},insertBefore:function(t,r){for(var i=e.root,n=e.root.next;n!==null;){if(r(n)){t.prev=n.prev,t.next=n,n.prev.next=t,n.prev=t;return}i=n,n=n.next}i.next=t,t.prev=i,t.next=null},findTransition:function(t){for(var r=e.root,i=e.root.next;i!==null&&!t(i);)r=i,i=i.next;return{before:r===e.root?null:r,after:i,insert:function(n){return n.prev=r,n.next=i,r.next=n,i!==null&&(i.prev=n),n}}}};return e},node:function(e){return e.prev=null,e.next=null,e.remove=function(){e.prev.next=e.next,e.next&&(e.next.prev=e.prev),e.prev=null,e.next=null},e}};ele.exports=Qlt});var nle=ne((Mrr,rle)=>{var ZA=tle();function $lt(e,t,r){function i(d,_){return{id:r?r.segmentId():-1,start:d,end:_,myFill:{above:null,below:null},otherFill:null}}function n(d,_,T){return{id:r?r.segmentId():-1,start:d,end:_,myFill:{above:T.myFill.above,below:T.myFill.below},otherFill:null}}var a=ZA.create();function o(d,_,T,p,M,b){var w=t.pointsCompare(_,M);return w!==0?w:t.pointsSame(T,b)?0:d!==p?d?1:-1:t.pointAboveOrOnLine(T,p?M:b,p?b:M)?1:-1}function s(d,_){a.insertBefore(d,function(T){var p=o(d.isStart,d.pt,_,T.isStart,T.pt,T.other.pt);return p<0})}function l(d,_){var T=ZA.node({isStart:!0,pt:d.start,seg:d,primary:_,other:null,status:null});return s(T,d.end),T}function u(d,_,T){var p=ZA.node({isStart:!1,pt:_.end,seg:_,primary:T,other:d,status:null});d.other=p,s(p,d.pt)}function f(d,_){var T=l(d,_);return u(T,d,_),T}function c(d,_){r&&r.segmentChop(d.seg,_),d.other.remove(),d.seg.end=_,d.other.pt=_,s(d.other,d.pt)}function h(d,_){var T=n(_,d.seg.end,d.seg);return c(d,_),f(T,d.primary)}function v(d,_){var T=ZA.create();function p(O,V){var B=O.seg.start,F=O.seg.end,N=V.seg.start,Z=V.seg.end;return t.pointsCollinear(B,N,Z)?t.pointsCollinear(F,N,Z)||t.pointAboveOrOnLine(F,N,Z)?1:-1:t.pointAboveOrOnLine(B,N,Z)?1:-1}function M(O){return T.findTransition(function(V){var B=p(O,V.ev);return B>0})}function b(O,V){var B=O.seg,F=V.seg,N=B.start,Z=B.end,J=F.start,re=F.end;r&&r.checkIntersection(B,F);var ue=t.linesIntersect(N,Z,J,re);if(ue===!1){if(!t.pointsCollinear(N,Z,J)||t.pointsSame(N,re)||t.pointsSame(Z,J))return!1;var fe=t.pointsSame(N,J),K=t.pointsSame(Z,re);if(fe&&K)return V;var X=!fe&&t.pointBetween(N,J,re),ae=!K&&t.pointBetween(Z,J,re);if(fe)return ae?h(V,Z):h(O,re),V;X&&(K||(ae?h(V,Z):h(O,re)),h(V,N))}else ue.alongA===0&&(ue.alongB===-1?h(O,J):ue.alongB===0?h(O,ue.pt):ue.alongB===1&&h(O,re)),ue.alongB===0&&(ue.alongA===-1?h(V,N):ue.alongA===0?h(V,ue.pt):ue.alongA===1&&h(V,Z));return!1}for(var w=[];!a.isEmpty();){var k=a.getHead();if(r&&r.vert(k.pt[0]),k.isStart){let O=function(){if(E){var V=b(k,E);if(V)return V}return S?b(k,S):!1};var z=O;r&&r.segmentNew(k.seg,k.primary);var x=M(k),E=x.before?x.before.ev:null,S=x.after?x.after.ev:null;r&&r.tempStatus(k.seg,E?E.seg:!1,S?S.seg:!1);var g=O();if(g){if(e){var C;k.seg.myFill.below===null?C=!0:C=k.seg.myFill.above!==k.seg.myFill.below,C&&(g.seg.myFill.above=!g.seg.myFill.above)}else g.seg.otherFill=k.seg.myFill;r&&r.segmentUpdate(g.seg),k.other.remove(),k.remove()}if(a.getHead()!==k){r&&r.rewind(k.seg);continue}if(e){var C;k.seg.myFill.below===null?C=!0:C=k.seg.myFill.above!==k.seg.myFill.below,S?k.seg.myFill.below=S.seg.myFill.above:k.seg.myFill.below=d,C?k.seg.myFill.above=!k.seg.myFill.below:k.seg.myFill.above=k.seg.myFill.below}else if(k.seg.otherFill===null){var A;S?k.primary===S.primary?A=S.seg.otherFill.above:A=S.seg.myFill.above:A=k.primary?_:d,k.seg.otherFill={above:A,below:A}}r&&r.status(k.seg,E?E.seg:!1,S?S.seg:!1),k.other.status=x.insert(ZA.node({ev:k}))}else{var P=k.status;if(P===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(T.exists(P.prev)&&T.exists(P.next)&&b(P.prev.ev,P.next.ev),r&&r.statusRemove(P.ev.seg),P.remove(),!k.primary){var D=k.seg.myFill;k.seg.myFill=k.seg.otherFill,k.seg.otherFill=D}w.push(k.seg)}a.getHead().remove()}return r&&r.done(),w}return e?{addRegion:function(d){for(var _,T=d[d.length-1],p=0;p<d.length;p++){_=T,T=d[p];var M=t.pointsCompare(_,T);M!==0&&f(i(M<0?_:T,M<0?T:_),!0)}},calculate:function(d){return v(d,!1)}}:{calculate:function(d,_,T,p){return d.forEach(function(M){f(n(M.start,M.end,M),!0)}),T.forEach(function(M){f(n(M.start,M.end,M),!1)}),v(_,p)}}}rle.exports=$lt});var ale=ne((Srr,ile)=>{function eut(e,t,r){var i=[],n=[];return e.forEach(function(a){var o=a.start,s=a.end;if(t.pointsSame(o,s)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}r&&r.chainStart(a);var l={index:0,matches_head:!1,matches_pt1:!1},u={index:0,matches_head:!1,matches_pt1:!1},f=l;function c(z,O,V){return f.index=z,f.matches_head=O,f.matches_pt1=V,f===l?(f=u,!1):(f=null,!0)}for(var h=0;h<i.length;h++){var v=i[h],d=v[0],_=v[1],T=v[v.length-1],p=v[v.length-2];if(t.pointsSame(d,o)){if(c(h,!0,!0))break}else if(t.pointsSame(d,s)){if(c(h,!0,!1))break}else if(t.pointsSame(T,o)){if(c(h,!1,!0))break}else if(t.pointsSame(T,s)&&c(h,!1,!1))break}if(f===l){i.push([o,s]),r&&r.chainNew(o,s);return}if(f===u){r&&r.chainMatch(l.index);var M=l.index,b=l.matches_pt1?s:o,w=l.matches_head,v=i[M],k=w?v[0]:v[v.length-1],x=w?v[1]:v[v.length-2],E=w?v[v.length-1]:v[0],S=w?v[v.length-2]:v[1];if(t.pointsCollinear(x,k,b)&&(w?(r&&r.chainRemoveHead(l.index,b),v.shift()):(r&&r.chainRemoveTail(l.index,b),v.pop()),k=x),t.pointsSame(E,b)){i.splice(M,1),t.pointsCollinear(S,E,k)&&(w?(r&&r.chainRemoveTail(l.index,k),v.pop()):(r&&r.chainRemoveHead(l.index,k),v.shift())),r&&r.chainClose(l.index),n.push(v);return}w?(r&&r.chainAddHead(l.index,b),v.unshift(b)):(r&&r.chainAddTail(l.index,b),v.push(b));return}function g(z){r&&r.chainReverse(z),i[z].reverse()}function C(z,O){var V=i[z],B=i[O],F=V[V.length-1],N=V[V.length-2],Z=B[0],J=B[1];t.pointsCollinear(N,F,Z)&&(r&&r.chainRemoveTail(z,F),V.pop(),F=N),t.pointsCollinear(F,Z,J)&&(r&&r.chainRemoveHead(O,Z),B.shift()),r&&r.chainJoin(z,O),i[z]=V.concat(B),i.splice(O,1)}var A=l.index,P=u.index;r&&r.chainConnect(A,P);var D=i[A].length<i[P].length;l.matches_head?u.matches_head?D?(g(A),C(A,P)):(g(P),C(P,A)):C(P,A):u.matches_head?C(A,P):D?(g(A),C(P,A)):(g(P),C(A,P))}),n}ile.exports=eut});var sle=ne((Err,ole)=>{function jA(e,t,r){var i=[];return e.forEach(function(n){var a=(n.myFill.above?8:0)+(n.myFill.below?4:0)+(n.otherFill&&n.otherFill.above?2:0)+(n.otherFill&&n.otherFill.below?1:0);t[a]!==0&&i.push({id:r?r.segmentId():-1,start:n.start,end:n.end,myFill:{above:t[a]===1,below:t[a]===2},otherFill:null})}),r&&r.selected(i),i}var tut={union:function(e,t){return jA(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(e,t){return jA(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(e,t){return jA(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(e,t){return jA(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(e,t){return jA(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}};ole.exports=tut});var ule=ne((krr,lle)=>{var rut={toPolygon:function(e,t){function r(a){if(a.length<=0)return e.segments({inverted:!1,regions:[]});function o(u){var f=u.slice(0,u.length-1);return e.segments({inverted:!1,regions:[f]})}for(var s=o(a[0]),l=1;l<a.length;l++)s=e.selectDifference(e.combine(s,o(a[l])));return s}if(t.type==="Polygon")return e.polygon(r(t.coordinates));if(t.type==="MultiPolygon"){for(var i=e.segments({inverted:!1,regions:[]}),n=0;n<t.coordinates.length;n++)i=e.selectUnion(e.combine(i,r(t.coordinates[n])));return e.polygon(i)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,t,r){r=e.polygon(e.segments(r));function i(v,d){return t.pointInsideRegion([(v[0][0]+v[1][0])*.5,(v[0][1]+v[1][1])*.5],d)}function n(v){return{region:v,children:[]}}var a=n(null);function o(v,d){for(var _=0;_<v.children.length;_++){var T=v.children[_];if(i(d,T.region)){o(T,d);return}}for(var p=n(d),_=0;_<v.children.length;_++){var T=v.children[_];i(T.region,d)&&(p.children.push(T),v.children.splice(_,1),_--)}v.children.push(p)}for(var s=0;s<r.regions.length;s++){var l=r.regions[s];l.length<3||o(a,l)}function u(v,d){for(var _=0,T=v[v.length-1][0],p=v[v.length-1][1],M=[],b=0;b<v.length;b++){var w=v[b][0],k=v[b][1];M.push([w,k]),_+=k*T-w*p,T=w,p=k}var x=_<0;return x!==d&&M.reverse(),M.push([M[0][0],M[0][1]]),M}var f=[];function c(v){var d=[u(v.region,!1)];f.push(d);for(var _=0;_<v.children.length;_++)d.push(h(v.children[_]))}function h(v){for(var d=0;d<v.children.length;d++)c(v.children[d]);return u(v.region,!0)}for(var s=0;s<a.children.length;s++)c(a.children[s]);return f.length<=0?{type:"Polygon",coordinates:[]}:f.length==1?{type:"Polygon",coordinates:f[0]}:{type:"MultiPolygon",coordinates:f}}};lle.exports=rut});var vle=ne((Crr,hle)=>{var nut=Jse(),iut=$se(),fle=nle(),aut=ale(),KA=sle(),cle=ule(),op=!1,JA=iut(),ad;ad={buildLog:function(e){return e===!0?op=nut():e===!1&&(op=!1),op===!1?!1:op.list},epsilon:function(e){return JA.epsilon(e)},segments:function(e){var t=fle(!0,JA,op);return e.regions.forEach(t.addRegion),{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){var r=fle(!1,JA,op);return{combined:r.calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:KA.union(e.combined,op),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:KA.intersect(e.combined,op),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:KA.difference(e.combined,op),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:KA.differenceRev(e.combined,op),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:KA.xor(e.combined,op),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:aut(e.segments,JA,op),inverted:e.inverted}},polygonFromGeoJSON:function(e){return cle.toPolygon(ad,e)},polygonToGeoJSON:function(e){return cle.fromPolygon(ad,JA,e)},union:function(e,t){return QA(e,t,ad.selectUnion)},intersect:function(e,t){return QA(e,t,ad.selectIntersect)},difference:function(e,t){return QA(e,t,ad.selectDifference)},differenceRev:function(e,t){return QA(e,t,ad.selectDifferenceRev)},xor:function(e,t){return QA(e,t,ad.selectXor)}};function QA(e,t,r){var i=ad.segments(e),n=ad.segments(t),a=ad.combine(i,n),o=r(a);return ad.polygon(o)}typeof window=="object"&&(window.PolyBool=ad);hle.exports=ad});var ple=ne((Lrr,dle)=>{dle.exports=function(t,r,i,n){var a=t[0],o=t[1],s=!1;i===void 0&&(i=0),n===void 0&&(n=r.length);for(var l=n-i,u=0,f=l-1;u<l;f=u++){var c=r[u+i][0],h=r[u+i][1],v=r[f+i][0],d=r[f+i][1],_=h>o!=d>o&&a<(v-c)*(o-h)/(d-h)+c;_&&(s=!s)}return s}});var $A=ne((Prr,gle)=>{"use strict";var c7=Ok().dot,S4=$a().BADNUM,E4=gle.exports={};E4.tester=function(t){var r=t.slice(),i=r[0][0],n=i,a=r[0][1],o=a,s;for((r[r.length-1][0]!==r[0][0]||r[r.length-1][1]!==r[0][1])&&r.push(r[0]),s=1;s<r.length;s++)i=Math.min(i,r[s][0]),n=Math.max(n,r[s][0]),a=Math.min(a,r[s][1]),o=Math.max(o,r[s][1]);var l=!1,u;r.length===5&&(r[0][0]===r[1][0]?r[2][0]===r[3][0]&&r[0][1]===r[3][1]&&r[1][1]===r[2][1]&&(l=!0,u=function(d){return d[0]===r[0][0]}):r[0][1]===r[1][1]&&r[2][1]===r[3][1]&&r[0][0]===r[3][0]&&r[1][0]===r[2][0]&&(l=!0,u=function(d){return d[1]===r[0][1]}));function f(d,_){var T=d[0],p=d[1];return!(T===S4||T<i||T>n||p===S4||p<a||p>o||_&&u(d))}function c(d,_){var T=d[0],p=d[1];if(T===S4||T<i||T>n||p===S4||p<a||p>o)return!1;var M=r.length,b=r[0][0],w=r[0][1],k=0,x,E,S,g,C;for(x=1;x<M;x++)if(E=b,S=w,b=r[x][0],w=r[x][1],g=Math.min(E,b),!(T<g||T>Math.max(E,b)||p>Math.max(S,w)))if(p<Math.min(S,w))T!==g&&k++;else{if(b===E?C=p:C=S+(T-E)*(w-S)/(b-E),p===C)return!(x===1&&_);p<=C&&T!==g&&k++}return k%2===1}var h=!0,v=r[0];for(s=1;s<r.length;s++)if(v[0]!==r[s][0]||v[1]!==r[s][1]){h=!1;break}return{xmin:i,xmax:n,ymin:a,ymax:o,pts:r,contains:l?f:c,isRect:l,degenerate:h}};E4.isSegmentBent=function(t,r,i,n){var a=t[r],o=[t[i][0]-a[0],t[i][1]-a[1]],s=c7(o,o),l=Math.sqrt(s),u=[-o[1]/l,o[0]/l],f,c,h;for(f=r+1;f<i;f++)if(c=[t[f][0]-a[0],t[f][1]-a[1]],h=c7(c,o),h<0||h>s||Math.abs(c7(c,u))>n)return!0;return!1};E4.filter=function(t,r){var i=[t[0]],n=0,a=0;function o(l){t.push(l);var u=i.length,f=n;i.splice(a+1);for(var c=f+1;c<t.length;c++)(c===t.length-1||E4.isSegmentBent(t,f,c+1,r))&&(i.push(t[c]),i.length<u-2&&(n=c,a=i.length-1),f=c)}if(t.length>1){var s=t.pop();o(s)}return{addPt:o,raw:t,filtered:i}}});var mle=ne((Rrr,yle)=>{"use strict";yle.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}});var Nle=ne((Drr,Ble)=>{"use strict";var xle=vle(),out=ple(),rM=wi(),sut=aa().dashStyle,eM=_i(),lut=Ol(),uut=td().makeEventData,sM=r0(),fut=sM.freeMode,cut=sM.rectMode,nM=sM.drawMode,p7=sM.openMode,g7=sM.selectMode,_le=ym(),ble=VA(),Sle=p4(),Ele=nm().clearOutline,kle=pm(),h7=kle.handleEllipse,hut=kle.readPaths,vut=c4().newShapes,dut=BO(),put=f7().activateLastSelection,C4=Wt(),gut=C4.sorterAsc,Cle=$A(),tM=$k(),sp=zl().getFromId,yut=NA(),mut=XA().redrawReglTraces,L4=mle(),H0=L4.MINSELECT,xut=Cle.filter,y7=Cle.tester,m7=s4(),wle=m7.p2r,_ut=m7.axValue,but=m7.getTransform;function x7(e){return e.subplot!==void 0}function wut(e,t,r,i,n){var a=!x7(i),o=fut(n),s=cut(n),l=p7(n),u=nM(n),f=g7(n),c=n==="drawline",h=n==="drawcircle",v=c||h,d=i.gd,_=d._fullLayout,T=f&&_.newselection.mode==="immediate"&&a,p=_._zoomlayer,M=i.element.getBoundingClientRect(),b=i.plotinfo,w=but(b),k=t-M.left,x=r-M.top;_._calcInverseTransform(d);var E=C4.apply3DTransform(_._invTransform)(k,x);k=E[0],x=E[1];var S=_._invScaleX,g=_._invScaleY,C=k,A=x,P="M"+k+","+x,D=i.xaxes[0],z=i.yaxes[0],O=D._length,V=z._length,B=e.altKey&&!(nM(n)&&l),F,N,Z,J,re,ue,fe;Ple(e,d,i),o&&(F=xut([[k,x]],L4.BENDPX));var K=p.selectAll("path.select-outline-"+b.id).data([1]),X=u?_.newshape:_.newselection;u&&(i.hasText=X.label.text||X.label.texttemplate);var ae=u&&!l?X.fillcolor:"rgba(0,0,0,0)",oe=X.line.color||(a?eM.contrast(d._fullLayout.plot_bgcolor):"#7f7f7f");K.enter().append("path").attr("class","select-outline select-outline-"+b.id).style({opacity:u?X.opacity/2:1,"stroke-dasharray":sut(X.line.dash,X.line.width),"stroke-width":X.line.width+"px","shape-rendering":"crispEdges"}).call(eM.stroke,oe).call(eM.fill,ae).attr("fill-rule","evenodd").classed("cursor-move",!!u).attr("transform",w).attr("d",P+"Z");var me=p.append("path").attr("class","zoombox-corners").style({fill:eM.background,stroke:eM.defaultLine,"stroke-width":1}).attr("transform",w).attr("d","M0,0Z");if(u&&i.hasText){var xe=p.select(".label-temp");xe.empty()&&(xe=p.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var ce=_._uid+L4.SELECTID,ie=[],ge=P4(d,i.xaxes,i.yaxes,i.subplot);T&&!e.shiftKey&&(i._clearSubplotSelections=function(){if(a){var we=D._id,Re=z._id;qle(d,we,Re,ge);for(var qe=(d.layout||{}).selections||[],et=[],Pe=!1,Ie=0;Ie<qe.length;Ie++){var ut=_.selections[Ie];ut.xref!==we||ut.yref!==Re?et.push(qe[Ie]):Pe=!0}Pe&&(d._fullLayout._noEmitSelectedAtStart=!0,rM.call("_guiRelayout",d,{selections:et}))}});var le=qut(i);i.moveFn=function(we,Re){i._clearSubplotSelections&&(i._clearSubplotSelections(),i._clearSubplotSelections=void 0),C=Math.max(0,Math.min(O,S*we+k)),A=Math.max(0,Math.min(V,g*Re+x));var qe=Math.abs(C-k),et=Math.abs(A-x);if(s){var Pe,Ie,ut;if(f){var ft=_.selectdirection;switch(ft==="any"?et<Math.min(qe*.6,H0)?Pe="h":qe<Math.min(et*.6,H0)?Pe="v":Pe="d":Pe=ft,Pe){case"h":Ie=h?V/2:0,ut=V;break;case"v":Ie=h?O/2:0,ut=O;break}}if(u)switch(_.newshape.drawdirection){case"vertical":Pe="h",Ie=h?V/2:0,ut=V;break;case"horizontal":Pe="v",Ie=h?O/2:0,ut=O;break;case"ortho":qe<et?(Pe="h",Ie=x,ut=A):(Pe="v",Ie=k,ut=C);break;default:Pe="d"}Pe==="h"?(J=v?h7(h,[C,Ie],[C,ut]):[[k,Ie],[k,ut],[C,ut],[C,Ie]],J.xmin=v?C:Math.min(k,C),J.xmax=v?C:Math.max(k,C),J.ymin=Math.min(Ie,ut),J.ymax=Math.max(Ie,ut),me.attr("d","M"+J.xmin+","+(x-H0)+"h-4v"+2*H0+"h4ZM"+(J.xmax-1)+","+(x-H0)+"h4v"+2*H0+"h-4Z")):Pe==="v"?(J=v?h7(h,[Ie,A],[ut,A]):[[Ie,x],[Ie,A],[ut,A],[ut,x]],J.xmin=Math.min(Ie,ut),J.xmax=Math.max(Ie,ut),J.ymin=v?A:Math.min(x,A),J.ymax=v?A:Math.max(x,A),me.attr("d","M"+(k-H0)+","+J.ymin+"v-4h"+2*H0+"v4ZM"+(k-H0)+","+(J.ymax-1)+"v4h"+2*H0+"v-4Z")):Pe==="d"&&(J=v?h7(h,[k,x],[C,A]):[[k,x],[k,A],[C,A],[C,x]],J.xmin=Math.min(k,C),J.xmax=Math.max(k,C),J.ymin=Math.min(x,A),J.ymax=Math.max(x,A),me.attr("d","M0,0Z"))}else o&&(F.addPt([C,A]),J=F.filtered);if(i.selectionDefs&&i.selectionDefs.length?(Z=Rle(i.mergedPolygons,J,B),J.subtract=B,N=_7(i.selectionDefs.concat([J]))):(Z=[J],N=y7(J)),Sle(Ile(Z,l),K,i),f){var je=d7(d,!1),_t=je.eventData?je.eventData.points.slice():[];je=d7(d,!1,N,ge,i),N=je.selectionTesters,fe=je.eventData;var Bt;F?Bt=F.filtered:Bt=zle(Z),tM.throttle(ce,L4.SELECTDELAY,function(){ie=Fle(N,ge);for(var Lt=ie.slice(),Me=0;Me<_t.length;Me++){for(var Ze=_t[Me],dt=!1,it=0;it<Lt.length;it++)if(Lt[it].curveNumber===Ze.curveNumber&&Lt[it].pointNumber===Ze.pointNumber){dt=!0;break}dt||Lt.push(Ze)}Lt.length&&(fe||(fe={}),fe.points=Lt),le(fe,Bt),zut(d,fe)})}},i.clickFn=function(we,Re){if(me.remove(),d._fullLayout._activeShapeIndex>=0){d._fullLayout._deactivateShape(d);return}if(!u){var qe=_.clickmode;tM.done(ce).then(function(){if(tM.clear(ce),we===2){for(K.remove(),re=0;re<ge.length;re++)ue=ge[re],ue._module.selectPoints(ue,!1);if(aM(d,ge),iM(i),w7(d),ge.length){var et=ge[0].xaxis,Pe=ge[0].yaxis;if(et&&Pe){for(var Ie=[],ut=d._fullLayout.selections,ft=0;ft<ut.length;ft++){var je=ut[ft];je&&(je.xref!==et._id||je.yref!==Pe._id)&&Ie.push(je)}Ie.length<ut.length&&(d._fullLayout._noEmitSelectedAtStart=!0,rM.call("_guiRelayout",d,{selections:Ie}))}}}else qe.indexOf("select")>-1&&Lle(Re,d,i.xaxes,i.yaxes,i.subplot,i,K),qe==="event"&&oM(d,void 0);lut.click(d,Re,b.id)}).catch(C4.error)}},i.doneFn=function(){me.remove(),tM.done(ce).then(function(){tM.clear(ce),!T&&J&&i.selectionDefs&&(J.subtract=B,i.selectionDefs.push(J),i.mergedPolygons.length=0,[].push.apply(i.mergedPolygons,Z)),(T||u)&&iM(i,T),i.doneFnCompleted&&i.doneFnCompleted(ie),f&&oM(d,fe)}).catch(C4.error)}}function Lle(e,t,r,i,n,a,o){var s=t._hoverdata,l=t._fullLayout,u=l.clickmode,f=u.indexOf("event")>-1,c=[],h,v,d,_,T,p,M,b,w,k;if(Eut(s)){Ple(e,t,a),h=P4(t,r,i,n);var x=kut(s,h),E=x.pointNumbers.length>0;if(E?Cut(h,x):Lut(h)&&(M=Ale(x))){for(o&&o.remove(),k=0;k<h.length;k++)v=h[k],v._module.selectPoints(v,!1);aM(t,h),iM(a),f&&w7(t)}else{b=e.shiftKey&&(M!==void 0?M:Ale(x)),d=Tut(x.pointNumber,x.searchInfo,b);var S=a.selectionDefs.concat([d]);for(_=_7(S,_),k=0;k<h.length;k++)if(T=h[k]._module.selectPoints(h[k],_),p=Dle(T,h[k]),c.length)for(var g=0;g<p.length;g++)c.push(p[g]);else c=p;if(w={points:c},aM(t,h,w),d&&a&&a.selectionDefs.push(d),o){var C=a.mergedPolygons,A=p7(a.dragmode);Sle(Ile(C,A),o,a)}f&&oM(t,w)}}}function Tut(e,t,r){return{pointNumber:e,searchInfo:t,subtract:!!r}}function v7(e){return"pointNumber"in e&&"searchInfo"in e}function Aut(e){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(t,r,i,n){var a=e.searchInfo.cd[0].trace._expandedIndex,o=n.cd[0].trace._expandedIndex;return o===a&&i===e.pointNumber},isRect:!1,degenerate:!1,subtract:!!e.subtract}}function _7(e){if(!e.length)return;for(var t=[],r=v7(e[0])?0:e[0][0][0],i=r,n=v7(e[0])?0:e[0][0][1],a=n,o=0;o<e.length;o++)if(v7(e[o]))t.push(Aut(e[o]));else{var s=y7(e[o]);s.subtract=!!e[o].subtract,t.push(s),r=Math.min(r,s.xmin),i=Math.max(i,s.xmax),n=Math.min(n,s.ymin),a=Math.max(a,s.ymax)}function l(u,f,c,h){for(var v=!1,d=0;d<t.length;d++)t[d].contains(u,f,c,h)&&(v=!t[d].subtract);return v}return{xmin:r,xmax:i,ymin:n,ymax:a,pts:[],contains:l,isRect:!1,degenerate:!1}}function Ple(e,t,r){var i=t._fullLayout,n=r.plotinfo,a=r.dragmode,o=i._lastSelectedSubplot&&i._lastSelectedSubplot===n.id,s=(e.shiftKey||e.altKey)&&!(nM(a)&&p7(a));o&&s&&n.selection&&n.selection.selectionDefs&&!r.selectionDefs?(r.selectionDefs=n.selection.selectionDefs,r.mergedPolygons=n.selection.mergedPolygons):(!s||!n.selection)&&iM(r),o||(Ele(t),i._lastSelectedSubplot=n.id)}function Mut(e){return e._fullLayout._activeShapeIndex>=0}function Sut(e){return e._fullLayout._activeSelectionIndex>=0}function iM(e,t){var r=e.dragmode,i=e.plotinfo,n=e.gd;Mut(n)&&n._fullLayout._deactivateShape(n),Sut(n)&&n._fullLayout._deactivateSelection(n);var a=n._fullLayout,o=a._zoomlayer,s=nM(r),l=g7(r);if(s||l){var u=o.selectAll(".select-outline-"+i.id);if(u&&n._fullLayout._outlining){var f;s&&(f=vut(u,e)),f&&rM.call("_guiRelayout",n,{shapes:f});var c;l&&!x7(e)&&(c=dut(u,e)),c&&(n._fullLayout._noEmitSelectedAtStart=!0,rM.call("_guiRelayout",n,{selections:c}).then(function(){t&&put(n)})),n._fullLayout._outlining=!1}}i.selection={},i.selection.selectionDefs=e.selectionDefs=[],i.selection.mergedPolygons=e.mergedPolygons=[]}function Tle(e){return e._id}function P4(e,t,r,i){if(!e.calcdata)return[];var n=[],a=t.map(Tle),o=r.map(Tle),s,l,u;for(u=0;u<e.calcdata.length;u++)if(s=e.calcdata[u],l=s[0].trace,!(l.visible!==!0||!l._module||!l._module.selectPoints))if(x7({subplot:i})&&(l.subplot===i||l.geo===i))n.push(k4(l._module,s,t[0],r[0]));else if(l.type==="splom"){if(l._xaxes[a[0]]&&l._yaxes[o[0]]){var f=k4(l._module,s,t[0],r[0]);f.scene=e._fullLayout._splomScenes[l.uid],n.push(f)}}else if(l.type==="sankey"){var c=k4(l._module,s,t[0],r[0]);n.push(c)}else{if(a.indexOf(l.xaxis)===-1&&(!l._xA||!l._xA.overlaying)||o.indexOf(l.yaxis)===-1&&(!l._yA||!l._yA.overlaying))continue;n.push(k4(l._module,s,sp(e,l.xaxis),sp(e,l.yaxis)))}return n}function k4(e,t,r,i){return{_module:e,cd:t,xaxis:r,yaxis:i}}function Eut(e){return e&&Array.isArray(e)&&e[0].hoverOnBox!==!0}function kut(e,t){var r=e[0],i=-1,n=[],a,o;for(o=0;o<t.length;o++)if(a=t[o],r.fullData._expandedIndex===a.cd[0].trace._expandedIndex){if(r.hoverOnBox===!0)break;r.pointNumber!==void 0?i=r.pointNumber:r.binNumber!==void 0&&(i=r.binNumber,n=r.pointNumbers);break}return{pointNumber:i,pointNumbers:n,searchInfo:a}}function Ale(e){var t=e.searchInfo.cd[0].trace,r=e.pointNumber,i=e.pointNumbers,n=i.length>0,a=n?i[0]:r;return t.selectedpoints?t.selectedpoints.indexOf(a)>-1:!1}function Cut(e,t){var r=[],i,n,a,o;for(o=0;o<e.length;o++)i=e[o],i.cd[0].trace.selectedpoints&&i.cd[0].trace.selectedpoints.length>0&&r.push(i);if(r.length===1&&(a=r[0]===t.searchInfo,a&&(n=t.searchInfo.cd[0].trace,n.selectedpoints.length===t.pointNumbers.length))){for(o=0;o<t.pointNumbers.length;o++)if(n.selectedpoints.indexOf(t.pointNumbers[o])<0)return!1;return!0}return!1}function Lut(e){var t=0,r,i,n;for(n=0;n<e.length;n++)if(r=e[n],i=r.cd[0].trace,i.selectedpoints&&(i.selectedpoints.length>1||(t+=i.selectedpoints.length,t>1)))return!1;return t===1}function aM(e,t,r){var i;for(i=0;i<t.length;i++){var n=t[i].cd[0].trace._fullInput,a=e._fullLayout._tracePreGUI[n.uid]||{};a.selectedpoints===void 0&&(a.selectedpoints=n._input.selectedpoints||null)}var o;if(r){var s=r.points||[];for(i=0;i<t.length;i++)o=t[i].cd[0].trace,o._input.selectedpoints=o._fullInput.selectedpoints=[],o._fullInput!==o&&(o.selectedpoints=[]);for(var l=0;l<s.length;l++){var u=s[l],f=u.data,c=u.fullData,h=u.pointIndex,v=u.pointIndices;v?([].push.apply(f.selectedpoints,v),o._fullInput!==o&&[].push.apply(c.selectedpoints,v)):(f.selectedpoints.push(h),o._fullInput!==o&&c.selectedpoints.push(h))}}else for(i=0;i<t.length;i++)o=t[i].cd[0].trace,delete o.selectedpoints,delete o._input.selectedpoints,o._fullInput!==o&&delete o._fullInput.selectedpoints;Put(e,t)}function Put(e,t){for(var r=!1,i=0;i<t.length;i++){var n=t[i],a=n.cd;rM.traceIs(a[0].trace,"regl")&&(r=!0);var o=n._module,s=o.styleOnSelect||o.style;s&&(s(e,a,a[0].node3),a[0].nodeRangePlot3&&s(e,a,a[0].nodeRangePlot3))}r&&(yut(e),mut(e))}function Rle(e,t,r){for(var i=r?xle.difference:xle.union,n=i({regions:e},{regions:[t]}),a=n.regions.reverse(),o=0;o<a.length;o++){var s=a[o];s.subtract=b7(s,a.slice(0,o))}return a}function Dle(e,t){if(Array.isArray(e))for(var r=t.cd,i=t.cd[0].trace,n=0;n<e.length;n++)e[n]=uut(e[n],i,r);return e}function Ile(e,t){for(var r=[],i=0;i<e.length;i++){r[i]=[];for(var n=0;n<e[i].length;n++){r[i][n]=[],r[i][n][0]=n?"L":"M";for(var a=0;a<e[i][n].length;a++)r[i][n].push(e[i][n][a])}t||r[i].push(["Z",r[i][0][1],r[i][0][2]])}return r}function Fle(e,t){for(var r=[],i,n=[],a,o=0;o<t.length;o++){var s=t[o];a=s._module.selectPoints(s,e),n.push(a),i=Dle(a,s),r=r.concat(i)}return r}function d7(e,t,r,i,n){var a=!!i,o,s,l;n&&(o=n.plotinfo,s=n.xaxes[0]._id,l=n.yaxes[0]._id);var u=[],f=[],c=Mle(e),h=e._fullLayout;if(o){var v=h._zoomlayer,d=h.dragmode,_=nM(d),T=g7(d);if(_||T){var p=sp(e,s,"x"),M=sp(e,l,"y");if(p&&M){var b=v.selectAll(".select-outline-"+o.id);if(b&&e._fullLayout._outlining&&b.length){for(var w=b[0][0],k=w.getAttribute("d"),x=hut(k,e,o),E=[],S=0;S<x.length;S++){for(var g=x[S],C=[],A=0;A<g.length;A++)C.push([xm(p,g[A][1]),xm(M,g[A][2])]);C.xref=s,C.yref=l,C.subtract=b7(C,E),E.push(C)}c=c.concat(E)}}}}var P=s&&l?[s+l]:h._subplots.cartesian;Rut(e);for(var D={},z=0;z<P.length;z++){var O=P[z],V=O.indexOf("y"),B=O.slice(0,V),F=O.slice(V),N=s&&l?r:void 0;if(N=Iut(c,B,F,N),N){var Z=i;if(!a){var J=sp(e,B,"x"),re=sp(e,F,"y");Z=P4(e,[J],[re],O);for(var ue=0;ue<Z.length;ue++){var fe=Z[ue],K=fe.cd[0],X=K.trace;if(fe._module.name==="scattergl"&&!K.t.xpx){var ae=X.x,oe=X.y,me=X._length;K.t.xpx=[],K.t.ypx=[];for(var xe=0;xe<me;xe++)K.t.xpx[xe]=J.c2p(ae[xe]),K.t.ypx[xe]=re.c2p(oe[xe])}fe._module.name==="splom"&&(D[X.uid]||(D[X.uid]=!0))}}var ce=Fle(N,Z);u=u.concat(ce),f=f.concat(Z)}}var ie={points:u};aM(e,f,ie);var ge=h.clickmode,le=ge.indexOf("event")>-1&&t;if(!o&&t){var we=Mle(e,!0);if(we.length){var Re=we[0].xref,qe=we[0].yref;if(Re&&qe){var et=zle(we),Pe=Ole([sp(e,Re,"x"),sp(e,qe,"y")]);Pe(ie,et)}}e._fullLayout._noEmitSelectedAtStart?e._fullLayout._noEmitSelectedAtStart=!1:le&&oM(e,ie),h._reselect=!1}if(!o&&h._deselect){var Ie=h._deselect;s=Ie.xref,l=Ie.yref,Dut(s,l,f)||qle(e,s,l,i),le&&(ie.points.length?oM(e,ie):w7(e)),h._deselect=!1}return{eventData:ie,selectionTesters:r}}function Rut(e){var t=e.calcdata;if(t)for(var r=0;r<t.length;r++){var i=t[r][0],n=i.trace,a=e._fullLayout._splomScenes;if(a){var o=a[n.uid];o&&(o.selectBatch=[])}}}function Dut(e,t,r){for(var i=0;i<r.length;i++){var n=r[i];if(n.xaxis&&n.xaxis._id===e&&n.yaxis&&n.yaxis._id===t)return!0}return!1}function qle(e,t,r,i){i=P4(e,[sp(e,t,"x")],[sp(e,r,"y")],t+r);for(var n=0;n<i.length;n++){var a=i[n];a._module.selectPoints(a,!1)}aM(e,i)}function Iut(e,t,r,i){for(var n,a=0;a<e.length;a++){var o=e[a];if(!(t!==o.xref||r!==o.yref))if(n){var s=!!o.subtract;n=Rle(n,o,s),i=_7(n)}else n=[o],i=y7(o)}return i}function Mle(e,t){for(var r=[],i=e._fullLayout,n=i.selections,a=n.length,o=0;o<a;o++)if(!(t&&o!==i._activeSelectionIndex)){var s=n[o];if(s){var l=s.xref,u=s.yref,f=sp(e,l,"x"),c=sp(e,u,"y"),h,v,d,_,T;if(s.type==="rect"){T=[];var p=xm(f,s.x0),M=xm(f,s.x1),b=xm(c,s.y0),w=xm(c,s.y1);T=[[p,b],[p,w],[M,w],[M,b]],h=Math.min(p,M),v=Math.max(p,M),d=Math.min(b,w),_=Math.max(b,w),T.xmin=h,T.xmax=v,T.ymin=d,T.ymax=_,T.xref=l,T.yref=u,T.subtract=!1,T.isRect=!0,r.push(T)}else if(s.type==="path")for(var k=s.path.split("Z"),x=[],E=0;E<k.length;E++){var S=k[E];if(S){S+="Z";var g=_le.extractPathCoords(S,ble.paramIsX,"raw"),C=_le.extractPathCoords(S,ble.paramIsY,"raw");h=1/0,v=-1/0,d=1/0,_=-1/0,T=[];for(var A=0;A<g.length;A++){var P=xm(f,g[A]),D=xm(c,C[A]);T.push([P,D]),h=Math.min(P,h),v=Math.max(P,v),d=Math.min(D,d),_=Math.max(D,_)}T.xmin=h,T.xmax=v,T.ymin=d,T.ymax=_,T.xref=l,T.yref=u,T.subtract=b7(T,x),x.push(T),r.push(T)}}}}return r}function b7(e,t){for(var r=!1,i=0;i<t.length;i++)for(var n=t[i],a=0;a<e.length;a++)if(out(e[a],n)){r=!r;break}return r}function xm(e,t){return e.type==="date"&&(t=t.replace("_"," ")),e.type==="log"?e.c2p(t):e.r2p(t,null,e.calendar)}function zle(e){for(var t=e.length,r=[],i=0;i<t;i++){var n=e[i];r=r.concat(n),r=r.concat([n[0]])}return Fut(r)}function Fut(e){return e.isRect=e.length===5&&e[0][0]===e[4][0]&&e[0][1]===e[4][1]&&e[0][0]===e[1][0]&&e[2][0]===e[3][0]&&e[0][1]===e[3][1]&&e[1][1]===e[2][1]||e[0][1]===e[1][1]&&e[2][1]===e[3][1]&&e[0][0]===e[3][0]&&e[1][0]===e[2][0],e.isRect&&(e.xmin=Math.min(e[0][0],e[2][0]),e.xmax=Math.max(e[0][0],e[2][0]),e.ymin=Math.min(e[0][1],e[2][1]),e.ymax=Math.max(e[0][1],e[2][1])),e}function Ole(e){return function(t,r){for(var i,n,a=0;a<e.length;a++){var o=e[a],s=o._id,l=s.charAt(0);if(r.isRect){i||(i={});var u=r[l+"min"],f=r[l+"max"];u!==void 0&&f!==void 0&&(i[s]=[wle(o,u),wle(o,f)].sort(gut))}else n||(n={}),n[s]=r.map(_ut(o))}i&&(t.range=i),n&&(t.lassoPoints=n)}}function qut(e){var t=e.plotinfo;return t.fillRangeItems||Ole(e.xaxes.concat(e.yaxes))}function zut(e,t){e.emit("plotly_selecting",t)}function oM(e,t){t&&(t.selections=(e.layout||{}).selections||[]),e.emit("plotly_selected",t)}function w7(e){e.emit("plotly_deselect",null)}Ble.exports={reselect:d7,prepSelect:wut,clearOutline:Ele,clearSelectionsCache:iM,selectOnClick:Lle}});var T7=ne((Irr,Ule)=>{"use strict";Ule.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]});var lM=ne((Frr,Vle)=>{"use strict";Vle.exports={axisRefDescription:function(e,t,r){return["If set to a",e,"axis id (e.g. *"+e+"* or","*"+e+"2*), the `"+e+"` position refers to a",e,"coordinate. If set to *paper*, the `"+e+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+r+"). If set to a",e,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+e+"2 domain* refers to the domain of the second",e," axis and a",e,"position of 0.5 refers to the","point between the",t,"and the",r,"of the domain of the","second",e,"axis."].join(" ")}}});var Lx=ne((zrr,Yle)=>{"use strict";var Hle=T7(),Gle=ll(),R4=wf(),Out=So().templatedArray,qrr=lM();Yle.exports=Out("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:Gle({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:Hle.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:Hle.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",R4.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",R4.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",R4.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",R4.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:Gle({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})});var G0=ne((Orr,Wle)=>{"use strict";Wle.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}});var Y0=ne((Brr,Xle)=>{"use strict";Xle.exports=function(t){return{valType:"color",editType:"style",anim:!0}}});var cu=ne((Nrr,$le)=>{"use strict";var Zle=kl().axisHoverFormat,But=Ba().texttemplateAttrs,Nut=Ba().hovertemplateAttrs,jle=Ps(),Uut=ll(),Vut=hc().dash,Hut=hc().pattern,Gut=aa(),Yut=G0(),D4=oa().extendFlat,Wut=Y0();function Kle(e){return{valType:"any",dflt:0,editType:"calc"}}function Jle(e){return{valType:"any",editType:"calc"}}function Qle(e){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}$le.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:Kle("x"),yperiod:Kle("y"),xperiod0:Jle("x0"),yperiod0:Jle("y0"),xperiodalignment:Qle("x"),yperiodalignment:Qle("y"),xhoverformat:Zle("x"),yhoverformat:Zle("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:But({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:Nut({},{keys:Yut.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:D4({},Vut,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:Wut(!0),fillgradient:D4({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:Hut,marker:D4({symbol:{valType:"enumerated",values:Gut.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:D4({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},jle("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},jle("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:Uut({editType:"calc",colorEditType:"style",arrayOk:!0})}});var A7=ne((Vrr,rue)=>{"use strict";var eue=Lx(),tue=cu().line,Xut=hc().dash,I4=oa().extendFlat,Zut=Xs().overrideAll,jut=So().templatedArray,Urr=lM();rue.exports=Zut(jut("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:I4({},eue.xref,{}),yref:I4({},eue.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:tue.color,width:I4({},tue.width,{min:1,dflt:1}),dash:I4({},Xut,{dflt:"dot"})}}),"arraydraw","from-root")});var oue=ne((Hrr,aue)=>{"use strict";var nue=Wt(),F4=Xi(),Kut=ch(),Jut=A7(),iue=ym();aue.exports=function(t,r){Kut(t,r,{name:"selections",handleItemDefaults:Qut});for(var i=r.selections,n=0;n<i.length;n++){var a=i[n];a&&a.path===void 0&&(a.x0===void 0||a.x1===void 0||a.y0===void 0||a.y1===void 0)&&(r.selections[n]=null)}};function Qut(e,t,r){function i(x,E){return nue.coerce(e,t,Jut,x,E)}var n=i("path"),a=n?"path":"rect",o=i("type",a),s=o!=="path";s&&delete t.path,i("opacity"),i("line.color"),i("line.width"),i("line.dash");for(var l=["x","y"],u=0;u<2;u++){var f=l[u],c={_fullLayout:r},h,v,d,_=F4.coerceRef(e,t,c,f);if(h=F4.getFromId(c,_),h._selectionIndices.push(t._index),d=iue.rangeToShapePosition(h),v=iue.shapePositionToRange(h),s){var T=f+"0",p=f+"1",M=e[T],b=e[p];e[T]=v(e[T],!0),e[p]=v(e[p],!0),F4.coercePosition(t,c,i,_,T),F4.coercePosition(t,c,i,_,p);var w=t[T],k=t[p];w!==void 0&&k!==void 0&&(t[T]=d(w),t[p]=d(k),e[T]=M,e[p]=b)}}s&&nue.noneOrAll(e,t,["x0","x1","y0","y1"])}});var lue=ne((Grr,sue)=>{"use strict";sue.exports=function(t,r,i){i("newselection.mode");var n=i("newselection.line.width");n&&(i("newselection.line.color"),i("newselection.line.dash")),i("activeselection.fillcolor"),i("activeselection.opacity")}});var uM=ne((Yrr,cue)=>{"use strict";var $ut=wi(),uue=Wt(),fue=zl();cue.exports=function(t){return function(i,n){var a=i[t];if(Array.isArray(a))for(var o=$ut.subplotsRegistry.cartesian,s=o.idRegex,l=n._subplots,u=l.xaxis,f=l.yaxis,c=l.cartesian,h=n._has("cartesian")||n._has("gl2d"),v=0;v<a.length;v++){var d=a[v];if(uue.isPlainObject(d)){var _=fue.cleanId(d.xref,"x",!1),T=fue.cleanId(d.yref,"y",!1),p=s.x.test(_),M=s.y.test(T);if(p||M){h||uue.pushUnique(n._basePlotModules,o);var b=!1;p&&u.indexOf(_)===-1&&(u.push(_),b=!0),M&&f.indexOf(T)===-1&&(f.push(T),b=!0),b&&p&&M&&c.push(_+T)}}}}}});var Mf=ne((Wrr,vue)=>{"use strict";var hue=f7(),fM=Nle();vue.exports={moduleType:"component",name:"selections",layoutAttributes:A7(),supplyLayoutDefaults:oue(),supplyDrawNewSelectionDefaults:lue(),includeBasePlot:uM()("selections"),draw:hue.draw,drawOne:hue.drawOne,reselect:fM.reselect,prepSelect:fM.prepSelect,clearOutline:fM.clearOutline,clearSelectionsCache:fM.clearSelectionsCache,selectOnClick:fM.selectOnClick}});var P7=ne((Xrr,Due)=>{"use strict";var C7=Ai(),lp=Wt(),due=lp.numberFormat,eft=Xf(),tft=qA(),q4=wi(),Tue=lp.strTranslate,rft=Es(),pue=_i(),_m=aa(),nft=Ol(),gue=Xi(),ift=e0(),aft=Hh(),Aue=r0(),z4=Aue.selectingOrDrawing,oft=Aue.freeMode,sft=Tf().FROM_TL,lft=NA(),uft=XA().redrawReglTraces,fft=Zs(),S7=zl().getFromId,cft=Mf().prepSelect,hft=Mf().clearOutline,vft=Mf().selectOnClick,M7=n7(),L7=wf(),yue=L7.MINDRAG,xv=L7.MINZOOM,mue=!0;function dft(e,t,r,i,n,a,o,s){var l=e._fullLayout._zoomlayer,u=o+s==="nsew",f=(o+s).length===1,c,h,v,d,_,T,p,M,b,w,k,x,E,S,g,C,A,P,D,z,O,V,B;r+=t.yaxis._shift;function F(){if(c=t.xaxis,h=t.yaxis,b=c._length,w=h._length,p=c._offset,M=h._offset,v={},v[c._id]=c,d={},d[h._id]=h,o&&s)for(var rt=t.overlays,We=0;We<rt.length;We++){var ht=rt[We].xaxis;v[ht._id]=ht;var mt=rt[We].yaxis;d[mt._id]=mt}_=wue(v),T=wue(d),E=xue(_,s),S=xue(T,o),g=!S&&!E,x=bue(e,e._fullLayout._axisMatchGroups,v,d),k=bue(e,e._fullLayout._axisConstraintGroups,v,d,x);var er=k.isSubplotConstrained||x.isSubplotConstrained;C=s||er,A=o||er;var $t=e._fullLayout;P=$t._has("scattergl"),D=$t._has("splom"),z=$t._has("svg")}F();var N=yft(S+E,e._fullLayout.dragmode,u),Z=Sue(t,o+s+"drag",N,r,i,n,a);if(g&&!u)return Z.onmousedown=null,Z.style.pointerEvents="none",Z;var J={element:Z,gd:e,plotinfo:t};J.prepFn=function(rt,We,ht){var mt=J.dragmode,er=e._fullLayout.dragmode;er!==mt&&(J.dragmode=er),F(),V=e._fullLayout._invScaleX,B=e._fullLayout._invScaleY,g||(u?rt.shiftKey?er==="pan"?er="zoom":z4(er)||(er="pan"):rt.ctrlKey&&(er="pan"):er="pan"),oft(er)?J.minDrag=1:J.minDrag=void 0,z4(er)?(J.xaxes=_,J.yaxes=T,cft(rt,We,ht,J,er)):(J.clickFn=ue,z4(mt)&&re(),g||(er==="zoom"?(J.moveFn=we,J.doneFn=qe,J.minDrag=1,le(rt,We,ht)):er==="pan"&&(J.moveFn=je,J.doneFn=Me))),e._fullLayout._redrag=function(){var $t=e._dragdata;if($t&&$t.element===Z){var cr=e._fullLayout.dragmode;z4(cr)||(F(),Ze([0,0,b,w]),J.moveFn($t.dx,$t.dy))}}};function re(){J.plotinfo.selection=!1,hft(e)}function ue(rt,We){var ht=J.gd;if(ht._fullLayout._activeShapeIndex>=0){ht._fullLayout._deactivateShape(ht);return}var mt=ht._fullLayout.clickmode;if(k7(ht),rt===2&&!f&&Lt(),u)mt.indexOf("select")>-1&&vft(We,ht,_,T,t.id,J),mt.indexOf("event")>-1&&nft.click(ht,We,t.id);else if(rt===1&&f){var er=o?h:c,$t=o==="s"||s==="w"?0:1,cr=er._name+".range["+$t+"]",or=pft(er,$t),vr="left",Ot="middle";if(er.fixedrange)return;o?(Ot=o==="n"?"top":"bottom",er.side==="right"&&(vr="right")):s==="e"&&(vr="right"),ht._context.showAxisRangeEntryBoxes&&C7.select(Z).call(rft.makeEditable,{gd:ht,immediate:!0,background:ht._fullLayout.paper_bgcolor,text:String(or),fill:er.tickfont?er.tickfont.color:"#444",horizontalAlign:vr,verticalAlign:Ot}).on("edit",function(yt){var Et=er.d2r(yt);Et!==void 0&&q4.call("_guiRelayout",ht,cr,Et)})}}aft.init(J);var fe,K,X,ae,oe,me,xe,ce,ie,ge;function le(rt,We,ht){var mt=Z.getBoundingClientRect();fe=We-mt.left,K=ht-mt.top,e._fullLayout._calcInverseTransform(e);var er=lp.apply3DTransform(e._fullLayout._invTransform)(fe,K);fe=er[0],K=er[1],X={l:fe,r:fe,w:0,t:K,b:K,h:0},ae=e._hmpixcount?e._hmlumcount/e._hmpixcount:eft(e._fullLayout.plot_bgcolor).getLuminance(),oe="M0,0H"+b+"V"+w+"H0V0",me=!1,xe="xy",ge=!1,ce=Eue(l,ae,p,M,oe),ie=kue(l,p,M)}function we(rt,We){if(e._transitioningWithDuration)return!1;var ht=Math.max(0,Math.min(b,V*rt+fe)),mt=Math.max(0,Math.min(w,B*We+K)),er=Math.abs(ht-fe),$t=Math.abs(mt-K);X.l=Math.min(fe,ht),X.r=Math.max(fe,ht),X.t=Math.min(K,mt),X.b=Math.max(K,mt);function cr(){xe="",X.r=X.l,X.t=X.b,ie.attr("d","M0,0Z")}if(k.isSubplotConstrained)er>xv||$t>xv?(xe="xy",er/b>$t/w?($t=er*w/b,K>mt?X.t=K-$t:X.b=K+$t):(er=$t*b/w,fe>ht?X.l=fe-er:X.r=fe+er),ie.attr("d",O4(X))):cr();else if(x.isSubplotConstrained)if(er>xv||$t>xv){xe="xy";var or=Math.min(X.l/b,(w-X.b)/w),vr=Math.max(X.r/b,(w-X.t)/w);X.l=or*b,X.r=vr*b,X.b=(1-or)*w,X.t=(1-vr)*w,ie.attr("d",O4(X))}else cr();else!S||$t<Math.min(Math.max(er*.6,yue),xv)?er<yue||!E?cr():(X.t=0,X.b=w,xe="x",ie.attr("d",mft(X,K))):!E||er<Math.min($t*.6,xv)?(X.l=0,X.r=b,xe="y",ie.attr("d",xft(X,fe))):(xe="xy",ie.attr("d",O4(X)));X.w=X.r-X.l,X.h=X.b-X.t,xe&&(ge=!0),e._dragged=ge,Cue(ce,ie,X,oe,me,ae),Re(),e.emit("plotly_relayouting",O),me=!0}function Re(){O={},(xe==="xy"||xe==="x")&&(E7(_,X.l/b,X.r/b,O,k.xaxes),_t("x",O)),(xe==="xy"||xe==="y")&&(E7(T,(w-X.b)/w,(w-X.t)/w,O,k.yaxes),_t("y",O))}function qe(){Re(),k7(e),Me(),Pue(e)}var et=[0,0,b,w],Pe=null,Ie=L7.REDRAWDELAY,ut=t.mainplot?e._fullLayout._plots[t.mainplot]:t;function ft(rt){if(!e._context._scrollZoom.cartesian&&!e._fullLayout._enablescrollzoom)return;if(re(),e._transitioningWithDuration){rt.preventDefault(),rt.stopPropagation();return}F(),clearTimeout(Pe);var We=-rt.deltaY;if(isFinite(We)||(We=rt.wheelDelta/10),!isFinite(We)){lp.log("Did not find wheel motion attributes: ",rt);return}var ht=Math.exp(-Math.min(Math.max(We,-20),20)/200),mt=ut.draglayer.select(".nsewdrag").node().getBoundingClientRect(),er=(rt.clientX-mt.left)/mt.width,$t=(mt.bottom-rt.clientY)/mt.height,cr;function or(vr,Ot,yt){if(vr.fixedrange)return;var Et=lp.simpleMap(vr.range,vr.r2l),Je=Et[0]+(Et[1]-Et[0])*Ot;function Ke(At){return vr.l2r(Je+(At-Je)*yt)}vr.range=Et.map(Ke)}if(C){for(s||(er=.5),cr=0;cr<_.length;cr++)or(_[cr],er,ht);_t("x"),et[2]*=ht,et[0]+=et[2]*er*(1/ht-1)}if(A){for(o||($t=.5),cr=0;cr<T.length;cr++)or(T[cr],$t,ht);_t("y"),et[3]*=ht,et[1]+=et[3]*(1-$t)*(1/ht-1)}Ze(et),Bt(),e.emit("plotly_relayouting",O),Pe=setTimeout(function(){e._fullLayout&&(et=[0,0,b,w],Me())},Ie),rt.preventDefault()}o.length*s.length!==1&&Rue(Z,ft);function je(rt,We){if(rt=rt*V,We=We*B,e._transitioningWithDuration)return;if(e._fullLayout._replotting=!0,E==="ew"||S==="ns"){var ht=E?-rt:0,mt=S?-We:0;if(x.isSubplotConstrained){if(E&&S){var er=(rt/b-We/w)/2;rt=er*b,We=-er*w,ht=-rt,mt=-We}S?ht=-mt*b/w:mt=-ht*w/b}E&&(_ue(_,rt),_t("x")),S&&(_ue(T,We),_t("y")),Ze([ht,mt,b,w]),Bt(),e.emit("plotly_relayouting",O);return}function $t(Ke,At,Ee){for(var de=1-At,Te,nt,Mt=0;Mt<Ke.length;Mt++){var Kt=Ke[Mt];if(!Kt.fixedrange){Te=Kt,nt=Kt._rl[de]+(Kt._rl[At]-Kt._rl[de])/gft(Ee/Kt._length);var Jt=Kt.l2r(nt);Jt!==!1&&Jt!==void 0&&(Kt.range[At]=Jt)}}return Te._length*(Te._rl[At]-nt)/(Te._rl[At]-Te._rl[de])}var cr=E==="w"==(S==="n")?1:-1;if(E&&S&&(k.isSubplotConstrained||x.isSubplotConstrained)){var or=(rt/b+cr*We/w)/2;rt=or*b,We=cr*or*w}var vr,Ot;if(E==="w"?rt=$t(_,0,rt):E==="e"?rt=$t(_,1,-rt):E||(rt=0),S==="n"?We=$t(T,1,We):S==="s"?We=$t(T,0,-We):S||(We=0),vr=E==="w"?rt:0,Ot=S==="n"?We:0,k.isSubplotConstrained&&!x.isSubplotConstrained||x.isSubplotConstrained&&E&&S&&cr>0){var yt;if(x.isSubplotConstrained||!E&&S.length===1){for(yt=0;yt<_.length;yt++)_[yt].range=_[yt]._r.slice(),M7(_[yt],1-We/w);rt=We*b/w,vr=rt/2}if(x.isSubplotConstrained||!S&&E.length===1){for(yt=0;yt<T.length;yt++)T[yt].range=T[yt]._r.slice(),M7(T[yt],1-rt/b);We=rt*w/b,Ot=We/2}}(!x.isSubplotConstrained||!S)&&_t("x"),(!x.isSubplotConstrained||!E)&&_t("y");var Et=b-rt,Je=w-We;x.isSubplotConstrained&&!(E&&S)&&(E?(Ot=vr?0:rt*w/b,Je=Et*w/b):(vr=Ot?0:We*b/w,Et=Je*b/w)),Ze([vr,Ot,Et,Je]),Bt(),e.emit("plotly_relayouting",O)}function _t(rt,We){for(var ht=x.isSubplotConstrained?{x:T,y:_}[rt]:x[rt+"axes"],mt=x.isSubplotConstrained?{x:_,y:T}[rt]:[],er=0;er<ht.length;er++){var $t=ht[er],cr=$t._id,or=x.xLinks[cr]||x.yLinks[cr],vr=mt[0]||v[or]||d[or];vr&&(We?(We[$t._name+".range[0]"]=We[vr._name+".range[0]"],We[$t._name+".range[1]"]=We[vr._name+".range[1]"]):$t.range=vr.range.slice())}}function Bt(){var rt=[],We;function ht(cr){for(We=0;We<cr.length;We++)cr[We].fixedrange||rt.push(cr[We]._id)}function mt(cr,or){for(We=0;We<cr.length;We++){var vr=cr[We],Ot=vr[or];!vr.fixedrange&&Ot.tickmode==="sync"&&rt.push(Ot._id)}}for(C&&(ht(_),ht(k.xaxes),ht(x.xaxes),mt(t.overlays,"xaxis")),A&&(ht(T),ht(k.yaxes),ht(x.yaxes),mt(t.overlays,"yaxis")),O={},We=0;We<rt.length;We++){var er=rt[We],$t=S7(e,er);gue.drawOne(e,$t,{skipTitle:!0}),O[$t._name+".range[0]"]=$t.range[0],O[$t._name+".range[1]"]=$t.range[1]}gue.redrawComponents(e,rt)}function Lt(){if(!e._transitioningWithDuration){var rt=e._context.doubleClick,We=[];E&&(We=We.concat(_)),S&&(We=We.concat(T)),x.xaxes&&(We=We.concat(x.xaxes)),x.yaxes&&(We=We.concat(x.yaxes));var ht={},mt,er;if(rt==="reset+autosize")for(rt="autosize",er=0;er<We.length;er++){mt=We[er];var $t=mt._rangeInitial0,cr=mt._rangeInitial1,or=$t!==void 0||cr!==void 0;if(or&&($t!==void 0&&$t!==mt.range[0]||cr!==void 0&&cr!==mt.range[1])||!or&&mt.autorange!==!0){rt="reset";break}}if(rt==="autosize")for(er=0;er<We.length;er++)mt=We[er],mt.fixedrange||(ht[mt._name+".autorange"]=!0);else if(rt==="reset"){for((E||k.isSubplotConstrained)&&(We=We.concat(k.xaxes)),S&&!k.isSubplotConstrained&&(We=We.concat(k.yaxes)),k.isSubplotConstrained&&(E?S||(We=We.concat(T)):We=We.concat(_)),er=0;er<We.length;er++)if(mt=We[er],!mt.fixedrange){var vr=mt._name,Ot=mt._autorangeInitial;mt._rangeInitial0===void 0&&mt._rangeInitial1===void 0?ht[vr+".autorange"]=!0:mt._rangeInitial0===void 0?(ht[vr+".autorange"]=Ot,ht[vr+".range"]=[null,mt._rangeInitial1]):mt._rangeInitial1===void 0?(ht[vr+".range"]=[mt._rangeInitial0,null],ht[vr+".autorange"]=Ot):ht[vr+".range"]=[mt._rangeInitial0,mt._rangeInitial1]}}e.emit("plotly_doubleclick",null),q4.call("_guiRelayout",e,ht)}}function Me(){Ze([0,0,b,w]),lp.syncOrAsync([fft.previousPromises,function(){e._fullLayout._replotting=!1,q4.call("_guiRelayout",e,O)}],e)}function Ze(rt){var We=e._fullLayout,ht=We._plots,mt=We._subplots.cartesian,er,$t,cr,or;if(D&&q4.subplotsRegistry.splom.drag(e),P){for(er=0;er<mt.length;er++)if($t=ht[mt[er]],cr=$t.xaxis,or=$t.yaxis,$t._scene){var vr=lp.simpleMap(cr.range,cr.r2l),Ot=lp.simpleMap(or.range,or.r2l);cr.limitRange&&cr.limitRange(),or.limitRange&&or.limitRange(),vr=cr.range,Ot=or.range,$t._scene.update({range:[vr[0],Ot[0],vr[1],Ot[1]]})}}if((D||P)&&(lft(e),uft(e)),z){var yt=rt[2]/c._length,Et=rt[3]/h._length;for(er=0;er<mt.length;er++){$t=ht[mt[er]],cr=$t.xaxis,or=$t.yaxis;var Je=(C||x.isSubplotConstrained)&&!cr.fixedrange&&v[cr._id],Ke=(A||x.isSubplotConstrained)&&!or.fixedrange&&d[or._id],At,Ee,de,Te;if(Je?(At=yt,de=s||x.isSubplotConstrained?rt[0]:vt(cr,At)):x.xaHash[cr._id]?(At=yt,de=rt[0]*cr._length/c._length):x.yaHash[cr._id]?(At=Et,de=S==="ns"?-rt[1]*cr._length/h._length:vt(cr,At,{n:"top",s:"bottom"}[S])):(At=dt(cr,yt,Et),de=it(cr,At)),At>1&&(cr.maxallowed!==void 0&&C===(cr.range[0]<cr.range[1]?"e":"w")||cr.minallowed!==void 0&&C===(cr.range[0]<cr.range[1]?"w":"e"))&&(At=1,de=0),Ke?(Ee=Et,Te=o||x.isSubplotConstrained?rt[1]:vt(or,Ee)):x.yaHash[or._id]?(Ee=Et,Te=rt[1]*or._length/h._length):x.xaHash[or._id]?(Ee=yt,Te=E==="ew"?-rt[0]*or._length/c._length:vt(or,Ee,{e:"right",w:"left"}[E])):(Ee=dt(or,yt,Et),Te=it(or,Ee)),Ee>1&&(or.maxallowed!==void 0&&A===(or.range[0]<or.range[1]?"n":"s")||or.minallowed!==void 0&&A===(or.range[0]<or.range[1]?"s":"n"))&&(Ee=1,Te=0),!(!At&&!Ee)){At||(At=1),Ee||(Ee=1);var nt=cr._offset-de/At,Mt=or._offset-Te/Ee;$t.clipRect.call(_m.setTranslate,de,Te).call(_m.setScale,At,Ee),$t.plot.call(_m.setTranslate,nt,Mt).call(_m.setScale,1/At,1/Ee),(At!==$t.xScaleFactor||Ee!==$t.yScaleFactor)&&(_m.setPointGroupScale($t.zoomScalePts,At,Ee),_m.setTextPointsScale($t.zoomScaleTxt,At,Ee)),_m.hideOutsideRangePoints($t.clipOnAxisFalseTraces,$t),$t.xScaleFactor=At,$t.yScaleFactor=Ee}}}}function dt(rt,We,ht){return rt.fixedrange?0:C&&k.xaHash[rt._id]?We:A&&(k.isSubplotConstrained?k.xaHash:k.yaHash)[rt._id]?ht:0}function it(rt,We){return We?(rt.range=rt._r.slice(),M7(rt,We),vt(rt,We)):0}function vt(rt,We,ht){return rt._length*(1-We)*sft[ht||rt.constraintoward||"middle"]}return Z}function Mue(e,t,r,i){var n=lp.ensureSingle(e.draglayer,t,r,function(a){a.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",e.id)});return n.call(ift,i),n.node()}function Sue(e,t,r,i,n,a,o){var s=Mue(e,"rect",t,r);return C7.select(s).call(_m.setRect,i,n,a,o),s}function xue(e,t){for(var r=0;r<e.length;r++)if(!e[r].fixedrange)return t;return""}function pft(e,t){var r=e.range[t],i=Math.abs(r-e.range[1-t]),n;return e.type==="date"?r:e.type==="log"?(n=Math.ceil(Math.max(0,-Math.log(i)/Math.LN10))+3,due("."+n+"g")(Math.pow(10,r))):(n=Math.floor(Math.log(Math.abs(r))/Math.LN10)-Math.floor(Math.log(i)/Math.LN10)+4,due("."+String(n)+"g")(r))}function E7(e,t,r,i,n){for(var a=0;a<e.length;a++){var o=e[a];if(!o.fixedrange)if(o.rangebreaks){var s=o._id.charAt(0)==="y",l=s?1-t:t,u=s?1-r:r;i[o._name+".range[0]"]=o.l2r(o.p2l(l*o._length)),i[o._name+".range[1]"]=o.l2r(o.p2l(u*o._length))}else{var f=o._rl[0],c=o._rl[1]-f;i[o._name+".range[0]"]=o.l2r(f+c*t),i[o._name+".range[1]"]=o.l2r(f+c*r)}}if(n&&n.length){var h=(t+(1-r))/2;E7(n,h,1-h,i,[])}}function _ue(e,t){for(var r=0;r<e.length;r++){var i=e[r];if(!i.fixedrange){if(i.rangebreaks){var n=0,a=i._length,o=i.p2l(n+t)-i.p2l(n),s=i.p2l(a+t)-i.p2l(a),l=(o+s)/2;i.range=[i.l2r(i._rl[0]-l),i.l2r(i._rl[1]-l)]}else i.range=[i.l2r(i._rl[0]-t/i._m),i.l2r(i._rl[1]-t/i._m)];i.limitRange&&i.limitRange()}}}function gft(e){return 1-(e>=0?Math.min(e,.9):1/(1/Math.max(e,-.3)+3.222))}function yft(e,t,r){return e?e==="nsew"?r?"":t==="pan"?"move":"crosshair":e.toLowerCase()+"-resize":"pointer"}function Eue(e,t,r,i,n){return e.append("path").attr("class","zoombox").style({fill:t>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",Tue(r,i)).attr("d",n+"Z")}function kue(e,t,r){return e.append("path").attr("class","zoombox-corners").style({fill:pue.background,stroke:pue.defaultLine,"stroke-width":1,opacity:0}).attr("transform",Tue(t,r)).attr("d","M0,0Z")}function Cue(e,t,r,i,n,a){e.attr("d",i+"M"+r.l+","+r.t+"v"+r.h+"h"+r.w+"v-"+r.h+"h-"+r.w+"Z"),Lue(e,t,n,a)}function Lue(e,t,r,i){r||(e.transition().style("fill",i>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),t.transition().style("opacity",1).duration(200))}function k7(e){C7.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Pue(e){mue&&e.data&&e._context.showTips&&(lp.notifier(lp._(e,"Double-click to zoom back out"),"long"),mue=!1)}function mft(e,t){return"M"+(e.l-.5)+","+(t-xv-.5)+"h-3v"+(2*xv+1)+"h3ZM"+(e.r+.5)+","+(t-xv-.5)+"h3v"+(2*xv+1)+"h-3Z"}function xft(e,t){return"M"+(t-xv-.5)+","+(e.t-.5)+"v-3h"+(2*xv+1)+"v3ZM"+(t-xv-.5)+","+(e.b+.5)+"v3h"+(2*xv+1)+"v-3Z"}function O4(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,xv)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function bue(e,t,r,i,n){for(var a=!1,o={},s={},l,u,f,c,h=(n||{}).xaHash,v=(n||{}).yaHash,d=0;d<t.length;d++){var _=t[d];for(l in r)if(_[l]){for(f in _)!(n&&(h[f]||v[f]))&&!(f.charAt(0)==="x"?r:i)[f]&&(o[f]=l);for(u in i)!(n&&(h[u]||v[u]))&&_[u]&&(a=!0)}for(u in i)if(_[u])for(c in _)!(n&&(h[c]||v[c]))&&!(c.charAt(0)==="x"?r:i)[c]&&(s[c]=u)}a&&(lp.extendFlat(o,s),s={});var T={},p=[];for(f in o){var M=S7(e,f);p.push(M),T[M._id]=M}var b={},w=[];for(c in s){var k=S7(e,c);w.push(k),b[k._id]=k}return{xaHash:T,yaHash:b,xaxes:p,yaxes:w,xLinks:o,yLinks:s,isSubplotConstrained:a}}function Rue(e,t){if(!tft)e.onwheel!==void 0?e.onwheel=t:e.onmousewheel!==void 0?e.onmousewheel=t:e.isAddedWheelEvent||(e.isAddedWheelEvent=!0,e.addEventListener("wheel",t,{passive:!1}));else{var r=e.onwheel!==void 0?"wheel":"mousewheel";e._onwheel&&e.removeEventListener(r,e._onwheel),e._onwheel=t,e.addEventListener(r,t,{passive:!1})}}function wue(e){var t=[];for(var r in e)t.push(e[r]);return t}Due.exports={makeDragBox:dft,makeDragger:Mue,makeRectDragger:Sue,makeZoombox:Eue,makeCorners:kue,updateZoombox:Cue,xyCorners:O4,transitionZoombox:Lue,removeZoombox:k7,showDoubleClickNotifier:Pue,attachWheelEventHandler:Rue}});var R7=ne(N4=>{"use strict";var _ft=Ai(),B4=Ol(),bft=Hh(),wft=e0(),i0=P7().makeDragBox,ec=wf().DRAGGERSIZE;N4.initInteractions=function(t){var r=t._fullLayout;if(t._context.staticPlot){_ft.select(t).selectAll(".drag").remove();return}if(!(!r._has("cartesian")&&!r._has("splom"))){var i=Object.keys(r._plots||{}).sort(function(a,o){if((r._plots[a].mainplot&&!0)===(r._plots[o].mainplot&&!0)){var s=a.split("y"),l=o.split("y");return s[0]===l[0]?Number(s[1]||1)-Number(l[1]||1):Number(s[0]||1)-Number(l[0]||1)}return r._plots[a].mainplot?1:-1});i.forEach(function(a){var o=r._plots[a],s=o.xaxis,l=o.yaxis;if(!o.mainplot){var u=i0(t,o,s._offset,l._offset,s._length,l._length,"ns","ew");u.onmousemove=function(h){t._fullLayout._rehover=function(){t._fullLayout._hoversubplot===a&&t._fullLayout._plots[a]&&B4.hover(t,h,a)},B4.hover(t,h,a),t._fullLayout._lasthover=u,t._fullLayout._hoversubplot=a},u.onmouseout=function(h){t._dragging||(t._fullLayout._hoversubplot=null,bft.unhover(t,h))},t._context.showAxisDragHandles&&(i0(t,o,s._offset-ec,l._offset-ec,ec,ec,"n","w"),i0(t,o,s._offset+s._length,l._offset-ec,ec,ec,"n","e"),i0(t,o,s._offset-ec,l._offset+l._length,ec,ec,"s","w"),i0(t,o,s._offset+s._length,l._offset+l._length,ec,ec,"s","e"))}if(t._context.showAxisDragHandles){if(a===s._mainSubplot){var f=s._mainLinePosition;s.side==="top"&&(f-=ec),i0(t,o,s._offset+s._length*.1,f,s._length*.8,ec,"","ew"),i0(t,o,s._offset,f,s._length*.1,ec,"","w"),i0(t,o,s._offset+s._length*.9,f,s._length*.1,ec,"","e")}if(a===l._mainSubplot){var c=l._mainLinePosition;l.side!=="right"&&(c-=ec),i0(t,o,c,l._offset+l._length*.1,ec,l._length*.8,"ns",""),i0(t,o,c,l._offset+l._length*.9,ec,l._length*.1,"s",""),i0(t,o,c,l._offset,ec,l._length*.1,"n","")}}});var n=r._hoverlayer.node();n.onmousemove=function(a){a.target=t._fullLayout._lasthover,B4.hover(t,a,r._hoversubplot)},n.onclick=function(a){a.target=t._fullLayout._lasthover,B4.click(t,a)},n.onmousedown=function(a){t._fullLayout._lasthover.onmousedown(a)},N4.updateFx(t)}};N4.updateFx=function(e){var t=e._fullLayout,r=t.dragmode==="pan"?"move":"crosshair";wft(t._draggers,r)}});var que=ne((jrr,Fue)=>{"use strict";var Iue=wi();Fue.exports=function(t){for(var r=Iue.layoutArrayContainers,i=Iue.layoutArrayRegexes,n=t.split("[")[0],a,o,s=0;s<i.length;s++)if(o=t.match(i[s]),o&&o.index===0){a=o[0];break}if(a||(a=r[r.indexOf(n)]),!a)return!1;var l=t.substr(a.length);return l?(o=l.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),o?{array:a,index:Number(o[1]),property:o[3]||""}:!1):{array:a,index:"",property:""}}});var Oue=ne(hM=>{"use strict";var Tft=Lg(),D7=zk(),cM=Wy(),Aft=Kk().sorterAsc,I7=wi();hM.containerArrayMatch=que();var Mft=hM.isAddVal=function(t){return t==="add"||Tft(t)},zue=hM.isRemoveVal=function(t){return t===null||t==="remove"};hM.applyContainerArrayChanges=function(t,r,i,n,a){var o=r.astr,s=I7.getComponentMethod(o,"supplyLayoutDefaults"),l=I7.getComponentMethod(o,"draw"),u=I7.getComponentMethod(o,"drawOne"),f=n.replot||n.recalc||s===D7||l===D7,c=t.layout,h=t._fullLayout;if(i[""]){Object.keys(i).length>1&&cM.warn("Full array edits are incompatible with other edits",o);var v=i[""][""];if(zue(v))r.set(null);else if(Array.isArray(v))r.set(v);else return cM.warn("Unrecognized full array edit value",o,v),!0;return f?!1:(s(c,h),l(t),!0)}var d=Object.keys(i).map(Number).sort(Aft),_=r.get(),T=_||[],p=a(h,o).get(),M=[],b=-1,w=T.length,k,x,E,S,g,C,A,P;for(k=0;k<d.length;k++){if(E=d[k],S=i[E],g=Object.keys(S),C=S[""],A=Mft(C),E<0||E>T.length-(A?0:1)){cM.warn("index out of range",o,E);continue}if(C!==void 0)g.length>1&&cM.warn("Insertion & removal are incompatible with edits to the same index.",o,E),zue(C)?M.push(E):A?(C==="add"&&(C={}),T.splice(E,0,C),p&&p.splice(E,0,{})):cM.warn("Unrecognized full object edit value",o,E,C),b===-1&&(b=E);else for(x=0;x<g.length;x++)P=o+"["+E+"].",a(T[E],g[x],P).set(S[g[x]])}for(k=M.length-1;k>=0;k--)T.splice(M[k],1),p&&p.splice(M[k],1);if(T.length?_||r.set(T):r.set(null),f)return!1;if(s(c,h),u!==D7){var D;if(b===-1)D=d;else{for(w=Math.max(T.length,w),D=[],k=0;k<d.length&&(E=d[k],!(E>=b));k++)D.push(E);for(k=b;k<w;k++)D.push(k)}for(k=0;k<D.length;k++)u(t,D[k])}else l(t);return!0}});var Yue=ne(up=>{"use strict";var Vue=la(),Sft=bq(),Hue=wi(),bv=Wt(),dM=Zs(),Gue=zl(),Px=_i(),pM=Gue.cleanId,Eft=Gue.getFromTrace,vM=Hue.traceIs;up.clearPromiseQueue=function(e){Array.isArray(e._promises)&&e._promises.length>0&&bv.log("Clearing previous rejected promises from queue."),e._promises=[]};up.cleanLayout=function(e){var t,r;e||(e={}),e.xaxis1&&(e.xaxis||(e.xaxis=e.xaxis1),delete e.xaxis1),e.yaxis1&&(e.yaxis||(e.yaxis=e.yaxis1),delete e.yaxis1),e.scene1&&(e.scene||(e.scene=e.scene1),delete e.scene1);var i=(dM.subplotsRegistry.cartesian||{}).attrRegex,n=(dM.subplotsRegistry.polar||{}).attrRegex,a=(dM.subplotsRegistry.ternary||{}).attrRegex,o=(dM.subplotsRegistry.gl3d||{}).attrRegex,s=Object.keys(e);for(t=0;t<s.length;t++){var l=s[t];if(i&&i.test(l)){var u=e[l];u.anchor&&u.anchor!=="free"&&(u.anchor=pM(u.anchor)),u.overlaying&&(u.overlaying=pM(u.overlaying)),u.type||(u.isdate?u.type="date":u.islog?u.type="log":u.isdate===!1&&u.islog===!1&&(u.type="linear")),(u.autorange==="withzero"||u.autorange==="tozero")&&(u.autorange=!0,u.rangemode="tozero"),u.insiderange&&delete u.range,delete u.islog,delete u.isdate,delete u.categories,U4(u,"domain")&&delete u.domain,u.autotick!==void 0&&(u.tickmode===void 0&&(u.tickmode=u.autotick?"auto":"linear"),delete u.autotick),_v(u)}else if(n&&n.test(l)){var f=e[l];_v(f.radialaxis)}else if(a&&a.test(l)){var c=e[l];_v(c.aaxis),_v(c.baxis),_v(c.caxis)}else if(o&&o.test(l)){var h=e[l],v=h.cameraposition;if(Array.isArray(v)&&v[0].length===4){var d=v[0],_=v[1],T=v[2],p=Sft([],d),M=[];for(r=0;r<3;++r)M[r]=_[r]+T*p[2+4*r];h.camera={eye:{x:M[0],y:M[1],z:M[2]},center:{x:_[0],y:_[1],z:_[2]},up:{x:0,y:0,z:1}},delete h.cameraposition}_v(h.xaxis),_v(h.yaxis),_v(h.zaxis)}}var b=Array.isArray(e.annotations)?e.annotations.length:0;for(t=0;t<b;t++){var w=e.annotations[t];bv.isPlainObject(w)&&(w.ref&&(w.ref==="paper"?(w.xref="paper",w.yref="paper"):w.ref==="data"&&(w.xref="x",w.yref="y"),delete w.ref),q2(w,"xref"),q2(w,"yref"))}var k=Array.isArray(e.shapes)?e.shapes.length:0;for(t=0;t<k;t++){var x=e.shapes[t];bv.isPlainObject(x)&&(q2(x,"xref"),q2(x,"yref"))}var E=Array.isArray(e.images)?e.images.length:0;for(t=0;t<E;t++){var S=e.images[t];bv.isPlainObject(S)&&(q2(S,"xref"),q2(S,"yref"))}var g=e.legend;return g&&(g.x>3?(g.x=1.02,g.xanchor="left"):g.x<-2&&(g.x=-.02,g.xanchor="right"),g.y>3?(g.y=1.02,g.yanchor="bottom"):g.y<-2&&(g.y=-.02,g.yanchor="top")),_v(e),e.dragmode==="rotate"&&(e.dragmode="orbit"),Px.clean(e),e.template&&e.template.layout&&up.cleanLayout(e.template.layout),e};function q2(e,t){var r=e[t],i=t.charAt(0);r&&r!=="paper"&&(e[t]=pM(r,i,!0))}function _v(e){e&&((typeof e.title=="string"||typeof e.title=="number")&&(e.title={text:e.title}),t("titlefont","font"),t("titleposition","position"),t("titleside","side"),t("titleoffset","offset"));function t(r,i){var n=e[r],a=e.title&&e.title[i];n&&!a&&(e.title||(e.title={}),e.title[i]=e[r],delete e[r])}}up.cleanData=function(e){for(var t=0;t<e.length;t++){var r=e[t],i;if(r.type==="histogramy"&&"xbins"in r&&!("ybins"in r)&&(r.ybins=r.xbins,delete r.xbins),r.error_y&&"opacity"in r.error_y){var n=Px.defaults,a=r.error_y.color||(vM(r,"bar")?Px.defaultLine:n[t%n.length]);r.error_y.color=Px.addOpacity(Px.rgb(a),Px.opacity(a)*r.error_y.opacity),delete r.error_y.opacity}if("bardir"in r&&(r.bardir==="h"&&(vM(r,"bar")||r.type.substr(0,9)==="histogram")&&(r.orientation="h",up.swapXYData(r)),delete r.bardir),r.type==="histogramy"&&up.swapXYData(r),(r.type==="histogramx"||r.type==="histogramy")&&(r.type="histogram"),"scl"in r&&!("colorscale"in r)&&(r.colorscale=r.scl,delete r.scl),"reversescl"in r&&!("reversescale"in r)&&(r.reversescale=r.reversescl,delete r.reversescl),r.xaxis&&(r.xaxis=pM(r.xaxis,"x")),r.yaxis&&(r.yaxis=pM(r.yaxis,"y")),vM(r,"gl3d")&&r.scene&&(r.scene=dM.subplotsRegistry.gl3d.cleanId(r.scene)),!vM(r,"pie-like")&&!vM(r,"bar-like"))if(Array.isArray(r.textposition))for(i=0;i<r.textposition.length;i++)r.textposition[i]=Nue(r.textposition[i]);else r.textposition&&(r.textposition=Nue(r.textposition));var o=Hue.getModule(r);if(o&&o.colorbar){var s=o.colorbar.container,l=s?r[s]:r;l&&l.colorscale&&(l.colorscale==="YIGnBu"&&(l.colorscale="YlGnBu"),l.colorscale==="YIOrRd"&&(l.colorscale="YlOrRd"))}if(r.type==="surface"&&bv.isPlainObject(r.contours)){var u=["x","y","z"];for(i=0;i<u.length;i++){var f=r.contours[u[i]];bv.isPlainObject(f)&&(f.highlightColor&&(f.highlightcolor=f.highlightColor,delete f.highlightColor),f.highlightWidth&&(f.highlightwidth=f.highlightWidth,delete f.highlightWidth))}}if(r.type==="candlestick"||r.type==="ohlc"){var c=(r.increasing||{}).showlegend!==!1,h=(r.decreasing||{}).showlegend!==!1,v=Bue(r.increasing),d=Bue(r.decreasing);if(v!==!1&&d!==!1){var _=kft(v,d,c,h);_&&(r.name=_)}else(v||d)&&!r.name&&(r.name=v||d)}if(Array.isArray(r.transforms)){var T=r.transforms;for(i=0;i<T.length;i++){var p=T[i];if(bv.isPlainObject(p))switch(p.type){case"filter":p.filtersrc&&(p.target=p.filtersrc,delete p.filtersrc),p.calendar&&(p.valuecalendar||(p.valuecalendar=p.calendar),delete p.calendar);break;case"groupby":if(p.styles=p.styles||p.style,p.styles&&!Array.isArray(p.styles)){var M=p.styles,b=Object.keys(M);p.styles=[];for(var w=0;w<b.length;w++)p.styles.push({target:b[w],value:M[b[w]]})}break}}}U4(r,"line")&&delete r.line,"marker"in r&&(U4(r.marker,"line")&&delete r.marker.line,U4(r,"marker")&&delete r.marker),Px.clean(r),r.autobinx&&(delete r.autobinx,delete r.xbins),r.autobiny&&(delete r.autobiny,delete r.ybins),_v(r),r.colorbar&&_v(r.colorbar),r.marker&&r.marker.colorbar&&_v(r.marker.colorbar),r.line&&r.line.colorbar&&_v(r.line.colorbar),r.aaxis&&_v(r.aaxis),r.baxis&&_v(r.baxis)}};function Bue(e){if(!bv.isPlainObject(e))return!1;var t=e.name;return delete e.name,delete e.showlegend,(typeof t=="string"||typeof t=="number")&&String(t)}function kft(e,t,r,i){if(r&&!i)return e;if(i&&!r||!e.trim())return t;if(!t.trim())return e;var n=Math.min(e.length,t.length),a;for(a=0;a<n&&e.charAt(a)===t.charAt(a);a++);var o=e.substr(0,a);return o.trim()}function Nue(e){var t="middle",r="center";return typeof e=="string"&&(e.indexOf("top")!==-1?t="top":e.indexOf("bottom")!==-1&&(t="bottom"),e.indexOf("left")!==-1?r="left":e.indexOf("right")!==-1&&(r="right")),t+" "+r}function U4(e,t){return t in e&&typeof e[t]=="object"&&Object.keys(e[t]).length===0}up.swapXYData=function(e){var t;if(bv.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(e.z)&&Array.isArray(e.z[0])&&(e.transpose?delete e.transpose:e.transpose=!0),e.error_x&&e.error_y){var r=e.error_y,i="copy_ystyle"in r?r.copy_ystyle:!(r.color||r.thickness||r.width);bv.swapAttrs(e,["error_?.copy_ystyle"]),i&&bv.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])}if(typeof e.hoverinfo=="string"){var n=e.hoverinfo.split("+");for(t=0;t<n.length;t++)n[t]==="x"?n[t]="y":n[t]==="y"&&(n[t]="x");e.hoverinfo=n.join("+")}};up.coerceTraceIndices=function(e,t){if(Vue(t))return[t];if(!Array.isArray(t)||!t.length)return e.data.map(function(n,a){return a});if(Array.isArray(t)){for(var r=[],i=0;i<t.length;i++)bv.isIndex(t[i],e.data.length)?r.push(t[i]):bv.warn("trace index (",t[i],") is not a number or is out of bounds");return r}return t};up.manageArrayContainers=function(e,t,r){var i=e.obj,n=e.parts,a=n.length,o=n[a-1],s=Vue(o);if(s&&t===null){var l=n.slice(0,a-1).join("."),u=bv.nestedProperty(i,l).get();u.splice(o,1)}else s&&e.get()===void 0&&e.get()===void 0&&(r[e.astr]=null),e.set(t)};var Cft=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function Uue(e){var t=e.search(Cft);if(t>0)return e.substr(0,t)}up.hasParent=function(e,t){for(var r=Uue(t);r;){if(r in e)return!0;r=Uue(r)}return!1};var Lft=["x","y","z"];up.clearAxisTypes=function(e,t,r){for(var i=0;i<t.length;i++)for(var n=e._fullData[i],a=0;a<3;a++){var o=Eft(e,n,Lft[a]);if(o&&o.type!=="log"){var s=o._name,l=o._id.substr(1);if(l.substr(0,5)==="scene"){if(r[l]!==void 0)continue;s=l+"."+s}var u=s+".type";r[s]===void 0&&r[u]===void 0&&bv.nestedProperty(e.layout,u).set(null)}}}});var $4=ne(No=>{"use strict";var G4=Ai(),Pft=la(),Rft=Vq(),ci=Wt(),Js=ci.nestedProperty,z7=s2(),wv=Dte(),fp=wi(),J4=tm(),Ta=Zs(),Xh=Xi(),Dft=uO(),Ift=dc(),F7=aa(),Fft=_i(),qft=R7().initInteractions,zft=kd(),Oft=Mf().clearOutline,Kue=$1().dfltConfig,V4=Oue(),tf=Yue(),gs=XA(),bm=Xs(),Bft=wf().AX_NAME_PATTERN,q7=0,Wue=5;function Nft(e,t,r,i){var n;if(e=ci.getGraphDiv(e),z7.init(e),ci.isPlainObject(t)){var a=t;t=a.data,r=a.layout,i=a.config,n=a.frames}var o=z7.triggerHandler(e,"plotly_beforeplot",[t,r,i]);if(o===!1)return Promise.reject();!t&&!r&&!ci.isPlotDiv(e)&&ci.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",e);function s(){if(n)return No.addFrames(e,n)}Que(e,i),r||(r={}),G4.select(e).classed("js-plotly-plot",!0),F7.makeTester(),Array.isArray(e._promises)||(e._promises=[]);var l=(e.data||[]).length===0&&Array.isArray(t);Array.isArray(t)&&(tf.cleanData(t),l?e.data=t:e.data.push.apply(e.data,t),e.empty=!1),(!e.layout||l)&&(e.layout=tf.cleanLayout(r)),Ta.supplyDefaults(e);var u=e._fullLayout,f=u._has("cartesian");u._replotting=!0,(l||u._shouldCreateBgLayer)&&(lct(e),u._shouldCreateBgLayer&&delete u._shouldCreateBgLayer),F7.initGradients(e),F7.initPatterns(e),l&&Xh.saveShowSpikeInitial(e);var c=!e.calcdata||e.calcdata.length!==(e._fullData||[]).length;c&&Ta.doCalcdata(e);for(var h=0;h<e.calcdata.length;h++)e.calcdata[h][0].trace=e._fullData[h];e._context.responsive?e._responsiveChartHandler||(e._responsiveChartHandler=function(){ci.isHidden(e)||Ta.resize(e)},window.addEventListener("resize",e._responsiveChartHandler)):ci.clearResponsive(e);var v=ci.extendFlat({},u._size),d=0;function _(){for(var E=u._basePlotModules,S=0;S<E.length;S++)E[S].drawFramework&&E[S].drawFramework(e);!u._glcanvas&&u._has("gl")&&(u._glcanvas=u._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(P){return P.key}),u._glcanvas.enter().append("canvas").attr("class",function(P){return"gl-canvas gl-canvas-"+P.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var g=e._context.plotGlPixelRatio;if(u._glcanvas){u._glcanvas.attr("width",u.width*g).attr("height",u.height*g).style("width",u.width+"px").style("height",u.height+"px");var C=u._glcanvas.data()[0].regl;if(C&&(Math.floor(u.width*g)!==C._gl.drawingBufferWidth||Math.floor(u.height*g)!==C._gl.drawingBufferHeight)){var A="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(d)ci.error(A);else return ci.log(A+" Clearing graph and plotting again."),Ta.cleanPlot([],{},e._fullData,u),Ta.supplyDefaults(e),u=e._fullLayout,Ta.doCalcdata(e),d++,_()}}return u.modebar.orientation==="h"?u._modebardiv.style("height",null).style("width","100%"):u._modebardiv.style("width",null).style("height",u.height+"px"),Ta.previousPromises(e)}function T(){if(Ta.clearAutoMarginIds(e),gs.drawMarginPushers(e),Xh.allowAutoMargin(e),e._fullLayout.title.text&&e._fullLayout.title.automargin&&Ta.allowAutoMargin(e,"title.automargin"),u._has("pie"))for(var E=e._fullData,S=0;S<E.length;S++){var g=E[S];g.type==="pie"&&g.automargin&&Ta.allowAutoMargin(e,"pie."+g.uid+".automargin")}return Ta.doAutoMargin(e),Ta.previousPromises(e)}function p(){if(Ta.didMarginChange(v,u._size))return ci.syncOrAsync([T,gs.layoutStyles],e)}function M(){if(!c){b();return}return ci.syncOrAsync([fp.getComponentMethod("shapes","calcAutorange"),fp.getComponentMethod("annotations","calcAutorange"),b],e)}function b(){e._transitioning||(gs.doAutoRangeAndConstraints(e),l&&Xh.saveRangeInitial(e),fp.getComponentMethod("rangeslider","calcAutorange")(e))}function w(){return Xh.draw(e,l?"":"redraw")}var k=[Ta.previousPromises,s,_,T,p];f&&k.push(M),k.push(gs.layoutStyles),f&&k.push(w,function(S){var g=S._fullLayout._insideTickLabelsUpdaterange;if(g)return S._fullLayout._insideTickLabelsUpdaterange=void 0,gM(S,g).then(function(){Xh.saveRangeInitial(S,!0)})}),k.push(gs.drawData,gs.finalDraw,qft,Ta.addLinks,Ta.rehover,Ta.redrag,Ta.reselect,Ta.doAutoMargin,Ta.previousPromises);var x=ci.syncOrAsync(k,e);return(!x||!x.then)&&(x=Promise.resolve()),x.then(function(){return yM(e),e})}function yM(e){var t=e._fullLayout;t._redrawFromAutoMarginCount?t._redrawFromAutoMarginCount--:e.emit("plotly_afterplot")}function Uft(e){return ci.extendFlat(Kue,e)}function Jue(e,t){try{e._fullLayout._paper.style("background",t)}catch(r){ci.error(r)}}function Vft(e,t){var r=Fft.combine(t,"white");Jue(e,r)}function Que(e,t){if(!e._context){e._context=ci.extendDeep({},Kue);var r=G4.select("base");e._context._baseUrl=r.size()&&r.attr("href")?window.location.href.split("#")[0]:""}var i=e._context,n,a,o;if(t){for(a=Object.keys(t),n=0;n<a.length;n++)o=a[n],!(o==="editable"||o==="edits")&&o in i&&(o==="setBackground"&&t[o]==="opaque"?i[o]=Vft:i[o]=t[o]);t.plot3dPixelRatio&&!i.plotGlPixelRatio&&(i.plotGlPixelRatio=i.plot3dPixelRatio);var s=t.editable;if(s!==void 0)for(i.editable=s,a=Object.keys(i.edits),n=0;n<a.length;n++)i.edits[a[n]]=s;if(t.edits)for(a=Object.keys(t.edits),n=0;n<a.length;n++)o=a[n],o in i.edits&&(i.edits[o]=t.edits[o]);i._exportedPlot=t._exportedPlot}i.staticPlot&&(i.editable=!1,i.edits={},i.autosizable=!1,i.scrollZoom=!1,i.doubleClick=!1,i.showTips=!1,i.showLink=!1,i.displayModeBar=!1),i.displayModeBar==="hover"&&!Rft&&(i.displayModeBar=!0),(i.setBackground==="transparent"||typeof i.setBackground!="function")&&(i.setBackground=Jue),i._hasZeroHeight=i._hasZeroHeight||e.clientHeight===0,i._hasZeroWidth=i._hasZeroWidth||e.clientWidth===0;var l=i.scrollZoom,u=i._scrollZoom={};if(l===!0)u.cartesian=1,u.gl3d=1,u.geo=1,u.mapbox=1;else if(typeof l=="string"){var f=l.split("+");for(n=0;n<f.length;n++)u[f[n]]=1}else l!==!1&&(u.gl3d=1,u.geo=1,u.mapbox=1)}function Hft(e){if(e=ci.getGraphDiv(e),!ci.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);return tf.cleanData(e.data),tf.cleanLayout(e.layout),e.calcdata=void 0,No._doPlot(e).then(function(){return e.emit("plotly_redraw"),e})}function Gft(e,t,r,i){return e=ci.getGraphDiv(e),Ta.cleanPlot([],{},e._fullData||[],e._fullLayout||{}),Ta.purge(e),No._doPlot(e,t,r,i)}function Y4(e,t){var r=t+1,i=[],n,a;for(n=0;n<e.length;n++)a=e[n],a<0?i.push(r+a):i.push(a);return i}function W4(e,t,r){var i,n;for(i=0;i<t.length;i++){if(n=t[i],n!==parseInt(n,10))throw new Error("all values in "+r+" must be integers");if(n>=e.data.length||n<-e.data.length)throw new Error(r+" must be valid indices for gd.data.");if(t.indexOf(n,i+1)>-1||n>=0&&t.indexOf(-e.data.length+n)>-1||n<0&&t.indexOf(e.data.length+n)>-1)throw new Error("each index in "+r+" must be unique.")}}function $ue(e,t,r){if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(typeof t=="undefined")throw new Error("currentIndices is a required argument.");if(Array.isArray(t)||(t=[t]),W4(e,t,"currentIndices"),typeof r!="undefined"&&!Array.isArray(r)&&(r=[r]),typeof r!="undefined"&&W4(e,r,"newIndices"),typeof r!="undefined"&&t.length!==r.length)throw new Error("current and new indices must be of equal length.")}function Yft(e,t,r){var i,n;if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if(typeof t=="undefined")throw new Error("traces must be defined.");for(Array.isArray(t)||(t=[t]),i=0;i<t.length;i++)if(n=t[i],typeof n!="object"||Array.isArray(n)||n===null)throw new Error("all values in traces array must be non-array objects");if(typeof r!="undefined"&&!Array.isArray(r)&&(r=[r]),typeof r!="undefined"&&r.length!==t.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function Wft(e,t,r,i){var n=ci.isPlainObject(i);if(!Array.isArray(e.data))throw new Error("gd.data must be an array");if(!ci.isPlainObject(t))throw new Error("update must be a key:value object");if(typeof r=="undefined")throw new Error("indices must be an integer or array of integers");W4(e,r,"indices");for(var a in t){if(!Array.isArray(t[a])||t[a].length!==r.length)throw new Error("attribute "+a+" must be an array of length equal to indices array length");if(n&&(!(a in i)||!Array.isArray(i[a])||i[a].length!==t[a].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function Xft(e,t,r,i){var n=ci.isPlainObject(i),a=[],o,s,l,u,f;Array.isArray(r)||(r=[r]),r=Y4(r,e.data.length-1);for(var c in t)for(var h=0;h<r.length;h++){if(o=e.data[r[h]],l=Js(o,c),s=l.get(),u=t[c][h],!ci.isArrayOrTypedArray(u))throw new Error("attribute: "+c+" index: "+h+" must be an array");if(!ci.isArrayOrTypedArray(s))throw new Error("cannot extend missing or non-array attribute: "+c);if(s.constructor!==u.constructor)throw new Error("cannot extend array with an array of a different type: "+c);f=n?i[c][h]:i,Pft(f)||(f=-1),a.push({prop:l,target:s,insert:u,maxp:Math.floor(f)})}return a}function efe(e,t,r,i,n){Wft(e,t,r,i);for(var a=Xft(e,t,r,i),o={},s={},l=0;l<a.length;l++){var u=a[l].prop,f=a[l].maxp,c=n(a[l].target,a[l].insert,f);u.set(c[0]),Array.isArray(o[u.astr])||(o[u.astr]=[]),o[u.astr].push(c[1]),Array.isArray(s[u.astr])||(s[u.astr]=[]),s[u.astr].push(a[l].target.length)}return{update:o,maxPoints:s}}function tfe(e,t){var r=new e.constructor(e.length+t.length);return r.set(e),r.set(t,e.length),r}function rfe(e,t,r,i){e=ci.getGraphDiv(e);function n(l,u,f){var c,h;if(ci.isTypedArray(l))if(f<0){var v=new l.constructor(0),d=tfe(l,u);f<0?(c=d,h=v):(c=v,h=d)}else if(c=new l.constructor(f),h=new l.constructor(l.length+u.length-f),f===u.length)c.set(u),h.set(l);else if(f<u.length){var _=u.length-f;c.set(u.subarray(_)),h.set(l),h.set(u.subarray(0,_),l.length)}else{var T=f-u.length,p=l.length-T;c.set(l.subarray(p)),c.set(u,T),h.set(l.subarray(0,p))}else c=l.concat(u),h=f>=0&&f<c.length?c.splice(0,c.length-f):[];return[c,h]}var a=efe(e,t,r,i,n),o=No.redraw(e),s=[e,a.update,r,a.maxPoints];return wv.add(e,No.prependTraces,s,rfe,arguments),o}function nfe(e,t,r,i){e=ci.getGraphDiv(e);function n(l,u,f){var c,h;if(ci.isTypedArray(l))if(f<=0){var v=new l.constructor(0),d=tfe(u,l);f<0?(c=d,h=v):(c=v,h=d)}else if(c=new l.constructor(f),h=new l.constructor(l.length+u.length-f),f===u.length)c.set(u),h.set(l);else if(f<u.length){var _=u.length-f;c.set(u.subarray(0,_)),h.set(u.subarray(_)),h.set(l,_)}else{var T=f-u.length;c.set(u),c.set(l.subarray(0,T),u.length),h.set(l.subarray(T))}else c=u.concat(l),h=f>=0&&f<c.length?c.splice(f,c.length):[];return[c,h]}var a=efe(e,t,r,i,n),o=No.redraw(e),s=[e,a.update,r,a.maxPoints];return wv.add(e,No.extendTraces,s,nfe,arguments),o}function ife(e,t,r){e=ci.getGraphDiv(e);var i=[],n=No.deleteTraces,a=ife,o=[e,i],s=[e,t],l,u;for(Yft(e,t,r),Array.isArray(t)||(t=[t]),t=t.map(function(f){return ci.extendFlat({},f)}),tf.cleanData(t),l=0;l<t.length;l++)e.data.push(t[l]);for(l=0;l<t.length;l++)i.push(-t.length+l);if(typeof r=="undefined")return u=No.redraw(e),wv.add(e,n,o,a,s),u;Array.isArray(r)||(r=[r]);try{$ue(e,i,r)}catch(f){throw e.data.splice(e.data.length-t.length,t.length),f}return wv.startSequence(e),wv.add(e,n,o,a,s),u=No.moveTraces(e,i,r),wv.stopSequence(e),u}function afe(e,t){e=ci.getGraphDiv(e);var r=[],i=No.addTraces,n=afe,a=[e,r,t],o=[e,t],s,l;if(typeof t=="undefined")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(t)||(t=[t]),W4(e,t,"indices"),t=Y4(t,e.data.length-1),t.sort(ci.sorterDes),s=0;s<t.length;s+=1)l=e.data.splice(t[s],1)[0],r.push(l);var u=No.redraw(e);return wv.add(e,i,a,n,o),u}function O7(e,t,r){e=ci.getGraphDiv(e);var i=[],n=[],a=O7,o=O7,s=[e,r,t],l=[e,t,r],u;if($ue(e,t,r),t=Array.isArray(t)?t:[t],typeof r=="undefined")for(r=[],u=0;u<t.length;u++)r.push(-t.length+u);for(r=Array.isArray(r)?r:[r],t=Y4(t,e.data.length-1),r=Y4(r,e.data.length-1),u=0;u<e.data.length;u++)t.indexOf(u)===-1&&i.push(e.data[u]);for(u=0;u<t.length;u++)n.push({newIndex:r[u],trace:e.data[t[u]]});for(n.sort(function(c,h){return c.newIndex-h.newIndex}),u=0;u<n.length;u+=1)i.splice(n[u].newIndex,0,n[u].trace);e.data=i;var f=No.redraw(e);return wv.add(e,a,s,o,l),f}function X4(e,t,r,i){e=ci.getGraphDiv(e),tf.clearPromiseQueue(e);var n={};if(typeof t=="string")n[t]=r;else if(ci.isPlainObject(t))n=ci.extendFlat({},t),i===void 0&&(i=r);else return ci.warn("Restyle fail.",t,r,i),Promise.reject();Object.keys(n).length&&(e.changed=!0);var a=tf.coerceTraceIndices(e,i),o=ofe(e,n,a),s=o.flags;s.calc&&(e.calcdata=void 0),s.clearAxisTypes&&tf.clearAxisTypes(e,a,{});var l=[];s.fullReplot?l.push(No._doPlot):(l.push(Ta.previousPromises),Ta.supplyDefaults(e),s.markerSize&&(Ta.doCalcdata(e),Q4(l)),s.style&&l.push(gs.doTraceStyle),s.colorbars&&l.push(gs.doColorBars),l.push(yM)),l.push(Ta.rehover,Ta.redrag,Ta.reselect),wv.add(e,X4,[e,o.undoit,o.traces],X4,[e,o.redoit,o.traces]);var u=ci.syncOrAsync(l,e);return(!u||!u.then)&&(u=Promise.resolve()),u.then(function(){return e.emit("plotly_restyle",o.eventData),e})}function Yg(e){return e===void 0?null:e}function H4(e,t){return t?function(r,i,n){var a=Js(r,i),o=a.set;return a.set=function(s){var l=(n||"")+i;Z4(l,a.get(),s,e),o(s)},a}:Js}function Z4(e,t,r,i){if(Array.isArray(t)||Array.isArray(r))for(var n=Array.isArray(t)?t:[],a=Array.isArray(r)?r:[],o=Math.max(n.length,a.length),s=0;s<o;s++)Z4(e+"["+s+"]",n[s],a[s],i);else if(ci.isPlainObject(t)||ci.isPlainObject(r)){var l=ci.isPlainObject(t)?t:{},u=ci.isPlainObject(r)?r:{},f=ci.extendFlat({},l,u);for(var c in f)Z4(e+"."+c,l[c],u[c],i)}else i[e]===void 0&&(i[e]=Yg(t))}function Zft(e,t,r){for(var i in r){var n=Js(e,i);Z4(i,n.get(),r[i],t)}}function ofe(e,t,r){var i=e._fullLayout,n=e._fullData,a=e.data,o=i._guiEditing,s=H4(i._preGUI,o),l=ci.extendDeepAll({},t),u;sfe(t);var f=bm.traceFlags(),c={},h={},v;function d(){return r.map(function(){})}function _(ie){var ge=Xh.id2name(ie);v.indexOf(ge)===-1&&v.push(ge)}function T(ie){return"LAYOUT"+ie+".autorange"}function p(ie){return"LAYOUT"+ie+".range"}function M(ie){for(var ge=ie;ge<n.length;ge++)if(n[ge]._input===a[ie])return n[ge]}function b(ie,ge,le){if(Array.isArray(ie)){ie.forEach(function(et){b(et,ge,le)});return}if(!(ie in t||tf.hasParent(t,ie))){var we;if(ie.substr(0,6)==="LAYOUT")we=s(e.layout,ie.replace("LAYOUT",""));else{var Re=r[le],qe=i._tracePreGUI[M(Re)._fullInput.uid];we=H4(qe,o)(a[Re],ie)}ie in h||(h[ie]=d()),h[ie][le]===void 0&&(h[ie][le]=Yg(we.get())),ge!==void 0&&we.set(ge)}}function w(ie){return function(ge){return n[ge][ie]}}function k(ie){return function(ge,le){return ge===!1?n[r[le]][ie]:null}}for(var x in t){if(tf.hasParent(t,x))throw new Error("cannot set "+x+" and a parent attribute simultaneously");var E=t[x],S,g,C,A,P,D;if((x==="autobinx"||x==="autobiny")&&(x=x.charAt(x.length-1)+"bins",Array.isArray(E)?E=E.map(k(x)):E===!1?E=r.map(w(x)):E=null),c[x]=E,x.substr(0,6)==="LAYOUT"){C=s(e.layout,x.replace("LAYOUT","")),h[x]=[Yg(C.get())],C.set(Array.isArray(E)?E[0]:E),f.calc=!0;continue}for(h[x]=d(),u=0;u<r.length;u++){S=a[r[u]],g=M(r[u]);var z=i._tracePreGUI[g._fullInput.uid];if(C=H4(z,o)(S,x),A=C.get(),P=Array.isArray(E)?E[u%E.length]:E,P!==void 0){var O=C.parts[C.parts.length-1],V=x.substr(0,x.length-O.length-1),B=V?V+".":"",F=V?Js(g,V).get():g;if(D=J4.getTraceValObject(g,C.parts),D&&D.impliedEdits&&P!==null)for(var N in D.impliedEdits)b(ci.relativeAttr(x,N),D.impliedEdits[N],u);else if((O==="thicknessmode"||O==="lenmode")&&A!==P&&(P==="fraction"||P==="pixels")&&F){var Z=i._size,J=F.orient,re=J==="top"||J==="bottom";if(O==="thicknessmode"){var ue=re?Z.h:Z.w;b(B+"thickness",F.thickness*(P==="fraction"?1/ue:ue),u)}else{var fe=re?Z.w:Z.h;b(B+"len",F.len*(P==="fraction"?1/fe:fe),u)}}else if(x==="type"&&(P==="pie"!=(A==="pie")||P==="funnelarea"!=(A==="funnelarea"))){var K="x",X="y";(P==="bar"||A==="bar")&&S.orientation==="h"&&(K="y",X="x"),ci.swapAttrs(S,["?","?src"],"labels",K),ci.swapAttrs(S,["d?","?0"],"label",K),ci.swapAttrs(S,["?","?src"],"values",X),A==="pie"||A==="funnelarea"?(Js(S,"marker.color").set(Js(S,"marker.colors").get()),i._pielayer.selectAll("g.trace").remove()):fp.traceIs(S,"cartesian")&&Js(S,"marker.colors").set(Js(S,"marker.color").get())}h[x][u]=Yg(A);var ae=["swapxy","swapxyaxes","orientation","orientationaxes"];if(ae.indexOf(x)!==-1){if(x==="orientation"){C.set(P);var oe=S.x&&!S.y?"h":"v";if((C.get()||oe)===g.orientation)continue}else x==="orientationaxes"&&(S.orientation={v:"h",h:"v"}[g.orientation]);tf.swapXYData(S),f.calc=f.clearAxisTypes=!0}else Ta.dataArrayContainers.indexOf(C.parts[0])!==-1?(tf.manageArrayContainers(C,P,h),f.calc=!0):(D?D.arrayOk&&!fp.traceIs(g,"regl")&&(ci.isArrayOrTypedArray(P)||ci.isArrayOrTypedArray(A))?f.calc=!0:bm.update(f,D):f.calc=!0,C.set(P))}}if(["swapxyaxes","orientationaxes"].indexOf(x)!==-1&&Xh.swap(e,r),x==="orientationaxes"){var me=Js(e.layout,"hovermode"),xe=me.get();xe==="x"?me.set("y"):xe==="y"?me.set("x"):xe==="x unified"?me.set("y unified"):xe==="y unified"&&me.set("x unified")}if(["orientation","type"].indexOf(x)!==-1){for(v=[],u=0;u<r.length;u++){var ce=a[r[u]];fp.traceIs(ce,"cartesian")&&(_(ce.xaxis||"x"),_(ce.yaxis||"y"))}b(v.map(T),!0,0),b(v.map(p),[0,1],0)}}return(f.calc||f.plot)&&(f.fullReplot=!0),{flags:f,undoit:h,redoit:c,traces:r,eventData:ci.extendDeepNoArrays([],[l,r])}}function sfe(e){var t=ci.counterRegex("axis",".title",!1,!1),r=/colorbar\.title$/,i=Object.keys(e),n,a,o;for(n=0;n<i.length;n++)a=i[n],o=e[a],(a==="title"||t.test(a)||r.test(a))&&(typeof o=="string"||typeof o=="number")?s(a,a.replace("title","title.text")):a.indexOf("titlefont")>-1&&a.indexOf("grouptitlefont")===-1?s(a,a.replace("titlefont","title.font")):a.indexOf("titleposition")>-1?s(a,a.replace("titleposition","title.position")):a.indexOf("titleside")>-1?s(a,a.replace("titleside","title.side")):a.indexOf("titleoffset")>-1&&s(a,a.replace("titleoffset","title.offset"));function s(l,u){e[u]=e[l],delete e[l]}}function gM(e,t,r){e=ci.getGraphDiv(e),tf.clearPromiseQueue(e);var i={};if(typeof t=="string")i[t]=r;else if(ci.isPlainObject(t))i=ci.extendFlat({},t);else return ci.warn("Relayout fail.",t,r),Promise.reject();Object.keys(i).length&&(e.changed=!0);var n=hfe(e,i),a=n.flags;a.calc&&(e.calcdata=void 0);var o=[Ta.previousPromises];a.layoutReplot?o.push(gs.layoutReplot):Object.keys(i).length&&(lfe(e,a,n)||Ta.supplyDefaults(e),a.legend&&o.push(gs.doLegend),a.layoutstyle&&o.push(gs.layoutStyles),a.axrange&&Q4(o,n.rangesAltered),a.ticks&&o.push(gs.doTicksRelayout),a.modebar&&o.push(gs.doModeBar),a.camera&&o.push(gs.doCamera),a.colorbars&&o.push(gs.doColorBars),o.push(yM)),o.push(Ta.rehover,Ta.redrag,Ta.reselect),wv.add(e,gM,[e,n.undoit],gM,[e,n.redoit]);var s=ci.syncOrAsync(o,e);return(!s||!s.then)&&(s=Promise.resolve(e)),s.then(function(){return e.emit("plotly_relayout",n.eventData),e})}function lfe(e,t,r){var i=e._fullLayout;if(!t.axrange)return!1;for(var n in t)if(n!=="axrange"&&t[n])return!1;var a,o,s=function(v,d){return ci.coerce(a,o,Ift,v,d)},l={};for(var u in r.rangesAltered){var f=Xh.id2name(u);if(a=e.layout[f],o=i[f],Dft(a,o,s,l),o._matchGroup){for(var c in o._matchGroup)if(c!==u){var h=i[Xh.id2name(c)];h.autorange=o.autorange,h.range=o.range.slice(),h._input.range=o.range.slice()}}}return!0}function Q4(e,t){var r=t?function(i){var n=[],a=!0;for(var o in t){var s=Xh.getFromId(i,o);if(n.push(o),(s.ticklabelposition||"").indexOf("inside")!==-1&&s._anchorAxis&&n.push(s._anchorAxis._id),s._matchGroup)for(var l in s._matchGroup)t[l]||n.push(l)}return Xh.draw(i,n,{skipTitle:a})}:function(i){return Xh.draw(i,"redraw")};e.push(Oft,gs.doAutoRangeAndConstraints,r,gs.drawData,gs.finalDraw)}var ufe=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ffe=/^[xyz]axis[0-9]*\.autorange$/,cfe=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function hfe(e,t){var r=e.layout,i=e._fullLayout,n=i._guiEditing,a=H4(i._preGUI,n),o=Object.keys(t),s=Xh.list(e),l=ci.extendDeepAll({},t),u={},f,c,h;for(sfe(t),o=Object.keys(t),c=0;c<o.length;c++)if(o[c].indexOf("allaxes")===0){for(h=0;h<s.length;h++){var v=s[h]._id.substr(1),d=v.indexOf("scene")!==-1?v+".":"",_=o[c].replace("allaxes",d+s[h]._name);t[_]||(t[_]=t[o[c]])}delete t[o[c]]}var T=bm.layoutFlags(),p={},M={};function b(qe,et){if(Array.isArray(qe)){qe.forEach(function(Ie){b(Ie,et)});return}if(!(qe in t||tf.hasParent(t,qe))){var Pe=a(r,qe);qe in M||(M[qe]=Yg(Pe.get())),et!==void 0&&Pe.set(et)}}var w={},k;function x(qe){var et=Xh.name2id(qe.split(".")[0]);return w[et]=1,et}for(var E in t){if(tf.hasParent(t,E))throw new Error("cannot set "+E+" and a parent attribute simultaneously");for(var S=a(r,E),g=t[E],C=S.parts.length,A=C-1;A>0&&typeof S.parts[A]!="string";)A--;var P=S.parts[A],D=S.parts[A-1]+"."+P,z=S.parts.slice(0,A).join("."),O=Js(e.layout,z).get(),V=Js(i,z).get(),B=S.get();if(g!==void 0){p[E]=g,M[E]=P==="reverse"?g:Yg(B);var F=J4.getLayoutValObject(i,S.parts);if(F&&F.impliedEdits&&g!==null)for(var N in F.impliedEdits)b(ci.relativeAttr(E,N),F.impliedEdits[N]);if(["width","height"].indexOf(E)!==-1)if(g){b("autosize",null);var Z=E==="height"?"width":"height";b(Z,i[Z])}else i[E]=e._initialAutoSize[E];else if(E==="autosize")b("width",g?null:i.width),b("height",g?null:i.height);else if(D.match(ufe))x(D),Js(i,z+"._inputRange").set(null);else if(D.match(ffe)){x(D),Js(i,z+"._inputRange").set(null);var J=Js(i,z).get();J._inputDomain&&(J._input.domain=J._inputDomain.slice())}else D.match(cfe)&&Js(i,z+"._inputDomain").set(null);if(P==="type"){k=O;var re=V.type==="linear"&&g==="log",ue=V.type==="log"&&g==="linear";if(re||ue){if(!k||!k.range)b(z+".autorange",!0);else if(V.autorange)re&&(k.range=k.range[1]>k.range[0]?[1,2]:[2,1]);else{var fe=k.range[0],K=k.range[1];re?(fe<=0&&K<=0&&b(z+".autorange",!0),fe<=0?fe=K/1e6:K<=0&&(K=fe/1e6),b(z+".range[0]",Math.log(fe)/Math.LN10),b(z+".range[1]",Math.log(K)/Math.LN10)):(b(z+".range[0]",Math.pow(10,fe)),b(z+".range[1]",Math.pow(10,K)))}Array.isArray(i._subplots.polar)&&i._subplots.polar.length&&i[S.parts[0]]&&S.parts[1]==="radialaxis"&&delete i[S.parts[0]]._subplot.viewInitial["radialaxis.range"],fp.getComponentMethod("annotations","convertCoords")(e,V,g,b),fp.getComponentMethod("images","convertCoords")(e,V,g,b)}else b(z+".autorange",!0),b(z+".range",null);Js(i,z+"._inputRange").set(null)}else if(P.match(Bft)){var X=Js(i,E).get(),ae=(g||{}).type;(!ae||ae==="-")&&(ae="linear"),fp.getComponentMethod("annotations","convertCoords")(e,X,ae,b),fp.getComponentMethod("images","convertCoords")(e,X,ae,b)}var oe=V4.containerArrayMatch(E);if(oe){f=oe.array,c=oe.index;var me=oe.property,xe=F||{editType:"calc"};c!==""&&me===""&&(V4.isAddVal(g)?M[E]=null:V4.isRemoveVal(g)?M[E]=(Js(r,f).get()||[])[c]:ci.warn("unrecognized full object value",t)),bm.update(T,xe),u[f]||(u[f]={});var ce=u[f][c];ce||(ce=u[f][c]={}),ce[me]=g,delete t[E]}else P==="reverse"?(O.range?O.range.reverse():(b(z+".autorange",!0),O.range=[1,0]),V.autorange?T.calc=!0:T.plot=!0):(E==="dragmode"&&(g===!1&&B!==!1||g!==!1&&B===!1)||i._has("scatter-like")&&i._has("regl")&&E==="dragmode"&&(g==="lasso"||g==="select")&&!(B==="lasso"||B==="select")||i._has("gl2d")?T.plot=!0:F?bm.update(T,F):T.calc=!0,S.set(g))}}for(f in u){var ie=V4.applyContainerArrayChanges(e,a(r,f),u[f],T,a);ie||(T.plot=!0)}for(var ge in w){k=Xh.getFromId(e,ge);var le=k&&k._constraintGroup;if(le){T.calc=!0;for(var we in le)w[we]||(Xh.getFromId(e,we)._constraintShrinkable=!0)}}(vfe(e)||t.height||t.width)&&(T.plot=!0);var Re=i.shapes;for(c=0;c<Re.length;c++)if(Re[c].showlegend){T.calc=!0;break}return(T.plot||T.calc)&&(T.layoutReplot=!0),{flags:T,rangesAltered:w,undoit:M,redoit:p,eventData:l}}function vfe(e){var t=e._fullLayout,r=t.width,i=t.height;return e.layout.autosize&&Ta.plotAutoSize(e,e.layout,t),t.width!==r||t.height!==i}function j4(e,t,r,i){e=ci.getGraphDiv(e),tf.clearPromiseQueue(e),ci.isPlainObject(t)||(t={}),ci.isPlainObject(r)||(r={}),Object.keys(t).length&&(e.changed=!0),Object.keys(r).length&&(e.changed=!0);var n=tf.coerceTraceIndices(e,i),a=ofe(e,ci.extendFlat({},t),n),o=a.flags,s=hfe(e,ci.extendFlat({},r)),l=s.flags;(o.calc||l.calc)&&(e.calcdata=void 0),o.clearAxisTypes&&tf.clearAxisTypes(e,n,r);var u=[];l.layoutReplot?u.push(gs.layoutReplot):o.fullReplot?u.push(No._doPlot):(u.push(Ta.previousPromises),lfe(e,l,s)||Ta.supplyDefaults(e),o.style&&u.push(gs.doTraceStyle),(o.colorbars||l.colorbars)&&u.push(gs.doColorBars),l.legend&&u.push(gs.doLegend),l.layoutstyle&&u.push(gs.layoutStyles),l.axrange&&Q4(u,s.rangesAltered),l.ticks&&u.push(gs.doTicksRelayout),l.modebar&&u.push(gs.doModeBar),l.camera&&u.push(gs.doCamera),u.push(yM)),u.push(Ta.rehover,Ta.redrag,Ta.reselect),wv.add(e,j4,[e,a.undoit,s.undoit,a.traces],j4,[e,a.redoit,s.redoit,a.traces]);var f=ci.syncOrAsync(u,e);return(!f||!f.then)&&(f=Promise.resolve(e)),f.then(function(){return e.emit("plotly_update",{data:a.eventData,layout:s.eventData}),e})}function N7(e){return function(r){r._fullLayout._guiEditing=!0;var i=e.apply(null,arguments);return r._fullLayout._guiEditing=!1,i}}var jft=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],Kft=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Xue(e,t){for(var r=0;r<t.length;r++){var i=t[r],n=e.match(i.pattern);if(n){var a=n[1]||"";return{head:a,tail:e.substr(a.length+1),attr:i.attr}}}}function Zue(e,t){var r=Js(t,e).get();if(r!==void 0)return r;var i=e.split(".");for(i.pop();i.length>1;)if(i.pop(),r=Js(t,i.join(".")+".uirevision").get(),r!==void 0)return r;return t.uirevision}function Jft(e,t){for(var r=0;r<t.length;r++)if(t[r]._fullInput.uid===e)return r;return-1}function Qft(e,t,r){for(var i=0;i<t.length;i++)if(t[i].uid===e)return i;return!t[r]||t[r].uid?-1:r}function jue(e,t){var r=ci.isPlainObject(e),i=Array.isArray(e);return r||i?(r&&ci.isPlainObject(t)||i&&Array.isArray(t))&&JSON.stringify(e)===JSON.stringify(t):e===t}function $ft(e,t,r,i){var n=i._preGUI,a,o,s,l,u,f,c,h,v,d,_=[],T={},p={};for(a in n){if(u=Xue(a,jft),u){if(v=u.head,d=u.tail,o=u.attr||v+".uirevision",s=Js(i,o).get(),l=s&&Zue(o,t),l&&l===s){if(f=n[a],f===null&&(f=void 0),c=Js(t,a),h=c.get(),jue(h,f)){h===void 0&&d==="autorange"&&_.push(v),c.set(Yg(Js(i,a).get()));continue}else if(d==="autorange"||d.substr(0,6)==="range["){var M=n[v+".range[0]"],b=n[v+".range[1]"],w=n[v+".autorange"];if(w||w===null&&M===null&&b===null){if(!(v in T)){var k=Js(t,v).get();T[v]=k&&(k.autorange||k.autorange!==!1&&(!k.range||k.range.length!==2))}if(T[v]){c.set(Yg(Js(i,a).get()));continue}}}}}else ci.warn("unrecognized GUI edit: "+a);delete n[a],u&&u.tail.substr(0,6)==="range["&&(p[u.head]=1)}for(var x=0;x<_.length;x++){var E=_[x];if(p[E]){var S=Js(t,E).get();S&&delete S.autorange}}var g=i._tracePreGUI;for(var C in g){var A=g[C],P=null,D;for(a in A){if(!P){var z=Jft(C,r);if(z<0){delete g[C];break}var O=r[z];D=O._fullInput;var V=Qft(C,e,D.index);if(V<0){delete g[C];break}P=e[V]}if(u=Xue(a,Kft),u){if(u.attr?(s=Js(i,u.attr).get(),l=s&&Zue(u.attr,t)):(s=D.uirevision,l=P.uirevision,l===void 0&&(l=t.uirevision)),l&&l===s&&(f=A[a],f===null&&(f=void 0),c=Js(P,a),h=c.get(),jue(h,f))){c.set(Yg(Js(D,a).get()));continue}}else ci.warn("unrecognized GUI edit: "+a+" in trace uid "+C);delete A[a]}}}function ect(e,t,r,i){var n,a;function o(){return No.addFrames(e,n)}e=ci.getGraphDiv(e),tf.clearPromiseQueue(e);var s=e._fullData,l=e._fullLayout;if(!ci.isPlotDiv(e)||!s||!l)a=No.newPlot(e,t,r,i);else{if(ci.isPlainObject(t)){var u=t;t=u.data,r=u.layout,i=u.config,n=u.frames}var f=!1;if(i){var c=ci.extendDeep({},e._context);e._context=void 0,Que(e,i),f=B7(c,e._context)}e.data=t||[],tf.cleanData(e.data),e.layout=r||{},tf.cleanLayout(e.layout),$ft(e.data,e.layout,s,l),Ta.supplyDefaults(e,{skipUpdateCalc:!0});var h=e._fullData,v=e._fullLayout,d=v.datarevision===void 0,_=v.transition,T=rct(e,l,v,d,_),p=T.newDataRevision,M=tct(e,s,h,d,_,p);if(vfe(e)&&(T.layoutReplot=!0),M.calc||T.calc){e.calcdata=void 0;for(var b=Object.getOwnPropertyNames(v),w=0;w<b.length;w++){var k=b[w],x=k.substring(0,5);if(x==="xaxis"||x==="yaxis"){var E=v[k]._emptyCategories;E&&E()}}}else Ta.supplyDefaultsUpdateCalc(e.calcdata,h);var S=[];if(n&&(e._transitionData={},Ta.createTransitionData(e),S.push(o)),v.transition&&!f&&(M.anim||T.anim))T.ticks&&S.push(gs.doTicksRelayout),Ta.doCalcdata(e),gs.doAutoRangeAndConstraints(e),S.push(function(){return Ta.transitionFromReact(e,M,T,l)});else if(M.fullReplot||T.layoutReplot||f)e._fullLayout._skipDefaults=!0,S.push(No._doPlot);else{for(var g in T.arrays){var C=T.arrays[g];if(C.length){var A=fp.getComponentMethod(g,"drawOne");if(A!==ci.noop)for(var P=0;P<C.length;P++)A(e,C[P]);else{var D=fp.getComponentMethod(g,"draw");if(D===ci.noop)throw new Error("cannot draw components: "+g);D(e)}}}S.push(Ta.previousPromises),M.style&&S.push(gs.doTraceStyle),(M.colorbars||T.colorbars)&&S.push(gs.doColorBars),T.legend&&S.push(gs.doLegend),T.layoutstyle&&S.push(gs.layoutStyles),T.axrange&&Q4(S),T.ticks&&S.push(gs.doTicksRelayout),T.modebar&&S.push(gs.doModeBar),T.camera&&S.push(gs.doCamera),S.push(yM)}S.push(Ta.rehover,Ta.redrag,Ta.reselect),a=ci.syncOrAsync(S,e),(!a||!a.then)&&(a=Promise.resolve(e))}return a.then(function(){return e.emit("plotly_react",{data:t,layout:r}),e})}function tct(e,t,r,i,n,a){var o=t.length===r.length;if(!n&&!o)return{fullReplot:!0,calc:!0};var s=bm.traceFlags();s.arrays={},s.nChanges=0,s.nChangesAnim=0;var l,u;function f(v){var d=J4.getTraceValObject(u,v);return!u._module.animatable&&d.anim&&(d.anim=!1),d}var c={getValObject:f,flags:s,immutable:i,transition:n,newDataRevision:a,gd:e},h={};for(l=0;l<t.length;l++)if(r[l]){if(u=r[l]._fullInput,Ta.hasMakesDataTransform(u)&&(u=r[l]),h[u.uid])continue;h[u.uid]=1,K4(t[l]._fullInput,u,[],c)}return(s.calc||s.plot)&&(s.fullReplot=!0),n&&s.nChanges&&s.nChangesAnim&&(s.anim=s.nChanges===s.nChangesAnim&&o?"all":"some"),s}function rct(e,t,r,i,n){var a=bm.layoutFlags();a.arrays={},a.rangesAltered={},a.nChanges=0,a.nChangesAnim=0;function o(l){return J4.getLayoutValObject(r,l)}var s={getValObject:o,flags:a,immutable:i,transition:n,gd:e};return K4(t,r,[],s),(a.plot||a.calc)&&(a.layoutReplot=!0),n&&a.nChanges&&a.nChangesAnim&&(a.anim=a.nChanges===a.nChangesAnim?"all":"some"),a}function K4(e,t,r,i){var n,a,o,s=i.getValObject,l=i.flags,u=i.immutable,f=i.inArray,c=i.arrayIndex;function h(){var z=n.editType;if(f&&z.indexOf("arraydraw")!==-1){ci.pushUnique(l.arrays[f],c);return}bm.update(l,n),z!=="none"&&l.nChanges++,i.transition&&n.anim&&l.nChangesAnim++,(ufe.test(o)||ffe.test(o))&&(l.rangesAltered[r[0]]=1),cfe.test(o)&&Js(t,"_inputDomain").set(null),a==="datarevision"&&(l.newDataRevision=1)}function v(z){return z.valType==="data_array"||z.arrayOk}for(a in e){if(l.calc&&!i.transition)return;var d=e[a],_=t[a],T=r.concat(a);if(o=T.join("."),!(a.charAt(0)==="_"||typeof d=="function"||d===_)){if((a==="tick0"||a==="dtick")&&r[0]!=="geo"){var p=t.tickmode;if(p==="auto"||p==="array"||!p)continue}if(!(a==="range"&&t.autorange)&&!((a==="zmin"||a==="zmax")&&t.type==="contourcarpet")&&(n=s(T),!!n&&!(n._compareAsJSON&&JSON.stringify(d)===JSON.stringify(_)))){var M=n.valType,b,w=v(n),k=Array.isArray(d),x=Array.isArray(_);if(k&&x){var E="_input_"+a,S=e[E],g=t[E];if(Array.isArray(S)&&S===g)continue}if(_===void 0)w&&k?l.calc=!0:h();else if(n._isLinkedToArray){var C=[],A=!1;f||(l.arrays[a]=C);var P=Math.min(d.length,_.length),D=Math.max(d.length,_.length);if(P!==D)if(n.editType==="arraydraw")A=!0;else{h();continue}for(b=0;b<P;b++)K4(d[b],_[b],T.concat(b),ci.extendFlat({inArray:a,arrayIndex:b},i));if(A)for(b=P;b<D;b++)C.push(b)}else!M&&ci.isPlainObject(d)?K4(d,_,T,i):w?k&&x?(u&&(l.calc=!0),(u||i.newDataRevision)&&h()):k!==x?l.calc=!0:h():k&&x?(d.length!==_.length||String(d)!==String(_))&&h():h()}}}for(a in t)if(!(a in e||a.charAt(0)==="_"||typeof t[a]=="function"))if(n=s(r.concat(a)),v(n)&&Array.isArray(t[a])){l.calc=!0;return}else h()}function B7(e,t){var r;for(r in e)if(r.charAt(0)!=="_"){var i=e[r],n=t[r];if(i!==n)if(ci.isPlainObject(i)&&ci.isPlainObject(n)){if(B7(i,n))return!0}else if(Array.isArray(i)&&Array.isArray(n)){if(i.length!==n.length)return!0;for(var a=0;a<i.length;a++)if(i[a]!==n[a])if(ci.isPlainObject(i[a])&&ci.isPlainObject(n[a])){if(B7(i[a],n[a]))return!0}else return!0}else return!0}}function nct(e,t,r){if(e=ci.getGraphDiv(e),!ci.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var i=e._transitionData;i._frameQueue||(i._frameQueue=[]),r=Ta.supplyAnimationDefaults(r);var n=r.transition,a=r.frame;i._frameWaitingCnt===void 0&&(i._frameWaitingCnt=0);function o(u){return Array.isArray(n)?u>=n.length?n[0]:n[u]:n}function s(u){return Array.isArray(a)?u>=a.length?a[0]:a[u]:a}function l(u,f){var c=0;return function(){if(u&&++c===f)return u()}}return new Promise(function(u,f){function c(){if(i._frameQueue.length!==0){for(;i._frameQueue.length;){var P=i._frameQueue.pop();P.onInterrupt&&P.onInterrupt()}e.emit("plotly_animationinterrupted",[])}}function h(P){if(P.length!==0){for(var D=0;D<P.length;D++){var z;P[D].type==="byname"?z=Ta.computeFrame(e,P[D].name):z=P[D].data;var O=s(D),V=o(D);V.duration=Math.min(V.duration,O.duration);var B={frame:z,name:P[D].name,frameOpts:O,transitionOpts:V};D===P.length-1&&(B.onComplete=l(u,2),B.onInterrupt=f),i._frameQueue.push(B)}r.mode==="immediate"&&(i._lastFrameAt=-1/0),i._animationRaf||_()}}function v(){e.emit("plotly_animated"),window.cancelAnimationFrame(i._animationRaf),i._animationRaf=null}function d(){i._currentFrame&&i._currentFrame.onComplete&&i._currentFrame.onComplete();var P=i._currentFrame=i._frameQueue.shift();if(P){var D=P.name?P.name.toString():null;e._fullLayout._currentFrame=D,i._lastFrameAt=Date.now(),i._timeToNext=P.frameOpts.duration,Ta.transition(e,P.frame.data,P.frame.layout,tf.coerceTraceIndices(e,P.frame.traces),P.frameOpts,P.transitionOpts).then(function(){P.onComplete&&P.onComplete()}),e.emit("plotly_animatingframe",{name:D,frame:P.frame,animation:{frame:P.frameOpts,transition:P.transitionOpts}})}else v()}function _(){e.emit("plotly_animating"),i._lastFrameAt=-1/0,i._timeToNext=0,i._runningTransitions=0,i._currentFrame=null;var P=function(){i._animationRaf=window.requestAnimationFrame(P),Date.now()-i._lastFrameAt>i._timeToNext&&d()};P()}var T=0;function p(P){return Array.isArray(n)?T>=n.length?P.transitionOpts=n[T]:P.transitionOpts=n[0]:P.transitionOpts=n,T++,P}var M,b,w=[],k=t==null,x=Array.isArray(t),E=!k&&!x&&ci.isPlainObject(t);if(E)w.push({type:"object",data:p(ci.extendFlat({},t))});else if(k||["string","number"].indexOf(typeof t)!==-1)for(M=0;M<i._frames.length;M++)b=i._frames[M],b&&(k||String(b.group)===String(t))&&w.push({type:"byname",name:String(b.name),data:p({name:b.name})});else if(x)for(M=0;M<t.length;M++){var S=t[M];["number","string"].indexOf(typeof S)!==-1?(S=String(S),w.push({type:"byname",name:S,data:p({name:S})})):ci.isPlainObject(S)&&w.push({type:"object",data:p(ci.extendFlat({},S))})}for(M=0;M<w.length;M++)if(b=w[M],b.type==="byname"&&!i._frameHash[b.data.name]){ci.warn('animate failure: frame not found: "'+b.data.name+'"'),f();return}["next","immediate"].indexOf(r.mode)!==-1&&c(),r.direction==="reverse"&&w.reverse();var g=e._fullLayout._currentFrame;if(g&&r.fromcurrent){var C=-1;for(M=0;M<w.length;M++)if(b=w[M],b.type==="byname"&&b.name===g){C=M;break}if(C>0&&C<w.length-1){var A=[];for(M=0;M<w.length;M++)b=w[M],(w[M].type!=="byname"||M>C)&&A.push(b);w=A}}w.length>0?h(w):(e.emit("plotly_animated"),u())})}function ict(e,t,r){if(e=ci.getGraphDiv(e),t==null)return Promise.resolve();if(!ci.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var i,n,a,o,s=e._transitionData._frames,l=e._transitionData._frameHash;if(!Array.isArray(t))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t);var u=s.length+t.length*2,f=[],c={};for(i=t.length-1;i>=0;i--)if(ci.isPlainObject(t[i])){var h=t[i].name,v=(l[h]||c[h]||{}).name,d=t[i].name,_=l[v]||c[v];v&&d&&typeof d=="number"&&_&&q7<Wue&&(q7++,ci.warn('addFrames: overwriting frame "'+(l[v]||c[v]).name+'" with a frame whose name of type "number" also equates to "'+v+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),q7===Wue&&ci.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),c[h]={name:h},f.push({frame:Ta.supplyFrameDefaults(t[i]),index:r&&r[i]!==void 0&&r[i]!==null?r[i]:u+i})}f.sort(function(E,S){return E.index>S.index?-1:E.index<S.index?1:0});var T=[],p=[],M=s.length;for(i=f.length-1;i>=0;i--){if(n=f[i].frame,typeof n.name=="number"&&ci.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!n.name)for(;l[n.name="frame "+e._transitionData._counter++];);if(l[n.name]){for(a=0;a<s.length&&(s[a]||{}).name!==n.name;a++);T.push({type:"replace",index:a,value:n}),p.unshift({type:"replace",index:a,value:s[a]})}else o=Math.max(0,Math.min(f[i].index,M)),T.push({type:"insert",index:o,value:n}),p.unshift({type:"delete",index:o}),M++}var b=Ta.modifyFrames,w=Ta.modifyFrames,k=[e,p],x=[e,T];return wv&&wv.add(e,b,k,w,x),Ta.modifyFrames(e,T)}function act(e,t){if(e=ci.getGraphDiv(e),!ci.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);var r,i,n=e._transitionData._frames,a=[],o=[];if(!t)for(t=[],r=0;r<n.length;r++)t.push(r);for(t=t.slice(),t.sort(),r=t.length-1;r>=0;r--)i=t[r],a.push({type:"delete",index:i}),o.unshift({type:"insert",index:i,value:n[i]});var s=Ta.modifyFrames,l=Ta.modifyFrames,u=[e,o],f=[e,a];return wv&&wv.add(e,s,u,l,f),Ta.modifyFrames(e,a)}function oct(e){e=ci.getGraphDiv(e);var t=e._fullLayout||{},r=e._fullData||[];return Ta.cleanPlot([],{},r,t),Ta.purge(e),z7.purge(e),t._container&&t._container.remove(),delete e._context,e}function sct(e){var t=e._fullLayout,r=e.getBoundingClientRect();if(!ci.equalDomRects(r,t._lastBBox)){var i=t._invTransform=ci.inverseTransformMatrix(ci.getFullTransformMatrix(e));t._invScaleX=Math.sqrt(i[0][0]*i[0][0]+i[0][1]*i[0][1]+i[0][2]*i[0][2]),t._invScaleY=Math.sqrt(i[1][0]*i[1][0]+i[1][1]*i[1][1]+i[1][2]*i[1][2]),t._lastBBox=r}}function lct(e){var t=G4.select(e),r=e._fullLayout;if(r._calcInverseTransform=sct,r._calcInverseTransform(e),r._container=t.selectAll(".plot-container").data([0]),r._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),r._paperdiv=r._container.selectAll(".svg-container").data([0]),r._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),r._glcontainer=r._paperdiv.selectAll(".gl-container").data([{}]),r._glcontainer.enter().append("div").classed("gl-container",!0),r._paperdiv.selectAll(".main-svg").remove(),r._paperdiv.select(".modebar-container").remove(),r._paper=r._paperdiv.insert("svg",":first-child").classed("main-svg",!0),r._toppaper=r._paperdiv.append("svg").classed("main-svg",!0),r._modebardiv=r._paperdiv.append("div"),delete r._modeBar,r._hoverpaper=r._paperdiv.append("svg").classed("main-svg",!0),!r._uid){var i={};G4.selectAll("defs").each(function(){this.id&&(i[this.id.split("-")[1]]=1)}),r._uid=ci.randstr(i)}r._paperdiv.selectAll(".main-svg").attr(zft.svgAttrs),r._defs=r._paper.append("defs").attr("id","defs-"+r._uid),r._clips=r._defs.append("g").classed("clips",!0),r._topdefs=r._toppaper.append("defs").attr("id","topdefs-"+r._uid),r._topclips=r._topdefs.append("g").classed("clips",!0),r._bgLayer=r._paper.append("g").classed("bglayer",!0),r._draggers=r._paper.append("g").classed("draglayer",!0);var n=r._paper.append("g").classed("layer-below",!0);r._imageLowerLayer=n.append("g").classed("imagelayer",!0),r._shapeLowerLayer=n.append("g").classed("shapelayer",!0),r._cartesianlayer=r._paper.append("g").classed("cartesianlayer",!0),r._polarlayer=r._paper.append("g").classed("polarlayer",!0),r._smithlayer=r._paper.append("g").classed("smithlayer",!0),r._ternarylayer=r._paper.append("g").classed("ternarylayer",!0),r._geolayer=r._paper.append("g").classed("geolayer",!0),r._funnelarealayer=r._paper.append("g").classed("funnelarealayer",!0),r._pielayer=r._paper.append("g").classed("pielayer",!0),r._iciclelayer=r._paper.append("g").classed("iciclelayer",!0),r._treemaplayer=r._paper.append("g").classed("treemaplayer",!0),r._sunburstlayer=r._paper.append("g").classed("sunburstlayer",!0),r._indicatorlayer=r._toppaper.append("g").classed("indicatorlayer",!0),r._glimages=r._paper.append("g").classed("glimages",!0);var a=r._toppaper.append("g").classed("layer-above",!0);r._imageUpperLayer=a.append("g").classed("imagelayer",!0),r._shapeUpperLayer=a.append("g").classed("shapelayer",!0),r._selectionLayer=r._toppaper.append("g").classed("selectionlayer",!0),r._infolayer=r._toppaper.append("g").classed("infolayer",!0),r._menulayer=r._toppaper.append("g").classed("menulayer",!0),r._zoomlayer=r._toppaper.append("g").classed("zoomlayer",!0),r._hoverlayer=r._hoverpaper.append("g").classed("hoverlayer",!0),r._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),e.emit("plotly_framework")}No.animate=nct;No.addFrames=ict;No.deleteFrames=act;No.addTraces=ife;No.deleteTraces=afe;No.extendTraces=rfe;No.moveTraces=O7;No.prependTraces=nfe;No.newPlot=Gft;No._doPlot=Nft;No.purge=oct;No.react=ect;No.redraw=Hft;No.relayout=gM;No.restyle=X4;No.setPlotConfig=Uft;No.update=j4;No._guiRelayout=N7(gM);No._guiRestyle=N7(X4);No._guiUpdate=N7(j4);No._storeDirectGUIEdit=Zft});var Wg=ne(a0=>{"use strict";var uct=wi();a0.getDelay=function(e){return e._has&&(e._has("gl3d")||e._has("gl2d")||e._has("mapbox"))?500:0};a0.getRedrawFunc=function(e){return function(){uct.getComponentMethod("colorbar","draw")(e)}};a0.encodeSVG=function(e){return"data:image/svg+xml,"+encodeURIComponent(e)};a0.encodeJSON=function(e){return"data:application/json,"+encodeURIComponent(e)};var dfe=window.URL||window.webkitURL;a0.createObjectURL=function(e){return dfe.createObjectURL(e)};a0.revokeObjectURL=function(e){return dfe.revokeObjectURL(e)};a0.createBlob=function(e,t){if(t==="svg")return new window.Blob([e],{type:"image/svg+xml;charset=utf-8"});if(t==="full-json")return new window.Blob([e],{type:"application/json;charset=utf-8"});var r=fct(window.atob(e));return new window.Blob([r],{type:"image/"+t})};a0.octetStream=function(e){document.location.href="data:application/octet-stream"+e};function fct(e){for(var t=e.length,r=new ArrayBuffer(t),i=new Uint8Array(r),n=0;n<t;n++)i[n]=e.charCodeAt(n);return r}a0.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/;a0.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."});var tL=ne((enr,pfe)=>{"use strict";var V7=Ai(),cct=Wt(),hct=aa(),vct=_i(),eL=kd(),U7=/"/g,mM="TOBESTRIPPED",dct=new RegExp('("'+mM+")|("+mM+'")',"g");function pct(e){var t=V7.select("body").append("div").style({display:"none"}).html(""),r=e.replace(/(&[^;]*;)/gi,function(i){return i==="&lt;"?"&#60;":i==="&rt;"?"&#62;":i.indexOf("<")!==-1||i.indexOf(">")!==-1?"":t.html(i).text()});return t.remove(),r}function gct(e){return e.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}pfe.exports=function(t,r,i){var n=t._fullLayout,a=n._paper,o=n._toppaper,s=n.width,l=n.height,u;a.insert("rect",":first-child").call(hct.setRect,0,0,s,l).call(vct.fill,n.paper_bgcolor);var f=n._basePlotModules||[];for(u=0;u<f.length;u++){var c=f[u];c.toSVG&&c.toSVG(t)}if(o){var h=o.node().childNodes,v=Array.prototype.slice.call(h);for(u=0;u<v.length;u++){var d=v[u];d.childNodes.length&&a.node().appendChild(d)}}n._draggers&&n._draggers.remove(),a.node().style.background="",a.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var T=V7.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){T.remove();return}else T.style({visibility:null,display:null});var p=this.style.fontFamily;p&&p.indexOf('"')!==-1&&T.style("font-family",p.replace(U7,mM))}),a.selectAll(".gradient_filled,.pattern_filled").each(function(){var T=V7.select(this),p=this.style.fill;p&&p.indexOf("url(")!==-1&&T.style("fill",p.replace(U7,mM));var M=this.style.stroke;M&&M.indexOf("url(")!==-1&&T.style("stroke",M.replace(U7,mM))}),(r==="pdf"||r==="eps")&&a.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),a.node().setAttributeNS(eL.xmlns,"xmlns",eL.svg),a.node().setAttributeNS(eL.xmlns,"xmlns:xlink",eL.xlink),r==="svg"&&i&&(a.attr("width",i*s),a.attr("height",i*l),a.attr("viewBox","0 0 "+s+" "+l));var _=new window.XMLSerializer().serializeToString(a.node());return _=pct(_),_=gct(_),_=_.replace(dct,"'"),cct.isIE()&&(_=_.replace(/"/gi,"'"),_=_.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),_=_.replace(/(\\')/gi,'"')),_}});var rL=ne((tnr,yfe)=>{"use strict";var gfe=Wt(),yct=ox().EventEmitter,z2=Wg();function mct(e){var t=e.emitter||new yct,r=new Promise(function(i,n){var a=window.Image,o=e.svg,s=e.format||"png";if(gfe.isIE()&&s!=="svg"){var l=new Error(z2.MSG_IE_BAD_FORMAT);return n(l),e.promise?r:t.emit("error",l)}var u=e.canvas,f=e.scale||1,c=e.width||300,h=e.height||150,v=f*c,d=f*h,_=u.getContext("2d",{willReadFrequently:!0}),T=new a,p,M;s==="svg"||gfe.isSafari()?M=z2.encodeSVG(o):(p=z2.createBlob(o,"svg"),M=z2.createObjectURL(p)),u.width=v,u.height=d,T.onload=function(){var b;switch(p=null,z2.revokeObjectURL(M),s!=="svg"&&_.drawImage(T,0,0,v,d),s){case"jpeg":b=u.toDataURL("image/jpeg");break;case"png":b=u.toDataURL("image/png");break;case"webp":b=u.toDataURL("image/webp");break;case"svg":b=M;break;default:var w="Image format is not jpeg, png, svg or webp.";if(n(new Error(w)),!e.promise)return t.emit("error",w)}i(b),e.promise||t.emit("success",b)},T.onerror=function(b){if(p=null,z2.revokeObjectURL(M),n(b),!e.promise)return t.emit("error",b)},T.src=M});return e.promise?r:t}yfe.exports=mct});var G7=ne((rnr,_fe)=>{"use strict";var mfe=la(),xfe=$4(),xct=Zs(),W0=Wt(),xM=Wg(),_ct=tL(),bct=rL(),wct=xk().version,H7={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function Tct(e,t){t=t||{};var r,i,n,a;W0.isPlainObject(e)?(r=e.data||[],i=e.layout||{},n=e.config||{},a={}):(e=W0.getGraphDiv(e),r=W0.extendDeep([],e.data),i=W0.extendDeep({},e.layout),n=e._context,a=e._fullLayout||{});function o(x){return!(x in t)||W0.validate(t[x],H7[x])}if(!o("width")&&t.width!==null||!o("height")&&t.height!==null)throw new Error("Height and width should be pixel values.");if(!o("format"))throw new Error("Export format is not "+W0.join2(H7.format.values,", "," or ")+".");var s={};function l(x,E){return W0.coerce(t,s,H7,x,E)}var u=l("format"),f=l("width"),c=l("height"),h=l("scale"),v=l("setBackground"),d=l("imageDataOnly"),_=document.createElement("div");_.style.position="absolute",_.style.left="-5000px",document.body.appendChild(_);var T=W0.extendFlat({},i);f?T.width=f:t.width===null&&mfe(a.width)&&(T.width=a.width),c?T.height=c:t.height===null&&mfe(a.height)&&(T.height=a.height);var p=W0.extendFlat({},n,{_exportedPlot:!0,staticPlot:!0,setBackground:v}),M=xM.getRedrawFunc(_);function b(){return new Promise(function(x){setTimeout(x,xM.getDelay(_._fullLayout))})}function w(){return new Promise(function(x,E){var S=_ct(_,u,h),g=_._fullLayout.width,C=_._fullLayout.height;function A(){xfe.purge(_),document.body.removeChild(_)}if(u==="full-json"){var P=xct.graphJson(_,!1,"keepdata","object",!0,!0);return P.version=wct,P=JSON.stringify(P),A(),x(d?P:xM.encodeJSON(P))}if(A(),u==="svg")return x(d?S:xM.encodeSVG(S));var D=document.createElement("canvas");D.id=W0.randstr(),bct({format:u,width:g,height:C,scale:h,canvas:D,svg:S,promise:!0}).then(x).catch(E)})}function k(x){return d?x.replace(xM.IMAGE_URL_PREFIX,""):x}return new Promise(function(x,E){xfe.newPlot(_,r,T,p).then(M).then(b).then(w).then(function(S){x(k(S))}).catch(function(S){E(S)})})}_fe.exports=Tct});var Afe=ne((nnr,Tfe)=>{"use strict";var hp=Wt(),Act=Zs(),Mct=tm(),Sct=$1().dfltConfig,cp=hp.isPlainObject,wm=Array.isArray,bfe=hp.isArrayOrTypedArray;Tfe.exports=function(t,r){t===void 0&&(t=[]),r===void 0&&(r={});var i=Mct.get(),n=[],a={_context:hp.extendFlat({},Sct)},o,s;wm(t)?(a.data=hp.extendDeep([],t),o=t):(a.data=[],o=[],n.push(rf("array","data"))),cp(r)?(a.layout=hp.extendDeep({},r),s=r):(a.layout={},s={},arguments.length>1&&n.push(rf("object","layout"))),Act.supplyDefaults(a);for(var l=a._fullData,u=o.length,f=0;f<u;f++){var c=o[f],h=["data",f];if(!cp(c)){n.push(rf("object",h));continue}var v=l[f],d=v.type,_=i.traces[d].attributes;_.type={valType:"enumerated",values:[d]},v.visible===!1&&c.visible!==!1&&n.push(rf("invisible",h)),_M(c,v,_,n,h);var T=c.transforms,p=v.transforms;if(T){wm(T)||n.push(rf("array",h,["transforms"])),h.push("transforms");for(var M=0;M<T.length;M++){var b=["transforms",M],w=T[M].type;if(!cp(T[M])){n.push(rf("object",h,b));continue}var k=i.transforms[w]?i.transforms[w].attributes:{};k.type={valType:"enumerated",values:Object.keys(i.transforms)},_M(T[M],p[M],k,n,h,b)}}}var x=a._fullLayout,E=Ect(i,l);return _M(s,x,E,n,"layout"),n.length===0?void 0:n};function _M(e,t,r,i,n,a){a=a||[];for(var o=Object.keys(e),s=0;s<o.length;s++){var l=o[s];if(l!=="transforms"){var u=a.slice();u.push(l);var f=e[l],c=t[l],h=Lct(r,l),v=(h||{}).valType,d=v==="info_array",_=v==="colorscale",T=(h||{}).items;if(!Cct(r,l))i.push(rf("schema",n,u));else if(cp(f)&&cp(c)&&v!=="any")_M(f,c,h,i,n,u);else if(d&&wm(f)){f.length>c.length&&i.push(rf("unused",n,u.concat(c.length)));var p=c.length,M=Array.isArray(T);M&&(p=Math.min(p,T.length));var b,w,k,x,E;if(h.dimensions===2)for(w=0;w<p;w++)if(wm(f[w])){f[w].length>c[w].length&&i.push(rf("unused",n,u.concat(w,c[w].length)));var S=c[w].length;for(b=0;b<(M?Math.min(S,T[w].length):S);b++)k=M?T[w][b]:T,x=f[w][b],E=c[w][b],hp.validate(x,k)?E!==x&&E!==+x&&i.push(rf("dynamic",n,u.concat(w,b),x,E)):i.push(rf("value",n,u.concat(w,b),x))}else i.push(rf("array",n,u.concat(w),f[w]));else for(w=0;w<p;w++)k=M?T[w]:T,x=f[w],E=c[w],hp.validate(x,k)?E!==x&&E!==+x&&i.push(rf("dynamic",n,u.concat(w),x,E)):i.push(rf("value",n,u.concat(w),x))}else if(h.items&&!d&&wm(f)){var g=T[Object.keys(T)[0]],C=[],A,P;for(A=0;A<c.length;A++){var D=c[A]._index||A;if(P=u.slice(),P.push(D),cp(f[D])&&cp(c[A])){C.push(D);var z=f[D],O=c[A];cp(z)&&z.visible!==!1&&O.visible===!1?i.push(rf("invisible",n,P)):_M(z,O,g,i,n,P)}}for(A=0;A<f.length;A++)P=u.slice(),P.push(A),cp(f[A])?C.indexOf(A)===-1&&i.push(rf("unused",n,P)):i.push(rf("object",n,P,f[A]))}else!cp(f)&&cp(c)?i.push(rf("object",n,u,f)):!bfe(f)&&bfe(c)&&!d&&!_?i.push(rf("array",n,u,f)):l in t?hp.validate(f,h)?h.valType==="enumerated"&&(h.coerceNumber&&f!==+c||f!==c)&&i.push(rf("dynamic",n,u,f,c)):i.push(rf("value",n,u,f)):i.push(rf("unused",n,u,f))}}return i}function Ect(e,t){for(var r=e.layout.layoutAttributes,i=0;i<t.length;i++){var n=t[i],a=e.traces[n.type],o=a.layoutAttributes;o&&(n.subplot?hp.extendFlat(r[a.attributes.subplot.dflt],o):hp.extendFlat(r,o))}return r}var kct={object:function(e,t){var r;return e==="layout"&&t===""?r="The layout argument":e[0]==="data"&&t===""?r="Trace "+e[1]+" in the data argument":r=Rx(e)+"key "+t,r+" must be linked to an object container"},array:function(e,t){var r;return e==="data"?r="The data argument":r=Rx(e)+"key "+t,r+" must be linked to an array container"},schema:function(e,t){return Rx(e)+"key "+t+" is not part of the schema"},unused:function(e,t,r){var i=cp(r)?"container":"key";return Rx(e)+i+" "+t+" did not get coerced"},dynamic:function(e,t,r,i){return[Rx(e)+"key",t,"(set to '"+r+"')","got reset to","'"+i+"'","during defaults."].join(" ")},invisible:function(e,t){return(t?Rx(e)+"item "+t:"Trace "+e[1])+" got defaulted to be not visible"},value:function(e,t,r){return[Rx(e)+"key "+t,"is set to an invalid value ("+r+")"].join(" ")}};function Rx(e){return wm(e)?"In data trace "+e[1]+", ":"In "+e+", "}function rf(e,t,r,i,n){r=r||"";var a,o;wm(t)?(a=t[0],o=t[1]):(a=t,o=null);var s=Rct(r),l=kct[e](t,s,i,n);return hp.log(l),{code:e,container:a,trace:o,path:r,astr:s,msg:l}}function Cct(e,t){var r=wfe(t),i=r.keyMinusId,n=r.id;return i in e&&e[i]._isSubplotObj&&n?!0:t in e}function Lct(e,t){if(t in e)return e[t];var r=wfe(t);return e[r.keyMinusId]}var Pct=hp.counterRegex("([a-z]+)");function wfe(e){var t=e.match(Pct);return{keyMinusId:t&&t[1],id:t&&t[2]}}function Rct(e){if(!wm(e))return String(e);for(var t="",r=0;r<e.length;r++){var i=e[r];typeof i=="number"?t=t.substr(0,t.length-1)+"["+i+"]":t+=i,r<e.length-1&&(t+=".")}return t}});var Efe=ne((inr,Sfe)=>{"use strict";var Mfe=Wt(),bM=Wg();function Dct(e,t,r){var i=document.createElement("a"),n="download"in i,a=new Promise(function(o,s){var l,u;if(Mfe.isIE())return l=bM.createBlob(e,"svg"),window.navigator.msSaveBlob(l,t),l=null,o(t);if(n)return l=bM.createBlob(e,r),u=bM.createObjectURL(l),i.href=u,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),bM.revokeObjectURL(u),l=null,o(t);if(Mfe.isSafari()){var f=r==="svg"?",":";base64,";return bM.octetStream(f+encodeURIComponent(e)),o(t)}s(new Error("download error"))});return a}Sfe.exports=Dct});var W7=ne((anr,kfe)=>{"use strict";var Y7=Wt(),Ict=G7(),Fct=Efe(),qct=Wg();function zct(e,t){var r;return Y7.isPlainObject(e)||(r=Y7.getGraphDiv(e)),t=t||{},t.format=t.format||"png",t.width=t.width||null,t.height=t.height||null,t.imageDataOnly=!0,new Promise(function(i,n){r&&r._snapshotInProgress&&n(new Error("Snapshotting already in progress.")),Y7.isIE()&&t.format!=="svg"&&n(new Error(qct.MSG_IE_BAD_FORMAT)),r&&(r._snapshotInProgress=!0);var a=Ict(e,t),o=t.filename||e.fn||"newplot";o+="."+t.format.replace("-","."),a.then(function(s){return r&&(r._snapshotInProgress=!1),Fct(s,o,t.format)}).then(function(s){i(s)}).catch(function(s){r&&(r._snapshotInProgress=!1),n(s)})})}kfe.exports=zct});var Dfe=ne(X7=>{"use strict";var od=Wt(),sd=od.isPlainObject,Cfe=tm(),Lfe=Zs(),Oct=es(),Pfe=So(),Rfe=$1().dfltConfig;X7.makeTemplate=function(e){e=od.isPlainObject(e)?e:od.getGraphDiv(e),e=od.extendDeep({_context:Rfe},{data:e.data,layout:e.layout}),Lfe.supplyDefaults(e);var t=e.data||[],r=e.layout||{};r._basePlotModules=e._fullLayout._basePlotModules,r._modules=e._fullLayout._modules;var i={data:{},layout:{}};t.forEach(function(v){var d={};wM(v,d,Nct.bind(null,v));var _=od.coerce(v,{},Oct,"type"),T=i.data[_];T||(T=i.data[_]=[]),T.push(d)}),wM(r,i.layout,Bct.bind(null,r)),delete i.layout.template;var n=r.template;if(sd(n)){var a=n.layout,o,s,l,u,f,c;sd(a)&&nL(a,i.layout);var h=n.data;if(sd(h)){for(s in i.data)if(l=h[s],Array.isArray(l)){for(f=i.data[s],c=f.length,u=l.length,o=0;o<c;o++)nL(l[o%u],f[o]);for(o=c;o<u;o++)f.push(od.extendDeep({},l[o]))}for(s in h)s in i.data||(i.data[s]=od.extendDeep([],h[s]))}}return i};function nL(e,t){e=od.extendDeep({},e);var r=Object.keys(e).sort(),i,n;function a(f,c,h){if(sd(c)&&sd(f))nL(f,c);else if(Array.isArray(c)&&Array.isArray(f)){var v=Pfe.arrayTemplater({_template:e},h);for(n=0;n<c.length;n++){var d=c[n],_=v.newItem(d)._template;_&&nL(_,d)}var T=v.defaultItems();for(n=0;n<T.length;n++)c.push(T[n]._template);for(n=0;n<c.length;n++)delete c[n].templateitemname}}for(i=0;i<r.length;i++){var o=r[i],s=e[o];if(o in t?a(s,t[o],o):t[o]=s,iL(o)===o)for(var l in t){var u=iL(l);l!==u&&u===o&&!(l in e)&&a(s,t[l],o)}}}function iL(e){return e.replace(/[0-9]+$/,"")}function wM(e,t,r,i,n){var a=n&&r(n);for(var o in e){var s=e[o],l=vp(e,o,i),u=vp(e,o,n),f=r(u);if(!f){var c=iL(o);c!==o&&(u=vp(e,c,n),f=r(u))}if(!(a&&a===f)&&!(!f||f._noTemplating||f.valType==="data_array"||f.arrayOk&&Array.isArray(s)))if(!f.valType&&sd(s))wM(s,t,r,l,u);else if(f._isLinkedToArray&&Array.isArray(s))for(var h=!1,v=0,d={},_=0;_<s.length;_++){var T=s[_];if(sd(T)){var p=T.name;if(p)d[p]||(wM(T,t,r,vp(s,v,l),vp(s,v,u)),v++,d[p]=1);else if(!h){var M=Pfe.arrayDefaultKey(o),b=vp(e,M,i),w=vp(s,v,l);wM(T,t,r,w,vp(s,v,u));var k=od.nestedProperty(t,w),x=od.nestedProperty(t,b);x.set(k.get()),k.set(null),h=!0}}}else{var E=od.nestedProperty(t,l);E.set(s)}}}function Bct(e,t){return Cfe.getLayoutValObject(e,od.nestedProperty({},t).parts)}function Nct(e,t){return Cfe.getTraceValObject(e,od.nestedProperty({},t).parts)}function vp(e,t,r){var i;return r?Array.isArray(e)?i=r+"["+t+"]":i=r+"."+t:i=t,i}X7.validateTemplate=function(e,t){var r=od.extendDeep({},{_context:Rfe,data:e.data,layout:e.layout}),i=r.layout||{};sd(t)||(t=i.template||{});var n=t.layout,a=t.data,o=[];r.layout=i,r.layout.template=t,Lfe.supplyDefaults(r);var s=r._fullLayout,l=r._fullData,u={};function f(b,w){for(var k in b)if(k.charAt(0)!=="_"&&sd(b[k])){var x=iL(k),E=[],S;for(S=0;S<w.length;S++)E.push(vp(b,k,w[S])),x!==k&&E.push(vp(b,x,w[S]));for(S=0;S<E.length;S++)u[E[S]]=1;f(b[k],E)}}function c(b,w){for(var k in b)if(k.indexOf("defaults")===-1&&sd(b[k])){var x=vp(b,k,w);u[x]?c(b[k],x):o.push({code:"unused",path:x})}}if(sd(n)?(f(s,["layout"]),c(n,"layout")):o.push({code:"layout"}),!sd(a))o.push({code:"data"});else{for(var h={},v,d=0;d<l.length;d++){var _=l[d];v=_.type,h[v]=(h[v]||0)+1,_._fullInput._template||o.push({code:"missing",index:_._fullInput.index,traceType:v})}for(v in a){var T=a[v].length,p=h[v]||0;T>p?o.push({code:"unused",traceType:v,templateCount:T,dataCount:p}):p>T&&o.push({code:"reused",traceType:v,templateCount:T,dataCount:p})}}function M(b,w){for(var k in b)if(k.charAt(0)!=="_"){var x=b[k],E=vp(b,k,w);sd(x)?(Array.isArray(b)&&x._template===!1&&x.templateitemname&&o.push({code:"missing",path:E,templateitemname:x.templateitemname}),M(x,E)):Array.isArray(x)&&Uct(x)&&M(x,E)}}if(M({data:l,layout:s},""),o.length)return o.map(Vct)};function Uct(e){for(var t=0;t<e.length;t++)if(sd(e[t]))return!0}function Vct(e){var t;switch(e.code){case"data":t="The template has no key data.";break;case"layout":t="The template has no key layout.";break;case"missing":e.path?t="There are no templates for item "+e.path+" with name "+e.templateitemname:t="There are no templates for trace "+e.index+", of type "+e.traceType+".";break;case"unused":e.path?t="The template item at "+e.path+" was not used in constructing the plot.":e.dataCount?t="Some of the templates of type "+e.traceType+" were not used. The template has "+e.templateCount+" traces, the data only has "+e.dataCount+" of this type.":t="The template has "+e.templateCount+" traces of type "+e.traceType+" but there are none in the data.";break;case"reused":t="Some of the templates of type "+e.traceType+" were used more than once. The template has "+e.templateCount+" traces, the data has "+e.dataCount+" of this type.";break}return e.msg=t,e}});var Ffe=ne(bl=>{"use strict";var Sf=$4();bl._doPlot=Sf._doPlot;bl.newPlot=Sf.newPlot;bl.restyle=Sf.restyle;bl.relayout=Sf.relayout;bl.redraw=Sf.redraw;bl.update=Sf.update;bl._guiRestyle=Sf._guiRestyle;bl._guiRelayout=Sf._guiRelayout;bl._guiUpdate=Sf._guiUpdate;bl._storeDirectGUIEdit=Sf._storeDirectGUIEdit;bl.react=Sf.react;bl.extendTraces=Sf.extendTraces;bl.prependTraces=Sf.prependTraces;bl.addTraces=Sf.addTraces;bl.deleteTraces=Sf.deleteTraces;bl.moveTraces=Sf.moveTraces;bl.purge=Sf.purge;bl.addFrames=Sf.addFrames;bl.deleteFrames=Sf.deleteFrames;bl.animate=Sf.animate;bl.setPlotConfig=Sf.setPlotConfig;var Hct=fA().getGraphDiv,Gct=x4().eraseActiveShape;bl.deleteActiveShape=function(e){return Gct(Hct(e))};bl.toImage=G7();bl.validate=Afe();bl.downloadImage=W7();var Ife=Dfe();bl.makeTemplate=Ife.makeTemplate;bl.validateTemplate=Ife.validateTemplate});var O2=ne((lnr,qfe)=>{"use strict";var Z7=Wt(),Yct=wi();qfe.exports=function(t,r,i,n){var a=n("x"),o=n("y"),s,l=Yct.getComponentMethod("calendars","handleTraceDefaults");if(l(t,r,["x","y"],i),a){var u=Z7.minRowLength(a);o?s=Math.min(u,Z7.minRowLength(o)):(s=u,n("y0"),n("dy"))}else{if(!o)return 0;s=Z7.minRowLength(o),n("x0"),n("dx")}return r._length=s,s}});var o0=ne((unr,Bfe)=>{"use strict";var zfe=Wt().dateTick0,Wct=$a(),Xct=Wct.ONEWEEK;function Ofe(e,t){return e%Xct===0?zfe(t,1):zfe(t,0)}Bfe.exports=function(t,r,i,n,a){if(a||(a={x:!0,y:!0}),a.x){var o=n("xperiod");o&&(n("xperiod0",Ofe(o,r.xcalendar)),n("xperiodalignment"))}if(a.y){var s=n("yperiod");s&&(n("yperiod0",Ofe(s,r.ycalendar)),n("yperiodalignment"))}}});var Vfe=ne((fnr,Ufe)=>{"use strict";var Nfe=["orientation","groupnorm","stackgaps"];Ufe.exports=function(t,r,i,n){var a=i._scatterStackOpts,o=n("stackgroup");if(o){var s=r.xaxis+r.yaxis,l=a[s];l||(l=a[s]={});var u=l[o],f=!1;u?u.traces.push(r):(u=l[o]={traceIndices:[],traces:[r]},f=!0);for(var c={orientation:r.x&&!r.y?"h":"v"},h=0;h<Nfe.length;h++){var v=Nfe[h],d=v+"Found";if(!u[d]){var _=t[v]!==void 0,T=v==="orientation";if((_||f)&&(u[v]=n(v,c[v]),T&&(u.fillDflt=u[v]==="h"?"tonextx":"tonexty"),_&&(u[d]=!0,!f&&(delete u.traces[0][v],T))))for(var p=0;p<u.traces.length-1;p++){var M=u.traces[p];M._input.fill!==M.fill&&(M.fill=u.fillDflt)}}}return u}}});var dp=ne((cnr,Wfe)=>{"use strict";var Hfe=_i(),Gfe=Uh().hasColorscale,Yfe=Kf(),Zct=js();Wfe.exports=function(t,r,i,n,a,o){var s=Zct.isBubble(t),l=(t.line||{}).color,u;if(o=o||{},l&&(i=l),a("marker.symbol"),a("marker.opacity",s?.7:1),a("marker.size"),o.noAngle||(a("marker.angle"),o.noAngleRef||a("marker.angleref"),o.noStandOff||a("marker.standoff")),a("marker.color",i),Gfe(t,"marker")&&Yfe(t,r,n,a,{prefix:"marker.",cLetter:"c"}),o.noSelect||(a("selected.marker.color"),a("unselected.marker.color"),a("selected.marker.size"),a("unselected.marker.size")),o.noLine||(l&&!Array.isArray(l)&&r.marker.color!==l?u=l:s?u=Hfe.background:u=Hfe.defaultLine,a("marker.line.color",u),Gfe(t,"marker.line")&&Yfe(t,r,n,a,{prefix:"marker.line.",cLetter:"c"}),a("marker.line.width",s?1:0)),s&&(a("marker.sizeref"),a("marker.sizemin"),a("marker.sizemode")),o.gradient){var f=a("marker.gradient.type");f!=="none"&&a("marker.gradient.color")}}});var s0=ne((hnr,Xfe)=>{"use strict";var jct=Wt().isArrayOrTypedArray,Kct=Uh().hasColorscale,Jct=Kf();Xfe.exports=function(t,r,i,n,a,o){o||(o={});var s=(t.marker||{}).color;if(s&&s._inputArray&&(s=s._inputArray),a("line.color",i),Kct(t,"line"))Jct(t,r,n,a,{prefix:"line.",cLetter:"c"});else{var l=(jct(s)?!1:s)||i;a("line.color",l)}a("line.width"),o.noDash||a("line.dash"),o.backoff&&a("line.backoff")}});var B2=ne((vnr,Zfe)=>{"use strict";Zfe.exports=function(t,r,i){var n=i("line.shape");n==="spline"&&i("line.smoothing")}});var l0=ne((dnr,jfe)=>{"use strict";var Qct=Wt();jfe.exports=function(e,t,r,i,n){n=n||{},i("textposition"),Qct.coerceFont(i,"textfont",n.font||r.font),n.noSelect||(i("selected.textfont.color"),i("unselected.textfont.color"))}});var X0=ne((pnr,Jfe)=>{"use strict";var aL=_i(),Kfe=Wt().isArrayOrTypedArray;function $ct(e){for(var t=aL.interpolate(e[0][1],e[1][1],.5),r=2;r<e.length;r++){var i=aL.interpolate(e[r-1][1],e[r][1],.5);t=aL.interpolate(t,i,e[r-1][0]/e[r][0])}return t}Jfe.exports=function(t,r,i,n,a){a||(a={});var o=!1;if(r.marker){var s=r.marker.color,l=(r.marker.line||{}).color;s&&!Kfe(s)?o=s:l&&!Kfe(l)&&(o=l)}var u;if(a.moduleHasFillgradient){var f=n("fillgradient.type");if(f!=="none"){n("fillgradient.start"),n("fillgradient.stop");var c=n("fillgradient.colorscale");c&&(u=$ct(c))}}n("fillcolor",aL.addOpacity((r.line||{}).color||o||u||i,.5))}});var tce=ne((gnr,ece)=>{"use strict";var Qfe=Wt(),eht=wi(),tht=cu(),rht=G0(),N2=js(),nht=O2(),iht=o0(),aht=Vfe(),oht=dp(),sht=s0(),$fe=B2(),lht=l0(),uht=X0(),fht=Wt().coercePattern;ece.exports=function(t,r,i,n){function a(v,d){return Qfe.coerce(t,r,tht,v,d)}var o=nht(t,r,n,a);if(o||(r.visible=!1),!!r.visible){iht(t,r,n,a),a("xhoverformat"),a("yhoverformat");var s=aht(t,r,n,a);n.scattermode==="group"&&r.orientation===void 0&&a("orientation","v");var l=!s&&o<rht.PTS_LINESONLY?"lines+markers":"lines";a("text"),a("hovertext"),a("mode",l),N2.hasMarkers(r)&&oht(t,r,i,n,a,{gradient:!0}),N2.hasLines(r)&&(sht(t,r,i,n,a,{backoff:!0}),$fe(t,r,a),a("connectgaps"),a("line.simplify")),N2.hasText(r)&&(a("texttemplate"),lht(t,r,n,a));var u=[];(N2.hasMarkers(r)||N2.hasText(r))&&(a("cliponaxis"),a("marker.maxdisplayed"),u.push("points")),a("fill",s?s.fillDflt:"none"),r.fill!=="none"&&(uht(t,r,i,a,{moduleHasFillgradient:!0}),N2.hasLines(r)||$fe(t,r,a),fht(a,"fillpattern",r.fillcolor,!1));var f=(r.line||{}).color,c=(r.marker||{}).color;(r.fill==="tonext"||r.fill==="toself")&&u.push("fills"),a("hoveron",u.join("+")||"points"),r.hoveron!=="fills"&&a("hovertemplate");var h=eht.getComponentMethod("errorbars","supplyDefaults");h(t,r,f||c||i,{axis:"y"}),h(t,r,f||c||i,{axis:"x",inherit:"y"}),Qfe.coerceSelectionMarkerOpacity(r,a)}}});var Dx=ne((ynr,rce)=>{"use strict";var cht=mm().getAxisGroup;rce.exports=function(t,r,i,n){var a=r.orientation,o=r[{v:"x",h:"y"}[a]+"axis"],s=cht(i,o)+a,l=i._alignmentOpts||{},u=n("alignmentgroup"),f=l[s];f||(f=l[s]={});var c=f[u];c?c.traces.push(r):c=f[u]={traces:[r],alignmentIndex:Object.keys(f).length,offsetGroups:{}};var h=n("offsetgroup"),v=c.offsetGroups,d=v[h];h&&(d||(d=v[h]={offsetIndex:Object.keys(v).length}),r._offsetIndex=d.offsetIndex)}});var j7=ne((mnr,nce)=>{"use strict";var hht=Wt(),vht=Dx(),dht=cu();nce.exports=function(t,r){var i,n,a;function o(c){return hht.coerce(n._input,n,dht,c)}if(r.scattermode==="group")for(a=0;a<t.length;a++)n=t[a],n.type==="scatter"&&(i=n._input,vht(i,n,r,o));for(a=0;a<t.length;a++){var s=t[a];if(s.type==="scatter"){var l=s.fill;if(!(l==="none"||l==="toself")&&(s.opacity=void 0,l==="tonexty"||l==="tonextx"))for(var u=a-1;u>=0;u--){var f=t[u];if(f.type==="scatter"&&f.xaxis===s.xaxis&&f.yaxis===s.yaxis){f.opacity=void 0;break}}}}}});var ace=ne((xnr,ice)=>{"use strict";var pht=Wt(),ght=lC();ice.exports=function(e,t){function r(n,a){return pht.coerce(e,t,ght,n,a)}var i=t.barmode==="group";t.scattermode==="group"&&r("scattergap",i?t.bargap:.2)}});var u0=ne((_nr,sce)=>{"use strict";var yht=la(),oce=Wt(),mht=oce.dateTime2ms,oL=oce.incrementMonth,xht=$a(),_ht=xht.ONEAVGMONTH;sce.exports=function(t,r,i,n){if(r.type!=="date")return{vals:n};var a=t[i+"periodalignment"];if(!a)return{vals:n};var o=t[i+"period"],s;if(yht(o)){if(o=+o,o<=0)return{vals:n}}else if(typeof o=="string"&&o.charAt(0)==="M"){var l=+o.substring(1);if(l>0&&Math.round(l)===l)s=l;else return{vals:n}}for(var u=r.calendar,f=a==="start",c=a==="end",h=t[i+"period0"],v=mht(h,u)||0,d=[],_=[],T=[],p=n.length,M=0;M<p;M++){var b=n[M],w,k,x;if(s){for(w=Math.round((b-v)/(s*_ht)),x=oL(v,s*w,u);x>b;)x=oL(x,-s,u);for(;x<=b;)x=oL(x,s,u);k=oL(x,-s,u)}else{for(w=Math.round((b-v)/o),x=v+w*o;x>b;)x-=o;for(;x<=b;)x+=o;k=x-o}d[M]=f?k:c?x:(k+x)/2,_[M]=k,T[M]=x}return{vals:d,starts:_,ends:T}}});var pp=ne((bnr,uce)=>{"use strict";var K7=Uh().hasColorscale,J7=gv(),lce=js();uce.exports=function(t,r){lce.hasLines(r)&&K7(r,"line")&&J7(t,r,{vals:r.line.color,containerStr:"line",cLetter:"c"}),lce.hasMarkers(r)&&(K7(r,"marker")&&J7(t,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),K7(r,"marker.line")&&J7(t,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}});var Z0=ne((wnr,fce)=>{"use strict";var zc=Wt();fce.exports=function(t,r){for(var i=0;i<t.length;i++)t[i].i=i;zc.mergeArray(r.text,t,"tx"),zc.mergeArray(r.texttemplate,t,"txt"),zc.mergeArray(r.hovertext,t,"htx"),zc.mergeArray(r.customdata,t,"data"),zc.mergeArray(r.textposition,t,"tp"),r.textfont&&(zc.mergeArrayCastPositive(r.textfont.size,t,"ts"),zc.mergeArray(r.textfont.color,t,"tc"),zc.mergeArray(r.textfont.family,t,"tf"));var n=r.marker;if(n){zc.mergeArrayCastPositive(n.size,t,"ms"),zc.mergeArrayCastPositive(n.opacity,t,"mo"),zc.mergeArray(n.symbol,t,"mx"),zc.mergeArray(n.angle,t,"ma"),zc.mergeArray(n.standoff,t,"mf"),zc.mergeArray(n.color,t,"mc");var a=n.line;n.line&&(zc.mergeArray(a.color,t,"mlc"),zc.mergeArrayCastPositive(a.width,t,"mlw"));var o=n.gradient;o&&o.type!=="none"&&(zc.mergeArray(o.type,t,"mgt"),zc.mergeArray(o.color,t,"mgc"))}}});var gp=ne((Tnr,hce)=>{"use strict";var cce=Wt();hce.exports=function(t,r){cce.isArrayOrTypedArray(r.selectedpoints)&&cce.tagSelected(t,r)}});var yp=ne((Anr,xce)=>{"use strict";var vce=la(),$7=Wt(),TM=Xi(),dce=u0(),Q7=$a().BADNUM,eB=js(),bht=pp(),wht=Z0(),Tht=gp();function Aht(e,t){var r=e._fullLayout,i=t._xA=TM.getFromId(e,t.xaxis||"x","x"),n=t._yA=TM.getFromId(e,t.yaxis||"y","y"),a=i.makeCalcdata(t,"x"),o=n.makeCalcdata(t,"y"),s=dce(t,i,"x",a),l=dce(t,n,"y",o),u=s.vals,f=l.vals,c=t._length,h=new Array(c),v=t.ids,d=tB(t,r,i,n),_=!1,T,p,M,b,w,k;yce(r,t);var x="x",E="y",S;if(d)$7.pushUnique(d.traceIndices,t._expandedIndex),T=d.orientation==="v",T?(E="s",S="x"):(x="s",S="y"),w=d.stackgaps==="interpolate";else{var g=gce(t,c);pce(e,t,i,n,u,f,g)}var C=!!t.xperiodalignment,A=!!t.yperiodalignment;for(p=0;p<c;p++){var P=h[p]={},D=vce(u[p]),z=vce(f[p]);D&&z?(P[x]=u[p],P[E]=f[p],C&&(P.orig_x=a[p],P.xEnd=s.ends[p],P.xStart=s.starts[p]),A&&(P.orig_y=o[p],P.yEnd=l.ends[p],P.yStart=l.starts[p])):d&&(T?D:z)?(P[S]=T?u[p]:f[p],P.gap=!0,w?(P.s=Q7,_=!0):P.s=0):P[x]=P[E]=Q7,v&&(P.id=String(v[p]))}if(wht(h,t),bht(e,t),Tht(h,t),d){for(p=0;p<h.length;)h[p][S]===Q7?h.splice(p,1):p++;if($7.sort(h,function(F,N){return F[S]-N[S]||F.i-N.i}),_){for(p=0;p<h.length-1&&h[p].gap;)p++;for(k=h[p].s,k||(k=h[p].s=0),M=0;M<p;M++)h[M].s=k;for(b=h.length-1;b>p&&h[b].gap;)b--;for(k=h[b].s,M=h.length-1;M>b;M--)h[M].s=k;for(;p<b;)if(p++,h[p].gap){for(M=p+1;h[M].gap;)M++;for(var O=h[p-1][S],V=h[p-1].s,B=(h[M].s-V)/(h[M][S]-O);p<M;)h[p].s=V+(h[p][S]-O)*B,p++}}}return h}function pce(e,t,r,i,n,a,o){var s=t._length,l=e._fullLayout,u=r._id,f=i._id,c=l._firstScatter[mce(t)]===t.uid,h=(tB(t,l,r,i)||{}).orientation,v=t.fill;r._minDtick=0,i._minDtick=0;var d={padded:!0},_={padded:!0};o&&(d.ppad=_.ppad=o);var T=s<2||n[0]!==n[s-1]||a[0]!==a[s-1];T&&(v==="tozerox"||v==="tonextx"&&(c||h==="h"))?d.tozero=!0:!(t.error_y||{}).visible&&(v==="tonexty"||v==="tozeroy"||!eB.hasMarkers(t)&&!eB.hasText(t))&&(d.padded=!1,d.ppad=0),T&&(v==="tozeroy"||v==="tonexty"&&(c||h==="v"))?_.tozero=!0:(v==="tonextx"||v==="tozerox")&&(_.padded=!1),u&&(t._extremes[u]=TM.findExtremes(r,n,d)),f&&(t._extremes[f]=TM.findExtremes(i,a,_))}function gce(e,t){if(eB.hasMarkers(e)){var r=e.marker,i=1.6*(e.marker.sizeref||1),n;if(e.marker.sizemode==="area"?n=function(u){return Math.max(Math.sqrt((u||0)/i),3)}:n=function(u){return Math.max((u||0)/i,3)},$7.isArrayOrTypedArray(r.size)){var a={type:"linear"};TM.setConvert(a);for(var o=a.makeCalcdata(e.marker,"size"),s=new Array(t),l=0;l<t;l++)s[l]=n(o[l]);return s}else return n(r.size)}}function yce(e,t){var r=mce(t),i=e._firstScatter;i[r]||(i[r]=t.uid)}function mce(e){var t=e.stackgroup;return e.xaxis+e.yaxis+e.type+(t?"-"+t:"")}function tB(e,t,r,i){var n=e.stackgroup;if(n){var a=t._scatterStackOpts[r._id+i._id][n],o=a.orientation==="v"?i:r;if(o.type==="linear"||o.type==="log")return a}}xce.exports={calc:Aht,calcMarkerSize:gce,calcAxisExpansion:pce,setFirstScatter:yce,getStackOpts:tB}});var bce=ne((Mnr,_ce)=>{"use strict";_ce.exports=sL;var Mht=Wt().distinctVals;function sL(e,t){this.traces=e,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var r=1/0,i=t.posAxis._id.charAt(0),n=[],a=0;a<e.length;a++){for(var o=e[a],s=0;s<o.length;s++){var l=o[s],u=l.p;u===void 0&&(u=l[i]),u!==void 0&&n.push(u)}o[0]&&o[0].width1&&(r=Math.min(o[0].width1,r))}this.positions=n;var f=Mht(n);this.distinctPositions=f.vals,f.vals.length===1&&r!==1/0?this.minDiff=r:this.minDiff=Math.min(f.minDiff,r);var c=(t.posAxis||{}).type;(c==="category"||c==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}sL.prototype.put=function(t,r){var i=this.getLabel(t,r),n=this.bins[i]||0;return this.bins[i]=n+r,n};sL.prototype.get=function(t,r){var i=this.getLabel(t,r);return this.bins[i]||0};sL.prototype.getLabel=function(t,r){var i=r<0&&this.sepNegVal?"v":"^",n=this.overlapNoMerge?t:Math.round(t/this.binWidth);return i+n}});var Ix=ne((Snr,kce)=>{"use strict";var mp=la(),Tm=Wt().isArrayOrTypedArray,U2=$a().BADNUM,Sht=wi(),AM=Xi(),Eht=mm().getAxisGroup,lL=bce();function kht(e,t){for(var r=t.xaxis,i=t.yaxis,n=e._fullLayout,a=e._fullData,o=e.calcdata,s=[],l=[],u=0;u<a.length;u++){var f=a[u];if(f.visible===!0&&Sht.traceIs(f,"bar")&&f.xaxis===r._id&&f.yaxis===i._id&&(f.orientation==="h"?s.push(o[u]):l.push(o[u]),f._computePh))for(var c=e.calcdata[u],h=0;h<c.length;h++)typeof c[h].ph0=="function"&&(c[h].ph0=c[h].ph0()),typeof c[h].ph1=="function"&&(c[h].ph1=c[h].ph1())}var v={xCat:r.type==="category"||r.type==="multicategory",yCat:i.type==="category"||i.type==="multicategory",mode:n.barmode,norm:n.barnorm,gap:n.bargap,groupgap:n.bargroupgap};nB(e,r,i,l,v),nB(e,i,r,s,v)}function nB(e,t,r,i,n){if(i.length){var a,o,s,l,u;switch(Pht(r,i),n.mode){case"overlay":rB(t,r,i,n);break;case"group":for(a=[],o=[],s=0;s<i.length;s++)l=i[s],u=l[0].trace,u.offset===void 0?o.push(l):a.push(l);o.length&&Rht(e,t,r,o,n),a.length&&rB(t,r,a,n);break;case"stack":case"relative":for(a=[],o=[],s=0;s<i.length;s++)l=i[s],u=l[0].trace,u.base===void 0?o.push(l):a.push(l);Lht(o),o.length&&Dht(e,t,r,o,n),a.length&&rB(t,r,a,n);break}Cht(i),Oht(i,t)}}function Cht(e){var t,r,i,n,a,o,s;for(t=0;t<e.length;t++)r=e[t],i=r[0].trace,n=r[0].t,n.cornerradiusvalue===void 0&&(a=i.marker?i.marker.cornerradius:void 0,a!==void 0&&(o=mp(a)?+a:+a.slice(0,-1),s=mp(a)?"px":"%",n.cornerradiusvalue=o,n.cornerradiusform=s))}function Lht(e){if(!(e.length<2)){var t,r,i,n,a,o,s;for(t=0;t<e.length&&(r=e[t],i=r[0].trace,a=i.marker?i.marker.cornerradius:void 0,a===void 0);t++);if(a!==void 0)for(o=mp(a)?+a:+a.slice(0,-1),s=mp(a)?"px":"%",t=0;t<e.length;t++)r=e[t],n=r[0].t,n.cornerradiusvalue=o,n.cornerradiusform=s}}function Pht(e,t){var r,i;for(r=0;r<t.length;r++){var n=t[r],a=n[0].trace,o=a.type==="funnel"?a._base:a.base,s,l=a.orientation==="h"?a.xcalendar:a.ycalendar,u=e.type==="category"||e.type==="multicategory"?function(){return null}:e.d2c;if(Tm(o)){for(i=0;i<Math.min(o.length,n.length);i++)s=u(o[i],0,l),mp(s)?(n[i].b=+s,n[i].hasB=1):n[i].b=0;for(;i<n.length;i++)n[i].b=0}else{s=u(o,0,l);var f=mp(s);for(s=f?s:0,i=0;i<n.length;i++)n[i].b=s,f&&(n[i].hasB=1)}}}function rB(e,t,r,i){for(var n=0;n<r.length;n++){var a=r[n],o=new lL([a],{posAxis:e,sepNegVal:!1,overlapNoMerge:!i.norm});wce(e,o,i),i.norm?(Ece(o),iB(t,o,i)):Sce(t,o)}}function Rht(e,t,r,i,n){var a=new lL(i,{posAxis:t,sepNegVal:!1,overlapNoMerge:!n.norm});Iht(e,t,a,n),qht(a,t),n.norm?(Ece(a),iB(r,a,n)):Sce(r,a)}function Dht(e,t,r,i,n){var a=new lL(i,{posAxis:t,sepNegVal:n.mode==="relative",overlapNoMerge:!(n.norm||n.mode==="stack"||n.mode==="relative")});wce(t,a,n),Fht(r,a,n);for(var o=0;o<i.length;o++)for(var s=i[o],l=0;l<s.length;l++){var u=s[l];if(u.s!==U2){var f=u.b+u.s===a.get(u.p,u.s);f&&(u._outmost=!0)}}n.norm&&iB(r,a,n)}function wce(e,t,r){for(var i=t.minDiff,n=t.traces,a=i*(1-r.gap),o=a,s=o*(1-(r.groupgap||0)),l=-s/2,u=0;u<n.length;u++){var f=n[u],c=f[0].t;c.barwidth=s,c.poffset=l,c.bargroupwidth=a,c.bardelta=i}t.binWidth=n[0][0].t.barwidth/100,Tce(t),Ace(e,t),Mce(e,t)}function Iht(e,t,r,i){for(var n=e._fullLayout,a=r.positions,o=r.distinctPositions,s=r.minDiff,l=r.traces,u=l.length,f=a.length!==o.length,c=s*(1-i.gap),h=Eht(n,t._id)+l[0][0].trace.orientation,v=n._alignmentOpts[h]||{},d=0;d<u;d++){var _=l[d],T=_[0].trace,p=v[T.alignmentgroup]||{},M=Object.keys(p.offsetGroups||{}).length,b;M?b=c/M:b=f?c/u:c;var w=b*(1-(i.groupgap||0)),k;M?k=((2*T._offsetIndex+1-M)*b-w)/2:k=f?((2*d+1-u)*b-w)/2:-w/2;var x=_[0].t;x.barwidth=w,x.poffset=k,x.bargroupwidth=c,x.bardelta=s}r.binWidth=l[0][0].t.barwidth/100,Tce(r),Ace(t,r),Mce(t,r,f)}function Tce(e){var t=e.traces,r,i;for(r=0;r<t.length;r++){var n=t[r],a=n[0],o=a.trace,s=a.t,l=o._offset||o.offset,u=s.poffset,f;if(Tm(l)){for(f=Array.prototype.slice.call(l,0,n.length),i=0;i<f.length;i++)mp(f[i])||(f[i]=u);for(i=f.length;i<n.length;i++)f.push(u);s.poffset=f}else l!==void 0&&(s.poffset=l);var c=o._width||o.width,h=s.barwidth;if(Tm(c)){var v=Array.prototype.slice.call(c,0,n.length);for(i=0;i<v.length;i++)mp(v[i])||(v[i]=h);for(i=v.length;i<n.length;i++)v.push(h);if(s.barwidth=v,l===void 0){for(f=[],i=0;i<n.length;i++)f.push(u+(h-v[i])/2);s.poffset=f}}else c!==void 0&&(s.barwidth=c,l===void 0&&(s.poffset=u+(h-c)/2))}}function Ace(e,t){for(var r=t.traces,i=V2(e),n=0;n<r.length;n++)for(var a=r[n],o=a[0].t,s=o.poffset,l=Tm(s),u=o.barwidth,f=Tm(u),c=0;c<a.length;c++){var h=a[c],v=h.w=f?u[c]:u;h.p===void 0&&(h.p=h[i],h["orig_"+i]=h[i]);var d=(l?s[c]:s)+v/2;h[i]=h.p+d}}function Mce(e,t,r){var i=t.traces,n=t.minDiff,a=n/2;AM.minDtick(e,t.minDiff,t.distinctPositions[0],r);for(var o=0;o<i.length;o++){var s=i[o],l=s[0],u=l.trace,f=[],c,h,v,d;for(d=0;d<s.length;d++)c=s[d],h=c.p-a,v=c.p+a,f.push(h,v);if(u.width||u.offset){var _=l.t,T=_.poffset,p=_.barwidth,M=Tm(T),b=Tm(p);for(d=0;d<s.length;d++){c=s[d];var w=M?T[d]:T,k=b?p[d]:p;h=c.p+w,v=h+k,f.push(h,v)}}u._extremes[e._id]=AM.findExtremes(e,f,{padded:!1})}}function Sce(e,t){for(var r=t.traces,i=V2(e),n=0;n<r.length;n++){for(var a=r[n],o=a[0].trace,s=o.type==="scatter",l=o.orientation==="v",u=[],f=!1,c=0;c<a.length;c++){var h=a[c],v=s?0:h.b,d=s?l?h.y:h.x:v+h.s;h[i]=d,u.push(d),h.hasB&&u.push(v),(!h.hasB||!h.b)&&(f=!0)}o._extremes[e._id]=AM.findExtremes(e,u,{tozero:f,padded:!0})}}function Fht(e,t,r){var i=V2(e),n=t.traces,a,o,s,l,u,f;for(l=0;l<n.length;l++)if(a=n[l],o=a[0].trace,o.type==="funnel")for(u=0;u<a.length;u++)f=a[u],f.s!==U2&&t.put(f.p,-.5*f.s);for(l=0;l<n.length;l++){a=n[l],o=a[0].trace,s=o.type==="funnel";var c=[];for(u=0;u<a.length;u++)if(f=a[u],f.s!==U2){var h;s?h=f.s:h=f.s+f.b;var v=t.put(f.p,h),d=v+h;f.b=v,f[i]=d,r.norm||(c.push(d),f.hasB&&c.push(v))}r.norm||(o._extremes[e._id]=AM.findExtremes(e,c,{tozero:!0,padded:!0}))}}function Ece(e){for(var t=e.traces,r=0;r<t.length;r++)for(var i=t[r],n=0;n<i.length;n++){var a=i[n];a.s!==U2&&e.put(a.p,a.b+a.s)}}function qht(e,t){for(var r=e.traces,i=0;i<r.length;i++){var n=r[i],a=n[0].trace;if(a.base===void 0)for(var o=new lL([n],{posAxis:t,sepNegVal:!0,overlapNoMerge:!0}),s=0;s<n.length;s++){var l=n[s];if(l.p!==U2){var u=o.put(l.p,l.b+l.s);u&&(l.b=u)}}}}function iB(e,t,r){var i=t.traces,n=V2(e),a=r.norm==="fraction"?1:100,o=a/1e9,s=e.l2c(e.c2l(0)),l=r.mode==="stack"?a:s;function u(k){return mp(e.c2l(k))&&(k<s-o||k>l+o||!mp(s))}for(var f=0;f<i.length;f++){for(var c=i[f],h=c[0].trace,v=[],d=!1,_=!1,T=0;T<c.length;T++){var p=c[T];if(p.s!==U2){var M=Math.abs(a/t.get(p.p,p.s));p.b*=M,p.s*=M;var b=p.b,w=b+p.s;p[n]=w,v.push(w),_=_||u(w),p.hasB&&(v.push(b),_=_||u(b)),(!p.hasB||!p.b)&&(d=!0)}}h._extremes[e._id]=AM.findExtremes(e,v,{tozero:d,padded:_})}}function zht(e,t,r,i){for(var n=V2(i),a=0;a<e.length;a++)for(var o=e[a],s=0;s<o.length;s++){var l=o[s],u=l[n];l._sMin=t[u],l._sMax=r[u]}}function Oht(e,t){var r=V2(t),i={},n,a,o,s=1/0,l=-1/0;for(n=0;n<e.length;n++)for(o=e[n],a=0;a<o.length;a++){var u=o[a].p;mp(u)&&(s=Math.min(s,u),l=Math.max(l,u))}var f=1e4/(l-s),c=i.round=function(S){return String(Math.round(f*(S-s)))},h={},v={},d=e.some(function(S){var g=S[0].trace;return"marker"in g&&g.marker.cornerradius});for(n=0;n<e.length;n++){o=e[n],o[0].t.extents=i;var _=o[0].t.poffset,T=Tm(_);for(a=0;a<o.length;a++){var p=o[a],M=p[r]-p.w/2;if(mp(M)){var b=p[r]+p.w/2,w=c(p.p);i[w]?i[w]=[Math.min(M,i[w][0]),Math.max(b,i[w][1])]:i[w]=[M,b]}if(p.p0=p.p+(T?_[a]:_),p.p1=p.p0+p.w,p.s0=p.b,p.s1=p.s0+p.s,d){var k=Math.min(p.s0,p.s1)||0,x=Math.max(p.s0,p.s1)||0,E=p[r];h[E]=E in h?Math.min(h[E],k):k,v[E]=E in v?Math.max(v[E],x):x}}}d&&zht(e,h,v,t)}function V2(e){return e._id.charAt(0)}kce.exports={crossTraceCalc:kht,setGroupPositions:nB}});var Rce=ne((Enr,Pce)=>{"use strict";var Cce=yp(),Lce=Ix().setGroupPositions;function Bht(e,t){for(var r=t.xaxis,i=t.yaxis,n=e._fullLayout,a=e._fullData,o=e.calcdata,s=[],l=[],u=0;u<a.length;u++){var f=a[u];f.visible===!0&&f.type==="scatter"&&f.xaxis===r._id&&f.yaxis===i._id&&(f.orientation==="h"?s.push(o[u]):f.orientation==="v"&&l.push(o[u]))}var c={mode:n.scattermode,gap:n.scattergap};Lce(e,r,i,l,c),Lce(e,i,r,s,c)}Pce.exports=function(t,r){t._fullLayout.scattermode==="group"&&Bht(t,r);var i=r.xaxis,n=r.yaxis,a=i._id+n._id,o=t._fullLayout._scatterStackOpts[a];if(o){var s=t.calcdata,l,u,f,c,h,v,d,_,T,p,M,b,w,k,x;for(var E in o){p=o[E];var S=p.traceIndices;if(S.length){for(M=p.stackgaps==="interpolate",b=p.groupnorm,p.orientation==="v"?(w="x",k="y"):(w="y",k="x"),x=new Array(S.length),l=0;l<x.length;l++)x[l]=!1;v=s[S[0]];var g=new Array(v.length);for(l=0;l<v.length;l++)g[l]=v[l][w];for(l=1;l<S.length;l++){for(h=s[S[l]],u=f=0;u<h.length;u++){for(d=h[u][w];d>g[f]&&f<g.length;f++)aB(h,u,g[f],l,x,M,w),u++;if(d!==g[f]){for(c=0;c<l;c++)aB(s[S[c]],f,d,c,x,M,w);g.splice(f,0,d)}f++}for(;f<g.length;f++)aB(h,u,g[f],l,x,M,w),u++}var C=g.length;for(u=0;u<v.length;u++){for(_=v[u][k]=v[u].s,l=1;l<S.length;l++)h=s[S[l]],h[0].trace._rawLength=h[0].trace._length,h[0].trace._length=C,_+=h[u].s,h[u][k]=_;if(b)for(T=(b==="fraction"?_:_/100)||1,l=0;l<S.length;l++){var A=s[S[l]][u];A[k]/=T,A.sNorm=A.s/T}}for(l=0;l<S.length;l++){h=s[S[l]];var P=h[0].trace,D=Cce.calcMarkerSize(P,P._rawLength),z=Array.isArray(D);if(D&&x[l]||z){var O=D;for(D=new Array(C),u=0;u<C;u++)D[u]=h[u].gap?0:z?O[h[u].i]:O}var V=new Array(C),B=new Array(C);for(u=0;u<C;u++)V[u]=h[u].x,B[u]=h[u].y;Cce.calcAxisExpansion(t,P,i,n,V,B,D),h[0].t.orientation=p.orientation}}}}};function aB(e,t,r,i,n,a,o){n[i]=!0;var s={i:null,gap:!0,s:0};if(s[o]=r,e.splice(t,0,s),t&&r===e[t-1][o]){var l=e[t-1];s.s=l.s,s.i=l.i,s.gap=l.gap}else a&&(s.s=Nht(e,t,r,o));t||(e[0].t=e[1].t,e[0].trace=e[1].trace,delete e[1].t,delete e[1].trace)}function Nht(e,t,r,i){var n=e[t-1],a=e[t+1];return a?n?n.s+(a.s-n.s)*(r-n[i])/(a[i]-n[i]):a.s:n.s}});var sB=ne((knr,Oce)=>{"use strict";var Uht=aa(),qce=$a(),MM=qce.BADNUM,zce=qce.LOG_CLIP,Dce=zce+.5,Ice=zce-.5,uL=Wt(),Vht=uL.segmentsIntersect,Fce=uL.constrain,oB=G0();Oce.exports=function(t,r){var i=r.trace||{},n=r.xaxis,a=r.yaxis,o=n.type==="log",s=a.type==="log",l=n._length,u=a._length,f=r.backoff,c=i.marker,h=r.connectGaps,v=r.baseTolerance,d=r.shape,_=d==="linear",T=i.fill&&i.fill!=="none",p=[],M=oB.minTolerance,b=t.length,w=new Array(b),k=0,x,E,S,g,C,A,P,D,z,O,V,B,F,N,Z,J;function re(Ot){var yt=t[Ot];if(!yt)return!1;var Et=r.linearized?n.l2p(yt.x):n.c2p(yt.x),Je=r.linearized?a.l2p(yt.y):a.c2p(yt.y);if(Et===MM){if(o&&(Et=n.c2p(yt.x,!0)),Et===MM)return!1;s&&Je===MM&&(Et*=Math.abs(n._m*u*(n._m>0?Dce:Ice)/(a._m*l*(a._m>0?Dce:Ice)))),Et*=1e3}if(Je===MM){if(s&&(Je=a.c2p(yt.y,!0)),Je===MM)return!1;Je*=1e3}return[Et,Je]}function ue(Ot,yt,Et,Je){var Ke=Et-Ot,At=Je-yt,Ee=.5-Ot,de=.5-yt,Te=Ke*Ke+At*At,nt=Ke*Ee+At*de;if(nt>0&&nt<Te){var Mt=Ee*At-de*Ke;if(Mt*Mt<Te)return!0}}var fe,K;function X(Ot,yt){var Et=Ot[0]/l,Je=Ot[1]/u,Ke=Math.max(0,-Et,Et-1,-Je,Je-1);return Ke&&fe!==void 0&&ue(Et,Je,fe,K)&&(Ke=0),Ke&&yt&&ue(Et,Je,yt[0]/l,yt[1]/u)&&(Ke=0),(1+oB.toleranceGrowth*Ke)*v}function ae(Ot,yt){var Et=Ot[0]-yt[0],Je=Ot[1]-yt[1];return Math.sqrt(Et*Et+Je*Je)}var oe=oB.maxScreensAway,me=-l*oe,xe=l*(1+oe),ce=-u*oe,ie=u*(1+oe),ge=[[me,ce,xe,ce],[xe,ce,xe,ie],[xe,ie,me,ie],[me,ie,me,ce]],le,we,Re,qe,et,Pe;function Ie(Ot,yt){for(var Et=[],Je=0,Ke=0;Ke<4;Ke++){var At=ge[Ke],Ee=Vht(Ot[0],Ot[1],yt[0],yt[1],At[0],At[1],At[2],At[3]);Ee&&(!Je||Math.abs(Ee.x-Et[0][0])>1||Math.abs(Ee.y-Et[0][1])>1)&&(Ee=[Ee.x,Ee.y],Je&&ae(Ee,Ot)<ae(Et[0],Ot)?Et.unshift(Ee):Et.push(Ee),Je++)}return Et}function ut(Ot){if(Ot[0]<me||Ot[0]>xe||Ot[1]<ce||Ot[1]>ie)return[Fce(Ot[0],me,xe),Fce(Ot[1],ce,ie)]}function ft(Ot,yt){if(Ot[0]===yt[0]&&(Ot[0]===me||Ot[0]===xe)||Ot[1]===yt[1]&&(Ot[1]===ce||Ot[1]===ie))return!0}function je(Ot,yt){var Et=[],Je=ut(Ot),Ke=ut(yt);return Je&&Ke&&ft(Je,Ke)||(Je&&Et.push(Je),Ke&&Et.push(Ke)),Et}function _t(Ot,yt,Et){return function(Je,Ke){var At=ut(Je),Ee=ut(Ke),de=[];if(At&&Ee&&ft(At,Ee))return de;At&&de.push(At),Ee&&de.push(Ee);var Te=2*uL.constrain((Je[Ot]+Ke[Ot])/2,yt,Et)-((At||Je)[Ot]+(Ee||Ke)[Ot]);if(Te){var nt;At&&Ee?nt=Te>0==At[Ot]>Ee[Ot]?At:Ee:nt=At||Ee,nt[Ot]+=Te}return de}}var Bt;d==="linear"||d==="spline"?Bt=Ie:d==="hv"||d==="vh"?Bt=je:d==="hvh"?Bt=_t(0,me,xe):d==="vhv"&&(Bt=_t(1,ce,ie));function Lt(Ot,yt){var Et=yt[0]-Ot[0],Je=(yt[1]-Ot[1])/Et,Ke=(Ot[1]*yt[0]-yt[1]*Ot[0])/Et;return Ke>0?[Je>0?me:xe,ie]:[Je>0?xe:me,ce]}function Me(Ot){var yt=Ot[0],Et=Ot[1],Je=yt===w[k-1][0],Ke=Et===w[k-1][1];if(!(Je&&Ke))if(k>1){var At=yt===w[k-2][0],Ee=Et===w[k-2][1];Je&&(yt===me||yt===xe)&&At?Ee?k--:w[k-1]=Ot:Ke&&(Et===ce||Et===ie)&&Ee?At?k--:w[k-1]=Ot:w[k++]=Ot}else w[k++]=Ot}function Ze(Ot){w[k-1][0]!==Ot[0]&&w[k-1][1]!==Ot[1]&&Me([Re,qe]),Me(Ot),et=null,Re=qe=0}var dt=uL.isArrayOrTypedArray(c);function it(Ot){if(Ot&&f&&(Ot.i=x,Ot.d=t,Ot.trace=i,Ot.marker=dt?c[Ot.i]:c,Ot.backoff=f),fe=Ot[0]/l,K=Ot[1]/u,le=Ot[0]<me?me:Ot[0]>xe?xe:0,we=Ot[1]<ce?ce:Ot[1]>ie?ie:0,le||we){if(!k)w[k++]=[le||Ot[0],we||Ot[1]];else if(et){var yt=Bt(et,Ot);yt.length>1&&(Ze(yt[0]),w[k++]=yt[1])}else Pe=Bt(w[k-1],Ot)[0],w[k++]=Pe;var Et=w[k-1];le&&we&&(Et[0]!==le||Et[1]!==we)?(et&&(Re!==le&&qe!==we?Me(Re&&qe?Lt(et,Ot):[Re||le,qe||we]):Re&&qe&&Me([Re,qe])),Me([le,we])):Re-le&&qe-we&&Me([le||Re,we||qe]),et=Ot,Re=le,qe=we}else et&&Ze(Bt(et,Ot)[0]),w[k++]=Ot}for(x=0;x<b;x++)if(E=re(x),!!E){for(k=0,et=null,it(E),x++;x<b;x++){if(g=re(x),!g){if(h)continue;break}if(!_||!r.simplify){it(g);continue}var vt=re(x+1);if(O=ae(g,E),!(!(T&&(k===0||k===b-1))&&O<X(g,vt)*M)){for(D=[(g[0]-E[0])/O,(g[1]-E[1])/O],C=E,V=O,B=N=Z=0,P=!1,S=g,x++;x<t.length;x++){if(A=vt,vt=re(x+1),!A){if(h)continue;break}if(z=[A[0]-E[0],A[1]-E[1]],J=z[0]*D[1]-z[1]*D[0],N=Math.min(N,J),Z=Math.max(Z,J),Z-N>X(A,vt))break;S=A,F=z[0]*D[0]+z[1]*D[1],F>V?(V=F,g=A,P=!1):F<B&&(B=F,C=A,P=!0)}if(P?(it(g),S!==C&&it(C)):(C!==E&&it(C),S!==g&&it(g)),it(S),x>=t.length||!A)break;it(A),E=A}}et&&Me([Re||et[0],qe||et[1]]),p.push(w.slice(0,k))}var rt=d.slice(d.length-1);if(f&&rt!=="h"&&rt!=="v"){for(var We=!1,ht=-1,mt=[],er=0;er<p.length;er++)for(var $t=0;$t<p[er].length-1;$t++){var cr=p[er][$t],or=p[er][$t+1],vr=Uht.applyBackoff(or,cr);(vr[0]!==or[0]||vr[1]!==or[1])&&(We=!0),mt[ht+1]||(ht++,mt[ht]=[cr,[vr[0],vr[1]]])}return We?mt:p}return p}});var lB=ne((Cnr,Nce)=>{"use strict";var Bce={tonextx:1,tonexty:1,tonext:1};Nce.exports=function(t,r,i){var n,a,o,s,l,u={},f=!1,c=-1,h=0,v=-1;for(a=0;a<i.length;a++)n=i[a][0].trace,o=n.stackgroup||"",o?o in u?l=u[o]:(l=u[o]=h,h++):n.fill in Bce&&v>=0?l=v:(l=v=h,h++),l<c&&(f=!0),n._groupIndex=c=l;var d=i.slice();f&&d.sort(function(T,p){var M=T[0].trace,b=p[0].trace;return M._groupIndex-b._groupIndex||M.index-b.index});var _={};for(a=0;a<d.length;a++)n=d[a][0].trace,o=n.stackgroup||"",n.visible===!0?(n._nexttrace=null,n.fill in Bce&&(s=_[o],n._prevtrace=s||null,s&&(s._nexttrace=n)),n._ownfill=n.fill&&(n.fill.substr(0,6)==="tozero"||n.fill==="toself"||n.fill.substr(0,2)==="to"&&!n._prevtrace),_[o]=n):n._prevtrace=n._nexttrace=n._ownfill=null;return d}});var Y2=ne((Lnr,Hce)=>{"use strict";var f0=Ai(),Hht=wi(),SM=Wt(),H2=SM.ensureSingle,Vce=SM.identity,hu=aa(),G2=js(),Ght=sB(),Yht=lB(),fL=$A().tester;Hce.exports=function(t,r,i,n,a,o){var s,l,u=!a,f=!!a&&a.duration>0,c=Yht(t,r,i);if(s=n.selectAll("g.trace").data(c,function(v){return v[0].trace.uid}),s.enter().append("g").attr("class",function(v){return"trace scatter trace"+v[0].trace.uid}).style("stroke-miterlimit",2),s.order(),Wht(t,s,r),f){o&&(l=o());var h=f0.transition().duration(a.duration).ease(a.easing).each("end",function(){l&&l()}).each("interrupt",function(){l&&l()});h.each(function(){n.selectAll("g.trace").each(function(v,d){Uce(t,d,r,v,c,this,a)})})}else s.each(function(v,d){Uce(t,d,r,v,c,this,a)});u&&s.exit().remove(),n.selectAll("path:not([d])").remove()};function Wht(e,t,r){t.each(function(i){var n=H2(f0.select(this),"g","fills");hu.setClipUrl(n,r.layerClipId,e);var a=i[0].trace,o=[];a._ownfill&&o.push("_ownFill"),a._nexttrace&&o.push("_nextFill");var s=n.selectAll("g").data(o,Vce);s.enter().append("g"),s.exit().each(function(l){a[l]=null}).remove(),s.order().each(function(l){a[l]=H2(f0.select(this),"path","js-fill")})})}function Uce(e,t,r,i,n,a,o){var s=e._context.staticPlot,l;Xht(e,t,r,i,n);var u=!!o&&o.duration>0;function f(_t){return u?_t.transition():_t}var c=r.xaxis,h=r.yaxis,v=i[0].trace,d=v.line,_=f0.select(a),T=H2(_,"g","errorbars"),p=H2(_,"g","lines"),M=H2(_,"g","points"),b=H2(_,"g","text");if(Hht.getComponentMethod("errorbars","plot")(e,T,r,o),v.visible!==!0)return;f(_).style("opacity",v.opacity);var w,k,x=v.fill.charAt(v.fill.length-1);x!=="x"&&x!=="y"&&(x="");var E,S;x==="y"?(E=1,S=h.c2p(0,!0)):x==="x"&&(E=0,S=c.c2p(0,!0)),i[0][r.isRangePlot?"nodeRangePlot3":"node3"]=_;var g="",C=[],A=v._prevtrace,P=null,D=null;A&&(g=A._prevRevpath||"",k=A._nextFill,C=A._ownPolygons,P=A._fillsegments,D=A._fillElement);var z,O,V="",B="",F,N,Z,J,re,ue,fe=[];v._polygons=[];var K=[],X=[],ae=SM.noop;if(w=v._ownFill,G2.hasLines(v)||v.fill!=="none"){k&&k.datum(i),["hv","vh","hvh","vhv"].indexOf(d.shape)!==-1?(F=hu.steps(d.shape),N=hu.steps(d.shape.split("").reverse().join(""))):d.shape==="spline"?F=N=function(_t){var Bt=_t[_t.length-1];return _t.length>1&&_t[0][0]===Bt[0]&&_t[0][1]===Bt[1]?hu.smoothclosed(_t.slice(1),d.smoothing):hu.smoothopen(_t,d.smoothing)}:F=N=function(_t){return"M"+_t.join("L")},Z=function(_t){return N(_t.reverse())},X=Ght(i,{xaxis:c,yaxis:h,trace:v,connectGaps:v.connectgaps,baseTolerance:Math.max(d.width||1,3)/4,shape:d.shape,backoff:d.backoff,simplify:d.simplify,fill:v.fill}),K=new Array(X.length);var oe=0;for(l=0;l<X.length;l++){var me,xe=X[l];!me||!x?(me=xe.slice(),K[oe]=me,oe++):me.push.apply(me,xe)}v._fillElement=null,v._fillExclusionElement=D,v._fillsegments=K.slice(0,oe),K=v._fillsegments,X.length&&(J=X[0][0].slice(),re=X[X.length-1],ue=re[re.length-1].slice()),ae=function(_t){return function(Bt){if(z=F(Bt),O=Z(Bt),V?x?(V+="L"+z.substr(1),B=O+("L"+B.substr(1))):(V+="Z"+z,B=O+"Z"+B):(V=z,B=O),G2.hasLines(v)){var Lt=f0.select(this);if(Lt.datum(i),_t)f(Lt.style("opacity",0).attr("d",z).call(hu.lineGroupStyle)).style("opacity",1);else{var Me=f(Lt);Me.attr("d",z),hu.singleLineStyle(i,Me)}}}}}var ce=p.selectAll(".js-line").data(X);f(ce.exit()).style("opacity",0).remove(),ce.each(ae(!1)),ce.enter().append("path").classed("js-line",!0).style("vector-effect",s?"none":"non-scaling-stroke").call(hu.lineGroupStyle).each(ae(!0)),hu.setClipUrl(ce,r.layerClipId,e);function ie(_t){f(_t).attr("d","M0,0Z")}var ge=function(){var _t=new Array(K.length);for(l=0;l<K.length;l++)_t[l]=fL(K[l]);return _t},le=function(_t){var Bt,Lt;if(!_t||_t.length===0)for(Bt=new Array(K.length),Lt=0;Lt<K.length;Lt++){var Me=K[Lt][0].slice(),Ze=K[Lt][K[Lt].length-1].slice();Me[E]=Ze[E]=S;var dt=[Ze,Me],it=dt.concat(K[Lt]);Bt[Lt]=fL(it)}else{for(Bt=new Array(_t.length-1+K.length),Lt=0;Lt<_t.length-1;Lt++)Bt[Lt]=fL(_t[Lt]);var vt=_t[_t.length-1].slice();for(vt.reverse(),Lt=0;Lt<K.length;Lt++)Bt[_t.length-1+Lt]=fL(K[Lt].concat(vt))}return Bt};X.length?(w?(w.datum(i),J&&ue&&(x?(J[E]=ue[E]=S,f(w).attr("d","M"+ue+"L"+J+"L"+V.substr(1)).call(hu.singleFillStyle,e),fe=le(null)):(f(w).attr("d",V+"Z").call(hu.singleFillStyle,e),fe=ge())),v._polygons=fe,v._fillElement=w):k&&(v.fill.substr(0,6)==="tonext"&&V&&g?(v.fill==="tonext"?(f(k).attr("d",V+"Z"+g+"Z").call(hu.singleFillStyle,e),fe=ge(),v._polygons=fe.concat(C)):(f(k).attr("d",V+"L"+g.substr(1)+"Z").call(hu.singleFillStyle,e),fe=le(P),v._polygons=fe),v._fillElement=k):ie(k)),v._prevRevpath=B):(w?ie(w):k&&ie(k),v._prevRevpath=null),v._ownPolygons=fe;function we(_t){return _t.filter(function(Bt){return!Bt.gap&&Bt.vis})}function Re(_t){return _t.filter(function(Bt){return Bt.vis})}function qe(_t){return _t.filter(function(Bt){return!Bt.gap})}function et(_t){return _t.id}function Pe(_t){if(_t.ids)return et}function Ie(){return!1}function ut(_t,Bt,Lt){var Me,Ze,dt,it=Lt[0].trace,vt=G2.hasMarkers(it),rt=G2.hasText(it),We=Pe(it),ht=Ie,mt=Ie;if(vt||rt){var er=Vce,$t=it.stackgroup,cr=$t&&e._fullLayout._scatterStackOpts[c._id+h._id][$t].stackgaps==="infer zero";it.marker.maxdisplayed||it._needsCull?er=cr?Re:we:$t&&!cr&&(er=qe),vt&&(ht=er),rt&&(mt=er)}Ze=_t.selectAll("path.point"),Me=Ze.data(ht,We);var or=Me.enter().append("path").classed("point",!0);u&&or.call(hu.pointStyle,it,e).call(hu.translatePoints,c,h).style("opacity",0).transition().style("opacity",1),Me.order();var vr;vt&&(vr=hu.makePointStyleFns(it)),Me.each(function(Ot){var yt=f0.select(this),Et=f(yt);dt=hu.translatePoint(Ot,Et,c,h),dt?(hu.singlePointStyle(Ot,Et,it,vr,e),r.layerClipId&&hu.hideOutsideRangePoint(Ot,Et,c,h,it.xcalendar,it.ycalendar),it.customdata&&yt.classed("plotly-customdata",Ot.data!==null&&Ot.data!==void 0)):Et.remove()}),u?Me.exit().transition().style("opacity",0).remove():Me.exit().remove(),Ze=Bt.selectAll("g"),Me=Ze.data(mt,We),Me.enter().append("g").classed("textpoint",!0).append("text"),Me.order(),Me.each(function(Ot){var yt=f0.select(this),Et=f(yt.select("text"));dt=hu.translatePoint(Ot,Et,c,h),dt?r.layerClipId&&hu.hideOutsideRangePoint(Ot,yt,c,h,it.xcalendar,it.ycalendar):yt.remove()}),Me.selectAll("text").call(hu.textPointStyle,it,e).each(function(Ot){var yt=c.c2p(Ot.x),Et=h.c2p(Ot.y);f0.select(this).selectAll("tspan.line").each(function(){f(f0.select(this)).attr({x:yt,y:Et})})}),Me.exit().remove()}M.datum(i),b.datum(i),ut(M,b,i);var ft=v.cliponaxis===!1,je=ft?null:r.layerClipId;hu.setClipUrl(M,je,e),hu.setClipUrl(b,je,e)}function Xht(e,t,r,i,n){var a=r.xaxis,o=r.yaxis,s=f0.extent(SM.simpleMap(a.range,a.r2c)),l=f0.extent(SM.simpleMap(o.range,o.r2c)),u=i[0].trace;if(G2.hasMarkers(u)){var f=u.marker.maxdisplayed;if(f!==0){var c=i.filter(function(_){return _.x>=s[0]&&_.x<=s[1]&&_.y>=l[0]&&_.y<=l[1]}),h=Math.ceil(c.length/f),v=0;n.forEach(function(_,T){var p=_[0].trace;G2.hasMarkers(p)&&p.marker.maxdisplayed>0&&T<t&&v++});var d=Math.round(v*h/3+Math.floor(v/3)*h/7.1);i.forEach(function(_){delete _.vis}),c.forEach(function(_,T){Math.round((T+d)%h)===0&&(_.vis=!0)})}}}});var ph=ne((Pnr,Gce)=>{"use strict";Gce.exports={container:"marker",min:"cmin",max:"cmax"}});var hL=ne((Rnr,Yce)=>{"use strict";var cL=Xi();Yce.exports=function(t,r,i){var n={},a={_fullLayout:i},o=cL.getFromTrace(a,r,"x"),s=cL.getFromTrace(a,r,"y"),l=t.orig_x;l===void 0&&(l=t.x);var u=t.orig_y;return u===void 0&&(u=t.y),n.xLabel=cL.tickText(o,o.c2l(l),!0).text,n.yLabel=cL.tickText(s,s.c2l(u),!0).text,n}});var Tv=ne((Dnr,Wce)=>{"use strict";var uB=Ai(),W2=aa(),Zht=wi();function jht(e){var t=uB.select(e).selectAll("g.trace.scatter");t.style("opacity",function(r){return r[0].trace.opacity}),t.selectAll("g.points").each(function(r){var i=uB.select(this),n=r.trace||r[0].trace;fB(i,n,e)}),t.selectAll("g.text").each(function(r){var i=uB.select(this),n=r.trace||r[0].trace;cB(i,n,e)}),t.selectAll("g.trace path.js-line").call(W2.lineGroupStyle),t.selectAll("g.trace path.js-fill").call(W2.fillGroupStyle,e,!1),Zht.getComponentMethod("errorbars","style")(t)}function fB(e,t,r){W2.pointStyle(e.selectAll("path.point"),t,r)}function cB(e,t,r){W2.textPointStyle(e.selectAll("text"),t,r)}function Kht(e,t,r){var i=t[0].trace;i.selectedpoints?(W2.selectedPointStyle(r.selectAll("path.point"),i),W2.selectedTextStyle(r.selectAll("text"),i)):(fB(r,i,e),cB(r,i,e))}Wce.exports={style:jht,stylePoints:fB,styleText:cB,styleOnSelect:Kht}});var Z2=ne((Inr,Xce)=>{"use strict";var X2=_i(),Jht=js();Xce.exports=function(t,r){var i,n;if(t.mode==="lines")return i=t.line.color,i&&X2.opacity(i)?i:t.fillcolor;if(t.mode==="none")return t.fill?t.fillcolor:"";var a=r.mcc||(t.marker||{}).color,o=r.mlcc||((t.marker||{}).line||{}).color;return n=a&&X2.opacity(a)?a:o&&X2.opacity(o)&&(r.mlw||((t.marker||{}).line||{}).width)?o:"",n?X2.opacity(n)<.3?X2.addOpacity(n,.3):n:(i=(t.line||{}).color,i&&X2.opacity(i)&&Jht.hasLines(t)&&t.line.width?i:t.fillcolor)}});var j2=ne((Fnr,jce)=>{"use strict";var vL=Wt(),Zce=Ol(),Qht=wi(),$ht=Z2(),hB=_i(),evt=vL.fillText;jce.exports=function(t,r,i,n){var a=t.cd,o=a[0].trace,s=t.xa,l=t.ya,u=s.c2p(r),f=l.c2p(i),c=[u,f],h=o.hoveron||"",v=o.mode.indexOf("markers")!==-1?3:.5,d=!!o.xperiodalignment,_=!!o.yperiodalignment;if(h.indexOf("points")!==-1){var T=function(B){if(d){var F=s.c2p(B.xStart),N=s.c2p(B.xEnd);return u>=Math.min(F,N)&&u<=Math.max(F,N)?0:1/0}var Z=Math.max(3,B.mrc||0),J=1-1/Z,re=Math.abs(s.c2p(B.x)-u);return re<Z?J*re/Z:re-Z+J},p=function(B){if(_){var F=l.c2p(B.yStart),N=l.c2p(B.yEnd);return f>=Math.min(F,N)&&f<=Math.max(F,N)?0:1/0}var Z=Math.max(3,B.mrc||0),J=1-1/Z,re=Math.abs(l.c2p(B.y)-f);return re<Z?J*re/Z:re-Z+J},M=function(B){var F=Math.max(v,B.mrc||0),N=s.c2p(B.x)-u,Z=l.c2p(B.y)-f;return Math.max(Math.sqrt(N*N+Z*Z)-F,1-v/F)},b=Zce.getDistanceFunction(n,T,p,M);if(Zce.getClosest(a,b,t),t.index!==!1){var w=a[t.index],k=s.c2p(w.x,!0),x=l.c2p(w.y,!0),E=w.mrc||1;t.index=w.i;var S=a[0].t.orientation,g=S&&(w.sNorm||w.s),C=S==="h"?g:w.orig_x!==void 0?w.orig_x:w.x,A=S==="v"?g:w.orig_y!==void 0?w.orig_y:w.y;return vL.extendFlat(t,{color:$ht(o,w),x0:k-E,x1:k+E,xLabelVal:C,y0:x-E,y1:x+E,yLabelVal:A,spikeDistance:M(w),hovertemplate:o.hovertemplate}),evt(w,o,t),Qht.getComponentMethod("errorbars","hoverInfo")(w,o,t),[t]}}function P(B){if(!B)return!1;var F=B.node();try{var N=new DOMPoint(c[0],c[1]);return F.isPointInFill(N)}catch(J){var Z=F.ownerSVGElement.createSVGPoint();return Z.x=c[0],Z.y=c[1],F.isPointInFill(Z)}}function D(B){var F,N=[],Z=1/0,J=-1/0,re=1/0,ue=-1/0,fe;for(F=0;F<B.length;F++){var K=B[F];K.contains(c)&&(N.push(K),re=Math.min(re,K.ymin),ue=Math.max(ue,K.ymax))}if(N.length===0)return null;re=Math.max(re,0),ue=Math.min(ue,l._length),fe=(re+ue)/2;var X,ae,oe,me,xe,ce,ie;for(F=0;F<N.length;F++)for(ae=N[F].pts,X=1;X<ae.length;X++)ce=ae[X-1][1],ie=ae[X][1],ce>fe!=ie>=fe&&(me=ae[X-1][0],xe=ae[X][0],ie-ce&&(oe=me+(xe-me)*(fe-ce)/(ie-ce),Z=Math.min(Z,oe),J=Math.max(J,oe)));return Z=Math.max(Z,0),J=Math.min(J,s._length),{x0:Z,x1:J,y0:fe,y1:fe}}if(h.indexOf("fills")!==-1&&o._fillElement){var z=P(o._fillElement)&&!P(o._fillExclusionElement);if(z){var O=D(o._polygons);O===null&&(O={x0:c[0],x1:c[0],y0:c[1],y1:c[1]});var V=hB.defaultLine;return hB.opacity(o.fillcolor)?V=o.fillcolor:hB.opacity((o.line||{}).color)&&(V=o.line.color),vL.extendFlat(t,{distance:t.maxHoverDistance,x0:O.x0,x1:O.x1,y0:O.y0,y1:O.y1,color:V,hovertemplate:!1}),delete t.index,o.text&&!vL.isArrayOrTypedArray(o.text)?t.text=String(o.text):t.text=o.name,[t]}}}});var K2=ne((qnr,Jce)=>{"use strict";var Kce=js();Jce.exports=function(t,r){var i=t.cd,n=t.xaxis,a=t.yaxis,o=[],s=i[0].trace,l,u,f,c,h=!Kce.hasMarkers(s)&&!Kce.hasText(s);if(h)return[];if(r===!1)for(l=0;l<i.length;l++)i[l].selected=0;else for(l=0;l<i.length;l++)u=i[l],f=n.c2p(u.x),c=a.c2p(u.y),u.i!==null&&r.contains([f,c],!1,l,t)?(o.push({pointNumber:u.i,x:n.c2d(u.x),y:a.c2d(u.y)}),u.selected=1):u.selected=0;return o}});var vB=ne((znr,Qce)=>{"use strict";Qce.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}});var pB=ne((Onr,the)=>{"use strict";var EM=wi().traceIs,dB=m2();the.exports=function(t,r,i,n){i("autotypenumbers",n.autotypenumbersDflt);var a=i("type",(n.splomStash||{}).type);a==="-"&&(tvt(r,n.data),r.type==="-"?r.type="linear":t.type=r.type)};function tvt(e,t){if(e.type==="-"){var r=e._id,i=r.charAt(0),n;r.indexOf("scene")!==-1&&(r=i);var a=rvt(t,r,i);if(a){if(a.type==="histogram"&&i==={v:"y",h:"x"}[a.orientation||"v"]){e.type="linear";return}var o=i+"calendar",s=a[o],l={noMultiCategory:!EM(a,"cartesian")||EM(a,"noMultiCategory")};if(a.type==="box"&&a._hasPreCompStats&&i==={h:"x",v:"y"}[a.orientation||"v"]&&(l.noMultiCategory=!0),l.autotypenumbers=e.autotypenumbers,ehe(a,i)){var u=$ce(a),f=[];for(n=0;n<t.length;n++){var c=t[n];!EM(c,"box-violin")||(c[i+"axis"]||i)!==r||(c[u]!==void 0?f.push(c[u][0]):c.name!==void 0?f.push(c.name):f.push("text"),c[o]!==s&&(s=void 0))}e.type=dB(f,s,l)}else if(a.type==="splom"){var h=a.dimensions,v=h[a._axesDim[r]];v.visible&&(e.type=dB(v.values,s,l))}else e.type=dB(a[i]||[a[i+"0"]],s,l)}}}function rvt(e,t,r){for(var i=0;i<e.length;i++){var n=e[i];if(n.type==="splom"&&n._length>0&&(n["_"+r+"axes"]||{})[t])return n;if((n[r+"axis"]||r)===t){if(ehe(n,r))return n;if((n[r]||[]).length||n[r+"0"])return n}}}function $ce(e){return{v:"x",h:"y"}[e.orientation||"v"]}function ehe(e,t){var r=$ce(e),i=EM(e,"box-violin"),n=EM(e._fullInput||{},"candlestick");return i&&!n&&t===r&&e[r]===void 0&&e[r+"0"]===void 0}});var dL=ne((Bnr,rhe)=>{"use strict";var nvt=uh().isTypedArraySpec;function ivt(e,t){var r=t.dataAttr||e._id.charAt(0),i={},n,a,o;if(t.axData)n=t.axData;else for(n=[],a=0;a<t.data.length;a++){var s=t.data[a];s[r+"axis"]===e._id&&n.push(s)}for(a=0;a<n.length;a++){var l=n[a][r];for(o=0;o<l.length;o++){var u=l[o];u!=null&&(i[u]=1)}}return Object.keys(i)}rhe.exports=function(t,r,i,n){if(r.type==="category"){var a=t.categoryarray,o=Array.isArray(a)&&a.length>0||nvt(a),s;o&&(s="array");var l=i("categoryorder",s),u;l==="array"&&(u=i("categoryarray")),!o&&l==="array"&&(l=r.categoryorder="trace"),l==="trace"?r._initialCategories=[]:l==="array"?r._initialCategories=u.slice():(u=ivt(r,n).sort(),l==="category ascending"?r._initialCategories=u:l==="category descending"&&(r._initialCategories=u.reverse()))}}});var kM=ne((Nnr,ihe)=>{"use strict";var nhe=Xf().mix,avt=Ku(),ovt=Wt();ihe.exports=function(t,r,i,n){n=n||{};var a=n.dfltColor;function o(E,S){return ovt.coerce2(t,r,n.attributes,E,S)}var s=o("linecolor",a),l=o("linewidth"),u=i("showline",n.showLine||!!s||!!l);u||(delete r.linecolor,delete r.linewidth);var f=nhe(a,n.bgColor,n.blend||avt.lightFraction).toRgbString(),c=o("gridcolor",f),h=o("gridwidth"),v=o("griddash"),d=i("showgrid",n.showGrid||!!c||!!h||!!v);if(d||(delete r.gridcolor,delete r.gridwidth,delete r.griddash),n.hasMinor){var _=nhe(r.gridcolor,n.bgColor,67).toRgbString(),T=o("minor.gridcolor",_),p=o("minor.gridwidth",r.gridwidth||1),M=o("minor.griddash",r.griddash||"solid"),b=i("minor.showgrid",!!T||!!p||!!M);b||(delete r.minor.gridcolor,delete r.minor.gridwidth,delete r.minor.griddash)}if(!n.noZeroLine){var w=o("zerolinecolor",a),k=o("zerolinewidth"),x=i("zeroline",n.showGrid||!!w||!!k);x||(delete r.zerolinecolor,delete r.zerolinewidth)}}});var LM=ne((Unr,fhe)=>{"use strict";var ahe=la(),svt=wi(),CM=Wt(),lvt=So(),uvt=ch(),gB=dc(),ohe=hx(),she=v2(),fvt=im(),cvt=am(),hvt=dL(),vvt=kM(),dvt=uO(),lhe=B0(),pL=wf().WEEKDAY_PATTERN,pvt=wf().HOUR_PATTERN;fhe.exports=function(t,r,i,n,a){var o=n.letter,s=n.font||{},l=n.splomStash||{},u=i("visible",!n.visibleDflt),f=r._template||{},c=r.type||f.type||"-",h;if(c==="date"){var v=svt.getComponentMethod("calendars","handleDefaults");v(t,r,"calendar",n.calendar),n.noTicklabelmode||(h=i("ticklabelmode"))}var d="";(!n.noTicklabelposition||c==="multicategory")&&(d=CM.coerce(t,r,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:h==="period"?["outside","inside"]:o==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),n.noTicklabeloverflow||i("ticklabeloverflow",d.indexOf("inside")!==-1?"hide past domain":c==="category"||c==="multicategory"?"allow":"hide past div"),lhe(r,a),dvt(t,r,i,n),hvt(t,r,i,n),c!=="category"&&!n.noHover&&i("hoverformat");var _=i("color"),T=_!==gB.color.dflt?_:s.color,p=l.label||a._dfltTitle[o];if(cvt(t,r,i,c,n),!u)return r;i("title.text",p),CM.coerceFont(i,"title.font",{family:s.family,size:CM.bigFont(s.size),color:T}),ohe(t,r,i,c);var M=n.hasMinor;if(M&&(lvt.newContainer(r,"minor"),ohe(t,r,i,c,{isMinor:!0})),fvt(t,r,i,c,n),she(t,r,i,n),M){var b=n.isMinor;n.isMinor=!0,she(t,r,i,n),n.isMinor=b}vvt(t,r,i,{dfltColor:_,bgColor:n.bgColor,showGrid:n.showGrid,hasMinor:M,attributes:gB}),M&&!r.minor.ticks&&!r.minor.showgrid&&delete r.minor,(r.showline||r.ticks)&&i("mirror");var w=c==="multicategory";if(!n.noTickson&&(c==="category"||w)&&(r.ticks||r.showgrid)){var k;w&&(k="boundaries");var x=i("tickson",k);x==="boundaries"&&delete r.ticklabelposition}if(w){var E=i("showdividers");E&&(i("dividercolor"),i("dividerwidth"))}if(c==="date")if(uvt(t,r,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:gvt}),!r.rangebreaks.length)delete r.rangebreaks;else{for(var S=0;S<r.rangebreaks.length;S++)if(r.rangebreaks[S].pattern===pL){r._hasDayOfWeekBreaks=!0;break}if(lhe(r,a),a._has("scattergl")||a._has("splom"))for(var g=0;g<n.data.length;g++){var C=n.data[g];(C.type==="scattergl"||C.type==="splom")&&(C.visible=!1,CM.warn(C.type+" traces do not work on axes with rangebreaks. Setting trace "+C.index+" to `visible: false`."))}}return r};function gvt(e,t,r){function i(h,v){return CM.coerce(e,t,gB.rangebreaks,h,v)}var n=i("enabled");if(n){var a=i("bounds");if(a&&a.length>=2){var o="",s,l;if(a.length===2){for(s=0;s<2;s++)if(l=uhe(a[s]),l){o=pL;break}}var u=i("pattern",o);if(u===pL)for(s=0;s<2;s++)l=uhe(a[s]),l&&(t.bounds[s]=a[s]=l-1);if(u)for(s=0;s<2;s++)switch(l=a[s],u){case pL:if(!ahe(l)){t.enabled=!1;return}if(l=+l,l!==Math.floor(l)||l<0||l>=7){t.enabled=!1;return}t.bounds[s]=a[s]=l;break;case pvt:if(!ahe(l)){t.enabled=!1;return}if(l=+l,l<0||l>24){t.enabled=!1;return}t.bounds[s]=a[s]=l;break}if(r.autorange===!1){var f=r.range;if(f[0]<f[1]){if(a[0]<f[0]&&a[1]>f[1]){t.enabled=!1;return}}else if(a[0]>f[0]&&a[1]<f[1]){t.enabled=!1;return}}}else{var c=i("values");if(c&&c.length)i("dvalue");else{t.enabled=!1;return}}}}var yvt={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function uhe(e){if(typeof e=="string")return yvt[e.substr(0,3).toLowerCase()]}});var yL=ne((Vnr,che)=>{"use strict";var mvt=la(),gL=Wt();che.exports=function(t,r,i,n){var a=n.counterAxes||[],o=n.overlayableAxes||[],s=n.letter,l=n.grid,u=n.overlayingDomain,f,c,h,v,d,_;l&&(c=l._domains[s][l._axisMap[r._id]],f=l._anchors[r._id],c&&(h=l[s+"side"].split(" ")[0],v=l.domain[s][h==="right"||h==="top"?1:0])),c=c||[0,1],f=f||(mvt(t.position)?"free":a[0]||"free"),h=h||(s==="x"?"bottom":"left"),v=v||0,d=0,_=!1;var T=gL.coerce(t,r,{anchor:{valType:"enumerated",values:["free"].concat(a),dflt:f}},"anchor"),p=gL.coerce(t,r,{side:{valType:"enumerated",values:s==="x"?["bottom","top"]:["left","right"],dflt:h}},"side");if(T==="free"){if(s==="y"){var M=i("autoshift");M&&(v=p==="left"?u[0]:u[1],_=r.automargin?r.automargin:!0,d=p==="left"?-3:3),i("shift",d)}i("position",v)}i("automargin",_);var b=!1;if(o.length&&(b=gL.coerce(t,r,{overlaying:{valType:"enumerated",values:[!1].concat(o),dflt:!1}},"overlaying")),!b){var w=i("domain",c);w[0]>w[1]-1/4096&&(r.domain=c),gL.noneOrAll(t.domain,r.domain,c),r.tickmode==="sync"&&(r.tickmode="auto")}return i("layer"),r}});var _he=ne((Hnr,xhe)=>{"use strict";var Fx=Wt(),hhe=_i(),xvt=td().isUnifiedHover,_vt=FO(),vhe=So(),bvt=tx(),dhe=dc(),wvt=pB(),phe=LM(),Tvt=mm(),ghe=yL(),mB=zl(),j0=mB.id2name,yhe=mB.name2id,Avt=wf().AX_ID_PATTERN,mhe=wi(),PM=mhe.traceIs,yB=mhe.getComponentMethod;function mL(e,t,r){Array.isArray(e[t])?e[t].push(r):e[t]=[r]}xhe.exports=function(t,r,i){var n=r.autotypenumbers,a={},o={},s={},l={},u={},f={},c={},h={},v={},d={},_,T;for(_=0;_<i.length;_++){var p=i[_];if(!(!PM(p,"cartesian")&&!PM(p,"gl2d"))){var M;if(p.xaxis)M=j0(p.xaxis),mL(a,M,p);else if(p.xaxes)for(T=0;T<p.xaxes.length;T++)mL(a,j0(p.xaxes[T]),p);var b;if(p.yaxis)b=j0(p.yaxis),mL(a,b,p);else if(p.yaxes)for(T=0;T<p.yaxes.length;T++)mL(a,j0(p.yaxes[T]),p);if(p.type==="funnel"?p.orientation==="h"?(M&&(o[M]=!0),b&&(c[b]=!0)):b&&(s[b]=!0):p.type==="image"?(b&&(h[b]=!0),M&&(h[M]=!0)):(b&&(u[b]=!0,f[b]=!0),(!PM(p,"carpet")||p.type==="carpet"&&!p._cheater)&&M&&(l[M]=!0)),p.type==="carpet"&&p._cheater&&M&&(o[M]=!0),PM(p,"2dMap")&&(v[M]=!0,v[b]=!0),PM(p,"oriented")){var w=p.orientation==="h"?b:M;d[w]=!0}}}var k=r._subplots,x=k.xaxis,E=k.yaxis,S=Fx.simpleMap(x,j0),g=Fx.simpleMap(E,j0),C=S.concat(g),A=hhe.background;x.length&&E.length&&(A=Fx.coerce(t,r,bvt,"plot_bgcolor"));var P=hhe.combine(A,r.paper_bgcolor),D,z,O,V,B;function F(){var Ze=a[D]||[];B._traceIndices=Ze.map(function(dt){return dt._expandedIndex}),B._annIndices=[],B._shapeIndices=[],B._selectionIndices=[],B._imgIndices=[],B._subplotsWith=[],B._counterAxes=[],B._name=B._attr=D,B._id=z}function N(Ze,dt){return Fx.coerce(V,B,dhe,Ze,dt)}function Z(Ze,dt){return Fx.coerce2(V,B,dhe,Ze,dt)}function J(Ze){return Ze==="x"?E:x}function re(Ze,dt){for(var it=Ze==="x"?S:g,vt=[],rt=0;rt<it.length;rt++){var We=it[rt];We!==dt&&!(t[We]||{}).overlaying&&vt.push(yhe(We))}return vt}var ue={x:J("x"),y:J("y")},fe=ue.x.concat(ue.y),K={},X=[];function ae(){var Ze=V.matches;Avt.test(Ze)&&fe.indexOf(Ze)===-1&&(K[Ze]=V.type,X=Object.keys(K))}var oe=_vt(t,r),me=xvt(oe);for(_=0;_<C.length;_++){D=C[_],z=yhe(D),O=D.charAt(0),Fx.isPlainObject(t[D])||(t[D]={}),V=t[D],B=vhe.newContainer(r,D,O+"axis"),F();var xe=O==="x"&&!l[D]&&o[D]||O==="y"&&!u[D]&&s[D],ce=O==="y"&&(!f[D]&&c[D]||h[D]),ie={hasMinor:!0,letter:O,font:r.font,outerTicks:v[D],showGrid:!d[D],data:a[D]||[],bgColor:P,calendar:r.calendar,automargin:!0,visibleDflt:xe,reverseDflt:ce,autotypenumbersDflt:n,splomStash:((r._splomAxes||{})[O]||{})[z],noAutotickangles:O==="y"};N("uirevision",r.uirevision),wvt(V,B,N,ie),phe(V,B,N,ie,r);var ge=me&&O===oe.charAt(0),le=Z("spikecolor",me?B.color:void 0),we=Z("spikethickness",me?1.5:void 0),Re=Z("spikedash",me?"dot":void 0),qe=Z("spikemode",me?"across":void 0),et=Z("spikesnap"),Pe=N("showspikes",!!ge||!!le||!!we||!!Re||!!qe||!!et);Pe||(delete B.spikecolor,delete B.spikethickness,delete B.spikedash,delete B.spikemode,delete B.spikesnap);var Ie=j0(V.overlaying),ut=[0,1];if(r[Ie]!==void 0){var ft=j0(r[Ie].anchor);r[ft]!==void 0&&(ut=r[ft].domain)}ghe(V,B,N,{letter:O,counterAxes:ue[O],overlayableAxes:re(O,D),grid:r.grid,overlayingDomain:ut}),N("title.standoff"),ae(),B._input=V}for(_=0;_<X.length;){z=X[_++],D=j0(z),O=D.charAt(0),Fx.isPlainObject(t[D])||(t[D]={}),V=t[D],B=vhe.newContainer(r,D,O+"axis"),F();var je={letter:O,font:r.font,outerTicks:v[D],showGrid:!d[D],data:[],bgColor:P,calendar:r.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:n,splomStash:((r._splomAxes||{})[O]||{})[z]};N("uirevision",r.uirevision),B.type=K[z]||"linear",phe(V,B,N,je,r),ghe(V,B,N,{letter:O,counterAxes:ue[O],overlayableAxes:re(O,D),grid:r.grid}),N("fixedrange"),ae(),B._input=V}var _t=yB("rangeslider","handleDefaults"),Bt=yB("rangeselector","handleDefaults");for(_=0;_<S.length;_++)D=S[_],V=t[D],B=r[D],_t(t,r,D),B.type==="date"&&Bt(V,B,r,g,B.calendar),N("fixedrange");for(_=0;_<g.length;_++){D=g[_],V=t[D],B=r[D];var Lt=r[j0(B.anchor)],Me=yB("rangeslider","isVisible")(Lt);N("fixedrange",Me)}Tvt.handleDefaults(t,r,{axIds:fe.concat(X).sort(mB.idSort),axHasImage:h})}});var The=ne((Gnr,whe)=>{"use strict";var Mvt=Ai(),bhe=wi(),xL=Wt(),Rd=aa(),_L=Xi();whe.exports=function(t,r,i,n){var a=t._fullLayout;if(r.length===0){_L.redrawComponents(t);return}function o(T){var p=T.xaxis,M=T.yaxis;a._defs.select("#"+T.clipId+"> rect").call(Rd.setTranslate,0,0).call(Rd.setScale,1,1),T.plot.call(Rd.setTranslate,p._offset,M._offset).call(Rd.setScale,1,1);var b=T.plot.selectAll(".scatterlayer .trace");b.selectAll(".point").call(Rd.setPointGroupScale,1,1),b.selectAll(".textpoint").call(Rd.setTextPointsScale,1,1),b.call(Rd.hideOutsideRangePoints,T)}function s(T,p){var M=T.plotinfo,b=M.xaxis,w=M.yaxis,k=b._length,x=w._length,E=!!T.xr1,S=!!T.yr1,g=[];if(E){var C=xL.simpleMap(T.xr0,b.r2l),A=xL.simpleMap(T.xr1,b.r2l),P=C[1]-C[0],D=A[1]-A[0];g[0]=(C[0]*(1-p)+p*A[0]-C[0])/(C[1]-C[0])*k,g[2]=k*(1-p+p*D/P),b.range[0]=b.l2r(C[0]*(1-p)+p*A[0]),b.range[1]=b.l2r(C[1]*(1-p)+p*A[1])}else g[0]=0,g[2]=k;if(S){var z=xL.simpleMap(T.yr0,w.r2l),O=xL.simpleMap(T.yr1,w.r2l),V=z[1]-z[0],B=O[1]-O[0];g[1]=(z[1]*(1-p)+p*O[1]-z[1])/(z[0]-z[1])*x,g[3]=x*(1-p+p*B/V),w.range[0]=b.l2r(z[0]*(1-p)+p*O[0]),w.range[1]=w.l2r(z[1]*(1-p)+p*O[1])}else g[1]=0,g[3]=x;_L.drawOne(t,b,{skipTitle:!0}),_L.drawOne(t,w,{skipTitle:!0}),_L.redrawComponents(t,[b._id,w._id]);var F=E?k/g[2]:1,N=S?x/g[3]:1,Z=E?g[0]:0,J=S?g[1]:0,re=E?g[0]/g[2]*k:0,ue=S?g[1]/g[3]*x:0,fe=b._offset-re,K=w._offset-ue;M.clipRect.call(Rd.setTranslate,Z,J).call(Rd.setScale,1/F,1/N),M.plot.call(Rd.setTranslate,fe,K).call(Rd.setScale,F,N),Rd.setPointGroupScale(M.zoomScalePts,1/F,1/N),Rd.setTextPointsScale(M.zoomScaleTxt,1/F,1/N)}var l;n&&(l=n());function u(){for(var T={},p=0;p<r.length;p++){var M=r[p],b=M.plotinfo.xaxis,w=M.plotinfo.yaxis;M.xr1&&(T[b._name+".range"]=M.xr1.slice()),M.yr1&&(T[w._name+".range"]=M.yr1.slice())}return l&&l(),bhe.call("relayout",t,T).then(function(){for(var k=0;k<r.length;k++)o(r[k].plotinfo)})}function f(){for(var T={},p=0;p<r.length;p++){var M=r[p],b=M.plotinfo.xaxis,w=M.plotinfo.yaxis;M.xr0&&(T[b._name+".range"]=M.xr0.slice()),M.yr0&&(T[w._name+".range"]=M.yr0.slice())}return bhe.call("relayout",t,T).then(function(){for(var k=0;k<r.length;k++)o(r[k].plotinfo)})}var c,h,v,d=Mvt.ease(i.easing);t._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(v),v=null,f()});function _(){h=Date.now();for(var T=Math.min(1,(h-c)/i.duration),p=d(T),M=0;M<r.length;M++)s(r[M],p);h-c>i.duration?(u(),v=window.cancelAnimationFrame(_)):v=window.requestAnimationFrame(_)}return c=Date.now(),v=window.requestAnimationFrame(_),Promise.resolve()}});var vu=ne(gh=>{"use strict";var TL=Ai(),Ahe=wi(),wL=Wt(),Svt=Zs(),Evt=aa(),Mhe=vc().getModuleCalcData,Am=zl(),K0=wf(),kvt=kd(),Cs=wL.ensureSingle;function bL(e,t,r){return wL.ensureSingle(e,t,r,function(i){i.datum(r)})}gh.name="cartesian";gh.attr=["xaxis","yaxis"];gh.idRoot=["x","y"];gh.idRegex=K0.idRegex;gh.attrRegex=K0.attrRegex;gh.attributes=vB();gh.layoutAttributes=dc();gh.supplyLayoutDefaults=_he();gh.transitionAxes=The();gh.finalizeSubplots=function(e,t){var r=t._subplots,i=r.xaxis,n=r.yaxis,a=r.cartesian,o=a.concat(r.gl2d||[]),s={},l={},u,f,c;for(u=0;u<o.length;u++){var h=o[u].split("y");s[h[0]]=1,l["y"+h[1]]=1}for(u=0;u<i.length;u++)f=i[u],s[f]||(c=(e[Am.id2name(f)]||{}).anchor,K0.idRegex.y.test(c)||(c="y"),a.push(f+c),o.push(f+c),l[c]||(l[c]=1,wL.pushUnique(n,c)));for(u=0;u<n.length;u++)c=n[u],l[c]||(f=(e[Am.id2name(c)]||{}).anchor,K0.idRegex.x.test(f)||(f="x"),a.push(f+c),o.push(f+c),s[f]||(s[f]=1,wL.pushUnique(i,f)));if(!o.length){f="",c="";for(var v in e)if(K0.attrRegex.test(v)){var d=v.charAt(0);d==="x"?(!f||+v.substr(5)<+f.substr(5))&&(f=v):(!c||+v.substr(5)<+c.substr(5))&&(c=v)}f=f?Am.name2id(f):"x",c=c?Am.name2id(c):"y",i.push(f),n.push(c),a.push(f+c)}};gh.plot=function(e,t,r,i){var n=e._fullLayout,a=n._subplots.cartesian,o=e.calcdata,s;if(!Array.isArray(t))for(t=[],s=0;s<o.length;s++)t.push(s);for(s=0;s<a.length;s++){for(var l=a[s],u=n._plots[l],f=[],c,h=0;h<o.length;h++){var v=o[h],d=v[0].trace;d.xaxis+d.yaxis===l&&((t.indexOf(d.index)!==-1||d.carpet)&&(c&&c[0].trace.xaxis+c[0].trace.yaxis===l&&["tonextx","tonexty","tonext"].indexOf(d.fill)!==-1&&f.indexOf(c)===-1&&f.push(c),f.push(v)),c=v)}She(e,u,f,r,i)}};function She(e,t,r,i,n){for(var a=K0.traceLayerClasses,o=e._fullLayout,s=o._modules,l,u,f,c=[],h=[],v=0;v<s.length;v++){l=s[v];var d=l.name,_=Ahe.modules[d].categories;if(_.svg){var T=l.layerName||d+"layer",p=l.plot;u=Mhe(r,p),f=u[0],r=u[1],f.length&&c.push({i:a.indexOf(T),className:T,plotMethod:p,cdModule:f}),_.zoomScale&&h.push("."+T)}}c.sort(function(w,k){return w.i-k.i});var M=t.plot.selectAll("g.mlayer").data(c,function(w){return w.className});if(M.enter().append("g").attr("class",function(w){return w.className}).classed("mlayer",!0).classed("rangeplot",t.isRangePlot),M.exit().remove(),M.order(),M.each(function(w){var k=TL.select(this),x=w.className;w.plotMethod(e,t,w.cdModule,k,i,n),K0.clipOnAxisFalseQuery.indexOf("."+x)===-1&&Evt.setClipUrl(k,t.layerClipId,e)}),o._has("scattergl")&&(l=Ahe.getModule("scattergl"),f=Mhe(r,l)[0],l.plot(e,t,f)),!e._context.staticPlot&&(t._hasClipOnAxisFalse&&(t.clipOnAxisFalseTraces=t.plot.selectAll(K0.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),h.length)){var b=t.plot.selectAll(h.join(",")).selectAll(".trace");t.zoomScalePts=b.selectAll("path.point"),t.zoomScaleTxt=b.selectAll(".textpoint")}}gh.clean=function(e,t,r,i){var n=i._plots||{},a=t._plots||{},o=i._subplots||{},s,l,u;if(i._hasOnlyLargeSploms&&!t._hasOnlyLargeSploms)for(u in n)s=n[u],s.plotgroup&&s.plotgroup.remove();var f=i._has&&i._has("gl"),c=t._has&&t._has("gl");if(f&&!c)for(u in n)s=n[u],s._scene&&s._scene.destroy();if(o.xaxis&&o.yaxis){var h=Am.listIds({_fullLayout:i});for(l=0;l<h.length;l++){var v=h[l];t[Am.id2name(v)]||i._infolayer.selectAll(".g-"+v+"title").remove()}}var d=i._has&&i._has("cartesian"),_=t._has&&t._has("cartesian");if(d&&!_)khe(i._cartesianlayer.selectAll(".subplot"),i),i._defs.selectAll(".axesclip").remove(),delete i._axisConstraintGroups,delete i._axisMatchGroups;else if(o.cartesian)for(l=0;l<o.cartesian.length;l++){var T=o.cartesian[l];if(!a[T]){var p="."+T+",."+T+"-x,."+T+"-y";i._cartesianlayer.selectAll(p).remove(),Che(T,i)}}};gh.drawFramework=function(e){var t=e._fullLayout,r=Cvt(e),i=t._cartesianlayer.selectAll(".subplot").data(r,String);i.enter().append("g").attr("class",function(n){return"subplot "+n[0]}),i.order(),i.exit().call(khe,t),i.each(function(n){var a=n[0],o=t._plots[a];o.plotgroup=TL.select(this),Ehe(e,o),o.draglayer=Cs(t._draggers,"g",a)})};gh.rangePlot=function(e,t,r){Ehe(e,t),She(e,t,r),Svt.style(e)};function Cvt(e){var t=e._fullLayout,r=t._subplots.cartesian,i=r.length,n,a,o,s,l,u,f=[],c=[];for(n=0;n<i;n++){o=r[n],s=t._plots[o],l=s.xaxis,u=s.yaxis;var h=l._mainAxis,v=u._mainAxis,d=h._id+v._id,_=t._plots[d];s.overlays=[],d!==o&&_?(s.mainplot=d,s.mainplotinfo=_,c.push(o)):(s.mainplot=void 0,s.mainplotinfo=void 0,f.push(o))}for(n=0;n<c.length;n++)o=c[n],s=t._plots[o],s.mainplotinfo.overlays.push(s);var T=f.concat(c),p=new Array(i);for(n=0;n<i;n++){o=T[n],s=t._plots[o],l=s.xaxis,u=s.yaxis;var M=[o,l.layer,u.layer,l.overlaying||"",u.overlaying||""];for(a=0;a<s.overlays.length;a++)M.push(s.overlays[a].id);p[n]=M}return p}function Ehe(e,t){var r=t.plotgroup,i=t.id,n=K0.layerValue2layerClass[t.xaxis.layer],a=K0.layerValue2layerClass[t.yaxis.layer],o=e._fullLayout._hasOnlyLargeSploms;if(t.mainplot){var l=t.mainplotinfo,u=l.plotgroup,f=i+"-x",c=i+"-y";t.minorGridlayer=l.minorGridlayer,t.gridlayer=l.gridlayer,t.zerolinelayer=l.zerolinelayer,Cs(l.overlinesBelow,"path",f),Cs(l.overlinesBelow,"path",c),Cs(l.overaxesBelow,"g",f),Cs(l.overaxesBelow,"g",c),t.plot=Cs(l.overplot,"g",i),Cs(l.overlinesAbove,"path",f),Cs(l.overlinesAbove,"path",c),Cs(l.overaxesAbove,"g",f),Cs(l.overaxesAbove,"g",c),t.xlines=u.select(".overlines-"+n).select("."+f),t.ylines=u.select(".overlines-"+a).select("."+c),t.xaxislayer=u.select(".overaxes-"+n).select("."+f),t.yaxislayer=u.select(".overaxes-"+a).select("."+c)}else if(o)t.xlines=Cs(r,"path","xlines-above"),t.ylines=Cs(r,"path","ylines-above"),t.xaxislayer=Cs(r,"g","xaxislayer-above"),t.yaxislayer=Cs(r,"g","yaxislayer-above");else{var s=Cs(r,"g","layer-subplot");t.shapelayer=Cs(s,"g","shapelayer"),t.imagelayer=Cs(s,"g","imagelayer"),t.minorGridlayer=Cs(r,"g","minor-gridlayer"),t.gridlayer=Cs(r,"g","gridlayer"),t.zerolinelayer=Cs(r,"g","zerolinelayer"),Cs(r,"path","xlines-below"),Cs(r,"path","ylines-below"),t.overlinesBelow=Cs(r,"g","overlines-below"),Cs(r,"g","xaxislayer-below"),Cs(r,"g","yaxislayer-below"),t.overaxesBelow=Cs(r,"g","overaxes-below"),t.plot=Cs(r,"g","plot"),t.overplot=Cs(r,"g","overplot"),t.xlines=Cs(r,"path","xlines-above"),t.ylines=Cs(r,"path","ylines-above"),t.overlinesAbove=Cs(r,"g","overlines-above"),Cs(r,"g","xaxislayer-above"),Cs(r,"g","yaxislayer-above"),t.overaxesAbove=Cs(r,"g","overaxes-above"),t.xlines=r.select(".xlines-"+n),t.ylines=r.select(".ylines-"+a),t.xaxislayer=r.select(".xaxislayer-"+n),t.yaxislayer=r.select(".yaxislayer-"+a)}o||(bL(t.minorGridlayer,"g",t.xaxis._id),bL(t.minorGridlayer,"g",t.yaxis._id),t.minorGridlayer.selectAll("g").map(function(h){return h[0]}).sort(Am.idSort),bL(t.gridlayer,"g",t.xaxis._id),bL(t.gridlayer,"g",t.yaxis._id),t.gridlayer.selectAll("g").map(function(h){return h[0]}).sort(Am.idSort)),t.xlines.style("fill","none").classed("crisp",!0),t.ylines.style("fill","none").classed("crisp",!0)}function khe(e,t){if(e){var r={};e.each(function(l){var u=l[0],f=TL.select(this);f.remove(),Che(u,t),r[u]=!0});for(var i in t._plots)for(var n=t._plots[i],a=n.overlays||[],o=0;o<a.length;o++){var s=a[o];r[s.id]&&s.plot.selectAll(".trace").remove()}}}function Che(e,t){t._draggers.selectAll("g."+e).remove(),t._defs.select("#clip"+t._uid+e+"plot").remove()}gh.toSVG=function(e){var t=e._fullLayout._glimages,r=TL.select(e).selectAll(".svg-container"),i=r.filter(function(a,o){return o===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function n(){var a=this,o=a.toDataURL("image/png"),s=t.append("svg:image");s.attr({xmlns:kvt.svg,"xlink:href":o,preserveAspectRatio:"none",x:0,y:0,width:a.style.width,height:a.style.height})}i.each(n)};gh.updateFx=R7().updateFx});var Phe=ne((Wnr,Lhe)=>{"use strict";var AL=js();Lhe.exports={hasLines:AL.hasLines,hasMarkers:AL.hasMarkers,hasText:AL.hasText,isBubble:AL.isBubble,attributes:cu(),layoutAttributes:lC(),supplyDefaults:tce(),crossTraceDefaults:j7(),supplyLayoutDefaults:ace(),calc:yp().calc,crossTraceCalc:Rce(),arraysToCalcdata:Z0(),plot:Y2(),colorbar:ph(),formatLabels:hL(),style:Tv().style,styleOnSelect:Tv().styleOnSelect,hoverPoints:j2(),selectPoints:K2(),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:vu(),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}});var Ihe=ne((Xnr,Dhe)=>{"use strict";var Lvt=Ai(),Pvt=_i(),Rhe=T7(),xB=Wt(),Rvt=xB.strScale,Dvt=xB.strRotate,Ivt=xB.strTranslate;Dhe.exports=function(t,r,i){var n=t.node(),a=Rhe[i.arrowhead||0],o=Rhe[i.startarrowhead||0],s=(i.arrowwidth||1)*(i.arrowsize||1),l=(i.arrowwidth||1)*(i.startarrowsize||1),u=r.indexOf("start")>=0,f=r.indexOf("end")>=0,c=a.backoff*s+i.standoff,h=o.backoff*l+i.startstandoff,v,d,_,T;if(n.nodeName==="line"){v={x:+t.attr("x1"),y:+t.attr("y1")},d={x:+t.attr("x2"),y:+t.attr("y2")};var p=v.x-d.x,M=v.y-d.y;if(_=Math.atan2(M,p),T=_+Math.PI,c&&h&&c+h>Math.sqrt(p*p+M*M)){z();return}if(c){if(c*c>p*p+M*M){z();return}var b=c*Math.cos(_),w=c*Math.sin(_);d.x+=b,d.y+=w,t.attr({x2:d.x,y2:d.y})}if(h){if(h*h>p*p+M*M){z();return}var k=h*Math.cos(_),x=h*Math.sin(_);v.x-=k,v.y-=x,t.attr({x1:v.x,y1:v.y})}}else if(n.nodeName==="path"){var E=n.getTotalLength(),S="";if(E<c+h){z();return}var g=n.getPointAtLength(0),C=n.getPointAtLength(.1);_=Math.atan2(g.y-C.y,g.x-C.x),v=n.getPointAtLength(Math.min(h,E)),S="0px,"+h+"px,";var A=n.getPointAtLength(E),P=n.getPointAtLength(E-.1);T=Math.atan2(A.y-P.y,A.x-P.x),d=n.getPointAtLength(Math.max(0,E-c));var D=S?h+c:c;S+=E-D+"px,"+E+"px",t.style("stroke-dasharray",S)}function z(){t.style("stroke-dasharray","0px,100px")}function O(V,B,F,N){V.path&&(V.noRotate&&(F=0),Lvt.select(n.parentNode).append("path").attr({class:t.attr("class"),d:V.path,transform:Ivt(B.x,B.y)+Dvt(F*180/Math.PI)+Rvt(N)}).style({fill:Pvt.rgb(i.arrowcolor),"stroke-width":0}))}u&&O(o,v,_,l),f&&O(a,d,T,s)}});var ML=ne((Znr,Bhe)=>{"use strict";var Fhe=Ai(),_B=wi(),Fvt=Zs(),Sm=Wt(),bB=Sm.strTranslate,DM=Xi(),qx=_i(),Xg=aa(),qhe=Ol(),wB=Es(),TB=e0(),RM=Hh(),qvt=So().arrayEditor,zvt=Ihe();Bhe.exports={draw:Ovt,drawOne:zhe,drawRaw:Ohe};function Ovt(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var r=0;r<t.annotations.length;r++)t.annotations[r].visible&&zhe(e,r);return Fvt.previousPromises(e)}function zhe(e,t){var r=e._fullLayout,i=r.annotations[t]||{},n=DM.getFromId(e,i.xref),a=DM.getFromId(e,i.yref);n&&n.setScale(),a&&a.setScale(),Ohe(e,i,t,!1,n,a)}function Mm(e,t,r,i,n){var a=n[r],o=n[r+"ref"],s=r.indexOf("y")!==-1,l=DM.getRefType(o)==="domain",u=s?i.h:i.w;return e?l?a+(s?-t:t)/e._length:e.p2r(e.r2p(a)+t):a+(s?-t:t)/u}function Ohe(e,t,r,i,n,a){var o=e._fullLayout,s=e._fullLayout._size,l=e._context.edits,u,f;i?(u="annotation-"+i,f=i+".annotations"):(u="annotation",f="annotations");var c=qvt(e.layout,f,t),h=c.modifyBase,v=c.modifyItem,d=c.getUpdateObj;o._infolayer.selectAll("."+u+'[data-index="'+r+'"]').remove();var _="clip"+o._uid+"_ann"+r;if(!t._input||t.visible===!1){Fhe.selectAll("#"+_).remove();return}var T={x:{},y:{}},p=+t.textangle||0,M=o._infolayer.append("g").classed(u,!0).attr("data-index",String(r)).style("opacity",t.opacity),b=M.append("g").classed("annotation-text-g",!0),w=l[t.showarrow?"annotationTail":"annotationPosition"],k=t.captureevents||l.annotationText||w;function x(N){var Z={index:r,annotation:t._input,fullAnnotation:t,event:N};return i&&(Z.subplotId=i),Z}var E=b.append("g").style("pointer-events",k?"all":null).call(TB,"pointer").on("click",function(){e._dragging=!1,e.emit("plotly_clickannotation",x(Fhe.event))});t.hovertext&&E.on("mouseover",function(){var N=t.hoverlabel,Z=N.font,J=this.getBoundingClientRect(),re=e.getBoundingClientRect();qhe.loneHover({x0:J.left-re.left,x1:J.right-re.left,y:(J.top+J.bottom)/2-re.top,text:t.hovertext,color:N.bgcolor,borderColor:N.bordercolor,fontFamily:Z.family,fontSize:Z.size,fontColor:Z.color},{container:o._hoverlayer.node(),outerContainer:o._paper.node(),gd:e})}).on("mouseout",function(){qhe.loneUnhover(o._hoverlayer.node())});var S=t.borderwidth,g=t.borderpad,C=S+g,A=E.append("rect").attr("class","bg").style("stroke-width",S+"px").call(qx.stroke,t.bordercolor).call(qx.fill,t.bgcolor),P=t.width||t.height,D=o._topclips.selectAll("#"+_).data(P?[0]:[]);D.enter().append("clipPath").classed("annclip",!0).attr("id",_).append("rect"),D.exit().remove();var z=t.font,O=o._meta?Sm.templateString(t.text,o._meta):t.text,V=E.append("text").classed("annotation-text",!0).text(O);function B(N){return N.call(Xg.font,z).attr({"text-anchor":{left:"start",right:"end"}[t.align]||"middle"}),wB.convertToTspans(N,e,F),N}function F(){var N=V.selectAll("a");if(N.size()===1&&N.text()===V.text()){var Z=E.insert("a",":first-child").attr({"xlink:xlink:href":N.attr("xlink:href"),"xlink:xlink:show":N.attr("xlink:show")}).style({cursor:"pointer"});Z.node().appendChild(A.node())}var J=E.select(".annotation-text-math-group"),re=!J.empty(),ue=Xg.bBox((re?J:V).node()),fe=ue.width,K=ue.height,X=t.width||fe,ae=t.height||K,oe=Math.round(X+2*C),me=Math.round(ae+2*C);function xe(Je,Ke){return Ke==="auto"&&(Je<1/3?Ke="left":Je>2/3?Ke="right":Ke="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[Ke]}for(var ce=!1,ie=["x","y"],ge=0;ge<ie.length;ge++){var le=ie[ge],we=t[le+"ref"]||le,Re=t["a"+le+"ref"],qe={x:n,y:a}[le],et=(p+(le==="x"?0:-90))*Math.PI/180,Pe=oe*Math.cos(et),Ie=me*Math.sin(et),ut=Math.abs(Pe)+Math.abs(Ie),ft=t[le+"anchor"],je=t[le+"shift"]*(le==="x"?1:-1),_t=T[le],Bt,Lt,Me,Ze,dt,it=DM.getRefType(we);if(qe&&it!=="domain"){var vt=qe.r2fraction(t[le]);(vt<0||vt>1)&&(Re===we?(vt=qe.r2fraction(t["a"+le]),(vt<0||vt>1)&&(ce=!0)):ce=!0),Bt=qe._offset+qe.r2p(t[le]),Ze=.5}else{var rt=it==="domain";le==="x"?(Me=t[le],Bt=rt?qe._offset+qe._length*Me:Bt=s.l+s.w*Me):(Me=1-t[le],Bt=rt?qe._offset+qe._length*Me:Bt=s.t+s.h*Me),Ze=t.showarrow?.5:Me}if(t.showarrow){_t.head=Bt;var We=t["a"+le];if(dt=Pe*xe(.5,t.xanchor)-Ie*xe(.5,t.yanchor),Re===we){var ht=DM.getRefType(Re);ht==="domain"?(le==="y"&&(We=1-We),_t.tail=qe._offset+qe._length*We):ht==="paper"?le==="y"?(We=1-We,_t.tail=s.t+s.h*We):_t.tail=s.l+s.w*We:_t.tail=qe._offset+qe.r2p(We),Lt=dt}else _t.tail=Bt+We,Lt=dt+We;_t.text=_t.tail+dt;var mt=o[le==="x"?"width":"height"];if(we==="paper"&&(_t.head=Sm.constrain(_t.head,1,mt-1)),Re==="pixel"){var er=-Math.max(_t.tail-3,_t.text),$t=Math.min(_t.tail+3,_t.text)-mt;er>0?(_t.tail+=er,_t.text+=er):$t>0&&(_t.tail-=$t,_t.text-=$t)}_t.tail+=je,_t.head+=je}else dt=ut*xe(Ze,ft),Lt=dt,_t.text=Bt+dt;_t.text+=je,dt+=je,Lt+=je,t["_"+le+"padplus"]=ut/2+Lt,t["_"+le+"padminus"]=ut/2-Lt,t["_"+le+"size"]=ut,t["_"+le+"shift"]=dt}if(ce){E.remove();return}var cr=0,or=0;if(t.align!=="left"&&(cr=(X-fe)*(t.align==="center"?.5:1)),t.valign!=="top"&&(or=(ae-K)*(t.valign==="middle"?.5:1)),re)J.select("svg").attr({x:C+cr-1,y:C+or}).call(Xg.setClipUrl,P?_:null,e);else{var vr=C+or-ue.top,Ot=C+cr-ue.left;V.call(wB.positionText,Ot,vr).call(Xg.setClipUrl,P?_:null,e)}D.select("rect").call(Xg.setRect,C,C,X,ae),A.call(Xg.setRect,S/2,S/2,oe-S,me-S),E.call(Xg.setTranslate,Math.round(T.x.text-oe/2),Math.round(T.y.text-me/2)),b.attr({transform:"rotate("+p+","+T.x.text+","+T.y.text+")"});var yt=function(Je,Ke){M.selectAll(".annotation-arrow-g").remove();var At=T.x.head,Ee=T.y.head,de=T.x.tail+Je,Te=T.y.tail+Ke,nt=T.x.text+Je,Mt=T.y.text+Ke,Kt=Sm.rotationXYMatrix(p,nt,Mt),Jt=Sm.apply2DTransform(Kt),Fr=Sm.apply2DTransform2(Kt),Vr=+A.attr("width"),mr=+A.attr("height"),zr=nt-.5*Vr,an=zr+Vr,ni=Mt-.5*mr,mn=ni+mr,fi=[[zr,ni,zr,mn],[zr,mn,an,mn],[an,mn,an,ni],[an,ni,zr,ni]].map(Fr);if(!fi.reduce(function(dr,Rr){return dr^!!Sm.segmentsIntersect(At,Ee,At+1e6,Ee+1e6,Rr[0],Rr[1],Rr[2],Rr[3])},!1)){fi.forEach(function(dr){var Rr=Sm.segmentsIntersect(de,Te,At,Ee,dr[0],dr[1],dr[2],dr[3]);Rr&&(de=Rr.x,Te=Rr.y)});var Wi=t.arrowwidth,si=t.arrowcolor,Zi=t.arrowside,Ei=M.append("g").style({opacity:qx.opacity(si)}).classed("annotation-arrow-g",!0),ot=Ei.append("path").attr("d","M"+de+","+Te+"L"+At+","+Ee).style("stroke-width",Wi+"px").call(qx.stroke,qx.rgb(si));if(zvt(ot,Zi,t),l.annotationPosition&&ot.node().parentNode&&!i){var Be=At,lt=Ee;if(t.standoff){var xt=Math.sqrt(Math.pow(At-de,2)+Math.pow(Ee-Te,2));Be+=t.standoff*(de-At)/xt,lt+=t.standoff*(Te-Ee)/xt}var Nt=Ei.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(de-Be)+","+(Te-lt),transform:bB(Be,lt)}).style("stroke-width",Wi+6+"px").call(qx.stroke,"rgba(0,0,0,0)").call(qx.fill,"rgba(0,0,0,0)"),nr,yr;RM.init({element:Nt.node(),gd:e,prepFn:function(){var dr=Xg.getTranslate(E);nr=dr.x,yr=dr.y,n&&n.autorange&&h(n._name+".autorange",!0),a&&a.autorange&&h(a._name+".autorange",!0)},moveFn:function(dr,Rr){var Gr=Jt(nr,yr),Yr=Gr[0]+dr,dn=Gr[1]+Rr;E.call(Xg.setTranslate,Yr,dn),v("x",Mm(n,dr,"x",s,t)),v("y",Mm(a,Rr,"y",s,t)),t.axref===t.xref&&v("ax",Mm(n,dr,"ax",s,t)),t.ayref===t.yref&&v("ay",Mm(a,Rr,"ay",s,t)),Ei.attr("transform",bB(dr,Rr)),b.attr({transform:"rotate("+p+","+Yr+","+dn+")"})},doneFn:function(){_B.call("_guiRelayout",e,d());var dr=document.querySelector(".js-notes-box-panel");dr&&dr.redraw(dr.selectedObj)}})}}};if(t.showarrow&&yt(0,0),w){var Et;RM.init({element:E.node(),gd:e,prepFn:function(){Et=b.attr("transform")},moveFn:function(Je,Ke){var At="pointer";if(t.showarrow)t.axref===t.xref?v("ax",Mm(n,Je,"ax",s,t)):v("ax",t.ax+Je),t.ayref===t.yref?v("ay",Mm(a,Ke,"ay",s.w,t)):v("ay",t.ay+Ke),yt(Je,Ke);else{if(i)return;var Ee,de;if(n)Ee=Mm(n,Je,"x",s,t);else{var Te=t._xsize/s.w,nt=t.x+(t._xshift-t.xshift)/s.w-Te/2;Ee=RM.align(nt+Je/s.w,Te,0,1,t.xanchor)}if(a)de=Mm(a,Ke,"y",s,t);else{var Mt=t._ysize/s.h,Kt=t.y-(t._yshift+t.yshift)/s.h-Mt/2;de=RM.align(Kt-Ke/s.h,Mt,0,1,t.yanchor)}v("x",Ee),v("y",de),(!n||!a)&&(At=RM.getCursor(n?.5:Ee,a?.5:de,t.xanchor,t.yanchor))}b.attr({transform:bB(Je,Ke)+Et}),TB(E,At)},clickFn:function(Je,Ke){t.captureevents&&e.emit("plotly_clickannotation",x(Ke))},doneFn:function(){TB(E),_B.call("_guiRelayout",e,d());var Je=document.querySelector(".js-notes-box-panel");Je&&Je.redraw(Je.selectedObj)}})}}l.annotationText?V.call(wB.makeEditable,{delegate:E,gd:e}).call(B).on("edit",function(N){t.text=N,this.call(B),v("text",N),n&&n.autorange&&h(n._name+".autorange",!0),a&&a.autorange&&h(a._name+".autorange",!0),_B.call("_guiRelayout",e,d())}):V.call(B)}});var Yhe=ne((jnr,Ghe)=>{"use strict";var Nhe=Wt(),Bvt=wi(),Uhe=So().arrayEditor;Ghe.exports={hasClickToShow:Nvt,onClick:Uvt};function Nvt(e,t){var r=Hhe(e,t);return r.on.length>0||r.explicitOff.length>0}function Uvt(e,t){var r=Hhe(e,t),i=r.on,n=r.off.concat(r.explicitOff),a={},o=e._fullLayout.annotations,s,l;if(i.length||n.length){for(s=0;s<i.length;s++)l=Uhe(e.layout,"annotations",o[i[s]]),l.modifyItem("visible",!0),Nhe.extendFlat(a,l.getUpdateObj());for(s=0;s<n.length;s++)l=Uhe(e.layout,"annotations",o[n[s]]),l.modifyItem("visible",!1),Nhe.extendFlat(a,l.getUpdateObj());return Bvt.call("update",e,{},a)}}function Hhe(e,t){var r=e._fullLayout.annotations,i=[],n=[],a=[],o=(t||[]).length,s,l,u,f,c,h,v,d;for(s=0;s<r.length;s++)if(u=r[s],f=u.clicktoshow,f){for(l=0;l<o;l++)if(c=t[l],h=c.xaxis,v=c.yaxis,h._id===u.xref&&v._id===u.yref&&h.d2r(c.x)===Vhe(u._xclick,h)&&v.d2r(c.y)===Vhe(u._yclick,v)){u.visible?f==="onout"?d=n:d=a:d=i,d.push(s);break}l===o&&u.visible&&f==="onout"&&n.push(s)}return{on:i,off:n,explicitOff:a}}function Vhe(e,t){return t.type==="log"?t.l2r(e):t.d2r(e)}});var AB=ne((Knr,Xhe)=>{"use strict";var Whe=Wt(),J2=_i();Xhe.exports=function(t,r,i,n){n("opacity");var a=n("bgcolor"),o=n("bordercolor"),s=J2.opacity(o);n("borderpad");var l=n("borderwidth"),u=n("showarrow");n("text",u?" ":i._dfltTitle.annotation),n("textangle"),Whe.coerceFont(n,"font",i.font),n("width"),n("align");var f=n("height");if(f&&n("valign"),u){var c=n("arrowside"),h,v;c.indexOf("end")!==-1&&(h=n("arrowhead"),v=n("arrowsize")),c.indexOf("start")!==-1&&(n("startarrowhead",h),n("startarrowsize",v)),n("arrowcolor",s?r.bordercolor:J2.defaultLine),n("arrowwidth",(s&&l||1)*2),n("standoff"),n("startstandoff")}var d=n("hovertext"),_=i.hoverlabel||{};if(d){var T=n("hoverlabel.bgcolor",_.bgcolor||(J2.opacity(a)?J2.rgb(a):J2.defaultLine)),p=n("hoverlabel.bordercolor",_.bordercolor||J2.contrast(T));Whe.coerceFont(n,"hoverlabel.font",{family:_.font.family,size:_.font.size,color:_.font.color||p})}n("captureevents",!!d)}});var jhe=ne((Jnr,Zhe)=>{"use strict";var MB=Wt(),zx=Xi(),Vvt=ch(),Hvt=AB(),Gvt=Lx();Zhe.exports=function(t,r){Vvt(t,r,{name:"annotations",handleItemDefaults:Yvt})};function Yvt(e,t,r){function i(b,w){return MB.coerce(e,t,Gvt,b,w)}var n=i("visible"),a=i("clicktoshow");if(n||a){Hvt(e,t,r,i);for(var o=t.showarrow,s=["x","y"],l=[-10,-30],u={_fullLayout:r},f=0;f<2;f++){var c=s[f],h=zx.coerceRef(e,t,u,c,"","paper");if(h!=="paper"){var v=zx.getFromId(u,h);v._annIndices.push(t._index)}if(zx.coercePosition(t,u,i,h,c,.5),o){var d="a"+c,_=zx.coerceRef(e,t,u,d,"pixel",["pixel","paper"]);_!=="pixel"&&_!==h&&(_=t[d]="pixel");var T=_==="pixel"?l[f]:.4;zx.coercePosition(t,u,i,_,d,T)}i(c+"anchor"),i(c+"shift")}if(MB.noneOrAll(e,t,["x","y"]),o&&MB.noneOrAll(e,t,["ax","ay"]),a){var p=i("xclick"),M=i("yclick");t._xclick=p===void 0?t.x:zx.cleanPosition(p,u,t.xref),t._yclick=M===void 0?t.y:zx.cleanPosition(M,u,t.yref)}}}});var Qhe=ne((Qnr,Jhe)=>{"use strict";var SB=Wt(),Ox=Xi(),Wvt=ML().draw;Jhe.exports=function(t){var r=t._fullLayout,i=SB.filterVisible(r.annotations);if(i.length&&t._fullData.length)return SB.syncOrAsync([Wvt,Xvt],t)};function Xvt(e){var t=e._fullLayout;SB.filterVisible(t.annotations).forEach(function(r){var i=Ox.getFromId(e,r.xref),n=Ox.getFromId(e,r.yref),a=Ox.getRefType(r.xref),o=Ox.getRefType(r.yref);r._extremes={},a==="range"&&Khe(r,i),o==="range"&&Khe(r,n)})}function Khe(e,t){var r=t._id,i=r.charAt(0),n=e[i],a=e["a"+i],o=e[i+"ref"],s=e["a"+i+"ref"],l=e["_"+i+"padplus"],u=e["_"+i+"padminus"],f={x:1,y:-1}[i]*e[i+"shift"],c=3*e.arrowsize*e.arrowwidth||0,h=c+f,v=c-f,d=3*e.startarrowsize*e.arrowwidth||0,_=d+f,T=d-f,p;if(s===o){var M=Ox.findExtremes(t,[t.r2c(n)],{ppadplus:h,ppadminus:v}),b=Ox.findExtremes(t,[t.r2c(a)],{ppadplus:Math.max(l,_),ppadminus:Math.max(u,T)});p={min:[M.min[0],b.min[0]],max:[M.max[0],b.max[0]]}}else _=a?_+a:_,T=a?T-a:T,p=Ox.findExtremes(t,[t.r2c(n)],{ppadplus:Math.max(l,h,_),ppadminus:Math.max(u,v,T)});e._extremes[r]=p}});var eve=ne(($nr,$he)=>{"use strict";var Zvt=la(),jvt=kk();$he.exports=function(t,r,i,n){r=r||{};var a=i==="log"&&r.type==="linear",o=i==="linear"&&r.type==="log";if(!(a||o))return;var s=t._fullLayout.annotations,l=r._id.charAt(0),u,f;function c(v){var d=u[v],_=null;a?_=jvt(d,r.range):_=Math.pow(10,d),Zvt(_)||(_=null),n(f+v,_)}for(var h=0;h<s.length;h++)u=s[h],f="annotations["+h+"].",u[l+"ref"]===r._id&&c(l),u["a"+l+"ref"]===r._id&&c("a"+l)}});var nve=ne((eir,rve)=>{"use strict";var EB=ML(),tve=Yhe();rve.exports={moduleType:"component",name:"annotations",layoutAttributes:Lx(),supplyLayoutDefaults:jhe(),includeBasePlot:uM()("annotations"),calcAutorange:Qhe(),draw:EB.draw,drawOne:EB.drawOne,drawRaw:EB.drawRaw,hasClickToShow:tve.hasClickToShow,onClick:tve.onClick,convertCoords:eve()}});var SL=ne((tir,ive)=>{"use strict";var tl=Lx(),Kvt=Xs().overrideAll,Jvt=So().templatedArray;ive.exports=Kvt(Jvt("annotation",{visible:tl.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:tl.xanchor,xshift:tl.xshift,yanchor:tl.yanchor,yshift:tl.yshift,text:tl.text,textangle:tl.textangle,font:tl.font,width:tl.width,height:tl.height,opacity:tl.opacity,align:tl.align,valign:tl.valign,bgcolor:tl.bgcolor,bordercolor:tl.bordercolor,borderpad:tl.borderpad,borderwidth:tl.borderwidth,showarrow:tl.showarrow,arrowcolor:tl.arrowcolor,arrowhead:tl.arrowhead,startarrowhead:tl.startarrowhead,arrowside:tl.arrowside,arrowsize:tl.arrowsize,startarrowsize:tl.startarrowsize,arrowwidth:tl.arrowwidth,standoff:tl.standoff,startstandoff:tl.startstandoff,hovertext:tl.hovertext,hoverlabel:tl.hoverlabel,captureevents:tl.captureevents}),"calc","from-root")});var ove=ne((rir,ave)=>{"use strict";var kB=Wt(),Qvt=Xi(),$vt=ch(),edt=AB(),tdt=SL();ave.exports=function(t,r,i){$vt(t,r,{name:"annotations",handleItemDefaults:rdt,fullLayout:i.fullLayout})};function rdt(e,t,r,i){function n(s,l){return kB.coerce(e,t,tdt,s,l)}function a(s){var l=s+"axis",u={_fullLayout:{}};return u._fullLayout[l]=r[l],Qvt.coercePosition(t,u,n,s,s,.5)}var o=n("visible");o&&(edt(e,t,i.fullLayout,n),a("x"),a("y"),a("z"),kB.noneOrAll(e,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",n("xanchor"),n("yanchor"),n("xshift"),n("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",n("ax",-10),n("ay",-30),kB.noneOrAll(e,t,["ax","ay"])))}});var fve=ne((nir,uve)=>{"use strict";var sve=Wt(),lve=Xi();uve.exports=function(t){for(var r=t.fullSceneLayout,i=r.annotations,n=0;n<i.length;n++)ndt(i[n],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()};function ndt(e,t){var r=t.fullSceneLayout,i=r.domain,n=t.fullLayout._size,a={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};e._xa={},sve.extendFlat(e._xa,a),lve.setConvert(e._xa),e._xa._offset=n.l+i.x[0]*n.w,e._xa.l2p=function(){return .5*(1+e._pdata[0]/e._pdata[3])*n.w*(i.x[1]-i.x[0])},e._ya={},sve.extendFlat(e._ya,a),lve.setConvert(e._ya),e._ya._offset=n.t+(1-i.y[1])*n.h,e._ya.l2p=function(){return .5*(1-e._pdata[1]/e._pdata[3])*n.h*(i.y[1]-i.y[0])}}});var LB=ne((iir,cve)=>{"use strict";function CB(e,t){var r=[0,0,0,0],i,n;for(i=0;i<4;++i)for(n=0;n<4;++n)r[n]+=e[4*i+n]*t[i];return r}function idt(e,t){var r=CB(e.projection,CB(e.view,CB(e.model,[t[0],t[1],t[2],1])));return r}cve.exports=idt});var vve=ne((air,hve)=>{"use strict";var adt=ML().drawRaw,odt=LB(),sdt=["x","y","z"];hve.exports=function(t){for(var r=t.fullSceneLayout,i=t.dataScale,n=r.annotations,a=0;a<n.length;a++){for(var o=n[a],s=!1,l=0;l<3;l++){var u=sdt[l],f=o[u],c=r[u+"axis"],h=c.r2fraction(f);if(h<0||h>1){s=!0;break}}s?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+a+'"]').remove():(o._pdata=odt(t.glplot.cameraParams,[r.xaxis.r2l(o.x)*i[0],r.yaxis.r2l(o.y)*i[1],r.zaxis.r2l(o.z)*i[2]]),adt(t.graphDiv,o,a,t.id,o._xa,o._ya))}}});var gve=ne((oir,pve)=>{"use strict";var ldt=wi(),dve=Wt();pve.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:SL()}}},layoutAttributes:SL(),handleDefaults:ove(),includeBasePlot:udt,convert:fve(),draw:vve()};function udt(e,t){var r=ldt.subplotsRegistry.gl3d;if(r)for(var i=r.attrRegex,n=Object.keys(e),a=0;a<n.length;a++){var o=n[a];i.test(o)&&(e[o].annotations||[]).length&&(dve.pushUnique(t._basePlotModules,r),dve.pushUnique(t._subplots.gl3d,o))}}});var PB=ne((lir,_ve)=>{"use strict";var yve=Lx(),mve=ll(),xve=cu().line,fdt=hc().dash,c0=oa().extendFlat,cdt=So().templatedArray,sir=lM(),Q2=es(),hdt=Ba().shapeTexttemplateAttrs,vdt=Vk();_ve.exports=cdt("shape",{visible:c0({},Q2.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:c0({},Q2.legend,{editType:"calc+arraydraw"}),legendgroup:c0({},Q2.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:c0({},Q2.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:mve({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:c0({},Q2.legendrank,{editType:"calc+arraydraw"}),legendwidth:c0({},Q2.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:c0({},yve.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:c0({},yve.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:c0({},xve.color,{editType:"arraydraw"}),width:c0({},xve.width,{editType:"calc+arraydraw"}),dash:c0({},fdt,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:hdt({},{keys:Object.keys(vdt)}),font:mve({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})});var Tve=ne((uir,wve)=>{"use strict";var IM=Wt(),$2=Xi(),ddt=ch(),pdt=PB(),bve=ym();wve.exports=function(t,r){ddt(t,r,{name:"shapes",handleItemDefaults:ydt})};function gdt(e,t){return e?"bottom":t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle"}function ydt(e,t,r){function i(N,Z){return IM.coerce(e,t,pdt,N,Z)}t._isShape=!0;var n=i("visible");if(n){var a=i("showlegend");a&&(i("legend"),i("legendwidth"),i("legendgroup"),i("legendgrouptitle.text"),IM.coerceFont(i,"legendgrouptitle.font"),i("legendrank"));var o=i("path"),s=o?"path":"rect",l=i("type",s),u=l!=="path";u&&delete t.path,i("editable"),i("layer"),i("opacity"),i("fillcolor"),i("fillrule");var f=i("line.width");f&&(i("line.color"),i("line.dash"));for(var c=i("xsizemode"),h=i("ysizemode"),v=["x","y"],d=0;d<2;d++){var _=v[d],T=_+"anchor",p=_==="x"?c:h,M={_fullLayout:r},b,w,k,x=$2.coerceRef(e,t,M,_,void 0,"paper"),E=$2.getRefType(x);if(E==="range"?(b=$2.getFromId(M,x),b._shapeIndices.push(t._index),k=bve.rangeToShapePosition(b),w=bve.shapePositionToRange(b)):w=k=IM.identity,u){var S=.25,g=.75,C=_+"0",A=_+"1",P=e[C],D=e[A];e[C]=w(e[C],!0),e[A]=w(e[A],!0),p==="pixel"?(i(C,0),i(A,10)):($2.coercePosition(t,M,i,x,C,S),$2.coercePosition(t,M,i,x,A,g)),t[C]=k(t[C]),t[A]=k(t[A]),e[C]=P,e[A]=D}if(p==="pixel"){var z=e[T];e[T]=w(e[T],!0),$2.coercePosition(t,M,i,x,T,.25),t[T]=k(t[T]),e[T]=z}}u&&IM.noneOrAll(e,t,["x0","x1","y0","y1"]);var O=l==="line",V,B;if(u&&(V=i("label.texttemplate")),V||(B=i("label.text")),B||V){i("label.textangle");var F=i("label.textposition",O?"middle":"middle center");i("label.xanchor"),i("label.yanchor",gdt(O,F)),i("label.padding"),IM.coerceFont(i,"label.font",r.font)}}}});var Sve=ne((fir,Mve)=>{"use strict";var mdt=_i(),Ave=Wt();function xdt(e,t){return e?"bottom":t.indexOf("top")!==-1?"top":t.indexOf("bottom")!==-1?"bottom":"middle"}Mve.exports=function(t,r,i){i("newshape.visible"),i("newshape.name"),i("newshape.showlegend"),i("newshape.legend"),i("newshape.legendwidth"),i("newshape.legendgroup"),i("newshape.legendgrouptitle.text"),Ave.coerceFont(i,"newshape.legendgrouptitle.font"),i("newshape.legendrank"),i("newshape.drawdirection"),i("newshape.layer"),i("newshape.fillcolor"),i("newshape.fillrule"),i("newshape.opacity");var n=i("newshape.line.width");if(n){var a=(t||{}).plot_bgcolor||"#FFF";i("newshape.line.color",mdt.contrast(a)),i("newshape.line.dash")}var o=t.dragmode==="drawline",s=i("newshape.label.text"),l=i("newshape.label.texttemplate");if(s||l){i("newshape.label.textangle");var u=i("newshape.label.textposition",o?"middle":"middle center");i("newshape.label.xanchor"),i("newshape.label.yanchor",xdt(o,u)),i("newshape.label.padding"),Ave.coerceFont(i,"newshape.label.font",r.font)}i("activeshape.fillcolor"),i("activeshape.opacity")}});var Pve=ne((cir,Lve)=>{"use strict";var RB=Wt(),ew=Xi(),tw=VA(),kve=ym();Lve.exports=function(t){var r=t._fullLayout,i=RB.filterVisible(r.shapes);if(!(!i.length||!t._fullData.length))for(var n=0;n<i.length;n++){var a=i[n];a._extremes={};var o,s,l=ew.getRefType(a.xref),u=ew.getRefType(a.yref);if(a.xref!=="paper"&&l!=="domain"){var f=a.xsizemode==="pixel"?a.xanchor:a.x0,c=a.xsizemode==="pixel"?a.xanchor:a.x1;o=ew.getFromId(t,a.xref),s=Eve(o,f,c,a.path,tw.paramIsX),s&&(a._extremes[o._id]=ew.findExtremes(o,s,_dt(a)))}if(a.yref!=="paper"&&u!=="domain"){var h=a.ysizemode==="pixel"?a.yanchor:a.y0,v=a.ysizemode==="pixel"?a.yanchor:a.y1;o=ew.getFromId(t,a.yref),s=Eve(o,h,v,a.path,tw.paramIsY),s&&(a._extremes[o._id]=ew.findExtremes(o,s,bdt(a)))}}};function _dt(e){return Cve(e.line.width,e.xsizemode,e.x0,e.x1,e.path,!1)}function bdt(e){return Cve(e.line.width,e.ysizemode,e.y0,e.y1,e.path,!0)}function Cve(e,t,r,i,n,a){var o=e/2,s=a;if(t==="pixel"){var l=n?kve.extractPathCoords(n,a?tw.paramIsY:tw.paramIsX):[r,i],u=RB.aggNums(Math.max,null,l),f=RB.aggNums(Math.min,null,l),c=f<0?Math.abs(f)+o:o,h=u>0?u+o:o;return{ppad:o,ppadplus:s?c:h,ppadminus:s?h:c}}else return{ppad:o}}function Eve(e,t,r,i,n){var a=e.type==="category"||e.type==="multicategory"?e.r2c:e.d2c;if(t!==void 0)return[a(t),a(r)];if(i){var o=1/0,s=-1/0,l=i.match(tw.segmentRE),u,f,c,h,v;for(e.type==="date"&&(a=kve.decodeDate(a)),u=0;u<l.length;u++)f=l[u],c=n[f.charAt(0)].drawn,c!==void 0&&(h=l[u].substr(1).match(tw.paramRE),!(!h||h.length<c)&&(v=a(h[c]),v<o&&(o=v),v>s&&(s=v)));if(s>=o)return[o,s]}}});var Ive=ne((hir,Dve)=>{"use strict";var Rve=x4();Dve.exports={moduleType:"component",name:"shapes",layoutAttributes:PB(),supplyLayoutDefaults:Tve(),supplyDrawNewShapeDefaults:Sve(),includeBasePlot:uM()("shapes"),calcAutorange:Pve(),draw:Rve.draw,drawOne:Rve.drawOne}});var DB=ne((dir,qve)=>{"use strict";var Fve=wf(),wdt=So().templatedArray,vir=lM();qve.exports=wdt("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",Fve.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",Fve.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})});var Ove=ne((pir,zve)=>{"use strict";var Tdt=Wt(),IB=Xi(),Adt=ch(),Mdt=DB(),Sdt="images";zve.exports=function(t,r){var i={name:Sdt,handleItemDefaults:Edt};Adt(t,r,i)};function Edt(e,t,r){function i(h,v){return Tdt.coerce(e,t,Mdt,h,v)}var n=i("source"),a=i("visible",!!n);if(!a)return t;i("layer"),i("xanchor"),i("yanchor"),i("sizex"),i("sizey"),i("sizing"),i("opacity");for(var o={_fullLayout:r},s=["x","y"],l=0;l<2;l++){var u=s[l],f=IB.coerceRef(e,t,o,u,"paper",void 0);if(f!=="paper"){var c=IB.getFromId(o,f);c._imgIndices.push(t._index)}IB.coercePosition(t,o,i,f,u,0)}return t}});var Vve=ne((gir,Uve)=>{"use strict";var Bve=Ai(),kdt=aa(),rw=Xi(),Nve=zl(),Cdt=kd();Uve.exports=function(t){var r=t._fullLayout,i=[],n={},a=[],o,s;for(s=0;s<r.images.length;s++){var l=r.images[s];if(l.visible)if(l.layer==="below"&&l.xref!=="paper"&&l.yref!=="paper"){o=Nve.ref2id(l.xref)+Nve.ref2id(l.yref);var u=r._plots[o];if(!u){a.push(l);continue}u.mainplot&&(o=u.mainplot.id),n[o]||(n[o]=[]),n[o].push(l)}else l.layer==="above"?i.push(l):a.push(l)}var f={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function c(M){var b=Bve.select(this);if(this._imgSrc!==M.source)if(b.attr("xmlns",Cdt.svg),M.source&&M.source.slice(0,5)==="data:")b.attr("xlink:href",M.source),this._imgSrc=M.source;else{var w=new Promise(function(k){var x=new Image;this.img=x,x.setAttribute("crossOrigin","anonymous"),x.onerror=E,x.onload=function(){var S=document.createElement("canvas");S.width=this.width,S.height=this.height;var g=S.getContext("2d",{willReadFrequently:!0});g.drawImage(this,0,0);var C=S.toDataURL("image/png");b.attr("xlink:href",C),k()},b.on("error",E),x.src=M.source,this._imgSrc=M.source;function E(){b.remove(),k()}}.bind(this));t._promises.push(w)}}function h(M){var b=Bve.select(this),w=rw.getFromId(t,M.xref),k=rw.getFromId(t,M.yref),x=rw.getRefType(M.xref)==="domain",E=rw.getRefType(M.yref)==="domain",S=r._size,g,C;w!==void 0?g=typeof M.xref=="string"&&x?w._length*M.sizex:Math.abs(w.l2p(M.sizex)-w.l2p(0)):g=M.sizex*S.w,k!==void 0?C=typeof M.yref=="string"&&E?k._length*M.sizey:Math.abs(k.l2p(M.sizey)-k.l2p(0)):C=M.sizey*S.h;var A=g*f.x[M.xanchor].offset,P=C*f.y[M.yanchor].offset,D=f.x[M.xanchor].sizing+f.y[M.yanchor].sizing,z,O;switch(w!==void 0?z=typeof M.xref=="string"&&x?w._length*M.x+w._offset:w.r2p(M.x)+w._offset:z=M.x*S.w+S.l,z+=A,k!==void 0?O=typeof M.yref=="string"&&E?k._length*(1-M.y)+k._offset:k.r2p(M.y)+k._offset:O=S.h-M.y*S.h+S.t,O+=P,M.sizing){case"fill":D+=" slice";break;case"stretch":D="none";break}b.attr({x:z,y:O,width:g,height:C,preserveAspectRatio:D,opacity:M.opacity});var V=w&&rw.getRefType(M.xref)!=="domain"?w._id:"",B=k&&rw.getRefType(M.yref)!=="domain"?k._id:"",F=V+B;kdt.setClipUrl(b,F?"clip"+r._uid+F:null,t)}var v=r._imageLowerLayer.selectAll("image").data(a),d=r._imageUpperLayer.selectAll("image").data(i);v.enter().append("image"),d.enter().append("image"),v.exit().remove(),d.exit().remove(),v.each(function(M){c.bind(this)(M),h.bind(this)(M)}),d.each(function(M){c.bind(this)(M),h.bind(this)(M)});var _=Object.keys(r._plots);for(s=0;s<_.length;s++){o=_[s];var T=r._plots[o];if(T.imagelayer){var p=T.imagelayer.selectAll("image").data(n[o]||[]);p.enter().append("image"),p.exit().remove(),p.each(function(M){c.bind(this)(M),h.bind(this)(M)})}}}});var Yve=ne((yir,Gve)=>{"use strict";var Hve=la(),Ldt=kk();Gve.exports=function(t,r,i,n){r=r||{};var a=i==="log"&&r.type==="linear",o=i==="linear"&&r.type==="log";if(a||o){for(var s=t._fullLayout.images,l=r._id.charAt(0),u,f,c=0;c<s.length;c++)if(u=s[c],f="images["+c+"].",u[l+"ref"]===r._id){var h=u[l],v=u["size"+l],d=null,_=null;if(a){d=Ldt(h,r.range);var T=v/Math.pow(10,d)/2;_=2*Math.log(T+Math.sqrt(1+T*T))/Math.LN10}else d=Math.pow(10,h),_=d*(Math.pow(10,v/2)-Math.pow(10,-v/2));Hve(d)?Hve(_)||(_=null):(d=null,_=null),n(f+l,d),n(f+"size"+l,_)}}}});var Xve=ne((mir,Wve)=>{"use strict";Wve.exports={moduleType:"component",name:"images",layoutAttributes:DB(),supplyLayoutDefaults:Ove(),includeBasePlot:uM()("images"),draw:Vve(),convertCoords:Yve()}});var EL=ne((xir,Zve)=>{"use strict";Zve.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}});var FB=ne((_ir,Kve)=>{"use strict";var Pdt=ll(),Rdt=Ku(),Ddt=oa().extendFlat,Idt=Xs().overrideAll,Fdt=Hk(),jve=So().templatedArray,qdt=jve("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});Kve.exports=Idt(jve("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:qdt,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:Ddt(Fdt({editType:"arraydraw"}),{}),font:Pdt({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:Rdt.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")});var ede=ne((bir,$ve)=>{"use strict";var kL=Wt(),Jve=ch(),Qve=FB(),zdt=EL(),Odt=zdt.name,Bdt=Qve.buttons;$ve.exports=function(t,r){var i={name:Odt,handleItemDefaults:Ndt};Jve(t,r,i)};function Ndt(e,t,r){function i(o,s){return kL.coerce(e,t,Qve,o,s)}var n=Jve(e,t,{name:"buttons",handleItemDefaults:Udt}),a=i("visible",n.length>0);a&&(i("active"),i("direction"),i("type"),i("showactive"),i("x"),i("y"),kL.noneOrAll(e,t,["x","y"]),i("xanchor"),i("yanchor"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),kL.coerceFont(i,"font",r.font),i("bgcolor",r.paper_bgcolor),i("bordercolor"),i("borderwidth"))}function Udt(e,t){function r(n,a){return kL.coerce(e,t,Bdt,n,a)}var i=r("visible",e.method==="skip"||Array.isArray(e.args));i&&(r("method"),r("args"),r("args2"),r("label"),r("execute"))}});var nde=ne((wir,rde)=>{"use strict";rde.exports=Bl;var h0=Ai(),tde=_i(),nw=aa(),CL=Wt();function Bl(e,t,r){this.gd=e,this.container=t,this.id=r,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}Bl.barWidth=2;Bl.barLength=20;Bl.barRadius=2;Bl.barPad=1;Bl.barColor="#808BA4";Bl.prototype.enable=function(t,r,i){var n=this.gd._fullLayout,a=n.width,o=n.height;this.position=t;var s=this.position.l,l=this.position.w,u=this.position.t,f=this.position.h,c=this.position.direction,h=c==="down",v=c==="left",d=c==="right",_=c==="up",T=l,p=f,M,b,w,k;!h&&!v&&!d&&!_&&(this.position.direction="down",h=!0);var x=h||_;x?(M=s,b=M+T,h?(w=u,k=Math.min(w+p,o),p=k-w):(k=u+p,w=Math.max(k-p,0),p=k-w)):(w=u,k=w+p,v?(b=s+T,M=Math.max(b-T,0),T=b-M):(M=s,b=Math.min(M+T,a),T=b-M)),this._box={l:M,t:w,w:T,h:p};var E=l>T,S=Bl.barLength+2*Bl.barPad,g=Bl.barWidth+2*Bl.barPad,C=s,A=u+f;A+g>o&&(A=o-g);var P=this.container.selectAll("rect.scrollbar-horizontal").data(E?[0]:[]);P.exit().on(".drag",null).remove(),P.enter().append("rect").classed("scrollbar-horizontal",!0).call(tde.fill,Bl.barColor),E?(this.hbar=P.attr({rx:Bl.barRadius,ry:Bl.barRadius,x:C,y:A,width:S,height:g}),this._hbarXMin=C+S/2,this._hbarTranslateMax=T-S):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var D=f>p,z=Bl.barWidth+2*Bl.barPad,O=Bl.barLength+2*Bl.barPad,V=s+l,B=u;V+z>a&&(V=a-z);var F=this.container.selectAll("rect.scrollbar-vertical").data(D?[0]:[]);F.exit().on(".drag",null).remove(),F.enter().append("rect").classed("scrollbar-vertical",!0).call(tde.fill,Bl.barColor),D?(this.vbar=F.attr({rx:Bl.barRadius,ry:Bl.barRadius,x:V,y:B,width:z,height:O}),this._vbarYMin=B+O/2,this._vbarTranslateMax=p-O):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var N=this.id,Z=M-.5,J=D?b+z+.5:b+.5,re=w-.5,ue=E?k+g+.5:k+.5,fe=n._topdefs.selectAll("#"+N).data(E||D?[0]:[]);if(fe.exit().remove(),fe.enter().append("clipPath").attr("id",N).append("rect"),E||D?(this._clipRect=fe.select("rect").attr({x:Math.floor(Z),y:Math.floor(re),width:Math.ceil(J)-Math.floor(Z),height:Math.ceil(ue)-Math.floor(re)}),this.container.call(nw.setClipUrl,N,this.gd),this.bg.attr({x:s,y:u,width:l,height:f})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(nw.setClipUrl,null),delete this._clipRect),E||D){var K=h0.behavior.drag().on("dragstart",function(){h0.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(K);var X=h0.behavior.drag().on("dragstart",function(){h0.event.sourceEvent.preventDefault(),h0.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));E&&this.hbar.on(".drag",null).call(X),D&&this.vbar.on(".drag",null).call(X)}this.setTranslate(r,i)};Bl.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(nw.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)};Bl.prototype._onBoxDrag=function(){var t=this.translateX,r=this.translateY;this.hbar&&(t-=h0.event.dx),this.vbar&&(r-=h0.event.dy),this.setTranslate(t,r)};Bl.prototype._onBoxWheel=function(){var t=this.translateX,r=this.translateY;this.hbar&&(t+=h0.event.deltaY),this.vbar&&(r+=h0.event.deltaY),this.setTranslate(t,r)};Bl.prototype._onBarDrag=function(){var t=this.translateX,r=this.translateY;if(this.hbar){var i=t+this._hbarXMin,n=i+this._hbarTranslateMax,a=CL.constrain(h0.event.x,i,n),o=(a-i)/(n-i),s=this.position.w-this._box.w;t=o*s}if(this.vbar){var l=r+this._vbarYMin,u=l+this._vbarTranslateMax,f=CL.constrain(h0.event.y,l,u),c=(f-l)/(u-l),h=this.position.h-this._box.h;r=c*h}this.setTranslate(t,r)};Bl.prototype.setTranslate=function(t,r){var i=this.position.w-this._box.w,n=this.position.h-this._box.h;if(t=CL.constrain(t||0,0,i),r=CL.constrain(r||0,0,n),this.translateX=t,this.translateY=r,this.container.call(nw.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-r),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+r-.5)}),this.hbar){var a=t/i;this.hbar.call(nw.setTranslate,t+a*this._hbarTranslateMax,r)}if(this.vbar){var o=r/n;this.vbar.call(nw.setTranslate,t,r+o*this._vbarTranslateMax)}}});var vde=ne((Tir,hde)=>{"use strict";var iw=Ai(),FM=Zs(),qM=_i(),aw=aa(),Dd=Wt(),LL=Es(),Vdt=So().arrayEditor,ade=Tf().LINE_SPACING,ka=EL(),Hdt=nde();hde.exports=function(t){var r=t._fullLayout,i=Dd.filterVisible(r[ka.name]);function n(h){FM.autoMargin(t,fde(h))}var a=r._menulayer.selectAll("g."+ka.containerClassName).data(i.length>0?[0]:[]);if(a.enter().append("g").classed(ka.containerClassName,!0).style("cursor","pointer"),a.exit().each(function(){iw.select(this).selectAll("g."+ka.headerGroupClassName).each(n)}).remove(),i.length!==0){var o=a.selectAll("g."+ka.headerGroupClassName).data(i,Gdt);o.enter().append("g").classed(ka.headerGroupClassName,!0);for(var s=Dd.ensureSingle(a,"g",ka.dropdownButtonGroupClassName,function(h){h.style("pointer-events","all")}),l=0;l<i.length;l++){var u=i[l];Kdt(t,u)}var f="updatemenus"+r._uid,c=new Hdt(t,s,f);o.enter().size()&&(s.node().parentNode.appendChild(s.node()),s.call(zB)),o.exit().each(function(h){s.call(zB),n(h)}).remove(),o.each(function(h){var v=iw.select(this),d=h.type==="dropdown"?s:null;FM.manageCommandObserver(t,h,h.buttons,function(_){qB(t,h,h.buttons[_.index],v,d,c,_.index,!0)}),h.type==="dropdown"?(sde(t,v,s,c,h),ode(s,h)&&zM(t,v,s,c,h)):zM(t,v,null,null,h)})}};function Gdt(e){return e._index}function Ydt(e){return+e.attr(ka.menuIndexAttrName)==-1}function ode(e,t){return+e.attr(ka.menuIndexAttrName)===t._index}function qB(e,t,r,i,n,a,o,s){t.active=o,Vdt(e.layout,ka.name,t).applyUpdate("active",o),t.type==="buttons"?zM(e,i,null,null,t):t.type==="dropdown"&&(n.attr(ka.menuIndexAttrName,"-1"),sde(e,i,n,a,t),s||zM(e,i,n,a,t))}function sde(e,t,r,i,n){var a=Dd.ensureSingle(t,"g",ka.headerClassName,function(h){h.style("pointer-events","all")}),o=n._dims,s=n.active,l=n.buttons[s]||ka.blankHeaderOpts,u={y:n.pad.t,yPad:0,x:n.pad.l,xPad:0,index:0},f={width:o.headerWidth,height:o.headerHeight};a.call(OB,n,l,e).call(cde,n,u,f);var c=Dd.ensureSingle(t,"text",ka.headerArrowClassName,function(h){h.attr("text-anchor","end").call(aw.font,n.font).text(ka.arrowSymbol[n.direction])});c.attr({x:o.headerWidth-ka.arrowOffsetX+n.pad.l,y:o.headerHeight/2+ka.textOffsetY+n.pad.t}),a.on("click",function(){r.call(zB,String(ode(r,n)?-1:n._index)),zM(e,t,r,i,n)}),a.on("mouseover",function(){a.call(lde)}),a.on("mouseout",function(){a.call(ude,n)}),aw.setTranslate(t,o.lx,o.ly)}function zM(e,t,r,i,n){r||(r=t,r.attr("pointer-events","all"));var a=!Ydt(r)||n.type==="buttons"?n.buttons:[],o=n.type==="dropdown"?ka.dropdownButtonClassName:ka.buttonClassName,s=r.selectAll("g."+o).data(Dd.filterVisible(a)),l=s.enter().append("g").classed(o,!0),u=s.exit();n.type==="dropdown"?(l.attr("opacity","0").transition().attr("opacity","1"),u.transition().attr("opacity","0").remove()):u.remove();var f=0,c=0,h=n._dims,v=["up","down"].indexOf(n.direction)!==-1;n.type==="dropdown"&&(v?c=h.headerHeight+ka.gapButtonHeader:f=h.headerWidth+ka.gapButtonHeader),n.type==="dropdown"&&n.direction==="up"&&(c=-ka.gapButtonHeader+ka.gapButton-h.openHeight),n.type==="dropdown"&&n.direction==="left"&&(f=-ka.gapButtonHeader+ka.gapButton-h.openWidth);var d={x:h.lx+f+n.pad.l,y:h.ly+c+n.pad.t,yPad:ka.gapButton,xPad:ka.gapButton,index:0},_={l:d.x+n.borderwidth,t:d.y+n.borderwidth};s.each(function(T,p){var M=iw.select(this);M.call(OB,n,T,e).call(cde,n,d),M.on("click",function(){iw.event.defaultPrevented||(T.execute&&(T.args2&&n.active===p?(qB(e,n,T,t,r,i,-1),FM.executeAPICommand(e,T.method,T.args2)):(qB(e,n,T,t,r,i,p),FM.executeAPICommand(e,T.method,T.args))),e.emit("plotly_buttonclicked",{menu:n,button:T,active:n.active}))}),M.on("mouseover",function(){M.call(lde)}),M.on("mouseout",function(){M.call(ude,n),s.call(ide,n)})}),s.call(ide,n),v?(_.w=Math.max(h.openWidth,h.headerWidth),_.h=d.y-_.t):(_.w=d.x-_.l,_.h=Math.max(h.openHeight,h.headerHeight)),_.direction=n.direction,i&&(s.size()?Wdt(e,t,r,i,n,_):Xdt(i))}function Wdt(e,t,r,i,n,a){var o=n.direction,s=o==="up"||o==="down",l=n._dims,u=n.active,f,c,h;if(s)for(c=0,h=0;h<u;h++)c+=l.heights[h]+ka.gapButton;else for(f=0,h=0;h<u;h++)f+=l.widths[h]+ka.gapButton;i.enable(a,f,c),i.hbar&&i.hbar.attr("opacity","0").transition().attr("opacity","1"),i.vbar&&i.vbar.attr("opacity","0").transition().attr("opacity","1")}function Xdt(e){var t=!!e.hbar,r=!!e.vbar;t&&e.hbar.transition().attr("opacity","0").each("end",function(){t=!1,r||e.disable()}),r&&e.vbar.transition().attr("opacity","0").each("end",function(){r=!1,t||e.disable()})}function OB(e,t,r,i){e.call(Zdt,t).call(jdt,t,r,i)}function Zdt(e,t){var r=Dd.ensureSingle(e,"rect",ka.itemRectClassName,function(i){i.attr({rx:ka.rx,ry:ka.ry,"shape-rendering":"crispEdges"})});r.call(qM.stroke,t.bordercolor).call(qM.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function jdt(e,t,r,i){var n=Dd.ensureSingle(e,"text",ka.itemTextClassName,function(s){s.attr({"text-anchor":"start","data-notex":1})}),a=r.label,o=i._fullLayout._meta;o&&(a=Dd.templateString(a,o)),n.call(aw.font,t.font).text(a).call(LL.convertToTspans,i)}function ide(e,t){var r=t.active;e.each(function(i,n){var a=iw.select(this);n===r&&t.showactive&&a.select("rect."+ka.itemRectClassName).call(qM.fill,ka.activeColor)})}function lde(e){e.select("rect."+ka.itemRectClassName).call(qM.fill,ka.hoverColor)}function ude(e,t){e.select("rect."+ka.itemRectClassName).call(qM.fill,t.bgcolor)}function Kdt(e,t){var r=t._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},i=aw.tester.selectAll("g."+ka.dropdownButtonClassName).data(Dd.filterVisible(t.buttons));i.enter().append("g").classed(ka.dropdownButtonClassName,!0);var n=["up","down"].indexOf(t.direction)!==-1;i.each(function(f,c){var h=iw.select(this);h.call(OB,t,f,e);var v=h.select("."+ka.itemTextClassName),d=v.node()&&aw.bBox(v.node()).width,_=Math.max(d+ka.textPadX,ka.minWidth),T=t.font.size*ade,p=LL.lineCount(v),M=Math.max(T*p,ka.minHeight)+ka.textOffsetY;M=Math.ceil(M),_=Math.ceil(_),r.widths[c]=_,r.heights[c]=M,r.height1=Math.max(r.height1,M),r.width1=Math.max(r.width1,_),n?(r.totalWidth=Math.max(r.totalWidth,_),r.openWidth=r.totalWidth,r.totalHeight+=M+ka.gapButton,r.openHeight+=M+ka.gapButton):(r.totalWidth+=_+ka.gapButton,r.openWidth+=_+ka.gapButton,r.totalHeight=Math.max(r.totalHeight,M),r.openHeight=r.totalHeight)}),n?r.totalHeight-=ka.gapButton:r.totalWidth-=ka.gapButton,r.headerWidth=r.width1+ka.arrowPadX,r.headerHeight=r.height1,t.type==="dropdown"&&(n?(r.width1+=ka.arrowPadX,r.totalHeight=r.height1):r.totalWidth=r.width1,r.totalWidth+=ka.arrowPadX),i.remove();var a=r.totalWidth+t.pad.l+t.pad.r,o=r.totalHeight+t.pad.t+t.pad.b,s=e._fullLayout._size;r.lx=s.l+s.w*t.x,r.ly=s.t+s.h*(1-t.y);var l="left";Dd.isRightAnchor(t)&&(r.lx-=a,l="right"),Dd.isCenterAnchor(t)&&(r.lx-=a/2,l="center");var u="top";Dd.isBottomAnchor(t)&&(r.ly-=o,u="bottom"),Dd.isMiddleAnchor(t)&&(r.ly-=o/2,u="middle"),r.totalWidth=Math.ceil(r.totalWidth),r.totalHeight=Math.ceil(r.totalHeight),r.lx=Math.round(r.lx),r.ly=Math.round(r.ly),FM.autoMargin(e,fde(t),{x:t.x,y:t.y,l:a*({right:1,center:.5}[l]||0),r:a*({left:1,center:.5}[l]||0),b:o*({top:1,middle:.5}[u]||0),t:o*({bottom:1,middle:.5}[u]||0)})}function fde(e){return ka.autoMarginIdRoot+e._index}function cde(e,t,r,i){i=i||{};var n=e.select("."+ka.itemRectClassName),a=e.select("."+ka.itemTextClassName),o=t.borderwidth,s=r.index,l=t._dims;aw.setTranslate(e,o+r.x,o+r.y);var u=["up","down"].indexOf(t.direction)!==-1,f=i.height||(u?l.heights[s]:l.height1);n.attr({x:0,y:0,width:i.width||(u?l.width1:l.widths[s]),height:f});var c=t.font.size*ade,h=LL.lineCount(a),v=(h-1)*c/2;LL.positionText(a,ka.textOffsetX,f/2-v+ka.textOffsetY),u?r.y+=l.heights[s]+r.yPad:r.x+=l.widths[s]+r.xPad,r.index++}function zB(e,t){e.attr(ka.menuIndexAttrName,t||"-1").selectAll("g."+ka.dropdownButtonClassName).remove()}});var pde=ne((Air,dde)=>{"use strict";var Jdt=EL();dde.exports={moduleType:"component",name:Jdt.name,layoutAttributes:FB(),supplyLayoutDefaults:ede(),draw:vde()}});var OM=ne((Mir,gde)=>{"use strict";gde.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}});var BB=ne((Sir,xde)=>{"use strict";var yde=ll(),Qdt=Hk(),$dt=oa().extendDeepAll,ept=Xs().overrideAll,tpt=cA(),mde=So().templatedArray,Bx=OM(),rpt=mde("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});xde.exports=ept(mde("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:rpt,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:$dt(Qdt({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:tpt.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:yde({})},font:yde({}),activebgcolor:{valType:"color",dflt:Bx.gripBgActiveColor},bgcolor:{valType:"color",dflt:Bx.railBgColor},bordercolor:{valType:"color",dflt:Bx.railBorderColor},borderwidth:{valType:"number",min:0,dflt:Bx.railBorderWidth},ticklen:{valType:"number",min:0,dflt:Bx.tickLength},tickcolor:{valType:"color",dflt:Bx.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:Bx.minorTickLength}}),"arraydraw","from-root")});var Tde=ne((Eir,wde)=>{"use strict";var ow=Wt(),_de=ch(),bde=BB(),npt=OM(),ipt=npt.name,apt=bde.steps;wde.exports=function(t,r){_de(t,r,{name:ipt,handleItemDefaults:opt})};function opt(e,t,r){function i(c,h){return ow.coerce(e,t,bde,c,h)}for(var n=_de(e,t,{name:"steps",handleItemDefaults:spt}),a=0,o=0;o<n.length;o++)n[o].visible&&a++;var s;if(a<2?s=t.visible=!1:s=i("visible"),!!s){t._stepCount=a;var l=t._visibleSteps=ow.filterVisible(n),u=i("active");(n[u]||{}).visible||(t.active=l[0]._index),i("x"),i("y"),ow.noneOrAll(e,t,["x","y"]),i("xanchor"),i("yanchor"),i("len"),i("lenmode"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),ow.coerceFont(i,"font",r.font);var f=i("currentvalue.visible");f&&(i("currentvalue.xanchor"),i("currentvalue.prefix"),i("currentvalue.suffix"),i("currentvalue.offset"),ow.coerceFont(i,"currentvalue.font",t.font)),i("transition.duration"),i("transition.easing"),i("bgcolor"),i("activebgcolor"),i("bordercolor"),i("borderwidth"),i("ticklen"),i("tickwidth"),i("tickcolor"),i("minorticklen")}}function spt(e,t){function r(a,o){return ow.coerce(e,t,apt,a,o)}var i;if(e.method!=="skip"&&!Array.isArray(e.args)?i=t.visible=!1:i=r("visible"),i){r("method"),r("args");var n=r("label","step-"+t._index);r("value",n),r("execute")}}});var Dde=ne((kir,Rde)=>{"use strict";var v0=Ai(),PL=Zs(),Em=_i(),d0=aa(),Id=Wt(),lpt=Id.strTranslate,BM=Es(),upt=So().arrayEditor,ao=OM(),VB=Tf(),Sde=VB.LINE_SPACING,NB=VB.FROM_TL,UB=VB.FROM_BR;Rde.exports=function(t){var r=t._context.staticPlot,i=t._fullLayout,n=fpt(i,t),a=i._infolayer.selectAll("g."+ao.containerClassName).data(n.length>0?[0]:[]);a.enter().append("g").classed(ao.containerClassName,!0).style("cursor",r?null:"ew-resize");function o(f){f._commandObserver&&(f._commandObserver.remove(),delete f._commandObserver),PL.autoMargin(t,Ede(f))}if(a.exit().each(function(){v0.select(this).selectAll("g."+ao.groupClassName).each(o)}).remove(),n.length!==0){var s=a.selectAll("g."+ao.groupClassName).data(n,cpt);s.enter().append("g").classed(ao.groupClassName,!0),s.exit().each(o).remove();for(var l=0;l<n.length;l++){var u=n[l];hpt(t,u)}s.each(function(f){var c=v0.select(this);ypt(f),PL.manageCommandObserver(t,f,f._visibleSteps,function(h){var v=c.data()[0];v.active!==h.index&&(v._dragging||Cde(t,c,v,h.index,!1,!0))}),vpt(t,v0.select(this),f)})}};function Ede(e){return ao.autoMarginIdRoot+e._index}function fpt(e,t){for(var r=e[ao.name],i=[],n=0;n<r.length;n++){var a=r[n];a.visible&&(a._gd=t,i.push(a))}return i}function cpt(e){return e._index}function hpt(e,t){var r=d0.tester.selectAll("g."+ao.labelGroupClass).data(t._visibleSteps);r.enter().append("g").classed(ao.labelGroupClass,!0);var i=0,n=0;r.each(function(d){var _=v0.select(this),T=kde(_,{step:d},t),p=T.node();if(p){var M=d0.bBox(p);n=Math.max(n,M.height),i=Math.max(i,M.width)}}),r.remove();var a=t._dims={};a.inputAreaWidth=Math.max(ao.railWidth,ao.gripHeight);var o=e._fullLayout._size;a.lx=o.l+o.w*t.x,a.ly=o.t+o.h*(1-t.y),t.lenmode==="fraction"?a.outerLength=Math.round(o.w*t.len):a.outerLength=t.len,a.inputAreaStart=0,a.inputAreaLength=Math.round(a.outerLength-t.pad.l-t.pad.r);var s=a.inputAreaLength-2*ao.stepInset,l=s/(t._stepCount-1),u=i+ao.labelPadding;if(a.labelStride=Math.max(1,Math.ceil(u/l)),a.labelHeight=n,a.currentValueMaxWidth=0,a.currentValueHeight=0,a.currentValueTotalHeight=0,a.currentValueMaxLines=1,t.currentvalue.visible){var f=d0.tester.append("g");r.each(function(d){var _=RL(f,t,d.label),T=_.node()&&d0.bBox(_.node())||{width:0,height:0},p=BM.lineCount(_);a.currentValueMaxWidth=Math.max(a.currentValueMaxWidth,Math.ceil(T.width)),a.currentValueHeight=Math.max(a.currentValueHeight,Math.ceil(T.height)),a.currentValueMaxLines=Math.max(a.currentValueMaxLines,p)}),a.currentValueTotalHeight=a.currentValueHeight+t.currentvalue.offset,f.remove()}a.height=a.currentValueTotalHeight+ao.tickOffset+t.ticklen+ao.labelOffset+a.labelHeight+t.pad.t+t.pad.b;var c="left";Id.isRightAnchor(t)&&(a.lx-=a.outerLength,c="right"),Id.isCenterAnchor(t)&&(a.lx-=a.outerLength/2,c="center");var h="top";Id.isBottomAnchor(t)&&(a.ly-=a.height,h="bottom"),Id.isMiddleAnchor(t)&&(a.ly-=a.height/2,h="middle"),a.outerLength=Math.ceil(a.outerLength),a.height=Math.ceil(a.height),a.lx=Math.round(a.lx),a.ly=Math.round(a.ly);var v={y:t.y,b:a.height*UB[h],t:a.height*NB[h]};t.lenmode==="fraction"?(v.l=0,v.xl=t.x-t.len*NB[c],v.r=0,v.xr=t.x+t.len*UB[c]):(v.x=t.x,v.l=a.outerLength*NB[c],v.r=a.outerLength*UB[c]),PL.autoMargin(e,Ede(t),v)}function vpt(e,t,r){(r.steps[r.active]||{}).visible||(r.active=r._visibleSteps[0]._index),t.call(RL,r).call(xpt,r).call(ppt,r).call(gpt,r).call(mpt,e,r).call(dpt,e,r);var i=r._dims;d0.setTranslate(t,i.lx+r.pad.l,i.ly+r.pad.t),t.call(Pde,r,!1),t.call(RL,r)}function RL(e,t,r){if(t.currentvalue.visible){var i=t._dims,n,a;switch(t.currentvalue.xanchor){case"right":n=i.inputAreaLength-ao.currentValueInset-i.currentValueMaxWidth,a="left";break;case"center":n=i.inputAreaLength*.5,a="middle";break;default:n=ao.currentValueInset,a="left"}var o=Id.ensureSingle(e,"text",ao.labelClass,function(h){h.attr({"text-anchor":a,"data-notex":1})}),s=t.currentvalue.prefix?t.currentvalue.prefix:"";if(typeof r=="string")s+=r;else{var l=t.steps[t.active].label,u=t._gd._fullLayout._meta;u&&(l=Id.templateString(l,u)),s+=l}t.currentvalue.suffix&&(s+=t.currentvalue.suffix),o.call(d0.font,t.currentvalue.font).text(s).call(BM.convertToTspans,t._gd);var f=BM.lineCount(o),c=(i.currentValueMaxLines+1-f)*t.currentvalue.font.size*Sde;return BM.positionText(o,n,c),o}}function dpt(e,t,r){var i=Id.ensureSingle(e,"rect",ao.gripRectClass,function(n){n.call(Lde,t,e,r).style("pointer-events","all")});i.attr({width:ao.gripWidth,height:ao.gripHeight,rx:ao.gripRadius,ry:ao.gripRadius}).call(Em.stroke,r.bordercolor).call(Em.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px")}function kde(e,t,r){var i=Id.ensureSingle(e,"text",ao.labelClass,function(o){o.attr({"text-anchor":"middle","data-notex":1})}),n=t.step.label,a=r._gd._fullLayout._meta;return a&&(n=Id.templateString(n,a)),i.call(d0.font,r.font).text(n).call(BM.convertToTspans,r._gd),i}function ppt(e,t){var r=Id.ensureSingle(e,"g",ao.labelsClass),i=t._dims,n=r.selectAll("g."+ao.labelGroupClass).data(i.labelSteps);n.enter().append("g").classed(ao.labelGroupClass,!0),n.exit().remove(),n.each(function(a){var o=v0.select(this);o.call(kde,a,t),d0.setTranslate(o,HB(t,a.fraction),ao.tickOffset+t.ticklen+t.font.size*Sde+ao.labelOffset+i.currentValueTotalHeight)})}function Ade(e,t,r,i,n){var a=Math.round(i*(r._stepCount-1)),o=r._visibleSteps[a]._index;o!==r.active&&Cde(e,t,r,o,!0,n)}function Cde(e,t,r,i,n,a){var o=r.active;r.active=i,upt(e.layout,ao.name,r).applyUpdate("active",i);var s=r.steps[r.active];t.call(Pde,r,a),t.call(RL,r),e.emit("plotly_sliderchange",{slider:r,step:r.steps[r.active],interaction:n,previousActive:o}),s&&s.method&&n&&(t._nextMethod?(t._nextMethod.step=s,t._nextMethod.doCallback=n,t._nextMethod.doTransition=a):(t._nextMethod={step:s,doCallback:n,doTransition:a},t._nextMethodRaf=window.requestAnimationFrame(function(){var l=t._nextMethod.step;l.method&&(l.execute&&PL.executeAPICommand(e,l.method,l.args),t._nextMethod=null,t._nextMethodRaf=null)})))}function Lde(e,t,r){if(t._context.staticPlot)return;var i=r.node(),n=v0.select(t);function a(){return r.data()[0]}function o(){var s=a();t.emit("plotly_sliderstart",{slider:s});var l=r.select("."+ao.gripRectClass);v0.event.stopPropagation(),v0.event.preventDefault(),l.call(Em.fill,s.activebgcolor);var u=Mde(s,v0.mouse(i)[0]);Ade(t,r,s,u,!0),s._dragging=!0;function f(){var h=a(),v=Mde(h,v0.mouse(i)[0]);Ade(t,r,h,v,!1)}n.on("mousemove",f),n.on("touchmove",f);function c(){var h=a();h._dragging=!1,l.call(Em.fill,h.bgcolor),n.on("mouseup",null),n.on("mousemove",null),n.on("touchend",null),n.on("touchmove",null),t.emit("plotly_sliderend",{slider:h,step:h.steps[h.active]})}n.on("mouseup",c),n.on("touchend",c)}e.on("mousedown",o),e.on("touchstart",o)}function gpt(e,t){var r=e.selectAll("rect."+ao.tickRectClass).data(t._visibleSteps),i=t._dims;r.enter().append("rect").classed(ao.tickRectClass,!0),r.exit().remove(),r.attr({width:t.tickwidth+"px","shape-rendering":"crispEdges"}),r.each(function(n,a){var o=a%i.labelStride===0,s=v0.select(this);s.attr({height:o?t.ticklen:t.minorticklen}).call(Em.fill,t.tickcolor),d0.setTranslate(s,HB(t,a/(t._stepCount-1))-.5*t.tickwidth,(o?ao.tickOffset:ao.minorTickOffset)+i.currentValueTotalHeight)})}function ypt(e){var t=e._dims;t.labelSteps=[];for(var r=e._stepCount,i=0;i<r;i+=t.labelStride)t.labelSteps.push({fraction:i/(r-1),step:e._visibleSteps[i]})}function Pde(e,t,r){for(var i=e.select("rect."+ao.gripRectClass),n=0,a=0;a<t._stepCount;a++)if(t._visibleSteps[a]._index===t.active){n=a;break}var o=HB(t,n/(t._stepCount-1));if(!t._invokingCommand){var s=i;r&&t.transition.duration>0&&(s=s.transition().duration(t.transition.duration).ease(t.transition.easing)),s.attr("transform",lpt(o-ao.gripWidth*.5,t._dims.currentValueTotalHeight))}}function HB(e,t){var r=e._dims;return r.inputAreaStart+ao.stepInset+(r.inputAreaLength-2*ao.stepInset)*Math.min(1,Math.max(0,t))}function Mde(e,t){var r=e._dims;return Math.min(1,Math.max(0,(t-ao.stepInset-r.inputAreaStart)/(r.inputAreaLength-2*ao.stepInset-2*r.inputAreaStart)))}function mpt(e,t,r){var i=r._dims,n=Id.ensureSingle(e,"rect",ao.railTouchRectClass,function(a){a.call(Lde,t,e,r).style("pointer-events","all")});n.attr({width:i.inputAreaLength,height:Math.max(i.inputAreaWidth,ao.tickOffset+r.ticklen+i.labelHeight)}).call(Em.fill,r.bgcolor).attr("opacity",0),d0.setTranslate(n,0,i.currentValueTotalHeight)}function xpt(e,t){var r=t._dims,i=r.inputAreaLength-ao.railInset*2,n=Id.ensureSingle(e,"rect",ao.railRectClass);n.attr({width:i,height:ao.railWidth,rx:ao.railRadius,ry:ao.railRadius,"shape-rendering":"crispEdges"}).call(Em.stroke,t.bordercolor).call(Em.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px"),d0.setTranslate(n,ao.railInset,(r.inputAreaWidth-ao.railWidth)*.5+r.currentValueTotalHeight)}});var Fde=ne((Cir,Ide)=>{"use strict";var _pt=OM();Ide.exports={moduleType:"component",name:_pt.name,layoutAttributes:BB(),supplyLayoutDefaults:Tde(),draw:Dde()}});var DL=ne((Lir,zde)=>{"use strict";var qde=Ku();zde.exports={bgcolor:{valType:"color",dflt:qde.background,editType:"plot"},bordercolor:{valType:"color",dflt:qde.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}});var GB=ne((Pir,Ode)=>{"use strict";Ode.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}});var IL=ne((Rir,Bde)=>{"use strict";Bde.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}});var Vde=ne(qL=>{"use strict";var bpt=zl(),wpt=Es(),Nde=IL(),Tpt=Tf().LINE_SPACING,FL=Nde.name;function Ude(e){var t=e&&e[FL];return t&&t.visible}qL.isVisible=Ude;qL.makeData=function(e){var t=bpt.list({_fullLayout:e},"x",!0),r=e.margin,i=[];if(!e._has("gl2d"))for(var n=0;n<t.length;n++){var a=t[n];if(Ude(a)){i.push(a);var o=a[FL];o._id=FL+a._id,o._height=(e.height-r.b-r.t)*o.thickness,o._offsetShift=Math.floor(o.borderwidth/2)}}e._rangeSliderData=i};qL.autoMarginOpts=function(e,t){var r=e._fullLayout,i=t[FL],n=t._id.charAt(0),a=0,o=0;if(t.side==="bottom"&&(a=t._depth,t.title.text!==r._dfltTitle[n])){o=1.5*t.title.font.size+10+i._offsetShift;var s=(t.title.text.match(wpt.BR_TAG_ALL)||[]).length;o+=s*t.title.font.size*Tpt}return{x:0,y:t._counterDomainMin,l:0,r:0,t:0,b:i._height+a+Math.max(r.margin.b,o),pad:Nde.extraPad+i._offsetShift*2}}});var Wde=ne((Iir,Yde)=>{"use strict";var zL=Wt(),Hde=So(),Gde=zl(),Apt=DL(),Mpt=GB();Yde.exports=function(t,r,i){var n=t[i],a=r[i];if(!(n.rangeslider||r._requestRangeslider[a._id]))return;zL.isPlainObject(n.rangeslider)||(n.rangeslider={});var o=n.rangeslider,s=Hde.newContainer(a,"rangeslider");function l(k,x){return zL.coerce(o,s,Apt,k,x)}var u,f;function c(k,x){return zL.coerce(u,f,Mpt,k,x)}var h=l("visible");if(h){l("bgcolor",r.plot_bgcolor),l("bordercolor"),l("borderwidth"),l("thickness"),l("autorange",!a.isValidRange(o.range)),l("range");var v=r._subplots;if(v)for(var d=v.cartesian.filter(function(k){return k.substr(0,k.indexOf("y"))===Gde.name2id(i)}).map(function(k){return k.substr(k.indexOf("y"),k.length)}),_=zL.simpleMap(d,Gde.id2name),T=0;T<_.length;T++){var p=_[T];u=o[p]||{},f=Hde.newContainer(s,p,"yaxis");var M=r[p],b;u.range&&M.isValidRange(u.range)&&(b="fixed");var w=c("rangemode",b);w!=="match"&&c("range",M.range.slice())}s._input=o}}});var Zde=ne((Fir,Xde)=>{"use strict";var Spt=zl().list,Ept=Cd().getAutoRange,kpt=IL();Xde.exports=function(t){for(var r=Spt(t,"x",!0),i=0;i<r.length;i++){var n=r[i],a=n[kpt.name];a&&a.visible&&a.autorange&&(a._input.autorange=!0,a._input.range=a.range=Ept(t,n))}}});var Qde=ne((qir,Jde)=>{"use strict";var OL=Ai(),Cpt=wi(),Lpt=Zs(),du=Wt(),BL=du.strTranslate,Kde=aa(),km=_i(),Ppt=yx(),Rpt=vu(),YB=zl(),Dpt=Hh(),Ipt=e0(),yo=IL();Jde.exports=function(e){for(var t=e._fullLayout,r=t._rangeSliderData,i=0;i<r.length;i++){var n=r[i][yo.name];n._clipId=n._id+"-"+t._uid}function a(s){return s._name}var o=t._infolayer.selectAll("g."+yo.containerClassName).data(r,a);o.exit().each(function(s){var l=s[yo.name];t._topdefs.select("#"+l._clipId).remove()}).remove(),r.length!==0&&(o.enter().append("g").classed(yo.containerClassName,!0).attr("pointer-events","all"),o.each(function(s){var l=OL.select(this),u=s[yo.name],f=t[YB.id2name(s.anchor)],c=u[YB.id2name(s.anchor)];if(u.range){var h=du.simpleMap(u.range,s.r2l),v=du.simpleMap(s.range,s.r2l),d;v[0]<v[1]?d=[Math.min(h[0],v[0]),Math.max(h[1],v[1])]:d=[Math.max(h[0],v[0]),Math.min(h[1],v[1])],u.range=u._input.range=du.simpleMap(d,s.l2r)}s.cleanRange("rangeslider.range");var _=t._size,T=s.domain;u._width=_.w*(T[1]-T[0]);var p=Math.round(_.l+_.w*T[0]),M=Math.round(_.t+_.h*(1-s._counterDomainMin)+(s.side==="bottom"?s._depth:0)+u._offsetShift+yo.extraPad);l.attr("transform",BL(p,M)),u._rl=du.simpleMap(u.range,s.r2l);var b=u._rl[0],w=u._rl[1],k=w-b;if(u.p2d=function(O){return O/u._width*k+b},u.d2p=function(O){return(O-b)/k*u._width},s.rangebreaks){var x=s.locateBreaks(b,w);if(x.length){var E,S,g=0;for(E=0;E<x.length;E++)S=x[E],g+=S.max-S.min;var C=u._width/(w-b-g),A=[-C*b];for(E=0;E<x.length;E++)S=x[E],A.push(A[A.length-1]-C*(S.max-S.min));for(u.d2p=function(O){for(var V=A[0],B=0;B<x.length;B++){var F=x[B];if(O>=F.max)V=A[B+1];else if(O<F.min)break}return V+C*O},E=0;E<x.length;E++)S=x[E],S.pmin=u.d2p(S.min),S.pmax=u.d2p(S.max);u.p2d=function(O){for(var V=A[0],B=0;B<x.length;B++){var F=x[B];if(O>=F.pmax)V=A[B+1];else if(O<F.pmin)break}return(O-V)/C}}}if(c.rangemode!=="match"){var P=f.r2l(c.range[0]),D=f.r2l(c.range[1]),z=D-P;u.d2pOppAxis=function(O){return(O-P)/z*u._height}}l.call(Opt,e,s,u).call(Bpt,e,s,u).call(Npt,e,s,u).call(Vpt,e,s,u,c).call(Hpt,e,s,u).call(Gpt,e,s,u),Fpt(l,e,s,u),zpt(l,e,s,u,f,c),s.side==="bottom"&&Ppt.draw(e,s._id+"title",{propContainer:s,propName:s._name+".title",placeholder:t._dfltTitle.x,attributes:{x:s._offset+s._length/2,y:M+u._height+u._offsetShift+10+1.5*s.title.font.size,"text-anchor":"middle"}})}))};function jde(e){return typeof e.clientX=="number"?e.clientX:e.touches&&e.touches.length>0?e.touches[0].clientX:0}function Fpt(e,t,r,i){if(t._context.staticPlot)return;var n=e.select("rect."+yo.slideBoxClassName).node(),a=e.select("rect."+yo.grabAreaMinClassName).node(),o=e.select("rect."+yo.grabAreaMaxClassName).node();function s(){var l=OL.event,u=l.target,f=jde(l),c=f-e.node().getBoundingClientRect().left,h=i.d2p(r._rl[0]),v=i.d2p(r._rl[1]),d=Dpt.coverSlip();this.addEventListener("touchmove",_),this.addEventListener("touchend",T),d.addEventListener("mousemove",_),d.addEventListener("mouseup",T);function _(p){var M=jde(p),b=+M-f,w,k,x;switch(u){case n:if(x="ew-resize",h+b>r._length||v+b<0)return;w=h+b,k=v+b;break;case a:if(x="col-resize",h+b>r._length)return;w=h+b,k=v;break;case o:if(x="col-resize",v+b<0)return;w=h,k=v+b;break;default:x="ew-resize",w=c,k=c+b;break}if(k<w){var E=k;k=w,w=E}i._pixelMin=w,i._pixelMax=k,Ipt(OL.select(d),x),qpt(e,t,r,i)}function T(){d.removeEventListener("mousemove",_),d.removeEventListener("mouseup",T),this.removeEventListener("touchmove",_),this.removeEventListener("touchend",T),du.removeElement(d)}}e.on("mousedown",s),e.on("touchstart",s)}function qpt(e,t,r,i){function n(s){return r.l2r(du.constrain(s,i._rl[0],i._rl[1]))}var a=n(i.p2d(i._pixelMin)),o=n(i.p2d(i._pixelMax));window.requestAnimationFrame(function(){Cpt.call("_guiRelayout",t,r._name+".range",[a,o])})}function zpt(e,t,r,i,n,a){var o=yo.handleWidth/2;function s(p){return du.constrain(p,0,i._width)}function l(p){return du.constrain(p,0,i._height)}function u(p){return du.constrain(p,-o,i._width+o)}var f=s(i.d2p(r._rl[0])),c=s(i.d2p(r._rl[1]));if(e.select("rect."+yo.slideBoxClassName).attr("x",f).attr("width",c-f),e.select("rect."+yo.maskMinClassName).attr("width",f),e.select("rect."+yo.maskMaxClassName).attr("x",c).attr("width",i._width-c),a.rangemode!=="match"){var h=i._height-l(i.d2pOppAxis(n._rl[1])),v=i._height-l(i.d2pOppAxis(n._rl[0]));e.select("rect."+yo.maskMinOppAxisClassName).attr("x",f).attr("height",h).attr("width",c-f),e.select("rect."+yo.maskMaxOppAxisClassName).attr("x",f).attr("y",v).attr("height",i._height-v).attr("width",c-f),e.select("rect."+yo.slideBoxClassName).attr("y",h).attr("height",v-h)}var d=.5,_=Math.round(u(f-o))-d,T=Math.round(u(c-o))+d;e.select("g."+yo.grabberMinClassName).attr("transform",BL(_,d)),e.select("g."+yo.grabberMaxClassName).attr("transform",BL(T,d))}function Opt(e,t,r,i){var n=du.ensureSingle(e,"rect",yo.bgClassName,function(l){l.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),a=i.borderwidth%2===0?i.borderwidth:i.borderwidth-1,o=-i._offsetShift,s=Kde.crispRound(t,i.borderwidth);n.attr({width:i._width+a,height:i._height+a,transform:BL(o,o),"stroke-width":s}).call(km.stroke,i.bordercolor).call(km.fill,i.bgcolor)}function Bpt(e,t,r,i){var n=t._fullLayout,a=du.ensureSingleById(n._topdefs,"clipPath",i._clipId,function(o){o.append("rect").attr({x:0,y:0})});a.select("rect").attr({width:i._width,height:i._height})}function Npt(e,t,r,i){var n=t.calcdata,a=e.selectAll("g."+yo.rangePlotClassName).data(r._subplotsWith,du.identity);a.enter().append("g").attr("class",function(s){return yo.rangePlotClassName+" "+s}).call(Kde.setClipUrl,i._clipId,t),a.order(),a.exit().remove();var o;a.each(function(s,l){var u=OL.select(this),f=l===0,c=YB.getFromId(t,s,"y"),h=c._name,v=i[h],d={data:[],layout:{xaxis:{type:r.type,domain:[0,1],range:i.range.slice(),calendar:r.calendar},width:i._width,height:i._height,margin:{t:0,b:0,l:0,r:0}},_context:t._context};r.rangebreaks&&(d.layout.xaxis.rangebreaks=r.rangebreaks),d.layout[h]={type:c.type,domain:[0,1],range:v.rangemode!=="match"?v.range.slice():c.range.slice(),calendar:c.calendar},c.rangebreaks&&(d.layout[h].rangebreaks=c.rangebreaks),Lpt.supplyDefaults(d);var _=d._fullLayout.xaxis,T=d._fullLayout[h];_.clearCalc(),_.setScale(),T.clearCalc(),T.setScale();var p={id:s,plotgroup:u,xaxis:_,yaxis:T,isRangePlot:!0};f?o=p:(p.mainplot="xy",p.mainplotinfo=o),Rpt.rangePlot(t,p,Upt(n,s))})}function Upt(e,t){for(var r=[],i=0;i<e.length;i++){var n=e[i],a=n[0].trace;a.xaxis+a.yaxis===t&&r.push(n)}return r}function Vpt(e,t,r,i,n){var a=du.ensureSingle(e,"rect",yo.maskMinClassName,function(u){u.attr({x:0,y:0,"shape-rendering":"crispEdges"})});a.attr("height",i._height).call(km.fill,yo.maskColor);var o=du.ensureSingle(e,"rect",yo.maskMaxClassName,function(u){u.attr({y:0,"shape-rendering":"crispEdges"})});if(o.attr("height",i._height).call(km.fill,yo.maskColor),n.rangemode!=="match"){var s=du.ensureSingle(e,"rect",yo.maskMinOppAxisClassName,function(u){u.attr({y:0,"shape-rendering":"crispEdges"})});s.attr("width",i._width).call(km.fill,yo.maskOppAxisColor);var l=du.ensureSingle(e,"rect",yo.maskMaxOppAxisClassName,function(u){u.attr({y:0,"shape-rendering":"crispEdges"})});l.attr("width",i._width).style("border-top",yo.maskOppBorder).call(km.fill,yo.maskOppAxisColor)}}function Hpt(e,t,r,i){if(!t._context.staticPlot){var n=du.ensureSingle(e,"rect",yo.slideBoxClassName,function(a){a.attr({y:0,cursor:yo.slideBoxCursor,"shape-rendering":"crispEdges"})});n.attr({height:i._height,fill:yo.slideBoxFill})}}function Gpt(e,t,r,i){var n=du.ensureSingle(e,"g",yo.grabberMinClassName),a=du.ensureSingle(e,"g",yo.grabberMaxClassName),o={x:0,width:yo.handleWidth,rx:yo.handleRadius,fill:km.background,stroke:km.defaultLine,"stroke-width":yo.handleStrokeWidth,"shape-rendering":"crispEdges"},s={y:Math.round(i._height/4),height:Math.round(i._height/2)},l=du.ensureSingle(n,"rect",yo.handleMinClassName,function(v){v.attr(o)});l.attr(s);var u=du.ensureSingle(a,"rect",yo.handleMaxClassName,function(v){v.attr(o)});u.attr(s);var f={width:yo.grabAreaWidth,x:0,y:0,fill:yo.grabAreaFill,cursor:t._context.staticPlot?void 0:yo.grabAreaCursor},c=du.ensureSingle(n,"rect",yo.grabAreaMinClassName,function(v){v.attr(f)});c.attr("height",i._height);var h=du.ensureSingle(a,"rect",yo.grabAreaMaxClassName,function(v){v.attr(f)});h.attr("height",i._height)}});var epe=ne((zir,$de)=>{"use strict";var Ypt=Wt(),Wpt=DL(),Xpt=GB(),WB=Vde();$de.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:Ypt.extendFlat({},Wpt,{yaxis:Xpt})}}},layoutAttributes:DL(),handleDefaults:Wde(),calcAutorange:Zde(),draw:Qde(),isVisible:WB.isVisible,makeData:WB.makeData,autoMarginOpts:WB.autoMarginOpts}});var NL=ne((Oir,rpe)=>{"use strict";var Zpt=ll(),tpe=Ku(),jpt=So().templatedArray,Kpt=jpt("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});rpe.exports={visible:{valType:"boolean",editType:"plot"},buttons:Kpt,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:Zpt({editType:"plot"}),bgcolor:{valType:"color",dflt:tpe.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:tpe.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}});var XB=ne((Bir,npe)=>{"use strict";npe.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}});var ope=ne((Nir,ape)=>{"use strict";var UL=Wt(),Jpt=_i(),Qpt=So(),$pt=ch(),ipe=NL(),ZB=XB();ape.exports=function(t,r,i,n,a){var o=t.rangeselector||{},s=Qpt.newContainer(r,"rangeselector");function l(v,d){return UL.coerce(o,s,ipe,v,d)}var u=$pt(o,s,{name:"buttons",handleItemDefaults:e0t,calendar:a}),f=l("visible",u.length>0);if(f){var c=t0t(r,i,n);l("x",c[0]),l("y",c[1]),UL.noneOrAll(t,r,["x","y"]),l("xanchor"),l("yanchor"),UL.coerceFont(l,"font",i.font);var h=l("bgcolor");l("activecolor",Jpt.contrast(h,ZB.lightAmount,ZB.darkAmount)),l("bordercolor"),l("borderwidth")}};function e0t(e,t,r,i){var n=i.calendar;function a(l,u){return UL.coerce(e,t,ipe.buttons,l,u)}var o=a("visible");if(o){var s=a("step");s!=="all"&&(n&&n!=="gregorian"&&(s==="month"||s==="year")?t.stepmode="backward":a("stepmode"),a("count")),a("label")}}function t0t(e,t,r){for(var i=r.filter(function(s){return t[s].anchor===e._id}),n=0,a=0;a<i.length;a++){var o=t[i[a]].domain;o&&(n=Math.max(o[1],n))}return[e.domain[0],n+ZB.yPad]}});var lpe=ne((Uir,spe)=>{"use strict";var r0t=iq(),n0t=Wt().titleCase;spe.exports=function(t,r){var i=t._name,n={};if(r.step==="all")n[i+".autorange"]=!0;else{var a=i0t(t,r);n[i+".range[0]"]=a[0],n[i+".range[1]"]=a[1]}return n};function i0t(e,t){var r=e.range,i=new Date(e.r2l(r[1])),n=t.step,a=r0t["utc"+n0t(n)],o=t.count,s;switch(t.stepmode){case"backward":s=e.l2r(+a.offset(i,-o));break;case"todate":var l=a.offset(i,-o);s=e.l2r(+a.ceil(l));break}var u=r[1];return[s,u]}});var gpe=ne((Vir,ppe)=>{"use strict";var HL=Ai(),a0t=wi(),o0t=Zs(),upe=_i(),dpe=aa(),Zg=Wt(),fpe=Zg.strTranslate,VL=Es(),s0t=zl(),JB=Tf(),cpe=JB.LINE_SPACING,hpe=JB.FROM_TL,vpe=JB.FROM_BR,KB=XB(),l0t=lpe();ppe.exports=function(t){var r=t._fullLayout,i=r._infolayer.selectAll(".rangeselector").data(u0t(t),f0t);i.enter().append("g").classed("rangeselector",!0),i.exit().remove(),i.style({cursor:"pointer","pointer-events":"all"}),i.each(function(n){var a=HL.select(this),o=n,s=o.rangeselector,l=a.selectAll("g.button").data(Zg.filterVisible(s.buttons));l.enter().append("g").classed("button",!0),l.exit().remove(),l.each(function(u){var f=HL.select(this),c=l0t(o,u);u._isActive=c0t(o,u,c),f.call(jB,s,u),f.call(v0t,s,u,t),f.on("click",function(){t._dragged||a0t.call("_guiRelayout",t,c)}),f.on("mouseover",function(){u._isHovered=!0,f.call(jB,s,u)}),f.on("mouseout",function(){u._isHovered=!1,f.call(jB,s,u)})}),p0t(t,l,s,o._name,a)})};function u0t(e){for(var t=s0t.list(e,"x",!0),r=[],i=0;i<t.length;i++){var n=t[i];n.rangeselector&&n.rangeselector.visible&&r.push(n)}return r}function f0t(e){return e._id}function c0t(e,t,r){if(t.step==="all")return e.autorange===!0;var i=Object.keys(r);return e.range[0]===r[i[0]]&&e.range[1]===r[i[1]]}function jB(e,t,r){var i=Zg.ensureSingle(e,"rect","selector-rect",function(n){n.attr("shape-rendering","crispEdges")});i.attr({rx:KB.rx,ry:KB.ry}),i.call(upe.stroke,t.bordercolor).call(upe.fill,h0t(t,r)).style("stroke-width",t.borderwidth+"px")}function h0t(e,t){return t._isActive||t._isHovered?e.activecolor:e.bgcolor}function v0t(e,t,r,i){function n(o){VL.convertToTspans(o,i)}var a=Zg.ensureSingle(e,"text","selector-text",function(o){o.attr("text-anchor","middle")});a.call(dpe.font,t.font).text(d0t(r,i._fullLayout._meta)).call(n)}function d0t(e,t){return e.label?t?Zg.templateString(e.label,t):e.label:e.step==="all"?"all":e.count+e.step.charAt(0)}function p0t(e,t,r,i,n){var a=0,o=0,s=r.borderwidth;t.each(function(){var v=HL.select(this),d=v.select(".selector-text"),_=r.font.size*cpe,T=Math.max(_*VL.lineCount(d),16)+3;o=Math.max(o,T)}),t.each(function(){var v=HL.select(this),d=v.select(".selector-rect"),_=v.select(".selector-text"),T=_.node()&&dpe.bBox(_.node()).width,p=r.font.size*cpe,M=VL.lineCount(_),b=Math.max(T+10,KB.minButtonWidth);v.attr("transform",fpe(s+a,s)),d.attr({x:0,y:0,width:b,height:o}),VL.positionText(_,b/2,o/2-(M-1)*p/2+3),a+=b+5});var l=e._fullLayout._size,u=l.l+l.w*r.x,f=l.t+l.h*(1-r.y),c="left";Zg.isRightAnchor(r)&&(u-=a,c="right"),Zg.isCenterAnchor(r)&&(u-=a/2,c="center");var h="top";Zg.isBottomAnchor(r)&&(f-=o,h="bottom"),Zg.isMiddleAnchor(r)&&(f-=o/2,h="middle"),a=Math.ceil(a),o=Math.ceil(o),u=Math.round(u),f=Math.round(f),o0t.autoMargin(e,i+"-range-selector",{x:r.x,y:r.y,l:a*hpe[c],r:a*vpe[c],b:o*vpe[h],t:o*hpe[h]}),n.attr("transform",fpe(u,f))}});var mpe=ne((Hir,ype)=>{"use strict";ype.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:NL()}}},layoutAttributes:NL(),handleDefaults:ope(),draw:gpe()}});var fl=ne(QB=>{"use strict";var xpe=oa().extendFlat;QB.attributes=function(e,t){e=e||{},t=t||{};var r={valType:"info_array",editType:e.editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]},i=e.name?e.name+" ":"",n=e.trace?"trace ":"subplot ",a=t.description?" "+t.description:"",o={x:xpe({},r,{}),y:xpe({},r,{}),editType:e.editType};return e.noGridCell||(o.row={valType:"integer",min:0,dflt:0,editType:e.editType},o.column={valType:"integer",min:0,dflt:0,editType:e.editType}),o};QB.defaults=function(e,t,r,i){var n=i&&i.x||[0,1],a=i&&i.y||[0,1],o=t.grid;if(o){var s=r("domain.column");s!==void 0&&(s<o.columns?n=o._domains.x[s]:delete e.domain.column);var l=r("domain.row");l!==void 0&&(l<o.rows?a=o._domains.y[l]:delete e.domain.row)}var u=r("domain.x",n),f=r("domain.y",a);u[0]<u[1]||(e.domain.x=n.slice()),f[0]<f[1]||(e.domain.y=a.slice())}});var eN=ne((Yir,Tpe)=>{"use strict";var g0t=Wt(),y0t=Kb().counter,m0t=fl().attributes,_pe=wf().idRegex,x0t=So(),$B={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[y0t("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[_pe.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[_pe.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:m0t({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function GL(e,t,r){var i=t[r+"axes"],n=Object.keys((e._splomAxes||{})[r]||{});if(Array.isArray(i))return i;if(n.length)return n}function _0t(e,t){var r=e.grid||{},i=GL(t,r,"x"),n=GL(t,r,"y");if(!e.grid&&!i&&!n)return;var a=Array.isArray(r.subplots)&&Array.isArray(r.subplots[0]),o=Array.isArray(i),s=Array.isArray(n),l=o&&i!==r.xaxes&&s&&n!==r.yaxes,u,f;a?(u=r.subplots.length,f=r.subplots[0].length):(s&&(u=n.length),o&&(f=i.length));var c=x0t.newContainer(t,"grid");function h(x,E){return g0t.coerce(r,c,$B,x,E)}var v=h("rows",u),d=h("columns",f);if(!(v*d>1)){delete t.grid;return}if(!a&&!o&&!s){var _=h("pattern")==="independent";_&&(a=!0)}c._hasSubplotGrid=a;var T=h("roworder"),p=T==="top to bottom",M=a?.2:.1,b=a?.3:.1,w,k;l&&t._splomGridDflt&&(w=t._splomGridDflt.xside,k=t._splomGridDflt.yside),c._domains={x:bpe("x",h,M,w,d),y:bpe("y",h,b,k,v,p)}}function bpe(e,t,r,i,n,a){var o=t(e+"gap",r),s=t("domain."+e);t(e+"side",i);for(var l=new Array(n),u=s[0],f=(s[1]-u)/(n-o),c=f*(1-o),h=0;h<n;h++){var v=u+f*h;l[a?n-1-h:h]=[v,v+c]}return l}function b0t(e,t){var r=t.grid;if(!(!r||!r._domains)){var i=e.grid||{},n=t._subplots,a=r._hasSubplotGrid,o=r.rows,s=r.columns,l=r.pattern==="independent",u,f,c,h,v,d,_,T=r._axisMap={};if(a){var p=i.subplots||[];d=r.subplots=new Array(o);var M=1;for(u=0;u<o;u++){var b=d[u]=new Array(s),w=p[u]||[];for(f=0;f<s;f++)if(l?(v=M===1?"xy":"x"+M+"y"+M,M++):v=w[f],b[f]="",n.cartesian.indexOf(v)!==-1){if(_=v.indexOf("y"),c=v.slice(0,_),h=v.slice(_),T[c]!==void 0&&T[c]!==f||T[h]!==void 0&&T[h]!==u)continue;b[f]=v,T[c]=f,T[h]=u}}}else{var k=GL(t,i,"x"),x=GL(t,i,"y");r.xaxes=wpe(k,n.xaxis,s,T,"x"),r.yaxes=wpe(x,n.yaxis,o,T,"y")}var E=r._anchors={},S=r.roworder==="top to bottom";for(var g in T){var C=g.charAt(0),A=r[C+"side"],P,D,z;if(A.length<8)E[g]="free";else if(C==="x"){if(A.charAt(0)==="t"===S?(P=0,D=1,z=o):(P=o-1,D=-1,z=-1),a){var O=T[g];for(u=P;u!==z;u+=D)if(v=d[u][O],!!v&&(_=v.indexOf("y"),v.slice(0,_)===g)){E[g]=v.slice(_);break}}else for(u=P;u!==z;u+=D)if(h=r.yaxes[u],n.cartesian.indexOf(g+h)!==-1){E[g]=h;break}}else if(A.charAt(0)==="l"?(P=0,D=1,z=s):(P=s-1,D=-1,z=-1),a){var V=T[g];for(u=P;u!==z;u+=D)if(v=d[V][u],!!v&&(_=v.indexOf("y"),v.slice(_)===g)){E[g]=v.slice(0,_);break}}else for(u=P;u!==z;u+=D)if(c=r.xaxes[u],n.cartesian.indexOf(c+g)!==-1){E[g]=c;break}}}}function wpe(e,t,r,i,n){var a=new Array(r),o;function s(l,u){t.indexOf(u)!==-1&&i[u]===void 0?(a[l]=u,i[u]=l):a[l]=""}if(Array.isArray(e))for(o=0;o<r;o++)s(o,e[o]);else for(s(0,n),o=1;o<r;o++)s(o,n+(o+1));return a}Tpe.exports={moduleType:"component",name:"grid",schema:{layout:{grid:$B}},layoutAttributes:$B,sizeDefaults:_0t,contentDefaults:b0t}});var tN=ne((Wir,Ape)=>{"use strict";Ape.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}});var Epe=ne((Xir,Spe)=>{"use strict";var Mpe=la(),w0t=wi(),T0t=Wt(),A0t=So(),M0t=tN();Spe.exports=function(e,t,r,i){var n="error_"+i.axis,a=A0t.newContainer(t,n),o=e[n]||{};function s(d,_){return T0t.coerce(o,a,M0t,d,_)}var l=o.array!==void 0||o.value!==void 0||o.type==="sqrt",u=s("visible",l);if(u!==!1){var f=s("type","array"in o?"data":"percent"),c=!0;f!=="sqrt"&&(c=s("symmetric",!((f==="data"?"arrayminus":"valueminus")in o))),f==="data"?(s("array"),s("traceref"),c||(s("arrayminus"),s("tracerefminus"))):(f==="percent"||f==="constant")&&(s("value"),c||s("valueminus"));var h="copy_"+i.inherit+"style";if(i.inherit){var v=t["error_"+i.inherit];(v||{}).visible&&s(h,!(o.color||Mpe(o.thickness)||Mpe(o.width)))}(!i.inherit||!a[h])&&(s("color",r),s("thickness"),s("width",w0t.traceIs(t,"gl3d")?0:4))}}});var rN=ne((Zir,Cpe)=>{"use strict";Cpe.exports=function(t){var r=t.type,i=t.symmetric;if(r==="data"){var n=t.array||[];if(i)return function(u,f){var c=+n[f];return[c,c]};var a=t.arrayminus||[];return function(u,f){var c=+n[f],h=+a[f];return!isNaN(c)||!isNaN(h)?[h||0,c||0]:[NaN,NaN]}}else{var o=kpe(r,t.value),s=kpe(r,t.valueminus);return i||t.valueminus===void 0?function(u){var f=o(u);return[f,f]}:function(u){return[s(u),o(u)]}}};function kpe(e,t){if(e==="percent")return function(r){return Math.abs(r*t/100)};if(e==="constant")return function(){return Math.abs(t)};if(e==="sqrt")return function(r){return Math.sqrt(Math.abs(r))}}});var Rpe=ne((jir,Ppe)=>{"use strict";var nN=la(),S0t=wi(),iN=Xi(),E0t=Wt(),k0t=rN();Ppe.exports=function(t){for(var r=t.calcdata,i=0;i<r.length;i++){var n=r[i],a=n[0].trace;if(a.visible===!0&&S0t.traceIs(a,"errorBarsOK")){var o=iN.getFromId(t,a.xaxis),s=iN.getFromId(t,a.yaxis);Lpe(n,a,o,"x"),Lpe(n,a,s,"y")}}};function Lpe(e,t,r,i){var n=t["error_"+i]||{},a=n.visible&&["linear","log"].indexOf(r.type)!==-1,o=[];if(a){for(var s=k0t(n),l=0;l<e.length;l++){var u=e[l],f=u.i;if(f===void 0)f=l;else if(f===null)continue;var c=u[i];if(nN(r.c2l(c))){var h=s(c,f);if(nN(h[0])&&nN(h[1])){var v=u[i+"s"]=c-h[0],d=u[i+"h"]=c+h[1];o.push(v,d)}}}var _=r._id,T=t._extremes[_],p=iN.findExtremes(r,o,E0t.extendFlat({tozero:T.opts.tozero},{padded:!0}));T.min=T.min.concat(p.min),T.max=T.max.concat(p.max)}}});var Fpe=ne((Kir,Ipe)=>{"use strict";var Dpe=Ai(),Cm=la(),C0t=aa(),L0t=js();Ipe.exports=function(t,r,i,n){var a,o=i.xaxis,s=i.yaxis,l=n&&n.duration>0,u=t._context.staticPlot;r.each(function(f){var c=f[0].trace,h=c.error_x||{},v=c.error_y||{},d;c.ids&&(d=function(M){return M.id});var _=L0t.hasMarkers(c)&&c.marker.maxdisplayed>0;!v.visible&&!h.visible&&(f=[]);var T=Dpe.select(this).selectAll("g.errorbar").data(f,d);if(T.exit().remove(),!!f.length){h.visible||T.selectAll("path.xerror").remove(),v.visible||T.selectAll("path.yerror").remove(),T.style("opacity",1);var p=T.enter().append("g").classed("errorbar",!0);l&&p.style("opacity",0).transition().duration(n.duration).style("opacity",1),C0t.setClipUrl(T,i.layerClipId,t),T.each(function(M){var b=Dpe.select(this),w=P0t(M,o,s);if(!(_&&!M.vis)){var k,x=b.select("path.yerror");if(v.visible&&Cm(w.x)&&Cm(w.yh)&&Cm(w.ys)){var E=v.width;k="M"+(w.x-E)+","+w.yh+"h"+2*E+"m-"+E+",0V"+w.ys,w.noYS||(k+="m-"+E+",0h"+2*E),a=!x.size(),a?x=b.append("path").style("vector-effect",u?"none":"non-scaling-stroke").classed("yerror",!0):l&&(x=x.transition().duration(n.duration).ease(n.easing)),x.attr("d",k)}else x.remove();var S=b.select("path.xerror");if(h.visible&&Cm(w.y)&&Cm(w.xh)&&Cm(w.xs)){var g=(h.copy_ystyle?v:h).width;k="M"+w.xh+","+(w.y-g)+"v"+2*g+"m0,-"+g+"H"+w.xs,w.noXS||(k+="m0,-"+g+"v"+2*g),a=!S.size(),a?S=b.append("path").style("vector-effect",u?"none":"non-scaling-stroke").classed("xerror",!0):l&&(S=S.transition().duration(n.duration).ease(n.easing)),S.attr("d",k)}else S.remove()}})}})};function P0t(e,t,r){var i={x:t.c2p(e.x),y:r.c2p(e.y)};return e.yh!==void 0&&(i.yh=r.c2p(e.yh),i.ys=r.c2p(e.ys),Cm(i.ys)||(i.noYS=!0,i.ys=r.c2p(e.ys,!0))),e.xh!==void 0&&(i.xh=t.c2p(e.xh),i.xs=t.c2p(e.xs),Cm(i.xs)||(i.noXS=!0,i.xs=t.c2p(e.xs,!0))),i}});var Ope=ne((Jir,zpe)=>{"use strict";var R0t=Ai(),qpe=_i();zpe.exports=function(t){t.each(function(r){var i=r[0].trace,n=i.error_y||{},a=i.error_x||{},o=R0t.select(this);o.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(qpe.stroke,n.color),a.copy_ystyle&&(a=n),o.selectAll("path.xerror").style("stroke-width",a.thickness+"px").call(qpe.stroke,a.color)})}});var Upe=ne((Qir,Npe)=>{"use strict";var NM=Wt(),Bpe=Xs().overrideAll,UM=tN(),Nx={error_x:NM.extendFlat({},UM),error_y:NM.extendFlat({},UM)};delete Nx.error_x.copy_zstyle;delete Nx.error_y.copy_zstyle;delete Nx.error_y.copy_ystyle;var VM={error_x:NM.extendFlat({},UM),error_y:NM.extendFlat({},UM),error_z:NM.extendFlat({},UM)};delete VM.error_x.copy_ystyle;delete VM.error_y.copy_ystyle;delete VM.error_z.copy_ystyle;delete VM.error_z.copy_zstyle;Npe.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:Nx,bar:Nx,histogram:Nx,scatter3d:Bpe(VM,"calc","nested"),scattergl:Bpe(Nx,"calc","nested")}},supplyDefaults:Epe(),calc:Rpe(),makeComputeError:rN(),plot:Fpe(),style:Ope(),hoverInfo:D0t};function D0t(e,t,r){(t.error_y||{}).visible&&(r.yerr=e.yh-e.y,t.error_y.symmetric||(r.yerrneg=e.y-e.ys)),(t.error_x||{}).visible&&(r.xerr=e.xh-e.x,t.error_x.symmetric||(r.xerrneg=e.x-e.xs))}});var Hpe=ne(($ir,Vpe)=>{"use strict";Vpe.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}});var Kpe=ne((ear,jpe)=>{"use strict";var Lm=Ai(),aN=Xf(),WL=Zs(),Gpe=wi(),jg=Xi(),YL=Hh(),xp=Wt(),g0=xp.strTranslate,Zpe=oa().extendFlat,oN=e0(),p0=aa(),sN=_i(),I0t=yx(),F0t=Es(),q0t=Uh().flipScale,z0t=LM(),O0t=yL(),B0t=dc(),lN=Tf(),Ype=lN.LINE_SPACING,Wpe=lN.FROM_TL,Xpe=lN.FROM_BR,Ll=Hpe().cn;function N0t(e){var t=e._fullLayout,r=t._infolayer.selectAll("g."+Ll.colorbar).data(U0t(e),function(i){return i._id});r.enter().append("g").attr("class",function(i){return i._id}).classed(Ll.colorbar,!0),r.each(function(i){var n=Lm.select(this);xp.ensureSingle(n,"rect",Ll.cbbg),xp.ensureSingle(n,"g",Ll.cbfills),xp.ensureSingle(n,"g",Ll.cblines),xp.ensureSingle(n,"g",Ll.cbaxis,function(o){o.classed(Ll.crisp,!0)}),xp.ensureSingle(n,"g",Ll.cbtitleunshift,function(o){o.append("g").classed(Ll.cbtitle,!0)}),xp.ensureSingle(n,"rect",Ll.cboutline);var a=V0t(n,i,e);a&&a.then&&(e._promises||[]).push(a),e._context.edits.colorbarPosition&&H0t(n,i,e)}),r.exit().each(function(i){WL.autoMargin(e,i._id)}).remove(),r.order()}function U0t(e){var t=e._fullLayout,r=e.calcdata,i=[],n,a,o,s;function l(b){return Zpe(b,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function u(){typeof s.calc=="function"?s.calc(e,o,n):(n._fillgradient=a.reversescale?q0t(a.colorscale):a.colorscale,n._zrange=[a[s.min],a[s.max]])}for(var f=0;f<r.length;f++){var c=r[f];if(o=c[0].trace,!!o._module){var h=o._module.colorbar;if(o.visible===!0&&h)for(var v=Array.isArray(h),d=v?h:[h],_=0;_<d.length;_++){s=d[_];var T=s.container;a=T?o[T]:o,a&&a.showscale&&(n=l(a.colorbar),n._id="cb"+o.uid+(v&&T?"-"+T:""),n._traceIndex=o.index,n._propPrefix=(T?T+".":"")+"colorbar.",n._meta=o._meta,u(),i.push(n))}}}for(var p in t._colorAxes)if(a=t[p],a.showscale){var M=t._colorAxes[p];n=l(a.colorbar),n._id="cb"+p,n._propPrefix=p+".colorbar.",n._meta=t._meta,s={min:"cmin",max:"cmax"},M[0]!=="heatmap"&&(o=M[1],s.calc=o._module.colorbar.calc),u(),i.push(n)}return i}function V0t(e,t,r){var i=t.orientation==="v",n=t.len,a=t.lenmode,o=t.thickness,s=t.thicknessmode,l=t.outlinewidth,u=t.borderwidth,f=t.bgcolor,c=t.xanchor,h=t.yanchor,v=t.xpad,d=t.ypad,_=t.x,T=i?t.y:1-t.y,p=t.yref==="paper",M=t.xref==="paper",b=r._fullLayout,w=b._size,k=t._fillcolor,x=t._line,E=t.title,S=E.side,g=t._zrange||Lm.extent((typeof k=="function"?k:x.color).domain()),C=typeof x.color=="function"?x.color:function(){return x.color},A=typeof k=="function"?k:function(){return k},P=t._levels,D=G0t(r,t,g),z=D.fill,O=D.line,V=Math.round(o*(s==="fraction"?i?w.w:w.h:1)),B=V/(i?w.w:w.h),F=Math.round(n*(a==="fraction"?i?w.h:w.w:1)),N=F/(i?w.h:w.w),Z=M?w.w:r._fullLayout.width,J=p?w.h:r._fullLayout.height,re=Math.round(i?_*Z+v:T*J+d),ue={center:.5,right:1}[c]||0,fe={top:1,middle:.5}[h]||0,K=i?_-ue*B:T-fe*B,X=i?T-fe*N:_-ue*N,ae=Math.round(i?J*(1-X):Z*X);t._lenFrac=N,t._thickFrac=B,t._uFrac=K,t._vFrac=X;var oe=t._axis=Y0t(r,t,g);oe.position=B+(i?_+v/w.w:T+d/w.h);var me=["top","bottom"].indexOf(S)!==-1;if(i&&me&&(oe.title.side=S,oe.titlex=_+v/w.w,oe.titley=X+(E.side==="top"?N-d/w.h:d/w.h)),!i&&!me&&(oe.title.side=S,oe.titley=T+d/w.h,oe.titlex=X+v/w.w),x.color&&t.tickmode==="auto"){oe.tickmode="linear",oe.tick0=P.start;var xe=P.size,ce=xp.constrain(F/50,4,15)+1,ie=(g[1]-g[0])/((t.nticks||ce)*xe);if(ie>1){var ge=Math.pow(10,Math.floor(Math.log(ie)/Math.LN10));xe*=ge*xp.roundUp(ie/ge,[2,5,10]),(Math.abs(P.start)/P.size+1e-6)%1<2e-6&&(oe.tick0=0)}oe.dtick=xe}oe.domain=i?[X+d/w.h,X+N-d/w.h]:[X+v/w.w,X+N-v/w.w],oe.setScale(),e.attr("transform",g0(Math.round(w.l),Math.round(w.t)));var le=e.select("."+Ll.cbtitleunshift).attr("transform",g0(-Math.round(w.l),-Math.round(w.t))),we=oe.ticklabelposition,Re=oe.title.font.size,qe=e.select("."+Ll.cbaxis),et,Pe=0,Ie=0;function ut(Lt,Me){var Ze={propContainer:oe,propName:t._propPrefix+"title",traceIndex:t._traceIndex,_meta:t._meta,placeholder:b._dfltTitle.colorbar,containerGroup:e.select("."+Ll.cbtitle)},dt=Lt.charAt(0)==="h"?Lt.substr(1):"h"+Lt;e.selectAll("."+dt+",."+dt+"-math-group").remove(),I0t.draw(r,Lt,Zpe(Ze,Me||{}))}function ft(){if(i&&me||!i&&!me){var Lt,Me;S==="top"&&(Lt=v+w.l+Z*_,Me=d+w.t+J*(1-X-N)+3+Re*.75),S==="bottom"&&(Lt=v+w.l+Z*_,Me=d+w.t+J*(1-X)-3-Re*.25),S==="right"&&(Me=d+w.t+J*T+3+Re*.75,Lt=v+w.l+Z*X),ut(oe._id+"title",{attributes:{x:Lt,y:Me,"text-anchor":i?"start":"middle"}})}}function je(){if(i&&!me||!i&&me){var Lt=oe.position||0,Me=oe._offset+oe._length/2,Ze,dt;if(S==="right")dt=Me,Ze=w.l+Z*Lt+10+Re*(oe.showticklabels?1:.5);else if(Ze=Me,S==="bottom"&&(dt=w.t+J*Lt+10+(we.indexOf("inside")===-1?oe.tickfont.size:0)+(oe.ticks!=="intside"&&t.ticklen||0)),S==="top"){var it=E.text.split("<br>").length;dt=w.t+J*Lt+10-V-Ype*Re*it}ut((i?"h":"v")+oe._id+"title",{avoid:{selection:Lm.select(r).selectAll("g."+oe._id+"tick"),side:S,offsetTop:i?0:w.t,offsetLeft:i?w.l:0,maxShift:i?b.width:b.height},attributes:{x:Ze,y:dt,"text-anchor":"middle"},transform:{rotate:i?-90:0,offset:0}})}}function _t(){if(!i&&!me||i&&me){var Lt=e.select("."+Ll.cbtitle),Me=Lt.select("text"),Ze=[-l/2,l/2],dt=Lt.select(".h"+oe._id+"title-math-group").node(),it=15.6;Me.node()&&(it=parseInt(Me.node().style.fontSize,10)*Ype);var vt;if(dt?(vt=p0.bBox(dt),Ie=vt.width,Pe=vt.height,Pe>it&&(Ze[1]-=(Pe-it)/2)):Me.node()&&!Me.classed(Ll.jsPlaceholder)&&(vt=p0.bBox(Me.node()),Ie=vt.width,Pe=vt.height),i){if(Pe){if(Pe+=5,S==="top")oe.domain[1]-=Pe/w.h,Ze[1]*=-1;else{oe.domain[0]+=Pe/w.h;var rt=F0t.lineCount(Me);Ze[1]+=(1-rt)*it}Lt.attr("transform",g0(Ze[0],Ze[1])),oe.setScale()}}else Ie&&(S==="right"&&(oe.domain[0]+=(Ie+Re/2)/w.w),Lt.attr("transform",g0(Ze[0],Ze[1])),oe.setScale())}e.selectAll("."+Ll.cbfills+",."+Ll.cblines).attr("transform",i?g0(0,Math.round(w.h*(1-oe.domain[1]))):g0(Math.round(w.w*oe.domain[0]),0)),qe.attr("transform",i?g0(0,Math.round(-w.t)):g0(Math.round(-w.l),0));var We=e.select("."+Ll.cbfills).selectAll("rect."+Ll.cbfill).attr("style","").data(z);We.enter().append("rect").classed(Ll.cbfill,!0).attr("style",""),We.exit().remove();var ht=g.map(oe.c2p).map(Math.round).sort(function(or,vr){return or-vr});We.each(function(or,vr){var Ot=[vr===0?g[0]:(z[vr]+z[vr-1])/2,vr===z.length-1?g[1]:(z[vr]+z[vr+1])/2].map(oe.c2p).map(Math.round);i&&(Ot[1]=xp.constrain(Ot[1]+(Ot[1]>Ot[0])?1:-1,ht[0],ht[1]));var yt=Lm.select(this).attr(i?"x":"y",re).attr(i?"y":"x",Lm.min(Ot)).attr(i?"width":"height",Math.max(V,2)).attr(i?"height":"width",Math.max(Lm.max(Ot)-Lm.min(Ot),2));if(t._fillgradient)p0.gradient(yt,r,t._id,i?"vertical":"horizontalreversed",t._fillgradient,"fill");else{var Et=A(or).replace("e-","");yt.attr("fill",aN(Et).toHexString())}});var mt=e.select("."+Ll.cblines).selectAll("path."+Ll.cbline).data(x.color&&x.width?O:[]);mt.enter().append("path").classed(Ll.cbline,!0),mt.exit().remove(),mt.each(function(or){var vr=re,Ot=Math.round(oe.c2p(or))+x.width/2%1;Lm.select(this).attr("d","M"+(i?vr+","+Ot:Ot+","+vr)+(i?"h":"v")+V).call(p0.lineGroupStyle,x.width,C(or),x.dash)}),qe.selectAll("g."+oe._id+"tick,path").remove();var er=re+V+(l||0)/2-(t.ticks==="outside"?1:0),$t=jg.calcTicks(oe),cr=jg.getTickSigns(oe)[2];return jg.drawTicks(r,oe,{vals:oe.ticks==="inside"?jg.clipEnds(oe,$t):$t,layer:qe,path:jg.makeTickPath(oe,er,cr),transFn:jg.makeTransTickFn(oe)}),jg.drawLabels(r,oe,{vals:$t,layer:qe,transFn:jg.makeTransTickLabelFn(oe),labelFns:jg.makeLabelFns(oe,er)})}function Bt(){var Lt,Me=V+l/2;we.indexOf("inside")===-1&&(Lt=p0.bBox(qe.node()),Me+=i?Lt.width:Lt.height),et=le.select("text");var Ze=0,dt=i&&S==="top",it=!i&&S==="right",vt=0;if(et.node()&&!et.classed(Ll.jsPlaceholder)){var rt,We=le.select(".h"+oe._id+"title-math-group").node();We&&(i&&me||!i&&!me)?(Lt=p0.bBox(We),Ze=Lt.width,rt=Lt.height):(Lt=p0.bBox(le.node()),Ze=Lt.right-w.l-(i?re:ae),rt=Lt.bottom-w.t-(i?ae:re),!i&&S==="top"&&(Me+=Lt.height,vt=Lt.height)),it&&(et.attr("transform",g0(Ze/2+Re/2,0)),Ze*=2),Me=Math.max(Me,i?Ze:rt)}var ht=(i?v:d)*2+Me+u+l/2,mt=0;!i&&E.text&&h==="bottom"&&T<=0&&(mt=ht/2,ht+=mt,vt+=mt),b._hColorbarMoveTitle=mt,b._hColorbarMoveCBTitle=vt;var er=u+l,$t=(i?re:ae)-er/2-(i?v:0),cr=(i?ae:re)-(i?F:d+vt-mt);e.select("."+Ll.cbbg).attr("x",$t).attr("y",cr).attr(i?"width":"height",Math.max(ht-mt,2)).attr(i?"height":"width",Math.max(F+er,2)).call(sN.fill,f).call(sN.stroke,t.bordercolor).style("stroke-width",u);var or=it?Math.max(Ze-10,0):0;e.selectAll("."+Ll.cboutline).attr("x",(i?re:ae+v)+or).attr("y",(i?ae+d-F:re)+(dt?Pe:0)).attr(i?"width":"height",Math.max(V,2)).attr(i?"height":"width",Math.max(F-(i?2*d+Pe:2*v+or),2)).call(sN.stroke,t.outlinecolor).style({fill:"none","stroke-width":l});var vr=i?ue*ht:0,Ot=i?0:(1-fe)*ht-vt;if(vr=M?w.l-vr:-vr,Ot=p?w.t-Ot:-Ot,e.attr("transform",g0(vr,Ot)),!i&&(u||aN(f).getAlpha()&&!aN.equals(b.paper_bgcolor,f))){var yt=qe.selectAll("text"),Et=yt[0].length,Je=e.select("."+Ll.cbbg).node(),Ke=p0.bBox(Je),At=p0.getTranslate(e),Ee=2;yt.each(function(zr,an){var ni=0,mn=Et-1;if(an===ni||an===mn){var fi=p0.bBox(this),Wi=p0.getTranslate(this),si;if(an===mn){var Zi=fi.right+Wi.x,Ei=Ke.right+At.x+ae-u-Ee+_;si=Ei-Zi,si>0&&(si=0)}else if(an===ni){var ot=fi.left+Wi.x,Be=Ke.left+At.x+ae+u+Ee;si=Be-ot,si<0&&(si=0)}si&&(Et<3?this.setAttribute("transform","translate("+si+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var de={},Te=Wpe[c],nt=Xpe[c],Mt=Wpe[h],Kt=Xpe[h],Jt=ht-V;i?(a==="pixels"?(de.y=T,de.t=F*Mt,de.b=F*Kt):(de.t=de.b=0,de.yt=T+n*Mt,de.yb=T-n*Kt),s==="pixels"?(de.x=_,de.l=ht*Te,de.r=ht*nt):(de.l=Jt*Te,de.r=Jt*nt,de.xl=_-o*Te,de.xr=_+o*nt)):(a==="pixels"?(de.x=_,de.l=F*Te,de.r=F*nt):(de.l=de.r=0,de.xl=_+n*Te,de.xr=_-n*nt),s==="pixels"?(de.y=1-T,de.t=ht*Mt,de.b=ht*Kt):(de.t=Jt*Mt,de.b=Jt*Kt,de.yt=T-o*Mt,de.yb=T+o*Kt));var Fr=t.y<.5?"b":"t",Vr=t.x<.5?"l":"r";r._fullLayout._reservedMargin[t._id]={};var mr={r:b.width-$t-vr,l:$t+de.r,b:b.height-cr-Ot,t:cr+de.b};M&&p?WL.autoMargin(r,t._id,de):M?r._fullLayout._reservedMargin[t._id][Fr]=mr[Fr]:p||i?r._fullLayout._reservedMargin[t._id][Vr]=mr[Vr]:r._fullLayout._reservedMargin[t._id][Fr]=mr[Fr]}return xp.syncOrAsync([WL.previousPromises,ft,_t,je,WL.previousPromises,Bt],r)}function H0t(e,t,r){var i=t.orientation==="v",n=r._fullLayout,a=n._size,o,s,l;YL.init({element:e.node(),gd:r,prepFn:function(){o=e.attr("transform"),oN(e)},moveFn:function(u,f){e.attr("transform",o+g0(u,f)),s=YL.align((i?t._uFrac:t._vFrac)+u/a.w,i?t._thickFrac:t._lenFrac,0,1,t.xanchor),l=YL.align((i?t._vFrac:1-t._uFrac)-f/a.h,i?t._lenFrac:t._thickFrac,0,1,t.yanchor);var c=YL.getCursor(s,l,t.xanchor,t.yanchor);oN(e,c)},doneFn:function(){if(oN(e),s!==void 0&&l!==void 0){var u={};u[t._propPrefix+"x"]=s,u[t._propPrefix+"y"]=l,t._traceIndex!==void 0?Gpe.call("_guiRestyle",r,u,t._traceIndex):Gpe.call("_guiRelayout",r,u)}}})}function G0t(e,t,r){var i=t._levels,n=[],a=[],o,s,l=i.end+i.size/100,u=i.size,f=1.001*r[0]-.001*r[1],c=1.001*r[1]-.001*r[0];for(s=0;s<1e5&&(o=i.start+s*u,!(u>0?o>=l:o<=l));s++)o>f&&o<c&&n.push(o);if(t._fillgradient)a=[0];else if(typeof t._fillcolor=="function"){var h=t._filllevels;if(h)for(l=h.end+h.size/100,u=h.size,s=0;s<1e5&&(o=h.start+s*u,!(u>0?o>=l:o<=l));s++)o>r[0]&&o<r[1]&&a.push(o);else a=n.map(function(v){return v-i.size/2}),a.push(a[a.length-1]+i.size)}else t._fillcolor&&typeof t._fillcolor=="string"&&(a=[0]);return i.size<0&&(n.reverse(),a.reverse()),{line:n,fill:a}}function Y0t(e,t,r){var i=e._fullLayout,n=t.orientation==="v",a={type:"linear",range:r,tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:t.ticks,ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,labelalias:t.labelalias,ticklabelposition:t.ticklabelposition,ticklabeloverflow:t.ticklabeloverflow,ticklabelstep:t.ticklabelstep,tickfont:t.tickfont,tickangle:t.tickangle,tickformat:t.tickformat,exponentformat:t.exponentformat,minexponent:t.minexponent,separatethousands:t.separatethousands,showexponent:t.showexponent,showtickprefix:t.showtickprefix,tickprefix:t.tickprefix,showticksuffix:t.showticksuffix,ticksuffix:t.ticksuffix,title:t.title,showline:!0,anchor:"free",side:n?"right":"bottom",position:1},o=n?"y":"x",s={type:"linear",_id:o+t._id},l={letter:o,font:i.font,noAutotickangles:o==="y",noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:i.calendar};function u(f,c){return xp.coerce(a,s,B0t,f,c)}return z0t(a,s,u,l,i),O0t(a,s,u,l),s}jpe.exports={draw:N0t}});var Qpe=ne((tar,Jpe)=>{"use strict";Jpe.exports={moduleType:"component",name:"colorbar",attributes:gC(),supplyDefaults:mz(),draw:Kpe().draw,hasColorbar:cz()}});var e0e=ne((rar,$pe)=>{"use strict";$pe.exports={moduleType:"component",name:"legend",layoutAttributes:gO(),supplyLayoutDefaults:xO(),draw:LO(),style:SO()}});var r0e=ne((nar,t0e)=>{"use strict";t0e.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}});var i0e=ne((iar,n0e)=>{"use strict";n0e.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}});var fN=ne((aar,l0e)=>{"use strict";var W0t=wi(),s0e=Wt(),uN=s0e.extendFlat,a0e=s0e.extendDeep;function o0e(e){var t;switch(e){case"themes__thumb":t={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}function X0t(e){var t=["xaxis","yaxis","zaxis"];return t.indexOf(e.slice(0,5))>-1}l0e.exports=function(t,r){var i,n=t.data,a=t.layout,o=a0e([],n),s=a0e({},a,o0e(r.tileClass)),l=t._context||{};if(r.width&&(s.width=r.width),r.height&&(s.height=r.height),r.tileClass==="thumbnail"||r.tileClass==="themes__thumb"){s.annotations=[];var u=Object.keys(s);for(i=0;i<u.length;i++)X0t(u[i])&&(s[u[i]].title={text:""});for(i=0;i<o.length;i++){var f=o[i];f.showscale=!1,f.marker&&(f.marker.showscale=!1),W0t.traceIs(f,"pie-like")&&(f.textposition="none")}}if(Array.isArray(r.annotations))for(i=0;i<r.annotations.length;i++)s.annotations.push(r.annotations[i]);var c=Object.keys(s).filter(function(T){return T.match(/^scene\d*$/)});if(c.length){var h={};for(r.tileClass==="thumbnail"&&(h={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),i=0;i<c.length;i++){var v=s[c[i]];v.xaxis||(v.xaxis={}),v.yaxis||(v.yaxis={}),v.zaxis||(v.zaxis={}),uN(v.xaxis,h),uN(v.yaxis,h),uN(v.zaxis,h),v._scene=null}}var d=document.createElement("div");r.tileClass&&(d.className=r.tileClass);var _={gd:d,td:d,layout:s,data:o,config:{staticPlot:r.staticPlot===void 0?!0:r.staticPlot,plotGlPixelRatio:r.plotGlPixelRatio===void 0?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||!1,showLink:r.showLink||!1,showTips:r.showTips||!1,mapboxAccessToken:l.mapboxAccessToken}};return r.setBackground!=="transparent"&&(_.config.setBackground=r.setBackground||"opaque"),_.gd.defaultLayout=o0e(r.tileClass),_}});var c0e=ne((oar,f0e)=>{"use strict";var Z0t=ox().EventEmitter,j0t=wi(),K0t=Wt(),u0e=Wg(),J0t=fN(),Q0t=tL(),$0t=rL();function egt(e,t){var r=new Z0t,i=J0t(e,{format:"png"}),n=i.gd;n.style.position="absolute",n.style.left="-5000px",document.body.appendChild(n);function a(){var s=u0e.getDelay(n._fullLayout);setTimeout(function(){var l=Q0t(n),u=document.createElement("canvas");u.id=K0t.randstr(),r=$0t({format:t.format,width:n._fullLayout.width,height:n._fullLayout.height,canvas:u,emitter:r,svg:l}),r.clean=function(){n&&document.body.removeChild(n)}},s)}var o=u0e.getRedrawFunc(n);return j0t.call("_doPlot",n,i.data,i.layout,i.config).then(o).then(a).catch(function(s){r.emit("error",s)}),r}f0e.exports=egt});var d0e=ne((sar,v0e)=>{"use strict";var h0e=Wg(),tgt={getDelay:h0e.getDelay,getRedrawFunc:h0e.getRedrawFunc,clone:fN(),toSVG:tL(),svgToImg:rL(),toImage:c0e(),downloadImage:W7()};v0e.exports=tgt});var g0e=ne(Kg=>{"use strict";Kg.version=xk().version;FJ();yte();var rgt=wi(),HM=Kg.register=rgt.register,hN=Ffe(),p0e=Object.keys(hN);for(XL=0;XL<p0e.length;XL++)sw=p0e[XL],sw.charAt(0)!=="_"&&(Kg[sw]=hN[sw]),HM({moduleType:"apiMethod",name:sw,fn:hN[sw]});var sw,XL;HM(Phe());HM([nve(),gve(),Mf(),Ive(),Xve(),pde(),Fde(),epe(),mpe(),eN(),Upe(),ul(),Qpe(),e0e(),Ol(),r7()]);HM([r0e(),i0e()]);window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(HM(window.PlotlyLocales),delete window.PlotlyLocales);Kg.Icons=i4();var ZL=Ol(),cN=Zs();Kg.Plots={resize:cN.resize,graphJson:cN.graphJson,sendDataToCloud:cN.sendDataToCloud};Kg.Fx={hover:ZL.hover,unhover:ZL.unhover,loneHover:ZL.loneHover,loneUnhover:ZL.loneUnhover};Kg.Snapshot=d0e();Kg.PlotSchema=tm()});var m0e=ne((uar,y0e)=>{"use strict";y0e.exports=g0e()});var Ux=ne((far,x0e)=>{"use strict";x0e.exports={TEXTPAD:3,eventDataKeys:["value","label"]}});var J0=ne((car,T0e)=>{"use strict";var pu=cu(),_0e=kl().axisHoverFormat,ngt=Ba().hovertemplateAttrs,igt=Ba().texttemplateAttrs,w0e=Ps(),agt=ll(),b0e=Ux(),ogt=hc().pattern,Vx=oa().extendFlat,vN=agt({editType:"calc",arrayOk:!0,colorEditType:"style"}),sgt=pu.marker,lgt=sgt.line,ugt=Vx({},lgt.width,{dflt:0}),fgt=Vx({width:ugt,editType:"calc"},w0e("marker.line")),cgt=Vx({line:fgt,editType:"calc"},w0e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:ogt,cornerradius:{valType:"any",editType:"calc"}});T0e.exports={x:pu.x,x0:pu.x0,dx:pu.dx,y:pu.y,y0:pu.y0,dy:pu.dy,xperiod:pu.xperiod,yperiod:pu.yperiod,xperiod0:pu.xperiod0,yperiod0:pu.yperiod0,xperiodalignment:pu.xperiodalignment,yperiodalignment:pu.yperiodalignment,xhoverformat:_0e("x"),yhoverformat:_0e("y"),text:pu.text,texttemplate:igt({editType:"plot"},{keys:b0e.eventDataKeys}),hovertext:pu.hovertext,hovertemplate:ngt({},{keys:b0e.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:Vx({},vN,{}),insidetextfont:Vx({},vN,{}),outsidetextfont:Vx({},vN,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:Vx({},pu.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:cgt,offsetgroup:pu.offsetgroup,alignmentgroup:pu.alignmentgroup,selected:{marker:{opacity:pu.selected.marker.opacity,color:pu.selected.marker.color,editType:"style"},textfont:pu.selected.textfont,editType:"style"},unselected:{marker:{opacity:pu.unselected.marker.opacity,color:pu.unselected.marker.color,editType:"style"},textfont:pu.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}});var jL=ne((har,A0e)=>{"use strict";A0e.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}});var KL=ne((dar,E0e)=>{"use strict";var hgt=_i(),M0e=Uh().hasColorscale,S0e=Kf(),vgt=Wt().coercePattern;E0e.exports=function(t,r,i,n,a){var o=i("marker.color",n),s=M0e(t,"marker");s&&S0e(t,r,a,i,{prefix:"marker.",cLetter:"c"}),i("marker.line.color",hgt.defaultLine),M0e(t,"marker.line")&&S0e(t,r,a,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width"),i("marker.opacity"),vgt(i,"marker.pattern",o,s),i("selected.marker.color"),i("unselected.marker.color")}});var Fd=ne((par,D0e)=>{"use strict";var k0e=la(),lw=Wt(),C0e=_i(),dgt=wi(),pgt=O2(),ggt=o0(),ygt=KL(),mgt=Dx(),L0e=J0(),JL=lw.coerceFont;function xgt(e,t,r,i){function n(u,f){return lw.coerce(e,t,L0e,u,f)}var a=pgt(e,t,i,n);if(!a){t.visible=!1;return}ggt(e,t,i,n),n("xhoverformat"),n("yhoverformat"),n("orientation",t.x&&!t.y?"h":"v"),n("base"),n("offset"),n("width"),n("text"),n("hovertext"),n("hovertemplate");var o=n("textposition");R0e(e,t,i,n,o,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),ygt(e,t,n,r,i);var s=(t.marker.line||{}).color,l=dgt.getComponentMethod("errorbars","supplyDefaults");l(e,t,s||C0e.defaultLine,{axis:"y"}),l(e,t,s||C0e.defaultLine,{axis:"x",inherit:"y"}),lw.coerceSelectionMarkerOpacity(t,n)}function _gt(e,t){var r,i;function n(s,l){return lw.coerce(i._input,i,L0e,s,l)}for(var a=0;a<e.length;a++)if(i=e[a],i.type==="bar"){r=i._input;var o=n("marker.cornerradius",t.barcornerradius);i.marker&&(i.marker.cornerradius=P0e(o)),t.barmode==="group"&&mgt(r,i,t,n)}}function P0e(e){if(k0e(e)){if(e=+e,e>=0)return e}else if(typeof e=="string"&&(e=e.trim(),e.slice(-1)==="%"&&k0e(e.slice(0,-1))&&(e=+e.slice(0,-1),e>=0)))return e+"%"}function R0e(e,t,r,i,n,a){a=a||{};var o=a.moduleHasSelected!==!1,s=a.moduleHasUnselected!==!1,l=a.moduleHasConstrain!==!1,u=a.moduleHasCliponaxis!==!1,f=a.moduleHasTextangle!==!1,c=a.moduleHasInsideanchor!==!1,h=!!a.hasPathbar,v=Array.isArray(n)||n==="auto",d=v||n==="inside",_=v||n==="outside";if(d||_){var T=JL(i,"textfont",r.font),p=lw.extendFlat({},T),M=e.textfont&&e.textfont.color,b=!M;if(b&&delete p.color,JL(i,"insidetextfont",p),h){var w=lw.extendFlat({},T);b&&delete w.color,JL(i,"pathbar.textfont",w)}_&&JL(i,"outsidetextfont",T),o&&i("selected.textfont.color"),s&&i("unselected.textfont.color"),l&&i("constraintext"),u&&i("cliponaxis"),f&&i("textangle"),i("texttemplate")}d&&c&&i("insidetextanchor")}D0e.exports={supplyDefaults:xgt,crossTraceDefaults:_gt,handleText:R0e,validateCornerradius:P0e}});var dN=ne((gar,I0e)=>{"use strict";var bgt=wi(),wgt=Xi(),Tgt=Wt(),Agt=jL(),Mgt=Fd().validateCornerradius;I0e.exports=function(e,t,r){function i(d,_){return Tgt.coerce(e,t,Agt,d,_)}for(var n=!1,a=!1,o=!1,s={},l=i("barmode"),u=0;u<r.length;u++){var f=r[u];if(bgt.traceIs(f,"bar")&&f.visible)n=!0;else continue;if(l==="group"){var c=f.xaxis+f.yaxis;s[c]&&(o=!0),s[c]=!0}if(f.visible&&f.type==="histogram"){var h=wgt.getFromId({_fullLayout:t},f[f.orientation==="v"?"xaxis":"yaxis"]);h.type!=="category"&&(a=!0)}}if(!n){delete t.barmode;return}l!=="overlay"&&i("barnorm"),i("bargap",a&&!o?0:.2),i("bargroupgap");var v=i("barcornerradius");t.barcornerradius=Mgt(v)}});var GM=ne((yar,F0e)=>{"use strict";var uw=Wt();F0e.exports=function(t,r){for(var i=0;i<t.length;i++)t[i].i=i;uw.mergeArray(r.text,t,"tx"),uw.mergeArray(r.hovertext,t,"htx");var n=r.marker;if(n){uw.mergeArray(n.opacity,t,"mo",!0),uw.mergeArray(n.color,t,"mc");var a=n.line;a&&(uw.mergeArray(a.color,t,"mlc"),uw.mergeArrayCastPositive(a.width,t,"mlw"))}}});var U0e=ne((mar,N0e)=>{"use strict";var q0e=Xi(),z0e=u0(),O0e=Uh().hasColorscale,B0e=gv(),Sgt=GM(),Egt=gp();N0e.exports=function(t,r){var i=q0e.getFromId(t,r.xaxis||"x"),n=q0e.getFromId(t,r.yaxis||"y"),a,o,s,l,u,f,c={msUTC:!!(r.base||r.base===0)};r.orientation==="h"?(a=i.makeCalcdata(r,"x",c),s=n.makeCalcdata(r,"y"),l=z0e(r,n,"y",s),u=!!r.yperiodalignment,f="y"):(a=n.makeCalcdata(r,"y",c),s=i.makeCalcdata(r,"x"),l=z0e(r,i,"x",s),u=!!r.xperiodalignment,f="x"),o=l.vals;for(var h=Math.min(o.length,a.length),v=new Array(h),d=0;d<h;d++)v[d]={p:o[d],s:a[d]},u&&(v[d].orig_p=s[d],v[d][f+"End"]=l.ends[d],v[d][f+"Start"]=l.starts[d]),r.ids&&(v[d].id=String(r.ids[d]));return O0e(r,"marker")&&B0e(t,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),O0e(r,"marker.line")&&B0e(t,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}),Sgt(v,r),Egt(v,r),v}});var yh=ne((xar,H0e)=>{"use strict";var kgt=Ai(),Cgt=Wt();function Lgt(e,t,r){var i=e._fullLayout,n=i["_"+r+"Text_minsize"];if(n){var a=i.uniformtext.mode==="hide",o;switch(r){case"funnelarea":case"pie":case"sunburst":o="g.slice";break;case"treemap":case"icicle":o="g.slice, g.pathbar";break;default:o="g.points > g.point"}t.selectAll(o).each(function(s){var l=s.transform;if(l){l.scale=a&&l.hide?0:n/l.fontSize;var u=kgt.select(this).select("text");Cgt.setTransormAndDisplay(u,l)}})}}function Pgt(e,t,r){if(r.uniformtext.mode){var i=V0e(e),n=r.uniformtext.minsize,a=t.scale*t.fontSize;t.hide=a<n,r[i]=r[i]||1/0,t.hide||(r[i]=Math.min(r[i],Math.max(a,n)))}}function Rgt(e,t){var r=V0e(e);t[r]=void 0}function V0e(e){return"_"+e+"Text_minsize"}H0e.exports={recordMinTextSize:Pgt,clearMinTextSize:Rgt,resizeText:Lgt}});var QL=ne(Hx=>{"use strict";var Dgt=la(),Igt=Xf(),G0e=Wt().isArrayOrTypedArray;Hx.coerceString=function(e,t,r){if(typeof t=="string"){if(t||!e.noBlank)return t}else if((typeof t=="number"||t===!0)&&!e.strict)return String(t);return r!==void 0?r:e.dflt};Hx.coerceNumber=function(e,t,r){if(Dgt(t)){t=+t;var i=e.min,n=e.max,a=i!==void 0&&t<i||n!==void 0&&t>n;if(!a)return t}return r!==void 0?r:e.dflt};Hx.coerceColor=function(e,t,r){return Igt(t).isValid()?t:r!==void 0?r:e.dflt};Hx.coerceEnumerated=function(e,t,r){return e.coerceNumber&&(t=+t),e.values.indexOf(t)!==-1?t:r!==void 0?r:e.dflt};Hx.getValue=function(e,t){var r;return G0e(e)?t<e.length&&(r=e[t]):r=e,r};Hx.getLineWidth=function(e,t){var r=0<t.mlw?t.mlw:G0e(e.marker.line.width)?0:e.marker.line.width;return r}});var _p=ne((bar,tge)=>{"use strict";var YM=Ai(),Fgt=_i(),WM=aa(),Y0e=Wt(),W0e=wi(),X0e=yh().resizeText,pN=J0(),qgt=pN.textfont,zgt=pN.insidetextfont,Ogt=pN.outsidetextfont,fw=QL();function Bgt(e){var t=YM.select(e).selectAll("g.barlayer").selectAll("g.trace");X0e(e,t,"bar");var r=t.size(),i=e._fullLayout;t.style("opacity",function(n){return n[0].trace.opacity}).each(function(n){(i.barmode==="stack"&&r>1||i.bargap===0&&i.bargroupgap===0&&!n[0].trace.marker.line.width)&&YM.select(this).attr("shape-rendering","crispEdges")}),t.selectAll("g.points").each(function(n){var a=YM.select(this),o=n[0].trace;Z0e(a,o,e)}),W0e.getComponentMethod("errorbars","style")(t)}function Z0e(e,t,r){WM.pointStyle(e.selectAll("path"),t,r),j0e(e,t,r)}function j0e(e,t,r){e.selectAll("text").each(function(i){var n=YM.select(this),a=Y0e.ensureUniformFontSize(r,K0e(n,i,t,r));WM.font(n,a)})}function Ngt(e,t,r){var i=t[0].trace;i.selectedpoints?Ugt(r,i,e):(Z0e(r,i,e),W0e.getComponentMethod("errorbars","style")(r))}function Ugt(e,t,r){WM.selectedPointStyle(e.selectAll("path"),t),Vgt(e.selectAll("text"),t,r)}function Vgt(e,t,r){e.each(function(i){var n=YM.select(this),a;if(i.selected){a=Y0e.ensureUniformFontSize(r,K0e(n,i,t,r));var o=t.selected.textfont&&t.selected.textfont.color;o&&(a.color=o),WM.font(n,a)}else WM.selectedTextStyle(n,t)})}function K0e(e,t,r,i){var n=i._fullLayout.font,a=r.textfont;if(e.classed("bartext-inside")){var o=ege(t,r);a=Q0e(r,t.i,n,o)}else e.classed("bartext-outside")&&(a=$0e(r,t.i,n));return a}function J0e(e,t,r){return gN(qgt,e.textfont,t,r)}function Q0e(e,t,r,i){var n=J0e(e,t,r),a=e._input.textfont===void 0||e._input.textfont.color===void 0||Array.isArray(e.textfont.color)&&e.textfont.color[t]===void 0;return a&&(n={color:Fgt.contrast(i),family:n.family,size:n.size}),gN(zgt,e.insidetextfont,t,n)}function $0e(e,t,r){var i=J0e(e,t,r);return gN(Ogt,e.outsidetextfont,t,i)}function gN(e,t,r,i){t=t||{};var n=fw.getValue(t.family,r),a=fw.getValue(t.size,r),o=fw.getValue(t.color,r);return{family:fw.coerceString(e.family,n,i.family),size:fw.coerceNumber(e.size,a,i.size),color:fw.coerceColor(e.color,o,i.color)}}function ege(e,t){return t.type==="waterfall"?t[e.dir].marker.color:e.mcc||e.mc||t.marker.color}tge.exports={style:Bgt,styleTextPoints:j0e,styleOnSelect:Ngt,getInsideTextFont:Q0e,getOutsideTextFont:$0e,getBarColor:ege,resizeText:X0e}});var Yx=ne((war,uge)=>{"use strict";var $L=Ai(),eP=la(),gc=Wt(),Hgt=Es(),Ggt=_i(),Pm=aa(),Ygt=wi(),tP=Xi().tickText,rge=yh(),Wgt=rge.recordMinTextSize,Xgt=rge.clearMinTextSize,yN=_p(),cw=QL(),Zgt=Ux(),nge=J0(),jgt=nge.text,Kgt=nge.textposition,Jgt=td().appendArrayPointValue,Zh=Zgt.TEXTPAD;function Qgt(e){return e.id}function $gt(e){if(e.ids)return Qgt}function mN(e){return(e>0)-(e<0)}function Q0(e,t){return e<t?1:-1}function eyt(e,t,r,i){var n=[],a=[],o=i?t:r,s=i?r:t;return n[0]=o.c2p(e.s0,!0),a[0]=s.c2p(e.p0,!0),n[1]=o.c2p(e.s1,!0),a[1]=s.c2p(e.p1,!0),i?[n,a]:[a,n]}function ige(e,t,r,i){if(!t.uniformtext.mode&&age(r)){var n;return i&&(n=i()),e.transition().duration(r.duration).ease(r.easing).each("end",function(){n&&n()}).each("interrupt",function(){n&&n()})}else return e}function age(e){return e&&e.duration>0}function tyt(e,t,r,i,n,a){var o=t.xaxis,s=t.yaxis,l=e._fullLayout,u=e._context.staticPlot;n||(n={mode:l.barmode,norm:l.barmode,gap:l.bargap,groupgap:l.bargroupgap},Xgt("bar",l));var f=gc.makeTraceGroups(i,r,"trace bars").each(function(c){var h=$L.select(this),v=c[0].trace,d=c[0].t,_=v.type==="waterfall",T=v.type==="funnel",p=v.type==="histogram",M=v.type==="bar",b=M||T,w=0;_&&v.connector.visible&&v.connector.mode==="between"&&(w=v.connector.line.width/2);var k=v.orientation==="h",x=age(n),E=gc.ensureSingle(h,"g","points"),S=$gt(v),g=E.selectAll("g.point").data(gc.identity,S);g.enter().append("g").classed("point",!0),g.exit().remove(),g.each(function(A,P){var D=$L.select(this),z=eyt(A,o,s,k),O=z[0][0],V=z[0][1],B=z[1][0],F=z[1][1],N=(k?V-O:F-B)===0;N&&b&&cw.getLineWidth(v,A)&&(N=!1),N||(N=!eP(O)||!eP(V)||!eP(B)||!eP(F)),A.isBlank=N,N&&(k?V=O:F=B),w&&!N&&(k?(O-=Q0(O,V)*w,V+=Q0(O,V)*w):(B-=Q0(B,F)*w,F+=Q0(B,F)*w));var Z,J;if(v.type==="waterfall"){if(!N){var re=v[A.dir].marker;Z=re.line.width,J=re.color}}else Z=cw.getLineWidth(v,A),J=A.mc||v.marker.color;function ue(Me){var Ze=$L.round(Z/2%1,2);return n.gap===0&&n.groupgap===0?$L.round(Math.round(Me)-Ze,2):Me}function fe(Me,Ze,dt){return dt&&Me===Ze?Me:Math.abs(Me-Ze)>=2?ue(Me):Me>Ze?Math.ceil(Me):Math.floor(Me)}var K=Ggt.opacity(J),X=K<1||Z>.01?ue:fe;e._context.staticPlot||(O=X(O,V,k),V=X(V,O,k),B=X(B,F,!k),F=X(F,B,!k));var ae=k?o.c2p:s.c2p,oe;A.s0>0?oe=A._sMax:A.s0<0?oe=A._sMin:oe=A.s1>0?A._sMax:A._sMin;function me(Me,Ze){if(!Me)return 0;var dt=Math.abs(k?F-B:V-O),it=Math.abs(k?V-O:F-B),vt=X(Math.abs(ae(oe,!0)-ae(0,!0))),rt=A.hasB?Math.min(dt/2,it/2):Math.min(dt/2,vt),We;if(Ze==="%"){var ht=Math.min(50,Me);We=dt*(ht/100)}else We=Me;return X(Math.max(Math.min(We,rt),0))}var xe=M||p?me(d.cornerradiusvalue,d.cornerradiusform):0,ce,ie,ge="M"+O+","+B+"V"+F+"H"+V+"V"+B+"Z",le=0;if(xe&&A.s){var we=mN(A.s0)===0||mN(A.s)===mN(A.s0)?A.s1:A.s0;if(le=X(A.hasB?0:Math.abs(ae(oe,!0)-ae(we,!0))),le<xe){var Re=Q0(O,V),qe=Q0(B,F),et=Re===-qe?1:0;if(k)if(A.hasB)ce="M"+(O+xe*Re)+","+B+"A "+xe+","+xe+" 0 0 "+et+" "+O+","+(B+xe*qe)+"V"+(F-xe*qe)+"A "+xe+","+xe+" 0 0 "+et+" "+(O+xe*Re)+","+F+"H"+(V-xe*Re)+"A "+xe+","+xe+" 0 0 "+et+" "+V+","+(F-xe*qe)+"V"+(B+xe*qe)+"A "+xe+","+xe+" 0 0 "+et+" "+(V-xe*Re)+","+B+"Z";else{ie=Math.abs(V-O)+le;var Pe=ie<xe?xe-Math.sqrt(ie*(2*xe-ie)):0,Ie=le>0?Math.sqrt(le*(2*xe-le)):0,ut=Re>0?Math.max:Math.min;ce="M"+O+","+B+"V"+(F-Pe*qe)+"H"+ut(V-(xe-le)*Re,O)+"A "+xe+","+xe+" 0 0 "+et+" "+V+","+(F-xe*qe-Ie)+"V"+(B+xe*qe+Ie)+"A "+xe+","+xe+" 0 0 "+et+" "+ut(V-(xe-le)*Re,O)+","+(B+Pe*qe)+"Z"}else if(A.hasB)ce="M"+(O+xe*Re)+","+B+"A "+xe+","+xe+" 0 0 "+et+" "+O+","+(B+xe*qe)+"V"+(F-xe*qe)+"A "+xe+","+xe+" 0 0 "+et+" "+(O+xe*Re)+","+F+"H"+(V-xe*Re)+"A "+xe+","+xe+" 0 0 "+et+" "+V+","+(F-xe*qe)+"V"+(B+xe*qe)+"A "+xe+","+xe+" 0 0 "+et+" "+(V-xe*Re)+","+B+"Z";else{ie=Math.abs(F-B)+le;var ft=ie<xe?xe-Math.sqrt(ie*(2*xe-ie)):0,je=le>0?Math.sqrt(le*(2*xe-le)):0,_t=qe>0?Math.max:Math.min;ce="M"+(O+ft*Re)+","+B+"V"+_t(F-(xe-le)*qe,B)+"A "+xe+","+xe+" 0 0 "+et+" "+(O+xe*Re-je)+","+F+"H"+(V-xe*Re+je)+"A "+xe+","+xe+" 0 0 "+et+" "+(V-ft*Re)+","+_t(F-(xe-le)*qe,B)+"V"+B+"Z"}}else ce=ge}else ce=ge;var Bt=ige(gc.ensureSingle(D,"path"),l,n,a);if(Bt.style("vector-effect",u?"none":"non-scaling-stroke").attr("d",isNaN((V-O)*(F-B))||N&&e._context.staticPlot?"M0,0Z":ce).call(Pm.setClipUrl,t.layerClipId,e),!l.uniformtext.mode&&x){var Lt=Pm.makePointStyleFns(v);Pm.singlePointStyle(A,Bt,v,Lt,e)}ryt(e,t,D,c,P,O,V,B,F,xe,le,n,a),t.layerClipId&&Pm.hideOutsideRangePoint(A,D.select("text"),o,s,v.xcalendar,v.ycalendar)});var C=v.cliponaxis===!1;Pm.setClipUrl(h,C?null:t.layerClipId,e)});Ygt.getComponentMethod("errorbars","plot")(e,f,t,n)}function ryt(e,t,r,i,n,a,o,s,l,u,f,c,h){var v=t.xaxis,d=t.yaxis,_=e._fullLayout,T;function p(ie,ge,le){var we=gc.ensureSingle(ie,"text").text(ge).attr({class:"bartext bartext-"+T,"text-anchor":"middle","data-notex":1}).call(Pm.font,le).call(Hgt.convertToTspans,e);return we}var M=i[0].trace,b=M.orientation==="h",w=ayt(_,i,n,v,d);T=oyt(M,n);var k=c.mode==="stack"||c.mode==="relative",x=i[n],E=!k||x._outmost,S=x.hasB,g=u&&u-f>Zh;if(!w||T==="none"||(x.isBlank||a===o||s===l)&&(T==="auto"||T==="inside")){r.select("text").remove();return}var C=_.font,A=yN.getBarColor(i[n],M),P=yN.getInsideTextFont(M,n,C,A),D=yN.getOutsideTextFont(M,n,C),z=M.insidetextanchor||"end",O=r.datum();b?v.type==="log"&&O.s0<=0&&(v.range[0]<v.range[1]?a=0:a=v._length):d.type==="log"&&O.s0<=0&&(d.range[0]<d.range[1]?s=d._length:s=0);var V=Math.abs(o-a),B=Math.abs(l-s),F=V-2*Zh,N=B-2*Zh,Z,J,re,ue,fe;if(T==="outside"&&!E&&!x.hasB&&(T="inside"),T==="auto")if(E){T="inside",fe=gc.ensureUniformFontSize(e,P),Z=p(r,w,fe),J=Pm.bBox(Z.node()),re=J.width,ue=J.height;var K=re>0&&ue>0,X;g?S?X=Gx(F-2*u,N,re,ue,b)||Gx(F,N-2*u,re,ue,b):b?X=Gx(F-(u-f),N,re,ue,b)||Gx(F,N-2*(u-f),re,ue,b):X=Gx(F,N-(u-f),re,ue,b)||Gx(F-2*(u-f),N,re,ue,b):X=Gx(F,N,re,ue,b),K&&X?T="inside":(T="outside",Z.remove(),Z=null)}else T="inside";if(!Z){fe=gc.ensureUniformFontSize(e,T==="outside"?D:P),Z=p(r,w,fe);var ae=Z.attr("transform");if(Z.attr("transform",""),J=Pm.bBox(Z.node()),re=J.width,ue=J.height,Z.attr("transform",ae),re<=0||ue<=0){Z.remove();return}}var oe=M.textangle,me,xe;T==="outside"?(xe=M.constraintext==="both"||M.constraintext==="outside",me=iyt(a,o,s,l,J,{isHorizontal:b,constrained:xe,angle:oe})):(xe=M.constraintext==="both"||M.constraintext==="inside",me=lge(a,o,s,l,J,{isHorizontal:b,constrained:xe,angle:oe,anchor:z,hasB:S,r:u,overhead:f})),me.fontSize=fe.size,Wgt(M.type==="histogram"?"bar":M.type,me,_),x.transform=me;var ce=ige(Z,_,c,h);gc.setTransormAndDisplay(ce,me)}function Gx(e,t,r,i,n){if(e<0||t<0)return!1;var a=r<=e&&i<=t,o=r<=t&&i<=e,s=n?e>=r*(t/i):t>=i*(e/r);return a||o||s}function oge(e){return e==="auto"?0:e}function sge(e,t){var r=Math.PI/180*t,i=Math.abs(Math.sin(r)),n=Math.abs(Math.cos(r));return{x:e.width*n+e.height*i,y:e.width*i+e.height*n}}function lge(e,t,r,i,n,a){var o=!!a.isHorizontal,s=!!a.constrained,l=a.angle||0,u=a.anchor,f=u==="end",c=u==="start",h=a.leftToRight||0,v=(h+1)/2,d=1-v,_=a.hasB,T=a.r,p=a.overhead,M=n.width,b=n.height,w=Math.abs(t-e),k=Math.abs(i-r),x=w>2*Zh&&k>2*Zh?Zh:0;w-=2*x,k-=2*x;var E=oge(l);l==="auto"&&!(M<=w&&b<=k)&&(M>w||b>k)&&(!(M>k||b>w)||M<b!=w<k)&&(E+=90);var S=sge(n,E),g,C;if(T&&T-p>Zh){var A=nyt(e,t,r,i,S,T,p,o,_);g=A.scale,C=A.pad}else g=1,s&&(g=Math.min(1,w/S.x,k/S.y)),C=0;var P=n.left*d+n.right*v,D=(n.top+n.bottom)/2,z=(e+Zh)*d+(t-Zh)*v,O=(r+i)/2,V=0,B=0;if(c||f){var F=(o?S.x:S.y)/2;T&&(f||_)&&(x+=C);var N=o?Q0(e,t):Q0(r,i);o?c?(z=e+N*x,V=-N*F):(z=t-N*x,V=N*F):c?(O=r+N*x,B=-N*F):(O=i-N*x,B=N*F)}return{textX:P,textY:D,targetX:z,targetY:O,anchorX:V,anchorY:B,scale:g,rotate:E}}function nyt(e,t,r,i,n,a,o,s,l){var u=Math.max(0,Math.abs(t-e)-2*Zh),f=Math.max(0,Math.abs(i-r)-2*Zh),c=a-Zh,h=o?c-Math.sqrt(c*c-(c-o)*(c-o)):c,v=l?c*2:s?c-o:2*h,d=l?c*2:s?2*h:c-o,_,T,p,M,b;return n.y/n.x>=f/(u-v)?M=f/n.y:n.y/n.x<=(f-d)/u?M=u/n.x:!l&&s?(_=n.x*n.x+n.y*n.y/4,T=-2*n.x*(u-c)-n.y*(f/2-c),p=(u-c)*(u-c)+(f/2-c)*(f/2-c)-c*c,M=(-T+Math.sqrt(T*T-4*_*p))/(2*_)):l?(_=(n.x*n.x+n.y*n.y)/4,T=-n.x*(u/2-c)-n.y*(f/2-c),p=(u/2-c)*(u/2-c)+(f/2-c)*(f/2-c)-c*c,M=(-T+Math.sqrt(T*T-4*_*p))/(2*_)):(_=n.x*n.x/4+n.y*n.y,T=-n.x*(u/2-c)-2*n.y*(f-c),p=(u/2-c)*(u/2-c)+(f-c)*(f-c)-c*c,M=(-T+Math.sqrt(T*T-4*_*p))/(2*_)),M=Math.min(1,M),s?b=Math.max(0,c-Math.sqrt(Math.max(0,c*c-(c-(f-n.y*M)/2)*(c-(f-n.y*M)/2)))-o):b=Math.max(0,c-Math.sqrt(Math.max(0,c*c-(c-(u-n.x*M)/2)*(c-(u-n.x*M)/2)))-o),{scale:M,pad:b}}function iyt(e,t,r,i,n,a){var o=!!a.isHorizontal,s=!!a.constrained,l=a.angle||0,u=n.width,f=n.height,c=Math.abs(t-e),h=Math.abs(i-r),v;o?v=h>2*Zh?Zh:0:v=c>2*Zh?Zh:0;var d=1;s&&(d=o?Math.min(1,h/f):Math.min(1,c/u));var _=oge(l),T=sge(n,_),p=(o?T.x:T.y)/2,M=(n.left+n.right)/2,b=(n.top+n.bottom)/2,w=(e+t)/2,k=(r+i)/2,x=0,E=0,S=o?Q0(t,e):Q0(r,i);return o?(w=t-S*v,x=S*p):(k=i+S*v,E=-S*p),{textX:M,textY:b,targetX:w,targetY:k,anchorX:x,anchorY:E,scale:d,rotate:_}}function ayt(e,t,r,i,n){var a=t[0].trace,o=a.texttemplate,s;return o?s=syt(e,t,r,i,n):a.textinfo?s=lyt(t,r,i,n):s=cw.getValue(a.text,r),cw.coerceString(jgt,s)}function oyt(e,t){var r=cw.getValue(e.textposition,t);return cw.coerceEnumerated(Kgt,r)}function syt(e,t,r,i,n){var a=t[0].trace,o=gc.castOption(a,r,"texttemplate");if(!o)return"";var s=a.type==="histogram",l=a.type==="waterfall",u=a.type==="funnel",f=a.orientation==="h",c,h,v,d;f?(c="y",h=n,v="x",d=i):(c="x",h=i,v="y",d=n);function _(x){return tP(h,h.c2l(x),!0).text}function T(x){return tP(d,d.c2l(x),!0).text}var p=t[r],M={};M.label=p.p,M.labelLabel=M[c+"Label"]=_(p.p);var b=gc.castOption(a,p.i,"text");(b===0||b)&&(M.text=b),M.value=p.s,M.valueLabel=M[v+"Label"]=T(p.s);var w={};Jgt(w,a,p.i),(s||w.x===void 0)&&(w.x=f?M.value:M.label),(s||w.y===void 0)&&(w.y=f?M.label:M.value),(s||w.xLabel===void 0)&&(w.xLabel=f?M.valueLabel:M.labelLabel),(s||w.yLabel===void 0)&&(w.yLabel=f?M.labelLabel:M.valueLabel),l&&(M.delta=+p.rawS||p.s,M.deltaLabel=T(M.delta),M.final=p.v,M.finalLabel=T(M.final),M.initial=M.final-M.delta,M.initialLabel=T(M.initial)),u&&(M.value=p.s,M.valueLabel=T(M.value),M.percentInitial=p.begR,M.percentInitialLabel=gc.formatPercent(p.begR),M.percentPrevious=p.difR,M.percentPreviousLabel=gc.formatPercent(p.difR),M.percentTotal=p.sumR,M.percenTotalLabel=gc.formatPercent(p.sumR));var k=gc.castOption(a,p.i,"customdata");return k&&(M.customdata=k),gc.texttemplateString(o,M,e._d3locale,w,M,a._meta||{})}function lyt(e,t,r,i){var n=e[0].trace,a=n.orientation==="h",o=n.type==="waterfall",s=n.type==="funnel";function l(k){var x=a?i:r;return tP(x,k,!0).text}function u(k){var x=a?r:i;return tP(x,+k,!0).text}var f=n.textinfo,c=e[t],h=f.split("+"),v=[],d,_=function(k){return h.indexOf(k)!==-1};if(_("label")&&v.push(l(e[t].p)),_("text")&&(d=gc.castOption(n,c.i,"text"),(d===0||d)&&v.push(d)),o){var T=+c.rawS||c.s,p=c.v,M=p-T;_("initial")&&v.push(u(M)),_("delta")&&v.push(u(T)),_("final")&&v.push(u(p))}if(s){_("value")&&v.push(u(c.s));var b=0;_("percent initial")&&b++,_("percent previous")&&b++,_("percent total")&&b++;var w=b>1;_("percent initial")&&(d=gc.formatPercent(c.begR),w&&(d+=" of initial"),v.push(d)),_("percent previous")&&(d=gc.formatPercent(c.difR),w&&(d+=" of previous"),v.push(d)),_("percent total")&&(d=gc.formatPercent(c.sumR),w&&(d+=" of total"),v.push(d))}return v.join("<br>")}uge.exports={plot:tyt,toMoveInsideBar:lge}});var hw=ne((Tar,vge)=>{"use strict";var XM=Ol(),uyt=wi(),fge=_i(),fyt=Wt().fillText,cyt=QL().getLineWidth,xN=Xi().hoverLabelText,hyt=$a().BADNUM;function vyt(e,t,r,i,n){var a=cge(e,t,r,i,n);if(a){var o=a.cd,s=o[0].trace,l=o[a.index];return a.color=hge(s,l),uyt.getComponentMethod("errorbars","hoverInfo")(l,s,a),[a]}}function cge(e,t,r,i,n){var a=e.cd,o=a[0].trace,s=a[0].t,l=i==="closest",u=o.type==="waterfall",f=e.maxHoverDistance,c=e.maxSpikeDistance,h,v,d,_,T,p,M;o.orientation==="h"?(h=r,v=t,d="y",_="x",T=O,p=P):(h=t,v=r,d="x",_="y",p=O,T=P);var b=o[d+"period"],w=l||b;function k(X){return E(X,-1)}function x(X){return E(X,1)}function E(X,ae){var oe=X.w;return X[d]+ae*oe/2}function S(X){return X[d+"End"]-X[d+"Start"]}var g=l?k:b?function(X){return X.p-S(X)/2}:function(X){return Math.min(k(X),X.p-s.bardelta/2)},C=l?x:b?function(X){return X.p+S(X)/2}:function(X){return Math.max(x(X),X.p+s.bardelta/2)};function A(X,ae,oe){return n.finiteRange&&(oe=0),XM.inbox(X-h,ae-h,oe+Math.min(1,Math.abs(ae-X)/M)-1)}function P(X){return A(g(X),C(X),f)}function D(X){return A(k(X),x(X),c)}function z(X){var ae=X[_];if(u){var oe=Math.abs(X.rawS)||0;v>0?ae+=oe:v<0&&(ae-=oe)}return ae}function O(X){var ae=v,oe=X.b,me=z(X);return XM.inbox(oe-ae,me-ae,f+(me-ae)/(me-oe)-1)}function V(X){var ae=v,oe=X.b,me=z(X);return XM.inbox(oe-ae,me-ae,c+(me-ae)/(me-oe)-1)}var B=e[d+"a"],F=e[_+"a"];M=Math.abs(B.r2c(B.range[1])-B.r2c(B.range[0]));function N(X){return(T(X)+p(X))/2}var Z=XM.getDistanceFunction(i,T,p,N);if(XM.getClosest(a,Z,e),e.index!==!1&&a[e.index].p!==hyt){w||(g=function(X){return Math.min(k(X),X.p-s.bargroupwidth/2)},C=function(X){return Math.max(x(X),X.p+s.bargroupwidth/2)});var J=e.index,re=a[J],ue=o.base?re.b+re.s:re.s;e[_+"0"]=e[_+"1"]=F.c2p(re[_],!0),e[_+"LabelVal"]=ue;var fe=s.extents[s.extents.round(re.p)];e[d+"0"]=B.c2p(l?g(re):fe[0],!0),e[d+"1"]=B.c2p(l?C(re):fe[1],!0);var K=re.orig_p!==void 0;return e[d+"LabelVal"]=K?re.orig_p:re.p,e.labelLabel=xN(B,e[d+"LabelVal"],o[d+"hoverformat"]),e.valueLabel=xN(F,e[_+"LabelVal"],o[_+"hoverformat"]),e.baseLabel=xN(F,re.b,o[_+"hoverformat"]),e.spikeDistance=(V(re)+D(re))/2,e[d+"Spike"]=B.c2p(re.p,!0),fyt(re,o,e),e.hovertemplate=o.hovertemplate,e}}function hge(e,t){var r=t.mcc||e.marker.color,i=t.mlcc||e.marker.line.color,n=cyt(e,t);if(fge.opacity(r))return r;if(fge.opacity(i)&&n)return i}vge.exports={hoverPoints:vyt,hoverOnBars:cge,getTraceColor:hge}});var pge=ne((Aar,dge)=>{"use strict";dge.exports=function(t,r,i){return t.x="xVal"in r?r.xVal:r.x,t.y="yVal"in r?r.yVal:r.y,r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),i.orientation==="h"?(t.label=t.y,t.value=t.x):(t.label=t.x,t.value=t.y),t}});var vw=ne((Mar,gge)=>{"use strict";gge.exports=function(t,r){var i=t.cd,n=t.xaxis,a=t.yaxis,o=i[0].trace,s=o.type==="funnel",l=o.orientation==="h",u=[],f;if(r===!1)for(f=0;f<i.length;f++)i[f].selected=0;else for(f=0;f<i.length;f++){var c=i[f],h="ct"in c?c.ct:dyt(c,n,a,l,s);r.contains(h,!1,f,t)?(u.push({pointNumber:f,x:n.c2d(c.x),y:a.c2d(c.y)}),c.selected=1):c.selected=0}return u};function dyt(e,t,r,i,n){var a=t.c2p(i?e.s0:e.p0,!0),o=t.c2p(i?e.s1:e.p1,!0),s=r.c2p(i?e.p0:e.s0,!0),l=r.c2p(i?e.p1:e.s1,!0);return n?[(a+o)/2,(s+l)/2]:i?[o,(s+l)/2]:[(a+o)/2,l]}});var mge=ne((Sar,yge)=>{"use strict";yge.exports={attributes:J0(),layoutAttributes:jL(),supplyDefaults:Fd().supplyDefaults,crossTraceDefaults:Fd().crossTraceDefaults,supplyLayoutDefaults:dN(),calc:U0e(),crossTraceCalc:Ix().crossTraceCalc,colorbar:ph(),arraysToCalcdata:GM(),plot:Yx().plot,style:_p().style,styleOnSelect:_p().styleOnSelect,hoverPoints:hw().hoverPoints,eventData:pge(),selectPoints:vw(),moduleType:"trace",name:"bar",basePlotModule:vu(),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}});var _ge=ne((Ear,xge)=>{"use strict";xge.exports=mge()});var ZM=ne((kar,Age)=>{"use strict";var pyt=Y0(),y0=cu(),bge=J0(),gyt=Ku(),wge=kl().axisHoverFormat,yyt=Ba().hovertemplateAttrs,Jg=oa().extendFlat,dw=y0.marker,Tge=dw.line;Age.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:y0.xperiod,yperiod:y0.yperiod,xperiod0:y0.xperiod0,yperiod0:y0.yperiod0,xperiodalignment:y0.xperiodalignment,yperiodalignment:y0.yperiodalignment,xhoverformat:wge("x"),yhoverformat:wge("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:Jg({},dw.symbol,{arrayOk:!1,editType:"plot"}),opacity:Jg({},dw.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:Jg({},dw.angle,{arrayOk:!1,editType:"calc"}),size:Jg({},dw.size,{arrayOk:!1,editType:"calc"}),color:Jg({},dw.color,{arrayOk:!1,editType:"style"}),line:{color:Jg({},Tge.color,{arrayOk:!1,dflt:gyt.defaultLine,editType:"style"}),width:Jg({},Tge.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:pyt(),whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:bge.offsetgroup,alignmentgroup:bge.alignmentgroup,selected:{marker:y0.selected.marker,editType:"style"},unselected:{marker:y0.unselected.marker,editType:"style"},text:Jg({},y0.text,{}),hovertext:Jg({},y0.hovertext,{}),hovertemplate:yyt({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}});var jM=ne((Car,Mge)=>{"use strict";Mge.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}});var JM=ne((Lar,Cge)=>{"use strict";var bp=Wt(),myt=wi(),xyt=_i(),_yt=o0(),byt=Dx(),Sge=m2(),KM=ZM();function wyt(e,t,r,i){function n(d,_){return bp.coerce(e,t,KM,d,_)}if(Ege(e,t,n,i),t.visible!==!1){_yt(e,t,i,n),n("xhoverformat"),n("yhoverformat");var a=t._hasPreCompStats;a&&(n("lowerfence"),n("upperfence")),n("line.color",(e.marker||{}).color||r),n("line.width"),n("fillcolor",xyt.addOpacity(t.line.color,.5));var o=!1;if(a){var s=n("mean"),l=n("sd");s&&s.length&&(o=!0,l&&l.length&&(o="sd"))}n("whiskerwidth");var u=n("sizemode"),f;u==="quartiles"&&(f=n("boxmean",o)),n("showwhiskers",u==="quartiles"),(u==="sd"||f==="sd")&&n("sdmultiple"),n("width"),n("quartilemethod");var c=!1;if(a){var h=n("notchspan");h&&h.length&&(c=!0)}else bp.validate(e.notchwidth,KM.notchwidth)&&(c=!0);var v=n("notched",c);v&&n("notchwidth"),kge(e,t,n,{prefix:"box"})}}function Ege(e,t,r,i){function n(C){var A=0;return C&&C.length&&(A+=1,bp.isArrayOrTypedArray(C[0])&&C[0].length&&(A+=1)),A}function a(C){return bp.validate(e[C],KM[C])}var o=r("y"),s=r("x"),l;if(t.type==="box"){var u=r("q1"),f=r("median"),c=r("q3");t._hasPreCompStats=u&&u.length&&f&&f.length&&c&&c.length,l=Math.min(bp.minRowLength(u),bp.minRowLength(f),bp.minRowLength(c))}var h=n(o),v=n(s),d=h&&bp.minRowLength(o),_=v&&bp.minRowLength(s),T=i.calendar,p={autotypenumbers:i.autotypenumbers},M,b;if(t._hasPreCompStats)switch(String(v)+String(h)){case"00":var w=a("x0")||a("dx"),k=a("y0")||a("dy");k&&!w?M="h":M="v",b=l;break;case"10":M="v",b=Math.min(l,_);break;case"20":M="h",b=Math.min(l,s.length);break;case"01":M="h",b=Math.min(l,d);break;case"02":M="v",b=Math.min(l,o.length);break;case"12":M="v",b=Math.min(l,_,o.length);break;case"21":M="h",b=Math.min(l,s.length,d);break;case"11":b=0;break;case"22":var x=!1,E;for(E=0;E<s.length;E++)if(Sge(s[E],T,p)==="category"){x=!0;break}if(x)M="v",b=Math.min(l,_,o.length);else{for(E=0;E<o.length;E++)if(Sge(o[E],T,p)==="category"){x=!0;break}x?(M="h",b=Math.min(l,s.length,d)):(M="v",b=Math.min(l,_,o.length))}break}else h>0?(M="v",v>0?b=Math.min(_,d):b=Math.min(d)):v>0?(M="h",b=Math.min(_)):b=0;if(!b){t.visible=!1;return}t._length=b;var S=r("orientation",M);t._hasPreCompStats?S==="v"&&v===0?(r("x0",0),r("dx",1)):S==="h"&&h===0&&(r("y0",0),r("dy",1)):S==="v"&&v===0?r("x0"):S==="h"&&h===0&&r("y0");var g=myt.getComponentMethod("calendars","handleTraceDefaults");g(e,t,["x","y"],i)}function kge(e,t,r,i){var n=i.prefix,a=bp.coerce2(e,t,KM,"marker.outliercolor"),o=r("marker.line.outliercolor"),s="outliers";t._hasPreCompStats?s="all":(a||o)&&(s="suspectedoutliers");var l=r(n+"points",s);l?(r("jitter",l==="all"?.3:0),r("pointpos",l==="all"?-1.5:0),r("marker.symbol"),r("marker.opacity"),r("marker.size"),r("marker.angle"),r("marker.color",t.line.color),r("marker.line.color"),r("marker.line.width"),l==="suspectedoutliers"&&(r("marker.line.outliercolor",t.marker.color),r("marker.line.outlierwidth")),r("selected.marker.color"),r("unselected.marker.color"),r("selected.marker.size"),r("unselected.marker.size"),r("text"),r("hovertext")):delete t.marker;var u=r("hoveron");(u==="all"||u.indexOf("points")!==-1)&&r("hovertemplate"),bp.coerceSelectionMarkerOpacity(t,r)}function Tyt(e,t){var r,i;function n(s){return bp.coerce(i._input,i,KM,s)}for(var a=0;a<e.length;a++){i=e[a];var o=i.type;(o==="box"||o==="violin")&&(r=i._input,t[o+"mode"]==="group"&&byt(r,i,t,n))}}Cge.exports={supplyDefaults:wyt,crossTraceDefaults:Tyt,handleSampleDefaults:Ege,handlePointsDefaults:kge}});var rP=ne((Par,Pge)=>{"use strict";var Ayt=wi(),Myt=Wt(),Syt=jM();function Lge(e,t,r,i,n){for(var a=n+"Layout",o=!1,s=0;s<r.length;s++){var l=r[s];if(Ayt.traceIs(l,a)){o=!0;break}}o&&(i(n+"mode"),i(n+"gap"),i(n+"groupgap"))}function Eyt(e,t,r){function i(n,a){return Myt.coerce(e,t,Syt,n,a)}Lge(e,t,r,i,"box")}Pge.exports={supplyLayoutDefaults:Eyt,_supply:Lge}});var wN=ne((Rar,Nge)=>{"use strict";var bN=la(),nP=Xi(),kyt=u0(),qu=Wt(),qd=$a().BADNUM,Qg=qu._;Nge.exports=function(t,r){var i=t._fullLayout,n=nP.getFromId(t,r.xaxis||"x"),a=nP.getFromId(t,r.yaxis||"y"),o=[],s=r.type==="violin"?"_numViolins":"_numBoxes",l,u,f,c,h,v,d;r.orientation==="h"?(f=n,c="x",h=a,v="y",d=!!r.yperiodalignment):(f=a,c="y",h=n,v="x",d=!!r.xperiodalignment);var _=Cyt(r,v,h,i[s]),T=_[0],p=_[1],M=qu.distinctVals(T,h),b=M.vals,w=M.minDiff/2,k,x,E,S,g,C,A=(r.boxpoints||r.points)==="all"?qu.identity:function(et){return et.v<k.lf||et.v>k.uf};if(r._hasPreCompStats){var P=r[c],D=function(et){return f.d2c((r[et]||[])[l])},z=1/0,O=-1/0;for(l=0;l<r._length;l++){var V=T[l];if(bN(V)){if(k={},k.pos=k[v]=V,d&&p&&(k.orig_p=p[l]),k.q1=D("q1"),k.med=D("median"),k.q3=D("q3"),x=[],P&&qu.isArrayOrTypedArray(P[l]))for(u=0;u<P[l].length;u++)C=f.d2c(P[l][u]),C!==qd&&(g={v:C,i:[l,u]},Rge(g,r,[l,u]),x.push(g));if(k.pts=x.sort(Dge),E=k[c]=x.map(Ige),S=E.length,k.med!==qd&&k.q1!==qd&&k.q3!==qd&&k.med>=k.q1&&k.q3>=k.med){var B=D("lowerfence");k.lf=B!==qd&&B<=k.q1?B:Fge(k,E,S);var F=D("upperfence");k.uf=F!==qd&&F>=k.q3?F:qge(k,E,S);var N=D("mean");k.mean=N!==qd?N:S?qu.mean(E,S):(k.q1+k.q3)/2;var Z=D("sd");k.sd=N!==qd&&Z>=0?Z:S?qu.stdev(E,S,k.mean):k.q3-k.q1,k.lo=zge(k),k.uo=Oge(k);var J=D("notchspan");J=J!==qd&&J>0?J:Bge(k,S),k.ln=k.med-J,k.un=k.med+J;var re=k.lf,ue=k.uf;r.boxpoints&&E.length&&(re=Math.min(re,E[0]),ue=Math.max(ue,E[S-1])),r.notched&&(re=Math.min(re,k.ln),ue=Math.max(ue,k.un)),k.min=re,k.max=ue}else{qu.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+k.q1,"median = "+k.med,"q3 = "+k.q3].join(`
`));var fe;k.med!==qd?fe=k.med:k.q1!==qd?k.q3!==qd?fe=(k.q1+k.q3)/2:fe=k.q1:k.q3!==qd?fe=k.q3:fe=0,k.med=fe,k.q1=k.q3=fe,k.lf=k.uf=fe,k.mean=k.sd=fe,k.ln=k.un=fe,k.min=k.max=fe}z=Math.min(z,k.min),O=Math.max(O,k.max),k.pts2=x.filter(A),o.push(k)}}r._extremes[f._id]=nP.findExtremes(f,[z,O],{padded:!0})}else{var K=f.makeCalcdata(r,c),X=Lyt(b,w),ae=b.length,oe=Pyt(ae);for(l=0;l<r._length;l++)if(C=K[l],!!bN(C)){var me=qu.findBin(T[l],X);me>=0&&me<ae&&(g={v:C,i:l},Rge(g,r,l),oe[me].push(g))}var xe=1/0,ce=-1/0,ie=r.quartilemethod,ge=ie==="exclusive",le=ie==="inclusive";for(l=0;l<ae;l++)if(oe[l].length>0){if(k={},k.pos=k[v]=b[l],x=k.pts=oe[l].sort(Dge),E=k[c]=x.map(Ige),S=E.length,k.min=E[0],k.max=E[S-1],k.mean=qu.mean(E,S),k.sd=qu.stdev(E,S,k.mean)*r.sdmultiple,k.med=qu.interp(E,.5),S%2&&(ge||le)){var we,Re;ge?(we=E.slice(0,S/2),Re=E.slice(S/2+1)):le&&(we=E.slice(0,S/2+1),Re=E.slice(S/2)),k.q1=qu.interp(we,.5),k.q3=qu.interp(Re,.5)}else k.q1=qu.interp(E,.25),k.q3=qu.interp(E,.75);k.lf=Fge(k,E,S),k.uf=qge(k,E,S),k.lo=zge(k),k.uo=Oge(k);var qe=Bge(k,S);k.ln=k.med-qe,k.un=k.med+qe,xe=Math.min(xe,k.ln),ce=Math.max(ce,k.un),k.pts2=x.filter(A),o.push(k)}r.notched&&qu.isTypedArray(K)&&(K=Array.from(K)),r._extremes[f._id]=nP.findExtremes(f,r.notched?K.concat([xe,ce]):K,{padded:!0})}return Ryt(o,r),o.length>0?(o[0].t={num:i[s],dPos:w,posLetter:v,valLetter:c,labels:{med:Qg(t,"median:"),min:Qg(t,"min:"),q1:Qg(t,"q1:"),q3:Qg(t,"q3:"),max:Qg(t,"max:"),mean:r.boxmean==="sd"||r.sizemode==="sd"?Qg(t,"mean \xB1 \u03C3:").replace("\u03C3",r.sdmultiple===1?"\u03C3":r.sdmultiple+"\u03C3"):Qg(t,"mean:"),lf:Qg(t,"lower fence:"),uf:Qg(t,"upper fence:")}},i[s]++,o):[{t:{empty:!0}}]};function Cyt(e,t,r,i){var n=t in e,a=t+"0"in e,o="d"+t in e;if(n||a&&o){var s=r.makeCalcdata(e,t),l=kyt(e,r,t,s).vals;return[l,s]}var u;a?u=e[t+"0"]:"name"in e&&(r.type==="category"||bN(e.name)&&["linear","log"].indexOf(r.type)!==-1||qu.isDateTime(e.name)&&r.type==="date")?u=e.name:u=i;for(var f=r.type==="multicategory"?r.r2c_just_indices(u):r.d2c(u,0,e[t+"calendar"]),c=e._length,h=new Array(c),v=0;v<c;v++)h[v]=f;return[h]}function Lyt(e,t){for(var r=e.length,i=new Array(r+1),n=0;n<r;n++)i[n]=e[n]-t;return i[r]=e[r-1]+t,i}function Pyt(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=[];return t}var _N={text:"tx",hovertext:"htx"};function Rge(e,t,r){for(var i in _N)qu.isArrayOrTypedArray(t[i])&&(Array.isArray(r)?qu.isArrayOrTypedArray(t[i][r[0]])&&(e[_N[i]]=t[i][r[0]][r[1]]):e[_N[i]]=t[i][r])}function Ryt(e,t){if(qu.isArrayOrTypedArray(t.selectedpoints))for(var r=0;r<e.length;r++){for(var i=e[r].pts||[],n={},a=0;a<i.length;a++)n[i[a].i]=a;qu.tagSelected(i,t,n)}}function Dge(e,t){return e.v-t.v}function Ige(e){return e.v}function Fge(e,t,r){return r===0?e.q1:Math.min(e.q1,t[Math.min(qu.findBin(2.5*e.q1-1.5*e.q3,t,!0)+1,r-1)])}function qge(e,t,r){return r===0?e.q3:Math.max(e.q3,t[Math.max(qu.findBin(2.5*e.q3-1.5*e.q1,t),0)])}function zge(e){return 4*e.q1-3*e.q3}function Oge(e){return 4*e.q3-3*e.q1}function Bge(e,t){return t===0?0:1.57*(e.q3-e.q1)/Math.sqrt(t)}});var iP=ne((Dar,Gge)=>{"use strict";var Uge=Xi(),Dyt=Wt(),Iyt=mm().getAxisGroup,Vge=["v","h"];function Fyt(e,t){for(var r=e.calcdata,i=t.xaxis,n=t.yaxis,a=0;a<Vge.length;a++){for(var o=Vge[a],s=o==="h"?n:i,l=[],u=0;u<r.length;u++){var f=r[u],c=f[0].t,h=f[0].trace;h.visible===!0&&(h.type==="box"||h.type==="candlestick")&&!c.empty&&(h.orientation||"v")===o&&h.xaxis===i._id&&h.yaxis===n._id&&l.push(u)}Hge("box",e,l,s)}}function Hge(e,t,r,i){var n=t.calcdata,a=t._fullLayout,o=i._id,s=o.charAt(0),l,u,f,c=[],h=0;for(l=0;l<r.length;l++)for(f=n[r[l]],u=0;u<f.length;u++)c.push(i.c2l(f[u].pos,!0)),h+=(f[u].pts2||[]).length;if(c.length){var v=Dyt.distinctVals(c);(i.type==="category"||i.type==="multicategory")&&(v.minDiff=1);var d=v.minDiff/2;Uge.minDtick(i,v.minDiff,v.vals[0],!0);var _=e==="violin"?"_numViolins":"_numBoxes",T=a[_],p=a[e+"mode"]==="group"&&T>1,M=1-a[e+"gap"],b=1-a[e+"groupgap"];for(l=0;l<r.length;l++){f=n[r[l]];var w=f[0].trace,k=f[0].t,x=w.width,E=w.side,S,g,C,A;if(x)S=g=A=x/2,C=0;else if(S=d,p){var P=Iyt(a,i._id)+w.orientation,D=a._alignmentOpts[P]||{},z=D[w.alignmentgroup]||{},O=Object.keys(z.offsetGroups||{}).length,V=O||T,B=O?w._offsetIndex:k.num;g=S*M*b/V,C=2*S*(-.5+(B+.5)/V)*M,A=S*M/V}else g=S*M*b,C=0,A=S;k.dPos=S,k.bPos=C,k.bdPos=g,k.wHover=A;var F,N,Z=C+g,J,re,ue,fe,K,X,ae=!!x,oe=(w.boxpoints||w.points)&&h>0;if(E==="positive"?(F=S*(x?1:.5),J=Z,N=J=C):E==="negative"?(F=J=C,N=S*(x?1:.5),re=Z):(F=N=S,J=re=Z),oe){var me=w.pointpos,xe=w.jitter,ce=w.marker.size/2,ie=0;me+xe>=0&&(ie=Z*(me+xe),ie>F?(ae=!0,K=ce,ue=ie):ie>J&&(K=ce,ue=F)),ie<=F&&(ue=F);var ge=0;me-xe<=0&&(ge=-Z*(me-xe),ge>N?(ae=!0,X=ce,fe=ge):ge>re&&(X=ce,fe=N)),ge<=N&&(fe=N)}else ue=F,fe=N;var le=new Array(f.length);for(u=0;u<f.length;u++)le[u]=f[u].pos;w._extremes[o]=Uge.findExtremes(i,le,{padded:ae,vpadminus:fe,vpadplus:ue,vpadLinearized:!0,ppadminus:{x:X,y:K}[s],ppadplus:{x:K,y:X}[s]})}}}Gge.exports={crossTraceCalc:Fyt,setPositionOffset:Hge}});var aP=ne((Iar,jge)=>{"use strict";var pw=Ai(),Wx=Wt(),qyt=aa(),Yge=5,zyt=.01;function Oyt(e,t,r,i){var n=e._context.staticPlot,a=t.xaxis,o=t.yaxis;Wx.makeTraceGroups(i,r,"trace boxes").each(function(s){var l=pw.select(this),u=s[0],f=u.t,c=u.trace;if(f.wdPos=f.bdPos*c.whiskerwidth,c.visible!==!0||f.empty){l.remove();return}var h,v;c.orientation==="h"?(h=o,v=a):(h=a,v=o),Wge(l,{pos:h,val:v},c,f,n),Xge(l,{x:a,y:o},c,f),Zge(l,{pos:h,val:v},c,f)})}function Wge(e,t,r,i,n){var a=r.orientation==="h",o=t.val,s=t.pos,l=!!s.rangebreaks,u=i.bPos,f=i.wdPos||0,c=i.bPosPxOffset||0,h=r.whiskerwidth||0,v=r.showwhiskers!==!1,d=r.notched||!1,_=d?1-2*r.notchwidth:1,T,p;Array.isArray(i.bdPos)?(T=i.bdPos[0],p=i.bdPos[1]):(T=i.bdPos,p=i.bdPos);var M=e.selectAll("path.box").data(r.type!=="violin"||r.box.visible?Wx.identity:[]);M.enter().append("path").style("vector-effect",n?"none":"non-scaling-stroke").attr("class","box"),M.exit().remove(),M.each(function(b){if(b.empty)return pw.select(this).attr("d","M0,0Z");var w=s.c2l(b.pos+u,!0),k=s.l2p(w-T)+c,x=s.l2p(w+p)+c,E=l?(k+x)/2:s.l2p(w)+c,S=r.whiskerwidth,g=l?k*S+(1-S)*E:s.l2p(w-f)+c,C=l?x*S+(1-S)*E:s.l2p(w+f)+c,A=s.l2p(w-T*_)+c,P=s.l2p(w+p*_)+c,D=r.sizemode==="sd",z=o.c2p(D?b.mean-b.sd:b.q1,!0),O=D?o.c2p(b.mean+b.sd,!0):o.c2p(b.q3,!0),V=Wx.constrain(D?o.c2p(b.mean,!0):o.c2p(b.med,!0),Math.min(z,O)+1,Math.max(z,O)-1),B=b.lf===void 0||r.boxpoints===!1||D,F=o.c2p(B?b.min:b.lf,!0),N=o.c2p(B?b.max:b.uf,!0),Z=o.c2p(b.ln,!0),J=o.c2p(b.un,!0);a?pw.select(this).attr("d","M"+V+","+A+"V"+P+"M"+z+","+k+"V"+x+(d?"H"+Z+"L"+V+","+P+"L"+J+","+x:"")+"H"+O+"V"+k+(d?"H"+J+"L"+V+","+A+"L"+Z+","+k:"")+"Z"+(v?"M"+z+","+E+"H"+F+"M"+O+","+E+"H"+N+(h===0?"":"M"+F+","+g+"V"+C+"M"+N+","+g+"V"+C):"")):pw.select(this).attr("d","M"+A+","+V+"H"+P+"M"+k+","+z+"H"+x+(d?"V"+Z+"L"+P+","+V+"L"+x+","+J:"")+"V"+O+"H"+k+(d?"V"+J+"L"+A+","+V+"L"+k+","+Z:"")+"Z"+(v?"M"+E+","+z+"V"+F+"M"+E+","+O+"V"+N+(h===0?"":"M"+g+","+F+"H"+C+"M"+g+","+N+"H"+C):""))})}function Xge(e,t,r,i){var n=t.x,a=t.y,o=i.bdPos,s=i.bPos,l=r.boxpoints||r.points;Wx.seedPseudoRandom();var u=function(h){return h.forEach(function(v){v.t=i,v.trace=r}),h},f=e.selectAll("g.points").data(l?u:[]);f.enter().append("g").attr("class","points"),f.exit().remove();var c=f.selectAll("path").data(function(h){var v,d=h.pts2,_=Math.max((h.max-h.min)/10,h.q3-h.q1),T=_*1e-9,p=_*zyt,M=[],b=0,w;if(r.jitter){if(_===0)for(b=1,M=new Array(d.length),v=0;v<d.length;v++)M[v]=1;else for(v=0;v<d.length;v++){var k=Math.max(0,v-Yge),x=d[k].v,E=Math.min(d.length-1,v+Yge),S=d[E].v;l!=="all"&&(d[v].v<h.lf?S=Math.min(S,h.lf):x=Math.max(x,h.uf));var g=Math.sqrt(p*(E-k)/(S-x+T))||0;g=Wx.constrain(Math.abs(g),0,1),M.push(g),b=Math.max(g,b)}w=r.jitter*2/(b||1)}for(v=0;v<d.length;v++){var C=d[v],A=C.v,P=r.jitter?w*M[v]*(Wx.pseudoRandom()-.5):0,D=h.pos+s+o*(r.pointpos+P);r.orientation==="h"?(C.y=D,C.x=A):(C.x=D,C.y=A),l==="suspectedoutliers"&&A<h.uo&&A>h.lo&&(C.so=!0)}return d});c.enter().append("path").classed("point",!0),c.exit().remove(),c.call(qyt.translatePoints,n,a)}function Zge(e,t,r,i){var n=t.val,a=t.pos,o=!!a.rangebreaks,s=i.bPos,l=i.bPosPxOffset||0,u=r.boxmean||(r.meanline||{}).visible,f,c;Array.isArray(i.bdPos)?(f=i.bdPos[0],c=i.bdPos[1]):(f=i.bdPos,c=i.bdPos);var h=e.selectAll("path.mean").data(r.type==="box"&&r.boxmean||r.type==="violin"&&r.box.visible&&r.meanline.visible?Wx.identity:[]);h.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),h.exit().remove(),h.each(function(v){var d=a.c2l(v.pos+s,!0),_=a.l2p(d-f)+l,T=a.l2p(d+c)+l,p=o?(_+T)/2:a.l2p(d)+l,M=n.c2p(v.mean,!0),b=n.c2p(v.mean-v.sd,!0),w=n.c2p(v.mean+v.sd,!0);r.orientation==="h"?pw.select(this).attr("d","M"+M+","+_+"V"+T+(u==="sd"?"m0,0L"+b+","+p+"L"+M+","+_+"L"+w+","+p+"Z":"")):pw.select(this).attr("d","M"+_+","+M+"H"+T+(u==="sd"?"m0,0L"+p+","+b+"L"+_+","+M+"L"+p+","+w+"Z":""))})}jge.exports={plot:Oyt,plotBoxAndWhiskers:Wge,plotPoints:Xge,plotBoxMean:Zge}});var oP=ne((Far,Kge)=>{"use strict";var TN=Ai(),AN=_i(),MN=aa();function Byt(e,t,r){var i=r||TN.select(e).selectAll("g.trace.boxes");i.style("opacity",function(n){return n[0].trace.opacity}),i.each(function(n){var a=TN.select(this),o=n[0].trace,s=o.line.width;function l(c,h,v,d){c.style("stroke-width",h+"px").call(AN.stroke,v).call(AN.fill,d)}var u=a.selectAll("path.box");if(o.type==="candlestick")u.each(function(c){if(!c.empty){var h=TN.select(this),v=o[c.dir];l(h,v.line.width,v.line.color,v.fillcolor),h.style("opacity",o.selectedpoints&&!c.selected?.3:1)}});else{l(u,s,o.line.color,o.fillcolor),a.selectAll("path.mean").style({"stroke-width":s,"stroke-dasharray":2*s+"px,"+s+"px"}).call(AN.stroke,o.line.color);var f=a.selectAll("path.point");MN.pointStyle(f,o,e)}})}function Nyt(e,t,r){var i=t[0].trace,n=r.selectAll("path.point");i.selectedpoints?MN.selectedPointStyle(n,i):MN.pointStyle(n,i,e)}Kge.exports={style:Byt,styleOnSelect:Nyt}});var EN=ne((qar,eye)=>{"use strict";var Uyt=Xi(),SN=Wt(),Rm=Ol(),Jge=_i(),Vyt=SN.fillText;function Hyt(e,t,r,i){var n=e.cd,a=n[0].trace,o=a.hoveron,s=[],l;return o.indexOf("boxes")!==-1&&(s=s.concat(Qge(e,t,r,i))),o.indexOf("points")!==-1&&(l=$ge(e,t,r)),i==="closest"?l?[l]:s:(l&&s.push(l),s)}function Qge(e,t,r,i){var n=e.cd,a=e.xa,o=e.ya,s=n[0].trace,l=n[0].t,u=s.type==="violin",f,c,h,v,d,_,T,p,M,b,w,k=l.bdPos,x,E,S=l.wHover,g=function(ce){return h.c2l(ce.pos)+l.bPos-h.c2l(_)};u&&s.side!=="both"?(s.side==="positive"&&(M=function(ce){var ie=g(ce);return Rm.inbox(ie,ie+S,b)},x=k,E=0),s.side==="negative"&&(M=function(ce){var ie=g(ce);return Rm.inbox(ie-S,ie,b)},x=0,E=k)):(M=function(ce){var ie=g(ce);return Rm.inbox(ie-S,ie+S,b)},x=E=k);var C;u?C=function(ce){return Rm.inbox(ce.span[0]-d,ce.span[1]-d,b)}:C=function(ce){return Rm.inbox(ce.min-d,ce.max-d,b)},s.orientation==="h"?(d=t,_=r,T=C,p=M,f="y",h=o,c="x",v=a):(d=r,_=t,T=M,p=C,f="x",h=a,c="y",v=o);var A=Math.min(1,k/Math.abs(h.r2c(h.range[1])-h.r2c(h.range[0])));b=e.maxHoverDistance-A,w=e.maxSpikeDistance-A;function P(ce){return(T(ce)+p(ce))/2}var D=Rm.getDistanceFunction(i,T,p,P);if(Rm.getClosest(n,D,e),e.index===!1)return[];var z=n[e.index],O=s.line.color,V=(s.marker||{}).color;Jge.opacity(O)&&s.line.width?e.color=O:Jge.opacity(V)&&s.boxpoints?e.color=V:e.color=s.fillcolor,e[f+"0"]=h.c2p(z.pos+l.bPos-E,!0),e[f+"1"]=h.c2p(z.pos+l.bPos+x,!0),e[f+"LabelVal"]=z.orig_p!==void 0?z.orig_p:z.pos;var B=f+"Spike";e.spikeDistance=P(z)*w/b,e[B]=h.c2p(z.pos,!0);var F=s.boxmean||s.sizemode==="sd"||(s.meanline||{}).visible,N=s.boxpoints||s.points,Z=N&&F?["max","uf","q3","med","mean","q1","lf","min"]:N&&!F?["max","uf","q3","med","q1","lf","min"]:!N&&F?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],J=v.range[1]<v.range[0];s.orientation===(J?"v":"h")&&Z.reverse();for(var re=e.spikeDistance,ue=e[B],fe=[],K=0;K<Z.length;K++){var X=Z[K];if(X in z){var ae=z[X],oe=v.c2p(ae,!0),me=SN.extendFlat({},e);me.attr=X,me[c+"0"]=me[c+"1"]=oe,me[c+"LabelVal"]=ae,me[c+"Label"]=(l.labels?l.labels[X]+" ":"")+Uyt.hoverLabelText(v,ae,s[c+"hoverformat"]),me.hoverOnBox=!0,X==="mean"&&"sd"in z&&(s.boxmean==="sd"||s.sizemode==="sd")&&(me[c+"err"]=z.sd),me.hovertemplate=!1,fe.push(me)}}e.name="",e.spikeDistance=void 0,e[B]=void 0;for(var xe=0;xe<fe.length;xe++)fe[xe].attr!=="med"?(fe[xe].name="",fe[xe].spikeDistance=void 0,fe[xe][B]=void 0):(fe[xe].spikeDistance=re,fe[xe][B]=ue);return fe}function $ge(e,t,r){for(var i=e.cd,n=e.xa,a=e.ya,o=i[0].trace,s=n.c2p(t),l=a.c2p(r),u,f=function(C){var A=Math.max(3,C.mrc||0);return Math.max(Math.abs(n.c2p(C.x)-s)-A,1-3/A)},c=function(C){var A=Math.max(3,C.mrc||0);return Math.max(Math.abs(a.c2p(C.y)-l)-A,1-3/A)},h=Rm.quadrature(f,c),v=!1,d,_,T=0;T<i.length;T++){d=i[T];for(var p=0;p<(d.pts||[]).length;p++){_=d.pts[p];var M=h(_);M<=e.distance&&(e.distance=M,v=[T,p])}}if(!v)return!1;d=i[v[0]],_=d.pts[v[1]];var b=n.c2p(_.x,!0),w=a.c2p(_.y,!0),k=_.mrc||1;u=SN.extendFlat({},e,{index:_.i,color:(o.marker||{}).color,name:o.name,x0:b-k,x1:b+k,y0:w-k,y1:w+k,spikeDistance:e.distance,hovertemplate:o.hovertemplate});var x=d.orig_p,E=x!==void 0?x:d.pos,S;o.orientation==="h"?(S=a,u.xLabelVal=_.x,u.yLabelVal=E):(S=n,u.xLabelVal=E,u.yLabelVal=_.y);var g=S._id.charAt(0);return u[g+"Spike"]=S.c2p(d.pos,!0),Vyt(_,o,u),u}eye.exports={hoverPoints:Hyt,hoverOnBoxes:Qge,hoverOnPoints:$ge}});var rye=ne((zar,tye)=>{"use strict";tye.exports=function(t,r){return r.hoverOnBox&&(t.hoverOnBox=r.hoverOnBox),"xVal"in r&&(t.x=r.xVal),"yVal"in r&&(t.y=r.yVal),r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),t}});var kN=ne((Oar,nye)=>{"use strict";nye.exports=function(t,r){var i=t.cd,n=t.xaxis,a=t.yaxis,o=[],s,l;if(r===!1)for(s=0;s<i.length;s++)for(l=0;l<(i[s].pts||[]).length;l++)i[s].pts[l].selected=0;else for(s=0;s<i.length;s++)for(l=0;l<(i[s].pts||[]).length;l++){var u=i[s].pts[l],f=n.c2p(u.x),c=a.c2p(u.y);r.contains([f,c],null,u.i,t)?(o.push({pointNumber:u.i,x:n.c2d(u.x),y:a.c2d(u.y)}),u.selected=1):u.selected=0}return o}});var aye=ne((Bar,iye)=>{"use strict";iye.exports={attributes:ZM(),layoutAttributes:jM(),supplyDefaults:JM().supplyDefaults,crossTraceDefaults:JM().crossTraceDefaults,supplyLayoutDefaults:rP().supplyLayoutDefaults,calc:wN(),crossTraceCalc:iP().crossTraceCalc,plot:aP().plot,style:oP().style,styleOnSelect:oP().styleOnSelect,hoverPoints:EN().hoverPoints,eventData:rye(),selectPoints:kN(),moduleType:"trace",name:"box",basePlotModule:vu(),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}});var sye=ne((Nar,oye)=>{"use strict";oye.exports=aye()});var Xx=ne((Uar,lye)=>{"use strict";var wp=cu(),Gyt=es(),Yyt=ll(),CN=kl().axisHoverFormat,Wyt=Ba().hovertemplateAttrs,Xyt=Ba().texttemplateAttrs,Zyt=Ps(),ld=oa().extendFlat;lye.exports=ld({z:{valType:"data_array",editType:"calc"},x:ld({},wp.x,{impliedEdits:{xtype:"array"}}),x0:ld({},wp.x0,{impliedEdits:{xtype:"scaled"}}),dx:ld({},wp.dx,{impliedEdits:{xtype:"scaled"}}),y:ld({},wp.y,{impliedEdits:{ytype:"array"}}),y0:ld({},wp.y0,{impliedEdits:{ytype:"scaled"}}),dy:ld({},wp.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:ld({},wp.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:ld({},wp.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:ld({},wp.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:ld({},wp.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:ld({},wp.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:ld({},wp.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:CN("x"),yhoverformat:CN("y"),zhoverformat:CN("z",1),hovertemplate:Wyt(),texttemplate:Xyt({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:Yyt({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:ld({},Gyt.showlegend,{dflt:!1})},{transforms:void 0},Zyt("",{cLetter:"z",autoColorDflt:!1}))});var QM=ne((Var,fye)=>{"use strict";var jyt=la(),sP=Wt(),Kyt=wi();fye.exports=function(t,r,i,n,a,o){var s=i("z");a=a||"x",o=o||"y";var l,u;if(s===void 0||!s.length)return 0;if(sP.isArray1D(s)){l=i(a),u=i(o);var f=sP.minRowLength(l),c=sP.minRowLength(u);if(f===0||c===0)return 0;r._length=Math.min(f,c,s.length)}else{if(l=uye(a,i),u=uye(o,i),!Jyt(s))return 0;i("transpose"),r._length=null}if(t.type==="heatmapgl")return!0;var h=Kyt.getComponentMethod("calendars","handleTraceDefaults");return h(t,r,[a,o],n),!0};function uye(e,t){var r=t(e),i=r?t(e+"type","array"):"scaled";return i==="scaled"&&(t(e+"0"),t("d"+e)),r}function Jyt(e){for(var t=!0,r=!1,i=!1,n,a=0;a<e.length;a++){if(n=e[a],!sP.isArrayOrTypedArray(n)){t=!1;break}n.length>0&&(r=!0);for(var o=0;o<n.length;o++)if(jyt(n[o])){i=!0;break}}return t&&r&&i}});var $M=ne((Har,hye)=>{"use strict";var cye=Wt();hye.exports=function(t,r){t("texttemplate");var i=cye.extendFlat({},r.font,{color:"auto",size:"auto"});cye.coerceFont(t,"textfont",i)}});var LN=ne((Gar,vye)=>{"use strict";vye.exports=function(t,r,i){var n=i("zsmooth");n===!1&&(i("xgap"),i("ygap")),i("zhoverformat")}});var gye=ne((Yar,pye)=>{"use strict";var dye=Wt(),Qyt=QM(),$yt=$M(),emt=o0(),tmt=LN(),rmt=Kf(),nmt=Xx();pye.exports=function(t,r,i,n){function a(s,l){return dye.coerce(t,r,nmt,s,l)}var o=Qyt(t,r,a,n);if(!o){r.visible=!1;return}emt(t,r,n,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hovertemplate"),$yt(a,n),tmt(t,r,a,n),a("hoverongaps"),a("connectgaps",dye.isArray1D(r.z)&&r.zsmooth!==!1),rmt(t,r,n,a,{prefix:"",cLetter:"z"})}});var PN=ne((War,yye)=>{"use strict";var gw=la();yye.exports={count:function(e,t,r){return r[e]++,1},sum:function(e,t,r,i){var n=i[t];return gw(n)?(n=Number(n),r[e]+=n,n):0},avg:function(e,t,r,i,n){var a=i[t];return gw(a)&&(a=Number(a),r[e]+=a,n[e]++),0},min:function(e,t,r,i){var n=i[t];if(gw(n))if(n=Number(n),gw(r[e])){if(r[e]>n){var a=n-r[e];return r[e]=n,a}}else return r[e]=n,n;return 0},max:function(e,t,r,i){var n=i[t];if(gw(n))if(n=Number(n),gw(r[e])){if(r[e]<n){var a=n-r[e];return r[e]=n,a}}else return r[e]=n,n;return 0}}});var RN=ne((Xar,mye)=>{"use strict";mye.exports={percent:function(e,t){for(var r=e.length,i=100/t,n=0;n<r;n++)e[n]*=i},probability:function(e,t){for(var r=e.length,i=0;i<r;i++)e[i]/=t},density:function(e,t,r,i){var n=e.length;i=i||1;for(var a=0;a<n;a++)e[a]*=r[a]*i},"probability density":function(e,t,r,i){var n=e.length;i&&(t/=i);for(var a=0;a<n;a++)e[a]*=r[a]/t}}});var DN=ne((Zar,xye)=>{"use strict";xye.exports=function(t,r){for(var i=t.length,n=0,a=0;a<i;a++)r[a]?(t[a]/=r[a],n+=t[a]):t[a]=null;return n}});var IN=ne((jar,Eye)=>{"use strict";var yw=$a(),Zx=yw.ONEAVGYEAR,_ye=yw.ONEAVGMONTH,uP=yw.ONEDAY,bye=yw.ONEHOUR,wye=yw.ONEMIN,Tye=yw.ONESEC,Aye=Xi().tickIncrement;Eye.exports=function(t,r,i,n,a){var o=-1.1*r,s=-.1*r,l=t-s,u=i[0],f=i[1],c=Math.min(lP(u+s,u+l,n,a),lP(f+s,f+l,n,a)),h=Math.min(lP(u+o,u+s,n,a),lP(f+o,f+s,n,a)),v,d;if(c>h&&h<Math.abs(f-u)/4e3?(v=c,d=!1):(v=Math.min(c,h),d=!0),n.type==="date"&&v>uP){var _=v===Zx?1:6,T=v===Zx?"M12":"M1";return function(p,M){var b=n.c2d(p,Zx,a),w=b.indexOf("-",_);w>0&&(b=b.substr(0,w));var k=n.d2c(b,0,a);if(k<p){var x=Aye(k,T,!1,a);(k+x)/2<p+t&&(k=x)}return M&&d?Aye(k,T,!0,a):k}}return function(p,M){var b=v*Math.round(p/v);return b+v/10<p&&b+v*.9<p+t&&(b+=v),M&&d&&(b-=v),b}};function lP(e,t,r,i){if(e*t<=0)return 1/0;for(var n=Math.abs(t-e),a=r.type==="date",o=Mye(n,a),s=0;s<10;s++){var l=Mye(o*80,a);if(o===l)break;if(imt(l,e,t,a,r,i))o=l;else break}return o}function Mye(e,t){return t&&e>Tye?e>uP?e>Zx*1.1?Zx:e>_ye*1.1?_ye:uP:e>bye?bye:e>wye?wye:Tye:Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function imt(e,t,r,i,n,a){if(i&&e>uP){var o=Sye(t,n,a),s=Sye(r,n,a),l=e===Zx?0:1;return o[l]!==s[l]}return Math.floor(r/e)-Math.floor(t/e)>.1}function Sye(e,t,r){var i=t.c2d(e,Zx,r).split("-");return i[0]===""&&(i.unshift(),i[0]="-"+i[0]),i}});var zN=ne((Kar,Lye)=>{"use strict";var FN=la(),jh=Wt(),kye=wi(),Tp=Xi(),amt=GM(),Cye=PN(),omt=RN(),smt=DN(),lmt=IN();function umt(e,t){var r=[],i=[],n=t.orientation==="h",a=Tp.getFromId(e,n?t.yaxis:t.xaxis),o=n?"y":"x",s={x:"y",y:"x"}[o],l=t[o+"calendar"],u=t.cumulative,f,c=qN(e,t,a,o),h=c[0],v=c[1],d=typeof h.size=="string",_=[],T=d?_:h,p=[],M=[],b=[],w=0,k=t.histnorm,x=t.histfunc,E=k.indexOf("density")!==-1,S,g,C;u.enabled&&E&&(k=k.replace(/ ?density$/,""),E=!1);var A=x==="max"||x==="min",P=A?null:0,D=Cye.count,z=omt[k],O=!1,V=function(ie){return a.r2c(ie,0,l)},B;for(jh.isArrayOrTypedArray(t[s])&&x!=="count"&&(B=t[s],O=x==="avg",D=Cye[x]),f=V(h.start),g=V(h.end)+(f-Tp.tickIncrement(f,h.size,!1,l))/1e6;f<g&&r.length<1e6&&(S=Tp.tickIncrement(f,h.size,!1,l),r.push((f+S)/2),i.push(P),b.push([]),_.push(f),E&&p.push(1/(S-f)),O&&M.push(0),!(S<=f));)f=S;_.push(f),!d&&a.type==="date"&&(T={start:V(T.start),end:V(T.end),size:T.size}),e._fullLayout._roundFnOpts||(e._fullLayout._roundFnOpts={});var F=t["_"+o+"bingroup"],N={leftGap:1/0,rightGap:1/0};F&&(e._fullLayout._roundFnOpts[F]||(e._fullLayout._roundFnOpts[F]=N),N=e._fullLayout._roundFnOpts[F]);var Z=i.length,J=!0,re=N.leftGap,ue=N.rightGap,fe={};for(f=0;f<v.length;f++){var K=v[f];C=jh.findBin(K,T),C>=0&&C<Z&&(w+=D(C,f,i,B,M),J&&b[C].length&&K!==v[b[C][0]]&&(J=!1),b[C].push(f),fe[f]=C,re=Math.min(re,K-_[C]),ue=Math.min(ue,_[C+1]-K))}N.leftGap=re,N.rightGap=ue;var X;J||(X=function(ie,ge){return function(){var le=e._fullLayout._roundFnOpts[F];return lmt(le.leftGap,le.rightGap,_,a,l)(ie,ge)}}),O&&(w=smt(i,M)),z&&z(i,w,p),u.enabled&&hmt(i,u.direction,u.currentbin);var ae=Math.min(r.length,i.length),oe=[],me=0,xe=ae-1;for(f=0;f<ae;f++)if(i[f]){me=f;break}for(f=ae-1;f>=me;f--)if(i[f]){xe=f;break}for(f=me;f<=xe;f++)if(FN(r[f])&&FN(i[f])){var ce={p:r[f],s:i[f],b:0};u.enabled||(ce.pts=b[f],J?ce.ph0=ce.ph1=b[f].length?v[b[f][0]]:r[f]:(t._computePh=!0,ce.ph0=X(_[f]),ce.ph1=X(_[f+1],!0))),oe.push(ce)}return oe.length===1&&(oe[0].width1=Tp.tickIncrement(oe[0].p,h.size,!1,l)-oe[0].p),amt(oe,t),jh.isArrayOrTypedArray(t.selectedpoints)&&jh.tagSelected(oe,t,fe),oe}function qN(e,t,r,i,n){var a=i+"bins",o=e._fullLayout,s=t["_"+i+"bingroup"],l=o._histogramBinOpts[s],u=o.barmode==="overlay",f,c,h,v,d,_,T,p=function(K){return r.r2c(K,0,v)},M=function(K){return r.c2r(K,0,v)},b=r.type==="date"?function(K){return K||K===0?jh.cleanDate(K,null,v):null}:function(K){return FN(K)?Number(K):null};function w(K,X,ae){X[K+"Found"]?(X[K]=b(X[K]),X[K]===null&&(X[K]=ae[K])):(_[K]=X[K]=ae[K],jh.nestedProperty(c[0],a+"."+K).set(ae[K]))}if(t["_"+i+"autoBinFinished"])delete t["_"+i+"autoBinFinished"];else{c=l.traces;var k=[],x=!0,E=!1,S=!1;for(f=0;f<c.length;f++)if(h=c[f],h.visible){var g=l.dirs[f];d=h["_"+g+"pos0"]=r.makeCalcdata(h,g),k=jh.concat(k,d),delete h["_"+i+"autoBinFinished"],t.visible===!0&&(x?x=!1:(delete h._autoBin,h["_"+i+"autoBinFinished"]=1),kye.traceIs(h,"2dMap")&&(E=!0),h.type==="histogram2dcontour"&&(S=!0))}v=c[0][i+"calendar"];var C=Tp.autoBin(k,r,l.nbins,E,v,l.sizeFound&&l.size),A=c[0]._autoBin={};if(_=A[l.dirs[0]]={},S&&(l.size||(C.start=M(Tp.tickIncrement(p(C.start),C.size,!0,v))),l.end===void 0&&(C.end=M(Tp.tickIncrement(p(C.end),C.size,!1,v)))),u&&!kye.traceIs(t,"2dMap")&&C._dataSpan===0&&r.type!=="category"&&r.type!=="multicategory"&&t.bingroup===""&&typeof t.xbins=="undefined"){if(n)return[C,d,!0];C=fmt(e,t,r,i,a)}T=h.cumulative||{},T.enabled&&T.currentbin!=="include"&&(T.direction==="decreasing"?C.start=M(Tp.tickIncrement(p(C.start),C.size,!0,v)):C.end=M(Tp.tickIncrement(p(C.end),C.size,!1,v))),l.size=C.size,l.sizeFound||(_.size=C.size,jh.nestedProperty(c[0],a+".size").set(C.size)),w("start",l,C),w("end",l,C)}d=t["_"+i+"pos0"],delete t["_"+i+"pos0"];var P=t._input[a]||{},D=jh.extendFlat({},l),z=l.start,O=r.r2l(P.start),V=O!==void 0;if((l.startFound||V)&&O!==r.r2l(z)){var B=V?O:jh.aggNums(Math.min,null,d),F={type:r.type==="category"||r.type==="multicategory"?"linear":r.type,r2l:r.r2l,dtick:l.size,tick0:z,calendar:v,range:[B,Tp.tickIncrement(B,l.size,!1,v)].map(r.l2r)},N=Tp.tickFirst(F);N>r.r2l(B)&&(N=Tp.tickIncrement(N,l.size,!0,v)),D.start=r.l2r(N),V||jh.nestedProperty(t,a+".start").set(D.start)}var Z=l.end,J=r.r2l(P.end),re=J!==void 0;if((l.endFound||re)&&J!==r.r2l(Z)){var ue=re?J:jh.aggNums(Math.max,null,d);D.end=r.l2r(ue),re||jh.nestedProperty(t,a+".start").set(D.end)}var fe="autobin"+i;return t._input[fe]===!1&&(t._input[a]=jh.extendFlat({},t[a]||{}),delete t._input[fe],delete t[fe]),[D,d]}function fmt(e,t,r,i,n){var a=e._fullLayout,o=cmt(e,t),s=!1,l=1/0,u=[t],f,c,h;for(f=0;f<o.length;f++)if(c=o[f],c===t)s=!0;else if(!s)h=a._histogramBinOpts[c["_"+i+"bingroup"]],l=Math.min(l,h.size||c[n].size);else{var v=qN(e,c,r,i,!0),d=v[0],_=v[2];c["_"+i+"autoBinFinished"]=1,c["_"+i+"pos0"]=v[1],_?u.push(c):l=Math.min(l,d.size)}var T=new Array(u.length);for(f=0;f<u.length;f++)for(var p=u[f]["_"+i+"pos0"],M=0;M<p.length;M++)if(p[M]!==void 0){T[f]=p[M];break}for(isFinite(l)||(l=jh.distinctVals(T).minDiff),f=0;f<u.length;f++){c=u[f];var b=c[i+"calendar"],w={start:r.c2r(T[f]-l/2,0,b),end:r.c2r(T[f]+l/2,0,b),size:l};c._input[n]=c[n]=w,h=a._histogramBinOpts[c["_"+i+"bingroup"]],h&&jh.extendFlat(h,w)}return t[n]}function cmt(e,t){for(var r=t.xaxis,i=t.yaxis,n=t.orientation,a=[],o=e._fullData,s=0;s<o.length;s++){var l=o[s];l.type==="histogram"&&l.visible===!0&&l.orientation===n&&l.xaxis===r&&l.yaxis===i&&a.push(l)}return a}function hmt(e,t,r){var i,n,a;function o(l){a=e[l],e[l]/=2}function s(l){n=e[l],e[l]=a+n/2,a+=n}if(r==="half")if(t==="increasing")for(o(0),i=1;i<e.length;i++)s(i);else for(o(e.length-1),i=e.length-2;i>=0;i--)s(i);else if(t==="increasing"){for(i=1;i<e.length;i++)e[i]+=e[i-1];r==="exclude"&&(e.unshift(0),e.pop())}else{for(i=e.length-2;i>=0;i--)e[i]+=e[i+1];r==="exclude"&&(e.push(0),e.shift())}}Lye.exports={calc:umt,calcAllAutoBins:qN}});var Oye=ne((Jar,zye)=>{"use strict";var Pye=Wt(),mw=Xi(),Rye=PN(),vmt=RN(),dmt=DN(),pmt=IN(),Dye=zN().calcAllAutoBins;zye.exports=function(t,r){var i=mw.getFromId(t,r.xaxis),n=mw.getFromId(t,r.yaxis),a=r.xcalendar,o=r.ycalendar,s=function(rt){return i.r2c(rt,0,a)},l=function(rt){return n.r2c(rt,0,o)},u=function(rt){return i.c2r(rt,0,a)},f=function(rt){return n.c2r(rt,0,o)},c,h,v,d,_=Dye(t,r,i,"x"),T=_[0],p=_[1],M=Dye(t,r,n,"y"),b=M[0],w=M[1],k=r._length;p.length>k&&p.splice(k,p.length-k),w.length>k&&w.splice(k,w.length-k);var x=[],E=[],S=[],g=typeof T.size=="string",C=typeof b.size=="string",A=[],P=[],D=g?A:T,z=C?P:b,O=0,V=[],B=[],F=r.histnorm,N=r.histfunc,Z=F.indexOf("density")!==-1,J=N==="max"||N==="min",re=J?null:0,ue=Rye.count,fe=vmt[F],K=!1,X=[],ae=[],oe="z"in r?r.z:"marker"in r&&Array.isArray(r.marker.color)?r.marker.color:"";oe&&N!=="count"&&(K=N==="avg",ue=Rye[N]);var me=T.size,xe=s(T.start),ce=s(T.end)+(xe-mw.tickIncrement(xe,me,!1,a))/1e6;for(c=xe;c<ce;c=mw.tickIncrement(c,me,!1,a))E.push(re),A.push(c),K&&S.push(0);A.push(c);var ie=E.length,ge=(c-xe)/ie,le=u(xe+ge/2),we=b.size,Re=l(b.start),qe=l(b.end)+(Re-mw.tickIncrement(Re,we,!1,o))/1e6;for(c=Re;c<qe;c=mw.tickIncrement(c,we,!1,o)){x.push(E.slice()),P.push(c);var et=new Array(ie);for(h=0;h<ie;h++)et[h]=[];B.push(et),K&&V.push(S.slice())}P.push(c);var Pe=x.length,Ie=(c-Re)/Pe,ut=f(Re+Ie/2);Z&&(X=Iye(E.length,D,ge,g),ae=Iye(x.length,z,Ie,C)),!g&&i.type==="date"&&(D=Fye(s,D)),!C&&n.type==="date"&&(z=Fye(l,z));var ft=!0,je=!0,_t=new Array(ie),Bt=new Array(Pe),Lt=1/0,Me=1/0,Ze=1/0,dt=1/0;for(c=0;c<k;c++){var it=p[c],vt=w[c];v=Pye.findBin(it,D),d=Pye.findBin(vt,z),v>=0&&v<ie&&d>=0&&d<Pe&&(O+=ue(v,c,x[d],oe,V[d]),B[d][v].push(c),ft&&(_t[v]===void 0?_t[v]=it:_t[v]!==it&&(ft=!1)),je&&(Bt[d]===void 0?Bt[d]=vt:Bt[d]!==vt&&(je=!1)),Lt=Math.min(Lt,it-A[v]),Me=Math.min(Me,A[v+1]-it),Ze=Math.min(Ze,vt-P[d]),dt=Math.min(dt,P[d+1]-vt))}if(K)for(d=0;d<Pe;d++)O+=dmt(x[d],V[d]);if(fe)for(d=0;d<Pe;d++)fe(x[d],O,X,ae[d]);return{x:p,xRanges:qye(A,ft&&_t,Lt,Me,i,a),x0:le,dx:ge,y:w,yRanges:qye(P,je&&Bt,Ze,dt,n,o),y0:ut,dy:Ie,z:x,pts:B}};function Iye(e,t,r,i){var n=new Array(e),a;if(i)for(a=0;a<e;a++)n[a]=1/(t[a+1]-t[a]);else{var o=1/r;for(a=0;a<e;a++)n[a]=o}return n}function Fye(e,t){return{start:e(t.start),end:e(t.end),size:t.size}}function qye(e,t,r,i,n,a){var o,s=e.length-1,l=new Array(s),u=pmt(r,i,e,n,a);for(o=0;o<s;o++){var f=(t||[])[o];l[o]=f===void 0?[u(e[o]),u(e[o+1],!0)]:[f,f]}return l}});var fP=ne((Qar,Uye)=>{"use strict";var $0=Wt(),Bye=$a().BADNUM,Nye=u0();Uye.exports=function(t,r,i,n,a,o){var s=t._length,l=r.makeCalcdata(t,n),u=i.makeCalcdata(t,a);l=Nye(t,r,n,l).vals,u=Nye(t,i,a,u).vals;var f=t.text,c=f!==void 0&&$0.isArray1D(f),h=t.hovertext,v=h!==void 0&&$0.isArray1D(h),d,_,T=$0.distinctVals(l),p=T.vals,M=$0.distinctVals(u),b=M.vals,w=[],k,x,E=b.length,S=p.length;for(d=0;d<o.length;d++)w[d]=$0.init2dArray(E,S);c&&(k=$0.init2dArray(E,S)),v&&(x=$0.init2dArray(E,S));var g=$0.init2dArray(E,S);for(d=0;d<s;d++)if(l[d]!==Bye&&u[d]!==Bye){var C=$0.findBin(l[d]+T.minDiff/2,p),A=$0.findBin(u[d]+M.minDiff/2,b);for(_=0;_<o.length;_++){var P=o[_],D=t[P],z=w[_];z[A][C]=D[d],g[A][C]=d}c&&(k[A][C]=f[d]),v&&(x[A][C]=h[d])}for(t["_"+n]=p,t["_"+a]=b,_=0;_<o.length;_++)t["_"+o[_]]=w[_];c&&(t._text=k),v&&(t._hovertext=x),r&&r.type==="category"&&(t["_"+n+"CategoryMap"]=p.map(function(O){return r._categories[O]})),i&&i.type==="category"&&(t["_"+a+"CategoryMap"]=b.map(function(O){return i._categories[O]})),t._after2before=g}});var hP=ne(($ar,Vye)=>{"use strict";var gmt=la(),ymt=Wt(),cP=$a().BADNUM;Vye.exports=function(t,r,i,n){var a,o,s,l,u,f;function c(p){if(gmt(p))return+p}if(r&&r.transpose){for(a=0,u=0;u<t.length;u++)a=Math.max(a,t[u].length);if(a===0)return!1;s=function(p){return p.length},l=function(p,M,b){return(p[b]||[])[M]}}else a=t.length,s=function(p,M){return p[M].length},l=function(p,M,b){return(p[M]||[])[b]};var h=function(p,M,b){return M===cP||b===cP?cP:l(p,M,b)};function v(p){if(r&&r.type!=="carpet"&&r.type!=="contourcarpet"&&p&&p.type==="category"&&r["_"+p._id.charAt(0)].length){var M=p._id.charAt(0),b={},w=r["_"+M+"CategoryMap"]||r[M];for(u=0;u<w.length;u++)b[w[u]]=u;return function(k){var x=b[p._categories[k]];return x+1?x:cP}}else return ymt.identity}var d=v(i),_=v(n);n&&n.type==="category"&&(a=n._categories.length);var T=new Array(a);for(u=0;u<a;u++)for(i&&i.type==="category"?o=i._categories.length:o=s(t,u),T[u]=new Array(o),f=0;f<o;f++)T[u][f]=c(h(t,_(u),d(f)));return T}});var vP=ne((eor,Yye)=>{"use strict";var mmt=Wt(),Hye=.01,xmt=[[-1,0],[1,0],[0,-1],[0,1]];function _mt(e){return .5-.25*Math.min(1,e*.5)}Yye.exports=function(t,r){var i=1,n;for(Gye(t,r),n=0;n<r.length&&!(r[n][2]<4);n++);for(r=r.slice(n),n=0;n<100&&i>Hye;n++)i=Gye(t,r,_mt(i));return i>Hye&&mmt.log("interp2d didn't converge quickly",i),t};function Gye(e,t,r){var i=0,n,a,o,s,l,u,f,c,h,v,d,_,T;for(s=0;s<t.length;s++){for(n=t[s],a=n[0],o=n[1],d=e[a][o],v=0,h=0,l=0;l<4;l++)u=xmt[l],f=e[a+u[0]],f&&(c=f[o+u[1]],c!==void 0&&(v===0?_=T=c:(_=Math.min(_,c),T=Math.max(T,c)),h++,v+=c));if(h===0)throw"iterateInterp2d order is wrong: no defined neighbors";e[a][o]=v/h,d===void 0?h<4&&(i=1):(e[a][o]=(1+r)*e[a][o]-r*d,T>_&&(i=Math.max(i,Math.abs(e[a][o]-d)/(T-_))))}return i}});var dP=ne((tor,Wye)=>{"use strict";var bmt=Wt().maxRowLength;Wye.exports=function(t){var r=[],i={},n=[],a=t[0],o=[],s=[0,0,0],l=bmt(t),u,f,c,h,v,d,_,T;for(f=0;f<t.length;f++)for(u=o,o=a,a=t[f+1]||[],c=0;c<l;c++)o[c]===void 0&&(d=(o[c-1]!==void 0?1:0)+(o[c+1]!==void 0?1:0)+(u[c]!==void 0?1:0)+(a[c]!==void 0?1:0),d?(f===0&&d++,c===0&&d++,f===t.length-1&&d++,c===o.length-1&&d++,d<4&&(i[[f,c]]=[f,c,d]),r.push([f,c,d])):n.push([f,c]));for(;n.length;){for(_={},T=!1,v=n.length-1;v>=0;v--)h=n[v],f=h[0],c=h[1],d=((i[[f-1,c]]||s)[2]+(i[[f+1,c]]||s)[2]+(i[[f,c-1]]||s)[2]+(i[[f,c+1]]||s)[2])/20,d&&(_[h]=[f,c,d],n.splice(v,1),T=!0);if(!T)throw"findEmpties iterated with no new neighbors";for(h in _)i[h]=_[h],r.push(_[h])}return r.sort(function(p,M){return M[2]-p[2]})}});var BN=ne((ror,Zye)=>{"use strict";var ON=wi(),Xye=Wt().isArrayOrTypedArray;Zye.exports=function(t,r,i,n,a,o){var s=[],l=ON.traceIs(t,"contour"),u=ON.traceIs(t,"histogram"),f=ON.traceIs(t,"gl2d"),c,h,v,d=Xye(r)&&r.length>1;if(d&&!u&&o.type!=="category"){var _=r.length;if(_<=a){if(l||f)s=Array.from(r).slice(0,a);else if(a===1)o.type==="log"?s=[.5*r[0],2*r[0]]:s=[r[0]-.5,r[0]+.5];else if(o.type==="log"){for(s=[Math.pow(r[0],1.5)/Math.pow(r[1],.5)],v=1;v<_;v++)s.push(Math.sqrt(r[v-1]*r[v]));s.push(Math.pow(r[_-1],1.5)/Math.pow(r[_-2],.5))}else{for(s=[1.5*r[0]-.5*r[1]],v=1;v<_;v++)s.push((r[v-1]+r[v])*.5);s.push(1.5*r[_-1]-.5*r[_-2])}if(_<a){var T=s[s.length-1],p;if(o.type==="log")for(p=T/s[s.length-2],v=_;v<a;v++)T*=p,s.push(T);else for(p=T-s[s.length-2],v=_;v<a;v++)T+=p,s.push(T)}}else return l?r.slice(0,a):r.slice(0,a+1)}else{var M=t[o._id.charAt(0)+"calendar"];if(u)c=o.r2c(i,0,M);else if(Xye(r)&&r.length===1)c=r[0];else if(i===void 0)c=0;else{var b=o.type==="log"?o.d2c:o.r2c;c=b(i,0,M)}for(h=n||1,v=l||f?0:-.5;v<a;v++)s.push(c+h*v)}return s}});var eS=ne((nor,Jye)=>{"use strict";var NN=wi(),UN=Wt(),pP=Xi(),jye=u0(),wmt=Oye(),Tmt=gv(),Amt=fP(),Mmt=hP(),Smt=vP(),Emt=dP(),gP=BN(),VN=$a().BADNUM;Jye.exports=function(t,r){var i=pP.getFromId(t,r.xaxis||"x"),n=pP.getFromId(t,r.yaxis||"y"),a=NN.traceIs(r,"contour"),o=NN.traceIs(r,"histogram"),s=NN.traceIs(r,"gl2d"),l=a?"best":r.zsmooth,u,f,c,h,v,d,_,T,p,M,b;if(i._minDtick=0,n._minDtick=0,o)b=wmt(t,r),h=b.orig_x,u=b.x,f=b.x0,c=b.dx,T=b.orig_y,v=b.y,d=b.y0,_=b.dy,p=b.z;else{var w=r.z;UN.isArray1D(w)?(Amt(r,i,n,"x","y",["z"]),u=r._x,v=r._y,w=r._z):(h=r.x?i.makeCalcdata(r,"x"):[],T=r.y?n.makeCalcdata(r,"y"):[],u=jye(r,i,"x",h).vals,v=jye(r,n,"y",T).vals,r._x=u,r._y=v),f=r.x0,c=r.dx,d=r.y0,_=r.dy,p=Mmt(w,r,i,n)}(i.rangebreaks||n.rangebreaks)&&(p=kmt(u,v,p),o||(u=Kye(u),v=Kye(v),r._x=u,r._y=v)),!o&&(a||r.connectgaps)&&(r._emptypoints=Emt(p),Smt(p,r._emptypoints));function k(z){l=r._input.zsmooth=r.zsmooth=!1,UN.warn('cannot use zsmooth: "fast": '+z)}function x(z){if(z.length>1){var O=(z[z.length-1]-z[0])/(z.length-1),V=Math.abs(O/100);for(M=0;M<z.length-1;M++)if(Math.abs(z[M+1]-z[M]-O)>V)return!1}return!0}r._islinear=!1,i.type==="log"||n.type==="log"?l==="fast"&&k("log axis found"):x(u)?x(v)?r._islinear=!0:l==="fast"&&k("y scale is not linear"):l==="fast"&&k("x scale is not linear");var E=UN.maxRowLength(p),S=r.xtype==="scaled"?"":u,g=gP(r,S,f,c,E,i),C=r.ytype==="scaled"?"":v,A=gP(r,C,d,_,p.length,n);s||(r._extremes[i._id]=pP.findExtremes(i,g),r._extremes[n._id]=pP.findExtremes(n,A));var P={x:g,y:A,z:p,text:r._text||r.text,hovertext:r._hovertext||r.hovertext};if(r.xperiodalignment&&h&&(P.orig_x=h),r.yperiodalignment&&T&&(P.orig_y=T),S&&S.length===g.length-1&&(P.xCenter=S),C&&C.length===A.length-1&&(P.yCenter=C),o&&(P.xRanges=b.xRanges,P.yRanges=b.yRanges,P.pts=b.pts),a||Tmt(t,r,{vals:p,cLetter:"z"}),a&&r.contours&&r.contours.coloring==="heatmap"){var D={type:r.type==="contour"?"heatmap":"histogram2d",xcalendar:r.xcalendar,ycalendar:r.ycalendar};P.xfill=gP(D,S,f,c,E,i),P.yfill=gP(D,C,d,_,p.length,n)}return[P]};function Kye(e){for(var t=[],r=e.length,i=0;i<r;i++){var n=e[i];n!==VN&&t.push(n)}return t}function kmt(e,t,r){for(var i=[],n=-1,a=0;a<r.length;a++)if(t[a]!==VN){n++,i[n]=[];for(var o=0;o<r[a].length;o++)e[o]!==VN&&i[n].push(r[a][o])}return i}});var mP=ne(yP=>{"use strict";yP.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]];yP.STYLE=yP.CSS_DECLARATIONS.map(function(e){return e.join(": ")+"; "}).join("")});var GN=ne((aor,$ye)=>{"use strict";var Qye=mP(),Cmt=aa(),HN=Wt(),xw=null;function Lmt(){if(xw!==null)return xw;xw=!1;var e=HN.isIE()||HN.isSafari()||HN.isIOS();if(window.navigator.userAgent&&!e){var t=Array.from(Qye.CSS_DECLARATIONS).reverse(),r=window.CSS&&window.CSS.supports||window.supportsCSS;if(typeof r=="function")xw=t.some(function(o){return r.apply(null,o)});else{var i=Cmt.tester.append("image").attr("style",Qye.STYLE),n=window.getComputedStyle(i.node()),a=n.imageRendering;xw=t.some(function(o){var s=o[1];return a===s||a===s.toLowerCase()}),i.remove()}}return xw}$ye.exports=Lmt});var xP=ne((oor,lme)=>{"use strict";var eme=Ai(),Pmt=Xf(),Rmt=wi(),Dmt=aa(),Imt=Xi(),Ap=Wt(),tme=Es(),Fmt=hL(),qmt=_i(),zmt=ul().extractOpts,Omt=ul().makeColorScaleFuncFromTrace,Bmt=kd(),Nmt=Tf(),YN=Nmt.LINE_SPACING,Umt=GN(),Vmt=mP().STYLE,ome="heatmap-label";function sme(e){return e.selectAll("g."+ome)}function rme(e){sme(e).remove()}lme.exports=function(e,t,r,i){var n=t.xaxis,a=t.yaxis;Ap.makeTraceGroups(i,r,"hm").each(function(o){var s=eme.select(this),l=o[0],u=l.trace,f=u.xgap||0,c=u.ygap||0,h=l.z,v=l.x,d=l.y,_=l.xCenter,T=l.yCenter,p=Rmt.traceIs(u,"contour"),M=p?"best":u.zsmooth,b=h.length,w=Ap.maxRowLength(h),k=!1,x=!1,E,S,g,C,A,P,D,z;for(P=0;E===void 0&&P<v.length-1;)E=n.c2p(v[P]),P++;for(P=v.length-1;S===void 0&&P>0;)S=n.c2p(v[P]),P--;for(S<E&&(g=S,S=E,E=g,k=!0),P=0;C===void 0&&P<d.length-1;)C=a.c2p(d[P]),P++;for(P=d.length-1;A===void 0&&P>0;)A=a.c2p(d[P]),P--;A<C&&(g=C,C=A,A=g,x=!0),p&&(_=v,T=d,v=l.xfill,d=l.yfill);var O="default";if(M?O=M==="best"?"smooth":"fast":u._islinear&&f===0&&c===0&&Umt()&&(O="fast"),O!=="fast"){var V=M==="best"?0:.5;E=Math.max(-V*n._length,E),S=Math.min((1+V)*n._length,S),C=Math.max(-V*a._length,C),A=Math.min((1+V)*a._length,A)}var B=Math.round(S-E),F=Math.round(A-C),N=E>=n._length||S<=0||C>=a._length||A<=0;if(N){var Z=s.selectAll("image").data([]);Z.exit().remove(),rme(s);return}var J,re;O==="fast"?(J=w,re=b):(J=B,re=F);var ue=document.createElement("canvas");ue.width=J,ue.height=re;var fe=ue.getContext("2d",{willReadFrequently:!0}),K=Omt(u,{noNumericCheck:!0,returnArray:!0}),X,ae;O==="fast"?(X=k?function(Wr){return w-1-Wr}:Ap.identity,ae=x?function(Wr){return b-1-Wr}:Ap.identity):(X=function(Wr){return Ap.constrain(Math.round(n.c2p(v[Wr])-E),0,B)},ae=function(Wr){return Ap.constrain(Math.round(a.c2p(d[Wr])-C),0,F)});var oe=ae(0),me=[oe,oe],xe=k?0:1,ce=x?0:1,ie=0,ge=0,le=0,we=0,Re,qe,et,Pe,Ie;function ut(Wr,qn){if(Wr!==void 0){var vi=K(Wr);return vi[0]=Math.round(vi[0]),vi[1]=Math.round(vi[1]),vi[2]=Math.round(vi[2]),ie+=qn,ge+=vi[0]*qn,le+=vi[1]*qn,we+=vi[2]*qn,vi}return[0,0,0,0]}function ft(Wr,qn,vi,Mi){var Ui=Wr[vi.bin0];if(Ui===void 0)return ut(void 0,1);var ji=Wr[vi.bin1],ea=qn[vi.bin0],Ra=qn[vi.bin1],Li=ji-Ui||0,Yn=ea-Ui||0,zi;return ji===void 0?Ra===void 0?zi=0:ea===void 0?zi=2*(Ra-Ui):zi=(2*Ra-ea-Ui)*2/3:Ra===void 0?ea===void 0?zi=0:zi=(2*Ui-ji-ea)*2/3:ea===void 0?zi=(2*Ra-ji-Ui)*2/3:zi=Ra+Ui-ji-ea,ut(Ui+vi.frac*Li+Mi.frac*(Yn+vi.frac*zi))}if(O!=="default"){var je=0,_t;try{_t=new Uint8Array(J*re*4)}catch(Wr){_t=new Array(J*re*4)}if(O==="smooth"){var Bt=_||v,Lt=T||d,Me=new Array(Bt.length),Ze=new Array(Lt.length),dt=new Array(B),it=_?ime:nme,vt=T?ime:nme,rt,We,ht;for(P=0;P<Bt.length;P++)Me[P]=Math.round(n.c2p(Bt[P])-E);for(P=0;P<Lt.length;P++)Ze[P]=Math.round(a.c2p(Lt[P])-C);for(P=0;P<B;P++)dt[P]=it(P,Me);for(D=0;D<F;D++)for(rt=vt(D,Ze),We=h[rt.bin0],ht=h[rt.bin1],P=0;P<B;P++,je+=4)Ie=ft(We,ht,dt[P],rt),ame(_t,je,Ie)}else for(D=0;D<b;D++)for(Pe=h[D],me=ae(D),P=0;P<w;P++)Ie=ut(Pe[P],1),je=(me*w+X(P))*4,ame(_t,je,Ie);var mt=fe.createImageData(J,re);try{mt.data.set(_t)}catch(Wr){var er=mt.data,$t=er.length;for(D=0;D<$t;D++)er[D]=_t[D]}fe.putImageData(mt,0,0)}else{var cr=Math.floor(f/2),or=Math.floor(c/2);for(D=0;D<b;D++)if(Pe=h[D],me.reverse(),me[ce]=ae(D+1),!(me[0]===me[1]||me[0]===void 0||me[1]===void 0))for(qe=X(0),Re=[qe,qe],P=0;P<w;P++)Re.reverse(),Re[xe]=X(P+1),!(Re[0]===Re[1]||Re[0]===void 0||Re[1]===void 0)&&(et=Pe[P],Ie=ut(et,(Re[1]-Re[0])*(me[1]-me[0])),fe.fillStyle="rgba("+Ie.join(",")+")",fe.fillRect(Re[0]+cr,me[0]+or,Re[1]-Re[0]-f,me[1]-me[0]-c))}ge=Math.round(ge/ie),le=Math.round(le/ie),we=Math.round(we/ie);var vr=Pmt("rgb("+ge+","+le+","+we+")");e._hmpixcount=(e._hmpixcount||0)+ie,e._hmlumcount=(e._hmlumcount||0)+ie*vr.getLuminance();var Ot=s.selectAll("image").data(o);Ot.enter().append("svg:image").attr({xmlns:Bmt.svg,preserveAspectRatio:"none"}),Ot.attr({height:F,width:B,x:E,y:C,"xlink:href":ue.toDataURL("image/png")}),O==="fast"&&!M&&Ot.attr("style",Vmt),rme(s);var yt=u.texttemplate;if(yt){var Et=zmt(u),Je={type:"linear",range:[Et.min,Et.max],_separators:n._separators,_numFormat:n._numFormat},Ke=u.type==="histogram2dcontour",At=u.type==="contour",Ee=At?1:0,de=At?b-1:b,Te=At?1:0,nt=At?w-1:w,Mt=[];for(P=Ee;P<de;P++){var Kt;if(At)Kt=l.y[P];else if(Ke){if(P===0||P===b-1)continue;Kt=l.y[P]}else if(l.yCenter)Kt=l.yCenter[P];else{if(P+1===b&&l.y[P+1]===void 0)continue;Kt=(l.y[P]+l.y[P+1])/2}var Jt=Math.round(a.c2p(Kt));if(!(0>Jt||Jt>a._length))for(D=Te;D<nt;D++){var Fr;if(At)Fr=l.x[D];else if(Ke){if(D===0||D===w-1)continue;Fr=l.x[D]}else if(l.xCenter)Fr=l.xCenter[D];else{if(D+1===w&&l.x[D+1]===void 0)continue;Fr=(l.x[D]+l.x[D+1])/2}var Vr=Math.round(n.c2p(Fr));if(!(0>Vr||Vr>n._length)){var mr=Fmt({x:Fr,y:Kt},u,e._fullLayout);mr.x=Fr,mr.y=Kt;var zr=l.z[P][D];zr===void 0?(mr.z="",mr.zLabel=""):(mr.z=zr,mr.zLabel=Imt.tickText(Je,zr,"hover").text);var an=l.text&&l.text[P]&&l.text[P][D];(an===void 0||an===!1)&&(an=""),mr.text=an;var ni=Ap.texttemplateString(yt,mr,e._fullLayout._d3locale,mr,u._meta||{});if(ni){var mn=ni.split("<br>"),fi=mn.length,Wi=0;for(z=0;z<fi;z++)Wi=Math.max(Wi,mn[z].length);Mt.push({l:fi,c:Wi,t:ni,x:Vr,y:Jt,z:zr})}}}}var si=u.textfont,Zi=si.family,Ei=si.size,ot=e._fullLayout.font.size;if(!Ei||Ei==="auto"){var Be=1/0,lt=1/0,xt=0,Nt=0;for(z=0;z<Mt.length;z++){var nr=Mt[z];if(xt=Math.max(xt,nr.l),Nt=Math.max(Nt,nr.c),z<Mt.length-1){var yr=Mt[z+1],dr=Math.abs(yr.x-nr.x),Rr=Math.abs(yr.y-nr.y);dr&&(Be=Math.min(Be,dr)),Rr&&(lt=Math.min(lt,Rr))}}!isFinite(Be)||!isFinite(lt)?Ei=ot:(Be-=f,lt-=c,Be/=Nt,lt/=xt,Be/=YN/2,lt/=YN,Ei=Math.min(Math.floor(Be),Math.floor(lt),ot))}if(Ei<=0||!isFinite(Ei))return;var Gr=function(Wr){return Wr.x},Yr=function(Wr){return Wr.y-Ei*(Wr.l*YN/2-1)},dn=sme(s).data(Mt);dn.enter().append("g").classed(ome,1).append("text").attr("text-anchor","middle").each(function(Wr){var qn=eme.select(this),vi=si.color;(!vi||vi==="auto")&&(vi=qmt.contrast(Wr.z===void 0?e._fullLayout.plot_bgcolor:"rgba("+K(Wr.z).join()+")")),qn.attr("data-notex",1).call(tme.positionText,Gr(Wr),Yr(Wr)).call(Dmt.font,Zi,Ei,vi).text(Wr.t).call(tme.convertToTspans,e)})}})};function nme(e,t){var r=t.length-2,i=Ap.constrain(Ap.findBin(e,t),0,r),n=t[i],a=t[i+1],o=Ap.constrain(i+(e-n)/(a-n)-.5,0,r),s=Math.round(o),l=Math.abs(o-s);return!o||o===r||!l?{bin0:s,bin1:s,frac:0}:{bin0:s,frac:l,bin1:Math.round(s+l/(o-s))}}function ime(e,t){var r=t.length-1,i=Ap.constrain(Ap.findBin(e,t),0,r),n=t[i],a=t[i+1],o=(e-n)/(a-n)||0;return o<=0?{bin0:i,bin1:i,frac:0}:o<.5?{bin0:i,bin1:i+1,frac:o}:{bin0:i+1,bin1:i,frac:1-o}}function ame(e,t,r){e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=Math.round(r[3]*255)}});var jx=ne((sor,ume)=>{"use strict";ume.exports={min:"zmin",max:"zmax"}});var _P=ne((lor,fme)=>{"use strict";var Hmt=Ai();fme.exports=function(t){Hmt.select(t).selectAll(".hm image").style("opacity",function(r){return r.trace.opacity})}});var wP=ne((uor,hme)=>{"use strict";var cme=Ol(),tS=Wt(),bP=tS.isArrayOrTypedArray,Gmt=Xi(),Ymt=ul().extractOpts;hme.exports=function(t,r,i,n,a){a||(a={});var o=a.isContour,s=t.cd[0],l=s.trace,u=t.xa,f=t.ya,c=s.x,h=s.y,v=s.z,d=s.xCenter,_=s.yCenter,T=s.zmask,p=l.zhoverformat,M=c,b=h,w,k,x,E;if(t.index!==!1){try{x=Math.round(t.index[1]),E=Math.round(t.index[0])}catch(Z){tS.error("Error hovering on heatmap, pointNumber must be [row,col], found:",t.index);return}if(x<0||x>=v[0].length||E<0||E>v.length)return}else{if(cme.inbox(r-c[0],r-c[c.length-1],0)>0||cme.inbox(i-h[0],i-h[h.length-1],0)>0)return;if(o){var S;for(M=[2*c[0]-c[1]],S=1;S<c.length;S++)M.push((c[S]+c[S-1])/2);for(M.push([2*c[c.length-1]-c[c.length-2]]),b=[2*h[0]-h[1]],S=1;S<h.length;S++)b.push((h[S]+h[S-1])/2);b.push([2*h[h.length-1]-h[h.length-2]])}x=Math.max(0,Math.min(M.length-2,tS.findBin(r,M))),E=Math.max(0,Math.min(b.length-2,tS.findBin(i,b)))}var g=u.c2p(c[x]),C=u.c2p(c[x+1]),A=f.c2p(h[E]),P=f.c2p(h[E+1]),D,z;o?(D=s.orig_x||c,z=s.orig_y||h,C=g,w=D[x],P=A,k=z[E]):(D=s.orig_x||d||c,z=s.orig_y||_||h,w=d?D[x]:(D[x]+D[x+1])/2,k=_?z[E]:(z[E]+z[E+1])/2,u&&u.type==="category"&&(w=c[x]),f&&f.type==="category"&&(k=h[E]),l.zsmooth&&(g=C=u.c2p(w),A=P=f.c2p(k)));var O=v[E][x];if(T&&!T[E][x]&&(O=void 0),!(O===void 0&&!l.hoverongaps)){var V;bP(s.hovertext)&&bP(s.hovertext[E])?V=s.hovertext[E][x]:bP(s.text)&&bP(s.text[E])&&(V=s.text[E][x]);var B=Ymt(l),F={type:"linear",range:[B.min,B.max],hoverformat:p,_separators:u._separators,_numFormat:u._numFormat},N=Gmt.tickText(F,O,"hover").text;return[tS.extendFlat(t,{index:l._after2before?l._after2before[E][x]:[E,x],distance:t.maxHoverDistance,spikeDistance:t.maxSpikeDistance,x0:g,x1:C,y0:A,y1:P,xLabelVal:w,yLabelVal:k,zLabelVal:O,zLabel:N,text:V})]}}});var dme=ne((cor,vme)=>{"use strict";vme.exports={attributes:Xx(),supplyDefaults:gye(),calc:eS(),plot:xP(),colorbar:jx(),style:_P(),hoverPoints:wP(),moduleType:"trace",name:"heatmap",basePlotModule:vu(),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}});var gme=ne((hor,pme)=>{"use strict";pme.exports=dme()});var WN=ne((vor,yme)=>{"use strict";yme.exports=function(t,r){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}});var xme=ne((dor,mme)=>{"use strict";mme.exports={eventDataKeys:["binNumber"]}});var TP=ne((por,wme)=>{"use strict";var ud=J0(),_me=kl().axisHoverFormat,Wmt=Ba().hovertemplateAttrs,Xmt=Ba().texttemplateAttrs,XN=ll(),bme=WN(),Zmt=xme(),ZN=oa().extendFlat;wme.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:_me("x"),yhoverformat:_me("y"),text:ZN({},ud.text,{}),hovertext:ZN({},ud.hovertext,{}),orientation:ud.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:bme("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:bme("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:Wmt({},{keys:Zmt.eventDataKeys}),texttemplate:Xmt({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:ZN({},ud.textposition,{arrayOk:!1}),textfont:XN({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:XN({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:XN({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:ud.insidetextanchor,textangle:ud.textangle,cliponaxis:ud.cliponaxis,constraintext:ud.constraintext,marker:ud.marker,offsetgroup:ud.offsetgroup,alignmentgroup:ud.alignmentgroup,selected:ud.selected,unselected:ud.unselected,_deprecated:{bardir:ud._deprecated.bardir}}});var Sme=ne((gor,Mme)=>{"use strict";var Tme=wi(),rS=Wt(),Ame=_i(),jmt=Fd().handleText,Kmt=KL(),Jmt=TP();Mme.exports=function(t,r,i,n){function a(M,b){return rS.coerce(t,r,Jmt,M,b)}var o=a("x"),s=a("y"),l=a("cumulative.enabled");l&&(a("cumulative.direction"),a("cumulative.currentbin")),a("text");var u=a("textposition");jmt(t,r,n,a,u,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat");var f=a("orientation",s&&!o?"h":"v"),c=f==="v"?"x":"y",h=f==="v"?"y":"x",v=o&&s?Math.min(rS.minRowLength(o)&&rS.minRowLength(s)):rS.minRowLength(r[c]||[]);if(!v){r.visible=!1;return}r._length=v;var d=Tme.getComponentMethod("calendars","handleTraceDefaults");d(t,r,["x","y"],n);var _=r[h];_&&a("histfunc"),a("histnorm"),a("autobin"+c),Kmt(t,r,a,i,n),rS.coerceSelectionMarkerOpacity(r,a);var T=(r.marker.line||{}).color,p=Tme.getComponentMethod("errorbars","supplyDefaults");p(t,r,T||Ame.defaultLine,{axis:"y"}),p(t,r,T||Ame.defaultLine,{axis:"x",inherit:"y"})}});var MP=ne((yor,Cme)=>{"use strict";var nS=Wt(),Qmt=zl(),AP=wi().traceIs,$mt=Dx(),e1t=Fd().validateCornerradius,Eme=nS.nestedProperty,jN=mm().getAxisGroup,kme=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],t1t=["x","y"];Cme.exports=function(t,r){var i=r._histogramBinOpts={},n=[],a={},o=[],s,l,u,f,c,h,v;function d(O,V){return nS.coerce(s._input,s,s._module.attributes,O,V)}function _(O){return O.orientation==="v"?"x":"y"}function T(O,V){var B=Qmt.getFromTrace({_fullLayout:r},O,V);return B.type}function p(O,V,B){var F=O.uid+"__"+B;V||(V=F);var N=T(O,B),Z=O[B+"calendar"]||"",J=i[V],re=!0;J&&(N===J.axType&&Z===J.calendar?(re=!1,J.traces.push(O),J.dirs.push(B)):(V=F,N!==J.axType&&nS.warn(["Attempted to group the bins of trace",O.index,"set on a","type:"+N,"axis","with bins on","type:"+J.axType,"axis."].join(" ")),Z!==J.calendar&&nS.warn(["Attempted to group the bins of trace",O.index,"set with a",Z,"calendar","with bins",J.calendar?"on a "+J.calendar+" calendar":"w/o a set calendar"].join(" ")))),re&&(i[V]={traces:[O],dirs:[B],axType:N,calendar:O[B+"calendar"]||""}),O["_"+B+"bingroup"]=V}for(c=0;c<t.length;c++)if(s=t[c],AP(s,"histogram")){if(n.push(s),delete s._xautoBinFinished,delete s._yautoBinFinished,s.type==="histogram"){var M=d("marker.cornerradius",r.barcornerradius);s.marker&&(s.marker.cornerradius=e1t(M))}AP(s,"2dMap")||$mt(s._input,s,r,d)}var b=r._alignmentOpts||{};for(c=0;c<n.length;c++){if(s=n[c],u="",!AP(s,"2dMap")){if(f=_(s),r.barmode==="group"&&s.alignmentgroup){var w=s[f+"axis"],k=jN(r,w)+s.orientation;(b[k]||{})[s.alignmentgroup]&&(u=k)}!u&&r.barmode!=="overlay"&&(u=jN(r,s.xaxis)+jN(r,s.yaxis)+_(s))}u?(a[u]||(a[u]=[]),a[u].push(s)):o.push(s)}for(u in a){if(l=a[u],l.length===1){o.push(l[0]);continue}var x=!1;for(l.length&&(s=l[0],x=d("bingroup")),u=x||u,c=0;c<l.length;c++){s=l[c];var E=s._input.bingroup;E&&E!==u&&nS.warn(["Trace",s.index,"must match","within bingroup",u+".","Ignoring its bingroup:",E,"setting."].join(" ")),s.bingroup=u,p(s,u,_(s))}}for(c=0;c<o.length;c++){s=o[c];var S=d("bingroup");if(AP(s,"2dMap"))for(v=0;v<2;v++){f=t1t[v];var g=d(f+"bingroup",S?S+"__"+f:null);p(s,g,f)}else p(s,S,_(s))}for(u in i){var C=i[u];for(l=C.traces,h=0;h<kme.length;h++){var A=kme[h],P=A.name,D,z;if(!(P==="nbins"&&C.sizeFound)){for(c=0;c<l.length;c++){if(s=l[c],f=C.dirs[c],D=A.aStr[f],Eme(s._input,D).get()!==void 0){C[P]=d(D),C[P+"Found"]=!0;break}z=(s._autoBin||{})[f]||{},z[P]&&Eme(s,D).set(z[P])}if(P==="start"||P==="end")for(;c<l.length;c++)s=l[c],s["_"+f+"bingroup"]&&(z=(s._autoBin||{})[f]||{},d(D,z[P]));P==="nbins"&&!C.sizeFound&&!C.nbinsFound&&(s=l[0],C[P]=d(D))}}}}});var Pme=ne((mor,Lme)=>{"use strict";var r1t=hw().hoverPoints,n1t=Xi().hoverLabelText;Lme.exports=function(t,r,i,n,a){var o=r1t(t,r,i,n,a);if(o){t=o[0];var s=t.cd[t.index],l=t.cd[0].trace;if(!l.cumulative.enabled){var u=l.orientation==="h"?"y":"x";t[u+"Label"]=n1t(t[u+"a"],[s.ph0,s.ph1],l[u+"hoverformat"])}return o}}});var KN=ne((xor,Rme)=>{"use strict";Rme.exports=function(t,r,i,n,a){if(t.x="xVal"in r?r.xVal:r.x,t.y="yVal"in r?r.yVal:r.y,"zLabelVal"in r&&(t.z=r.zLabelVal),r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),!(i.cumulative||{}).enabled){var o=Array.isArray(a)?n[0].pts[a[0]][a[1]]:n[a].pts;t.pointNumbers=o,t.binNumber=t.pointNumber,delete t.pointNumber,delete t.pointIndex;var s;if(i._indexToPoints){s=[];for(var l=0;l<o.length;l++)s=s.concat(i._indexToPoints[o[l]])}else s=o;t.pointIndices=s}return t}});var Ime=ne((_or,Dme)=>{"use strict";Dme.exports={attributes:TP(),layoutAttributes:jL(),supplyDefaults:Sme(),crossTraceDefaults:MP(),supplyLayoutDefaults:dN(),calc:zN().calc,crossTraceCalc:Ix().crossTraceCalc,plot:Yx().plot,layerName:"barlayer",style:_p().style,styleOnSelect:_p().styleOnSelect,colorbar:ph(),hoverPoints:Pme(),selectPoints:vw(),eventData:KN(),moduleType:"trace",name:"histogram",basePlotModule:vu(),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}});var qme=ne((bor,Fme)=>{"use strict";Fme.exports=Ime()});var EP=ne((wor,Ome)=>{"use strict";var m0=TP(),zme=WN(),SP=Xx(),i1t=es(),JN=kl().axisHoverFormat,a1t=Ba().hovertemplateAttrs,o1t=Ba().texttemplateAttrs,s1t=Ps(),iS=oa().extendFlat;Ome.exports=iS({x:m0.x,y:m0.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:m0.histnorm,histfunc:m0.histfunc,nbinsx:m0.nbinsx,xbins:zme("x"),nbinsy:m0.nbinsy,ybins:zme("y"),autobinx:m0.autobinx,autobiny:m0.autobiny,bingroup:iS({},m0.bingroup,{}),xbingroup:iS({},m0.bingroup,{}),ybingroup:iS({},m0.bingroup,{}),xgap:SP.xgap,ygap:SP.ygap,zsmooth:SP.zsmooth,xhoverformat:JN("x"),yhoverformat:JN("y"),zhoverformat:JN("z",1),hovertemplate:a1t({},{keys:"z"}),texttemplate:o1t({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:SP.textfont,showlegend:iS({},i1t.showlegend,{dflt:!1})},s1t("",{cLetter:"z",autoColorDflt:!1}))});var QN=ne((Tor,Nme)=>{"use strict";var l1t=wi(),Bme=Wt();Nme.exports=function(t,r,i,n){var a=i("x"),o=i("y"),s=Bme.minRowLength(a),l=Bme.minRowLength(o);if(!s||!l){r.visible=!1;return}r._length=Math.min(s,l);var u=l1t.getComponentMethod("calendars","handleTraceDefaults");u(t,r,["x","y"],n);var f=i("z")||i("marker.color");f&&i("histfunc"),i("histnorm"),i("autobinx"),i("autobiny")}});var Vme=ne((Aor,Ume)=>{"use strict";var u1t=Wt(),f1t=QN(),c1t=LN(),h1t=Kf(),v1t=$M(),d1t=EP();Ume.exports=function(t,r,i,n){function a(o,s){return u1t.coerce(t,r,d1t,o,s)}f1t(t,r,a,n),r.visible!==!1&&(c1t(t,r,a,n),h1t(t,r,n,a,{prefix:"",cLetter:"z"}),a("hovertemplate"),v1t(a,n),a("xhoverformat"),a("yhoverformat"))}});var Yme=ne((Mor,Gme)=>{"use strict";var p1t=wP(),Hme=Xi().hoverLabelText;Gme.exports=function(t,r,i,n,a){var o=p1t(t,r,i,n,a);if(o){t=o[0];var s=t.index,l=s[0],u=s[1],f=t.cd[0],c=f.trace,h=f.xRanges[u],v=f.yRanges[l];return t.xLabel=Hme(t.xa,[h[0],h[1]],c.xhoverformat),t.yLabel=Hme(t.ya,[v[0],v[1]],c.yhoverformat),o}}});var Xme=ne((Sor,Wme)=>{"use strict";Wme.exports={attributes:EP(),supplyDefaults:Vme(),crossTraceDefaults:MP(),calc:eS(),plot:xP(),layerName:"heatmaplayer",colorbar:jx(),style:_P(),hoverPoints:Yme(),eventData:KN(),moduleType:"trace",name:"histogram2d",basePlotModule:vu(),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}});var jme=ne((Eor,Zme)=>{"use strict";Zme.exports=Xme()});var aS=ne((kor,Kme)=>{"use strict";Kme.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}});var oS=ne((Cor,e1e)=>{"use strict";var Ef=Xx(),e9=cu(),Qme=kl(),$N=Qme.axisHoverFormat,g1t=Qme.descriptionOnlyNumbers,y1t=Ps(),m1t=hc().dash,x1t=ll(),_w=oa().extendFlat,$me=aS(),_1t=$me.COMPARISON_OPS2,b1t=$me.INTERVAL_OPS,Jme=e9.line;e1e.exports=_w({z:Ef.z,x:Ef.x,x0:Ef.x0,dx:Ef.dx,y:Ef.y,y0:Ef.y0,dy:Ef.dy,xperiod:Ef.xperiod,yperiod:Ef.yperiod,xperiod0:e9.xperiod0,yperiod0:e9.yperiod0,xperiodalignment:Ef.xperiodalignment,yperiodalignment:Ef.yperiodalignment,text:Ef.text,hovertext:Ef.hovertext,transpose:Ef.transpose,xtype:Ef.xtype,ytype:Ef.ytype,xhoverformat:$N("x"),yhoverformat:$N("y"),zhoverformat:$N("z",1),hovertemplate:Ef.hovertemplate,texttemplate:_w({},Ef.texttemplate,{}),textfont:_w({},Ef.textfont,{}),hoverongaps:Ef.hoverongaps,connectgaps:_w({},Ef.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:x1t({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:g1t("contour label")},operation:{valType:"enumerated",values:[].concat(_1t).concat(b1t),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:_w({},Jme.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:m1t,smoothing:_w({},Jme.smoothing,{}),editType:"plot"}},y1t("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))});var r9=ne((Lor,r1e)=>{"use strict";var Kh=EP(),$g=oS(),w1t=Ps(),t9=kl().axisHoverFormat,t1e=oa().extendFlat;r1e.exports=t1e({x:Kh.x,y:Kh.y,z:Kh.z,marker:Kh.marker,histnorm:Kh.histnorm,histfunc:Kh.histfunc,nbinsx:Kh.nbinsx,xbins:Kh.xbins,nbinsy:Kh.nbinsy,ybins:Kh.ybins,autobinx:Kh.autobinx,autobiny:Kh.autobiny,bingroup:Kh.bingroup,xbingroup:Kh.xbingroup,ybingroup:Kh.ybingroup,autocontour:$g.autocontour,ncontours:$g.ncontours,contours:$g.contours,line:{color:$g.line.color,width:t1e({},$g.line.width,{dflt:.5}),dash:$g.line.dash,smoothing:$g.line.smoothing,editType:"plot"},xhoverformat:t9("x"),yhoverformat:t9("y"),zhoverformat:t9("z",1),hovertemplate:Kh.hovertemplate,texttemplate:$g.texttemplate,textfont:$g.textfont},w1t("",{cLetter:"z",editTypeOverride:"calc"}))});var kP=ne((Por,n1e)=>{"use strict";n1e.exports=function(t,r,i,n){var a=n("contours.start"),o=n("contours.end"),s=a===!1||o===!1,l=i("contours.size"),u;s?u=r.autocontour=!0:u=i("autocontour",!1),(u||!l)&&i("ncontours")}});var n9=ne((Ror,i1e)=>{"use strict";var T1t=Wt();i1e.exports=function(t,r,i,n){n||(n={});var a=t("contours.showlabels");if(a){var o=r.font;T1t.coerceFont(t,"contours.labelfont",{family:o.family,size:o.size,color:i}),t("contours.labelformat")}n.hasHover!==!1&&t("zhoverformat")}});var CP=ne((Dor,a1e)=>{"use strict";var A1t=Kf(),M1t=n9();a1e.exports=function(t,r,i,n,a){var o=i("contours.coloring"),s,l="";o==="fill"&&(s=i("contours.showlines")),s!==!1&&(o!=="lines"&&(l=i("line.color","#000")),i("line.width",.5),i("line.dash")),o!=="none"&&(t.showlegend!==!0&&(r.showlegend=!1),r._dfltShowLegend=!1,A1t(t,r,n,i,{prefix:"",cLetter:"z"})),i("line.smoothing"),M1t(i,n,l,a)}});var u1e=ne((Ior,l1e)=>{"use strict";var o1e=Wt(),S1t=QN(),E1t=kP(),k1t=CP(),C1t=$M(),s1e=r9();l1e.exports=function(t,r,i,n){function a(s,l){return o1e.coerce(t,r,s1e,s,l)}function o(s){return o1e.coerce2(t,r,s1e,s)}S1t(t,r,a,n),r.visible!==!1&&(E1t(t,r,a,o),k1t(t,r,a,n),a("xhoverformat"),a("yhoverformat"),a("hovertemplate"),r.contours&&r.contours.coloring==="heatmap"&&C1t(a,n))}});var o9=ne((For,c1e)=>{"use strict";var a9=Xi(),i9=Wt();c1e.exports=function(t,r){var i=t.contours;if(t.autocontour){var n=t.zmin,a=t.zmax;(t.zauto||n===void 0)&&(n=i9.aggNums(Math.min,null,r)),(t.zauto||a===void 0)&&(a=i9.aggNums(Math.max,null,r));var o=f1e(n,a,t.ncontours);i.size=o.dtick,i.start=a9.tickFirst(o),o.range.reverse(),i.end=a9.tickFirst(o),i.start===n&&(i.start+=i.size),i.end===a&&(i.end-=i.size),i.start>i.end&&(i.start=i.end=(i.start+i.end)/2),t._input.contours||(t._input.contours={}),i9.extendFlat(t._input.contours,{start:i.start,end:i.end,size:i.size}),t._input.autocontour=!0}else if(i.type!=="constraint"){var s=i.start,l=i.end,u=t._input.contours;if(s>l&&(i.start=u.start=l,l=i.end=u.end=s,s=i.start),!(i.size>0)){var f;s===l?f=1:f=f1e(s,l,t.ncontours).dtick,u.size=i.size=f}}};function f1e(e,t,r){var i={type:"linear",range:[e,t]};return a9.autoTicks(i,(t-e)/(r||15)),i}});var sS=ne((qor,h1e)=>{"use strict";h1e.exports=function(t){return t.end+t.size/1e6}});var s9=ne((zor,d1e)=>{"use strict";var v1e=ul(),L1t=eS(),P1t=o9(),R1t=sS();d1e.exports=function(t,r){var i=L1t(t,r),n=i[0].z;P1t(r,n);var a=r.contours,o=v1e.extractOpts(r),s;if(a.coloring==="heatmap"&&o.auto&&r.autocontour===!1){var l=a.start,u=R1t(a),f=a.size||1,c=Math.floor((u-l)/f)+1;isFinite(f)||(f=1,c=1);var h=l-f/2,v=h+c*f;s=[h,v]}else s=n;return v1e.calc(t,r,{vals:s,cLetter:"z"}),i}});var lS=ne((Oor,p1e)=>{"use strict";p1e.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}});var l9=ne((Bor,g1e)=>{"use strict";var LP=lS();g1e.exports=function(t){var r=t[0].z,i=r.length,n=r[0].length,a=i===2||n===2,o,s,l,u,f,c,h,v,d;for(s=0;s<i-1;s++)for(u=[],s===0&&(u=u.concat(LP.BOTTOMSTART)),s===i-2&&(u=u.concat(LP.TOPSTART)),o=0;o<n-1;o++)for(l=u.slice(),o===0&&(l=l.concat(LP.LEFTSTART)),o===n-2&&(l=l.concat(LP.RIGHTSTART)),f=o+","+s,c=[[r[s][o],r[s][o+1]],[r[s+1][o],r[s+1][o+1]]],d=0;d<t.length;d++)v=t[d],h=D1t(v.level,c),h&&(v.crossings[f]=h,l.indexOf(h)!==-1&&(v.starts.push([o,s]),a&&l.indexOf(h,l.indexOf(h)+1)!==-1&&v.starts.push([o,s])))};function D1t(e,t){var r=(t[0][0]>e?0:1)+(t[0][1]>e?0:2)+(t[1][1]>e?0:4)+(t[1][0]>e?0:8);if(r===5||r===10){var i=(t[0][0]+t[0][1]+t[1][0]+t[1][1])/4;return e>i?r===5?713:1114:r===5?104:208}return r===15?0:r}});var u9=ne((Nor,x1e)=>{"use strict";var PP=Wt(),bw=lS();x1e.exports=function(t,r,i){var n,a,o,s,l;for(r=r||.01,i=i||.01,o=0;o<t.length;o++){for(s=t[o],l=0;l<s.starts.length;l++)a=s.starts[l],y1e(s,a,"edge",r,i);for(n=0;Object.keys(s.crossings).length&&n<1e4;)n++,a=Object.keys(s.crossings)[0].split(",").map(Number),y1e(s,a,void 0,r,i);n===1e4&&PP.log("Infinite loop in contour?")}};function uS(e,t,r,i){return Math.abs(e[0]-t[0])<r&&Math.abs(e[1]-t[1])<i}function I1t(e,t){var r=e[2]-t[2],i=e[3]-t[3];return Math.sqrt(r*r+i*i)}function y1e(e,t,r,i,n){var a=t.join(","),o=e.crossings[a],s=F1t(o,r,t),l=[m1e(e,t,[-s[0],-s[1]])],u=e.z.length,f=e.z[0].length,c=t.slice(),h=s.slice(),v;for(v=0;v<1e4;v++){if(o>20?(o=bw.CHOOSESADDLE[o][(s[0]||s[1])<0?0:1],e.crossings[a]=bw.SADDLEREMAINDER[o]):delete e.crossings[a],s=bw.NEWDELTA[o],!s){PP.log("Found bad marching index:",o,t,e.level);break}l.push(m1e(e,t,s)),t[0]+=s[0],t[1]+=s[1],a=t.join(","),uS(l[l.length-1],l[l.length-2],i,n)&&l.pop();var d=s[0]&&(t[0]<0||t[0]>f-2)||s[1]&&(t[1]<0||t[1]>u-2),_=t[0]===c[0]&&t[1]===c[1]&&s[0]===h[0]&&s[1]===h[1];if(_||r&&d)break;o=e.crossings[a]}v===1e4&&PP.log("Infinite loop in contour?");var T=uS(l[0],l[l.length-1],i,n),p=0,M=.2*e.smoothing,b=[],w=0,k,x,E,S,g,C,A,P,D,z,O;for(v=1;v<l.length;v++)A=I1t(l[v],l[v-1]),p+=A,b.push(A);var V=p/b.length*M;function B(Z){return l[Z%l.length]}for(v=l.length-2;v>=w;v--)if(k=b[v],k<V){for(E=0,x=v-1;x>=w&&k+b[x]<V;x--)k+=b[x];if(T&&v===l.length-2)for(E=0;E<x&&k+b[E]<V;E++)k+=b[E];g=v-x+E+1,C=Math.floor((v+x+E+2)/2),!T&&v===l.length-2?S=l[l.length-1]:!T&&x===-1?S=l[0]:g%2?S=B(C):S=[(B(C)[0]+B(C+1)[0])/2,(B(C)[1]+B(C+1)[1])/2],l.splice(x+1,v-x+1,S),v=x+1,E&&(w=E),T&&(v===l.length-2?l[E]=l[l.length-1]:v===0&&(l[l.length-1]=l[0]))}for(l.splice(0,w),v=0;v<l.length;v++)l[v].length=2;if(!(l.length<2))if(T)l.pop(),e.paths.push(l);else{r||PP.log("Unclosed interior contour?",e.level,c.join(","),l.join("L"));var F=!1;for(P=0;P<e.edgepaths.length;P++)if(z=e.edgepaths[P],!F&&uS(z[0],l[l.length-1],i,n)){l.pop(),F=!0;var N=!1;for(D=0;D<e.edgepaths.length;D++)if(O=e.edgepaths[D],uS(O[O.length-1],l[0],i,n)){N=!0,l.shift(),e.edgepaths.splice(P,1),D===P?e.paths.push(l.concat(O)):(D>P&&D--,e.edgepaths[D]=O.concat(l,z));break}N||(e.edgepaths[P]=l.concat(z))}for(P=0;P<e.edgepaths.length&&!F;P++)z=e.edgepaths[P],uS(z[z.length-1],l[0],i,n)&&(l.shift(),e.edgepaths[P]=z.concat(l),F=!0);F||e.edgepaths.push(l)}}function F1t(e,t,r){var i=0,n=0;return e>20&&t?e===208||e===1114?i=r[0]===0?1:-1:n=r[1]===0?1:-1:bw.BOTTOMSTART.indexOf(e)!==-1?n=1:bw.LEFTSTART.indexOf(e)!==-1?i=1:bw.TOPSTART.indexOf(e)!==-1?n=-1:i=-1,[i,n]}function m1e(e,t,r){var i=t[0]+Math.max(r[0],0),n=t[1]+Math.max(r[1],0),a=e.z[n][i],o=e.xaxis,s=e.yaxis;if(r[1]){var l=(e.level-a)/(e.z[n][i+1]-a),u=(l!==1?(1-l)*o.c2l(e.x[i]):0)+(l!==0?l*o.c2l(e.x[i+1]):0);return[o.c2p(o.l2c(u),!0),s.c2p(e.y[n],!0),i+l,n]}else{var f=(e.level-a)/(e.z[n+1][i]-a),c=(f!==1?(1-f)*s.c2l(e.y[n]):0)+(f!==0?f*s.c2l(e.y[n+1]):0);return[o.c2p(e.x[i],!0),s.c2p(s.l2c(c),!0),i,n+f]}}});var T1e=ne((Uor,w1e)=>{"use strict";var f9=aS(),q1t=la();w1e.exports={"[]":_1e("[]"),"][":_1e("]["),">":c9(">"),"<":c9("<"),"=":c9("=")};function b1e(e,t){var r=Array.isArray(t),i;function n(a){return q1t(a)?+a:null}return f9.COMPARISON_OPS2.indexOf(e)!==-1?i=n(r?t[0]:t):f9.INTERVAL_OPS.indexOf(e)!==-1?i=r?[n(t[0]),n(t[1])]:[n(t),n(t)]:f9.SET_OPS.indexOf(e)!==-1&&(i=r?t.map(n):[n(t)]),i}function _1e(e){return function(t){t=b1e(e,t);var r=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]);return{start:r,end:i,size:i-r}}}function c9(e){return function(t){return t=b1e(e,t),{start:t,end:1/0,size:1/0}}}});var h9=ne((Vor,M1e)=>{"use strict";var A1e=Wt(),z1t=T1e(),O1t=sS();M1e.exports=function(t,r,i){for(var n=t.type==="constraint"?z1t[t._operation](t.value):t,a=n.size,o=[],s=O1t(n),l=i.trace._carpetTrace,u=l?{xaxis:l.aaxis,yaxis:l.baxis,x:i.a,y:i.b}:{xaxis:r.xaxis,yaxis:r.yaxis,x:i.x,y:i.y},f=n.start;f<s;f+=a)if(o.push(A1e.extendFlat({level:f,crossings:{},starts:[],edgepaths:[],paths:[],z:i.z,smoothing:i.trace.line.smoothing},u)),o.length>1e3){A1e.warn("Too many contours, clipping at 1000",t);break}return o}});var v9=ne((Hor,E1e)=>{"use strict";var ww=Wt();E1e.exports=function(e,t){var r,i,n,a=function(l){return l.reverse()},o=function(l){return l};switch(t){case"=":case"<":return e;case">":for(e.length!==1&&ww.warn("Contour data invalid for the specified inequality operation."),i=e[0],r=0;r<i.edgepaths.length;r++)i.edgepaths[r]=a(i.edgepaths[r]);for(r=0;r<i.paths.length;r++)i.paths[r]=a(i.paths[r]);for(r=0;r<i.starts.length;r++)i.starts[r]=a(i.starts[r]);return e;case"][":var s=a;a=o,o=s;case"[]":for(e.length!==2&&ww.warn("Contour data invalid for the specified inequality range operation."),i=S1e(e[0]),n=S1e(e[1]),r=0;r<i.edgepaths.length;r++)i.edgepaths[r]=a(i.edgepaths[r]);for(r=0;r<i.paths.length;r++)i.paths[r]=a(i.paths[r]);for(r=0;r<i.starts.length;r++)i.starts[r]=a(i.starts[r]);for(;n.edgepaths.length;)i.edgepaths.push(o(n.edgepaths.shift()));for(;n.paths.length;)i.paths.push(o(n.paths.shift()));for(;n.starts.length;)i.starts.push(o(n.starts.shift()));return[i]}};function S1e(e){return ww.extendFlat({},e,{edgepaths:ww.extendDeep([],e.edgepaths),paths:ww.extendDeep([],e.paths),starts:ww.extendDeep([],e.starts)})}});var d9=ne((Gor,k1e)=>{"use strict";k1e.exports=function(e,t){var r=e[0],i=r.z,n;switch(t.type){case"levels":var a=Math.min(i[0][0],i[0][1]);for(n=0;n<e.length;n++){var o=e[n];o.prefixBoundary=!o.edgepaths.length&&(a>o.level||o.starts.length&&a===o.level)}break;case"constraint":if(r.prefixBoundary=!1,r.edgepaths.length)return;var s=r.x.length,l=r.y.length,u=-1/0,f=1/0;for(n=0;n<l;n++)f=Math.min(f,i[n][0]),f=Math.min(f,i[n][s-1]),u=Math.max(u,i[n][0]),u=Math.max(u,i[n][s-1]);for(n=1;n<s-1;n++)f=Math.min(f,i[0][n]),f=Math.min(f,i[l-1][n]),u=Math.max(u,i[0][n]),u=Math.max(u,i[l-1][n]);var c=t.value,h,v;switch(t._operation){case">":c>u&&(r.prefixBoundary=!0);break;case"<":(c<f||r.starts.length&&c===f)&&(r.prefixBoundary=!0);break;case"[]":h=Math.min(c[0],c[1]),v=Math.max(c[0],c[1]),(v<f||h>u||r.starts.length&&v===f)&&(r.prefixBoundary=!0);break;case"][":h=Math.min(c[0],c[1]),v=Math.max(c[0],c[1]),h<f&&v>u&&(r.prefixBoundary=!0);break}break}}});var RP=ne(Jh=>{"use strict";var cS=Ai(),yc=Wt(),ey=aa(),B1t=ul(),P1e=Es(),C1e=Xi(),L1e=B0(),N1t=xP(),R1e=l9(),D1e=u9(),U1t=h9(),V1t=v9(),I1e=d9(),fS=lS(),eg=fS.LABELOPTIMIZER;Jh.plot=function(t,r,i,n){var a=r.xaxis,o=r.yaxis;yc.makeTraceGroups(n,i,"contour").each(function(s){var l=cS.select(this),u=s[0],f=u.trace,c=u.x,h=u.y,v=f.contours,d=U1t(v,r,u),_=yc.ensureSingle(l,"g","heatmapcoloring"),T=[];v.coloring==="heatmap"&&(T=[s]),N1t(t,r,T,_),R1e(d),D1e(d);var p=a.c2p(c[0],!0),M=a.c2p(c[c.length-1],!0),b=o.c2p(h[0],!0),w=o.c2p(h[h.length-1],!0),k=[[p,w],[M,w],[M,b],[p,b]],x=d;v.type==="constraint"&&(x=V1t(d,v._operation)),H1t(l,k,v),G1t(l,x,k,v),Y1t(l,d,t,u,v),X1t(l,r,t,u,k)})};function H1t(e,t,r){var i=yc.ensureSingle(e,"g","contourbg"),n=i.selectAll("path").data(r.coloring==="fill"?[0]:[]);n.enter().append("path"),n.exit().remove(),n.attr("d","M"+t.join("L")+"Z").style("stroke","none")}function G1t(e,t,r,i){var n=i.coloring==="fill"||i.type==="constraint"&&i._operation!=="=",a="M"+r.join("L")+"Z";n&&I1e(t,i);var o=yc.ensureSingle(e,"g","contourfill"),s=o.selectAll("path").data(n?t:[]);s.enter().append("path"),s.exit().remove(),s.each(function(l){var u=(l.prefixBoundary?a:"")+F1e(l,r);u?cS.select(this).attr("d",u).style("stroke","none"):cS.select(this).remove()})}function F1e(e,t){var r="",i=0,n=e.edgepaths.map(function(p,M){return M}),a=!0,o,s,l,u,f,c;function h(p){return Math.abs(p[1]-t[0][1])<.01}function v(p){return Math.abs(p[1]-t[2][1])<.01}function d(p){return Math.abs(p[0]-t[0][0])<.01}function _(p){return Math.abs(p[0]-t[2][0])<.01}for(;n.length;){for(c=ey.smoothopen(e.edgepaths[i],e.smoothing),r+=a?c:c.replace(/^M/,"L"),n.splice(n.indexOf(i),1),o=e.edgepaths[i][e.edgepaths[i].length-1],u=-1,l=0;l<4;l++){if(!o){yc.log("Missing end?",i,e);break}for(h(o)&&!_(o)?s=t[1]:d(o)?s=t[0]:v(o)?s=t[3]:_(o)&&(s=t[2]),f=0;f<e.edgepaths.length;f++){var T=e.edgepaths[f][0];Math.abs(o[0]-s[0])<.01?Math.abs(o[0]-T[0])<.01&&(T[1]-o[1])*(s[1]-T[1])>=0&&(s=T,u=f):Math.abs(o[1]-s[1])<.01?Math.abs(o[1]-T[1])<.01&&(T[0]-o[0])*(s[0]-T[0])>=0&&(s=T,u=f):yc.log("endpt to newendpt is not vert. or horz.",o,s,T)}if(o=s,u>=0)break;r+="L"+s}if(u===e.edgepaths.length){yc.log("unclosed perimeter path");break}i=u,a=n.indexOf(i)===-1,a&&(i=n[0],r+="Z")}for(i=0;i<e.paths.length;i++)r+=ey.smoothclosed(e.paths[i],e.smoothing);return r}function Y1t(e,t,r,i,n){var a=r._context.staticPlot,o=yc.ensureSingle(e,"g","contourlines"),s=n.showlines!==!1,l=n.showlabels,u=s&&l,f=Jh.createLines(o,s||l,t,a),c=Jh.createLineClip(o,u,r,i.trace.uid),h=e.selectAll("g.contourlabels").data(l?[0]:[]);if(h.exit().remove(),h.enter().append("g").classed("contourlabels",!0),l){var v=[],d=[];yc.clearLocationCache();var _=Jh.labelFormatter(r,i),T=ey.tester.append("text").attr("data-notex",1).call(ey.font,n.labelfont),p=t[0].xaxis,M=t[0].yaxis,b=p._length,w=M._length,k=p.range,x=M.range,E=yc.aggNums(Math.min,null,i.x),S=yc.aggNums(Math.max,null,i.x),g=yc.aggNums(Math.min,null,i.y),C=yc.aggNums(Math.max,null,i.y),A=Math.max(p.c2p(E,!0),0),P=Math.min(p.c2p(S,!0),b),D=Math.max(M.c2p(C,!0),0),z=Math.min(M.c2p(g,!0),w),O={};k[0]<k[1]?(O.left=A,O.right=P):(O.left=P,O.right=A),x[0]<x[1]?(O.top=D,O.bottom=z):(O.top=z,O.bottom=D),O.middle=(O.top+O.bottom)/2,O.center=(O.left+O.right)/2,v.push([[O.left,O.top],[O.right,O.top],[O.right,O.bottom],[O.left,O.bottom]]);var V=Math.sqrt(b*b+w*w),B=fS.LABELDISTANCE*V/Math.max(1,t.length/fS.LABELINCREASE);f.each(function(F){var N=Jh.calcTextOpts(F.level,_,T,r);cS.select(this).selectAll("path").each(function(){var Z=this,J=yc.getVisibleSegment(Z,O,N.height/2);if(J&&!(J.len<(N.width+N.height)*fS.LABELMIN))for(var re=Math.min(Math.ceil(J.len/B),fS.LABELMAX),ue=0;ue<re;ue++){var fe=Jh.findBestTextLocation(Z,J,N,d,O);if(!fe)break;Jh.addLabelData(fe,N,d,v)}})}),T.remove(),Jh.drawLabels(h,d,r,c,u?v:null)}l&&!s&&f.remove()}Jh.createLines=function(e,t,r,i){var n=r[0].smoothing,a=e.selectAll("g.contourlevel").data(t?r:[]);if(a.exit().remove(),a.enter().append("g").classed("contourlevel",!0),t){var o=a.selectAll("path.openline").data(function(l){return l.pedgepaths||l.edgepaths});o.exit().remove(),o.enter().append("path").classed("openline",!0),o.attr("d",function(l){return ey.smoothopen(l,n)}).style("stroke-miterlimit",1).style("vector-effect",i?"none":"non-scaling-stroke");var s=a.selectAll("path.closedline").data(function(l){return l.ppaths||l.paths});s.exit().remove(),s.enter().append("path").classed("closedline",!0),s.attr("d",function(l){return ey.smoothclosed(l,n)}).style("stroke-miterlimit",1).style("vector-effect",i?"none":"non-scaling-stroke")}return a};Jh.createLineClip=function(e,t,r,i){var n=r._fullLayout._clips,a=t?"clipline"+i:null,o=n.selectAll("#"+a).data(t?[0]:[]);return o.exit().remove(),o.enter().append("clipPath").classed("contourlineclip",!0).attr("id",a),ey.setClipUrl(e,a,r),o};Jh.labelFormatter=function(e,t){var r=e._fullLayout,i=t.trace,n=i.contours,a={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(n.labelformat)a.tickformat=n.labelformat,L1e(a,r);else{var o=B1t.extractOpts(i);if(o&&o.colorbar&&o.colorbar._axis)a=o.colorbar._axis;else{if(n.type==="constraint"){var s=n.value;yc.isArrayOrTypedArray(s)?a.range=[s[0],s[s.length-1]]:a.range=[s,s]}else a.range=[n.start,n.end],a.nticks=(n.end-n.start)/n.size;a.range[0]===a.range[1]&&(a.range[1]+=a.range[0]||1),a.nticks||(a.nticks=1e3),L1e(a,r),C1e.prepTicks(a),a._tmin=null,a._tmax=null}}return function(l){return C1e.tickText(a,l).text}};Jh.calcTextOpts=function(e,t,r,i){var n=t(e);r.text(n).call(P1e.convertToTspans,i);var a=r.node(),o=ey.bBox(a,!0);return{text:n,width:o.width,height:o.height,fontSize:+a.style["font-size"].replace("px",""),level:e,dy:(o.top+o.bottom)/2}};Jh.findBestTextLocation=function(e,t,r,i,n){var a=r.width,o,s,l,u,f;t.isClosed?(s=t.len/eg.INITIALSEARCHPOINTS,o=t.min+s/2,l=t.max):(s=(t.len-a)/(eg.INITIALSEARCHPOINTS+1),o=t.min+s+a/2,l=t.max-(s+a)/2);for(var c=1/0,h=0;h<eg.ITERATIONS;h++){for(var v=o;v<l;v+=s){var d=yc.getTextLocation(e,t.total,v,a),_=W1t(d,r,i,n);_<c&&(c=_,f=d,u=v)}if(c>eg.MAXCOST*2)break;h&&(s/=2),o=u-s/2,l=o+s*1.5}if(c<=eg.MAXCOST)return f};function W1t(e,t,r,i){var n=t.width/2,a=t.height/2,o=e.x,s=e.y,l=e.theta,u=Math.cos(l)*n,f=Math.sin(l)*n,c=(o>i.center?i.right-o:o-i.left)/(u+Math.abs(Math.sin(l)*a)),h=(s>i.middle?i.bottom-s:s-i.top)/(Math.abs(f)+Math.cos(l)*a);if(c<1||h<1)return 1/0;var v=eg.EDGECOST*(1/(c-1)+1/(h-1));v+=eg.ANGLECOST*l*l;for(var d=o-u,_=s-f,T=o+u,p=s+f,M=0;M<r.length;M++){var b=r[M],w=Math.cos(b.theta)*b.width/2,k=Math.sin(b.theta)*b.width/2,x=yc.segmentDistance(d,_,T,p,b.x-w,b.y-k,b.x+w,b.y+k)*2/(t.height+b.height),E=b.level===t.level,S=E?eg.SAMELEVELDISTANCE:1;if(x<=S)return 1/0;var g=eg.NEIGHBORCOST*(E?eg.SAMELEVELFACTOR:1);v+=g/(x-S)}return v}Jh.addLabelData=function(e,t,r,i){var n=t.fontSize,a=t.width+n/3,o=Math.max(0,t.height-n/3),s=e.x,l=e.y,u=e.theta,f=Math.sin(u),c=Math.cos(u),h=function(d,_){return[s+d*c-_*f,l+d*f+_*c]},v=[h(-a/2,-o/2),h(-a/2,o/2),h(a/2,o/2),h(a/2,-o/2)];r.push({text:t.text,x:s,y:l,dy:t.dy,theta:u,level:t.level,width:a,height:o}),i.push(v)};Jh.drawLabels=function(e,t,r,i,n){var a=e.selectAll("text").data(t,function(u){return u.text+","+u.x+","+u.y+","+u.theta});if(a.exit().remove(),a.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(u){var f=u.x+Math.sin(u.theta)*u.dy,c=u.y-Math.cos(u.theta)*u.dy;cS.select(this).text(u.text).attr({x:f,y:c,transform:"rotate("+180*u.theta/Math.PI+" "+f+" "+c+")"}).call(P1e.convertToTspans,r)}),n){for(var o="",s=0;s<n.length;s++)o+="M"+n[s].join("L")+"Z";var l=yc.ensureSingle(i,"path","");l.attr("d",o)}};function X1t(e,t,r,i,n){var a=i.trace,o=r._fullLayout._clips,s="clip"+a.uid,l=o.selectAll("#"+s).data(a.connectgaps?[]:[0]);if(l.enter().append("clipPath").classed("contourclip",!0).attr("id",s),l.exit().remove(),a.connectgaps===!1){var u={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:t.xaxis,yaxis:t.yaxis,x:i.x,y:i.y,z:Z1t(i),smoothing:0};R1e([u]),D1e([u]),I1e([u],{type:"levels"});var f=yc.ensureSingle(l,"path","");f.attr("d",(u.prefixBoundary?"M"+n.join("L")+"Z":"")+F1e(u,n))}else s=null;ey.setClipUrl(e,s,r)}function Z1t(e){var t=e.trace._emptypoints,r=[],i=e.z.length,n=e.z[0].length,a,o=[],s;for(a=0;a<n;a++)o.push(1);for(a=0;a<i;a++)r.push(o.slice());for(a=0;a<t.length;a++)s=t[a],r[s[0]][s[1]]=0;return e.zmask=r,r}});var g9=ne((Wor,q1e)=>{"use strict";var j1t=Ai(),p9=ul(),K1t=sS();q1e.exports=function(t){var r=t.contours,i=r.start,n=K1t(r),a=r.size||1,o=Math.floor((n-i)/a)+1,s=r.coloring==="lines"?0:1,l=p9.extractOpts(t);isFinite(a)||(a=1,o=1);var u=l.reversescale?p9.flipScale(l.colorscale):l.colorscale,f=u.length,c=new Array(f),h=new Array(f),v,d,_=l.min,T=l.max;if(r.coloring==="heatmap"){for(d=0;d<f;d++)v=u[d],c[d]=v[0]*(T-_)+_,h[d]=v[1];var p=j1t.extent([_,T,r.start,r.start+a*(o-1)]),M=p[_<T?0:1],b=p[_<T?1:0];M!==_&&(c.splice(0,0,M),h.splice(0,0,h[0])),b!==T&&(c.push(b),h.push(h[h.length-1]))}else{var w=t._input&&typeof t._input.zmin=="number"&&typeof t._input.zmax=="number";for(w&&(i<=_||n>=T)&&(i<=_&&(i=_),n>=T&&(n=T),o=Math.floor((n-i)/a)+1,s=0),d=0;d<f;d++)v=u[d],c[d]=(v[0]*(o+s-1)-s/2)*a+i,h[d]=v[1];(w||t.autocontour)&&(c[0]>_&&(c.unshift(_),h.unshift(h[0])),c[c.length-1]<T&&(c.push(T),h.push(h[h.length-1])))}return p9.makeColorScaleFunc({domain:c,range:h},{noNumericCheck:!0})}});var IP=ne((Xor,O1e)=>{"use strict";var DP=Ai(),z1e=aa(),J1t=_P(),Q1t=g9();O1e.exports=function(t){var r=DP.select(t).selectAll("g.contour");r.style("opacity",function(i){return i[0].trace.opacity}),r.each(function(i){var n=DP.select(this),a=i[0].trace,o=a.contours,s=a.line,l=o.size||1,u=o.start,f=o.type==="constraint",c=!f&&o.coloring==="lines",h=!f&&o.coloring==="fill",v=c||h?Q1t(a):null;n.selectAll("g.contourlevel").each(function(T){DP.select(this).selectAll("path").call(z1e.lineGroupStyle,s.width,c?v(T.level):s.color,s.dash)});var d=o.labelfont;if(n.selectAll("g.contourlabels text").each(function(T){z1e.font(DP.select(this),{family:d.family,size:d.size,color:d.color||(c?v(T.level):s.color)})}),f)n.selectAll("g.contourfill path").style("fill",a.fillcolor);else if(h){var _;n.selectAll("g.contourfill path").style("fill",function(T){return _===void 0&&(_=T.level),v(T.level+.5*l)}),_===void 0&&(_=u),n.selectAll("g.contourbg path").style("fill",v(_-.5*l))}}),J1t(t)}});var FP=ne((Zor,N1e)=>{"use strict";var B1e=ul(),$1t=g9(),ext=sS();function txt(e,t,r){var i=t.contours,n=t.line,a=i.size||1,o=i.coloring,s=$1t(t,{isColorbar:!0});if(o==="heatmap"){var l=B1e.extractOpts(t);r._fillgradient=l.reversescale?B1e.flipScale(l.colorscale):l.colorscale,r._zrange=[l.min,l.max]}else o==="fill"&&(r._fillcolor=s);r._line={color:o==="lines"?s:n.color,width:i.showlines!==!1?n.width:0,dash:n.dash},r._levels={start:i.start,end:ext(i),size:a}}N1e.exports={min:"zmin",max:"zmax",calc:txt}});var y9=ne((jor,U1e)=>{"use strict";var qP=_i(),rxt=wP();U1e.exports=function(t,r,i,n,a){a||(a={}),a.isContour=!0;var o=rxt(t,r,i,n,a);return o&&o.forEach(function(s){var l=s.trace;l.contours.type==="constraint"&&(l.fillcolor&&qP.opacity(l.fillcolor)?s.color=qP.addOpacity(l.fillcolor,1):l.contours.showlines&&qP.opacity(l.line.color)&&(s.color=qP.addOpacity(l.line.color,1)))}),o}});var H1e=ne((Kor,V1e)=>{"use strict";V1e.exports={attributes:r9(),supplyDefaults:u1e(),crossTraceDefaults:MP(),calc:s9(),plot:RP().plot,layerName:"contourlayer",style:IP(),colorbar:FP(),hoverPoints:y9(),moduleType:"trace",name:"histogram2dcontour",basePlotModule:vu(),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}});var Y1e=ne((Jor,G1e)=>{"use strict";G1e.exports=H1e()});var m9=ne((Qor,J1e)=>{"use strict";var W1e=la(),nxt=n9(),j1e=_i(),X1e=j1e.addOpacity,ixt=j1e.opacity,K1e=aS(),Z1e=Wt().isArrayOrTypedArray,axt=K1e.CONSTRAINT_REDUCTION,oxt=K1e.COMPARISON_OPS2;J1e.exports=function(t,r,i,n,a,o){var s=r.contours,l,u,f,c=i("contours.operation");if(s._operation=axt[c],sxt(i,s),c==="="?l=s.showlines=!0:(l=i("contours.showlines"),f=i("fillcolor",X1e((t.line||{}).color||a,.5))),l){var h=f&&ixt(f)?X1e(r.fillcolor,1):a;u=i("line.color",h),i("line.width",2),i("line.dash")}i("line.smoothing"),nxt(i,n,u,o)};function sxt(e,t){var r;oxt.indexOf(t.operation)===-1?(e("contours.value",[0,1]),Z1e(t.value)?t.value.length>2?t.value=t.value.slice(2):t.length===0?t.value=[0,1]:t.length<2?(r=parseFloat(t.value[0]),t.value=[r,r+1]):t.value=[parseFloat(t.value[0]),parseFloat(t.value[1])]:W1e(t.value)&&(r=parseFloat(t.value),t.value=[r,r+1])):(e("contours.value",0),W1e(t.value)||(Z1e(t.value)?t.value=parseFloat(t.value[0]):t.value=0))}});var exe=ne(($or,$1e)=>{"use strict";var x9=Wt(),lxt=QM(),uxt=o0(),fxt=m9(),cxt=kP(),hxt=CP(),vxt=$M(),Q1e=oS();$1e.exports=function(t,r,i,n){function a(u,f){return x9.coerce(t,r,Q1e,u,f)}function o(u){return x9.coerce2(t,r,Q1e,u)}var s=lxt(t,r,a,n);if(!s){r.visible=!1;return}uxt(t,r,n,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hoverongaps"),a("hovertemplate");var l=a("contours.type")==="constraint";a("connectgaps",x9.isArray1D(r.z)),l?fxt(t,r,a,n,i):(cxt(t,r,a,o),hxt(t,r,a,n)),r.contours&&r.contours.coloring==="heatmap"&&vxt(a,n)}});var rxe=ne((esr,txe)=>{"use strict";txe.exports={attributes:oS(),supplyDefaults:exe(),calc:s9(),plot:RP().plot,style:IP(),colorbar:FP(),hoverPoints:y9(),moduleType:"trace",name:"contour",basePlotModule:vu(),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}});var ixe=ne((tsr,nxe)=>{"use strict";nxe.exports=rxe()});var _9=ne((rsr,oxe)=>{"use strict";var dxt=Ba().hovertemplateAttrs,pxt=Ba().texttemplateAttrs,gxt=Y0(),zd=cu(),yxt=es(),axe=Ps(),mxt=hc().dash,Dm=oa().extendFlat,Mp=zd.marker,hS=zd.line,xxt=Mp.line;oxe.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:Dm({},zd.mode,{dflt:"markers"}),text:Dm({},zd.text,{}),texttemplate:pxt({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:Dm({},zd.hovertext,{}),line:{color:hS.color,width:hS.width,dash:mxt,backoff:hS.backoff,shape:Dm({},hS.shape,{values:["linear","spline"]}),smoothing:hS.smoothing,editType:"calc"},connectgaps:zd.connectgaps,cliponaxis:zd.cliponaxis,fill:Dm({},zd.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:gxt(),marker:Dm({symbol:Mp.symbol,opacity:Mp.opacity,angle:Mp.angle,angleref:Mp.angleref,standoff:Mp.standoff,maxdisplayed:Mp.maxdisplayed,size:Mp.size,sizeref:Mp.sizeref,sizemin:Mp.sizemin,sizemode:Mp.sizemode,line:Dm({width:xxt.width,editType:"calc"},axe("marker.line")),gradient:Mp.gradient,editType:"calc"},axe("marker")),textfont:zd.textfont,textposition:zd.textposition,selected:zd.selected,unselected:zd.unselected,hoverinfo:Dm({},yxt.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:zd.hoveron,hovertemplate:dxt()}});var fxe=ne((nsr,uxe)=>{"use strict";var sxe=Wt(),_xt=G0(),Tw=js(),bxt=dp(),wxt=s0(),lxe=B2(),Txt=l0(),Axt=X0(),Mxt=_9();uxe.exports=function(t,r,i,n){function a(h,v){return sxe.coerce(t,r,Mxt,h,v)}var o=a("a"),s=a("b"),l=a("c"),u;if(o?(u=o.length,s?(u=Math.min(u,s.length),l&&(u=Math.min(u,l.length))):l?u=Math.min(u,l.length):u=0):s&&l&&(u=Math.min(s.length,l.length)),!u){r.visible=!1;return}r._length=u,a("sum"),a("text"),a("hovertext"),r.hoveron!=="fills"&&a("hovertemplate");var f=u<_xt.PTS_LINESONLY?"lines+markers":"lines";a("mode",f),Tw.hasMarkers(r)&&bxt(t,r,i,n,a,{gradient:!0}),Tw.hasLines(r)&&(wxt(t,r,i,n,a,{backoff:!0}),lxe(t,r,a),a("connectgaps")),Tw.hasText(r)&&(a("texttemplate"),Txt(t,r,n,a));var c=[];(Tw.hasMarkers(r)||Tw.hasText(r))&&(a("cliponaxis"),a("marker.maxdisplayed"),c.push("points")),a("fill"),r.fill!=="none"&&(Axt(t,r,i,a),Tw.hasLines(r)||lxe(t,r,a)),(r.fill==="tonext"||r.fill==="toself")&&c.push("fills"),a("hoveron",c.join("+")||"points"),sxe.coerceSelectionMarkerOpacity(r,a)}});var hxe=ne((isr,cxe)=>{"use strict";var b9=Xi();cxe.exports=function(t,r,i){var n={},a=i[r.subplot]._subplot;return n.aLabel=b9.tickText(a.aaxis,t.a,!0).text,n.bLabel=b9.tickText(a.baxis,t.b,!0).text,n.cLabel=b9.tickText(a.caxis,t.c,!0).text,n}});var gxe=ne((asr,pxe)=>{"use strict";var w9=la(),Sxt=pp(),Ext=Z0(),kxt=gp(),Cxt=yp().calcMarkerSize,vxe=["a","b","c"],dxe={a:["b","c"],b:["a","c"],c:["a","b"]};pxe.exports=function(t,r){var i=t._fullLayout[r.subplot],n=i.sum,a=r.sum||n,o={a:r.a,b:r.b,c:r.c},s,l,u,f,c,h;for(s=0;s<vxe.length;s++)if(u=vxe[s],!o[u]){for(c=o[dxe[u][0]],h=o[dxe[u][1]],f=new Array(c.length),l=0;l<c.length;l++)f[l]=a-c[l]-h[l];o[u]=f}var v=r._length,d=new Array(v),_,T,p,M,b,w;for(s=0;s<v;s++)_=o.a[s],T=o.b[s],p=o.c[s],w9(_)&&w9(T)&&w9(p)?(_=+_,T=+T,p=+p,M=n/(_+T+p),M!==1&&(_*=M,T*=M,p*=M),w=_,b=p-T,d[s]={x:b,y:w,a:_,b:T,c:p}):d[s]={x:!1,y:!1};return Cxt(r,v),Sxt(t,r),Ext(d,r),kxt(d,r),d}});var mxe=ne((osr,yxe)=>{"use strict";var Lxt=Y2();yxe.exports=function(t,r,i){var n=r.plotContainer;n.select(".scatterlayer").selectAll("*").remove();for(var a=r.xaxis,o=r.yaxis,s={xaxis:a,yaxis:o,plot:n,layerClipId:r._hasClipOnAxisFalse?r.clipIdRelative:null},l=r.layers.frontplot.select("g.scatterlayer"),u=0;u<i.length;u++){var f=i[u];f.length&&(f[0].trace._xA=a,f[0].trace._yA=o)}Lxt(t,s,i,l)}});var _xe=ne((ssr,xxe)=>{"use strict";var Pxt=j2();xxe.exports=function(t,r,i,n){var a=Pxt(t,r,i,n);if(!a||a[0].index===!1)return;var o=a[0];if(o.index===void 0){var s=1-o.y0/t.ya._length,l=t.xa._length,u=l*s/2,f=l-u;return o.x0=Math.max(Math.min(o.x0,f),u),o.x1=Math.max(Math.min(o.x1,f),u),a}var c=o.cd[o.index],h=o.trace,v=o.subplot;o.a=c.a,o.b=c.b,o.c=c.c,o.xLabelVal=void 0,o.yLabelVal=void 0;var d={};d[h.subplot]={_subplot:v};var _=h._module.formatLabels(c,h,d);o.aLabel=_.aLabel,o.bLabel=_.bLabel,o.cLabel=_.cLabel;var T=c.hi||h.hoverinfo,p=[];function M(w,k){p.push(w._hovertitle+": "+k)}if(!h.hovertemplate){var b=T.split("+");b.indexOf("all")!==-1&&(b=["a","b","c"]),b.indexOf("a")!==-1&&M(v.aaxis,o.aLabel),b.indexOf("b")!==-1&&M(v.baxis,o.bLabel),b.indexOf("c")!==-1&&M(v.caxis,o.cLabel)}return o.extraText=p.join("<br>"),o.hovertemplate=h.hovertemplate,a}});var wxe=ne((lsr,bxe)=>{"use strict";bxe.exports=function(t,r,i,n,a){if(r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),n[a]){var o=n[a];t.a=o.a,t.b=o.b,t.c=o.c}else t.a=r.a,t.b=r.b,t.c=r.c;return t}});var Dxe=ne((usr,Rxe)=>{"use strict";var kxe=Ai(),Rxt=Xf(),T9=wi(),ty=Wt(),tg=ty.strTranslate,zP=ty._,Mw=_i(),OP=aa(),vS=B0(),A9=oa().extendFlat,Dxt=Zs(),Im=Xi(),Txe=Hh(),Axe=Ol(),Cxe=r0(),Mxe=Cxe.freeMode,Ixt=Cxe.rectMode,M9=yx(),Fxt=Mf().prepSelect,qxt=Mf().selectOnClick,zxt=Mf().clearOutline,Oxt=Mf().clearSelectionsCache,Lxe=wf();function Pxe(e,t){this.id=e.id,this.graphDiv=e.graphDiv,this.init(t),this.makeFramework(t),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}Rxe.exports=Pxe;var ry=Pxe.prototype;ry.init=function(e){this.container=e._ternarylayer,this.defs=e._defs,this.layoutId=e._uid,this.traceHash={},this.layers={}};ry.plot=function(e,t){var r=this,i=t[r.id],n=t._size;r._hasClipOnAxisFalse=!1;for(var a=0;a<e.length;a++){var o=e[a][0].trace;if(o.cliponaxis===!1){r._hasClipOnAxisFalse=!0;break}}r.updateLayers(i),r.adjustLayout(i,n),Dxt.generalUpdatePerTraceModule(r.graphDiv,r,e,i),r.layers.plotbg.select("path").call(Mw.fill,i.bgcolor)};ry.makeFramework=function(e){var t=this,r=t.graphDiv,i=e[t.id],n=t.clipId="clip"+t.layoutId+t.id,a=t.clipIdRelative="clip-relative"+t.layoutId+t.id;t.clipDef=ty.ensureSingleById(e._clips,"clipPath",n,function(o){o.append("path").attr("d","M0,0Z")}),t.clipDefRelative=ty.ensureSingleById(e._clips,"clipPath",a,function(o){o.append("path").attr("d","M0,0Z")}),t.plotContainer=ty.ensureSingle(t.container,"g",t.id),t.updateLayers(i),OP.setClipUrl(t.layers.backplot,n,r),OP.setClipUrl(t.layers.grids,n,r)};ry.updateLayers=function(e){var t=this,r=t.layers,i=["draglayer","plotbg","backplot","grids"];e.aaxis.layer==="below traces"&&i.push("aaxis","aline"),e.baxis.layer==="below traces"&&i.push("baxis","bline"),e.caxis.layer==="below traces"&&i.push("caxis","cline"),i.push("frontplot"),e.aaxis.layer==="above traces"&&i.push("aaxis","aline"),e.baxis.layer==="above traces"&&i.push("baxis","bline"),e.caxis.layer==="above traces"&&i.push("caxis","cline");var n=t.plotContainer.selectAll("g.toplevel").data(i,String),a=["agrid","bgrid","cgrid"];n.enter().append("g").attr("class",function(o){return"toplevel "+o}).each(function(o){var s=kxe.select(this);r[o]=s,o==="frontplot"?s.append("g").classed("scatterlayer",!0):o==="backplot"?s.append("g").classed("maplayer",!0):o==="plotbg"?s.append("path").attr("d","M0,0Z"):o==="aline"||o==="bline"||o==="cline"?s.append("path"):o==="grids"&&a.forEach(function(l){r[l]=s.append("g").classed("grid "+l,!0)})}),n.order()};var Aw=Math.sqrt(4/3);ry.adjustLayout=function(e,t){var r=this,i=e.domain,n=(i.x[0]+i.x[1])/2,a=(i.y[0]+i.y[1])/2,o=i.x[1]-i.x[0],s=i.y[1]-i.y[0],l=o*t.w,u=s*t.h,f=e.sum,c=e.aaxis.min,h=e.baxis.min,v=e.caxis.min,d,_,T,p,M,b;l>Aw*u?(p=u,T=p*Aw):(T=l,p=T/Aw),M=o*T/l,b=s*p/u,d=t.l+t.w*n-T/2,_=t.t+t.h*(1-a)-p/2,r.x0=d,r.y0=_,r.w=T,r.h=p,r.sum=f,r.xaxis={type:"linear",range:[c+2*v-f,f-c-2*h],domain:[n-M/2,n+M/2],_id:"x"},vS(r.xaxis,r.graphDiv._fullLayout),r.xaxis.setScale(),r.xaxis.isPtWithinRange=function(z){return z.a>=r.aaxis.range[0]&&z.a<=r.aaxis.range[1]&&z.b>=r.baxis.range[1]&&z.b<=r.baxis.range[0]&&z.c>=r.caxis.range[1]&&z.c<=r.caxis.range[0]},r.yaxis={type:"linear",range:[c,f-h-v],domain:[a-b/2,a+b/2],_id:"y"},vS(r.yaxis,r.graphDiv._fullLayout),r.yaxis.setScale(),r.yaxis.isPtWithinRange=function(){return!0};var w=r.yaxis.domain[0],k=r.aaxis=A9({},e.aaxis,{range:[c,f-h-v],side:"left",tickangle:(+e.aaxis.tickangle||0)-30,domain:[w,w+b*Aw],anchor:"free",position:0,_id:"y",_length:T});vS(k,r.graphDiv._fullLayout),k.setScale();var x=r.baxis=A9({},e.baxis,{range:[f-c-v,h],side:"bottom",domain:r.xaxis.domain,anchor:"free",position:0,_id:"x",_length:T});vS(x,r.graphDiv._fullLayout),x.setScale();var E=r.caxis=A9({},e.caxis,{range:[f-c-h,v],side:"right",tickangle:(+e.caxis.tickangle||0)+30,domain:[w,w+b*Aw],anchor:"free",position:0,_id:"y",_length:T});vS(E,r.graphDiv._fullLayout),E.setScale();var S="M"+d+","+(_+p)+"h"+T+"l-"+T/2+",-"+p+"Z";r.clipDef.select("path").attr("d",S),r.layers.plotbg.select("path").attr("d",S);var g="M0,"+p+"h"+T+"l-"+T/2+",-"+p+"Z";r.clipDefRelative.select("path").attr("d",g);var C=tg(d,_);r.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",C),r.clipDefRelative.select("path").attr("transform",null);var A=tg(d-x._offset,_+p);r.layers.baxis.attr("transform",A),r.layers.bgrid.attr("transform",A);var P=tg(d+T/2,_)+"rotate(30)"+tg(0,-k._offset);r.layers.aaxis.attr("transform",P),r.layers.agrid.attr("transform",P);var D=tg(d+T/2,_)+"rotate(-30)"+tg(0,-E._offset);r.layers.caxis.attr("transform",D),r.layers.cgrid.attr("transform",D),r.drawAxes(!0),r.layers.aline.select("path").attr("d",k.showline?"M"+d+","+(_+p)+"l"+T/2+",-"+p:"M0,0").call(Mw.stroke,k.linecolor||"#000").style("stroke-width",(k.linewidth||0)+"px"),r.layers.bline.select("path").attr("d",x.showline?"M"+d+","+(_+p)+"h"+T:"M0,0").call(Mw.stroke,x.linecolor||"#000").style("stroke-width",(x.linewidth||0)+"px"),r.layers.cline.select("path").attr("d",E.showline?"M"+(d+T/2)+","+_+"l"+T/2+","+p:"M0,0").call(Mw.stroke,E.linecolor||"#000").style("stroke-width",(E.linewidth||0)+"px"),r.graphDiv._context.staticPlot||r.initInteractions(),OP.setClipUrl(r.layers.frontplot,r._hasClipOnAxisFalse?null:r.clipId,r.graphDiv)};ry.drawAxes=function(e){var t=this,r=t.graphDiv,i=t.id.substr(7)+"title",n=t.layers,a=t.aaxis,o=t.baxis,s=t.caxis;if(t.drawAx(a),t.drawAx(o),t.drawAx(s),e){var l=Math.max(a.showticklabels?a.tickfont.size/2:0,(s.showticklabels?s.tickfont.size*.75:0)+(s.ticks==="outside"?s.ticklen*.87:0)),u=(o.showticklabels?o.tickfont.size:0)+(o.ticks==="outside"?o.ticklen:0)+3;n["a-title"]=M9.draw(r,"a"+i,{propContainer:a,propName:t.id+".aaxis.title",placeholder:zP(r,"Click to enter Component A title"),attributes:{x:t.x0+t.w/2,y:t.y0-a.title.font.size/3-l,"text-anchor":"middle"}}),n["b-title"]=M9.draw(r,"b"+i,{propContainer:o,propName:t.id+".baxis.title",placeholder:zP(r,"Click to enter Component B title"),attributes:{x:t.x0-u,y:t.y0+t.h+o.title.font.size*.83+u,"text-anchor":"middle"}}),n["c-title"]=M9.draw(r,"c"+i,{propContainer:s,propName:t.id+".caxis.title",placeholder:zP(r,"Click to enter Component C title"),attributes:{x:t.x0+t.w+u,y:t.y0+t.h+s.title.font.size*.83+u,"text-anchor":"middle"}})}};ry.drawAx=function(e){var t=this,r=t.graphDiv,i=e._name,n=i.charAt(0),a=e._id,o=t.layers[i],s=30,l=n+"tickLayout",u=Bxt(e);t[l]!==u&&(o.selectAll("."+a+"tick").remove(),t[l]=u),e.setScale();var f=Im.calcTicks(e),c=Im.clipEnds(e,f),h=Im.makeTransTickFn(e),v=Im.getTickSigns(e)[2],d=ty.deg2rad(s),_=v*(e.linewidth||1)/2,T=v*e.ticklen,p=t.w,M=t.h,b=n==="b"?"M0,"+_+"l"+Math.sin(d)*T+","+Math.cos(d)*T:"M"+_+",0l"+Math.cos(d)*T+","+-Math.sin(d)*T,w={a:"M0,0l"+M+",-"+p/2,b:"M0,0l-"+p/2+",-"+M,c:"M0,0l-"+M+","+p/2}[n];Im.drawTicks(r,e,{vals:e.ticks==="inside"?c:f,layer:o,path:b,transFn:h,crisp:!1}),Im.drawGrid(r,e,{vals:c,layer:t.layers[n+"grid"],path:w,transFn:h,crisp:!1}),Im.drawLabels(r,e,{vals:f,layer:o,transFn:h,labelFns:Im.makeLabelFns(e,0,s)})};function Bxt(e){return e.ticks+String(e.ticklen)+String(e.showticklabels)}var tc=Lxe.MINZOOM/2+.87,Nxt="m-0.87,.5h"+tc+"v3h-"+(tc+5.2)+"l"+(tc/2+2.6)+",-"+(tc*.87+4.5)+"l2.6,1.5l-"+tc/2+","+tc*.87+"Z",Uxt="m0.87,.5h-"+tc+"v3h"+(tc+5.2)+"l-"+(tc/2+2.6)+",-"+(tc*.87+4.5)+"l-2.6,1.5l"+tc/2+","+tc*.87+"Z",Vxt="m0,1l"+tc/2+","+tc*.87+"l2.6,-1.5l-"+(tc/2+2.6)+",-"+(tc*.87+4.5)+"l-"+(tc/2+2.6)+","+(tc*.87+4.5)+"l2.6,1.5l"+tc/2+",-"+tc*.87+"Z",Hxt="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",Sxe=!0;ry.clearOutline=function(){Oxt(this.dragOptions),zxt(this.dragOptions.gd)};ry.initInteractions=function(){var e=this,t=e.layers.plotbg.select("path").node(),r=e.graphDiv,i=r._fullLayout._zoomlayer,n,a;this.dragOptions={element:t,gd:r,plotinfo:{id:e.id,domain:r._fullLayout[e.id].domain,xaxis:e.xaxis,yaxis:e.yaxis},subplot:e.id,prepFn:function(A,P,D){e.dragOptions.xaxes=[e.xaxis],e.dragOptions.yaxes=[e.yaxis],n=r._fullLayout._invScaleX,a=r._fullLayout._invScaleY;var z=e.dragOptions.dragmode=r._fullLayout.dragmode;Mxe(z)?e.dragOptions.minDrag=1:e.dragOptions.minDrag=void 0,z==="zoom"?(e.dragOptions.moveFn=x,e.dragOptions.clickFn=p,e.dragOptions.doneFn=E,M(A,P,D)):z==="pan"?(e.dragOptions.moveFn=g,e.dragOptions.clickFn=p,e.dragOptions.doneFn=C,S(),e.clearOutline(r)):(Ixt(z)||Mxe(z))&&Fxt(A,P,D,e.dragOptions,z)}};var o,s,l,u,f,c,h,v,d,_;function T(A){var P={};return P[e.id+".aaxis.min"]=A.a,P[e.id+".baxis.min"]=A.b,P[e.id+".caxis.min"]=A.c,P}function p(A,P){var D=r._fullLayout.clickmode;Exe(r),A===2&&(r.emit("plotly_doubleclick",null),T9.call("_guiRelayout",r,T({a:0,b:0,c:0}))),D.indexOf("select")>-1&&A===1&&qxt(P,r,[e.xaxis],[e.yaxis],e.id,e.dragOptions),D.indexOf("event")>-1&&Axe.click(r,P,e.id)}function M(A,P,D){var z=t.getBoundingClientRect();o=P-z.left,s=D-z.top,r._fullLayout._calcInverseTransform(r);var O=r._fullLayout._invTransform,V=ty.apply3DTransform(O)(o,s);o=V[0],s=V[1],l={a:e.aaxis.range[0],b:e.baxis.range[1],c:e.caxis.range[1]},f=l,u=e.aaxis.range[1]-l.a,c=Rxt(e.graphDiv._fullLayout[e.id].bgcolor).getLuminance(),h="M0,"+e.h+"L"+e.w/2+", 0L"+e.w+","+e.h+"Z",v=!1,d=i.append("path").attr("class","zoombox").attr("transform",tg(e.x0,e.y0)).style({fill:c>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",h),_=i.append("path").attr("class","zoombox-corners").attr("transform",tg(e.x0,e.y0)).style({fill:Mw.background,stroke:Mw.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),e.clearOutline(r)}function b(A,P){return 1-P/e.h}function w(A,P){return 1-(A+(e.h-P)/Math.sqrt(3))/e.w}function k(A,P){return(A-(e.h-P)/Math.sqrt(3))/e.w}function x(A,P){var D=o+A*n,z=s+P*a,O=Math.max(0,Math.min(1,b(o,s),b(D,z))),V=Math.max(0,Math.min(1,w(o,s),w(D,z))),B=Math.max(0,Math.min(1,k(o,s),k(D,z))),F=(O/2+B)*e.w,N=(1-O/2-V)*e.w,Z=(F+N)/2,J=N-F,re=(1-O)*e.h,ue=re-J/Aw;J<Lxe.MINZOOM?(f=l,d.attr("d",h),_.attr("d","M0,0Z")):(f={a:l.a+O*u,b:l.b+V*u,c:l.c+B*u},d.attr("d",h+"M"+F+","+re+"H"+N+"L"+Z+","+ue+"L"+F+","+re+"Z"),_.attr("d","M"+o+","+s+Hxt+"M"+F+","+re+Nxt+"M"+N+","+re+Uxt+"M"+Z+","+ue+Vxt)),v||(d.transition().style("fill",c>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),_.transition().style("opacity",1).duration(200),v=!0),r.emit("plotly_relayouting",T(f))}function E(){Exe(r),f!==l&&(T9.call("_guiRelayout",r,T(f)),Sxe&&r.data&&r._context.showTips&&(ty.notifier(zP(r,"Double-click to zoom back out"),"long"),Sxe=!1))}function S(){l={a:e.aaxis.range[0],b:e.baxis.range[1],c:e.caxis.range[1]},f=l}function g(A,P){var D=A/e.xaxis._m,z=P/e.yaxis._m;f={a:l.a-z,b:l.b+(D+z)/2,c:l.c-(D-z)/2};var O=[f.a,f.b,f.c].sort(ty.sorterAsc),V={a:O.indexOf(f.a),b:O.indexOf(f.b),c:O.indexOf(f.c)};O[0]<0&&(O[1]+O[0]/2<0?(O[2]+=O[0]+O[1],O[0]=O[1]=0):(O[2]+=O[0]/2,O[1]+=O[0]/2,O[0]=0),f={a:O[V.a],b:O[V.b],c:O[V.c]},P=(l.a-f.a)*e.yaxis._m,A=(l.c-f.c-l.b+f.b)*e.xaxis._m);var B=tg(e.x0+A,e.y0+P);e.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",B);var F=tg(-A,-P);e.clipDefRelative.select("path").attr("transform",F),e.aaxis.range=[f.a,e.sum-f.b-f.c],e.baxis.range=[e.sum-f.a-f.c,f.b],e.caxis.range=[e.sum-f.a-f.b,f.c],e.drawAxes(!1),e._hasClipOnAxisFalse&&e.plotContainer.select(".scatterlayer").selectAll(".trace").call(OP.hideOutsideRangePoints,e),r.emit("plotly_relayouting",T(f))}function C(){T9.call("_guiRelayout",r,T(f))}t.onmousemove=function(A){Axe.hover(r,A,e.id),r._fullLayout._lasthover=t,r._fullLayout._hoversubplot=e.id},t.onmouseout=function(A){r._dragging||Txe.unhover(r,A)},Txe.init(this.dragOptions)};function Exe(e){kxe.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}});var k9=ne((fsr,Ixe)=>{"use strict";var Gxt=Ku(),Yxt=fl().attributes,Wo=dc(),Wxt=Xs().overrideAll,S9=oa().extendFlat,E9={title:{text:Wo.title.text,font:Wo.title.font},color:Wo.color,tickmode:Wo.minor.tickmode,nticks:S9({},Wo.nticks,{dflt:6,min:1}),tick0:Wo.tick0,dtick:Wo.dtick,tickvals:Wo.tickvals,ticktext:Wo.ticktext,ticks:Wo.ticks,ticklen:Wo.ticklen,tickwidth:Wo.tickwidth,tickcolor:Wo.tickcolor,ticklabelstep:Wo.ticklabelstep,showticklabels:Wo.showticklabels,labelalias:Wo.labelalias,showtickprefix:Wo.showtickprefix,tickprefix:Wo.tickprefix,showticksuffix:Wo.showticksuffix,ticksuffix:Wo.ticksuffix,showexponent:Wo.showexponent,exponentformat:Wo.exponentformat,minexponent:Wo.minexponent,separatethousands:Wo.separatethousands,tickfont:Wo.tickfont,tickangle:Wo.tickangle,tickformat:Wo.tickformat,tickformatstops:Wo.tickformatstops,hoverformat:Wo.hoverformat,showline:S9({},Wo.showline,{dflt:!0}),linecolor:Wo.linecolor,linewidth:Wo.linewidth,showgrid:S9({},Wo.showgrid,{dflt:!0}),gridcolor:Wo.gridcolor,gridwidth:Wo.gridwidth,griddash:Wo.griddash,layer:Wo.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:Wo._deprecated.title,titlefont:Wo._deprecated.titlefont}},BP=Ixe.exports=Wxt({domain:Yxt({name:"ternary"}),bgcolor:{valType:"color",dflt:Gxt.background},sum:{valType:"number",dflt:1,min:0},aaxis:E9,baxis:E9,caxis:E9},"plot","from-root");BP.uirevision={valType:"any",editType:"none"};BP.aaxis.uirevision=BP.baxis.uirevision=BP.caxis.uirevision={valType:"any",editType:"none"}});var Kx=ne((csr,Fxe)=>{"use strict";var Xxt=Wt(),Zxt=So(),jxt=fl().defaults;Fxe.exports=function(t,r,i,n){var a=n.type,o=n.attributes,s=n.handleDefaults,l=n.partition||"x",u=r._subplots[a],f=u.length,c=f&&u[0].replace(/\d+$/,""),h,v;function d(M,b){return Xxt.coerce(h,v,o,M,b)}for(var _=0;_<f;_++){var T=u[_];t[T]?h=t[T]:h=t[T]={},v=Zxt.newContainer(r,T,c),n.noUirevision||d("uirevision",r.uirevision);var p={};p[l]=[_/f,(_+1)/f],jxt(v,r,d,p),n.id=T,s(h,v,d,n)}}});var Bxe=ne((hsr,Oxe)=>{"use strict";var Kxt=_i(),Jxt=So(),NP=Wt(),Qxt=Kx(),$xt=im(),e_t=am(),t_t=v2(),r_t=hx(),n_t=kM(),zxe=k9(),qxe=["aaxis","baxis","caxis"];Oxe.exports=function(t,r,i){Qxt(t,r,i,{type:"ternary",attributes:zxe,handleDefaults:i_t,font:r.font,paper_bgcolor:r.paper_bgcolor})};function i_t(e,t,r,i){var n=r("bgcolor"),a=r("sum");i.bgColor=Kxt.combine(n,i.paper_bgcolor);for(var o,s,l,u=0;u<qxe.length;u++)o=qxe[u],s=e[o]||{},l=Jxt.newContainer(t,o),l._name=o,a_t(s,l,i,t);var f=t.aaxis,c=t.baxis,h=t.caxis;f.min+c.min+h.min>=a&&(f.min=0,c.min=0,h.min=0,e.aaxis&&delete e.aaxis.min,e.baxis&&delete e.baxis.min,e.caxis&&delete e.caxis.min)}function a_t(e,t,r,i){var n=zxe[t._name];function a(v,d){return NP.coerce(e,t,n,v,d)}a("uirevision",i.uirevision),t.type="linear";var o=a("color"),s=o!==n.color.dflt?o:r.font.color,l=t._name,u=l.charAt(0).toUpperCase(),f="Component "+u,c=a("title.text",f);t._hovertitle=c===f?c:u,NP.coerceFont(a,"title.font",{family:r.font.family,size:NP.bigFont(r.font.size),color:s}),a("min"),r_t(e,t,a,"linear"),e_t(e,t,a,"linear"),$xt(e,t,a,"linear",{noAutotickangles:!0}),t_t(e,t,a,{outerTicks:!0});var h=a("showticklabels");h&&(NP.coerceFont(a,"tickfont",{family:r.font.family,size:r.font.size,color:s}),a("tickangle"),a("tickformat")),n_t(e,t,a,{dfltColor:o,bgColor:r.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:n}),a("hoverformat"),a("layer")}});var Nxe=ne(x0=>{"use strict";var o_t=Dxe(),s_t=vc().getSubplotCalcData,l_t=Wt().counterRegex,Sw="ternary";x0.name=Sw;var u_t=x0.attr="subplot";x0.idRoot=Sw;x0.idRegex=x0.attrRegex=l_t(Sw);var f_t=x0.attributes={};f_t[u_t]={valType:"subplotid",dflt:"ternary",editType:"calc"};x0.layoutAttributes=k9();x0.supplyLayoutDefaults=Bxe();x0.plot=function(t){for(var r=t._fullLayout,i=t.calcdata,n=r._subplots[Sw],a=0;a<n.length;a++){var o=n[a],s=s_t(i,Sw,o),l=r[o]._subplot;l||(l=new o_t({id:o,graphDiv:t,container:r._ternarylayer.node()},r),r[o]._subplot=l),l.plot(s,r,t._promises)}};x0.clean=function(e,t,r,i){for(var n=i._subplots[Sw]||[],a=0;a<n.length;a++){var o=n[a],s=i[o]._subplot;!t[o]&&s&&(s.plotContainer.remove(),s.clipDef.remove(),s.clipDefRelative.remove(),s.layers["a-title"].remove(),s.layers["b-title"].remove(),s.layers["c-title"].remove())}}});var Vxe=ne((dsr,Uxe)=>{"use strict";Uxe.exports={attributes:_9(),supplyDefaults:fxe(),colorbar:ph(),formatLabels:hxe(),calc:gxe(),plot:mxe(),style:Tv().style,styleOnSelect:Tv().styleOnSelect,hoverPoints:_xe(),selectPoints:K2(),eventData:wxe(),moduleType:"trace",name:"scatterternary",basePlotModule:Nxe(),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}});var Gxe=ne((psr,Hxe)=>{"use strict";Hxe.exports=Vxe()});var C9=ne((gsr,Wxe)=>{"use strict";var rc=ZM(),Ew=oa().extendFlat,Yxe=kl().axisHoverFormat;Wxe.exports={y:rc.y,x:rc.x,x0:rc.x0,y0:rc.y0,xhoverformat:Yxe("x"),yhoverformat:Yxe("y"),name:Ew({},rc.name,{}),orientation:Ew({},rc.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:rc.fillcolor,points:Ew({},rc.boxpoints,{}),jitter:Ew({},rc.jitter,{}),pointpos:Ew({},rc.pointpos,{}),width:Ew({},rc.width,{}),marker:rc.marker,text:rc.text,hovertext:rc.hovertext,hovertemplate:rc.hovertemplate,quartilemethod:rc.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:rc.offsetgroup,alignmentgroup:rc.alignmentgroup,selected:rc.selected,unselected:rc.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}});var R9=ne((ysr,Xxe)=>{"use strict";var L9=jM(),P9=Wt().extendFlat;Xxe.exports={violinmode:P9({},L9.boxmode,{}),violingap:P9({},L9.boxgap,{}),violingroupgap:P9({},L9.boxgroupgap,{})}});var Qxe=ne((msr,Jxe)=>{"use strict";var Zxe=Wt(),c_t=_i(),jxe=JM(),Kxe=C9();Jxe.exports=function(t,r,i,n){function a(k,x){return Zxe.coerce(t,r,Kxe,k,x)}function o(k,x){return Zxe.coerce2(t,r,Kxe,k,x)}if(jxe.handleSampleDefaults(t,r,a,n),r.visible!==!1){a("bandwidth"),a("side");var s=a("width");s||(a("scalegroup",r.name),a("scalemode"));var l=a("span"),u;Array.isArray(l)&&(u="manual"),a("spanmode",u);var f=a("line.color",(t.marker||{}).color||i),c=a("line.width"),h=a("fillcolor",c_t.addOpacity(r.line.color,.5));jxe.handlePointsDefaults(t,r,a,{prefix:""});var v=o("box.width"),d=o("box.fillcolor",h),_=o("box.line.color",f),T=o("box.line.width",c),p=a("box.visible",!!(v||d||_||T));p||(r.box={visible:!1});var M=o("meanline.color",f),b=o("meanline.width",c),w=a("meanline.visible",!!(M||b));w||(r.meanline={visible:!1}),a("quartilemethod")}}});var e_e=ne((xsr,$xe)=>{"use strict";var h_t=Wt(),v_t=R9(),d_t=rP();$xe.exports=function(t,r,i){function n(a,o){return h_t.coerce(t,r,v_t,a,o)}d_t._supply(t,r,i,n,"violin")}});var UP=ne(Jx=>{"use strict";var p_t=Wt(),g_t={gaussian:function(e){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*e*e)}};Jx.makeKDE=function(e,t,r){var i=r.length,n=g_t.gaussian,a=e.bandwidth,o=1/(i*a);return function(s){for(var l=0,u=0;u<i;u++)l+=n((s-r[u])/a);return o*l}};Jx.getPositionOnKdePath=function(e,t,r){var i,n;t.orientation==="h"?(i="y",n="x"):(i="x",n="y");var a=p_t.findPointOnPath(e.path,r,n,{pathLength:e.pathLength}),o=e.posCenterPx,s=a[i],l=t.side==="both"?2*o-s:o;return[s,l]};Jx.getKdeValue=function(e,t,r){var i=e.pts.map(Jx.extractVal),n=Jx.makeKDE(e,t,i);return n(r)/e.posDensityScale};Jx.extractVal=function(e){return e.v}});var n_e=ne((bsr,r_e)=>{"use strict";var D9=Wt(),I9=Xi(),y_t=wN(),t_e=UP(),m_t=$a().BADNUM;r_e.exports=function(t,r){var i=y_t(t,r);if(i[0].t.empty)return i;for(var n=t._fullLayout,a=I9.getFromId(t,r[r.orientation==="h"?"xaxis":"yaxis"]),o=1/0,s=-1/0,l=0,u=0,f=0;f<i.length;f++){var c=i[f],h=c.pts.map(t_e.extractVal),v=c.bandwidth=__t(r,c,h),d=c.span=b_t(r,c,a,v);if(c.min===c.max&&v===0)d=c.span=[c.min,c.max],c.density=[{v:1,t:d[0]}],c.bandwidth=v,l=Math.max(l,1);else{var _=d[1]-d[0],T=Math.ceil(_/(v/3)),p=_/T;if(!isFinite(p)||!isFinite(T))return D9.error("Something went wrong with computing the violin span"),i[0].t.empty=!0,i;var M=t_e.makeKDE(c,r,h);c.density=new Array(T);for(var b=0,w=d[0];w<d[1]+p/2;b++,w+=p){var k=M(w);c.density[b]={v:k,t:w},l=Math.max(l,k)}}u=Math.max(u,h.length),o=Math.min(o,d[0]),s=Math.max(s,d[1])}var x=I9.findExtremes(a,[o,s],{padded:!0});if(r._extremes[a._id]=x,r.width)i[0].t.maxKDE=l;else{var E=n._violinScaleGroupStats,S=r.scalegroup,g=E[S];g?(g.maxKDE=Math.max(g.maxKDE,l),g.maxCount=Math.max(g.maxCount,u)):E[S]={maxKDE:l,maxCount:u}}return i[0].t.labels.kde=D9._(t,"kde:"),i};function x_t(e,t,r){var i=Math.min(t,r/1.349);return 1.059*i*Math.pow(e,-.2)}function __t(e,t,r){var i=t.max-t.min;if(!i)return e.bandwidth?e.bandwidth:0;if(e.bandwidth)return Math.max(e.bandwidth,i/1e4);var n=r.length,a=D9.stdev(r,n-1,t.mean);return Math.max(x_t(n,a,t.q3-t.q1),i/100)}function b_t(e,t,r,i){var n=e.spanmode,a=e.span||[],o=[t.min,t.max],s=[t.min-2*i,t.max+2*i],l;function u(c){var h=a[c],v=r.type==="multicategory"?r.r2c(h):r.d2c(h,0,e[t.valLetter+"calendar"]);return v===m_t?s[c]:v}n==="soft"?l=s:n==="hard"?l=o:l=[u(0),u(1)];var f={type:"linear",range:l};return I9.setConvert(f),f.cleanRange(),l}});var o_e=ne((wsr,a_e)=>{"use strict";var w_t=iP().setPositionOffset,i_e=["v","h"];a_e.exports=function(t,r){for(var i=t.calcdata,n=r.xaxis,a=r.yaxis,o=0;o<i_e.length;o++){for(var s=i_e[o],l=s==="h"?a:n,u=[],f=0;f<i.length;f++){var c=i[f],h=c[0].t,v=c[0].trace;v.visible===!0&&v.type==="violin"&&!h.empty&&v.orientation===s&&v.xaxis===n._id&&v.yaxis===a._id&&u.push(f)}w_t("violin",t,u,l)}}});var l_e=ne((Tsr,s_e)=>{"use strict";var F9=Ai(),q9=Wt(),T_t=aa(),z9=aP(),A_t=sB(),M_t=UP();s_e.exports=function(t,r,i,n){var a=t._context.staticPlot,o=t._fullLayout,s=r.xaxis,l=r.yaxis;function u(f,c){var h=A_t(f,{xaxis:s,yaxis:l,trace:c,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return T_t.smoothopen(h[0],1)}q9.makeTraceGroups(n,i,"trace violins").each(function(f){var c=F9.select(this),h=f[0],v=h.t,d=h.trace;if(d.visible!==!0||v.empty){c.remove();return}var _=v.bPos,T=v.bdPos,p=r[v.valLetter+"axis"],M=r[v.posLetter+"axis"],b=d.side==="both",w=b||d.side==="positive",k=b||d.side==="negative",x=c.selectAll("path.violin").data(q9.identity);x.enter().append("path").style("vector-effect",a?"none":"non-scaling-stroke").attr("class","violin"),x.exit().remove(),x.each(function(z){var O=F9.select(this),V=z.density,B=V.length,F=M.c2l(z.pos+_,!0),N=M.l2p(F),Z;if(d.width)Z=v.maxKDE/T;else{var J=o._violinScaleGroupStats[d.scalegroup];Z=d.scalemode==="count"?J.maxKDE/T*(J.maxCount/z.pts.length):J.maxKDE/T}var re,ue,fe,K,X,ae,oe;if(w){for(ae=new Array(B),K=0;K<B;K++)oe=ae[K]={},oe[v.posLetter]=F+V[K].v/Z,oe[v.valLetter]=p.c2l(V[K].t,!0);re=u(ae,d)}if(k){for(ae=new Array(B),X=0,K=B-1;X<B;X++,K--)oe=ae[X]={},oe[v.posLetter]=F-V[K].v/Z,oe[v.valLetter]=p.c2l(V[K].t,!0);ue=u(ae,d)}if(b)fe=re+"L"+ue.substr(1)+"Z";else{var me=[N,p.c2p(V[0].t)],xe=[N,p.c2p(V[B-1].t)];d.orientation==="h"&&(me.reverse(),xe.reverse()),w?fe="M"+me+"L"+re.substr(1)+"L"+xe:fe="M"+xe+"L"+ue.substr(1)+"L"+me}O.attr("d",fe),z.posCenterPx=N,z.posDensityScale=Z*T,z.path=O.node(),z.pathLength=z.path.getTotalLength()/(b?2:1)});var E=d.box,S=E.width,g=(E.line||{}).width,C,A;b?(C=T*S,A=0):w?(C=[0,T*S/2],A=g*{x:1,y:-1}[v.posLetter]):(C=[T*S/2,0],A=g*{x:-1,y:1}[v.posLetter]),z9.plotBoxAndWhiskers(c,{pos:M,val:p},d,{bPos:_,bdPos:C,bPosPxOffset:A}),z9.plotBoxMean(c,{pos:M,val:p},d,{bPos:_,bdPos:C,bPosPxOffset:A});var P;!d.box.visible&&d.meanline.visible&&(P=q9.identity);var D=c.selectAll("path.meanline").data(P||[]);D.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",a?"none":"non-scaling-stroke"),D.exit().remove(),D.each(function(z){var O=p.c2p(z.mean,!0),V=M_t.getPositionOnKdePath(z,d,O);F9.select(this).attr("d",d.orientation==="h"?"M"+O+","+V[0]+"V"+V[1]:"M"+V[0]+","+O+"H"+V[1])}),z9.plotPoints(c,{x:s,y:l},d,v)})}});var c_e=ne((Asr,f_e)=>{"use strict";var u_e=Ai(),kw=_i(),S_t=Tv().stylePoints;f_e.exports=function(t){var r=u_e.select(t).selectAll("g.trace.violins");r.style("opacity",function(i){return i[0].trace.opacity}),r.each(function(i){var n=i[0].trace,a=u_e.select(this),o=n.box||{},s=o.line||{},l=n.meanline||{},u=l.width;a.selectAll("path.violin").style("stroke-width",n.line.width+"px").call(kw.stroke,n.line.color).call(kw.fill,n.fillcolor),a.selectAll("path.box").style("stroke-width",s.width+"px").call(kw.stroke,s.color).call(kw.fill,o.fillcolor);var f={"stroke-width":u+"px","stroke-dasharray":2*u+"px,"+u+"px"};a.selectAll("path.mean").style(f).call(kw.stroke,l.color),a.selectAll("path.meanline").style(f).call(kw.stroke,l.color),S_t(a,n,t)})}});var p_e=ne((Msr,d_e)=>{"use strict";var E_t=_i(),O9=Wt(),k_t=Xi(),h_e=EN(),v_e=UP();d_e.exports=function(t,r,i,n,a){a||(a={});var o=a.hoverLayer,s=t.cd,l=s[0].trace,u=l.hoveron,f=u.indexOf("violins")!==-1,c=u.indexOf("kde")!==-1,h=[],v,d;if(f||c){var _=h_e.hoverOnBoxes(t,r,i,n);if(c&&_.length>0){var T=t.xa,p=t.ya,M,b,w,k,x;l.orientation==="h"?(x=r,M="y",w=p,b="x",k=T):(x=i,M="x",w=T,b="y",k=p);var E=s[t.index];if(x>=E.span[0]&&x<=E.span[1]){var S=O9.extendFlat({},t),g=k.c2p(x,!0),C=v_e.getKdeValue(E,l,x),A=v_e.getPositionOnKdePath(E,l,g),P=w._offset,D=w._length;S[M+"0"]=A[0],S[M+"1"]=A[1],S[b+"0"]=S[b+"1"]=g,S[b+"Label"]=b+": "+k_t.hoverLabelText(k,x,l[b+"hoverformat"])+", "+s[0].t.labels.kde+" "+C.toFixed(3);for(var z=0,O=0;O<_.length;O++)if(_[O].attr==="med"){z=O;break}S.spikeDistance=_[z].spikeDistance;var V=M+"Spike";S[V]=_[z][V],_[z].spikeDistance=void 0,_[z][V]=void 0,S.hovertemplate=!1,h.push(S),d={},d[M+"1"]=O9.constrain(P+A[0],P,P+D),d[M+"2"]=O9.constrain(P+A[1],P,P+D),d[b+"1"]=d[b+"2"]=k._offset+g}}f&&(h=h.concat(_))}u.indexOf("points")!==-1&&(v=h_e.hoverOnPoints(t,r,i));var B=o.selectAll(".violinline-"+l.uid).data(d?[0]:[]);return B.enter().append("line").classed("violinline-"+l.uid,!0).attr("stroke-width",1.5),B.exit().remove(),B.attr(d).call(E_t.stroke,t.color),n==="closest"?v?[v]:h:(v&&h.push(v),h)}});var y_e=ne((Ssr,g_e)=>{"use strict";g_e.exports={attributes:C9(),layoutAttributes:R9(),supplyDefaults:Qxe(),crossTraceDefaults:JM().crossTraceDefaults,supplyLayoutDefaults:e_e(),calc:n_e(),crossTraceCalc:o_e(),plot:l_e(),style:c_e(),styleOnSelect:Tv().styleOnSelect,hoverPoints:p_e(),selectPoints:kN(),moduleType:"trace",name:"violin",basePlotModule:vu(),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}});var x_e=ne((Esr,m_e)=>{"use strict";m_e.exports=y_e()});var b_e=ne((ksr,__e)=>{"use strict";__e.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}});var N9=ne((Csr,A_e)=>{"use strict";var wl=J0(),B9=cu().line,C_t=es(),w_e=kl().axisHoverFormat,L_t=Ba().hovertemplateAttrs,P_t=Ba().texttemplateAttrs,T_e=b_e(),ny=oa().extendFlat,R_t=_i();A_e.exports={x:wl.x,x0:wl.x0,dx:wl.dx,y:wl.y,y0:wl.y0,dy:wl.dy,xperiod:wl.xperiod,yperiod:wl.yperiod,xperiod0:wl.xperiod0,yperiod0:wl.yperiod0,xperiodalignment:wl.xperiodalignment,yperiodalignment:wl.yperiodalignment,xhoverformat:w_e("x"),yhoverformat:w_e("y"),hovertext:wl.hovertext,hovertemplate:L_t({},{keys:T_e.eventDataKeys}),hoverinfo:ny({},C_t.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:P_t({editType:"plot"},{keys:T_e.eventDataKeys.concat(["label","value"])}),text:wl.text,textposition:wl.textposition,insidetextanchor:ny({},wl.insidetextanchor,{dflt:"middle"}),textangle:ny({},wl.textangle,{dflt:0}),textfont:wl.textfont,insidetextfont:wl.insidetextfont,outsidetextfont:wl.outsidetextfont,constraintext:wl.constraintext,cliponaxis:wl.cliponaxis,orientation:ny({},wl.orientation,{}),offset:ny({},wl.offset,{arrayOk:!1}),width:ny({},wl.width,{arrayOk:!1}),marker:D_t(),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:ny({},B9.color,{dflt:R_t.defaultLine}),width:ny({},B9.width,{dflt:0,editType:"plot"}),dash:B9.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:wl.offsetgroup,alignmentgroup:wl.alignmentgroup};function D_t(){var e=ny({},wl.marker);return delete e.pattern,delete e.cornerradius,e}});var U9=ne((Lsr,M_e)=>{"use strict";M_e.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}});var H9=ne((Psr,E_e)=>{"use strict";var VP=Wt(),I_t=Dx(),F_t=Fd().handleText,q_t=O2(),z_t=o0(),S_e=N9(),V9=_i();function O_t(e,t,r,i){function n(c,h){return VP.coerce(e,t,S_e,c,h)}var a=q_t(e,t,i,n);if(!a){t.visible=!1;return}z_t(e,t,i,n),n("xhoverformat"),n("yhoverformat"),n("orientation",t.y&&!t.x?"v":"h"),n("offset"),n("width");var o=n("text");n("hovertext"),n("hovertemplate");var s=n("textposition");F_t(e,t,i,n,s,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),t.textposition!=="none"&&!t.texttemplate&&n("textinfo",VP.isArrayOrTypedArray(o)?"text+value":"value");var l=n("marker.color",r);n("marker.line.color",V9.defaultLine),n("marker.line.width");var u=n("connector.visible");if(u){n("connector.fillcolor",B_t(l));var f=n("connector.line.width");f&&(n("connector.line.color"),n("connector.line.dash"))}}function B_t(e){var t=VP.isArrayOrTypedArray(e)?"#000":e;return V9.addOpacity(t,.5*V9.opacity(t))}function N_t(e,t){var r,i;function n(o){return VP.coerce(i._input,i,S_e,o)}if(t.funnelmode==="group")for(var a=0;a<e.length;a++)i=e[a],r=i._input,I_t(r,i,t,n)}E_e.exports={supplyDefaults:O_t,crossTraceDefaults:N_t}});var C_e=ne((Rsr,k_e)=>{"use strict";var U_t=Wt(),V_t=U9();k_e.exports=function(e,t,r){var i=!1;function n(s,l){return U_t.coerce(e,t,V_t,s,l)}for(var a=0;a<r.length;a++){var o=r[a];if(o.visible&&o.type==="funnel"){i=!0;break}}i&&(n("funnelmode"),n("funnelgap",.2),n("funnelgroupgap"))}});var P_e=ne((Dsr,L_e)=>{"use strict";var Cw=Wt();L_e.exports=function(t,r){for(var i=0;i<t.length;i++)t[i].i=i;Cw.mergeArray(r.text,t,"tx"),Cw.mergeArray(r.hovertext,t,"htx");var n=r.marker;if(n){Cw.mergeArray(n.opacity,t,"mo"),Cw.mergeArray(n.color,t,"mc");var a=n.line;a&&(Cw.mergeArray(a.color,t,"mlc"),Cw.mergeArrayCastPositive(a.width,t,"mlw"))}}});var F_e=ne((Isr,I_e)=>{"use strict";var R_e=Xi(),D_e=u0(),H_t=P_e(),G_t=gp(),dS=$a().BADNUM;I_e.exports=function(t,r){var i=R_e.getFromId(t,r.xaxis||"x"),n=R_e.getFromId(t,r.yaxis||"y"),a,o,s,l,u,f,c,h;r.orientation==="h"?(a=i.makeCalcdata(r,"x"),s=n.makeCalcdata(r,"y"),l=D_e(r,n,"y",s),u=!!r.yperiodalignment,f="y"):(a=n.makeCalcdata(r,"y"),s=i.makeCalcdata(r,"x"),l=D_e(r,i,"x",s),u=!!r.xperiodalignment,f="x"),o=l.vals;var v=Math.min(o.length,a.length),d=new Array(v);for(r._base=[],c=0;c<v;c++){a[c]<0&&(a[c]=dS);var _=!1;a[c]!==dS&&c+1<v&&a[c+1]!==dS&&(_=!0),h=d[c]={p:o[c],s:a[c],cNext:_},r._base[c]=-.5*h.s,u&&(d[c].orig_p=s[c],d[c][f+"End"]=l.ends[c],d[c][f+"Start"]=l.starts[c]),r.ids&&(h.id=String(r.ids[c])),c===0&&(d[0].vTotal=0),d[0].vTotal+=G9(h.s),h.begR=G9(h.s)/G9(d[0].s)}var T;for(c=0;c<v;c++)h=d[c],h.s!==dS&&(h.sumR=h.s/d[0].vTotal,h.difR=T!==void 0?h.s/T:1,T=h.s);return H_t(d,r),G_t(d,r),d};function G9(e){return e===dS?0:e}});var O_e=ne((Fsr,z_e)=>{"use strict";var q_e=Ix().setGroupPositions;z_e.exports=function(t,r){var i=t._fullLayout,n=t._fullData,a=t.calcdata,o=r.xaxis,s=r.yaxis,l=[],u=[],f=[],c,h;for(h=0;h<n.length;h++){var v=n[h],d=v.orientation==="h";v.visible===!0&&v.xaxis===o._id&&v.yaxis===s._id&&v.type==="funnel"&&(c=a[h],d?f.push(c):u.push(c),l.push(c))}var _={mode:i.funnelmode,norm:i.funnelnorm,gap:i.funnelgap,groupgap:i.funnelgroupgap};for(q_e(t,o,s,u,_),q_e(t,s,o,f,_),h=0;h<l.length;h++){c=l[h];for(var T=0;T<c.length;T++)T+1<c.length&&(c[T].nextP0=c[T+1].p0,c[T].nextS0=c[T+1].s0,c[T].nextP1=c[T+1].p1,c[T].nextS1=c[T+1].s1)}}});var V_e=ne((qsr,U_e)=>{"use strict";var HP=Ai(),qm=Wt(),B_e=aa(),Fm=$a().BADNUM,Y_t=Yx(),W_t=yh().clearMinTextSize;U_e.exports=function(t,r,i,n){var a=t._fullLayout;W_t("funnel",a),X_t(t,r,i,n),Z_t(t,r,i,n),Y_t.plot(t,r,i,n,{mode:a.funnelmode,norm:a.funnelmode,gap:a.funnelgap,groupgap:a.funnelgroupgap})};function X_t(e,t,r,i){var n=t.xaxis,a=t.yaxis;qm.makeTraceGroups(i,r,"trace bars").each(function(o){var s=HP.select(this),l=o[0].trace,u=qm.ensureSingle(s,"g","regions");if(!l.connector||!l.connector.visible){u.remove();return}var f=l.orientation==="h",c=u.selectAll("g.region").data(qm.identity);c.enter().append("g").classed("region",!0),c.exit().remove();var h=c.size();c.each(function(v,d){if(!(d!==h-1&&!v.cNext)){var _=N_e(v,n,a,f),T=_[0],p=_[1],M="";T[0]!==Fm&&p[0]!==Fm&&T[1]!==Fm&&p[1]!==Fm&&T[2]!==Fm&&p[2]!==Fm&&T[3]!==Fm&&p[3]!==Fm&&(f?M+="M"+T[0]+","+p[1]+"L"+T[2]+","+p[2]+"H"+T[3]+"L"+T[1]+","+p[1]+"Z":M+="M"+T[1]+","+p[1]+"L"+T[2]+","+p[3]+"V"+p[2]+"L"+T[1]+","+p[0]+"Z"),M===""&&(M="M0,0Z"),qm.ensureSingle(HP.select(this),"path").attr("d",M).call(B_e.setClipUrl,t.layerClipId,e)}})})}function Z_t(e,t,r,i){var n=t.xaxis,a=t.yaxis;qm.makeTraceGroups(i,r,"trace bars").each(function(o){var s=HP.select(this),l=o[0].trace,u=qm.ensureSingle(s,"g","lines");if(!l.connector||!l.connector.visible||!l.connector.line.width){u.remove();return}var f=l.orientation==="h",c=u.selectAll("g.line").data(qm.identity);c.enter().append("g").classed("line",!0),c.exit().remove();var h=c.size();c.each(function(v,d){if(!(d!==h-1&&!v.cNext)){var _=N_e(v,n,a,f),T=_[0],p=_[1],M="";T[3]!==void 0&&p[3]!==void 0&&(f?(M+="M"+T[0]+","+p[1]+"L"+T[2]+","+p[2],M+="M"+T[1]+","+p[1]+"L"+T[3]+","+p[2]):(M+="M"+T[1]+","+p[1]+"L"+T[2]+","+p[3],M+="M"+T[1]+","+p[0]+"L"+T[2]+","+p[2])),M===""&&(M="M0,0Z"),qm.ensureSingle(HP.select(this),"path").attr("d",M).call(B_e.setClipUrl,t.layerClipId,e)}})})}function N_e(e,t,r,i){var n=[],a=[],o=i?t:r,s=i?r:t;return n[0]=o.c2p(e.s0,!0),a[0]=s.c2p(e.p0,!0),n[1]=o.c2p(e.s1,!0),a[1]=s.c2p(e.p1,!0),n[2]=o.c2p(e.nextS0,!0),a[2]=s.c2p(e.nextP0,!0),n[3]=o.c2p(e.nextS1,!0),a[3]=s.c2p(e.nextP1,!0),i?[n,a]:[a,n]}});var Y_e=ne((zsr,G_e)=>{"use strict";var pS=Ai(),H_e=aa(),Y9=_i(),j_t=Yy().DESELECTDIM,K_t=_p(),J_t=yh().resizeText,Q_t=K_t.styleTextPoints;function $_t(e,t,r){var i=r||pS.select(e).selectAll("g.funnellayer").selectAll("g.trace");J_t(e,i,"funnel"),i.style("opacity",function(n){return n[0].trace.opacity}),i.each(function(n){var a=pS.select(this),o=n[0].trace;a.selectAll(".point > path").each(function(s){if(!s.isBlank){var l=o.marker;pS.select(this).call(Y9.fill,s.mc||l.color).call(Y9.stroke,s.mlc||l.line.color).call(H_e.dashLine,l.line.dash,s.mlw||l.line.width).style("opacity",o.selectedpoints&&!s.selected?j_t:1)}}),Q_t(a,o,e),a.selectAll(".regions").each(function(){pS.select(this).selectAll("path").style("stroke-width",0).call(Y9.fill,o.connector.fillcolor)}),a.selectAll(".lines").each(function(){var s=o.connector.line;H_e.lineGroupStyle(pS.select(this).selectAll("path"),s.width,s.color,s.dash)})})}G_e.exports={style:$_t}});var Z_e=ne((Osr,X_e)=>{"use strict";var W_e=_i().opacity,ebt=hw().hoverOnBars,W9=Wt().formatPercent;X_e.exports=function(t,r,i,n,a){var o=ebt(t,r,i,n,a);if(o){var s=o.cd,l=s[0].trace,u=l.orientation==="h",f=o.index,c=s[f],h=u?"x":"y";o[h+"LabelVal"]=c.s,o.percentInitial=c.begR,o.percentInitialLabel=W9(c.begR,1),o.percentPrevious=c.difR,o.percentPreviousLabel=W9(c.difR,1),o.percentTotal=c.sumR,o.percentTotalLabel=W9(c.sumR,1);var v=c.hi||l.hoverinfo,d=[];if(v&&v!=="none"&&v!=="skip"){var _=v==="all",T=v.split("+"),p=function(M){return _||T.indexOf(M)!==-1};p("percent initial")&&d.push(o.percentInitialLabel+" of initial"),p("percent previous")&&d.push(o.percentPreviousLabel+" of previous"),p("percent total")&&d.push(o.percentTotalLabel+" of total")}return o.extraText=d.join("<br>"),o.color=tbt(l,c),[o]}};function tbt(e,t){var r=e.marker,i=t.mc||r.color,n=t.mlc||r.line.color,a=t.mlw||r.line.width;if(W_e(i))return i;if(W_e(n)&&a)return n}});var K_e=ne((Bsr,j_e)=>{"use strict";j_e.exports=function(t,r){return t.x="xVal"in r?r.xVal:r.x,t.y="yVal"in r?r.yVal:r.y,"percentInitial"in r&&(t.percentInitial=r.percentInitial),"percentPrevious"in r&&(t.percentPrevious=r.percentPrevious),"percentTotal"in r&&(t.percentTotal=r.percentTotal),r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),t}});var Q_e=ne((Nsr,J_e)=>{"use strict";J_e.exports={attributes:N9(),layoutAttributes:U9(),supplyDefaults:H9().supplyDefaults,crossTraceDefaults:H9().crossTraceDefaults,supplyLayoutDefaults:C_e(),calc:F_e(),crossTraceCalc:O_e(),plot:V_e(),style:Y_e().style,hoverPoints:Z_e(),eventData:K_e(),selectPoints:vw(),moduleType:"trace",name:"funnel",basePlotModule:vu(),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}});var ebe=ne((Usr,$_e)=>{"use strict";$_e.exports=Q_e()});var rbe=ne((Vsr,tbe)=>{"use strict";tbe.exports={eventDataKeys:["initial","delta","final"]}});var j9=ne((Hsr,abe)=>{"use strict";var rl=J0(),X9=cu().line,rbt=es(),nbe=kl().axisHoverFormat,nbt=Ba().hovertemplateAttrs,ibt=Ba().texttemplateAttrs,ibe=rbe(),Lw=oa().extendFlat,abt=_i();function Z9(e){return{marker:{color:Lw({},rl.marker.color,{arrayOk:!1,editType:"style"}),line:{color:Lw({},rl.marker.line.color,{arrayOk:!1,editType:"style"}),width:Lw({},rl.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}abe.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:rl.x,x0:rl.x0,dx:rl.dx,y:rl.y,y0:rl.y0,dy:rl.dy,xperiod:rl.xperiod,yperiod:rl.yperiod,xperiod0:rl.xperiod0,yperiod0:rl.yperiod0,xperiodalignment:rl.xperiodalignment,yperiodalignment:rl.yperiodalignment,xhoverformat:nbe("x"),yhoverformat:nbe("y"),hovertext:rl.hovertext,hovertemplate:nbt({},{keys:ibe.eventDataKeys}),hoverinfo:Lw({},rbt.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:ibt({editType:"plot"},{keys:ibe.eventDataKeys.concat(["label"])}),text:rl.text,textposition:rl.textposition,insidetextanchor:rl.insidetextanchor,textangle:rl.textangle,textfont:rl.textfont,insidetextfont:rl.insidetextfont,outsidetextfont:rl.outsidetextfont,constraintext:rl.constraintext,cliponaxis:rl.cliponaxis,orientation:rl.orientation,offset:rl.offset,width:rl.width,increasing:Z9("increasing"),decreasing:Z9("decreasing"),totals:Z9("intermediate sums and total"),connector:{line:{color:Lw({},X9.color,{dflt:abt.defaultLine}),width:Lw({},X9.width,{editType:"plot"}),dash:X9.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:rl.offsetgroup,alignmentgroup:rl.alignmentgroup}});var K9=ne((Gsr,obe)=>{"use strict";obe.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}});var Pw=ne((Ysr,sbe)=>{"use strict";sbe.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}});var Q9=ne((Wsr,cbe)=>{"use strict";var lbe=Wt(),obt=Dx(),sbt=Fd().handleText,lbt=O2(),ubt=o0(),ube=j9(),fbt=_i(),fbe=Pw(),cbt=fbe.INCREASING.COLOR,hbt=fbe.DECREASING.COLOR,vbt="#4499FF";function J9(e,t,r){e(t+".marker.color",r),e(t+".marker.line.color",fbt.defaultLine),e(t+".marker.line.width")}function dbt(e,t,r,i){function n(u,f){return lbe.coerce(e,t,ube,u,f)}var a=lbt(e,t,i,n);if(!a){t.visible=!1;return}ubt(e,t,i,n),n("xhoverformat"),n("yhoverformat"),n("measure"),n("orientation",t.x&&!t.y?"h":"v"),n("base"),n("offset"),n("width"),n("text"),n("hovertext"),n("hovertemplate");var o=n("textposition");sbt(e,t,i,n,o,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),t.textposition!=="none"&&(n("texttemplate"),t.texttemplate||n("textinfo")),J9(n,"increasing",cbt),J9(n,"decreasing",hbt),J9(n,"totals",vbt);var s=n("connector.visible");if(s){n("connector.mode");var l=n("connector.line.width");l&&(n("connector.line.color"),n("connector.line.dash"))}}function pbt(e,t){var r,i;function n(o){return lbe.coerce(i._input,i,ube,o)}if(t.waterfallmode==="group")for(var a=0;a<e.length;a++)i=e[a],r=i._input,obt(r,i,t,n)}cbe.exports={supplyDefaults:dbt,crossTraceDefaults:pbt}});var vbe=ne((Xsr,hbe)=>{"use strict";var gbt=Wt(),ybt=K9();hbe.exports=function(e,t,r){var i=!1;function n(s,l){return gbt.coerce(e,t,ybt,s,l)}for(var a=0;a<r.length;a++){var o=r[a];if(o.visible&&o.type==="waterfall"){i=!0;break}}i&&(n("waterfallmode"),n("waterfallgap",.2),n("waterfallgroupgap"))}});var xbe=ne((Zsr,mbe)=>{"use strict";var dbe=Xi(),pbe=u0(),gbe=Wt().mergeArray,mbt=gp(),ybe=$a().BADNUM;function $9(e){return e==="a"||e==="absolute"}function eU(e){return e==="t"||e==="total"}mbe.exports=function(t,r){var i=dbe.getFromId(t,r.xaxis||"x"),n=dbe.getFromId(t,r.yaxis||"y"),a,o,s,l,u,f;r.orientation==="h"?(a=i.makeCalcdata(r,"x"),s=n.makeCalcdata(r,"y"),l=pbe(r,n,"y",s),u=!!r.yperiodalignment,f="y"):(a=n.makeCalcdata(r,"y"),s=i.makeCalcdata(r,"x"),l=pbe(r,i,"x",s),u=!!r.xperiodalignment,f="x"),o=l.vals;for(var c=Math.min(o.length,a.length),h=new Array(c),v=0,d,_=!1,T=0;T<c;T++){var p=a[T]||0,M=!1;(a[T]!==ybe||eU(r.measure[T])||$9(r.measure[T]))&&T+1<c&&(a[T+1]!==ybe||eU(r.measure[T+1])||$9(r.measure[T+1]))&&(M=!0);var b=h[T]={i:T,p:o[T],s:p,rawS:p,cNext:M};$9(r.measure[T])?(v=b.s,b.isSum=!0,b.dir="totals",b.s=v):eU(r.measure[T])?(b.isSum=!0,b.dir="totals",b.s=v):(b.isSum=!1,b.dir=b.rawS<0?"decreasing":"increasing",d=b.s,b.s=v+d,v+=d),b.dir==="totals"&&(_=!0),u&&(h[T].orig_p=s[T],h[T][f+"End"]=l.ends[T],h[T][f+"Start"]=l.starts[T]),r.ids&&(b.id=String(r.ids[T])),b.v=(r.base||0)+v}return h.length&&(h[0].hasTotals=_),gbe(r.text,h,"tx"),gbe(r.hovertext,h,"htx"),mbt(h,r),h}});var wbe=ne((jsr,bbe)=>{"use strict";var _be=Ix().setGroupPositions;bbe.exports=function(t,r){var i=t._fullLayout,n=t._fullData,a=t.calcdata,o=r.xaxis,s=r.yaxis,l=[],u=[],f=[],c,h;for(h=0;h<n.length;h++){var v=n[h];v.visible===!0&&v.xaxis===o._id&&v.yaxis===s._id&&v.type==="waterfall"&&(c=a[h],v.orientation==="h"?f.push(c):u.push(c),l.push(c))}var d={mode:i.waterfallmode,norm:i.waterfallnorm,gap:i.waterfallgap,groupgap:i.waterfallgroupgap};for(_be(t,o,s,u,d),_be(t,s,o,f,d),h=0;h<l.length;h++){c=l[h];for(var _=0;_<c.length;_++){var T=c[_];T.isSum===!1&&(T.s0+=_===0?0:c[_-1].s),_+1<c.length&&(c[_].nextP0=c[_+1].p0,c[_].nextS0=c[_+1].s0)}}}});var Mbe=ne((Ksr,Abe)=>{"use strict";var Tbe=Ai(),GP=Wt(),xbt=aa(),Rw=$a().BADNUM,_bt=Yx(),bbt=yh().clearMinTextSize;Abe.exports=function(t,r,i,n){var a=t._fullLayout;bbt("waterfall",a),_bt.plot(t,r,i,n,{mode:a.waterfallmode,norm:a.waterfallmode,gap:a.waterfallgap,groupgap:a.waterfallgroupgap}),wbt(t,r,i,n)};function wbt(e,t,r,i){var n=t.xaxis,a=t.yaxis;GP.makeTraceGroups(i,r,"trace bars").each(function(o){var s=Tbe.select(this),l=o[0].trace,u=GP.ensureSingle(s,"g","lines");if(!l.connector||!l.connector.visible){u.remove();return}var f=l.orientation==="h",c=l.connector.mode,h=u.selectAll("g.line").data(GP.identity);h.enter().append("g").classed("line",!0),h.exit().remove();var v=h.size();h.each(function(d,_){if(!(_!==v-1&&!d.cNext)){var T=Tbt(d,n,a,f),p=T[0],M=T[1],b="";p[0]!==Rw&&M[0]!==Rw&&p[1]!==Rw&&M[1]!==Rw&&(c==="spanning"&&!d.isSum&&_>0&&(f?b+="M"+p[0]+","+M[1]+"V"+M[0]:b+="M"+p[1]+","+M[0]+"H"+p[0]),c!=="between"&&(d.isSum||_<v-1)&&(f?b+="M"+p[1]+","+M[0]+"V"+M[1]:b+="M"+p[0]+","+M[1]+"H"+p[1]),p[2]!==Rw&&M[2]!==Rw&&(f?b+="M"+p[1]+","+M[1]+"V"+M[2]:b+="M"+p[1]+","+M[1]+"H"+p[2])),b===""&&(b="M0,0Z"),GP.ensureSingle(Tbe.select(this),"path").attr("d",b).call(xbt.setClipUrl,t.layerClipId,e)}})})}function Tbt(e,t,r,i){var n=[],a=[],o=i?t:r,s=i?r:t;return n[0]=o.c2p(e.s0,!0),a[0]=s.c2p(e.p0,!0),n[1]=o.c2p(e.s1,!0),a[1]=s.c2p(e.p1,!0),n[2]=o.c2p(e.nextS0,!0),a[2]=s.c2p(e.nextP0,!0),i?[n,a]:[a,n]}});var Cbe=ne((Jsr,kbe)=>{"use strict";var YP=Ai(),Sbe=aa(),Ebe=_i(),Abt=Yy().DESELECTDIM,Mbt=_p(),Sbt=yh().resizeText,Ebt=Mbt.styleTextPoints;function kbt(e,t,r){var i=r||YP.select(e).selectAll("g.waterfalllayer").selectAll("g.trace");Sbt(e,i,"waterfall"),i.style("opacity",function(n){return n[0].trace.opacity}),i.each(function(n){var a=YP.select(this),o=n[0].trace;a.selectAll(".point > path").each(function(s){if(!s.isBlank){var l=o[s.dir].marker;YP.select(this).call(Ebe.fill,l.color).call(Ebe.stroke,l.line.color).call(Sbe.dashLine,l.line.dash,l.line.width).style("opacity",o.selectedpoints&&!s.selected?Abt:1)}}),Ebt(a,o,e),a.selectAll(".lines").each(function(){var s=o.connector.line;Sbe.lineGroupStyle(YP.select(this).selectAll("path"),s.width,s.color,s.dash)})})}kbe.exports={style:kbt}});var Ibe=ne((Qsr,Dbe)=>{"use strict";var Cbt=Xi().hoverLabelText,Lbe=_i().opacity,Lbt=hw().hoverOnBars,Pbe=Pw(),Rbe={increasing:Pbe.INCREASING.SYMBOL,decreasing:Pbe.DECREASING.SYMBOL};Dbe.exports=function(t,r,i,n,a){var o=Lbt(t,r,i,n,a);if(!o)return;var s=o.cd,l=s[0].trace,u=l.orientation==="h",f=u?"x":"y",c=u?t.xa:t.ya;function h(x){return Cbt(c,x,l[f+"hoverformat"])}var v=o.index,d=s[v],_=d.isSum?d.b+d.s:d.rawS;o.initial=d.b+d.s-_,o.delta=_,o.final=o.initial+o.delta;var T=h(Math.abs(o.delta));o.deltaLabel=_<0?"("+T+")":T,o.finalLabel=h(o.final),o.initialLabel=h(o.initial);var p=d.hi||l.hoverinfo,M=[];if(p&&p!=="none"&&p!=="skip"){var b=p==="all",w=p.split("+"),k=function(x){return b||w.indexOf(x)!==-1};d.isSum||(k("final")&&(u?!k("x"):!k("y"))&&M.push(o.finalLabel),k("delta")&&(_<0?M.push(o.deltaLabel+" "+Rbe.decreasing):M.push(o.deltaLabel+" "+Rbe.increasing)),k("initial")&&M.push("Initial: "+o.initialLabel))}return M.length&&(o.extraText=M.join("<br>")),o.color=Pbt(l,d),[o]};function Pbt(e,t){var r=e[t.dir].marker,i=r.color,n=r.line.color,a=r.line.width;if(Lbe(i))return i;if(Lbe(n)&&a)return n}});var qbe=ne(($sr,Fbe)=>{"use strict";Fbe.exports=function(t,r){return t.x="xVal"in r?r.xVal:r.x,t.y="yVal"in r?r.yVal:r.y,"initial"in r&&(t.initial=r.initial),"delta"in r&&(t.delta=r.delta),"final"in r&&(t.final=r.final),r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),t}});var Obe=ne((elr,zbe)=>{"use strict";zbe.exports={attributes:j9(),layoutAttributes:K9(),supplyDefaults:Q9().supplyDefaults,crossTraceDefaults:Q9().crossTraceDefaults,supplyLayoutDefaults:vbe(),calc:xbe(),crossTraceCalc:wbe(),plot:Mbe(),style:Cbe().style,hoverPoints:Ibe(),eventData:qbe(),selectPoints:vw(),moduleType:"trace",name:"waterfall",basePlotModule:vu(),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}});var Nbe=ne((tlr,Bbe)=>{"use strict";Bbe.exports=Obe()});var Dw=ne((rlr,Ube)=>{"use strict";Ube.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(e){return e.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(e){return e.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(e){return e.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(e){var t=e.slice(0,3);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(e){var t=e.slice(0,4);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["\xB0","%","%",""]}}}});var tU=ne((nlr,Hbe)=>{"use strict";var Rbt=es(),Dbt=Ba().hovertemplateAttrs,Vbe=oa().extendFlat,Ibt=Dw().colormodel,yS=["rgb","rgba","rgba256","hsl","hsla"],Fbt=[],qbt=[];for(Iw=0;Iw<yS.length;Iw++)gS=Ibt[yS[Iw]],Fbt.push("For the `"+yS[Iw]+"` colormodel, it is ["+(gS.zminDflt||gS.min).join(", ")+"]."),qbt.push("For the `"+yS[Iw]+"` colormodel, it is ["+(gS.zmaxDflt||gS.max).join(", ")+"].");var gS,Iw;Hbe.exports=Vbe({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:yS,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:Vbe({},Rbt.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:Dbt({},{keys:["z","color","colormodel"]}),transforms:void 0})});var Wbe=ne((ilr,Ybe)=>{"use strict";var zbt=Wt(),Obt=tU(),Gbe=Dw(),Bbt=Wg().IMAGE_URL_PREFIX;Ybe.exports=function(t,r){function i(o,s){return zbt.coerce(t,r,Obt,o,s)}i("source"),r.source&&!r.source.match(Bbt)&&delete r.source,r._hasSource=!!r.source;var n=i("z");if(r._hasZ=!(n===void 0||!n.length||!n[0]||!n[0].length),!r._hasZ&&!r._hasSource){r.visible=!1;return}i("x0"),i("y0"),i("dx"),i("dy");var a;r._hasZ?(i("colormodel","rgb"),a=Gbe.colormodel[r.colormodel],i("zmin",a.zminDflt||a.min),i("zmax",a.zmaxDflt||a.max)):r._hasSource&&(r.colormodel="rgba256",a=Gbe.colormodel[r.colormodel],r.zmin=a.zminDflt,r.zmax=a.zmaxDflt),i("zsmooth"),i("text"),i("hovertext"),i("hovertemplate"),r._length=null}});var iy=ne((alr,rU)=>{typeof Object.create=="function"?rU.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:rU.exports=function(t,r){if(r){t.super_=r;var i=function(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}}});var nU=ne((olr,Xbe)=>{Xbe.exports=ox().EventEmitter});var Kbe=ne(WP=>{"use strict";WP.byteLength=Ubt;WP.toByteArray=Hbt;WP.fromByteArray=Wbt;var rg=[],Sp=[],Nbt=typeof Uint8Array!="undefined"?Uint8Array:Array,iU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Qx=0,Zbe=iU.length;Qx<Zbe;++Qx)rg[Qx]=iU[Qx],Sp[iU.charCodeAt(Qx)]=Qx;var Qx,Zbe;Sp[45]=62;Sp[95]=63;function jbe(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var i=r===t?0:4-r%4;return[r,i]}function Ubt(e){var t=jbe(e),r=t[0],i=t[1];return(r+i)*3/4-i}function Vbt(e,t,r){return(t+r)*3/4-r}function Hbt(e){var t,r=jbe(e),i=r[0],n=r[1],a=new Nbt(Vbt(e,i,n)),o=0,s=n>0?i-4:i,l;for(l=0;l<s;l+=4)t=Sp[e.charCodeAt(l)]<<18|Sp[e.charCodeAt(l+1)]<<12|Sp[e.charCodeAt(l+2)]<<6|Sp[e.charCodeAt(l+3)],a[o++]=t>>16&255,a[o++]=t>>8&255,a[o++]=t&255;return n===2&&(t=Sp[e.charCodeAt(l)]<<2|Sp[e.charCodeAt(l+1)]>>4,a[o++]=t&255),n===1&&(t=Sp[e.charCodeAt(l)]<<10|Sp[e.charCodeAt(l+1)]<<4|Sp[e.charCodeAt(l+2)]>>2,a[o++]=t>>8&255,a[o++]=t&255),a}function Gbt(e){return rg[e>>18&63]+rg[e>>12&63]+rg[e>>6&63]+rg[e&63]}function Ybt(e,t,r){for(var i,n=[],a=t;a<r;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),n.push(Gbt(i));return n.join("")}function Wbt(e){for(var t,r=e.length,i=r%3,n=[],a=16383,o=0,s=r-i;o<s;o+=a)n.push(Ybt(e,o,o+a>s?s:o+a));return i===1?(t=e[r-1],n.push(rg[t>>2]+rg[t<<4&63]+"==")):i===2&&(t=(e[r-2]<<8)+e[r-1],n.push(rg[t>>10]+rg[t>>4&63]+rg[t<<2&63]+"=")),n.join("")}});var Jbe=ne(aU=>{aU.read=function(e,t,r,i,n){var a,o,s=n*8-i-1,l=(1<<s)-1,u=l>>1,f=-7,c=r?n-1:0,h=r?-1:1,v=e[t+c];for(c+=h,a=v&(1<<-f)-1,v>>=-f,f+=s;f>0;a=a*256+e[t+c],c+=h,f-=8);for(o=a&(1<<-f)-1,a>>=-f,f+=i;f>0;o=o*256+e[t+c],c+=h,f-=8);if(a===0)a=1-u;else{if(a===l)return o?NaN:(v?-1:1)*(1/0);o=o+Math.pow(2,i),a=a-u}return(v?-1:1)*o*Math.pow(2,a-i)};aU.write=function(e,t,r,i,n,a){var o,s,l,u=a*8-n-1,f=(1<<u)-1,c=f>>1,h=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=i?0:a-1,d=i?1:-1,_=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=f):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+c>=1?t+=h/l:t+=h*Math.pow(2,1-c),t*l>=2&&(o++,l/=2),o+c>=f?(s=0,o=f):o+c>=1?(s=(t*l-1)*Math.pow(2,n),o=o+c):(s=t*Math.pow(2,c-1)*Math.pow(2,n),o=0));n>=8;e[r+v]=s&255,v+=d,s/=256,n-=8);for(o=o<<n|s,u+=n;u>0;e[r+v]=o&255,v+=d,o/=256,u-=8);e[r+v-d]|=_*128}});var e_=ne(Ow=>{"use strict";var oU=Kbe(),qw=Jbe(),Qbe=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Ow.Buffer=Fn;Ow.SlowBuffer=Qbt;Ow.INSPECT_MAX_BYTES=50;var XP=2147483647;Ow.kMaxLength=XP;Fn.TYPED_ARRAY_SUPPORT=Xbt();!Fn.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Xbt(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch(e){return!1}}Object.defineProperty(Fn.prototype,"parent",{enumerable:!0,get:function(){if(Fn.isBuffer(this))return this.buffer}});Object.defineProperty(Fn.prototype,"offset",{enumerable:!0,get:function(){if(Fn.isBuffer(this))return this.byteOffset}});function ay(e){if(e>XP)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,Fn.prototype),t}function Fn(e,t,r){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return fU(e)}return r2e(e,t,r)}Fn.poolSize=8192;function r2e(e,t,r){if(typeof e=="string")return jbt(e,t);if(ArrayBuffer.isView(e))return Kbt(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ng(e,ArrayBuffer)||e&&ng(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(ng(e,SharedArrayBuffer)||e&&ng(e.buffer,SharedArrayBuffer)))return lU(e,t,r);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let i=e.valueOf&&e.valueOf();if(i!=null&&i!==e)return Fn.from(i,t,r);let n=Jbt(e);if(n)return n;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return Fn.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}Fn.from=function(e,t,r){return r2e(e,t,r)};Object.setPrototypeOf(Fn.prototype,Uint8Array.prototype);Object.setPrototypeOf(Fn,Uint8Array);function n2e(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function Zbt(e,t,r){return n2e(e),e<=0?ay(e):t!==void 0?typeof r=="string"?ay(e).fill(t,r):ay(e).fill(t):ay(e)}Fn.alloc=function(e,t,r){return Zbt(e,t,r)};function fU(e){return n2e(e),ay(e<0?0:cU(e)|0)}Fn.allocUnsafe=function(e){return fU(e)};Fn.allocUnsafeSlow=function(e){return fU(e)};function jbt(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!Fn.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let r=i2e(e,t)|0,i=ay(r),n=i.write(e,t);return n!==r&&(i=i.slice(0,n)),i}function sU(e){let t=e.length<0?0:cU(e.length)|0,r=ay(t);for(let i=0;i<t;i+=1)r[i]=e[i]&255;return r}function Kbt(e){if(ng(e,Uint8Array)){let t=new Uint8Array(e);return lU(t.buffer,t.byteOffset,t.byteLength)}return sU(e)}function lU(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let i;return t===void 0&&r===void 0?i=new Uint8Array(e):r===void 0?i=new Uint8Array(e,t):i=new Uint8Array(e,t,r),Object.setPrototypeOf(i,Fn.prototype),i}function Jbt(e){if(Fn.isBuffer(e)){let t=cU(e.length)|0,r=ay(t);return r.length===0||e.copy(r,0,0,t),r}if(e.length!==void 0)return typeof e.length!="number"||vU(e.length)?ay(0):sU(e);if(e.type==="Buffer"&&Array.isArray(e.data))return sU(e.data)}function cU(e){if(e>=XP)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+XP.toString(16)+" bytes");return e|0}function Qbt(e){return+e!=e&&(e=0),Fn.alloc(+e)}Fn.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==Fn.prototype};Fn.compare=function(t,r){if(ng(t,Uint8Array)&&(t=Fn.from(t,t.offset,t.byteLength)),ng(r,Uint8Array)&&(r=Fn.from(r,r.offset,r.byteLength)),!Fn.isBuffer(t)||!Fn.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===r)return 0;let i=t.length,n=r.length;for(let a=0,o=Math.min(i,n);a<o;++a)if(t[a]!==r[a]){i=t[a],n=r[a];break}return i<n?-1:n<i?1:0};Fn.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Fn.concat=function(t,r){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return Fn.alloc(0);let i;if(r===void 0)for(r=0,i=0;i<t.length;++i)r+=t[i].length;let n=Fn.allocUnsafe(r),a=0;for(i=0;i<t.length;++i){let o=t[i];if(ng(o,Uint8Array))a+o.length>n.length?(Fn.isBuffer(o)||(o=Fn.from(o)),o.copy(n,a)):Uint8Array.prototype.set.call(n,o,a);else if(Fn.isBuffer(o))o.copy(n,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=o.length}return n};function i2e(e,t){if(Fn.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ng(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,i=arguments.length>2&&arguments[2]===!0;if(!i&&r===0)return 0;let n=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return uU(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return v2e(e).length;default:if(n)return i?-1:uU(e).length;t=(""+t).toLowerCase(),n=!0}}Fn.byteLength=i2e;function $bt(e,t,r){let i=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,t>>>=0,r<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return u2t(this,t,r);case"utf8":case"utf-8":return o2e(this,t,r);case"ascii":return s2t(this,t,r);case"latin1":case"binary":return l2t(this,t,r);case"base64":return a2t(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f2t(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}Fn.prototype._isBuffer=!0;function $x(e,t,r){let i=e[t];e[t]=e[r],e[r]=i}Fn.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<t;r+=2)$x(this,r,r+1);return this};Fn.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<t;r+=4)$x(this,r,r+3),$x(this,r+1,r+2);return this};Fn.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<t;r+=8)$x(this,r,r+7),$x(this,r+1,r+6),$x(this,r+2,r+5),$x(this,r+3,r+4);return this};Fn.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?o2e(this,0,t):$bt.apply(this,arguments)};Fn.prototype.toLocaleString=Fn.prototype.toString;Fn.prototype.equals=function(t){if(!Fn.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:Fn.compare(this,t)===0};Fn.prototype.inspect=function(){let t="",r=Ow.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"};Qbe&&(Fn.prototype[Qbe]=Fn.prototype.inspect);Fn.prototype.compare=function(t,r,i,n,a){if(ng(t,Uint8Array)&&(t=Fn.from(t,t.offset,t.byteLength)),!Fn.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(r===void 0&&(r=0),i===void 0&&(i=t?t.length:0),n===void 0&&(n=0),a===void 0&&(a=this.length),r<0||i>t.length||n<0||a>this.length)throw new RangeError("out of range index");if(n>=a&&r>=i)return 0;if(n>=a)return-1;if(r>=i)return 1;if(r>>>=0,i>>>=0,n>>>=0,a>>>=0,this===t)return 0;let o=a-n,s=i-r,l=Math.min(o,s),u=this.slice(n,a),f=t.slice(r,i);for(let c=0;c<l;++c)if(u[c]!==f[c]){o=u[c],s=f[c];break}return o<s?-1:s<o?1:0};function a2e(e,t,r,i,n){if(e.length===0)return-1;if(typeof r=="string"?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,vU(r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0)if(n)r=0;else return-1;if(typeof t=="string"&&(t=Fn.from(t,i)),Fn.isBuffer(t))return t.length===0?-1:$be(e,t,r,i,n);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):$be(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function $be(e,t,r,i,n){let a=1,o=e.length,s=t.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(e.length<2||t.length<2)return-1;a=2,o/=2,s/=2,r/=2}function l(f,c){return a===1?f[c]:f.readUInt16BE(c*a)}let u;if(n){let f=-1;for(u=r;u<o;u++)if(l(e,u)===l(t,f===-1?0:u-f)){if(f===-1&&(f=u),u-f+1===s)return f*a}else f!==-1&&(u-=u-f),f=-1}else for(r+s>o&&(r=o-s),u=r;u>=0;u--){let f=!0;for(let c=0;c<s;c++)if(l(e,u+c)!==l(t,c)){f=!1;break}if(f)return u}return-1}Fn.prototype.includes=function(t,r,i){return this.indexOf(t,r,i)!==-1};Fn.prototype.indexOf=function(t,r,i){return a2e(this,t,r,i,!0)};Fn.prototype.lastIndexOf=function(t,r,i){return a2e(this,t,r,i,!1)};function e2t(e,t,r,i){r=Number(r)||0;let n=e.length-r;i?(i=Number(i),i>n&&(i=n)):i=n;let a=t.length;i>a/2&&(i=a/2);let o;for(o=0;o<i;++o){let s=parseInt(t.substr(o*2,2),16);if(vU(s))return o;e[r+o]=s}return o}function t2t(e,t,r,i){return ZP(uU(t,e.length-r),e,r,i)}function r2t(e,t,r,i){return ZP(d2t(t),e,r,i)}function n2t(e,t,r,i){return ZP(v2e(t),e,r,i)}function i2t(e,t,r,i){return ZP(p2t(t,e.length-r),e,r,i)}Fn.prototype.write=function(t,r,i,n){if(r===void 0)n="utf8",i=this.length,r=0;else if(i===void 0&&typeof r=="string")n=r,i=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(i)?(i=i>>>0,n===void 0&&(n="utf8")):(n=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let a=this.length-r;if((i===void 0||i>a)&&(i=a),t.length>0&&(i<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return e2t(this,t,r,i);case"utf8":case"utf-8":return t2t(this,t,r,i);case"ascii":case"latin1":case"binary":return r2t(this,t,r,i);case"base64":return n2t(this,t,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i2t(this,t,r,i);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}};Fn.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function a2t(e,t,r){return t===0&&r===e.length?oU.fromByteArray(e):oU.fromByteArray(e.slice(t,r))}function o2e(e,t,r){r=Math.min(e.length,r);let i=[],n=t;for(;n<r;){let a=e[n],o=null,s=a>239?4:a>223?3:a>191?2:1;if(n+s<=r){let l,u,f,c;switch(s){case 1:a<128&&(o=a);break;case 2:l=e[n+1],(l&192)===128&&(c=(a&31)<<6|l&63,c>127&&(o=c));break;case 3:l=e[n+1],u=e[n+2],(l&192)===128&&(u&192)===128&&(c=(a&15)<<12|(l&63)<<6|u&63,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:l=e[n+1],u=e[n+2],f=e[n+3],(l&192)===128&&(u&192)===128&&(f&192)===128&&(c=(a&15)<<18|(l&63)<<12|(u&63)<<6|f&63,c>65535&&c<1114112&&(o=c))}}o===null?(o=65533,s=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|o&1023),i.push(o),n+=s}return o2t(i)}var e2e=4096;function o2t(e){let t=e.length;if(t<=e2e)return String.fromCharCode.apply(String,e);let r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=e2e));return r}function s2t(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(e[n]&127);return i}function l2t(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function u2t(e,t,r){let i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);let n="";for(let a=t;a<r;++a)n+=g2t[e[a]];return n}function f2t(e,t,r){let i=e.slice(t,r),n="";for(let a=0;a<i.length-1;a+=2)n+=String.fromCharCode(i[a]+i[a+1]*256);return n}Fn.prototype.slice=function(t,r){let i=this.length;t=~~t,r=r===void 0?i:~~r,t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),r<0?(r+=i,r<0&&(r=0)):r>i&&(r=i),r<t&&(r=t);let n=this.subarray(t,r);return Object.setPrototypeOf(n,Fn.prototype),n};function Oc(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}Fn.prototype.readUintLE=Fn.prototype.readUIntLE=function(t,r,i){t=t>>>0,r=r>>>0,i||Oc(t,r,this.length);let n=this[t],a=1,o=0;for(;++o<r&&(a*=256);)n+=this[t+o]*a;return n};Fn.prototype.readUintBE=Fn.prototype.readUIntBE=function(t,r,i){t=t>>>0,r=r>>>0,i||Oc(t,r,this.length);let n=this[t+--r],a=1;for(;r>0&&(a*=256);)n+=this[t+--r]*a;return n};Fn.prototype.readUint8=Fn.prototype.readUInt8=function(t,r){return t=t>>>0,r||Oc(t,1,this.length),this[t]};Fn.prototype.readUint16LE=Fn.prototype.readUInt16LE=function(t,r){return t=t>>>0,r||Oc(t,2,this.length),this[t]|this[t+1]<<8};Fn.prototype.readUint16BE=Fn.prototype.readUInt16BE=function(t,r){return t=t>>>0,r||Oc(t,2,this.length),this[t]<<8|this[t+1]};Fn.prototype.readUint32LE=Fn.prototype.readUInt32LE=function(t,r){return t=t>>>0,r||Oc(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};Fn.prototype.readUint32BE=Fn.prototype.readUInt32BE=function(t,r){return t=t>>>0,r||Oc(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};Fn.prototype.readBigUInt64LE=zm(function(t){t=t>>>0,zw(t,"offset");let r=this[t],i=this[t+7];(r===void 0||i===void 0)&&mS(t,this.length-8);let n=r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,a=this[++t]+this[++t]*2**8+this[++t]*2**16+i*2**24;return BigInt(n)+(BigInt(a)<<BigInt(32))});Fn.prototype.readBigUInt64BE=zm(function(t){t=t>>>0,zw(t,"offset");let r=this[t],i=this[t+7];(r===void 0||i===void 0)&&mS(t,this.length-8);let n=r*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],a=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+i;return(BigInt(n)<<BigInt(32))+BigInt(a)});Fn.prototype.readIntLE=function(t,r,i){t=t>>>0,r=r>>>0,i||Oc(t,r,this.length);let n=this[t],a=1,o=0;for(;++o<r&&(a*=256);)n+=this[t+o]*a;return a*=128,n>=a&&(n-=Math.pow(2,8*r)),n};Fn.prototype.readIntBE=function(t,r,i){t=t>>>0,r=r>>>0,i||Oc(t,r,this.length);let n=r,a=1,o=this[t+--n];for(;n>0&&(a*=256);)o+=this[t+--n]*a;return a*=128,o>=a&&(o-=Math.pow(2,8*r)),o};Fn.prototype.readInt8=function(t,r){return t=t>>>0,r||Oc(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};Fn.prototype.readInt16LE=function(t,r){t=t>>>0,r||Oc(t,2,this.length);let i=this[t]|this[t+1]<<8;return i&32768?i|4294901760:i};Fn.prototype.readInt16BE=function(t,r){t=t>>>0,r||Oc(t,2,this.length);let i=this[t+1]|this[t]<<8;return i&32768?i|4294901760:i};Fn.prototype.readInt32LE=function(t,r){return t=t>>>0,r||Oc(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};Fn.prototype.readInt32BE=function(t,r){return t=t>>>0,r||Oc(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};Fn.prototype.readBigInt64LE=zm(function(t){t=t>>>0,zw(t,"offset");let r=this[t],i=this[t+7];(r===void 0||i===void 0)&&mS(t,this.length-8);let n=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(i<<24);return(BigInt(n)<<BigInt(32))+BigInt(r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});Fn.prototype.readBigInt64BE=zm(function(t){t=t>>>0,zw(t,"offset");let r=this[t],i=this[t+7];(r===void 0||i===void 0)&&mS(t,this.length-8);let n=(r<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+i)});Fn.prototype.readFloatLE=function(t,r){return t=t>>>0,r||Oc(t,4,this.length),qw.read(this,t,!0,23,4)};Fn.prototype.readFloatBE=function(t,r){return t=t>>>0,r||Oc(t,4,this.length),qw.read(this,t,!1,23,4)};Fn.prototype.readDoubleLE=function(t,r){return t=t>>>0,r||Oc(t,8,this.length),qw.read(this,t,!0,52,8)};Fn.prototype.readDoubleBE=function(t,r){return t=t>>>0,r||Oc(t,8,this.length),qw.read(this,t,!1,52,8)};function fd(e,t,r,i,n,a){if(!Fn.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<a)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}Fn.prototype.writeUintLE=Fn.prototype.writeUIntLE=function(t,r,i,n){if(t=+t,r=r>>>0,i=i>>>0,!n){let s=Math.pow(2,8*i)-1;fd(this,t,r,i,s,0)}let a=1,o=0;for(this[r]=t&255;++o<i&&(a*=256);)this[r+o]=t/a&255;return r+i};Fn.prototype.writeUintBE=Fn.prototype.writeUIntBE=function(t,r,i,n){if(t=+t,r=r>>>0,i=i>>>0,!n){let s=Math.pow(2,8*i)-1;fd(this,t,r,i,s,0)}let a=i-1,o=1;for(this[r+a]=t&255;--a>=0&&(o*=256);)this[r+a]=t/o&255;return r+i};Fn.prototype.writeUint8=Fn.prototype.writeUInt8=function(t,r,i){return t=+t,r=r>>>0,i||fd(this,t,r,1,255,0),this[r]=t&255,r+1};Fn.prototype.writeUint16LE=Fn.prototype.writeUInt16LE=function(t,r,i){return t=+t,r=r>>>0,i||fd(this,t,r,2,65535,0),this[r]=t&255,this[r+1]=t>>>8,r+2};Fn.prototype.writeUint16BE=Fn.prototype.writeUInt16BE=function(t,r,i){return t=+t,r=r>>>0,i||fd(this,t,r,2,65535,0),this[r]=t>>>8,this[r+1]=t&255,r+2};Fn.prototype.writeUint32LE=Fn.prototype.writeUInt32LE=function(t,r,i){return t=+t,r=r>>>0,i||fd(this,t,r,4,4294967295,0),this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=t&255,r+4};Fn.prototype.writeUint32BE=Fn.prototype.writeUInt32BE=function(t,r,i){return t=+t,r=r>>>0,i||fd(this,t,r,4,4294967295,0),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};function s2e(e,t,r,i,n){h2e(t,i,n,e,r,7);let a=Number(t&BigInt(4294967295));e[r++]=a,a=a>>8,e[r++]=a,a=a>>8,e[r++]=a,a=a>>8,e[r++]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,o=o>>8,e[r++]=o,o=o>>8,e[r++]=o,o=o>>8,e[r++]=o,r}function l2e(e,t,r,i,n){h2e(t,i,n,e,r,7);let a=Number(t&BigInt(4294967295));e[r+7]=a,a=a>>8,e[r+6]=a,a=a>>8,e[r+5]=a,a=a>>8,e[r+4]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,o=o>>8,e[r+2]=o,o=o>>8,e[r+1]=o,o=o>>8,e[r]=o,r+8}Fn.prototype.writeBigUInt64LE=zm(function(t,r=0){return s2e(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))});Fn.prototype.writeBigUInt64BE=zm(function(t,r=0){return l2e(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))});Fn.prototype.writeIntLE=function(t,r,i,n){if(t=+t,r=r>>>0,!n){let l=Math.pow(2,8*i-1);fd(this,t,r,i,l-1,-l)}let a=0,o=1,s=0;for(this[r]=t&255;++a<i&&(o*=256);)t<0&&s===0&&this[r+a-1]!==0&&(s=1),this[r+a]=(t/o>>0)-s&255;return r+i};Fn.prototype.writeIntBE=function(t,r,i,n){if(t=+t,r=r>>>0,!n){let l=Math.pow(2,8*i-1);fd(this,t,r,i,l-1,-l)}let a=i-1,o=1,s=0;for(this[r+a]=t&255;--a>=0&&(o*=256);)t<0&&s===0&&this[r+a+1]!==0&&(s=1),this[r+a]=(t/o>>0)-s&255;return r+i};Fn.prototype.writeInt8=function(t,r,i){return t=+t,r=r>>>0,i||fd(this,t,r,1,127,-128),t<0&&(t=255+t+1),this[r]=t&255,r+1};Fn.prototype.writeInt16LE=function(t,r,i){return t=+t,r=r>>>0,i||fd(this,t,r,2,32767,-32768),this[r]=t&255,this[r+1]=t>>>8,r+2};Fn.prototype.writeInt16BE=function(t,r,i){return t=+t,r=r>>>0,i||fd(this,t,r,2,32767,-32768),this[r]=t>>>8,this[r+1]=t&255,r+2};Fn.prototype.writeInt32LE=function(t,r,i){return t=+t,r=r>>>0,i||fd(this,t,r,4,2147483647,-2147483648),this[r]=t&255,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24,r+4};Fn.prototype.writeInt32BE=function(t,r,i){return t=+t,r=r>>>0,i||fd(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};Fn.prototype.writeBigInt64LE=zm(function(t,r=0){return s2e(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});Fn.prototype.writeBigInt64BE=zm(function(t,r=0){return l2e(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function u2e(e,t,r,i,n,a){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function f2e(e,t,r,i,n){return t=+t,r=r>>>0,n||u2e(e,t,r,4,34028234663852886e22,-34028234663852886e22),qw.write(e,t,r,i,23,4),r+4}Fn.prototype.writeFloatLE=function(t,r,i){return f2e(this,t,r,!0,i)};Fn.prototype.writeFloatBE=function(t,r,i){return f2e(this,t,r,!1,i)};function c2e(e,t,r,i,n){return t=+t,r=r>>>0,n||u2e(e,t,r,8,17976931348623157e292,-17976931348623157e292),qw.write(e,t,r,i,52,8),r+8}Fn.prototype.writeDoubleLE=function(t,r,i){return c2e(this,t,r,!0,i)};Fn.prototype.writeDoubleBE=function(t,r,i){return c2e(this,t,r,!1,i)};Fn.prototype.copy=function(t,r,i,n){if(!Fn.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),!n&&n!==0&&(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<i&&(n=i),n===i||t.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-i&&(n=t.length-r+i);let a=n-i;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,i,n):Uint8Array.prototype.set.call(t,this.subarray(i,n),r),a};Fn.prototype.fill=function(t,r,i,n){if(typeof t=="string"){if(typeof r=="string"?(n=r,r=0,i=this.length):typeof i=="string"&&(n=i,i=this.length),n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!Fn.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(t.length===1){let o=t.charCodeAt(0);(n==="utf8"&&o<128||n==="latin1")&&(t=o)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(r<0||this.length<r||this.length<i)throw new RangeError("Out of range index");if(i<=r)return this;r=r>>>0,i=i===void 0?this.length:i>>>0,t||(t=0);let a;if(typeof t=="number")for(a=r;a<i;++a)this[a]=t;else{let o=Fn.isBuffer(t)?t:Fn.from(t,n),s=o.length;if(s===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(a=0;a<i-r;++a)this[a+r]=o[a%s]}return this};var Fw={};function hU(e,t,r){Fw[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(n){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:n,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}hU("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);hU("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError);hU("ERR_OUT_OF_RANGE",function(e,t,r){let i=`The value of "${e}" is out of range.`,n=r;return Number.isInteger(r)&&Math.abs(r)>2**32?n=t2e(String(r)):typeof r=="bigint"&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=t2e(n)),n+="n"),i+=` It must be ${t}. Received ${n}`,i},RangeError);function t2e(e){let t="",r=e.length,i=e[0]==="-"?1:0;for(;r>=i+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function c2t(e,t,r){zw(t,"offset"),(e[t]===void 0||e[t+r]===void 0)&&mS(t,e.length-(r+1))}function h2e(e,t,r,i,n,a){if(e>r||e<t){let o=typeof t=="bigint"?"n":"",s;throw a>3?t===0||t===BigInt(0)?s=`>= 0${o} and < 2${o} ** ${(a+1)*8}${o}`:s=`>= -(2${o} ** ${(a+1)*8-1}${o}) and < 2 ** ${(a+1)*8-1}${o}`:s=`>= ${t}${o} and <= ${r}${o}`,new Fw.ERR_OUT_OF_RANGE("value",s,e)}c2t(i,n,a)}function zw(e,t){if(typeof e!="number")throw new Fw.ERR_INVALID_ARG_TYPE(t,"number",e)}function mS(e,t,r){throw Math.floor(e)!==e?(zw(e,r),new Fw.ERR_OUT_OF_RANGE(r||"offset","an integer",e)):t<0?new Fw.ERR_BUFFER_OUT_OF_BOUNDS:new Fw.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}var h2t=/[^+/0-9A-Za-z-_]/g;function v2t(e){if(e=e.split("=")[0],e=e.trim().replace(h2t,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function uU(e,t){t=t||1/0;let r,i=e.length,n=null,a=[];for(let o=0;o<i;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}else if(o+1===i){(t-=3)>-1&&a.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(t-=3)>-1&&a.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return a}function d2t(e){let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r)&255);return t}function p2t(e,t){let r,i,n,a=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),i=r>>8,n=r%256,a.push(n),a.push(i);return a}function v2e(e){return oU.toByteArray(v2t(e))}function ZP(e,t,r,i){let n;for(n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}function ng(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function vU(e){return e!==e}var g2t=function(){let e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){let i=r*16;for(let n=0;n<16;++n)t[i+n]=e[r]+e[n]}return t}();function zm(e){return typeof BigInt=="undefined"?y2t:e}function y2t(){throw new Error("BigInt not supported")}});var jP=ne((clr,d2e)=>{"use strict";d2e.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),i=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var n=42;t[r]=n;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var a=Object.getOwnPropertySymbols(t);if(a.length!==1||a[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(t,r);if(o.value!==n||o.enumerable!==!0)return!1}return!0}});var xS=ne((hlr,p2e)=>{"use strict";var m2t=jP();p2e.exports=function(){return m2t()&&!!Symbol.toStringTag}});var m2e=ne((vlr,y2e)=>{"use strict";var g2e=typeof Symbol!="undefined"&&Symbol,x2t=jP();y2e.exports=function(){return typeof g2e!="function"||typeof Symbol!="function"||typeof g2e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:x2t()}});var b2e=ne((dlr,_2e)=>{"use strict";var x2e={foo:{}},_2t=Object;_2e.exports=function(){return{__proto__:x2e}.foo===x2e.foo&&!({__proto__:null}instanceof _2t)}});var A2e=ne((plr,T2e)=>{"use strict";var b2t="Function.prototype.bind called on incompatible ",w2t=Object.prototype.toString,T2t=Math.max,A2t="[object Function]",w2e=function(t,r){for(var i=[],n=0;n<t.length;n+=1)i[n]=t[n];for(var a=0;a<r.length;a+=1)i[a+t.length]=r[a];return i},M2t=function(t,r){for(var i=[],n=r||0,a=0;n<t.length;n+=1,a+=1)i[a]=t[n];return i},S2t=function(e,t){for(var r="",i=0;i<e.length;i+=1)r+=e[i],i+1<e.length&&(r+=t);return r};T2e.exports=function(t){var r=this;if(typeof r!="function"||w2t.apply(r)!==A2t)throw new TypeError(b2t+r);for(var i=M2t(arguments,1),n,a=function(){if(this instanceof n){var f=r.apply(this,w2e(i,arguments));return Object(f)===f?f:this}return r.apply(t,w2e(i,arguments))},o=T2t(0,r.length-i.length),s=[],l=0;l<o;l++)s[l]="$"+l;if(n=Function("binder","return function ("+S2t(s,",")+"){ return binder.apply(this,arguments); }")(a),r.prototype){var u=function(){};u.prototype=r.prototype,n.prototype=new u,u.prototype=null}return n}});var KP=ne((glr,M2e)=>{"use strict";var E2t=A2e();M2e.exports=Function.prototype.bind||E2t});var E2e=ne((ylr,S2e)=>{"use strict";var k2t=Function.prototype.call,C2t=Object.prototype.hasOwnProperty,L2t=KP();S2e.exports=L2t.call(k2t,C2t)});var n_=ne((mlr,R2e)=>{"use strict";var us,Vw=SyntaxError,P2e=Function,Uw=TypeError,dU=function(e){try{return P2e('"use strict"; return ('+e+").constructor;")()}catch(t){}},t_=Object.getOwnPropertyDescriptor;if(t_)try{t_({},"")}catch(e){t_=null}var pU=function(){throw new Uw},P2t=t_?function(){try{return arguments.callee,pU}catch(e){try{return t_(arguments,"callee").get}catch(t){return pU}}}():pU,Bw=m2e()(),R2t=b2e()(),Bc=Object.getPrototypeOf||(R2t?function(e){return e.__proto__}:null),Nw={},D2t=typeof Uint8Array=="undefined"||!Bc?us:Bc(Uint8Array),r_={"%AggregateError%":typeof AggregateError=="undefined"?us:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?us:ArrayBuffer,"%ArrayIteratorPrototype%":Bw&&Bc?Bc([][Symbol.iterator]()):us,"%AsyncFromSyncIteratorPrototype%":us,"%AsyncFunction%":Nw,"%AsyncGenerator%":Nw,"%AsyncGeneratorFunction%":Nw,"%AsyncIteratorPrototype%":Nw,"%Atomics%":typeof Atomics=="undefined"?us:Atomics,"%BigInt%":typeof BigInt=="undefined"?us:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?us:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?us:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?us:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?us:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?us:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?us:FinalizationRegistry,"%Function%":P2e,"%GeneratorFunction%":Nw,"%Int8Array%":typeof Int8Array=="undefined"?us:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?us:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?us:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Bw&&Bc?Bc(Bc([][Symbol.iterator]())):us,"%JSON%":typeof JSON=="object"?JSON:us,"%Map%":typeof Map=="undefined"?us:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!Bw||!Bc?us:Bc(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?us:Promise,"%Proxy%":typeof Proxy=="undefined"?us:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?us:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?us:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!Bw||!Bc?us:Bc(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?us:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Bw&&Bc?Bc(""[Symbol.iterator]()):us,"%Symbol%":Bw?Symbol:us,"%SyntaxError%":Vw,"%ThrowTypeError%":P2t,"%TypedArray%":D2t,"%TypeError%":Uw,"%Uint8Array%":typeof Uint8Array=="undefined"?us:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?us:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?us:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?us:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?us:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?us:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?us:WeakSet};if(Bc)try{null.error}catch(e){k2e=Bc(Bc(e)),r_["%Error.prototype%"]=k2e}var k2e,I2t=function e(t){var r;if(t==="%AsyncFunction%")r=dU("async function () {}");else if(t==="%GeneratorFunction%")r=dU("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=dU("async function* () {}");else if(t==="%AsyncGenerator%"){var i=e("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if(t==="%AsyncIteratorPrototype%"){var n=e("%AsyncGenerator%");n&&Bc&&(r=Bc(n.prototype))}return r_[t]=r,r},C2e={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},_S=KP(),JP=E2e(),F2t=_S.call(Function.call,Array.prototype.concat),q2t=_S.call(Function.apply,Array.prototype.splice),L2e=_S.call(Function.call,String.prototype.replace),QP=_S.call(Function.call,String.prototype.slice),z2t=_S.call(Function.call,RegExp.prototype.exec),O2t=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,B2t=/\\(\\)?/g,N2t=function(t){var r=QP(t,0,1),i=QP(t,-1);if(r==="%"&&i!=="%")throw new Vw("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&r!=="%")throw new Vw("invalid intrinsic syntax, expected opening `%`");var n=[];return L2e(t,O2t,function(a,o,s,l){n[n.length]=s?L2e(l,B2t,"$1"):o||a}),n},U2t=function(t,r){var i=t,n;if(JP(C2e,i)&&(n=C2e[i],i="%"+n[0]+"%"),JP(r_,i)){var a=r_[i];if(a===Nw&&(a=I2t(i)),typeof a=="undefined"&&!r)throw new Uw("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:a}}throw new Vw("intrinsic "+t+" does not exist!")};R2e.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new Uw("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Uw('"allowMissing" argument must be a boolean');if(z2t(/^%?[^%]*%?$/,t)===null)throw new Vw("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=N2t(t),n=i.length>0?i[0]:"",a=U2t("%"+n+"%",r),o=a.name,s=a.value,l=!1,u=a.alias;u&&(n=u[0],q2t(i,F2t([0,1],u)));for(var f=1,c=!0;f<i.length;f+=1){var h=i[f],v=QP(h,0,1),d=QP(h,-1);if((v==='"'||v==="'"||v==="`"||d==='"'||d==="'"||d==="`")&&v!==d)throw new Vw("property names with quotes must have matching quotes");if((h==="constructor"||!c)&&(l=!0),n+="."+h,o="%"+n+"%",JP(r_,o))s=r_[o];else if(s!=null){if(!(h in s)){if(!r)throw new Uw("base intrinsic for "+t+" exists, but the property is not available.");return}if(t_&&f+1>=i.length){var _=t_(s,h);c=!!_,c&&"get"in _&&!("originalValue"in _.get)?s=_.get:s=s[h]}else c=JP(s,h),s=s[h];c&&!l&&(r_[o]=s)}}return s}});var $P=ne((xlr,D2e)=>{"use strict";var V2t=n_(),gU=V2t("%Object.defineProperty%",!0),yU=function(){if(gU)try{return gU({},"a",{value:1}),!0}catch(t){return!1}return!1};yU.hasArrayLengthDefineBug=function(){if(!yU())return null;try{return gU([],"length",{value:1}).length!==1}catch(t){return!0}};D2e.exports=yU});var bS=ne((_lr,I2e)=>{"use strict";var H2t=n_(),e6=H2t("%Object.getOwnPropertyDescriptor%",!0);if(e6)try{e6([],"length")}catch(e){e6=null}I2e.exports=e6});var z2e=ne((blr,q2e)=>{"use strict";var G2t=$P()(),mU=n_(),wS=G2t&&mU("%Object.defineProperty%",!0);if(wS)try{wS({},"a",{value:1})}catch(e){wS=!1}var Y2t=mU("%SyntaxError%"),Hw=mU("%TypeError%"),F2e=bS();q2e.exports=function(t,r,i){if(!t||typeof t!="object"&&typeof t!="function")throw new Hw("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Hw("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Hw("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Hw("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Hw("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Hw("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,a=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,s=arguments.length>6?arguments[6]:!1,l=!!F2e&&F2e(t,r);if(wS)wS(t,r,{configurable:o===null&&l?l.configurable:!o,enumerable:n===null&&l?l.enumerable:!n,value:i,writable:a===null&&l?l.writable:!a});else if(s||!n&&!a&&!o)t[r]=i;else throw new Y2t("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var H2e=ne((wlr,V2e)=>{"use strict";var U2e=n_(),O2e=z2e(),W2t=$P()(),B2e=bS(),N2e=U2e("%TypeError%"),X2t=U2e("%Math.floor%");V2e.exports=function(t,r){if(typeof t!="function")throw new N2e("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||X2t(r)!==r)throw new N2e("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],n=!0,a=!0;if("length"in t&&B2e){var o=B2e(t,"length");o&&!o.configurable&&(n=!1),o&&!o.writable&&(a=!1)}return(n||a||!i)&&(W2t?O2e(t,"length",r,!0,!0):O2e(t,"length",r)),t}});var AS=ne((Tlr,t6)=>{"use strict";var xU=KP(),Gw=n_(),Z2t=H2e(),j2t=Gw("%TypeError%"),Y2e=Gw("%Function.prototype.apply%"),W2e=Gw("%Function.prototype.call%"),X2e=Gw("%Reflect.apply%",!0)||xU.call(W2e,Y2e),TS=Gw("%Object.defineProperty%",!0),K2t=Gw("%Math.max%");if(TS)try{TS({},"a",{value:1})}catch(e){TS=null}t6.exports=function(t){if(typeof t!="function")throw new j2t("a function is required");var r=X2e(xU,W2e,arguments);return Z2t(r,1+K2t(0,t.length-(arguments.length-1)),!0)};var G2e=function(){return X2e(xU,Y2e,arguments)};TS?TS(t6.exports,"apply",{value:G2e}):t6.exports.apply=G2e});var Yw=ne((Alr,K2e)=>{"use strict";var Z2e=n_(),j2e=AS(),J2t=j2e(Z2e("String.prototype.indexOf"));K2e.exports=function(t,r){var i=Z2e(t,!!r);return typeof i=="function"&&J2t(t,".prototype.")>-1?j2e(i):i}});var $2e=ne((Mlr,Q2e)=>{"use strict";var Q2t=xS()(),$2t=Yw(),_U=$2t("Object.prototype.toString"),r6=function(t){return Q2t&&t&&typeof t=="object"&&Symbol.toStringTag in t?!1:_U(t)==="[object Arguments]"},J2e=function(t){return r6(t)?!0:t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&_U(t)!=="[object Array]"&&_U(t.callee)==="[object Function]"},ewt=function(){return r6(arguments)}();r6.isLegacyArguments=J2e;Q2e.exports=ewt?r6:J2e});var rwe=ne((Slr,twe)=>{"use strict";var twt=Object.prototype.toString,rwt=Function.prototype.toString,nwt=/^\s*(?:function)?\*/,ewe=xS()(),bU=Object.getPrototypeOf,iwt=function(){if(!ewe)return!1;try{return Function("return function*() {}")()}catch(e){}},wU;twe.exports=function(t){if(typeof t!="function")return!1;if(nwt.test(rwt.call(t)))return!0;if(!ewe){var r=twt.call(t);return r==="[object GeneratorFunction]"}if(!bU)return!1;if(typeof wU=="undefined"){var i=iwt();wU=i?bU(i):!1}return bU(t)===wU}});var owe=ne((Elr,awe)=>{"use strict";var iwe=Function.prototype.toString,Ww=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,AU,n6;if(typeof Ww=="function"&&typeof Object.defineProperty=="function")try{AU=Object.defineProperty({},"length",{get:function(){throw n6}}),n6={},Ww(function(){throw 42},null,AU)}catch(e){e!==n6&&(Ww=null)}else Ww=null;var awt=/^\s*class\b/,MU=function(t){try{var r=iwe.call(t);return awt.test(r)}catch(i){return!1}},TU=function(t){try{return MU(t)?!1:(iwe.call(t),!0)}catch(r){return!1}},i6=Object.prototype.toString,owt="[object Object]",swt="[object Function]",lwt="[object GeneratorFunction]",uwt="[object HTMLAllCollection]",fwt="[object HTML document.all class]",cwt="[object HTMLCollection]",hwt=typeof Symbol=="function"&&!!Symbol.toStringTag,vwt=!(0 in[,]),SU=function(){return!1};typeof document=="object"&&(nwe=document.all,i6.call(nwe)===i6.call(document.all)&&(SU=function(t){if((vwt||!t)&&(typeof t=="undefined"||typeof t=="object"))try{var r=i6.call(t);return(r===uwt||r===fwt||r===cwt||r===owt)&&t("")==null}catch(i){}return!1}));var nwe;awe.exports=Ww?function(t){if(SU(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;try{Ww(t,null,AU)}catch(r){if(r!==n6)return!1}return!MU(t)&&TU(t)}:function(t){if(SU(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;if(hwt)return TU(t);if(MU(t))return!1;var r=i6.call(t);return r!==swt&&r!==lwt&&!/^\[object HTML/.test(r)?!1:TU(t)}});var EU=ne((klr,lwe)=>{"use strict";var dwt=owe(),pwt=Object.prototype.toString,swe=Object.prototype.hasOwnProperty,gwt=function(t,r,i){for(var n=0,a=t.length;n<a;n++)swe.call(t,n)&&(i==null?r(t[n],n,t):r.call(i,t[n],n,t))},ywt=function(t,r,i){for(var n=0,a=t.length;n<a;n++)i==null?r(t.charAt(n),n,t):r.call(i,t.charAt(n),n,t)},mwt=function(t,r,i){for(var n in t)swe.call(t,n)&&(i==null?r(t[n],n,t):r.call(i,t[n],n,t))},xwt=function(t,r,i){if(!dwt(r))throw new TypeError("iterator must be a function");var n;arguments.length>=3&&(n=i),pwt.call(t)==="[object Array]"?gwt(t,r,n):typeof t=="string"?ywt(t,r,n):mwt(t,r,n)};lwe.exports=xwt});var CU=ne((Clr,uwe)=>{"use strict";var kU=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],_wt=typeof globalThis=="undefined"?window:globalThis;uwe.exports=function(){for(var t=[],r=0;r<kU.length;r++)typeof _wt[kU[r]]=="function"&&(t[t.length]=kU[r]);return t}});var dwe=ne((Llr,vwe)=>{"use strict";var o6=EU(),bwt=CU(),fwe=AS(),RU=Yw(),a6=bS(),wwt=RU("Object.prototype.toString"),hwe=xS()(),cwe=typeof globalThis=="undefined"?window:globalThis,PU=bwt(),DU=RU("String.prototype.slice"),LU=Object.getPrototypeOf,Twt=RU("Array.prototype.indexOf",!0)||function(t,r){for(var i=0;i<t.length;i+=1)if(t[i]===r)return i;return-1},s6={__proto__:null};hwe&&a6&&LU?o6(PU,function(e){var t=new cwe[e];if(Symbol.toStringTag in t){var r=LU(t),i=a6(r,Symbol.toStringTag);if(!i){var n=LU(r);i=a6(n,Symbol.toStringTag)}s6["$"+e]=fwe(i.get)}}):o6(PU,function(e){var t=new cwe[e],r=t.slice||t.set;r&&(s6["$"+e]=fwe(r))});var Awt=function(t){var r=!1;return o6(s6,function(i,n){if(!r)try{"$"+i(t)===n&&(r=DU(n,1))}catch(a){}}),r},Mwt=function(t){var r=!1;return o6(s6,function(i,n){if(!r)try{i(t),r=DU(n,1)}catch(a){}}),r};vwe.exports=function(t){if(!t||typeof t!="object")return!1;if(!hwe){var r=DU(wwt(t),8,-1);return Twt(PU,r)>-1?r:r!=="Object"?!1:Mwt(t)}return a6?Awt(t):null}});var _we=ne((Plr,xwe)=>{"use strict";var pwe=EU(),Swt=CU(),FU=Yw(),Ewt=FU("Object.prototype.toString"),gwe=xS()(),l6=bS(),kwt=typeof globalThis=="undefined"?window:globalThis,ywe=Swt(),Cwt=FU("Array.prototype.indexOf",!0)||function(t,r){for(var i=0;i<t.length;i+=1)if(t[i]===r)return i;return-1},Lwt=FU("String.prototype.slice"),mwe={},IU=Object.getPrototypeOf;gwe&&l6&&IU&&pwe(ywe,function(e){var t=new kwt[e];if(Symbol.toStringTag in t){var r=IU(t),i=l6(r,Symbol.toStringTag);if(!i){var n=IU(r);i=l6(n,Symbol.toStringTag)}mwe[e]=i.get}});var Pwt=function(t){var r=!1;return pwe(mwe,function(i,n){if(!r)try{r=i.call(t)===n}catch(a){}}),r};xwe.exports=function(t){if(!t||typeof t!="object")return!1;if(!gwe||!(Symbol.toStringTag in t)){var r=Lwt(Ewt(t),8,-1);return Cwt(ywe,r)>-1}return l6?Pwt(t):!1}});var OU=ne(ts=>{"use strict";var Rwt=$2e(),Dwt=rwe(),_0=dwe(),bwe=_we();function Xw(e){return e.call.bind(e)}var wwe=typeof BigInt!="undefined",Twe=typeof Symbol!="undefined",Ep=Xw(Object.prototype.toString),Iwt=Xw(Number.prototype.valueOf),Fwt=Xw(String.prototype.valueOf),qwt=Xw(Boolean.prototype.valueOf);wwe&&(Awe=Xw(BigInt.prototype.valueOf));var Awe;Twe&&(Mwe=Xw(Symbol.prototype.valueOf));var Mwe;function SS(e,t){if(typeof e!="object")return!1;try{return t(e),!0}catch(r){return!1}}ts.isArgumentsObject=Rwt;ts.isGeneratorFunction=Dwt;ts.isTypedArray=bwe;function zwt(e){return typeof Promise!="undefined"&&e instanceof Promise||e!==null&&typeof e=="object"&&typeof e.then=="function"&&typeof e.catch=="function"}ts.isPromise=zwt;function Owt(e){return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?ArrayBuffer.isView(e):bwe(e)||Ewe(e)}ts.isArrayBufferView=Owt;function Bwt(e){return _0(e)==="Uint8Array"}ts.isUint8Array=Bwt;function Nwt(e){return _0(e)==="Uint8ClampedArray"}ts.isUint8ClampedArray=Nwt;function Uwt(e){return _0(e)==="Uint16Array"}ts.isUint16Array=Uwt;function Vwt(e){return _0(e)==="Uint32Array"}ts.isUint32Array=Vwt;function Hwt(e){return _0(e)==="Int8Array"}ts.isInt8Array=Hwt;function Gwt(e){return _0(e)==="Int16Array"}ts.isInt16Array=Gwt;function Ywt(e){return _0(e)==="Int32Array"}ts.isInt32Array=Ywt;function Wwt(e){return _0(e)==="Float32Array"}ts.isFloat32Array=Wwt;function Xwt(e){return _0(e)==="Float64Array"}ts.isFloat64Array=Xwt;function Zwt(e){return _0(e)==="BigInt64Array"}ts.isBigInt64Array=Zwt;function jwt(e){return _0(e)==="BigUint64Array"}ts.isBigUint64Array=jwt;function u6(e){return Ep(e)==="[object Map]"}u6.working=typeof Map!="undefined"&&u6(new Map);function Kwt(e){return typeof Map=="undefined"?!1:u6.working?u6(e):e instanceof Map}ts.isMap=Kwt;function f6(e){return Ep(e)==="[object Set]"}f6.working=typeof Set!="undefined"&&f6(new Set);function Jwt(e){return typeof Set=="undefined"?!1:f6.working?f6(e):e instanceof Set}ts.isSet=Jwt;function c6(e){return Ep(e)==="[object WeakMap]"}c6.working=typeof WeakMap!="undefined"&&c6(new WeakMap);function Qwt(e){return typeof WeakMap=="undefined"?!1:c6.working?c6(e):e instanceof WeakMap}ts.isWeakMap=Qwt;function zU(e){return Ep(e)==="[object WeakSet]"}zU.working=typeof WeakSet!="undefined"&&zU(new WeakSet);function $wt(e){return zU(e)}ts.isWeakSet=$wt;function h6(e){return Ep(e)==="[object ArrayBuffer]"}h6.working=typeof ArrayBuffer!="undefined"&&h6(new ArrayBuffer);function Swe(e){return typeof ArrayBuffer=="undefined"?!1:h6.working?h6(e):e instanceof ArrayBuffer}ts.isArrayBuffer=Swe;function v6(e){return Ep(e)==="[object DataView]"}v6.working=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"&&v6(new DataView(new ArrayBuffer(1),0,1));function Ewe(e){return typeof DataView=="undefined"?!1:v6.working?v6(e):e instanceof DataView}ts.isDataView=Ewe;var qU=typeof SharedArrayBuffer!="undefined"?SharedArrayBuffer:void 0;function MS(e){return Ep(e)==="[object SharedArrayBuffer]"}function kwe(e){return typeof qU=="undefined"?!1:(typeof MS.working=="undefined"&&(MS.working=MS(new qU)),MS.working?MS(e):e instanceof qU)}ts.isSharedArrayBuffer=kwe;function e3t(e){return Ep(e)==="[object AsyncFunction]"}ts.isAsyncFunction=e3t;function t3t(e){return Ep(e)==="[object Map Iterator]"}ts.isMapIterator=t3t;function r3t(e){return Ep(e)==="[object Set Iterator]"}ts.isSetIterator=r3t;function n3t(e){return Ep(e)==="[object Generator]"}ts.isGeneratorObject=n3t;function i3t(e){return Ep(e)==="[object WebAssembly.Module]"}ts.isWebAssemblyCompiledModule=i3t;function Cwe(e){return SS(e,Iwt)}ts.isNumberObject=Cwe;function Lwe(e){return SS(e,Fwt)}ts.isStringObject=Lwe;function Pwe(e){return SS(e,qwt)}ts.isBooleanObject=Pwe;function Rwe(e){return wwe&&SS(e,Awe)}ts.isBigIntObject=Rwe;function Dwe(e){return Twe&&SS(e,Mwe)}ts.isSymbolObject=Dwe;function a3t(e){return Cwe(e)||Lwe(e)||Pwe(e)||Rwe(e)||Dwe(e)}ts.isBoxedPrimitive=a3t;function o3t(e){return typeof Uint8Array!="undefined"&&(Swe(e)||kwe(e))}ts.isAnyArrayBuffer=o3t;["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(e){Object.defineProperty(ts,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})})});var BU=ne((Dlr,Iwe)=>{Iwe.exports=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"}});var YU=ne(rs=>{var Fwe=Object.getOwnPropertyDescriptors||function(t){for(var r=Object.keys(t),i={},n=0;n<r.length;n++)i[r[n]]=Object.getOwnPropertyDescriptor(t,r[n]);return i},s3t=/%[sdj%]/g;rs.format=function(e){if(!_6(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(Om(arguments[r]));return t.join(" ")}for(var r=1,i=arguments,n=i.length,a=String(e).replace(s3t,function(s){if(s==="%%")return"%";if(r>=n)return s;switch(s){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(l){return"[Circular]"}default:return s}}),o=i[r];r<n;o=i[++r])x6(o)||!Zw(o)?a+=" "+o:a+=" "+Om(o);return a};rs.deprecate=function(e,t){if(typeof process!="undefined"&&process.noDeprecation===!0)return e;if(typeof process=="undefined")return function(){return rs.deprecate(e,t).apply(this,arguments)};var r=!1;function i(){if(!r){if(process.throwDeprecation)throw new Error(t);process.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}return i};var d6={},qwe=/^$/;p6="false",p6=p6.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),qwe=new RegExp("^"+p6+"$","i");var p6;rs.debuglog=function(e){if(e=e.toUpperCase(),!d6[e])if(qwe.test(e)){var t=process.pid;d6[e]=function(){var r=rs.format.apply(rs,arguments);console.error("%s %d: %s",e,t,r)}}else d6[e]=function(){};return d6[e]};function Om(e,t){var r={seen:[],stylize:u3t};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),HU(t)?r.showHidden=t:t&&rs._extend(r,t),a_(r.showHidden)&&(r.showHidden=!1),a_(r.depth)&&(r.depth=2),a_(r.colors)&&(r.colors=!1),a_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=l3t),y6(r,e,r.depth)}rs.inspect=Om;Om.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Om.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function l3t(e,t){var r=Om.styles[t];return r?"\x1B["+Om.colors[r][0]+"m"+e+"\x1B["+Om.colors[r][1]+"m":e}function u3t(e,t){return e}function f3t(e){var t={};return e.forEach(function(r,i){t[r]=!0}),t}function y6(e,t,r){if(e.customInspect&&t&&g6(t.inspect)&&t.inspect!==rs.inspect&&!(t.constructor&&t.constructor.prototype===t)){var i=t.inspect(r,e);return _6(i)||(i=y6(e,i,r)),i}var n=c3t(e,t);if(n)return n;var a=Object.keys(t),o=f3t(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),kS(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return NU(t);if(a.length===0){if(g6(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(ES(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(m6(t))return e.stylize(Date.prototype.toString.call(t),"date");if(kS(t))return NU(t)}var l="",u=!1,f=["{","}"];if(zwe(t)&&(u=!0,f=["[","]"]),g6(t)){var c=t.name?": "+t.name:"";l=" [Function"+c+"]"}if(ES(t)&&(l=" "+RegExp.prototype.toString.call(t)),m6(t)&&(l=" "+Date.prototype.toUTCString.call(t)),kS(t)&&(l=" "+NU(t)),a.length===0&&(!u||t.length==0))return f[0]+l+f[1];if(r<0)return ES(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var h;return u?h=h3t(e,t,r,o,a):h=a.map(function(v){return VU(e,t,r,o,v,u)}),e.seen.pop(),v3t(h,l,f)}function c3t(e,t){if(a_(t))return e.stylize("undefined","undefined");if(_6(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(Owe(t))return e.stylize(""+t,"number");if(HU(t))return e.stylize(""+t,"boolean");if(x6(t))return e.stylize("null","null")}function NU(e){return"["+Error.prototype.toString.call(e)+"]"}function h3t(e,t,r,i,n){for(var a=[],o=0,s=t.length;o<s;++o)Bwe(t,String(o))?a.push(VU(e,t,r,i,String(o),!0)):a.push("");return n.forEach(function(l){l.match(/^\d+$/)||a.push(VU(e,t,r,i,l,!0))}),a}function VU(e,t,r,i,n,a){var o,s,l;if(l=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]},l.get?l.set?s=e.stylize("[Getter/Setter]","special"):s=e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),Bwe(i,n)||(o="["+n+"]"),s||(e.seen.indexOf(l.value)<0?(x6(r)?s=y6(e,l.value,null):s=y6(e,l.value,r-1),s.indexOf(`
`)>-1&&(a?s=s.split(`
`).map(function(u){return"  "+u}).join(`
`).slice(2):s=`
`+s.split(`
`).map(function(u){return"   "+u}).join(`
`))):s=e.stylize("[Circular]","special")),a_(o)){if(a&&n.match(/^\d+$/))return s;o=JSON.stringify(""+n),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.slice(1,-1),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function v3t(e,t,r){var i=0,n=e.reduce(function(a,o){return i++,o.indexOf(`
`)>=0&&i++,a+o.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?r[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}rs.types=OU();function zwe(e){return Array.isArray(e)}rs.isArray=zwe;function HU(e){return typeof e=="boolean"}rs.isBoolean=HU;function x6(e){return e===null}rs.isNull=x6;function d3t(e){return e==null}rs.isNullOrUndefined=d3t;function Owe(e){return typeof e=="number"}rs.isNumber=Owe;function _6(e){return typeof e=="string"}rs.isString=_6;function p3t(e){return typeof e=="symbol"}rs.isSymbol=p3t;function a_(e){return e===void 0}rs.isUndefined=a_;function ES(e){return Zw(e)&&GU(e)==="[object RegExp]"}rs.isRegExp=ES;rs.types.isRegExp=ES;function Zw(e){return typeof e=="object"&&e!==null}rs.isObject=Zw;function m6(e){return Zw(e)&&GU(e)==="[object Date]"}rs.isDate=m6;rs.types.isDate=m6;function kS(e){return Zw(e)&&(GU(e)==="[object Error]"||e instanceof Error)}rs.isError=kS;rs.types.isNativeError=kS;function g6(e){return typeof e=="function"}rs.isFunction=g6;function g3t(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e=="undefined"}rs.isPrimitive=g3t;rs.isBuffer=BU();function GU(e){return Object.prototype.toString.call(e)}function UU(e){return e<10?"0"+e.toString(10):e.toString(10)}var y3t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function m3t(){var e=new Date,t=[UU(e.getHours()),UU(e.getMinutes()),UU(e.getSeconds())].join(":");return[e.getDate(),y3t[e.getMonth()],t].join(" ")}rs.log=function(){console.log("%s - %s",m3t(),rs.format.apply(rs,arguments))};rs.inherits=iy();rs._extend=function(e,t){if(!t||!Zw(t))return e;for(var r=Object.keys(t),i=r.length;i--;)e[r[i]]=t[r[i]];return e};function Bwe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var i_=typeof Symbol!="undefined"?Symbol("util.promisify.custom"):void 0;rs.promisify=function(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');if(i_&&t[i_]){var r=t[i_];if(typeof r!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,i_,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var i,n,a=new Promise(function(l,u){i=l,n=u}),o=[],s=0;s<arguments.length;s++)o.push(arguments[s]);o.push(function(l,u){l?n(l):i(u)});try{t.apply(this,o)}catch(l){n(l)}return a}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),i_&&Object.defineProperty(r,i_,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,Fwe(t))};rs.promisify.custom=i_;function x3t(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}function _3t(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');function t(){for(var r=[],i=0;i<arguments.length;i++)r.push(arguments[i]);var n=r.pop();if(typeof n!="function")throw new TypeError("The last argument must be of type Function");var a=this,o=function(){return n.apply(a,arguments)};e.apply(this,r).then(function(s){process.nextTick(o.bind(null,null,s))},function(s){process.nextTick(x3t.bind(null,s,o))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,Fwe(e)),t}rs.callbackify=_3t});var Hwe=ne((Flr,Vwe)=>{"use strict";function Nwe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function b3t(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nwe(Object(r),!0).forEach(function(i){w3t(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nwe(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function w3t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T3t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Uwe(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function A3t(e,t,r){return t&&Uwe(e.prototype,t),r&&Uwe(e,r),e}var M3t=e_(),b6=M3t.Buffer,S3t=YU(),WU=S3t.inspect,E3t=WU&&WU.custom||"inspect";function k3t(e,t,r){b6.prototype.copy.call(e,t,r)}Vwe.exports=function(){function e(){T3t(this,e),this.head=null,this.tail=null,this.length=0}return A3t(e,[{key:"push",value:function(r){var i={data:r,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length}},{key:"unshift",value:function(r){var i={data:r,next:this.head};this.length===0&&(this.tail=i),this.head=i,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var i=this.head,n=""+i.data;i=i.next;)n+=r+i.data;return n}},{key:"concat",value:function(r){if(this.length===0)return b6.alloc(0);for(var i=b6.allocUnsafe(r>>>0),n=this.head,a=0;n;)k3t(n.data,i,a),a+=n.data.length,n=n.next;return i}},{key:"consume",value:function(r,i){var n;return r<this.head.data.length?(n=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?n=this.shift():n=i?this._getString(r):this._getBuffer(r),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var i=this.head,n=1,a=i.data;for(r-=a.length;i=i.next;){var o=i.data,s=r>o.length?o.length:r;if(s===o.length?a+=o:a+=o.slice(0,r),r-=s,r===0){s===o.length?(++n,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(s));break}++n}return this.length-=n,a}},{key:"_getBuffer",value:function(r){var i=b6.allocUnsafe(r),n=this.head,a=1;for(n.data.copy(i),r-=n.data.length;n=n.next;){var o=n.data,s=r>o.length?o.length:r;if(o.copy(i,i.length-r,0,s),r-=s,r===0){s===o.length?(++a,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(s));break}++a}return this.length-=a,i}},{key:E3t,value:function(r,i){return WU(this,b3t({},i,{depth:0,customInspect:!1}))}}]),e}()});var ZU=ne((qlr,Ywe)=>{"use strict";function C3t(e,t){var r=this,i=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return i||n?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(XU,this,e)):process.nextTick(XU,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(a){!t&&a?r._writableState?r._writableState.errorEmitted?process.nextTick(w6,r):(r._writableState.errorEmitted=!0,process.nextTick(Gwe,r,a)):process.nextTick(Gwe,r,a):t?(process.nextTick(w6,r),t(a)):process.nextTick(w6,r)}),this)}function Gwe(e,t){XU(e,t),w6(e)}function w6(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function L3t(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function XU(e,t){e.emit("error",t)}function P3t(e,t){var r=e._readableState,i=e._writableState;r&&r.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}Ywe.exports={destroy:C3t,undestroy:L3t,errorOrDestroy:P3t}});var o_=ne((zlr,Zwe)=>{"use strict";function R3t(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Xwe={};function kp(e,t,r){r||(r=Error);function i(a,o,s){return typeof t=="string"?t:t(a,o,s)}var n=function(a){R3t(o,a);function o(s,l,u){return a.call(this,i(s,l,u))||this}return o}(r);n.prototype.name=r.name,n.prototype.code=e,Xwe[e]=n}function Wwe(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(i){return String(i)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function D3t(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function I3t(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function F3t(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}kp("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError);kp("ERR_INVALID_ARG_TYPE",function(e,t,r){var i;typeof t=="string"&&D3t(t,"not ")?(i="must not be",t=t.replace(/^not /,"")):i="must be";var n;if(I3t(e," argument"))n="The ".concat(e," ").concat(i," ").concat(Wwe(t,"type"));else{var a=F3t(e,".")?"property":"argument";n='The "'.concat(e,'" ').concat(a," ").concat(i," ").concat(Wwe(t,"type"))}return n+=". Received type ".concat(typeof r),n},TypeError);kp("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");kp("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});kp("ERR_STREAM_PREMATURE_CLOSE","Premature close");kp("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});kp("ERR_MULTIPLE_CALLBACK","Callback called multiple times");kp("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");kp("ERR_STREAM_WRITE_AFTER_END","write after end");kp("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);kp("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);kp("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Zwe.exports.codes=Xwe});var jU=ne((Olr,jwe)=>{"use strict";var q3t=o_().codes.ERR_INVALID_OPT_VALUE;function z3t(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function O3t(e,t,r,i){var n=z3t(t,i,r);if(n!=null){if(!(isFinite(n)&&Math.floor(n)===n)||n<0){var a=i?r:"highWaterMark";throw new q3t(a,n)}return Math.floor(n)}return e.objectMode?16:16*1024}jwe.exports={getHighWaterMark:O3t}});var Jwe=ne((Blr,Kwe)=>{Kwe.exports=B3t;function B3t(e,t){if(KU("noDeprecation"))return e;var r=!1;function i(){if(!r){if(KU("throwDeprecation"))throw new Error(t);KU("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}return i}function KU(e){try{if(!window.localStorage)return!1}catch(r){return!1}var t=window.localStorage[e];return t==null?!1:String(t).toLowerCase()==="true"}});var $U=ne((Nlr,n3e)=>{"use strict";n3e.exports=nf;function $we(e){var t=this;this.next=null,this.entry=null,this.finish=function(){hTt(t,e)}}var jw;nf.WritableState=LS;var N3t={deprecate:Jwe()},e3e=nU(),A6=e_().Buffer,U3t=window.Uint8Array||function(){};function V3t(e){return A6.from(e)}function H3t(e){return A6.isBuffer(e)||e instanceof U3t}var QU=ZU(),G3t=jU(),Y3t=G3t.getHighWaterMark,Bm=o_().codes,W3t=Bm.ERR_INVALID_ARG_TYPE,X3t=Bm.ERR_METHOD_NOT_IMPLEMENTED,Z3t=Bm.ERR_MULTIPLE_CALLBACK,j3t=Bm.ERR_STREAM_CANNOT_PIPE,K3t=Bm.ERR_STREAM_DESTROYED,J3t=Bm.ERR_STREAM_NULL_VALUES,Q3t=Bm.ERR_STREAM_WRITE_AFTER_END,$3t=Bm.ERR_UNKNOWN_ENCODING,Kw=QU.errorOrDestroy;iy()(nf,e3e);function eTt(){}function LS(e,t,r){jw=jw||s_(),e=e||{},typeof r!="boolean"&&(r=t instanceof jw),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=Y3t(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var i=e.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(n){sTt(t,n)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=e.emitClose!==!1,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new $we(this)}LS.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r};(function(){try{Object.defineProperty(LS.prototype,"buffer",{get:N3t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}})();var T6;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(T6=Function.prototype[Symbol.hasInstance],Object.defineProperty(nf,Symbol.hasInstance,{value:function(t){return T6.call(this,t)?!0:this!==nf?!1:t&&t._writableState instanceof LS}})):T6=function(t){return t instanceof this};function nf(e){jw=jw||s_();var t=this instanceof jw;if(!t&&!T6.call(nf,this))return new nf(e);this._writableState=new LS(e,this,t),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),e3e.call(this)}nf.prototype.pipe=function(){Kw(this,new j3t)};function tTt(e,t){var r=new Q3t;Kw(e,r),process.nextTick(t,r)}function rTt(e,t,r,i){var n;return r===null?n=new J3t:typeof r!="string"&&!t.objectMode&&(n=new W3t("chunk",["string","Buffer"],r)),n?(Kw(e,n),process.nextTick(i,n),!1):!0}nf.prototype.write=function(e,t,r){var i=this._writableState,n=!1,a=!i.objectMode&&H3t(e);return a&&!A6.isBuffer(e)&&(e=V3t(e)),typeof t=="function"&&(r=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),typeof r!="function"&&(r=eTt),i.ending?tTt(this,r):(a||rTt(this,i,e,r))&&(i.pendingcb++,n=iTt(this,i,a,e,t,r)),n};nf.prototype.cork=function(){this._writableState.corked++};nf.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest&&t3e(this,e))};nf.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new $3t(t);return this._writableState.defaultEncoding=t,this};Object.defineProperty(nf.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function nTt(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=A6.from(t,r)),t}Object.defineProperty(nf.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function iTt(e,t,r,i,n,a){if(!r){var o=nTt(t,i,n);i!==o&&(r=!0,n="buffer",i=o)}var s=t.objectMode?1:i.length;t.length+=s;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:a,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else JU(e,t,!1,s,i,n,a);return l}function JU(e,t,r,i,n,a,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new K3t("write")):r?e._writev(n,t.onwrite):e._write(n,a,t.onwrite),t.sync=!1}function aTt(e,t,r,i,n){--t.pendingcb,r?(process.nextTick(n,i),process.nextTick(CS,e,t),e._writableState.errorEmitted=!0,Kw(e,i)):(n(i),e._writableState.errorEmitted=!0,Kw(e,i),CS(e,t))}function oTt(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function sTt(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if(typeof n!="function")throw new Z3t;if(oTt(r),t)aTt(e,r,i,t,n);else{var a=r3e(r)||e.destroyed;!a&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&t3e(e,r),i?process.nextTick(Qwe,e,r,a,n):Qwe(e,r,a,n)}}function Qwe(e,t,r,i){r||lTt(e,t),t.pendingcb--,i(),CS(e,t)}function lTt(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function t3e(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,n=new Array(i),a=t.corkedRequestsFree;a.entry=r;for(var o=0,s=!0;r;)n[o]=r,r.isBuf||(s=!1),r=r.next,o+=1;n.allBuffers=s,JU(e,t,!0,t.length,n,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new $we(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,u=r.encoding,f=r.callback,c=t.objectMode?1:l.length;if(JU(e,t,!1,c,l,u,f),r=r.next,t.bufferedRequestCount--,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}nf.prototype._write=function(e,t,r){r(new X3t("_write()"))};nf.prototype._writev=null;nf.prototype.end=function(e,t,r){var i=this._writableState;return typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||cTt(this,i,r),this};Object.defineProperty(nf.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function r3e(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function uTt(e,t){e._final(function(r){t.pendingcb--,r&&Kw(e,r),t.prefinished=!0,e.emit("prefinish"),CS(e,t)})}function fTt(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"&&!t.destroyed?(t.pendingcb++,t.finalCalled=!0,process.nextTick(uTt,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function CS(e,t){var r=r3e(t);if(r&&(fTt(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return r}function cTt(e,t,r){t.ending=!0,CS(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function hTt(e,t,r){var i=e.entry;for(e.entry=null;i;){var n=i.callback;t.pendingcb--,n(r),i=i.next}t.corkedRequestsFree.next=e}Object.defineProperty(nf.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}});nf.prototype.destroy=QU.destroy;nf.prototype._undestroy=QU.undestroy;nf.prototype._destroy=function(e,t){t(e)}});var s_=ne((Ulr,a3e)=>{"use strict";var vTt=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};a3e.exports=ig;var i3e=rV(),tV=$U();iy()(ig,i3e);for(eV=vTt(tV.prototype),M6=0;M6<eV.length;M6++)S6=eV[M6],ig.prototype[S6]||(ig.prototype[S6]=tV.prototype[S6]);var eV,S6,M6;function ig(e){if(!(this instanceof ig))return new ig(e);i3e.call(this,e),tV.call(this,e),this.allowHalfOpen=!0,e&&(e.readable===!1&&(this.readable=!1),e.writable===!1&&(this.writable=!1),e.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",dTt)))}Object.defineProperty(ig.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(ig.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(ig.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function dTt(){this._writableState.ended||process.nextTick(pTt,this)}function pTt(e){e.end()}Object.defineProperty(ig.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(t){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=t,this._writableState.destroyed=t)}})});var l3e=ne((nV,s3e)=>{var E6=e_(),ag=E6.Buffer;function o3e(e,t){for(var r in e)t[r]=e[r]}ag.from&&ag.alloc&&ag.allocUnsafe&&ag.allocUnsafeSlow?s3e.exports=E6:(o3e(E6,nV),nV.Buffer=l_);function l_(e,t,r){return ag(e,t,r)}l_.prototype=Object.create(ag.prototype);o3e(ag,l_);l_.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return ag(e,t,r)};l_.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var i=ag(e);return t!==void 0?typeof r=="string"?i.fill(t,r):i.fill(t):i.fill(0),i};l_.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return ag(e)};l_.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return E6.SlowBuffer(e)}});var oV=ne(f3e=>{"use strict";var aV=l3e().Buffer,u3e=aV.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function gTt(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function yTt(e){var t=gTt(e);if(typeof t!="string"&&(aV.isEncoding===u3e||!u3e(e)))throw new Error("Unknown encoding: "+e);return t||e}f3e.StringDecoder=PS;function PS(e){this.encoding=yTt(e);var t;switch(this.encoding){case"utf16le":this.text=TTt,this.end=ATt,t=4;break;case"utf8":this.fillLast=_Tt,t=4;break;case"base64":this.text=MTt,this.end=STt,t=3;break;default:this.write=ETt,this.end=kTt;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=aV.allocUnsafe(t)}PS.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};PS.prototype.end=wTt;PS.prototype.text=bTt;PS.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function iV(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function mTt(e,t,r){var i=t.length-1;if(i<r)return 0;var n=iV(t[i]);return n>=0?(n>0&&(e.lastNeed=n-1),n):--i<r||n===-2?0:(n=iV(t[i]),n>=0?(n>0&&(e.lastNeed=n-2),n):--i<r||n===-2?0:(n=iV(t[i]),n>=0?(n>0&&(n===2?n=0:e.lastNeed=n-3),n):0))}function xTt(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}function _Tt(e){var t=this.lastTotal-this.lastNeed,r=xTt(this,e,t);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function bTt(e,t){var r=mTt(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var i=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)}function wTt(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t}function TTt(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function ATt(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function MTt(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function STt(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function ETt(e){return e.toString(this.encoding)}function kTt(e){return e&&e.length?this.write(e):""}});var k6=ne((Hlr,v3e)=>{"use strict";var c3e=o_().codes.ERR_STREAM_PREMATURE_CLOSE;function CTt(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];e.apply(this,i)}}}function LTt(){}function PTt(e){return e.setHeader&&typeof e.abort=="function"}function h3e(e,t,r){if(typeof t=="function")return h3e(e,null,t);t||(t={}),r=CTt(r||LTt);var i=t.readable||t.readable!==!1&&e.readable,n=t.writable||t.writable!==!1&&e.writable,a=function(){e.writable||s()},o=e._writableState&&e._writableState.finished,s=function(){n=!1,o=!0,i||r.call(e)},l=e._readableState&&e._readableState.endEmitted,u=function(){i=!1,l=!0,n||r.call(e)},f=function(d){r.call(e,d)},c=function(){var d;if(i&&!l)return(!e._readableState||!e._readableState.ended)&&(d=new c3e),r.call(e,d);if(n&&!o)return(!e._writableState||!e._writableState.ended)&&(d=new c3e),r.call(e,d)},h=function(){e.req.on("finish",s)};return PTt(e)?(e.on("complete",s),e.on("abort",c),e.req?h():e.on("request",h)):n&&!e._writableState&&(e.on("end",a),e.on("close",a)),e.on("end",u),e.on("finish",s),t.error!==!1&&e.on("error",f),e.on("close",c),function(){e.removeListener("complete",s),e.removeListener("abort",c),e.removeListener("request",h),e.req&&e.req.removeListener("finish",s),e.removeListener("end",a),e.removeListener("close",a),e.removeListener("finish",s),e.removeListener("end",u),e.removeListener("error",f),e.removeListener("close",c)}}v3e.exports=h3e});var p3e=ne((Glr,d3e)=>{"use strict";var C6;function Nm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var RTt=k6(),Um=Symbol("lastResolve"),u_=Symbol("lastReject"),RS=Symbol("error"),L6=Symbol("ended"),f_=Symbol("lastPromise"),sV=Symbol("handlePromise"),c_=Symbol("stream");function Vm(e,t){return{value:e,done:t}}function DTt(e){var t=e[Um];if(t!==null){var r=e[c_].read();r!==null&&(e[f_]=null,e[Um]=null,e[u_]=null,t(Vm(r,!1)))}}function ITt(e){process.nextTick(DTt,e)}function FTt(e,t){return function(r,i){e.then(function(){if(t[L6]){r(Vm(void 0,!0));return}t[sV](r,i)},i)}}var qTt=Object.getPrototypeOf(function(){}),zTt=Object.setPrototypeOf((C6={get stream(){return this[c_]},next:function(){var t=this,r=this[RS];if(r!==null)return Promise.reject(r);if(this[L6])return Promise.resolve(Vm(void 0,!0));if(this[c_].destroyed)return new Promise(function(o,s){process.nextTick(function(){t[RS]?s(t[RS]):o(Vm(void 0,!0))})});var i=this[f_],n;if(i)n=new Promise(FTt(i,this));else{var a=this[c_].read();if(a!==null)return Promise.resolve(Vm(a,!1));n=new Promise(this[sV])}return this[f_]=n,n}},Nm(C6,Symbol.asyncIterator,function(){return this}),Nm(C6,"return",function(){var t=this;return new Promise(function(r,i){t[c_].destroy(null,function(n){if(n){i(n);return}r(Vm(void 0,!0))})})}),C6),qTt),OTt=function(t){var r,i=Object.create(zTt,(r={},Nm(r,c_,{value:t,writable:!0}),Nm(r,Um,{value:null,writable:!0}),Nm(r,u_,{value:null,writable:!0}),Nm(r,RS,{value:null,writable:!0}),Nm(r,L6,{value:t._readableState.endEmitted,writable:!0}),Nm(r,sV,{value:function(a,o){var s=i[c_].read();s?(i[f_]=null,i[Um]=null,i[u_]=null,a(Vm(s,!1))):(i[Um]=a,i[u_]=o)},writable:!0}),r));return i[f_]=null,RTt(t,function(n){if(n&&n.code!=="ERR_STREAM_PREMATURE_CLOSE"){var a=i[u_];a!==null&&(i[f_]=null,i[Um]=null,i[u_]=null,a(n)),i[RS]=n;return}var o=i[Um];o!==null&&(i[f_]=null,i[Um]=null,i[u_]=null,o(Vm(void 0,!0))),i[L6]=!0}),t.on("readable",ITt.bind(null,i)),i};d3e.exports=OTt});var y3e=ne((Ylr,g3e)=>{g3e.exports=function(){throw new Error("Readable.from is not available in the browser")}});var rV=ne((Xlr,E3e)=>{"use strict";E3e.exports=Rs;var Jw;Rs.ReadableState=b3e;var Wlr=ox().EventEmitter,_3e=function(t,r){return t.listeners(r).length},IS=nU(),P6=e_().Buffer,BTt=window.Uint8Array||function(){};function NTt(e){return P6.from(e)}function UTt(e){return P6.isBuffer(e)||e instanceof BTt}var lV=YU(),Ko;lV&&lV.debuglog?Ko=lV.debuglog("stream"):Ko=function(){};var VTt=Hwe(),pV=ZU(),HTt=jU(),GTt=HTt.getHighWaterMark,R6=o_().codes,YTt=R6.ERR_INVALID_ARG_TYPE,WTt=R6.ERR_STREAM_PUSH_AFTER_EOF,XTt=R6.ERR_METHOD_NOT_IMPLEMENTED,ZTt=R6.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Qw,uV,fV;iy()(Rs,IS);var DS=pV.errorOrDestroy,cV=["error","close","destroy","pause","resume"];function jTt(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function b3e(e,t,r){Jw=Jw||s_(),e=e||{},typeof r!="boolean"&&(r=t instanceof Jw),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=GTt(this,e,"readableHighWaterMark",r),this.buffer=new VTt,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=e.emitClose!==!1,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(Qw||(Qw=oV().StringDecoder),this.decoder=new Qw(e.encoding),this.encoding=e.encoding)}function Rs(e){if(Jw=Jw||s_(),!(this instanceof Rs))return new Rs(e);var t=this instanceof Jw;this._readableState=new b3e(e,this,t),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),IS.call(this)}Object.defineProperty(Rs.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}});Rs.prototype.destroy=pV.destroy;Rs.prototype._undestroy=pV.undestroy;Rs.prototype._destroy=function(e,t){t(e)};Rs.prototype.push=function(e,t){var r=this._readableState,i;return r.objectMode?i=!0:typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=P6.from(e,t),t=""),i=!0),w3e(this,e,t,!1,i)};Rs.prototype.unshift=function(e){return w3e(this,e,null,!0,!1)};function w3e(e,t,r,i,n){Ko("readableAddChunk",t);var a=e._readableState;if(t===null)a.reading=!1,QTt(e,a);else{var o;if(n||(o=KTt(a,t)),o)DS(e,o);else if(a.objectMode||t&&t.length>0)if(typeof t!="string"&&!a.objectMode&&Object.getPrototypeOf(t)!==P6.prototype&&(t=NTt(t)),i)a.endEmitted?DS(e,new ZTt):hV(e,a,t,!0);else if(a.ended)DS(e,new WTt);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||t.length!==0?hV(e,a,t,!1):dV(e,a)):hV(e,a,t,!1)}else i||(a.reading=!1,dV(e,a))}return!a.ended&&(a.length<a.highWaterMark||a.length===0)}function hV(e,t,r,i){t.flowing&&t.length===0&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&D6(e)),dV(e,t)}function KTt(e,t){var r;return!UTt(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new YTt("chunk",["string","Buffer","Uint8Array"],t)),r}Rs.prototype.isPaused=function(){return this._readableState.flowing===!1};Rs.prototype.setEncoding=function(e){Qw||(Qw=oV().StringDecoder);var t=new Qw(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";r!==null;)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),i!==""&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var m3e=1073741824;function JTt(e){return e>=m3e?e=m3e:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function x3e(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=JTt(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}Rs.prototype.read=function(e){Ko("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&((t.highWaterMark!==0?t.length>=t.highWaterMark:t.length>0)||t.ended))return Ko("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?vV(this):D6(this),null;if(e=x3e(e,t),e===0&&t.ended)return t.length===0&&vV(this),null;var i=t.needReadable;Ko("need readable",i),(t.length===0||t.length-e<t.highWaterMark)&&(i=!0,Ko("length less than watermark",i)),t.ended||t.reading?(i=!1,Ko("reading or ended",i)):i&&(Ko("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=x3e(r,t)));var n;return e>0?n=M3e(e,t):n=null,n===null?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&vV(this)),n!==null&&this.emit("data",n),n};function QTt(e,t){if(Ko("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?D6(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,T3e(e)))}}function D6(e){var t=e._readableState;Ko("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(Ko("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(T3e,e))}function T3e(e){var t=e._readableState;Ko("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,gV(e)}function dV(e,t){t.readingMore||(t.readingMore=!0,process.nextTick($Tt,e,t))}function $Tt(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&t.length===0);){var r=t.length;if(Ko("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}Rs.prototype._read=function(e){DS(this,new XTt("_read()"))};Rs.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e);break}i.pipesCount+=1,Ko("pipe count=%d opts=%j",i.pipesCount,t);var n=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,a=n?s:_;i.endEmitted?process.nextTick(a):r.once("end",a),e.on("unpipe",o);function o(T,p){Ko("onunpipe"),T===r&&p&&p.hasUnpiped===!1&&(p.hasUnpiped=!0,f())}function s(){Ko("onend"),e.end()}var l=eAt(r);e.on("drain",l);var u=!1;function f(){Ko("cleanup"),e.removeListener("close",v),e.removeListener("finish",d),e.removeListener("drain",l),e.removeListener("error",h),e.removeListener("unpipe",o),r.removeListener("end",s),r.removeListener("end",_),r.removeListener("data",c),u=!0,i.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&l()}r.on("data",c);function c(T){Ko("ondata");var p=e.write(T);Ko("dest.write",p),p===!1&&((i.pipesCount===1&&i.pipes===e||i.pipesCount>1&&S3e(i.pipes,e)!==-1)&&!u&&(Ko("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function h(T){Ko("onerror",T),_(),e.removeListener("error",h),_3e(e,"error")===0&&DS(e,T)}jTt(e,"error",h);function v(){e.removeListener("finish",d),_()}e.once("close",v);function d(){Ko("onfinish"),e.removeListener("close",v),_()}e.once("finish",d);function _(){Ko("unpipe"),r.unpipe(e)}return e.emit("pipe",r),i.flowing||(Ko("pipe resume"),r.resume()),e};function eAt(e){return function(){var r=e._readableState;Ko("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&_3e(e,"data")&&(r.flowing=!0,gV(e))}}Rs.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var i=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<n;a++)i[a].emit("unpipe",this,{hasUnpiped:!1});return this}var o=S3e(t.pipes,e);return o===-1?this:(t.pipes.splice(o,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)};Rs.prototype.on=function(e,t){var r=IS.prototype.on.call(this,e,t),i=this._readableState;return e==="data"?(i.readableListening=this.listenerCount("readable")>0,i.flowing!==!1&&this.resume()):e==="readable"&&!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,Ko("on readable",i.length,i.reading),i.length?D6(this):i.reading||process.nextTick(tAt,this)),r};Rs.prototype.addListener=Rs.prototype.on;Rs.prototype.removeListener=function(e,t){var r=IS.prototype.removeListener.call(this,e,t);return e==="readable"&&process.nextTick(A3e,this),r};Rs.prototype.removeAllListeners=function(e){var t=IS.prototype.removeAllListeners.apply(this,arguments);return(e==="readable"||e===void 0)&&process.nextTick(A3e,this),t};function A3e(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function tAt(e){Ko("readable nexttick read 0"),e.read(0)}Rs.prototype.resume=function(){var e=this._readableState;return e.flowing||(Ko("resume"),e.flowing=!e.readableListening,rAt(this,e)),e.paused=!1,this};function rAt(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(nAt,e,t))}function nAt(e,t){Ko("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),gV(e),t.flowing&&!t.reading&&e.read(0)}Rs.prototype.pause=function(){return Ko("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Ko("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function gV(e){var t=e._readableState;for(Ko("flow",t.flowing);t.flowing&&e.read()!==null;);}Rs.prototype.wrap=function(e){var t=this,r=this._readableState,i=!1;e.on("end",function(){if(Ko("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&t.push(o)}t.push(null)}),e.on("data",function(o){if(Ko("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var s=t.push(o);s||(i=!0,e.pause())}});for(var n in e)this[n]===void 0&&typeof e[n]=="function"&&(this[n]=function(s){return function(){return e[s].apply(e,arguments)}}(n));for(var a=0;a<cV.length;a++)e.on(cV[a],this.emit.bind(this,cV[a]));return this._read=function(o){Ko("wrapped _read",o),i&&(i=!1,e.resume())},this};typeof Symbol=="function"&&(Rs.prototype[Symbol.asyncIterator]=function(){return uV===void 0&&(uV=p3e()),uV(this)});Object.defineProperty(Rs.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Rs.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Rs.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}});Rs._fromList=M3e;Object.defineProperty(Rs.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function M3e(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.first():r=t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r}function vV(e){var t=e._readableState;Ko("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(iAt,t,e))}function iAt(e,t){if(Ko("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}typeof Symbol=="function"&&(Rs.from=function(e,t){return fV===void 0&&(fV=y3e()),fV(Rs,e,t)});function S3e(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}});var yV=ne((Zlr,C3e)=>{"use strict";C3e.exports=oy;var I6=o_().codes,aAt=I6.ERR_METHOD_NOT_IMPLEMENTED,oAt=I6.ERR_MULTIPLE_CALLBACK,sAt=I6.ERR_TRANSFORM_ALREADY_TRANSFORMING,lAt=I6.ERR_TRANSFORM_WITH_LENGTH_0,F6=s_();iy()(oy,F6);function uAt(e,t){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(i===null)return this.emit("error",new oAt);r.writechunk=null,r.writecb=null,t!=null&&this.push(t),i(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function oy(e){if(!(this instanceof oy))return new oy(e);F6.call(this,e),this._transformState={afterTransform:uAt.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",fAt)}function fAt(){var e=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(t,r){k3e(e,t,r)}):k3e(this,null,null)}oy.prototype.push=function(e,t){return this._transformState.needTransform=!1,F6.prototype.push.call(this,e,t)};oy.prototype._transform=function(e,t,r){r(new aAt("_transform()"))};oy.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}};oy.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};oy.prototype._destroy=function(e,t){F6.prototype._destroy.call(this,e,function(r){t(r)})};function k3e(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new lAt;if(e._transformState.transforming)throw new sAt;return e.push(null)}});var R3e=ne((jlr,P3e)=>{"use strict";P3e.exports=FS;var L3e=yV();iy()(FS,L3e);function FS(e){if(!(this instanceof FS))return new FS(e);L3e.call(this,e)}FS.prototype._transform=function(e,t,r){r(null,e)}});var z3e=ne((Klr,q3e)=>{"use strict";var mV;function cAt(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var F3e=o_().codes,hAt=F3e.ERR_MISSING_ARGS,vAt=F3e.ERR_STREAM_DESTROYED;function D3e(e){if(e)throw e}function dAt(e){return e.setHeader&&typeof e.abort=="function"}function pAt(e,t,r,i){i=cAt(i);var n=!1;e.on("close",function(){n=!0}),mV===void 0&&(mV=k6()),mV(e,{readable:t,writable:r},function(o){if(o)return i(o);n=!0,i()});var a=!1;return function(o){if(!n&&!a){if(a=!0,dAt(e))return e.abort();if(typeof e.destroy=="function")return e.destroy();i(o||new vAt("pipe"))}}}function I3e(e){e()}function gAt(e,t){return e.pipe(t)}function yAt(e){return!e.length||typeof e[e.length-1]!="function"?D3e:e.pop()}function mAt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=yAt(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new hAt("streams");var n,a=t.map(function(o,s){var l=s<t.length-1,u=s>0;return pAt(o,l,u,function(f){n||(n=f),f&&a.forEach(I3e),!l&&(a.forEach(I3e),i(n))})});return t.reduce(gAt)}q3e.exports=mAt});var B3e=ne((Jlr,O3e)=>{O3e.exports=Cp;var xV=ox().EventEmitter,xAt=iy();xAt(Cp,xV);Cp.Readable=rV();Cp.Writable=$U();Cp.Duplex=s_();Cp.Transform=yV();Cp.PassThrough=R3e();Cp.finished=k6();Cp.pipeline=z3e();Cp.Stream=Cp;function Cp(){xV.call(this)}Cp.prototype.pipe=function(e,t){var r=this;function i(f){e.writable&&e.write(f)===!1&&r.pause&&r.pause()}r.on("data",i);function n(){r.readable&&r.resume&&r.resume()}e.on("drain",n),!e._isStdio&&(!t||t.end!==!1)&&(r.on("end",o),r.on("close",s));var a=!1;function o(){a||(a=!0,e.end())}function s(){a||(a=!0,typeof e.destroy=="function"&&e.destroy())}function l(f){if(u(),xV.listenerCount(this,"error")===0)throw f}r.on("error",l),e.on("error",l);function u(){r.removeListener("data",i),e.removeListener("drain",n),r.removeListener("end",o),r.removeListener("close",s),r.removeListener("error",l),e.removeListener("error",l),r.removeListener("end",u),r.removeListener("close",u),e.removeListener("close",u)}return r.on("end",u),r.on("close",u),e.on("close",u),e.emit("pipe",r),e}});var e3=ne(ns=>{var N3e=Object.getOwnPropertyDescriptors||function(t){for(var r=Object.keys(t),i={},n=0;n<r.length;n++)i[r[n]]=Object.getOwnPropertyDescriptor(t,r[n]);return i},_At=/%[sdj%]/g;ns.format=function(e){if(!V6(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(Hm(arguments[r]));return t.join(" ")}for(var r=1,i=arguments,n=i.length,a=String(e).replace(_At,function(s){if(s==="%%")return"%";if(r>=n)return s;switch(s){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(l){return"[Circular]"}default:return s}}),o=i[r];r<n;o=i[++r])U6(o)||!$w(o)?a+=" "+o:a+=" "+Hm(o);return a};ns.deprecate=function(e,t){if(typeof process!="undefined"&&process.noDeprecation===!0)return e;if(typeof process=="undefined")return function(){return ns.deprecate(e,t).apply(this,arguments)};var r=!1;function i(){if(!r){if(process.throwDeprecation)throw new Error(t);process.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}return i};var q6={},U3e=/^$/;z6="false",z6=z6.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),U3e=new RegExp("^"+z6+"$","i");var z6;ns.debuglog=function(e){if(e=e.toUpperCase(),!q6[e])if(U3e.test(e)){var t=process.pid;q6[e]=function(){var r=ns.format.apply(ns,arguments);console.error("%s %d: %s",e,t,r)}}else q6[e]=function(){};return q6[e]};function Hm(e,t){var r={seen:[],stylize:wAt};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),TV(t)?r.showHidden=t:t&&ns._extend(r,t),v_(r.showHidden)&&(r.showHidden=!1),v_(r.depth)&&(r.depth=2),v_(r.colors)&&(r.colors=!1),v_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=bAt),B6(r,e,r.depth)}ns.inspect=Hm;Hm.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Hm.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function bAt(e,t){var r=Hm.styles[t];return r?"\x1B["+Hm.colors[r][0]+"m"+e+"\x1B["+Hm.colors[r][1]+"m":e}function wAt(e,t){return e}function TAt(e){var t={};return e.forEach(function(r,i){t[r]=!0}),t}function B6(e,t,r){if(e.customInspect&&t&&O6(t.inspect)&&t.inspect!==ns.inspect&&!(t.constructor&&t.constructor.prototype===t)){var i=t.inspect(r,e);return V6(i)||(i=B6(e,i,r)),i}var n=AAt(e,t);if(n)return n;var a=Object.keys(t),o=TAt(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),zS(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return _V(t);if(a.length===0){if(O6(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(qS(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(N6(t))return e.stylize(Date.prototype.toString.call(t),"date");if(zS(t))return _V(t)}var l="",u=!1,f=["{","}"];if(V3e(t)&&(u=!0,f=["[","]"]),O6(t)){var c=t.name?": "+t.name:"";l=" [Function"+c+"]"}if(qS(t)&&(l=" "+RegExp.prototype.toString.call(t)),N6(t)&&(l=" "+Date.prototype.toUTCString.call(t)),zS(t)&&(l=" "+_V(t)),a.length===0&&(!u||t.length==0))return f[0]+l+f[1];if(r<0)return qS(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var h;return u?h=MAt(e,t,r,o,a):h=a.map(function(v){return wV(e,t,r,o,v,u)}),e.seen.pop(),SAt(h,l,f)}function AAt(e,t){if(v_(t))return e.stylize("undefined","undefined");if(V6(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(H3e(t))return e.stylize(""+t,"number");if(TV(t))return e.stylize(""+t,"boolean");if(U6(t))return e.stylize("null","null")}function _V(e){return"["+Error.prototype.toString.call(e)+"]"}function MAt(e,t,r,i,n){for(var a=[],o=0,s=t.length;o<s;++o)G3e(t,String(o))?a.push(wV(e,t,r,i,String(o),!0)):a.push("");return n.forEach(function(l){l.match(/^\d+$/)||a.push(wV(e,t,r,i,l,!0))}),a}function wV(e,t,r,i,n,a){var o,s,l;if(l=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]},l.get?l.set?s=e.stylize("[Getter/Setter]","special"):s=e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),G3e(i,n)||(o="["+n+"]"),s||(e.seen.indexOf(l.value)<0?(U6(r)?s=B6(e,l.value,null):s=B6(e,l.value,r-1),s.indexOf(`
`)>-1&&(a?s=s.split(`
`).map(function(u){return"  "+u}).join(`
`).slice(2):s=`
`+s.split(`
`).map(function(u){return"   "+u}).join(`
`))):s=e.stylize("[Circular]","special")),v_(o)){if(a&&n.match(/^\d+$/))return s;o=JSON.stringify(""+n),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.slice(1,-1),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function SAt(e,t,r){var i=0,n=e.reduce(function(a,o){return i++,o.indexOf(`
`)>=0&&i++,a+o.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?r[0]+(t===""?"":t+`
 `)+" "+e.join(`,
  `)+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}ns.types=OU();function V3e(e){return Array.isArray(e)}ns.isArray=V3e;function TV(e){return typeof e=="boolean"}ns.isBoolean=TV;function U6(e){return e===null}ns.isNull=U6;function EAt(e){return e==null}ns.isNullOrUndefined=EAt;function H3e(e){return typeof e=="number"}ns.isNumber=H3e;function V6(e){return typeof e=="string"}ns.isString=V6;function kAt(e){return typeof e=="symbol"}ns.isSymbol=kAt;function v_(e){return e===void 0}ns.isUndefined=v_;function qS(e){return $w(e)&&AV(e)==="[object RegExp]"}ns.isRegExp=qS;ns.types.isRegExp=qS;function $w(e){return typeof e=="object"&&e!==null}ns.isObject=$w;function N6(e){return $w(e)&&AV(e)==="[object Date]"}ns.isDate=N6;ns.types.isDate=N6;function zS(e){return $w(e)&&(AV(e)==="[object Error]"||e instanceof Error)}ns.isError=zS;ns.types.isNativeError=zS;function O6(e){return typeof e=="function"}ns.isFunction=O6;function CAt(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e=="undefined"}ns.isPrimitive=CAt;ns.isBuffer=BU();function AV(e){return Object.prototype.toString.call(e)}function bV(e){return e<10?"0"+e.toString(10):e.toString(10)}var LAt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function PAt(){var e=new Date,t=[bV(e.getHours()),bV(e.getMinutes()),bV(e.getSeconds())].join(":");return[e.getDate(),LAt[e.getMonth()],t].join(" ")}ns.log=function(){console.log("%s - %s",PAt(),ns.format.apply(ns,arguments))};ns.inherits=iy();ns._extend=function(e,t){if(!t||!$w(t))return e;for(var r=Object.keys(t),i=r.length;i--;)e[r[i]]=t[r[i]];return e};function G3e(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var h_=typeof Symbol!="undefined"?Symbol("util.promisify.custom"):void 0;ns.promisify=function(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');if(h_&&t[h_]){var r=t[h_];if(typeof r!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,h_,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var i,n,a=new Promise(function(l,u){i=l,n=u}),o=[],s=0;s<arguments.length;s++)o.push(arguments[s]);o.push(function(l,u){l?n(l):i(u)});try{t.apply(this,o)}catch(l){n(l)}return a}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),h_&&Object.defineProperty(r,h_,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,N3e(t))};ns.promisify.custom=h_;function RAt(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}function DAt(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');function t(){for(var r=[],i=0;i<arguments.length;i++)r.push(arguments[i]);var n=r.pop();if(typeof n!="function")throw new TypeError("The last argument must be of type Function");var a=this,o=function(){return n.apply(a,arguments)};e.apply(this,r).then(function(s){process.nextTick(o.bind(null,null,s))},function(s){process.nextTick(RAt.bind(null,s,o))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,N3e(e)),t}ns.callbackify=DAt});var EV=ne(($lr,Z3e)=>{"use strict";function Gm(e){"@babel/helpers - typeof";return Gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gm(e)}function Y3e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,FAt(i.key),i)}}function IAt(e,t,r){return t&&Y3e(e.prototype,t),r&&Y3e(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function FAt(e){var t=qAt(e,"string");return Gm(t)==="symbol"?t:String(t)}function qAt(e,t){if(Gm(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Gm(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zAt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OAt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SV(e,t)}function SV(e,t){return SV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},SV(e,t)}function BAt(e){var t=VAt();return function(){var i=H6(e),n;if(t){var a=H6(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return NAt(this,n)}}function NAt(e,t){if(t&&(Gm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UAt(e)}function UAt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VAt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function H6(e){return H6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},H6(e)}var X3e={},t3,MV;function OS(e,t,r){r||(r=Error);function i(a,o,s){return typeof t=="string"?t:t(a,o,s)}var n=function(a){OAt(s,a);var o=BAt(s);function s(l,u,f){var c;return zAt(this,s),c=o.call(this,i(l,u,f)),c.code=e,c}return IAt(s)}(r);X3e[e]=n}function W3e(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(i){return String(i)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function HAt(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function GAt(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function YAt(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}OS("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError);OS("ERR_INVALID_ARG_TYPE",function(e,t,r){t3===void 0&&(t3=BS()),t3(typeof e=="string","'name' must be a string");var i;typeof t=="string"&&HAt(t,"not ")?(i="must not be",t=t.replace(/^not /,"")):i="must be";var n;if(GAt(e," argument"))n="The ".concat(e," ").concat(i," ").concat(W3e(t,"type"));else{var a=YAt(e,".")?"property":"argument";n='The "'.concat(e,'" ').concat(a," ").concat(i," ").concat(W3e(t,"type"))}return n+=". Received type ".concat(Gm(r)),n},TypeError);OS("ERR_INVALID_ARG_VALUE",function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";MV===void 0&&(MV=e3());var i=MV.inspect(t);return i.length>128&&(i="".concat(i.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(r,". Received ").concat(i)},TypeError,RangeError);OS("ERR_INVALID_RETURN_VALUE",function(e,t,r){var i;return r&&r.constructor&&r.constructor.name?i="instance of ".concat(r.constructor.name):i="type ".concat(Gm(r)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(i,".")},TypeError);OS("ERR_MISSING_ARGS",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t3===void 0&&(t3=BS()),t3(t.length>0,"At least one arg needs to be specified");var i="The ",n=t.length;switch(t=t.map(function(a){return'"'.concat(a,'"')}),n){case 1:i+="".concat(t[0]," argument");break;case 2:i+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:i+=t.slice(0,n-1).join(", "),i+=", and ".concat(t[n-1]," arguments");break}return"".concat(i," must be specified")},TypeError);Z3e.exports.codes=X3e});var iTe=ne((eur,nTe)=>{"use strict";function j3e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function K3e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j3e(Object(r),!0).forEach(function(i){WAt(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j3e(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function WAt(e,t,r){return t=eTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XAt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J3e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,eTe(i.key),i)}}function ZAt(e,t,r){return t&&J3e(e.prototype,t),r&&J3e(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function eTe(e){var t=jAt(e,"string");return cd(t)==="symbol"?t:String(t)}function jAt(e,t){if(cd(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(cd(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KAt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HS(e,t)}function JAt(e){var t=rTe();return function(){var i=GS(e),n;if(t){var a=GS(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return tTe(this,n)}}function tTe(e,t){if(t&&(cd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kV(e)}function kV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CV(e){var t=typeof Map=="function"?new Map:void 0;return CV=function(i){if(i===null||!QAt(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(i))return t.get(i);t.set(i,n)}function n(){return G6(i,arguments,GS(this).constructor)}return n.prototype=Object.create(i.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),HS(n,i)},CV(e)}function G6(e,t,r){return rTe()?G6=Reflect.construct.bind():G6=function(n,a,o){var s=[null];s.push.apply(s,a);var l=Function.bind.apply(n,s),u=new l;return o&&HS(u,o.prototype),u},G6.apply(null,arguments)}function rTe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function QAt(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function HS(e,t){return HS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},HS(e,t)}function GS(e){return GS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},GS(e)}function cd(e){"@babel/helpers - typeof";return cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cd(e)}var $At=e3(),LV=$At.inspect,eMt=EV(),tMt=eMt.codes.ERR_INVALID_ARG_TYPE;function Q3e(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function rMt(e,t){if(t=Math.floor(t),e.length==0||t==0)return"";var r=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+=e.substring(0,r-e.length),e}var b0="",NS="",US="",mh="",d_={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},nMt=10;function $3e(e){var t=Object.keys(e),r=Object.create(Object.getPrototypeOf(e));return t.forEach(function(i){r[i]=e[i]}),Object.defineProperty(r,"message",{value:e.message}),r}function VS(e){return LV(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function iMt(e,t,r){var i="",n="",a=0,o="",s=!1,l=VS(e),u=l.split(`
`),f=VS(t).split(`
`),c=0,h="";if(r==="strictEqual"&&cd(e)==="object"&&cd(t)==="object"&&e!==null&&t!==null&&(r="strictEqualObject"),u.length===1&&f.length===1&&u[0]!==f[0]){var v=u[0].length+f[0].length;if(v<=nMt){if((cd(e)!=="object"||e===null)&&(cd(t)!=="object"||t===null)&&(e!==0||t!==0))return"".concat(d_[r],`

`)+"".concat(u[0]," !== ").concat(f[0],`
`)}else if(r!=="strictEqualObject"){var d=process.stderr&&process.stderr.isTTY?process.stderr.columns:80;if(v<d){for(;u[0][c]===f[0][c];)c++;c>2&&(h=`
  `.concat(rMt(" ",c),"^"),c=0)}}}for(var _=u[u.length-1],T=f[f.length-1];_===T&&(c++<2?o=`
  `.concat(_).concat(o):i=_,u.pop(),f.pop(),!(u.length===0||f.length===0));)_=u[u.length-1],T=f[f.length-1];var p=Math.max(u.length,f.length);if(p===0){var M=l.split(`
`);if(M.length>30)for(M[26]="".concat(b0,"...").concat(mh);M.length>27;)M.pop();return"".concat(d_.notIdentical,`

`).concat(M.join(`
`),`
`)}c>3&&(o=`
`.concat(b0,"...").concat(mh).concat(o),s=!0),i!==""&&(o=`
  `.concat(i).concat(o),i="");var b=0,w=d_[r]+`
`.concat(NS,"+ actual").concat(mh," ").concat(US,"- expected").concat(mh),k=" ".concat(b0,"...").concat(mh," Lines skipped");for(c=0;c<p;c++){var x=c-a;if(u.length<c+1)x>1&&c>2&&(x>4?(n+=`
`.concat(b0,"...").concat(mh),s=!0):x>3&&(n+=`
  `.concat(f[c-2]),b++),n+=`
  `.concat(f[c-1]),b++),a=c,i+=`
`.concat(US,"-").concat(mh," ").concat(f[c]),b++;else if(f.length<c+1)x>1&&c>2&&(x>4?(n+=`
`.concat(b0,"...").concat(mh),s=!0):x>3&&(n+=`
  `.concat(u[c-2]),b++),n+=`
  `.concat(u[c-1]),b++),a=c,n+=`
`.concat(NS,"+").concat(mh," ").concat(u[c]),b++;else{var E=f[c],S=u[c],g=S!==E&&(!Q3e(S,",")||S.slice(0,-1)!==E);g&&Q3e(E,",")&&E.slice(0,-1)===S&&(g=!1,S+=","),g?(x>1&&c>2&&(x>4?(n+=`
`.concat(b0,"...").concat(mh),s=!0):x>3&&(n+=`
  `.concat(u[c-2]),b++),n+=`
  `.concat(u[c-1]),b++),a=c,n+=`
`.concat(NS,"+").concat(mh," ").concat(S),i+=`
`.concat(US,"-").concat(mh," ").concat(E),b+=2):(n+=i,i="",(x===1||c===0)&&(n+=`
  `.concat(S),b++))}if(b>20&&c<p-2)return"".concat(w).concat(k,`
`).concat(n,`
`).concat(b0,"...").concat(mh).concat(i,`
`)+"".concat(b0,"...").concat(mh)}return"".concat(w).concat(s?k:"",`
`).concat(n).concat(i).concat(o).concat(h)}var aMt=function(e,t){KAt(i,e);var r=JAt(i);function i(n){var a;if(XAt(this,i),cd(n)!=="object"||n===null)throw new tMt("options","Object",n);var o=n.message,s=n.operator,l=n.stackStartFn,u=n.actual,f=n.expected,c=Error.stackTraceLimit;if(Error.stackTraceLimit=0,o!=null)a=r.call(this,String(o));else if(process.stderr&&process.stderr.isTTY&&(process.stderr&&process.stderr.getColorDepth&&process.stderr.getColorDepth()!==1?(b0="\x1B[34m",NS="\x1B[32m",mh="\x1B[39m",US="\x1B[31m"):(b0="",NS="",mh="",US="")),cd(u)==="object"&&u!==null&&cd(f)==="object"&&f!==null&&"stack"in u&&u instanceof Error&&"stack"in f&&f instanceof Error&&(u=$3e(u),f=$3e(f)),s==="deepStrictEqual"||s==="strictEqual")a=r.call(this,iMt(u,f,s));else if(s==="notDeepStrictEqual"||s==="notStrictEqual"){var h=d_[s],v=VS(u).split(`
`);if(s==="notStrictEqual"&&cd(u)==="object"&&u!==null&&(h=d_.notStrictEqualObject),v.length>30)for(v[26]="".concat(b0,"...").concat(mh);v.length>27;)v.pop();v.length===1?a=r.call(this,"".concat(h," ").concat(v[0])):a=r.call(this,"".concat(h,`

`).concat(v.join(`
`),`
`))}else{var d=VS(u),_="",T=d_[s];s==="notDeepEqual"||s==="notEqual"?(d="".concat(d_[s],`

`).concat(d),d.length>1024&&(d="".concat(d.slice(0,1021),"..."))):(_="".concat(VS(f)),d.length>512&&(d="".concat(d.slice(0,509),"...")),_.length>512&&(_="".concat(_.slice(0,509),"...")),s==="deepEqual"||s==="equal"?d="".concat(T,`

`).concat(d,`

should equal

`):_=" ".concat(s," ").concat(_)),a=r.call(this,"".concat(d).concat(_))}return Error.stackTraceLimit=c,a.generatedMessage=!o,Object.defineProperty(kV(a),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),a.code="ERR_ASSERTION",a.actual=u,a.expected=f,a.operator=s,Error.captureStackTrace&&Error.captureStackTrace(kV(a),l),a.stack,a.name="AssertionError",tTe(a)}return ZAt(i,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:t,value:function(a,o){return LV(this,K3e(K3e({},o),{},{customInspect:!1,depth:0}))}}]),i}(CV(Error),LV.custom);nTe.exports=aMt});var PV=ne((tur,oTe)=>{"use strict";var aTe=Object.prototype.toString;oTe.exports=function(t){var r=aTe.call(t),i=r==="[object Arguments]";return i||(i=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&aTe.call(t.callee)==="[object Function]"),i}});var pTe=ne((rur,dTe)=>{"use strict";var vTe;Object.keys||(YS=Object.prototype.hasOwnProperty,RV=Object.prototype.toString,sTe=PV(),DV=Object.prototype.propertyIsEnumerable,lTe=!DV.call({toString:null},"toString"),uTe=DV.call(function(){},"prototype"),WS=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Y6=function(e){var t=e.constructor;return t&&t.prototype===e},fTe={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},cTe=function(){if(typeof window=="undefined")return!1;for(var e in window)try{if(!fTe["$"+e]&&YS.call(window,e)&&window[e]!==null&&typeof window[e]=="object")try{Y6(window[e])}catch(t){return!0}}catch(t){return!0}return!1}(),hTe=function(e){if(typeof window=="undefined"||!cTe)return Y6(e);try{return Y6(e)}catch(t){return!1}},vTe=function(t){var r=t!==null&&typeof t=="object",i=RV.call(t)==="[object Function]",n=sTe(t),a=r&&RV.call(t)==="[object String]",o=[];if(!r&&!i&&!n)throw new TypeError("Object.keys called on a non-object");var s=uTe&&i;if(a&&t.length>0&&!YS.call(t,0))for(var l=0;l<t.length;++l)o.push(String(l));if(n&&t.length>0)for(var u=0;u<t.length;++u)o.push(String(u));else for(var f in t)!(s&&f==="prototype")&&YS.call(t,f)&&o.push(String(f));if(lTe)for(var c=hTe(t),h=0;h<WS.length;++h)!(c&&WS[h]==="constructor")&&YS.call(t,WS[h])&&o.push(WS[h]);return o});var YS,RV,sTe,DV,lTe,uTe,WS,Y6,fTe,cTe,hTe;dTe.exports=vTe});var IV=ne((nur,mTe)=>{"use strict";var oMt=Array.prototype.slice,sMt=PV(),gTe=Object.keys,W6=gTe?function(t){return gTe(t)}:pTe(),yTe=Object.keys;W6.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(i){return sMt(i)?yTe(oMt.call(i)):yTe(i)})}else Object.keys=W6;return Object.keys||W6};mTe.exports=W6});var ATe=ne((iur,TTe)=>{"use strict";var lMt=IV(),bTe=jP()(),wTe=Yw(),xTe=Object,uMt=wTe("Array.prototype.push"),_Te=wTe("Object.prototype.propertyIsEnumerable"),fMt=bTe?Object.getOwnPropertySymbols:null;TTe.exports=function(t,r){if(t==null)throw new TypeError("target must be an object");var i=xTe(t);if(arguments.length===1)return i;for(var n=1;n<arguments.length;++n){var a=xTe(arguments[n]),o=lMt(a),s=bTe&&(Object.getOwnPropertySymbols||fMt);if(s)for(var l=s(a),u=0;u<l.length;++u){var f=l[u];_Te(a,f)&&uMt(o,f)}for(var c=0;c<o.length;++c){var h=o[c];if(_Te(a,h)){var v=a[h];i[h]=v}}}return i}});var STe=ne((aur,MTe)=>{"use strict";var FV=ATe(),cMt=function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),r={},i=0;i<t.length;++i)r[t[i]]=t[i];var n=Object.assign({},r),a="";for(var o in n)a+=o;return e!==a},hMt=function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return e[1]==="y"}return!1};MTe.exports=function(){return!Object.assign||cMt()||hMt()?FV:Object.assign}});var qV=ne((our,kTe)=>{"use strict";var ETe=function(e){return e!==e};kTe.exports=function(t,r){return t===0&&r===0?1/t===1/r:!!(t===r||ETe(t)&&ETe(r))}});var X6=ne((sur,CTe)=>{"use strict";var vMt=qV();CTe.exports=function(){return typeof Object.is=="function"?Object.is:vMt}});var XS=ne((lur,DTe)=>{"use strict";var dMt=IV(),pMt=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",gMt=Object.prototype.toString,yMt=Array.prototype.concat,LTe=Object.defineProperty,mMt=function(e){return typeof e=="function"&&gMt.call(e)==="[object Function]"},xMt=$P()(),PTe=LTe&&xMt,_Mt=function(e,t,r,i){if(t in e){if(i===!0){if(e[t]===r)return}else if(!mMt(i)||!i())return}PTe?LTe(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r},RTe=function(e,t){var r=arguments.length>2?arguments[2]:{},i=dMt(t);pMt&&(i=yMt.call(i,Object.getOwnPropertySymbols(t)));for(var n=0;n<i.length;n+=1)_Mt(e,i[n],t[i[n]],r[i[n]])};RTe.supportsDescriptors=!!PTe;DTe.exports=RTe});var FTe=ne((uur,ITe)=>{"use strict";var bMt=X6(),wMt=XS();ITe.exports=function(){var t=bMt();return wMt(Object,{is:t},{is:function(){return Object.is!==t}}),t}});var BTe=ne((fur,OTe)=>{"use strict";var TMt=XS(),AMt=AS(),MMt=qV(),qTe=X6(),SMt=FTe(),zTe=AMt(qTe(),Object);TMt(zTe,{getPolyfill:qTe,implementation:MMt,shim:SMt});OTe.exports=zTe});var zV=ne((cur,NTe)=>{"use strict";NTe.exports=function(t){return t!==t}});var OV=ne((hur,UTe)=>{"use strict";var EMt=zV();UTe.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:EMt}});var HTe=ne((vur,VTe)=>{"use strict";var kMt=XS(),CMt=OV();VTe.exports=function(){var t=CMt();return kMt(Number,{isNaN:t},{isNaN:function(){return Number.isNaN!==t}}),t}});var XTe=ne((dur,WTe)=>{"use strict";var LMt=AS(),PMt=XS(),RMt=zV(),GTe=OV(),DMt=HTe(),YTe=LMt(GTe(),Number);PMt(YTe,{getPolyfill:GTe,implementation:RMt,shim:DMt});WTe.exports=YTe});var vAe=ne((pur,hAe)=>{"use strict";function ZTe(e,t){return zMt(e)||qMt(e,t)||FMt(e,t)||IMt()}function IMt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FMt(e,t){if(e){if(typeof e=="string")return jTe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jTe(e,t)}}function jTe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function qMt(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,n,a,o,s=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(i=a.call(r)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(f){u=!0,n=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw n}}return s}}function zMt(e){if(Array.isArray(e))return e}function Lp(e){"@babel/helpers - typeof";return Lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lp(e)}var OMt=/a/g.flags!==void 0,eR=function(t){var r=[];return t.forEach(function(i){return r.push(i)}),r},KTe=function(t){var r=[];return t.forEach(function(i,n){return r.push([n,i])}),r},sAe=Object.is?Object.is:BTe(),Q6=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},BV=Number.isNaN?Number.isNaN:XTe();function UV(e){return e.call.bind(e)}var jS=UV(Object.prototype.hasOwnProperty),$6=UV(Object.prototype.propertyIsEnumerable),JTe=UV(Object.prototype.toString),Av=e3().types,BMt=Av.isAnyArrayBuffer,NMt=Av.isArrayBufferView,QTe=Av.isDate,Z6=Av.isMap,$Te=Av.isRegExp,j6=Av.isSet,UMt=Av.isNativeError,VMt=Av.isBoxedPrimitive,eAe=Av.isNumberObject,tAe=Av.isStringObject,rAe=Av.isBooleanObject,nAe=Av.isBigIntObject,HMt=Av.isSymbolObject,GMt=Av.isFloat32Array,YMt=Av.isFloat64Array;function WMt(e){if(e.length===0||e.length>10)return!0;for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(r<48||r>57)return!0}return e.length===10&&e>=Math.pow(2,32)}function K6(e){return Object.keys(e).filter(WMt).concat(Q6(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function lAe(e,t){if(e===t)return 0;for(var r=e.length,i=t.length,n=0,a=Math.min(r,i);n<a;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0}var J6=void 0,XMt=!0,ZMt=!1,NV=0,VV=1,uAe=2,fAe=3;function jMt(e,t){return OMt?e.source===t.source&&e.flags===t.flags:RegExp.prototype.toString.call(e)===RegExp.prototype.toString.call(t)}function KMt(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function JMt(e,t){return e.byteLength!==t.byteLength?!1:lAe(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))===0}function QMt(e,t){return e.byteLength===t.byteLength&&lAe(new Uint8Array(e),new Uint8Array(t))===0}function $Mt(e,t){return eAe(e)?eAe(t)&&sAe(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t)):tAe(e)?tAe(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t):rAe(e)?rAe(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t):nAe(e)?nAe(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t):HMt(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}function Pp(e,t,r,i){if(e===t)return e!==0?!0:r?sAe(e,t):!0;if(r){if(Lp(e)!=="object")return typeof e=="number"&&BV(e)&&BV(t);if(Lp(t)!=="object"||e===null||t===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(e===null||Lp(e)!=="object")return t===null||Lp(t)!=="object"?e==t:!1;if(t===null||Lp(t)!=="object")return!1}var n=JTe(e),a=JTe(t);if(n!==a)return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var o=K6(e,J6),s=K6(t,J6);return o.length!==s.length?!1:ZS(e,t,r,i,VV,o)}if(n==="[object Object]"&&(!Z6(e)&&Z6(t)||!j6(e)&&j6(t)))return!1;if(QTe(e)){if(!QTe(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if($Te(e)){if(!$Te(t)||!jMt(e,t))return!1}else if(UMt(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else if(NMt(e)){if(!r&&(GMt(e)||YMt(e))){if(!KMt(e,t))return!1}else if(!JMt(e,t))return!1;var l=K6(e,J6),u=K6(t,J6);return l.length!==u.length?!1:ZS(e,t,r,i,NV,l)}else{if(j6(e))return!j6(t)||e.size!==t.size?!1:ZS(e,t,r,i,uAe);if(Z6(e))return!Z6(t)||e.size!==t.size?!1:ZS(e,t,r,i,fAe);if(BMt(e)){if(!QMt(e,t))return!1}else if(VMt(e)&&!$Mt(e,t))return!1}return ZS(e,t,r,i,NV)}function iAe(e,t){return t.filter(function(r){return $6(e,r)})}function ZS(e,t,r,i,n,a){if(arguments.length===5){a=Object.keys(e);var o=Object.keys(t);if(a.length!==o.length)return!1}for(var s=0;s<a.length;s++)if(!jS(t,a[s]))return!1;if(r&&arguments.length===5){var l=Q6(e);if(l.length!==0){var u=0;for(s=0;s<l.length;s++){var f=l[s];if($6(e,f)){if(!$6(t,f))return!1;a.push(f),u++}else if($6(t,f))return!1}var c=Q6(t);if(l.length!==c.length&&iAe(t,c).length!==u)return!1}else{var h=Q6(t);if(h.length!==0&&iAe(t,h).length!==0)return!1}}if(a.length===0&&(n===NV||n===VV&&e.length===0||e.size===0))return!0;if(i===void 0)i={val1:new Map,val2:new Map,position:0};else{var v=i.val1.get(e);if(v!==void 0){var d=i.val2.get(t);if(d!==void 0)return v===d}i.position++}i.val1.set(e,i.position),i.val2.set(t,i.position);var _=iSt(e,t,r,a,i,n);return i.val1.delete(e),i.val2.delete(t),_}function aAe(e,t,r,i){for(var n=eR(e),a=0;a<n.length;a++){var o=n[a];if(Pp(t,o,r,i))return e.delete(o),!0}return!1}function cAe(e){switch(Lp(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(BV(e))return!1}return!0}function eSt(e,t,r){var i=cAe(r);return i!=null?i:t.has(i)&&!e.has(i)}function tSt(e,t,r,i,n){var a=cAe(r);if(a!=null)return a;var o=t.get(a);return o===void 0&&!t.has(a)||!Pp(i,o,!1,n)?!1:!e.has(a)&&Pp(i,o,!1,n)}function rSt(e,t,r,i){for(var n=null,a=eR(e),o=0;o<a.length;o++){var s=a[o];if(Lp(s)==="object"&&s!==null)n===null&&(n=new Set),n.add(s);else if(!t.has(s)){if(r||!eSt(e,t,s))return!1;n===null&&(n=new Set),n.add(s)}}if(n!==null){for(var l=eR(t),u=0;u<l.length;u++){var f=l[u];if(Lp(f)==="object"&&f!==null){if(!aAe(n,f,r,i))return!1}else if(!r&&!e.has(f)&&!aAe(n,f,r,i))return!1}return n.size===0}return!0}function oAe(e,t,r,i,n,a){for(var o=eR(e),s=0;s<o.length;s++){var l=o[s];if(Pp(r,l,n,a)&&Pp(i,t.get(l),n,a))return e.delete(l),!0}return!1}function nSt(e,t,r,i){for(var n=null,a=KTe(e),o=0;o<a.length;o++){var s=ZTe(a[o],2),l=s[0],u=s[1];if(Lp(l)==="object"&&l!==null)n===null&&(n=new Set),n.add(l);else{var f=t.get(l);if(f===void 0&&!t.has(l)||!Pp(u,f,r,i)){if(r||!tSt(e,t,l,u,i))return!1;n===null&&(n=new Set),n.add(l)}}}if(n!==null){for(var c=KTe(t),h=0;h<c.length;h++){var v=ZTe(c[h],2),d=v[0],_=v[1];if(Lp(d)==="object"&&d!==null){if(!oAe(n,e,d,_,r,i))return!1}else if(!r&&(!e.has(d)||!Pp(e.get(d),_,!1,i))&&!oAe(n,e,d,_,!1,i))return!1}return n.size===0}return!0}function iSt(e,t,r,i,n,a){var o=0;if(a===uAe){if(!rSt(e,t,r,n))return!1}else if(a===fAe){if(!nSt(e,t,r,n))return!1}else if(a===VV)for(;o<e.length;o++)if(jS(e,o)){if(!jS(t,o)||!Pp(e[o],t[o],r,n))return!1}else{if(jS(t,o))return!1;for(var s=Object.keys(e);o<s.length;o++){var l=s[o];if(!jS(t,l)||!Pp(e[l],t[l],r,n))return!1}return s.length===Object.keys(t).length}for(o=0;o<i.length;o++){var u=i[o];if(!Pp(e[u],t[u],r,n))return!1}return!0}function aSt(e,t){return Pp(e,t,ZMt)}function oSt(e,t){return Pp(e,t,XMt)}hAe.exports={isDeepEqual:aSt,isDeepStrictEqual:oSt}});var BS=ne((gur,PAe)=>{"use strict";function w0(e){"@babel/helpers - typeof";return w0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w0(e)}function dAe(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,lSt(i.key),i)}}function sSt(e,t,r){return t&&dAe(e.prototype,t),r&&dAe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function lSt(e){var t=uSt(e,"string");return w0(t)==="symbol"?t:String(t)}function uSt(e,t){if(w0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(w0(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fSt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var cSt=EV(),KS=cSt.codes,pAe=KS.ERR_AMBIGUOUS_ARGUMENT,r3=KS.ERR_INVALID_ARG_TYPE,hSt=KS.ERR_INVALID_ARG_VALUE,vSt=KS.ERR_INVALID_RETURN_VALUE,Wm=KS.ERR_MISSING_ARGS,Xm=iTe(),dSt=e3(),tR=dSt.inspect,xAe=e3().types,pSt=xAe.isPromise,rR=xAe.isRegExp,gSt=STe()(),_Ae=X6()(),nR=Yw()("RegExp.prototype.test"),Ym,iR;function JS(){var e=vAe();Ym=e.isDeepEqual,iR=e.isDeepStrictEqual}var gAe=!1,Nl=PAe.exports=HV,aR={};function T0(e){throw e.message instanceof Error?e.message:new Xm(e)}function bAe(e,t,r,i,n){var a=arguments.length,o;if(a===0)o="Failed";else if(a===1)r=e,e=void 0;else{if(gAe===!1){gAe=!0;var s=process.emitWarning?process.emitWarning:console.warn.bind(console);s("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}a===2&&(i="!=")}if(r instanceof Error)throw r;var l={actual:e,expected:t,operator:i===void 0?"fail":i,stackStartFn:n||bAe};r!==void 0&&(l.message=r);var u=new Xm(l);throw o&&(u.message=o,u.generatedMessage=!0),u}Nl.fail=bAe;Nl.AssertionError=Xm;function wAe(e,t,r,i){if(!r){var n=!1;if(t===0)n=!0,i="No value argument passed to `assert.ok()`";else if(i instanceof Error)throw i;var a=new Xm({actual:r,expected:!0,message:i,operator:"==",stackStartFn:e});throw a.generatedMessage=n,a}}function HV(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];wAe.apply(void 0,[HV,t.length].concat(t))}Nl.ok=HV;Nl.equal=function e(t,r,i){if(arguments.length<2)throw new Wm("actual","expected");t!=r&&T0({actual:t,expected:r,message:i,operator:"==",stackStartFn:e})};Nl.notEqual=function e(t,r,i){if(arguments.length<2)throw new Wm("actual","expected");t==r&&T0({actual:t,expected:r,message:i,operator:"!=",stackStartFn:e})};Nl.deepEqual=function e(t,r,i){if(arguments.length<2)throw new Wm("actual","expected");Ym===void 0&&JS(),Ym(t,r)||T0({actual:t,expected:r,message:i,operator:"deepEqual",stackStartFn:e})};Nl.notDeepEqual=function e(t,r,i){if(arguments.length<2)throw new Wm("actual","expected");Ym===void 0&&JS(),Ym(t,r)&&T0({actual:t,expected:r,message:i,operator:"notDeepEqual",stackStartFn:e})};Nl.deepStrictEqual=function e(t,r,i){if(arguments.length<2)throw new Wm("actual","expected");Ym===void 0&&JS(),iR(t,r)||T0({actual:t,expected:r,message:i,operator:"deepStrictEqual",stackStartFn:e})};Nl.notDeepStrictEqual=TAe;function TAe(e,t,r){if(arguments.length<2)throw new Wm("actual","expected");Ym===void 0&&JS(),iR(e,t)&&T0({actual:e,expected:t,message:r,operator:"notDeepStrictEqual",stackStartFn:TAe})}Nl.strictEqual=function e(t,r,i){if(arguments.length<2)throw new Wm("actual","expected");_Ae(t,r)||T0({actual:t,expected:r,message:i,operator:"strictEqual",stackStartFn:e})};Nl.notStrictEqual=function e(t,r,i){if(arguments.length<2)throw new Wm("actual","expected");_Ae(t,r)&&T0({actual:t,expected:r,message:i,operator:"notStrictEqual",stackStartFn:e})};var yAe=sSt(function e(t,r,i){var n=this;fSt(this,e),r.forEach(function(a){a in t&&(i!==void 0&&typeof i[a]=="string"&&rR(t[a])&&nR(t[a],i[a])?n[a]=i[a]:n[a]=t[a])})});function ySt(e,t,r,i,n,a){if(!(r in e)||!iR(e[r],t[r])){if(!i){var o=new yAe(e,n),s=new yAe(t,n,e),l=new Xm({actual:o,expected:s,operator:"deepStrictEqual",stackStartFn:a});throw l.actual=e,l.expected=t,l.operator=a.name,l}T0({actual:e,expected:t,message:i,operator:a.name,stackStartFn:a})}}function AAe(e,t,r,i){if(typeof t!="function"){if(rR(t))return nR(t,e);if(arguments.length===2)throw new r3("expected",["Function","RegExp"],t);if(w0(e)!=="object"||e===null){var n=new Xm({actual:e,expected:t,message:r,operator:"deepStrictEqual",stackStartFn:i});throw n.operator=i.name,n}var a=Object.keys(t);if(t instanceof Error)a.push("name","message");else if(a.length===0)throw new hSt("error",t,"may not be an empty object");return Ym===void 0&&JS(),a.forEach(function(o){typeof e[o]=="string"&&rR(t[o])&&nR(t[o],e[o])||ySt(e,t,o,r,a,i)}),!0}return t.prototype!==void 0&&e instanceof t?!0:Error.isPrototypeOf(t)?!1:t.call({},e)===!0}function MAe(e){if(typeof e!="function")throw new r3("fn","Function",e);try{e()}catch(t){return t}return aR}function mAe(e){return pSt(e)||e!==null&&w0(e)==="object"&&typeof e.then=="function"&&typeof e.catch=="function"}function SAe(e){return Promise.resolve().then(function(){var t;if(typeof e=="function"){if(t=e(),!mAe(t))throw new vSt("instance of Promise","promiseFn",t)}else if(mAe(e))t=e;else throw new r3("promiseFn",["Function","Promise"],e);return Promise.resolve().then(function(){return t}).then(function(){return aR}).catch(function(r){return r})})}function EAe(e,t,r,i){if(typeof r=="string"){if(arguments.length===4)throw new r3("error",["Object","Error","Function","RegExp"],r);if(w0(t)==="object"&&t!==null){if(t.message===r)throw new pAe("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===r)throw new pAe("error/message",'The error "'.concat(t,'" is identical to the message.'));i=r,r=void 0}else if(r!=null&&w0(r)!=="object"&&typeof r!="function")throw new r3("error",["Object","Error","Function","RegExp"],r);if(t===aR){var n="";r&&r.name&&(n+=" (".concat(r.name,")")),n+=i?": ".concat(i):".";var a=e.name==="rejects"?"rejection":"exception";T0({actual:void 0,expected:r,operator:e.name,message:"Missing expected ".concat(a).concat(n),stackStartFn:e})}if(r&&!AAe(t,r,i,e))throw t}function kAe(e,t,r,i){if(t!==aR){if(typeof r=="string"&&(i=r,r=void 0),!r||AAe(t,r)){var n=i?": ".concat(i):".",a=e.name==="doesNotReject"?"rejection":"exception";T0({actual:t,expected:r,operator:e.name,message:"Got unwanted ".concat(a).concat(n,`
`)+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}Nl.throws=function e(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];EAe.apply(void 0,[e,MAe(t)].concat(i))};Nl.rejects=function e(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];return SAe(t).then(function(a){return EAe.apply(void 0,[e,a].concat(i))})};Nl.doesNotThrow=function e(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];kAe.apply(void 0,[e,MAe(t)].concat(i))};Nl.doesNotReject=function e(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];return SAe(t).then(function(a){return kAe.apply(void 0,[e,a].concat(i))})};Nl.ifError=function e(t){if(t!=null){var r="ifError got unwanted exception: ";w0(t)==="object"&&typeof t.message=="string"?t.message.length===0&&t.constructor?r+=t.constructor.name:r+=t.message:r+=tR(t);var i=new Xm({actual:t,expected:null,operator:"ifError",message:r,stackStartFn:e}),n=t.stack;if(typeof n=="string"){var a=n.split(`
`);a.shift();for(var o=i.stack.split(`
`),s=0;s<a.length;s++){var l=o.indexOf(a[s]);if(l!==-1){o=o.slice(0,l);break}}i.stack="".concat(o.join(`
`),`
`).concat(a.join(`
`))}throw i}};function CAe(e,t,r,i,n){if(!rR(t))throw new r3("regexp","RegExp",t);var a=n==="match";if(typeof e!="string"||nR(t,e)!==a){if(r instanceof Error)throw r;var o=!r;r=r||(typeof e!="string"?'The "string" argument must be of type string. Received type '+"".concat(w0(e)," (").concat(tR(e),")"):(a?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(tR(t),`. Input:

`).concat(tR(e),`
`));var s=new Xm({actual:e,expected:t,message:r,operator:n,stackStartFn:i});throw s.generatedMessage=o,s}}Nl.match=function e(t,r,i){CAe(t,r,i,e,"match")};Nl.doesNotMatch=function e(t,r,i){CAe(t,r,i,e,"doesNotMatch")};function LAe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];wAe.apply(void 0,[LAe,t.length].concat(t))}Nl.strict=gSt(LAe,Nl,{equal:Nl.strictEqual,deepEqual:Nl.deepStrictEqual,notEqual:Nl.notStrictEqual,notDeepEqual:Nl.notDeepStrictEqual});Nl.strict.strict=Nl.strict});var DAe=ne((yur,RAe)=>{var QS=1e3,$S=QS*60,eE=$S*60,tE=eE*24,mSt=tE*365.25;RAe.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return xSt(e);if(r==="number"&&isNaN(e)===!1)return t.long?bSt(e):_St(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function xSt(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return r*mSt;case"days":case"day":case"d":return r*tE;case"hours":case"hour":case"hrs":case"hr":case"h":return r*eE;case"minutes":case"minute":case"mins":case"min":case"m":return r*$S;case"seconds":case"second":case"secs":case"sec":case"s":return r*QS;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function _St(e){return e>=tE?Math.round(e/tE)+"d":e>=eE?Math.round(e/eE)+"h":e>=$S?Math.round(e/$S)+"m":e>=QS?Math.round(e/QS)+"s":e+"ms"}function bSt(e){return oR(e,tE,"day")||oR(e,eE,"hour")||oR(e,$S,"minute")||oR(e,QS,"second")||e+" ms"}function oR(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}});var FAe=ne((nl,IAe)=>{nl=IAe.exports=YV.debug=YV.default=YV;nl.coerce=SSt;nl.disable=ASt;nl.enable=TSt;nl.enabled=MSt;nl.humanize=DAe();nl.names=[];nl.skips=[];nl.formatters={};var GV;function wSt(e){var t=0,r;for(r in e)t=(t<<5)-t+e.charCodeAt(r),t|=0;return nl.colors[Math.abs(t)%nl.colors.length]}function YV(e){function t(){if(t.enabled){var r=t,i=+new Date,n=i-(GV||i);r.diff=n,r.prev=GV,r.curr=i,GV=i;for(var a=new Array(arguments.length),o=0;o<a.length;o++)a[o]=arguments[o];a[0]=nl.coerce(a[0]),typeof a[0]!="string"&&a.unshift("%O");var s=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(u,f){if(u==="%%")return u;s++;var c=nl.formatters[f];if(typeof c=="function"){var h=a[s];u=c.call(r,h),a.splice(s,1),s--}return u}),nl.formatArgs.call(r,a);var l=t.log||nl.log||console.log.bind(console);l.apply(r,a)}}return t.namespace=e,t.enabled=nl.enabled(e),t.useColors=nl.useColors(),t.color=wSt(e),typeof nl.init=="function"&&nl.init(t),t}function TSt(e){nl.save(e),nl.names=[],nl.skips=[];for(var t=(typeof e=="string"?e:"").split(/[\s,]+/),r=t.length,i=0;i<r;i++)t[i]&&(e=t[i].replace(/\*/g,".*?"),e[0]==="-"?nl.skips.push(new RegExp("^"+e.substr(1)+"$")):nl.names.push(new RegExp("^"+e+"$")))}function ASt(){nl.enable("")}function MSt(e){var t,r;for(t=0,r=nl.skips.length;t<r;t++)if(nl.skips[t].test(e))return!1;for(t=0,r=nl.names.length;t<r;t++)if(nl.names[t].test(e))return!0;return!1}function SSt(e){return e instanceof Error?e.stack||e.message:e}});var OAe=ne((Mv,zAe)=>{Mv=zAe.exports=FAe();Mv.log=CSt;Mv.formatArgs=kSt;Mv.save=LSt;Mv.load=qAe;Mv.useColors=ESt;Mv.storage=typeof chrome!="undefined"&&typeof chrome.storage!="undefined"?chrome.storage.local:PSt();Mv.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function ESt(){return typeof window!="undefined"&&window.process&&window.process.type==="renderer"?!0:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}Mv.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}};function kSt(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+Mv.humanize(this.diff),!!t){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,n=0;e[0].replace(/%[a-zA-Z%]/g,function(a){a!=="%%"&&(i++,a==="%c"&&(n=i))}),e.splice(n,0,r)}}function CSt(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function LSt(e){try{e==null?Mv.storage.removeItem("debug"):Mv.storage.debug=e}catch(t){}}function qAe(){var e;try{e=Mv.storage.debug}catch(t){}return!e&&typeof process!="undefined"&&"env"in process&&(e=process.env.DEBUG),e}Mv.enable(qAe());function PSt(){try{return window.localStorage}catch(e){}}});var WAe=ne((mur,YAe)=>{var n3=BS(),Zm=OAe()("stream-parser");YAe.exports=DSt;var NAe=-1,sR=0,RSt=1,UAe=2;function DSt(e){var t=e&&typeof e._transform=="function",r=e&&typeof e._write=="function";if(!t&&!r)throw new Error("must pass a Writable or Transform stream in");Zm("extending Parser into stream"),e._bytes=ISt,e._skipBytes=FSt,t&&(e._passthrough=qSt),t?e._transform=OSt:e._write=zSt}function rE(e){Zm("initializing parser stream"),e._parserBytesLeft=0,e._parserBuffers=[],e._parserBuffered=0,e._parserState=NAe,e._parserCallback=null,typeof e.push=="function"&&(e._parserOutput=e.push.bind(e)),e._parserInit=!0}function ISt(e,t){n3(!this._parserCallback,'there is already a "callback" set!'),n3(isFinite(e)&&e>0,'can only buffer a finite number of bytes > 0, got "'+e+'"'),this._parserInit||rE(this),Zm("buffering %o bytes",e),this._parserBytesLeft=e,this._parserCallback=t,this._parserState=sR}function FSt(e,t){n3(!this._parserCallback,'there is already a "callback" set!'),n3(e>0,'can only skip > 0 bytes, got "'+e+'"'),this._parserInit||rE(this),Zm("skipping %o bytes",e),this._parserBytesLeft=e,this._parserCallback=t,this._parserState=RSt}function qSt(e,t){n3(!this._parserCallback,'There is already a "callback" set!'),n3(e>0,'can only pass through > 0 bytes, got "'+e+'"'),this._parserInit||rE(this),Zm("passing through %o bytes",e),this._parserBytesLeft=e,this._parserCallback=t,this._parserState=UAe}function zSt(e,t,r){this._parserInit||rE(this),Zm("write(%o bytes)",e.length),typeof t=="function"&&(r=t),HAe(this,e,null,r)}function OSt(e,t,r){this._parserInit||rE(this),Zm("transform(%o bytes)",e.length),typeof t!="function"&&(t=this._parserOutput),HAe(this,e,t,r)}function VAe(e,t,r,i){return e._parserBytesLeft<=0?i(new Error("got data but not currently parsing anything")):t.length<=e._parserBytesLeft?function(){return BAe(e,t,r,i)}:function(){var n=t.slice(0,e._parserBytesLeft);return BAe(e,n,r,function(a){if(a)return i(a);if(t.length>n.length)return function(){return VAe(e,t.slice(n.length),r,i)}})}}function BAe(e,t,r,i){if(e._parserBytesLeft-=t.length,Zm("%o bytes left for stream piece",e._parserBytesLeft),e._parserState===sR?(e._parserBuffers.push(t),e._parserBuffered+=t.length):e._parserState===UAe&&r(t),e._parserBytesLeft===0){var n=e._parserCallback;if(n&&e._parserState===sR&&e._parserBuffers.length>1&&(t=Buffer.concat(e._parserBuffers,e._parserBuffered)),e._parserState!==sR&&(t=null),e._parserCallback=null,e._parserBuffered=0,e._parserState=NAe,e._parserBuffers.splice(0),n){var a=[];t&&a.push(t),r&&a.push(r);var o=n.length>a.length;o&&a.push(GAe(i));var s=n.apply(e,a);if(!o||i===s)return i}}else return i}var HAe=GAe(VAe);function GAe(e){return function(){for(var t=e.apply(this,arguments);typeof t=="function";)t=t();return t}}});var Ns=ne(sy=>{"use strict";var XAe=B3e().Transform,BSt=WAe();function nE(){XAe.call(this,{readableObjectMode:!0})}nE.prototype=Object.create(XAe.prototype);nE.prototype.constructor=nE;BSt(nE.prototype);sy.ParserStream=nE;sy.sliceEq=function(e,t,r){for(var i=t,n=0;n<r.length;)if(e[i++]!==r[n++])return!1;return!0};sy.str2arr=function(e,t){var r=[],i=0;if(t&&t==="hex")for(;i<e.length;)r.push(parseInt(e.slice(i,i+2),16)),i+=2;else for(;i<e.length;i++)r.push(e.charCodeAt(i)&255);return r};sy.readUInt16LE=function(e,t){return e[t]|e[t+1]<<8};sy.readUInt16BE=function(e,t){return e[t+1]|e[t]<<8};sy.readUInt32LE=function(e,t){return e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]*16777216};sy.readUInt32BE=function(e,t){return e[t+3]|e[t+2]<<8|e[t+1]<<16|e[t]*16777216};function lR(e,t,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=e,t&&(this.code=t),r&&(this.statusCode=r)}lR.prototype=Object.create(Error.prototype);lR.prototype.constructor=lR;sy.ProbeError=lR});var ZAe=ne((_ur,uR)=>{"use strict";var i3=Ns().readUInt16BE,XV=Ns().readUInt32BE;function iE(e,t){if(e.length<4+t)return null;var r=XV(e,t);return e.length<r+t||r<8?null:{boxtype:String.fromCharCode.apply(null,e.slice(t+4,t+8)),data:e.slice(t+8,t+r),end:t+r}}uR.exports.unbox=iE;function NSt(e,t){for(var r=0;;){var i=iE(e,r);if(!i)break;switch(i.boxtype){case"ispe":t.sizes.push({width:XV(i.data,4),height:XV(i.data,8)});break;case"irot":t.transforms.push({type:"irot",value:i.data[0]&3});break;case"imir":t.transforms.push({type:"imir",value:i.data[0]&1});break}r=i.end}}function WV(e,t,r){for(var i=0,n=0;n<r;n++)i=i*256+(e[t+n]||0);return i}function USt(e,t){for(var r=e[4]>>4&15,i=e[4]&15,n=e[5]>>4&15,a=i3(e,6),o=8,s=0;s<a;s++){var l=i3(e,o);o+=2;var u=i3(e,o);o+=2;var f=WV(e,o,n);o+=n;var c=i3(e,o);if(o+=2,u===0&&c===1){var h=WV(e,o,r),v=WV(e,o+r,i);t.item_loc[l]={length:v,offset:h+f}}o+=c*(r+i)}}function VSt(e,t){for(var r=i3(e,4),i=6,n=0;n<r;n++){var a=iE(e,i);if(!a)break;if(a.boxtype==="infe"){for(var o=i3(a.data,4),s="",l=8;l<a.data.length&&a.data[l];l++)s+=String.fromCharCode(a.data[l]);t.item_inf[s]=o}i=a.end}}function HSt(e,t){for(var r=0;;){var i=iE(e,r);if(!i)break;i.boxtype==="ipco"&&NSt(i.data,t),r=i.end}}function GSt(e,t){for(var r=4;;){var i=iE(e,r);if(!i)break;i.boxtype==="iprp"&&HSt(i.data,t),i.boxtype==="iloc"&&USt(i.data,t),i.boxtype==="iinf"&&VSt(i.data,t),r=i.end}}function YSt(e){var t=e.reduce(function(n,a){return n.width>a.width||n.width===a.width&&n.height>a.height?n:a}),r=e.reduce(function(n,a){return n.height>a.height||n.height===a.height&&n.width>a.width?n:a}),i;return t.width>r.height||t.width===r.height&&t.height>r.width?i=t:i=r,i}uR.exports.readSizeFromMeta=function(e){var t={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(GSt(e,t),!!t.sizes.length){var r=YSt(t.sizes),i=1;t.transforms.forEach(function(a){var o={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},s={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(a.type==="imir"&&(a.value===0?i=s[i]:(i=s[i],i=o[i],i=o[i])),a.type==="irot")for(var l=0;l<a.value;l++)i=o[i]});var n=null;return t.item_inf.Exif&&(n=t.item_loc[t.item_inf.Exif]),{width:r.width,height:r.height,orientation:t.transforms.length?i:null,variants:t.sizes,exif_location:n}}};uR.exports.getMimeType=function(e){var t=String.fromCharCode.apply(null,e.slice(0,4)),r={};r[t]=!0;for(var i=8;i<e.length;i+=4)r[String.fromCharCode.apply(null,e.slice(i,i+4))]=!0;if(!(!r.mif1&&!r.msf1&&!r.miaf))return t==="avif"||t==="avis"||t==="avio"?{type:"avif",mime:"image/avif"}:t==="heic"||t==="heix"?{type:"heic",mime:"image/heic"}:t==="hevc"||t==="hevx"?{type:"heic",mime:"image/heic-sequence"}:r.avif||r.avis?{type:"avif",mime:"image/avif"}:r.heic||r.heix||r.hevc||r.hevx||r.heis?r.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}});var cR=ne((bur,ZV)=>{"use strict";function fR(e,t){var r=new Error(e);return r.code=t,r}function WSt(e){try{return decodeURIComponent(escape(e))}catch(t){return e}}function ly(e,t,r){this.input=e.subarray(t,r),this.start=t;var i=String.fromCharCode.apply(null,this.input.subarray(0,4));if(i!=="II*\0"&&i!=="MM\0*")throw fR("invalid TIFF signature","EBADDATA");this.big_endian=i[0]==="M"}ly.prototype.each=function(e){this.aborted=!1;var t=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:t}];this.ifds_to_read.length>0&&!this.aborted;){var r=this.ifds_to_read.shift();r.offset&&this.scan_ifd(r.id,r.offset,e)}};ly.prototype.read_uint16=function(e){var t=this.input;if(e+2>t.length)throw fR("unexpected EOF","EBADDATA");return this.big_endian?t[e]*256+t[e+1]:t[e]+t[e+1]*256};ly.prototype.read_uint32=function(e){var t=this.input;if(e+4>t.length)throw fR("unexpected EOF","EBADDATA");return this.big_endian?t[e]*16777216+t[e+1]*65536+t[e+2]*256+t[e+3]:t[e]+t[e+1]*256+t[e+2]*65536+t[e+3]*16777216};ly.prototype.is_subifd_link=function(e,t){return e===0&&t===34665||e===0&&t===34853||e===34665&&t===40965};ly.prototype.exif_format_length=function(e){switch(e){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}};ly.prototype.exif_format_read=function(e,t){var r;switch(e){case 1:case 2:return r=this.input[t],r;case 6:return r=this.input[t],r|(r&128)*33554430;case 3:return r=this.read_uint16(t),r;case 8:return r=this.read_uint16(t),r|(r&32768)*131070;case 4:return r=this.read_uint32(t),r;case 9:return r=this.read_uint32(t),r|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}};ly.prototype.scan_ifd=function(e,t,r){var i=this.read_uint16(t);t+=2;for(var n=0;n<i;n++){var a=this.read_uint16(t),o=this.read_uint16(t+2),s=this.read_uint32(t+4),l=this.exif_format_length(o),u=s*l,f=u<=4?t+8:this.read_uint32(t+8),c=!1;if(f+u>this.input.length)throw fR("unexpected EOF","EBADDATA");for(var h=[],v=f,d=0;d<s;d++,v+=l){var _=this.exif_format_read(o,v);if(_===null){h=null;break}h.push(_)}Array.isArray(h)&&o===2&&(h=WSt(String.fromCharCode.apply(null,h)),h&&h[h.length-1]==="\0"&&(h=h.slice(0,-1))),this.is_subifd_link(e,a)&&Array.isArray(h)&&Number.isInteger(h[0])&&h[0]>0&&(this.ifds_to_read.push({id:a,offset:h[0]}),c=!0);var T={is_big_endian:this.big_endian,ifd:e,tag:a,format:o,count:s,entry_offset:t+this.start,data_length:u,data_offset:f+this.start,value:h,is_subifd_link:c};if(r(T)===!1){this.aborted=!0;return}t+=12}e===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(t)})};ZV.exports.ExifParser=ly;ZV.exports.get_orientation=function(e){var t=0;try{return new ly(e,0,e.length).each(function(r){if(r.ifd===0&&r.tag===274&&Array.isArray(r.value))return t=r.value[0],!1}),t}catch(r){return-1}}});var KAe=ne((wur,jAe)=>{"use strict";var XSt=Ns().str2arr,ZSt=Ns().sliceEq,jSt=Ns().readUInt32BE,hR=ZAe(),KSt=cR(),JSt=XSt("ftyp");jAe.exports=function(e){if(ZSt(e,4,JSt)){var t=hR.unbox(e,0);if(t){var r=hR.getMimeType(t.data);if(r){for(var i,n=t.end;;){var a=hR.unbox(e,n);if(!a)break;if(n=a.end,a.boxtype==="mdat")return;if(a.boxtype==="meta"){i=a.data;break}}if(i){var o=hR.readSizeFromMeta(i);if(o){var s={width:o.width,height:o.height,type:r.type,mime:r.mime,wUnits:"px",hUnits:"px"};if(o.variants.length>1&&(s.variants=o.variants),o.orientation&&(s.orientation=o.orientation),o.exif_location&&o.exif_location.offset+o.exif_location.length<=e.length){var l=jSt(e,o.exif_location.offset),u=e.slice(o.exif_location.offset+l+4,o.exif_location.offset+o.exif_location.length),f=KSt.get_orientation(u);f>0&&(s.orientation=f)}return s}}}}}}});var $Ae=ne((Tur,QAe)=>{"use strict";var QSt=Ns().str2arr,$St=Ns().sliceEq,JAe=Ns().readUInt16LE,eEt=QSt("BM");QAe.exports=function(e){if(!(e.length<26)&&$St(e,0,eEt))return{width:JAe(e,18),height:JAe(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}});var iMe=ne((Aur,nMe)=>{"use strict";var rMe=Ns().str2arr,eMe=Ns().sliceEq,tMe=Ns().readUInt16LE,tEt=rMe("GIF87a"),rEt=rMe("GIF89a");nMe.exports=function(e){if(!(e.length<10)&&!(!eMe(e,0,tEt)&&!eMe(e,0,rEt)))return{width:tMe(e,6),height:tMe(e,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}});var sMe=ne((Mur,oMe)=>{"use strict";var jV=Ns().readUInt16LE,nEt=0,iEt=1,aMe=16;oMe.exports=function(e){var t=jV(e,0),r=jV(e,2),i=jV(e,4);if(!(t!==nEt||r!==iEt||!i)){for(var n=[],a={width:0,height:0},o=0;o<i;o++){var s=e[6+aMe*o]||256,l=e[6+aMe*o+1]||256,u={width:s,height:l};n.push(u),(s>a.width||l>a.height)&&(a=u)}return{width:a.width,height:a.height,variants:n,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}});var uMe=ne((Sur,lMe)=>{"use strict";var KV=Ns().readUInt16BE,aEt=Ns().str2arr,oEt=Ns().sliceEq,sEt=cR(),lEt=aEt("Exif\0\0");lMe.exports=function(e){if(!(e.length<2)&&!(e[0]!==255||e[1]!==216||e[2]!==255))for(var t=2;;){for(;;){if(e.length-t<2)return;if(e[t++]===255)break}for(var r=e[t++],i;r===255;)r=e[t++];if(208<=r&&r<=217||r===1)i=0;else if(192<=r&&r<=254){if(e.length-t<2)return;i=KV(e,t)-2,t+=2}else return;if(r===217||r===218)return;var n;if(r===225&&i>=10&&oEt(e,t,lEt)&&(n=sEt.get_orientation(e.slice(t+6,t+i))),i>=5&&192<=r&&r<=207&&r!==196&&r!==200&&r!==204){if(e.length-t<i)return;var a={width:KV(e,t+3),height:KV(e,t+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return n>0&&(a.orientation=n),a}t+=i}}});var dMe=ne((Eur,vMe)=>{"use strict";var hMe=Ns().str2arr,fMe=Ns().sliceEq,cMe=Ns().readUInt32BE,uEt=hMe(`\x89PNG\r

`),fEt=hMe("IHDR");vMe.exports=function(e){if(!(e.length<24)&&fMe(e,0,uEt)&&fMe(e,12,fEt))return{width:cMe(e,16),height:cMe(e,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}});var yMe=ne((kur,gMe)=>{"use strict";var cEt=Ns().str2arr,hEt=Ns().sliceEq,pMe=Ns().readUInt32BE,vEt=cEt("8BPS\0");gMe.exports=function(e){if(!(e.length<22)&&hEt(e,0,vEt))return{width:pMe(e,18),height:pMe(e,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}});var _Me=ne((Cur,xMe)=>{"use strict";function dEt(e){return e===32||e===9||e===13||e===10}function a3(e){return typeof e=="number"&&isFinite(e)&&e>0}function pEt(e){var t=0,r=e.length;for(e[0]===239&&e[1]===187&&e[2]===191&&(t=3);t<r&&dEt(e[t]);)t++;return t===r?!1:e[t]===60}var gEt=/<[-_.:a-zA-Z0-9][^>]*>/,yEt=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,mEt=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,xEt=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,_Et=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,mMe=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function bEt(e){var t=e.match(mEt),r=e.match(xEt),i=e.match(_Et);return{width:t&&(t[1]||t[2]),height:r&&(r[1]||r[2]),viewbox:i&&(i[1]||i[2])}}function og(e){return mMe.test(e)?e.match(mMe)[0]:"px"}xMe.exports=function(e){if(pEt(e)){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);var i=(t.match(gEt)||[""])[0];if(yEt.test(i)){var n=bEt(i),a=parseFloat(n.width),o=parseFloat(n.height);if(n.width&&n.height)return!a3(a)||!a3(o)?void 0:{width:a,height:o,type:"svg",mime:"image/svg+xml",wUnits:og(n.width),hUnits:og(n.height)};var s=(n.viewbox||"").split(" "),l={width:s[2],height:s[3]},u=parseFloat(l.width),f=parseFloat(l.height);if(!(!a3(u)||!a3(f))&&og(l.width)===og(l.height)){var c=u/f;return n.width?a3(a)?{width:a,height:a/c,type:"svg",mime:"image/svg+xml",wUnits:og(n.width),hUnits:og(n.width)}:void 0:n.height?a3(o)?{width:o*c,height:o,type:"svg",mime:"image/svg+xml",wUnits:og(n.height),hUnits:og(n.height)}:void 0:{width:u,height:f,type:"svg",mime:"image/svg+xml",wUnits:og(l.width),hUnits:og(l.height)}}}}}});var MMe=ne((Lur,AMe)=>{"use strict";var TMe=Ns().str2arr,bMe=Ns().sliceEq,wEt=Ns().readUInt16LE,TEt=Ns().readUInt16BE,AEt=Ns().readUInt32LE,MEt=Ns().readUInt32BE,SEt=TMe("II*\0"),EEt=TMe("MM\0*");function vR(e,t,r){return r?TEt(e,t):wEt(e,t)}function JV(e,t,r){return r?MEt(e,t):AEt(e,t)}function wMe(e,t,r){var i=vR(e,t+2,r),n=JV(e,t+4,r);return n!==1||i!==3&&i!==4?null:i===3?vR(e,t+8,r):JV(e,t+8,r)}AMe.exports=function(e){if(!(e.length<8)&&!(!bMe(e,0,SEt)&&!bMe(e,0,EEt))){var t=e[0]===77,r=JV(e,4,t)-8;if(!(r<0)){var i=r+8;if(!(e.length-i<2)){var n=vR(e,i+0,t)*12;if(!(n<=0)&&(i+=2,!(e.length-i<n))){var a,o,s,l;for(a=0;a<n;a+=12)l=vR(e,i+a,t),l===256?o=wMe(e,i+a,t):l===257&&(s=wMe(e,i+a,t));if(o&&s)return{width:o,height:s,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}}});var LMe=ne((Pur,CMe)=>{"use strict";var kMe=Ns().str2arr,SMe=Ns().sliceEq,EMe=Ns().readUInt16LE,QV=Ns().readUInt32LE,kEt=cR(),CEt=kMe("RIFF"),LEt=kMe("WEBP");function PEt(e,t){if(!(e[t+3]!==157||e[t+4]!==1||e[t+5]!==42))return{width:EMe(e,t+6)&16383,height:EMe(e,t+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function REt(e,t){if(e[t]===47){var r=QV(e,t+1);return{width:(r&16383)+1,height:(r>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function DEt(e,t){return{width:(e[t+6]<<16|e[t+5]<<8|e[t+4])+1,height:(e[t+9]<<t|e[t+8]<<8|e[t+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}CMe.exports=function(e){if(!(e.length<16)&&!(!SMe(e,0,CEt)&&!SMe(e,8,LEt))){var t=12,r=null,i=0,n=QV(e,4)+8;if(!(n>e.length)){for(;t+8<n;){if(e[t]===0){t++;continue}var a=String.fromCharCode.apply(null,e.slice(t,t+4)),o=QV(e,t+4);a==="VP8 "&&o>=10?r=r||PEt(e,t+8):a==="VP8L"&&o>=9?r=r||REt(e,t+8):a==="VP8X"&&o>=10?r=r||DEt(e,t+8):a==="EXIF"&&(i=kEt.get_orientation(e.slice(t+8,t+8+o)),t=1/0),t+=8+o}if(r)return i>0&&(r.orientation=i),r}}}});var RMe=ne((Rur,PMe)=>{"use strict";PMe.exports={avif:KAe(),bmp:$Ae(),gif:iMe(),ico:sMe(),jpeg:uMe(),png:dMe(),psd:yMe(),svg:_Me(),tiff:MMe(),webp:LMe()}});var DMe=ne((Dur,eH)=>{"use strict";var $V=RMe();function IEt(e){for(var t=Object.keys($V),r=0;r<t.length;r++){var i=$V[t[r]](e);if(i)return i}return null}eH.exports=function(t){return IEt(t)};eH.exports.parsers=$V});var FMe=ne(IMe=>{"use strict";var FEt=DMe(),qEt=Wg().IMAGE_URL_PREFIX,zEt=e_().Buffer;IMe.getImageSize=function(e){var t=e.replace(qEt,""),r=new zEt(t,"base64");return FEt(r)}});var OMe=ne((Fur,zMe)=>{"use strict";var qMe=Wt(),OEt=Dw(),BEt=la(),dR=Xi(),NEt=Wt().maxRowLength,UEt=FMe().getImageSize;zMe.exports=function(t,r){var i,n;if(r._hasZ)i=r.z.length,n=NEt(r.z);else if(r._hasSource){var a=UEt(r.source);i=a.height,n=a.width}var o=dR.getFromId(t,r.xaxis||"x"),s=dR.getFromId(t,r.yaxis||"y"),l=o.d2c(r.x0)-r.dx/2,u=s.d2c(r.y0)-r.dy/2,f,c=[l,l+n*r.dx],h=[u,u+i*r.dy];if(o&&o.type==="log")for(f=0;f<n;f++)c.push(l+f*r.dx);if(s&&s.type==="log")for(f=0;f<i;f++)h.push(u+f*r.dy);r._extremes[o._id]=dR.findExtremes(o,c),r._extremes[s._id]=dR.findExtremes(s,h),r._scaler=GEt(r);var v={x0:l,y0:u,z:r.z,w:n,h:i};return[v]};function VEt(e,t,r,i){return function(n){return qMe.constrain((n-e)*t,r,i)}}function HEt(e,t){return function(r){return qMe.constrain(r,e,t)}}function GEt(e){var t=OEt.colormodel[e.colormodel],r=t.colormodel||e.colormodel,i=r.length;e._sArray=[];for(var n=0;n<i;n++)t.min[n]!==e.zmin[n]||t.max[n]!==e.zmax[n]?e._sArray.push(VEt(e.zmin[n],(t.max[n]-t.min[n])/(e.zmax[n]-e.zmin[n]),t.min[n],t.max[n])):e._sArray.push(HEt(t.min[n],t.max[n]));return function(a){for(var o=a.slice(0,i),s=0;s<i;s++){var l=o[s];if(!BEt(l))return!1;o[s]=e._sArray[s](l)}return o}}});var UMe=ne((qur,NMe)=>{"use strict";var YEt=Ai(),p_=Wt(),BMe=p_.strTranslate,WEt=kd(),XEt=Dw(),ZEt=GN(),jEt=mP().STYLE;NMe.exports=function(t,r,i,n){var a=r.xaxis,o=r.yaxis,s=!t._context._exportedPlot&&ZEt();p_.makeTraceGroups(n,i,"im").each(function(l){var u=YEt.select(this),f=l[0],c=f.trace,h=(c.zsmooth==="fast"||c.zsmooth===!1&&s)&&!c._hasZ&&c._hasSource&&a.type==="linear"&&o.type==="linear";c._realImage=h;var v=f.z,d=f.x0,_=f.y0,T=f.w,p=f.h,M=c.dx,b=c.dy,w,k,x,E,S,g;for(g=0;w===void 0&&g<T;)w=a.c2p(d+g*M),g++;for(g=T;k===void 0&&g>0;)k=a.c2p(d+g*M),g--;for(g=0;E===void 0&&g<p;)E=o.c2p(_+g*b),g++;for(g=p;S===void 0&&g>0;)S=o.c2p(_+g*b),g--;if(k<w&&(x=k,k=w,w=x),S<E&&(x=E,E=S,S=x),!h){var C=.5;w=Math.max(-C*a._length,w),k=Math.min((1+C)*a._length,k),E=Math.max(-C*o._length,E),S=Math.min((1+C)*o._length,S)}var A=Math.round(k-w),P=Math.round(S-E),D=A<=0||P<=0;if(D){var z=u.selectAll("image").data([]);z.exit().remove();return}function O(K){var X=document.createElement("canvas");X.width=A,X.height=P;var ae=X.getContext("2d",{willReadFrequently:!0}),oe=function(Pe){return p_.constrain(Math.round(a.c2p(d+Pe*M)-w),0,A)},me=function(Pe){return p_.constrain(Math.round(o.c2p(_+Pe*b)-E),0,P)},xe=XEt.colormodel[c.colormodel],ce=xe.colormodel||c.colormodel,ie=xe.fmt,ge;for(g=0;g<f.w;g++){var le=oe(g),we=oe(g+1);if(!(we===le||isNaN(we)||isNaN(le)))for(var Re=0;Re<f.h;Re++){var qe=me(Re),et=me(Re+1);et===qe||isNaN(et)||isNaN(qe)||!K(g,Re)||(ge=c._scaler(K(g,Re)),ge?ae.fillStyle=ce+"("+ie(ge).join(",")+")":ae.fillStyle="rgba(0,0,0,0)",ae.fillRect(le,qe,we-le,et-qe))}}return X}var V=u.selectAll("image").data([l]);V.enter().append("svg:image").attr({xmlns:WEt.svg,preserveAspectRatio:"none"}),V.exit().remove();var B=c.zsmooth===!1?jEt:"";if(h){var F=p_.simpleMap(a.range,a.r2l),N=p_.simpleMap(o.range,o.r2l),Z=F[1]<F[0],J=N[1]>N[0];if(Z||J){var re=w+A/2,ue=E+P/2;B+="transform:"+BMe(re+"px",ue+"px")+"scale("+(Z?-1:1)+","+(J?-1:1)+")"+BMe(-re+"px",-ue+"px")+";"}}V.attr("style",B);var fe=new Promise(function(K){if(c._hasZ)K();else if(c._hasSource)if(c._canvas&&c._canvas.el.width===T&&c._canvas.el.height===p&&c._canvas.source===c.source)K();else{var X=document.createElement("canvas");X.width=T,X.height=p;var ae=X.getContext("2d",{willReadFrequently:!0});c._image=c._image||new Image;var oe=c._image;oe.onload=function(){ae.drawImage(oe,0,0),c._canvas={el:X,source:c.source},K()},oe.setAttribute("src",c.source)}}).then(function(){var K,X;if(c._hasZ)X=O(function(me,xe){var ce=v[xe][me];return p_.isTypedArray(ce)&&(ce=Array.from(ce)),ce}),K=X.toDataURL("image/png");else if(c._hasSource)if(h)K=c.source;else{var ae=c._canvas.el.getContext("2d",{willReadFrequently:!0}),oe=ae.getImageData(0,0,T,p).data;X=O(function(me,xe){var ce=4*(xe*T+me);return[oe[ce],oe[ce+1],oe[ce+2],oe[ce+3]]}),K=X.toDataURL("image/png")}V.attr({"xlink:href":K,height:P,width:A,x:w,y:E})});t._promises.push(fe)})}});var HMe=ne((zur,VMe)=>{"use strict";var KEt=Ai();VMe.exports=function(t){KEt.select(t).selectAll(".im image").style("opacity",function(r){return r[0].trace.opacity})}});var XMe=ne((Our,WMe)=>{"use strict";var GMe=Ol(),YMe=Wt(),pR=YMe.isArrayOrTypedArray,JEt=Dw();WMe.exports=function(t,r,i){var n=t.cd[0],a=n.trace,o=t.xa,s=t.ya;if(!(GMe.inbox(r-n.x0,r-(n.x0+n.w*a.dx),0)>0||GMe.inbox(i-n.y0,i-(n.y0+n.h*a.dy),0)>0)){var l=Math.floor((r-n.x0)/a.dx),u=Math.floor(Math.abs(i-n.y0)/a.dy),f;if(a._hasZ?f=n.z[u][l]:a._hasSource&&(f=a._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(l,u,1,1).data),!!f){var c=n.hi||a.hoverinfo,h;if(c){var v=c.split("+");v.indexOf("all")!==-1&&(v=["color"]),v.indexOf("color")!==-1&&(h=!0)}var d=JEt.colormodel[a.colormodel],_=d.colormodel||a.colormodel,T=_.length,p=a._scaler(f),M=d.suffix,b=[];(a.hovertemplate||h)&&(b.push("["+[p[0]+M[0],p[1]+M[1],p[2]+M[2]].join(", ")),T===4&&b.push(", "+p[3]+M[3]),b.push("]"),b=b.join(""),t.extraText=_.toUpperCase()+": "+b);var w;pR(a.hovertext)&&pR(a.hovertext[u])?w=a.hovertext[u][l]:pR(a.text)&&pR(a.text[u])&&(w=a.text[u][l]);var k=s.c2p(n.y0+(u+.5)*a.dy),x=n.x0+(l+.5)*a.dx,E=n.y0+(u+.5)*a.dy,S="["+f.slice(0,a.colormodel.length).join(", ")+"]";return[YMe.extendFlat(t,{index:[u,l],x0:o.c2p(n.x0+l*a.dx),x1:o.c2p(n.x0+(l+1)*a.dx),y0:k,y1:k,color:p,xVal:x,xLabelVal:x,yVal:E,yLabelVal:E,zLabelVal:S,text:w,hovertemplateLabels:{zLabel:S,colorLabel:b,"color[0]Label":p[0]+M[0],"color[1]Label":p[1]+M[1],"color[2]Label":p[2]+M[2],"color[3]Label":p[3]+M[3]}})]}}}});var jMe=ne((Bur,ZMe)=>{"use strict";ZMe.exports=function(t,r){return"xVal"in r&&(t.x=r.xVal),"yVal"in r&&(t.y=r.yVal),r.xa&&(t.xaxis=r.xa),r.ya&&(t.yaxis=r.ya),t.color=r.color,t.colormodel=r.trace.colormodel,t.z||(t.z=r.color),t}});var JMe=ne((Nur,KMe)=>{"use strict";KMe.exports={attributes:tU(),supplyDefaults:Wbe(),calc:OMe(),plot:UMe(),style:HMe(),hoverPoints:XMe(),eventData:jMe(),moduleType:"trace",name:"image",basePlotModule:vu(),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}});var $Me=ne((Uur,QMe)=>{"use strict";QMe.exports=JMe()});var g_=ne((Vur,eSe)=>{"use strict";var QEt=es(),$Et=fl().attributes,e5t=ll(),t5t=Ku(),r5t=Ba().hovertemplateAttrs,n5t=Ba().texttemplateAttrs,o3=oa().extendFlat,i5t=hc().pattern,aE=e5t({editType:"plot",arrayOk:!0,colorEditType:"plot"});eSe.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:t5t.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:i5t,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:o3({},QEt.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:r5t({},{keys:["label","color","value","percent","text"]}),texttemplate:n5t({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:o3({},aE,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:o3({},aE,{}),outsidetextfont:o3({},aE,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:o3({},aE,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:$Et({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:o3({},aE,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}});var y_=ne((Hur,nSe)=>{"use strict";var a5t=la(),oE=Wt(),o5t=g_(),s5t=fl().defaults,l5t=Fd().handleText,u5t=Wt().coercePattern;function tSe(e,t){var r=oE.isArrayOrTypedArray(e),i=oE.isArrayOrTypedArray(t),n=Math.min(r?e.length:1/0,i?t.length:1/0);if(isFinite(n)||(n=0),n&&i){for(var a,o=0;o<n;o++){var s=t[o];if(a5t(s)&&s>0){a=!0;break}}a||(n=0)}return{hasLabels:r,hasValues:i,len:n}}function rSe(e,t,r,i,n){var a=i("marker.line.width");a&&i("marker.line.color",n?void 0:r.paper_bgcolor);var o=i("marker.colors");u5t(i,"marker.pattern",o),e.marker&&!t.marker.pattern.fgcolor&&(t.marker.pattern.fgcolor=e.marker.colors),t.marker.pattern.bgcolor||(t.marker.pattern.bgcolor=r.paper_bgcolor)}function f5t(e,t,r,i){function n(M,b){return oE.coerce(e,t,o5t,M,b)}var a=n("labels"),o=n("values"),s=tSe(a,o),l=s.len;if(t._hasLabels=s.hasLabels,t._hasValues=s.hasValues,!t._hasLabels&&t._hasValues&&(n("label0"),n("dlabel")),!l){t.visible=!1;return}t._length=l,rSe(e,t,i,n,!0),n("scalegroup");var u=n("text"),f=n("texttemplate"),c;if(f||(c=n("textinfo",oE.isArrayOrTypedArray(u)?"text+percent":"percent")),n("hovertext"),n("hovertemplate"),f||c&&c!=="none"){var h=n("textposition");l5t(e,t,i,n,h,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var v=Array.isArray(h)||h==="auto",d=v||h==="outside";d&&n("automargin"),(h==="inside"||h==="auto"||Array.isArray(h))&&n("insidetextorientation")}else c==="none"&&n("textposition","none");s5t(t,i,n);var _=n("hole"),T=n("title.text");if(T){var p=n("title.position",_?"middle center":"top center");!_&&p==="middle center"&&(t.title.position="top center"),oE.coerceFont(n,"title.font",i.font)}n("sort"),n("direction"),n("rotation"),n("pull")}nSe.exports={handleLabelsAndValues:tSe,handleMarkerDefaults:rSe,supplyDefaults:f5t}});var gR=ne((Gur,iSe)=>{"use strict";iSe.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}});var oSe=ne((Yur,aSe)=>{"use strict";var c5t=Wt(),h5t=gR();aSe.exports=function(t,r){function i(n,a){return c5t.coerce(t,r,h5t,n,a)}i("hiddenlabels"),i("piecolorway",r.colorway),i("extendpiecolors")}});var s3=ne((Wur,uSe)=>{"use strict";var v5t=la(),tH=Xf(),d5t=_i(),p5t={};function g5t(e,t){var r=[],i=e._fullLayout,n=i.hiddenlabels||[],a=t.labels,o=t.marker.colors||[],s=t.values,l=t._length,u=t._hasValues&&l,f,c;if(t.dlabel)for(a=new Array(l),f=0;f<l;f++)a[f]=String(t.label0+f*t.dlabel);var h={},v=sSe(i["_"+t.type+"colormap"]),d=0,_=!1;for(f=0;f<l;f++){var T,p,M;if(u){if(T=s[f],!v5t(T))continue;T=+T}else T=1;p=a[f],(p===void 0||p==="")&&(p=f),p=String(p);var b=h[p];b===void 0?(h[p]=r.length,M=n.indexOf(p)!==-1,M||(d+=T),r.push({v:T,label:p,color:v(o[f],p),i:f,pts:[f],hidden:M})):(_=!0,c=r[b],c.v+=T,c.pts.push(f),c.hidden||(d+=T),c.color===!1&&o[f]&&(c.color=v(o[f],p)))}r=r.filter(function(k){return k.v>=0});var w=t.type==="funnelarea"?_:t.sort;return w&&r.sort(function(k,x){return x.v-k.v}),r[0]&&(r[0].vTotal=d),r}function sSe(e){return function(r,i){return!r||(r=tH(r),!r.isValid())?!1:(r=d5t.addOpacity(r,r.getAlpha()),e[i]||(e[i]=r),r)}}function y5t(e,t){var r=(t||{}).type;r||(r="pie");var i=e._fullLayout,n=e.calcdata,a=i[r+"colorway"],o=i["_"+r+"colormap"];i["extend"+r+"colors"]&&(a=lSe(a,p5t));for(var s=0,l=0;l<n.length;l++){var u=n[l],f=u[0].trace.type;if(f===r)for(var c=0;c<u.length;c++){var h=u[c];h.color===!1&&(o[h.label]?h.color=o[h.label]:(o[h.label]=h.color=a[s%a.length],s++))}}}function lSe(e,t){var r,i=JSON.stringify(e),n=t[i];if(!n){for(n=e.slice(),r=0;r<e.length;r++)n.push(tH(e[r]).lighten(20).toHexString());for(r=0;r<e.length;r++)n.push(tH(e[r]).darken(20).toHexString());t[i]=n}return n}uSe.exports={calc:g5t,crossTraceCalc:y5t,makePullColorFn:sSe,generateExtendedColors:lSe}});var cSe=ne((Xur,fSe)=>{"use strict";var m5t=td().appendArrayMultiPointValues;fSe.exports=function(t,r){var i={curveNumber:r.index,pointNumbers:t.pts,data:r._input,fullData:r,label:t.label,color:t.color,value:t.v,percent:t.percent,text:t.text,bbox:t.bbox,v:t.v};return t.pts.length===1&&(i.pointNumber=i.i=t.pts[0]),m5t(i,r,t.pts),r.type==="funnelarea"&&(delete i.v,delete i.i),i}});var _R=ne((Zur,RSe)=>{"use strict";var hd=Ai(),x5t=Zs(),yR=Ol(),ySe=_i(),uy=aa(),Nc=Wt(),_5t=Nc.strScale,hSe=Nc.strTranslate,rH=Es(),mSe=yh(),b5t=mSe.recordMinTextSize,w5t=mSe.clearMinTextSize,xSe=Ux().TEXTPAD,ys=hm(),mR=cSe(),vSe=Wt().isValidTextValue;function T5t(e,t){var r=e._context.staticPlot,i=e._fullLayout,n=i._size;w5t("pie",i),wSe(t,e),CSe(t,n);var a=Nc.makeTraceGroups(i._pielayer,t,"trace").each(function(o){var s=hd.select(this),l=o[0],u=l.trace;R5t(o),s.attr("stroke-linejoin","round"),s.each(function(){var f=hd.select(this).selectAll("g.slice").data(o);f.enter().append("g").classed("slice",!0),f.exit().remove();var c=[[[],[]],[[],[]]],h=!1;f.each(function(w,k){if(w.hidden){hd.select(this).selectAll("path,g").remove();return}w.pointNumber=w.i,w.curveNumber=u.index,c[w.pxmid[1]<0?0:1][w.pxmid[0]<0?0:1].push(w);var x=l.cx,E=l.cy,S=hd.select(this),g=S.selectAll("path.surface").data([w]);if(g.enter().append("path").classed("surface",!0).style({"pointer-events":r?"none":"all"}),S.call(_Se,e,o),u.pull){var C=+ys.castOption(u.pull,w.pts)||0;C>0&&(x+=C*w.pxmid[0],E+=C*w.pxmid[1])}w.cxFinal=x,w.cyFinal=E;function A(F,N,Z,J){var re=J*(N[0]-F[0]),ue=J*(N[1]-F[1]);return"a"+J*l.r+","+J*l.r+" 0 "+w.largeArc+(Z?" 1 ":" 0 ")+re+","+ue}var P=u.hole;if(w.v===l.vTotal){var D="M"+(x+w.px0[0])+","+(E+w.px0[1])+A(w.px0,w.pxmid,!0,1)+A(w.pxmid,w.px0,!0,1)+"Z";P?g.attr("d","M"+(x+P*w.px0[0])+","+(E+P*w.px0[1])+A(w.px0,w.pxmid,!1,P)+A(w.pxmid,w.px0,!1,P)+"Z"+D):g.attr("d",D)}else{var z=A(w.px0,w.px1,!0,1);if(P){var O=1-P;g.attr("d","M"+(x+P*w.px1[0])+","+(E+P*w.px1[1])+A(w.px1,w.px0,!1,P)+"l"+O*w.px0[0]+","+O*w.px0[1]+z+"Z")}else g.attr("d","M"+x+","+E+"l"+w.px0[0]+","+w.px0[1]+z+"Z")}LSe(e,w,l);var V=ys.castOption(u.textposition,w.pts),B=S.selectAll("g.slicetext").data(w.text&&V!=="none"?[0]:[]);B.enter().append("g").classed("slicetext",!0),B.exit().remove(),B.each(function(){var F=Nc.ensureSingle(hd.select(this),"text","",function(X){X.attr("data-notex",1)}),N=Nc.ensureUniformFontSize(e,V==="outside"?M5t(u,w,i.font):bSe(u,w,i.font));F.text(w.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(uy.font,N).call(rH.convertToTspans,e);var Z=uy.bBox(F.node()),J;if(V==="outside")J=gSe(Z,w);else if(J=TSe(Z,w,l),V==="auto"&&J.scale<1){var re=Nc.ensureUniformFontSize(e,u.outsidetextfont);F.call(uy.font,re),Z=uy.bBox(F.node()),J=gSe(Z,w)}var ue=J.textPosAngle,fe=ue===void 0?w.pxmid:xR(l.r,ue);if(J.targetX=x+fe[0]*J.rCenter+(J.x||0),J.targetY=E+fe[1]*J.rCenter+(J.y||0),PSe(J,Z),J.outside){var K=J.targetY;w.yLabelMin=K-Z.height/2,w.yLabelMid=K,w.yLabelMax=K+Z.height/2,w.labelExtraX=0,w.labelExtraY=0,h=!0}J.fontSize=N.size,b5t(u.type,J,i),o[k].transform=J,Nc.setTransormAndDisplay(F,J)})});var v=hd.select(this).selectAll("g.titletext").data(u.title.text?[0]:[]);if(v.enter().append("g").classed("titletext",!0),v.exit().remove(),v.each(function(){var w=Nc.ensureSingle(hd.select(this),"text","",function(E){E.attr("data-notex",1)}),k=u.title.text;u._meta&&(k=Nc.templateString(k,u._meta)),w.text(k).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(uy.font,u.title.font).call(rH.convertToTspans,e);var x;u.title.position==="middle center"?x=k5t(l):x=ESe(l,n),w.attr("transform",hSe(x.x,x.y)+_5t(Math.min(1,x.scale))+hSe(x.tx,x.ty))}),h&&L5t(c,u),A5t(f,u),h&&u.automargin){var d=uy.bBox(s.node()),_=u.domain,T=n.w*(_.x[1]-_.x[0]),p=n.h*(_.y[1]-_.y[0]),M=(.5*T-l.r)/n.w,b=(.5*p-l.r)/n.h;x5t.autoMargin(e,"pie."+u.uid+".automargin",{xl:_.x[0]-M,xr:_.x[1]+M,yb:_.y[0]-b,yt:_.y[1]+b,l:Math.max(l.cx-l.r-d.left,0),r:Math.max(d.right-(l.cx+l.r),0),b:Math.max(d.bottom-(l.cy+l.r),0),t:Math.max(l.cy-l.r-d.top,0),pad:5})}})});setTimeout(function(){a.selectAll("tspan").each(function(){var o=hd.select(this);o.attr("dy")&&o.attr("dy",o.attr("dy"))})},0)}function A5t(e,t){e.each(function(r){var i=hd.select(this);if(!r.labelExtraX&&!r.labelExtraY){i.select("path.textline").remove();return}var n=i.select("g.slicetext text");r.transform.targetX+=r.labelExtraX,r.transform.targetY+=r.labelExtraY,Nc.setTransormAndDisplay(n,r.transform);var a=r.cxFinal+r.pxmid[0],o=r.cyFinal+r.pxmid[1],s="M"+a+","+o,l=(r.yLabelMax-r.yLabelMin)*(r.pxmid[0]<0?-1:1)/4;if(r.labelExtraX){var u=r.labelExtraX*r.pxmid[1]/r.pxmid[0],f=r.yLabelMid+r.labelExtraY-(r.cyFinal+r.pxmid[1]);Math.abs(u)>Math.abs(f)?s+="l"+f*r.pxmid[0]/r.pxmid[1]+","+f+"H"+(a+r.labelExtraX+l):s+="l"+r.labelExtraX+","+u+"v"+(f-u)+"h"+l}else s+="V"+(r.yLabelMid+r.labelExtraY)+"h"+l;Nc.ensureSingle(i,"path","textline").call(ySe.stroke,t.outsidetextfont.color).attr({"stroke-width":Math.min(2,t.outsidetextfont.size/8),d:s,fill:"none"})})}function _Se(e,t,r){var i=r[0],n=i.cx,a=i.cy,o=i.trace,s=o.type==="funnelarea";"_hasHoverLabel"in o||(o._hasHoverLabel=!1),"_hasHoverEvent"in o||(o._hasHoverEvent=!1),e.on("mouseover",function(l){var u=t._fullLayout,f=t._fullData[o.index];if(!(t._dragging||u.hovermode===!1)){var c=f.hoverinfo;if(Array.isArray(c)&&(c=yR.castHoverinfo({hoverinfo:[ys.castOption(c,l.pts)],_module:o._module},u,0)),c==="all"&&(c="label+text+value+percent+name"),f.hovertemplate||c!=="none"&&c!=="skip"&&c){var h=l.rInscribed||0,v=n+l.pxmid[0]*(1-h),d=a+l.pxmid[1]*(1-h),_=u.separators,T=[];if(c&&c.indexOf("label")!==-1&&T.push(l.label),l.text=ys.castOption(f.hovertext||f.text,l.pts),c&&c.indexOf("text")!==-1){var p=l.text;Nc.isValidTextValue(p)&&T.push(p)}l.value=l.v,l.valueLabel=ys.formatPieValue(l.v,_),c&&c.indexOf("value")!==-1&&T.push(l.valueLabel),l.percent=l.v/i.vTotal,l.percentLabel=ys.formatPiePercent(l.percent,_),c&&c.indexOf("percent")!==-1&&T.push(l.percentLabel);var M=f.hoverlabel,b=M.font,w=[];yR.loneHover({trace:o,x0:v-h*i.r,x1:v+h*i.r,y:d,_x0:s?n+l.TL[0]:v-h*i.r,_x1:s?n+l.TR[0]:v+h*i.r,_y0:s?a+l.TL[1]:d-h*i.r,_y1:s?a+l.BL[1]:d+h*i.r,text:T.join("<br>"),name:f.hovertemplate||c.indexOf("name")!==-1?f.name:void 0,idealAlign:l.pxmid[0]<0?"left":"right",color:ys.castOption(M.bgcolor,l.pts)||l.color,borderColor:ys.castOption(M.bordercolor,l.pts),fontFamily:ys.castOption(b.family,l.pts),fontSize:ys.castOption(b.size,l.pts),fontColor:ys.castOption(b.color,l.pts),nameLength:ys.castOption(M.namelength,l.pts),textAlign:ys.castOption(M.align,l.pts),hovertemplate:ys.castOption(f.hovertemplate,l.pts),hovertemplateLabels:l,eventData:[mR(l,f)]},{container:u._hoverlayer.node(),outerContainer:u._paper.node(),gd:t,inOut_bbox:w}),l.bbox=w[0],o._hasHoverLabel=!0}o._hasHoverEvent=!0,t.emit("plotly_hover",{points:[mR(l,f)],event:hd.event})}}),e.on("mouseout",function(l){var u=t._fullLayout,f=t._fullData[o.index],c=hd.select(this).datum();o._hasHoverEvent&&(l.originalEvent=hd.event,t.emit("plotly_unhover",{points:[mR(c,f)],event:hd.event}),o._hasHoverEvent=!1),o._hasHoverLabel&&(yR.loneUnhover(u._hoverlayer.node()),o._hasHoverLabel=!1)}),e.on("click",function(l){var u=t._fullLayout,f=t._fullData[o.index];t._dragging||u.hovermode===!1||(t._hoverdata=[mR(l,f)],yR.click(t,hd.event))})}function M5t(e,t,r){var i=ys.castOption(e.outsidetextfont.color,t.pts)||ys.castOption(e.textfont.color,t.pts)||r.color,n=ys.castOption(e.outsidetextfont.family,t.pts)||ys.castOption(e.textfont.family,t.pts)||r.family,a=ys.castOption(e.outsidetextfont.size,t.pts)||ys.castOption(e.textfont.size,t.pts)||r.size;return{color:i,family:n,size:a}}function bSe(e,t,r){var i=ys.castOption(e.insidetextfont.color,t.pts);!i&&e._input.textfont&&(i=ys.castOption(e._input.textfont.color,t.pts));var n=ys.castOption(e.insidetextfont.family,t.pts)||ys.castOption(e.textfont.family,t.pts)||r.family,a=ys.castOption(e.insidetextfont.size,t.pts)||ys.castOption(e.textfont.size,t.pts)||r.size;return{color:i||ySe.contrast(t.color),family:n,size:a}}function wSe(e,t){for(var r,i,n=0;n<e.length;n++)if(r=e[n][0],i=r.trace,i.title.text){var a=i.title.text;i._meta&&(a=Nc.templateString(a,i._meta));var o=uy.tester.append("text").attr("data-notex",1).text(a).call(uy.font,i.title.font).call(rH.convertToTspans,t),s=uy.bBox(o.node(),!0);r.titleBox={width:s.width,height:s.height},o.remove()}}function TSe(e,t,r){var i=r.r||t.rpx1,n=t.rInscribed,a=t.startangle===t.stopangle;if(a)return{rCenter:1-n,scale:0,rotate:0,textPosAngle:0};var o=t.ring,s=o===1&&Math.abs(t.startangle-t.stopangle)===Math.PI*2,l=t.halfangle,u=t.midangle,f=r.trace.insidetextorientation,c=f==="horizontal",h=f==="tangential",v=f==="radial",d=f==="auto",_=[],T;if(!d){var p=function(S,g){if(S5t(t,S)){var C=Math.abs(S-t.startangle),A=Math.abs(S-t.stopangle),P=C<A?C:A;g==="tan"?T=pSe(e,i,o,P,0):T=dSe(e,i,o,P,Math.PI/2),T.textPosAngle=S,_.push(T)}},M;if(c||h){for(M=4;M>=-4;M-=2)p(Math.PI*M,"tan");for(M=4;M>=-4;M-=2)p(Math.PI*(M+1),"tan")}if(c||v){for(M=4;M>=-4;M-=2)p(Math.PI*(M+1.5),"rad");for(M=4;M>=-4;M-=2)p(Math.PI*(M+.5),"rad")}}if(s||d||c){var b=Math.sqrt(e.width*e.width+e.height*e.height);if(T={scale:n*i*2/b,rCenter:1-n,rotate:0},T.textPosAngle=(t.startangle+t.stopangle)/2,T.scale>=1)return T;_.push(T)}(d||v)&&(T=dSe(e,i,o,l,u),T.textPosAngle=(t.startangle+t.stopangle)/2,_.push(T)),(d||h)&&(T=pSe(e,i,o,l,u),T.textPosAngle=(t.startangle+t.stopangle)/2,_.push(T));for(var w=0,k=0,x=0;x<_.length;x++){var E=_[x].scale;if(k<E&&(k=E,w=x),!d&&k>=1)break}return _[w]}function S5t(e,t){var r=e.startangle,i=e.stopangle;return r>t&&t>i||r<t&&t<i}function dSe(e,t,r,i,n){t=Math.max(0,t-2*xSe);var a=e.width/e.height,o=SSe(a,i,t,r);return{scale:o*2/e.height,rCenter:ASe(a,o/t),rotate:MSe(n)}}function pSe(e,t,r,i,n){t=Math.max(0,t-2*xSe);var a=e.height/e.width,o=SSe(a,i,t,r);return{scale:o*2/e.width,rCenter:ASe(a,o/t),rotate:MSe(n+Math.PI/2)}}function ASe(e,t){return Math.cos(t)-e*t}function MSe(e){return(180/Math.PI*e+720)%180-90}function SSe(e,t,r,i){var n=e+1/(2*Math.tan(t));return r*Math.min(1/(Math.sqrt(n*n+.5)+n),i/(Math.sqrt(e*e+i/2)+e))}function E5t(e,t){return e.v===t.vTotal&&!t.trace.hole?1:Math.min(1/(1+1/Math.sin(e.halfangle)),e.ring/2)}function gSe(e,t){var r=t.pxmid[0],i=t.pxmid[1],n=e.width/2,a=e.height/2;return r<0&&(n*=-1),i<0&&(a*=-1),{scale:1,rCenter:1,rotate:0,x:n+Math.abs(a)*(n>0?1:-1)/2,y:a/(1+r*r/(i*i)),outside:!0}}function k5t(e){var t=Math.sqrt(e.titleBox.width*e.titleBox.width+e.titleBox.height*e.titleBox.height);return{x:e.cx,y:e.cy,scale:e.trace.hole*e.r*2/t,tx:0,ty:-e.titleBox.height/2+e.trace.title.font.size}}function ESe(e,t){var r=1,i=1,n,a=e.trace,o={x:e.cx,y:e.cy},s={tx:0,ty:0};s.ty+=a.title.font.size,n=kSe(a),a.title.position.indexOf("top")!==-1?(o.y-=(1+n)*e.r,s.ty-=e.titleBox.height):a.title.position.indexOf("bottom")!==-1&&(o.y+=(1+n)*e.r);var l=C5t(e.r,e.trace.aspectratio),u=t.w*(a.domain.x[1]-a.domain.x[0])/2;return a.title.position.indexOf("left")!==-1?(u=u+l,o.x-=(1+n)*l,s.tx+=e.titleBox.width/2):a.title.position.indexOf("center")!==-1?u*=2:a.title.position.indexOf("right")!==-1&&(u=u+l,o.x+=(1+n)*l,s.tx-=e.titleBox.width/2),r=u/e.titleBox.width,i=nH(e,t)/e.titleBox.height,{x:o.x,y:o.y,scale:Math.min(r,i),tx:s.tx,ty:s.ty}}function C5t(e,t){return e/(t===void 0?1:t)}function nH(e,t){var r=e.trace,i=t.h*(r.domain.y[1]-r.domain.y[0]);return Math.min(e.titleBox.height,i/2)}function kSe(e){var t=e.pull;if(!t)return 0;var r;if(Nc.isArrayOrTypedArray(t))for(t=0,r=0;r<e.pull.length;r++)e.pull[r]>t&&(t=e.pull[r]);return t}function L5t(e,t){var r,i,n,a,o,s,l,u,f,c,h,v,d;function _(b,w){return b.pxmid[1]-w.pxmid[1]}function T(b,w){return w.pxmid[1]-b.pxmid[1]}function p(b,w){w||(w={});var k=w.labelExtraY+(i?w.yLabelMax:w.yLabelMin),x=i?b.yLabelMin:b.yLabelMax,E=i?b.yLabelMax:b.yLabelMin,S=b.cyFinal+o(b.px0[1],b.px1[1]),g=k-x,C,A,P,D,z,O;if(g*l>0&&(b.labelExtraY=g),!!Nc.isArrayOrTypedArray(t.pull))for(A=0;A<c.length;A++)P=c[A],!(P===b||(ys.castOption(t.pull,b.pts)||0)>=(ys.castOption(t.pull,P.pts)||0))&&((b.pxmid[1]-P.pxmid[1])*l>0?(D=P.cyFinal+o(P.px0[1],P.px1[1]),g=D-x-b.labelExtraY,g*l>0&&(b.labelExtraY+=g)):(E+b.labelExtraY-S)*l>0&&(C=3*s*Math.abs(A-c.indexOf(b)),z=P.cxFinal+a(P.px0[0],P.px1[0]),O=z+C-(b.cxFinal+b.pxmid[0])-b.labelExtraX,O*s>0&&(b.labelExtraX+=O)))}for(i=0;i<2;i++)for(n=i?_:T,o=i?Math.max:Math.min,l=i?1:-1,r=0;r<2;r++){for(a=r?Math.max:Math.min,s=r?1:-1,u=e[i][r],u.sort(n),f=e[1-i][r],c=f.concat(u),v=[],h=0;h<u.length;h++)u[h].yLabelMid!==void 0&&v.push(u[h]);for(d=!1,h=0;i&&h<f.length;h++)if(f[h].yLabelMid!==void 0){d=f[h];break}for(h=0;h<v.length;h++){var M=h&&v[h-1];d&&!h&&(M=d),p(v[h],M)}}}function CSe(e,t){for(var r=[],i=0;i<e.length;i++){var n=e[i][0],a=n.trace,o=a.domain,s=t.w*(o.x[1]-o.x[0]),l=t.h*(o.y[1]-o.y[0]);a.title.text&&a.title.position!=="middle center"&&(l-=nH(n,t));var u=s/2,f=l/2;a.type==="funnelarea"&&!a.scalegroup&&(f/=a.aspectratio),n.r=Math.min(u,f)/(1+kSe(a)),n.cx=t.l+t.w*(a.domain.x[1]+a.domain.x[0])/2,n.cy=t.t+t.h*(1-a.domain.y[0])-l/2,a.title.text&&a.title.position.indexOf("bottom")!==-1&&(n.cy-=nH(n,t)),a.scalegroup&&r.indexOf(a.scalegroup)===-1&&r.push(a.scalegroup)}P5t(e,r)}function P5t(e,t){for(var r,i,n,a=0;a<t.length;a++){var o=1/0,s=t[a];for(i=0;i<e.length;i++)if(r=e[i][0],n=r.trace,n.scalegroup===s){var l;if(n.type==="pie")l=r.r*r.r;else if(n.type==="funnelarea"){var u,f;n.aspectratio>1?(u=r.r,f=u/n.aspectratio):(f=r.r,u=f*n.aspectratio),u*=(1+n.baseratio)/2,l=u*f}o=Math.min(o,l/r.vTotal)}for(i=0;i<e.length;i++)if(r=e[i][0],n=r.trace,n.scalegroup===s){var c=o*r.vTotal;n.type==="funnelarea"&&(c/=(1+n.baseratio)/2,c/=n.aspectratio),r.r=Math.sqrt(c)}}}function R5t(e){var t=e[0],r=t.r,i=t.trace,n=ys.getRotationAngle(i.rotation),a=2*Math.PI/t.vTotal,o="px0",s="px1",l,u,f;if(i.direction==="counterclockwise"){for(l=0;l<e.length&&e[l].hidden;l++);if(l===e.length)return;n+=a*e[l].v,a*=-1,o="px1",s="px0"}for(f=xR(r,n),l=0;l<e.length;l++)u=e[l],!u.hidden&&(u[o]=f,u.startangle=n,n+=a*u.v/2,u.pxmid=xR(r,n),u.midangle=n,n+=a*u.v/2,f=xR(r,n),u.stopangle=n,u[s]=f,u.largeArc=u.v>t.vTotal/2?1:0,u.halfangle=Math.PI*Math.min(u.v/t.vTotal,.5),u.ring=1-i.hole,u.rInscribed=E5t(u,t))}function xR(e,t){return[e*Math.sin(t),-e*Math.cos(t)]}function LSe(e,t,r){var i=e._fullLayout,n=r.trace,a=n.texttemplate,o=n.textinfo;if(!a&&o&&o!=="none"){var s=o.split("+"),l=function(w){return s.indexOf(w)!==-1},u=l("label"),f=l("text"),c=l("value"),h=l("percent"),v=i.separators,d;if(d=u?[t.label]:[],f){var _=ys.getFirstFilled(n.text,t.pts);vSe(_)&&d.push(_)}c&&d.push(ys.formatPieValue(t.v,v)),h&&d.push(ys.formatPiePercent(t.v/r.vTotal,v)),t.text=d.join("<br>")}function T(w){return{label:w.label,value:w.v,valueLabel:ys.formatPieValue(w.v,i.separators),percent:w.v/r.vTotal,percentLabel:ys.formatPiePercent(w.v/r.vTotal,i.separators),color:w.color,text:w.text,customdata:Nc.castOption(n,w.i,"customdata")}}if(a){var p=Nc.castOption(n,t.i,"texttemplate");if(!p)t.text="";else{var M=T(t),b=ys.getFirstFilled(n.text,t.pts);(vSe(b)||b==="")&&(M.text=b),t.text=Nc.texttemplateString(p,M,e._fullLayout._d3locale,M,n._meta||{})}}}function PSe(e,t){var r=e.rotate*Math.PI/180,i=Math.cos(r),n=Math.sin(r),a=(t.left+t.right)/2,o=(t.top+t.bottom)/2;e.textX=a*i-o*n,e.textY=a*n+o*i,e.noCenter=!0}RSe.exports={plot:T5t,formatSliceLabel:LSe,transformInsideText:TSe,determineInsideTextFont:bSe,positionTitleOutside:ESe,prerenderTitles:wSe,layoutAreas:CSe,attachFxHandlers:_Se,computeTransform:PSe}});var FSe=ne((jur,ISe)=>{"use strict";var DSe=Ai(),D5t=T2(),I5t=yh().resizeText;ISe.exports=function(t){var r=t._fullLayout._pielayer.selectAll(".trace");I5t(t,r,"pie"),r.each(function(i){var n=i[0],a=n.trace,o=DSe.select(this);o.style({opacity:a.opacity}),o.selectAll("path.surface").each(function(s){DSe.select(this).call(D5t,s,a,t)})})}});var zSe=ne(l3=>{"use strict";var qSe=Zs();l3.name="pie";l3.plot=function(e,t,r,i){qSe.plotBasePlot(l3.name,e,t,r,i)};l3.clean=function(e,t,r,i){qSe.cleanBasePlot(l3.name,e,t,r,i)}});var BSe=ne((Jur,OSe)=>{"use strict";OSe.exports={attributes:g_(),supplyDefaults:y_().supplyDefaults,supplyLayoutDefaults:oSe(),layoutAttributes:gR(),calc:s3().calc,crossTraceCalc:s3().crossTraceCalc,plot:_R().plot,style:FSe(),styleOne:T2(),moduleType:"trace",name:"pie",basePlotModule:zSe(),categories:["pie-like","pie","showLegend"],meta:{}}});var USe=ne((Qur,NSe)=>{"use strict";NSe.exports=BSe()});var HSe=ne(u3=>{"use strict";var VSe=Zs();u3.name="sunburst";u3.plot=function(e,t,r,i){VSe.plotBasePlot(u3.name,e,t,r,i)};u3.clean=function(e,t,r,i){VSe.cleanBasePlot(u3.name,e,t,r,i)}});var iH=ne((efr,GSe)=>{"use strict";GSe.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}});var lE=ne((tfr,WSe)=>{"use strict";var F5t=es(),q5t=Ba().hovertemplateAttrs,z5t=Ba().texttemplateAttrs,O5t=Ps(),B5t=fl().attributes,fy=g_(),YSe=iH(),sE=oa().extendFlat,N5t=hc().pattern;WSe.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:sE({colors:{valType:"data_array",editType:"calc"},line:{color:sE({},fy.marker.line.color,{dflt:null}),width:sE({},fy.marker.line.width,{dflt:1}),editType:"calc"},pattern:N5t,editType:"calc"},O5t("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:fy.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:z5t({editType:"plot"},{keys:YSe.eventDataKeys.concat(["label","value"])}),hovertext:fy.hovertext,hoverinfo:sE({},F5t.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:q5t({},{keys:YSe.eventDataKeys}),textfont:fy.textfont,insidetextorientation:fy.insidetextorientation,insidetextfont:fy.insidetextfont,outsidetextfont:sE({},fy.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:fy.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:B5t({name:"sunburst",trace:!0,editType:"calc"})}});var aH=ne((rfr,XSe)=>{"use strict";XSe.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}});var JSe=ne((nfr,KSe)=>{"use strict";var ZSe=Wt(),U5t=lE(),V5t=fl().defaults,H5t=Fd().handleText,G5t=y_().handleMarkerDefaults,jSe=ul(),Y5t=jSe.hasColorscale,W5t=jSe.handleDefaults;KSe.exports=function(t,r,i,n){function a(h,v){return ZSe.coerce(t,r,U5t,h,v)}var o=a("labels"),s=a("parents");if(!o||!o.length||!s||!s.length){r.visible=!1;return}var l=a("values");l&&l.length?a("branchvalues"):a("count"),a("level"),a("maxdepth"),G5t(t,r,n,a);var u=r._hasColorscale=Y5t(t,"marker","colors")||(t.marker||{}).coloraxis;u&&W5t(t,r,n,a,{prefix:"marker.",cLetter:"c"}),a("leaf.opacity",u?1:.7);var f=a("text");a("texttemplate"),r.texttemplate||a("textinfo",ZSe.isArrayOrTypedArray(f)?"text+label":"label"),a("hovertext"),a("hovertemplate");var c="auto";H5t(t,r,n,a,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),a("insidetextorientation"),a("sort"),a("rotation"),a("root.color"),V5t(r,n,a),r._length=null}});var $Se=ne((ifr,QSe)=>{"use strict";var X5t=Wt(),Z5t=aH();QSe.exports=function(t,r){function i(n,a){return X5t.coerce(t,r,Z5t,n,a)}i("sunburstcolorway",r.colorway),i("extendsunburstcolors")}});var uE=ne((bR,eEe)=>{(function(e,t){typeof bR=="object"&&typeof eEe!="undefined"?t(bR):typeof define=="function"&&define.amd?define(["exports"],t):(e=e||self,t(e.d3=e.d3||{}))})(bR,function(e){"use strict";function t(Je,Ke){return Je.parent===Ke.parent?1:2}function r(Je){return Je.reduce(i,0)/Je.length}function i(Je,Ke){return Je+Ke.x}function n(Je){return 1+Je.reduce(a,0)}function a(Je,Ke){return Math.max(Je,Ke.y)}function o(Je){for(var Ke;Ke=Je.children;)Je=Ke[0];return Je}function s(Je){for(var Ke;Ke=Je.children;)Je=Ke[Ke.length-1];return Je}function l(){var Je=t,Ke=1,At=1,Ee=!1;function de(Te){var nt,Mt=0;Te.eachAfter(function(mr){var zr=mr.children;zr?(mr.x=r(zr),mr.y=n(zr)):(mr.x=nt?Mt+=Je(mr,nt):0,mr.y=0,nt=mr)});var Kt=o(Te),Jt=s(Te),Fr=Kt.x-Je(Kt,Jt)/2,Vr=Jt.x+Je(Jt,Kt)/2;return Te.eachAfter(Ee?function(mr){mr.x=(mr.x-Te.x)*Ke,mr.y=(Te.y-mr.y)*At}:function(mr){mr.x=(mr.x-Fr)/(Vr-Fr)*Ke,mr.y=(1-(Te.y?mr.y/Te.y:1))*At})}return de.separation=function(Te){return arguments.length?(Je=Te,de):Je},de.size=function(Te){return arguments.length?(Ee=!1,Ke=+Te[0],At=+Te[1],de):Ee?null:[Ke,At]},de.nodeSize=function(Te){return arguments.length?(Ee=!0,Ke=+Te[0],At=+Te[1],de):Ee?[Ke,At]:null},de}function u(Je){var Ke=0,At=Je.children,Ee=At&&At.length;if(!Ee)Ke=1;else for(;--Ee>=0;)Ke+=At[Ee].value;Je.value=Ke}function f(){return this.eachAfter(u)}function c(Je){var Ke=this,At,Ee=[Ke],de,Te,nt;do for(At=Ee.reverse(),Ee=[];Ke=At.pop();)if(Je(Ke),de=Ke.children,de)for(Te=0,nt=de.length;Te<nt;++Te)Ee.push(de[Te]);while(Ee.length);return this}function h(Je){for(var Ke=this,At=[Ke],Ee,de;Ke=At.pop();)if(Je(Ke),Ee=Ke.children,Ee)for(de=Ee.length-1;de>=0;--de)At.push(Ee[de]);return this}function v(Je){for(var Ke=this,At=[Ke],Ee=[],de,Te,nt;Ke=At.pop();)if(Ee.push(Ke),de=Ke.children,de)for(Te=0,nt=de.length;Te<nt;++Te)At.push(de[Te]);for(;Ke=Ee.pop();)Je(Ke);return this}function d(Je){return this.eachAfter(function(Ke){for(var At=+Je(Ke.data)||0,Ee=Ke.children,de=Ee&&Ee.length;--de>=0;)At+=Ee[de].value;Ke.value=At})}function _(Je){return this.eachBefore(function(Ke){Ke.children&&Ke.children.sort(Je)})}function T(Je){for(var Ke=this,At=p(Ke,Je),Ee=[Ke];Ke!==At;)Ke=Ke.parent,Ee.push(Ke);for(var de=Ee.length;Je!==At;)Ee.splice(de,0,Je),Je=Je.parent;return Ee}function p(Je,Ke){if(Je===Ke)return Je;var At=Je.ancestors(),Ee=Ke.ancestors(),de=null;for(Je=At.pop(),Ke=Ee.pop();Je===Ke;)de=Je,Je=At.pop(),Ke=Ee.pop();return de}function M(){for(var Je=this,Ke=[Je];Je=Je.parent;)Ke.push(Je);return Ke}function b(){var Je=[];return this.each(function(Ke){Je.push(Ke)}),Je}function w(){var Je=[];return this.eachBefore(function(Ke){Ke.children||Je.push(Ke)}),Je}function k(){var Je=this,Ke=[];return Je.each(function(At){At!==Je&&Ke.push({source:At.parent,target:At})}),Ke}function x(Je,Ke){var At=new A(Je),Ee=+Je.value&&(At.value=Je.value),de,Te=[At],nt,Mt,Kt,Jt;for(Ke==null&&(Ke=S);de=Te.pop();)if(Ee&&(de.value=+de.data.value),(Mt=Ke(de.data))&&(Jt=Mt.length))for(de.children=new Array(Jt),Kt=Jt-1;Kt>=0;--Kt)Te.push(nt=de.children[Kt]=new A(Mt[Kt])),nt.parent=de,nt.depth=de.depth+1;return At.eachBefore(C)}function E(){return x(this).eachBefore(g)}function S(Je){return Je.children}function g(Je){Je.data=Je.data.data}function C(Je){var Ke=0;do Je.height=Ke;while((Je=Je.parent)&&Je.height<++Ke)}function A(Je){this.data=Je,this.depth=this.height=0,this.parent=null}A.prototype=x.prototype={constructor:A,count:f,each:c,eachAfter:v,eachBefore:h,sum:d,sort:_,path:T,ancestors:M,descendants:b,leaves:w,links:k,copy:E};var P=Array.prototype.slice;function D(Je){for(var Ke=Je.length,At,Ee;Ke;)Ee=Math.random()*Ke--|0,At=Je[Ke],Je[Ke]=Je[Ee],Je[Ee]=At;return Je}function z(Je){for(var Ke=0,At=(Je=D(P.call(Je))).length,Ee=[],de,Te;Ke<At;)de=Je[Ke],Te&&B(Te,de)?++Ke:(Te=N(Ee=O(Ee,de)),Ke=0);return Te}function O(Je,Ke){var At,Ee;if(F(Ke,Je))return[Ke];for(At=0;At<Je.length;++At)if(V(Ke,Je[At])&&F(J(Je[At],Ke),Je))return[Je[At],Ke];for(At=0;At<Je.length-1;++At)for(Ee=At+1;Ee<Je.length;++Ee)if(V(J(Je[At],Je[Ee]),Ke)&&V(J(Je[At],Ke),Je[Ee])&&V(J(Je[Ee],Ke),Je[At])&&F(re(Je[At],Je[Ee],Ke),Je))return[Je[At],Je[Ee],Ke];throw new Error}function V(Je,Ke){var At=Je.r-Ke.r,Ee=Ke.x-Je.x,de=Ke.y-Je.y;return At<0||At*At<Ee*Ee+de*de}function B(Je,Ke){var At=Je.r-Ke.r+1e-6,Ee=Ke.x-Je.x,de=Ke.y-Je.y;return At>0&&At*At>Ee*Ee+de*de}function F(Je,Ke){for(var At=0;At<Ke.length;++At)if(!B(Je,Ke[At]))return!1;return!0}function N(Je){switch(Je.length){case 1:return Z(Je[0]);case 2:return J(Je[0],Je[1]);case 3:return re(Je[0],Je[1],Je[2])}}function Z(Je){return{x:Je.x,y:Je.y,r:Je.r}}function J(Je,Ke){var At=Je.x,Ee=Je.y,de=Je.r,Te=Ke.x,nt=Ke.y,Mt=Ke.r,Kt=Te-At,Jt=nt-Ee,Fr=Mt-de,Vr=Math.sqrt(Kt*Kt+Jt*Jt);return{x:(At+Te+Kt/Vr*Fr)/2,y:(Ee+nt+Jt/Vr*Fr)/2,r:(Vr+de+Mt)/2}}function re(Je,Ke,At){var Ee=Je.x,de=Je.y,Te=Je.r,nt=Ke.x,Mt=Ke.y,Kt=Ke.r,Jt=At.x,Fr=At.y,Vr=At.r,mr=Ee-nt,zr=Ee-Jt,an=de-Mt,ni=de-Fr,mn=Kt-Te,fi=Vr-Te,Wi=Ee*Ee+de*de-Te*Te,si=Wi-nt*nt-Mt*Mt+Kt*Kt,Zi=Wi-Jt*Jt-Fr*Fr+Vr*Vr,Ei=zr*an-mr*ni,ot=(an*Zi-ni*si)/(Ei*2)-Ee,Be=(ni*mn-an*fi)/Ei,lt=(zr*si-mr*Zi)/(Ei*2)-de,xt=(mr*fi-zr*mn)/Ei,Nt=Be*Be+xt*xt-1,nr=2*(Te+ot*Be+lt*xt),yr=ot*ot+lt*lt-Te*Te,dr=-(Nt?(nr+Math.sqrt(nr*nr-4*Nt*yr))/(2*Nt):yr/nr);return{x:Ee+ot+Be*dr,y:de+lt+xt*dr,r:dr}}function ue(Je,Ke,At){var Ee=Je.x-Ke.x,de,Te,nt=Je.y-Ke.y,Mt,Kt,Jt=Ee*Ee+nt*nt;Jt?(Te=Ke.r+At.r,Te*=Te,Kt=Je.r+At.r,Kt*=Kt,Te>Kt?(de=(Jt+Kt-Te)/(2*Jt),Mt=Math.sqrt(Math.max(0,Kt/Jt-de*de)),At.x=Je.x-de*Ee-Mt*nt,At.y=Je.y-de*nt+Mt*Ee):(de=(Jt+Te-Kt)/(2*Jt),Mt=Math.sqrt(Math.max(0,Te/Jt-de*de)),At.x=Ke.x+de*Ee-Mt*nt,At.y=Ke.y+de*nt+Mt*Ee)):(At.x=Ke.x+At.r,At.y=Ke.y)}function fe(Je,Ke){var At=Je.r+Ke.r-1e-6,Ee=Ke.x-Je.x,de=Ke.y-Je.y;return At>0&&At*At>Ee*Ee+de*de}function K(Je){var Ke=Je._,At=Je.next._,Ee=Ke.r+At.r,de=(Ke.x*At.r+At.x*Ke.r)/Ee,Te=(Ke.y*At.r+At.y*Ke.r)/Ee;return de*de+Te*Te}function X(Je){this._=Je,this.next=null,this.previous=null}function ae(Je){if(!(de=Je.length))return 0;var Ke,At,Ee,de,Te,nt,Mt,Kt,Jt,Fr,Vr;if(Ke=Je[0],Ke.x=0,Ke.y=0,!(de>1))return Ke.r;if(At=Je[1],Ke.x=-At.r,At.x=Ke.r,At.y=0,!(de>2))return Ke.r+At.r;ue(At,Ke,Ee=Je[2]),Ke=new X(Ke),At=new X(At),Ee=new X(Ee),Ke.next=Ee.previous=At,At.next=Ke.previous=Ee,Ee.next=At.previous=Ke;e:for(Mt=3;Mt<de;++Mt){ue(Ke._,At._,Ee=Je[Mt]),Ee=new X(Ee),Kt=At.next,Jt=Ke.previous,Fr=At._.r,Vr=Ke._.r;do if(Fr<=Vr){if(fe(Kt._,Ee._)){At=Kt,Ke.next=At,At.previous=Ke,--Mt;continue e}Fr+=Kt._.r,Kt=Kt.next}else{if(fe(Jt._,Ee._)){Ke=Jt,Ke.next=At,At.previous=Ke,--Mt;continue e}Vr+=Jt._.r,Jt=Jt.previous}while(Kt!==Jt.next);for(Ee.previous=Ke,Ee.next=At,Ke.next=At.previous=At=Ee,Te=K(Ke);(Ee=Ee.next)!==At;)(nt=K(Ee))<Te&&(Ke=Ee,Te=nt);At=Ke.next}for(Ke=[At._],Ee=At;(Ee=Ee.next)!==At;)Ke.push(Ee._);for(Ee=z(Ke),Mt=0;Mt<de;++Mt)Ke=Je[Mt],Ke.x-=Ee.x,Ke.y-=Ee.y;return Ee.r}function oe(Je){return ae(Je),Je}function me(Je){return Je==null?null:xe(Je)}function xe(Je){if(typeof Je!="function")throw new Error;return Je}function ce(){return 0}function ie(Je){return function(){return Je}}function ge(Je){return Math.sqrt(Je.value)}function le(){var Je=null,Ke=1,At=1,Ee=ce;function de(Te){return Te.x=Ke/2,Te.y=At/2,Je?Te.eachBefore(we(Je)).eachAfter(Re(Ee,.5)).eachBefore(qe(1)):Te.eachBefore(we(ge)).eachAfter(Re(ce,1)).eachAfter(Re(Ee,Te.r/Math.min(Ke,At))).eachBefore(qe(Math.min(Ke,At)/(2*Te.r))),Te}return de.radius=function(Te){return arguments.length?(Je=me(Te),de):Je},de.size=function(Te){return arguments.length?(Ke=+Te[0],At=+Te[1],de):[Ke,At]},de.padding=function(Te){return arguments.length?(Ee=typeof Te=="function"?Te:ie(+Te),de):Ee},de}function we(Je){return function(Ke){Ke.children||(Ke.r=Math.max(0,+Je(Ke)||0))}}function Re(Je,Ke){return function(At){if(Ee=At.children){var Ee,de,Te=Ee.length,nt=Je(At)*Ke||0,Mt;if(nt)for(de=0;de<Te;++de)Ee[de].r+=nt;if(Mt=ae(Ee),nt)for(de=0;de<Te;++de)Ee[de].r-=nt;At.r=Mt+nt}}}function qe(Je){return function(Ke){var At=Ke.parent;Ke.r*=Je,At&&(Ke.x=At.x+Je*Ke.x,Ke.y=At.y+Je*Ke.y)}}function et(Je){Je.x0=Math.round(Je.x0),Je.y0=Math.round(Je.y0),Je.x1=Math.round(Je.x1),Je.y1=Math.round(Je.y1)}function Pe(Je,Ke,At,Ee,de){for(var Te=Je.children,nt,Mt=-1,Kt=Te.length,Jt=Je.value&&(Ee-Ke)/Je.value;++Mt<Kt;)nt=Te[Mt],nt.y0=At,nt.y1=de,nt.x0=Ke,nt.x1=Ke+=nt.value*Jt}function Ie(){var Je=1,Ke=1,At=0,Ee=!1;function de(nt){var Mt=nt.height+1;return nt.x0=nt.y0=At,nt.x1=Je,nt.y1=Ke/Mt,nt.eachBefore(Te(Ke,Mt)),Ee&&nt.eachBefore(et),nt}function Te(nt,Mt){return function(Kt){Kt.children&&Pe(Kt,Kt.x0,nt*(Kt.depth+1)/Mt,Kt.x1,nt*(Kt.depth+2)/Mt);var Jt=Kt.x0,Fr=Kt.y0,Vr=Kt.x1-At,mr=Kt.y1-At;Vr<Jt&&(Jt=Vr=(Jt+Vr)/2),mr<Fr&&(Fr=mr=(Fr+mr)/2),Kt.x0=Jt,Kt.y0=Fr,Kt.x1=Vr,Kt.y1=mr}}return de.round=function(nt){return arguments.length?(Ee=!!nt,de):Ee},de.size=function(nt){return arguments.length?(Je=+nt[0],Ke=+nt[1],de):[Je,Ke]},de.padding=function(nt){return arguments.length?(At=+nt,de):At},de}var ut="$",ft={depth:-1},je={};function _t(Je){return Je.id}function Bt(Je){return Je.parentId}function Lt(){var Je=_t,Ke=Bt;function At(Ee){var de,Te,nt=Ee.length,Mt,Kt,Jt,Fr=new Array(nt),Vr,mr,zr={};for(Te=0;Te<nt;++Te)de=Ee[Te],Jt=Fr[Te]=new A(de),(Vr=Je(de,Te,Ee))!=null&&(Vr+="")&&(mr=ut+(Jt.id=Vr),zr[mr]=mr in zr?je:Jt);for(Te=0;Te<nt;++Te)if(Jt=Fr[Te],Vr=Ke(Ee[Te],Te,Ee),Vr==null||!(Vr+="")){if(Mt)throw new Error("multiple roots");Mt=Jt}else{if(Kt=zr[ut+Vr],!Kt)throw new Error("missing: "+Vr);if(Kt===je)throw new Error("ambiguous: "+Vr);Kt.children?Kt.children.push(Jt):Kt.children=[Jt],Jt.parent=Kt}if(!Mt)throw new Error("no root");if(Mt.parent=ft,Mt.eachBefore(function(an){an.depth=an.parent.depth+1,--nt}).eachBefore(C),Mt.parent=null,nt>0)throw new Error("cycle");return Mt}return At.id=function(Ee){return arguments.length?(Je=xe(Ee),At):Je},At.parentId=function(Ee){return arguments.length?(Ke=xe(Ee),At):Ke},At}function Me(Je,Ke){return Je.parent===Ke.parent?1:2}function Ze(Je){var Ke=Je.children;return Ke?Ke[0]:Je.t}function dt(Je){var Ke=Je.children;return Ke?Ke[Ke.length-1]:Je.t}function it(Je,Ke,At){var Ee=At/(Ke.i-Je.i);Ke.c-=Ee,Ke.s+=At,Je.c+=Ee,Ke.z+=At,Ke.m+=At}function vt(Je){for(var Ke=0,At=0,Ee=Je.children,de=Ee.length,Te;--de>=0;)Te=Ee[de],Te.z+=Ke,Te.m+=Ke,Ke+=Te.s+(At+=Te.c)}function rt(Je,Ke,At){return Je.a.parent===Ke.parent?Je.a:At}function We(Je,Ke){this._=Je,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=Ke}We.prototype=Object.create(A.prototype);function ht(Je){for(var Ke=new We(Je,0),At,Ee=[Ke],de,Te,nt,Mt;At=Ee.pop();)if(Te=At._.children)for(At.children=new Array(Mt=Te.length),nt=Mt-1;nt>=0;--nt)Ee.push(de=At.children[nt]=new We(Te[nt],nt)),de.parent=At;return(Ke.parent=new We(null,0)).children=[Ke],Ke}function mt(){var Je=Me,Ke=1,At=1,Ee=null;function de(Jt){var Fr=ht(Jt);if(Fr.eachAfter(Te),Fr.parent.m=-Fr.z,Fr.eachBefore(nt),Ee)Jt.eachBefore(Kt);else{var Vr=Jt,mr=Jt,zr=Jt;Jt.eachBefore(function(Wi){Wi.x<Vr.x&&(Vr=Wi),Wi.x>mr.x&&(mr=Wi),Wi.depth>zr.depth&&(zr=Wi)});var an=Vr===mr?1:Je(Vr,mr)/2,ni=an-Vr.x,mn=Ke/(mr.x+an+ni),fi=At/(zr.depth||1);Jt.eachBefore(function(Wi){Wi.x=(Wi.x+ni)*mn,Wi.y=Wi.depth*fi})}return Jt}function Te(Jt){var Fr=Jt.children,Vr=Jt.parent.children,mr=Jt.i?Vr[Jt.i-1]:null;if(Fr){vt(Jt);var zr=(Fr[0].z+Fr[Fr.length-1].z)/2;mr?(Jt.z=mr.z+Je(Jt._,mr._),Jt.m=Jt.z-zr):Jt.z=zr}else mr&&(Jt.z=mr.z+Je(Jt._,mr._));Jt.parent.A=Mt(Jt,mr,Jt.parent.A||Vr[0])}function nt(Jt){Jt._.x=Jt.z+Jt.parent.m,Jt.m+=Jt.parent.m}function Mt(Jt,Fr,Vr){if(Fr){for(var mr=Jt,zr=Jt,an=Fr,ni=mr.parent.children[0],mn=mr.m,fi=zr.m,Wi=an.m,si=ni.m,Zi;an=dt(an),mr=Ze(mr),an&&mr;)ni=Ze(ni),zr=dt(zr),zr.a=Jt,Zi=an.z+Wi-mr.z-mn+Je(an._,mr._),Zi>0&&(it(rt(an,Jt,Vr),Jt,Zi),mn+=Zi,fi+=Zi),Wi+=an.m,mn+=mr.m,si+=ni.m,fi+=zr.m;an&&!dt(zr)&&(zr.t=an,zr.m+=Wi-fi),mr&&!Ze(ni)&&(ni.t=mr,ni.m+=mn-si,Vr=Jt)}return Vr}function Kt(Jt){Jt.x*=Ke,Jt.y=Jt.depth*At}return de.separation=function(Jt){return arguments.length?(Je=Jt,de):Je},de.size=function(Jt){return arguments.length?(Ee=!1,Ke=+Jt[0],At=+Jt[1],de):Ee?null:[Ke,At]},de.nodeSize=function(Jt){return arguments.length?(Ee=!0,Ke=+Jt[0],At=+Jt[1],de):Ee?[Ke,At]:null},de}function er(Je,Ke,At,Ee,de){for(var Te=Je.children,nt,Mt=-1,Kt=Te.length,Jt=Je.value&&(de-At)/Je.value;++Mt<Kt;)nt=Te[Mt],nt.x0=Ke,nt.x1=Ee,nt.y0=At,nt.y1=At+=nt.value*Jt}var $t=(1+Math.sqrt(5))/2;function cr(Je,Ke,At,Ee,de,Te){for(var nt=[],Mt=Ke.children,Kt,Jt,Fr=0,Vr=0,mr=Mt.length,zr,an,ni=Ke.value,mn,fi,Wi,si,Zi,Ei,ot;Fr<mr;){zr=de-At,an=Te-Ee;do mn=Mt[Vr++].value;while(!mn&&Vr<mr);for(fi=Wi=mn,Ei=Math.max(an/zr,zr/an)/(ni*Je),ot=mn*mn*Ei,Zi=Math.max(Wi/ot,ot/fi);Vr<mr;++Vr){if(mn+=Jt=Mt[Vr].value,Jt<fi&&(fi=Jt),Jt>Wi&&(Wi=Jt),ot=mn*mn*Ei,si=Math.max(Wi/ot,ot/fi),si>Zi){mn-=Jt;break}Zi=si}nt.push(Kt={value:mn,dice:zr<an,children:Mt.slice(Fr,Vr)}),Kt.dice?Pe(Kt,At,Ee,de,ni?Ee+=an*mn/ni:Te):er(Kt,At,Ee,ni?At+=zr*mn/ni:de,Te),ni-=mn,Fr=Vr}return nt}var or=function Je(Ke){function At(Ee,de,Te,nt,Mt){cr(Ke,Ee,de,Te,nt,Mt)}return At.ratio=function(Ee){return Je((Ee=+Ee)>1?Ee:1)},At}($t);function vr(){var Je=or,Ke=!1,At=1,Ee=1,de=[0],Te=ce,nt=ce,Mt=ce,Kt=ce,Jt=ce;function Fr(mr){return mr.x0=mr.y0=0,mr.x1=At,mr.y1=Ee,mr.eachBefore(Vr),de=[0],Ke&&mr.eachBefore(et),mr}function Vr(mr){var zr=de[mr.depth],an=mr.x0+zr,ni=mr.y0+zr,mn=mr.x1-zr,fi=mr.y1-zr;mn<an&&(an=mn=(an+mn)/2),fi<ni&&(ni=fi=(ni+fi)/2),mr.x0=an,mr.y0=ni,mr.x1=mn,mr.y1=fi,mr.children&&(zr=de[mr.depth+1]=Te(mr)/2,an+=Jt(mr)-zr,ni+=nt(mr)-zr,mn-=Mt(mr)-zr,fi-=Kt(mr)-zr,mn<an&&(an=mn=(an+mn)/2),fi<ni&&(ni=fi=(ni+fi)/2),Je(mr,an,ni,mn,fi))}return Fr.round=function(mr){return arguments.length?(Ke=!!mr,Fr):Ke},Fr.size=function(mr){return arguments.length?(At=+mr[0],Ee=+mr[1],Fr):[At,Ee]},Fr.tile=function(mr){return arguments.length?(Je=xe(mr),Fr):Je},Fr.padding=function(mr){return arguments.length?Fr.paddingInner(mr).paddingOuter(mr):Fr.paddingInner()},Fr.paddingInner=function(mr){return arguments.length?(Te=typeof mr=="function"?mr:ie(+mr),Fr):Te},Fr.paddingOuter=function(mr){return arguments.length?Fr.paddingTop(mr).paddingRight(mr).paddingBottom(mr).paddingLeft(mr):Fr.paddingTop()},Fr.paddingTop=function(mr){return arguments.length?(nt=typeof mr=="function"?mr:ie(+mr),Fr):nt},Fr.paddingRight=function(mr){return arguments.length?(Mt=typeof mr=="function"?mr:ie(+mr),Fr):Mt},Fr.paddingBottom=function(mr){return arguments.length?(Kt=typeof mr=="function"?mr:ie(+mr),Fr):Kt},Fr.paddingLeft=function(mr){return arguments.length?(Jt=typeof mr=="function"?mr:ie(+mr),Fr):Jt},Fr}function Ot(Je,Ke,At,Ee,de){var Te=Je.children,nt,Mt=Te.length,Kt,Jt=new Array(Mt+1);for(Jt[0]=Kt=nt=0;nt<Mt;++nt)Jt[nt+1]=Kt+=Te[nt].value;Fr(0,Mt,Je.value,Ke,At,Ee,de);function Fr(Vr,mr,zr,an,ni,mn,fi){if(Vr>=mr-1){var Wi=Te[Vr];Wi.x0=an,Wi.y0=ni,Wi.x1=mn,Wi.y1=fi;return}for(var si=Jt[Vr],Zi=zr/2+si,Ei=Vr+1,ot=mr-1;Ei<ot;){var Be=Ei+ot>>>1;Jt[Be]<Zi?Ei=Be+1:ot=Be}Zi-Jt[Ei-1]<Jt[Ei]-Zi&&Vr+1<Ei&&--Ei;var lt=Jt[Ei]-si,xt=zr-lt;if(mn-an>fi-ni){var Nt=(an*xt+mn*lt)/zr;Fr(Vr,Ei,lt,an,ni,Nt,fi),Fr(Ei,mr,xt,Nt,ni,mn,fi)}else{var nr=(ni*xt+fi*lt)/zr;Fr(Vr,Ei,lt,an,ni,mn,nr),Fr(Ei,mr,xt,an,nr,mn,fi)}}}function yt(Je,Ke,At,Ee,de){(Je.depth&1?er:Pe)(Je,Ke,At,Ee,de)}var Et=function Je(Ke){function At(Ee,de,Te,nt,Mt){if((Kt=Ee._squarify)&&Kt.ratio===Ke)for(var Kt,Jt,Fr,Vr,mr=-1,zr,an=Kt.length,ni=Ee.value;++mr<an;){for(Jt=Kt[mr],Fr=Jt.children,Vr=Jt.value=0,zr=Fr.length;Vr<zr;++Vr)Jt.value+=Fr[Vr].value;Jt.dice?Pe(Jt,de,Te,nt,Te+=(Mt-Te)*Jt.value/ni):er(Jt,de,Te,de+=(nt-de)*Jt.value/ni,Mt),ni-=Jt.value}else Ee._squarify=Kt=cr(Ke,Ee,de,Te,nt,Mt),Kt.ratio=Ke}return At.ratio=function(Ee){return Je((Ee=+Ee)>1?Ee:1)},At}($t);e.cluster=l,e.hierarchy=x,e.pack=le,e.packEnclose=z,e.packSiblings=oe,e.partition=Ie,e.stratify=Lt,e.tree=mt,e.treemap=vr,e.treemapBinary=Ot,e.treemapDice=Pe,e.treemapResquarify=Et,e.treemapSlice=er,e.treemapSliceDice=yt,e.treemapSquarify=or,Object.defineProperty(e,"__esModule",{value:!0})})});var cE=ne(fE=>{"use strict";var tEe=uE(),j5t=la(),f3=Wt(),K5t=ul().makeColorScaleFuncFromTrace,J5t=s3().makePullColorFn,Q5t=s3().generateExtendedColors,$5t=ul().calc,ekt=$a().ALMOST_EQUAL,tkt={},rkt={},nkt={};fE.calc=function(e,t){var r=e._fullLayout,i=t.ids,n=f3.isArrayOrTypedArray(i),a=t.labels,o=t.parents,s=t.values,l=f3.isArrayOrTypedArray(s),u=[],f={},c={},h=function(B,F){f[B]?f[B].push(F):f[B]=[F],c[F]=1},v=function(B){return B||typeof B=="number"},d=function(B){return!l||j5t(s[B])&&s[B]>=0},_,T,p;n?(_=Math.min(i.length,o.length),T=function(B){return v(i[B])&&d(B)},p=function(B){return String(i[B])}):(_=Math.min(a.length,o.length),T=function(B){return v(a[B])&&d(B)},p=function(B){return String(a[B])}),l&&(_=Math.min(_,s.length));for(var M=0;M<_;M++)if(T(M)){var b=p(M),w=v(o[M])?String(o[M]):"",k={i:M,id:b,pid:w,label:v(a[M])?String(a[M]):""};l&&(k.v=+s[M]),u.push(k),h(w,b)}if(f[""]){if(f[""].length>1){for(var S=f3.randstr(),g=0;g<u.length;g++)u[g].pid===""&&(u[g].pid=S);u.unshift({hasMultipleRoots:!0,id:S,pid:"",label:""})}}else{var x=[],E;for(E in f)c[E]||x.push(E);if(x.length===1)E=x[0],u.unshift({hasImpliedRoot:!0,id:E,pid:"",label:E});else return f3.warn(["Multiple implied roots, cannot build",t.type,"hierarchy of",t.name+".","These roots include:",x.join(", ")].join(" "))}var C;try{C=tEe.stratify().id(function(B){return B.id}).parentId(function(B){return B.pid})(u)}catch(B){return f3.warn(["Failed to build",t.type,"hierarchy of",t.name+".","Error:",B.message].join(" "))}var A=tEe.hierarchy(C),P=!1;if(l)switch(t.branchvalues){case"remainder":A.sum(function(B){return B.data.v});break;case"total":A.each(function(B){var F=B.data.data,N=F.v;if(B.children){var Z=B.children.reduce(function(J,re){return J+re.data.data.v},0);if((F.hasImpliedRoot||F.hasMultipleRoots)&&(N=Z),N<Z*ekt)return P=!0,f3.warn(["Total value for node",B.data.data.id,"of",t.name,"is smaller than the sum of its children.",`
parent value =`,N,`
children sum =`,Z].join(" "))}B.value=N});break}else rEe(A,t,{branches:t.count.indexOf("branches")!==-1,leaves:t.count.indexOf("leaves")!==-1});if(!P){t.sort&&A.sort(function(B,F){return F.value-B.value});var D,z,O=t.marker.colors||[],V=!!O.length;return t._hasColorscale?(V||(O=l?t.values:t._values),$5t(e,t,{vals:O,containerStr:"marker",cLetter:"c"}),z=K5t(t.marker)):D=J5t(r["_"+t.type+"colormap"]),A.each(function(B){var F=B.data.data;F.color=t._hasColorscale?z(O[F.i]):D(O[F.i],F.id)}),u[0].hierarchy=A,u}};fE._runCrossTraceCalc=function(e,t){var r=t._fullLayout,i=t.calcdata,n=r[e+"colorway"],a=r["_"+e+"colormap"];r["extend"+e+"colors"]&&(n=Q5t(n,e==="icicle"?nkt:e==="treemap"?rkt:tkt));var o=0,s;function l(h){var v=h.data.data,d=v.id;v.color===!1&&(a[d]?v.color=a[d]:h.parent?h.parent.parent?v.color=h.parent.data.data.color:(a[d]=v.color=n[o%n.length],o++):v.color=s)}for(var u=0;u<i.length;u++){var f=i[u],c=f[0];c.trace.type===e&&c.hierarchy&&(s=c.trace.root.color,c.hierarchy.each(l))}};fE.crossTraceCalc=function(e){return fE._runCrossTraceCalc("sunburst",e)};function rEe(e,t,r){var i=0,n=e.children;if(n){for(var a=n.length,o=0;o<a;o++)i+=rEe(n[o],t,r);r.branches&&i++}else r.leaves&&i++;return e.value=e.data.data.value=i,t._values||(t._values=[]),t._values[e.data.data.i]=i,i}});function cy(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function jm(e,t){var r=Object.create(e.prototype);for(var i in t)r[i]=t[i];return r}var wR=Bs(()=>{});function lg(){}function iEe(){return this.rgb().formatHex()}function ckt(){return this.rgb().formatHex8()}function hkt(){return cEe(this).formatHsl()}function aEe(){return this.rgb().formatRgb()}function Jm(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=ikt.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?oEe(t):r===3?new nc(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?TR(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?TR(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=akt.exec(e))?new nc(t[1],t[2],t[3],1):(t=okt.exec(e))?new nc(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=skt.exec(e))?TR(t[1],t[2],t[3],t[4]):(t=lkt.exec(e))?TR(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ukt.exec(e))?uEe(t[1],t[2]/100,t[3]/100,1):(t=fkt.exec(e))?uEe(t[1],t[2]/100,t[3]/100,t[4]):nEe.hasOwnProperty(e)?oEe(nEe[e]):e==="transparent"?new nc(NaN,NaN,NaN,0):null}function oEe(e){return new nc(e>>16&255,e>>8&255,e&255,1)}function TR(e,t,r,i){return i<=0&&(e=t=r=NaN),new nc(e,t,r,i)}function vE(e){return e instanceof lg||(e=Jm(e)),e?(e=e.rgb(),new nc(e.r,e.g,e.b,e.opacity)):new nc}function h3(e,t,r,i){return arguments.length===1?vE(e):new nc(e,t,r,i==null?1:i)}function nc(e,t,r,i){this.r=+e,this.g=+t,this.b=+r,this.opacity=+i}function sEe(){return`#${m_(this.r)}${m_(this.g)}${m_(this.b)}`}function vkt(){return`#${m_(this.r)}${m_(this.g)}${m_(this.b)}${m_((isNaN(this.opacity)?1:this.opacity)*255)}`}function lEe(){let e=MR(this.opacity);return`${e===1?"rgb(":"rgba("}${x_(this.r)}, ${x_(this.g)}, ${x_(this.b)}${e===1?")":`, ${e})`}`}function MR(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function x_(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function m_(e){return e=x_(e),(e<16?"0":"")+e.toString(16)}function uEe(e,t,r,i){return i<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new A0(e,t,r,i)}function cEe(e){if(e instanceof A0)return new A0(e.h,e.s,e.l,e.opacity);if(e instanceof lg||(e=Jm(e)),!e)return new A0;if(e instanceof A0)return e;e=e.rgb();var t=e.r/255,r=e.g/255,i=e.b/255,n=Math.min(t,r,i),a=Math.max(t,r,i),o=NaN,s=a-n,l=(a+n)/2;return s?(t===a?o=(r-i)/s+(r<i)*6:r===a?o=(i-t)/s+2:o=(t-r)/s+4,s/=l<.5?a+n:2-a-n,o*=60):s=l>0&&l<1?0:o,new A0(o,s,l,e.opacity)}function dE(e,t,r,i){return arguments.length===1?cEe(e):new A0(e,t,r,i==null?1:i)}function A0(e,t,r,i){this.h=+e,this.s=+t,this.l=+r,this.opacity=+i}function fEe(e){return e=(e||0)%360,e<0?e+360:e}function AR(e){return Math.max(0,Math.min(1,e||0))}function oH(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}var Km,__,c3,hE,sg,ikt,akt,okt,skt,lkt,ukt,fkt,nEe,SR=Bs(()=>{wR();Km=.7,__=1/Km,c3="\\s*([+-]?\\d+)\\s*",hE="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",sg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ikt=/^#([0-9a-f]{3,8})$/,akt=new RegExp(`^rgb\\(${c3},${c3},${c3}\\)$`),okt=new RegExp(`^rgb\\(${sg},${sg},${sg}\\)$`),skt=new RegExp(`^rgba\\(${c3},${c3},${c3},${hE}\\)$`),lkt=new RegExp(`^rgba\\(${sg},${sg},${sg},${hE}\\)$`),ukt=new RegExp(`^hsl\\(${hE},${sg},${sg}\\)$`),fkt=new RegExp(`^hsla\\(${hE},${sg},${sg},${hE}\\)$`),nEe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};cy(lg,Jm,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:iEe,formatHex:iEe,formatHex8:ckt,formatHsl:hkt,formatRgb:aEe,toString:aEe});cy(nc,h3,jm(lg,{brighter(e){return e=e==null?__:Math.pow(__,e),new nc(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Km:Math.pow(Km,e),new nc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new nc(x_(this.r),x_(this.g),x_(this.b),MR(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sEe,formatHex:sEe,formatHex8:vkt,formatRgb:lEe,toString:lEe}));cy(A0,dE,jm(lg,{brighter(e){return e=e==null?__:Math.pow(__,e),new A0(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Km:Math.pow(Km,e),new A0(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*t,n=2*r-i;return new nc(oH(e>=240?e-240:e+120,n,i),oH(e,n,i),oH(e<120?e+240:e-120,n,i),this.opacity)},clamp(){return new A0(fEe(this.h),AR(this.s),AR(this.l),MR(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=MR(this.opacity);return`${e===1?"hsl(":"hsla("}${fEe(this.h)}, ${AR(this.s)*100}%, ${AR(this.l)*100}%${e===1?")":`, ${e})`}`}}))});var ER,kR,sH=Bs(()=>{ER=Math.PI/180,kR=180/Math.PI});function yEe(e){if(e instanceof ug)return new ug(e.l,e.a,e.b,e.opacity);if(e instanceof hy)return mEe(e);e instanceof nc||(e=vE(e));var t=cH(e.r),r=cH(e.g),i=cH(e.b),n=lH((.2225045*t+.7168786*r+.0606169*i)/vEe),a,o;return t===r&&r===i?a=o=n:(a=lH((.4360747*t+.3850649*r+.1430804*i)/hEe),o=lH((.0139322*t+.0971045*r+.7141733*i)/dEe)),new ug(116*n-16,500*(a-n),200*(n-o),e.opacity)}function d3(e,t,r,i){return arguments.length===1?yEe(e):new ug(e,t,r,i==null?1:i)}function ug(e,t,r,i){this.l=+e,this.a=+t,this.b=+r,this.opacity=+i}function lH(e){return e>dkt?Math.pow(e,1/3):e/gEe+pEe}function uH(e){return e>v3?e*e*e:gEe*(e-pEe)}function fH(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function cH(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function pkt(e){if(e instanceof hy)return new hy(e.h,e.c,e.l,e.opacity);if(e instanceof ug||(e=yEe(e)),e.a===0&&e.b===0)return new hy(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*kR;return new hy(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function pE(e,t,r,i){return arguments.length===1?pkt(e):new hy(e,t,r,i==null?1:i)}function hy(e,t,r,i){this.h=+e,this.c=+t,this.l=+r,this.opacity=+i}function mEe(e){if(isNaN(e.h))return new ug(e.l,0,0,e.opacity);var t=e.h*ER;return new ug(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}var CR,hEe,vEe,dEe,pEe,v3,gEe,dkt,xEe=Bs(()=>{wR();SR();sH();CR=18,hEe=.96422,vEe=1,dEe=.82521,pEe=4/29,v3=6/29,gEe=3*v3*v3,dkt=v3*v3*v3;cy(ug,d3,jm(lg,{brighter(e){return new ug(this.l+CR*(e==null?1:e),this.a,this.b,this.opacity)},darker(e){return new ug(this.l-CR*(e==null?1:e),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,r=isNaN(this.b)?e:e-this.b/200;return t=hEe*uH(t),e=vEe*uH(e),r=dEe*uH(r),new nc(fH(3.1338561*t-1.6168667*e-.4906146*r),fH(-.9787684*t+1.9161415*e+.033454*r),fH(.0719453*t-.2289914*e+1.4052427*r),this.opacity)}}));cy(hy,pE,jm(lg,{brighter(e){return new hy(this.h,this.c,this.l+CR*(e==null?1:e),this.opacity)},darker(e){return new hy(this.h,this.c,this.l-CR*(e==null?1:e),this.opacity)},rgb(){return mEe(this).rgb()}}))});function gkt(e){if(e instanceof b_)return new b_(e.h,e.s,e.l,e.opacity);e instanceof nc||(e=vE(e));var t=e.r/255,r=e.g/255,i=e.b/255,n=(wEe*i+_Ee*t-bEe*r)/(wEe+_Ee-bEe),a=i-n,o=(gE*(r-n)-vH*a)/LR,s=Math.sqrt(o*o+a*a)/(gE*n*(1-n)),l=s?Math.atan2(o,a)*kR-120:NaN;return new b_(l<0?l+360:l,s,n,e.opacity)}function p3(e,t,r,i){return arguments.length===1?gkt(e):new b_(e,t,r,i==null?1:i)}function b_(e,t,r,i){this.h=+e,this.s=+t,this.l=+r,this.opacity=+i}var TEe,hH,vH,LR,gE,_Ee,bEe,wEe,AEe=Bs(()=>{wR();SR();sH();TEe=-.14861,hH=1.78277,vH=-.29227,LR=-.90649,gE=1.97294,_Ee=gE*LR,bEe=gE*hH,wEe=hH*vH-LR*TEe;cy(b_,p3,jm(lg,{brighter(e){return e=e==null?__:Math.pow(__,e),new b_(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Km:Math.pow(Km,e),new b_(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*ER,t=+this.l,r=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),n=Math.sin(e);return new nc(255*(t+r*(TEe*i+hH*n)),255*(t+r*(vH*i+LR*n)),255*(t+r*(gE*i)),this.opacity)}}))});var w_=Bs(()=>{SR();xEe();AEe()});function dH(e,t,r,i,n){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*r+(1+3*e+3*a-3*o)*i+o*n)/6}function PR(e){var t=e.length-1;return function(r){var i=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),n=e[i],a=e[i+1],o=i>0?e[i-1]:2*n-a,s=i<t-1?e[i+2]:2*a-n;return dH((r-i/t)*t,o,n,a,s)}}var RR=Bs(()=>{});function DR(e){var t=e.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*t),n=e[(i+t-1)%t],a=e[i%t],o=e[(i+1)%t],s=e[(i+2)%t];return dH((r-i/t)*t,n,a,o,s)}}var pH=Bs(()=>{RR()});var g3,gH=Bs(()=>{g3=e=>()=>e});function MEe(e,t){return function(r){return e+r*t}}function ykt(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(i){return Math.pow(e+i*t,r)}}function Qm(e,t){var r=t-e;return r?MEe(e,r>180||r<-180?r-360*Math.round(r/360):r):g3(isNaN(e)?t:e)}function SEe(e){return(e=+e)==1?gu:function(t,r){return r-t?ykt(t,r,e):g3(isNaN(t)?r:t)}}function gu(e,t){var r=t-e;return r?MEe(e,r):g3(isNaN(e)?t:e)}var T_=Bs(()=>{gH()});function EEe(e){return function(t){var r=t.length,i=new Array(r),n=new Array(r),a=new Array(r),o,s;for(o=0;o<r;++o)s=h3(t[o]),i[o]=s.r||0,n[o]=s.g||0,a[o]=s.b||0;return i=e(i),n=e(n),a=e(a),s.opacity=1,function(l){return s.r=i(l),s.g=n(l),s.b=a(l),s+""}}}var yE,kEe,CEe,yH=Bs(()=>{w_();RR();pH();T_();yE=function e(t){var r=SEe(t);function i(n,a){var o=r((n=h3(n)).r,(a=h3(a)).r),s=r(n.g,a.g),l=r(n.b,a.b),u=gu(n.opacity,a.opacity);return function(f){return n.r=o(f),n.g=s(f),n.b=l(f),n.opacity=u(f),n+""}}return i.gamma=e,i}(1);kEe=EEe(PR),CEe=EEe(DR)});function y3(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,i=t.slice(),n;return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function IR(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}var FR=Bs(()=>{});function LEe(e,t){return(IR(t)?y3:mH)(e,t)}function mH(e,t){var r=t?t.length:0,i=e?Math.min(r,e.length):0,n=new Array(i),a=new Array(r),o;for(o=0;o<i;++o)n[o]=$m(e[o],t[o]);for(;o<r;++o)a[o]=t[o];return function(s){for(o=0;o<i;++o)a[o]=n[o](s);return a}}var xH=Bs(()=>{mE();FR()});function qR(e,t){var r=new Date;return e=+e,t=+t,function(i){return r.setTime(e*(1-i)+t*i),r}}var _H=Bs(()=>{});function vd(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var xE=Bs(()=>{});function zR(e,t){var r={},i={},n;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(n in t)n in e?r[n]=$m(e[n],t[n]):i[n]=t[n];return function(a){for(n in r)i[n]=r[n](a);return i}}var bH=Bs(()=>{mE()});function mkt(e){return function(){return e}}function xkt(e){return function(t){return e(t)+""}}function OR(e,t){var r=TH.lastIndex=wH.lastIndex=0,i,n,a,o=-1,s=[],l=[];for(e=e+"",t=t+"";(i=TH.exec(e))&&(n=wH.exec(t));)(a=n.index)>r&&(a=t.slice(r,a),s[o]?s[o]+=a:s[++o]=a),(i=i[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,l.push({i:o,x:vd(i,n)})),r=wH.lastIndex;return r<t.length&&(a=t.slice(r),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?xkt(l[0].x):mkt(t):(t=l.length,function(u){for(var f=0,c;f<t;++f)s[(c=l[f]).i]=c.x(u);return s.join("")})}var TH,wH,AH=Bs(()=>{xE();TH=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wH=new RegExp(TH.source,"g")});function $m(e,t){var r=typeof t,i;return t==null||r==="boolean"?g3(t):(r==="number"?vd:r==="string"?(i=Jm(t))?(t=i,yE):OR:t instanceof Jm?yE:t instanceof Date?qR:IR(t)?y3:Array.isArray(t)?mH:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?zR:vd)(e,t)}var mE=Bs(()=>{w_();yH();xH();_H();xE();bH();AH();gH();FR()});function PEe(e){var t=e.length;return function(r){return e[Math.max(0,Math.min(t-1,Math.floor(r*t)))]}}var REe=Bs(()=>{});function DEe(e,t){var r=Qm(+e,+t);return function(i){var n=r(i);return n-360*Math.floor(n/360)}}var IEe=Bs(()=>{T_()});function FEe(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var qEe=Bs(()=>{});function MH(e,t,r,i,n,a){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*r+t*i)&&(r-=e*l,i-=t*l),(s=Math.sqrt(r*r+i*i))&&(r/=s,i/=s,l/=s),e*i<t*r&&(e=-e,t=-t,l=-l,o=-o),{translateX:n,translateY:a,rotate:Math.atan2(t,e)*zEe,skewX:Math.atan(l)*zEe,scaleX:o,scaleY:s}}var zEe,BR,OEe=Bs(()=>{zEe=180/Math.PI,BR={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1}});function BEe(e){let t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?BR:MH(t.a,t.b,t.c,t.d,t.e,t.f)}function NEe(e){return e==null?BR:(NR||(NR=document.createElementNS("http://www.w3.org/2000/svg","g")),NR.setAttribute("transform",e),(e=NR.transform.baseVal.consolidate())?(e=e.matrix,MH(e.a,e.b,e.c,e.d,e.e,e.f)):BR)}var NR,UEe=Bs(()=>{OEe()});function VEe(e,t,r,i){function n(u){return u.length?u.pop()+" ":""}function a(u,f,c,h,v,d){if(u!==c||f!==h){var _=v.push("translate(",null,t,null,r);d.push({i:_-4,x:vd(u,c)},{i:_-2,x:vd(f,h)})}else(c||h)&&v.push("translate("+c+t+h+r)}function o(u,f,c,h){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),h.push({i:c.push(n(c)+"rotate(",null,i)-2,x:vd(u,f)})):f&&c.push(n(c)+"rotate("+f+i)}function s(u,f,c,h){u!==f?h.push({i:c.push(n(c)+"skewX(",null,i)-2,x:vd(u,f)}):f&&c.push(n(c)+"skewX("+f+i)}function l(u,f,c,h,v,d){if(u!==c||f!==h){var _=v.push(n(v)+"scale(",null,",",null,")");d.push({i:_-4,x:vd(u,c)},{i:_-2,x:vd(f,h)})}else(c!==1||h!==1)&&v.push(n(v)+"scale("+c+","+h+")")}return function(u,f){var c=[],h=[];return u=e(u),f=e(f),a(u.translateX,u.translateY,f.translateX,f.translateY,c,h),o(u.rotate,f.rotate,c,h),s(u.skewX,f.skewX,c,h),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,c,h),u=f=null,function(v){for(var d=-1,_=h.length,T;++d<_;)c[(T=h[d]).i]=T.x(v);return c.join("")}}}var HEe,GEe,YEe=Bs(()=>{xE();UEe();HEe=VEe(BEe,"px, ","px)","deg)"),GEe=VEe(NEe,", ",")",")")});function WEe(e){return((e=Math.exp(e))+1/e)/2}function bkt(e){return((e=Math.exp(e))-1/e)/2}function wkt(e){return((e=Math.exp(2*e))-1)/(e+1)}var _kt,XEe,ZEe=Bs(()=>{_kt=1e-12;XEe=function e(t,r,i){function n(a,o){var s=a[0],l=a[1],u=a[2],f=o[0],c=o[1],h=o[2],v=f-s,d=c-l,_=v*v+d*d,T,p;if(_<_kt)p=Math.log(h/u)/t,T=function(E){return[s+E*v,l+E*d,u*Math.exp(t*E*p)]};else{var M=Math.sqrt(_),b=(h*h-u*u+i*_)/(2*u*r*M),w=(h*h-u*u-i*_)/(2*h*r*M),k=Math.log(Math.sqrt(b*b+1)-b),x=Math.log(Math.sqrt(w*w+1)-w);p=(x-k)/t,T=function(E){var S=E*p,g=WEe(k),C=u/(r*M)*(g*wkt(t*S+k)-bkt(k));return[s+C*v,l+C*d,u*g/WEe(t*S+k)]}}return T.duration=p*1e3*t/Math.SQRT2,T}return n.rho=function(a){var o=Math.max(.001,+a),s=o*o,l=s*s;return e(o,s,l)},n}(Math.SQRT2,2,4)});function jEe(e){return function(t,r){var i=e((t=dE(t)).h,(r=dE(r)).h),n=gu(t.s,r.s),a=gu(t.l,r.l),o=gu(t.opacity,r.opacity);return function(s){return t.h=i(s),t.s=n(s),t.l=a(s),t.opacity=o(s),t+""}}}var KEe,JEe,QEe=Bs(()=>{w_();T_();KEe=jEe(Qm),JEe=jEe(gu)});function SH(e,t){var r=gu((e=d3(e)).l,(t=d3(t)).l),i=gu(e.a,t.a),n=gu(e.b,t.b),a=gu(e.opacity,t.opacity);return function(o){return e.l=r(o),e.a=i(o),e.b=n(o),e.opacity=a(o),e+""}}var $Ee=Bs(()=>{w_();T_()});function e5e(e){return function(t,r){var i=e((t=pE(t)).h,(r=pE(r)).h),n=gu(t.c,r.c),a=gu(t.l,r.l),o=gu(t.opacity,r.opacity);return function(s){return t.h=i(s),t.c=n(s),t.l=a(s),t.opacity=o(s),t+""}}}var t5e,r5e,n5e=Bs(()=>{w_();T_();t5e=e5e(Qm),r5e=e5e(gu)});function i5e(e){return function t(r){r=+r;function i(n,a){var o=e((n=p3(n)).h,(a=p3(a)).h),s=gu(n.s,a.s),l=gu(n.l,a.l),u=gu(n.opacity,a.opacity);return function(f){return n.h=o(f),n.s=s(f),n.l=l(Math.pow(f,r)),n.opacity=u(f),n+""}}return i.gamma=t,i}(1)}var a5e,o5e,s5e=Bs(()=>{w_();T_();a5e=i5e(Qm),o5e=i5e(gu)});function EH(e,t){t===void 0&&(t=e,e=$m);for(var r=0,i=t.length-1,n=t[0],a=new Array(i<0?0:i);r<i;)a[r]=e(n,n=t[++r]);return function(o){var s=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return a[s](o-s)}}var l5e=Bs(()=>{mE()});function u5e(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e(i/(t-1));return r}var f5e=Bs(()=>{});var A_={};qQe(A_,{interpolate:()=>$m,interpolateArray:()=>LEe,interpolateBasis:()=>PR,interpolateBasisClosed:()=>DR,interpolateCubehelix:()=>a5e,interpolateCubehelixLong:()=>o5e,interpolateDate:()=>qR,interpolateDiscrete:()=>PEe,interpolateHcl:()=>t5e,interpolateHclLong:()=>r5e,interpolateHsl:()=>KEe,interpolateHslLong:()=>JEe,interpolateHue:()=>DEe,interpolateLab:()=>SH,interpolateNumber:()=>vd,interpolateNumberArray:()=>y3,interpolateObject:()=>zR,interpolateRgb:()=>yE,interpolateRgbBasis:()=>kEe,interpolateRgbBasisClosed:()=>CEe,interpolateRound:()=>FEe,interpolateString:()=>OR,interpolateTransformCss:()=>HEe,interpolateTransformSvg:()=>GEe,interpolateZoom:()=>XEe,piecewise:()=>EH,quantize:()=>u5e});var M_=Bs(()=>{mE();xH();RR();pH();_H();REe();IEe();xE();FR();bH();qEe();AH();YEe();ZEe();yH();QEe();$Ee();n5e();s5e();l5e();f5e()});var UR=ne((Zcr,c5e)=>{"use strict";var Tkt=aa(),Akt=_i();c5e.exports=function(t,r,i,n,a){var o=r.data.data,s=o.i,l=a||o.color;if(s>=0){r.i=o.i;var u=i.marker;u.pattern?(!u.colors||!u.pattern.shape)&&(u.color=l,r.color=l):(u.color=l,r.color=l),Tkt.pointStyle(t,i,n,r)}else Akt.fill(t,l)}});var kH=ne((jcr,g5e)=>{"use strict";var h5e=Ai(),v5e=_i(),d5e=Wt(),Mkt=yh().resizeText,Skt=UR();function Ekt(e){var t=e._fullLayout._sunburstlayer.selectAll(".trace");Mkt(e,t,"sunburst"),t.each(function(r){var i=h5e.select(this),n=r[0],a=n.trace;i.style("opacity",a.opacity),i.selectAll("path.surface").each(function(o){h5e.select(this).call(p5e,o,a,e)})})}function p5e(e,t,r,i){var n=t.data.data,a=!t.children,o=n.i,s=d5e.castOption(r,o,"marker.line.color")||v5e.defaultLine,l=d5e.castOption(r,o,"marker.line.width")||0;e.call(Skt,t,r,i).style("stroke-width",l).call(v5e.stroke,s).style("opacity",a?r.leaf.opacity:null)}g5e.exports={style:Ekt,styleOne:p5e}});var vy=ne(is=>{"use strict";var S_=Wt(),kkt=_i(),Ckt=e0(),y5e=hm();is.findEntryWithLevel=function(e,t){var r;return t&&e.eachAfter(function(i){if(is.getPtId(i)===t)return r=i.copy()}),r||e};is.findEntryWithChild=function(e,t){var r;return e.eachAfter(function(i){for(var n=i.children||[],a=0;a<n.length;a++){var o=n[a];if(is.getPtId(o)===t)return r=i.copy()}}),r||e};is.isEntry=function(e){return!e.parent};is.isLeaf=function(e){return!e.children};is.getPtId=function(e){return e.data.data.id};is.getPtLabel=function(e){return e.data.data.label};is.getValue=function(e){return e.value};is.isHierarchyRoot=function(e){return m5e(e)===""};is.setSliceCursor=function(e,t,r){var i=r.isTransitioning;if(!i){var n=e.datum();i=r.hideOnRoot&&is.isHierarchyRoot(n)||r.hideOnLeaves&&is.isLeaf(n)}Ckt(e,i?null:"pointer")};function Lkt(e,t,r){return{color:is.getOutsideTextFontKey("color",e,t,r),family:is.getOutsideTextFontKey("family",e,t,r),size:is.getOutsideTextFontKey("size",e,t,r)}}function Pkt(e,t,r,i){var n=(i||{}).onPathbar,a=t.data.data,o=a.i,s=S_.castOption(e,o,(n?"pathbar.textfont":"insidetextfont")+".color");return!s&&e._input.textfont&&(s=S_.castOption(e._input,o,"textfont.color")),{color:s||kkt.contrast(a.color),family:is.getInsideTextFontKey("family",e,t,r,i),size:is.getInsideTextFontKey("size",e,t,r,i)}}is.getInsideTextFontKey=function(e,t,r,i,n){var a=(n||{}).onPathbar,o=a?"pathbar.textfont":"insidetextfont",s=r.data.data.i;return S_.castOption(t,s,o+"."+e)||S_.castOption(t,s,"textfont."+e)||i.size};is.getOutsideTextFontKey=function(e,t,r,i){var n=r.data.data.i;return S_.castOption(t,n,"outsidetextfont."+e)||S_.castOption(t,n,"textfont."+e)||i.size};is.isOutsideText=function(e,t){return!e._hasColorscale&&is.isHierarchyRoot(t)};is.determineTextFont=function(e,t,r,i){return is.isOutsideText(e,t)?Lkt(e,t,r):Pkt(e,t,r,i)};is.hasTransition=function(e){return!!(e&&e.duration>0)};is.getMaxDepth=function(e){return e.maxdepth>=0?e.maxdepth:1/0};is.isHeader=function(e,t){return!(is.isLeaf(e)||e.depth===t._maxDepth-1)};function m5e(e){return e.data.data.pid}is.getParent=function(e,t){return is.findEntryWithLevel(e,m5e(t))};is.listPath=function(e,t){var r=e.parent;if(!r)return[];var i=t?[r.data[t]]:[r];return is.listPath(r,t).concat(i)};is.getPath=function(e){return is.listPath(e,"label").join("/")+"/"};is.formatValue=y5e.formatPieValue;is.formatPercent=function(e,t){var r=S_.formatPercent(e,0);return r==="0%"&&(r=y5e.formatPiePercent(e,t)),r}});var wE=ne((Jcr,b5e)=>{"use strict";var m3=Ai(),x5e=wi(),Rkt=td().appendArrayPointValue,_E=Ol(),_5e=Wt(),Dkt=s2(),kf=vy(),Ikt=hm(),Fkt=Ikt.formatPieValue;b5e.exports=function(t,r,i,n,a){var o=n[0],s=o.trace,l=o.hierarchy,u=s.type==="sunburst",f=s.type==="treemap"||s.type==="icicle";"_hasHoverLabel"in s||(s._hasHoverLabel=!1),"_hasHoverEvent"in s||(s._hasHoverEvent=!1);var c=function(d){var _=i._fullLayout;if(!(i._dragging||_.hovermode===!1)){var T=i._fullData[s.index],p=d.data.data,M=p.i,b=kf.isHierarchyRoot(d),w=kf.getParent(l,d),k=kf.getValue(d),x=function(ue){return _5e.castOption(T,M,ue)},E=x("hovertemplate"),S=_E.castHoverinfo(T,_,M),g=_.separators,C;if(E||S&&S!=="none"&&S!=="skip"){var A,P;u&&(A=o.cx+d.pxmid[0]*(1-d.rInscribed),P=o.cy+d.pxmid[1]*(1-d.rInscribed)),f&&(A=d._hoverX,P=d._hoverY);var D={},z=[],O=[],V=function(ue){return z.indexOf(ue)!==-1};S&&(z=S==="all"?T._module.attributes.hoverinfo.flags:S.split("+")),D.label=p.label,V("label")&&D.label&&O.push(D.label),p.hasOwnProperty("v")&&(D.value=p.v,D.valueLabel=Fkt(D.value,g),V("value")&&O.push(D.valueLabel)),D.currentPath=d.currentPath=kf.getPath(d.data),V("current path")&&!b&&O.push(D.currentPath);var B,F=[],N=function(){F.indexOf(B)===-1&&(O.push(B),F.push(B))};D.percentParent=d.percentParent=k/kf.getValue(w),D.parent=d.parentString=kf.getPtLabel(w),V("percent parent")&&(B=kf.formatPercent(D.percentParent,g)+" of "+D.parent,N()),D.percentEntry=d.percentEntry=k/kf.getValue(r),D.entry=d.entry=kf.getPtLabel(r),V("percent entry")&&!b&&!d.onPathbar&&(B=kf.formatPercent(D.percentEntry,g)+" of "+D.entry,N()),D.percentRoot=d.percentRoot=k/kf.getValue(l),D.root=d.root=kf.getPtLabel(l),V("percent root")&&!b&&(B=kf.formatPercent(D.percentRoot,g)+" of "+D.root,N()),D.text=x("hovertext")||x("text"),V("text")&&(B=D.text,_5e.isValidTextValue(B)&&O.push(B)),C=[bE(d,T,a.eventDataKeys)];var Z={trace:T,y:P,_x0:d._x0,_x1:d._x1,_y0:d._y0,_y1:d._y1,text:O.join("<br>"),name:E||V("name")?T.name:void 0,color:x("hoverlabel.bgcolor")||p.color,borderColor:x("hoverlabel.bordercolor"),fontFamily:x("hoverlabel.font.family"),fontSize:x("hoverlabel.font.size"),fontColor:x("hoverlabel.font.color"),nameLength:x("hoverlabel.namelength"),textAlign:x("hoverlabel.align"),hovertemplate:E,hovertemplateLabels:D,eventData:C};u&&(Z.x0=A-d.rInscribed*d.rpx1,Z.x1=A+d.rInscribed*d.rpx1,Z.idealAlign=d.pxmid[0]<0?"left":"right"),f&&(Z.x=A,Z.idealAlign=A<0?"left":"right");var J=[];_E.loneHover(Z,{container:_._hoverlayer.node(),outerContainer:_._paper.node(),gd:i,inOut_bbox:J}),C[0].bbox=J[0],s._hasHoverLabel=!0}if(f){var re=t.select("path.surface");a.styleOne(re,d,T,i,{hovered:!0})}s._hasHoverEvent=!0,i.emit("plotly_hover",{points:C||[bE(d,T,a.eventDataKeys)],event:m3.event})}},h=function(d){var _=i._fullLayout,T=i._fullData[s.index],p=m3.select(this).datum();if(s._hasHoverEvent&&(d.originalEvent=m3.event,i.emit("plotly_unhover",{points:[bE(p,T,a.eventDataKeys)],event:m3.event}),s._hasHoverEvent=!1),s._hasHoverLabel&&(_E.loneUnhover(_._hoverlayer.node()),s._hasHoverLabel=!1),f){var M=t.select("path.surface");a.styleOne(M,p,T,i,{hovered:!1})}},v=function(d){var _=i._fullLayout,T=i._fullData[s.index],p=u&&(kf.isHierarchyRoot(d)||kf.isLeaf(d)),M=kf.getPtId(d),b=kf.isEntry(d)?kf.findEntryWithChild(l,M):kf.findEntryWithLevel(l,M),w=kf.getPtId(b),k={points:[bE(d,T,a.eventDataKeys)],event:m3.event};p||(k.nextLevel=w);var x=Dkt.triggerHandler(i,"plotly_"+s.type+"click",k);if(x!==!1&&_.hovermode&&(i._hoverdata=[bE(d,T,a.eventDataKeys)],_E.click(i,m3.event)),!p&&x!==!1&&!i._dragging&&!i._transitioning){x5e.call("_storeDirectGUIEdit",T,_._tracePreGUI[T.uid],{level:T.level});var E={data:[{level:w}],traces:[s.index]},S={frame:{redraw:!1,duration:a.transitionTime},transition:{duration:a.transitionTime,easing:a.transitionEasing},mode:"immediate",fromcurrent:!0};_E.loneUnhover(_._hoverlayer.node()),x5e.call("animate",i,E,S)}};t.on("mouseover",c),t.on("mouseout",h),t.on("click",v)};function bE(e,t,r){for(var i=e.data.data,n={curveNumber:t.index,pointNumber:i.i,data:t._input,fullData:t},a=0;a<r.length;a++){var o=r[a];o in e&&(n[o]=e[o])}return"parentString"in e&&!kf.isHierarchyRoot(e)&&(n.parent=e.parentString),Rkt(n,t,i.i),n}});var HR=ne(VR=>{"use strict";var TE=Ai(),qkt=uE(),M0=(M_(),Yb(A_)).interpolate,w5e=aa(),xh=Wt(),zkt=Es(),S5e=yh(),T5e=S5e.recordMinTextSize,Okt=S5e.clearMinTextSize,E5e=_R(),Bkt=hm().getRotationAngle,Nkt=E5e.computeTransform,Ukt=E5e.transformInsideText,Vkt=kH().styleOne,Hkt=_p().resizeText,Gkt=wE(),CH=iH(),Fo=vy();VR.plot=function(e,t,r,i){var n=e._fullLayout,a=n._sunburstlayer,o,s,l=!r,u=!n.uniformtext.mode&&Fo.hasTransition(r);if(Okt("sunburst",n),o=a.selectAll("g.trace.sunburst").data(t,function(c){return c[0].trace.uid}),o.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),o.order(),u){i&&(s=i());var f=TE.transition().duration(r.duration).ease(r.easing).each("end",function(){s&&s()}).each("interrupt",function(){s&&s()});f.each(function(){a.selectAll("g.trace").each(function(c){A5e(e,c,this,r)})})}else o.each(function(c){A5e(e,c,this,r)}),n.uniformtext.mode&&Hkt(e,n._sunburstlayer.selectAll(".trace"),"sunburst");l&&o.exit().remove()};function A5e(e,t,r,i){var n=e._context.staticPlot,a=e._fullLayout,o=!a.uniformtext.mode&&Fo.hasTransition(i),s=TE.select(r),l=s.selectAll("g.slice"),u=t[0],f=u.trace,c=u.hierarchy,h=Fo.findEntryWithLevel(c,f.level),v=Fo.getMaxDepth(f),d=a._size,_=f.domain,T=d.w*(_.x[1]-_.x[0]),p=d.h*(_.y[1]-_.y[0]),M=.5*Math.min(T,p),b=u.cx=d.l+d.w*(_.x[1]+_.x[0])/2,w=u.cy=d.t+d.h*(1-_.y[0])-p/2;if(!h)return l.remove();var k=null,x={};o&&l.each(function(K){x[Fo.getPtId(K)]={rpx0:K.rpx0,rpx1:K.rpx1,x0:K.x0,x1:K.x1,transform:K.transform},!k&&Fo.isEntry(K)&&(k=K)});var E=Ykt(h).descendants(),S=h.height+1,g=0,C=v;u.hasMultipleRoots&&Fo.isHierarchyRoot(h)&&(E=E.slice(1),S-=1,g=1,C+=1),E=E.filter(function(K){return K.y1<=C});var A=Bkt(f.rotation);A&&E.forEach(function(K){K.x0+=A,K.x1+=A});var P=Math.min(S,v),D=function(K){return(K-g)/P*M},z=function(K,X){return[K*Math.cos(X),-K*Math.sin(X)]},O=function(K){return xh.pathAnnulus(K.rpx0,K.rpx1,K.x0,K.x1,b,w)},V=function(K){return b+M5e(K)[0]*(K.transform.rCenter||0)+(K.transform.x||0)},B=function(K){return w+M5e(K)[1]*(K.transform.rCenter||0)+(K.transform.y||0)};l=l.data(E,Fo.getPtId),l.enter().append("g").classed("slice",!0),o?l.exit().transition().each(function(){var K=TE.select(this),X=K.select("path.surface");X.transition().attrTween("d",function(oe){var me=J(oe);return function(xe){return O(me(xe))}});var ae=K.select("g.slicetext");ae.attr("opacity",0)}).remove():l.exit().remove(),l.order();var F=null;if(o&&k){var N=Fo.getPtId(k);l.each(function(K){F===null&&Fo.getPtId(K)===N&&(F=K.x1)})}var Z=l;o&&(Z=Z.transition().each("end",function(){var K=TE.select(this);Fo.setSliceCursor(K,e,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Z.each(function(K){var X=TE.select(this),ae=xh.ensureSingle(X,"path","surface",function(ge){ge.style("pointer-events",n?"none":"all")});K.rpx0=D(K.y0),K.rpx1=D(K.y1),K.xmid=(K.x0+K.x1)/2,K.pxmid=z(K.rpx1,K.xmid),K.midangle=-(K.xmid-Math.PI/2),K.startangle=-(K.x0-Math.PI/2),K.stopangle=-(K.x1-Math.PI/2),K.halfangle=.5*Math.min(xh.angleDelta(K.x0,K.x1)||Math.PI,Math.PI),K.ring=1-K.rpx0/K.rpx1,K.rInscribed=Wkt(K,f),o?ae.transition().attrTween("d",function(ge){var le=re(ge);return function(we){return O(le(we))}}):ae.attr("d",O),X.call(Gkt,h,e,t,{eventDataKeys:CH.eventDataKeys,transitionTime:CH.CLICK_TRANSITION_TIME,transitionEasing:CH.CLICK_TRANSITION_EASING}).call(Fo.setSliceCursor,e,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:e._transitioning}),ae.call(Vkt,K,f,e);var oe=xh.ensureSingle(X,"g","slicetext"),me=xh.ensureSingle(oe,"text","",function(ge){ge.attr("data-notex",1)}),xe=xh.ensureUniformFontSize(e,Fo.determineTextFont(f,K,a.font));me.text(VR.formatSliceLabel(K,h,f,t,a)).classed("slicetext",!0).attr("text-anchor","middle").call(w5e.font,xe).call(zkt.convertToTspans,e);var ce=w5e.bBox(me.node());K.transform=Ukt(ce,K,u),K.transform.targetX=V(K),K.transform.targetY=B(K);var ie=function(ge,le){var we=ge.transform;return Nkt(we,le),we.fontSize=xe.size,T5e(f.type,we,a),xh.getTextTransform(we)};o?me.transition().attrTween("transform",function(ge){var le=ue(ge);return function(we){return ie(le(we),ce)}}):me.attr("transform",ie(K,ce))});function J(K){var X=Fo.getPtId(K),ae=x[X],oe=x[Fo.getPtId(h)],me;if(oe){var xe=(K.x1>oe.x1?2*Math.PI:0)+A;me=K.rpx1<oe.rpx1?{x0:K.x0,x1:K.x1,rpx0:0,rpx1:0}:{x0:xe,x1:xe,rpx0:K.rpx0,rpx1:K.rpx1}}else{var ce,ie=Fo.getPtId(K.parent);l.each(function(qe){if(Fo.getPtId(qe)===ie)return ce=qe});var ge=ce.children,le;ge.forEach(function(qe,et){if(Fo.getPtId(qe)===X)return le=et});var we=ge.length,Re=M0(ce.x0,ce.x1);me={rpx0:M,rpx1:M,x0:Re(le/we),x1:Re((le+1)/we)}}return M0(ae,me)}function re(K){var X=x[Fo.getPtId(K)],ae,oe={x0:K.x0,x1:K.x1,rpx0:K.rpx0,rpx1:K.rpx1};if(X)ae=X;else if(k)if(K.parent)if(F){var me=(K.x1>F?2*Math.PI:0)+A;ae={x0:me,x1:me}}else ae={rpx0:M,rpx1:M},xh.extendFlat(ae,fe(K));else ae={rpx0:0,rpx1:0};else ae={x0:A,x1:A};return M0(ae,oe)}function ue(K){var X=x[Fo.getPtId(K)],ae,oe=K.transform;if(X)ae=X;else if(ae={rpx1:K.rpx1,transform:{textPosAngle:oe.textPosAngle,scale:0,rotate:oe.rotate,rCenter:oe.rCenter,x:oe.x,y:oe.y}},k)if(K.parent)if(F){var me=K.x1>F?2*Math.PI:0;ae.x0=ae.x1=me}else xh.extendFlat(ae,fe(K));else ae.x0=ae.x1=A;else ae.x0=ae.x1=A;var xe=M0(ae.transform.textPosAngle,K.transform.textPosAngle),ce=M0(ae.rpx1,K.rpx1),ie=M0(ae.x0,K.x0),ge=M0(ae.x1,K.x1),le=M0(ae.transform.scale,oe.scale),we=M0(ae.transform.rotate,oe.rotate),Re=oe.rCenter===0?3:ae.transform.rCenter===0?1/3:1,qe=M0(ae.transform.rCenter,oe.rCenter),et=function(Pe){return qe(Math.pow(Pe,Re))};return function(Pe){var Ie=ce(Pe),ut=ie(Pe),ft=ge(Pe),je=et(Pe),_t=z(Ie,(ut+ft)/2),Bt=xe(Pe),Lt={pxmid:_t,rpx1:Ie,transform:{textPosAngle:Bt,rCenter:je,x:oe.x,y:oe.y}};return T5e(f.type,oe,a),{transform:{targetX:V(Lt),targetY:B(Lt),scale:le(Pe),rotate:we(Pe),rCenter:je}}}}function fe(K){var X=K.parent,ae=x[Fo.getPtId(X)],oe={};if(ae){var me=X.children,xe=me.indexOf(K),ce=me.length,ie=M0(ae.x0,ae.x1);oe.x0=ie(xe/ce),oe.x1=ie(xe/ce)}else oe.x0=oe.x1=0;return oe}}function Ykt(e){return qkt.partition().size([2*Math.PI,e.height+1])(e)}VR.formatSliceLabel=function(e,t,r,i,n){var a=r.texttemplate,o=r.textinfo;if(!a&&(!o||o==="none"))return"";var s=n.separators,l=i[0],u=e.data.data,f=l.hierarchy,c=Fo.isHierarchyRoot(e),h=Fo.getParent(f,e),v=Fo.getValue(e);if(!a){var d=o.split("+"),_=function(g){return d.indexOf(g)!==-1},T=[],p;if(_("label")&&u.label&&T.push(u.label),u.hasOwnProperty("v")&&_("value")&&T.push(Fo.formatValue(u.v,s)),!c){_("current path")&&T.push(Fo.getPath(e.data));var M=0;_("percent parent")&&M++,_("percent entry")&&M++,_("percent root")&&M++;var b=M>1;if(M){var w,k=function(g){p=Fo.formatPercent(w,s),b&&(p+=" of "+g),T.push(p)};_("percent parent")&&!c&&(w=v/Fo.getValue(h),k("parent")),_("percent entry")&&(w=v/Fo.getValue(t),k("entry")),_("percent root")&&(w=v/Fo.getValue(f),k("root"))}}return _("text")&&(p=xh.castOption(r,u.i,"text"),xh.isValidTextValue(p)&&T.push(p)),T.join("<br>")}var x=xh.castOption(r,u.i,"texttemplate");if(!x)return"";var E={};u.label&&(E.label=u.label),u.hasOwnProperty("v")&&(E.value=u.v,E.valueLabel=Fo.formatValue(u.v,s)),E.currentPath=Fo.getPath(e.data),c||(E.percentParent=v/Fo.getValue(h),E.percentParentLabel=Fo.formatPercent(E.percentParent,s),E.parent=Fo.getPtLabel(h)),E.percentEntry=v/Fo.getValue(t),E.percentEntryLabel=Fo.formatPercent(E.percentEntry,s),E.entry=Fo.getPtLabel(t),E.percentRoot=v/Fo.getValue(f),E.percentRootLabel=Fo.formatPercent(E.percentRoot,s),E.root=Fo.getPtLabel(f),u.hasOwnProperty("color")&&(E.color=u.color);var S=xh.castOption(r,u.i,"text");return(xh.isValidTextValue(S)||S==="")&&(E.text=S),E.customdata=xh.castOption(r,u.i,"customdata"),xh.texttemplateString(x,E,n._d3locale,E,r._meta||{})};function Wkt(e){return e.rpx0===0&&xh.isFullCircle([e.x0,e.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(e.halfangle)),e.ring/2))}function M5e(e){return Xkt(e.rpx1,e.transform.textPosAngle)}function Xkt(e,t){return[e*Math.sin(t),-e*Math.cos(t)]}});var C5e=ne(($cr,k5e)=>{"use strict";k5e.exports={moduleType:"trace",name:"sunburst",basePlotModule:HSe(),categories:[],animatable:!0,attributes:lE(),layoutAttributes:aH(),supplyDefaults:JSe(),supplyLayoutDefaults:$Se(),calc:cE().calc,crossTraceCalc:cE().crossTraceCalc,plot:HR().plot,style:kH().style,colorbar:ph(),meta:{}}});var P5e=ne((ehr,L5e)=>{"use strict";L5e.exports=C5e()});var D5e=ne(x3=>{"use strict";var R5e=Zs();x3.name="treemap";x3.plot=function(e,t,r,i){R5e.plotBasePlot(x3.name,e,t,r,i)};x3.clean=function(e,t,r,i){R5e.cleanBasePlot(x3.name,e,t,r,i)}});var E_=ne((rhr,I5e)=>{"use strict";I5e.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}});var GR=ne((nhr,q5e)=>{"use strict";var Zkt=Ba().hovertemplateAttrs,jkt=Ba().texttemplateAttrs,Kkt=Ps(),Jkt=fl().attributes,k_=g_(),Rp=lE(),F5e=E_(),LH=oa().extendFlat,Qkt=hc().pattern;q5e.exports={labels:Rp.labels,parents:Rp.parents,values:Rp.values,branchvalues:Rp.branchvalues,count:Rp.count,level:Rp.level,maxdepth:Rp.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:LH({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:Rp.marker.colors,pattern:Qkt,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:Rp.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},Kkt("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:LH({},k_.textfont,{}),editType:"calc"},text:k_.text,textinfo:Rp.textinfo,texttemplate:jkt({editType:"plot"},{keys:F5e.eventDataKeys.concat(["label","value"])}),hovertext:k_.hovertext,hoverinfo:Rp.hoverinfo,hovertemplate:Zkt({},{keys:F5e.eventDataKeys}),textfont:k_.textfont,insidetextfont:k_.insidetextfont,outsidetextfont:LH({},k_.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:k_.sort,root:Rp.root,domain:Jkt({name:"treemap",trace:!0,editType:"calc"})}});var PH=ne((ihr,z5e)=>{"use strict";z5e.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}});var U5e=ne((ahr,N5e)=>{"use strict";var O5e=Wt(),$kt=GR(),eCt=_i(),tCt=fl().defaults,rCt=Fd().handleText,nCt=Ux().TEXTPAD,iCt=y_().handleMarkerDefaults,B5e=ul(),aCt=B5e.hasColorscale,oCt=B5e.handleDefaults;N5e.exports=function(t,r,i,n){function a(T,p){return O5e.coerce(t,r,$kt,T,p)}var o=a("labels"),s=a("parents");if(!o||!o.length||!s||!s.length){r.visible=!1;return}var l=a("values");l&&l.length?a("branchvalues"):a("count"),a("level"),a("maxdepth");var u=a("tiling.packing");u==="squarify"&&a("tiling.squarifyratio"),a("tiling.flip"),a("tiling.pad");var f=a("text");a("texttemplate"),r.texttemplate||a("textinfo",O5e.isArrayOrTypedArray(f)?"text+label":"label"),a("hovertext"),a("hovertemplate");var c=a("pathbar.visible"),h="auto";rCt(t,r,n,a,h,{hasPathbar:c,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),a("textposition");var v=r.textposition.indexOf("bottom")!==-1;iCt(t,r,n,a);var d=r._hasColorscale=aCt(t,"marker","colors")||(t.marker||{}).coloraxis;d?oCt(t,r,n,a,{prefix:"marker.",cLetter:"c"}):a("marker.depthfade",!(r.marker.colors||[]).length);var _=r.textfont.size*2;a("marker.pad.t",v?_/4:_),a("marker.pad.l",_/4),a("marker.pad.r",_/4),a("marker.pad.b",v?_:_/4),a("marker.cornerradius"),r._hovered={marker:{line:{width:2,color:eCt.contrast(n.paper_bgcolor)}}},c&&(a("pathbar.thickness",r.pathbar.textfont.size+2*nCt),a("pathbar.side"),a("pathbar.edgeshape")),a("sort"),a("root.color"),tCt(r,n,a),r._length=null}});var H5e=ne((ohr,V5e)=>{"use strict";var sCt=Wt(),lCt=PH();V5e.exports=function(t,r){function i(n,a){return sCt.coerce(t,r,lCt,n,a)}i("treemapcolorway",r.colorway),i("extendtreemapcolors")}});var DH=ne(RH=>{"use strict";var G5e=cE();RH.calc=function(e,t){return G5e.calc(e,t)};RH.crossTraceCalc=function(e){return G5e._runCrossTraceCalc("treemap",e)}});var IH=ne((lhr,Y5e)=>{"use strict";Y5e.exports=function e(t,r,i){var n;i.swapXY&&(n=t.x0,t.x0=t.y0,t.y0=n,n=t.x1,t.x1=t.y1,t.y1=n),i.flipX&&(n=t.x0,t.x0=r[0]-t.x1,t.x1=r[0]-n),i.flipY&&(n=t.y0,t.y0=r[1]-t.y1,t.y1=r[1]-n);var a=t.children;if(a)for(var o=0;o<a.length;o++)e(a[o],r,i)}});var FH=ne((uhr,W5e)=>{"use strict";var _3=uE(),uCt=IH();W5e.exports=function(t,r,i){var n=i.flipX,a=i.flipY,o=i.packing==="dice-slice",s=i.pad[a?"bottom":"top"],l=i.pad[n?"right":"left"],u=i.pad[n?"left":"right"],f=i.pad[a?"top":"bottom"],c;o&&(c=l,l=s,s=c,c=u,u=f,f=c);var h=_3.treemap().tile(fCt(i.packing,i.squarifyratio)).paddingInner(i.pad.inner).paddingLeft(l).paddingRight(u).paddingTop(s).paddingBottom(f).size(o?[r[1],r[0]]:r)(t);return(o||n||a)&&uCt(h,r,{swapXY:o,flipX:n,flipY:a}),h};function fCt(e,t){switch(e){case"squarify":return _3.treemapSquarify.ratio(t);case"binary":return _3.treemapBinary;case"dice":return _3.treemapDice;case"slice":return _3.treemapSlice;default:return _3.treemapSliceDice}}});var YR=ne((fhr,K5e)=>{"use strict";var X5e=Ai(),b3=_i(),Z5e=Wt(),qH=vy(),cCt=yh().resizeText,hCt=UR();function vCt(e){var t=e._fullLayout._treemaplayer.selectAll(".trace");cCt(e,t,"treemap"),t.each(function(r){var i=X5e.select(this),n=r[0],a=n.trace;i.style("opacity",a.opacity),i.selectAll("path.surface").each(function(o){X5e.select(this).call(j5e,o,a,e,{hovered:!1})})})}function j5e(e,t,r,i,n){var a=(n||{}).hovered,o=t.data.data,s=o.i,l,u,f=o.color,c=qH.isHierarchyRoot(t),h=1;if(a)l=r._hovered.marker.line.color,u=r._hovered.marker.line.width;else if(c&&f===r.root.color)h=100,l="rgba(0,0,0,0)",u=0;else if(l=Z5e.castOption(r,s,"marker.line.color")||b3.defaultLine,u=Z5e.castOption(r,s,"marker.line.width")||0,!r._hasColorscale&&!t.onPathbar){var v=r.marker.depthfade;if(v){var d=b3.combine(b3.addOpacity(r._backgroundColor,.75),f),_;if(v===!0){var T=qH.getMaxDepth(r);isFinite(T)?qH.isLeaf(t)?_=0:_=r._maxVisibleLayers-(t.data.depth-r._entryDepth):_=t.data.height+1}else _=t.data.depth-r._entryDepth,r._atRootLevel||_++;if(_>0)for(var p=0;p<_;p++){var M=.5*p/_;f=b3.combine(b3.addOpacity(d,M),f)}}}e.call(hCt,t,r,i,f).style("stroke-width",u).call(b3.stroke,l).style("opacity",h)}K5e.exports={style:vCt,styleOne:j5e}});var tke=ne((chr,eke)=>{"use strict";var J5e=Ai(),WR=Wt(),Q5e=aa(),dCt=Es(),pCt=FH(),$5e=YR().styleOne,zH=E_(),w3=vy(),gCt=wE(),OH=!0;eke.exports=function(t,r,i,n,a){var o=a.barDifY,s=a.width,l=a.height,u=a.viewX,f=a.viewY,c=a.pathSlice,h=a.toMoveInsideSlice,v=a.strTransform,d=a.hasTransition,_=a.handleSlicesExit,T=a.makeUpdateSliceInterpolator,p=a.makeUpdateTextInterpolator,M={},b=t._context.staticPlot,w=t._fullLayout,k=r[0],x=k.trace,E=k.hierarchy,S=s/x._entryDepth,g=w3.listPath(i.data,"id"),C=pCt(E.copy(),[s,l],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();C=C.filter(function(P){var D=g.indexOf(P.data.id);return D===-1?!1:(P.x0=S*D,P.x1=S*(D+1),P.y0=o,P.y1=o+l,P.onPathbar=!0,!0)}),C.reverse(),n=n.data(C,w3.getPtId),n.enter().append("g").classed("pathbar",!0),_(n,OH,M,[s,l],c),n.order();var A=n;d&&(A=A.transition().each("end",function(){var P=J5e.select(this);w3.setSliceCursor(P,t,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),A.each(function(P){P._x0=u(P.x0),P._x1=u(P.x1),P._y0=f(P.y0),P._y1=f(P.y1),P._hoverX=u(P.x1-Math.min(s,l)/2),P._hoverY=f(P.y1-l/2);var D=J5e.select(this),z=WR.ensureSingle(D,"path","surface",function(F){F.style("pointer-events",b?"none":"all")});d?z.transition().attrTween("d",function(F){var N=T(F,OH,M,[s,l]);return function(Z){return c(N(Z))}}):z.attr("d",c),D.call(gCt,i,t,r,{styleOne:$5e,eventDataKeys:zH.eventDataKeys,transitionTime:zH.CLICK_TRANSITION_TIME,transitionEasing:zH.CLICK_TRANSITION_EASING}).call(w3.setSliceCursor,t,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:t._transitioning}),z.call($5e,P,x,t,{hovered:!1}),P._text=(w3.getPtLabel(P)||"").split("<br>").join(" ")||"";var O=WR.ensureSingle(D,"g","slicetext"),V=WR.ensureSingle(O,"text","",function(F){F.attr("data-notex",1)}),B=WR.ensureUniformFontSize(t,w3.determineTextFont(x,P,w.font,{onPathbar:!0}));V.text(P._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(Q5e.font,B).call(dCt.convertToTspans,t),P.textBB=Q5e.bBox(V.node()),P.transform=h(P,{fontSize:B.size,onPathbar:!0}),P.transform.fontSize=B.size,d?V.transition().attrTween("transform",function(F){var N=p(F,OH,M,[s,l]);return function(Z){return v(N(Z))}}):V.attr("transform",v(P))})}});var ake=ne((hhr,ike)=>{"use strict";var rke=Ai(),BH=(M_(),Yb(A_)).interpolate,e1=vy(),AE=Wt(),nke=Ux().TEXTPAD,yCt=Yx(),mCt=yCt.toMoveInsideBar,xCt=yh(),NH=xCt.recordMinTextSize,_Ct=E_(),bCt=tke();function C_(e){return e1.isHierarchyRoot(e)?"":e1.getPtId(e)}ike.exports=function(t,r,i,n,a){var o=t._fullLayout,s=r[0],l=s.trace,u=l.type,f=u==="icicle",c=s.hierarchy,h=e1.findEntryWithLevel(c,l.level),v=rke.select(i),d=v.selectAll("g.pathbar"),_=v.selectAll("g.slice");if(!h){d.remove(),_.remove();return}var T=e1.isHierarchyRoot(h),p=!o.uniformtext.mode&&e1.hasTransition(n),M=e1.getMaxDepth(l),b=function(Me){return Me.data.depth-h.data.depth<M},w=o._size,k=l.domain,x=w.w*(k.x[1]-k.x[0]),E=w.h*(k.y[1]-k.y[0]),S=x,g=l.pathbar.thickness,C=l.marker.line.width+_Ct.gapWithPathbar,A=l.pathbar.visible?l.pathbar.side.indexOf("bottom")>-1?E+C:-(g+C):0,P={x0:S,x1:S,y0:A,y1:A+g},D=function(Me,Ze,dt){var it=l.tiling.pad,vt=function(mt){return mt-it<=Ze.x0},rt=function(mt){return mt+it>=Ze.x1},We=function(mt){return mt-it<=Ze.y0},ht=function(mt){return mt+it>=Ze.y1};return Me.x0===Ze.x0&&Me.x1===Ze.x1&&Me.y0===Ze.y0&&Me.y1===Ze.y1?{x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1}:{x0:vt(Me.x0-it)?0:rt(Me.x0-it)?dt[0]:Me.x0,x1:vt(Me.x1+it)?0:rt(Me.x1+it)?dt[0]:Me.x1,y0:We(Me.y0-it)?0:ht(Me.y0-it)?dt[1]:Me.y0,y1:We(Me.y1+it)?0:ht(Me.y1+it)?dt[1]:Me.y1}},z=null,O={},V={},B=null,F=function(Me,Ze){return Ze?O[C_(Me)]:V[C_(Me)]},N=function(Me,Ze,dt,it){if(Ze)return O[C_(c)]||P;var vt=V[l.level]||dt;return b(Me)?D(Me,vt,it):{}};s.hasMultipleRoots&&T&&M++,l._maxDepth=M,l._backgroundColor=o.paper_bgcolor,l._entryDepth=h.data.depth,l._atRootLevel=T;var Z=-x/2+w.l+w.w*(k.x[1]+k.x[0])/2,J=-E/2+w.t+w.h*(1-(k.y[1]+k.y[0])/2),re=function(Me){return Z+Me},ue=function(Me){return J+Me},fe=ue(0),K=re(0),X=function(Me){return K+Me},ae=function(Me){return fe+Me};function oe(Me,Ze){return Me+","+Ze}var me=X(0),xe=function(Me){Me.x=Math.max(me,Me.x)},ce=l.pathbar.edgeshape,ie=function(Me){var Ze=X(Math.max(Math.min(Me.x0,Me.x0),0)),dt=X(Math.min(Math.max(Me.x1,Me.x1),S)),it=ae(Me.y0),vt=ae(Me.y1),rt=g/2,We={},ht={};We.x=Ze,ht.x=dt,We.y=ht.y=(it+vt)/2;var mt={x:Ze,y:it},er={x:dt,y:it},$t={x:dt,y:vt},cr={x:Ze,y:vt};return ce===">"?(mt.x-=rt,er.x-=rt,$t.x-=rt,cr.x-=rt):ce==="/"?($t.x-=rt,cr.x-=rt,We.x-=rt/2,ht.x-=rt/2):ce==="\\"?(mt.x-=rt,er.x-=rt,We.x-=rt/2,ht.x-=rt/2):ce==="<"&&(We.x-=rt,ht.x-=rt),xe(mt),xe(cr),xe(We),xe(er),xe($t),xe(ht),"M"+oe(mt.x,mt.y)+"L"+oe(er.x,er.y)+"L"+oe(ht.x,ht.y)+"L"+oe($t.x,$t.y)+"L"+oe(cr.x,cr.y)+"L"+oe(We.x,We.y)+"Z"},ge=l[f?"tiling":"marker"].pad,le=function(Me){return l.textposition.indexOf(Me)!==-1},we=le("top"),Re=le("left"),qe=le("right"),et=le("bottom"),Pe=function(Me){var Ze=re(Me.x0),dt=re(Me.x1),it=ue(Me.y0),vt=ue(Me.y1),rt=dt-Ze,We=vt-it;if(!rt||!We)return"";var ht=l.marker.cornerradius||0,mt=Math.min(ht,rt/2,We/2);mt&&Me.data&&Me.data.data&&Me.data.data.label&&(we&&(mt=Math.min(mt,ge.t)),Re&&(mt=Math.min(mt,ge.l)),qe&&(mt=Math.min(mt,ge.r)),et&&(mt=Math.min(mt,ge.b)));var er=function($t,cr){return mt?"a"+oe(mt,mt)+" 0 0 1 "+oe($t,cr):""};return"M"+oe(Ze,it+mt)+er(mt,-mt)+"L"+oe(dt-mt,it)+er(mt,mt)+"L"+oe(dt,vt-mt)+er(-mt,mt)+"L"+oe(Ze+mt,vt)+er(-mt,-mt)+"Z"},Ie=function(Me,Ze){var dt=Me.x0,it=Me.x1,vt=Me.y0,rt=Me.y1,We=Me.textBB,ht=we||Ze.isHeader&&!et,mt=ht?"start":et?"end":"middle",er=le("right"),$t=le("left")||Ze.onPathbar,cr=$t?-1:er?1:0;if(Ze.isHeader){if(dt+=(f?ge:ge.l)-nke,it-=(f?ge:ge.r)-nke,dt>=it){var or=(dt+it)/2;dt=or,it=or}var vr;et?(vr=rt-(f?ge:ge.b),vt<vr&&vr<rt&&(vt=vr)):(vr=vt+(f?ge:ge.t),vt<vr&&vr<rt&&(rt=vr))}var Ot=mCt(dt,it,vt,rt,We,{isHorizontal:!1,constrained:!0,angle:0,anchor:mt,leftToRight:cr});return Ot.fontSize=Ze.fontSize,Ot.targetX=re(Ot.targetX),Ot.targetY=ue(Ot.targetY),isNaN(Ot.targetX)||isNaN(Ot.targetY)?{}:(dt!==it&&vt!==rt&&NH(l.type,Ot,o),{scale:Ot.scale,rotate:Ot.rotate,textX:Ot.textX,textY:Ot.textY,anchorX:Ot.anchorX,anchorY:Ot.anchorY,targetX:Ot.targetX,targetY:Ot.targetY})},ut=function(Me,Ze){for(var dt,it=0,vt=Me;!dt&&it<M;)it++,vt=vt.parent,vt?dt=F(vt,Ze):it=M;return dt||{}},ft=function(Me,Ze,dt,it){var vt=F(Me,Ze),rt;if(Ze)rt=P;else{var We=F(h,Ze);We?rt=D(Me,We,it):rt={}}return BH(vt,rt)},je=function(Me,Ze,dt,it,vt){var rt=F(Me,Ze),We;if(rt)We=rt;else if(Ze)We=P;else if(z)if(Me.parent){var ht=B||dt;ht&&!Ze?We=D(Me,ht,it):(We={},AE.extendFlat(We,ut(Me,Ze)))}else We=AE.extendFlat({},Me),f&&(vt.orientation==="h"?vt.flipX?We.x0=Me.x1:We.x1=0:vt.flipY?We.y0=Me.y1:We.y1=0);else We={};return BH(We,{x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1})},_t=function(Me,Ze,dt,it){var vt=F(Me,Ze),rt={},We=N(Me,Ze,dt,it);AE.extendFlat(rt,{transform:Ie({x0:We.x0,x1:We.x1,y0:We.y0,y1:We.y1,textBB:Me.textBB,_text:Me._text},{isHeader:e1.isHeader(Me,l)})}),vt?rt=vt:Me.parent&&AE.extendFlat(rt,ut(Me,Ze));var ht=Me.transform;return Me.x0!==Me.x1&&Me.y0!==Me.y1&&NH(l.type,ht,o),BH(rt,{transform:{scale:ht.scale,rotate:ht.rotate,textX:ht.textX,textY:ht.textY,anchorX:ht.anchorX,anchorY:ht.anchorY,targetX:ht.targetX,targetY:ht.targetY}})},Bt=function(Me,Ze,dt,it,vt){var rt=it[0],We=it[1];p?Me.exit().transition().each(function(){var ht=rke.select(this),mt=ht.select("path.surface");mt.transition().attrTween("d",function($t){var cr=ft($t,Ze,dt,[rt,We]);return function(or){return vt(cr(or))}});var er=ht.select("g.slicetext");er.attr("opacity",0)}).remove():Me.exit().remove()},Lt=function(Me){var Ze=Me.transform;return Me.x0!==Me.x1&&Me.y0!==Me.y1&&NH(l.type,Ze,o),AE.getTextTransform({textX:Ze.textX,textY:Ze.textY,anchorX:Ze.anchorX,anchorY:Ze.anchorY,targetX:Ze.targetX,targetY:Ze.targetY,scale:Ze.scale,rotate:Ze.rotate})};p&&(d.each(function(Me){O[C_(Me)]={x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1},Me.transform&&(O[C_(Me)].transform={textX:Me.transform.textX,textY:Me.transform.textY,anchorX:Me.transform.anchorX,anchorY:Me.transform.anchorY,targetX:Me.transform.targetX,targetY:Me.transform.targetY,scale:Me.transform.scale,rotate:Me.transform.rotate})}),_.each(function(Me){V[C_(Me)]={x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1},Me.transform&&(V[C_(Me)].transform={textX:Me.transform.textX,textY:Me.transform.textY,anchorX:Me.transform.anchorX,anchorY:Me.transform.anchorY,targetX:Me.transform.targetX,targetY:Me.transform.targetY,scale:Me.transform.scale,rotate:Me.transform.rotate}),!z&&e1.isEntry(Me)&&(z=Me)})),B=a(t,r,h,_,{width:x,height:E,viewX:re,viewY:ue,pathSlice:Pe,toMoveInsideSlice:Ie,prevEntry:z,makeUpdateSliceInterpolator:je,makeUpdateTextInterpolator:_t,handleSlicesExit:Bt,hasTransition:p,strTransform:Lt}),l.pathbar.visible?bCt(t,r,h,d,{barDifY:A,width:S,height:g,viewX:X,viewY:ae,pathSlice:ie,toMoveInsideSlice:Ie,makeUpdateSliceInterpolator:je,makeUpdateTextInterpolator:_t,handleSlicesExit:Bt,hasTransition:p,strTransform:Lt}):d.remove()}});var UH=ne((vhr,ske)=>{"use strict";var wCt=Ai(),TCt=vy(),ACt=yh(),MCt=ACt.clearMinTextSize,SCt=_p().resizeText,oke=ake();ske.exports=function(t,r,i,n,a){var o=a.type,s=a.drawDescendants,l=t._fullLayout,u=l["_"+o+"layer"],f,c,h=!i;if(MCt(o,l),f=u.selectAll("g.trace."+o).data(r,function(d){return d[0].trace.uid}),f.enter().append("g").classed("trace",!0).classed(o,!0),f.order(),!l.uniformtext.mode&&TCt.hasTransition(i)){n&&(c=n());var v=wCt.transition().duration(i.duration).ease(i.easing).each("end",function(){c&&c()}).each("interrupt",function(){c&&c()});v.each(function(){u.selectAll("g.trace").each(function(d){oke(t,d,this,i,s)})})}else f.each(function(d){oke(t,d,this,i,s)}),l.uniformtext.mode&&SCt(t,u.selectAll(".trace"),o);h&&f.exit().remove()}});var hke=ne((dhr,cke)=>{"use strict";var lke=Ai(),XR=Wt(),uke=aa(),ECt=Es(),kCt=FH(),fke=YR().styleOne,VH=E_(),t1=vy(),CCt=wE(),LCt=HR().formatSliceLabel,HH=!1;cke.exports=function(t,r,i,n,a){var o=a.width,s=a.height,l=a.viewX,u=a.viewY,f=a.pathSlice,c=a.toMoveInsideSlice,h=a.strTransform,v=a.hasTransition,d=a.handleSlicesExit,_=a.makeUpdateSliceInterpolator,T=a.makeUpdateTextInterpolator,p=a.prevEntry,M={},b=t._context.staticPlot,w=t._fullLayout,k=r[0],x=k.trace,E=x.textposition.indexOf("left")!==-1,S=x.textposition.indexOf("right")!==-1,g=x.textposition.indexOf("bottom")!==-1,C=!g&&!x.marker.pad.t||g&&!x.marker.pad.b,A=kCt(i,[o,s],{packing:x.tiling.packing,squarifyratio:x.tiling.squarifyratio,flipX:x.tiling.flip.indexOf("x")>-1,flipY:x.tiling.flip.indexOf("y")>-1,pad:{inner:x.tiling.pad,top:x.marker.pad.t,left:x.marker.pad.l,right:x.marker.pad.r,bottom:x.marker.pad.b}}),P=A.descendants(),D=1/0,z=-1/0;P.forEach(function(N){var Z=N.depth;Z>=x._maxDepth?(N.x0=N.x1=(N.x0+N.x1)/2,N.y0=N.y1=(N.y0+N.y1)/2):(D=Math.min(D,Z),z=Math.max(z,Z))}),n=n.data(P,t1.getPtId),x._maxVisibleLayers=isFinite(z)?z-D+1:0,n.enter().append("g").classed("slice",!0),d(n,HH,M,[o,s],f),n.order();var O=null;if(v&&p){var V=t1.getPtId(p);n.each(function(N){O===null&&t1.getPtId(N)===V&&(O={x0:N.x0,x1:N.x1,y0:N.y0,y1:N.y1})})}var B=function(){return O||{x0:0,x1:o,y0:0,y1:s}},F=n;return v&&(F=F.transition().each("end",function(){var N=lke.select(this);t1.setSliceCursor(N,t,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),F.each(function(N){var Z=t1.isHeader(N,x);N._x0=l(N.x0),N._x1=l(N.x1),N._y0=u(N.y0),N._y1=u(N.y1),N._hoverX=l(N.x1-x.marker.pad.r),N._hoverY=u(g?N.y1-x.marker.pad.b/2:N.y0+x.marker.pad.t/2);var J=lke.select(this),re=XR.ensureSingle(J,"path","surface",function(oe){oe.style("pointer-events",b?"none":"all")});v?re.transition().attrTween("d",function(oe){var me=_(oe,HH,B(),[o,s]);return function(xe){return f(me(xe))}}):re.attr("d",f),J.call(CCt,i,t,r,{styleOne:fke,eventDataKeys:VH.eventDataKeys,transitionTime:VH.CLICK_TRANSITION_TIME,transitionEasing:VH.CLICK_TRANSITION_EASING}).call(t1.setSliceCursor,t,{isTransitioning:t._transitioning}),re.call(fke,N,x,t,{hovered:!1}),N.x0===N.x1||N.y0===N.y1?N._text="":Z?N._text=C?"":t1.getPtLabel(N)||"":N._text=LCt(N,i,x,r,w)||"";var ue=XR.ensureSingle(J,"g","slicetext"),fe=XR.ensureSingle(ue,"text","",function(oe){oe.attr("data-notex",1)}),K=XR.ensureUniformFontSize(t,t1.determineTextFont(x,N,w.font)),X=N._text||" ",ae=Z&&X.indexOf("<br>")===-1;fe.text(X).classed("slicetext",!0).attr("text-anchor",S?"end":E||ae?"start":"middle").call(uke.font,K).call(ECt.convertToTspans,t),N.textBB=uke.bBox(fe.node()),N.transform=c(N,{fontSize:K.size,isHeader:Z}),N.transform.fontSize=K.size,v?fe.transition().attrTween("transform",function(oe){var me=T(oe,HH,B(),[o,s]);return function(xe){return h(me(xe))}}):fe.attr("transform",h(N))}),O}});var dke=ne((phr,vke)=>{"use strict";var PCt=UH(),RCt=hke();vke.exports=function(t,r,i,n){return PCt(t,r,i,n,{type:"treemap",drawDescendants:RCt})}});var gke=ne((ghr,pke)=>{"use strict";pke.exports={moduleType:"trace",name:"treemap",basePlotModule:D5e(),categories:[],animatable:!0,attributes:GR(),layoutAttributes:PH(),supplyDefaults:U5e(),supplyLayoutDefaults:H5e(),calc:DH().calc,crossTraceCalc:DH().crossTraceCalc,plot:dke(),style:YR().style,colorbar:ph(),meta:{}}});var mke=ne((yhr,yke)=>{"use strict";yke.exports=gke()});var _ke=ne(T3=>{"use strict";var xke=Zs();T3.name="icicle";T3.plot=function(e,t,r,i){xke.plotBasePlot(T3.name,e,t,r,i)};T3.clean=function(e,t,r,i){xke.cleanBasePlot(T3.name,e,t,r,i)}});var GH=ne((xhr,wke)=>{"use strict";var DCt=Ba().hovertemplateAttrs,ICt=Ba().texttemplateAttrs,FCt=Ps(),qCt=fl().attributes,ME=g_(),Od=lE(),ZR=GR(),bke=E_(),zCt=oa().extendFlat,OCt=hc().pattern;wke.exports={labels:Od.labels,parents:Od.parents,values:Od.values,branchvalues:Od.branchvalues,count:Od.count,level:Od.level,maxdepth:Od.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:ZR.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:zCt({colors:Od.marker.colors,line:Od.marker.line,pattern:OCt,editType:"calc"},FCt("marker",{colorAttr:"colors",anim:!1})),leaf:Od.leaf,pathbar:ZR.pathbar,text:ME.text,textinfo:Od.textinfo,texttemplate:ICt({editType:"plot"},{keys:bke.eventDataKeys.concat(["label","value"])}),hovertext:ME.hovertext,hoverinfo:Od.hoverinfo,hovertemplate:DCt({},{keys:bke.eventDataKeys}),textfont:ME.textfont,insidetextfont:ME.insidetextfont,outsidetextfont:ZR.outsidetextfont,textposition:ZR.textposition,sort:ME.sort,root:Od.root,domain:qCt({name:"icicle",trace:!0,editType:"calc"})}});var YH=ne((_hr,Tke)=>{"use strict";Tke.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}});var Eke=ne((bhr,Ske)=>{"use strict";var Ake=Wt(),BCt=GH(),NCt=_i(),UCt=fl().defaults,VCt=Fd().handleText,HCt=Ux().TEXTPAD,GCt=y_().handleMarkerDefaults,Mke=ul(),YCt=Mke.hasColorscale,WCt=Mke.handleDefaults;Ske.exports=function(t,r,i,n){function a(v,d){return Ake.coerce(t,r,BCt,v,d)}var o=a("labels"),s=a("parents");if(!o||!o.length||!s||!s.length){r.visible=!1;return}var l=a("values");l&&l.length?a("branchvalues"):a("count"),a("level"),a("maxdepth"),a("tiling.orientation"),a("tiling.flip"),a("tiling.pad");var u=a("text");a("texttemplate"),r.texttemplate||a("textinfo",Ake.isArrayOrTypedArray(u)?"text+label":"label"),a("hovertext"),a("hovertemplate");var f=a("pathbar.visible"),c="auto";VCt(t,r,n,a,c,{hasPathbar:f,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),a("textposition"),GCt(t,r,n,a);var h=r._hasColorscale=YCt(t,"marker","colors")||(t.marker||{}).coloraxis;h&&WCt(t,r,n,a,{prefix:"marker.",cLetter:"c"}),a("leaf.opacity",h?1:.7),r._hovered={marker:{line:{width:2,color:NCt.contrast(n.paper_bgcolor)}}},f&&(a("pathbar.thickness",r.pathbar.textfont.size+2*HCt),a("pathbar.side"),a("pathbar.edgeshape")),a("sort"),a("root.color"),UCt(r,n,a),r._length=null}});var Cke=ne((whr,kke)=>{"use strict";var XCt=Wt(),ZCt=YH();kke.exports=function(t,r){function i(n,a){return XCt.coerce(t,r,ZCt,n,a)}i("iciclecolorway",r.colorway),i("extendiciclecolors")}});var XH=ne(WH=>{"use strict";var Lke=cE();WH.calc=function(e,t){return Lke.calc(e,t)};WH.crossTraceCalc=function(e){return Lke._runCrossTraceCalc("icicle",e)}});var Rke=ne((Ahr,Pke)=>{"use strict";var jCt=uE(),KCt=IH();Pke.exports=function(t,r,i){var n=i.flipX,a=i.flipY,o=i.orientation==="h",s=i.maxDepth,l=r[0],u=r[1];s&&(l=(t.height+1)*r[0]/Math.min(t.height+1,s),u=(t.height+1)*r[1]/Math.min(t.height+1,s));var f=jCt.partition().padding(i.pad.inner).size(o?[r[1],l]:[r[0],u])(t);return(o||n||a)&&KCt(f,r,{swapXY:o,flipX:n,flipY:a}),f}});var ZH=ne((Mhr,zke)=>{"use strict";var Dke=Ai(),Ike=_i(),Fke=Wt(),JCt=yh().resizeText,QCt=UR();function $Ct(e){var t=e._fullLayout._iciclelayer.selectAll(".trace");JCt(e,t,"icicle"),t.each(function(r){var i=Dke.select(this),n=r[0],a=n.trace;i.style("opacity",a.opacity),i.selectAll("path.surface").each(function(o){Dke.select(this).call(qke,o,a,e)})})}function qke(e,t,r,i){var n=t.data.data,a=!t.children,o=n.i,s=Fke.castOption(r,o,"marker.line.color")||Ike.defaultLine,l=Fke.castOption(r,o,"marker.line.width")||0;e.call(QCt,t,r,i).style("stroke-width",l).call(Ike.stroke,s).style("opacity",a?r.leaf.opacity:null)}zke.exports={style:$Ct,styleOne:qke}});var Vke=ne((Shr,Uke)=>{"use strict";var Oke=Ai(),jR=Wt(),Bke=aa(),e4t=Es(),t4t=Rke(),Nke=ZH().styleOne,jH=E_(),A3=vy(),r4t=wE(),n4t=HR().formatSliceLabel,KH=!1;Uke.exports=function(t,r,i,n,a){var o=a.width,s=a.height,l=a.viewX,u=a.viewY,f=a.pathSlice,c=a.toMoveInsideSlice,h=a.strTransform,v=a.hasTransition,d=a.handleSlicesExit,_=a.makeUpdateSliceInterpolator,T=a.makeUpdateTextInterpolator,p=a.prevEntry,M={},b=t._context.staticPlot,w=t._fullLayout,k=r[0],x=k.trace,E=x.textposition.indexOf("left")!==-1,S=x.textposition.indexOf("right")!==-1,g=x.textposition.indexOf("bottom")!==-1,C=t4t(i,[o,s],{flipX:x.tiling.flip.indexOf("x")>-1,flipY:x.tiling.flip.indexOf("y")>-1,orientation:x.tiling.orientation,pad:{inner:x.tiling.pad},maxDepth:x._maxDepth}),A=C.descendants(),P=1/0,D=-1/0;A.forEach(function(F){var N=F.depth;N>=x._maxDepth?(F.x0=F.x1=(F.x0+F.x1)/2,F.y0=F.y1=(F.y0+F.y1)/2):(P=Math.min(P,N),D=Math.max(D,N))}),n=n.data(A,A3.getPtId),x._maxVisibleLayers=isFinite(D)?D-P+1:0,n.enter().append("g").classed("slice",!0),d(n,KH,M,[o,s],f),n.order();var z=null;if(v&&p){var O=A3.getPtId(p);n.each(function(F){z===null&&A3.getPtId(F)===O&&(z={x0:F.x0,x1:F.x1,y0:F.y0,y1:F.y1})})}var V=function(){return z||{x0:0,x1:o,y0:0,y1:s}},B=n;return v&&(B=B.transition().each("end",function(){var F=Oke.select(this);A3.setSliceCursor(F,t,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),B.each(function(F){F._x0=l(F.x0),F._x1=l(F.x1),F._y0=u(F.y0),F._y1=u(F.y1),F._hoverX=l(F.x1-x.tiling.pad),F._hoverY=u(g?F.y1-x.tiling.pad/2:F.y0+x.tiling.pad/2);var N=Oke.select(this),Z=jR.ensureSingle(N,"path","surface",function(fe){fe.style("pointer-events",b?"none":"all")});v?Z.transition().attrTween("d",function(fe){var K=_(fe,KH,V(),[o,s],{orientation:x.tiling.orientation,flipX:x.tiling.flip.indexOf("x")>-1,flipY:x.tiling.flip.indexOf("y")>-1});return function(X){return f(K(X))}}):Z.attr("d",f),N.call(r4t,i,t,r,{styleOne:Nke,eventDataKeys:jH.eventDataKeys,transitionTime:jH.CLICK_TRANSITION_TIME,transitionEasing:jH.CLICK_TRANSITION_EASING}).call(A3.setSliceCursor,t,{isTransitioning:t._transitioning}),Z.call(Nke,F,x,t,{hovered:!1}),F.x0===F.x1||F.y0===F.y1?F._text="":F._text=n4t(F,i,x,r,w)||"";var J=jR.ensureSingle(N,"g","slicetext"),re=jR.ensureSingle(J,"text","",function(fe){fe.attr("data-notex",1)}),ue=jR.ensureUniformFontSize(t,A3.determineTextFont(x,F,w.font));re.text(F._text||" ").classed("slicetext",!0).attr("text-anchor",S?"end":E?"start":"middle").call(Bke.font,ue).call(e4t.convertToTspans,t),F.textBB=Bke.bBox(re.node()),F.transform=c(F,{fontSize:ue.size}),F.transform.fontSize=ue.size,v?re.transition().attrTween("transform",function(fe){var K=T(fe,KH,V(),[o,s]);return function(X){return h(K(X))}}):re.attr("transform",h(F))}),z}});var Gke=ne((Ehr,Hke)=>{"use strict";var i4t=UH(),a4t=Vke();Hke.exports=function(t,r,i,n){return i4t(t,r,i,n,{type:"icicle",drawDescendants:a4t})}});var Wke=ne((khr,Yke)=>{"use strict";Yke.exports={moduleType:"trace",name:"icicle",basePlotModule:_ke(),categories:[],animatable:!0,attributes:GH(),layoutAttributes:YH(),supplyDefaults:Eke(),supplyLayoutDefaults:Cke(),calc:XH().calc,crossTraceCalc:XH().crossTraceCalc,plot:Gke(),style:ZH().style,colorbar:ph(),meta:{}}});var Zke=ne((Chr,Xke)=>{"use strict";Xke.exports=Wke()});var Kke=ne(M3=>{"use strict";var jke=Zs();M3.name="funnelarea";M3.plot=function(e,t,r,i){jke.plotBasePlot(M3.name,e,t,r,i)};M3.clean=function(e,t,r,i){jke.cleanBasePlot(M3.name,e,t,r,i)}});var JH=ne((Phr,Jke)=>{"use strict";var Uc=g_(),o4t=es(),s4t=fl().attributes,l4t=Ba().hovertemplateAttrs,u4t=Ba().texttemplateAttrs,L_=oa().extendFlat;Jke.exports={labels:Uc.labels,label0:Uc.label0,dlabel:Uc.dlabel,values:Uc.values,marker:{colors:Uc.marker.colors,line:{color:L_({},Uc.marker.line.color,{dflt:null}),width:L_({},Uc.marker.line.width,{dflt:1}),editType:"calc"},pattern:Uc.marker.pattern,editType:"calc"},text:Uc.text,hovertext:Uc.hovertext,scalegroup:L_({},Uc.scalegroup,{}),textinfo:L_({},Uc.textinfo,{flags:["label","text","value","percent"]}),texttemplate:u4t({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:L_({},o4t.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:l4t({},{keys:["label","color","value","text","percent"]}),textposition:L_({},Uc.textposition,{values:["inside","none"],dflt:"inside"}),textfont:Uc.textfont,insidetextfont:Uc.insidetextfont,title:{text:Uc.title.text,font:Uc.title.font,position:L_({},Uc.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:s4t({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}});var QH=ne((Rhr,Qke)=>{"use strict";var f4t=gR().hiddenlabels;Qke.exports={hiddenlabels:f4t,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}});var tCe=ne((Dhr,eCe)=>{"use strict";var $ke=Wt(),c4t=JH(),h4t=fl().defaults,v4t=Fd().handleText,d4t=y_().handleLabelsAndValues,p4t=y_().handleMarkerDefaults;eCe.exports=function(t,r,i,n){function a(_,T){return $ke.coerce(t,r,c4t,_,T)}var o=a("labels"),s=a("values"),l=d4t(o,s),u=l.len;if(r._hasLabels=l.hasLabels,r._hasValues=l.hasValues,!r._hasLabels&&r._hasValues&&(a("label0"),a("dlabel")),!u){r.visible=!1;return}r._length=u,p4t(t,r,n,a),a("scalegroup");var f=a("text"),c=a("texttemplate"),h;if(c||(h=a("textinfo",Array.isArray(f)?"text+percent":"percent")),a("hovertext"),a("hovertemplate"),c||h&&h!=="none"){var v=a("textposition");v4t(t,r,n,a,v,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}else h==="none"&&a("textposition","none");h4t(r,n,a);var d=a("title.text");d&&(a("title.position"),$ke.coerceFont(a,"title.font",n.font)),a("aspectratio"),a("baseratio")}});var nCe=ne((Ihr,rCe)=>{"use strict";var g4t=Wt(),y4t=QH();rCe.exports=function(t,r){function i(n,a){return g4t.coerce(t,r,y4t,n,a)}i("hiddenlabels"),i("funnelareacolorway",r.colorway),i("extendfunnelareacolors")}});var $H=ne((Fhr,aCe)=>{"use strict";var iCe=s3();function m4t(e,t){return iCe.calc(e,t)}function x4t(e){iCe.crossTraceCalc(e,{type:"funnelarea"})}aCe.exports={calc:m4t,crossTraceCalc:x4t}});var fCe=ne((qhr,uCe)=>{"use strict";var P_=Ai(),eG=aa(),r1=Wt(),_4t=r1.strScale,oCe=r1.strTranslate,sCe=Es(),b4t=Yx(),w4t=b4t.toMoveInsideBar,lCe=yh(),T4t=lCe.recordMinTextSize,A4t=lCe.clearMinTextSize,M4t=hm(),S3=_R(),S4t=S3.attachFxHandlers,E4t=S3.determineInsideTextFont,k4t=S3.layoutAreas,C4t=S3.prerenderTitles,L4t=S3.positionTitleOutside,P4t=S3.formatSliceLabel;uCe.exports=function(t,r){var i=t._context.staticPlot,n=t._fullLayout;A4t("funnelarea",n),C4t(r,t),k4t(r,n._size),r1.makeTraceGroups(n._funnelarealayer,r,"trace").each(function(a){var o=P_.select(this),s=a[0],l=s.trace;D4t(a),o.each(function(){var u=P_.select(this).selectAll("g.slice").data(a);u.enter().append("g").classed("slice",!0),u.exit().remove(),u.each(function(c,h){if(c.hidden){P_.select(this).selectAll("path,g").remove();return}c.pointNumber=c.i,c.curveNumber=l.index;var v=s.cx,d=s.cy,_=P_.select(this),T=_.selectAll("path.surface").data([c]);T.enter().append("path").classed("surface",!0).style({"pointer-events":i?"none":"all"}),_.call(S4t,t,a);var p="M"+(v+c.TR[0])+","+(d+c.TR[1])+tG(c.TR,c.BR)+tG(c.BR,c.BL)+tG(c.BL,c.TL)+"Z";T.attr("d",p),P4t(t,c,s);var M=M4t.castOption(l.textposition,c.pts),b=_.selectAll("g.slicetext").data(c.text&&M!=="none"?[0]:[]);b.enter().append("g").classed("slicetext",!0),b.exit().remove(),b.each(function(){var w=r1.ensureSingle(P_.select(this),"text","",function(P){P.attr("data-notex",1)}),k=r1.ensureUniformFontSize(t,E4t(l,c,n.font));w.text(c.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(eG.font,k).call(sCe.convertToTspans,t);var x=eG.bBox(w.node()),E,S,g,C=Math.min(c.BL[1],c.BR[1])+d,A=Math.max(c.TL[1],c.TR[1])+d;S=Math.max(c.TL[0],c.BL[0])+v,g=Math.min(c.TR[0],c.BR[0])+v,E=w4t(S,g,C,A,x,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"}),E.fontSize=k.size,T4t(l.type,E,n),a[h].transform=E,r1.setTransormAndDisplay(w,E)})});var f=P_.select(this).selectAll("g.titletext").data(l.title.text?[0]:[]);f.enter().append("g").classed("titletext",!0),f.exit().remove(),f.each(function(){var c=r1.ensureSingle(P_.select(this),"text","",function(d){d.attr("data-notex",1)}),h=l.title.text;l._meta&&(h=r1.templateString(h,l._meta)),c.text(h).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(eG.font,l.title.font).call(sCe.convertToTspans,t);var v=L4t(s,n._size);c.attr("transform",oCe(v.x,v.y)+_4t(Math.min(1,v.scale))+oCe(v.tx,v.ty))})})})};function tG(e,t){var r=t[0]-e[0],i=t[1]-e[1];return"l"+r+","+i}function R4t(e,t){return[.5*(e[0]+t[0]),.5*(e[1]+t[1])]}function D4t(e){if(!e.length)return;var t=e[0],r=t.trace,i=r.aspectratio,n=r.baseratio;n>.999&&(n=.999);var a=Math.pow(n,2),o=t.vTotal,s=o*a/(1-a),l=o,u=s/o;function f(){var D=Math.sqrt(u);return{x:D,y:-D}}function c(){var D=f();return[D.x,D.y]}var h,v=[];v.push(c());var d,_;for(d=e.length-1;d>-1;d--)if(_=e[d],!_.hidden){var T=_.v/l;u+=T,v.push(c())}var p=1/0,M=-1/0;for(d=0;d<v.length;d++)h=v[d],p=Math.min(p,h[1]),M=Math.max(M,h[1]);for(d=0;d<v.length;d++)v[d][1]-=(M+p)/2;var b=v[v.length-1][0],w=t.r,k=(M-p)/2,x=w/b,E=w/k*i;for(t.r=E*k,d=0;d<v.length;d++)v[d][0]*=x,v[d][1]*=E;h=v[0];var S=[-h[0],h[1]],g=[h[0],h[1]],C=0;for(d=e.length-1;d>-1;d--)if(_=e[d],!_.hidden){C+=1;var A=v[C][0],P=v[C][1];_.TL=[-A,P],_.TR=[A,P],_.BL=S,_.BR=g,_.pxmid=R4t(_.TR,_.BR),S=_.TL,g=_.TR}}});var vCe=ne((zhr,hCe)=>{"use strict";var cCe=Ai(),I4t=T2(),F4t=yh().resizeText;hCe.exports=function(t){var r=t._fullLayout._funnelarealayer.selectAll(".trace");F4t(t,r,"funnelarea"),r.each(function(i){var n=i[0],a=n.trace,o=cCe.select(this);o.style({opacity:a.opacity}),o.selectAll("path.surface").each(function(s){cCe.select(this).call(I4t,s,a,t)})})}});var pCe=ne((Ohr,dCe)=>{"use strict";dCe.exports={moduleType:"trace",name:"funnelarea",basePlotModule:Kke(),categories:["pie-like","funnelarea","showLegend"],attributes:JH(),layoutAttributes:QH(),supplyDefaults:tCe(),supplyLayoutDefaults:nCe(),calc:$H().calc,crossTraceCalc:$H().crossTraceCalc,plot:fCe(),style:vCe(),styleOne:T2(),meta:{}}});var yCe=ne((Bhr,gCe)=>{"use strict";gCe.exports=pCe()});var yu=ne((Nhr,mCe)=>{(function(){var e={1964:function(n,a,o){n.exports={alpha_shape:o(3502),convex_hull:o(7352),delaunay_triangulate:o(7642),gl_cone3d:o(6405),gl_error3d:o(9165),gl_heatmap2d:o(2510),gl_line3d:o(5714),gl_mesh3d:o(7201),gl_plot2d:o(1850),gl_plot3d:o(4100),gl_pointcloud2d:o(4696),gl_scatter3d:o(8418),gl_select_box:o(3161),gl_spikes2d:o(4098),gl_streamtube3d:o(7815),gl_surface3d:o(9499),ndarray:o(9618),ndarray_linear_interpolate:o(4317)}},4793:function(n,a,o){"use strict";var s;function l(Ee,de){if(!(Ee instanceof de))throw new TypeError("Cannot call a class as a function")}function u(Ee,de){for(var Te=0;Te<de.length;Te++){var nt=de[Te];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(Ee,c(nt.key),nt)}}function f(Ee,de,Te){return de&&u(Ee.prototype,de),Te&&u(Ee,Te),Object.defineProperty(Ee,"prototype",{writable:!1}),Ee}function c(Ee){var de=h(Ee,"string");return w(de)=="symbol"?de:de+""}function h(Ee,de){if(w(Ee)!="object"||!Ee)return Ee;var Te=Ee[Symbol.toPrimitive];if(Te!==void 0){var nt=Te.call(Ee,de||"default");if(w(nt)!="object")return nt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(de==="string"?String:Number)(Ee)}function v(Ee,de,Te){return de=p(de),d(Ee,T()?Reflect.construct(de,Te||[],p(Ee).constructor):de.apply(Ee,Te))}function d(Ee,de){if(de&&(w(de)==="object"||typeof de=="function"))return de;if(de!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _(Ee)}function _(Ee){if(Ee===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ee}function T(){try{var Ee=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(de){}return(T=function(){return!!Ee})()}function p(Ee){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Te){return Te.__proto__||Object.getPrototypeOf(Te)},p(Ee)}function M(Ee,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function");Ee.prototype=Object.create(de&&de.prototype,{constructor:{value:Ee,writable:!0,configurable:!0}}),Object.defineProperty(Ee,"prototype",{writable:!1}),de&&b(Ee,de)}function b(Ee,de){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(nt,Mt){return nt.__proto__=Mt,nt},b(Ee,de)}function w(Ee){"@babel/helpers - typeof";return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(de){return typeof de}:function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},w(Ee)}var k=o(7507),x=o(3778),E=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;a.hp=A,s=re,a.IS=50;var S=2147483647;s=S,A.TYPED_ARRAY_SUPPORT=g(),!A.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function g(){try{var Ee=new Uint8Array(1),de={foo:function(){return 42}};return Object.setPrototypeOf(de,Uint8Array.prototype),Object.setPrototypeOf(Ee,de),Ee.foo()===42}catch(Te){return!1}}Object.defineProperty(A.prototype,"parent",{enumerable:!0,get:function(){if(A.isBuffer(this))return this.buffer}}),Object.defineProperty(A.prototype,"offset",{enumerable:!0,get:function(){if(A.isBuffer(this))return this.byteOffset}});function C(Ee){if(Ee>S)throw new RangeError('The value "'+Ee+'" is invalid for option "size"');var de=new Uint8Array(Ee);return Object.setPrototypeOf(de,A.prototype),de}function A(Ee,de,Te){if(typeof Ee=="number"){if(typeof de=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return O(Ee)}return P(Ee,de,Te)}A.poolSize=8192;function P(Ee,de,Te){if(typeof Ee=="string")return V(Ee,de);if(ArrayBuffer.isView(Ee))return F(Ee);if(Ee==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+w(Ee));if(yt(Ee,ArrayBuffer)||Ee&&yt(Ee.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(yt(Ee,SharedArrayBuffer)||Ee&&yt(Ee.buffer,SharedArrayBuffer)))return N(Ee,de,Te);if(typeof Ee=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var nt=Ee.valueOf&&Ee.valueOf();if(nt!=null&&nt!==Ee)return A.from(nt,de,Te);var Mt=Z(Ee);if(Mt)return Mt;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof Ee[Symbol.toPrimitive]=="function")return A.from(Ee[Symbol.toPrimitive]("string"),de,Te);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+w(Ee))}A.from=function(Ee,de,Te){return P(Ee,de,Te)},Object.setPrototypeOf(A.prototype,Uint8Array.prototype),Object.setPrototypeOf(A,Uint8Array);function D(Ee){if(typeof Ee!="number")throw new TypeError('"size" argument must be of type number');if(Ee<0)throw new RangeError('The value "'+Ee+'" is invalid for option "size"')}function z(Ee,de,Te){return D(Ee),Ee<=0?C(Ee):de!==void 0?typeof Te=="string"?C(Ee).fill(de,Te):C(Ee).fill(de):C(Ee)}A.alloc=function(Ee,de,Te){return z(Ee,de,Te)};function O(Ee){return D(Ee),C(Ee<0?0:J(Ee)|0)}A.allocUnsafe=function(Ee){return O(Ee)},A.allocUnsafeSlow=function(Ee){return O(Ee)};function V(Ee,de){if((typeof de!="string"||de==="")&&(de="utf8"),!A.isEncoding(de))throw new TypeError("Unknown encoding: "+de);var Te=ue(Ee,de)|0,nt=C(Te),Mt=nt.write(Ee,de);return Mt!==Te&&(nt=nt.slice(0,Mt)),nt}function B(Ee){for(var de=Ee.length<0?0:J(Ee.length)|0,Te=C(de),nt=0;nt<de;nt+=1)Te[nt]=Ee[nt]&255;return Te}function F(Ee){if(yt(Ee,Uint8Array)){var de=new Uint8Array(Ee);return N(de.buffer,de.byteOffset,de.byteLength)}return B(Ee)}function N(Ee,de,Te){if(de<0||Ee.byteLength<de)throw new RangeError('"offset" is outside of buffer bounds');if(Ee.byteLength<de+(Te||0))throw new RangeError('"length" is outside of buffer bounds');var nt;return de===void 0&&Te===void 0?nt=new Uint8Array(Ee):Te===void 0?nt=new Uint8Array(Ee,de):nt=new Uint8Array(Ee,de,Te),Object.setPrototypeOf(nt,A.prototype),nt}function Z(Ee){if(A.isBuffer(Ee)){var de=J(Ee.length)|0,Te=C(de);return Te.length===0||Ee.copy(Te,0,0,de),Te}if(Ee.length!==void 0)return typeof Ee.length!="number"||Et(Ee.length)?C(0):B(Ee);if(Ee.type==="Buffer"&&Array.isArray(Ee.data))return B(Ee.data)}function J(Ee){if(Ee>=S)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+S.toString(16)+" bytes");return Ee|0}function re(Ee){return+Ee!=Ee&&(Ee=0),A.alloc(+Ee)}A.isBuffer=function(de){return de!=null&&de._isBuffer===!0&&de!==A.prototype},A.compare=function(de,Te){if(yt(de,Uint8Array)&&(de=A.from(de,de.offset,de.byteLength)),yt(Te,Uint8Array)&&(Te=A.from(Te,Te.offset,Te.byteLength)),!A.isBuffer(de)||!A.isBuffer(Te))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(de===Te)return 0;for(var nt=de.length,Mt=Te.length,Kt=0,Jt=Math.min(nt,Mt);Kt<Jt;++Kt)if(de[Kt]!==Te[Kt]){nt=de[Kt],Mt=Te[Kt];break}return nt<Mt?-1:Mt<nt?1:0},A.isEncoding=function(de){switch(String(de).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},A.concat=function(de,Te){if(!Array.isArray(de))throw new TypeError('"list" argument must be an Array of Buffers');if(de.length===0)return A.alloc(0);var nt;if(Te===void 0)for(Te=0,nt=0;nt<de.length;++nt)Te+=de[nt].length;var Mt=A.allocUnsafe(Te),Kt=0;for(nt=0;nt<de.length;++nt){var Jt=de[nt];if(yt(Jt,Uint8Array))Kt+Jt.length>Mt.length?(A.isBuffer(Jt)||(Jt=A.from(Jt)),Jt.copy(Mt,Kt)):Uint8Array.prototype.set.call(Mt,Jt,Kt);else if(A.isBuffer(Jt))Jt.copy(Mt,Kt);else throw new TypeError('"list" argument must be an Array of Buffers');Kt+=Jt.length}return Mt};function ue(Ee,de){if(A.isBuffer(Ee))return Ee.length;if(ArrayBuffer.isView(Ee)||yt(Ee,ArrayBuffer))return Ee.byteLength;if(typeof Ee!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+w(Ee));var Te=Ee.length,nt=arguments.length>2&&arguments[2]===!0;if(!nt&&Te===0)return 0;for(var Mt=!1;;)switch(de){case"ascii":case"latin1":case"binary":return Te;case"utf8":case"utf-8":return $t(Ee).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Te*2;case"hex":return Te>>>1;case"base64":return vr(Ee).length;default:if(Mt)return nt?-1:$t(Ee).length;de=(""+de).toLowerCase(),Mt=!0}}A.byteLength=ue;function fe(Ee,de,Te){var nt=!1;if((de===void 0||de<0)&&(de=0),de>this.length||((Te===void 0||Te>this.length)&&(Te=this.length),Te<=0)||(Te>>>=0,de>>>=0,Te<=de))return"";for(Ee||(Ee="utf8");;)switch(Ee){case"hex":return Pe(this,de,Te);case"utf8":case"utf-8":return le(this,de,Te);case"ascii":return qe(this,de,Te);case"latin1":case"binary":return et(this,de,Te);case"base64":return ge(this,de,Te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,de,Te);default:if(nt)throw new TypeError("Unknown encoding: "+Ee);Ee=(Ee+"").toLowerCase(),nt=!0}}A.prototype._isBuffer=!0;function K(Ee,de,Te){var nt=Ee[de];Ee[de]=Ee[Te],Ee[Te]=nt}A.prototype.swap16=function(){var de=this.length;if(de%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Te=0;Te<de;Te+=2)K(this,Te,Te+1);return this},A.prototype.swap32=function(){var de=this.length;if(de%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Te=0;Te<de;Te+=4)K(this,Te,Te+3),K(this,Te+1,Te+2);return this},A.prototype.swap64=function(){var de=this.length;if(de%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Te=0;Te<de;Te+=8)K(this,Te,Te+7),K(this,Te+1,Te+6),K(this,Te+2,Te+5),K(this,Te+3,Te+4);return this},A.prototype.toString=function(){var de=this.length;return de===0?"":arguments.length===0?le(this,0,de):fe.apply(this,arguments)},A.prototype.toLocaleString=A.prototype.toString,A.prototype.equals=function(de){if(!A.isBuffer(de))throw new TypeError("Argument must be a Buffer");return this===de?!0:A.compare(this,de)===0},A.prototype.inspect=function(){var de="",Te=a.IS;return de=this.toString("hex",0,Te).replace(/(.{2})/g,"$1 ").trim(),this.length>Te&&(de+=" ... "),"<Buffer "+de+">"},E&&(A.prototype[E]=A.prototype.inspect),A.prototype.compare=function(de,Te,nt,Mt,Kt){if(yt(de,Uint8Array)&&(de=A.from(de,de.offset,de.byteLength)),!A.isBuffer(de))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+w(de));if(Te===void 0&&(Te=0),nt===void 0&&(nt=de?de.length:0),Mt===void 0&&(Mt=0),Kt===void 0&&(Kt=this.length),Te<0||nt>de.length||Mt<0||Kt>this.length)throw new RangeError("out of range index");if(Mt>=Kt&&Te>=nt)return 0;if(Mt>=Kt)return-1;if(Te>=nt)return 1;if(Te>>>=0,nt>>>=0,Mt>>>=0,Kt>>>=0,this===de)return 0;for(var Jt=Kt-Mt,Fr=nt-Te,Vr=Math.min(Jt,Fr),mr=this.slice(Mt,Kt),zr=de.slice(Te,nt),an=0;an<Vr;++an)if(mr[an]!==zr[an]){Jt=mr[an],Fr=zr[an];break}return Jt<Fr?-1:Fr<Jt?1:0};function X(Ee,de,Te,nt,Mt){if(Ee.length===0)return-1;if(typeof Te=="string"?(nt=Te,Te=0):Te>2147483647?Te=2147483647:Te<-2147483648&&(Te=-2147483648),Te=+Te,Et(Te)&&(Te=Mt?0:Ee.length-1),Te<0&&(Te=Ee.length+Te),Te>=Ee.length){if(Mt)return-1;Te=Ee.length-1}else if(Te<0)if(Mt)Te=0;else return-1;if(typeof de=="string"&&(de=A.from(de,nt)),A.isBuffer(de))return de.length===0?-1:ae(Ee,de,Te,nt,Mt);if(typeof de=="number")return de=de&255,typeof Uint8Array.prototype.indexOf=="function"?Mt?Uint8Array.prototype.indexOf.call(Ee,de,Te):Uint8Array.prototype.lastIndexOf.call(Ee,de,Te):ae(Ee,[de],Te,nt,Mt);throw new TypeError("val must be string, number or Buffer")}function ae(Ee,de,Te,nt,Mt){var Kt=1,Jt=Ee.length,Fr=de.length;if(nt!==void 0&&(nt=String(nt).toLowerCase(),nt==="ucs2"||nt==="ucs-2"||nt==="utf16le"||nt==="utf-16le")){if(Ee.length<2||de.length<2)return-1;Kt=2,Jt/=2,Fr/=2,Te/=2}function Vr(mn,fi){return Kt===1?mn[fi]:mn.readUInt16BE(fi*Kt)}var mr;if(Mt){var zr=-1;for(mr=Te;mr<Jt;mr++)if(Vr(Ee,mr)===Vr(de,zr===-1?0:mr-zr)){if(zr===-1&&(zr=mr),mr-zr+1===Fr)return zr*Kt}else zr!==-1&&(mr-=mr-zr),zr=-1}else for(Te+Fr>Jt&&(Te=Jt-Fr),mr=Te;mr>=0;mr--){for(var an=!0,ni=0;ni<Fr;ni++)if(Vr(Ee,mr+ni)!==Vr(de,ni)){an=!1;break}if(an)return mr}return-1}A.prototype.includes=function(de,Te,nt){return this.indexOf(de,Te,nt)!==-1},A.prototype.indexOf=function(de,Te,nt){return X(this,de,Te,nt,!0)},A.prototype.lastIndexOf=function(de,Te,nt){return X(this,de,Te,nt,!1)};function oe(Ee,de,Te,nt){Te=Number(Te)||0;var Mt=Ee.length-Te;nt?(nt=Number(nt),nt>Mt&&(nt=Mt)):nt=Mt;var Kt=de.length;nt>Kt/2&&(nt=Kt/2);var Jt;for(Jt=0;Jt<nt;++Jt){var Fr=parseInt(de.substr(Jt*2,2),16);if(Et(Fr))return Jt;Ee[Te+Jt]=Fr}return Jt}function me(Ee,de,Te,nt){return Ot($t(de,Ee.length-Te),Ee,Te,nt)}function xe(Ee,de,Te,nt){return Ot(cr(de),Ee,Te,nt)}function ce(Ee,de,Te,nt){return Ot(vr(de),Ee,Te,nt)}function ie(Ee,de,Te,nt){return Ot(or(de,Ee.length-Te),Ee,Te,nt)}A.prototype.write=function(de,Te,nt,Mt){if(Te===void 0)Mt="utf8",nt=this.length,Te=0;else if(nt===void 0&&typeof Te=="string")Mt=Te,nt=this.length,Te=0;else if(isFinite(Te))Te=Te>>>0,isFinite(nt)?(nt=nt>>>0,Mt===void 0&&(Mt="utf8")):(Mt=nt,nt=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Kt=this.length-Te;if((nt===void 0||nt>Kt)&&(nt=Kt),de.length>0&&(nt<0||Te<0)||Te>this.length)throw new RangeError("Attempt to write outside buffer bounds");Mt||(Mt="utf8");for(var Jt=!1;;)switch(Mt){case"hex":return oe(this,de,Te,nt);case"utf8":case"utf-8":return me(this,de,Te,nt);case"ascii":case"latin1":case"binary":return xe(this,de,Te,nt);case"base64":return ce(this,de,Te,nt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie(this,de,Te,nt);default:if(Jt)throw new TypeError("Unknown encoding: "+Mt);Mt=(""+Mt).toLowerCase(),Jt=!0}},A.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ge(Ee,de,Te){return de===0&&Te===Ee.length?k.fromByteArray(Ee):k.fromByteArray(Ee.slice(de,Te))}function le(Ee,de,Te){Te=Math.min(Ee.length,Te);for(var nt=[],Mt=de;Mt<Te;){var Kt=Ee[Mt],Jt=null,Fr=Kt>239?4:Kt>223?3:Kt>191?2:1;if(Mt+Fr<=Te){var Vr=void 0,mr=void 0,zr=void 0,an=void 0;switch(Fr){case 1:Kt<128&&(Jt=Kt);break;case 2:Vr=Ee[Mt+1],(Vr&192)===128&&(an=(Kt&31)<<6|Vr&63,an>127&&(Jt=an));break;case 3:Vr=Ee[Mt+1],mr=Ee[Mt+2],(Vr&192)===128&&(mr&192)===128&&(an=(Kt&15)<<12|(Vr&63)<<6|mr&63,an>2047&&(an<55296||an>57343)&&(Jt=an));break;case 4:Vr=Ee[Mt+1],mr=Ee[Mt+2],zr=Ee[Mt+3],(Vr&192)===128&&(mr&192)===128&&(zr&192)===128&&(an=(Kt&15)<<18|(Vr&63)<<12|(mr&63)<<6|zr&63,an>65535&&an<1114112&&(Jt=an))}}Jt===null?(Jt=65533,Fr=1):Jt>65535&&(Jt-=65536,nt.push(Jt>>>10&1023|55296),Jt=56320|Jt&1023),nt.push(Jt),Mt+=Fr}return Re(nt)}var we=4096;function Re(Ee){var de=Ee.length;if(de<=we)return String.fromCharCode.apply(String,Ee);for(var Te="",nt=0;nt<de;)Te+=String.fromCharCode.apply(String,Ee.slice(nt,nt+=we));return Te}function qe(Ee,de,Te){var nt="";Te=Math.min(Ee.length,Te);for(var Mt=de;Mt<Te;++Mt)nt+=String.fromCharCode(Ee[Mt]&127);return nt}function et(Ee,de,Te){var nt="";Te=Math.min(Ee.length,Te);for(var Mt=de;Mt<Te;++Mt)nt+=String.fromCharCode(Ee[Mt]);return nt}function Pe(Ee,de,Te){var nt=Ee.length;(!de||de<0)&&(de=0),(!Te||Te<0||Te>nt)&&(Te=nt);for(var Mt="",Kt=de;Kt<Te;++Kt)Mt+=Je[Ee[Kt]];return Mt}function Ie(Ee,de,Te){for(var nt=Ee.slice(de,Te),Mt="",Kt=0;Kt<nt.length-1;Kt+=2)Mt+=String.fromCharCode(nt[Kt]+nt[Kt+1]*256);return Mt}A.prototype.slice=function(de,Te){var nt=this.length;de=~~de,Te=Te===void 0?nt:~~Te,de<0?(de+=nt,de<0&&(de=0)):de>nt&&(de=nt),Te<0?(Te+=nt,Te<0&&(Te=0)):Te>nt&&(Te=nt),Te<de&&(Te=de);var Mt=this.subarray(de,Te);return Object.setPrototypeOf(Mt,A.prototype),Mt};function ut(Ee,de,Te){if(Ee%1!==0||Ee<0)throw new RangeError("offset is not uint");if(Ee+de>Te)throw new RangeError("Trying to access beyond buffer length")}A.prototype.readUintLE=A.prototype.readUIntLE=function(de,Te,nt){de=de>>>0,Te=Te>>>0,nt||ut(de,Te,this.length);for(var Mt=this[de],Kt=1,Jt=0;++Jt<Te&&(Kt*=256);)Mt+=this[de+Jt]*Kt;return Mt},A.prototype.readUintBE=A.prototype.readUIntBE=function(de,Te,nt){de=de>>>0,Te=Te>>>0,nt||ut(de,Te,this.length);for(var Mt=this[de+--Te],Kt=1;Te>0&&(Kt*=256);)Mt+=this[de+--Te]*Kt;return Mt},A.prototype.readUint8=A.prototype.readUInt8=function(de,Te){return de=de>>>0,Te||ut(de,1,this.length),this[de]},A.prototype.readUint16LE=A.prototype.readUInt16LE=function(de,Te){return de=de>>>0,Te||ut(de,2,this.length),this[de]|this[de+1]<<8},A.prototype.readUint16BE=A.prototype.readUInt16BE=function(de,Te){return de=de>>>0,Te||ut(de,2,this.length),this[de]<<8|this[de+1]},A.prototype.readUint32LE=A.prototype.readUInt32LE=function(de,Te){return de=de>>>0,Te||ut(de,4,this.length),(this[de]|this[de+1]<<8|this[de+2]<<16)+this[de+3]*16777216},A.prototype.readUint32BE=A.prototype.readUInt32BE=function(de,Te){return de=de>>>0,Te||ut(de,4,this.length),this[de]*16777216+(this[de+1]<<16|this[de+2]<<8|this[de+3])},A.prototype.readBigUInt64LE=Ke(function(de){de=de>>>0,We(de,"offset");var Te=this[de],nt=this[de+7];(Te===void 0||nt===void 0)&&ht(de,this.length-8);var Mt=Te+this[++de]*Math.pow(2,8)+this[++de]*Math.pow(2,16)+this[++de]*Math.pow(2,24),Kt=this[++de]+this[++de]*Math.pow(2,8)+this[++de]*Math.pow(2,16)+nt*Math.pow(2,24);return BigInt(Mt)+(BigInt(Kt)<<BigInt(32))}),A.prototype.readBigUInt64BE=Ke(function(de){de=de>>>0,We(de,"offset");var Te=this[de],nt=this[de+7];(Te===void 0||nt===void 0)&&ht(de,this.length-8);var Mt=Te*Math.pow(2,24)+this[++de]*Math.pow(2,16)+this[++de]*Math.pow(2,8)+this[++de],Kt=this[++de]*Math.pow(2,24)+this[++de]*Math.pow(2,16)+this[++de]*Math.pow(2,8)+nt;return(BigInt(Mt)<<BigInt(32))+BigInt(Kt)}),A.prototype.readIntLE=function(de,Te,nt){de=de>>>0,Te=Te>>>0,nt||ut(de,Te,this.length);for(var Mt=this[de],Kt=1,Jt=0;++Jt<Te&&(Kt*=256);)Mt+=this[de+Jt]*Kt;return Kt*=128,Mt>=Kt&&(Mt-=Math.pow(2,8*Te)),Mt},A.prototype.readIntBE=function(de,Te,nt){de=de>>>0,Te=Te>>>0,nt||ut(de,Te,this.length);for(var Mt=Te,Kt=1,Jt=this[de+--Mt];Mt>0&&(Kt*=256);)Jt+=this[de+--Mt]*Kt;return Kt*=128,Jt>=Kt&&(Jt-=Math.pow(2,8*Te)),Jt},A.prototype.readInt8=function(de,Te){return de=de>>>0,Te||ut(de,1,this.length),this[de]&128?(255-this[de]+1)*-1:this[de]},A.prototype.readInt16LE=function(de,Te){de=de>>>0,Te||ut(de,2,this.length);var nt=this[de]|this[de+1]<<8;return nt&32768?nt|4294901760:nt},A.prototype.readInt16BE=function(de,Te){de=de>>>0,Te||ut(de,2,this.length);var nt=this[de+1]|this[de]<<8;return nt&32768?nt|4294901760:nt},A.prototype.readInt32LE=function(de,Te){return de=de>>>0,Te||ut(de,4,this.length),this[de]|this[de+1]<<8|this[de+2]<<16|this[de+3]<<24},A.prototype.readInt32BE=function(de,Te){return de=de>>>0,Te||ut(de,4,this.length),this[de]<<24|this[de+1]<<16|this[de+2]<<8|this[de+3]},A.prototype.readBigInt64LE=Ke(function(de){de=de>>>0,We(de,"offset");var Te=this[de],nt=this[de+7];(Te===void 0||nt===void 0)&&ht(de,this.length-8);var Mt=this[de+4]+this[de+5]*Math.pow(2,8)+this[de+6]*Math.pow(2,16)+(nt<<24);return(BigInt(Mt)<<BigInt(32))+BigInt(Te+this[++de]*Math.pow(2,8)+this[++de]*Math.pow(2,16)+this[++de]*Math.pow(2,24))}),A.prototype.readBigInt64BE=Ke(function(de){de=de>>>0,We(de,"offset");var Te=this[de],nt=this[de+7];(Te===void 0||nt===void 0)&&ht(de,this.length-8);var Mt=(Te<<24)+this[++de]*Math.pow(2,16)+this[++de]*Math.pow(2,8)+this[++de];return(BigInt(Mt)<<BigInt(32))+BigInt(this[++de]*Math.pow(2,24)+this[++de]*Math.pow(2,16)+this[++de]*Math.pow(2,8)+nt)}),A.prototype.readFloatLE=function(de,Te){return de=de>>>0,Te||ut(de,4,this.length),x.read(this,de,!0,23,4)},A.prototype.readFloatBE=function(de,Te){return de=de>>>0,Te||ut(de,4,this.length),x.read(this,de,!1,23,4)},A.prototype.readDoubleLE=function(de,Te){return de=de>>>0,Te||ut(de,8,this.length),x.read(this,de,!0,52,8)},A.prototype.readDoubleBE=function(de,Te){return de=de>>>0,Te||ut(de,8,this.length),x.read(this,de,!1,52,8)};function ft(Ee,de,Te,nt,Mt,Kt){if(!A.isBuffer(Ee))throw new TypeError('"buffer" argument must be a Buffer instance');if(de>Mt||de<Kt)throw new RangeError('"value" argument is out of bounds');if(Te+nt>Ee.length)throw new RangeError("Index out of range")}A.prototype.writeUintLE=A.prototype.writeUIntLE=function(de,Te,nt,Mt){if(de=+de,Te=Te>>>0,nt=nt>>>0,!Mt){var Kt=Math.pow(2,8*nt)-1;ft(this,de,Te,nt,Kt,0)}var Jt=1,Fr=0;for(this[Te]=de&255;++Fr<nt&&(Jt*=256);)this[Te+Fr]=de/Jt&255;return Te+nt},A.prototype.writeUintBE=A.prototype.writeUIntBE=function(de,Te,nt,Mt){if(de=+de,Te=Te>>>0,nt=nt>>>0,!Mt){var Kt=Math.pow(2,8*nt)-1;ft(this,de,Te,nt,Kt,0)}var Jt=nt-1,Fr=1;for(this[Te+Jt]=de&255;--Jt>=0&&(Fr*=256);)this[Te+Jt]=de/Fr&255;return Te+nt},A.prototype.writeUint8=A.prototype.writeUInt8=function(de,Te,nt){return de=+de,Te=Te>>>0,nt||ft(this,de,Te,1,255,0),this[Te]=de&255,Te+1},A.prototype.writeUint16LE=A.prototype.writeUInt16LE=function(de,Te,nt){return de=+de,Te=Te>>>0,nt||ft(this,de,Te,2,65535,0),this[Te]=de&255,this[Te+1]=de>>>8,Te+2},A.prototype.writeUint16BE=A.prototype.writeUInt16BE=function(de,Te,nt){return de=+de,Te=Te>>>0,nt||ft(this,de,Te,2,65535,0),this[Te]=de>>>8,this[Te+1]=de&255,Te+2},A.prototype.writeUint32LE=A.prototype.writeUInt32LE=function(de,Te,nt){return de=+de,Te=Te>>>0,nt||ft(this,de,Te,4,4294967295,0),this[Te+3]=de>>>24,this[Te+2]=de>>>16,this[Te+1]=de>>>8,this[Te]=de&255,Te+4},A.prototype.writeUint32BE=A.prototype.writeUInt32BE=function(de,Te,nt){return de=+de,Te=Te>>>0,nt||ft(this,de,Te,4,4294967295,0),this[Te]=de>>>24,this[Te+1]=de>>>16,this[Te+2]=de>>>8,this[Te+3]=de&255,Te+4};function je(Ee,de,Te,nt,Mt){rt(de,nt,Mt,Ee,Te,7);var Kt=Number(de&BigInt(4294967295));Ee[Te++]=Kt,Kt=Kt>>8,Ee[Te++]=Kt,Kt=Kt>>8,Ee[Te++]=Kt,Kt=Kt>>8,Ee[Te++]=Kt;var Jt=Number(de>>BigInt(32)&BigInt(4294967295));return Ee[Te++]=Jt,Jt=Jt>>8,Ee[Te++]=Jt,Jt=Jt>>8,Ee[Te++]=Jt,Jt=Jt>>8,Ee[Te++]=Jt,Te}function _t(Ee,de,Te,nt,Mt){rt(de,nt,Mt,Ee,Te,7);var Kt=Number(de&BigInt(4294967295));Ee[Te+7]=Kt,Kt=Kt>>8,Ee[Te+6]=Kt,Kt=Kt>>8,Ee[Te+5]=Kt,Kt=Kt>>8,Ee[Te+4]=Kt;var Jt=Number(de>>BigInt(32)&BigInt(4294967295));return Ee[Te+3]=Jt,Jt=Jt>>8,Ee[Te+2]=Jt,Jt=Jt>>8,Ee[Te+1]=Jt,Jt=Jt>>8,Ee[Te]=Jt,Te+8}A.prototype.writeBigUInt64LE=Ke(function(de){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return je(this,de,Te,BigInt(0),BigInt("0xffffffffffffffff"))}),A.prototype.writeBigUInt64BE=Ke(function(de){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return _t(this,de,Te,BigInt(0),BigInt("0xffffffffffffffff"))}),A.prototype.writeIntLE=function(de,Te,nt,Mt){if(de=+de,Te=Te>>>0,!Mt){var Kt=Math.pow(2,8*nt-1);ft(this,de,Te,nt,Kt-1,-Kt)}var Jt=0,Fr=1,Vr=0;for(this[Te]=de&255;++Jt<nt&&(Fr*=256);)de<0&&Vr===0&&this[Te+Jt-1]!==0&&(Vr=1),this[Te+Jt]=(de/Fr>>0)-Vr&255;return Te+nt},A.prototype.writeIntBE=function(de,Te,nt,Mt){if(de=+de,Te=Te>>>0,!Mt){var Kt=Math.pow(2,8*nt-1);ft(this,de,Te,nt,Kt-1,-Kt)}var Jt=nt-1,Fr=1,Vr=0;for(this[Te+Jt]=de&255;--Jt>=0&&(Fr*=256);)de<0&&Vr===0&&this[Te+Jt+1]!==0&&(Vr=1),this[Te+Jt]=(de/Fr>>0)-Vr&255;return Te+nt},A.prototype.writeInt8=function(de,Te,nt){return de=+de,Te=Te>>>0,nt||ft(this,de,Te,1,127,-128),de<0&&(de=255+de+1),this[Te]=de&255,Te+1},A.prototype.writeInt16LE=function(de,Te,nt){return de=+de,Te=Te>>>0,nt||ft(this,de,Te,2,32767,-32768),this[Te]=de&255,this[Te+1]=de>>>8,Te+2},A.prototype.writeInt16BE=function(de,Te,nt){return de=+de,Te=Te>>>0,nt||ft(this,de,Te,2,32767,-32768),this[Te]=de>>>8,this[Te+1]=de&255,Te+2},A.prototype.writeInt32LE=function(de,Te,nt){return de=+de,Te=Te>>>0,nt||ft(this,de,Te,4,2147483647,-2147483648),this[Te]=de&255,this[Te+1]=de>>>8,this[Te+2]=de>>>16,this[Te+3]=de>>>24,Te+4},A.prototype.writeInt32BE=function(de,Te,nt){return de=+de,Te=Te>>>0,nt||ft(this,de,Te,4,2147483647,-2147483648),de<0&&(de=4294967295+de+1),this[Te]=de>>>24,this[Te+1]=de>>>16,this[Te+2]=de>>>8,this[Te+3]=de&255,Te+4},A.prototype.writeBigInt64LE=Ke(function(de){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return je(this,de,Te,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),A.prototype.writeBigInt64BE=Ke(function(de){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return _t(this,de,Te,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Bt(Ee,de,Te,nt,Mt,Kt){if(Te+nt>Ee.length)throw new RangeError("Index out of range");if(Te<0)throw new RangeError("Index out of range")}function Lt(Ee,de,Te,nt,Mt){return de=+de,Te=Te>>>0,Mt||Bt(Ee,de,Te,4,34028234663852886e22,-34028234663852886e22),x.write(Ee,de,Te,nt,23,4),Te+4}A.prototype.writeFloatLE=function(de,Te,nt){return Lt(this,de,Te,!0,nt)},A.prototype.writeFloatBE=function(de,Te,nt){return Lt(this,de,Te,!1,nt)};function Me(Ee,de,Te,nt,Mt){return de=+de,Te=Te>>>0,Mt||Bt(Ee,de,Te,8,17976931348623157e292,-17976931348623157e292),x.write(Ee,de,Te,nt,52,8),Te+8}A.prototype.writeDoubleLE=function(de,Te,nt){return Me(this,de,Te,!0,nt)},A.prototype.writeDoubleBE=function(de,Te,nt){return Me(this,de,Te,!1,nt)},A.prototype.copy=function(de,Te,nt,Mt){if(!A.isBuffer(de))throw new TypeError("argument should be a Buffer");if(nt||(nt=0),!Mt&&Mt!==0&&(Mt=this.length),Te>=de.length&&(Te=de.length),Te||(Te=0),Mt>0&&Mt<nt&&(Mt=nt),Mt===nt||de.length===0||this.length===0)return 0;if(Te<0)throw new RangeError("targetStart out of bounds");if(nt<0||nt>=this.length)throw new RangeError("Index out of range");if(Mt<0)throw new RangeError("sourceEnd out of bounds");Mt>this.length&&(Mt=this.length),de.length-Te<Mt-nt&&(Mt=de.length-Te+nt);var Kt=Mt-nt;return this===de&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(Te,nt,Mt):Uint8Array.prototype.set.call(de,this.subarray(nt,Mt),Te),Kt},A.prototype.fill=function(de,Te,nt,Mt){if(typeof de=="string"){if(typeof Te=="string"?(Mt=Te,Te=0,nt=this.length):typeof nt=="string"&&(Mt=nt,nt=this.length),Mt!==void 0&&typeof Mt!="string")throw new TypeError("encoding must be a string");if(typeof Mt=="string"&&!A.isEncoding(Mt))throw new TypeError("Unknown encoding: "+Mt);if(de.length===1){var Kt=de.charCodeAt(0);(Mt==="utf8"&&Kt<128||Mt==="latin1")&&(de=Kt)}}else typeof de=="number"?de=de&255:typeof de=="boolean"&&(de=Number(de));if(Te<0||this.length<Te||this.length<nt)throw new RangeError("Out of range index");if(nt<=Te)return this;Te=Te>>>0,nt=nt===void 0?this.length:nt>>>0,de||(de=0);var Jt;if(typeof de=="number")for(Jt=Te;Jt<nt;++Jt)this[Jt]=de;else{var Fr=A.isBuffer(de)?de:A.from(de,Mt),Vr=Fr.length;if(Vr===0)throw new TypeError('The value "'+de+'" is invalid for argument "value"');for(Jt=0;Jt<nt-Te;++Jt)this[Jt+Te]=Fr[Jt%Vr]}return this};var Ze={};function dt(Ee,de,Te){Ze[Ee]=function(nt){function Mt(){var Kt;return l(this,Mt),Kt=v(this,Mt),Object.defineProperty(Kt,"message",{value:de.apply(Kt,arguments),writable:!0,configurable:!0}),Kt.name="".concat(Kt.name," [").concat(Ee,"]"),Kt.stack,delete Kt.name,Kt}return M(Mt,nt),f(Mt,[{key:"code",get:function(){return Ee},set:function(Jt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Jt,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(Ee,"]: ").concat(this.message)}}])}(Te)}dt("ERR_BUFFER_OUT_OF_BOUNDS",function(Ee){return Ee?"".concat(Ee," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),dt("ERR_INVALID_ARG_TYPE",function(Ee,de){return'The "'.concat(Ee,'" argument must be of type number. Received type ').concat(w(de))},TypeError),dt("ERR_OUT_OF_RANGE",function(Ee,de,Te){var nt='The value of "'.concat(Ee,'" is out of range.'),Mt=Te;return Number.isInteger(Te)&&Math.abs(Te)>Math.pow(2,32)?Mt=it(String(Te)):typeof Te=="bigint"&&(Mt=String(Te),(Te>Math.pow(BigInt(2),BigInt(32))||Te<-Math.pow(BigInt(2),BigInt(32)))&&(Mt=it(Mt)),Mt+="n"),nt+=" It must be ".concat(de,". Received ").concat(Mt),nt},RangeError);function it(Ee){for(var de="",Te=Ee.length,nt=Ee[0]==="-"?1:0;Te>=nt+4;Te-=3)de="_".concat(Ee.slice(Te-3,Te)).concat(de);return"".concat(Ee.slice(0,Te)).concat(de)}function vt(Ee,de,Te){We(de,"offset"),(Ee[de]===void 0||Ee[de+Te]===void 0)&&ht(de,Ee.length-(Te+1))}function rt(Ee,de,Te,nt,Mt,Kt){if(Ee>Te||Ee<de){var Jt=typeof de=="bigint"?"n":"",Fr;throw Kt>3?de===0||de===BigInt(0)?Fr=">= 0".concat(Jt," and < 2").concat(Jt," ** ").concat((Kt+1)*8).concat(Jt):Fr=">= -(2".concat(Jt," ** ").concat((Kt+1)*8-1).concat(Jt,") and < 2 ** ")+"".concat((Kt+1)*8-1).concat(Jt):Fr=">= ".concat(de).concat(Jt," and <= ").concat(Te).concat(Jt),new Ze.ERR_OUT_OF_RANGE("value",Fr,Ee)}vt(nt,Mt,Kt)}function We(Ee,de){if(typeof Ee!="number")throw new Ze.ERR_INVALID_ARG_TYPE(de,"number",Ee)}function ht(Ee,de,Te){throw Math.floor(Ee)!==Ee?(We(Ee,Te),new Ze.ERR_OUT_OF_RANGE(Te||"offset","an integer",Ee)):de<0?new Ze.ERR_BUFFER_OUT_OF_BOUNDS:new Ze.ERR_OUT_OF_RANGE(Te||"offset",">= ".concat(Te?1:0," and <= ").concat(de),Ee)}var mt=/[^+/0-9A-Za-z-_]/g;function er(Ee){if(Ee=Ee.split("=")[0],Ee=Ee.trim().replace(mt,""),Ee.length<2)return"";for(;Ee.length%4!==0;)Ee=Ee+"=";return Ee}function $t(Ee,de){de=de||1/0;for(var Te,nt=Ee.length,Mt=null,Kt=[],Jt=0;Jt<nt;++Jt){if(Te=Ee.charCodeAt(Jt),Te>55295&&Te<57344){if(!Mt){if(Te>56319){(de-=3)>-1&&Kt.push(239,191,189);continue}else if(Jt+1===nt){(de-=3)>-1&&Kt.push(239,191,189);continue}Mt=Te;continue}if(Te<56320){(de-=3)>-1&&Kt.push(239,191,189),Mt=Te;continue}Te=(Mt-55296<<10|Te-56320)+65536}else Mt&&(de-=3)>-1&&Kt.push(239,191,189);if(Mt=null,Te<128){if((de-=1)<0)break;Kt.push(Te)}else if(Te<2048){if((de-=2)<0)break;Kt.push(Te>>6|192,Te&63|128)}else if(Te<65536){if((de-=3)<0)break;Kt.push(Te>>12|224,Te>>6&63|128,Te&63|128)}else if(Te<1114112){if((de-=4)<0)break;Kt.push(Te>>18|240,Te>>12&63|128,Te>>6&63|128,Te&63|128)}else throw new Error("Invalid code point")}return Kt}function cr(Ee){for(var de=[],Te=0;Te<Ee.length;++Te)de.push(Ee.charCodeAt(Te)&255);return de}function or(Ee,de){for(var Te,nt,Mt,Kt=[],Jt=0;Jt<Ee.length&&!((de-=2)<0);++Jt)Te=Ee.charCodeAt(Jt),nt=Te>>8,Mt=Te%256,Kt.push(Mt),Kt.push(nt);return Kt}function vr(Ee){return k.toByteArray(er(Ee))}function Ot(Ee,de,Te,nt){var Mt;for(Mt=0;Mt<nt&&!(Mt+Te>=de.length||Mt>=Ee.length);++Mt)de[Mt+Te]=Ee[Mt];return Mt}function yt(Ee,de){return Ee instanceof de||Ee!=null&&Ee.constructor!=null&&Ee.constructor.name!=null&&Ee.constructor.name===de.name}function Et(Ee){return Ee!==Ee}var Je=function(){for(var Ee="0123456789abcdef",de=new Array(256),Te=0;Te<16;++Te)for(var nt=Te*16,Mt=0;Mt<16;++Mt)de[nt+Mt]=Ee[Te]+Ee[Mt];return de}();function Ke(Ee){return typeof BigInt=="undefined"?At:Ee}function At(){throw new Error("BigInt not supported")}},9216:function(n){"use strict";n.exports=l,n.exports.isMobile=l,n.exports.default=l;var a=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,o=/CrOS/,s=/android|ipad|playbook|silk/i;function l(u){u||(u={});var f=u.ua;if(!f&&typeof navigator!="undefined"&&(f=navigator.userAgent),f&&f.headers&&typeof f.headers["user-agent"]=="string"&&(f=f.headers["user-agent"]),typeof f!="string")return!1;var c=a.test(f)&&!o.test(f)||!!u.tablet&&s.test(f);return!c&&u.tablet&&u.featureDetect&&navigator&&navigator.maxTouchPoints>1&&f.indexOf("Macintosh")!==-1&&f.indexOf("Safari")!==-1&&(c=!0),c}},6296:function(n,a,o){"use strict";n.exports=h;var s=o(7261),l=o(9977),u=o(4192);function f(v,d){this._controllerNames=Object.keys(v),this._controllerList=this._controllerNames.map(function(_){return v[_]}),this._mode=d,this._active=v[d],this._active||(this._mode="turntable",this._active=v.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var c=f.prototype;c.flush=function(v){for(var d=this._controllerList,_=0;_<d.length;++_)d[_].flush(v)},c.idle=function(v){for(var d=this._controllerList,_=0;_<d.length;++_)d[_].idle(v)},c.lookAt=function(v,d,_,T){for(var p=this._controllerList,M=0;M<p.length;++M)p[M].lookAt(v,d,_,T)},c.rotate=function(v,d,_,T){for(var p=this._controllerList,M=0;M<p.length;++M)p[M].rotate(v,d,_,T)},c.pan=function(v,d,_,T){for(var p=this._controllerList,M=0;M<p.length;++M)p[M].pan(v,d,_,T)},c.translate=function(v,d,_,T){for(var p=this._controllerList,M=0;M<p.length;++M)p[M].translate(v,d,_,T)},c.setMatrix=function(v,d){for(var _=this._controllerList,T=0;T<_.length;++T)_[T].setMatrix(v,d)},c.setDistanceLimits=function(v,d){for(var _=this._controllerList,T=0;T<_.length;++T)_[T].setDistanceLimits(v,d)},c.setDistance=function(v,d){for(var _=this._controllerList,T=0;T<_.length;++T)_[T].setDistance(v,d)},c.recalcMatrix=function(v){this._active.recalcMatrix(v)},c.getDistance=function(v){return this._active.getDistance(v)},c.getDistanceLimits=function(v){return this._active.getDistanceLimits(v)},c.lastT=function(){return this._active.lastT()},c.setMode=function(v){if(v!==this._mode){var d=this._controllerNames.indexOf(v);if(!(d<0)){var _=this._active,T=this._controllerList[d],p=Math.max(_.lastT(),T.lastT());_.recalcMatrix(p),T.setMatrix(p,_.computedMatrix),this._active=T,this._mode=v,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},c.getMode=function(){return this._mode};function h(v){v=v||{};var d=v.eye||[0,0,1],_=v.center||[0,0,0],T=v.up||[0,1,0],p=v.distanceLimits||[0,1/0],M=v.mode||"turntable",b=s(),w=l(),k=u();return b.setDistanceLimits(p[0],p[1]),b.lookAt(0,d,_,T),w.setDistanceLimits(p[0],p[1]),w.lookAt(0,d,_,T),k.setDistanceLimits(p[0],p[1]),k.lookAt(0,d,_,T),new f({turntable:b,orbit:w,matrix:k},M)}},7169:function(n,a,o){"use strict";var s=typeof WeakMap=="undefined"?o(1538):WeakMap,l=o(2762),u=o(8116),f=new s;function c(h){var v=f.get(h),d=v&&(v._triangleBuffer.handle||v._triangleBuffer.buffer);if(!d||!h.isBuffer(d)){var _=l(h,new Float32Array([-1,-1,-1,4,4,-1]));v=u(h,[{buffer:_,type:h.FLOAT,size:2}]),v._triangleBuffer=_,f.set(h,v)}v.bind(),h.drawArrays(h.TRIANGLES,0,3),v.unbind()}n.exports=c},1085:function(n,a,o){var s=o(1371);n.exports=l;function l(u,f,c){f=typeof f=="number"?f:1,c=c||": ";var h=u.split(/\r?\n/),v=String(h.length+f-1).length;return h.map(function(d,_){var T=_+f,p=String(T).length,M=s(T,v-p);return M+c+d}).join(`
`)}},3952:function(n,a,o){"use strict";n.exports=u;var s=o(3250);function l(f,c){for(var h=new Array(c+1),v=0;v<f.length;++v)h[v]=f[v];for(var v=0;v<=f.length;++v){for(var d=f.length;d<=c;++d){for(var _=new Array(c),T=0;T<c;++T)_[T]=Math.pow(d+1-v,T);h[d]=_}var p=s.apply(void 0,h);if(p)return!0}return!1}function u(f){var c=f.length;if(c===0)return[];if(c===1)return[0];for(var h=f[0].length,v=[f[0]],d=[0],_=1;_<c;++_){if(v.push(f[_]),!l(v,h)){v.pop();continue}if(d.push(_),d.length===h+1)return d}return d}},5995:function(n,a,o){"use strict";n.exports=u;var s=o(7642),l=o(6037);function u(f,c){return s(c).filter(function(h){for(var v=new Array(h.length),d=0;d<h.length;++d)v[d]=c[h[d]];return l(v)*f<1})}},3502:function(n,a,o){n.exports=u;var s=o(5995),l=o(9127);function u(f,c){return l(s(f,c))}},6468:function(n){n.exports=function(o){return atob(o)}},2642:function(n,a,o){"use strict";n.exports=u;var s=o(727);function l(f){for(var c=0,h=0;h<f.length;++h)c+=f[h];return c}function u(f,c){for(var h=c.length,v=new Array(h+1),d=0;d<h;++d){for(var _=new Array(h+1),T=0;T<=h;++T)_[T]=f[T][d];v[d]=_}v[h]=new Array(h+1);for(var d=0;d<=h;++d)v[h][d]=1;for(var p=new Array(h+1),d=0;d<h;++d)p[d]=c[d];p[h]=1;var M=s(v,p),b=l(M[h+1]);b===0&&(b=1);for(var w=new Array(h+1),d=0;d<=h;++d)w[d]=l(M[d])/b;return w}},7507:function(n,a){"use strict";a.byteLength=v,a.toByteArray=_,a.fromByteArray=M;for(var o=[],s=[],l=typeof Uint8Array!="undefined"?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,c=u.length;f<c;++f)o[f]=u[f],s[u.charCodeAt(f)]=f;s[45]=62,s[95]=63;function h(b){var w=b.length;if(w%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=b.indexOf("=");k===-1&&(k=w);var x=k===w?0:4-k%4;return[k,x]}function v(b){var w=h(b),k=w[0],x=w[1];return(k+x)*3/4-x}function d(b,w,k){return(w+k)*3/4-k}function _(b){var w,k=h(b),x=k[0],E=k[1],S=new l(d(b,x,E)),g=0,C=E>0?x-4:x,A;for(A=0;A<C;A+=4)w=s[b.charCodeAt(A)]<<18|s[b.charCodeAt(A+1)]<<12|s[b.charCodeAt(A+2)]<<6|s[b.charCodeAt(A+3)],S[g++]=w>>16&255,S[g++]=w>>8&255,S[g++]=w&255;return E===2&&(w=s[b.charCodeAt(A)]<<2|s[b.charCodeAt(A+1)]>>4,S[g++]=w&255),E===1&&(w=s[b.charCodeAt(A)]<<10|s[b.charCodeAt(A+1)]<<4|s[b.charCodeAt(A+2)]>>2,S[g++]=w>>8&255,S[g++]=w&255),S}function T(b){return o[b>>18&63]+o[b>>12&63]+o[b>>6&63]+o[b&63]}function p(b,w,k){for(var x,E=[],S=w;S<k;S+=3)x=(b[S]<<16&16711680)+(b[S+1]<<8&65280)+(b[S+2]&255),E.push(T(x));return E.join("")}function M(b){for(var w,k=b.length,x=k%3,E=[],S=16383,g=0,C=k-x;g<C;g+=S)E.push(p(b,g,g+S>C?C:g+S));return x===1?(w=b[k-1],E.push(o[w>>2]+o[w<<4&63]+"==")):x===2&&(w=(b[k-2]<<8)+b[k-1],E.push(o[w>>10]+o[w>>4&63]+o[w<<2&63]+"=")),E.join("")}},3865:function(n,a,o){"use strict";var s=o(869);n.exports=l;function l(u,f){return s(u[0].mul(f[1]).add(f[0].mul(u[1])),u[1].mul(f[1]))}},1318:function(n){"use strict";n.exports=a;function a(o,s){return o[0].mul(s[1]).cmp(s[0].mul(o[1]))}},8697:function(n,a,o){"use strict";var s=o(869);n.exports=l;function l(u,f){return s(u[0].mul(f[1]),u[1].mul(f[0]))}},7842:function(n,a,o){"use strict";var s=o(6330),l=o(1533),u=o(2651),f=o(4387),c=o(869),h=o(8697);n.exports=v;function v(d,_){if(s(d))return _?h(d,v(_)):[d[0].clone(),d[1].clone()];var T=0,p,M;if(l(d))p=d.clone();else if(typeof d=="string")p=f(d);else{if(d===0)return[u(0),u(1)];if(d===Math.floor(d))p=u(d);else{for(;d!==Math.floor(d);)d=d*Math.pow(2,256),T-=256;p=u(d)}}if(s(_))p.mul(_[1]),M=_[0].clone();else if(l(_))M=_.clone();else if(typeof _=="string")M=f(_);else if(!_)M=u(1);else if(_===Math.floor(_))M=u(_);else{for(;_!==Math.floor(_);)_=_*Math.pow(2,256),T+=256;M=u(_)}return T>0?p=p.ushln(T):T<0&&(M=M.ushln(-T)),c(p,M)}},6330:function(n,a,o){"use strict";var s=o(1533);n.exports=l;function l(u){return Array.isArray(u)&&u.length===2&&s(u[0])&&s(u[1])}},5716:function(n,a,o){"use strict";var s=o(6859);n.exports=l;function l(u){return u.cmp(new s(0))}},1369:function(n,a,o){"use strict";var s=o(5716);n.exports=l;function l(u){var f=u.length,c=u.words,h=0;if(f===1)h=c[0];else if(f===2)h=c[0]+c[1]*67108864;else for(var v=0;v<f;v++){var d=c[v];h+=d*Math.pow(67108864,v)}return s(u)*h}},4025:function(n,a,o){"use strict";var s=o(2361),l=o(8828).countTrailingZeros;n.exports=u;function u(f){var c=l(s.lo(f));if(c<32)return c;var h=l(s.hi(f));return h>20?52:h+32}},1533:function(n,a,o){"use strict";var s=o(6859);n.exports=l;function l(u){return u&&typeof u=="object"&&!!u.words}},2651:function(n,a,o){"use strict";var s=o(6859),l=o(2361);n.exports=u;function u(f){var c=l.exponent(f);return c<52?new s(f):new s(f*Math.pow(2,52-c)).ushln(c-52)}},869:function(n,a,o){"use strict";var s=o(2651),l=o(5716);n.exports=u;function u(f,c){var h=l(f),v=l(c);if(h===0)return[s(0),s(1)];if(v===0)return[s(0),s(0)];v<0&&(f=f.neg(),c=c.neg());var d=f.gcd(c);return d.cmpn(1)?[f.div(d),c.div(d)]:[f,c]}},4387:function(n,a,o){"use strict";var s=o(6859);n.exports=l;function l(u){return new s(u)}},6504:function(n,a,o){"use strict";var s=o(869);n.exports=l;function l(u,f){return s(u[0].mul(f[0]),u[1].mul(f[1]))}},7721:function(n,a,o){"use strict";var s=o(5716);n.exports=l;function l(u){return s(u[0])*s(u[1])}},5572:function(n,a,o){"use strict";var s=o(869);n.exports=l;function l(u,f){return s(u[0].mul(f[1]).sub(u[1].mul(f[0])),u[1].mul(f[1]))}},946:function(n,a,o){"use strict";var s=o(1369),l=o(4025);n.exports=u;function u(f){var c=f[0],h=f[1];if(c.cmpn(0)===0)return 0;var v=c.abs().divmod(h.abs()),d=v.div,_=s(d),T=v.mod,p=c.negative!==h.negative?-1:1;if(T.cmpn(0)===0)return p*_;if(_){var M=l(_)+4,b=s(T.ushln(M).divRound(h));return p*(_+b*Math.pow(2,-M))}else{var w=h.bitLength()-T.bitLength()+53,b=s(T.ushln(w).divRound(h));return w<1023?p*b*Math.pow(2,-w):(b*=Math.pow(2,-1023),p*b*Math.pow(2,1023-w))}}},2478:function(n){"use strict";function a(c,h,v,d,_){for(var T=_+1;d<=_;){var p=d+_>>>1,M=c[p],b=v!==void 0?v(M,h):M-h;b>=0?(T=p,_=p-1):d=p+1}return T}function o(c,h,v,d,_){for(var T=_+1;d<=_;){var p=d+_>>>1,M=c[p],b=v!==void 0?v(M,h):M-h;b>0?(T=p,_=p-1):d=p+1}return T}function s(c,h,v,d,_){for(var T=d-1;d<=_;){var p=d+_>>>1,M=c[p],b=v!==void 0?v(M,h):M-h;b<0?(T=p,d=p+1):_=p-1}return T}function l(c,h,v,d,_){for(var T=d-1;d<=_;){var p=d+_>>>1,M=c[p],b=v!==void 0?v(M,h):M-h;b<=0?(T=p,d=p+1):_=p-1}return T}function u(c,h,v,d,_){for(;d<=_;){var T=d+_>>>1,p=c[T],M=v!==void 0?v(p,h):p-h;if(M===0)return T;M<=0?d=T+1:_=T-1}return-1}function f(c,h,v,d,_,T){return typeof v=="function"?T(c,h,v,d===void 0?0:d|0,_===void 0?c.length-1:_|0):T(c,h,void 0,v===void 0?0:v|0,d===void 0?c.length-1:d|0)}n.exports={ge:function(c,h,v,d,_){return f(c,h,v,d,_,a)},gt:function(c,h,v,d,_){return f(c,h,v,d,_,o)},lt:function(c,h,v,d,_){return f(c,h,v,d,_,s)},le:function(c,h,v,d,_){return f(c,h,v,d,_,l)},eq:function(c,h,v,d,_){return f(c,h,v,d,_,u)}}},8828:function(n,a){"use strict";"use restrict";var o=32;a.INT_BITS=o,a.INT_MAX=2147483647,a.INT_MIN=-1<<o-1,a.sign=function(u){return(u>0)-(u<0)},a.abs=function(u){var f=u>>o-1;return(u^f)-f},a.min=function(u,f){return f^(u^f)&-(u<f)},a.max=function(u,f){return u^(u^f)&-(u<f)},a.isPow2=function(u){return!(u&u-1)&&!!u},a.log2=function(u){var f,c;return f=(u>65535)<<4,u>>>=f,c=(u>255)<<3,u>>>=c,f|=c,c=(u>15)<<2,u>>>=c,f|=c,c=(u>3)<<1,u>>>=c,f|=c,f|u>>1},a.log10=function(u){return u>=1e9?9:u>=1e8?8:u>=1e7?7:u>=1e6?6:u>=1e5?5:u>=1e4?4:u>=1e3?3:u>=100?2:u>=10?1:0},a.popCount=function(u){return u=u-(u>>>1&1431655765),u=(u&858993459)+(u>>>2&858993459),(u+(u>>>4)&252645135)*16843009>>>24};function s(u){var f=32;return u&=-u,u&&f--,u&65535&&(f-=16),u&16711935&&(f-=8),u&252645135&&(f-=4),u&858993459&&(f-=2),u&1431655765&&(f-=1),f}a.countTrailingZeros=s,a.nextPow2=function(u){return u+=u===0,--u,u|=u>>>1,u|=u>>>2,u|=u>>>4,u|=u>>>8,u|=u>>>16,u+1},a.prevPow2=function(u){return u|=u>>>1,u|=u>>>2,u|=u>>>4,u|=u>>>8,u|=u>>>16,u-(u>>>1)},a.parity=function(u){return u^=u>>>16,u^=u>>>8,u^=u>>>4,u&=15,27030>>>u&1};var l=new Array(256);(function(u){for(var f=0;f<256;++f){var c=f,h=f,v=7;for(c>>>=1;c;c>>>=1)h<<=1,h|=c&1,--v;u[f]=h<<v&255}})(l),a.reverse=function(u){return l[u&255]<<24|l[u>>>8&255]<<16|l[u>>>16&255]<<8|l[u>>>24&255]},a.interleave2=function(u,f){return u&=65535,u=(u|u<<8)&16711935,u=(u|u<<4)&252645135,u=(u|u<<2)&858993459,u=(u|u<<1)&1431655765,f&=65535,f=(f|f<<8)&16711935,f=(f|f<<4)&252645135,f=(f|f<<2)&858993459,f=(f|f<<1)&1431655765,u|f<<1},a.deinterleave2=function(u,f){return u=u>>>f&1431655765,u=(u|u>>>1)&858993459,u=(u|u>>>2)&252645135,u=(u|u>>>4)&16711935,u=(u|u>>>16)&65535,u<<16>>16},a.interleave3=function(u,f,c){return u&=1023,u=(u|u<<16)&4278190335,u=(u|u<<8)&251719695,u=(u|u<<4)&3272356035,u=(u|u<<2)&1227133513,f&=1023,f=(f|f<<16)&4278190335,f=(f|f<<8)&251719695,f=(f|f<<4)&3272356035,f=(f|f<<2)&1227133513,u|=f<<1,c&=1023,c=(c|c<<16)&4278190335,c=(c|c<<8)&251719695,c=(c|c<<4)&3272356035,c=(c|c<<2)&1227133513,u|c<<2},a.deinterleave3=function(u,f){return u=u>>>f&1227133513,u=(u|u>>>2)&3272356035,u=(u|u>>>4)&251719695,u=(u|u>>>8)&4278190335,u=(u|u>>>16)&1023,u<<22>>22},a.nextCombination=function(u){var f=u|u-1;return f+1|(~f&-~f)-1>>>s(u)+1}},6859:function(n,a,o){n=o.nmd(n),function(s,l){"use strict";function u(B,F){if(!B)throw new Error(F||"Assertion failed")}function f(B,F){B.super_=F;var N=function(){};N.prototype=F.prototype,B.prototype=new N,B.prototype.constructor=B}function c(B,F,N){if(c.isBN(B))return B;this.negative=0,this.words=null,this.length=0,this.red=null,B!==null&&((F==="le"||F==="be")&&(N=F,F=10),this._init(B||0,F||10,N||"be"))}typeof s=="object"?s.exports=c:l.BN=c,c.BN=c,c.wordSize=26;var h;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?h=window.Buffer:h=o(7790).Buffer}catch(B){}c.isBN=function(F){return F instanceof c?!0:F!==null&&typeof F=="object"&&F.constructor.wordSize===c.wordSize&&Array.isArray(F.words)},c.max=function(F,N){return F.cmp(N)>0?F:N},c.min=function(F,N){return F.cmp(N)<0?F:N},c.prototype._init=function(F,N,Z){if(typeof F=="number")return this._initNumber(F,N,Z);if(typeof F=="object")return this._initArray(F,N,Z);N==="hex"&&(N=16),u(N===(N|0)&&N>=2&&N<=36),F=F.toString().replace(/\s+/g,"");var J=0;F[0]==="-"&&(J++,this.negative=1),J<F.length&&(N===16?this._parseHex(F,J,Z):(this._parseBase(F,N,J),Z==="le"&&this._initArray(this.toArray(),N,Z)))},c.prototype._initNumber=function(F,N,Z){F<0&&(this.negative=1,F=-F),F<67108864?(this.words=[F&67108863],this.length=1):F<4503599627370496?(this.words=[F&67108863,F/67108864&67108863],this.length=2):(u(F<9007199254740992),this.words=[F&67108863,F/67108864&67108863,1],this.length=3),Z==="le"&&this._initArray(this.toArray(),N,Z)},c.prototype._initArray=function(F,N,Z){if(u(typeof F.length=="number"),F.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(F.length/3),this.words=new Array(this.length);for(var J=0;J<this.length;J++)this.words[J]=0;var re,ue,fe=0;if(Z==="be")for(J=F.length-1,re=0;J>=0;J-=3)ue=F[J]|F[J-1]<<8|F[J-2]<<16,this.words[re]|=ue<<fe&67108863,this.words[re+1]=ue>>>26-fe&67108863,fe+=24,fe>=26&&(fe-=26,re++);else if(Z==="le")for(J=0,re=0;J<F.length;J+=3)ue=F[J]|F[J+1]<<8|F[J+2]<<16,this.words[re]|=ue<<fe&67108863,this.words[re+1]=ue>>>26-fe&67108863,fe+=24,fe>=26&&(fe-=26,re++);return this.strip()};function v(B,F){var N=B.charCodeAt(F);return N>=65&&N<=70?N-55:N>=97&&N<=102?N-87:N-48&15}function d(B,F,N){var Z=v(B,N);return N-1>=F&&(Z|=v(B,N-1)<<4),Z}c.prototype._parseHex=function(F,N,Z){this.length=Math.ceil((F.length-N)/6),this.words=new Array(this.length);for(var J=0;J<this.length;J++)this.words[J]=0;var re=0,ue=0,fe;if(Z==="be")for(J=F.length-1;J>=N;J-=2)fe=d(F,N,J)<<re,this.words[ue]|=fe&67108863,re>=18?(re-=18,ue+=1,this.words[ue]|=fe>>>26):re+=8;else{var K=F.length-N;for(J=K%2===0?N+1:N;J<F.length;J+=2)fe=d(F,N,J)<<re,this.words[ue]|=fe&67108863,re>=18?(re-=18,ue+=1,this.words[ue]|=fe>>>26):re+=8}this.strip()};function _(B,F,N,Z){for(var J=0,re=Math.min(B.length,N),ue=F;ue<re;ue++){var fe=B.charCodeAt(ue)-48;J*=Z,fe>=49?J+=fe-49+10:fe>=17?J+=fe-17+10:J+=fe}return J}c.prototype._parseBase=function(F,N,Z){this.words=[0],this.length=1;for(var J=0,re=1;re<=67108863;re*=N)J++;J--,re=re/N|0;for(var ue=F.length-Z,fe=ue%J,K=Math.min(ue,ue-fe)+Z,X=0,ae=Z;ae<K;ae+=J)X=_(F,ae,ae+J,N),this.imuln(re),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X);if(fe!==0){var oe=1;for(X=_(F,ae,F.length,N),ae=0;ae<fe;ae++)oe*=N;this.imuln(oe),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X)}this.strip()},c.prototype.copy=function(F){F.words=new Array(this.length);for(var N=0;N<this.length;N++)F.words[N]=this.words[N];F.length=this.length,F.negative=this.negative,F.red=this.red},c.prototype.clone=function(){var F=new c(null);return this.copy(F),F},c.prototype._expand=function(F){for(;this.length<F;)this.words[this.length++]=0;return this},c.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},c.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},c.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var T=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],M=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];c.prototype.toString=function(F,N){F=F||10,N=N|0||1;var Z;if(F===16||F==="hex"){Z="";for(var J=0,re=0,ue=0;ue<this.length;ue++){var fe=this.words[ue],K=((fe<<J|re)&16777215).toString(16);re=fe>>>24-J&16777215,re!==0||ue!==this.length-1?Z=T[6-K.length]+K+Z:Z=K+Z,J+=2,J>=26&&(J-=26,ue--)}for(re!==0&&(Z=re.toString(16)+Z);Z.length%N!==0;)Z="0"+Z;return this.negative!==0&&(Z="-"+Z),Z}if(F===(F|0)&&F>=2&&F<=36){var X=p[F],ae=M[F];Z="";var oe=this.clone();for(oe.negative=0;!oe.isZero();){var me=oe.modn(ae).toString(F);oe=oe.idivn(ae),oe.isZero()?Z=me+Z:Z=T[X-me.length]+me+Z}for(this.isZero()&&(Z="0"+Z);Z.length%N!==0;)Z="0"+Z;return this.negative!==0&&(Z="-"+Z),Z}u(!1,"Base should be between 2 and 36")},c.prototype.toNumber=function(){var F=this.words[0];return this.length===2?F+=this.words[1]*67108864:this.length===3&&this.words[2]===1?F+=4503599627370496+this.words[1]*67108864:this.length>2&&u(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-F:F},c.prototype.toJSON=function(){return this.toString(16)},c.prototype.toBuffer=function(F,N){return u(typeof h!="undefined"),this.toArrayLike(h,F,N)},c.prototype.toArray=function(F,N){return this.toArrayLike(Array,F,N)},c.prototype.toArrayLike=function(F,N,Z){var J=this.byteLength(),re=Z||Math.max(1,J);u(J<=re,"byte array longer than desired length"),u(re>0,"Requested array length <= 0"),this.strip();var ue=N==="le",fe=new F(re),K,X,ae=this.clone();if(ue){for(X=0;!ae.isZero();X++)K=ae.andln(255),ae.iushrn(8),fe[X]=K;for(;X<re;X++)fe[X]=0}else{for(X=0;X<re-J;X++)fe[X]=0;for(X=0;!ae.isZero();X++)K=ae.andln(255),ae.iushrn(8),fe[re-X-1]=K}return fe},Math.clz32?c.prototype._countBits=function(F){return 32-Math.clz32(F)}:c.prototype._countBits=function(F){var N=F,Z=0;return N>=4096&&(Z+=13,N>>>=13),N>=64&&(Z+=7,N>>>=7),N>=8&&(Z+=4,N>>>=4),N>=2&&(Z+=2,N>>>=2),Z+N},c.prototype._zeroBits=function(F){if(F===0)return 26;var N=F,Z=0;return N&8191||(Z+=13,N>>>=13),N&127||(Z+=7,N>>>=7),N&15||(Z+=4,N>>>=4),N&3||(Z+=2,N>>>=2),N&1||Z++,Z},c.prototype.bitLength=function(){var F=this.words[this.length-1],N=this._countBits(F);return(this.length-1)*26+N};function b(B){for(var F=new Array(B.bitLength()),N=0;N<F.length;N++){var Z=N/26|0,J=N%26;F[N]=(B.words[Z]&1<<J)>>>J}return F}c.prototype.zeroBits=function(){if(this.isZero())return 0;for(var F=0,N=0;N<this.length;N++){var Z=this._zeroBits(this.words[N]);if(F+=Z,Z!==26)break}return F},c.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},c.prototype.toTwos=function(F){return this.negative!==0?this.abs().inotn(F).iaddn(1):this.clone()},c.prototype.fromTwos=function(F){return this.testn(F-1)?this.notn(F).iaddn(1).ineg():this.clone()},c.prototype.isNeg=function(){return this.negative!==0},c.prototype.neg=function(){return this.clone().ineg()},c.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},c.prototype.iuor=function(F){for(;this.length<F.length;)this.words[this.length++]=0;for(var N=0;N<F.length;N++)this.words[N]=this.words[N]|F.words[N];return this.strip()},c.prototype.ior=function(F){return u((this.negative|F.negative)===0),this.iuor(F)},c.prototype.or=function(F){return this.length>F.length?this.clone().ior(F):F.clone().ior(this)},c.prototype.uor=function(F){return this.length>F.length?this.clone().iuor(F):F.clone().iuor(this)},c.prototype.iuand=function(F){var N;this.length>F.length?N=F:N=this;for(var Z=0;Z<N.length;Z++)this.words[Z]=this.words[Z]&F.words[Z];return this.length=N.length,this.strip()},c.prototype.iand=function(F){return u((this.negative|F.negative)===0),this.iuand(F)},c.prototype.and=function(F){return this.length>F.length?this.clone().iand(F):F.clone().iand(this)},c.prototype.uand=function(F){return this.length>F.length?this.clone().iuand(F):F.clone().iuand(this)},c.prototype.iuxor=function(F){var N,Z;this.length>F.length?(N=this,Z=F):(N=F,Z=this);for(var J=0;J<Z.length;J++)this.words[J]=N.words[J]^Z.words[J];if(this!==N)for(;J<N.length;J++)this.words[J]=N.words[J];return this.length=N.length,this.strip()},c.prototype.ixor=function(F){return u((this.negative|F.negative)===0),this.iuxor(F)},c.prototype.xor=function(F){return this.length>F.length?this.clone().ixor(F):F.clone().ixor(this)},c.prototype.uxor=function(F){return this.length>F.length?this.clone().iuxor(F):F.clone().iuxor(this)},c.prototype.inotn=function(F){u(typeof F=="number"&&F>=0);var N=Math.ceil(F/26)|0,Z=F%26;this._expand(N),Z>0&&N--;for(var J=0;J<N;J++)this.words[J]=~this.words[J]&67108863;return Z>0&&(this.words[J]=~this.words[J]&67108863>>26-Z),this.strip()},c.prototype.notn=function(F){return this.clone().inotn(F)},c.prototype.setn=function(F,N){u(typeof F=="number"&&F>=0);var Z=F/26|0,J=F%26;return this._expand(Z+1),N?this.words[Z]=this.words[Z]|1<<J:this.words[Z]=this.words[Z]&~(1<<J),this.strip()},c.prototype.iadd=function(F){var N;if(this.negative!==0&&F.negative===0)return this.negative=0,N=this.isub(F),this.negative^=1,this._normSign();if(this.negative===0&&F.negative!==0)return F.negative=0,N=this.isub(F),F.negative=1,N._normSign();var Z,J;this.length>F.length?(Z=this,J=F):(Z=F,J=this);for(var re=0,ue=0;ue<J.length;ue++)N=(Z.words[ue]|0)+(J.words[ue]|0)+re,this.words[ue]=N&67108863,re=N>>>26;for(;re!==0&&ue<Z.length;ue++)N=(Z.words[ue]|0)+re,this.words[ue]=N&67108863,re=N>>>26;if(this.length=Z.length,re!==0)this.words[this.length]=re,this.length++;else if(Z!==this)for(;ue<Z.length;ue++)this.words[ue]=Z.words[ue];return this},c.prototype.add=function(F){var N;return F.negative!==0&&this.negative===0?(F.negative=0,N=this.sub(F),F.negative^=1,N):F.negative===0&&this.negative!==0?(this.negative=0,N=F.sub(this),this.negative=1,N):this.length>F.length?this.clone().iadd(F):F.clone().iadd(this)},c.prototype.isub=function(F){if(F.negative!==0){F.negative=0;var N=this.iadd(F);return F.negative=1,N._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(F),this.negative=1,this._normSign();var Z=this.cmp(F);if(Z===0)return this.negative=0,this.length=1,this.words[0]=0,this;var J,re;Z>0?(J=this,re=F):(J=F,re=this);for(var ue=0,fe=0;fe<re.length;fe++)N=(J.words[fe]|0)-(re.words[fe]|0)+ue,ue=N>>26,this.words[fe]=N&67108863;for(;ue!==0&&fe<J.length;fe++)N=(J.words[fe]|0)+ue,ue=N>>26,this.words[fe]=N&67108863;if(ue===0&&fe<J.length&&J!==this)for(;fe<J.length;fe++)this.words[fe]=J.words[fe];return this.length=Math.max(this.length,fe),J!==this&&(this.negative=1),this.strip()},c.prototype.sub=function(F){return this.clone().isub(F)};function w(B,F,N){N.negative=F.negative^B.negative;var Z=B.length+F.length|0;N.length=Z,Z=Z-1|0;var J=B.words[0]|0,re=F.words[0]|0,ue=J*re,fe=ue&67108863,K=ue/67108864|0;N.words[0]=fe;for(var X=1;X<Z;X++){for(var ae=K>>>26,oe=K&67108863,me=Math.min(X,F.length-1),xe=Math.max(0,X-B.length+1);xe<=me;xe++){var ce=X-xe|0;J=B.words[ce]|0,re=F.words[xe]|0,ue=J*re+oe,ae+=ue/67108864|0,oe=ue&67108863}N.words[X]=oe|0,K=ae|0}return K!==0?N.words[X]=K|0:N.length--,N.strip()}var k=function(F,N,Z){var J=F.words,re=N.words,ue=Z.words,fe=0,K,X,ae,oe=J[0]|0,me=oe&8191,xe=oe>>>13,ce=J[1]|0,ie=ce&8191,ge=ce>>>13,le=J[2]|0,we=le&8191,Re=le>>>13,qe=J[3]|0,et=qe&8191,Pe=qe>>>13,Ie=J[4]|0,ut=Ie&8191,ft=Ie>>>13,je=J[5]|0,_t=je&8191,Bt=je>>>13,Lt=J[6]|0,Me=Lt&8191,Ze=Lt>>>13,dt=J[7]|0,it=dt&8191,vt=dt>>>13,rt=J[8]|0,We=rt&8191,ht=rt>>>13,mt=J[9]|0,er=mt&8191,$t=mt>>>13,cr=re[0]|0,or=cr&8191,vr=cr>>>13,Ot=re[1]|0,yt=Ot&8191,Et=Ot>>>13,Je=re[2]|0,Ke=Je&8191,At=Je>>>13,Ee=re[3]|0,de=Ee&8191,Te=Ee>>>13,nt=re[4]|0,Mt=nt&8191,Kt=nt>>>13,Jt=re[5]|0,Fr=Jt&8191,Vr=Jt>>>13,mr=re[6]|0,zr=mr&8191,an=mr>>>13,ni=re[7]|0,mn=ni&8191,fi=ni>>>13,Wi=re[8]|0,si=Wi&8191,Zi=Wi>>>13,Ei=re[9]|0,ot=Ei&8191,Be=Ei>>>13;Z.negative=F.negative^N.negative,Z.length=19,K=Math.imul(me,or),X=Math.imul(me,vr),X=X+Math.imul(xe,or)|0,ae=Math.imul(xe,vr);var lt=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(lt>>>26)|0,lt&=67108863,K=Math.imul(ie,or),X=Math.imul(ie,vr),X=X+Math.imul(ge,or)|0,ae=Math.imul(ge,vr),K=K+Math.imul(me,yt)|0,X=X+Math.imul(me,Et)|0,X=X+Math.imul(xe,yt)|0,ae=ae+Math.imul(xe,Et)|0;var xt=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(xt>>>26)|0,xt&=67108863,K=Math.imul(we,or),X=Math.imul(we,vr),X=X+Math.imul(Re,or)|0,ae=Math.imul(Re,vr),K=K+Math.imul(ie,yt)|0,X=X+Math.imul(ie,Et)|0,X=X+Math.imul(ge,yt)|0,ae=ae+Math.imul(ge,Et)|0,K=K+Math.imul(me,Ke)|0,X=X+Math.imul(me,At)|0,X=X+Math.imul(xe,Ke)|0,ae=ae+Math.imul(xe,At)|0;var Nt=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,K=Math.imul(et,or),X=Math.imul(et,vr),X=X+Math.imul(Pe,or)|0,ae=Math.imul(Pe,vr),K=K+Math.imul(we,yt)|0,X=X+Math.imul(we,Et)|0,X=X+Math.imul(Re,yt)|0,ae=ae+Math.imul(Re,Et)|0,K=K+Math.imul(ie,Ke)|0,X=X+Math.imul(ie,At)|0,X=X+Math.imul(ge,Ke)|0,ae=ae+Math.imul(ge,At)|0,K=K+Math.imul(me,de)|0,X=X+Math.imul(me,Te)|0,X=X+Math.imul(xe,de)|0,ae=ae+Math.imul(xe,Te)|0;var nr=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(nr>>>26)|0,nr&=67108863,K=Math.imul(ut,or),X=Math.imul(ut,vr),X=X+Math.imul(ft,or)|0,ae=Math.imul(ft,vr),K=K+Math.imul(et,yt)|0,X=X+Math.imul(et,Et)|0,X=X+Math.imul(Pe,yt)|0,ae=ae+Math.imul(Pe,Et)|0,K=K+Math.imul(we,Ke)|0,X=X+Math.imul(we,At)|0,X=X+Math.imul(Re,Ke)|0,ae=ae+Math.imul(Re,At)|0,K=K+Math.imul(ie,de)|0,X=X+Math.imul(ie,Te)|0,X=X+Math.imul(ge,de)|0,ae=ae+Math.imul(ge,Te)|0,K=K+Math.imul(me,Mt)|0,X=X+Math.imul(me,Kt)|0,X=X+Math.imul(xe,Mt)|0,ae=ae+Math.imul(xe,Kt)|0;var yr=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(yr>>>26)|0,yr&=67108863,K=Math.imul(_t,or),X=Math.imul(_t,vr),X=X+Math.imul(Bt,or)|0,ae=Math.imul(Bt,vr),K=K+Math.imul(ut,yt)|0,X=X+Math.imul(ut,Et)|0,X=X+Math.imul(ft,yt)|0,ae=ae+Math.imul(ft,Et)|0,K=K+Math.imul(et,Ke)|0,X=X+Math.imul(et,At)|0,X=X+Math.imul(Pe,Ke)|0,ae=ae+Math.imul(Pe,At)|0,K=K+Math.imul(we,de)|0,X=X+Math.imul(we,Te)|0,X=X+Math.imul(Re,de)|0,ae=ae+Math.imul(Re,Te)|0,K=K+Math.imul(ie,Mt)|0,X=X+Math.imul(ie,Kt)|0,X=X+Math.imul(ge,Mt)|0,ae=ae+Math.imul(ge,Kt)|0,K=K+Math.imul(me,Fr)|0,X=X+Math.imul(me,Vr)|0,X=X+Math.imul(xe,Fr)|0,ae=ae+Math.imul(xe,Vr)|0;var dr=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(dr>>>26)|0,dr&=67108863,K=Math.imul(Me,or),X=Math.imul(Me,vr),X=X+Math.imul(Ze,or)|0,ae=Math.imul(Ze,vr),K=K+Math.imul(_t,yt)|0,X=X+Math.imul(_t,Et)|0,X=X+Math.imul(Bt,yt)|0,ae=ae+Math.imul(Bt,Et)|0,K=K+Math.imul(ut,Ke)|0,X=X+Math.imul(ut,At)|0,X=X+Math.imul(ft,Ke)|0,ae=ae+Math.imul(ft,At)|0,K=K+Math.imul(et,de)|0,X=X+Math.imul(et,Te)|0,X=X+Math.imul(Pe,de)|0,ae=ae+Math.imul(Pe,Te)|0,K=K+Math.imul(we,Mt)|0,X=X+Math.imul(we,Kt)|0,X=X+Math.imul(Re,Mt)|0,ae=ae+Math.imul(Re,Kt)|0,K=K+Math.imul(ie,Fr)|0,X=X+Math.imul(ie,Vr)|0,X=X+Math.imul(ge,Fr)|0,ae=ae+Math.imul(ge,Vr)|0,K=K+Math.imul(me,zr)|0,X=X+Math.imul(me,an)|0,X=X+Math.imul(xe,zr)|0,ae=ae+Math.imul(xe,an)|0;var Rr=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,K=Math.imul(it,or),X=Math.imul(it,vr),X=X+Math.imul(vt,or)|0,ae=Math.imul(vt,vr),K=K+Math.imul(Me,yt)|0,X=X+Math.imul(Me,Et)|0,X=X+Math.imul(Ze,yt)|0,ae=ae+Math.imul(Ze,Et)|0,K=K+Math.imul(_t,Ke)|0,X=X+Math.imul(_t,At)|0,X=X+Math.imul(Bt,Ke)|0,ae=ae+Math.imul(Bt,At)|0,K=K+Math.imul(ut,de)|0,X=X+Math.imul(ut,Te)|0,X=X+Math.imul(ft,de)|0,ae=ae+Math.imul(ft,Te)|0,K=K+Math.imul(et,Mt)|0,X=X+Math.imul(et,Kt)|0,X=X+Math.imul(Pe,Mt)|0,ae=ae+Math.imul(Pe,Kt)|0,K=K+Math.imul(we,Fr)|0,X=X+Math.imul(we,Vr)|0,X=X+Math.imul(Re,Fr)|0,ae=ae+Math.imul(Re,Vr)|0,K=K+Math.imul(ie,zr)|0,X=X+Math.imul(ie,an)|0,X=X+Math.imul(ge,zr)|0,ae=ae+Math.imul(ge,an)|0,K=K+Math.imul(me,mn)|0,X=X+Math.imul(me,fi)|0,X=X+Math.imul(xe,mn)|0,ae=ae+Math.imul(xe,fi)|0;var Gr=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,K=Math.imul(We,or),X=Math.imul(We,vr),X=X+Math.imul(ht,or)|0,ae=Math.imul(ht,vr),K=K+Math.imul(it,yt)|0,X=X+Math.imul(it,Et)|0,X=X+Math.imul(vt,yt)|0,ae=ae+Math.imul(vt,Et)|0,K=K+Math.imul(Me,Ke)|0,X=X+Math.imul(Me,At)|0,X=X+Math.imul(Ze,Ke)|0,ae=ae+Math.imul(Ze,At)|0,K=K+Math.imul(_t,de)|0,X=X+Math.imul(_t,Te)|0,X=X+Math.imul(Bt,de)|0,ae=ae+Math.imul(Bt,Te)|0,K=K+Math.imul(ut,Mt)|0,X=X+Math.imul(ut,Kt)|0,X=X+Math.imul(ft,Mt)|0,ae=ae+Math.imul(ft,Kt)|0,K=K+Math.imul(et,Fr)|0,X=X+Math.imul(et,Vr)|0,X=X+Math.imul(Pe,Fr)|0,ae=ae+Math.imul(Pe,Vr)|0,K=K+Math.imul(we,zr)|0,X=X+Math.imul(we,an)|0,X=X+Math.imul(Re,zr)|0,ae=ae+Math.imul(Re,an)|0,K=K+Math.imul(ie,mn)|0,X=X+Math.imul(ie,fi)|0,X=X+Math.imul(ge,mn)|0,ae=ae+Math.imul(ge,fi)|0,K=K+Math.imul(me,si)|0,X=X+Math.imul(me,Zi)|0,X=X+Math.imul(xe,si)|0,ae=ae+Math.imul(xe,Zi)|0;var Yr=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,K=Math.imul(er,or),X=Math.imul(er,vr),X=X+Math.imul($t,or)|0,ae=Math.imul($t,vr),K=K+Math.imul(We,yt)|0,X=X+Math.imul(We,Et)|0,X=X+Math.imul(ht,yt)|0,ae=ae+Math.imul(ht,Et)|0,K=K+Math.imul(it,Ke)|0,X=X+Math.imul(it,At)|0,X=X+Math.imul(vt,Ke)|0,ae=ae+Math.imul(vt,At)|0,K=K+Math.imul(Me,de)|0,X=X+Math.imul(Me,Te)|0,X=X+Math.imul(Ze,de)|0,ae=ae+Math.imul(Ze,Te)|0,K=K+Math.imul(_t,Mt)|0,X=X+Math.imul(_t,Kt)|0,X=X+Math.imul(Bt,Mt)|0,ae=ae+Math.imul(Bt,Kt)|0,K=K+Math.imul(ut,Fr)|0,X=X+Math.imul(ut,Vr)|0,X=X+Math.imul(ft,Fr)|0,ae=ae+Math.imul(ft,Vr)|0,K=K+Math.imul(et,zr)|0,X=X+Math.imul(et,an)|0,X=X+Math.imul(Pe,zr)|0,ae=ae+Math.imul(Pe,an)|0,K=K+Math.imul(we,mn)|0,X=X+Math.imul(we,fi)|0,X=X+Math.imul(Re,mn)|0,ae=ae+Math.imul(Re,fi)|0,K=K+Math.imul(ie,si)|0,X=X+Math.imul(ie,Zi)|0,X=X+Math.imul(ge,si)|0,ae=ae+Math.imul(ge,Zi)|0,K=K+Math.imul(me,ot)|0,X=X+Math.imul(me,Be)|0,X=X+Math.imul(xe,ot)|0,ae=ae+Math.imul(xe,Be)|0;var dn=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(dn>>>26)|0,dn&=67108863,K=Math.imul(er,yt),X=Math.imul(er,Et),X=X+Math.imul($t,yt)|0,ae=Math.imul($t,Et),K=K+Math.imul(We,Ke)|0,X=X+Math.imul(We,At)|0,X=X+Math.imul(ht,Ke)|0,ae=ae+Math.imul(ht,At)|0,K=K+Math.imul(it,de)|0,X=X+Math.imul(it,Te)|0,X=X+Math.imul(vt,de)|0,ae=ae+Math.imul(vt,Te)|0,K=K+Math.imul(Me,Mt)|0,X=X+Math.imul(Me,Kt)|0,X=X+Math.imul(Ze,Mt)|0,ae=ae+Math.imul(Ze,Kt)|0,K=K+Math.imul(_t,Fr)|0,X=X+Math.imul(_t,Vr)|0,X=X+Math.imul(Bt,Fr)|0,ae=ae+Math.imul(Bt,Vr)|0,K=K+Math.imul(ut,zr)|0,X=X+Math.imul(ut,an)|0,X=X+Math.imul(ft,zr)|0,ae=ae+Math.imul(ft,an)|0,K=K+Math.imul(et,mn)|0,X=X+Math.imul(et,fi)|0,X=X+Math.imul(Pe,mn)|0,ae=ae+Math.imul(Pe,fi)|0,K=K+Math.imul(we,si)|0,X=X+Math.imul(we,Zi)|0,X=X+Math.imul(Re,si)|0,ae=ae+Math.imul(Re,Zi)|0,K=K+Math.imul(ie,ot)|0,X=X+Math.imul(ie,Be)|0,X=X+Math.imul(ge,ot)|0,ae=ae+Math.imul(ge,Be)|0;var Wr=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,K=Math.imul(er,Ke),X=Math.imul(er,At),X=X+Math.imul($t,Ke)|0,ae=Math.imul($t,At),K=K+Math.imul(We,de)|0,X=X+Math.imul(We,Te)|0,X=X+Math.imul(ht,de)|0,ae=ae+Math.imul(ht,Te)|0,K=K+Math.imul(it,Mt)|0,X=X+Math.imul(it,Kt)|0,X=X+Math.imul(vt,Mt)|0,ae=ae+Math.imul(vt,Kt)|0,K=K+Math.imul(Me,Fr)|0,X=X+Math.imul(Me,Vr)|0,X=X+Math.imul(Ze,Fr)|0,ae=ae+Math.imul(Ze,Vr)|0,K=K+Math.imul(_t,zr)|0,X=X+Math.imul(_t,an)|0,X=X+Math.imul(Bt,zr)|0,ae=ae+Math.imul(Bt,an)|0,K=K+Math.imul(ut,mn)|0,X=X+Math.imul(ut,fi)|0,X=X+Math.imul(ft,mn)|0,ae=ae+Math.imul(ft,fi)|0,K=K+Math.imul(et,si)|0,X=X+Math.imul(et,Zi)|0,X=X+Math.imul(Pe,si)|0,ae=ae+Math.imul(Pe,Zi)|0,K=K+Math.imul(we,ot)|0,X=X+Math.imul(we,Be)|0,X=X+Math.imul(Re,ot)|0,ae=ae+Math.imul(Re,Be)|0;var qn=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(qn>>>26)|0,qn&=67108863,K=Math.imul(er,de),X=Math.imul(er,Te),X=X+Math.imul($t,de)|0,ae=Math.imul($t,Te),K=K+Math.imul(We,Mt)|0,X=X+Math.imul(We,Kt)|0,X=X+Math.imul(ht,Mt)|0,ae=ae+Math.imul(ht,Kt)|0,K=K+Math.imul(it,Fr)|0,X=X+Math.imul(it,Vr)|0,X=X+Math.imul(vt,Fr)|0,ae=ae+Math.imul(vt,Vr)|0,K=K+Math.imul(Me,zr)|0,X=X+Math.imul(Me,an)|0,X=X+Math.imul(Ze,zr)|0,ae=ae+Math.imul(Ze,an)|0,K=K+Math.imul(_t,mn)|0,X=X+Math.imul(_t,fi)|0,X=X+Math.imul(Bt,mn)|0,ae=ae+Math.imul(Bt,fi)|0,K=K+Math.imul(ut,si)|0,X=X+Math.imul(ut,Zi)|0,X=X+Math.imul(ft,si)|0,ae=ae+Math.imul(ft,Zi)|0,K=K+Math.imul(et,ot)|0,X=X+Math.imul(et,Be)|0,X=X+Math.imul(Pe,ot)|0,ae=ae+Math.imul(Pe,Be)|0;var vi=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(vi>>>26)|0,vi&=67108863,K=Math.imul(er,Mt),X=Math.imul(er,Kt),X=X+Math.imul($t,Mt)|0,ae=Math.imul($t,Kt),K=K+Math.imul(We,Fr)|0,X=X+Math.imul(We,Vr)|0,X=X+Math.imul(ht,Fr)|0,ae=ae+Math.imul(ht,Vr)|0,K=K+Math.imul(it,zr)|0,X=X+Math.imul(it,an)|0,X=X+Math.imul(vt,zr)|0,ae=ae+Math.imul(vt,an)|0,K=K+Math.imul(Me,mn)|0,X=X+Math.imul(Me,fi)|0,X=X+Math.imul(Ze,mn)|0,ae=ae+Math.imul(Ze,fi)|0,K=K+Math.imul(_t,si)|0,X=X+Math.imul(_t,Zi)|0,X=X+Math.imul(Bt,si)|0,ae=ae+Math.imul(Bt,Zi)|0,K=K+Math.imul(ut,ot)|0,X=X+Math.imul(ut,Be)|0,X=X+Math.imul(ft,ot)|0,ae=ae+Math.imul(ft,Be)|0;var Mi=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(Mi>>>26)|0,Mi&=67108863,K=Math.imul(er,Fr),X=Math.imul(er,Vr),X=X+Math.imul($t,Fr)|0,ae=Math.imul($t,Vr),K=K+Math.imul(We,zr)|0,X=X+Math.imul(We,an)|0,X=X+Math.imul(ht,zr)|0,ae=ae+Math.imul(ht,an)|0,K=K+Math.imul(it,mn)|0,X=X+Math.imul(it,fi)|0,X=X+Math.imul(vt,mn)|0,ae=ae+Math.imul(vt,fi)|0,K=K+Math.imul(Me,si)|0,X=X+Math.imul(Me,Zi)|0,X=X+Math.imul(Ze,si)|0,ae=ae+Math.imul(Ze,Zi)|0,K=K+Math.imul(_t,ot)|0,X=X+Math.imul(_t,Be)|0,X=X+Math.imul(Bt,ot)|0,ae=ae+Math.imul(Bt,Be)|0;var Ui=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(Ui>>>26)|0,Ui&=67108863,K=Math.imul(er,zr),X=Math.imul(er,an),X=X+Math.imul($t,zr)|0,ae=Math.imul($t,an),K=K+Math.imul(We,mn)|0,X=X+Math.imul(We,fi)|0,X=X+Math.imul(ht,mn)|0,ae=ae+Math.imul(ht,fi)|0,K=K+Math.imul(it,si)|0,X=X+Math.imul(it,Zi)|0,X=X+Math.imul(vt,si)|0,ae=ae+Math.imul(vt,Zi)|0,K=K+Math.imul(Me,ot)|0,X=X+Math.imul(Me,Be)|0,X=X+Math.imul(Ze,ot)|0,ae=ae+Math.imul(Ze,Be)|0;var ji=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(ji>>>26)|0,ji&=67108863,K=Math.imul(er,mn),X=Math.imul(er,fi),X=X+Math.imul($t,mn)|0,ae=Math.imul($t,fi),K=K+Math.imul(We,si)|0,X=X+Math.imul(We,Zi)|0,X=X+Math.imul(ht,si)|0,ae=ae+Math.imul(ht,Zi)|0,K=K+Math.imul(it,ot)|0,X=X+Math.imul(it,Be)|0,X=X+Math.imul(vt,ot)|0,ae=ae+Math.imul(vt,Be)|0;var ea=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(ea>>>26)|0,ea&=67108863,K=Math.imul(er,si),X=Math.imul(er,Zi),X=X+Math.imul($t,si)|0,ae=Math.imul($t,Zi),K=K+Math.imul(We,ot)|0,X=X+Math.imul(We,Be)|0,X=X+Math.imul(ht,ot)|0,ae=ae+Math.imul(ht,Be)|0;var Ra=(fe+K|0)+((X&8191)<<13)|0;fe=(ae+(X>>>13)|0)+(Ra>>>26)|0,Ra&=67108863,K=Math.imul(er,ot),X=Math.imul(er,Be),X=X+Math.imul($t,ot)|0,ae=Math.imul($t,Be);var Li=(fe+K|0)+((X&8191)<<13)|0;return fe=(ae+(X>>>13)|0)+(Li>>>26)|0,Li&=67108863,ue[0]=lt,ue[1]=xt,ue[2]=Nt,ue[3]=nr,ue[4]=yr,ue[5]=dr,ue[6]=Rr,ue[7]=Gr,ue[8]=Yr,ue[9]=dn,ue[10]=Wr,ue[11]=qn,ue[12]=vi,ue[13]=Mi,ue[14]=Ui,ue[15]=ji,ue[16]=ea,ue[17]=Ra,ue[18]=Li,fe!==0&&(ue[19]=fe,Z.length++),Z};Math.imul||(k=w);function x(B,F,N){N.negative=F.negative^B.negative,N.length=B.length+F.length;for(var Z=0,J=0,re=0;re<N.length-1;re++){var ue=J;J=0;for(var fe=Z&67108863,K=Math.min(re,F.length-1),X=Math.max(0,re-B.length+1);X<=K;X++){var ae=re-X,oe=B.words[ae]|0,me=F.words[X]|0,xe=oe*me,ce=xe&67108863;ue=ue+(xe/67108864|0)|0,ce=ce+fe|0,fe=ce&67108863,ue=ue+(ce>>>26)|0,J+=ue>>>26,ue&=67108863}N.words[re]=fe,Z=ue,ue=J}return Z!==0?N.words[re]=Z:N.length--,N.strip()}function E(B,F,N){var Z=new S;return Z.mulp(B,F,N)}c.prototype.mulTo=function(F,N){var Z,J=this.length+F.length;return this.length===10&&F.length===10?Z=k(this,F,N):J<63?Z=w(this,F,N):J<1024?Z=x(this,F,N):Z=E(this,F,N),Z};function S(B,F){this.x=B,this.y=F}S.prototype.makeRBT=function(F){for(var N=new Array(F),Z=c.prototype._countBits(F)-1,J=0;J<F;J++)N[J]=this.revBin(J,Z,F);return N},S.prototype.revBin=function(F,N,Z){if(F===0||F===Z-1)return F;for(var J=0,re=0;re<N;re++)J|=(F&1)<<N-re-1,F>>=1;return J},S.prototype.permute=function(F,N,Z,J,re,ue){for(var fe=0;fe<ue;fe++)J[fe]=N[F[fe]],re[fe]=Z[F[fe]]},S.prototype.transform=function(F,N,Z,J,re,ue){this.permute(ue,F,N,Z,J,re);for(var fe=1;fe<re;fe<<=1)for(var K=fe<<1,X=Math.cos(2*Math.PI/K),ae=Math.sin(2*Math.PI/K),oe=0;oe<re;oe+=K)for(var me=X,xe=ae,ce=0;ce<fe;ce++){var ie=Z[oe+ce],ge=J[oe+ce],le=Z[oe+ce+fe],we=J[oe+ce+fe],Re=me*le-xe*we;we=me*we+xe*le,le=Re,Z[oe+ce]=ie+le,J[oe+ce]=ge+we,Z[oe+ce+fe]=ie-le,J[oe+ce+fe]=ge-we,ce!==K&&(Re=X*me-ae*xe,xe=X*xe+ae*me,me=Re)}},S.prototype.guessLen13b=function(F,N){var Z=Math.max(N,F)|1,J=Z&1,re=0;for(Z=Z/2|0;Z;Z=Z>>>1)re++;return 1<<re+1+J},S.prototype.conjugate=function(F,N,Z){if(!(Z<=1))for(var J=0;J<Z/2;J++){var re=F[J];F[J]=F[Z-J-1],F[Z-J-1]=re,re=N[J],N[J]=-N[Z-J-1],N[Z-J-1]=-re}},S.prototype.normalize13b=function(F,N){for(var Z=0,J=0;J<N/2;J++){var re=Math.round(F[2*J+1]/N)*8192+Math.round(F[2*J]/N)+Z;F[J]=re&67108863,re<67108864?Z=0:Z=re/67108864|0}return F},S.prototype.convert13b=function(F,N,Z,J){for(var re=0,ue=0;ue<N;ue++)re=re+(F[ue]|0),Z[2*ue]=re&8191,re=re>>>13,Z[2*ue+1]=re&8191,re=re>>>13;for(ue=2*N;ue<J;++ue)Z[ue]=0;u(re===0),u((re&-8192)===0)},S.prototype.stub=function(F){for(var N=new Array(F),Z=0;Z<F;Z++)N[Z]=0;return N},S.prototype.mulp=function(F,N,Z){var J=2*this.guessLen13b(F.length,N.length),re=this.makeRBT(J),ue=this.stub(J),fe=new Array(J),K=new Array(J),X=new Array(J),ae=new Array(J),oe=new Array(J),me=new Array(J),xe=Z.words;xe.length=J,this.convert13b(F.words,F.length,fe,J),this.convert13b(N.words,N.length,ae,J),this.transform(fe,ue,K,X,J,re),this.transform(ae,ue,oe,me,J,re);for(var ce=0;ce<J;ce++){var ie=K[ce]*oe[ce]-X[ce]*me[ce];X[ce]=K[ce]*me[ce]+X[ce]*oe[ce],K[ce]=ie}return this.conjugate(K,X,J),this.transform(K,X,xe,ue,J,re),this.conjugate(xe,ue,J),this.normalize13b(xe,J),Z.negative=F.negative^N.negative,Z.length=F.length+N.length,Z.strip()},c.prototype.mul=function(F){var N=new c(null);return N.words=new Array(this.length+F.length),this.mulTo(F,N)},c.prototype.mulf=function(F){var N=new c(null);return N.words=new Array(this.length+F.length),E(this,F,N)},c.prototype.imul=function(F){return this.clone().mulTo(F,this)},c.prototype.imuln=function(F){u(typeof F=="number"),u(F<67108864);for(var N=0,Z=0;Z<this.length;Z++){var J=(this.words[Z]|0)*F,re=(J&67108863)+(N&67108863);N>>=26,N+=J/67108864|0,N+=re>>>26,this.words[Z]=re&67108863}return N!==0&&(this.words[Z]=N,this.length++),this},c.prototype.muln=function(F){return this.clone().imuln(F)},c.prototype.sqr=function(){return this.mul(this)},c.prototype.isqr=function(){return this.imul(this.clone())},c.prototype.pow=function(F){var N=b(F);if(N.length===0)return new c(1);for(var Z=this,J=0;J<N.length&&N[J]===0;J++,Z=Z.sqr());if(++J<N.length)for(var re=Z.sqr();J<N.length;J++,re=re.sqr())N[J]!==0&&(Z=Z.mul(re));return Z},c.prototype.iushln=function(F){u(typeof F=="number"&&F>=0);var N=F%26,Z=(F-N)/26,J=67108863>>>26-N<<26-N,re;if(N!==0){var ue=0;for(re=0;re<this.length;re++){var fe=this.words[re]&J,K=(this.words[re]|0)-fe<<N;this.words[re]=K|ue,ue=fe>>>26-N}ue&&(this.words[re]=ue,this.length++)}if(Z!==0){for(re=this.length-1;re>=0;re--)this.words[re+Z]=this.words[re];for(re=0;re<Z;re++)this.words[re]=0;this.length+=Z}return this.strip()},c.prototype.ishln=function(F){return u(this.negative===0),this.iushln(F)},c.prototype.iushrn=function(F,N,Z){u(typeof F=="number"&&F>=0);var J;N?J=(N-N%26)/26:J=0;var re=F%26,ue=Math.min((F-re)/26,this.length),fe=67108863^67108863>>>re<<re,K=Z;if(J-=ue,J=Math.max(0,J),K){for(var X=0;X<ue;X++)K.words[X]=this.words[X];K.length=ue}if(ue!==0)if(this.length>ue)for(this.length-=ue,X=0;X<this.length;X++)this.words[X]=this.words[X+ue];else this.words[0]=0,this.length=1;var ae=0;for(X=this.length-1;X>=0&&(ae!==0||X>=J);X--){var oe=this.words[X]|0;this.words[X]=ae<<26-re|oe>>>re,ae=oe&fe}return K&&ae!==0&&(K.words[K.length++]=ae),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},c.prototype.ishrn=function(F,N,Z){return u(this.negative===0),this.iushrn(F,N,Z)},c.prototype.shln=function(F){return this.clone().ishln(F)},c.prototype.ushln=function(F){return this.clone().iushln(F)},c.prototype.shrn=function(F){return this.clone().ishrn(F)},c.prototype.ushrn=function(F){return this.clone().iushrn(F)},c.prototype.testn=function(F){u(typeof F=="number"&&F>=0);var N=F%26,Z=(F-N)/26,J=1<<N;if(this.length<=Z)return!1;var re=this.words[Z];return!!(re&J)},c.prototype.imaskn=function(F){u(typeof F=="number"&&F>=0);var N=F%26,Z=(F-N)/26;if(u(this.negative===0,"imaskn works only with positive numbers"),this.length<=Z)return this;if(N!==0&&Z++,this.length=Math.min(Z,this.length),N!==0){var J=67108863^67108863>>>N<<N;this.words[this.length-1]&=J}return this.strip()},c.prototype.maskn=function(F){return this.clone().imaskn(F)},c.prototype.iaddn=function(F){return u(typeof F=="number"),u(F<67108864),F<0?this.isubn(-F):this.negative!==0?this.length===1&&(this.words[0]|0)<F?(this.words[0]=F-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(F),this.negative=1,this):this._iaddn(F)},c.prototype._iaddn=function(F){this.words[0]+=F;for(var N=0;N<this.length&&this.words[N]>=67108864;N++)this.words[N]-=67108864,N===this.length-1?this.words[N+1]=1:this.words[N+1]++;return this.length=Math.max(this.length,N+1),this},c.prototype.isubn=function(F){if(u(typeof F=="number"),u(F<67108864),F<0)return this.iaddn(-F);if(this.negative!==0)return this.negative=0,this.iaddn(F),this.negative=1,this;if(this.words[0]-=F,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var N=0;N<this.length&&this.words[N]<0;N++)this.words[N]+=67108864,this.words[N+1]-=1;return this.strip()},c.prototype.addn=function(F){return this.clone().iaddn(F)},c.prototype.subn=function(F){return this.clone().isubn(F)},c.prototype.iabs=function(){return this.negative=0,this},c.prototype.abs=function(){return this.clone().iabs()},c.prototype._ishlnsubmul=function(F,N,Z){var J=F.length+Z,re;this._expand(J);var ue,fe=0;for(re=0;re<F.length;re++){ue=(this.words[re+Z]|0)+fe;var K=(F.words[re]|0)*N;ue-=K&67108863,fe=(ue>>26)-(K/67108864|0),this.words[re+Z]=ue&67108863}for(;re<this.length-Z;re++)ue=(this.words[re+Z]|0)+fe,fe=ue>>26,this.words[re+Z]=ue&67108863;if(fe===0)return this.strip();for(u(fe===-1),fe=0,re=0;re<this.length;re++)ue=-(this.words[re]|0)+fe,fe=ue>>26,this.words[re]=ue&67108863;return this.negative=1,this.strip()},c.prototype._wordDiv=function(F,N){var Z=this.length-F.length,J=this.clone(),re=F,ue=re.words[re.length-1]|0,fe=this._countBits(ue);Z=26-fe,Z!==0&&(re=re.ushln(Z),J.iushln(Z),ue=re.words[re.length-1]|0);var K=J.length-re.length,X;if(N!=="mod"){X=new c(null),X.length=K+1,X.words=new Array(X.length);for(var ae=0;ae<X.length;ae++)X.words[ae]=0}var oe=J.clone()._ishlnsubmul(re,1,K);oe.negative===0&&(J=oe,X&&(X.words[K]=1));for(var me=K-1;me>=0;me--){var xe=(J.words[re.length+me]|0)*67108864+(J.words[re.length+me-1]|0);for(xe=Math.min(xe/ue|0,67108863),J._ishlnsubmul(re,xe,me);J.negative!==0;)xe--,J.negative=0,J._ishlnsubmul(re,1,me),J.isZero()||(J.negative^=1);X&&(X.words[me]=xe)}return X&&X.strip(),J.strip(),N!=="div"&&Z!==0&&J.iushrn(Z),{div:X||null,mod:J}},c.prototype.divmod=function(F,N,Z){if(u(!F.isZero()),this.isZero())return{div:new c(0),mod:new c(0)};var J,re,ue;return this.negative!==0&&F.negative===0?(ue=this.neg().divmod(F,N),N!=="mod"&&(J=ue.div.neg()),N!=="div"&&(re=ue.mod.neg(),Z&&re.negative!==0&&re.iadd(F)),{div:J,mod:re}):this.negative===0&&F.negative!==0?(ue=this.divmod(F.neg(),N),N!=="mod"&&(J=ue.div.neg()),{div:J,mod:ue.mod}):this.negative&F.negative?(ue=this.neg().divmod(F.neg(),N),N!=="div"&&(re=ue.mod.neg(),Z&&re.negative!==0&&re.isub(F)),{div:ue.div,mod:re}):F.length>this.length||this.cmp(F)<0?{div:new c(0),mod:this}:F.length===1?N==="div"?{div:this.divn(F.words[0]),mod:null}:N==="mod"?{div:null,mod:new c(this.modn(F.words[0]))}:{div:this.divn(F.words[0]),mod:new c(this.modn(F.words[0]))}:this._wordDiv(F,N)},c.prototype.div=function(F){return this.divmod(F,"div",!1).div},c.prototype.mod=function(F){return this.divmod(F,"mod",!1).mod},c.prototype.umod=function(F){return this.divmod(F,"mod",!0).mod},c.prototype.divRound=function(F){var N=this.divmod(F);if(N.mod.isZero())return N.div;var Z=N.div.negative!==0?N.mod.isub(F):N.mod,J=F.ushrn(1),re=F.andln(1),ue=Z.cmp(J);return ue<0||re===1&&ue===0?N.div:N.div.negative!==0?N.div.isubn(1):N.div.iaddn(1)},c.prototype.modn=function(F){u(F<=67108863);for(var N=(1<<26)%F,Z=0,J=this.length-1;J>=0;J--)Z=(N*Z+(this.words[J]|0))%F;return Z},c.prototype.idivn=function(F){u(F<=67108863);for(var N=0,Z=this.length-1;Z>=0;Z--){var J=(this.words[Z]|0)+N*67108864;this.words[Z]=J/F|0,N=J%F}return this.strip()},c.prototype.divn=function(F){return this.clone().idivn(F)},c.prototype.egcd=function(F){u(F.negative===0),u(!F.isZero());var N=this,Z=F.clone();N.negative!==0?N=N.umod(F):N=N.clone();for(var J=new c(1),re=new c(0),ue=new c(0),fe=new c(1),K=0;N.isEven()&&Z.isEven();)N.iushrn(1),Z.iushrn(1),++K;for(var X=Z.clone(),ae=N.clone();!N.isZero();){for(var oe=0,me=1;!(N.words[0]&me)&&oe<26;++oe,me<<=1);if(oe>0)for(N.iushrn(oe);oe-- >0;)(J.isOdd()||re.isOdd())&&(J.iadd(X),re.isub(ae)),J.iushrn(1),re.iushrn(1);for(var xe=0,ce=1;!(Z.words[0]&ce)&&xe<26;++xe,ce<<=1);if(xe>0)for(Z.iushrn(xe);xe-- >0;)(ue.isOdd()||fe.isOdd())&&(ue.iadd(X),fe.isub(ae)),ue.iushrn(1),fe.iushrn(1);N.cmp(Z)>=0?(N.isub(Z),J.isub(ue),re.isub(fe)):(Z.isub(N),ue.isub(J),fe.isub(re))}return{a:ue,b:fe,gcd:Z.iushln(K)}},c.prototype._invmp=function(F){u(F.negative===0),u(!F.isZero());var N=this,Z=F.clone();N.negative!==0?N=N.umod(F):N=N.clone();for(var J=new c(1),re=new c(0),ue=Z.clone();N.cmpn(1)>0&&Z.cmpn(1)>0;){for(var fe=0,K=1;!(N.words[0]&K)&&fe<26;++fe,K<<=1);if(fe>0)for(N.iushrn(fe);fe-- >0;)J.isOdd()&&J.iadd(ue),J.iushrn(1);for(var X=0,ae=1;!(Z.words[0]&ae)&&X<26;++X,ae<<=1);if(X>0)for(Z.iushrn(X);X-- >0;)re.isOdd()&&re.iadd(ue),re.iushrn(1);N.cmp(Z)>=0?(N.isub(Z),J.isub(re)):(Z.isub(N),re.isub(J))}var oe;return N.cmpn(1)===0?oe=J:oe=re,oe.cmpn(0)<0&&oe.iadd(F),oe},c.prototype.gcd=function(F){if(this.isZero())return F.abs();if(F.isZero())return this.abs();var N=this.clone(),Z=F.clone();N.negative=0,Z.negative=0;for(var J=0;N.isEven()&&Z.isEven();J++)N.iushrn(1),Z.iushrn(1);do{for(;N.isEven();)N.iushrn(1);for(;Z.isEven();)Z.iushrn(1);var re=N.cmp(Z);if(re<0){var ue=N;N=Z,Z=ue}else if(re===0||Z.cmpn(1)===0)break;N.isub(Z)}while(!0);return Z.iushln(J)},c.prototype.invm=function(F){return this.egcd(F).a.umod(F)},c.prototype.isEven=function(){return(this.words[0]&1)===0},c.prototype.isOdd=function(){return(this.words[0]&1)===1},c.prototype.andln=function(F){return this.words[0]&F},c.prototype.bincn=function(F){u(typeof F=="number");var N=F%26,Z=(F-N)/26,J=1<<N;if(this.length<=Z)return this._expand(Z+1),this.words[Z]|=J,this;for(var re=J,ue=Z;re!==0&&ue<this.length;ue++){var fe=this.words[ue]|0;fe+=re,re=fe>>>26,fe&=67108863,this.words[ue]=fe}return re!==0&&(this.words[ue]=re,this.length++),this},c.prototype.isZero=function(){return this.length===1&&this.words[0]===0},c.prototype.cmpn=function(F){var N=F<0;if(this.negative!==0&&!N)return-1;if(this.negative===0&&N)return 1;this.strip();var Z;if(this.length>1)Z=1;else{N&&(F=-F),u(F<=67108863,"Number is too big");var J=this.words[0]|0;Z=J===F?0:J<F?-1:1}return this.negative!==0?-Z|0:Z},c.prototype.cmp=function(F){if(this.negative!==0&&F.negative===0)return-1;if(this.negative===0&&F.negative!==0)return 1;var N=this.ucmp(F);return this.negative!==0?-N|0:N},c.prototype.ucmp=function(F){if(this.length>F.length)return 1;if(this.length<F.length)return-1;for(var N=0,Z=this.length-1;Z>=0;Z--){var J=this.words[Z]|0,re=F.words[Z]|0;if(J!==re){J<re?N=-1:J>re&&(N=1);break}}return N},c.prototype.gtn=function(F){return this.cmpn(F)===1},c.prototype.gt=function(F){return this.cmp(F)===1},c.prototype.gten=function(F){return this.cmpn(F)>=0},c.prototype.gte=function(F){return this.cmp(F)>=0},c.prototype.ltn=function(F){return this.cmpn(F)===-1},c.prototype.lt=function(F){return this.cmp(F)===-1},c.prototype.lten=function(F){return this.cmpn(F)<=0},c.prototype.lte=function(F){return this.cmp(F)<=0},c.prototype.eqn=function(F){return this.cmpn(F)===0},c.prototype.eq=function(F){return this.cmp(F)===0},c.red=function(F){return new O(F)},c.prototype.toRed=function(F){return u(!this.red,"Already a number in reduction context"),u(this.negative===0,"red works only with positives"),F.convertTo(this)._forceRed(F)},c.prototype.fromRed=function(){return u(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},c.prototype._forceRed=function(F){return this.red=F,this},c.prototype.forceRed=function(F){return u(!this.red,"Already a number in reduction context"),this._forceRed(F)},c.prototype.redAdd=function(F){return u(this.red,"redAdd works only with red numbers"),this.red.add(this,F)},c.prototype.redIAdd=function(F){return u(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,F)},c.prototype.redSub=function(F){return u(this.red,"redSub works only with red numbers"),this.red.sub(this,F)},c.prototype.redISub=function(F){return u(this.red,"redISub works only with red numbers"),this.red.isub(this,F)},c.prototype.redShl=function(F){return u(this.red,"redShl works only with red numbers"),this.red.shl(this,F)},c.prototype.redMul=function(F){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,F),this.red.mul(this,F)},c.prototype.redIMul=function(F){return u(this.red,"redMul works only with red numbers"),this.red._verify2(this,F),this.red.imul(this,F)},c.prototype.redSqr=function(){return u(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},c.prototype.redISqr=function(){return u(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},c.prototype.redSqrt=function(){return u(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},c.prototype.redInvm=function(){return u(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},c.prototype.redNeg=function(){return u(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},c.prototype.redPow=function(F){return u(this.red&&!F.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,F)};var g={k256:null,p224:null,p192:null,p25519:null};function C(B,F){this.name=B,this.p=new c(F,16),this.n=this.p.bitLength(),this.k=new c(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}C.prototype._tmp=function(){var F=new c(null);return F.words=new Array(Math.ceil(this.n/13)),F},C.prototype.ireduce=function(F){var N=F,Z;do this.split(N,this.tmp),N=this.imulK(N),N=N.iadd(this.tmp),Z=N.bitLength();while(Z>this.n);var J=Z<this.n?-1:N.ucmp(this.p);return J===0?(N.words[0]=0,N.length=1):J>0?N.isub(this.p):N.strip!==void 0?N.strip():N._strip(),N},C.prototype.split=function(F,N){F.iushrn(this.n,0,N)},C.prototype.imulK=function(F){return F.imul(this.k)};function A(){C.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}f(A,C),A.prototype.split=function(F,N){for(var Z=4194303,J=Math.min(F.length,9),re=0;re<J;re++)N.words[re]=F.words[re];if(N.length=J,F.length<=9){F.words[0]=0,F.length=1;return}var ue=F.words[9];for(N.words[N.length++]=ue&Z,re=10;re<F.length;re++){var fe=F.words[re]|0;F.words[re-10]=(fe&Z)<<4|ue>>>22,ue=fe}ue>>>=22,F.words[re-10]=ue,ue===0&&F.length>10?F.length-=10:F.length-=9},A.prototype.imulK=function(F){F.words[F.length]=0,F.words[F.length+1]=0,F.length+=2;for(var N=0,Z=0;Z<F.length;Z++){var J=F.words[Z]|0;N+=J*977,F.words[Z]=N&67108863,N=J*64+(N/67108864|0)}return F.words[F.length-1]===0&&(F.length--,F.words[F.length-1]===0&&F.length--),F};function P(){C.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}f(P,C);function D(){C.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}f(D,C);function z(){C.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}f(z,C),z.prototype.imulK=function(F){for(var N=0,Z=0;Z<F.length;Z++){var J=(F.words[Z]|0)*19+N,re=J&67108863;J>>>=26,F.words[Z]=re,N=J}return N!==0&&(F.words[F.length++]=N),F},c._prime=function(F){if(g[F])return g[F];var N;if(F==="k256")N=new A;else if(F==="p224")N=new P;else if(F==="p192")N=new D;else if(F==="p25519")N=new z;else throw new Error("Unknown prime "+F);return g[F]=N,N};function O(B){if(typeof B=="string"){var F=c._prime(B);this.m=F.p,this.prime=F}else u(B.gtn(1),"modulus must be greater than 1"),this.m=B,this.prime=null}O.prototype._verify1=function(F){u(F.negative===0,"red works only with positives"),u(F.red,"red works only with red numbers")},O.prototype._verify2=function(F,N){u((F.negative|N.negative)===0,"red works only with positives"),u(F.red&&F.red===N.red,"red works only with red numbers")},O.prototype.imod=function(F){return this.prime?this.prime.ireduce(F)._forceRed(this):F.umod(this.m)._forceRed(this)},O.prototype.neg=function(F){return F.isZero()?F.clone():this.m.sub(F)._forceRed(this)},O.prototype.add=function(F,N){this._verify2(F,N);var Z=F.add(N);return Z.cmp(this.m)>=0&&Z.isub(this.m),Z._forceRed(this)},O.prototype.iadd=function(F,N){this._verify2(F,N);var Z=F.iadd(N);return Z.cmp(this.m)>=0&&Z.isub(this.m),Z},O.prototype.sub=function(F,N){this._verify2(F,N);var Z=F.sub(N);return Z.cmpn(0)<0&&Z.iadd(this.m),Z._forceRed(this)},O.prototype.isub=function(F,N){this._verify2(F,N);var Z=F.isub(N);return Z.cmpn(0)<0&&Z.iadd(this.m),Z},O.prototype.shl=function(F,N){return this._verify1(F),this.imod(F.ushln(N))},O.prototype.imul=function(F,N){return this._verify2(F,N),this.imod(F.imul(N))},O.prototype.mul=function(F,N){return this._verify2(F,N),this.imod(F.mul(N))},O.prototype.isqr=function(F){return this.imul(F,F.clone())},O.prototype.sqr=function(F){return this.mul(F,F)},O.prototype.sqrt=function(F){if(F.isZero())return F.clone();var N=this.m.andln(3);if(u(N%2===1),N===3){var Z=this.m.add(new c(1)).iushrn(2);return this.pow(F,Z)}for(var J=this.m.subn(1),re=0;!J.isZero()&&J.andln(1)===0;)re++,J.iushrn(1);u(!J.isZero());var ue=new c(1).toRed(this),fe=ue.redNeg(),K=this.m.subn(1).iushrn(1),X=this.m.bitLength();for(X=new c(2*X*X).toRed(this);this.pow(X,K).cmp(fe)!==0;)X.redIAdd(fe);for(var ae=this.pow(X,J),oe=this.pow(F,J.addn(1).iushrn(1)),me=this.pow(F,J),xe=re;me.cmp(ue)!==0;){for(var ce=me,ie=0;ce.cmp(ue)!==0;ie++)ce=ce.redSqr();u(ie<xe);var ge=this.pow(ae,new c(1).iushln(xe-ie-1));oe=oe.redMul(ge),ae=ge.redSqr(),me=me.redMul(ae),xe=ie}return oe},O.prototype.invm=function(F){var N=F._invmp(this.m);return N.negative!==0?(N.negative=0,this.imod(N).redNeg()):this.imod(N)},O.prototype.pow=function(F,N){if(N.isZero())return new c(1).toRed(this);if(N.cmpn(1)===0)return F.clone();var Z=4,J=new Array(1<<Z);J[0]=new c(1).toRed(this),J[1]=F;for(var re=2;re<J.length;re++)J[re]=this.mul(J[re-1],F);var ue=J[0],fe=0,K=0,X=N.bitLength()%26;for(X===0&&(X=26),re=N.length-1;re>=0;re--){for(var ae=N.words[re],oe=X-1;oe>=0;oe--){var me=ae>>oe&1;if(ue!==J[0]&&(ue=this.sqr(ue)),me===0&&fe===0){K=0;continue}fe<<=1,fe|=me,K++,!(K!==Z&&(re!==0||oe!==0))&&(ue=this.mul(ue,J[fe]),K=0,fe=0)}X=26}return ue},O.prototype.convertTo=function(F){var N=F.umod(this.m);return N===F?N.clone():N},O.prototype.convertFrom=function(F){var N=F.clone();return N.red=null,N},c.mont=function(F){return new V(F)};function V(B){O.call(this,B),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new c(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}f(V,O),V.prototype.convertTo=function(F){return this.imod(F.ushln(this.shift))},V.prototype.convertFrom=function(F){var N=this.imod(F.mul(this.rinv));return N.red=null,N},V.prototype.imul=function(F,N){if(F.isZero()||N.isZero())return F.words[0]=0,F.length=1,F;var Z=F.imul(N),J=Z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),re=Z.isub(J).iushrn(this.shift),ue=re;return re.cmp(this.m)>=0?ue=re.isub(this.m):re.cmpn(0)<0&&(ue=re.iadd(this.m)),ue._forceRed(this)},V.prototype.mul=function(F,N){if(F.isZero()||N.isZero())return new c(0)._forceRed(this);var Z=F.mul(N),J=Z.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),re=Z.isub(J).iushrn(this.shift),ue=re;return re.cmp(this.m)>=0?ue=re.isub(this.m):re.cmpn(0)<0&&(ue=re.iadd(this.m)),ue._forceRed(this)},V.prototype.invm=function(F){var N=this.imod(F._invmp(this.m).mul(this.r2));return N._forceRed(this)}}(n,this)},6204:function(n){"use strict";n.exports=a;function a(o){var s,l,u,f=o.length,c=0;for(s=0;s<f;++s)c+=o[s].length;var h=new Array(c),v=0;for(s=0;s<f;++s){var d=o[s],_=d.length;for(l=0;l<_;++l){var T=h[v++]=new Array(_-1),p=0;for(u=0;u<_;++u)u!==l&&(T[p++]=d[u]);if(l&1){var M=T[1];T[1]=T[0],T[0]=M}}}return h}},6867:function(n,a,o){"use strict";n.exports=p;var s=o(1888),l=o(855),u=o(7150);function f(M,b){for(var w=0;w<M;++w)if(!(b[w]<=b[w+M]))return!0;return!1}function c(M,b,w,k){for(var x=0,E=0,S=0,g=M.length;S<g;++S){var C=M[S];if(!f(b,C)){for(var A=0;A<2*b;++A)w[x++]=C[A];k[E++]=S}}return E}function h(M,b,w,k){var x=M.length,E=b.length;if(!(x<=0||E<=0)){var S=M[0].length>>>1;if(!(S<=0)){var g,C=s.mallocDouble(2*S*x),A=s.mallocInt32(x);if(x=c(M,S,C,A),x>0){if(S===1&&k)l.init(x),g=l.sweepComplete(S,w,0,x,C,A,0,x,C,A);else{var P=s.mallocDouble(2*S*E),D=s.mallocInt32(E);E=c(b,S,P,D),E>0&&(l.init(x+E),S===1?g=l.sweepBipartite(S,w,0,x,C,A,0,E,P,D):g=u(S,w,k,x,C,A,E,P,D),s.free(P),s.free(D))}s.free(C),s.free(A)}return g}}}var v;function d(M,b){v.push([M,b])}function _(M){return v=[],h(M,M,d,!0),v}function T(M,b){return v=[],h(M,b,d,!1),v}function p(M,b,w){switch(arguments.length){case 1:return _(M);case 2:return typeof b=="function"?h(M,M,b,!0):T(M,b);case 3:return h(M,b,w,!1);default:throw new Error("box-intersect: Invalid arguments")}}},2455:function(n,a){"use strict";function o(){function u(h,v,d,_,T,p,M,b,w,k,x){for(var E=2*h,S=_,g=E*_;S<T;++S,g+=E){var C=p[v+g],A=p[v+g+h],P=M[S];e:for(var D=b,z=E*b;D<w;++D,z+=E){var O=k[v+z],V=k[v+z+h],B=x[D];if(!(V<C||A<O)){for(var F=v+1;F<h;++F){var N=p[F+g],Z=p[F+h+g],J=k[F+z],re=k[F+h+z];if(Z<J||re<N)continue e}var ue=d(P,B);if(ue!==void 0)return ue}}}}function f(h,v,d,_,T,p,M,b,w,k,x){for(var E=2*h,S=b,g=E*b;S<w;++S,g+=E){var C=k[v+g],A=k[v+g+h],P=x[S];e:for(var D=_,z=E*_;D<T;++D,z+=E){var O=p[v+z],V=p[v+z+h],B=M[D];if(!(A<O||V<C)){for(var F=v+1;F<h;++F){var N=p[F+z],Z=p[F+h+z],J=k[F+g],re=k[F+h+g];if(Z<J||re<N)continue e}var ue=d(B,P);if(ue!==void 0)return ue}}}}function c(h,v,d,_,T,p,M,b,w,k,x){return T-_>w-b?u(h,v,d,_,T,p,M,b,w,k,x):f(h,v,d,_,T,p,M,b,w,k,x)}return c}function s(){function u(d,_,T,p,M,b,w,k,x,E,S){for(var g=2*d,C=p,A=g*p;C<M;++C,A+=g){var P=b[_+A],D=b[_+A+d],z=w[C];e:for(var O=k,V=g*k;O<x;++O,V+=g){var B=E[_+V],F=S[O];if(!(B<=P||D<B)){for(var N=_+1;N<d;++N){var Z=b[N+A],J=b[N+d+A],re=E[N+V],ue=E[N+d+V];if(J<re||ue<Z)continue e}var fe=T(F,z);if(fe!==void 0)return fe}}}}function f(d,_,T,p,M,b,w,k,x,E,S){for(var g=2*d,C=p,A=g*p;C<M;++C,A+=g){var P=b[_+A],D=b[_+A+d],z=w[C];e:for(var O=k,V=g*k;O<x;++O,V+=g){var B=E[_+V],F=S[O];if(!(B<P||D<B)){for(var N=_+1;N<d;++N){var Z=b[N+A],J=b[N+d+A],re=E[N+V],ue=E[N+d+V];if(J<re||ue<Z)continue e}var fe=T(z,F);if(fe!==void 0)return fe}}}}function c(d,_,T,p,M,b,w,k,x,E,S){for(var g=2*d,C=k,A=g*k;C<x;++C,A+=g){var P=E[_+A],D=S[C];e:for(var z=p,O=g*p;z<M;++z,O+=g){var V=b[_+O],B=b[_+O+d],F=w[z];if(!(P<=V||B<P)){for(var N=_+1;N<d;++N){var Z=b[N+O],J=b[N+d+O],re=E[N+A],ue=E[N+d+A];if(J<re||ue<Z)continue e}var fe=T(D,F);if(fe!==void 0)return fe}}}}function h(d,_,T,p,M,b,w,k,x,E,S){for(var g=2*d,C=k,A=g*k;C<x;++C,A+=g){var P=E[_+A],D=S[C];e:for(var z=p,O=g*p;z<M;++z,O+=g){var V=b[_+O],B=b[_+O+d],F=w[z];if(!(P<V||B<P)){for(var N=_+1;N<d;++N){var Z=b[N+O],J=b[N+d+O],re=E[N+A],ue=E[N+d+A];if(J<re||ue<Z)continue e}var fe=T(F,D);if(fe!==void 0)return fe}}}}function v(d,_,T,p,M,b,w,k,x,E,S,g){return b-M>E-x?p?u(d,_,T,M,b,w,k,x,E,S,g):f(d,_,T,M,b,w,k,x,E,S,g):p?c(d,_,T,M,b,w,k,x,E,S,g):h(d,_,T,M,b,w,k,x,E,S,g)}return v}function l(u){return u?o():s()}a.partial=l(!1),a.full=l(!0)},7150:function(n,a,o){"use strict";n.exports=B;var s=o(1888),l=o(8828),u=o(2455),f=u.partial,c=u.full,h=o(855),v=o(3545),d=o(8105),_=128,T=1<<22,p=1<<22,M=d("!(lo>=p0)&&!(p1>=hi)"),b=d("lo===p0"),w=d("lo<p0"),k=d("hi<=p0"),x=d("lo<=p0&&p0<=hi"),E=d("lo<p0&&p0<=hi"),S=6,g=2,C=1024,A=s.mallocInt32(C),P=s.mallocDouble(C);function D(F,N){var Z=8*l.log2(N+1)*(F+1)|0,J=l.nextPow2(S*Z);A.length<J&&(s.free(A),A=s.mallocInt32(J));var re=l.nextPow2(g*Z);P.length<re&&(s.free(P),P=s.mallocDouble(re))}function z(F,N,Z,J,re,ue,fe,K,X){var ae=S*F;A[ae]=N,A[ae+1]=Z,A[ae+2]=J,A[ae+3]=re,A[ae+4]=ue,A[ae+5]=fe;var oe=g*F;P[oe]=K,P[oe+1]=X}function O(F,N,Z,J,re,ue,fe,K,X,ae,oe){var me=2*F,xe=X*me,ce=ae[xe+N];e:for(var ie=re,ge=re*me;ie<ue;++ie,ge+=me){var le=fe[ge+N],we=fe[ge+N+F];if(!(ce<le||we<ce)&&!(J&&ce===le)){for(var Re=K[ie],qe=N+1;qe<F;++qe){var le=fe[ge+qe],we=fe[ge+qe+F],et=ae[xe+qe],Pe=ae[xe+qe+F];if(we<et||Pe<le)continue e}var Ie;if(J?Ie=Z(oe,Re):Ie=Z(Re,oe),Ie!==void 0)return Ie}}}function V(F,N,Z,J,re,ue,fe,K,X,ae){var oe=2*F,me=K*oe,xe=X[me+N];e:for(var ce=J,ie=J*oe;ce<re;++ce,ie+=oe){var ge=fe[ce];if(ge!==ae){var le=ue[ie+N],we=ue[ie+N+F];if(!(xe<le||we<xe)){for(var Re=N+1;Re<F;++Re){var le=ue[ie+Re],we=ue[ie+Re+F],qe=X[me+Re],et=X[me+Re+F];if(we<qe||et<le)continue e}var Pe=Z(ge,ae);if(Pe!==void 0)return Pe}}}}function B(F,N,Z,J,re,ue,fe,K,X){D(F,J+fe);var ae=0,oe=2*F,me;for(z(ae++,0,0,J,0,fe,Z?16:0,-1/0,1/0),Z||z(ae++,0,0,fe,0,J,1,-1/0,1/0);ae>0;){ae-=1;var xe=ae*S,ce=A[xe],ie=A[xe+1],ge=A[xe+2],le=A[xe+3],we=A[xe+4],Re=A[xe+5],qe=ae*g,et=P[qe],Pe=P[qe+1],Ie=Re&1,ut=!!(Re&16),ft=re,je=ue,_t=K,Bt=X;if(Ie&&(ft=K,je=X,_t=re,Bt=ue),!(Re&2&&(ge=w(F,ce,ie,ge,ft,je,Pe),ie>=ge))&&!(Re&4&&(ie=k(F,ce,ie,ge,ft,je,et),ie>=ge))){var Lt=ge-ie,Me=we-le;if(ut){if(F*Lt*(Lt+Me)<p){if(me=h.scanComplete(F,ce,N,ie,ge,ft,je,le,we,_t,Bt),me!==void 0)return me;continue}}else if(F*Math.min(Lt,Me)<_){if(me=f(F,ce,N,Ie,ie,ge,ft,je,le,we,_t,Bt),me!==void 0)return me;continue}else if(F*Lt*Me<T){if(me=h.scanBipartite(F,ce,N,Ie,ie,ge,ft,je,le,we,_t,Bt),me!==void 0)return me;continue}var Ze=M(F,ce,ie,ge,ft,je,et,Pe);if(ie<Ze)if(F*(Ze-ie)<_){if(me=c(F,ce+1,N,ie,Ze,ft,je,le,we,_t,Bt),me!==void 0)return me}else if(ce===F-2){if(Ie?me=h.sweepBipartite(F,N,le,we,_t,Bt,ie,Ze,ft,je):me=h.sweepBipartite(F,N,ie,Ze,ft,je,le,we,_t,Bt),me!==void 0)return me}else z(ae++,ce+1,ie,Ze,le,we,Ie,-1/0,1/0),z(ae++,ce+1,le,we,ie,Ze,Ie^1,-1/0,1/0);if(Ze<ge){var dt=v(F,ce,le,we,_t,Bt),it=_t[oe*dt+ce],vt=b(F,ce,dt,we,_t,Bt,it);if(vt<we&&z(ae++,ce,Ze,ge,vt,we,(Ie|4)+(ut?16:0),it,Pe),le<dt&&z(ae++,ce,Ze,ge,le,dt,(Ie|2)+(ut?16:0),et,it),dt+1===vt){if(ut?me=V(F,ce,N,Ze,ge,ft,je,dt,_t,Bt[dt]):me=O(F,ce,N,Ie,Ze,ge,ft,je,dt,_t,Bt[dt]),me!==void 0)return me}else if(dt<vt){var rt;if(ut){if(rt=x(F,ce,Ze,ge,ft,je,it),Ze<rt){var We=b(F,ce,Ze,rt,ft,je,it);if(ce===F-2){if(Ze<We&&(me=h.sweepComplete(F,N,Ze,We,ft,je,dt,vt,_t,Bt),me!==void 0)||We<rt&&(me=h.sweepBipartite(F,N,We,rt,ft,je,dt,vt,_t,Bt),me!==void 0))return me}else Ze<We&&z(ae++,ce+1,Ze,We,dt,vt,16,-1/0,1/0),We<rt&&(z(ae++,ce+1,We,rt,dt,vt,0,-1/0,1/0),z(ae++,ce+1,dt,vt,We,rt,1,-1/0,1/0))}}else Ie?rt=E(F,ce,Ze,ge,ft,je,it):rt=x(F,ce,Ze,ge,ft,je,it),Ze<rt&&(ce===F-2?Ie?me=h.sweepBipartite(F,N,dt,vt,_t,Bt,Ze,rt,ft,je):me=h.sweepBipartite(F,N,Ze,rt,ft,je,dt,vt,_t,Bt):(z(ae++,ce+1,Ze,rt,dt,vt,Ie,-1/0,1/0),z(ae++,ce+1,dt,vt,Ze,rt,Ie^1,-1/0,1/0)))}}}}}},3545:function(n,a,o){"use strict";n.exports=c;var s=o(8105),l=s("lo<p0"),u=8;function f(h,v,d,_,T,p){for(var M=2*h,b=M*(d+1)+v,w=d+1;w<_;++w,b+=M)for(var k=T[b],x=w,E=M*(w-1);x>d&&T[E+v]>k;--x,E-=M){for(var S=E,g=E+M,C=0;C<M;++C,++S,++g){var A=T[S];T[S]=T[g],T[g]=A}var P=p[x];p[x]=p[x-1],p[x-1]=P}}function c(h,v,d,_,T,p){if(_<=d+1)return d;for(var M=d,b=_,w=_+d>>>1,k=2*h,x=w,E=T[k*w+v];M<b;){if(b-M<u){f(h,v,M,b,T,p),E=T[k*w+v];break}var S=b-M,g=Math.random()*S+M|0,C=T[k*g+v],A=Math.random()*S+M|0,P=T[k*A+v],D=Math.random()*S+M|0,z=T[k*D+v];C<=P?z>=P?(x=A,E=P):C>=z?(x=g,E=C):(x=D,E=z):P>=z?(x=A,E=P):z>=C?(x=g,E=C):(x=D,E=z);for(var B=k*(b-1),F=k*x,O=0;O<k;++O,++B,++F){var V=T[B];T[B]=T[F],T[F]=V}var N=p[b-1];p[b-1]=p[x],p[x]=N,x=l(h,v,M,b-1,T,p,E);for(var B=k*(b-1),F=k*x,O=0;O<k;++O,++B,++F){var V=T[B];T[B]=T[F],T[F]=V}var N=p[b-1];if(p[b-1]=p[x],p[x]=N,w<x){for(b=x-1;M<b&&T[k*(b-1)+v]===E;)b-=1;b+=1}else if(x<w)for(M=x+1;M<b&&T[k*M+v]===E;)M+=1;else break}return l(h,v,d,w,T,p,T[k*w+v])}},8105:function(n){"use strict";n.exports=o;var a={"lo===p0":s,"lo<p0":l,"lo<=p0":u,"hi<=p0":f,"lo<p0&&p0<=hi":h,"lo<=p0&&p0<=hi":c,"!(lo>=p0)&&!(p1>=hi)":v};function o(d){return a[d]}function s(d,_,T,p,M,b,w){for(var k=2*d,x=k*T,E=x,S=T,g=_,C=d+_,A=T;p>A;++A,x+=k){var P=M[x+g];if(P===w)if(S===A)S+=1,E+=k;else{for(var D=0;k>D;++D){var z=M[x+D];M[x+D]=M[E],M[E++]=z}var O=b[A];b[A]=b[S],b[S++]=O}}return S}function l(d,_,T,p,M,b,w){for(var k=2*d,x=k*T,E=x,S=T,g=_,C=d+_,A=T;p>A;++A,x+=k){var P=M[x+g];if(P<w)if(S===A)S+=1,E+=k;else{for(var D=0;k>D;++D){var z=M[x+D];M[x+D]=M[E],M[E++]=z}var O=b[A];b[A]=b[S],b[S++]=O}}return S}function u(d,_,T,p,M,b,w){for(var k=2*d,x=k*T,E=x,S=T,g=_,C=d+_,A=T;p>A;++A,x+=k){var P=M[x+C];if(P<=w)if(S===A)S+=1,E+=k;else{for(var D=0;k>D;++D){var z=M[x+D];M[x+D]=M[E],M[E++]=z}var O=b[A];b[A]=b[S],b[S++]=O}}return S}function f(d,_,T,p,M,b,w){for(var k=2*d,x=k*T,E=x,S=T,g=_,C=d+_,A=T;p>A;++A,x+=k){var P=M[x+C];if(P<=w)if(S===A)S+=1,E+=k;else{for(var D=0;k>D;++D){var z=M[x+D];M[x+D]=M[E],M[E++]=z}var O=b[A];b[A]=b[S],b[S++]=O}}return S}function c(d,_,T,p,M,b,w){for(var k=2*d,x=k*T,E=x,S=T,g=_,C=d+_,A=T;p>A;++A,x+=k){var P=M[x+g],D=M[x+C];if(P<=w&&w<=D)if(S===A)S+=1,E+=k;else{for(var z=0;k>z;++z){var O=M[x+z];M[x+z]=M[E],M[E++]=O}var V=b[A];b[A]=b[S],b[S++]=V}}return S}function h(d,_,T,p,M,b,w){for(var k=2*d,x=k*T,E=x,S=T,g=_,C=d+_,A=T;p>A;++A,x+=k){var P=M[x+g],D=M[x+C];if(P<w&&w<=D)if(S===A)S+=1,E+=k;else{for(var z=0;k>z;++z){var O=M[x+z];M[x+z]=M[E],M[E++]=O}var V=b[A];b[A]=b[S],b[S++]=V}}return S}function v(d,_,T,p,M,b,w,k){for(var x=2*d,E=x*T,S=E,g=T,C=_,A=d+_,P=T;p>P;++P,E+=x){var D=M[E+C],z=M[E+A];if(!(D>=w)&&!(k>=z))if(g===P)g+=1,S+=x;else{for(var O=0;x>O;++O){var V=M[E+O];M[E+O]=M[S],M[S++]=V}var B=b[P];b[P]=b[g],b[g++]=B}}return g}},1811:function(n){"use strict";n.exports=o;var a=32;function o(_,T){T<=4*a?s(0,T-1,_):d(0,T-1,_)}function s(_,T,p){for(var M=2*(_+1),b=_+1;b<=T;++b){for(var w=p[M++],k=p[M++],x=b,E=M-2;x-- >_;){var S=p[E-2],g=p[E-1];if(S<w)break;if(S===w&&g<k)break;p[E]=S,p[E+1]=g,E-=2}p[E]=w,p[E+1]=k}}function l(_,T,p){_*=2,T*=2;var M=p[_],b=p[_+1];p[_]=p[T],p[_+1]=p[T+1],p[T]=M,p[T+1]=b}function u(_,T,p){_*=2,T*=2,p[_]=p[T],p[_+1]=p[T+1]}function f(_,T,p,M){_*=2,T*=2,p*=2;var b=M[_],w=M[_+1];M[_]=M[T],M[_+1]=M[T+1],M[T]=M[p],M[T+1]=M[p+1],M[p]=b,M[p+1]=w}function c(_,T,p,M,b){_*=2,T*=2,b[_]=b[T],b[T]=p,b[_+1]=b[T+1],b[T+1]=M}function h(_,T,p){_*=2,T*=2;var M=p[_],b=p[T];return M<b?!1:M===b?p[_+1]>p[T+1]:!0}function v(_,T,p,M){_*=2;var b=M[_];return b<T?!0:b===T?M[_+1]<p:!1}function d(_,T,p){var M=(T-_+1)/6|0,b=_+M,w=T-M,k=_+T>>1,x=k-M,E=k+M,S=b,g=x,C=k,A=E,P=w,D=_+1,z=T-1,O=0;h(S,g,p)&&(O=S,S=g,g=O),h(A,P,p)&&(O=A,A=P,P=O),h(S,C,p)&&(O=S,S=C,C=O),h(g,C,p)&&(O=g,g=C,C=O),h(S,A,p)&&(O=S,S=A,A=O),h(C,A,p)&&(O=C,C=A,A=O),h(g,P,p)&&(O=g,g=P,P=O),h(g,C,p)&&(O=g,g=C,C=O),h(A,P,p)&&(O=A,A=P,P=O);for(var V=p[2*g],B=p[2*g+1],F=p[2*A],N=p[2*A+1],Z=2*S,J=2*C,re=2*P,ue=2*b,fe=2*k,K=2*w,X=0;X<2;++X){var ae=p[Z+X],oe=p[J+X],me=p[re+X];p[ue+X]=ae,p[fe+X]=oe,p[K+X]=me}u(x,_,p),u(E,T,p);for(var xe=D;xe<=z;++xe)if(v(xe,V,B,p))xe!==D&&l(xe,D,p),++D;else if(!v(xe,F,N,p))for(;;)if(v(z,F,N,p)){v(z,V,B,p)?(f(xe,D,z,p),++D,--z):(l(xe,z,p),--z);break}else{if(--z<xe)break;continue}c(_,D-1,V,B,p),c(T,z+1,F,N,p),D-2-_<=a?s(_,D-2,p):d(_,D-2,p),T-(z+2)<=a?s(z+2,T,p):d(z+2,T,p),z-D<=a?s(D,z,p):d(D,z,p)}},855:function(n,a,o){"use strict";n.exports={init:b,sweepBipartite:x,sweepComplete:E,scanBipartite:S,scanComplete:g};var s=o(1888),l=o(8828),u=o(1811),f=1<<28,c=1024,h=s.mallocInt32(c),v=s.mallocInt32(c),d=s.mallocInt32(c),_=s.mallocInt32(c),T=s.mallocInt32(c),p=s.mallocInt32(c),M=s.mallocDouble(c*8);function b(C){var A=l.nextPow2(C);h.length<A&&(s.free(h),h=s.mallocInt32(A)),v.length<A&&(s.free(v),v=s.mallocInt32(A)),d.length<A&&(s.free(d),d=s.mallocInt32(A)),_.length<A&&(s.free(_),_=s.mallocInt32(A)),T.length<A&&(s.free(T),T=s.mallocInt32(A)),p.length<A&&(s.free(p),p=s.mallocInt32(A));var P=8*A;M.length<P&&(s.free(M),M=s.mallocDouble(P))}function w(C,A,P,D){var z=A[D],O=C[P-1];C[z]=O,A[O]=z}function k(C,A,P,D){C[P]=D,A[D]=P}function x(C,A,P,D,z,O,V,B,F,N){for(var Z=0,J=2*C,re=C-1,ue=J-1,fe=P;fe<D;++fe){var K=O[fe],X=J*fe;M[Z++]=z[X+re],M[Z++]=-(K+1),M[Z++]=z[X+ue],M[Z++]=K}for(var fe=V;fe<B;++fe){var K=N[fe]+f,ae=J*fe;M[Z++]=F[ae+re],M[Z++]=-K,M[Z++]=F[ae+ue],M[Z++]=K}var oe=Z>>>1;u(M,oe);for(var me=0,xe=0,fe=0;fe<oe;++fe){var ce=M[2*fe+1]|0;if(ce>=f)ce=ce-f|0,w(d,_,xe--,ce);else if(ce>=0)w(h,v,me--,ce);else if(ce<=-f){ce=-ce-f|0;for(var ie=0;ie<me;++ie){var ge=A(h[ie],ce);if(ge!==void 0)return ge}k(d,_,xe++,ce)}else{ce=-ce-1|0;for(var ie=0;ie<xe;++ie){var ge=A(ce,d[ie]);if(ge!==void 0)return ge}k(h,v,me++,ce)}}}function E(C,A,P,D,z,O,V,B,F,N){for(var Z=0,J=2*C,re=C-1,ue=J-1,fe=P;fe<D;++fe){var K=O[fe]+1<<1,X=J*fe;M[Z++]=z[X+re],M[Z++]=-K,M[Z++]=z[X+ue],M[Z++]=K}for(var fe=V;fe<B;++fe){var K=N[fe]+1<<1,ae=J*fe;M[Z++]=F[ae+re],M[Z++]=-K|1,M[Z++]=F[ae+ue],M[Z++]=K|1}var oe=Z>>>1;u(M,oe);for(var me=0,xe=0,ce=0,fe=0;fe<oe;++fe){var ie=M[2*fe+1]|0,ge=ie&1;if(fe<oe-1&&ie>>1===M[2*fe+3]>>1&&(ge=2,fe+=1),ie<0){for(var le=-(ie>>1)-1,we=0;we<ce;++we){var Re=A(T[we],le);if(Re!==void 0)return Re}if(ge!==0)for(var we=0;we<me;++we){var Re=A(h[we],le);if(Re!==void 0)return Re}if(ge!==1)for(var we=0;we<xe;++we){var Re=A(d[we],le);if(Re!==void 0)return Re}ge===0?k(h,v,me++,le):ge===1?k(d,_,xe++,le):ge===2&&k(T,p,ce++,le)}else{var le=(ie>>1)-1;ge===0?w(h,v,me--,le):ge===1?w(d,_,xe--,le):ge===2&&w(T,p,ce--,le)}}}function S(C,A,P,D,z,O,V,B,F,N,Z,J){var re=0,ue=2*C,fe=A,K=A+C,X=1,ae=1;D?ae=f:X=f;for(var oe=z;oe<O;++oe){var me=oe+X,xe=ue*oe;M[re++]=V[xe+fe],M[re++]=-me,M[re++]=V[xe+K],M[re++]=me}for(var oe=F;oe<N;++oe){var me=oe+ae,ce=ue*oe;M[re++]=Z[ce+fe],M[re++]=-me}var ie=re>>>1;u(M,ie);for(var ge=0,oe=0;oe<ie;++oe){var le=M[2*oe+1]|0;if(le<0){var me=-le,we=!1;if(me>=f?(we=!D,me-=f):(we=!!D,me-=1),we)k(h,v,ge++,me);else{var Re=J[me],qe=ue*me,et=Z[qe+A+1],Pe=Z[qe+A+1+C];e:for(var Ie=0;Ie<ge;++Ie){var ut=h[Ie],ft=ue*ut;if(!(Pe<V[ft+A+1]||V[ft+A+1+C]<et)){for(var je=A+2;je<C;++je)if(Z[qe+je+C]<V[ft+je]||V[ft+je+C]<Z[qe+je])continue e;var _t=B[ut],Bt;if(D?Bt=P(Re,_t):Bt=P(_t,Re),Bt!==void 0)return Bt}}}}else w(h,v,ge--,le-X)}}function g(C,A,P,D,z,O,V,B,F,N,Z){for(var J=0,re=2*C,ue=A,fe=A+C,K=D;K<z;++K){var X=K+f,ae=re*K;M[J++]=O[ae+ue],M[J++]=-X,M[J++]=O[ae+fe],M[J++]=X}for(var K=B;K<F;++K){var X=K+1,oe=re*K;M[J++]=N[oe+ue],M[J++]=-X}var me=J>>>1;u(M,me);for(var xe=0,K=0;K<me;++K){var ce=M[2*K+1]|0;if(ce<0){var X=-ce;if(X>=f)h[xe++]=X-f;else{X-=1;var ie=Z[X],ge=re*X,le=N[ge+A+1],we=N[ge+A+1+C];e:for(var Re=0;Re<xe;++Re){var qe=h[Re],et=V[qe];if(et===ie)break;var Pe=re*qe;if(!(we<O[Pe+A+1]||O[Pe+A+1+C]<le)){for(var Ie=A+2;Ie<C;++Ie)if(N[ge+Ie+C]<O[Pe+Ie]||O[Pe+Ie+C]<N[ge+Ie])continue e;var ut=P(et,ie);if(ut!==void 0)return ut}}}}else{for(var X=ce-f,Re=xe-1;Re>=0;--Re)if(h[Re]===X){for(var Ie=Re+1;Ie<xe;++Ie)h[Ie-1]=h[Ie];break}--xe}}}},2538:function(n,a,o){"use strict";var s=o(8902),l=o(5542),u=o(2272),f=o(5023);n.exports=_;function c(T){return[Math.min(T[0],T[1]),Math.max(T[0],T[1])]}function h(T,p){return T[0]-p[0]||T[1]-p[1]}function v(T){return T.map(c).sort(h)}function d(T,p,M){return p in T?T[p]:M}function _(T,p,M){Array.isArray(p)?(M=M||{},p=p||[]):(M=p||{},p=[]);var b=!!d(M,"delaunay",!0),w=!!d(M,"interior",!0),k=!!d(M,"exterior",!0),x=!!d(M,"infinity",!1);if(!w&&!k||T.length===0)return[];var E=s(T,p);if(b||w!==k||x){for(var S=l(T.length,v(p)),g=0;g<E.length;++g){var C=E[g];S.addTriangle(C[0],C[1],C[2])}return b&&u(T,S),k?w?x?f(S,0,x):S.cells():f(S,1,x):f(S,-1)}else return E}},2272:function(n,a,o){"use strict";var s=o(2646)[4],l=o(2478);n.exports=f;function u(c,h,v,d,_,T){var p=h.opposite(d,_);if(!(p<0)){if(_<d){var M=d;d=_,_=M,M=T,T=p,p=M}h.isConstraint(d,_)||s(c[d],c[_],c[T],c[p])<0&&v.push(d,_)}}function f(c,h){for(var v=[],d=c.length,_=h.stars,T=0;T<d;++T)for(var p=_[T],M=1;M<p.length;M+=2){var b=p[M];if(!(b<T)&&!h.isConstraint(T,b)){for(var w=p[M-1],k=-1,x=1;x<p.length;x+=2)if(p[x-1]===b){k=p[x];break}k<0||s(c[T],c[b],c[w],c[k])<0&&v.push(T,b)}}for(;v.length>0;){for(var b=v.pop(),T=v.pop(),w=-1,k=-1,p=_[T],E=1;E<p.length;E+=2){var S=p[E-1],g=p[E];S===b?k=g:g===b&&(w=S)}w<0||k<0||s(c[T],c[b],c[w],c[k])>=0||(h.flip(T,b),u(c,h,v,w,T,k),u(c,h,v,T,k,w),u(c,h,v,k,b,w),u(c,h,v,b,w,k))}}},5023:function(n,a,o){"use strict";var s=o(2478);n.exports=v;function l(d,_,T,p,M,b,w){this.cells=d,this.neighbor=_,this.flags=p,this.constraint=T,this.active=M,this.next=b,this.boundary=w}var u=l.prototype;function f(d,_){return d[0]-_[0]||d[1]-_[1]||d[2]-_[2]}u.locate=function(){var d=[0,0,0];return function(_,T,p){var M=_,b=T,w=p;return T<p?T<_&&(M=T,b=p,w=_):p<_&&(M=p,b=_,w=T),M<0?-1:(d[0]=M,d[1]=b,d[2]=w,s.eq(this.cells,d,f))}}();function c(d,_){for(var T=d.cells(),p=T.length,M=0;M<p;++M){var b=T[M],w=b[0],k=b[1],x=b[2];k<x?k<w&&(b[0]=k,b[1]=x,b[2]=w):x<w&&(b[0]=x,b[1]=w,b[2]=k)}T.sort(f);for(var E=new Array(p),M=0;M<E.length;++M)E[M]=0;var S=[],g=[],C=new Array(3*p),A=new Array(3*p),P=null;_&&(P=[]);for(var D=new l(T,C,A,E,S,g,P),M=0;M<p;++M)for(var b=T[M],z=0;z<3;++z){var w=b[z],k=b[(z+1)%3],O=C[3*M+z]=D.locate(k,w,d.opposite(k,w)),V=A[3*M+z]=d.isConstraint(w,k);O<0&&(V?g.push(M):(S.push(M),E[M]=1),_&&P.push([k,w,-1]))}return D}function h(d,_,T){for(var p=0,M=0;M<d.length;++M)_[M]===T&&(d[p++]=d[M]);return d.length=p,d}function v(d,_,T){var p=c(d,T);if(_===0)return T?p.cells.concat(p.boundary):p.cells;for(var M=1,b=p.active,w=p.next,k=p.flags,x=p.cells,E=p.constraint,S=p.neighbor;b.length>0||w.length>0;){for(;b.length>0;){var g=b.pop();if(k[g]!==-M){k[g]=M;for(var C=x[g],A=0;A<3;++A){var P=S[3*g+A];P>=0&&k[P]===0&&(E[3*g+A]?w.push(P):(b.push(P),k[P]=M))}}}var D=w;w=b,b=D,w.length=0,M=-M}var z=h(x,k,_);return T?z.concat(p.boundary):z}},8902:function(n,a,o){"use strict";var s=o(2478),l=o(3250)[3],u=0,f=1,c=2;n.exports=w;function h(k,x,E,S,g){this.a=k,this.b=x,this.idx=E,this.lowerIds=S,this.upperIds=g}function v(k,x,E,S){this.a=k,this.b=x,this.type=E,this.idx=S}function d(k,x){var E=k.a[0]-x.a[0]||k.a[1]-x.a[1]||k.type-x.type;return E||k.type!==u&&(E=l(k.a,k.b,x.b),E)?E:k.idx-x.idx}function _(k,x){return l(k.a,k.b,x)}function T(k,x,E,S,g){for(var C=s.lt(x,S,_),A=s.gt(x,S,_),P=C;P<A;++P){for(var D=x[P],z=D.lowerIds,V=z.length;V>1&&l(E[z[V-2]],E[z[V-1]],S)>0;)k.push([z[V-1],z[V-2],g]),V-=1;z.length=V,z.push(g);for(var O=D.upperIds,V=O.length;V>1&&l(E[O[V-2]],E[O[V-1]],S)<0;)k.push([O[V-2],O[V-1],g]),V-=1;O.length=V,O.push(g)}}function p(k,x){var E;return k.a[0]<x.a[0]?E=l(k.a,k.b,x.a):E=l(x.b,x.a,k.a),E||(x.b[0]<k.b[0]?E=l(k.a,k.b,x.b):E=l(x.b,x.a,k.b),E||k.idx-x.idx)}function M(k,x,E){var S=s.le(k,E,p),g=k[S],C=g.upperIds,A=C[C.length-1];g.upperIds=[A],k.splice(S+1,0,new h(E.a,E.b,E.idx,[A],C))}function b(k,x,E){var S=E.a;E.a=E.b,E.b=S;var g=s.eq(k,E,p),C=k[g],A=k[g-1];A.upperIds=C.upperIds,k.splice(g,1)}function w(k,x){for(var E=k.length,S=x.length,g=[],C=0;C<E;++C)g.push(new v(k[C],null,u,C));for(var C=0;C<S;++C){var A=x[C],P=k[A[0]],D=k[A[1]];P[0]<D[0]?g.push(new v(P,D,c,C),new v(D,P,f,C)):P[0]>D[0]&&g.push(new v(D,P,c,C),new v(P,D,f,C))}g.sort(d);for(var z=g[0].a[0]-(1+Math.abs(g[0].a[0]))*Math.pow(2,-52),O=[new h([z,1],[z,0],-1,[],[],[],[])],V=[],C=0,B=g.length;C<B;++C){var F=g[C],N=F.type;N===u?T(V,O,k,F.a,F.idx):N===c?M(O,k,F):b(O,k,F)}return V}},5542:function(n,a,o){"use strict";var s=o(2478);n.exports=c;function l(h,v){this.stars=h,this.edges=v}var u=l.prototype;function f(h,v,d){for(var _=1,T=h.length;_<T;_+=2)if(h[_-1]===v&&h[_]===d){h[_-1]=h[T-2],h[_]=h[T-1],h.length=T-2;return}}u.isConstraint=function(){var h=[0,0];function v(d,_){return d[0]-_[0]||d[1]-_[1]}return function(d,_){return h[0]=Math.min(d,_),h[1]=Math.max(d,_),s.eq(this.edges,h,v)>=0}}(),u.removeTriangle=function(h,v,d){var _=this.stars;f(_[h],v,d),f(_[v],d,h),f(_[d],h,v)},u.addTriangle=function(h,v,d){var _=this.stars;_[h].push(v,d),_[v].push(d,h),_[d].push(h,v)},u.opposite=function(h,v){for(var d=this.stars[v],_=1,T=d.length;_<T;_+=2)if(d[_]===h)return d[_-1];return-1},u.flip=function(h,v){var d=this.opposite(h,v),_=this.opposite(v,h);this.removeTriangle(h,v,d),this.removeTriangle(v,h,_),this.addTriangle(h,_,d),this.addTriangle(v,d,_)},u.edges=function(){for(var h=this.stars,v=[],d=0,_=h.length;d<_;++d)for(var T=h[d],p=0,M=T.length;p<M;p+=2)v.push([T[p],T[p+1]]);return v},u.cells=function(){for(var h=this.stars,v=[],d=0,_=h.length;d<_;++d)for(var T=h[d],p=0,M=T.length;p<M;p+=2){var b=T[p],w=T[p+1];d<Math.min(b,w)&&v.push([d,b,w])}return v};function c(h,v){for(var d=new Array(h),_=0;_<h;++_)d[_]=[];return new l(d,v)}},2419:function(n){"use strict";n.exports=a;function a(o){for(var s=1,l=1;l<o.length;++l)for(var u=0;u<l;++u)if(o[l]<o[u])s=-s;else if(o[u]===o[l])return 0;return s}},3628:function(n,a,o){"use strict";var s=o(1338),l=o(727);function u(h,v){for(var d=0,_=h.length,T=0;T<_;++T)d+=h[T]*v[T];return d}function f(h){var v=h.length;if(v===0)return[];var d=h[0].length,_=s([h.length+1,h.length+1],1),T=s([h.length+1],1);_[v][v]=0;for(var p=0;p<v;++p){for(var M=0;M<=p;++M)_[M][p]=_[p][M]=2*u(h[p],h[M]);T[p]=u(h[p],h[p])}for(var b=l(_,T),w=0,k=b[v+1],p=0;p<k.length;++p)w+=k[p];for(var x=new Array(v),p=0;p<v;++p){for(var k=b[p],E=0,M=0;M<k.length;++M)E+=k[M];x[p]=E/w}return x}function c(h){if(h.length===0)return[];for(var v=h[0].length,d=s([v]),_=f(h),T=0;T<h.length;++T)for(var p=0;p<v;++p)d[p]+=h[T][p]*_[T];return d}c.barycenetric=f,n.exports=c},6037:function(n,a,o){n.exports=l;var s=o(3628);function l(u){for(var f=s(u),c=0,h=0;h<u.length;++h)for(var v=u[h],d=0;d<f.length;++d)c+=Math.pow(v[d]-f[d],2);return Math.sqrt(c/u.length)}},332:function(n,a,o){"use strict";n.exports=P;var s=o(1755),l=o(6867),u=o(1125),f=o(7842),c=o(1318),h=o(946),v=o(5838),d=o(1278),_=o(3637);function T(D){var z=h(D);return[d(z,-1/0),d(z,1/0)]}function p(D,z){for(var O=new Array(z.length),V=0;V<z.length;++V){var B=z[V],F=D[B[0]],N=D[B[1]];O[V]=[d(Math.min(F[0],N[0]),-1/0),d(Math.min(F[1],N[1]),-1/0),d(Math.max(F[0],N[0]),1/0),d(Math.max(F[1],N[1]),1/0)]}return O}function M(D){for(var z=new Array(D.length),O=0;O<D.length;++O){var V=D[O];z[O]=[d(V[0],-1/0),d(V[1],-1/0),d(V[0],1/0),d(V[1],1/0)]}return z}function b(D,z,O){var V=[];return l(O,function(B,F){var N=z[B],Z=z[F];if(!(N[0]===Z[0]||N[0]===Z[1]||N[1]===Z[0]||N[1]===Z[1])){var J=D[N[0]],re=D[N[1]],ue=D[Z[0]],fe=D[Z[1]];u(J,re,ue,fe)&&V.push([B,F])}}),V}function w(D,z,O,V){var B=[];return l(O,V,function(F,N){var Z=z[F];if(!(Z[0]===N||Z[1]===N)){var J=D[N],re=D[Z[0]],ue=D[Z[1]];u(re,ue,J,J)&&B.push([F,N])}}),B}function k(D,z,O,V,B){var F,N,Z=D.map(function(qe){return[f(qe[0]),f(qe[1])]});for(F=0;F<O.length;++F){var J=O[F];N=J[0];var re=J[1],ue=z[N],fe=z[re],K=_(v(D[ue[0]]),v(D[ue[1]]),v(D[fe[0]]),v(D[fe[1]]));if(K){var X=D.length;D.push([h(K[0]),h(K[1])]),Z.push(K),V.push([N,X],[re,X])}}for(V.sort(function(qe,et){if(qe[0]!==et[0])return qe[0]-et[0];var Pe=Z[qe[1]],Ie=Z[et[1]];return c(Pe[0],Ie[0])||c(Pe[1],Ie[1])}),F=V.length-1;F>=0;--F){var ae=V[F];N=ae[0];var oe=z[N],me=oe[0],xe=oe[1],ce=D[me],ie=D[xe];if((ce[0]-ie[0]||ce[1]-ie[1])<0){var ge=me;me=xe,xe=ge}oe[0]=me;var le=oe[1]=ae[1],we;for(B&&(we=oe[2]);F>0&&V[F-1][0]===N;){var ae=V[--F],Re=ae[1];B?z.push([le,Re,we]):z.push([le,Re]),le=Re}B?z.push([le,xe,we]):z.push([le,xe])}return Z}function x(D,z,O){for(var V=z.length,B=new s(V),F=[],N=0;N<z.length;++N){var Z=z[N],J=T(Z[0]),re=T(Z[1]);F.push([d(J[0],-1/0),d(re[0],-1/0),d(J[1],1/0),d(re[1],1/0)])}l(F,function(ae,oe){B.link(ae,oe)});for(var ue=!0,fe=new Array(V),N=0;N<V;++N){var K=B.find(N);K!==N&&(ue=!1,D[K]=[Math.min(D[N][0],D[K][0]),Math.min(D[N][1],D[K][1])])}if(ue)return null;for(var X=0,N=0;N<V;++N){var K=B.find(N);K===N?(fe[N]=X,D[X++]=D[N]):fe[N]=-1}D.length=X;for(var N=0;N<V;++N)fe[N]<0&&(fe[N]=fe[B.find(N)]);return fe}function E(D,z){return D[0]-z[0]||D[1]-z[1]}function S(D,z){var O=D[0]-z[0]||D[1]-z[1];return O||(D[2]<z[2]?-1:D[2]>z[2]?1:0)}function g(D,z,O){if(D.length!==0){if(z)for(var V=0;V<D.length;++V){var B=D[V],F=z[B[0]],N=z[B[1]];B[0]=Math.min(F,N),B[1]=Math.max(F,N)}else for(var V=0;V<D.length;++V){var B=D[V],F=B[0],N=B[1];B[0]=Math.min(F,N),B[1]=Math.max(F,N)}O?D.sort(S):D.sort(E);for(var Z=1,V=1;V<D.length;++V){var J=D[V-1],re=D[V];re[0]===J[0]&&re[1]===J[1]&&(!O||re[2]===J[2])||(D[Z++]=re)}D.length=Z}}function C(D,z,O){var V=x(D,[],M(D));return g(z,V,O),!!V}function A(D,z,O){var V=p(D,z),B=b(D,z,V),F=M(D),N=w(D,z,V,F),Z=k(D,z,B,N,O),J=x(D,Z,F);return g(z,J,O),J?!0:B.length>0||N.length>0}function P(D,z,O){var V;if(O){V=z;for(var B=new Array(z.length),F=0;F<z.length;++F){var N=z[F];B[F]=[N[0],N[1],O[F]]}z=B}for(var Z=C(D,z,!!O);A(D,z,!!O);)Z=!0;if(O&&Z){V.length=0,O.length=0;for(var F=0;F<z.length;++F){var N=z[F];V.push([N[0],N[1]]),O.push(N[2])}}return Z}},3637:function(n,a,o){"use strict";n.exports=_;var s=o(6504),l=o(8697),u=o(5572),f=o(7721),c=o(544),h=o(2653),v=o(8987);function d(T,p){return u(s(T[0],p[1]),s(T[1],p[0]))}function _(T,p,M,b){var w=c(p,T),k=c(b,M),x=d(w,k);if(f(x)===0)return null;var E=c(T,M),S=d(k,E),g=l(S,x),C=v(w,g),A=h(T,C);return A}},3642:function(n){n.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},6729:function(n,a,o){"use strict";var s=o(3642),l=o(395);n.exports=u;function u(v){var d,_,T,p,M,b,w,k,g,x,E;if(v||(v={}),k=(v.nshades||72)-1,w=v.format||"hex",b=v.colormap,b||(b="jet"),typeof b=="string"){if(b=b.toLowerCase(),!s[b])throw Error(b+" not a supported colorscale");M=s[b]}else if(Array.isArray(b))M=b.slice();else throw Error("unsupported colormap option",b);if(M.length>k+1)throw new Error(b+" map requires nshades to be at least size "+M.length);Array.isArray(v.alpha)?v.alpha.length!==2?x=[1,1]:x=v.alpha.slice():typeof v.alpha=="number"?x=[v.alpha,v.alpha]:x=[1,1],d=M.map(function(P){return Math.round(P.index*k)}),x[0]=Math.min(Math.max(x[0],0),1),x[1]=Math.min(Math.max(x[1],0),1);var S=M.map(function(P,D){var z=M[D].index,O=M[D].rgb.slice();return O.length===4&&O[3]>=0&&O[3]<=1||(O[3]=x[0]+(x[1]-x[0])*z),O}),g=[];for(E=0;E<d.length-1;++E){p=d[E+1]-d[E],_=S[E],T=S[E+1];for(var C=0;C<p;C++){var A=C/p;g.push([Math.round(l(_[0],T[0],A)),Math.round(l(_[1],T[1],A)),Math.round(l(_[2],T[2],A)),l(_[3],T[3],A)])}}return g.push(M[M.length-1].rgb.concat(x[1])),w==="hex"?g=g.map(c):w==="rgbaString"?g=g.map(h):w==="float"&&(g=g.map(f)),g}function f(v){return[v[0]/255,v[1]/255,v[2]/255,v[3]]}function c(v){for(var d,_="#",T=0;T<3;++T)d=v[T],d=d.toString(16),_+=("00"+d).substr(d.length);return _}function h(v){return"rgba("+v.join(",")+")"}},3140:function(n,a,o){"use strict";n.exports=v;var s=o(3250),l=o(8572),u=o(9362),f=o(5382),c=o(8210);function h(d,_,T){var p=u(d[0],-_[0]),M=u(d[1],-_[1]),b=u(T[0],-_[0]),w=u(T[1],-_[1]),k=c(f(p,b),f(M,w));return k[k.length-1]>=0}function v(d,_,T,p){var M=s(_,T,p);if(M===0){var b=l(s(d,_,T)),w=l(s(d,_,p));if(b===w){if(b===0){var k=h(d,_,T),x=h(d,_,p);return k===x?0:k?1:-1}return 0}else{if(w===0)return b>0||h(d,_,p)?-1:1;if(b===0)return w>0||h(d,_,T)?1:-1}return l(w-b)}var E=s(d,_,T);if(E>0)return M>0&&s(d,_,p)>0?1:-1;if(E<0)return M>0||s(d,_,p)>0?1:-1;var S=s(d,_,p);return S>0||h(d,_,T)?1:-1}},8572:function(n){"use strict";n.exports=function(o){return o<0?-1:o>0?1:0}},8507:function(n){n.exports=s;var a=Math.min;function o(l,u){return l-u}function s(l,u){var f=l.length,c=l.length-u.length;if(c)return c;switch(f){case 0:return 0;case 1:return l[0]-u[0];case 2:return l[0]+l[1]-u[0]-u[1]||a(l[0],l[1])-a(u[0],u[1]);case 3:var h=l[0]+l[1],v=u[0]+u[1];if(c=h+l[2]-(v+u[2]),c)return c;var d=a(l[0],l[1]),_=a(u[0],u[1]);return a(d,l[2])-a(_,u[2])||a(d+l[2],h)-a(_+u[2],v);case 4:var T=l[0],p=l[1],M=l[2],b=l[3],w=u[0],k=u[1],x=u[2],E=u[3];return T+p+M+b-(w+k+x+E)||a(T,p,M,b)-a(w,k,x,E,w)||a(T+p,T+M,T+b,p+M,p+b,M+b)-a(w+k,w+x,w+E,k+x,k+E,x+E)||a(T+p+M,T+p+b,T+M+b,p+M+b)-a(w+k+x,w+k+E,w+x+E,k+x+E);default:for(var S=l.slice().sort(o),g=u.slice().sort(o),C=0;C<f;++C)if(c=S[C]-g[C],c)return c;return 0}}},3788:function(n,a,o){"use strict";var s=o(8507),l=o(2419);n.exports=u;function u(f,c){return s(f,c)||l(f)-l(c)}},7352:function(n,a,o){"use strict";var s=o(5721),l=o(4750),u=o(2690);n.exports=f;function f(c){var h=c.length;if(h===0)return[];if(h===1)return[[0]];var v=c[0].length;return v===0?[]:v===1?s(c):v===2?l(c):u(c,v)}},5721:function(n){"use strict";n.exports=a;function a(o){for(var s=0,l=0,u=1;u<o.length;++u)o[u][0]<o[s][0]&&(s=u),o[u][0]>o[l][0]&&(l=u);return s<l?[[s],[l]]:s>l?[[l],[s]]:[[s]]}},4750:function(n,a,o){"use strict";n.exports=l;var s=o(3090);function l(u){var f=s(u),c=f.length;if(c<=2)return[];for(var h=new Array(c),v=f[c-1],d=0;d<c;++d){var _=f[d];h[d]=[v,_],v=_}return h}},2690:function(n,a,o){"use strict";n.exports=c;var s=o(8954),l=o(3952);function u(h,v){for(var d=h.length,_=new Array(d),T=0;T<v.length;++T)_[T]=h[v[T]];for(var p=v.length,T=0;T<d;++T)v.indexOf(T)<0&&(_[p++]=h[T]);return _}function f(h,v){for(var d=h.length,_=v.length,T=0;T<d;++T)for(var p=h[T],M=0;M<p.length;++M){var b=p[M];if(b<_)p[M]=v[b];else{b=b-_;for(var w=0;w<_;++w)b>=v[w]&&(b+=1);p[M]=b}}return h}function c(h,v){try{return s(h,!0)}catch(p){var d=l(h);if(d.length<=v)return[];var _=u(h,d),T=s(_,!0);return f(T,d)}}},4769:function(n){"use strict";function a(s,l,u,f,c,h){var v=6*c*c-6*c,d=3*c*c-4*c+1,_=-6*c*c+6*c,T=3*c*c-2*c;if(s.length){h||(h=new Array(s.length));for(var p=s.length-1;p>=0;--p)h[p]=v*s[p]+d*l[p]+_*u[p]+T*f[p];return h}return v*s+d*l+_*u[p]+T*f}function o(s,l,u,f,c,h){var v=c-1,d=c*c,_=v*v,T=(1+2*c)*_,p=c*_,M=d*(3-2*c),b=d*v;if(s.length){h||(h=new Array(s.length));for(var w=s.length-1;w>=0;--w)h[w]=T*s[w]+p*l[w]+M*u[w]+b*f[w];return h}return T*s+p*l+M*u+b*f}n.exports=o,n.exports.derivative=a},7642:function(n,a,o){"use strict";var s=o(8954),l=o(1682);n.exports=h;function u(v,d){this.point=v,this.index=d}function f(v,d){for(var _=v.point,T=d.point,p=_.length,M=0;M<p;++M){var b=T[M]-_[M];if(b)return b}return 0}function c(v,d,_){if(v===1)return _?[[-1,0]]:[];var T=d.map(function(k,x){return[k[0],x]});T.sort(function(k,x){return k[0]-x[0]});for(var p=new Array(v-1),M=1;M<v;++M){var b=T[M-1],w=T[M];p[M-1]=[b[1],w[1]]}return _&&p.push([-1,p[0][1]],[p[v-1][1],-1]),p}function h(v,d){var _=v.length;if(_===0)return[];var T=v[0].length;if(T<1)return[];if(T===1)return c(_,v,d);for(var p=new Array(_),M=1,b=0;b<_;++b){for(var w=v[b],k=new Array(T+1),x=0,E=0;E<T;++E){var S=w[E];k[E]=S,x+=S*S}k[T]=x,p[b]=new u(k,b),M=Math.max(x,M)}l(p,f),_=p.length;for(var g=new Array(_+T+1),C=new Array(_+T+1),A=(T+1)*(T+1)*M,P=new Array(T+1),b=0;b<=T;++b)P[b]=0;P[T]=A,g[0]=P.slice(),C[0]=-1;for(var b=0;b<=T;++b){var k=P.slice();k[b]=1,g[b+1]=k,C[b+1]=-1}for(var b=0;b<_;++b){var D=p[b];g[b+T+1]=D.point,C[b+T+1]=D.index}var z=s(g,!1);if(d?z=z.filter(function(O){for(var V=0,B=0;B<=T;++B){var F=C[O[B]];if(F<0&&++V>=2)return!1;O[B]=F}return!0}):z=z.filter(function(O){for(var V=0;V<=T;++V){var B=C[O[V]];if(B<0)return!1;O[V]=B}return!0}),T&1)for(var b=0;b<z.length;++b){var D=z[b],k=D[0];D[0]=D[1],D[1]=k}return z}},2361:function(n){var a=!1;if(typeof Float64Array!="undefined"){var o=new Float64Array(1),s=new Uint32Array(o.buffer);if(o[0]=1,a=!0,s[1]===1072693248){let M=function(k,x){return s[0]=k,s[1]=x,o[0]},b=function(k){return o[0]=k,s[0]},w=function(k){return o[0]=k,s[1]};var u=M,f=b,c=w;n.exports=function(x){return o[0]=x,[s[0],s[1]]},n.exports.pack=M,n.exports.lo=b,n.exports.hi=w}else if(s[0]===1072693248){let M=function(k,x){return s[1]=k,s[0]=x,o[0]},b=function(k){return o[0]=k,s[1]},w=function(k){return o[0]=k,s[0]};var h=M,v=b,d=w;n.exports=function(x){return o[0]=x,[s[1],s[0]]},n.exports.pack=M,n.exports.lo=b,n.exports.hi=w}else a=!1}if(!a){let M=function(k,x){return l.writeUInt32LE(k,0,!0),l.writeUInt32LE(x,4,!0),l.readDoubleLE(0,!0)},b=function(k){return l.writeDoubleLE(k,0,!0),l.readUInt32LE(0,!0)},w=function(k){return l.writeDoubleLE(k,0,!0),l.readUInt32LE(4,!0)};var _=M,T=b,p=w,l=new Buffer(8);n.exports=function(x){return l.writeDoubleLE(x,0,!0),[l.readUInt32LE(0,!0),l.readUInt32LE(4,!0)]},n.exports.pack=M,n.exports.lo=b,n.exports.hi=w}n.exports.sign=function(M){return n.exports.hi(M)>>>31},n.exports.exponent=function(M){var b=n.exports.hi(M);return(b<<1>>>21)-1023},n.exports.fraction=function(M){var b=n.exports.lo(M),w=n.exports.hi(M),k=w&(1<<20)-1;return w&2146435072&&(k+=1048576),[b,k]},n.exports.denormalized=function(M){var b=n.exports.hi(M);return!(b&2146435072)}},1338:function(n){"use strict";function a(l,u,f){var c=l[f]|0;if(c<=0)return[];var h=new Array(c),v;if(f===l.length-1)for(v=0;v<c;++v)h[v]=u;else for(v=0;v<c;++v)h[v]=a(l,u,f+1);return h}function o(l,u){var f,c;for(f=new Array(l),c=0;c<l;++c)f[c]=u;return f}function s(l,u){switch(typeof u=="undefined"&&(u=0),typeof l){case"number":if(l>0)return o(l|0,u);break;case"object":if(typeof l.length=="number")return a(l,u,0);break}return[]}n.exports=s},3134:function(n,a,o){"use strict";n.exports=l;var s=o(1682);function l(u,f){var c=u.length;if(typeof f!="number"){f=0;for(var h=0;h<c;++h){var v=u[h];f=Math.max(f,v[0],v[1])}f=(f|0)+1}f=f|0;for(var d=new Array(f),h=0;h<f;++h)d[h]=[];for(var h=0;h<c;++h){var v=u[h];d[v[0]].push(v[1]),d[v[1]].push(v[0])}for(var _=0;_<f;++_)s(d[_],function(T,p){return T-p});return d}},5033:function(n){"use strict";n.exports=a;function a(o,s,l){var u=s||0,f=l||1;return[[o[12]+o[0],o[13]+o[1],o[14]+o[2],o[15]+o[3]],[o[12]-o[0],o[13]-o[1],o[14]-o[2],o[15]-o[3]],[o[12]+o[4],o[13]+o[5],o[14]+o[6],o[15]+o[7]],[o[12]-o[4],o[13]-o[5],o[14]-o[6],o[15]-o[7]],[u*o[12]+o[8],u*o[13]+o[9],u*o[14]+o[10],u*o[15]+o[11]],[f*o[12]-o[8],f*o[13]-o[9],f*o[14]-o[10],f*o[15]-o[11]]]}},9215:function(n,a,o){"use strict";n.exports=v;var s=o(4769),l=o(2478);function u(d,_,T){return Math.min(_,Math.max(d,T))}function f(d,_,T){this.dimension=d.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var p=0;p<this.dimension;++p)this.bounds[0][p]=-1/0,this.bounds[1][p]=1/0;this._state=d.slice().reverse(),this._velocity=_.slice().reverse(),this._time=[T],this._scratch=[d.slice(),d.slice(),d.slice(),d.slice(),d.slice()]}var c=f.prototype;c.flush=function(d){var _=l.gt(this._time,d)-1;_<=0||(this._time.splice(0,_),this._state.splice(0,_*this.dimension),this._velocity.splice(0,_*this.dimension))},c.curve=function(d){var _=this._time,T=_.length,p=l.le(_,d),M=this._scratch[0],b=this._state,w=this._velocity,k=this.dimension,x=this.bounds;if(p<0)for(var E=k-1,S=0;S<k;++S,--E)M[S]=b[E];else if(p>=T-1)for(var E=b.length-1,g=d-_[T-1],S=0;S<k;++S,--E)M[S]=b[E]+g*w[E];else{for(var E=k*(p+1)-1,C=_[p],A=_[p+1],P=A-C||1,D=this._scratch[1],z=this._scratch[2],O=this._scratch[3],V=this._scratch[4],B=!0,S=0;S<k;++S,--E)D[S]=b[E],O[S]=w[E]*P,z[S]=b[E+k],V[S]=w[E+k]*P,B=B&&D[S]===z[S]&&O[S]===V[S]&&O[S]===0;if(B)for(var S=0;S<k;++S)M[S]=D[S];else s(D,O,z,V,(d-C)/P,M)}for(var F=x[0],N=x[1],S=0;S<k;++S)M[S]=u(F[S],N[S],M[S]);return M},c.dcurve=function(d){var _=this._time,T=_.length,p=l.le(_,d),M=this._scratch[0],b=this._state,w=this._velocity,k=this.dimension;if(p>=T-1)for(var x=b.length-1,E=d-_[T-1],S=0;S<k;++S,--x)M[S]=w[x];else{for(var x=k*(p+1)-1,g=_[p],C=_[p+1],A=C-g||1,P=this._scratch[1],D=this._scratch[2],z=this._scratch[3],O=this._scratch[4],V=!0,S=0;S<k;++S,--x)P[S]=b[x],z[S]=w[x]*A,D[S]=b[x+k],O[S]=w[x+k]*A,V=V&&P[S]===D[S]&&z[S]===O[S]&&z[S]===0;if(V)for(var S=0;S<k;++S)M[S]=0;else{s.derivative(P,z,D,O,(d-g)/A,M);for(var S=0;S<k;++S)M[S]/=A}}return M},c.lastT=function(){var d=this._time;return d[d.length-1]},c.stable=function(){for(var d=this._velocity,_=d.length,T=this.dimension-1;T>=0;--T)if(d[--_])return!1;return!0},c.jump=function(d){var _=this.lastT(),T=this.dimension;if(!(d<_||arguments.length!==T+1)){var p=this._state,M=this._velocity,b=p.length-this.dimension,w=this.bounds,k=w[0],x=w[1];this._time.push(_,d);for(var E=0;E<2;++E)for(var S=0;S<T;++S)p.push(p[b++]),M.push(0);this._time.push(d);for(var S=T;S>0;--S)p.push(u(k[S-1],x[S-1],arguments[S])),M.push(0)}},c.push=function(d){var _=this.lastT(),T=this.dimension;if(!(d<_||arguments.length!==T+1)){var p=this._state,M=this._velocity,b=p.length-this.dimension,w=d-_,k=this.bounds,x=k[0],E=k[1],S=w>1e-6?1/w:0;this._time.push(d);for(var g=T;g>0;--g){var C=u(x[g-1],E[g-1],arguments[g]);p.push(C),M.push((C-p[b++])*S)}}},c.set=function(d){var _=this.dimension;if(!(d<this.lastT()||arguments.length!==_+1)){var T=this._state,p=this._velocity,M=this.bounds,b=M[0],w=M[1];this._time.push(d);for(var k=_;k>0;--k)T.push(u(b[k-1],w[k-1],arguments[k])),p.push(0)}},c.move=function(d){var _=this.lastT(),T=this.dimension;if(!(d<=_||arguments.length!==T+1)){var p=this._state,M=this._velocity,b=p.length-this.dimension,w=this.bounds,k=w[0],x=w[1],E=d-_,S=E>1e-6?1/E:0;this._time.push(d);for(var g=T;g>0;--g){var C=arguments[g];p.push(u(k[g-1],x[g-1],p[b++]+C)),M.push(C*S)}}},c.idle=function(d){var _=this.lastT();if(!(d<_)){var T=this.dimension,p=this._state,M=this._velocity,b=p.length-T,w=this.bounds,k=w[0],x=w[1],E=d-_;this._time.push(d);for(var S=T-1;S>=0;--S)p.push(u(k[S],x[S],p[b]+E*M[b])),M.push(0),b+=1}};function h(d){for(var _=new Array(d),T=0;T<d;++T)_[T]=0;return _}function v(d,_,T){switch(arguments.length){case 0:return new f([0],[0],0);case 1:if(typeof d=="number"){var p=h(d);return new f(p,p,0)}else return new f(d,h(d.length),0);case 2:if(typeof _=="number"){var p=h(d.length);return new f(d,p,+_)}else T=0;case 3:if(d.length!==_.length)throw new Error("state and velocity lengths must match");return new f(d,_,T)}}},3840:function(n){"use strict";n.exports=k;var a=0,o=1;function s(x,E,S,g,C,A){this._color=x,this.key=E,this.value=S,this.left=g,this.right=C,this._count=A}function l(x){return new s(x._color,x.key,x.value,x.left,x.right,x._count)}function u(x,E){return new s(x,E.key,E.value,E.left,E.right,E._count)}function f(x){x._count=1+(x.left?x.left._count:0)+(x.right?x.right._count:0)}function c(x,E){this._compare=x,this.root=E}var h=c.prototype;Object.defineProperty(h,"keys",{get:function(){var x=[];return this.forEach(function(E,S){x.push(E)}),x}}),Object.defineProperty(h,"values",{get:function(){var x=[];return this.forEach(function(E,S){x.push(S)}),x}}),Object.defineProperty(h,"length",{get:function(){return this.root?this.root._count:0}}),h.insert=function(x,E){for(var S=this._compare,g=this.root,C=[],A=[];g;){var P=S(x,g.key);C.push(g),A.push(P),P<=0?g=g.left:g=g.right}C.push(new s(a,x,E,null,null,1));for(var D=C.length-2;D>=0;--D){var g=C[D];A[D]<=0?C[D]=new s(g._color,g.key,g.value,C[D+1],g.right,g._count+1):C[D]=new s(g._color,g.key,g.value,g.left,C[D+1],g._count+1)}for(var D=C.length-1;D>1;--D){var z=C[D-1],g=C[D];if(z._color===o||g._color===o)break;var O=C[D-2];if(O.left===z)if(z.left===g){var V=O.right;if(V&&V._color===a)z._color=o,O.right=u(o,V),O._color=a,D-=1;else{if(O._color=a,O.left=z.right,z._color=o,z.right=O,C[D-2]=z,C[D-1]=g,f(O),f(z),D>=3){var B=C[D-3];B.left===O?B.left=z:B.right=z}break}}else{var V=O.right;if(V&&V._color===a)z._color=o,O.right=u(o,V),O._color=a,D-=1;else{if(z.right=g.left,O._color=a,O.left=g.right,g._color=o,g.left=z,g.right=O,C[D-2]=g,C[D-1]=z,f(O),f(z),f(g),D>=3){var B=C[D-3];B.left===O?B.left=g:B.right=g}break}}else if(z.right===g){var V=O.left;if(V&&V._color===a)z._color=o,O.left=u(o,V),O._color=a,D-=1;else{if(O._color=a,O.right=z.left,z._color=o,z.left=O,C[D-2]=z,C[D-1]=g,f(O),f(z),D>=3){var B=C[D-3];B.right===O?B.right=z:B.left=z}break}}else{var V=O.left;if(V&&V._color===a)z._color=o,O.left=u(o,V),O._color=a,D-=1;else{if(z.left=g.right,O._color=a,O.right=g.left,g._color=o,g.right=z,g.left=O,C[D-2]=g,C[D-1]=z,f(O),f(z),f(g),D>=3){var B=C[D-3];B.right===O?B.right=g:B.left=g}break}}}return C[0]._color=o,new c(S,C[0])};function v(x,E){if(E.left){var S=v(x,E.left);if(S)return S}var S=x(E.key,E.value);if(S)return S;if(E.right)return v(x,E.right)}function d(x,E,S,g){var C=E(x,g.key);if(C<=0){if(g.left){var A=d(x,E,S,g.left);if(A)return A}var A=S(g.key,g.value);if(A)return A}if(g.right)return d(x,E,S,g.right)}function _(x,E,S,g,C){var A=S(x,C.key),P=S(E,C.key),D;if(A<=0&&(C.left&&(D=_(x,E,S,g,C.left),D)||P>0&&(D=g(C.key,C.value),D)))return D;if(P>0&&C.right)return _(x,E,S,g,C.right)}h.forEach=function(E,S,g){if(this.root)switch(arguments.length){case 1:return v(E,this.root);case 2:return d(S,this._compare,E,this.root);case 3:return this._compare(S,g)>=0?void 0:_(S,g,this._compare,E,this.root)}},Object.defineProperty(h,"begin",{get:function(){for(var x=[],E=this.root;E;)x.push(E),E=E.left;return new T(this,x)}}),Object.defineProperty(h,"end",{get:function(){for(var x=[],E=this.root;E;)x.push(E),E=E.right;return new T(this,x)}}),h.at=function(x){if(x<0)return new T(this,[]);for(var E=this.root,S=[];;){if(S.push(E),E.left){if(x<E.left._count){E=E.left;continue}x-=E.left._count}if(!x)return new T(this,S);if(x-=1,E.right){if(x>=E.right._count)break;E=E.right}else break}return new T(this,[])},h.ge=function(x){for(var E=this._compare,S=this.root,g=[],C=0;S;){var A=E(x,S.key);g.push(S),A<=0&&(C=g.length),A<=0?S=S.left:S=S.right}return g.length=C,new T(this,g)},h.gt=function(x){for(var E=this._compare,S=this.root,g=[],C=0;S;){var A=E(x,S.key);g.push(S),A<0&&(C=g.length),A<0?S=S.left:S=S.right}return g.length=C,new T(this,g)},h.lt=function(x){for(var E=this._compare,S=this.root,g=[],C=0;S;){var A=E(x,S.key);g.push(S),A>0&&(C=g.length),A<=0?S=S.left:S=S.right}return g.length=C,new T(this,g)},h.le=function(x){for(var E=this._compare,S=this.root,g=[],C=0;S;){var A=E(x,S.key);g.push(S),A>=0&&(C=g.length),A<0?S=S.left:S=S.right}return g.length=C,new T(this,g)},h.find=function(x){for(var E=this._compare,S=this.root,g=[];S;){var C=E(x,S.key);if(g.push(S),C===0)return new T(this,g);C<=0?S=S.left:S=S.right}return new T(this,[])},h.remove=function(x){var E=this.find(x);return E?E.remove():this},h.get=function(x){for(var E=this._compare,S=this.root;S;){var g=E(x,S.key);if(g===0)return S.value;g<=0?S=S.left:S=S.right}};function T(x,E){this.tree=x,this._stack=E}var p=T.prototype;Object.defineProperty(p,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(p,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),p.clone=function(){return new T(this.tree,this._stack.slice())};function M(x,E){x.key=E.key,x.value=E.value,x.left=E.left,x.right=E.right,x._color=E._color,x._count=E._count}function b(x){for(var E,S,g,C,A=x.length-1;A>=0;--A){if(E=x[A],A===0){E._color=o;return}if(S=x[A-1],S.left===E){if(g=S.right,g.right&&g.right._color===a){if(g=S.right=l(g),C=g.right=l(g.right),S.right=g.left,g.left=S,g.right=C,g._color=S._color,E._color=o,S._color=o,C._color=o,f(S),f(g),A>1){var P=x[A-2];P.left===S?P.left=g:P.right=g}x[A-1]=g;return}else if(g.left&&g.left._color===a){if(g=S.right=l(g),C=g.left=l(g.left),S.right=C.left,g.left=C.right,C.left=S,C.right=g,C._color=S._color,S._color=o,g._color=o,E._color=o,f(S),f(g),f(C),A>1){var P=x[A-2];P.left===S?P.left=C:P.right=C}x[A-1]=C;return}if(g._color===o)if(S._color===a){S._color=o,S.right=u(a,g);return}else{S.right=u(a,g);continue}else{if(g=l(g),S.right=g.left,g.left=S,g._color=S._color,S._color=a,f(S),f(g),A>1){var P=x[A-2];P.left===S?P.left=g:P.right=g}x[A-1]=g,x[A]=S,A+1<x.length?x[A+1]=E:x.push(E),A=A+2}}else{if(g=S.left,g.left&&g.left._color===a){if(g=S.left=l(g),C=g.left=l(g.left),S.left=g.right,g.right=S,g.left=C,g._color=S._color,E._color=o,S._color=o,C._color=o,f(S),f(g),A>1){var P=x[A-2];P.right===S?P.right=g:P.left=g}x[A-1]=g;return}else if(g.right&&g.right._color===a){if(g=S.left=l(g),C=g.right=l(g.right),S.left=C.right,g.right=C.left,C.right=S,C.left=g,C._color=S._color,S._color=o,g._color=o,E._color=o,f(S),f(g),f(C),A>1){var P=x[A-2];P.right===S?P.right=C:P.left=C}x[A-1]=C;return}if(g._color===o)if(S._color===a){S._color=o,S.left=u(a,g);return}else{S.left=u(a,g);continue}else{if(g=l(g),S.left=g.right,g.right=S,g._color=S._color,S._color=a,f(S),f(g),A>1){var P=x[A-2];P.right===S?P.right=g:P.left=g}x[A-1]=g,x[A]=S,A+1<x.length?x[A+1]=E:x.push(E),A=A+2}}}}p.remove=function(){var x=this._stack;if(x.length===0)return this.tree;var E=new Array(x.length),S=x[x.length-1];E[E.length-1]=new s(S._color,S.key,S.value,S.left,S.right,S._count);for(var g=x.length-2;g>=0;--g){var S=x[g];S.left===x[g+1]?E[g]=new s(S._color,S.key,S.value,E[g+1],S.right,S._count):E[g]=new s(S._color,S.key,S.value,S.left,E[g+1],S._count)}if(S=E[E.length-1],S.left&&S.right){var C=E.length;for(S=S.left;S.right;)E.push(S),S=S.right;var A=E[C-1];E.push(new s(S._color,A.key,A.value,S.left,S.right,S._count)),E[C-1].key=S.key,E[C-1].value=S.value;for(var g=E.length-2;g>=C;--g)S=E[g],E[g]=new s(S._color,S.key,S.value,S.left,E[g+1],S._count);E[C-1].left=E[C]}if(S=E[E.length-1],S._color===a){var P=E[E.length-2];P.left===S?P.left=null:P.right===S&&(P.right=null),E.pop();for(var g=0;g<E.length;++g)E[g]._count--;return new c(this.tree._compare,E[0])}else if(S.left||S.right){S.left?M(S,S.left):S.right&&M(S,S.right),S._color=o;for(var g=0;g<E.length-1;++g)E[g]._count--;return new c(this.tree._compare,E[0])}else{if(E.length===1)return new c(this.tree._compare,null);for(var g=0;g<E.length;++g)E[g]._count--;var D=E[E.length-2];b(E),D.left===S?D.left=null:D.right=null}return new c(this.tree._compare,E[0])},Object.defineProperty(p,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(p,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(p,"index",{get:function(){var x=0,E=this._stack;if(E.length===0){var S=this.tree.root;return S?S._count:0}else E[E.length-1].left&&(x=E[E.length-1].left._count);for(var g=E.length-2;g>=0;--g)E[g+1]===E[g].right&&(++x,E[g].left&&(x+=E[g].left._count));return x},enumerable:!0}),p.next=function(){var x=this._stack;if(x.length!==0){var E=x[x.length-1];if(E.right)for(E=E.right;E;)x.push(E),E=E.left;else for(x.pop();x.length>0&&x[x.length-1].right===E;)E=x[x.length-1],x.pop()}},Object.defineProperty(p,"hasNext",{get:function(){var x=this._stack;if(x.length===0)return!1;if(x[x.length-1].right)return!0;for(var E=x.length-1;E>0;--E)if(x[E-1].left===x[E])return!0;return!1}}),p.update=function(x){var E=this._stack;if(E.length===0)throw new Error("Can't update empty node!");var S=new Array(E.length),g=E[E.length-1];S[S.length-1]=new s(g._color,g.key,x,g.left,g.right,g._count);for(var C=E.length-2;C>=0;--C)g=E[C],g.left===E[C+1]?S[C]=new s(g._color,g.key,g.value,S[C+1],g.right,g._count):S[C]=new s(g._color,g.key,g.value,g.left,S[C+1],g._count);return new c(this.tree._compare,S[0])},p.prev=function(){var x=this._stack;if(x.length!==0){var E=x[x.length-1];if(E.left)for(E=E.left;E;)x.push(E),E=E.right;else for(x.pop();x.length>0&&x[x.length-1].left===E;)E=x[x.length-1],x.pop()}},Object.defineProperty(p,"hasPrev",{get:function(){var x=this._stack;if(x.length===0)return!1;if(x[x.length-1].left)return!0;for(var E=x.length-1;E>0;--E)if(x[E-1].right===x[E])return!0;return!1}});function w(x,E){return x<E?-1:x>E?1:0}function k(x){return new c(x||w,null)}},3837:function(n,a,o){"use strict";n.exports=g;var s=o(4935),l=o(501),u=o(5304),f=o(6429),c=o(6444),h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function v(C,A){return C[0]=A[0],C[1]=A[1],C[2]=A[2],C}function d(C){this.gl=C,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=u(C)}var _=d.prototype;_.update=function(C){C=C||{};function A(ue,fe,K){if(K in C){var X=C[K],ae=this[K],oe;(ue?Array.isArray(X)&&Array.isArray(X[0]):Array.isArray(X))?this[K]=oe=[fe(X[0]),fe(X[1]),fe(X[2])]:this[K]=oe=[fe(X),fe(X),fe(X)];for(var me=0;me<3;++me)if(oe[me]!==ae[me])return!0}return!1}var P=A.bind(this,!1,Number),D=A.bind(this,!1,Boolean),z=A.bind(this,!1,String),O=A.bind(this,!0,function(ue){if(Array.isArray(ue)){if(ue.length===3)return[+ue[0],+ue[1],+ue[2],1];if(ue.length===4)return[+ue[0],+ue[1],+ue[2],+ue[3]]}return[0,0,0,1]}),V,B=!1,F=!1;if("bounds"in C)for(var N=C.bounds,Z=0;Z<2;++Z)for(var J=0;J<3;++J)N[Z][J]!==this.bounds[Z][J]&&(F=!0),this.bounds[Z][J]=N[Z][J];if("ticks"in C){V=C.ticks,B=!0,this.autoTicks=!1;for(var Z=0;Z<3;++Z)this.tickSpacing[Z]=0}else P("tickSpacing")&&(this.autoTicks=!0,F=!0);if(this._firstInit&&("ticks"in C||"tickSpacing"in C||(this.autoTicks=!0),F=!0,B=!0,this._firstInit=!1),F&&this.autoTicks&&(V=c.create(this.bounds,this.tickSpacing),B=!0),B){for(var Z=0;Z<3;++Z)V[Z].sort(function(fe,K){return fe.x-K.x});c.equal(V,this.ticks)?B=!1:this.ticks=V}D("tickEnable"),z("tickFont")&&(B=!0),P("tickSize"),P("tickAngle"),P("tickPad"),O("tickColor");var re=z("labels");z("labelFont")&&(re=!0),D("labelEnable"),P("labelSize"),P("labelPad"),O("labelColor"),D("lineEnable"),D("lineMirror"),P("lineWidth"),O("lineColor"),D("lineTickEnable"),D("lineTickMirror"),P("lineTickLength"),P("lineTickWidth"),O("lineTickColor"),D("gridEnable"),P("gridWidth"),O("gridColor"),D("zeroEnable"),O("zeroLineColor"),P("zeroLineWidth"),D("backgroundEnable"),O("backgroundColor"),this._text?this._text&&(re||B)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=s(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&B&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=l(this.gl,this.bounds,this.ticks))};function T(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var p=[new T,new T,new T];function M(C,A,P,D,z){for(var O=C.primalOffset,V=C.primalMinor,B=C.mirrorOffset,F=C.mirrorMinor,N=D[A],Z=0;Z<3;++Z)if(A!==Z){var J=O,re=B,ue=V,fe=F;N&1<<Z&&(J=B,re=O,ue=F,fe=V),J[Z]=P[0][Z],re[Z]=P[1][Z],z[Z]>0?(ue[Z]=-1,fe[Z]=0):(ue[Z]=0,fe[Z]=1)}}var b=[0,0,0],w={model:h,view:h,projection:h,_ortho:!1};_.isOpaque=function(){return!0},_.isTransparent=function(){return!1},_.drawTransparent=function(C){};var k=0,x=[0,0,0],E=[0,0,0],S=[0,0,0];_.draw=function(C){C=C||w;for(var ae=this.gl,A=C.model||h,P=C.view||h,D=C.projection||h,z=this.bounds,O=C._ortho||!1,V=f(A,P,D,z,O),B=V.cubeEdges,F=V.axis,N=P[12],Z=P[13],J=P[14],re=P[15],ue=O?2:1,fe=ue*this.pixelRatio*(D[3]*N+D[7]*Z+D[11]*J+D[15]*re)/ae.drawingBufferHeight,K=0;K<3;++K)this.lastCubeProps.cubeEdges[K]=B[K],this.lastCubeProps.axis[K]=F[K];for(var X=p,K=0;K<3;++K)M(p[K],K,this.bounds,B,F);for(var ae=this.gl,oe=b,K=0;K<3;++K)this.backgroundEnable[K]?oe[K]=F[K]:oe[K]=0;this._background.draw(A,P,D,z,oe,this.backgroundColor),this._lines.bind(A,P,D,this);for(var K=0;K<3;++K){var me=[0,0,0];F[K]>0?me[K]=z[1][K]:me[K]=z[0][K];for(var xe=0;xe<2;++xe){var ce=(K+1+xe)%3,ie=(K+1+(xe^1))%3;this.gridEnable[ce]&&this._lines.drawGrid(ce,ie,this.bounds,me,this.gridColor[ce],this.gridWidth[ce]*this.pixelRatio)}for(var xe=0;xe<2;++xe){var ce=(K+1+xe)%3,ie=(K+1+(xe^1))%3;this.zeroEnable[ie]&&Math.min(z[0][ie],z[1][ie])<=0&&Math.max(z[0][ie],z[1][ie])>=0&&this._lines.drawZero(ce,ie,this.bounds,me,this.zeroLineColor[ie],this.zeroLineWidth[ie]*this.pixelRatio)}}for(var K=0;K<3;++K){this.lineEnable[K]&&this._lines.drawAxisLine(K,this.bounds,X[K].primalOffset,this.lineColor[K],this.lineWidth[K]*this.pixelRatio),this.lineMirror[K]&&this._lines.drawAxisLine(K,this.bounds,X[K].mirrorOffset,this.lineColor[K],this.lineWidth[K]*this.pixelRatio);for(var ge=v(x,X[K].primalMinor),le=v(E,X[K].mirrorMinor),we=this.lineTickLength,xe=0;xe<3;++xe){var Re=fe/A[5*xe];ge[xe]*=we[xe]*Re,le[xe]*=we[xe]*Re}this.lineTickEnable[K]&&this._lines.drawAxisTicks(K,X[K].primalOffset,ge,this.lineTickColor[K],this.lineTickWidth[K]*this.pixelRatio),this.lineTickMirror[K]&&this._lines.drawAxisTicks(K,X[K].mirrorOffset,le,this.lineTickColor[K],this.lineTickWidth[K]*this.pixelRatio)}this._lines.unbind(),this._text.bind(A,P,D,this.pixelRatio);var qe,et=.5,Pe,Ie;function ut(Me){Ie=[0,0,0],Ie[Me]=1}function ft(Me,Ze,dt){var it=(Me+1)%3,vt=(Me+2)%3,rt=Ze[it],We=Ze[vt],ht=dt[it],mt=dt[vt];if(rt>0&&mt>0){ut(it);return}else if(rt>0&&mt<0){ut(it);return}else if(rt<0&&mt>0){ut(it);return}else if(rt<0&&mt<0){ut(it);return}else if(We>0&&ht>0){ut(vt);return}else if(We>0&&ht<0){ut(vt);return}else if(We<0&&ht>0){ut(vt);return}else if(We<0&&ht<0){ut(vt);return}}for(var K=0;K<3;++K){for(var je=X[K].primalMinor,_t=X[K].mirrorMinor,Bt=v(S,X[K].primalOffset),xe=0;xe<3;++xe)this.lineTickEnable[K]&&(Bt[xe]+=fe*je[xe]*Math.max(this.lineTickLength[xe],0)/A[5*xe]);var Lt=[0,0,0];if(Lt[K]=1,this.tickEnable[K]){this.tickAngle[K]===-3600?(this.tickAngle[K]=0,this.tickAlign[K]="auto"):this.tickAlign[K]=-1,Pe=1,qe=[this.tickAlign[K],et,Pe],qe[0]==="auto"?qe[0]=k:qe[0]=parseInt(""+qe[0]),Ie=[0,0,0],ft(K,je,_t);for(var xe=0;xe<3;++xe)Bt[xe]+=fe*je[xe]*this.tickPad[xe]/A[5*xe];this._text.drawTicks(K,this.tickSize[K],this.tickAngle[K],Bt,this.tickColor[K],Lt,Ie,qe)}if(this.labelEnable[K]){Pe=0,Ie=[0,0,0],this.labels[K].length>4&&(ut(K),Pe=1),qe=[this.labelAlign[K],et,Pe],qe[0]==="auto"?qe[0]=k:qe[0]=parseInt(""+qe[0]);for(var xe=0;xe<3;++xe)Bt[xe]+=fe*je[xe]*this.labelPad[xe]/A[5*xe];Bt[K]+=.5*(z[0][K]+z[1][K]),this._text.drawLabel(K,this.labelSize[K],this.labelAngle[K],Bt,this.labelColor[K],[0,0,0],Ie,qe)}}this._text.unbind()},_.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function g(C,A){var P=new d(C);return P.update(A),P}},5304:function(n,a,o){"use strict";n.exports=h;var s=o(2762),l=o(8116),u=o(1879).bg;function f(v,d,_,T){this.gl=v,this.buffer=d,this.vao=_,this.shader=T}var c=f.prototype;c.draw=function(v,d,_,T,p,M){for(var b=!1,w=0;w<3;++w)b=b||p[w];if(b){var k=this.gl;k.enable(k.POLYGON_OFFSET_FILL),k.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:v,view:d,projection:_,bounds:T,enable:p,colors:M},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),k.disable(k.POLYGON_OFFSET_FILL)}},c.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function h(v){for(var d=[],_=[],T=0,p=0;p<3;++p)for(var M=(p+1)%3,b=(p+2)%3,w=[0,0,0],k=[0,0,0],x=-1;x<=1;x+=2){_.push(T,T+2,T+1,T+1,T+2,T+3),w[p]=x,k[p]=x;for(var E=-1;E<=1;E+=2){w[M]=E;for(var S=-1;S<=1;S+=2)w[b]=S,d.push(w[0],w[1],w[2],k[0],k[1],k[2]),T+=1}var g=M;M=b,b=g}var C=s(v,new Float32Array(d)),A=s(v,new Uint16Array(_),v.ELEMENT_ARRAY_BUFFER),P=l(v,[{buffer:C,type:v.FLOAT,size:3,offset:0,stride:24},{buffer:C,type:v.FLOAT,size:3,offset:12,stride:24}],A),D=u(v);return D.attributes.position.location=0,D.attributes.normal.location=1,new f(v,C,P,D)}},6429:function(n,a,o){"use strict";n.exports=x;var s=o(8828),l=o(6760),u=o(5202),f=o(3250),c=new Array(16),h=new Array(8),v=new Array(8),d=new Array(3),_=[0,0,0];(function(){for(var E=0;E<8;++E)h[E]=[1,1,1,1],v[E]=[1,1,1]})();function T(E,S,g){for(var C=0;C<4;++C){E[C]=g[12+C];for(var A=0;A<3;++A)E[C]+=S[A]*g[4*A+C]}}var p=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function M(E){for(var S=0;S<p.length;++S)if(E=u.positive(E,p[S]),E.length<3)return 0;for(var g=E[0],C=g[0]/g[3],A=g[1]/g[3],P=0,S=1;S+1<E.length;++S){var D=E[S],z=E[S+1],O=D[0]/D[3],V=D[1]/D[3],B=z[0]/z[3],F=z[1]/z[3],N=O-C,Z=V-A,J=B-C,re=F-A;P+=Math.abs(N*re-Z*J)}return P}var b=[1,1,1],w=[0,0,0],k={cubeEdges:b,axis:w};function x(E,S,g,C,A){l(c,S,E),l(c,g,c);for(var P=0,D=0;D<2;++D){d[2]=C[D][2];for(var z=0;z<2;++z){d[1]=C[z][1];for(var O=0;O<2;++O)d[0]=C[O][0],T(h[P],d,c),P+=1}}for(var V=-1,D=0;D<8;++D){for(var B=h[D][3],F=0;F<3;++F)v[D][F]=h[D][F]/B;A&&(v[D][2]*=-1),B<0&&(V<0||v[D][2]<v[V][2])&&(V=D)}if(V<0){V=0;for(var N=0;N<3;++N){for(var Z=(N+2)%3,J=(N+1)%3,re=-1,ue=-1,fe=0;fe<2;++fe){var K=fe<<N,X=K+(fe<<Z)+(1-fe<<J),ae=K+(1-fe<<Z)+(fe<<J);f(v[K],v[X],v[ae],_)<0||(fe?re=1:ue=1)}if(re<0||ue<0){ue>re&&(V|=1<<N);continue}for(var fe=0;fe<2;++fe){var K=fe<<N,X=K+(fe<<Z)+(1-fe<<J),ae=K+(1-fe<<Z)+(fe<<J),oe=M([h[K],h[X],h[ae],h[K+(1<<Z)+(1<<J)]]);fe?re=oe:ue=oe}if(ue>re){V|=1<<N;continue}}}for(var me=7^V,xe=-1,D=0;D<8;++D)D===V||D===me||(xe<0||v[xe][1]>v[D][1])&&(xe=D);for(var ce=-1,D=0;D<3;++D){var ie=xe^1<<D;if(!(ie===V||ie===me)){ce<0&&(ce=ie);var J=v[ie];J[0]<v[ce][0]&&(ce=ie)}}for(var ge=-1,D=0;D<3;++D){var ie=xe^1<<D;if(!(ie===V||ie===me||ie===ce)){ge<0&&(ge=ie);var J=v[ie];J[0]>v[ge][0]&&(ge=ie)}}var le=b;le[0]=le[1]=le[2]=0,le[s.log2(ce^xe)]=xe&ce,le[s.log2(xe^ge)]=xe&ge;var we=ge^7;we===V||we===me?(we=ce^7,le[s.log2(ge^we)]=we&ge):le[s.log2(ce^we)]=we&ce;for(var Re=w,qe=V,N=0;N<3;++N)qe&1<<N?Re[N]=-1:Re[N]=1;return k}},501:function(n,a,o){"use strict";n.exports=b;var s=o(2762),l=o(8116),u=o(1879).n,f=[0,0,0],c=[0,0,0],h=[0,0,0],v=[0,0,0],d=[1,1];function _(w){return w[0]=w[1]=w[2]=0,w}function T(w,k){return w[0]=k[0],w[1]=k[1],w[2]=k[2],w}function p(w,k,x,E,S,g,C,A){this.gl=w,this.vertBuffer=k,this.vao=x,this.shader=E,this.tickCount=S,this.tickOffset=g,this.gridCount=C,this.gridOffset=A}var M=p.prototype;M.bind=function(w,k,x){this.shader.bind(),this.shader.uniforms.model=w,this.shader.uniforms.view=k,this.shader.uniforms.projection=x,d[0]=this.gl.drawingBufferWidth,d[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=d,this.vao.bind()},M.unbind=function(){this.vao.unbind()},M.drawAxisLine=function(w,k,x,E,S){var g=_(c);this.shader.uniforms.majorAxis=c,g[w]=k[1][w]-k[0][w],this.shader.uniforms.minorAxis=g;var C=T(v,x);C[w]+=k[0][w],this.shader.uniforms.offset=C,this.shader.uniforms.lineWidth=S,this.shader.uniforms.color=E;var A=_(h);A[(w+2)%3]=1,this.shader.uniforms.screenAxis=A,this.vao.draw(this.gl.TRIANGLES,6);var A=_(h);A[(w+1)%3]=1,this.shader.uniforms.screenAxis=A,this.vao.draw(this.gl.TRIANGLES,6)},M.drawAxisTicks=function(w,k,x,E,S){if(this.tickCount[w]){var g=_(f);g[w]=1,this.shader.uniforms.majorAxis=g,this.shader.uniforms.offset=k,this.shader.uniforms.minorAxis=x,this.shader.uniforms.color=E,this.shader.uniforms.lineWidth=S;var C=_(h);C[w]=1,this.shader.uniforms.screenAxis=C,this.vao.draw(this.gl.TRIANGLES,this.tickCount[w],this.tickOffset[w])}},M.drawGrid=function(w,k,x,E,S,g){if(this.gridCount[w]){var C=_(c);C[k]=x[1][k]-x[0][k],this.shader.uniforms.minorAxis=C;var A=T(v,E);A[k]+=x[0][k],this.shader.uniforms.offset=A;var P=_(f);P[w]=1,this.shader.uniforms.majorAxis=P;var D=_(h);D[w]=1,this.shader.uniforms.screenAxis=D,this.shader.uniforms.lineWidth=g,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,this.gridCount[w],this.gridOffset[w])}},M.drawZero=function(w,k,x,E,S,g){var C=_(c);this.shader.uniforms.majorAxis=C,C[w]=x[1][w]-x[0][w],this.shader.uniforms.minorAxis=C;var A=T(v,E);A[w]+=x[0][w],this.shader.uniforms.offset=A;var P=_(h);P[k]=1,this.shader.uniforms.screenAxis=P,this.shader.uniforms.lineWidth=g,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,6)},M.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function b(w,k,x){var E=[],S=[0,0,0],g=[0,0,0],C=[0,0,0],A=[0,0,0];E.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var P=0;P<3;++P){for(var O=E.length/3|0,D=0;D<x[P].length;++D){var z=+x[P][D].x;E.push(z,0,1,z,1,1,z,0,-1,z,0,-1,z,1,1,z,1,-1)}var B=E.length/3|0;S[P]=O,g[P]=B-O;for(var O=E.length/3|0,V=0;V<x[P].length;++V){var z=+x[P][V].x;E.push(z,0,1,z,1,1,z,0,-1,z,0,-1,z,1,1,z,1,-1)}var B=E.length/3|0;C[P]=O,A[P]=B-O}var F=s(w,new Float32Array(E)),N=l(w,[{buffer:F,type:w.FLOAT,size:3,stride:0,offset:0}]),Z=u(w);return Z.attributes.position.location=0,new p(w,F,N,Z,g,S,A,C)}},1879:function(n,a,o){"use strict";var s=o(3236),l=o(9405),u=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),f=s([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);a.n=function(_){return l(_,u,f,null,[{name:"position",type:"vec3"}])};var c=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),h=s([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);a.Q=function(_){return l(_,c,h,null,[{name:"position",type:"vec3"}])};var v=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),d=s([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);a.bg=function(_){return l(_,v,d,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},4935:function(n,a,o){"use strict";n.exports=M;var s=o(2762),l=o(8116),u=o(4359),f=o(1879).Q,c=window||process.global||{},h=c.__TEXT_CACHE||{};c.__TEXT_CACHE={};var v=3;function d(b,w,k,x){this.gl=b,this.shader=w,this.buffer=k,this.vao=x,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var _=d.prototype,T=[0,0];_.bind=function(b,w,k,x){this.vao.bind(),this.shader.bind();var E=this.shader.uniforms;E.model=b,E.view=w,E.projection=k,E.pixelScale=x,T[0]=this.gl.drawingBufferWidth,T[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=T},_.unbind=function(){this.vao.unbind()},_.update=function(b,w,k,x,E){var S=[];function g(F,N,Z,J,re,ue){var fe=h[Z];fe||(fe=h[Z]={});var K=fe[N];K||(K=fe[N]=p(N,{triangles:!0,font:Z,textAlign:"center",textBaseline:"middle",lineSpacing:re,styletags:ue}));for(var X=(J||12)/12,ae=K.positions,oe=K.cells,me=0,xe=oe.length;me<xe;++me)for(var ce=oe[me],ie=2;ie>=0;--ie){var ge=ae[ce[ie]];S.push(X*ge[0],-X*ge[1],F)}}for(var C=[0,0,0],A=[0,0,0],P=[0,0,0],D=[0,0,0],z=1.25,O={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},V=0;V<3;++V){P[V]=S.length/v|0,g(.5*(b[0][V]+b[1][V]),w[V],k[V],12,z,O),D[V]=(S.length/v|0)-P[V],C[V]=S.length/v|0;for(var B=0;B<x[V].length;++B)x[V][B].text&&g(x[V][B].x,x[V][B].text,x[V][B].font||E,x[V][B].fontSize||12,z,O);A[V]=(S.length/v|0)-C[V]}this.buffer.update(S),this.tickOffset=C,this.tickCount=A,this.labelOffset=P,this.labelCount=D},_.drawTicks=function(b,w,k,x,E,S,g,C){this.tickCount[b]&&(this.shader.uniforms.axis=S,this.shader.uniforms.color=E,this.shader.uniforms.angle=k,this.shader.uniforms.scale=w,this.shader.uniforms.offset=x,this.shader.uniforms.alignDir=g,this.shader.uniforms.alignOpt=C,this.vao.draw(this.gl.TRIANGLES,this.tickCount[b],this.tickOffset[b]))},_.drawLabel=function(b,w,k,x,E,S,g,C){this.labelCount[b]&&(this.shader.uniforms.axis=S,this.shader.uniforms.color=E,this.shader.uniforms.angle=k,this.shader.uniforms.scale=w,this.shader.uniforms.offset=x,this.shader.uniforms.alignDir=g,this.shader.uniforms.alignOpt=C,this.vao.draw(this.gl.TRIANGLES,this.labelCount[b],this.labelOffset[b]))},_.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function p(b,w){try{return u(b,w)}catch(k){return console.warn('error vectorizing text:"'+b+'" error:',k),{cells:[],positions:[]}}}function M(b,w,k,x,E,S){var g=s(b),C=l(b,[{buffer:g,size:3}]),A=f(b);A.attributes.position.location=0;var P=new d(b,A,g,C);return P.update(w,k,x,E,S),P}},6444:function(n,a){"use strict";a.create=s,a.equal=l;function o(u,f){var c=u+"",h=c.indexOf("."),v=0;h>=0&&(v=c.length-h-1);var d=Math.pow(10,v),_=Math.round(u*f*d),T=_+"";if(T.indexOf("e")>=0)return T;var p=_/d,M=_%d;_<0?(p=-Math.ceil(p)|0,M=-M|0):(p=Math.floor(p)|0,M=M|0);var b=""+p;if(_<0&&(b="-"+b),v){for(var w=""+M;w.length<v;)w="0"+w;return b+"."+w}else return b}function s(u,f){for(var c=[],h=0;h<3;++h){for(var v=[],d=.5*(u[0][h]+u[1][h]),_=0;_*f[h]<=u[1][h];++_)v.push({x:_*f[h],text:o(f[h],_)});for(var _=-1;_*f[h]>=u[0][h];--_)v.push({x:_*f[h],text:o(f[h],_)});c.push(v)}return c}function l(u,f){for(var c=0;c<3;++c){if(u[c].length!==f[c].length)return!1;for(var h=0;h<u[c].length;++h){var v=u[c][h],d=f[c][h];if(v.x!==d.x||v.text!==d.text||v.font!==d.font||v.fontColor!==d.fontColor||v.fontSize!==d.fontSize||v.dx!==d.dx||v.dy!==d.dy)return!1}}return!0}},5445:function(n,a,o){"use strict";n.exports=k;var s=o(5033),l=o(5202),u=o(6429),f=o(6760),c=o(5665),h=o(5352),v=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),d=new Float32Array(16);function _(x,E,S){this.lo=x,this.hi=E,this.pixelsPerDataUnit=S}var T=[0,0,0,1],p=[0,0,0,1];function M(x,E,S,g,C){for(var A=0;A<3;++A){for(var P=T,D=p,z=0;z<3;++z)D[z]=P[z]=S[z];D[3]=P[3]=1,D[A]+=1,h(D,D,E),D[3]<0&&(x[A]=1/0),P[A]-=1,h(P,P,E),P[3]<0&&(x[A]=1/0);var O=(P[0]/P[3]-D[0]/D[3])*g,V=(P[1]/P[3]-D[1]/D[3])*C;x[A]=.25*Math.sqrt(O*O+V*V)}return x}var b=[new _(1/0,-1/0,1/0),new _(1/0,-1/0,1/0),new _(1/0,-1/0,1/0)],w=[0,0,0];function k(x,E,S,g,V){var A=E.model||v,P=E.view||v,D=E.projection||v,z=E._ortho||!1,O=x.bounds,V=V||u(A,P,D,O,z),B=V.axis;f(d,P,A),f(d,D,d);for(var F=b,N=0;N<3;++N)F[N].lo=1/0,F[N].hi=-1/0,F[N].pixelsPerDataUnit=1/0;var Z=s(c(d,d));c(d,d);for(var J=0;J<3;++J){var re=(J+1)%3,ue=(J+2)%3,fe=w;e:for(var N=0;N<2;++N){var K=[];if(B[J]<0!=!!N){fe[J]=O[N][J];for(var X=0;X<2;++X){fe[re]=O[X^N][re];for(var ae=0;ae<2;++ae)fe[ue]=O[ae^X^N][ue],K.push(fe.slice())}for(var oe=z?5:4,X=oe;X===oe;++X){if(K.length===0)continue e;K=l.positive(K,Z[X])}for(var X=0;X<K.length;++X)for(var ue=K[X],me=M(w,d,ue,S,g),ae=0;ae<3;++ae)F[ae].lo=Math.min(F[ae].lo,ue[ae]),F[ae].hi=Math.max(F[ae].hi,ue[ae]),ae!==J&&(F[ae].pixelsPerDataUnit=Math.min(F[ae].pixelsPerDataUnit,Math.abs(me[ae])))}}}return F}},2762:function(n,a,o){"use strict";var s=o(1888),l=o(5298),u=o(9618),f=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function c(p,M,b,w,k){this.gl=p,this.type=M,this.handle=b,this.length=w,this.usage=k}var h=c.prototype;h.bind=function(){this.gl.bindBuffer(this.type,this.handle)},h.unbind=function(){this.gl.bindBuffer(this.type,null)},h.dispose=function(){this.gl.deleteBuffer(this.handle)};function v(p,M,b,w,k,x){var E=k.length*k.BYTES_PER_ELEMENT;if(x<0)return p.bufferData(M,k,w),E;if(E+x>b)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return p.bufferSubData(M,x,k),b}function d(p,M){for(var b=s.malloc(p.length,M),w=p.length,k=0;k<w;++k)b[k]=p[k];return b}function _(p,M){for(var b=1,w=M.length-1;w>=0;--w){if(M[w]!==b)return!1;b*=p[w]}return!0}h.update=function(p,M){if(typeof M!="number"&&(M=-1),this.bind(),typeof p=="object"&&typeof p.shape!="undefined"){var b=p.dtype;if(f.indexOf(b)<0&&(b="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var w=gl.getExtension("OES_element_index_uint");w&&b!=="uint16"?b="uint32":b="uint16"}if(b===p.dtype&&_(p.shape,p.stride))p.offset===0&&p.data.length===p.shape[0]?this.length=v(this.gl,this.type,this.length,this.usage,p.data,M):this.length=v(this.gl,this.type,this.length,this.usage,p.data.subarray(p.offset,p.shape[0]),M);else{var k=s.malloc(p.size,b),x=u(k,p.shape);l.assign(x,p),M<0?this.length=v(this.gl,this.type,this.length,this.usage,k,M):this.length=v(this.gl,this.type,this.length,this.usage,k.subarray(0,p.size),M),s.free(k)}}else if(Array.isArray(p)){var E;this.type===this.gl.ELEMENT_ARRAY_BUFFER?E=d(p,"uint16"):E=d(p,"float32"),M<0?this.length=v(this.gl,this.type,this.length,this.usage,E,M):this.length=v(this.gl,this.type,this.length,this.usage,E.subarray(0,p.length),M),s.free(E)}else if(typeof p=="object"&&typeof p.length=="number")this.length=v(this.gl,this.type,this.length,this.usage,p,M);else if(typeof p=="number"||p===void 0){if(M>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");p=p|0,p<=0&&(p=1),this.gl.bufferData(this.type,p|0,this.usage),this.length=p}else throw new Error("gl-buffer: Invalid data type")};function T(p,M,b,w){if(b=b||p.ARRAY_BUFFER,w=w||p.DYNAMIC_DRAW,b!==p.ARRAY_BUFFER&&b!==p.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(w!==p.DYNAMIC_DRAW&&w!==p.STATIC_DRAW&&w!==p.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var k=p.createBuffer(),x=new c(p,b,k,0,w);return x.update(M),x}n.exports=T},6405:function(n,a,o){"use strict";var s=o(2931);n.exports=function(u,f){var c=u.positions,h=u.vectors,v={positions:[],vertexIntensity:[],vertexIntensityBounds:u.vertexIntensityBounds,vectors:[],cells:[],coneOffset:u.coneOffset,colormap:u.colormap};if(u.positions.length===0)return f&&(f[0]=[0,0,0],f[1]=[0,0,0]),v;for(var d=0,_=1/0,T=-1/0,p=1/0,M=-1/0,b=1/0,w=-1/0,k=null,x=null,E=[],S=1/0,g=!1,C=0;C<c.length;C++){var A=c[C];_=Math.min(A[0],_),T=Math.max(A[0],T),p=Math.min(A[1],p),M=Math.max(A[1],M),b=Math.min(A[2],b),w=Math.max(A[2],w);var P=h[C];if(s.length(P)>d&&(d=s.length(P)),C){var D=2*s.distance(k,A)/(s.length(x)+s.length(P));D?(S=Math.min(S,D),g=!1):g=!0}g||(k=A,x=P),E.push(P)}var z=[_,p,b],O=[T,M,w];f&&(f[0]=z,f[1]=O),d===0&&(d=1);var V=1/d;isFinite(S)||(S=1),v.vectorScale=S;var B=u.coneSize||.5;u.absoluteConeSize&&(B=u.absoluteConeSize*V),v.coneScale=B;for(var C=0,F=0;C<c.length;C++)for(var A=c[C],N=A[0],Z=A[1],J=A[2],re=E[C],ue=s.length(re)*V,fe=0,K=8;fe<K;fe++){v.positions.push([N,Z,J,F++]),v.positions.push([N,Z,J,F++]),v.positions.push([N,Z,J,F++]),v.positions.push([N,Z,J,F++]),v.positions.push([N,Z,J,F++]),v.positions.push([N,Z,J,F++]),v.vectors.push(re),v.vectors.push(re),v.vectors.push(re),v.vectors.push(re),v.vectors.push(re),v.vectors.push(re),v.vertexIntensity.push(ue,ue,ue),v.vertexIntensity.push(ue,ue,ue);var X=v.positions.length;v.cells.push([X-6,X-5,X-4],[X-3,X-2,X-1])}return v};var l=o(614);n.exports.createMesh=o(9060),n.exports.createConeMesh=function(u,f){return n.exports.createMesh(u,f,{shaders:l,traceType:"cone"})}},9060:function(n,a,o){"use strict";var s=o(9405),l=o(2762),u=o(8116),f=o(7766),c=o(6760),h=o(7608),v=o(9618),d=o(6729),_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function T(E,S,g,C,A,P,D,z,O,V,B){this.gl=E,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=S,this.dirty=!0,this.triShader=g,this.pickShader=C,this.trianglePositions=A,this.triangleVectors=P,this.triangleColors=z,this.triangleUVs=O,this.triangleIds=D,this.triangleVAO=V,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=B,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=_,this._view=_,this._projection=_,this._resolution=[1,1]}var p=T.prototype;p.isOpaque=function(){return this.opacity>=1},p.isTransparent=function(){return this.opacity<1},p.pickSlots=1,p.setPickBase=function(E){this.pickId=E};function M(E){for(var S=d({colormap:E,nshades:256,format:"rgba"}),g=new Uint8Array(256*4),C=0;C<256;++C){for(var A=S[C],P=0;P<3;++P)g[4*C+P]=A[P];g[4*C+3]=A[3]*255}return v(g,[256,256,4],[4,0,1])}function b(E){for(var S=E.length,g=new Array(S),C=0;C<S;++C)g[C]=E[C][2];return g}p.update=function(E){E=E||{};var S=this.gl;this.dirty=!0,"lightPosition"in E&&(this.lightPosition=E.lightPosition),"opacity"in E&&(this.opacity=E.opacity),"ambient"in E&&(this.ambientLight=E.ambient),"diffuse"in E&&(this.diffuseLight=E.diffuse),"specular"in E&&(this.specularLight=E.specular),"roughness"in E&&(this.roughness=E.roughness),"fresnel"in E&&(this.fresnel=E.fresnel),E.tubeScale!==void 0&&(this.tubeScale=E.tubeScale),E.vectorScale!==void 0&&(this.vectorScale=E.vectorScale),E.coneScale!==void 0&&(this.coneScale=E.coneScale),E.coneOffset!==void 0&&(this.coneOffset=E.coneOffset),E.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=S.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=S.LINEAR,this.texture.setPixels(M(E.colormap)),this.texture.generateMipmap());var g=E.cells,C=E.positions,A=E.vectors;if(!(!C||!g||!A)){var P=[],D=[],z=[],O=[],V=[];this.cells=g,this.positions=C,this.vectors=A;var B=E.meshColor||[1,1,1,1],F=E.vertexIntensity,N=1/0,Z=-1/0;if(F)if(E.vertexIntensityBounds)N=+E.vertexIntensityBounds[0],Z=+E.vertexIntensityBounds[1];else for(var J=0;J<F.length;++J){var re=F[J];N=Math.min(N,re),Z=Math.max(Z,re)}else for(var J=0;J<C.length;++J){var re=C[J][2];N=Math.min(N,re),Z=Math.max(Z,re)}F?this.intensity=F:this.intensity=b(C),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var J=0;J<C.length;++J)for(var ue=C[J],fe=0;fe<3;++fe)isNaN(ue[fe])||!isFinite(ue[fe])||(this.bounds[0][fe]=Math.min(this.bounds[0][fe],ue[fe]),this.bounds[1][fe]=Math.max(this.bounds[1][fe],ue[fe]));var K=0;e:for(var J=0;J<g.length;++J){var X=g[J];switch(X.length){case 3:for(var fe=0;fe<3;++fe)for(var ae=X[fe],ue=C[ae],oe=0;oe<3;++oe)if(isNaN(ue[oe])||!isFinite(ue[oe]))continue e;for(var fe=0;fe<3;++fe){var ae=X[2-fe],ue=C[ae];P.push(ue[0],ue[1],ue[2],ue[3]);var me=A[ae];D.push(me[0],me[1],me[2],me[3]||0);var xe=B;xe.length===3?z.push(xe[0],xe[1],xe[2],1):z.push(xe[0],xe[1],xe[2],xe[3]);var ce;F?ce=[(F[ae]-N)/(Z-N),0]:ce=[(ue[2]-N)/(Z-N),0],O.push(ce[0],ce[1]),V.push(J)}K+=1;break;default:break}}this.triangleCount=K,this.trianglePositions.update(P),this.triangleVectors.update(D),this.triangleColors.update(z),this.triangleUVs.update(O),this.triangleIds.update(new Uint32Array(V))}},p.drawTransparent=p.draw=function(E){E=E||{};for(var S=this.gl,g=E.model||_,C=E.view||_,A=E.projection||_,P=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],D=0;D<3;++D)P[0][D]=Math.max(P[0][D],this.clipBounds[0][D]),P[1][D]=Math.min(P[1][D],this.clipBounds[1][D]);var z={model:g,view:C,projection:A,inverseModel:_.slice(),clipBounds:P,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};z.inverseModel=h(z.inverseModel,z.model),S.disable(S.CULL_FACE),this.texture.bind(0);var O=new Array(16);c(O,z.view,z.model),c(O,z.projection,O),h(O,O);for(var D=0;D<3;++D)z.eyePosition[D]=O[12+D]/O[15];for(var V=O[15],D=0;D<3;++D)V+=this.lightPosition[D]*O[4*D+3];for(var D=0;D<3;++D){for(var B=O[12+D],F=0;F<3;++F)B+=O[4*F+D]*this.lightPosition[F];z.lightPosition[D]=B/V}if(this.triangleCount>0){var N=this.triShader;N.bind(),N.uniforms=z,this.triangleVAO.bind(),S.drawArrays(S.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},p.drawPick=function(E){E=E||{};for(var S=this.gl,g=E.model||_,C=E.view||_,A=E.projection||_,P=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],D=0;D<3;++D)P[0][D]=Math.max(P[0][D],this.clipBounds[0][D]),P[1][D]=Math.min(P[1][D],this.clipBounds[1][D]);this._model=[].slice.call(g),this._view=[].slice.call(C),this._projection=[].slice.call(A),this._resolution=[S.drawingBufferWidth,S.drawingBufferHeight];var z={model:g,view:C,projection:A,clipBounds:P,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},O=this.pickShader;O.bind(),O.uniforms=z,this.triangleCount>0&&(this.triangleVAO.bind(),S.drawArrays(S.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},p.pick=function(E){if(!E||E.id!==this.pickId)return null;var S=E.value[0]+256*E.value[1]+65536*E.value[2],g=this.cells[S],C=this.positions[g[1]].slice(0,3),A={position:C,dataCoordinate:C,index:Math.floor(g[1]/48)};return this.traceType==="cone"?A.index=Math.floor(g[1]/48):this.traceType==="streamtube"&&(A.intensity=this.intensity[g[1]],A.velocity=this.vectors[g[1]].slice(0,3),A.divergence=this.vectors[g[1]][3],A.index=S),A},p.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function w(E,S){var g=s(E,S.meshShader.vertex,S.meshShader.fragment,null,S.meshShader.attributes);return g.attributes.position.location=0,g.attributes.color.location=2,g.attributes.uv.location=3,g.attributes.vector.location=4,g}function k(E,S){var g=s(E,S.pickShader.vertex,S.pickShader.fragment,null,S.pickShader.attributes);return g.attributes.position.location=0,g.attributes.id.location=1,g.attributes.vector.location=4,g}function x(E,S,g){var C=g.shaders;arguments.length===1&&(S=E,E=S.gl);var A=w(E,C),P=k(E,C),D=f(E,v(new Uint8Array([255,255,255,255]),[1,1,4]));D.generateMipmap(),D.minFilter=E.LINEAR_MIPMAP_LINEAR,D.magFilter=E.LINEAR;var z=l(E),O=l(E),V=l(E),B=l(E),F=l(E),N=u(E,[{buffer:z,type:E.FLOAT,size:4},{buffer:F,type:E.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:V,type:E.FLOAT,size:4},{buffer:B,type:E.FLOAT,size:2},{buffer:O,type:E.FLOAT,size:4}]),Z=new T(E,D,A,P,z,O,F,V,B,N,g.traceType||"cone");return Z.update(S),Z}n.exports=x},614:function(n,a,o){var s=o(3236),l=s([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),u=s([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),f=s([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),c=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);a.meshShader={vertex:l,fragment:u,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},a.pickShader={vertex:f,fragment:c,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},737:function(n){n.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},5171:function(n,a,o){var s=o(737);n.exports=function(u){return s[u]}},9165:function(n,a,o){"use strict";n.exports=T;var s=o(2762),l=o(8116),u=o(3436),f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function c(p,M,b,w){this.gl=p,this.shader=w,this.buffer=M,this.vao=b,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var h=c.prototype;h.isOpaque=function(){return!this.hasAlpha},h.isTransparent=function(){return this.hasAlpha},h.drawTransparent=h.draw=function(p){var M=this.gl,b=this.shader.uniforms;this.shader.bind();var w=b.view=p.view||f,k=b.projection=p.projection||f;b.model=p.model||f,b.clipBounds=this.clipBounds,b.opacity=this.opacity;var x=w[12],E=w[13],S=w[14],g=w[15],C=p._ortho||!1,A=C?2:1,P=A*this.pixelRatio*(k[3]*x+k[7]*E+k[11]*S+k[15]*g)/M.drawingBufferHeight;this.vao.bind();for(var D=0;D<3;++D)M.lineWidth(this.lineWidth[D]*this.pixelRatio),b.capSize=this.capSize[D]*P,this.lineCount[D]&&M.drawArrays(M.LINES,this.lineOffset[D],this.lineCount[D]);this.vao.unbind()};function v(p,M){for(var b=0;b<3;++b)p[0][b]=Math.min(p[0][b],M[b]),p[1][b]=Math.max(p[1][b],M[b])}var d=function(){for(var p=new Array(3),M=0;M<3;++M){for(var b=[],w=1;w<=2;++w)for(var k=-1;k<=1;k+=2){var x=(w+M)%3,E=[0,0,0];E[x]=k,b.push(E)}p[M]=b}return p}();function _(p,M,b,w){for(var k=d[w],x=0;x<k.length;++x){var E=k[x];p.push(M[0],M[1],M[2],b[0],b[1],b[2],b[3],E[0],E[1],E[2])}return k.length}h.update=function(p){p=p||{},"lineWidth"in p&&(this.lineWidth=p.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in p&&(this.capSize=p.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in p&&(this.opacity=+p.opacity,this.opacity<1&&(this.hasAlpha=!0));var M=p.color||[[0,0,0],[0,0,0],[0,0,0]],b=p.position,w=p.error;if(Array.isArray(M[0])||(M=[M,M,M]),b&&w){var k=[],x=b.length,E=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var S=0;S<3;++S){this.lineOffset[S]=E;e:for(var g=0;g<x;++g){for(var C=b[g],A=0;A<3;++A)if(isNaN(C[A])||!isFinite(C[A]))continue e;var P=w[g],D=M[S];if(Array.isArray(D[0])&&(D=M[g]),D.length===3?D=[D[0],D[1],D[2],1]:D.length===4&&(D=[D[0],D[1],D[2],D[3]],!this.hasAlpha&&D[3]<1&&(this.hasAlpha=!0)),!(isNaN(P[0][S])||isNaN(P[1][S]))){if(P[0][S]<0){var z=C.slice();z[S]+=P[0][S],k.push(C[0],C[1],C[2],D[0],D[1],D[2],D[3],0,0,0,z[0],z[1],z[2],D[0],D[1],D[2],D[3],0,0,0),v(this.bounds,z),E+=2+_(k,z,D,S)}if(P[1][S]>0){var z=C.slice();z[S]+=P[1][S],k.push(C[0],C[1],C[2],D[0],D[1],D[2],D[3],0,0,0,z[0],z[1],z[2],D[0],D[1],D[2],D[3],0,0,0),v(this.bounds,z),E+=2+_(k,z,D,S)}}}this.lineCount[S]=E-this.lineOffset[S]}this.buffer.update(k)}},h.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function T(p){var M=p.gl,b=s(M),w=l(M,[{buffer:b,type:M.FLOAT,size:3,offset:0,stride:40},{buffer:b,type:M.FLOAT,size:4,offset:12,stride:40},{buffer:b,type:M.FLOAT,size:3,offset:28,stride:40}]),k=u(M);k.attributes.position.location=0,k.attributes.color.location=1,k.attributes.offset.location=2;var x=new c(M,b,w,k);return x.update(p),x}},3436:function(n,a,o){"use strict";var s=o(3236),l=o(9405),u=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),f=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);n.exports=function(c){return l(c,u,f,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},2260:function(n,a,o){"use strict";var s=o(7766);n.exports=E;var l=null,u,f,c,h;function v(S){var g=S.getParameter(S.FRAMEBUFFER_BINDING),C=S.getParameter(S.RENDERBUFFER_BINDING),A=S.getParameter(S.TEXTURE_BINDING_2D);return[g,C,A]}function d(S,g){S.bindFramebuffer(S.FRAMEBUFFER,g[0]),S.bindRenderbuffer(S.RENDERBUFFER,g[1]),S.bindTexture(S.TEXTURE_2D,g[2])}function _(S,g){var C=S.getParameter(g.MAX_COLOR_ATTACHMENTS_WEBGL);l=new Array(C+1);for(var A=0;A<=C;++A){for(var P=new Array(C),D=0;D<A;++D)P[D]=S.COLOR_ATTACHMENT0+D;for(var D=A;D<C;++D)P[D]=S.NONE;l[A]=P}}function T(S){switch(S){case u:throw new Error("gl-fbo: Framebuffer unsupported");case f:throw new Error("gl-fbo: Framebuffer incomplete attachment");case c:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case h:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function p(S,g,C,A,P,D){if(!A)return null;var z=s(S,g,C,P,A);return z.magFilter=S.NEAREST,z.minFilter=S.NEAREST,z.mipSamples=1,z.bind(),S.framebufferTexture2D(S.FRAMEBUFFER,D,S.TEXTURE_2D,z.handle,0),z}function M(S,g,C,A,P){var D=S.createRenderbuffer();return S.bindRenderbuffer(S.RENDERBUFFER,D),S.renderbufferStorage(S.RENDERBUFFER,A,g,C),S.framebufferRenderbuffer(S.FRAMEBUFFER,P,S.RENDERBUFFER,D),D}function b(S){var g=v(S.gl),C=S.gl,A=S.handle=C.createFramebuffer(),P=S._shape[0],D=S._shape[1],z=S.color.length,O=S._ext,V=S._useStencil,B=S._useDepth,F=S._colorType;C.bindFramebuffer(C.FRAMEBUFFER,A);for(var N=0;N<z;++N)S.color[N]=p(C,P,D,F,C.RGBA,C.COLOR_ATTACHMENT0+N);z===0?(S._color_rb=M(C,P,D,C.RGBA4,C.COLOR_ATTACHMENT0),O&&O.drawBuffersWEBGL(l[0])):z>1&&O.drawBuffersWEBGL(l[z]);var Z=C.getExtension("WEBGL_depth_texture");Z?V?S.depth=p(C,P,D,Z.UNSIGNED_INT_24_8_WEBGL,C.DEPTH_STENCIL,C.DEPTH_STENCIL_ATTACHMENT):B&&(S.depth=p(C,P,D,C.UNSIGNED_SHORT,C.DEPTH_COMPONENT,C.DEPTH_ATTACHMENT)):B&&V?S._depth_rb=M(C,P,D,C.DEPTH_STENCIL,C.DEPTH_STENCIL_ATTACHMENT):B?S._depth_rb=M(C,P,D,C.DEPTH_COMPONENT16,C.DEPTH_ATTACHMENT):V&&(S._depth_rb=M(C,P,D,C.STENCIL_INDEX,C.STENCIL_ATTACHMENT));var J=C.checkFramebufferStatus(C.FRAMEBUFFER);if(J!==C.FRAMEBUFFER_COMPLETE){S._destroyed=!0,C.bindFramebuffer(C.FRAMEBUFFER,null),C.deleteFramebuffer(S.handle),S.handle=null,S.depth&&(S.depth.dispose(),S.depth=null),S._depth_rb&&(C.deleteRenderbuffer(S._depth_rb),S._depth_rb=null);for(var N=0;N<S.color.length;++N)S.color[N].dispose(),S.color[N]=null;S._color_rb&&(C.deleteRenderbuffer(S._color_rb),S._color_rb=null),d(C,g),T(J)}d(C,g)}function w(S,g,C,A,P,D,z,O){this.gl=S,this._shape=[g|0,C|0],this._destroyed=!1,this._ext=O,this.color=new Array(P);for(var V=0;V<P;++V)this.color[V]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=A,this._useDepth=D,this._useStencil=z;var B=this,F=[g|0,C|0];Object.defineProperties(F,{0:{get:function(){return B._shape[0]},set:function(N){return B.width=N}},1:{get:function(){return B._shape[1]},set:function(N){return B.height=N}}}),this._shapeVector=F,b(this)}var k=w.prototype;function x(S,g,C){if(S._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(S._shape[0]===g&&S._shape[1]===C)){var A=S.gl,P=A.getParameter(A.MAX_RENDERBUFFER_SIZE);if(g<0||g>P||C<0||C>P)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");S._shape[0]=g,S._shape[1]=C;for(var D=v(A),z=0;z<S.color.length;++z)S.color[z].shape=S._shape;S._color_rb&&(A.bindRenderbuffer(A.RENDERBUFFER,S._color_rb),A.renderbufferStorage(A.RENDERBUFFER,A.RGBA4,S._shape[0],S._shape[1])),S.depth&&(S.depth.shape=S._shape),S._depth_rb&&(A.bindRenderbuffer(A.RENDERBUFFER,S._depth_rb),S._useDepth&&S._useStencil?A.renderbufferStorage(A.RENDERBUFFER,A.DEPTH_STENCIL,S._shape[0],S._shape[1]):S._useDepth?A.renderbufferStorage(A.RENDERBUFFER,A.DEPTH_COMPONENT16,S._shape[0],S._shape[1]):S._useStencil&&A.renderbufferStorage(A.RENDERBUFFER,A.STENCIL_INDEX,S._shape[0],S._shape[1])),A.bindFramebuffer(A.FRAMEBUFFER,S.handle);var O=A.checkFramebufferStatus(A.FRAMEBUFFER);O!==A.FRAMEBUFFER_COMPLETE&&(S.dispose(),d(A,D),T(O)),d(A,D)}}Object.defineProperties(k,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(S){if(Array.isArray(S)||(S=[S|0,S|0]),S.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var g=S[0]|0,C=S[1]|0;return x(this,g,C),[g,C]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(S){return S=S|0,x(this,S,this._shape[1]),S},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(S){return S=S|0,x(this,this._shape[0],S),S},enumerable:!1}}),k.bind=function(){if(!this._destroyed){var S=this.gl;S.bindFramebuffer(S.FRAMEBUFFER,this.handle),S.viewport(0,0,this._shape[0],this._shape[1])}},k.dispose=function(){if(!this._destroyed){this._destroyed=!0;var S=this.gl;S.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(S.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var g=0;g<this.color.length;++g)this.color[g].dispose(),this.color[g]=null;this._color_rb&&(S.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function E(S,g,C,A){u||(u=S.FRAMEBUFFER_UNSUPPORTED,f=S.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,c=S.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,h=S.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var P=S.getExtension("WEBGL_draw_buffers");if(!l&&P&&_(S,P),Array.isArray(g)&&(A=C,C=g[1]|0,g=g[0]|0),typeof g!="number")throw new Error("gl-fbo: Missing shape parameter");var D=S.getParameter(S.MAX_RENDERBUFFER_SIZE);if(g<0||g>D||C<0||C>D)throw new Error("gl-fbo: Parameters are too large for FBO");A=A||{};var z=1;if("color"in A){if(z=Math.max(A.color|0,0),z<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(z>1)if(P){if(z>S.getParameter(P.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+z+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var O=S.UNSIGNED_BYTE,V=S.getExtension("OES_texture_float");if(A.float&&z>0){if(!V)throw new Error("gl-fbo: Context does not support floating point textures");O=S.FLOAT}else A.preferFloat&&z>0&&V&&(O=S.FLOAT);var B=!0;"depth"in A&&(B=!!A.depth);var F=!1;return"stencil"in A&&(F=!!A.stencil),new w(S,g,C,O,z,B,F,P)}},2992:function(n,a,o){var s=o(3387).sprintf,l=o(5171),u=o(1848),f=o(1085);n.exports=c;function c(h,v,d){"use strict";var _=u(v)||"of unknown name (see npm glsl-shader-name)",T="unknown type";d!==void 0&&(T=d===l.FRAGMENT_SHADER?"fragment":"vertex");for(var p=s(`Error compiling %s shader %s:
`,T,_),M=s("%s%s",p,h),b=h.split(`
`),w={},k=0;k<b.length;k++){var x=b[k];if(!(x===""||x==="\0")){var E=parseInt(x.split(":")[2]);if(isNaN(E))throw new Error(s("Could not parse error: %s",x));w[E]=x}}for(var S=f(v).split(`
`),k=0;k<S.length;k++)if(!(!w[k+3]&&!w[k+2]&&!w[k+1])){var g=S[k];if(p+=g+`
`,w[k+1]){var C=w[k+1];C=C.substr(C.split(":",3).join(":").length+1).trim(),p+=s(`^^^ %s

`,C)}}return{long:p.trim(),short:M.trim()}}},2510:function(n,a,o){"use strict";n.exports=T;var s=o(2478),l=o(7762),u=o(1888),f=o(9405),c=o(2762),h=o(6768);function v(p,M,b,w,k,x,E){this.plot=p,this.shader=M,this.pickShader=b,this.positionBuffer=w,this.weightBuffer=k,this.colorBuffer=x,this.idBuffer=E,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var d=v.prototype,_=[0,0,1,0,0,1,1,0,1,1,0,1];d.draw=function(){var p=[1,0,0,0,1,0,0,0,1];return function(){var M=this.plot,b=this.shader,w=this.bounds,k=this.numVertices;if(!(k<=0)){var x=M.gl,E=M.dataBox,S=w[2]-w[0],g=w[3]-w[1],C=E[2]-E[0],A=E[3]-E[1];p[0]=2*S/C,p[4]=2*g/A,p[6]=2*(w[0]-E[0])/C-1,p[7]=2*(w[1]-E[1])/A-1,b.bind();var P=b.uniforms;P.viewTransform=p,P.shape=this.shape;var D=b.attributes;this.positionBuffer.bind(),D.position.pointer(),this.weightBuffer.bind(),D.weight.pointer(x.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),D.color.pointer(x.UNSIGNED_BYTE,!0),x.drawArrays(x.TRIANGLES,0,k)}}}(),d.drawPick=function(){var p=[1,0,0,0,1,0,0,0,1],M=[0,0,0,0];return function(b){var w=this.plot,k=this.pickShader,x=this.bounds,E=this.numVertices;if(!(E<=0)){var S=w.gl,g=w.dataBox,C=x[2]-x[0],A=x[3]-x[1],P=g[2]-g[0],D=g[3]-g[1];p[0]=2*C/P,p[4]=2*A/D,p[6]=2*(x[0]-g[0])/P-1,p[7]=2*(x[1]-g[1])/D-1;for(var z=0;z<4;++z)M[z]=b>>z*8&255;this.pickOffset=b,k.bind();var O=k.uniforms;O.viewTransform=p,O.pickOffset=M,O.shape=this.shape;var V=k.attributes;return this.positionBuffer.bind(),V.position.pointer(),this.weightBuffer.bind(),V.weight.pointer(S.UNSIGNED_BYTE,!1),this.idBuffer.bind(),V.pickId.pointer(S.UNSIGNED_BYTE,!1),S.drawArrays(S.TRIANGLES,0,E),b+this.shape[0]*this.shape[1]}}}(),d.pick=function(p,M,b){var w=this.pickOffset,k=this.shape[0]*this.shape[1];if(b<w||b>=w+k)return null;var x=b-w,E=this.xData,S=this.yData;return{object:this,pointId:x,dataCoord:[E[x%this.shape[0]],S[x/this.shape[0]|0]]}},d.update=function(p){p=p||{};var M=p.shape||[0,0],b=p.x||l(M[0]),w=p.y||l(M[1]),k=p.z||new Float32Array(M[0]*M[1]),x=p.zsmooth!==!1;this.xData=b,this.yData=w;var E=p.colorLevels||[0],S=p.colorValues||[0,0,0,1],g=E.length,C=this.bounds,A,P,D,z;x?(A=C[0]=b[0],P=C[1]=w[0],D=C[2]=b[b.length-1],z=C[3]=w[w.length-1]):(A=C[0]=b[0]+(b[1]-b[0])/2,P=C[1]=w[0]+(w[1]-w[0])/2,D=C[2]=b[b.length-1]+(b[b.length-1]-b[b.length-2])/2,z=C[3]=w[w.length-1]+(w[w.length-1]-w[w.length-2])/2);var O=1/(D-A),V=1/(z-P),B=M[0],F=M[1];this.shape=[B,F];var N=(x?(B-1)*(F-1):B*F)*(_.length>>>1);this.numVertices=N;for(var Z=u.mallocUint8(N*4),J=u.mallocFloat32(N*2),re=u.mallocUint8(N*2),ue=u.mallocUint32(N),fe=0,K=x?B-1:B,X=x?F-1:F,ae=0;ae<X;++ae){var oe,me;x?(oe=V*(w[ae]-P),me=V*(w[ae+1]-P)):(oe=ae<F-1?V*(w[ae]-(w[ae+1]-w[ae])/2-P):V*(w[ae]-(w[ae]-w[ae-1])/2-P),me=ae<F-1?V*(w[ae]+(w[ae+1]-w[ae])/2-P):V*(w[ae]+(w[ae]-w[ae-1])/2-P));for(var xe=0;xe<K;++xe){var ce,ie;x?(ce=O*(b[xe]-A),ie=O*(b[xe+1]-A)):(ce=xe<B-1?O*(b[xe]-(b[xe+1]-b[xe])/2-A):O*(b[xe]-(b[xe]-b[xe-1])/2-A),ie=xe<B-1?O*(b[xe]+(b[xe+1]-b[xe])/2-A):O*(b[xe]+(b[xe]-b[xe-1])/2-A));for(var ge=0;ge<_.length;ge+=2){var le=_[ge],we=_[ge+1],Re=x?(ae+we)*B+(xe+le):ae*B+xe,qe=k[Re],et=s.le(E,qe),Pe,Ie,ut,ft;if(et<0)Pe=S[0],Ie=S[1],ut=S[2],ft=S[3];else if(et===g-1)Pe=S[4*g-4],Ie=S[4*g-3],ut=S[4*g-2],ft=S[4*g-1];else{var je=(qe-E[et])/(E[et+1]-E[et]),_t=1-je,Bt=4*et,Lt=4*(et+1);Pe=_t*S[Bt]+je*S[Lt],Ie=_t*S[Bt+1]+je*S[Lt+1],ut=_t*S[Bt+2]+je*S[Lt+2],ft=_t*S[Bt+3]+je*S[Lt+3]}Z[4*fe]=255*Pe,Z[4*fe+1]=255*Ie,Z[4*fe+2]=255*ut,Z[4*fe+3]=255*ft,J[2*fe]=ce*.5+ie*.5,J[2*fe+1]=oe*.5+me*.5,re[2*fe]=le,re[2*fe+1]=we,ue[fe]=ae*B+xe,fe+=1}}}this.positionBuffer.update(J),this.weightBuffer.update(re),this.colorBuffer.update(Z),this.idBuffer.update(ue),u.free(J),u.free(Z),u.free(re),u.free(ue)},d.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function T(p,M){var b=p.gl,w=f(b,h.vertex,h.fragment),k=f(b,h.pickVertex,h.pickFragment),x=c(b),E=c(b),S=c(b),g=c(b),C=new v(p,w,k,x,E,S,g);return C.update(M),p.addObject(C),C}},6768:function(n,a,o){"use strict";var s=o(3236);n.exports={fragment:s([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:s([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},7319:function(n,a,o){var s=o(3236),l=o(9405),u=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),f=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),c=s([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),h=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];a.createShader=function(v){return l(v,u,f,null,h)},a.createPickShader=function(v){return l(v,u,c,null,h)}},5714:function(n,a,o){"use strict";n.exports=S;var s=o(2762),l=o(8116),u=o(7766),f=new Uint8Array(4),c=new Float32Array(f.buffer);function h(g,C,A,P){return f[0]=P,f[1]=A,f[2]=C,f[3]=g,c[0]}var v=o(2478),d=o(9618),_=o(7319),T=_.createShader,p=_.createPickShader,M=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function b(g,C){for(var A=0,P=0;P<3;++P){var D=g[P]-C[P];A+=D*D}return Math.sqrt(A)}function w(g){for(var C=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],A=0;A<3;++A)C[0][A]=Math.max(g[0][A],C[0][A]),C[1][A]=Math.min(g[1][A],C[1][A]);return C}function k(g,C,A,P){this.arcLength=g,this.position=C,this.index=A,this.dataCoordinate=P}function x(g,C,A,P,D,z){this.gl=g,this.shader=C,this.pickShader=A,this.buffer=P,this.vao=D,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=z,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var E=x.prototype;E.isTransparent=function(){return this.hasAlpha},E.isOpaque=function(){return!this.hasAlpha},E.pickSlots=1,E.setPickBase=function(g){this.pickId=g},E.drawTransparent=E.draw=function(g){if(this.vertexCount){var C=this.gl,A=this.shader,P=this.vao;A.bind(),A.uniforms={model:g.model||M,view:g.view||M,projection:g.projection||M,clipBounds:w(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[C.drawingBufferWidth,C.drawingBufferHeight],pixelRatio:this.pixelRatio},P.bind(),P.draw(C.TRIANGLE_STRIP,this.vertexCount),P.unbind()}},E.drawPick=function(g){if(this.vertexCount){var C=this.gl,A=this.pickShader,P=this.vao;A.bind(),A.uniforms={model:g.model||M,view:g.view||M,projection:g.projection||M,pickId:this.pickId,clipBounds:w(this.clipBounds),screenShape:[C.drawingBufferWidth,C.drawingBufferHeight],pixelRatio:this.pixelRatio},P.bind(),P.draw(C.TRIANGLE_STRIP,this.vertexCount),P.unbind()}},E.update=function(g){var C,A;this.dirty=!0;var P=!!g.connectGaps;"dashScale"in g&&(this.dashScale=g.dashScale),this.hasAlpha=!1,"opacity"in g&&(this.opacity=+g.opacity,this.opacity<1&&(this.hasAlpha=!0));var D=[],z=[],O=[],V=0,B=0,F=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],N=g.position||g.positions;if(N){var Z=g.color||g.colors||[0,0,0,1],J=g.lineWidth||1,re=!1;e:for(C=1;C<N.length;++C){var ue=N[C-1],fe=N[C];for(z.push(V),O.push(ue.slice()),A=0;A<3;++A){if(isNaN(ue[A])||isNaN(fe[A])||!isFinite(ue[A])||!isFinite(fe[A])){if(!P&&D.length>0){for(var K=0;K<24;++K)D.push(D[D.length-12]);B+=2,re=!0}continue e}F[0][A]=Math.min(F[0][A],ue[A],fe[A]),F[1][A]=Math.max(F[1][A],ue[A],fe[A])}var X,ae;Array.isArray(Z[0])?(X=Z.length>C-1?Z[C-1]:Z.length>0?Z[Z.length-1]:[0,0,0,1],ae=Z.length>C?Z[C]:Z.length>0?Z[Z.length-1]:[0,0,0,1]):X=ae=Z,X.length===3&&(X=[X[0],X[1],X[2],1]),ae.length===3&&(ae=[ae[0],ae[1],ae[2],1]),!this.hasAlpha&&X[3]<1&&(this.hasAlpha=!0);var oe;Array.isArray(J)?oe=J.length>C-1?J[C-1]:J.length>0?J[J.length-1]:[0,0,0,1]:oe=J;var me=V;if(V+=b(ue,fe),re){for(A=0;A<2;++A)D.push(ue[0],ue[1],ue[2],fe[0],fe[1],fe[2],me,oe,X[0],X[1],X[2],X[3]);B+=2,re=!1}D.push(ue[0],ue[1],ue[2],fe[0],fe[1],fe[2],me,oe,X[0],X[1],X[2],X[3],ue[0],ue[1],ue[2],fe[0],fe[1],fe[2],me,-oe,X[0],X[1],X[2],X[3],fe[0],fe[1],fe[2],ue[0],ue[1],ue[2],V,-oe,ae[0],ae[1],ae[2],ae[3],fe[0],fe[1],fe[2],ue[0],ue[1],ue[2],V,oe,ae[0],ae[1],ae[2],ae[3]),B+=4}}if(this.buffer.update(D),z.push(V),O.push(N[N.length-1].slice()),this.bounds=F,this.vertexCount=B,this.points=O,this.arcLength=z,"dashes"in g){var xe=g.dashes,ce=xe.slice();for(ce.unshift(0),C=1;C<ce.length;++C)ce[C]=ce[C-1]+ce[C];var ie=d(new Array(256*4),[256,1,4]);for(C=0;C<256;++C){for(A=0;A<4;++A)ie.set(C,0,A,0);v.le(ce,ce[ce.length-1]*C/255)&1?ie.set(C,0,0,0):ie.set(C,0,0,255)}this.texture.setPixels(ie)}},E.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},E.pick=function(g){if(!g||g.id!==this.pickId)return null;var C=h(g.value[0],g.value[1],g.value[2],0),A=v.le(this.arcLength,C);if(A<0)return null;if(A===this.arcLength.length-1)return new k(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),A);for(var P=this.points[A],D=this.points[Math.min(A+1,this.points.length-1)],z=(C-this.arcLength[A])/(this.arcLength[A+1]-this.arcLength[A]),O=1-z,V=[0,0,0],B=0;B<3;++B)V[B]=O*P[B]+z*D[B];var F=Math.min(z<.5?A:A+1,this.points.length-1);return new k(C,V,F,this.points[F])};function S(g){var C=g.gl||g.scene&&g.scene.gl,A=T(C);A.attributes.position.location=0,A.attributes.nextPosition.location=1,A.attributes.arcLength.location=2,A.attributes.lineWidth.location=3,A.attributes.color.location=4;var P=p(C);P.attributes.position.location=0,P.attributes.nextPosition.location=1,P.attributes.arcLength.location=2,P.attributes.lineWidth.location=3,P.attributes.color.location=4;for(var D=s(C),z=l(C,[{buffer:D,size:3,offset:0,stride:48},{buffer:D,size:3,offset:12,stride:48},{buffer:D,size:1,offset:24,stride:48},{buffer:D,size:1,offset:28,stride:48},{buffer:D,size:4,offset:32,stride:48}]),O=d(new Array(256*4),[256,1,4]),V=0;V<1024;++V)O.data[V]=255;var B=u(C,O);B.wrap=C.REPEAT;var F=new x(C,A,P,D,z,B);return F.update(g),F}},1903:function(n){n.exports=a;function a(o){var s=new Float32Array(16);return s[0]=o[0],s[1]=o[1],s[2]=o[2],s[3]=o[3],s[4]=o[4],s[5]=o[5],s[6]=o[6],s[7]=o[7],s[8]=o[8],s[9]=o[9],s[10]=o[10],s[11]=o[11],s[12]=o[12],s[13]=o[13],s[14]=o[14],s[15]=o[15],s}},6864:function(n){n.exports=a;function a(){var o=new Float32Array(16);return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},9921:function(n){n.exports=a;function a(o){var s=o[0],l=o[1],u=o[2],f=o[3],c=o[4],h=o[5],v=o[6],d=o[7],_=o[8],T=o[9],p=o[10],M=o[11],b=o[12],w=o[13],k=o[14],x=o[15],E=s*h-l*c,S=s*v-u*c,g=s*d-f*c,C=l*v-u*h,A=l*d-f*h,P=u*d-f*v,D=_*w-T*b,z=_*k-p*b,O=_*x-M*b,V=T*k-p*w,B=T*x-M*w,F=p*x-M*k;return E*F-S*B+g*V+C*O-A*z+P*D}},7399:function(n){n.exports=a;function a(o,s){var l=s[0],u=s[1],f=s[2],c=s[3],h=l+l,v=u+u,d=f+f,_=l*h,T=u*h,p=u*v,M=f*h,b=f*v,w=f*d,k=c*h,x=c*v,E=c*d;return o[0]=1-p-w,o[1]=T+E,o[2]=M-x,o[3]=0,o[4]=T-E,o[5]=1-_-w,o[6]=b+k,o[7]=0,o[8]=M+x,o[9]=b-k,o[10]=1-_-p,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},6743:function(n){n.exports=a;function a(o,s,l){var u=s[0],f=s[1],c=s[2],h=s[3],v=u+u,d=f+f,_=c+c,T=u*v,p=u*d,M=u*_,b=f*d,w=f*_,k=c*_,x=h*v,E=h*d,S=h*_;return o[0]=1-(b+k),o[1]=p+S,o[2]=M-E,o[3]=0,o[4]=p-S,o[5]=1-(T+k),o[6]=w+x,o[7]=0,o[8]=M+E,o[9]=w-x,o[10]=1-(T+b),o[11]=0,o[12]=l[0],o[13]=l[1],o[14]=l[2],o[15]=1,o}},7894:function(n){n.exports=a;function a(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},7608:function(n){n.exports=a;function a(o,s){var l=s[0],u=s[1],f=s[2],c=s[3],h=s[4],v=s[5],d=s[6],_=s[7],T=s[8],p=s[9],M=s[10],b=s[11],w=s[12],k=s[13],x=s[14],E=s[15],S=l*v-u*h,g=l*d-f*h,C=l*_-c*h,A=u*d-f*v,P=u*_-c*v,D=f*_-c*d,z=T*k-p*w,O=T*x-M*w,V=T*E-b*w,B=p*x-M*k,F=p*E-b*k,N=M*E-b*x,Z=S*N-g*F+C*B+A*V-P*O+D*z;return Z?(Z=1/Z,o[0]=(v*N-d*F+_*B)*Z,o[1]=(f*F-u*N-c*B)*Z,o[2]=(k*D-x*P+E*A)*Z,o[3]=(M*P-p*D-b*A)*Z,o[4]=(d*V-h*N-_*O)*Z,o[5]=(l*N-f*V+c*O)*Z,o[6]=(x*C-w*D-E*g)*Z,o[7]=(T*D-M*C+b*g)*Z,o[8]=(h*F-v*V+_*z)*Z,o[9]=(u*V-l*F-c*z)*Z,o[10]=(w*P-k*C+E*S)*Z,o[11]=(p*C-T*P-b*S)*Z,o[12]=(v*O-h*B-d*z)*Z,o[13]=(l*B-u*O+f*z)*Z,o[14]=(k*g-w*A-x*S)*Z,o[15]=(T*A-p*g+M*S)*Z,o):null}},6582:function(n,a,o){var s=o(7894);n.exports=l;function l(u,f,c,h){var v,d,_,T,p,M,b,w,k,x,E=f[0],S=f[1],g=f[2],C=h[0],A=h[1],P=h[2],D=c[0],z=c[1],O=c[2];return Math.abs(E-D)<1e-6&&Math.abs(S-z)<1e-6&&Math.abs(g-O)<1e-6?s(u):(b=E-D,w=S-z,k=g-O,x=1/Math.sqrt(b*b+w*w+k*k),b*=x,w*=x,k*=x,v=A*k-P*w,d=P*b-C*k,_=C*w-A*b,x=Math.sqrt(v*v+d*d+_*_),x?(x=1/x,v*=x,d*=x,_*=x):(v=0,d=0,_=0),T=w*_-k*d,p=k*v-b*_,M=b*d-w*v,x=Math.sqrt(T*T+p*p+M*M),x?(x=1/x,T*=x,p*=x,M*=x):(T=0,p=0,M=0),u[0]=v,u[1]=T,u[2]=b,u[3]=0,u[4]=d,u[5]=p,u[6]=w,u[7]=0,u[8]=_,u[9]=M,u[10]=k,u[11]=0,u[12]=-(v*E+d*S+_*g),u[13]=-(T*E+p*S+M*g),u[14]=-(b*E+w*S+k*g),u[15]=1,u)}},6760:function(n){n.exports=a;function a(o,s,l){var u=s[0],f=s[1],c=s[2],h=s[3],v=s[4],d=s[5],_=s[6],T=s[7],p=s[8],M=s[9],b=s[10],w=s[11],k=s[12],x=s[13],E=s[14],S=s[15],g=l[0],C=l[1],A=l[2],P=l[3];return o[0]=g*u+C*v+A*p+P*k,o[1]=g*f+C*d+A*M+P*x,o[2]=g*c+C*_+A*b+P*E,o[3]=g*h+C*T+A*w+P*S,g=l[4],C=l[5],A=l[6],P=l[7],o[4]=g*u+C*v+A*p+P*k,o[5]=g*f+C*d+A*M+P*x,o[6]=g*c+C*_+A*b+P*E,o[7]=g*h+C*T+A*w+P*S,g=l[8],C=l[9],A=l[10],P=l[11],o[8]=g*u+C*v+A*p+P*k,o[9]=g*f+C*d+A*M+P*x,o[10]=g*c+C*_+A*b+P*E,o[11]=g*h+C*T+A*w+P*S,g=l[12],C=l[13],A=l[14],P=l[15],o[12]=g*u+C*v+A*p+P*k,o[13]=g*f+C*d+A*M+P*x,o[14]=g*c+C*_+A*b+P*E,o[15]=g*h+C*T+A*w+P*S,o}},4040:function(n){n.exports=a;function a(o,s,l,u,f,c,h){var v=1/(s-l),d=1/(u-f),_=1/(c-h);return o[0]=-2*v,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*d,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*_,o[11]=0,o[12]=(s+l)*v,o[13]=(f+u)*d,o[14]=(h+c)*_,o[15]=1,o}},4772:function(n){n.exports=a;function a(o,s,l,u,f){var c=1/Math.tan(s/2),h=1/(u-f);return o[0]=c/l,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=c,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(f+u)*h,o[11]=-1,o[12]=0,o[13]=0,o[14]=2*f*u*h,o[15]=0,o}},6079:function(n){n.exports=a;function a(o,s,l,u){var f=u[0],c=u[1],h=u[2],v=Math.sqrt(f*f+c*c+h*h),d,_,T,p,M,b,w,k,x,E,S,g,C,A,P,D,z,O,V,B,F,N,Z,J;return Math.abs(v)<1e-6?null:(v=1/v,f*=v,c*=v,h*=v,d=Math.sin(l),_=Math.cos(l),T=1-_,p=s[0],M=s[1],b=s[2],w=s[3],k=s[4],x=s[5],E=s[6],S=s[7],g=s[8],C=s[9],A=s[10],P=s[11],D=f*f*T+_,z=c*f*T+h*d,O=h*f*T-c*d,V=f*c*T-h*d,B=c*c*T+_,F=h*c*T+f*d,N=f*h*T+c*d,Z=c*h*T-f*d,J=h*h*T+_,o[0]=p*D+k*z+g*O,o[1]=M*D+x*z+C*O,o[2]=b*D+E*z+A*O,o[3]=w*D+S*z+P*O,o[4]=p*V+k*B+g*F,o[5]=M*V+x*B+C*F,o[6]=b*V+E*B+A*F,o[7]=w*V+S*B+P*F,o[8]=p*N+k*Z+g*J,o[9]=M*N+x*Z+C*J,o[10]=b*N+E*Z+A*J,o[11]=w*N+S*Z+P*J,s!==o&&(o[12]=s[12],o[13]=s[13],o[14]=s[14],o[15]=s[15]),o)}},5567:function(n){n.exports=a;function a(o,s,l){var u=Math.sin(l),f=Math.cos(l),c=s[4],h=s[5],v=s[6],d=s[7],_=s[8],T=s[9],p=s[10],M=s[11];return s!==o&&(o[0]=s[0],o[1]=s[1],o[2]=s[2],o[3]=s[3],o[12]=s[12],o[13]=s[13],o[14]=s[14],o[15]=s[15]),o[4]=c*f+_*u,o[5]=h*f+T*u,o[6]=v*f+p*u,o[7]=d*f+M*u,o[8]=_*f-c*u,o[9]=T*f-h*u,o[10]=p*f-v*u,o[11]=M*f-d*u,o}},2408:function(n){n.exports=a;function a(o,s,l){var u=Math.sin(l),f=Math.cos(l),c=s[0],h=s[1],v=s[2],d=s[3],_=s[8],T=s[9],p=s[10],M=s[11];return s!==o&&(o[4]=s[4],o[5]=s[5],o[6]=s[6],o[7]=s[7],o[12]=s[12],o[13]=s[13],o[14]=s[14],o[15]=s[15]),o[0]=c*f-_*u,o[1]=h*f-T*u,o[2]=v*f-p*u,o[3]=d*f-M*u,o[8]=c*u+_*f,o[9]=h*u+T*f,o[10]=v*u+p*f,o[11]=d*u+M*f,o}},7089:function(n){n.exports=a;function a(o,s,l){var u=Math.sin(l),f=Math.cos(l),c=s[0],h=s[1],v=s[2],d=s[3],_=s[4],T=s[5],p=s[6],M=s[7];return s!==o&&(o[8]=s[8],o[9]=s[9],o[10]=s[10],o[11]=s[11],o[12]=s[12],o[13]=s[13],o[14]=s[14],o[15]=s[15]),o[0]=c*f+_*u,o[1]=h*f+T*u,o[2]=v*f+p*u,o[3]=d*f+M*u,o[4]=_*f-c*u,o[5]=T*f-h*u,o[6]=p*f-v*u,o[7]=M*f-d*u,o}},2504:function(n){n.exports=a;function a(o,s,l){var u=l[0],f=l[1],c=l[2];return o[0]=s[0]*u,o[1]=s[1]*u,o[2]=s[2]*u,o[3]=s[3]*u,o[4]=s[4]*f,o[5]=s[5]*f,o[6]=s[6]*f,o[7]=s[7]*f,o[8]=s[8]*c,o[9]=s[9]*c,o[10]=s[10]*c,o[11]=s[11]*c,o[12]=s[12],o[13]=s[13],o[14]=s[14],o[15]=s[15],o}},7656:function(n){n.exports=a;function a(o,s,l){var u=l[0],f=l[1],c=l[2],h,v,d,_,T,p,M,b,w,k,x,E;return s===o?(o[12]=s[0]*u+s[4]*f+s[8]*c+s[12],o[13]=s[1]*u+s[5]*f+s[9]*c+s[13],o[14]=s[2]*u+s[6]*f+s[10]*c+s[14],o[15]=s[3]*u+s[7]*f+s[11]*c+s[15]):(h=s[0],v=s[1],d=s[2],_=s[3],T=s[4],p=s[5],M=s[6],b=s[7],w=s[8],k=s[9],x=s[10],E=s[11],o[0]=h,o[1]=v,o[2]=d,o[3]=_,o[4]=T,o[5]=p,o[6]=M,o[7]=b,o[8]=w,o[9]=k,o[10]=x,o[11]=E,o[12]=h*u+T*f+w*c+s[12],o[13]=v*u+p*f+k*c+s[13],o[14]=d*u+M*f+x*c+s[14],o[15]=_*u+b*f+E*c+s[15]),o}},5665:function(n){n.exports=a;function a(o,s){if(o===s){var l=s[1],u=s[2],f=s[3],c=s[6],h=s[7],v=s[11];o[1]=s[4],o[2]=s[8],o[3]=s[12],o[4]=l,o[6]=s[9],o[7]=s[13],o[8]=u,o[9]=c,o[11]=s[14],o[12]=f,o[13]=h,o[14]=v}else o[0]=s[0],o[1]=s[4],o[2]=s[8],o[3]=s[12],o[4]=s[1],o[5]=s[5],o[6]=s[9],o[7]=s[13],o[8]=s[2],o[9]=s[6],o[10]=s[10],o[11]=s[14],o[12]=s[3],o[13]=s[7],o[14]=s[11],o[15]=s[15];return o}},7626:function(n,a,o){"use strict";var s=o(2642),l=o(9346);n.exports=v;function u(d,_){for(var T=[0,0,0,0],p=0;p<4;++p)for(var M=0;M<4;++M)T[M]+=d[4*p+M]*_[p];return T}function f(d,_,T,p,M){for(var b=u(p,u(T,u(_,[d[0],d[1],d[2],1]))),w=0;w<3;++w)b[w]/=b[3];return[.5*M[0]*(1+b[0]),.5*M[1]*(1-b[1])]}function c(d,_){if(d.length===2){for(var T=0,p=0,M=0;M<2;++M)T+=Math.pow(_[M]-d[0][M],2),p+=Math.pow(_[M]-d[1][M],2);return T=Math.sqrt(T),p=Math.sqrt(p),T+p<1e-6?[1,0]:[p/(T+p),T/(p+T)]}else if(d.length===3){var b=[0,0];return l(d[0],d[1],d[2],_,b),s(d,b)}return[]}function h(d,_){for(var T=[0,0,0],p=0;p<d.length;++p)for(var M=d[p],b=_[p],w=0;w<3;++w)T[w]+=b*M[w];return T}function v(d,_,T,p,M,b){if(d.length===1)return[0,d[0].slice()];for(var w=new Array(d.length),k=0;k<d.length;++k)w[k]=f(d[k],T,p,M,b);for(var x=0,E=1/0,k=0;k<w.length;++k){for(var S=0,g=0;g<2;++g)S+=Math.pow(w[k][g]-_[g],2);S<E&&(E=S,x=k)}for(var C=c(w,_),A=0,k=0;k<3;++k){if(C[k]<-.001||C[k]>1.0001)return null;A+=C[k]}return Math.abs(A-1)>.001?null:[x,h(d,C),C]}},840:function(n,a,o){var s=o(3236),l=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),u=s([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),f=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),c=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),h=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),v=s([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),d=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),_=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),T=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),p=s([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),M=s([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);a.meshShader={vertex:l,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},a.wireShader={vertex:f,fragment:c,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},a.pointShader={vertex:h,fragment:v,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},a.pickShader={vertex:d,fragment:_,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},a.pointPickShader={vertex:T,fragment:_,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},a.contourShader={vertex:p,fragment:M,attributes:[{name:"position",type:"vec3"}]}},7201:function(n,a,o){"use strict";var s=1e-6,l=1e-6,u=o(9405),f=o(2762),c=o(8116),h=o(7766),v=o(8406),d=o(6760),_=o(7608),T=o(9618),p=o(6729),M=o(7765),b=o(1888),w=o(840),k=o(7626),x=w.meshShader,E=w.wireShader,S=w.pointShader,g=w.pickShader,C=w.pointPickShader,A=w.contourShader,P=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function D(K,X,ae,oe,me,xe,ce,ie,ge,le,we,Re,qe,et,Pe,Ie,ut,ft,je,_t,Bt,Lt,Me,Ze,dt,it,vt){this.gl=K,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=X,this.dirty=!0,this.triShader=ae,this.lineShader=oe,this.pointShader=me,this.pickShader=xe,this.pointPickShader=ce,this.contourShader=ie,this.trianglePositions=ge,this.triangleColors=we,this.triangleNormals=qe,this.triangleUVs=Re,this.triangleIds=le,this.triangleVAO=et,this.triangleCount=0,this.lineWidth=1,this.edgePositions=Pe,this.edgeColors=ut,this.edgeUVs=ft,this.edgeIds=Ie,this.edgeVAO=je,this.edgeCount=0,this.pointPositions=_t,this.pointColors=Lt,this.pointUVs=Me,this.pointSizes=Ze,this.pointIds=Bt,this.pointVAO=dt,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=it,this.contourVAO=vt,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=P,this._view=P,this._projection=P,this._resolution=[1,1]}var z=D.prototype;z.isOpaque=function(){return!this.hasAlpha},z.isTransparent=function(){return this.hasAlpha},z.pickSlots=1,z.setPickBase=function(K){this.pickId=K};function O(K,X){if(!X||!X.length)return 1;for(var ae=0;ae<X.length;++ae){if(X.length<2)return 1;if(X[ae][0]===K)return X[ae][1];if(X[ae][0]>K&&ae>0){var oe=(X[ae][0]-K)/(X[ae][0]-X[ae-1][0]);return X[ae][1]*(1-oe)+oe*X[ae-1][1]}}return 1}function V(K,X){for(var ae=p({colormap:K,nshades:256,format:"rgba"}),oe=new Uint8Array(256*4),me=0;me<256;++me){for(var xe=ae[me],ce=0;ce<3;++ce)oe[4*me+ce]=xe[ce];X?oe[4*me+3]=255*O(me/255,X):oe[4*me+3]=255*xe[3]}return T(oe,[256,256,4],[4,0,1])}function B(K){for(var X=K.length,ae=new Array(X),oe=0;oe<X;++oe)ae[oe]=K[oe][2];return ae}z.highlight=function(K){if(!K||!this.contourEnable){this.contourCount=0;return}for(var X=M(this.cells,this.intensity,K.intensity),ae=X.cells,oe=X.vertexIds,me=X.vertexWeights,xe=ae.length,ce=b.mallocFloat32(2*3*xe),ie=0,ge=0;ge<xe;++ge)for(var le=ae[ge],we=0;we<2;++we){var Re=le[0];le.length===2&&(Re=le[we]);for(var qe=oe[Re][0],et=oe[Re][1],Pe=me[Re],Ie=1-Pe,ut=this.positions[qe],ft=this.positions[et],je=0;je<3;++je)ce[ie++]=Pe*ut[je]+Ie*ft[je]}this.contourCount=ie/3|0,this.contourPositions.update(ce.subarray(0,ie)),b.free(ce)},z.update=function(K){K=K||{};var X=this.gl;this.dirty=!0,"contourEnable"in K&&(this.contourEnable=K.contourEnable),"contourColor"in K&&(this.contourColor=K.contourColor),"lineWidth"in K&&(this.lineWidth=K.lineWidth),"lightPosition"in K&&(this.lightPosition=K.lightPosition),this.hasAlpha=!1,"opacity"in K&&(this.opacity=K.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in K&&(this.opacityscale=K.opacityscale,this.hasAlpha=!0),"ambient"in K&&(this.ambientLight=K.ambient),"diffuse"in K&&(this.diffuseLight=K.diffuse),"specular"in K&&(this.specularLight=K.specular),"roughness"in K&&(this.roughness=K.roughness),"fresnel"in K&&(this.fresnel=K.fresnel),K.texture?(this.texture.dispose(),this.texture=h(X,K.texture)):K.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=X.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=X.LINEAR,this.texture.setPixels(V(K.colormap,this.opacityscale)),this.texture.generateMipmap());var ae=K.cells,oe=K.positions;if(!(!oe||!ae)){var me=[],xe=[],ce=[],ie=[],ge=[],le=[],we=[],Re=[],qe=[],et=[],Pe=[],Ie=[],ut=[],ft=[];this.cells=ae,this.positions=oe;var je=K.vertexNormals,_t=K.cellNormals,Bt=K.vertexNormalsEpsilon===void 0?s:K.vertexNormalsEpsilon,Lt=K.faceNormalsEpsilon===void 0?l:K.faceNormalsEpsilon;K.useFacetNormals&&!_t&&(_t=v.faceNormals(ae,oe,Lt)),!_t&&!je&&(je=v.vertexNormals(ae,oe,Bt));var Me=K.vertexColors,Ze=K.cellColors,dt=K.meshColor||[1,1,1,1],it=K.vertexUVs,vt=K.vertexIntensity,rt=K.cellUVs,We=K.cellIntensity,ht=1/0,mt=-1/0;if(!it&&!rt)if(vt)if(K.vertexIntensityBounds)ht=+K.vertexIntensityBounds[0],mt=+K.vertexIntensityBounds[1];else for(var er=0;er<vt.length;++er){var $t=vt[er];ht=Math.min(ht,$t),mt=Math.max(mt,$t)}else if(We)if(K.cellIntensityBounds)ht=+K.cellIntensityBounds[0],mt=+K.cellIntensityBounds[1];else for(var er=0;er<We.length;++er){var $t=We[er];ht=Math.min(ht,$t),mt=Math.max(mt,$t)}else for(var er=0;er<oe.length;++er){var $t=oe[er][2];ht=Math.min(ht,$t),mt=Math.max(mt,$t)}vt?this.intensity=vt:We?this.intensity=We:this.intensity=B(oe),this.pickVertex=!(We||Ze);var cr=K.pointSizes,or=K.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var er=0;er<oe.length;++er)for(var vr=oe[er],Ot=0;Ot<3;++Ot)isNaN(vr[Ot])||!isFinite(vr[Ot])||(this.bounds[0][Ot]=Math.min(this.bounds[0][Ot],vr[Ot]),this.bounds[1][Ot]=Math.max(this.bounds[1][Ot],vr[Ot]));var yt=0,Et=0,Je=0;e:for(var er=0;er<ae.length;++er){var Ke=ae[er];switch(Ke.length){case 1:for(var At=Ke[0],vr=oe[At],Ot=0;Ot<3;++Ot)if(isNaN(vr[Ot])||!isFinite(vr[Ot]))continue e;et.push(vr[0],vr[1],vr[2]);var Ee;Me?Ee=Me[At]:Ze?Ee=Ze[er]:Ee=dt,this.opacityscale&&vt?xe.push(Ee[0],Ee[1],Ee[2],this.opacity*O((vt[At]-ht)/(mt-ht),this.opacityscale)):Ee.length===3?Pe.push(Ee[0],Ee[1],Ee[2],this.opacity):(Pe.push(Ee[0],Ee[1],Ee[2],Ee[3]*this.opacity),Ee[3]<1&&(this.hasAlpha=!0));var de;it?de=it[At]:vt?de=[(vt[At]-ht)/(mt-ht),0]:rt?de=rt[er]:We?de=[(We[er]-ht)/(mt-ht),0]:de=[(vr[2]-ht)/(mt-ht),0],Ie.push(de[0],de[1]),cr?ut.push(cr[At]):ut.push(or),ft.push(er),Je+=1;break;case 2:for(var Ot=0;Ot<2;++Ot)for(var At=Ke[Ot],vr=oe[At],Te=0;Te<3;++Te)if(isNaN(vr[Te])||!isFinite(vr[Te]))continue e;for(var Ot=0;Ot<2;++Ot){var At=Ke[Ot],vr=oe[At];le.push(vr[0],vr[1],vr[2]);var Ee;Me?Ee=Me[At]:Ze?Ee=Ze[er]:Ee=dt,this.opacityscale&&vt?xe.push(Ee[0],Ee[1],Ee[2],this.opacity*O((vt[At]-ht)/(mt-ht),this.opacityscale)):Ee.length===3?we.push(Ee[0],Ee[1],Ee[2],this.opacity):(we.push(Ee[0],Ee[1],Ee[2],Ee[3]*this.opacity),Ee[3]<1&&(this.hasAlpha=!0));var de;it?de=it[At]:vt?de=[(vt[At]-ht)/(mt-ht),0]:rt?de=rt[er]:We?de=[(We[er]-ht)/(mt-ht),0]:de=[(vr[2]-ht)/(mt-ht),0],Re.push(de[0],de[1]),qe.push(er)}Et+=1;break;case 3:for(var Ot=0;Ot<3;++Ot)for(var At=Ke[Ot],vr=oe[At],Te=0;Te<3;++Te)if(isNaN(vr[Te])||!isFinite(vr[Te]))continue e;for(var Ot=0;Ot<3;++Ot){var At=Ke[2-Ot],vr=oe[At];me.push(vr[0],vr[1],vr[2]);var Ee;Me?Ee=Me[At]:Ze?Ee=Ze[er]:Ee=dt,Ee?this.opacityscale&&vt?xe.push(Ee[0],Ee[1],Ee[2],this.opacity*O((vt[At]-ht)/(mt-ht),this.opacityscale)):Ee.length===3?xe.push(Ee[0],Ee[1],Ee[2],this.opacity):(xe.push(Ee[0],Ee[1],Ee[2],Ee[3]*this.opacity),Ee[3]<1&&(this.hasAlpha=!0)):xe.push(.5,.5,.5,1);var de;it?de=it[At]:vt?de=[(vt[At]-ht)/(mt-ht),0]:rt?de=rt[er]:We?de=[(We[er]-ht)/(mt-ht),0]:de=[(vr[2]-ht)/(mt-ht),0],ie.push(de[0],de[1]);var nt;je?nt=je[At]:nt=_t[er],ce.push(nt[0],nt[1],nt[2]),ge.push(er)}yt+=1;break;default:break}}this.pointCount=Je,this.edgeCount=Et,this.triangleCount=yt,this.pointPositions.update(et),this.pointColors.update(Pe),this.pointUVs.update(Ie),this.pointSizes.update(ut),this.pointIds.update(new Uint32Array(ft)),this.edgePositions.update(le),this.edgeColors.update(we),this.edgeUVs.update(Re),this.edgeIds.update(new Uint32Array(qe)),this.trianglePositions.update(me),this.triangleColors.update(xe),this.triangleUVs.update(ie),this.triangleNormals.update(ce),this.triangleIds.update(new Uint32Array(ge))}},z.drawTransparent=z.draw=function(K){K=K||{};for(var X=this.gl,ae=K.model||P,oe=K.view||P,me=K.projection||P,xe=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],ce=0;ce<3;++ce)xe[0][ce]=Math.max(xe[0][ce],this.clipBounds[0][ce]),xe[1][ce]=Math.min(xe[1][ce],this.clipBounds[1][ce]);var ie={model:ae,view:oe,projection:me,inverseModel:P.slice(),clipBounds:xe,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};ie.inverseModel=_(ie.inverseModel,ie.model),X.disable(X.CULL_FACE),this.texture.bind(0);var ge=new Array(16);d(ge,ie.view,ie.model),d(ge,ie.projection,ge),_(ge,ge);for(var ce=0;ce<3;++ce)ie.eyePosition[ce]=ge[12+ce]/ge[15];for(var le=ge[15],ce=0;ce<3;++ce)le+=this.lightPosition[ce]*ge[4*ce+3];for(var ce=0;ce<3;++ce){for(var we=ge[12+ce],Re=0;Re<3;++Re)we+=ge[4*Re+ce]*this.lightPosition[Re];ie.lightPosition[ce]=we/le}if(this.triangleCount>0){var qe=this.triShader;qe.bind(),qe.uniforms=ie,this.triangleVAO.bind(),X.drawArrays(X.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var qe=this.lineShader;qe.bind(),qe.uniforms=ie,this.edgeVAO.bind(),X.lineWidth(this.lineWidth*this.pixelRatio),X.drawArrays(X.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var qe=this.pointShader;qe.bind(),qe.uniforms=ie,this.pointVAO.bind(),X.drawArrays(X.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var qe=this.contourShader;qe.bind(),qe.uniforms=ie,this.contourVAO.bind(),X.drawArrays(X.LINES,0,this.contourCount),this.contourVAO.unbind()}},z.drawPick=function(K){K=K||{};for(var X=this.gl,ae=K.model||P,oe=K.view||P,me=K.projection||P,xe=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],ce=0;ce<3;++ce)xe[0][ce]=Math.max(xe[0][ce],this.clipBounds[0][ce]),xe[1][ce]=Math.min(xe[1][ce],this.clipBounds[1][ce]);this._model=[].slice.call(ae),this._view=[].slice.call(oe),this._projection=[].slice.call(me),this._resolution=[X.drawingBufferWidth,X.drawingBufferHeight];var ie={model:ae,view:oe,projection:me,clipBounds:xe,pickId:this.pickId/255},ge=this.pickShader;if(ge.bind(),ge.uniforms=ie,this.triangleCount>0&&(this.triangleVAO.bind(),X.drawArrays(X.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),X.lineWidth(this.lineWidth*this.pixelRatio),X.drawArrays(X.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var ge=this.pointPickShader;ge.bind(),ge.uniforms=ie,this.pointVAO.bind(),X.drawArrays(X.POINTS,0,this.pointCount),this.pointVAO.unbind()}},z.pick=function(K){if(!K||K.id!==this.pickId)return null;for(var X=K.value[0]+256*K.value[1]+65536*K.value[2],ae=this.cells[X],oe=this.positions,me=new Array(ae.length),xe=0;xe<ae.length;++xe)me[xe]=oe[ae[xe]];var ce=K.coord[0],ie=K.coord[1];if(!this.pickVertex){var ge=this.positions[ae[0]],le=this.positions[ae[1]],we=this.positions[ae[2]],Re=[(ge[0]+le[0]+we[0])/3,(ge[1]+le[1]+we[1])/3,(ge[2]+le[2]+we[2])/3];return{_cellCenter:!0,position:[ce,ie],index:X,cell:ae,cellId:X,intensity:this.intensity[X],dataCoordinate:Re}}var qe=k(me,[ce*this.pixelRatio,this._resolution[1]-ie*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!qe)return null;for(var et=qe[2],Pe=0,xe=0;xe<ae.length;++xe)Pe+=et[xe]*this.intensity[ae[xe]];return{position:qe[1],index:ae[qe[0]],cell:ae,cellId:X,intensity:Pe,dataCoordinate:this.positions[ae[qe[0]]]}},z.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function F(K){var X=u(K,x.vertex,x.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X.attributes.normal.location=4,X}function N(K){var X=u(K,E.vertex,E.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X}function Z(K){var X=u(K,S.vertex,S.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X.attributes.pointSize.location=4,X}function J(K){var X=u(K,g.vertex,g.fragment);return X.attributes.position.location=0,X.attributes.id.location=1,X}function re(K){var X=u(K,C.vertex,C.fragment);return X.attributes.position.location=0,X.attributes.id.location=1,X.attributes.pointSize.location=4,X}function ue(K){var X=u(K,A.vertex,A.fragment);return X.attributes.position.location=0,X}function fe(K,X){arguments.length===1&&(X=K,K=X.gl);var ae=K.getExtension("OES_standard_derivatives")||K.getExtension("MOZ_OES_standard_derivatives")||K.getExtension("WEBKIT_OES_standard_derivatives");if(!ae)throw new Error("derivatives not supported");var oe=F(K),me=N(K),xe=Z(K),ce=J(K),ie=re(K),ge=ue(K),le=h(K,T(new Uint8Array([255,255,255,255]),[1,1,4]));le.generateMipmap(),le.minFilter=K.LINEAR_MIPMAP_LINEAR,le.magFilter=K.LINEAR;var we=f(K),Re=f(K),qe=f(K),et=f(K),Pe=f(K),Ie=c(K,[{buffer:we,type:K.FLOAT,size:3},{buffer:Pe,type:K.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Re,type:K.FLOAT,size:4},{buffer:qe,type:K.FLOAT,size:2},{buffer:et,type:K.FLOAT,size:3}]),ut=f(K),ft=f(K),je=f(K),_t=f(K),Bt=c(K,[{buffer:ut,type:K.FLOAT,size:3},{buffer:_t,type:K.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ft,type:K.FLOAT,size:4},{buffer:je,type:K.FLOAT,size:2}]),Lt=f(K),Me=f(K),Ze=f(K),dt=f(K),it=f(K),vt=c(K,[{buffer:Lt,type:K.FLOAT,size:3},{buffer:it,type:K.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Me,type:K.FLOAT,size:4},{buffer:Ze,type:K.FLOAT,size:2},{buffer:dt,type:K.FLOAT,size:1}]),rt=f(K),We=c(K,[{buffer:rt,type:K.FLOAT,size:3}]),ht=new D(K,le,oe,me,xe,ce,ie,ge,we,Pe,Re,qe,et,Ie,ut,_t,ft,je,Bt,Lt,it,Me,Ze,dt,vt,rt,We);return ht.update(X),ht}n.exports=fe},8120:function(n,a,o){"use strict";n.exports=h;var s=o(2762),l=o(9405),u=o(3603);function f(v,d,_){this.plot=v,this.vbo=d,this.shader=_}var c=f.prototype;c.bind=function(){var v=this.shader;this.vbo.bind(),this.shader.bind(),v.attributes.coord.pointer(),v.uniforms.screenBox=this.plot.screenBox},c.drawBox=function(){var v=[0,0],d=[0,0];return function(_,T,p,M,b){var w=this.plot,k=this.shader,x=w.gl;v[0]=_,v[1]=T,d[0]=p,d[1]=M,k.uniforms.lo=v,k.uniforms.hi=d,k.uniforms.color=b,x.drawArrays(x.TRIANGLE_STRIP,0,4)}}(),c.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function h(v){var d=v.gl,_=s(d,[0,0,0,1,1,0,1,1]),T=l(d,u.boxVert,u.lineFrag);return new f(v,_,T)}},1913:function(n,a,o){"use strict";n.exports=d;var s=o(2762),l=o(9405),u=o(2478),f=o(3603);function c(_,T,p,M){this.plot=_,this.vbo=T,this.shader=p,this.tickShader=M,this.ticks=[[],[]]}function h(_,T){return _-T}var v=c.prototype;v.draw=function(){var _=[0,0],T=[0,0],p=[0,0];return function(){for(var M=this.plot,b=this.vbo,w=this.shader,k=this.ticks,x=M.gl,E=M._tickBounds,S=M.dataBox,g=M.viewBox,C=M.gridLineWidth,A=M.gridLineColor,P=M.gridLineEnable,D=M.pixelRatio,z=0;z<2;++z){var O=E[z],V=E[z+2],B=V-O,F=.5*(S[z+2]+S[z]),N=S[z+2]-S[z];T[z]=2*B/N,_[z]=2*(O-F)/N}w.bind(),b.bind(),w.attributes.dataCoord.pointer(),w.uniforms.dataShift=_,w.uniforms.dataScale=T;for(var Z=0,z=0;z<2;++z){p[0]=p[1]=0,p[z]=1,w.uniforms.dataAxis=p,w.uniforms.lineWidth=C[z]/(g[z+2]-g[z])*D,w.uniforms.color=A[z];var J=k[z].length*6;P[z]&&J&&x.drawArrays(x.TRIANGLES,Z,J),Z+=J}}}(),v.drawTickMarks=function(){var _=[0,0],T=[0,0],p=[1,0],M=[0,1],b=[0,0],w=[0,0];return function(){for(var k=this.plot,x=this.vbo,E=this.tickShader,S=this.ticks,g=k.gl,C=k._tickBounds,A=k.dataBox,P=k.viewBox,D=k.pixelRatio,z=k.screenBox,O=z[2]-z[0],V=z[3]-z[1],B=P[2]-P[0],F=P[3]-P[1],N=0;N<2;++N){var Z=C[N],J=C[N+2],re=J-Z,ue=.5*(A[N+2]+A[N]),fe=A[N+2]-A[N];T[N]=2*re/fe,_[N]=2*(Z-ue)/fe}T[0]*=B/O,_[0]*=B/O,T[1]*=F/V,_[1]*=F/V,E.bind(),x.bind(),E.attributes.dataCoord.pointer();var K=E.uniforms;K.dataShift=_,K.dataScale=T;var X=k.tickMarkLength,ae=k.tickMarkWidth,oe=k.tickMarkColor,me=0,xe=S[0].length*6,ce=Math.min(u.ge(S[0],(A[0]-C[0])/(C[2]-C[0]),h),S[0].length),ie=Math.min(u.gt(S[0],(A[2]-C[0])/(C[2]-C[0]),h),S[0].length),ge=me+6*ce,le=6*Math.max(0,ie-ce),we=Math.min(u.ge(S[1],(A[1]-C[1])/(C[3]-C[1]),h),S[1].length),Re=Math.min(u.gt(S[1],(A[3]-C[1])/(C[3]-C[1]),h),S[1].length),qe=xe+6*we,et=6*Math.max(0,Re-we);b[0]=2*(P[0]-X[1])/O-1,b[1]=(P[3]+P[1])/V-1,w[0]=X[1]*D/O,w[1]=ae[1]*D/V,et&&(K.color=oe[1],K.tickScale=w,K.dataAxis=M,K.screenOffset=b,g.drawArrays(g.TRIANGLES,qe,et)),b[0]=(P[2]+P[0])/O-1,b[1]=2*(P[1]-X[0])/V-1,w[0]=ae[0]*D/O,w[1]=X[0]*D/V,le&&(K.color=oe[0],K.tickScale=w,K.dataAxis=p,K.screenOffset=b,g.drawArrays(g.TRIANGLES,ge,le)),b[0]=2*(P[2]+X[3])/O-1,b[1]=(P[3]+P[1])/V-1,w[0]=X[3]*D/O,w[1]=ae[3]*D/V,et&&(K.color=oe[3],K.tickScale=w,K.dataAxis=M,K.screenOffset=b,g.drawArrays(g.TRIANGLES,qe,et)),b[0]=(P[2]+P[0])/O-1,b[1]=2*(P[3]+X[2])/V-1,w[0]=ae[2]*D/O,w[1]=X[2]*D/V,le&&(K.color=oe[2],K.tickScale=w,K.dataAxis=p,K.screenOffset=b,g.drawArrays(g.TRIANGLES,ge,le))}}(),v.update=function(){var _=[1,1,-1,-1,1,-1],T=[1,-1,1,1,-1,-1];return function(p){for(var M=p.ticks,b=p.bounds,w=new Float32Array(6*3*(M[0].length+M[1].length)),k=this.plot.zeroLineEnable,x=0,E=[[],[]],S=0;S<2;++S)for(var g=E[S],C=M[S],A=b[S],P=b[S+2],D=0;D<C.length;++D){var z=(C[D].x-A)/(P-A);g.push(z);for(var O=0;O<6;++O)w[x++]=z,w[x++]=_[O],w[x++]=T[O]}this.ticks=E,this.vbo.update(w)}}(),v.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function d(_){var T=_.gl,p=s(T),M=l(T,f.gridVert,f.gridFrag),b=l(T,f.tickVert,f.gridFrag),w=new c(_,p,M,b);return w}},4747:function(n,a,o){"use strict";n.exports=h;var s=o(2762),l=o(9405),u=o(3603);function f(v,d,_){this.plot=v,this.vbo=d,this.shader=_}var c=f.prototype;c.bind=function(){var v=this.shader;this.vbo.bind(),this.shader.bind(),v.attributes.coord.pointer(),v.uniforms.screenBox=this.plot.screenBox},c.drawLine=function(){var v=[0,0],d=[0,0];return function(_,T,p,M,b,w){var k=this.plot,x=this.shader,E=k.gl;v[0]=_,v[1]=T,d[0]=p,d[1]=M,x.uniforms.start=v,x.uniforms.end=d,x.uniforms.width=b*k.pixelRatio,x.uniforms.color=w,E.drawArrays(E.TRIANGLE_STRIP,0,4)}}(),c.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function h(v){var d=v.gl,_=s(d,[-1,-1,-1,1,1,-1,1,1]),T=l(d,u.lineVert,u.lineFrag),p=new f(v,_,T);return p}},3603:function(n,a,o){"use strict";var s=o(3236),l=s([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);n.exports={lineVert:s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:l,textVert:s([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:l,gridVert:s([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:l,boxVert:s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:s([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},2142:function(n,a,o){"use strict";n.exports=d;var s=o(2762),l=o(9405),u=o(529),f=o(2478),c=o(3603);function h(_,T,p){this.plot=_,this.vbo=T,this.shader=p,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var v=h.prototype;v.drawTicks=function(){var _=[0,0],T=[0,0],p=[0,0];return function(M){var b=this.plot,w=this.shader,k=this.tickX[M],x=this.tickOffset[M],E=b.gl,S=b.viewBox,g=b.dataBox,C=b.screenBox,A=b.pixelRatio,P=b.tickEnable,D=b.tickPad,z=b.tickColor,O=b.tickAngle,V=b.labelEnable,B=b.labelPad,F=b.labelColor,N=b.labelAngle,Z=this.labelOffset[M],J=this.labelCount[M],re=f.lt(k,g[M]),ue=f.le(k,g[M+2]);_[0]=_[1]=0,_[M]=1,T[M]=(S[2+M]+S[M])/(C[2+M]-C[M])-1;var fe=2/C[2+(M^1)]-C[M^1];T[M^1]=fe*S[M^1]-1,P[M]&&(T[M^1]-=fe*A*D[M],re<ue&&x[ue]>x[re]&&(w.uniforms.dataAxis=_,w.uniforms.screenOffset=T,w.uniforms.color=z[M],w.uniforms.angle=O[M],E.drawArrays(E.TRIANGLES,x[re],x[ue]-x[re]))),V[M]&&J&&(T[M^1]-=fe*A*B[M],w.uniforms.dataAxis=p,w.uniforms.screenOffset=T,w.uniforms.color=F[M],w.uniforms.angle=N[M],E.drawArrays(E.TRIANGLES,Z,J)),T[M^1]=fe*S[2+(M^1)]-1,P[M+2]&&(T[M^1]+=fe*A*D[M+2],re<ue&&x[ue]>x[re]&&(w.uniforms.dataAxis=_,w.uniforms.screenOffset=T,w.uniforms.color=z[M+2],w.uniforms.angle=O[M+2],E.drawArrays(E.TRIANGLES,x[re],x[ue]-x[re]))),V[M+2]&&J&&(T[M^1]+=fe*A*B[M+2],w.uniforms.dataAxis=p,w.uniforms.screenOffset=T,w.uniforms.color=F[M+2],w.uniforms.angle=N[M+2],E.drawArrays(E.TRIANGLES,Z,J))}}(),v.drawTitle=function(){var _=[0,0],T=[0,0];return function(){var p=this.plot,M=this.shader,b=p.gl,w=p.screenBox,k=p.titleCenter,x=p.titleAngle,E=p.titleColor,S=p.pixelRatio;if(this.titleCount){for(var g=0;g<2;++g)T[g]=2*(k[g]*S-w[g])/(w[2+g]-w[g])-1;M.bind(),M.uniforms.dataAxis=_,M.uniforms.screenOffset=T,M.uniforms.angle=x,M.uniforms.color=E,b.drawArrays(b.TRIANGLES,this.titleOffset,this.titleCount)}}}(),v.bind=function(){var _=[0,0],T=[0,0],p=[0,0];return function(){var M=this.plot,b=this.shader,w=M._tickBounds,k=M.dataBox,x=M.screenBox,E=M.viewBox;b.bind();for(var S=0;S<2;++S){var g=w[S],C=w[S+2],A=C-g,P=.5*(k[S+2]+k[S]),D=k[S+2]-k[S],z=E[S],O=E[S+2],V=O-z,B=x[S],F=x[S+2],N=F-B;T[S]=2*A/D*V/N,_[S]=2*(g-P)/D*V/N}p[1]=2*M.pixelRatio/(x[3]-x[1]),p[0]=p[1]*(x[3]-x[1])/(x[2]-x[0]),b.uniforms.dataScale=T,b.uniforms.dataShift=_,b.uniforms.textScale=p,this.vbo.bind(),b.attributes.textCoordinate.pointer()}}(),v.update=function(_){var T=[],p=_.ticks,M=_.bounds,b,w,k,x,E,S;for(S=0;S<2;++S){var g=[Math.floor(T.length/3)],C=[-1/0],A=p[S];for(b=0;b<A.length;++b){var P=A[b],D=P.x,z=P.text,O=P.font||"sans-serif";E=P.fontSize||12;for(var V=1/(M[S+2]-M[S]),B=M[S],F=z.split(`
`),N=0;N<F.length;N++)for(x=u(O,F[N]).data,w=0;w<x.length;w+=2)T.push(x[w]*E,-x[w+1]*E-N*E*1.2,(D-B)*V);g.push(Math.floor(T.length/3)),C.push(D)}this.tickOffset[S]=g,this.tickX[S]=C}for(S=0;S<2;++S){for(this.labelOffset[S]=Math.floor(T.length/3),x=u(_.labelFont[S],_.labels[S],{textAlign:"center"}).data,E=_.labelSize[S],b=0;b<x.length;b+=2)T.push(x[b]*E,-x[b+1]*E,0);this.labelCount[S]=Math.floor(T.length/3)-this.labelOffset[S]}for(this.titleOffset=Math.floor(T.length/3),x=u(_.titleFont,_.title).data,E=_.titleSize,b=0;b<x.length;b+=2)T.push(x[b]*E,-x[b+1]*E,0);this.titleCount=Math.floor(T.length/3)-this.titleOffset,this.vbo.update(T)},v.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function d(_){var T=_.gl,p=s(T),M=l(T,c.textVert,c.textFrag),b=new h(_,p,M);return b}},1850:function(n,a,o){"use strict";n.exports=p;var s=o(3589),l=o(1913),u=o(2142),f=o(4747),c=o(8120);function h(M,b){this.gl=M,this.pickBuffer=b,this.screenBox=[0,0,M.drawingBufferWidth,M.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var v=h.prototype;v.setDirty=function(){this.dirty=this.pickDirty=!0},v.setOverlayDirty=function(){this.dirty=!0},v.nextDepthValue=function(){return this._depthCounter++/65536};function d(M,b,w){var k=.5*(w+1);return Math.floor((1-k)*M+k*b)|0}v.draw=function(){var M=[0,0,0,0];return function(){var b=this.gl,w=this.screenBox,k=this.viewBox,x=this.dataBox,E=this.pixelRatio,S=this.grid,g=this.line,C=this.text,A=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,b.bindFramebuffer(b.FRAMEBUFFER,null),b.enable(b.SCISSOR_TEST),b.disable(b.DEPTH_TEST),b.depthFunc(b.LESS),b.depthMask(!1),b.enable(b.BLEND),b.blendEquation(b.FUNC_ADD,b.FUNC_ADD),b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA),this.borderColor){b.scissor(w[0],w[1],w[2]-w[0],w[3]-w[1]);var P=this.borderColor;b.clearColor(P[0]*P[3],P[1]*P[3],P[2]*P[3],P[3]),b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)}b.scissor(k[0],k[1],k[2]-k[0],k[3]-k[1]),b.viewport(k[0],k[1],k[2]-k[0],k[3]-k[1]);var D=this.backgroundColor;b.clearColor(D[0]*D[3],D[1]*D[3],D[2]*D[3],D[3]),b.clear(b.COLOR_BUFFER_BIT),S.draw();var z=this.zeroLineEnable,O=this.zeroLineColor,V=this.zeroLineWidth;if(z[0]||z[1]){g.bind();for(var B=0;B<2;++B)if(!(!z[B]||!(x[B]<=0&&x[B+2]>=0))){var F=w[B]-x[B]*(w[B+2]-w[B])/(x[B+2]-x[B]);B===0?g.drawLine(F,w[1],F,w[3],V[B],O[B]):g.drawLine(w[0],F,w[2],F,V[B],O[B])}}for(var B=0;B<A.length;++B)A[B].draw();b.viewport(w[0],w[1],w[2]-w[0],w[3]-w[1]),b.scissor(w[0],w[1],w[2]-w[0],w[3]-w[1]),this.grid.drawTickMarks(),g.bind();var N=this.borderLineEnable,Z=this.borderLineWidth,J=this.borderLineColor;N[1]&&g.drawLine(k[0],k[1]-.5*Z[1]*E,k[0],k[3]+.5*Z[3]*E,Z[1],J[1]),N[0]&&g.drawLine(k[0]-.5*Z[0]*E,k[1],k[2]+.5*Z[2]*E,k[1],Z[0],J[0]),N[3]&&g.drawLine(k[2],k[1]-.5*Z[1]*E,k[2],k[3]+.5*Z[3]*E,Z[3],J[3]),N[2]&&g.drawLine(k[0]-.5*Z[0]*E,k[3],k[2]+.5*Z[2]*E,k[3],Z[2],J[2]),C.bind();for(var B=0;B<2;++B)C.drawTicks(B);this.titleEnable&&C.drawTitle();for(var re=this.overlays,B=0;B<re.length;++B)re[B].draw();b.disable(b.SCISSOR_TEST),b.disable(b.BLEND),b.depthMask(!0)}}}(),v.drawPick=function(){return function(){if(!this.static){var M=this.pickBuffer,b=this.gl;this._pickTimeout=null,M.begin();for(var w=1,k=this.objects,x=0;x<k.length;++x)w=k[x].drawPick(w);M.end()}}}(),v.pick=function(){return function(M,b){if(!this.static){var w=this.pixelRatio,k=this.pickPixelRatio,x=this.viewBox,E=Math.round((M-x[0]/w)*k)|0,S=Math.round((b-x[1]/w)*k)|0,g=this.pickBuffer.query(E,S,this.pickRadius);if(!g)return null;for(var C=g.id+(g.value[0]<<8)+(g.value[1]<<16)+(g.value[2]<<24),A=this.objects,P=0;P<A.length;++P){var D=A[P].pick(E,S,C);if(D)return D}return null}}}();function _(M){for(var b=M.slice(),w=0;w<b.length;++w)b[w]=b[w].slice();return b}function T(M,b){return M.x-b.x}v.setScreenBox=function(M){var b=this.screenBox,w=this.pixelRatio;b[0]=Math.round(M[0]*w)|0,b[1]=Math.round(M[1]*w)|0,b[2]=Math.round(M[2]*w)|0,b[3]=Math.round(M[3]*w)|0,this.setDirty()},v.setDataBox=function(M){var b=this.dataBox,w=b[0]!==M[0]||b[1]!==M[1]||b[2]!==M[2]||b[3]!==M[3];w&&(b[0]=M[0],b[1]=M[1],b[2]=M[2],b[3]=M[3],this.setDirty())},v.setViewBox=function(M){var b=this.pixelRatio,w=this.viewBox;w[0]=Math.round(M[0]*b)|0,w[1]=Math.round(M[1]*b)|0,w[2]=Math.round(M[2]*b)|0,w[3]=Math.round(M[3]*b)|0;var k=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((M[2]-M[0])*k)|0,Math.round((M[3]-M[1])*k)|0],this.setDirty()},v.update=function(M){M=M||{};var b=this.gl;this.pixelRatio=M.pixelRatio||1;var w=this.pixelRatio;this.pickPixelRatio=Math.max(w,1),this.setScreenBox(M.screenBox||[0,0,b.drawingBufferWidth/w,b.drawingBufferHeight/w]);var k=this.screenBox;this.setViewBox(M.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/w,.125*(this.screenBox[3]-this.screenBox[1])/w,.875*(this.screenBox[2]-this.screenBox[0])/w,.875*(this.screenBox[3]-this.screenBox[1])/w]);var x=this.viewBox,E=(x[2]-x[0])/(x[3]-x[1]);this.setDataBox(M.dataBox||[-10,-10/E,10,10/E]),this.borderColor=M.borderColor!==!1?(M.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(M.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(M.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(M.gridLineWidth||[1,1]).slice(),this.gridLineColor=_(M.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(M.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(M.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=_(M.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(M.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(M.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=_(M.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(M.titleCenter||[.5*(x[0]+x[2])/w,(x[3]+120)/w]).slice(),this.titleEnable=!("titleEnable"in M)||!!M.titleEnable,this.titleAngle=M.titleAngle||0,this.titleColor=(M.titleColor||[0,0,0,1]).slice(),this.labelPad=(M.labelPad||[15,15,15,15]).slice(),this.labelAngle=(M.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(M.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=_(M.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(M.tickPad||[15,15,15,15]).slice(),this.tickAngle=(M.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(M.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=_(M.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(M.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(M.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=_(M.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var S=M.ticks||[[],[]],g=this._tickBounds;g[0]=g[1]=1/0,g[2]=g[3]=-1/0;for(var C=0;C<2;++C){var A=S[C].slice(0);A.length!==0&&(A.sort(T),g[C]=Math.min(g[C],A[0].x),g[C+2]=Math.max(g[C+2],A[A.length-1].x))}this.grid.update({bounds:g,ticks:S}),this.text.update({bounds:g,ticks:S,labels:M.labels||["x","y"],labelSize:M.labelSize||[12,12],labelFont:M.labelFont||["sans-serif","sans-serif"],title:M.title||"",titleSize:M.titleSize||18,titleFont:M.titleFont||"sans-serif"}),this.static=!!M.static,this.setDirty()},v.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var M=this.objects.length-1;M>=0;--M)this.objects[M].dispose();this.objects.length=0;for(var M=this.overlays.length-1;M>=0;--M)this.overlays[M].dispose();this.overlays.length=0,this.gl=null},v.addObject=function(M){this.objects.indexOf(M)<0&&(this.objects.push(M),this.setDirty())},v.removeObject=function(M){for(var b=this.objects,w=0;w<b.length;++w)if(b[w]===M){b.splice(w,1),this.setDirty();break}},v.addOverlay=function(M){this.overlays.indexOf(M)<0&&(this.overlays.push(M),this.setOverlayDirty())},v.removeOverlay=function(M){for(var b=this.overlays,w=0;w<b.length;++w)if(b[w]===M){b.splice(w,1),this.setOverlayDirty();break}};function p(M){var b=M.gl,w=s(b,[b.drawingBufferWidth,b.drawingBufferHeight]),k=new h(b,w);return k.grid=l(k),k.text=u(k),k.line=f(k),k.box=c(k),k.update(M),k}},4437:function(n,a,o){"use strict";n.exports=v;var s=o(3025),l=o(6296),u=o(351),f=o(8512),c=o(24),h=o(7520);function v(d,_){d=d||document.body,_=_||{};var T=[.01,1/0];"distanceLimits"in _&&(T[0]=_.distanceLimits[0],T[1]=_.distanceLimits[1]),"zoomMin"in _&&(T[0]=_.zoomMin),"zoomMax"in _&&(T[1]=_.zoomMax);var p=l({center:_.center||[0,0,0],up:_.up||[0,1,0],eye:_.eye||[0,0,10],mode:_.mode||"orbit",distanceLimits:T}),M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=0,w=d.clientWidth,k=d.clientHeight,x={keyBindingMode:"rotate",enableWheel:!0,view:p,element:d,delay:_.delay||16,rotateSpeed:_.rotateSpeed||1,zoomSpeed:_.zoomSpeed||1,translateSpeed:_.translateSpeed||1,flipX:!!_.flipX,flipY:!!_.flipY,modes:p.modes,_ortho:_._ortho||_.projection&&_.projection.type==="orthographic"||!1,tick:function(){var E=s(),S=this.delay,g=E-2*S;p.idle(E-S),p.recalcMatrix(g),p.flush(E-(100+S*2));for(var C=!0,A=p.computedMatrix,P=0;P<16;++P)C=C&&M[P]===A[P],M[P]=A[P];var D=d.clientWidth===w&&d.clientHeight===k;return w=d.clientWidth,k=d.clientHeight,C?!D:(b=Math.exp(p.computedRadius[0]),!0)},lookAt:function(E,S,g){p.lookAt(p.lastT(),E,S,g)},rotate:function(E,S,g){p.rotate(p.lastT(),E,S,g)},pan:function(E,S,g){p.pan(p.lastT(),E,S,g)},translate:function(E,S,g){p.translate(p.lastT(),E,S,g)}};return Object.defineProperties(x,{matrix:{get:function(){return p.computedMatrix},set:function(E){return p.setMatrix(p.lastT(),E),p.computedMatrix},enumerable:!0},mode:{get:function(){return p.getMode()},set:function(E){var S=p.computedUp.slice(),g=p.computedEye.slice(),C=p.computedCenter.slice();if(p.setMode(E),E==="turntable"){var A=s();p._active.lookAt(A,g,C,S),p._active.lookAt(A+500,g,C,[0,0,1]),p._active.flush(A)}return p.getMode()},enumerable:!0},center:{get:function(){return p.computedCenter},set:function(E){return p.lookAt(p.lastT(),null,E),p.computedCenter},enumerable:!0},eye:{get:function(){return p.computedEye},set:function(E){return p.lookAt(p.lastT(),E),p.computedEye},enumerable:!0},up:{get:function(){return p.computedUp},set:function(E){return p.lookAt(p.lastT(),null,null,E),p.computedUp},enumerable:!0},distance:{get:function(){return b},set:function(E){return p.setDistance(p.lastT(),E),E},enumerable:!0},distanceLimits:{get:function(){return p.getDistanceLimits(T)},set:function(E){return p.setDistanceLimits(E),E},enumerable:!0}}),d.addEventListener("contextmenu",function(E){return E.preventDefault(),!1}),x._lastX=-1,x._lastY=-1,x._lastMods={shift:!1,control:!1,alt:!1,meta:!1},x.enableMouseListeners=function(){x.mouseListener=u(d,E),d.addEventListener("touchstart",function(S){var g=c(S.changedTouches[0],d);E(0,g[0],g[1],x._lastMods),E(1,g[0],g[1],x._lastMods)},h?{passive:!0}:!1),d.addEventListener("touchmove",function(S){var g=c(S.changedTouches[0],d);E(1,g[0],g[1],x._lastMods),S.preventDefault()},h?{passive:!1}:!1),d.addEventListener("touchend",function(S){E(0,x._lastX,x._lastY,x._lastMods)},h?{passive:!0}:!1);function E(S,g,C,A){var P=x.keyBindingMode;if(P!==!1){var D=P==="rotate",z=P==="pan",O=P==="zoom",V=!!A.control,B=!!A.alt,F=!!A.shift,N=!!(S&1),Z=!!(S&2),J=!!(S&4),re=1/d.clientHeight,ue=re*(g-x._lastX),fe=re*(C-x._lastY),K=x.flipX?1:-1,X=x.flipY?1:-1,ae=Math.PI*x.rotateSpeed,oe=s();if(x._lastX!==-1&&x._lastY!==-1&&((D&&N&&!V&&!B&&!F||N&&!V&&!B&&F)&&p.rotate(oe,K*ae*ue,-X*ae*fe,0),(z&&N&&!V&&!B&&!F||Z||N&&V&&!B&&!F)&&p.pan(oe,-x.translateSpeed*ue*b,x.translateSpeed*fe*b,0),O&&N&&!V&&!B&&!F||J||N&&!V&&B&&!F)){var me=-x.zoomSpeed*fe/window.innerHeight*(oe-p.lastT())*100;p.pan(oe,0,0,b*(Math.exp(me)-1))}return x._lastX=g,x._lastY=C,x._lastMods=A,!0}}x.wheelListener=f(d,function(S,g){if(x.keyBindingMode!==!1&&x.enableWheel){var C=x.flipX?1:-1,A=x.flipY?1:-1,P=s();if(Math.abs(S)>Math.abs(g))p.rotate(P,0,0,-S*C*Math.PI*x.rotateSpeed/window.innerWidth);else if(!x._ortho){var D=-x.zoomSpeed*A*g/window.innerHeight*(P-p.lastT())/20;p.pan(P,0,0,b*(Math.exp(D)-1))}}},!0)},x.enableMouseListeners(),x}},799:function(n,a,o){var s=o(3236),l=o(9405),u=s([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),f=s([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);n.exports=function(c){return l(c,u,f,null,[{name:"position",type:"vec2"}])}},4100:function(n,a,o){"use strict";var s=o(4437),l=o(3837),u=o(5445),f=o(4449),c=o(3589),h=o(2260),v=o(7169),d=o(351),_=o(4772),T=o(4040),p=o(799),M=o(9216)({tablet:!0,featureDetect:!0});n.exports={createScene:E,createCamera:s};function b(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function w(g,C){var A=null;try{A=g.getContext("webgl",C),A||(A=g.getContext("experimental-webgl",C))}catch(P){return null}return A}function k(g){var C=Math.round(Math.log(Math.abs(g))/Math.log(10));if(C<0){var A=Math.round(Math.pow(10,-C));return Math.ceil(g*A)/A}else if(C>0){var A=Math.round(Math.pow(10,C));return Math.ceil(g/A)*A}return Math.ceil(g)}function x(g){return typeof g=="boolean"?g:!0}function E(g){g=g||{},g.camera=g.camera||{};var C=g.canvas;if(!C)if(C=document.createElement("canvas"),g.container){var A=g.container;A.appendChild(C)}else document.body.appendChild(C);var P=g.gl;if(P||(g.glOptions&&(M=!!g.glOptions.preserveDrawingBuffer),P=w(C,g.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:M})),!P)throw new Error("webgl not supported");var D=g.bounds||[[-10,-10,-10],[10,10,10]],z=new b,O=h(P,P.drawingBufferWidth,P.drawingBufferHeight,{preferFloat:!M}),V=p(P),B=g.cameraObject&&g.cameraObject._ortho===!0||g.camera.projection&&g.camera.projection.type==="orthographic"||!1,F={eye:g.camera.eye||[2,0,0],center:g.camera.center||[0,0,0],up:g.camera.up||[0,1,0],zoomMin:g.camera.zoomMax||.1,zoomMax:g.camera.zoomMin||100,mode:g.camera.mode||"turntable",_ortho:B},N=g.axes||{},Z=l(P,N);Z.enable=!N.disable;var J=g.spikes||{},re=f(P,J),ue=[],fe=[],K=[],X=[],ae=!0,ce=!0,oe=new Array(16),me=new Array(16),xe={view:null,projection:oe,model:me,_ortho:!1},ce=!0,ie=[P.drawingBufferWidth,P.drawingBufferHeight],ge=g.cameraObject||s(C,F),le={gl:P,contextLost:!1,pixelRatio:g.pixelRatio||1,canvas:C,selection:z,camera:ge,axes:Z,axesPixels:null,spikes:re,bounds:D,objects:ue,shape:ie,aspect:g.aspectRatio||[1,1,1],pickRadius:g.pickRadius||10,zNear:g.zNear||.01,zFar:g.zFar||1e3,fovy:g.fovy||Math.PI/4,clearColor:g.clearColor||[0,0,0,0],autoResize:x(g.autoResize),autoBounds:x(g.autoBounds),autoScale:!!g.autoScale,autoCenter:x(g.autoCenter),clipToBounds:x(g.clipToBounds),snapToData:!!g.snapToData,onselect:g.onselect||null,onrender:g.onrender||null,onclick:g.onclick||null,cameraParams:xe,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(_t){this.aspect[0]=_t.x,this.aspect[1]=_t.y,this.aspect[2]=_t.z,ce=!0},setBounds:function(_t,Bt){this.bounds[0][_t]=Bt.min,this.bounds[1][_t]=Bt.max},setClearColor:function(_t){this.clearColor=_t},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},we=[P.drawingBufferWidth/le.pixelRatio|0,P.drawingBufferHeight/le.pixelRatio|0];function Re(){if(!le._stopped&&le.autoResize){var _t=C.parentNode,Bt=1,Lt=1;_t&&_t!==document.body?(Bt=_t.clientWidth,Lt=_t.clientHeight):(Bt=window.innerWidth,Lt=window.innerHeight);var Me=Math.ceil(Bt*le.pixelRatio)|0,Ze=Math.ceil(Lt*le.pixelRatio)|0;if(Me!==C.width||Ze!==C.height){C.width=Me,C.height=Ze;var dt=C.style;dt.position=dt.position||"absolute",dt.left="0px",dt.top="0px",dt.width=Bt+"px",dt.height=Lt+"px",ae=!0}}}le.autoResize&&Re(),window.addEventListener("resize",Re);function qe(){for(var _t=ue.length,Bt=X.length,Lt=0;Lt<Bt;++Lt)K[Lt]=0;e:for(var Lt=0;Lt<_t;++Lt){var Me=ue[Lt],Ze=Me.pickSlots;if(!Ze){fe[Lt]=-1;continue}for(var dt=0;dt<Bt;++dt)if(K[dt]+Ze<255){fe[Lt]=dt,Me.setPickBase(K[dt]+1),K[dt]+=Ze;continue e}var it=c(P,ie);fe[Lt]=Bt,X.push(it),K.push(Ze),Me.setPickBase(1),Bt+=1}for(;Bt>0&&K[Bt-1]===0;)K.pop(),X.pop().dispose()}le.update=function(_t){le._stopped||(_t=_t||{},ae=!0,ce=!0)},le.add=function(_t){le._stopped||(_t.axes=Z,ue.push(_t),fe.push(-1),ae=!0,ce=!0,qe())},le.remove=function(_t){if(!le._stopped){var Bt=ue.indexOf(_t);Bt<0||(ue.splice(Bt,1),fe.pop(),ae=!0,ce=!0,qe())}},le.dispose=function(){if(!le._stopped&&(le._stopped=!0,window.removeEventListener("resize",Re),C.removeEventListener("webglcontextlost",et),le.mouseListener.enabled=!1,!le.contextLost)){Z.dispose(),re.dispose();for(var _t=0;_t<ue.length;++_t)ue[_t].dispose();O.dispose();for(var _t=0;_t<X.length;++_t)X[_t].dispose();V.dispose(),P=null,Z=null,re=null,ue=[]}},le._mouseRotating=!1,le._prevButtons=0,le.enableMouseListeners=function(){le.mouseListener=d(C,function(_t,Bt,Lt){if(!le._stopped){var Me=X.length,Ze=ue.length,dt=z.object;z.distance=1/0,z.mouse[0]=Bt,z.mouse[1]=Lt,z.object=null,z.screen=null,z.dataCoordinate=z.dataPosition=null;var it=!1;if(_t&&le._prevButtons)le._mouseRotating=!0;else{le._mouseRotating&&(ce=!0),le._mouseRotating=!1;for(var vt=0;vt<Me;++vt){var rt=X[vt].query(Bt,we[1]-Lt-1,le.pickRadius);if(rt){if(rt.distance>z.distance)continue;for(var We=0;We<Ze;++We){var ht=ue[We];if(fe[We]===vt){var mt=ht.pick(rt);mt&&(z.buttons=_t,z.screen=rt.coord,z.distance=rt.distance,z.object=ht,z.index=mt.distance,z.dataPosition=mt.position,z.dataCoordinate=mt.dataCoordinate,z.data=mt,it=!0)}}}}}dt&&dt!==z.object&&(dt.highlight&&dt.highlight(null),ae=!0),z.object&&(z.object.highlight&&z.object.highlight(z.data),ae=!0),it=it||z.object!==dt,it&&le.onselect&&le.onselect(z),_t&1&&!(le._prevButtons&1)&&le.onclick&&le.onclick(z),le._prevButtons=_t}})};function et(){if(le.contextLost)return!0;P.isContextLost()&&(le.contextLost=!0,le.mouseListener.enabled=!1,le.selection.object=null,le.oncontextloss&&le.oncontextloss())}C.addEventListener("webglcontextlost",et);function Pe(){if(!et()){P.colorMask(!0,!0,!0,!0),P.depthMask(!0),P.disable(P.BLEND),P.enable(P.DEPTH_TEST),P.depthFunc(P.LEQUAL);for(var _t=ue.length,Bt=X.length,Lt=0;Lt<Bt;++Lt){var Me=X[Lt];Me.shape=we,Me.begin();for(var Ze=0;Ze<_t;++Ze)if(fe[Ze]===Lt){var dt=ue[Ze];dt.drawPick&&(dt.pixelRatio=1,dt.drawPick(xe))}Me.end()}}}var Ie=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],ut=[Ie[0].slice(),Ie[1].slice()];function ft(){if(!et()){Re();var _t=le.camera.tick();xe.view=le.camera.matrix,ae=ae||_t,ce=ce||_t,Z.pixelRatio=le.pixelRatio,re.pixelRatio=le.pixelRatio;var Bt=ue.length,Lt=Ie[0],Me=Ie[1];Lt[0]=Lt[1]=Lt[2]=1/0,Me[0]=Me[1]=Me[2]=-1/0;for(var Ze=0;Ze<Bt;++Ze){var dt=ue[Ze];dt.pixelRatio=le.pixelRatio,dt.axes=le.axes,ae=ae||!!dt.dirty,ce=ce||!!dt.dirty;var it=dt.bounds;if(it)for(var vt=it[0],rt=it[1],We=0;We<3;++We)Lt[We]=Math.min(Lt[We],vt[We]),Me[We]=Math.max(Me[We],rt[We])}var ht=le.bounds;if(le.autoBounds)for(var We=0;We<3;++We){if(Me[We]<Lt[We])Lt[We]=-1,Me[We]=1;else{Lt[We]===Me[We]&&(Lt[We]-=1,Me[We]+=1);var mt=.05*(Me[We]-Lt[We]);Lt[We]=Lt[We]-mt,Me[We]=Me[We]+mt}ht[0][We]=Lt[We],ht[1][We]=Me[We]}for(var er=!1,We=0;We<3;++We)er=er||ut[0][We]!==ht[0][We]||ut[1][We]!==ht[1][We],ut[0][We]=ht[0][We],ut[1][We]=ht[1][We];if(ce=ce||er,ae=ae||er,!!ae){if(er){for(var $t=[0,0,0],Ze=0;Ze<3;++Ze)$t[Ze]=k((ht[1][Ze]-ht[0][Ze])/10);Z.autoTicks?Z.update({bounds:ht,tickSpacing:$t}):Z.update({bounds:ht})}var cr=P.drawingBufferWidth,or=P.drawingBufferHeight;ie[0]=cr,ie[1]=or,we[0]=Math.max(cr/le.pixelRatio,1)|0,we[1]=Math.max(or/le.pixelRatio,1)|0,S(le,B);for(var Ze=0;Ze<Bt;++Ze){var dt=ue[Ze];dt.axesBounds=ht,le.clipToBounds&&(dt.clipBounds=ht)}z.object&&(le.snapToData?re.position=z.dataCoordinate:re.position=z.dataPosition,re.bounds=ht),ce&&(ce=!1,Pe()),le.axesPixels=u(le.axes,xe,cr,or),le.onrender&&le.onrender(),P.bindFramebuffer(P.FRAMEBUFFER,null),P.viewport(0,0,cr,or),le.clearRGBA(),P.depthMask(!0),P.colorMask(!0,!0,!0,!0),P.enable(P.DEPTH_TEST),P.depthFunc(P.LEQUAL),P.disable(P.BLEND),P.disable(P.CULL_FACE);var vr=!1;Z.enable&&(vr=vr||Z.isTransparent(),Z.draw(xe)),re.axes=Z,z.object&&re.draw(xe),P.disable(P.CULL_FACE);for(var Ze=0;Ze<Bt;++Ze){var dt=ue[Ze];dt.axes=Z,dt.pixelRatio=le.pixelRatio,dt.isOpaque&&dt.isOpaque()&&dt.draw(xe),dt.isTransparent&&dt.isTransparent()&&(vr=!0)}if(vr){O.shape=ie,O.bind(),P.clear(P.DEPTH_BUFFER_BIT),P.colorMask(!1,!1,!1,!1),P.depthMask(!0),P.depthFunc(P.LESS),Z.enable&&Z.isTransparent()&&Z.drawTransparent(xe);for(var Ze=0;Ze<Bt;++Ze){var dt=ue[Ze];dt.isOpaque&&dt.isOpaque()&&dt.draw(xe)}P.enable(P.BLEND),P.blendEquation(P.FUNC_ADD),P.blendFunc(P.ONE,P.ONE_MINUS_SRC_ALPHA),P.colorMask(!0,!0,!0,!0),P.depthMask(!1),P.clearColor(0,0,0,0),P.clear(P.COLOR_BUFFER_BIT),Z.isTransparent()&&Z.drawTransparent(xe);for(var Ze=0;Ze<Bt;++Ze){var dt=ue[Ze];dt.isTransparent&&dt.isTransparent()&&dt.drawTransparent(xe)}P.bindFramebuffer(P.FRAMEBUFFER,null),P.blendFunc(P.ONE,P.ONE_MINUS_SRC_ALPHA),P.disable(P.DEPTH_TEST),V.bind(),O.color[0].bind(0),V.uniforms.accumBuffer=0,v(P),P.disable(P.BLEND)}ae=!1;for(var Ze=0;Ze<Bt;++Ze)ue[Ze].dirty=!1}}}function je(){le._stopped||le.contextLost||(ft(),requestAnimationFrame(je))}return le.enableMouseListeners(),je(),le.redraw=function(){le._stopped||(ae=!0,ft())},le}function S(g,C){var A=g.bounds,P=g.cameraParams,D=P.projection,z=P.model,O=g.gl.drawingBufferWidth,V=g.gl.drawingBufferHeight,B=g.zNear,F=g.zFar,N=g.fovy,Z=O/V;C?(T(D,-Z,Z,-1,1,B,F),P._ortho=!0):(_(D,N,Z,B,F),P._ortho=!1);for(var J=0;J<16;++J)z[J]=0;z[15]=1;for(var re=0,J=0;J<3;++J)re=Math.max(re,A[1][J]-A[0][J]);for(var J=0;J<3;++J)g.autoScale?z[5*J]=g.aspect[J]/(A[1][J]-A[0][J]):z[5*J]=1/re,g.autoCenter&&(z[12+J]=-z[5*J]*.5*(A[0][J]+A[1][J]))}},6640:function(n,a,o){var s=o(3236);a.pointVertex=s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),a.pointFragment=s([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),a.pickVertex=s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),a.pickFragment=s([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},4696:function(n,a,o){"use strict";var s=o(9405),l=o(2762),u=o(1888),f=o(6640);n.exports=d;function c(_,T,p,M,b){this.plot=_,this.offsetBuffer=T,this.pickBuffer=p,this.shader=M,this.pickShader=b,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var h=c.prototype;h.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},h.update=function(_){var T;_=_||{};function p(S,g){return S in _?_[S]:g}this.sizeMin=p("sizeMin",.5),this.sizeMax=p("sizeMax",20),this.color=p("color",[1,0,0,1]).slice(),this.areaRatio=p("areaRatio",1),this.borderColor=p("borderColor",[0,0,0,1]).slice(),this.blend=p("blend",!1);var M=_.positions.length>>>1,b=_.positions instanceof Float32Array,w=_.idToIndex instanceof Int32Array&&_.idToIndex.length>=M,k=_.positions,x=b?k:u.mallocFloat32(k.length),E=w?_.idToIndex:u.mallocInt32(M);if(b||x.set(k),!w)for(x.set(k),T=0;T<M;T++)E[T]=T;this.points=k,this.offsetBuffer.update(x),this.pickBuffer.update(E),b||u.free(x),w||u.free(E),this.pointCount=M,this.pickOffset=0};function v(_,T){var p=0,M=_.length>>>1,b;for(b=0;b<M;b++){var w=_[b*2],k=_[b*2+1];w>=T[0]&&w<=T[2]&&k>=T[1]&&k<=T[3]&&p++}return p}h.unifiedDraw=function(){var _=[1,0,0,0,1,0,0,0,1],T=[0,0,0,0];return function(p){var M=p!==void 0,b=M?this.pickShader:this.shader,w=this.plot.gl,k=this.plot.dataBox;if(this.pointCount===0)return p;var x=k[2]-k[0],E=k[3]-k[1],S=v(this.points,k),g=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(S,.33333)));_[0]=2/x,_[4]=2/E,_[6]=-2*k[0]/x-1,_[7]=-2*k[1]/E-1,this.offsetBuffer.bind(),b.bind(),b.attributes.position.pointer(),b.uniforms.matrix=_,b.uniforms.color=this.color,b.uniforms.borderColor=this.borderColor,b.uniforms.pointCloud=g<5,b.uniforms.pointSize=g,b.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),M&&(T[0]=p&255,T[1]=p>>8&255,T[2]=p>>16&255,T[3]=p>>24&255,this.pickBuffer.bind(),b.attributes.pickId.pointer(w.UNSIGNED_BYTE),b.uniforms.pickOffset=T,this.pickOffset=p);var C=w.getParameter(w.BLEND),A=w.getParameter(w.DITHER);return C&&!this.blend&&w.disable(w.BLEND),A&&w.disable(w.DITHER),w.drawArrays(w.POINTS,0,this.pointCount),C&&!this.blend&&w.enable(w.BLEND),A&&w.enable(w.DITHER),p+this.pointCount}}(),h.draw=h.unifiedDraw,h.drawPick=h.unifiedDraw,h.pick=function(_,T,p){var M=this.pickOffset,b=this.pointCount;if(p<M||p>=M+b)return null;var w=p-M,k=this.points;return{object:this,pointId:w,dataCoord:[k[2*w],k[2*w+1]]}};function d(_,T){var p=_.gl,M=l(p),b=l(p),w=s(p,f.pointVertex,f.pointFragment),k=s(p,f.pickVertex,f.pickFragment),x=new c(_,M,b,w,k);return x.update(T),_.addObject(x),x}},783:function(n){n.exports=a;function a(o,s,l,u){var f=s[0],c=s[1],h=s[2],v=s[3],d=l[0],_=l[1],T=l[2],p=l[3],M,b,w,k,x;return b=f*d+c*_+h*T+v*p,b<0&&(b=-b,d=-d,_=-_,T=-T,p=-p),1-b>1e-6?(M=Math.acos(b),w=Math.sin(M),k=Math.sin((1-u)*M)/w,x=Math.sin(u*M)/w):(k=1-u,x=u),o[0]=k*f+x*d,o[1]=k*c+x*_,o[2]=k*h+x*T,o[3]=k*v+x*p,o}},5964:function(n){"use strict";n.exports=function(a){return!a&&a!==0?"":a.toString()}},9366:function(n,a,o){"use strict";var s=o(4359);n.exports=u;var l={};function u(f,c,h){var v=l[c];if(v||(v=l[c]={}),f in v)return v[f];var d={textAlign:"center",textBaseline:"middle",lineHeight:1,font:c,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};d.triangles=!0;var _=s(f,d);d.triangles=!1;var T=s(f,d),p,M;if(h&&h!==1){for(p=0;p<_.positions.length;++p)for(M=0;M<_.positions[p].length;++M)_.positions[p][M]/=h;for(p=0;p<T.positions.length;++p)for(M=0;M<T.positions[p].length;++M)T.positions[p][M]/=h}var b=[[1/0,1/0],[-1/0,-1/0]],w=T.positions.length;for(p=0;p<w;++p){var k=T.positions[p];for(M=0;M<2;++M)b[0][M]=Math.min(b[0][M],k[M]),b[1][M]=Math.max(b[1][M],k[M])}return v[f]=[_,T,b]}},1283:function(n,a,o){var s=o(9405),l=o(3236),u=l([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),f=l([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),c=l([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),h=l([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),v=l([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),d=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],_={vertex:u,fragment:h,attributes:d},T={vertex:f,fragment:h,attributes:d},p={vertex:c,fragment:h,attributes:d},M={vertex:u,fragment:v,attributes:d},b={vertex:f,fragment:v,attributes:d},w={vertex:c,fragment:v,attributes:d};function k(x,E){var S=s(x,E),g=S.attributes;return g.position.location=0,g.color.location=1,g.glyph.location=2,g.id.location=3,S}a.createPerspective=function(x){return k(x,_)},a.createOrtho=function(x){return k(x,T)},a.createProject=function(x){return k(x,p)},a.createPickPerspective=function(x){return k(x,M)},a.createPickOrtho=function(x){return k(x,b)},a.createPickProject=function(x){return k(x,w)}},8418:function(n,a,o){"use strict";var s=o(5219),l=o(2762),u=o(8116),f=o(1888),c=o(6760),h=o(1283),v=o(9366),d=o(5964),_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];n.exports=fe;function T(K,X){var ae=K[0],oe=K[1],me=K[2],xe=K[3];return K[0]=X[0]*ae+X[4]*oe+X[8]*me+X[12]*xe,K[1]=X[1]*ae+X[5]*oe+X[9]*me+X[13]*xe,K[2]=X[2]*ae+X[6]*oe+X[10]*me+X[14]*xe,K[3]=X[3]*ae+X[7]*oe+X[11]*me+X[15]*xe,K}function p(K,X,ae,oe){return T(oe,oe,ae),T(oe,oe,X),T(oe,oe,K)}function M(K,X){this.index=K,this.dataCoordinate=this.position=X}function b(K){return K===!0||K>1?1:K}function w(K,X,ae,oe,me,xe,ce,ie,ge,le,we,Re){this.gl=K,this.pixelRatio=1,this.shader=X,this.orthoShader=ae,this.projectShader=oe,this.pointBuffer=me,this.colorBuffer=xe,this.glyphBuffer=ce,this.idBuffer=ie,this.vao=ge,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=le,this.pickOrthoShader=we,this.pickProjectShader=Re,this.points=[],this._selectResult=new M(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var k=w.prototype;k.pickSlots=1,k.setPickBase=function(K){this.pickId=K},k.isTransparent=function(){if(this.hasAlpha)return!0;for(var K=0;K<3;++K)if(this.axesProject[K]&&this.projectHasAlpha)return!0;return!1},k.isOpaque=function(){if(!this.hasAlpha)return!0;for(var K=0;K<3;++K)if(this.axesProject[K]&&!this.projectHasAlpha)return!0;return!1};var x=[0,0],E=[0,0,0],S=[0,0,0],g=[0,0,0,1],C=[0,0,0,1],A=_.slice(),P=[0,0,0],D=[[0,0,0],[0,0,0]];function z(K){return K[0]=K[1]=K[2]=0,K}function O(K,X){return K[0]=X[0],K[1]=X[1],K[2]=X[2],K[3]=1,K}function V(K,X,ae,oe){return K[0]=X[0],K[1]=X[1],K[2]=X[2],K[ae]=oe,K}function B(K){for(var X=D,ae=0;ae<2;++ae)for(var oe=0;oe<3;++oe)X[ae][oe]=Math.max(Math.min(K[ae][oe],1e8),-1e8);return X}function F(K,X,ae,oe){var me=X.axesProject,xe=X.gl,ce=K.uniforms,ie=ae.model||_,ge=ae.view||_,le=ae.projection||_,we=X.axesBounds,Re=B(X.clipBounds),qe;X.axes&&X.axes.lastCubeProps?qe=X.axes.lastCubeProps.axis:qe=[1,1,1],x[0]=2/xe.drawingBufferWidth,x[1]=2/xe.drawingBufferHeight,K.bind(),ce.view=ge,ce.projection=le,ce.screenSize=x,ce.highlightId=X.highlightId,ce.highlightScale=X.highlightScale,ce.clipBounds=Re,ce.pickGroup=X.pickId/255,ce.pixelRatio=oe;for(var et=0;et<3;++et)if(me[et]){ce.scale=X.projectScale[et],ce.opacity=X.projectOpacity[et];for(var Pe=A,Ie=0;Ie<16;++Ie)Pe[Ie]=0;for(var Ie=0;Ie<4;++Ie)Pe[5*Ie]=1;Pe[5*et]=0,qe[et]<0?Pe[12+et]=we[0][et]:Pe[12+et]=we[1][et],c(Pe,ie,Pe),ce.model=Pe;var ut=(et+1)%3,ft=(et+2)%3,je=z(E),_t=z(S);je[ut]=1,_t[ft]=1;var Bt=p(le,ge,ie,O(g,je)),Lt=p(le,ge,ie,O(C,_t));if(Math.abs(Bt[1])>Math.abs(Lt[1])){var Me=Bt;Bt=Lt,Lt=Me,Me=je,je=_t,_t=Me;var Ze=ut;ut=ft,ft=Ze}Bt[0]<0&&(je[ut]=-1),Lt[1]>0&&(_t[ft]=-1);for(var dt=0,it=0,Ie=0;Ie<4;++Ie)dt+=Math.pow(ie[4*ut+Ie],2),it+=Math.pow(ie[4*ft+Ie],2);je[ut]/=Math.sqrt(dt),_t[ft]/=Math.sqrt(it),ce.axes[0]=je,ce.axes[1]=_t,ce.fragClipBounds[0]=V(P,Re[0],et,-1e8),ce.fragClipBounds[1]=V(P,Re[1],et,1e8),X.vao.bind(),X.vao.draw(xe.TRIANGLES,X.vertexCount),X.lineWidth>0&&(xe.lineWidth(X.lineWidth*oe),X.vao.draw(xe.LINES,X.lineVertexCount,X.vertexCount)),X.vao.unbind()}}var N=[-1e8,-1e8,-1e8],Z=[1e8,1e8,1e8],J=[N,Z];function re(K,X,ae,oe,me,xe,ce){var ie=ae.gl;if((xe===ae.projectHasAlpha||ce)&&F(X,ae,oe,me),xe===ae.hasAlpha||ce){K.bind();var ge=K.uniforms;ge.model=oe.model||_,ge.view=oe.view||_,ge.projection=oe.projection||_,x[0]=2/ie.drawingBufferWidth,x[1]=2/ie.drawingBufferHeight,ge.screenSize=x,ge.highlightId=ae.highlightId,ge.highlightScale=ae.highlightScale,ge.fragClipBounds=J,ge.clipBounds=ae.axes.bounds,ge.opacity=ae.opacity,ge.pickGroup=ae.pickId/255,ge.pixelRatio=me,ae.vao.bind(),ae.vao.draw(ie.TRIANGLES,ae.vertexCount),ae.lineWidth>0&&(ie.lineWidth(ae.lineWidth*me),ae.vao.draw(ie.LINES,ae.lineVertexCount,ae.vertexCount)),ae.vao.unbind()}}k.draw=function(K){var X=this.useOrtho?this.orthoShader:this.shader;re(X,this.projectShader,this,K,this.pixelRatio,!1,!1)},k.drawTransparent=function(K){var X=this.useOrtho?this.orthoShader:this.shader;re(X,this.projectShader,this,K,this.pixelRatio,!0,!1)},k.drawPick=function(K){var X=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;re(X,this.pickProjectShader,this,K,1,!0,!0)},k.pick=function(K){if(!K||K.id!==this.pickId)return null;var X=K.value[2]+(K.value[1]<<8)+(K.value[0]<<16);if(X>=this.pointCount||X<0)return null;var ae=this.points[X],oe=this._selectResult;oe.index=X;for(var me=0;me<3;++me)oe.position[me]=oe.dataCoordinate[me]=ae[me];return oe},k.highlight=function(K){if(!K)this.highlightId=[1,1,1,1];else{var X=K.index,ae=X&255,oe=X>>8&255,me=X>>16&255;this.highlightId=[ae/255,oe/255,me/255,0]}};function ue(K,X,ae,oe){var me;Array.isArray(K)?X<K.length?me=K[X]:me=void 0:me=K,me=d(me);var xe=!0;s(me)&&(me="\u25BC",xe=!1);var ce=v(me,ae,oe);return{mesh:ce[0],lines:ce[1],bounds:ce[2],visible:xe}}k.update=function(K){if(K=K||{},"perspective"in K&&(this.useOrtho=!K.perspective),"orthographic"in K&&(this.useOrtho=!!K.orthographic),"lineWidth"in K&&(this.lineWidth=K.lineWidth),"project"in K)if(Array.isArray(K.project))this.axesProject=K.project;else{var X=!!K.project;this.axesProject=[X,X,X]}if("projectScale"in K)if(Array.isArray(K.projectScale))this.projectScale=K.projectScale.slice();else{var ae=+K.projectScale;this.projectScale=[ae,ae,ae]}if(this.projectHasAlpha=!1,"projectOpacity"in K){if(Array.isArray(K.projectOpacity))this.projectOpacity=K.projectOpacity.slice();else{var ae=+K.projectOpacity;this.projectOpacity=[ae,ae,ae]}for(var oe=0;oe<3;++oe)this.projectOpacity[oe]=b(this.projectOpacity[oe]),this.projectOpacity[oe]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in K&&(this.opacity=b(K.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var me=K.position,xe=K.font||"normal",ce=K.alignment||[0,0],ie,ge;if(ce.length===2)ie=ce[0],ge=ce[1];else{ie=[],ge=[];for(var oe=0;oe<ce.length;++oe)ie[oe]=ce[oe][0],ge[oe]=ce[oe][1]}var le=[1/0,1/0,1/0],we=[-1/0,-1/0,-1/0],Re=K.glyph,qe=K.color,et=K.size,Pe=K.angle,Ie=K.lineColor,ut=-1,ft=0,je=0,_t=0;if(me.length){_t=me.length;e:for(var oe=0;oe<_t;++oe){for(var Bt=me[oe],Lt=0;Lt<3;++Lt)if(isNaN(Bt[Lt])||!isFinite(Bt[Lt]))continue e;var Me=ue(Re,oe,xe,this.pixelRatio),Ze=Me.mesh,dt=Me.lines,it=Me.bounds;ft+=Ze.cells.length*3,je+=dt.edges.length*2}}var vt=ft+je,rt=f.mallocFloat(3*vt),We=f.mallocFloat(4*vt),ht=f.mallocFloat(2*vt),mt=f.mallocUint32(vt);if(vt>0){var er=0,$t=ft,cr=[0,0,0,1],or=[0,0,0,1],vr=Array.isArray(qe)&&Array.isArray(qe[0]),Ot=Array.isArray(Ie)&&Array.isArray(Ie[0]);e:for(var oe=0;oe<_t;++oe){ut+=1;for(var Bt=me[oe],Lt=0;Lt<3;++Lt){if(isNaN(Bt[Lt])||!isFinite(Bt[Lt]))continue e;we[Lt]=Math.max(we[Lt],Bt[Lt]),le[Lt]=Math.min(le[Lt],Bt[Lt])}var Me=ue(Re,oe,xe,this.pixelRatio),Ze=Me.mesh,dt=Me.lines,it=Me.bounds,yt=Me.visible;if(!yt)cr=[1,1,1,0];else if(Array.isArray(qe)){var Et;if(vr?oe<qe.length?Et=qe[oe]:Et=[0,0,0,0]:Et=qe,Et.length===3){for(var Lt=0;Lt<3;++Lt)cr[Lt]=Et[Lt];cr[3]=1}else if(Et.length===4){for(var Lt=0;Lt<4;++Lt)cr[Lt]=Et[Lt];!this.hasAlpha&&Et[3]<1&&(this.hasAlpha=!0)}}else cr[0]=cr[1]=cr[2]=0,cr[3]=1;if(!yt)or=[1,1,1,0];else if(Array.isArray(Ie)){var Et;if(Ot?oe<Ie.length?Et=Ie[oe]:Et=[0,0,0,0]:Et=Ie,Et.length===3){for(var Lt=0;Lt<3;++Lt)or[Lt]=Et[Lt];or[Lt]=1}else if(Et.length===4){for(var Lt=0;Lt<4;++Lt)or[Lt]=Et[Lt];!this.hasAlpha&&Et[3]<1&&(this.hasAlpha=!0)}}else or[0]=or[1]=or[2]=0,or[3]=1;var Je=.5;yt?Array.isArray(et)?oe<et.length?Je=+et[oe]:Je=12:et?Je=+et:this.useOrtho&&(Je=12):Je=0;var Ke=0;Array.isArray(Pe)?oe<Pe.length?Ke=+Pe[oe]:Ke=0:Pe&&(Ke=+Pe);for(var At=Math.cos(Ke),Ee=Math.sin(Ke),Bt=me[oe],Lt=0;Lt<3;++Lt)we[Lt]=Math.max(we[Lt],Bt[Lt]),le[Lt]=Math.min(le[Lt],Bt[Lt]);var de=ie,Te=ge,de=0;Array.isArray(ie)?oe<ie.length?de=ie[oe]:de=0:ie&&(de=ie);var Te=0;Array.isArray(ge)?oe<ge.length?Te=ge[oe]:Te=0:ge&&(Te=ge),de*=de>0?1-it[0][0]:de<0?1+it[1][0]:1,Te*=Te>0?1-it[0][1]:Te<0?1+it[1][1]:1;for(var nt=[de,Te],Vr=Ze.cells||[],mr=Ze.positions||[],Lt=0;Lt<Vr.length;++Lt)for(var Mt=Vr[Lt],Kt=0;Kt<3;++Kt){for(var Jt=0;Jt<3;++Jt)rt[3*er+Jt]=Bt[Jt];for(var Jt=0;Jt<4;++Jt)We[4*er+Jt]=cr[Jt];mt[er]=ut;var Fr=mr[Mt[Kt]];ht[2*er]=Je*(At*Fr[0]-Ee*Fr[1]+nt[0]),ht[2*er+1]=Je*(Ee*Fr[0]+At*Fr[1]+nt[1]),er+=1}for(var Vr=dt.edges,mr=dt.positions,Lt=0;Lt<Vr.length;++Lt)for(var Mt=Vr[Lt],Kt=0;Kt<2;++Kt){for(var Jt=0;Jt<3;++Jt)rt[3*$t+Jt]=Bt[Jt];for(var Jt=0;Jt<4;++Jt)We[4*$t+Jt]=or[Jt];mt[$t]=ut;var Fr=mr[Mt[Kt]];ht[2*$t]=Je*(At*Fr[0]-Ee*Fr[1]+nt[0]),ht[2*$t+1]=Je*(Ee*Fr[0]+At*Fr[1]+nt[1]),$t+=1}}}this.bounds=[le,we],this.points=me,this.pointCount=me.length,this.vertexCount=ft,this.lineVertexCount=je,this.pointBuffer.update(rt),this.colorBuffer.update(We),this.glyphBuffer.update(ht),this.idBuffer.update(mt),f.free(rt),f.free(We),f.free(ht),f.free(mt)},k.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function fe(K){var X=K.gl,ae=h.createPerspective(X),oe=h.createOrtho(X),me=h.createProject(X),xe=h.createPickPerspective(X),ce=h.createPickOrtho(X),ie=h.createPickProject(X),ge=l(X),le=l(X),we=l(X),Re=l(X),qe=u(X,[{buffer:ge,size:3,type:X.FLOAT},{buffer:le,size:4,type:X.FLOAT},{buffer:we,size:2,type:X.FLOAT},{buffer:Re,size:4,type:X.UNSIGNED_BYTE,normalized:!0}]),et=new w(X,ae,oe,me,ge,le,we,Re,qe,xe,ce,ie);return et.update(K),et}},4298:function(n,a,o){"use strict";var s=o(3236);a.boxVertex=s([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),a.boxFragment=s([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},3161:function(n,a,o){"use strict";var s=o(9405),l=o(2762),u=o(4298);n.exports=h;function f(v,d,_){this.plot=v,this.boxBuffer=d,this.boxShader=_,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var c=f.prototype;c.draw=function(){if(this.enabled){var v=this.plot,d=this.selectBox,_=this.borderWidth,T=this.innerFill,p=this.innerColor,M=this.outerFill,b=this.outerColor,w=this.borderColor,k=v.box,x=v.screenBox,E=v.dataBox,S=v.viewBox,g=v.pixelRatio,C=(d[0]-E[0])*(S[2]-S[0])/(E[2]-E[0])+S[0],A=(d[1]-E[1])*(S[3]-S[1])/(E[3]-E[1])+S[1],P=(d[2]-E[0])*(S[2]-S[0])/(E[2]-E[0])+S[0],D=(d[3]-E[1])*(S[3]-S[1])/(E[3]-E[1])+S[1];if(C=Math.max(C,S[0]),A=Math.max(A,S[1]),P=Math.min(P,S[2]),D=Math.min(D,S[3]),!(P<C||D<A)){k.bind();var z=x[2]-x[0],O=x[3]-x[1];if(this.outerFill&&(k.drawBox(0,0,z,A,b),k.drawBox(0,A,C,D,b),k.drawBox(0,D,z,O,b),k.drawBox(P,A,z,D,b)),this.innerFill&&k.drawBox(C,A,P,D,p),_>0){var V=_*g;k.drawBox(C-V,A-V,P+V,A+V,w),k.drawBox(C-V,D-V,P+V,D+V,w),k.drawBox(C-V,A-V,C+V,D+V,w),k.drawBox(P-V,A-V,P+V,D+V,w)}}}},c.update=function(v){v=v||{},this.innerFill=!!v.innerFill,this.outerFill=!!v.outerFill,this.innerColor=(v.innerColor||[0,0,0,.5]).slice(),this.outerColor=(v.outerColor||[0,0,0,.5]).slice(),this.borderColor=(v.borderColor||[0,0,0,1]).slice(),this.borderWidth=v.borderWidth||0,this.selectBox=(v.selectBox||this.selectBox).slice()},c.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function h(v,d){var _=v.gl,T=l(_,[0,0,0,1,1,0,1,1]),p=s(_,u.boxVertex,u.boxFragment),M=new f(v,T,p);return M.update(d),v.addOverlay(M),M}},3589:function(n,a,o){"use strict";n.exports=_;var s=o(2260),l=o(1888),u=o(9618),f=o(8828).nextPow2,c=function(T,p,M){for(var b=1e8,w=-1,k=-1,x=T.shape[0],E=T.shape[1],S=0;S<x;S++)for(var g=0;g<E;g++){var C=T.get(S,g,0),A=T.get(S,g,1),P=T.get(S,g,2),D=T.get(S,g,3);if(C<255||A<255||P<255||D<255){var z=p-S,O=M-g,V=z*z+O*O;V<b&&(b=V,w=S,k=g)}}return[w,k,b]};function h(T,p,M,b,w){this.coord=[T,p],this.id=M,this.value=b,this.distance=w}function v(T,p,M){this.gl=T,this.fbo=p,this.buffer=M,this._readTimeout=null;var b=this;this._readCallback=function(){b.gl&&(p.bind(),T.readPixels(0,0,p.shape[0],p.shape[1],T.RGBA,T.UNSIGNED_BYTE,b.buffer),b._readTimeout=null)}}var d=v.prototype;Object.defineProperty(d,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(T){if(this.gl){this.fbo.shape=T;var p=this.fbo.shape[0],M=this.fbo.shape[1];if(M*p*4>this.buffer.length){l.free(this.buffer);for(var b=this.buffer=l.mallocUint8(f(M*p*4)),w=0;w<M*p*4;++w)b[w]=255}return T}}}),d.begin=function(){var T=this.gl,p=this.shape;T&&(this.fbo.bind(),T.clearColor(1,1,1,1),T.clear(T.COLOR_BUFFER_BIT|T.DEPTH_BUFFER_BIT))},d.end=function(){var T=this.gl;T&&(T.bindFramebuffer(T.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},d.query=function(T,p,M){if(!this.gl)return null;var b=this.fbo.shape.slice();T=T|0,p=p|0,typeof M!="number"&&(M=1);var w=Math.min(Math.max(T-M,0),b[0])|0,k=Math.min(Math.max(T+M,0),b[0])|0,x=Math.min(Math.max(p-M,0),b[1])|0,E=Math.min(Math.max(p+M,0),b[1])|0;if(k<=w||E<=x)return null;var S=[k-w,E-x],g=u(this.buffer,[S[0],S[1],4],[4,b[0]*4,1],4*(w+b[0]*x)),C=c(g.hi(S[0],S[1],1),M,M),A=C[0],P=C[1];if(A<0||Math.pow(this.radius,2)<C[2])return null;var D=g.get(A,P,0),z=g.get(A,P,1),O=g.get(A,P,2),V=g.get(A,P,3);return new h(A+w|0,P+x|0,D,[z,O,V],Math.sqrt(C[2]))},d.dispose=function(){this.gl&&(this.fbo.dispose(),l.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function _(T,p){var M=p[0],b=p[1],w={},k=s(T,M,b,w),x=l.mallocUint8(M*b*4);return new v(T,k,x)}},9405:function(n,a,o){"use strict";var s=o(3327),l=o(8731),u=o(216),f=o(5091),c=o(2145),h=o(8866);function v(p){this.gl=p,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var d=v.prototype;d.bind=function(){this.program||this._relink();var p,M=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),b=this.gl.lastAttribCount;if(M>b)for(p=b;p<M;p++)this.gl.enableVertexAttribArray(p);else if(b>M)for(p=M;p<b;p++)this.gl.disableVertexAttribArray(p);this.gl.lastAttribCount=M,this.gl.useProgram(this.program)},d.dispose=function(){for(var p=this.gl.lastAttribCount,M=0;M<p;M++)this.gl.disableVertexAttribArray(M);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function _(p,M){return p.name<M.name?-1:1}d.update=function(p,M,b,w){if(!M||arguments.length===1){var k=p;p=k.vertex,M=k.fragment,b=k.uniforms,w=k.attributes}var x=this,E=x.gl,S=x._vref;x._vref=f.shader(E,E.VERTEX_SHADER,p),S&&S.dispose(),x.vertShader=x._vref.shader;var g=this._fref;if(x._fref=f.shader(E,E.FRAGMENT_SHADER,M),g&&g.dispose(),x.fragShader=x._fref.shader,!b||!w){var C=E.createProgram();if(E.attachShader(C,x.fragShader),E.attachShader(C,x.vertShader),E.linkProgram(C),!E.getProgramParameter(C,E.LINK_STATUS)){var A=E.getProgramInfoLog(C);throw new h(A,"Error linking program:"+A)}b=b||c.uniforms(E,C),w=w||c.attributes(E,C),E.deleteProgram(C)}w=w.slice(),w.sort(_);var P=[],D=[],z=[],O;for(O=0;O<w.length;++O){var V=w[O];if(V.type.indexOf("mat")>=0){for(var B=V.type.charAt(V.type.length-1)|0,F=new Array(B),N=0;N<B;++N)F[N]=z.length,D.push(V.name+"["+N+"]"),typeof V.location=="number"?z.push(V.location+N):Array.isArray(V.location)&&V.location.length===B&&typeof V.location[N]=="number"?z.push(V.location[N]|0):z.push(-1);P.push({name:V.name,type:V.type,locations:F})}else P.push({name:V.name,type:V.type,locations:[z.length]}),D.push(V.name),typeof V.location=="number"?z.push(V.location|0):z.push(-1)}var Z=0;for(O=0;O<z.length;++O)if(z[O]<0){for(;z.indexOf(Z)>=0;)Z+=1;z[O]=Z}var J=new Array(b.length);function re(){x.program=f.program(E,x._vref,x._fref,D,z);for(var ue=0;ue<b.length;++ue)J[ue]=E.getUniformLocation(x.program,b[ue].name)}re(),x._relink=re,x.types={uniforms:u(b),attributes:u(w)},x.attributes=l(E,x,P,z),Object.defineProperty(x,"uniforms",s(E,x,b,J))};function T(p,M,b,w,k){var x=new v(p);return x.update(M,b,w,k),x}n.exports=T},8866:function(n){function a(o,s,l){this.shortMessage=s||"",this.longMessage=l||"",this.rawError=o||"",this.message="gl-shader: "+(s||o||"")+(l?`
`+l:""),this.stack=new Error().stack}a.prototype=new Error,a.prototype.name="GLError",a.prototype.constructor=a,n.exports=a},8731:function(n,a,o){"use strict";n.exports=v;var s=o(8866);function l(d,_,T,p,M,b){this._gl=d,this._wrapper=_,this._index=T,this._locations=p,this._dimension=M,this._constFunc=b}var u=l.prototype;u.pointer=function(_,T,p,M){var b=this,w=b._gl,k=b._locations[b._index];w.vertexAttribPointer(k,b._dimension,_||w.FLOAT,!!T,p||0,M||0),w.enableVertexAttribArray(k)},u.set=function(d,_,T,p){return this._constFunc(this._locations[this._index],d,_,T,p)},Object.defineProperty(u,"location",{get:function(){return this._locations[this._index]},set:function(d){return d!==this._locations[this._index]&&(this._locations[this._index]=d|0,this._wrapper.program=null),d|0}});var f=[function(d,_,T){return T.length===void 0?d.vertexAttrib1f(_,T):d.vertexAttrib1fv(_,T)},function(d,_,T,p){return T.length===void 0?d.vertexAttrib2f(_,T,p):d.vertexAttrib2fv(_,T)},function(d,_,T,p,M){return T.length===void 0?d.vertexAttrib3f(_,T,p,M):d.vertexAttrib3fv(_,T)},function(d,_,T,p,M,b){return T.length===void 0?d.vertexAttrib4f(_,T,p,M,b):d.vertexAttrib4fv(_,T)}];function c(d,_,T,p,M,b,w){var k=f[M],x=new l(d,_,T,p,M,k);Object.defineProperty(b,w,{set:function(E){return d.disableVertexAttribArray(p[T]),k(d,p[T],E),E},get:function(){return x},enumerable:!0})}function h(d,_,T,p,M,b,w){for(var k=new Array(M),x=new Array(M),E=0;E<M;++E)c(d,_,T[E],p,M,k,E),x[E]=k[E];Object.defineProperty(k,"location",{set:function(C){if(Array.isArray(C))for(var A=0;A<M;++A)x[A].location=C[A];else for(var A=0;A<M;++A)x[A].location=C+A;return C},get:function(){for(var C=new Array(M),A=0;A<M;++A)C[A]=p[T[A]];return C},enumerable:!0}),k.pointer=function(C,A,P,D){C=C||d.FLOAT,A=!!A,P=P||M*M,D=D||0;for(var z=0;z<M;++z){var O=p[T[z]];d.vertexAttribPointer(O,M,C,A,P,D+z*M),d.enableVertexAttribArray(O)}};var S=new Array(M),g=d["vertexAttrib"+M+"fv"];Object.defineProperty(b,w,{set:function(C){for(var A=0;A<M;++A){var P=p[T[A]];if(d.disableVertexAttribArray(P),Array.isArray(C[0]))g.call(d,P,C[A]);else{for(var D=0;D<M;++D)S[D]=C[M*A+D];g.call(d,P,S)}}return C},get:function(){return k},enumerable:!0})}function v(d,_,T,p){for(var M={},b=0,w=T.length;b<w;++b){var k=T[b],x=k.name,E=k.type,S=k.locations;switch(E){case"bool":case"int":case"float":c(d,_,S[0],p,1,M,x);break;default:if(E.indexOf("vec")>=0){var g=E.charCodeAt(E.length-1)-48;if(g<2||g>4)throw new s("","Invalid data type for attribute "+x+": "+E);c(d,_,S[0],p,g,M,x)}else if(E.indexOf("mat")>=0){var g=E.charCodeAt(E.length-1)-48;if(g<2||g>4)throw new s("","Invalid data type for attribute "+x+": "+E);h(d,_,S,p,g,M,x)}else throw new s("","Unknown data type for attribute "+x+": "+E);break}}return M}},3327:function(n,a,o){"use strict";var s=o(216),l=o(8866);n.exports=c;function u(h){return function(){return h}}function f(h,v){for(var d=new Array(h),_=0;_<h;++_)d[_]=v;return d}function c(h,v,d,_){function T(E){return function(S,g,C){return S.getUniform(g.program,C[E])}}function p(E){return function(g){for(var C=M("",E),A=0;A<C.length;++A){var P=C[A],D=P[0],z=P[1];if(_[z]){var O=g;if(typeof D=="string"&&(D.indexOf(".")===0||D.indexOf("[")===0)){var V=D;if(D.indexOf(".")===0&&(V=D.slice(1)),V.indexOf("]")===V.length-1){var B=V.indexOf("["),F=V.slice(0,B),N=V.slice(B+1,V.length-1);O=F?g[F][N]:g[N]}else O=g[V]}var Z=d[z].type,J;switch(Z){case"bool":case"int":case"sampler2D":case"samplerCube":h.uniform1i(_[z],O);break;case"float":h.uniform1f(_[z],O);break;default:var re=Z.indexOf("vec");if(0<=re&&re<=1&&Z.length===4+re){if(J=Z.charCodeAt(Z.length-1)-48,J<2||J>4)throw new l("","Invalid data type");switch(Z.charAt(0)){case"b":case"i":h["uniform"+J+"iv"](_[z],O);break;case"v":h["uniform"+J+"fv"](_[z],O);break;default:throw new l("","Unrecognized data type for vector "+name+": "+Z)}}else if(Z.indexOf("mat")===0&&Z.length===4){if(J=Z.charCodeAt(Z.length-1)-48,J<2||J>4)throw new l("","Invalid uniform dimension type for matrix "+name+": "+Z);h["uniformMatrix"+J+"fv"](_[z],!1,O);break}else throw new l("","Unknown uniform data type for "+name+": "+Z)}}}}}function M(E,S){if(typeof S!="object")return[[E,S]];var g=[];for(var C in S){var A=S[C],P=E;parseInt(C)+""===C?P+="["+C+"]":P+="."+C,typeof A=="object"?g.push.apply(g,M(P,A)):g.push([P,A])}return g}function b(E){switch(E){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var S=E.indexOf("vec");if(0<=S&&S<=1&&E.length===4+S){var g=E.charCodeAt(E.length-1)-48;if(g<2||g>4)throw new l("","Invalid data type");return E.charAt(0)==="b"?f(g,!1):f(g,0)}else if(E.indexOf("mat")===0&&E.length===4){var g=E.charCodeAt(E.length-1)-48;if(g<2||g>4)throw new l("","Invalid uniform dimension type for matrix "+name+": "+E);return f(g*g,0)}else throw new l("","Unknown uniform data type for "+name+": "+E)}}function w(E,S,g){if(typeof g=="object"){var C=k(g);Object.defineProperty(E,S,{get:u(C),set:p(g),enumerable:!0,configurable:!1})}else _[g]?Object.defineProperty(E,S,{get:T(g),set:p(g),enumerable:!0,configurable:!1}):E[S]=b(d[g].type)}function k(E){var S;if(Array.isArray(E)){S=new Array(E.length);for(var g=0;g<E.length;++g)w(S,g,E[g])}else{S={};for(var C in E)w(S,C,E[C])}return S}var x=s(d,!0);return{get:u(k(x)),set:p(x),enumerable:!0,configurable:!0}}},216:function(n){"use strict";n.exports=a;function a(o,s){for(var l={},u=0;u<o.length;++u)for(var f=o[u].name,c=f.split("."),h=l,v=0;v<c.length;++v){var d=c[v].split("[");if(d.length>1){d[0]in h||(h[d[0]]=[]),h=h[d[0]];for(var _=1;_<d.length;++_){var T=parseInt(d[_]);_<d.length-1||v<c.length-1?(T in h||(_<d.length-1?h[T]=[]:h[T]={}),h=h[T]):s?h[T]=u:h[T]=o[u].type}}else v<c.length-1?(d[0]in h||(h[d[0]]={}),h=h[d[0]]):s?h[d[0]]=u:h[d[0]]=o[u].type}return l}},2145:function(n,a){"use strict";a.uniforms=u,a.attributes=f;var o={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},s=null;function l(c,h){if(!s){var v=Object.keys(o);s={};for(var d=0;d<v.length;++d){var _=v[d];s[c[_]]=o[_]}}return s[h]}function u(c,h){for(var v=c.getProgramParameter(h,c.ACTIVE_UNIFORMS),d=[],_=0;_<v;++_){var T=c.getActiveUniform(h,_);if(T){var p=l(c,T.type);if(T.size>1)for(var M=0;M<T.size;++M)d.push({name:T.name.replace("[0]","["+M+"]"),type:p});else d.push({name:T.name,type:p})}}return d}function f(c,h){for(var v=c.getProgramParameter(h,c.ACTIVE_ATTRIBUTES),d=[],_=0;_<v;++_){var T=c.getActiveAttrib(h,_);T&&d.push({name:T.name,type:l(c,T.type)})}return d}},5091:function(n,a,o){"use strict";a.shader=M,a.program=b;var s=o(8866),l=o(2992),u=typeof WeakMap=="undefined"?o(606):WeakMap,f=new u,c=0;function h(w,k,x,E,S,g,C){this.id=w,this.src=k,this.type=x,this.shader=E,this.count=g,this.programs=[],this.cache=C}h.prototype.dispose=function(){if(--this.count===0){for(var w=this.cache,k=w.gl,x=this.programs,E=0,S=x.length;E<S;++E){var g=w.programs[x[E]];g&&(delete w.programs[E],k.deleteProgram(g))}k.deleteShader(this.shader),delete w.shaders[this.type===k.FRAGMENT_SHADER|0][this.src]}};function v(w){this.gl=w,this.shaders=[{},{}],this.programs={}}var d=v.prototype;function _(w,k,x){var E=w.createShader(k);if(w.shaderSource(E,x),w.compileShader(E),!w.getShaderParameter(E,w.COMPILE_STATUS)){var S=w.getShaderInfoLog(E);try{var g=l(S,x,k)}catch(C){throw console.warn("Failed to format compiler error: "+C),new s(S,`Error compiling shader:
`+S)}throw new s(S,g.short,g.long)}return E}d.getShaderReference=function(w,k){var x=this.gl,E=this.shaders[w===x.FRAGMENT_SHADER|0],S=E[k];if(!S||!x.isShader(S.shader)){var g=_(x,w,k);S=E[k]=new h(c++,k,w,g,[],1,this)}else S.count+=1;return S};function T(w,k,x,E,S){var g=w.createProgram();w.attachShader(g,k),w.attachShader(g,x);for(var C=0;C<E.length;++C)w.bindAttribLocation(g,S[C],E[C]);if(w.linkProgram(g),!w.getProgramParameter(g,w.LINK_STATUS)){var A=w.getProgramInfoLog(g);throw new s(A,"Error linking program: "+A)}return g}d.getProgram=function(w,k,x,E){var S=[w.id,k.id,x.join(":"),E.join(":")].join("@"),g=this.programs[S];return(!g||!this.gl.isProgram(g))&&(this.programs[S]=g=T(this.gl,w.shader,k.shader,x,E),w.programs.push(S),k.programs.push(S)),g};function p(w){var k=f.get(w);return k||(k=new v(w),f.set(w,k)),k}function M(w,k,x){return p(w).getShaderReference(k,x)}function b(w,k,x,E,S){return p(w).getProgram(k,x,E,S)}},4098:function(n){"use strict";n.exports=s;function a(l){this.plot=l,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var o=a.prototype;o.update=function(l){l=l||{},this.enable=(l.enable||[!0,!0,!1,!1]).slice(),this.width=(l.width||[1,1,1,1]).slice(),this.color=(l.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(u){return u.slice()}),this.center=(l.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},o.draw=function(){var l=this.enable,u=this.width,f=this.color,c=this.center,h=this.plot,v=h.line,d=h.dataBox,_=h.viewBox;if(v.bind(),d[0]<=c[0]&&c[0]<=d[2]&&d[1]<=c[1]&&c[1]<=d[3]){var T=_[0]+(c[0]-d[0])/(d[2]-d[0])*(_[2]-_[0]),p=_[1]+(c[1]-d[1])/(d[3]-d[1])*(_[3]-_[1]);l[0]&&v.drawLine(T,p,_[0],p,u[0],f[0]),l[1]&&v.drawLine(T,p,T,_[1],u[1],f[1]),l[2]&&v.drawLine(T,p,_[2],p,u[2],f[2]),l[3]&&v.drawLine(T,p,T,_[3],u[3],f[3])}},o.dispose=function(){this.plot.removeOverlay(this)};function s(l,u){var f=new a(l);return f.update(u),l.addOverlay(f),f}},1493:function(n,a,o){"use strict";var s=o(3236),l=o(9405),u=s([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),f=s([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);n.exports=function(c){return l(c,u,f,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},4449:function(n,a,o){"use strict";var s=o(2762),l=o(8116),u=o(1493);n.exports=T;var f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function c(p,M,b,w){this.gl=p,this.buffer=M,this.vao=b,this.shader=w,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var h=c.prototype,v=[0,0,0],d=[0,0,0],_=[0,0];h.isTransparent=function(){return!1},h.drawTransparent=function(p){},h.draw=function(p){var M=this.gl,b=this.vao,w=this.shader;b.bind(),w.bind();var k=p.model||f,x=p.view||f,E=p.projection||f,S;this.axes&&(S=this.axes.lastCubeProps.axis);for(var g=v,C=d,A=0;A<3;++A)S&&S[A]<0?(g[A]=this.bounds[0][A],C[A]=this.bounds[1][A]):(g[A]=this.bounds[1][A],C[A]=this.bounds[0][A]);_[0]=M.drawingBufferWidth,_[1]=M.drawingBufferHeight,w.uniforms.model=k,w.uniforms.view=x,w.uniforms.projection=E,w.uniforms.coordinates=[this.position,g,C],w.uniforms.colors=this.colors,w.uniforms.screenShape=_;for(var A=0;A<3;++A)w.uniforms.lineWidth=this.lineWidth[A]*this.pixelRatio,this.enabled[A]&&(b.draw(M.TRIANGLES,6,6*A),this.drawSides[A]&&b.draw(M.TRIANGLES,12,18+12*A));b.unbind()},h.update=function(p){p&&("bounds"in p&&(this.bounds=p.bounds),"position"in p&&(this.position=p.position),"lineWidth"in p&&(this.lineWidth=p.lineWidth),"colors"in p&&(this.colors=p.colors),"enabled"in p&&(this.enabled=p.enabled),"drawSides"in p&&(this.drawSides=p.drawSides))},h.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function T(p,M){var b=[];function w(g,C,A,P,D,z){var O=[g,C,A,0,0,0,1];O[P+3]=1,O[P]=D,b.push.apply(b,O),O[6]=-1,b.push.apply(b,O),O[P]=z,b.push.apply(b,O),b.push.apply(b,O),O[6]=1,b.push.apply(b,O),O[P]=D,b.push.apply(b,O)}w(0,0,0,0,0,1),w(0,0,0,1,0,1),w(0,0,0,2,0,1),w(1,0,0,1,-1,1),w(1,0,0,2,-1,1),w(0,1,0,0,-1,1),w(0,1,0,2,-1,1),w(0,0,1,0,-1,1),w(0,0,1,1,-1,1);var k=s(p,b),x=l(p,[{type:p.FLOAT,buffer:k,size:3,offset:0,stride:28},{type:p.FLOAT,buffer:k,size:3,offset:12,stride:28},{type:p.FLOAT,buffer:k,size:1,offset:24,stride:28}]),E=u(p);E.attributes.position.location=0,E.attributes.color.location=1,E.attributes.weight.location=2;var S=new c(p,k,x,E);return S.update(M),S}},6740:function(n,a,o){var s=o(3236),l=s([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),u=s([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),f=s([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),c=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);a.meshShader={vertex:l,fragment:u,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},a.pickShader={vertex:f,fragment:c,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7815:function(n,a,o){"use strict";var s=o(2931),l=o(9970),u=["xyz","xzy","yxz","yzx","zxy","zyx"],f=function(w,k,x,E){for(var S=w.points,g=w.velocities,C=w.divergences,A=[],P=[],D=[],z=[],O=[],V=[],B=0,F=0,N=l.create(),Z=l.create(),J=8,re=0;re<S.length;re++){var ue=S[re],fe=g[re],K=C[re];k===0&&(K=x*.05),F=s.length(fe)/E,N=l.create(),s.copy(N,fe),N[3]=K;for(var X=0;X<J;X++)O[X]=[ue[0],ue[1],ue[2],X];if(z.length>0)for(var X=0;X<J;X++){var ae=(X+1)%J;A.push(z[X],O[X],O[ae],O[ae],z[ae],z[X]),D.push(Z,N,N,N,Z,Z),V.push(B,F,F,F,B,B);var oe=A.length;P.push([oe-6,oe-5,oe-4],[oe-3,oe-2,oe-1])}var me=z;z=O,O=me;var xe=Z;Z=N,N=xe;var ce=B;B=F,F=ce}return{positions:A,cells:P,vectors:D,vertexIntensity:V}},c=function(w,k,x,E){for(var S=0,g=0;g<w.length;g++)for(var C=w[g].velocities,A=0;A<C.length;A++)S=Math.max(S,s.length(C[A]));for(var P=w.map(function(re){return f(re,x,E,S)}),D=[],z=[],O=[],V=[],g=0;g<P.length;g++){var B=P[g],F=D.length;D=D.concat(B.positions),O=O.concat(B.vectors),V=V.concat(B.vertexIntensity);for(var A=0;A<B.cells.length;A++){var N=B.cells[A],Z=[];z.push(Z);for(var J=0;J<N.length;J++)Z.push(N[J]+F)}}return{positions:D,cells:z,vectors:O,vertexIntensity:V,colormap:k}},h=function(w,k){var x=w.length,E;for(E=0;E<x;E++){var S=w[E];if(S===k)return E;if(S>k)return E-1}return E},v=function(w,k,x){return w<k?k:w>x?x:w},d=function(w,k,x){var E=k.vectors,S=k.meshgrid,g=w[0],C=w[1],A=w[2],P=S[0].length,D=S[1].length,z=S[2].length,O=h(S[0],g),V=h(S[1],C),B=h(S[2],A),F=O+1,N=V+1,Z=B+1;if(O=v(O,0,P-1),F=v(F,0,P-1),V=v(V,0,D-1),N=v(N,0,D-1),B=v(B,0,z-1),Z=v(Z,0,z-1),O<0||V<0||B<0||F>P-1||N>D-1||Z>z-1)return s.create();var J=S[0][O],re=S[0][F],ue=S[1][V],fe=S[1][N],K=S[2][B],X=S[2][Z],ae=(g-J)/(re-J),oe=(C-ue)/(fe-ue),me=(A-K)/(X-K);isFinite(ae)||(ae=.5),isFinite(oe)||(oe=.5),isFinite(me)||(me=.5);var xe,ce,ie,ge,le,we;switch(x.reversedX&&(O=P-1-O,F=P-1-F),x.reversedY&&(V=D-1-V,N=D-1-N),x.reversedZ&&(B=z-1-B,Z=z-1-Z),x.filled){case 5:le=B,we=Z,ie=V*z,ge=N*z,xe=O*z*D,ce=F*z*D;break;case 4:le=B,we=Z,xe=O*z,ce=F*z,ie=V*z*P,ge=N*z*P;break;case 3:ie=V,ge=N,le=B*D,we=Z*D,xe=O*D*z,ce=F*D*z;break;case 2:ie=V,ge=N,xe=O*D,ce=F*D,le=B*D*P,we=Z*D*P;break;case 1:xe=O,ce=F,le=B*P,we=Z*P,ie=V*P*z,ge=N*P*z;break;default:xe=O,ce=F,ie=V*P,ge=N*P,le=B*P*D,we=Z*P*D;break}var Re=E[xe+ie+le],qe=E[xe+ie+we],et=E[xe+ge+le],Pe=E[xe+ge+we],Ie=E[ce+ie+le],ut=E[ce+ie+we],ft=E[ce+ge+le],je=E[ce+ge+we],_t=s.create(),Bt=s.create(),Lt=s.create(),Me=s.create();s.lerp(_t,Re,Ie,ae),s.lerp(Bt,qe,ut,ae),s.lerp(Lt,et,ft,ae),s.lerp(Me,Pe,je,ae);var Ze=s.create(),dt=s.create();s.lerp(Ze,_t,Lt,oe),s.lerp(dt,Bt,Me,oe);var it=s.create();return s.lerp(it,Ze,dt,me),it},_=function(w,k){var x=k[0],E=k[1],S=k[2];return w[0]=x<0?-x:x,w[1]=E<0?-E:E,w[2]=S<0?-S:S,w},T=function(w){var k=1/0;w.sort(function(g,C){return g-C});for(var x=w.length,E=1;E<x;E++){var S=Math.abs(w[E]-w[E-1]);S<k&&(k=S)}return k},p=function(w){for(var k=[],x=[],E=[],S={},g={},C={},A=w.length,P=0;P<A;P++){var D=w[P],z=D[0],O=D[1],V=D[2];S[z]||(k.push(z),S[z]=!0),g[O]||(x.push(O),g[O]=!0),C[V]||(E.push(V),C[V]=!0)}var B=T(k),F=T(x),N=T(E),Z=Math.min(B,F,N);return isFinite(Z)?Z:1};n.exports=function(w,k){var x=w.startingPositions,E=w.maxLength||1e3,S=w.tubeSize||1,g=w.absoluteTubeSize,C=w.gridFill||"+x+y+z",A={};C.indexOf("-x")!==-1&&(A.reversedX=!0),C.indexOf("-y")!==-1&&(A.reversedY=!0),C.indexOf("-z")!==-1&&(A.reversedZ=!0),A.filled=u.indexOf(C.replace(/-/g,"").replace(/\+/g,""));var P=w.getVelocity||function(ut){return d(ut,w,A)},D=w.getDivergence||function(ut,ft){var je=s.create(),_t=1e-4;s.add(je,ut,[_t,0,0]);var Bt=P(je);s.subtract(Bt,Bt,ft),s.scale(Bt,Bt,1/_t),s.add(je,ut,[0,_t,0]);var Lt=P(je);s.subtract(Lt,Lt,ft),s.scale(Lt,Lt,1/_t),s.add(je,ut,[0,0,_t]);var Me=P(je);return s.subtract(Me,Me,ft),s.scale(Me,Me,1/_t),s.add(je,Bt,Lt),s.add(je,je,Me),je},z=[],O=k[0][0],V=k[0][1],B=k[0][2],F=k[1][0],N=k[1][1],Z=k[1][2],J=function(ut){var ft=ut[0],je=ut[1],_t=ut[2];return!(ft<O||ft>F||je<V||je>N||_t<B||_t>Z)},re=s.distance(k[0],k[1]),ue=10*re/E,fe=ue*ue,K=1,X=0,ae=x.length;ae>1&&(K=p(x));for(var oe=0;oe<ae;oe++){var me=s.create();s.copy(me,x[oe]);var xe=[me],ce=[],ie=P(me),ge=me;ce.push(ie);var le=[],we=D(me,ie),Re=s.length(we);isFinite(Re)&&Re>X&&(X=Re),le.push(Re),z.push({points:xe,velocities:ce,divergences:le});for(var qe=0;qe<E*100&&xe.length<E&&J(me);){qe++;var et=s.clone(ie),Pe=s.squaredLength(et);if(Pe===0)break;if(Pe>fe&&s.scale(et,et,ue/Math.sqrt(Pe)),s.add(et,et,me),ie=P(et),s.squaredDistance(ge,et)-fe>-1e-4*fe){xe.push(et),ge=et,ce.push(ie);var we=D(et,ie),Re=s.length(we);isFinite(Re)&&Re>X&&(X=Re),le.push(Re)}me=et}}var Ie=c(z,w.colormap,X,K);return g?Ie.tubeScale=g:(X===0&&(X=1),Ie.tubeScale=S*.5*K/X),Ie};var M=o(6740),b=o(6405).createMesh;n.exports.createTubeMesh=function(w,k){return b(w,k,{shaders:M,traceType:"streamtube"})}},990:function(n,a,o){var s=o(9405),l=o(3236),u=l([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),f=l([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),c=l([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),h=l([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);a.createShader=function(v){var d=s(v,u,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return d.attributes.uv.location=0,d.attributes.f.location=1,d.attributes.normal.location=2,d},a.createPickShader=function(v){var d=s(v,u,h,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return d.attributes.uv.location=0,d.attributes.f.location=1,d.attributes.normal.location=2,d},a.createContourShader=function(v){var d=s(v,c,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return d.attributes.uv.location=0,d.attributes.f.location=1,d},a.createPickContourShader=function(v){var d=s(v,c,h,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return d.attributes.uv.location=0,d.attributes.f.location=1,d}},9499:function(n,a,o){"use strict";n.exports=xe;var s=o(8828),l=o(2762),u=o(8116),f=o(7766),c=o(1888),h=o(6729),v=o(5298),d=o(9994),_=o(9618),T=o(3711),p=o(6760),M=o(7608),b=o(2478),w=o(6199),k=o(990),x=k.createShader,E=k.createContourShader,S=k.createPickShader,g=k.createPickContourShader,C=4*10,A=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],P=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],D=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var ce=0;ce<3;++ce){var ie=D[ce],ge=(ce+1)%3,le=(ce+2)%3;ie[ge+0]=1,ie[le+3]=1,ie[ce+6]=1}})();function z(ce,ie,ge,le,we){this.position=ce,this.index=ie,this.uv=ge,this.level=le,this.dataCoordinate=we}var O=256;function V(ce,ie,ge,le,we,Re,qe,et,Pe,Ie,ut,ft,je,_t,Bt){this.gl=ce,this.shape=ie,this.bounds=ge,this.objectOffset=Bt,this.intensityBounds=[],this._shader=le,this._pickShader=we,this._coordinateBuffer=Re,this._vao=qe,this._colorMap=et,this._contourShader=Pe,this._contourPickShader=Ie,this._contourBuffer=ut,this._contourVAO=ft,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new z([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=je,this._dynamicVAO=_t,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[_(c.mallocFloat(1024),[0,0]),_(c.mallocFloat(1024),[0,0]),_(c.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var B=V.prototype;B.genColormap=function(ce,ie){var ge=!1,le=d([h({colormap:ce,nshades:O,format:"rgba"}).map(function(we,Re){var qe=ie?F(Re/255,ie):we[3];return qe<1&&(ge=!0),[we[0],we[1],we[2],255*qe]})]);return v.divseq(le,255),this.hasAlphaScale=ge,le},B.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},B.isOpaque=function(){return!this.isTransparent()},B.pickSlots=1,B.setPickBase=function(ce){this.pickId=ce};function F(ce,ie){if(!ie||!ie.length)return 1;for(var ge=0;ge<ie.length;++ge){if(ie.length<2)return 1;if(ie[ge][0]===ce)return ie[ge][1];if(ie[ge][0]>ce&&ge>0){var le=(ie[ge][0]-ce)/(ie[ge][0]-ie[ge-1][0]);return ie[ge][1]*(1-le)+le*ie[ge-1][1]}}return 1}var N=[0,0,0],Z={showSurface:!1,showContour:!1,projections:[A.slice(),A.slice(),A.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function J(ce,ie){var ge,le,we,Re=ie.axes&&ie.axes.lastCubeProps.axis||N,qe=ie.showSurface,et=ie.showContour;for(ge=0;ge<3;++ge)for(qe=qe||ie.surfaceProject[ge],le=0;le<3;++le)et=et||ie.contourProject[ge][le];for(ge=0;ge<3;++ge){var Pe=Z.projections[ge];for(le=0;le<16;++le)Pe[le]=0;for(le=0;le<4;++le)Pe[5*le]=1;Pe[5*ge]=0,Pe[12+ge]=ie.axesBounds[+(Re[ge]>0)][ge],p(Pe,ce.model,Pe);var Ie=Z.clipBounds[ge];for(we=0;we<2;++we)for(le=0;le<3;++le)Ie[we][le]=ce.clipBounds[we][le];Ie[0][ge]=-1e8,Ie[1][ge]=1e8}return Z.showSurface=qe,Z.showContour=et,Z}var re={model:A,view:A,projection:A,inverseModel:A.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},ue=A.slice(),fe=[1,0,0,0,1,0,0,0,1];function K(ce,ie){ce=ce||{};var ge=this.gl;ge.disable(ge.CULL_FACE),this._colorMap.bind(0);var le=re;le.model=ce.model||A,le.view=ce.view||A,le.projection=ce.projection||A,le.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],le.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],le.objectOffset=this.objectOffset,le.contourColor=this.contourColor[0],le.inverseModel=M(le.inverseModel,le.model);for(var we=0;we<2;++we)for(var Re=le.clipBounds[we],qe=0;qe<3;++qe)Re[qe]=Math.min(Math.max(this.clipBounds[we][qe],-1e8),1e8);le.kambient=this.ambientLight,le.kdiffuse=this.diffuseLight,le.kspecular=this.specularLight,le.roughness=this.roughness,le.fresnel=this.fresnel,le.opacity=this.opacity,le.height=0,le.permutation=fe,le.vertexColor=this.vertexColor;var et=ue;for(p(et,le.view,le.model),p(et,le.projection,et),M(et,et),we=0;we<3;++we)le.eyePosition[we]=et[12+we]/et[15];var Pe=et[15];for(we=0;we<3;++we)Pe+=this.lightPosition[we]*et[4*we+3];for(we=0;we<3;++we){var Ie=et[12+we];for(qe=0;qe<3;++qe)Ie+=et[4*qe+we]*this.lightPosition[qe];le.lightPosition[we]=Ie/Pe}var ut=J(le,this);if(ut.showSurface){for(this._shader.bind(),this._shader.uniforms=le,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ge.TRIANGLES,this._vertexCount),we=0;we<3;++we)!this.surfaceProject[we]||!this.vertexCount||(this._shader.uniforms.model=ut.projections[we],this._shader.uniforms.clipBounds=ut.clipBounds[we],this._vao.draw(ge.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ut.showContour){var ft=this._contourShader;le.kambient=1,le.kdiffuse=0,le.kspecular=0,le.opacity=1,ft.bind(),ft.uniforms=le;var je=this._contourVAO;for(je.bind(),we=0;we<3;++we)for(ft.uniforms.permutation=D[we],ge.lineWidth(this.contourWidth[we]*this.pixelRatio),qe=0;qe<this.contourLevels[we].length;++qe)qe===this.highlightLevel[we]?(ft.uniforms.contourColor=this.highlightColor[we],ft.uniforms.contourTint=this.highlightTint[we]):(qe===0||qe-1===this.highlightLevel[we])&&(ft.uniforms.contourColor=this.contourColor[we],ft.uniforms.contourTint=this.contourTint[we]),this._contourCounts[we][qe]&&(ft.uniforms.height=this.contourLevels[we][qe],je.draw(ge.LINES,this._contourCounts[we][qe],this._contourOffsets[we][qe]));for(we=0;we<3;++we)for(ft.uniforms.model=ut.projections[we],ft.uniforms.clipBounds=ut.clipBounds[we],qe=0;qe<3;++qe)if(this.contourProject[we][qe]){ft.uniforms.permutation=D[qe],ge.lineWidth(this.contourWidth[qe]*this.pixelRatio);for(var _t=0;_t<this.contourLevels[qe].length;++_t)_t===this.highlightLevel[qe]?(ft.uniforms.contourColor=this.highlightColor[qe],ft.uniforms.contourTint=this.highlightTint[qe]):(_t===0||_t-1===this.highlightLevel[qe])&&(ft.uniforms.contourColor=this.contourColor[qe],ft.uniforms.contourTint=this.contourTint[qe]),this._contourCounts[qe][_t]&&(ft.uniforms.height=this.contourLevels[qe][_t],je.draw(ge.LINES,this._contourCounts[qe][_t],this._contourOffsets[qe][_t]))}for(je.unbind(),je=this._dynamicVAO,je.bind(),we=0;we<3;++we)if(this._dynamicCounts[we]!==0)for(ft.uniforms.model=le.model,ft.uniforms.clipBounds=le.clipBounds,ft.uniforms.permutation=D[we],ge.lineWidth(this.dynamicWidth[we]*this.pixelRatio),ft.uniforms.contourColor=this.dynamicColor[we],ft.uniforms.contourTint=this.dynamicTint[we],ft.uniforms.height=this.dynamicLevel[we],je.draw(ge.LINES,this._dynamicCounts[we],this._dynamicOffsets[we]),qe=0;qe<3;++qe)this.contourProject[qe][we]&&(ft.uniforms.model=ut.projections[qe],ft.uniforms.clipBounds=ut.clipBounds[qe],je.draw(ge.LINES,this._dynamicCounts[we],this._dynamicOffsets[we]));je.unbind()}}B.draw=function(ce){return K.call(this,ce,!1)},B.drawTransparent=function(ce){return K.call(this,ce,!0)};var X={model:A,view:A,projection:A,inverseModel:A,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};B.drawPick=function(ce){ce=ce||{};var ie=this.gl;ie.disable(ie.CULL_FACE);var ge=X;ge.model=ce.model||A,ge.view=ce.view||A,ge.projection=ce.projection||A,ge.shape=this._field[2].shape,ge.pickId=this.pickId/255,ge.lowerBound=this.bounds[0],ge.upperBound=this.bounds[1],ge.objectOffset=this.objectOffset,ge.permutation=fe;for(var le=0;le<2;++le)for(var we=ge.clipBounds[le],Re=0;Re<3;++Re)we[Re]=Math.min(Math.max(this.clipBounds[le][Re],-1e8),1e8);var qe=J(ge,this);if(qe.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ge,this._vao.bind(),this._vao.draw(ie.TRIANGLES,this._vertexCount),le=0;le<3;++le)this.surfaceProject[le]&&(this._pickShader.uniforms.model=qe.projections[le],this._pickShader.uniforms.clipBounds=qe.clipBounds[le],this._vao.draw(ie.TRIANGLES,this._vertexCount));this._vao.unbind()}if(qe.showContour){var et=this._contourPickShader;et.bind(),et.uniforms=ge;var Pe=this._contourVAO;for(Pe.bind(),Re=0;Re<3;++Re)for(ie.lineWidth(this.contourWidth[Re]*this.pixelRatio),et.uniforms.permutation=D[Re],le=0;le<this.contourLevels[Re].length;++le)this._contourCounts[Re][le]&&(et.uniforms.height=this.contourLevels[Re][le],Pe.draw(ie.LINES,this._contourCounts[Re][le],this._contourOffsets[Re][le]));for(le=0;le<3;++le)for(et.uniforms.model=qe.projections[le],et.uniforms.clipBounds=qe.clipBounds[le],Re=0;Re<3;++Re)if(this.contourProject[le][Re]){et.uniforms.permutation=D[Re],ie.lineWidth(this.contourWidth[Re]*this.pixelRatio);for(var Ie=0;Ie<this.contourLevels[Re].length;++Ie)this._contourCounts[Re][Ie]&&(et.uniforms.height=this.contourLevels[Re][Ie],Pe.draw(ie.LINES,this._contourCounts[Re][Ie],this._contourOffsets[Re][Ie]))}Pe.unbind()}},B.pick=function(ce){if(!ce||ce.id!==this.pickId)return null;var ie=this._field[2].shape,ge=this._pickResult,le=ie[0]*(ce.value[0]+(ce.value[2]>>4)/16)/255,we=Math.floor(le),Re=le-we,qe=ie[1]*(ce.value[1]+(ce.value[2]&15)/16)/255,et=Math.floor(qe),Pe=qe-et;we+=1,et+=1;var Ie=ge.position;Ie[0]=Ie[1]=Ie[2]=0;for(var ut=0;ut<2;++ut)for(var ft=ut?Re:1-Re,je=0;je<2;++je)for(var _t=je?Pe:1-Pe,Bt=we+ut,Lt=et+je,Me=ft*_t,Ze=0;Ze<3;++Ze)Ie[Ze]+=this._field[Ze].get(Bt,Lt)*Me;for(var dt=this._pickResult.level,it=0;it<3;++it)if(dt[it]=b.le(this.contourLevels[it],Ie[it]),dt[it]<0)this.contourLevels[it].length>0&&(dt[it]=0);else if(dt[it]<this.contourLevels[it].length-1){var vt=this.contourLevels[it][dt[it]],rt=this.contourLevels[it][dt[it]+1];Math.abs(vt-Ie[it])>Math.abs(rt-Ie[it])&&(dt[it]+=1)}for(ge.index[0]=Re<.5?we:we+1,ge.index[1]=Pe<.5?et:et+1,ge.uv[0]=le/ie[0],ge.uv[1]=qe/ie[1],Ze=0;Ze<3;++Ze)ge.dataCoordinate[Ze]=this._field[Ze].get(ge.index[0],ge.index[1]);return ge},B.padField=function(ce,ie){var ge=ie.shape.slice(),le=ce.shape.slice();v.assign(ce.lo(1,1).hi(ge[0],ge[1]),ie),v.assign(ce.lo(1).hi(ge[0],1),ie.hi(ge[0],1)),v.assign(ce.lo(1,le[1]-1).hi(ge[0],1),ie.lo(0,ge[1]-1).hi(ge[0],1)),v.assign(ce.lo(0,1).hi(1,ge[1]),ie.hi(1)),v.assign(ce.lo(le[0]-1,1).hi(1,ge[1]),ie.lo(ge[0]-1)),ce.set(0,0,ie.get(0,0)),ce.set(0,le[1]-1,ie.get(0,ge[1]-1)),ce.set(le[0]-1,0,ie.get(ge[0]-1,0)),ce.set(le[0]-1,le[1]-1,ie.get(ge[0]-1,ge[1]-1))};function ae(ce,ie){return Array.isArray(ce)?[ie(ce[0]),ie(ce[1]),ie(ce[2])]:[ie(ce),ie(ce),ie(ce)]}function oe(ce){return Array.isArray(ce)?ce.length===3?[ce[0],ce[1],ce[2],1]:[ce[0],ce[1],ce[2],ce[3]]:[0,0,0,1]}function me(ce){if(Array.isArray(ce)){if(Array.isArray(ce))return[oe(ce[0]),oe(ce[1]),oe(ce[2])];var ie=oe(ce);return[ie.slice(),ie.slice(),ie.slice()]}}B.update=function(ce){ce=ce||{},this.objectOffset=ce.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in ce&&(this.contourWidth=ae(ce.contourWidth,Number)),"showContour"in ce&&(this.showContour=ae(ce.showContour,Boolean)),"showSurface"in ce&&(this.showSurface=!!ce.showSurface),"contourTint"in ce&&(this.contourTint=ae(ce.contourTint,Boolean)),"contourColor"in ce&&(this.contourColor=me(ce.contourColor)),"contourProject"in ce&&(this.contourProject=ae(ce.contourProject,function(Wr){return ae(Wr,Boolean)})),"surfaceProject"in ce&&(this.surfaceProject=ce.surfaceProject),"dynamicColor"in ce&&(this.dynamicColor=me(ce.dynamicColor)),"dynamicTint"in ce&&(this.dynamicTint=ae(ce.dynamicTint,Number)),"dynamicWidth"in ce&&(this.dynamicWidth=ae(ce.dynamicWidth,Number)),"opacity"in ce&&(this.opacity=ce.opacity),"opacityscale"in ce&&(this.opacityscale=ce.opacityscale),"colorBounds"in ce&&(this.colorBounds=ce.colorBounds),"vertexColor"in ce&&(this.vertexColor=ce.vertexColor?1:0),"colormap"in ce&&this._colorMap.setPixels(this.genColormap(ce.colormap,this.opacityscale));var ie=ce.field||ce.coords&&ce.coords[2]||null,ge=!1;if(ie||(this._field[2].shape[0]||this._field[2].shape[2]?ie=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):ie=this._field[2].hi(0,0)),"field"in ce||"coords"in ce){var le=(ie.shape[0]+2)*(ie.shape[1]+2);le>this._field[2].data.length&&(c.freeFloat(this._field[2].data),this._field[2].data=c.mallocFloat(s.nextPow2(le))),this._field[2]=_(this._field[2].data,[ie.shape[0]+2,ie.shape[1]+2]),this.padField(this._field[2],ie),this.shape=ie.shape.slice();for(var we=this.shape,Re=0;Re<2;++Re)this._field[2].size>this._field[Re].data.length&&(c.freeFloat(this._field[Re].data),this._field[Re].data=c.mallocFloat(this._field[2].size)),this._field[Re]=_(this._field[Re].data,[we[0]+2,we[1]+2]);if(ce.coords){var qe=ce.coords;if(!Array.isArray(qe)||qe.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(Re=0;Re<2;++Re){var et=qe[Re];for(je=0;je<2;++je)if(et.shape[je]!==we[je])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[Re],et)}}else if(ce.ticks){var Pe=ce.ticks;if(!Array.isArray(Pe)||Pe.length!==2)throw new Error("gl-surface: invalid ticks");for(Re=0;Re<2;++Re){var Ie=Pe[Re];if((Array.isArray(Ie)||Ie.length)&&(Ie=_(Ie)),Ie.shape[0]!==we[Re])throw new Error("gl-surface: invalid tick length");var ut=_(Ie.data,we);ut.stride[Re]=Ie.stride[0],ut.stride[Re^1]=0,this.padField(this._field[Re],ut)}}else{for(Re=0;Re<2;++Re){var ft=[0,0];ft[Re]=1,this._field[Re]=_(this._field[Re].data,[we[0]+2,we[1]+2],ft,0)}this._field[0].set(0,0,0);for(var je=0;je<we[0];++je)this._field[0].set(je+1,0,je);for(this._field[0].set(we[0]+1,0,we[0]-1),this._field[1].set(0,0,0),je=0;je<we[1];++je)this._field[1].set(0,je+1,je);this._field[1].set(0,we[1]+1,we[1]-1)}var _t=this._field,Bt=_(c.mallocFloat(_t[2].size*3*2),[3,we[0]+2,we[1]+2,2]);for(Re=0;Re<3;++Re)w(Bt.pick(Re),_t[Re],"mirror");var Lt=_(c.mallocFloat(_t[2].size*3),[we[0]+2,we[1]+2,3]);for(Re=0;Re<we[0]+2;++Re)for(je=0;je<we[1]+2;++je){var Me=Bt.get(0,Re,je,0),Ze=Bt.get(0,Re,je,1),dt=Bt.get(1,Re,je,0),it=Bt.get(1,Re,je,1),vt=Bt.get(2,Re,je,0),rt=Bt.get(2,Re,je,1),We=dt*rt-it*vt,ht=vt*Ze-rt*Me,mt=Me*it-Ze*dt,er=Math.sqrt(We*We+ht*ht+mt*mt);er<1e-8?(er=Math.max(Math.abs(We),Math.abs(ht),Math.abs(mt)),er<1e-8?(mt=1,ht=We=0,er=1):er=1/er):er=1/Math.sqrt(er),Lt.set(Re,je,0,We*er),Lt.set(Re,je,1,ht*er),Lt.set(Re,je,2,mt*er)}c.free(Bt.data);var $t=[1/0,1/0,1/0],cr=[-1/0,-1/0,-1/0],or=1/0,vr=-1/0,Ot=(we[0]-1)*(we[1]-1)*6,yt=c.mallocFloat(s.nextPow2(10*Ot)),Et=0,Je=0;for(Re=0;Re<we[0]-1;++Re)e:for(je=0;je<we[1]-1;++je){for(var Ke=0;Ke<2;++Ke)for(var At=0;At<2;++At)for(var Ee=0;Ee<3;++Ee){var de=this._field[Ee].get(1+Re+Ke,1+je+At);if(isNaN(de)||!isFinite(de))continue e}for(Ee=0;Ee<6;++Ee){var Te=Re+P[Ee][0],nt=je+P[Ee][1],Mt=this._field[0].get(Te+1,nt+1),Kt=this._field[1].get(Te+1,nt+1);de=this._field[2].get(Te+1,nt+1),We=Lt.get(Te+1,nt+1,0),ht=Lt.get(Te+1,nt+1,1),mt=Lt.get(Te+1,nt+1,2),ce.intensity&&(Jt=ce.intensity.get(Te,nt));var Jt=ce.intensity?ce.intensity.get(Te,nt):de+this.objectOffset[2];yt[Et++]=Te,yt[Et++]=nt,yt[Et++]=Mt,yt[Et++]=Kt,yt[Et++]=de,yt[Et++]=0,yt[Et++]=Jt,yt[Et++]=We,yt[Et++]=ht,yt[Et++]=mt,$t[0]=Math.min($t[0],Mt+this.objectOffset[0]),$t[1]=Math.min($t[1],Kt+this.objectOffset[1]),$t[2]=Math.min($t[2],de+this.objectOffset[2]),or=Math.min(or,Jt),cr[0]=Math.max(cr[0],Mt+this.objectOffset[0]),cr[1]=Math.max(cr[1],Kt+this.objectOffset[1]),cr[2]=Math.max(cr[2],de+this.objectOffset[2]),vr=Math.max(vr,Jt),Je+=1}}for(ce.intensityBounds&&(or=+ce.intensityBounds[0],vr=+ce.intensityBounds[1]),Re=6;Re<Et;Re+=10)yt[Re]=(yt[Re]-or)/(vr-or);this._vertexCount=Je,this._coordinateBuffer.update(yt.subarray(0,Et)),c.freeFloat(yt),c.free(Lt.data),this.bounds=[$t,cr],this.intensity=ce.intensity||this._field[2],(this.intensityBounds[0]!==or||this.intensityBounds[1]!==vr)&&(ge=!0),this.intensityBounds=[or,vr]}if("levels"in ce){var Fr=ce.levels;for(Array.isArray(Fr[0])?Fr=Fr.slice():Fr=[[],[],Fr],Re=0;Re<3;++Re)Fr[Re]=Fr[Re].slice(),Fr[Re].sort(function(Wr,qn){return Wr-qn});for(Re=0;Re<3;++Re)for(je=0;je<Fr[Re].length;++je)Fr[Re][je]-=this.objectOffset[Re];e:for(Re=0;Re<3;++Re){if(Fr[Re].length!==this.contourLevels[Re].length){ge=!0;break}for(je=0;je<Fr[Re].length;++je)if(Fr[Re][je]!==this.contourLevels[Re][je]){ge=!0;break e}}this.contourLevels=Fr}if(ge){_t=this._field,we=this.shape;for(var Vr=[],mr=0;mr<3;++mr){var zr=this.contourLevels[mr],an=[],ni=[],mn=[0,0,0];for(Re=0;Re<zr.length;++Re){var fi=T(this._field[mr],zr[Re]);an.push(Vr.length/5|0),Je=0;e:for(je=0;je<fi.cells.length;++je){var Wi=fi.cells[je];for(Ee=0;Ee<2;++Ee){var si=fi.positions[Wi[Ee]],Zi=si[0],Ei=Math.floor(Zi)|0,ot=Zi-Ei,Be=si[1],lt=Math.floor(Be)|0,xt=Be-lt,Nt=!1;t:for(var nr=0;nr<3;++nr){mn[nr]=0;var yr=(mr+nr+1)%3;for(Ke=0;Ke<2;++Ke){var dr=Ke?ot:1-ot;for(Te=Math.min(Math.max(Ei+Ke,0),we[0])|0,At=0;At<2;++At){var Rr=At?xt:1-xt;if(nt=Math.min(Math.max(lt+At,0),we[1])|0,nr<2?de=this._field[yr].get(Te,nt):de=(this.intensity.get(Te,nt)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(de)||isNaN(de)){Nt=!0;break t}var Gr=dr*Rr;mn[nr]+=Gr*de}}}if(!Nt)Vr.push(mn[0],mn[1],si[0],si[1],mn[2]),Je+=1;else{if(Ee>0){for(var Yr=0;Yr<5;++Yr)Vr.pop();Je-=1}continue e}}}ni.push(Je)}this._contourOffsets[mr]=an,this._contourCounts[mr]=ni}var dn=c.mallocFloat(Vr.length);for(Re=0;Re<Vr.length;++Re)dn[Re]=Vr[Re];this._contourBuffer.update(dn),c.freeFloat(dn)}},B.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var ce=0;ce<3;++ce)c.freeFloat(this._field[ce].data)},B.highlight=function(ce){var ie;if(!ce){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(ie=0;ie<3;++ie)this.enableHighlight[ie]?this.highlightLevel[ie]=ce.level[ie]:this.highlightLevel[ie]=-1;var ge;for(this.snapToData?ge=ce.dataCoordinate:ge=ce.position,ie=0;ie<3;++ie)ge[ie]-=this.objectOffset[ie];if(!((!this.enableDynamic[0]||ge[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||ge[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||ge[2]===this.dynamicLevel[2]))){for(var le=0,we=this.shape,Re=c.mallocFloat(12*we[0]*we[1]),qe=0;qe<3;++qe){if(!this.enableDynamic[qe]){this.dynamicLevel[qe]=NaN,this._dynamicCounts[qe]=0;continue}this.dynamicLevel[qe]=ge[qe];var et=(qe+1)%3,Pe=(qe+2)%3,Ie=this._field[qe],ut=this._field[et],ft=this._field[Pe],je=T(Ie,ge[qe]),_t=je.cells,Bt=je.positions;for(this._dynamicOffsets[qe]=le,ie=0;ie<_t.length;++ie)for(var Lt=_t[ie],Me=0;Me<2;++Me){var Ze=Bt[Lt[Me]],dt=+Ze[0],it=dt|0,vt=Math.min(it+1,we[0])|0,rt=dt-it,We=1-rt,ht=+Ze[1],mt=ht|0,er=Math.min(mt+1,we[1])|0,$t=ht-mt,cr=1-$t,or=We*cr,vr=We*$t,Ot=rt*cr,yt=rt*$t,Et=or*ut.get(it,mt)+vr*ut.get(it,er)+Ot*ut.get(vt,mt)+yt*ut.get(vt,er),Je=or*ft.get(it,mt)+vr*ft.get(it,er)+Ot*ft.get(vt,mt)+yt*ft.get(vt,er);if(isNaN(Et)||isNaN(Je)){Me&&(le-=1);break}Re[2*le+0]=Et,Re[2*le+1]=Je,le+=1}this._dynamicCounts[qe]=le-this._dynamicOffsets[qe]}this._dynamicBuffer.update(Re.subarray(0,2*le)),c.freeFloat(Re)}};function xe(ce){var ie=ce.gl,ge=x(ie),le=S(ie),we=E(ie),Re=g(ie),qe=l(ie),et=u(ie,[{buffer:qe,size:4,stride:C,offset:0},{buffer:qe,size:3,stride:C,offset:16},{buffer:qe,size:3,stride:C,offset:28}]),Pe=l(ie),Ie=u(ie,[{buffer:Pe,size:4,stride:20,offset:0},{buffer:Pe,size:1,stride:20,offset:16}]),ut=l(ie),ft=u(ie,[{buffer:ut,size:2,type:ie.FLOAT}]),je=f(ie,1,O,ie.RGBA,ie.UNSIGNED_BYTE);je.minFilter=ie.LINEAR,je.magFilter=ie.LINEAR;var _t=new V(ie,[0,0],[[0,0,0],[0,0,0]],ge,le,qe,et,je,we,Re,Pe,Ie,ut,ft,[0,0,0]),Bt={levels:[[],[],[]]};for(var Lt in ce)Bt[Lt]=ce[Lt];return Bt.colormap=Bt.colormap||"jet",_t.update(Bt),_t}},7766:function(n,a,o){"use strict";var s=o(9618),l=o(5298),u=o(1888);n.exports=g;var f=null,c=null,h=null;function v(C){f=[C.LINEAR,C.NEAREST_MIPMAP_LINEAR,C.LINEAR_MIPMAP_NEAREST,C.LINEAR_MIPMAP_NEAREST],c=[C.NEAREST,C.LINEAR,C.NEAREST_MIPMAP_NEAREST,C.NEAREST_MIPMAP_LINEAR,C.LINEAR_MIPMAP_NEAREST,C.LINEAR_MIPMAP_LINEAR],h=[C.REPEAT,C.CLAMP_TO_EDGE,C.MIRRORED_REPEAT]}function d(C){return typeof HTMLCanvasElement!="undefined"&&C instanceof HTMLCanvasElement||typeof HTMLImageElement!="undefined"&&C instanceof HTMLImageElement||typeof HTMLVideoElement!="undefined"&&C instanceof HTMLVideoElement||typeof ImageData!="undefined"&&C instanceof ImageData}var _=function(C,A){l.muls(C,A,255)};function T(C,A,P){var D=C.gl,z=D.getParameter(D.MAX_TEXTURE_SIZE);if(A<0||A>z||P<0||P>z)throw new Error("gl-texture2d: Invalid texture size");return C._shape=[A,P],C.bind(),D.texImage2D(D.TEXTURE_2D,0,C.format,A,P,0,C.format,C.type,null),C._mipLevels=[0],C}function p(C,A,P,D,z,O){this.gl=C,this.handle=A,this.format=z,this.type=O,this._shape=[P,D],this._mipLevels=[0],this._magFilter=C.NEAREST,this._minFilter=C.NEAREST,this._wrapS=C.CLAMP_TO_EDGE,this._wrapT=C.CLAMP_TO_EDGE,this._anisoSamples=1;var V=this,B=[this._wrapS,this._wrapT];Object.defineProperties(B,[{get:function(){return V._wrapS},set:function(N){return V.wrapS=N}},{get:function(){return V._wrapT},set:function(N){return V.wrapT=N}}]),this._wrapVector=B;var F=[this._shape[0],this._shape[1]];Object.defineProperties(F,[{get:function(){return V._shape[0]},set:function(N){return V.width=N}},{get:function(){return V._shape[1]},set:function(N){return V.height=N}}]),this._shapeVector=F}var M=p.prototype;Object.defineProperties(M,{minFilter:{get:function(){return this._minFilter},set:function(C){this.bind();var A=this.gl;if(this.type===A.FLOAT&&f.indexOf(C)>=0&&(A.getExtension("OES_texture_float_linear")||(C=A.NEAREST)),c.indexOf(C)<0)throw new Error("gl-texture2d: Unknown filter mode "+C);return A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,C),this._minFilter=C}},magFilter:{get:function(){return this._magFilter},set:function(C){this.bind();var A=this.gl;if(this.type===A.FLOAT&&f.indexOf(C)>=0&&(A.getExtension("OES_texture_float_linear")||(C=A.NEAREST)),c.indexOf(C)<0)throw new Error("gl-texture2d: Unknown filter mode "+C);return A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,C),this._magFilter=C}},mipSamples:{get:function(){return this._anisoSamples},set:function(C){var A=this._anisoSamples;if(this._anisoSamples=Math.max(C,1)|0,A!==this._anisoSamples){var P=this.gl.getExtension("EXT_texture_filter_anisotropic");P&&this.gl.texParameterf(this.gl.TEXTURE_2D,P.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(C){if(this.bind(),h.indexOf(C)<0)throw new Error("gl-texture2d: Unknown wrap mode "+C);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,C),this._wrapS=C}},wrapT:{get:function(){return this._wrapT},set:function(C){if(this.bind(),h.indexOf(C)<0)throw new Error("gl-texture2d: Unknown wrap mode "+C);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,C),this._wrapT=C}},wrap:{get:function(){return this._wrapVector},set:function(C){if(Array.isArray(C)||(C=[C,C]),C.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var A=0;A<2;++A)if(h.indexOf(C[A])<0)throw new Error("gl-texture2d: Unknown wrap mode "+C);this._wrapS=C[0],this._wrapT=C[1];var P=this.gl;return this.bind(),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_S,this._wrapS),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_T,this._wrapT),C}},shape:{get:function(){return this._shapeVector},set:function(C){if(!Array.isArray(C))C=[C|0,C|0];else if(C.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return T(this,C[0]|0,C[1]|0),[C[0]|0,C[1]|0]}},width:{get:function(){return this._shape[0]},set:function(C){return C=C|0,T(this,C,this._shape[1]),C}},height:{get:function(){return this._shape[1]},set:function(C){return C=C|0,T(this,this._shape[0],C),C}}}),M.bind=function(C){var A=this.gl;return C!==void 0&&A.activeTexture(A.TEXTURE0+(C|0)),A.bindTexture(A.TEXTURE_2D,this.handle),C!==void 0?C|0:A.getParameter(A.ACTIVE_TEXTURE)-A.TEXTURE0},M.dispose=function(){this.gl.deleteTexture(this.handle)},M.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var C=Math.min(this._shape[0],this._shape[1]),A=0;C>0;++A,C>>>=1)this._mipLevels.indexOf(A)<0&&this._mipLevels.push(A)},M.setPixels=function(C,A,P,D){var z=this.gl;this.bind(),Array.isArray(A)?(D=P,P=A[1]|0,A=A[0]|0):(A=A||0,P=P||0),D=D||0;var O=d(C)?C:C.raw;if(O){var V=this._mipLevels.indexOf(D)<0;V?(z.texImage2D(z.TEXTURE_2D,0,this.format,this.format,this.type,O),this._mipLevels.push(D)):z.texSubImage2D(z.TEXTURE_2D,D,A,P,this.format,this.type,O)}else if(C.shape&&C.stride&&C.data){if(C.shape.length<2||A+C.shape[1]>this._shape[1]>>>D||P+C.shape[0]>this._shape[0]>>>D||A<0||P<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");w(z,A,P,D,this.format,this.type,this._mipLevels,C)}else throw new Error("gl-texture2d: Unsupported data type")};function b(C,A){return C.length===3?A[2]===1&&A[1]===C[0]*C[2]&&A[0]===C[2]:A[0]===1&&A[1]===C[0]}function w(C,A,P,D,z,O,V,B){var F=B.dtype,N=B.shape.slice();if(N.length<2||N.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var Z=0,J=0,re=b(N,B.stride.slice());F==="float32"?Z=C.FLOAT:F==="float64"?(Z=C.FLOAT,re=!1,F="float32"):F==="uint8"?Z=C.UNSIGNED_BYTE:(Z=C.UNSIGNED_BYTE,re=!1,F="uint8");var ue=1;if(N.length===2)J=C.LUMINANCE,N=[N[0],N[1],1],B=s(B.data,N,[B.stride[0],B.stride[1],1],B.offset);else if(N.length===3){if(N[2]===1)J=C.ALPHA;else if(N[2]===2)J=C.LUMINANCE_ALPHA;else if(N[2]===3)J=C.RGB;else if(N[2]===4)J=C.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");ue=N[2]}else throw new Error("gl-texture2d: Invalid shape for texture");if((J===C.LUMINANCE||J===C.ALPHA)&&(z===C.LUMINANCE||z===C.ALPHA)&&(J=z),J!==z)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var fe=B.size,K=V.indexOf(D)<0;if(K&&V.push(D),Z===O&&re)B.offset===0&&B.data.length===fe?K?C.texImage2D(C.TEXTURE_2D,D,z,N[0],N[1],0,z,O,B.data):C.texSubImage2D(C.TEXTURE_2D,D,A,P,N[0],N[1],z,O,B.data):K?C.texImage2D(C.TEXTURE_2D,D,z,N[0],N[1],0,z,O,B.data.subarray(B.offset,B.offset+fe)):C.texSubImage2D(C.TEXTURE_2D,D,A,P,N[0],N[1],z,O,B.data.subarray(B.offset,B.offset+fe));else{var X;O===C.FLOAT?X=u.mallocFloat32(fe):X=u.mallocUint8(fe);var ae=s(X,N,[N[2],N[2]*N[0],1]);Z===C.FLOAT&&O===C.UNSIGNED_BYTE?_(ae,B):l.assign(ae,B),K?C.texImage2D(C.TEXTURE_2D,D,z,N[0],N[1],0,z,O,X.subarray(0,fe)):C.texSubImage2D(C.TEXTURE_2D,D,A,P,N[0],N[1],z,O,X.subarray(0,fe)),O===C.FLOAT?u.freeFloat32(X):u.freeUint8(X)}}function k(C){var A=C.createTexture();return C.bindTexture(C.TEXTURE_2D,A),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,C.NEAREST),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,C.NEAREST),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,C.CLAMP_TO_EDGE),A}function x(C,A,P,D,z){var O=C.getParameter(C.MAX_TEXTURE_SIZE);if(A<0||A>O||P<0||P>O)throw new Error("gl-texture2d: Invalid texture shape");if(z===C.FLOAT&&!C.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var V=k(C);return C.texImage2D(C.TEXTURE_2D,0,D,A,P,0,D,z,null),new p(C,V,A,P,D,z)}function E(C,A,P,D,z,O){var V=k(C);return C.texImage2D(C.TEXTURE_2D,0,z,z,O,A),new p(C,V,P,D,z,O)}function S(C,A){var P=A.dtype,D=A.shape.slice(),z=C.getParameter(C.MAX_TEXTURE_SIZE);if(D[0]<0||D[0]>z||D[1]<0||D[1]>z)throw new Error("gl-texture2d: Invalid texture size");var O=b(D,A.stride.slice()),V=0;P==="float32"?V=C.FLOAT:P==="float64"?(V=C.FLOAT,O=!1,P="float32"):P==="uint8"?V=C.UNSIGNED_BYTE:(V=C.UNSIGNED_BYTE,O=!1,P="uint8");var B=0;if(D.length===2)B=C.LUMINANCE,D=[D[0],D[1],1],A=s(A.data,D,[A.stride[0],A.stride[1],1],A.offset);else if(D.length===3)if(D[2]===1)B=C.ALPHA;else if(D[2]===2)B=C.LUMINANCE_ALPHA;else if(D[2]===3)B=C.RGB;else if(D[2]===4)B=C.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");V===C.FLOAT&&!C.getExtension("OES_texture_float")&&(V=C.UNSIGNED_BYTE,O=!1);var F,N,Z=A.size;if(O)A.offset===0&&A.data.length===Z?F=A.data:F=A.data.subarray(A.offset,A.offset+Z);else{var J=[D[2],D[2]*D[0],1];N=u.malloc(Z,P);var re=s(N,D,J,0);(P==="float32"||P==="float64")&&V===C.UNSIGNED_BYTE?_(re,A):l.assign(re,A),F=N.subarray(0,Z)}var ue=k(C);return C.texImage2D(C.TEXTURE_2D,0,B,D[0],D[1],0,B,V,F),O||u.free(N),new p(C,ue,D[0],D[1],B,V)}function g(C){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(f||v(C),typeof arguments[1]=="number")return x(C,arguments[1],arguments[2],arguments[3]||C.RGBA,arguments[4]||C.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return x(C,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||C.RGBA,arguments[3]||C.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var A=arguments[1],P=d(A)?A:A.raw;if(P)return E(C,P,A.width|0,A.height|0,arguments[2]||C.RGBA,arguments[3]||C.UNSIGNED_BYTE);if(A.shape&&A.data&&A.stride)return S(C,A)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},1433:function(n){"use strict";function a(o,s,l){s?s.bind():o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,null);var u=o.getParameter(o.MAX_VERTEX_ATTRIBS)|0;if(l){if(l.length>u)throw new Error("gl-vao: Too many vertex attributes");for(var f=0;f<l.length;++f){var c=l[f];if(c.buffer){var h=c.buffer,v=c.size||4,d=c.type||o.FLOAT,_=!!c.normalized,T=c.stride||0,p=c.offset||0;h.bind(),o.enableVertexAttribArray(f),o.vertexAttribPointer(f,v,d,_,T,p)}else{if(typeof c=="number")o.vertexAttrib1f(f,c);else if(c.length===1)o.vertexAttrib1f(f,c[0]);else if(c.length===2)o.vertexAttrib2f(f,c[0],c[1]);else if(c.length===3)o.vertexAttrib3f(f,c[0],c[1],c[2]);else if(c.length===4)o.vertexAttrib4f(f,c[0],c[1],c[2],c[3]);else throw new Error("gl-vao: Invalid vertex attribute");o.disableVertexAttribArray(f)}}for(;f<u;++f)o.disableVertexAttribArray(f)}else{o.bindBuffer(o.ARRAY_BUFFER,null);for(var f=0;f<u;++f)o.disableVertexAttribArray(f)}}n.exports=a},870:function(n,a,o){"use strict";var s=o(1433);function l(f){this.gl=f,this._elements=null,this._attributes=null,this._elementsType=f.UNSIGNED_SHORT}l.prototype.bind=function(){s(this.gl,this._elements,this._attributes)},l.prototype.update=function(f,c,h){this._elements=c,this._attributes=f,this._elementsType=h||this.gl.UNSIGNED_SHORT},l.prototype.dispose=function(){},l.prototype.unbind=function(){},l.prototype.draw=function(f,c,h){h=h||0;var v=this.gl;this._elements?v.drawElements(f,c,this._elementsType,h):v.drawArrays(f,h,c)};function u(f){return new l(f)}n.exports=u},7518:function(n,a,o){"use strict";var s=o(1433);function l(c,h,v,d,_,T){this.location=c,this.dimension=h,this.a=v,this.b=d,this.c=_,this.d=T}l.prototype.bind=function(c){switch(this.dimension){case 1:c.vertexAttrib1f(this.location,this.a);break;case 2:c.vertexAttrib2f(this.location,this.a,this.b);break;case 3:c.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:c.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function u(c,h,v){this.gl=c,this._ext=h,this.handle=v,this._attribs=[],this._useElements=!1,this._elementsType=c.UNSIGNED_SHORT}u.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var c=0;c<this._attribs.length;++c)this._attribs[c].bind(this.gl)},u.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},u.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},u.prototype.update=function(c,h,v){if(this.bind(),s(this.gl,h,c),this.unbind(),this._attribs.length=0,c)for(var d=0;d<c.length;++d){var _=c[d];typeof _=="number"?this._attribs.push(new l(d,1,_)):Array.isArray(_)&&this._attribs.push(new l(d,_.length,_[0],_[1],_[2],_[3]))}this._useElements=!!h,this._elementsType=v||this.gl.UNSIGNED_SHORT},u.prototype.draw=function(c,h,v){v=v||0;var d=this.gl;this._useElements?d.drawElements(c,h,this._elementsType,v):d.drawArrays(c,v,h)};function f(c,h){return new u(c,h,h.createVertexArrayOES())}n.exports=f},8116:function(n,a,o){"use strict";var s=o(7518),l=o(870);function u(c){this.bindVertexArrayOES=c.bindVertexArray.bind(c),this.createVertexArrayOES=c.createVertexArray.bind(c),this.deleteVertexArrayOES=c.deleteVertexArray.bind(c)}function f(c,h,v,d){var _=c.createVertexArray?new u(c):c.getExtension("OES_vertex_array_object"),T;return _?T=s(c,_):T=l(c),T.update(h,v,d),T}n.exports=f},5632:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]+l[0],o[1]=s[1]+l[1],o[2]=s[2]+l[2],o}},8192:function(n,a,o){n.exports=f;var s=o(2825),l=o(3536),u=o(244);function f(c,h){var v=s(c[0],c[1],c[2]),d=s(h[0],h[1],h[2]);l(v,v),l(d,d);var _=u(v,d);return _>1?0:Math.acos(_)}},9226:function(n){n.exports=a;function a(o,s){return o[0]=Math.ceil(s[0]),o[1]=Math.ceil(s[1]),o[2]=Math.ceil(s[2]),o}},3126:function(n){n.exports=a;function a(o){var s=new Float32Array(3);return s[0]=o[0],s[1]=o[1],s[2]=o[2],s}},3990:function(n){n.exports=a;function a(o,s){return o[0]=s[0],o[1]=s[1],o[2]=s[2],o}},1091:function(n){n.exports=a;function a(){var o=new Float32Array(3);return o[0]=0,o[1]=0,o[2]=0,o}},5911:function(n){n.exports=a;function a(o,s,l){var u=s[0],f=s[1],c=s[2],h=l[0],v=l[1],d=l[2];return o[0]=f*d-c*v,o[1]=c*h-u*d,o[2]=u*v-f*h,o}},5455:function(n,a,o){n.exports=o(7056)},7056:function(n){n.exports=a;function a(o,s){var l=s[0]-o[0],u=s[1]-o[1],f=s[2]-o[2];return Math.sqrt(l*l+u*u+f*f)}},4008:function(n,a,o){n.exports=o(6690)},6690:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]/l[0],o[1]=s[1]/l[1],o[2]=s[2]/l[2],o}},244:function(n){n.exports=a;function a(o,s){return o[0]*s[0]+o[1]*s[1]+o[2]*s[2]}},2613:function(n){n.exports=1e-6},9922:function(n,a,o){n.exports=l;var s=o(2613);function l(u,f){var c=u[0],h=u[1],v=u[2],d=f[0],_=f[1],T=f[2];return Math.abs(c-d)<=s*Math.max(1,Math.abs(c),Math.abs(d))&&Math.abs(h-_)<=s*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(v-T)<=s*Math.max(1,Math.abs(v),Math.abs(T))}},9265:function(n){n.exports=a;function a(o,s){return o[0]===s[0]&&o[1]===s[1]&&o[2]===s[2]}},2681:function(n){n.exports=a;function a(o,s){return o[0]=Math.floor(s[0]),o[1]=Math.floor(s[1]),o[2]=Math.floor(s[2]),o}},5137:function(n,a,o){n.exports=l;var s=o(1091)();function l(u,f,c,h,v,d){var _,T;for(f||(f=3),c||(c=0),h?T=Math.min(h*f+c,u.length):T=u.length,_=c;_<T;_+=f)s[0]=u[_],s[1]=u[_+1],s[2]=u[_+2],v(s,s,d),u[_]=s[0],u[_+1]=s[1],u[_+2]=s[2];return u}},2825:function(n){n.exports=a;function a(o,s,l){var u=new Float32Array(3);return u[0]=o,u[1]=s,u[2]=l,u}},2931:function(n,a,o){n.exports={EPSILON:o(2613),create:o(1091),clone:o(3126),angle:o(8192),fromValues:o(2825),copy:o(3990),set:o(1463),equals:o(9922),exactEquals:o(9265),add:o(5632),subtract:o(6843),sub:o(2229),multiply:o(5847),mul:o(4505),divide:o(6690),div:o(4008),min:o(8107),max:o(7417),floor:o(2681),ceil:o(9226),round:o(2447),scale:o(6621),scaleAndAdd:o(8489),distance:o(7056),dist:o(5455),squaredDistance:o(2953),sqrDist:o(6141),length:o(1387),len:o(868),squaredLength:o(3066),sqrLen:o(5486),negate:o(5093),inverse:o(811),normalize:o(3536),dot:o(244),cross:o(5911),lerp:o(6658),random:o(7636),transformMat4:o(5673),transformMat3:o(492),transformQuat:o(264),rotateX:o(6894),rotateY:o(109),rotateZ:o(8692),forEach:o(5137)}},811:function(n){n.exports=a;function a(o,s){return o[0]=1/s[0],o[1]=1/s[1],o[2]=1/s[2],o}},868:function(n,a,o){n.exports=o(1387)},1387:function(n){n.exports=a;function a(o){var s=o[0],l=o[1],u=o[2];return Math.sqrt(s*s+l*l+u*u)}},6658:function(n){n.exports=a;function a(o,s,l,u){var f=s[0],c=s[1],h=s[2];return o[0]=f+u*(l[0]-f),o[1]=c+u*(l[1]-c),o[2]=h+u*(l[2]-h),o}},7417:function(n){n.exports=a;function a(o,s,l){return o[0]=Math.max(s[0],l[0]),o[1]=Math.max(s[1],l[1]),o[2]=Math.max(s[2],l[2]),o}},8107:function(n){n.exports=a;function a(o,s,l){return o[0]=Math.min(s[0],l[0]),o[1]=Math.min(s[1],l[1]),o[2]=Math.min(s[2],l[2]),o}},4505:function(n,a,o){n.exports=o(5847)},5847:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]*l[0],o[1]=s[1]*l[1],o[2]=s[2]*l[2],o}},5093:function(n){n.exports=a;function a(o,s){return o[0]=-s[0],o[1]=-s[1],o[2]=-s[2],o}},3536:function(n){n.exports=a;function a(o,s){var l=s[0],u=s[1],f=s[2],c=l*l+u*u+f*f;return c>0&&(c=1/Math.sqrt(c),o[0]=s[0]*c,o[1]=s[1]*c,o[2]=s[2]*c),o}},7636:function(n){n.exports=a;function a(o,s){s=s||1;var l=Math.random()*2*Math.PI,u=Math.random()*2-1,f=Math.sqrt(1-u*u)*s;return o[0]=Math.cos(l)*f,o[1]=Math.sin(l)*f,o[2]=u*s,o}},6894:function(n){n.exports=a;function a(o,s,l,u){var f=l[1],c=l[2],h=s[1]-f,v=s[2]-c,d=Math.sin(u),_=Math.cos(u);return o[0]=s[0],o[1]=f+h*_-v*d,o[2]=c+h*d+v*_,o}},109:function(n){n.exports=a;function a(o,s,l,u){var f=l[0],c=l[2],h=s[0]-f,v=s[2]-c,d=Math.sin(u),_=Math.cos(u);return o[0]=f+v*d+h*_,o[1]=s[1],o[2]=c+v*_-h*d,o}},8692:function(n){n.exports=a;function a(o,s,l,u){var f=l[0],c=l[1],h=s[0]-f,v=s[1]-c,d=Math.sin(u),_=Math.cos(u);return o[0]=f+h*_-v*d,o[1]=c+h*d+v*_,o[2]=s[2],o}},2447:function(n){n.exports=a;function a(o,s){return o[0]=Math.round(s[0]),o[1]=Math.round(s[1]),o[2]=Math.round(s[2]),o}},6621:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]*l,o[1]=s[1]*l,o[2]=s[2]*l,o}},8489:function(n){n.exports=a;function a(o,s,l,u){return o[0]=s[0]+l[0]*u,o[1]=s[1]+l[1]*u,o[2]=s[2]+l[2]*u,o}},1463:function(n){n.exports=a;function a(o,s,l,u){return o[0]=s,o[1]=l,o[2]=u,o}},6141:function(n,a,o){n.exports=o(2953)},5486:function(n,a,o){n.exports=o(3066)},2953:function(n){n.exports=a;function a(o,s){var l=s[0]-o[0],u=s[1]-o[1],f=s[2]-o[2];return l*l+u*u+f*f}},3066:function(n){n.exports=a;function a(o){var s=o[0],l=o[1],u=o[2];return s*s+l*l+u*u}},2229:function(n,a,o){n.exports=o(6843)},6843:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]-l[0],o[1]=s[1]-l[1],o[2]=s[2]-l[2],o}},492:function(n){n.exports=a;function a(o,s,l){var u=s[0],f=s[1],c=s[2];return o[0]=u*l[0]+f*l[3]+c*l[6],o[1]=u*l[1]+f*l[4]+c*l[7],o[2]=u*l[2]+f*l[5]+c*l[8],o}},5673:function(n){n.exports=a;function a(o,s,l){var u=s[0],f=s[1],c=s[2],h=l[3]*u+l[7]*f+l[11]*c+l[15];return h=h||1,o[0]=(l[0]*u+l[4]*f+l[8]*c+l[12])/h,o[1]=(l[1]*u+l[5]*f+l[9]*c+l[13])/h,o[2]=(l[2]*u+l[6]*f+l[10]*c+l[14])/h,o}},264:function(n){n.exports=a;function a(o,s,l){var u=s[0],f=s[1],c=s[2],h=l[0],v=l[1],d=l[2],_=l[3],T=_*u+v*c-d*f,p=_*f+d*u-h*c,M=_*c+h*f-v*u,b=-h*u-v*f-d*c;return o[0]=T*_+b*-h+p*-d-M*-v,o[1]=p*_+b*-v+M*-h-T*-d,o[2]=M*_+b*-d+T*-v-p*-h,o}},4361:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]+l[0],o[1]=s[1]+l[1],o[2]=s[2]+l[2],o[3]=s[3]+l[3],o}},2335:function(n){n.exports=a;function a(o){var s=new Float32Array(4);return s[0]=o[0],s[1]=o[1],s[2]=o[2],s[3]=o[3],s}},2933:function(n){n.exports=a;function a(o,s){return o[0]=s[0],o[1]=s[1],o[2]=s[2],o[3]=s[3],o}},7536:function(n){n.exports=a;function a(){var o=new Float32Array(4);return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o}},4691:function(n){n.exports=a;function a(o,s){var l=s[0]-o[0],u=s[1]-o[1],f=s[2]-o[2],c=s[3]-o[3];return Math.sqrt(l*l+u*u+f*f+c*c)}},1373:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]/l[0],o[1]=s[1]/l[1],o[2]=s[2]/l[2],o[3]=s[3]/l[3],o}},3750:function(n){n.exports=a;function a(o,s){return o[0]*s[0]+o[1]*s[1]+o[2]*s[2]+o[3]*s[3]}},3390:function(n){n.exports=a;function a(o,s,l,u){var f=new Float32Array(4);return f[0]=o,f[1]=s,f[2]=l,f[3]=u,f}},9970:function(n,a,o){n.exports={create:o(7536),clone:o(2335),fromValues:o(3390),copy:o(2933),set:o(4578),add:o(4361),subtract:o(6860),multiply:o(3576),divide:o(1373),min:o(2334),max:o(160),scale:o(9288),scaleAndAdd:o(4844),distance:o(4691),squaredDistance:o(7960),length:o(6808),squaredLength:o(483),negate:o(1498),inverse:o(4494),normalize:o(5177),dot:o(3750),lerp:o(2573),random:o(9131),transformMat4:o(5352),transformQuat:o(4041)}},4494:function(n){n.exports=a;function a(o,s){return o[0]=1/s[0],o[1]=1/s[1],o[2]=1/s[2],o[3]=1/s[3],o}},6808:function(n){n.exports=a;function a(o){var s=o[0],l=o[1],u=o[2],f=o[3];return Math.sqrt(s*s+l*l+u*u+f*f)}},2573:function(n){n.exports=a;function a(o,s,l,u){var f=s[0],c=s[1],h=s[2],v=s[3];return o[0]=f+u*(l[0]-f),o[1]=c+u*(l[1]-c),o[2]=h+u*(l[2]-h),o[3]=v+u*(l[3]-v),o}},160:function(n){n.exports=a;function a(o,s,l){return o[0]=Math.max(s[0],l[0]),o[1]=Math.max(s[1],l[1]),o[2]=Math.max(s[2],l[2]),o[3]=Math.max(s[3],l[3]),o}},2334:function(n){n.exports=a;function a(o,s,l){return o[0]=Math.min(s[0],l[0]),o[1]=Math.min(s[1],l[1]),o[2]=Math.min(s[2],l[2]),o[3]=Math.min(s[3],l[3]),o}},3576:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]*l[0],o[1]=s[1]*l[1],o[2]=s[2]*l[2],o[3]=s[3]*l[3],o}},1498:function(n){n.exports=a;function a(o,s){return o[0]=-s[0],o[1]=-s[1],o[2]=-s[2],o[3]=-s[3],o}},5177:function(n){n.exports=a;function a(o,s){var l=s[0],u=s[1],f=s[2],c=s[3],h=l*l+u*u+f*f+c*c;return h>0&&(h=1/Math.sqrt(h),o[0]=l*h,o[1]=u*h,o[2]=f*h,o[3]=c*h),o}},9131:function(n,a,o){var s=o(5177),l=o(9288);n.exports=u;function u(f,c){return c=c||1,f[0]=Math.random(),f[1]=Math.random(),f[2]=Math.random(),f[3]=Math.random(),s(f,f),l(f,f,c),f}},9288:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]*l,o[1]=s[1]*l,o[2]=s[2]*l,o[3]=s[3]*l,o}},4844:function(n){n.exports=a;function a(o,s,l,u){return o[0]=s[0]+l[0]*u,o[1]=s[1]+l[1]*u,o[2]=s[2]+l[2]*u,o[3]=s[3]+l[3]*u,o}},4578:function(n){n.exports=a;function a(o,s,l,u,f){return o[0]=s,o[1]=l,o[2]=u,o[3]=f,o}},7960:function(n){n.exports=a;function a(o,s){var l=s[0]-o[0],u=s[1]-o[1],f=s[2]-o[2],c=s[3]-o[3];return l*l+u*u+f*f+c*c}},483:function(n){n.exports=a;function a(o){var s=o[0],l=o[1],u=o[2],f=o[3];return s*s+l*l+u*u+f*f}},6860:function(n){n.exports=a;function a(o,s,l){return o[0]=s[0]-l[0],o[1]=s[1]-l[1],o[2]=s[2]-l[2],o[3]=s[3]-l[3],o}},5352:function(n){n.exports=a;function a(o,s,l){var u=s[0],f=s[1],c=s[2],h=s[3];return o[0]=l[0]*u+l[4]*f+l[8]*c+l[12]*h,o[1]=l[1]*u+l[5]*f+l[9]*c+l[13]*h,o[2]=l[2]*u+l[6]*f+l[10]*c+l[14]*h,o[3]=l[3]*u+l[7]*f+l[11]*c+l[15]*h,o}},4041:function(n){n.exports=a;function a(o,s,l){var u=s[0],f=s[1],c=s[2],h=l[0],v=l[1],d=l[2],_=l[3],T=_*u+v*c-d*f,p=_*f+d*u-h*c,M=_*c+h*f-v*u,b=-h*u-v*f-d*c;return o[0]=T*_+b*-h+p*-d-M*-v,o[1]=p*_+b*-v+M*-h-T*-d,o[2]=M*_+b*-d+T*-v-p*-h,o[3]=s[3],o}},1848:function(n,a,o){var s=o(4905),l=o(6468);n.exports=u;function u(f){for(var c=Array.isArray(f)?f:s(f),h=0;h<c.length;h++){var v=c[h];if(v.type==="preprocessor"){var d=v.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(d&&d[2]){var _=d[1],T=d[2];return(_?l(T):T).trim()}}}}},5874:function(n,a,o){n.exports=A;var s=o(620),l=o(7827),u=o(6852),f=o(7932),c=o(3508),h=999,v=9999,d=0,_=1,T=2,p=3,M=4,b=5,w=6,k=7,x=8,E=9,S=10,g=11,C=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function A(P){var D=0,z=0,O=h,V,B,F=[],N=[],Z=0,J=0,re=1,ue=0,fe=0,K=!1,X=!1,ae="",oe;P=P||{};var me=u,xe=s;P.version==="300 es"&&(me=c,xe=f);for(var ce={},ie={},D=0;D<me.length;D++)ce[me[D]]=!0;for(var D=0;D<xe.length;D++)ie[xe[D]]=!0;return function(Me){return N=[],Me!==null?le(Me):we()};function ge(Me){Me.length&&N.push({type:C[O],data:Me,position:fe,line:re,column:ue})}function le(Me){D=0,Me.toString&&(Me=Me.toString()),ae+=Me.replace(/\r\n/g,`
`),oe=ae.length;for(var Ze;V=ae[D],D<oe;){switch(Ze=D,O){case d:D=Ie();break;case _:D=Pe();break;case T:D=et();break;case p:D=ut();break;case M:D=_t();break;case g:D=je();break;case b:D=Bt();break;case v:D=Lt();break;case E:D=qe();break;case h:D=Re();break}if(Ze!==D)switch(ae[Ze]){case`
`:ue=0,++re;break;default:++ue;break}}return z+=D,ae=ae.slice(D),N}function we(Me){return F.length&&ge(F.join("")),O=S,ge("(eof)"),N}function Re(){return F=F.length?[]:F,B==="/"&&V==="*"?(fe=z+D-1,O=d,B=V,D+1):B==="/"&&V==="/"?(fe=z+D-1,O=_,B=V,D+1):V==="#"?(O=T,fe=z+D,D):/\s/.test(V)?(O=E,fe=z+D,D):(K=/\d/.test(V),X=/[^\w_]/.test(V),fe=z+D,O=K?M:X?p:v,D)}function qe(){return/[^\s]/g.test(V)?(ge(F.join("")),O=h,D):(F.push(V),B=V,D+1)}function et(){return(V==="\r"||V===`
`)&&B!=="\\"?(ge(F.join("")),O=h,D):(F.push(V),B=V,D+1)}function Pe(){return et()}function Ie(){return V==="/"&&B==="*"?(F.push(V),ge(F.join("")),O=h,D+1):(F.push(V),B=V,D+1)}function ut(){if(B==="."&&/\d/.test(V))return O=b,D;if(B==="/"&&V==="*")return O=d,D;if(B==="/"&&V==="/")return O=_,D;if(V==="."&&F.length){for(;ft(F););return O=b,D}if(V===";"||V===")"||V==="("){if(F.length)for(;ft(F););return ge(V),O=h,D+1}var Me=F.length===2&&V!=="=";if(/[\w_\d\s]/.test(V)||Me){for(;ft(F););return O=h,D}return F.push(V),B=V,D+1}function ft(Me){var Ze=0,dt,it;do{if(dt=l.indexOf(Me.slice(0,Me.length+Ze).join("")),it=l[dt],dt===-1){if(Ze--+Me.length>0)continue;it=Me.slice(0,1).join("")}return ge(it),fe+=it.length,F=F.slice(it.length),F.length}while(!0)}function je(){return/[^a-fA-F0-9]/.test(V)?(ge(F.join("")),O=h,D):(F.push(V),B=V,D+1)}function _t(){return V==="."||/[eE]/.test(V)?(F.push(V),O=b,B=V,D+1):V==="x"&&F.length===1&&F[0]==="0"?(O=g,F.push(V),B=V,D+1):/[^\d]/.test(V)?(ge(F.join("")),O=h,D):(F.push(V),B=V,D+1)}function Bt(){return V==="f"&&(F.push(V),B=V,D+=1),/[eE]/.test(V)||(V==="-"||V==="+")&&/[eE]/.test(B)?(F.push(V),B=V,D+1):/[^\d]/.test(V)?(ge(F.join("")),O=h,D):(F.push(V),B=V,D+1)}function Lt(){if(/[^\d\w_]/.test(V)){var Me=F.join("");return ie[Me]?O=x:ce[Me]?O=k:O=w,ge(F.join("")),O=h,D}return F.push(V),B=V,D+1}}},3508:function(n,a,o){var s=o(6852);s=s.slice().filter(function(l){return!/^(gl\_|texture)/.test(l)}),n.exports=s.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},6852:function(n){n.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},7932:function(n,a,o){var s=o(620);n.exports=s.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},620:function(n){n.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},7827:function(n){n.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},4905:function(n,a,o){var s=o(5874);n.exports=l;function l(u,f){var c=s(f),h=[];return h=h.concat(c(u)),h=h.concat(c(null)),h}},3236:function(n){n.exports=function(a){typeof a=="string"&&(a=[a]);for(var o=[].slice.call(arguments,1),s=[],l=0;l<a.length-1;l++)s.push(a[l],o[l]||"");return s.push(a[l]),s.join("")}},7520:function(n,a,o){"use strict";var s=o(9507);function l(){var u=!1;try{var f=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("test",null,f),window.removeEventListener("test",null,f)}catch(c){u=!1}return u}n.exports=s&&l()},3778:function(n,a){a.read=function(o,s,l,u,f){var c,h,v=f*8-u-1,d=(1<<v)-1,_=d>>1,T=-7,p=l?f-1:0,M=l?-1:1,b=o[s+p];for(p+=M,c=b&(1<<-T)-1,b>>=-T,T+=v;T>0;c=c*256+o[s+p],p+=M,T-=8);for(h=c&(1<<-T)-1,c>>=-T,T+=u;T>0;h=h*256+o[s+p],p+=M,T-=8);if(c===0)c=1-_;else{if(c===d)return h?NaN:(b?-1:1)*(1/0);h=h+Math.pow(2,u),c=c-_}return(b?-1:1)*h*Math.pow(2,c-u)},a.write=function(o,s,l,u,f,c){var h,v,d,_=c*8-f-1,T=(1<<_)-1,p=T>>1,M=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=u?0:c-1,w=u?1:-1,k=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(v=isNaN(s)?1:0,h=T):(h=Math.floor(Math.log(s)/Math.LN2),s*(d=Math.pow(2,-h))<1&&(h--,d*=2),h+p>=1?s+=M/d:s+=M*Math.pow(2,1-p),s*d>=2&&(h++,d/=2),h+p>=T?(v=0,h=T):h+p>=1?(v=(s*d-1)*Math.pow(2,f),h=h+p):(v=s*Math.pow(2,p-1)*Math.pow(2,f),h=0));f>=8;o[l+b]=v&255,b+=w,v/=256,f-=8);for(h=h<<f|v,_+=f;_>0;o[l+b]=h&255,b+=w,h/=256,_-=8);o[l+b-w]|=k*128}},8954:function(n,a,o){"use strict";n.exports=p;var s=o(3250),l=o(6803).Fw;function u(M,b,w){this.vertices=M,this.adjacent=b,this.boundary=w,this.lastVisited=-1}u.prototype.flip=function(){var M=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=M;var b=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=b};function f(M,b,w){this.vertices=M,this.cell=b,this.index=w}function c(M,b){return l(M.vertices,b.vertices)}function h(M){return function(){var b=this.tuple;return M.apply(this,b)}}function v(M){var b=s[M+1];return b||(b=s),h(b)}var d=[];function _(M,b,w){this.dimension=M,this.vertices=b,this.simplices=w,this.interior=w.filter(function(E){return!E.boundary}),this.tuple=new Array(M+1);for(var k=0;k<=M;++k)this.tuple[k]=this.vertices[k];var x=d[M];x||(x=d[M]=v(M)),this.orient=x}var T=_.prototype;T.handleBoundaryDegeneracy=function(M,b){var w=this.dimension,k=this.vertices.length-1,x=this.tuple,E=this.vertices,S=[M];for(M.lastVisited=-k;S.length>0;){M=S.pop();for(var g=M.adjacent,C=0;C<=w;++C){var A=g[C];if(!(!A.boundary||A.lastVisited<=-k)){for(var P=A.vertices,D=0;D<=w;++D){var z=P[D];z<0?x[D]=b:x[D]=E[z]}var O=this.orient();if(O>0)return A;A.lastVisited=-k,O===0&&S.push(A)}}}return null},T.walk=function(M,b){var w=this.vertices.length-1,k=this.dimension,x=this.vertices,E=this.tuple,S=b?this.interior.length*Math.random()|0:this.interior.length-1,g=this.interior[S];e:for(;!g.boundary;){for(var C=g.vertices,A=g.adjacent,P=0;P<=k;++P)E[P]=x[C[P]];g.lastVisited=w;for(var P=0;P<=k;++P){var D=A[P];if(!(D.lastVisited>=w)){var z=E[P];E[P]=M;var O=this.orient();if(E[P]=z,O<0){g=D;continue e}else D.boundary?D.lastVisited=-w:D.lastVisited=w}}return}return g},T.addPeaks=function(M,b){var w=this.vertices.length-1,k=this.dimension,x=this.vertices,E=this.tuple,S=this.interior,g=this.simplices,C=[b];b.lastVisited=w,b.vertices[b.vertices.indexOf(-1)]=w,b.boundary=!1,S.push(b);for(var A=[];C.length>0;){var b=C.pop(),P=b.vertices,D=b.adjacent,z=P.indexOf(w);if(!(z<0)){for(var O=0;O<=k;++O)if(O!==z){var V=D[O];if(!(!V.boundary||V.lastVisited>=w)){var B=V.vertices;if(V.lastVisited!==-w){for(var F=0,N=0;N<=k;++N)B[N]<0?(F=N,E[N]=M):E[N]=x[B[N]];var Z=this.orient();if(Z>0){B[F]=w,V.boundary=!1,S.push(V),C.push(V),V.lastVisited=w;continue}else V.lastVisited=-w}var J=V.adjacent,re=P.slice(),ue=D.slice(),fe=new u(re,ue,!0);g.push(fe);var K=J.indexOf(b);if(!(K<0)){J[K]=fe,ue[z]=V,re[O]=-1,ue[O]=b,D[O]=fe,fe.flip();for(var N=0;N<=k;++N){var X=re[N];if(!(X<0||X===w)){for(var ae=new Array(k-1),oe=0,me=0;me<=k;++me){var xe=re[me];xe<0||me===N||(ae[oe++]=xe)}A.push(new f(ae,fe,N))}}}}}}}A.sort(c);for(var O=0;O+1<A.length;O+=2){var ce=A[O],ie=A[O+1],ge=ce.index,le=ie.index;ge<0||le<0||(ce.cell.adjacent[ce.index]=ie.cell,ie.cell.adjacent[ie.index]=ce.cell)}},T.insert=function(M,b){var w=this.vertices;w.push(M);var k=this.walk(M,b);if(k){for(var x=this.dimension,E=this.tuple,S=0;S<=x;++S){var g=k.vertices[S];g<0?E[S]=M:E[S]=w[g]}var C=this.orient(E);C<0||C===0&&(k=this.handleBoundaryDegeneracy(k,M),!k)||this.addPeaks(M,k)}},T.boundary=function(){for(var M=this.dimension,b=[],w=this.simplices,k=w.length,x=0;x<k;++x){var E=w[x];if(E.boundary){for(var S=new Array(M),g=E.vertices,C=0,A=0,P=0;P<=M;++P)g[P]>=0?S[C++]=g[P]:A=P&1;if(A===(M&1)){var D=S[0];S[0]=S[1],S[1]=D}b.push(S)}}return b};function p(M,b){var w=M.length;if(w===0)throw new Error("Must have at least d+1 points");var k=M[0].length;if(w<=k)throw new Error("Must input at least d+1 points");var x=M.slice(0,k+1),E=s.apply(void 0,x);if(E===0)throw new Error("Input not in general position");for(var S=new Array(k+1),g=0;g<=k;++g)S[g]=g;E<0&&(S[0]=1,S[1]=0);for(var C=new u(S,new Array(k+1),!1),A=C.adjacent,P=new Array(k+2),g=0;g<=k;++g){for(var D=S.slice(),z=0;z<=k;++z)z===g&&(D[z]=-1);var O=D[0];D[0]=D[1],D[1]=O;var V=new u(D,new Array(k+1),!0);A[g]=V,P[g]=V}P[k+1]=C;for(var g=0;g<=k;++g)for(var D=A[g].vertices,B=A[g].adjacent,z=0;z<=k;++z){var F=D[z];if(F<0){B[z]=C;continue}for(var N=0;N<=k;++N)A[N].vertices.indexOf(F)<0&&(B[z]=A[N])}for(var Z=new _(k,x,P),J=!!b,g=k+1;g<w;++g)Z.insert(M[g],J);return Z.boundary()}},3352:function(n,a,o){"use strict";var s=o(2478),l=0,u=1,f=2;n.exports=C;function c(A,P,D,z,O){this.mid=A,this.left=P,this.right=D,this.leftPoints=z,this.rightPoints=O,this.count=(P?P.count:0)+(D?D.count:0)+z.length}var h=c.prototype;function v(A,P){A.mid=P.mid,A.left=P.left,A.right=P.right,A.leftPoints=P.leftPoints,A.rightPoints=P.rightPoints,A.count=P.count}function d(A,P){var D=E(P);A.mid=D.mid,A.left=D.left,A.right=D.right,A.leftPoints=D.leftPoints,A.rightPoints=D.rightPoints,A.count=D.count}function _(A,P){var D=A.intervals([]);D.push(P),d(A,D)}function T(A,P){var D=A.intervals([]),z=D.indexOf(P);return z<0?l:(D.splice(z,1),d(A,D),u)}h.intervals=function(A){return A.push.apply(A,this.leftPoints),this.left&&this.left.intervals(A),this.right&&this.right.intervals(A),A},h.insert=function(A){var P=this.count-this.leftPoints.length;if(this.count+=1,A[1]<this.mid)this.left?4*(this.left.count+1)>3*(P+1)?_(this,A):this.left.insert(A):this.left=E([A]);else if(A[0]>this.mid)this.right?4*(this.right.count+1)>3*(P+1)?_(this,A):this.right.insert(A):this.right=E([A]);else{var D=s.ge(this.leftPoints,A,k),z=s.ge(this.rightPoints,A,x);this.leftPoints.splice(D,0,A),this.rightPoints.splice(z,0,A)}},h.remove=function(A){var P=this.count-this.leftPoints;if(A[1]<this.mid){if(!this.left)return l;var D=this.right?this.right.count:0;if(4*D>3*(P-1))return T(this,A);var z=this.left.remove(A);return z===f?(this.left=null,this.count-=1,u):(z===u&&(this.count-=1),z)}else if(A[0]>this.mid){if(!this.right)return l;var O=this.left?this.left.count:0;if(4*O>3*(P-1))return T(this,A);var z=this.right.remove(A);return z===f?(this.right=null,this.count-=1,u):(z===u&&(this.count-=1),z)}else{if(this.count===1)return this.leftPoints[0]===A?f:l;if(this.leftPoints.length===1&&this.leftPoints[0]===A){if(this.left&&this.right){for(var V=this,B=this.left;B.right;)V=B,B=B.right;if(V===this)B.right=this.right;else{var F=this.left,z=this.right;V.count-=B.count,V.right=B.left,B.left=F,B.right=z}v(this,B),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?v(this,this.left):v(this,this.right);return u}for(var F=s.ge(this.leftPoints,A,k);F<this.leftPoints.length&&this.leftPoints[F][0]===A[0];++F)if(this.leftPoints[F]===A){this.count-=1,this.leftPoints.splice(F,1);for(var z=s.ge(this.rightPoints,A,x);z<this.rightPoints.length&&this.rightPoints[z][1]===A[1];++z)if(this.rightPoints[z]===A)return this.rightPoints.splice(z,1),u}return l}};function p(A,P,D){for(var z=0;z<A.length&&A[z][0]<=P;++z){var O=D(A[z]);if(O)return O}}function M(A,P,D){for(var z=A.length-1;z>=0&&A[z][1]>=P;--z){var O=D(A[z]);if(O)return O}}function b(A,P){for(var D=0;D<A.length;++D){var z=P(A[D]);if(z)return z}}h.queryPoint=function(A,P){if(A<this.mid){if(this.left){var D=this.left.queryPoint(A,P);if(D)return D}return p(this.leftPoints,A,P)}else if(A>this.mid){if(this.right){var D=this.right.queryPoint(A,P);if(D)return D}return M(this.rightPoints,A,P)}else return b(this.leftPoints,P)},h.queryInterval=function(A,P,D){if(A<this.mid&&this.left){var z=this.left.queryInterval(A,P,D);if(z)return z}if(P>this.mid&&this.right){var z=this.right.queryInterval(A,P,D);if(z)return z}return P<this.mid?p(this.leftPoints,P,D):A>this.mid?M(this.rightPoints,A,D):b(this.leftPoints,D)};function w(A,P){return A-P}function k(A,P){var D=A[0]-P[0];return D||A[1]-P[1]}function x(A,P){var D=A[1]-P[1];return D||A[0]-P[0]}function E(A){if(A.length===0)return null;for(var P=[],D=0;D<A.length;++D)P.push(A[D][0],A[D][1]);P.sort(w);for(var z=P[P.length>>1],O=[],V=[],B=[],D=0;D<A.length;++D){var F=A[D];F[1]<z?O.push(F):z<F[0]?V.push(F):B.push(F)}var N=B,Z=B.slice();return N.sort(k),Z.sort(x),new c(z,E(O),E(V),N,Z)}function S(A){this.root=A}var g=S.prototype;g.insert=function(A){this.root?this.root.insert(A):this.root=new c(A[0],null,null,[A],[A])},g.remove=function(A){if(this.root){var P=this.root.remove(A);return P===f&&(this.root=null),P!==l}return!1},g.queryPoint=function(A,P){if(this.root)return this.root.queryPoint(A,P)},g.queryInterval=function(A,P,D){if(A<=P&&this.root)return this.root.queryInterval(A,P,D)},Object.defineProperty(g,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(g,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function C(A){return!A||A.length===0?new S(null):new S(E(A))}},7762:function(n){"use strict";function a(o){for(var s=new Array(o),l=0;l<o;++l)s[l]=l;return s}n.exports=a},9507:function(n){n.exports=!0},7163:function(n){n.exports=function(s){return s!=null&&(a(s)||o(s)||!!s._isBuffer)};function a(s){return!!s.constructor&&typeof s.constructor.isBuffer=="function"&&s.constructor.isBuffer(s)}function o(s){return typeof s.readFloatLE=="function"&&typeof s.slice=="function"&&a(s.slice(0,0))}},5219:function(n){"use strict";n.exports=function(a){for(var o=a.length,s,l=0;l<o;l++)if(s=a.charCodeAt(l),(s<9||s>13)&&s!==32&&s!==133&&s!==160&&s!==5760&&s!==6158&&(s<8192||s>8205)&&s!==8232&&s!==8233&&s!==8239&&s!==8287&&s!==8288&&s!==12288&&s!==65279)return!1;return!0}},395:function(n){function a(o,s,l){return o*(1-l)+s*l}n.exports=a},2652:function(n,a,o){var s=o(4335),l=o(6864),u=o(1903),f=o(9921),c=o(7608),h=o(5665),v={length:o(1387),normalize:o(3536),dot:o(244),cross:o(5911)},d=l(),_=l(),T=[0,0,0,0],p=[[0,0,0],[0,0,0],[0,0,0]],M=[0,0,0];n.exports=function(E,S,g,C,A,P){if(S||(S=[0,0,0]),g||(g=[0,0,0]),C||(C=[0,0,0]),A||(A=[0,0,0,1]),P||(P=[0,0,0,1]),!s(d,E)||(u(_,d),_[3]=0,_[7]=0,_[11]=0,_[15]=1,Math.abs(f(_)<1e-8)))return!1;var D=d[3],z=d[7],O=d[11],V=d[12],B=d[13],F=d[14],N=d[15];if(D!==0||z!==0||O!==0){T[0]=D,T[1]=z,T[2]=O,T[3]=N;var Z=c(_,_);if(!Z)return!1;h(_,_),b(A,T,_)}else A[0]=A[1]=A[2]=0,A[3]=1;if(S[0]=V,S[1]=B,S[2]=F,w(p,d),g[0]=v.length(p[0]),v.normalize(p[0],p[0]),C[0]=v.dot(p[0],p[1]),k(p[1],p[1],p[0],1,-C[0]),g[1]=v.length(p[1]),v.normalize(p[1],p[1]),C[0]/=g[1],C[1]=v.dot(p[0],p[2]),k(p[2],p[2],p[0],1,-C[1]),C[2]=v.dot(p[1],p[2]),k(p[2],p[2],p[1],1,-C[2]),g[2]=v.length(p[2]),v.normalize(p[2],p[2]),C[1]/=g[2],C[2]/=g[2],v.cross(M,p[1],p[2]),v.dot(p[0],M)<0)for(var J=0;J<3;J++)g[J]*=-1,p[J][0]*=-1,p[J][1]*=-1,p[J][2]*=-1;return P[0]=.5*Math.sqrt(Math.max(1+p[0][0]-p[1][1]-p[2][2],0)),P[1]=.5*Math.sqrt(Math.max(1-p[0][0]+p[1][1]-p[2][2],0)),P[2]=.5*Math.sqrt(Math.max(1-p[0][0]-p[1][1]+p[2][2],0)),P[3]=.5*Math.sqrt(Math.max(1+p[0][0]+p[1][1]+p[2][2],0)),p[2][1]>p[1][2]&&(P[0]=-P[0]),p[0][2]>p[2][0]&&(P[1]=-P[1]),p[1][0]>p[0][1]&&(P[2]=-P[2]),!0};function b(x,E,S){var g=E[0],C=E[1],A=E[2],P=E[3];return x[0]=S[0]*g+S[4]*C+S[8]*A+S[12]*P,x[1]=S[1]*g+S[5]*C+S[9]*A+S[13]*P,x[2]=S[2]*g+S[6]*C+S[10]*A+S[14]*P,x[3]=S[3]*g+S[7]*C+S[11]*A+S[15]*P,x}function w(x,E){x[0][0]=E[0],x[0][1]=E[1],x[0][2]=E[2],x[1][0]=E[4],x[1][1]=E[5],x[1][2]=E[6],x[2][0]=E[8],x[2][1]=E[9],x[2][2]=E[10]}function k(x,E,S,g,C){x[0]=E[0]*g+S[0]*C,x[1]=E[1]*g+S[1]*C,x[2]=E[2]*g+S[2]*C}},4335:function(n){n.exports=function(o,s){var l=s[15];if(l===0)return!1;for(var u=1/l,f=0;f<16;f++)o[f]=s[f]*u;return!0}},7442:function(n,a,o){var s=o(6658),l=o(7182),u=o(2652),f=o(9921),c=o(8648),h=T(),v=T(),d=T();n.exports=_;function _(b,w,k,x){if(f(w)===0||f(k)===0)return!1;var E=u(w,h.translate,h.scale,h.skew,h.perspective,h.quaternion),S=u(k,v.translate,v.scale,v.skew,v.perspective,v.quaternion);return!E||!S?!1:(s(d.translate,h.translate,v.translate,x),s(d.skew,h.skew,v.skew,x),s(d.scale,h.scale,v.scale,x),s(d.perspective,h.perspective,v.perspective,x),c(d.quaternion,h.quaternion,v.quaternion,x),l(b,d.translate,d.scale,d.skew,d.perspective,d.quaternion),!0)}function T(){return{translate:p(),scale:p(1),skew:p(),perspective:M(),quaternion:M()}}function p(b){return[b||0,b||0,b||0]}function M(){return[0,0,0,1]}},7182:function(n,a,o){var s={identity:o(7894),translate:o(7656),multiply:o(6760),create:o(6864),scale:o(2504),fromRotationTranslation:o(6743)},l=s.create(),u=s.create();n.exports=function(c,h,v,d,_,T){return s.identity(c),s.fromRotationTranslation(c,T,h),c[3]=_[0],c[7]=_[1],c[11]=_[2],c[15]=_[3],s.identity(u),d[2]!==0&&(u[9]=d[2],s.multiply(c,c,u)),d[1]!==0&&(u[9]=0,u[8]=d[1],s.multiply(c,c,u)),d[0]!==0&&(u[8]=0,u[4]=d[0],s.multiply(c,c,u)),s.scale(c,c,v),c}},4192:function(n,a,o){"use strict";var s=o(2478),l=o(7442),u=o(7608),f=o(5567),c=o(2408),h=o(7089),v=o(6582),d=o(7656),_=o(2504),T=o(3536),p=[0,0,0];n.exports=k;function M(x){this._components=x.slice(),this._time=[0],this.prevMatrix=x.slice(),this.nextMatrix=x.slice(),this.computedMatrix=x.slice(),this.computedInverse=x.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var b=M.prototype;b.recalcMatrix=function(x){var E=this._time,S=s.le(E,x),g=this.computedMatrix;if(!(S<0)){var C=this._components;if(S===E.length-1)for(var A=16*S,P=0;P<16;++P)g[P]=C[A++];else{for(var D=E[S+1]-E[S],A=16*S,z=this.prevMatrix,O=!0,P=0;P<16;++P)z[P]=C[A++];for(var V=this.nextMatrix,P=0;P<16;++P)V[P]=C[A++],O=O&&z[P]===V[P];if(D<1e-6||O)for(var P=0;P<16;++P)g[P]=z[P];else l(g,z,V,(x-E[S])/D)}var B=this.computedUp;B[0]=g[1],B[1]=g[5],B[2]=g[9],T(B,B);var F=this.computedInverse;u(F,g);var N=this.computedEye,Z=F[15];N[0]=F[12]/Z,N[1]=F[13]/Z,N[2]=F[14]/Z;for(var J=this.computedCenter,re=Math.exp(this.computedRadius[0]),P=0;P<3;++P)J[P]=N[P]-g[2+4*P]*re}},b.idle=function(x){if(!(x<this.lastT())){for(var E=this._components,S=E.length-16,g=0;g<16;++g)E.push(E[S++]);this._time.push(x)}},b.flush=function(x){var E=s.gt(this._time,x)-2;E<0||(this._time.splice(0,E),this._components.splice(0,16*E))},b.lastT=function(){return this._time[this._time.length-1]},b.lookAt=function(x,E,S,g){this.recalcMatrix(x),E=E||this.computedEye,S=S||p,g=g||this.computedUp,this.setMatrix(x,v(this.computedMatrix,E,S,g));for(var C=0,A=0;A<3;++A)C+=Math.pow(S[A]-E[A],2);C=Math.log(Math.sqrt(C)),this.computedRadius[0]=C},b.rotate=function(x,E,S,g){this.recalcMatrix(x);var C=this.computedInverse;E&&c(C,C,E),S&&f(C,C,S),g&&h(C,C,g),this.setMatrix(x,u(this.computedMatrix,C))};var w=[0,0,0];b.pan=function(x,E,S,g){w[0]=-(E||0),w[1]=-(S||0),w[2]=-(g||0),this.recalcMatrix(x);var C=this.computedInverse;d(C,C,w),this.setMatrix(x,u(C,C))},b.translate=function(x,E,S,g){w[0]=E||0,w[1]=S||0,w[2]=g||0,this.recalcMatrix(x);var C=this.computedMatrix;d(C,C,w),this.setMatrix(x,C)},b.setMatrix=function(x,E){if(!(x<this.lastT())){this._time.push(x);for(var S=0;S<16;++S)this._components.push(E[S])}},b.setDistance=function(x,E){this.computedRadius[0]=E},b.setDistanceLimits=function(x,E){var S=this._limits;S[0]=x,S[1]=E},b.getDistanceLimits=function(x){var E=this._limits;return x?(x[0]=E[0],x[1]=E[1],x):E};function k(x){x=x||{};var E=x.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new M(E)}},3090:function(n,a,o){"use strict";n.exports=l;var s=o(3250)[3];function l(u){var f=u.length;if(f<3){for(var M=new Array(f),c=0;c<f;++c)M[c]=c;return f===2&&u[0][0]===u[1][0]&&u[0][1]===u[1][1]?[0]:M}for(var h=new Array(f),c=0;c<f;++c)h[c]=c;h.sort(function(x,E){var S=u[x][0]-u[E][0];return S||u[x][1]-u[E][1]});for(var v=[h[0],h[1]],d=[h[0],h[1]],c=2;c<f;++c){for(var _=h[c],T=u[_],p=v.length;p>1&&s(u[v[p-2]],u[v[p-1]],T)<=0;)p-=1,v.pop();for(v.push(_),p=d.length;p>1&&s(u[d[p-2]],u[d[p-1]],T)>=0;)p-=1,d.pop();d.push(_)}for(var M=new Array(d.length+v.length-2),b=0,c=0,w=v.length;c<w;++c)M[b++]=v[c];for(var k=d.length-2;k>0;--k)M[b++]=d[k];return M}},351:function(n,a,o){"use strict";n.exports=l;var s=o(4687);function l(u,f){f||(f=u,u=window);var c=0,h=0,v=0,d={shift:!1,alt:!1,control:!1,meta:!1},_=!1;function T(A){var P=!1;return"altKey"in A&&(P=P||A.altKey!==d.alt,d.alt=!!A.altKey),"shiftKey"in A&&(P=P||A.shiftKey!==d.shift,d.shift=!!A.shiftKey),"ctrlKey"in A&&(P=P||A.ctrlKey!==d.control,d.control=!!A.ctrlKey),"metaKey"in A&&(P=P||A.metaKey!==d.meta,d.meta=!!A.metaKey),P}function p(A,P){var D=s.x(P),z=s.y(P);"buttons"in P&&(A=P.buttons|0),(A!==c||D!==h||z!==v||T(P))&&(c=A|0,h=D||0,v=z||0,f&&f(c,h,v,d))}function M(A){p(0,A)}function b(){(c||h||v||d.shift||d.alt||d.meta||d.control)&&(h=v=0,c=0,d.shift=d.alt=d.control=d.meta=!1,f&&f(0,0,0,d))}function w(A){T(A)&&f&&f(c,h,v,d)}function k(A){s.buttons(A)===0?p(0,A):p(c,A)}function x(A){p(c|s.buttons(A),A)}function E(A){p(c&~s.buttons(A),A)}function S(){_||(_=!0,u.addEventListener("mousemove",k),u.addEventListener("mousedown",x),u.addEventListener("mouseup",E),u.addEventListener("mouseleave",M),u.addEventListener("mouseenter",M),u.addEventListener("mouseout",M),u.addEventListener("mouseover",M),u.addEventListener("blur",b),u.addEventListener("keyup",w),u.addEventListener("keydown",w),u.addEventListener("keypress",w),u!==window&&(window.addEventListener("blur",b),window.addEventListener("keyup",w),window.addEventListener("keydown",w),window.addEventListener("keypress",w)))}function g(){_&&(_=!1,u.removeEventListener("mousemove",k),u.removeEventListener("mousedown",x),u.removeEventListener("mouseup",E),u.removeEventListener("mouseleave",M),u.removeEventListener("mouseenter",M),u.removeEventListener("mouseout",M),u.removeEventListener("mouseover",M),u.removeEventListener("blur",b),u.removeEventListener("keyup",w),u.removeEventListener("keydown",w),u.removeEventListener("keypress",w),u!==window&&(window.removeEventListener("blur",b),window.removeEventListener("keyup",w),window.removeEventListener("keydown",w),window.removeEventListener("keypress",w)))}S();var C={element:u};return Object.defineProperties(C,{enabled:{get:function(){return _},set:function(A){A?S():g()},enumerable:!0},buttons:{get:function(){return c},enumerable:!0},x:{get:function(){return h},enumerable:!0},y:{get:function(){return v},enumerable:!0},mods:{get:function(){return d},enumerable:!0}}),C}},24:function(n){var a={left:0,top:0};n.exports=o;function o(l,u,f){u=u||l.currentTarget||l.srcElement,Array.isArray(f)||(f=[0,0]);var c=l.clientX||0,h=l.clientY||0,v=s(u);return f[0]=c-v.left,f[1]=h-v.top,f}function s(l){return l===window||l===document||l===document.body?a:l.getBoundingClientRect()}},4687:function(n,a){"use strict";function o(f){if(typeof f=="object"){if("buttons"in f)return f.buttons;if("which"in f){var c=f.which;if(c===2)return 4;if(c===3)return 2;if(c>0)return 1<<c-1}else if("button"in f){var c=f.button;if(c===1)return 4;if(c===2)return 2;if(c>=0)return 1<<c}}return 0}a.buttons=o;function s(f){return f.target||f.srcElement||window}a.element=s;function l(f){if(typeof f=="object"){if("offsetX"in f)return f.offsetX;var c=s(f),h=c.getBoundingClientRect();return f.clientX-h.left}return 0}a.x=l;function u(f){if(typeof f=="object"){if("offsetY"in f)return f.offsetY;var c=s(f),h=c.getBoundingClientRect();return f.clientY-h.top}return 0}a.y=u},8512:function(n,a,o){"use strict";var s=o(665);n.exports=l;function l(u,f,c){typeof u=="function"&&(c=!!f,f=u,u=window);var h=s("ex",u),v=function(d){c&&d.preventDefault();var _=d.deltaX||0,T=d.deltaY||0,p=d.deltaZ||0,M=d.deltaMode,b=1;switch(M){case 1:b=h;break;case 2:b=window.innerHeight;break}if(_*=b,T*=b,p*=b,_||T||p)return f(_,T,p,d)};return u.addEventListener("wheel",v),v}},2640:function(n,a,o){"use strict";var s=o(1888);n.exports=f;var l={"false,0,1":function(h,v,d,_,T){return function(M,b,w,k){var x=M.shape[0]|0,E=M.shape[1]|0,S=M.data,g=M.offset|0,C=M.stride[0]|0,A=M.stride[1]|0,P=g,D,z=-C|0,O=0,V=-A|0,B=0,F=-C-A|0,N=0,Z=C|0,J=A-C*x|0,re=0,ue=0,fe=0,K=2*x|0,X=_(K),ae=_(K),oe=0,me=0,xe=-1,ce=-1,ie=0,ge=-x|0,le=x|0,we=0,Re=-x-1|0,qe=x-1|0,et=0,Pe=0,Ie=0;for(re=0;re<x;++re)X[oe++]=d(S[P],b,w,k),P+=Z;if(P+=J,E>0){if(ue=1,X[oe++]=d(S[P],b,w,k),P+=Z,x>0)for(re=1,D=S[P],me=X[oe]=d(D,b,w,k),ie=X[oe+xe],we=X[oe+ge],et=X[oe+Re],(me!==ie||me!==we||me!==et)&&(O=S[P+z],B=S[P+V],N=S[P+F],h(re,ue,D,O,B,N,me,ie,we,et,b,w,k),Pe=ae[oe]=fe++),oe+=1,P+=Z,re=2;re<x;++re)D=S[P],me=X[oe]=d(D,b,w,k),ie=X[oe+xe],we=X[oe+ge],et=X[oe+Re],(me!==ie||me!==we||me!==et)&&(O=S[P+z],B=S[P+V],N=S[P+F],h(re,ue,D,O,B,N,me,ie,we,et,b,w,k),Pe=ae[oe]=fe++,et!==ie&&v(ae[oe+xe],Pe,N,O,et,ie,b,w,k)),oe+=1,P+=Z;for(P+=J,oe=0,Ie=xe,xe=ce,ce=Ie,Ie=ge,ge=le,le=Ie,Ie=Re,Re=qe,qe=Ie,ue=2;ue<E;++ue){if(X[oe++]=d(S[P],b,w,k),P+=Z,x>0)for(re=1,D=S[P],me=X[oe]=d(D,b,w,k),ie=X[oe+xe],we=X[oe+ge],et=X[oe+Re],(me!==ie||me!==we||me!==et)&&(O=S[P+z],B=S[P+V],N=S[P+F],h(re,ue,D,O,B,N,me,ie,we,et,b,w,k),Pe=ae[oe]=fe++,et!==we&&v(ae[oe+ge],Pe,B,N,we,et,b,w,k)),oe+=1,P+=Z,re=2;re<x;++re)D=S[P],me=X[oe]=d(D,b,w,k),ie=X[oe+xe],we=X[oe+ge],et=X[oe+Re],(me!==ie||me!==we||me!==et)&&(O=S[P+z],B=S[P+V],N=S[P+F],h(re,ue,D,O,B,N,me,ie,we,et,b,w,k),Pe=ae[oe]=fe++,et!==we&&v(ae[oe+ge],Pe,B,N,we,et,b,w,k),et!==ie&&v(ae[oe+xe],Pe,N,O,et,ie,b,w,k)),oe+=1,P+=Z;ue&1&&(oe=0),Ie=xe,xe=ce,ce=Ie,Ie=ge,ge=le,le=Ie,Ie=Re,Re=qe,qe=Ie,P+=J}}T(ae),T(X)}},"false,1,0":function(h,v,d,_,T){return function(M,b,w,k){var x=M.shape[0]|0,E=M.shape[1]|0,S=M.data,g=M.offset|0,C=M.stride[0]|0,A=M.stride[1]|0,P=g,D,z=-C|0,O=0,V=-A|0,B=0,F=-C-A|0,N=0,Z=A|0,J=C-A*E|0,re=0,ue=0,fe=0,K=2*E|0,X=_(K),ae=_(K),oe=0,me=0,xe=-1,ce=-1,ie=0,ge=-E|0,le=E|0,we=0,Re=-E-1|0,qe=E-1|0,et=0,Pe=0,Ie=0;for(ue=0;ue<E;++ue)X[oe++]=d(S[P],b,w,k),P+=Z;if(P+=J,x>0){if(re=1,X[oe++]=d(S[P],b,w,k),P+=Z,E>0)for(ue=1,D=S[P],me=X[oe]=d(D,b,w,k),we=X[oe+ge],ie=X[oe+xe],et=X[oe+Re],(me!==we||me!==ie||me!==et)&&(O=S[P+z],B=S[P+V],N=S[P+F],h(re,ue,D,O,B,N,me,we,ie,et,b,w,k),Pe=ae[oe]=fe++),oe+=1,P+=Z,ue=2;ue<E;++ue)D=S[P],me=X[oe]=d(D,b,w,k),we=X[oe+ge],ie=X[oe+xe],et=X[oe+Re],(me!==we||me!==ie||me!==et)&&(O=S[P+z],B=S[P+V],N=S[P+F],h(re,ue,D,O,B,N,me,we,ie,et,b,w,k),Pe=ae[oe]=fe++,et!==ie&&v(ae[oe+xe],Pe,B,N,ie,et,b,w,k)),oe+=1,P+=Z;for(P+=J,oe=0,Ie=ge,ge=le,le=Ie,Ie=xe,xe=ce,ce=Ie,Ie=Re,Re=qe,qe=Ie,re=2;re<x;++re){if(X[oe++]=d(S[P],b,w,k),P+=Z,E>0)for(ue=1,D=S[P],me=X[oe]=d(D,b,w,k),we=X[oe+ge],ie=X[oe+xe],et=X[oe+Re],(me!==we||me!==ie||me!==et)&&(O=S[P+z],B=S[P+V],N=S[P+F],h(re,ue,D,O,B,N,me,we,ie,et,b,w,k),Pe=ae[oe]=fe++,et!==we&&v(ae[oe+ge],Pe,N,O,et,we,b,w,k)),oe+=1,P+=Z,ue=2;ue<E;++ue)D=S[P],me=X[oe]=d(D,b,w,k),we=X[oe+ge],ie=X[oe+xe],et=X[oe+Re],(me!==we||me!==ie||me!==et)&&(O=S[P+z],B=S[P+V],N=S[P+F],h(re,ue,D,O,B,N,me,we,ie,et,b,w,k),Pe=ae[oe]=fe++,et!==ie&&v(ae[oe+xe],Pe,B,N,ie,et,b,w,k),et!==we&&v(ae[oe+ge],Pe,N,O,et,we,b,w,k)),oe+=1,P+=Z;re&1&&(oe=0),Ie=ge,ge=le,le=Ie,Ie=xe,xe=ce,ce=Ie,Ie=Re,Re=qe,qe=Ie,P+=J}}T(ae),T(X)}}};function u(c,h,v,d,_,T){var p=[T,_].join(","),M=l[p];return M(c,h,v,s.mallocUint32,s.freeUint32)}function f(c){function h(b){throw new Error("ndarray-extract-contour: "+b)}typeof c!="object"&&h("Must specify arguments");var v=c.order;Array.isArray(v)||h("Must specify order");var d=c.arrayArguments||1;d<1&&h("Must have at least one array argument");var _=c.scalarArguments||0;_<0&&h("Scalar arg count must be > 0"),typeof c.vertex!="function"&&h("Must specify vertex creation function"),typeof c.cell!="function"&&h("Must specify cell creation function"),typeof c.phase!="function"&&h("Must specify phase function");for(var T=c.getters||[],p=new Array(d),M=0;M<d;++M)T.indexOf(M)>=0?p[M]=!0:p[M]=!1;return u(c.vertex,c.cell,c.phase,_,v,p)}},6199:function(n,a,o){"use strict";var s=o(1338),l={zero:function(k,x,E,S){var g=k[0],C=E[0];S|=0;var A=0,P=C;for(A=0;A<g;++A)x[S]=0,S+=P},fdTemplate1:function(k,x,E,S,g,C,A){var P=k[0],D=E[0],z=C[0],O=-1*D,V=D;S|=0,A|=0;var B=0,F=D,N=z;for(B=0;B<P;++B)g[A]=.5*(x[S+O]-x[S+V]),S+=F,A+=N},fdTemplate2:function(k,x,E,S,g,C,A,P,D,z){var O=k[0],V=k[1],B=E[0],F=E[1],N=C[0],Z=C[1],J=D[0],re=D[1],ue=-1*B,fe=B,K=-1*F,X=F;S|=0,A|=0,z|=0;var ae=0,oe=0,me=F,xe=B-V*F,ce=Z,ie=N-V*Z,ge=re,le=J-V*re;for(oe=0;oe<O;++oe){for(ae=0;ae<V;++ae)g[A]=.5*(x[S+ue]-x[S+fe]),P[z]=.5*(x[S+K]-x[S+X]),S+=me,A+=ce,z+=ge;S+=xe,A+=ie,z+=le}}},u={cdiff:function(k){var x={};return function(S,g,C){var A=S.dtype,P=S.order,D=g.dtype,z=g.order,O=C.dtype,V=C.order,B=[A,P.join(),D,z.join(),O,V.join()].join(),F=x[B];return F||(x[B]=F=k([A,P,D,z,O,V])),F(S.shape.slice(0),S.data,S.stride,S.offset|0,g.data,g.stride,g.offset|0,C.data,C.stride,C.offset|0)}},zero:function(k){var x={};return function(S){var g=S.dtype,C=S.order,A=[g,C.join()].join(),P=x[A];return P||(x[A]=P=k([g,C])),P(S.shape.slice(0),S.data,S.stride,S.offset|0)}},fdTemplate1:function(k){var x={};return function(S,g){var C=S.dtype,A=S.order,P=g.dtype,D=g.order,z=[C,A.join(),P,D.join()].join(),O=x[z];return O||(x[z]=O=k([C,A,P,D])),O(S.shape.slice(0),S.data,S.stride,S.offset|0,g.data,g.stride,g.offset|0)}},fdTemplate2:function(k){var x={};return function(S,g,C){var A=S.dtype,P=S.order,D=g.dtype,z=g.order,O=C.dtype,V=C.order,B=[A,P.join(),D,z.join(),O,V.join()].join(),F=x[B];return F||(x[B]=F=k([A,P,D,z,O,V])),F(S.shape.slice(0),S.data,S.stride,S.offset|0,g.data,g.stride,g.offset|0,C.data,C.stride,C.offset|0)}}};function f(k){var x=u[k.funcName];return x(c.bind(void 0,k))}function c(k){return l[k.funcName]}function h(k){return f({funcName:k.funcName})}var v={},d={},_={body:"",args:[],thisVars:[],localVars:[]},T=h({funcName:"cdiff"}),p=h({funcName:"zero"});function M(k){return k in v?v[k]:v[k]=h({funcName:"fdTemplate"+k})}function b(k,x,E,S){return function(g,C){var A=C.shape.slice();return A[0]>2&&A[1]>2&&S(C.pick(-1,-1).lo(1,1).hi(A[0]-2,A[1]-2),g.pick(-1,-1,0).lo(1,1).hi(A[0]-2,A[1]-2),g.pick(-1,-1,1).lo(1,1).hi(A[0]-2,A[1]-2)),A[1]>2&&(E(C.pick(0,-1).lo(1).hi(A[1]-2),g.pick(0,-1,1).lo(1).hi(A[1]-2)),x(g.pick(0,-1,0).lo(1).hi(A[1]-2))),A[1]>2&&(E(C.pick(A[0]-1,-1).lo(1).hi(A[1]-2),g.pick(A[0]-1,-1,1).lo(1).hi(A[1]-2)),x(g.pick(A[0]-1,-1,0).lo(1).hi(A[1]-2))),A[0]>2&&(E(C.pick(-1,0).lo(1).hi(A[0]-2),g.pick(-1,0,0).lo(1).hi(A[0]-2)),x(g.pick(-1,0,1).lo(1).hi(A[0]-2))),A[0]>2&&(E(C.pick(-1,A[1]-1).lo(1).hi(A[0]-2),g.pick(-1,A[1]-1,0).lo(1).hi(A[0]-2)),x(g.pick(-1,A[1]-1,1).lo(1).hi(A[0]-2))),g.set(0,0,0,0),g.set(0,0,1,0),g.set(A[0]-1,0,0,0),g.set(A[0]-1,0,1,0),g.set(0,A[1]-1,0,0),g.set(0,A[1]-1,1,0),g.set(A[0]-1,A[1]-1,0,0),g.set(A[0]-1,A[1]-1,1,0),g}}function w(k){var x=k.join(),A=d[x];if(A)return A;for(var E=k.length,S=[T,p],g=1;g<=E;++g)S.push(M(g));var C=b,A=C.apply(void 0,S);return d[x]=A,A}n.exports=function(x,E,S){if(Array.isArray(S)||(typeof S=="string"?S=s(E.dimension,S):S=s(E.dimension,"clamp")),E.size===0)return x;if(E.dimension===0)return x.set(0),x;var g=w(S);return g(x,E)}},4317:function(n){"use strict";function a(f,c){var h=Math.floor(c),v=c-h,d=0<=h&&h<f.shape[0],_=0<=h+1&&h+1<f.shape[0],T=d?+f.get(h):0,p=_?+f.get(h+1):0;return(1-v)*T+v*p}function o(f,c,h){var v=Math.floor(c),d=c-v,_=0<=v&&v<f.shape[0],T=0<=v+1&&v+1<f.shape[0],p=Math.floor(h),M=h-p,b=0<=p&&p<f.shape[1],w=0<=p+1&&p+1<f.shape[1],k=_&&b?f.get(v,p):0,x=_&&w?f.get(v,p+1):0,E=T&&b?f.get(v+1,p):0,S=T&&w?f.get(v+1,p+1):0;return(1-M)*((1-d)*k+d*E)+M*((1-d)*x+d*S)}function s(f,c,h,v){var d=Math.floor(c),_=c-d,T=0<=d&&d<f.shape[0],p=0<=d+1&&d+1<f.shape[0],M=Math.floor(h),b=h-M,w=0<=M&&M<f.shape[1],k=0<=M+1&&M+1<f.shape[1],x=Math.floor(v),E=v-x,S=0<=x&&x<f.shape[2],g=0<=x+1&&x+1<f.shape[2],C=T&&w&&S?f.get(d,M,x):0,A=T&&k&&S?f.get(d,M+1,x):0,P=p&&w&&S?f.get(d+1,M,x):0,D=p&&k&&S?f.get(d+1,M+1,x):0,z=T&&w&&g?f.get(d,M,x+1):0,O=T&&k&&g?f.get(d,M+1,x+1):0,V=p&&w&&g?f.get(d+1,M,x+1):0,B=p&&k&&g?f.get(d+1,M+1,x+1):0;return(1-E)*((1-b)*((1-_)*C+_*P)+b*((1-_)*A+_*D))+E*((1-b)*((1-_)*z+_*V)+b*((1-_)*O+_*B))}function l(f){var c=f.shape.length|0,h=new Array(c),v=new Array(c),d=new Array(c),_=new Array(c),T,p;for(T=0;T<c;++T)p=+arguments[T+1],h[T]=Math.floor(p),v[T]=p-h[T],d[T]=0<=h[T]&&h[T]<f.shape[T],_[T]=0<=h[T]+1&&h[T]+1<f.shape[T];var M=0,b,w,k;e:for(T=0;T<1<<c;++T){for(w=1,k=f.offset,b=0;b<c;++b)if(T&1<<b){if(!_[b])continue e;w*=v[b],k+=f.stride[b]*(h[b]+1)}else{if(!d[b])continue e;w*=1-v[b],k+=f.stride[b]*h[b]}M+=w*f.data[k]}return M}function u(f,c,h,v){switch(f.shape.length){case 0:return 0;case 1:return a(f,c);case 2:return o(f,c,h);case 3:return s(f,c,h,v);default:return l.apply(void 0,arguments)}}n.exports=u,n.exports.d1=a,n.exports.d2=o,n.exports.d3=s},5298:function(n,a){"use strict";var o={"float64,2,1,0":function(){return function(d,_,T,p,M){var b=d[0],w=d[1],k=d[2],x=T[0],E=T[1],S=T[2];p|=0;var g=0,C=0,A=0,P=S,D=E-k*S,z=x-w*E;for(A=0;A<b;++A){for(C=0;C<w;++C){for(g=0;g<k;++g)_[p]/=M,p+=P;p+=D}p+=z}}},"uint8,2,0,1,float64,2,1,0":function(){return function(d,_,T,p,M,b,w,k){var x=d[0],E=d[1],S=d[2],g=T[0],C=T[1],A=T[2],P=b[0],D=b[1],z=b[2];p|=0,w|=0;for(var O=p,V=w,B=d[0]|0;B>0;){B<64?(x=B,B=0):(x=64,B-=64);for(var F=d[1]|0;F>0;){F<64?(E=F,F=0):(E=64,F-=64),p=O+B*g+F*C,w=V+B*P+F*D;var N=0,Z=0,J=0,re=A,ue=g-S*A,fe=C-x*g,K=z,X=P-S*z,ae=D-x*P;for(J=0;J<E;++J){for(Z=0;Z<x;++Z){for(N=0;N<S;++N)_[p]=M[w]*k,p+=re,w+=K;p+=ue,w+=X}p+=fe,w+=ae}}}}},"float32,1,0,float32,1,0":function(){return function(d,_,T,p,M,b,w){var k=d[0],x=d[1],E=T[0],S=T[1],g=b[0],C=b[1];p|=0,w|=0;var A=0,P=0,D=S,z=E-x*S,O=C,V=g-x*C;for(P=0;P<k;++P){for(A=0;A<x;++A)_[p]=M[w],p+=D,w+=O;p+=z,w+=V}}},"float32,1,0,float32,0,1":function(){return function(d,_,T,p,M,b,w){var k=d[0],x=d[1],E=T[0],S=T[1],g=b[0],C=b[1];p|=0,w|=0;for(var A=p,P=w,D=d[1]|0;D>0;){D<64?(x=D,D=0):(x=64,D-=64);for(var z=d[0]|0;z>0;){z<64?(k=z,z=0):(k=64,z-=64),p=A+D*S+z*E,w=P+D*C+z*g;var O=0,V=0,B=S,F=E-x*S,N=C,Z=g-x*C;for(V=0;V<k;++V){for(O=0;O<x;++O)_[p]=M[w],p+=B,w+=N;p+=F,w+=Z}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(d,_,T,p,M,b,w){var k=d[0],x=d[1],E=d[2],S=T[0],g=T[1],C=T[2],A=b[0],P=b[1],D=b[2];p|=0,w|=0;for(var z=p,O=w,V=d[2]|0;V>0;){V<64?(E=V,V=0):(E=64,V-=64);for(var B=d[0]|0;B>0;){B<64?(k=B,B=0):(k=64,B-=64);for(var F=d[1]|0;F>0;){F<64?(x=F,F=0):(x=64,F-=64),p=z+V*C+B*S+F*g,w=O+V*D+B*A+F*P;var N=0,Z=0,J=0,re=C,ue=S-E*C,fe=g-k*S,K=D,X=A-E*D,ae=P-k*A;for(J=0;J<x;++J){for(Z=0;Z<k;++Z){for(N=0;N<E;++N)_[p]=M[w],p+=re,w+=K;p+=ue,w+=X}p+=fe,w+=ae}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(d,_,T,p,M,b,w){var k=d[0],x=d[1],E=d[2],S=T[0],g=T[1],C=T[2],A=b[0],P=b[1],D=b[2];p|=0,w|=0;var z=0,O=0,V=0,B=C,F=S-E*C,N=g-k*S,Z=D,J=A-E*D,re=P-k*A;for(V=0;V<x;++V){for(O=0;O<k;++O){for(z=0;z<E;++z)_[p]=M[w],p+=B,w+=Z;p+=F,w+=J}p+=N,w+=re}}}};function s(v,d){var _=d.join(","),T=o[_];return T()}var l=s,u={mul:function(v){var d={};return function(T,p,M){var b=T.dtype,w=T.order,k=p.dtype,x=p.order,E=M.dtype,S=M.order,g=[b,w.join(),k,x.join(),E,S.join()].join(),C=d[g];return C||(d[g]=C=v([b,w,k,x,E,S])),C(T.shape.slice(0),T.data,T.stride,T.offset|0,p.data,p.stride,p.offset|0,M.data,M.stride,M.offset|0)}},muls:function(v){var d={};return function(T,p,M){var b=T.dtype,w=T.order,k=p.dtype,x=p.order,E=[b,w.join(),k,x.join()].join(),S=d[E];return S||(d[E]=S=v([b,w,k,x])),S(T.shape.slice(0),T.data,T.stride,T.offset|0,p.data,p.stride,p.offset|0,M)}},mulseq:function(v){var d={};return function(T,p){var M=T.dtype,b=T.order,w=[M,b.join()].join(),k=d[w];return k||(d[w]=k=v([M,b])),k(T.shape.slice(0),T.data,T.stride,T.offset|0,p)}},div:function(v){var d={};return function(T,p,M){var b=T.dtype,w=T.order,k=p.dtype,x=p.order,E=M.dtype,S=M.order,g=[b,w.join(),k,x.join(),E,S.join()].join(),C=d[g];return C||(d[g]=C=v([b,w,k,x,E,S])),C(T.shape.slice(0),T.data,T.stride,T.offset|0,p.data,p.stride,p.offset|0,M.data,M.stride,M.offset|0)}},divs:function(v){var d={};return function(T,p,M){var b=T.dtype,w=T.order,k=p.dtype,x=p.order,E=[b,w.join(),k,x.join()].join(),S=d[E];return S||(d[E]=S=v([b,w,k,x])),S(T.shape.slice(0),T.data,T.stride,T.offset|0,p.data,p.stride,p.offset|0,M)}},divseq:function(v){var d={};return function(T,p){var M=T.dtype,b=T.order,w=[M,b.join()].join(),k=d[w];return k||(d[w]=k=v([M,b])),k(T.shape.slice(0),T.data,T.stride,T.offset|0,p)}},assign:function(v){var d={};return function(T,p){var M=T.dtype,b=T.order,w=p.dtype,k=p.order,x=[M,b.join(),w,k.join()].join(),E=d[x];return E||(d[x]=E=v([M,b,w,k])),E(T.shape.slice(0),T.data,T.stride,T.offset|0,p.data,p.stride,p.offset|0)}}};function f(v){var d=u[v.funcName];return d(l.bind(void 0,v))}function c(v){return f({funcName:v.funcName})}var h={mul:"*",div:"/"};(function(){for(var v in h)a[v]=c({funcName:v}),a[v+"s"]=c({funcName:v+"s"}),a[v+"seq"]=c({funcName:v+"seq"})})(),a.assign=c({funcName:"assign"})},9994:function(n,a,o){"use strict";var s=o(9618),l=o(8277);n.exports=function(f,c){for(var h=[],v=f,d=1;Array.isArray(v);)h.push(v.length),d*=v.length,v=v[0];return h.length===0?s():(c||(c=s(new Float64Array(d),h)),l(c,f),c)}},8277:function(n){"use strict";function a(){return function(c,h,v,d,_){var T=c[0],p=c[1],M=c[2],b=v[0],w=v[1],k=v[2],x=[0,0,0];d|=0;var E=0,S=0,g=0,C=k,A=w-M*k,P=b-p*w;for(g=0;g<T;++g){for(S=0;S<p;++S){for(E=0;E<M;++E){{var D=_,z;for(z=0;z<x.length-1;++z)D=D[x[z]];h[d]=D[x[x.length-1]]}d+=C,++x[2]}d+=A,x[2]-=M,++x[1]}d+=P,x[1]-=p,++x[0]}}}function o(){return a()}var s=o;function l(c){var h={};return function(d,_){var T=d.dtype,p=d.order,M=[T,p.join()].join(),b=h[M];return b||(h[M]=b=c([T,p])),b(d.shape.slice(0),d.data,d.stride,d.offset|0,_)}}function u(c){return l(s.bind(void 0,c))}function f(c){return u({funcName:c.funcName})}n.exports=f({funcName:"convert"})},7640:function(n,a,o){"use strict";var s=o(1888);function l(_){switch(_){case"uint32":return[s.mallocUint32,s.freeUint32];default:return null}}var u={"uint32,1,0":function(_,T){return function(M,b,w,k,x,E,S,g,C,A,P){var D,z,O,V=M*x+k,B,F=_(g),N,Z,J,re;for(D=M+1;D<=b;++D){for(z=D,V+=x,O=V,N=0,Z=V,B=0;B<g;++B)F[N++]=w[Z],Z+=C;e:for(;z-- >M;){N=0,Z=O-x;t:for(B=0;B<g;++B){if(J=w[Z],re=F[N],J<re)break e;if(J>re)break t;Z+=A,N+=P}for(N=O,Z=O-x,B=0;B<g;++B)w[N]=w[Z],N+=C,Z+=C;O-=x}for(N=O,Z=0,B=0;B<g;++B)w[N]=F[Z++],N+=C}T(F)}}};function f(_,T){var p=l(T),M=[T,_].join(","),b=u[M];return p?b(p[0],p[1]):b()}var c={"uint32,1,0":function(_,T,p){return function M(b,w,k,x,E,S,g,C,A,P,D){var z=(w-b+1)/6|0,O=b+z,V=w-z,B=b+w>>1,F=B-z,N=B+z,Z=O,J=F,re=B,ue=N,fe=V,K=b+1,X=w-1,ae=!0,oe,me,xe,ce,ie,ge,le,we,Re,qe=0,et=0,Pe=0,Ie,ut,ft,je,_t,Bt,Lt,Me,Ze,dt,it,vt,rt,We,ht,mt,er=C,$t=T(er),cr=T(er);ut=E*Z,ft=E*J,mt=x;e:for(Ie=0;Ie<C;++Ie){if(le=ut+mt,we=ft+mt,Pe=k[le]-k[we],Pe>0){me=Z,Z=J,J=me;break e}if(Pe<0)break e;mt+=P}ut=E*ue,ft=E*fe,mt=x;e:for(Ie=0;Ie<C;++Ie){if(le=ut+mt,we=ft+mt,Pe=k[le]-k[we],Pe>0){me=ue,ue=fe,fe=me;break e}if(Pe<0)break e;mt+=P}ut=E*Z,ft=E*re,mt=x;e:for(Ie=0;Ie<C;++Ie){if(le=ut+mt,we=ft+mt,Pe=k[le]-k[we],Pe>0){me=Z,Z=re,re=me;break e}if(Pe<0)break e;mt+=P}ut=E*J,ft=E*re,mt=x;e:for(Ie=0;Ie<C;++Ie){if(le=ut+mt,we=ft+mt,Pe=k[le]-k[we],Pe>0){me=J,J=re,re=me;break e}if(Pe<0)break e;mt+=P}ut=E*Z,ft=E*ue,mt=x;e:for(Ie=0;Ie<C;++Ie){if(le=ut+mt,we=ft+mt,Pe=k[le]-k[we],Pe>0){me=Z,Z=ue,ue=me;break e}if(Pe<0)break e;mt+=P}ut=E*re,ft=E*ue,mt=x;e:for(Ie=0;Ie<C;++Ie){if(le=ut+mt,we=ft+mt,Pe=k[le]-k[we],Pe>0){me=re,re=ue,ue=me;break e}if(Pe<0)break e;mt+=P}ut=E*J,ft=E*fe,mt=x;e:for(Ie=0;Ie<C;++Ie){if(le=ut+mt,we=ft+mt,Pe=k[le]-k[we],Pe>0){me=J,J=fe,fe=me;break e}if(Pe<0)break e;mt+=P}ut=E*J,ft=E*re,mt=x;e:for(Ie=0;Ie<C;++Ie){if(le=ut+mt,we=ft+mt,Pe=k[le]-k[we],Pe>0){me=J,J=re,re=me;break e}if(Pe<0)break e;mt+=P}ut=E*ue,ft=E*fe,mt=x;e:for(Ie=0;Ie<C;++Ie){if(le=ut+mt,we=ft+mt,Pe=k[le]-k[we],Pe>0){me=ue,ue=fe,fe=me;break e}if(Pe<0)break e;mt+=P}for(ut=E*Z,ft=E*J,je=E*re,_t=E*ue,Bt=E*fe,Lt=E*O,Me=E*B,Ze=E*V,ht=0,mt=x,Ie=0;Ie<C;++Ie)le=ut+mt,we=ft+mt,Re=je+mt,dt=_t+mt,it=Bt+mt,vt=Lt+mt,rt=Me+mt,We=Ze+mt,$t[ht]=k[we],cr[ht]=k[dt],ae=ae&&$t[ht]===cr[ht],xe=k[le],ce=k[Re],ie=k[it],k[vt]=xe,k[rt]=ce,k[We]=ie,++ht,mt+=A;for(ut=E*F,ft=E*b,mt=x,Ie=0;Ie<C;++Ie)le=ut+mt,we=ft+mt,k[le]=k[we],mt+=A;for(ut=E*N,ft=E*w,mt=x,Ie=0;Ie<C;++Ie)le=ut+mt,we=ft+mt,k[le]=k[we],mt+=A;if(ae)for(ge=K;ge<=X;++ge){le=x+ge*E,ht=0;e:for(Ie=0;Ie<C;++Ie){if(Pe=k[le]-$t[ht],Pe!==0)break e;ht+=D,le+=P}if(Pe!==0)if(Pe<0){if(ge!==K)for(ut=E*ge,ft=E*K,mt=x,Ie=0;Ie<C;++Ie)le=ut+mt,we=ft+mt,oe=k[le],k[le]=k[we],k[we]=oe,mt+=A;++K}else for(;;){le=x+X*E,ht=0;e:for(Ie=0;Ie<C;++Ie){if(Pe=k[le]-$t[ht],Pe!==0)break e;ht+=D,le+=P}if(Pe>0)X--;else if(Pe<0){for(ut=E*ge,ft=E*K,je=E*X,mt=x,Ie=0;Ie<C;++Ie)le=ut+mt,we=ft+mt,Re=je+mt,oe=k[le],k[le]=k[we],k[we]=k[Re],k[Re]=oe,mt+=A;++K,--X;break}else{for(ut=E*ge,ft=E*X,mt=x,Ie=0;Ie<C;++Ie)le=ut+mt,we=ft+mt,oe=k[le],k[le]=k[we],k[we]=oe,mt+=A;--X;break}}}else for(ge=K;ge<=X;++ge){le=x+ge*E,ht=0;e:for(Ie=0;Ie<C;++Ie){if(qe=k[le]-$t[ht],qe!==0)break e;ht+=D,le+=P}if(qe<0){if(ge!==K)for(ut=E*ge,ft=E*K,mt=x,Ie=0;Ie<C;++Ie)le=ut+mt,we=ft+mt,oe=k[le],k[le]=k[we],k[we]=oe,mt+=A;++K}else{le=x+ge*E,ht=0;e:for(Ie=0;Ie<C;++Ie){if(et=k[le]-cr[ht],et!==0)break e;ht+=D,le+=P}if(et>0)for(;;){le=x+X*E,ht=0;e:for(Ie=0;Ie<C;++Ie){if(Pe=k[le]-cr[ht],Pe!==0)break e;ht+=D,le+=P}if(Pe>0){if(--X<ge)break;continue}else{le=x+X*E,ht=0;e:for(Ie=0;Ie<C;++Ie){if(Pe=k[le]-$t[ht],Pe!==0)break e;ht+=D,le+=P}if(Pe<0){for(ut=E*ge,ft=E*K,je=E*X,mt=x,Ie=0;Ie<C;++Ie)le=ut+mt,we=ft+mt,Re=je+mt,oe=k[le],k[le]=k[we],k[we]=k[Re],k[Re]=oe,mt+=A;++K,--X}else{for(ut=E*ge,ft=E*X,mt=x,Ie=0;Ie<C;++Ie)le=ut+mt,we=ft+mt,oe=k[le],k[le]=k[we],k[we]=oe,mt+=A;--X}break}}}}for(ut=E*b,ft=E*(K-1),ht=0,mt=x,Ie=0;Ie<C;++Ie)le=ut+mt,we=ft+mt,k[le]=k[we],k[we]=$t[ht],++ht,mt+=A;for(ut=E*w,ft=E*(X+1),ht=0,mt=x,Ie=0;Ie<C;++Ie)le=ut+mt,we=ft+mt,k[le]=k[we],k[we]=cr[ht],++ht,mt+=A;if(K-2-b<=32?_(b,K-2,k,x,E,S,g,C,A,P,D):M(b,K-2,k,x,E,S,g,C,A,P,D),w-(X+2)<=32?_(X+2,w,k,x,E,S,g,C,A,P,D):M(X+2,w,k,x,E,S,g,C,A,P,D),ae){p($t),p(cr);return}if(K<O&&X>V){e:for(;;){for(le=x+K*E,ht=0,mt=x,Ie=0;Ie<C;++Ie){if(k[le]!==$t[ht])break e;++ht,le+=A}++K}e:for(;;){for(le=x+X*E,ht=0,mt=x,Ie=0;Ie<C;++Ie){if(k[le]!==cr[ht])break e;++ht,le+=A}--X}for(ge=K;ge<=X;++ge){le=x+ge*E,ht=0;e:for(Ie=0;Ie<C;++Ie){if(qe=k[le]-$t[ht],qe!==0)break e;ht+=D,le+=P}if(qe===0){if(ge!==K)for(ut=E*ge,ft=E*K,mt=x,Ie=0;Ie<C;++Ie)le=ut+mt,we=ft+mt,oe=k[le],k[le]=k[we],k[we]=oe,mt+=A;++K}else{le=x+ge*E,ht=0;e:for(Ie=0;Ie<C;++Ie){if(et=k[le]-cr[ht],et!==0)break e;ht+=D,le+=P}if(et===0)for(;;){le=x+X*E,ht=0;e:for(Ie=0;Ie<C;++Ie){if(Pe=k[le]-cr[ht],Pe!==0)break e;ht+=D,le+=P}if(Pe===0){if(--X<ge)break;continue}else{le=x+X*E,ht=0;e:for(Ie=0;Ie<C;++Ie){if(Pe=k[le]-$t[ht],Pe!==0)break e;ht+=D,le+=P}if(Pe<0){for(ut=E*ge,ft=E*K,je=E*X,mt=x,Ie=0;Ie<C;++Ie)le=ut+mt,we=ft+mt,Re=je+mt,oe=k[le],k[le]=k[we],k[we]=k[Re],k[Re]=oe,mt+=A;++K,--X}else{for(ut=E*ge,ft=E*X,mt=x,Ie=0;Ie<C;++Ie)le=ut+mt,we=ft+mt,oe=k[le],k[le]=k[we],k[we]=oe,mt+=A;--X}break}}}}}p($t),p(cr),X-K<=32?_(K,X,k,x,E,S,g,C,A,P,D):M(K,X,k,x,E,S,g,C,A,P,D)}}};function h(_,T,p){var M=l(T),b=[T,_].join(","),w=c[b];return _.length>1&&M?w(p,M[0],M[1]):w(p)}var v={"uint32,1,0":function(_,T){return function(p){var M=p.data,b=p.offset|0,w=p.shape,k=p.stride,x=k[0]|0,E=w[0]|0,S=k[1]|0,g=w[1]|0,C=S,A=S,P=1;E<=32?_(0,E-1,M,b,x,S,E,g,C,A,P):T(0,E-1,M,b,x,S,E,g,C,A,P)}}};function d(_,T){var p=[T,_].join(","),M=v[p],b=f(_,T),w=h(_,T,b);return M(b,w)}n.exports=d},446:function(n,a,o){"use strict";var s=o(7640),l={};function u(f){var c=f.order,h=f.dtype,v=[c,h],d=v.join(":"),_=l[d];return _||(l[d]=_=s(c,h)),_(f),f}n.exports=u},9618:function(n,a,o){var s=o(7163),l=typeof Float64Array!="undefined";function u(T,p){return T[0]-p[0]}function f(){var T=this.stride,p=new Array(T.length),M;for(M=0;M<p.length;++M)p[M]=[Math.abs(T[M]),M];p.sort(u);var b=new Array(p.length);for(M=0;M<b.length;++M)b[M]=p[M][1];return b}var c={T:function(T){function p(b){this.data=b}var M=p.prototype;return M.dtype=T,M.index=function(){return-1},M.size=0,M.dimension=-1,M.shape=M.stride=M.order=[],M.lo=M.hi=M.transpose=M.step=function(){return new p(this.data)},M.get=M.set=function(){},M.pick=function(){return null},function(w){return new p(w)}},0:function(T,p){function M(w,k){this.data=w,this.offset=k}var b=M.prototype;return b.dtype=T,b.index=function(){return this.offset},b.dimension=0,b.size=1,b.shape=b.stride=b.order=[],b.lo=b.hi=b.transpose=b.step=function(){return new M(this.data,this.offset)},b.pick=function(){return p(this.data)},b.valueOf=b.get=function(){return T==="generic"?this.data.get(this.offset):this.data[this.offset]},b.set=function(k){return T==="generic"?this.data.set(this.offset,k):this.data[this.offset]=k},function(k,x,E,S){return new M(k,S)}},1:function(T,p,M){function b(k,x,E,S){this.data=k,this.shape=[x],this.stride=[E],this.offset=S|0}var w=b.prototype;return w.dtype=T,w.dimension=1,Object.defineProperty(w,"size",{get:function(){return this.shape[0]}}),w.order=[0],w.set=function(x,E){return T==="generic"?this.data.set(this.offset+this.stride[0]*x,E):this.data[this.offset+this.stride[0]*x]=E},w.get=function(x){return T==="generic"?this.data.get(this.offset+this.stride[0]*x):this.data[this.offset+this.stride[0]*x]},w.index=function(x){return this.offset+this.stride[0]*x},w.hi=function(x){return new b(this.data,typeof x!="number"||x<0?this.shape[0]:x|0,this.stride[0],this.offset)},w.lo=function(x){var E=this.offset,S=0,g=this.shape[0],C=this.stride[0];return typeof x=="number"&&x>=0&&(S=x|0,E+=C*S,g-=S),new b(this.data,g,C,E)},w.step=function(x){var E=this.shape[0],S=this.stride[0],g=this.offset,C=0,A=Math.ceil;return typeof x=="number"&&(C=x|0,C<0?(g+=S*(E-1),E=A(-E/C)):E=A(E/C),S*=C),new b(this.data,E,S,g)},w.transpose=function(x){x=x===void 0?0:x|0;var E=this.shape,S=this.stride;return new b(this.data,E[x],S[x],this.offset)},w.pick=function(x){var E=[],S=[],g=this.offset;typeof x=="number"&&x>=0?g=g+this.stride[0]*x|0:(E.push(this.shape[0]),S.push(this.stride[0]));var C=p[E.length+1];return C(this.data,E,S,g)},function(x,E,S,g){return new b(x,E[0],S[0],g)}},2:function(T,p,M){function b(k,x,E,S,g,C){this.data=k,this.shape=[x,E],this.stride=[S,g],this.offset=C|0}var w=b.prototype;return w.dtype=T,w.dimension=2,Object.defineProperty(w,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(w,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),w.set=function(x,E,S){return T==="generic"?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*E,S):this.data[this.offset+this.stride[0]*x+this.stride[1]*E]=S},w.get=function(x,E){return T==="generic"?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*E):this.data[this.offset+this.stride[0]*x+this.stride[1]*E]},w.index=function(x,E){return this.offset+this.stride[0]*x+this.stride[1]*E},w.hi=function(x,E){return new b(this.data,typeof x!="number"||x<0?this.shape[0]:x|0,typeof E!="number"||E<0?this.shape[1]:E|0,this.stride[0],this.stride[1],this.offset)},w.lo=function(x,E){var S=this.offset,g=0,C=this.shape[0],A=this.shape[1],P=this.stride[0],D=this.stride[1];return typeof x=="number"&&x>=0&&(g=x|0,S+=P*g,C-=g),typeof E=="number"&&E>=0&&(g=E|0,S+=D*g,A-=g),new b(this.data,C,A,P,D,S)},w.step=function(x,E){var S=this.shape[0],g=this.shape[1],C=this.stride[0],A=this.stride[1],P=this.offset,D=0,z=Math.ceil;return typeof x=="number"&&(D=x|0,D<0?(P+=C*(S-1),S=z(-S/D)):S=z(S/D),C*=D),typeof E=="number"&&(D=E|0,D<0?(P+=A*(g-1),g=z(-g/D)):g=z(g/D),A*=D),new b(this.data,S,g,C,A,P)},w.transpose=function(x,E){x=x===void 0?0:x|0,E=E===void 0?1:E|0;var S=this.shape,g=this.stride;return new b(this.data,S[x],S[E],g[x],g[E],this.offset)},w.pick=function(x,E){var S=[],g=[],C=this.offset;typeof x=="number"&&x>=0?C=C+this.stride[0]*x|0:(S.push(this.shape[0]),g.push(this.stride[0])),typeof E=="number"&&E>=0?C=C+this.stride[1]*E|0:(S.push(this.shape[1]),g.push(this.stride[1]));var A=p[S.length+1];return A(this.data,S,g,C)},function(x,E,S,g){return new b(x,E[0],E[1],S[0],S[1],g)}},3:function(T,p,M){function b(k,x,E,S,g,C,A,P){this.data=k,this.shape=[x,E,S],this.stride=[g,C,A],this.offset=P|0}var w=b.prototype;return w.dtype=T,w.dimension=3,Object.defineProperty(w,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(w,"order",{get:function(){var x=Math.abs(this.stride[0]),E=Math.abs(this.stride[1]),S=Math.abs(this.stride[2]);return x>E?E>S?[2,1,0]:x>S?[1,2,0]:[1,0,2]:x>S?[2,0,1]:S>E?[0,1,2]:[0,2,1]}}),w.set=function(x,E,S,g){return T==="generic"?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*E+this.stride[2]*S,g):this.data[this.offset+this.stride[0]*x+this.stride[1]*E+this.stride[2]*S]=g},w.get=function(x,E,S){return T==="generic"?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*E+this.stride[2]*S):this.data[this.offset+this.stride[0]*x+this.stride[1]*E+this.stride[2]*S]},w.index=function(x,E,S){return this.offset+this.stride[0]*x+this.stride[1]*E+this.stride[2]*S},w.hi=function(x,E,S){return new b(this.data,typeof x!="number"||x<0?this.shape[0]:x|0,typeof E!="number"||E<0?this.shape[1]:E|0,typeof S!="number"||S<0?this.shape[2]:S|0,this.stride[0],this.stride[1],this.stride[2],this.offset)},w.lo=function(x,E,S){var g=this.offset,C=0,A=this.shape[0],P=this.shape[1],D=this.shape[2],z=this.stride[0],O=this.stride[1],V=this.stride[2];return typeof x=="number"&&x>=0&&(C=x|0,g+=z*C,A-=C),typeof E=="number"&&E>=0&&(C=E|0,g+=O*C,P-=C),typeof S=="number"&&S>=0&&(C=S|0,g+=V*C,D-=C),new b(this.data,A,P,D,z,O,V,g)},w.step=function(x,E,S){var g=this.shape[0],C=this.shape[1],A=this.shape[2],P=this.stride[0],D=this.stride[1],z=this.stride[2],O=this.offset,V=0,B=Math.ceil;return typeof x=="number"&&(V=x|0,V<0?(O+=P*(g-1),g=B(-g/V)):g=B(g/V),P*=V),typeof E=="number"&&(V=E|0,V<0?(O+=D*(C-1),C=B(-C/V)):C=B(C/V),D*=V),typeof S=="number"&&(V=S|0,V<0?(O+=z*(A-1),A=B(-A/V)):A=B(A/V),z*=V),new b(this.data,g,C,A,P,D,z,O)},w.transpose=function(x,E,S){x=x===void 0?0:x|0,E=E===void 0?1:E|0,S=S===void 0?2:S|0;var g=this.shape,C=this.stride;return new b(this.data,g[x],g[E],g[S],C[x],C[E],C[S],this.offset)},w.pick=function(x,E,S){var g=[],C=[],A=this.offset;typeof x=="number"&&x>=0?A=A+this.stride[0]*x|0:(g.push(this.shape[0]),C.push(this.stride[0])),typeof E=="number"&&E>=0?A=A+this.stride[1]*E|0:(g.push(this.shape[1]),C.push(this.stride[1])),typeof S=="number"&&S>=0?A=A+this.stride[2]*S|0:(g.push(this.shape[2]),C.push(this.stride[2]));var P=p[g.length+1];return P(this.data,g,C,A)},function(x,E,S,g){return new b(x,E[0],E[1],E[2],S[0],S[1],S[2],g)}},4:function(T,p,M){function b(k,x,E,S,g,C,A,P,D,z){this.data=k,this.shape=[x,E,S,g],this.stride=[C,A,P,D],this.offset=z|0}var w=b.prototype;return w.dtype=T,w.dimension=4,Object.defineProperty(w,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(w,"order",{get:M}),w.set=function(x,E,S,g,C){return T==="generic"?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*E+this.stride[2]*S+this.stride[3]*g,C):this.data[this.offset+this.stride[0]*x+this.stride[1]*E+this.stride[2]*S+this.stride[3]*g]=C},w.get=function(x,E,S,g){return T==="generic"?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*E+this.stride[2]*S+this.stride[3]*g):this.data[this.offset+this.stride[0]*x+this.stride[1]*E+this.stride[2]*S+this.stride[3]*g]},w.index=function(x,E,S,g){return this.offset+this.stride[0]*x+this.stride[1]*E+this.stride[2]*S+this.stride[3]*g},w.hi=function(x,E,S,g){return new b(this.data,typeof x!="number"||x<0?this.shape[0]:x|0,typeof E!="number"||E<0?this.shape[1]:E|0,typeof S!="number"||S<0?this.shape[2]:S|0,typeof g!="number"||g<0?this.shape[3]:g|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},w.lo=function(x,E,S,g){var C=this.offset,A=0,P=this.shape[0],D=this.shape[1],z=this.shape[2],O=this.shape[3],V=this.stride[0],B=this.stride[1],F=this.stride[2],N=this.stride[3];return typeof x=="number"&&x>=0&&(A=x|0,C+=V*A,P-=A),typeof E=="number"&&E>=0&&(A=E|0,C+=B*A,D-=A),typeof S=="number"&&S>=0&&(A=S|0,C+=F*A,z-=A),typeof g=="number"&&g>=0&&(A=g|0,C+=N*A,O-=A),new b(this.data,P,D,z,O,V,B,F,N,C)},w.step=function(x,E,S,g){var C=this.shape[0],A=this.shape[1],P=this.shape[2],D=this.shape[3],z=this.stride[0],O=this.stride[1],V=this.stride[2],B=this.stride[3],F=this.offset,N=0,Z=Math.ceil;return typeof x=="number"&&(N=x|0,N<0?(F+=z*(C-1),C=Z(-C/N)):C=Z(C/N),z*=N),typeof E=="number"&&(N=E|0,N<0?(F+=O*(A-1),A=Z(-A/N)):A=Z(A/N),O*=N),typeof S=="number"&&(N=S|0,N<0?(F+=V*(P-1),P=Z(-P/N)):P=Z(P/N),V*=N),typeof g=="number"&&(N=g|0,N<0?(F+=B*(D-1),D=Z(-D/N)):D=Z(D/N),B*=N),new b(this.data,C,A,P,D,z,O,V,B,F)},w.transpose=function(x,E,S,g){x=x===void 0?0:x|0,E=E===void 0?1:E|0,S=S===void 0?2:S|0,g=g===void 0?3:g|0;var C=this.shape,A=this.stride;return new b(this.data,C[x],C[E],C[S],C[g],A[x],A[E],A[S],A[g],this.offset)},w.pick=function(x,E,S,g){var C=[],A=[],P=this.offset;typeof x=="number"&&x>=0?P=P+this.stride[0]*x|0:(C.push(this.shape[0]),A.push(this.stride[0])),typeof E=="number"&&E>=0?P=P+this.stride[1]*E|0:(C.push(this.shape[1]),A.push(this.stride[1])),typeof S=="number"&&S>=0?P=P+this.stride[2]*S|0:(C.push(this.shape[2]),A.push(this.stride[2])),typeof g=="number"&&g>=0?P=P+this.stride[3]*g|0:(C.push(this.shape[3]),A.push(this.stride[3]));var D=p[C.length+1];return D(this.data,C,A,P)},function(x,E,S,g){return new b(x,E[0],E[1],E[2],E[3],S[0],S[1],S[2],S[3],g)}},5:function(p,M,b){function w(x,E,S,g,C,A,P,D,z,O,V,B){this.data=x,this.shape=[E,S,g,C,A],this.stride=[P,D,z,O,V],this.offset=B|0}var k=w.prototype;return k.dtype=p,k.dimension=5,Object.defineProperty(k,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(k,"order",{get:b}),k.set=function(E,S,g,C,A,P){return p==="generic"?this.data.set(this.offset+this.stride[0]*E+this.stride[1]*S+this.stride[2]*g+this.stride[3]*C+this.stride[4]*A,P):this.data[this.offset+this.stride[0]*E+this.stride[1]*S+this.stride[2]*g+this.stride[3]*C+this.stride[4]*A]=P},k.get=function(E,S,g,C,A){return p==="generic"?this.data.get(this.offset+this.stride[0]*E+this.stride[1]*S+this.stride[2]*g+this.stride[3]*C+this.stride[4]*A):this.data[this.offset+this.stride[0]*E+this.stride[1]*S+this.stride[2]*g+this.stride[3]*C+this.stride[4]*A]},k.index=function(E,S,g,C,A){return this.offset+this.stride[0]*E+this.stride[1]*S+this.stride[2]*g+this.stride[3]*C+this.stride[4]*A},k.hi=function(E,S,g,C,A){return new w(this.data,typeof E!="number"||E<0?this.shape[0]:E|0,typeof S!="number"||S<0?this.shape[1]:S|0,typeof g!="number"||g<0?this.shape[2]:g|0,typeof C!="number"||C<0?this.shape[3]:C|0,typeof A!="number"||A<0?this.shape[4]:A|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},k.lo=function(E,S,g,C,A){var P=this.offset,D=0,z=this.shape[0],O=this.shape[1],V=this.shape[2],B=this.shape[3],F=this.shape[4],N=this.stride[0],Z=this.stride[1],J=this.stride[2],re=this.stride[3],ue=this.stride[4];return typeof E=="number"&&E>=0&&(D=E|0,P+=N*D,z-=D),typeof S=="number"&&S>=0&&(D=S|0,P+=Z*D,O-=D),typeof g=="number"&&g>=0&&(D=g|0,P+=J*D,V-=D),typeof C=="number"&&C>=0&&(D=C|0,P+=re*D,B-=D),typeof A=="number"&&A>=0&&(D=A|0,P+=ue*D,F-=D),new w(this.data,z,O,V,B,F,N,Z,J,re,ue,P)},k.step=function(E,S,g,C,A){var P=this.shape[0],D=this.shape[1],z=this.shape[2],O=this.shape[3],V=this.shape[4],B=this.stride[0],F=this.stride[1],N=this.stride[2],Z=this.stride[3],J=this.stride[4],re=this.offset,ue=0,fe=Math.ceil;return typeof E=="number"&&(ue=E|0,ue<0?(re+=B*(P-1),P=fe(-P/ue)):P=fe(P/ue),B*=ue),typeof S=="number"&&(ue=S|0,ue<0?(re+=F*(D-1),D=fe(-D/ue)):D=fe(D/ue),F*=ue),typeof g=="number"&&(ue=g|0,ue<0?(re+=N*(z-1),z=fe(-z/ue)):z=fe(z/ue),N*=ue),typeof C=="number"&&(ue=C|0,ue<0?(re+=Z*(O-1),O=fe(-O/ue)):O=fe(O/ue),Z*=ue),typeof A=="number"&&(ue=A|0,ue<0?(re+=J*(V-1),V=fe(-V/ue)):V=fe(V/ue),J*=ue),new w(this.data,P,D,z,O,V,B,F,N,Z,J,re)},k.transpose=function(E,S,g,C,A){E=E===void 0?0:E|0,S=S===void 0?1:S|0,g=g===void 0?2:g|0,C=C===void 0?3:C|0,A=A===void 0?4:A|0;var P=this.shape,D=this.stride;return new w(this.data,P[E],P[S],P[g],P[C],P[A],D[E],D[S],D[g],D[C],D[A],this.offset)},k.pick=function(E,S,g,C,A){var P=[],D=[],z=this.offset;typeof E=="number"&&E>=0?z=z+this.stride[0]*E|0:(P.push(this.shape[0]),D.push(this.stride[0])),typeof S=="number"&&S>=0?z=z+this.stride[1]*S|0:(P.push(this.shape[1]),D.push(this.stride[1])),typeof g=="number"&&g>=0?z=z+this.stride[2]*g|0:(P.push(this.shape[2]),D.push(this.stride[2])),typeof C=="number"&&C>=0?z=z+this.stride[3]*C|0:(P.push(this.shape[3]),D.push(this.stride[3])),typeof A=="number"&&A>=0?z=z+this.stride[4]*A|0:(P.push(this.shape[4]),D.push(this.stride[4]));var O=M[P.length+1];return O(this.data,P,D,z)},function(E,S,g,C){return new w(E,S[0],S[1],S[2],S[3],S[4],g[0],g[1],g[2],g[3],g[4],C)}}};function h(T,p){var M=p===-1?"T":String(p),b=c[M];return p===-1?b(T):p===0?b(T,d[T][0]):b(T,d[T],f)}function v(T){if(s(T))return"buffer";if(l)switch(Object.prototype.toString.call(T)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(T)?"array":"generic"}var d={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function _(T,p,M,b){if(T===void 0){var g=d.array[0];return g([])}else typeof T=="number"&&(T=[T]);p===void 0&&(p=[T.length]);var w=p.length;if(M===void 0){M=new Array(w);for(var k=w-1,x=1;k>=0;--k)M[k]=x,x*=p[k]}if(b===void 0){b=0;for(var k=0;k<w;++k)M[k]<0&&(b-=(p[k]-1)*M[k])}for(var E=v(T),S=d[E];S.length<=w+1;)S.push(h(E,S.length-1));var g=S[w+1];return g(T,p,M,b)}n.exports=_},1278:function(n,a,o){"use strict";var s=o(2361),l=Math.pow(2,-1074),u=-1>>>0;n.exports=f;function f(c,h){if(isNaN(c)||isNaN(h))return NaN;if(c===h)return c;if(c===0)return h<0?-l:l;var v=s.hi(c),d=s.lo(c);return h>c==c>0?d===u?(v+=1,d=0):d+=1:d===0?(d=u,v-=1):d-=1,s.pack(d,v)}},8406:function(n,a){var o=1e-6,s=1e-6;a.vertexNormals=function(l,u,f){for(var c=u.length,h=new Array(c),v=f===void 0?o:f,d=0;d<c;++d)h[d]=[0,0,0];for(var d=0;d<l.length;++d)for(var _=l[d],T=0,p=_[_.length-1],M=_[0],b=0;b<_.length;++b){T=p,p=M,M=_[(b+1)%_.length];for(var w=u[T],k=u[p],x=u[M],E=new Array(3),S=0,g=new Array(3),C=0,A=0;A<3;++A)E[A]=w[A]-k[A],S+=E[A]*E[A],g[A]=x[A]-k[A],C+=g[A]*g[A];if(S*C>v)for(var P=h[p],D=1/Math.sqrt(S*C),A=0;A<3;++A){var z=(A+1)%3,O=(A+2)%3;P[A]+=D*(g[z]*E[O]-g[O]*E[z])}}for(var d=0;d<c;++d){for(var P=h[d],V=0,A=0;A<3;++A)V+=P[A]*P[A];if(V>v)for(var D=1/Math.sqrt(V),A=0;A<3;++A)P[A]*=D;else for(var A=0;A<3;++A)P[A]=0}return h},a.faceNormals=function(l,u,f){for(var c=l.length,h=new Array(c),v=f===void 0?s:f,d=0;d<c;++d){for(var _=l[d],T=new Array(3),p=0;p<3;++p)T[p]=u[_[p]];for(var M=new Array(3),b=new Array(3),p=0;p<3;++p)M[p]=T[1][p]-T[0][p],b[p]=T[2][p]-T[0][p];for(var w=new Array(3),k=0,p=0;p<3;++p){var x=(p+1)%3,E=(p+2)%3;w[p]=M[x]*b[E]-M[E]*b[x],k+=w[p]*w[p]}k>v?k=1/Math.sqrt(k):k=0;for(var p=0;p<3;++p)w[p]*=k;h[d]=w}return h}},4081:function(n){"use strict";n.exports=a;function a(o,s,l,u,f,c,h,v,d,_){var T=s+c+_;if(p>0){var p=Math.sqrt(T+1);o[0]=.5*(h-d)/p,o[1]=.5*(v-u)/p,o[2]=.5*(l-c)/p,o[3]=.5*p}else{var M=Math.max(s,c,_),p=Math.sqrt(2*M-T+1);s>=M?(o[0]=.5*p,o[1]=.5*(f+l)/p,o[2]=.5*(v+u)/p,o[3]=.5*(h-d)/p):c>=M?(o[0]=.5*(l+f)/p,o[1]=.5*p,o[2]=.5*(d+h)/p,o[3]=.5*(v-u)/p):(o[0]=.5*(u+v)/p,o[1]=.5*(h+d)/p,o[2]=.5*p,o[3]=.5*(l-f)/p)}return o}},9977:function(n,a,o){"use strict";n.exports=p;var s=o(9215),l=o(6582),u=o(7399),f=o(7608),c=o(4081);function h(M,b,w){return Math.sqrt(Math.pow(M,2)+Math.pow(b,2)+Math.pow(w,2))}function v(M,b,w,k){return Math.sqrt(Math.pow(M,2)+Math.pow(b,2)+Math.pow(w,2)+Math.pow(k,2))}function d(M,b){var w=b[0],k=b[1],x=b[2],E=b[3],S=v(w,k,x,E);S>1e-6?(M[0]=w/S,M[1]=k/S,M[2]=x/S,M[3]=E/S):(M[0]=M[1]=M[2]=0,M[3]=1)}function _(M,b,w){this.radius=s([w]),this.center=s(b),this.rotation=s(M),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var T=_.prototype;T.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},T.recalcMatrix=function(M){this.radius.curve(M),this.center.curve(M),this.rotation.curve(M);var b=this.computedRotation;d(b,b);var w=this.computedMatrix;u(w,b);var k=this.computedCenter,x=this.computedEye,E=this.computedUp,S=Math.exp(this.computedRadius[0]);x[0]=k[0]+S*w[2],x[1]=k[1]+S*w[6],x[2]=k[2]+S*w[10],E[0]=w[1],E[1]=w[5],E[2]=w[9];for(var g=0;g<3;++g){for(var C=0,A=0;A<3;++A)C+=w[g+4*A]*x[A];w[12+g]=-C}},T.getMatrix=function(M,b){this.recalcMatrix(M);var w=this.computedMatrix;if(b){for(var k=0;k<16;++k)b[k]=w[k];return b}return w},T.idle=function(M){this.center.idle(M),this.radius.idle(M),this.rotation.idle(M)},T.flush=function(M){this.center.flush(M),this.radius.flush(M),this.rotation.flush(M)},T.pan=function(M,b,w,k){b=b||0,w=w||0,k=k||0,this.recalcMatrix(M);var x=this.computedMatrix,E=x[1],S=x[5],g=x[9],C=h(E,S,g);E/=C,S/=C,g/=C;var A=x[0],P=x[4],D=x[8],z=A*E+P*S+D*g;A-=E*z,P-=S*z,D-=g*z;var O=h(A,P,D);A/=O,P/=O,D/=O;var V=x[2],B=x[6],F=x[10],N=V*E+B*S+F*g,Z=V*A+B*P+F*D;V-=N*E+Z*A,B-=N*S+Z*P,F-=N*g+Z*D;var J=h(V,B,F);V/=J,B/=J,F/=J;var re=A*b+E*w,ue=P*b+S*w,fe=D*b+g*w;this.center.move(M,re,ue,fe);var K=Math.exp(this.computedRadius[0]);K=Math.max(1e-4,K+k),this.radius.set(M,Math.log(K))},T.rotate=function(M,b,w,k){this.recalcMatrix(M),b=b||0,w=w||0;var x=this.computedMatrix,E=x[0],S=x[4],g=x[8],C=x[1],A=x[5],P=x[9],D=x[2],z=x[6],O=x[10],V=b*E+w*C,B=b*S+w*A,F=b*g+w*P,N=-(z*F-O*B),Z=-(O*V-D*F),J=-(D*B-z*V),re=Math.sqrt(Math.max(0,1-Math.pow(N,2)-Math.pow(Z,2)-Math.pow(J,2))),ue=v(N,Z,J,re);ue>1e-6?(N/=ue,Z/=ue,J/=ue,re/=ue):(N=Z=J=0,re=1);var fe=this.computedRotation,K=fe[0],X=fe[1],ae=fe[2],oe=fe[3],me=K*re+oe*N+X*J-ae*Z,xe=X*re+oe*Z+ae*N-K*J,ce=ae*re+oe*J+K*Z-X*N,ie=oe*re-K*N-X*Z-ae*J;if(k){N=D,Z=z,J=O;var ge=Math.sin(k)/h(N,Z,J);N*=ge,Z*=ge,J*=ge,re=Math.cos(b),me=me*re+ie*N+xe*J-ce*Z,xe=xe*re+ie*Z+ce*N-me*J,ce=ce*re+ie*J+me*Z-xe*N,ie=ie*re-me*N-xe*Z-ce*J}var le=v(me,xe,ce,ie);le>1e-6?(me/=le,xe/=le,ce/=le,ie/=le):(me=xe=ce=0,ie=1),this.rotation.set(M,me,xe,ce,ie)},T.lookAt=function(M,b,w,k){this.recalcMatrix(M),w=w||this.computedCenter,b=b||this.computedEye,k=k||this.computedUp;var x=this.computedMatrix;l(x,b,w,k);var E=this.computedRotation;c(E,x[0],x[1],x[2],x[4],x[5],x[6],x[8],x[9],x[10]),d(E,E),this.rotation.set(M,E[0],E[1],E[2],E[3]);for(var S=0,g=0;g<3;++g)S+=Math.pow(w[g]-b[g],2);this.radius.set(M,.5*Math.log(Math.max(S,1e-6))),this.center.set(M,w[0],w[1],w[2])},T.translate=function(M,b,w,k){this.center.move(M,b||0,w||0,k||0)},T.setMatrix=function(M,b){var w=this.computedRotation;c(w,b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]),d(w,w),this.rotation.set(M,w[0],w[1],w[2],w[3]);var k=this.computedMatrix;f(k,b);var x=k[15];if(Math.abs(x)>1e-6){var E=k[12]/x,S=k[13]/x,g=k[14]/x;this.recalcMatrix(M);var C=Math.exp(this.computedRadius[0]);this.center.set(M,E-k[2]*C,S-k[6]*C,g-k[10]*C),this.radius.idle(M)}else this.center.idle(M),this.radius.idle(M)},T.setDistance=function(M,b){b>0&&this.radius.set(M,Math.log(b))},T.setDistanceLimits=function(M,b){M>0?M=Math.log(M):M=-1/0,b>0?b=Math.log(b):b=1/0,b=Math.max(b,M),this.radius.bounds[0][0]=M,this.radius.bounds[1][0]=b},T.getDistanceLimits=function(M){var b=this.radius.bounds;return M?(M[0]=Math.exp(b[0][0]),M[1]=Math.exp(b[1][0]),M):[Math.exp(b[0][0]),Math.exp(b[1][0])]},T.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},T.fromJSON=function(M){var b=this.lastT(),w=M.center;w&&this.center.set(b,w[0],w[1],w[2]);var k=M.rotation;k&&this.rotation.set(b,k[0],k[1],k[2],k[3]);var x=M.distance;x&&x>0&&this.radius.set(b,Math.log(x)),this.setDistanceLimits(M.zoomMin,M.zoomMax)};function p(M){M=M||{};var b=M.center||[0,0,0],w=M.rotation||[0,0,0,1],k=M.radius||1;b=[].slice.call(b,0,3),w=[].slice.call(w,0,4),d(w,w);var x=new _(w,b,Math.log(k));return x.setDistanceLimits(M.zoomMin,M.zoomMax),("eye"in M||"up"in M)&&x.lookAt(0,M.eye,M.center,M.up),x}},1371:function(n,a,o){"use strict";var s=o(3233);n.exports=function(u,f,c){return c=typeof c!="undefined"?c+"":" ",s(c,f)+u}},3202:function(n){n.exports=function(o,s){s||(s=[0,""]),o=String(o);var l=parseFloat(o,10);return s[0]=l,s[1]=o.match(/[\d.\-\+]*\s*(.*)/)[1]||"",s}},3088:function(n,a,o){"use strict";n.exports=l;var s=o(3140);function l(u,f){for(var c=f.length|0,h=u.length,v=[new Array(c),new Array(c)],d=0;d<c;++d)v[0][d]=[],v[1][d]=[];for(var d=0;d<h;++d){var _=u[d];v[0][_[0]].push(_),v[1][_[1]].push(_)}for(var T=[],d=0;d<c;++d)v[0][d].length+v[1][d].length===0&&T.push([d]);function p(g,C){var A=v[C][g[C]];A.splice(A.indexOf(g),1)}function M(g,C,A){for(var P,D,z,O=0;O<2;++O)if(v[O][C].length>0){P=v[O][C][0],z=O;break}D=P[z^1];for(var V=0;V<2;++V)for(var B=v[V][C],F=0;F<B.length;++F){var N=B[F],Z=N[V^1],J=s(f[g],f[C],f[D],f[Z]);J>0&&(P=N,D=Z,z=V)}return A||P&&p(P,z),D}function b(g,C){var A=v[C][g][0],P=[g];p(A,C);for(var D=A[C^1],z=C;;){for(;D!==g;)P.push(D),D=M(P[P.length-2],D,!1);if(v[0][g].length+v[1][g].length===0)break;var O=P[P.length-1],V=g,B=P[1],F=M(O,V,!0);if(s(f[O],f[V],f[B],f[F])<0)break;P.push(g),D=M(O,V)}return P}function w(g,C){return C[1]===C[C.length-1]}for(var d=0;d<c;++d)for(var k=0;k<2;++k){for(var x=[];v[k][d].length>0;){var E=v[0][d].length,S=b(d,k);w(x,S)?x.push.apply(x,S):(x.length>0&&T.push(x),x=S)}x.length>0&&T.push(x)}return T}},5609:function(n,a,o){"use strict";n.exports=l;var s=o(3134);function l(u,f){for(var c=s(u,f.length),h=new Array(f.length),v=new Array(f.length),d=[],_=0;_<f.length;++_){var T=c[_].length;v[_]=T,h[_]=!0,T<=1&&d.push(_)}for(;d.length>0;){var p=d.pop();h[p]=!1;for(var M=c[p],_=0;_<M.length;++_){var b=M[_];--v[b]===0&&d.push(b)}}for(var w=new Array(f.length),k=[],_=0;_<f.length;++_)if(h[_]){var p=k.length;w[_]=p,k.push(f[_])}else w[_]=-1;for(var x=[],_=0;_<u.length;++_){var E=u[_];h[E[0]]&&h[E[1]]&&x.push([w[E[0]],w[E[1]]])}return[x,k]}},2095:function(n,a,o){"use strict";n.exports=T;var s=o(3134),l=o(3088),u=o(5085),f=o(5250),c=o(8210),h=o(1682),v=o(5609);function d(p,M){for(var b=new Array(p),w=0;w<p;++w)b[w]=M;return b}function _(p){for(var M=new Array(p),b=0;b<p;++b)M[b]=[];return M}function T(p,M){var ge=v(p,M);p=ge[0],M=ge[1];for(var b=M.length,w=p.length,k=s(p,M.length),x=0;x<b;++x)if(k[x].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var E=l(p,M);function S(Ie){for(var ut=Ie.length,ft=[0],je=0;je<ut;++je){var _t=M[Ie[je]],Bt=M[Ie[(je+1)%ut]],Lt=f(-_t[0],_t[1]),Me=f(-_t[0],Bt[1]),Ze=f(Bt[0],_t[1]),dt=f(Bt[0],Bt[1]);ft=c(ft,c(c(Lt,Me),c(Ze,dt)))}return ft[ft.length-1]>0}E=E.filter(S);for(var g=E.length,C=new Array(g),A=new Array(g),x=0;x<g;++x){C[x]=x;var P=new Array(g),D=E[x].map(function(ut){return M[ut]}),z=u([D]),O=0;e:for(var V=0;V<g;++V)if(P[V]=0,x!==V){for(var B=E[V],F=B.length,N=0;N<F;++N){var Z=z(M[B[N]]);if(Z!==0){Z<0&&(P[V]=1,O+=1);continue e}}P[V]=1,O+=1}A[x]=[O,x,P]}A.sort(function(Ie,ut){return ut[0]-Ie[0]});for(var x=0;x<g;++x)for(var P=A[x],J=P[1],re=P[2],V=0;V<g;++V)re[V]&&(C[V]=J);for(var ue=_(g),x=0;x<g;++x)ue[x].push(C[x]),ue[C[x]].push(x);for(var fe={},K=d(b,!1),x=0;x<g;++x)for(var B=E[x],F=B.length,V=0;V<F;++V){var X=B[V],ae=B[(V+1)%F],oe=Math.min(X,ae)+":"+Math.max(X,ae);if(oe in fe){var me=fe[oe];ue[me].push(x),ue[x].push(me),K[X]=K[ae]=!0}else fe[oe]=x}function xe(Ie){for(var ut=Ie.length,ft=0;ft<ut;++ft)if(!K[Ie[ft]])return!1;return!0}for(var ce=[],ie=d(g,-1),x=0;x<g;++x)C[x]===x&&!xe(E[x])?(ce.push(x),ie[x]=0):ie[x]=-1;for(var ge=[];ce.length>0;){var le=ce.pop(),we=ue[le];h(we,function(Ie,ut){return Ie-ut});var Re=we.length,qe=ie[le],et;if(qe===0){var B=E[le];et=[B]}for(var x=0;x<Re;++x){var Pe=we[x];if(!(ie[Pe]>=0)&&(ie[Pe]=qe^1,ce.push(Pe),qe===0)){var B=E[Pe];xe(B)||(B.reverse(),et.push(B))}}qe===0&&ge.push(et)}return ge}},5085:function(n,a,o){n.exports=M;var s=o(3250)[3],l=o(4209),u=o(3352),f=o(2478);function c(){return!0}function h(b){return function(w,k){var x=b[w];return x?!!x.queryPoint(k,c):!1}}function v(b){for(var w={},k=0;k<b.length;++k){var x=b[k],E=x[0][0],S=x[0][1],g=x[1][1],C=[Math.min(S,g),Math.max(S,g)];E in w?w[E].push(C):w[E]=[C]}for(var A={},P=Object.keys(w),k=0;k<P.length;++k){var D=w[P[k]];A[P[k]]=u(D)}return h(A)}function d(b,w){return function(k){var x=f.le(w,k[0]);if(x<0)return 1;var E=b[x];if(!E)if(x>0&&w[x]===k[0])E=b[x-1];else return 1;for(var S=1;E;){var g=E.key,C=s(k,g[0],g[1]);if(g[0][0]<g[1][0])if(C<0)E=E.left;else if(C>0)S=-1,E=E.right;else return 0;else if(C>0)E=E.left;else if(C<0)S=1,E=E.right;else return 0}return S}}function _(b){return 1}function T(b){return function(k){return b(k[0],k[1])?0:1}}function p(b,w){return function(x){return b(x[0],x[1])?0:w(x)}}function M(b){for(var w=b.length,k=[],x=[],E=0,S=0;S<w;++S)for(var g=b[S],C=g.length,A=C-1,P=0;P<C;A=P++){var D=g[A],z=g[P];D[0]===z[0]?x.push([D,z]):k.push([D,z])}if(k.length===0)return x.length===0?_:T(v(x));var O=l(k),V=d(O.slabs,O.coordinates);return x.length===0?V:p(v(x),V)}},9346:function(n){"use strict";var a=new Float64Array(4),o=new Float64Array(4),s=new Float64Array(4);function l(u,f,c,h,v){a.length<h.length&&(a=new Float64Array(h.length),o=new Float64Array(h.length),s=new Float64Array(h.length));for(var d=0;d<h.length;++d)a[d]=u[d]-h[d],o[d]=f[d]-u[d],s[d]=c[d]-u[d];for(var _=0,T=0,p=0,M=0,b=0,w=0,d=0;d<h.length;++d){var k=o[d],x=s[d],E=a[d];_+=k*k,T+=k*x,p+=x*x,M+=E*k,b+=E*x,w+=E*E}var S=Math.abs(_*p-T*T),g=T*b-p*M,C=T*M-_*b,A;if(g+C<=S)if(g<0)C<0&&M<0?(C=0,-M>=_?(g=1,A=_+2*M+w):(g=-M/_,A=M*g+w)):(g=0,b>=0?(C=0,A=w):-b>=p?(C=1,A=p+2*b+w):(C=-b/p,A=b*C+w));else if(C<0)C=0,M>=0?(g=0,A=w):-M>=_?(g=1,A=_+2*M+w):(g=-M/_,A=M*g+w);else{var P=1/S;g*=P,C*=P,A=g*(_*g+T*C+2*M)+C*(T*g+p*C+2*b)+w}else{var D,z,O,V;g<0?(D=T+M,z=p+b,z>D?(O=z-D,V=_-2*T+p,O>=V?(g=1,C=0,A=_+2*M+w):(g=O/V,C=1-g,A=g*(_*g+T*C+2*M)+C*(T*g+p*C+2*b)+w)):(g=0,z<=0?(C=1,A=p+2*b+w):b>=0?(C=0,A=w):(C=-b/p,A=b*C+w))):C<0?(D=T+b,z=_+M,z>D?(O=z-D,V=_-2*T+p,O>=V?(C=1,g=0,A=p+2*b+w):(C=O/V,g=1-C,A=g*(_*g+T*C+2*M)+C*(T*g+p*C+2*b)+w)):(C=0,z<=0?(g=1,A=_+2*M+w):M>=0?(g=0,A=w):(g=-M/_,A=M*g+w))):(O=p+b-T-M,O<=0?(g=0,C=1,A=p+2*b+w):(V=_-2*T+p,O>=V?(g=1,C=0,A=_+2*M+w):(g=O/V,C=1-g,A=g*(_*g+T*C+2*M)+C*(T*g+p*C+2*b)+w)))}for(var B=1-g-C,d=0;d<h.length;++d)v[d]=B*u[d]+g*f[d]+C*c[d];return A<0?0:A}n.exports=l},8648:function(n,a,o){n.exports=o(783)},2653:function(n,a,o){"use strict";var s=o(3865);n.exports=l;function l(u,f){for(var c=u.length,h=new Array(c),v=0;v<c;++v)h[v]=s(u[v],f[v]);return h}},5838:function(n,a,o){"use strict";n.exports=l;var s=o(7842);function l(u){for(var f=new Array(u.length),c=0;c<u.length;++c)f[c]=s(u[c]);return f}},8987:function(n,a,o){"use strict";var s=o(7842),l=o(6504);n.exports=u;function u(f,c){for(var h=s(c),v=f.length,d=new Array(v),_=0;_<v;++_)d[_]=l(f[_],h);return d}},544:function(n,a,o){"use strict";var s=o(5572);n.exports=l;function l(u,f){for(var c=u.length,h=new Array(c),v=0;v<c;++v)h[v]=s(u[v],f[v]);return h}},5771:function(n,a,o){"use strict";var s=o(8507),l=o(3788),u=o(2419);n.exports=f;function f(c){c.sort(l);for(var h=c.length,v=0,d=0;d<h;++d){var _=c[d],T=u(_);if(T!==0){if(v>0){var p=c[v-1];if(s(_,p)===0&&u(p)!==T){v-=1;continue}}c[v++]=_}}return c.length=v,c}},3233:function(n){"use strict";var a="",o;n.exports=s;function s(l,u){if(typeof l!="string")throw new TypeError("expected a string");if(u===1)return l;if(u===2)return l+l;var f=l.length*u;if(o!==l||typeof o=="undefined")o=l,a="";else if(a.length>=f)return a.substr(0,f);for(;f>a.length&&u>1;)u&1&&(a+=l),u>>=1,l+=l;return a+=l,a=a.substr(0,f),a}},3025:function(n,a,o){n.exports=o.g.performance&&o.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},7004:function(n){"use strict";n.exports=a;function a(o){for(var s=o.length,l=o[o.length-1],u=s,f=s-2;f>=0;--f){var c=l,h=o[f];l=c+h;var v=l-c,d=h-v;d&&(o[--u]=l,l=d)}for(var _=0,f=u;f<s;++f){var c=o[f],h=l;l=c+h;var v=l-c,d=h-v;d&&(o[_++]=d)}return o[_++]=l,o.length=_,o}},2962:function(n,a,o){"use strict";var s=o(5250),l=o(8210),u=o(3012),f=o(7004),c=6;function h(w,k,x,E){return function(g){return E(w(x(g[0][0],g[1][1]),x(-g[0][1],g[1][0])))}}function v(w,k,x,E){return function(g){return E(w(k(w(x(g[1][1],g[2][2]),x(-g[1][2],g[2][1])),g[0][0]),w(k(w(x(g[1][0],g[2][2]),x(-g[1][2],g[2][0])),-g[0][1]),k(w(x(g[1][0],g[2][1]),x(-g[1][1],g[2][0])),g[0][2]))))}}function d(w,k,x,E){return function(g){return E(w(w(k(w(k(w(x(g[2][2],g[3][3]),x(-g[2][3],g[3][2])),g[1][1]),w(k(w(x(g[2][1],g[3][3]),x(-g[2][3],g[3][1])),-g[1][2]),k(w(x(g[2][1],g[3][2]),x(-g[2][2],g[3][1])),g[1][3]))),g[0][0]),k(w(k(w(x(g[2][2],g[3][3]),x(-g[2][3],g[3][2])),g[1][0]),w(k(w(x(g[2][0],g[3][3]),x(-g[2][3],g[3][0])),-g[1][2]),k(w(x(g[2][0],g[3][2]),x(-g[2][2],g[3][0])),g[1][3]))),-g[0][1])),w(k(w(k(w(x(g[2][1],g[3][3]),x(-g[2][3],g[3][1])),g[1][0]),w(k(w(x(g[2][0],g[3][3]),x(-g[2][3],g[3][0])),-g[1][1]),k(w(x(g[2][0],g[3][1]),x(-g[2][1],g[3][0])),g[1][3]))),g[0][2]),k(w(k(w(x(g[2][1],g[3][2]),x(-g[2][2],g[3][1])),g[1][0]),w(k(w(x(g[2][0],g[3][2]),x(-g[2][2],g[3][0])),-g[1][1]),k(w(x(g[2][0],g[3][1]),x(-g[2][1],g[3][0])),g[1][2]))),-g[0][3]))))}}function _(w,k,x,E){return function(g){return E(w(w(k(w(w(k(w(k(w(x(g[3][3],g[4][4]),x(-g[3][4],g[4][3])),g[2][2]),w(k(w(x(g[3][2],g[4][4]),x(-g[3][4],g[4][2])),-g[2][3]),k(w(x(g[3][2],g[4][3]),x(-g[3][3],g[4][2])),g[2][4]))),g[1][1]),k(w(k(w(x(g[3][3],g[4][4]),x(-g[3][4],g[4][3])),g[2][1]),w(k(w(x(g[3][1],g[4][4]),x(-g[3][4],g[4][1])),-g[2][3]),k(w(x(g[3][1],g[4][3]),x(-g[3][3],g[4][1])),g[2][4]))),-g[1][2])),w(k(w(k(w(x(g[3][2],g[4][4]),x(-g[3][4],g[4][2])),g[2][1]),w(k(w(x(g[3][1],g[4][4]),x(-g[3][4],g[4][1])),-g[2][2]),k(w(x(g[3][1],g[4][2]),x(-g[3][2],g[4][1])),g[2][4]))),g[1][3]),k(w(k(w(x(g[3][2],g[4][3]),x(-g[3][3],g[4][2])),g[2][1]),w(k(w(x(g[3][1],g[4][3]),x(-g[3][3],g[4][1])),-g[2][2]),k(w(x(g[3][1],g[4][2]),x(-g[3][2],g[4][1])),g[2][3]))),-g[1][4]))),g[0][0]),k(w(w(k(w(k(w(x(g[3][3],g[4][4]),x(-g[3][4],g[4][3])),g[2][2]),w(k(w(x(g[3][2],g[4][4]),x(-g[3][4],g[4][2])),-g[2][3]),k(w(x(g[3][2],g[4][3]),x(-g[3][3],g[4][2])),g[2][4]))),g[1][0]),k(w(k(w(x(g[3][3],g[4][4]),x(-g[3][4],g[4][3])),g[2][0]),w(k(w(x(g[3][0],g[4][4]),x(-g[3][4],g[4][0])),-g[2][3]),k(w(x(g[3][0],g[4][3]),x(-g[3][3],g[4][0])),g[2][4]))),-g[1][2])),w(k(w(k(w(x(g[3][2],g[4][4]),x(-g[3][4],g[4][2])),g[2][0]),w(k(w(x(g[3][0],g[4][4]),x(-g[3][4],g[4][0])),-g[2][2]),k(w(x(g[3][0],g[4][2]),x(-g[3][2],g[4][0])),g[2][4]))),g[1][3]),k(w(k(w(x(g[3][2],g[4][3]),x(-g[3][3],g[4][2])),g[2][0]),w(k(w(x(g[3][0],g[4][3]),x(-g[3][3],g[4][0])),-g[2][2]),k(w(x(g[3][0],g[4][2]),x(-g[3][2],g[4][0])),g[2][3]))),-g[1][4]))),-g[0][1])),w(k(w(w(k(w(k(w(x(g[3][3],g[4][4]),x(-g[3][4],g[4][3])),g[2][1]),w(k(w(x(g[3][1],g[4][4]),x(-g[3][4],g[4][1])),-g[2][3]),k(w(x(g[3][1],g[4][3]),x(-g[3][3],g[4][1])),g[2][4]))),g[1][0]),k(w(k(w(x(g[3][3],g[4][4]),x(-g[3][4],g[4][3])),g[2][0]),w(k(w(x(g[3][0],g[4][4]),x(-g[3][4],g[4][0])),-g[2][3]),k(w(x(g[3][0],g[4][3]),x(-g[3][3],g[4][0])),g[2][4]))),-g[1][1])),w(k(w(k(w(x(g[3][1],g[4][4]),x(-g[3][4],g[4][1])),g[2][0]),w(k(w(x(g[3][0],g[4][4]),x(-g[3][4],g[4][0])),-g[2][1]),k(w(x(g[3][0],g[4][1]),x(-g[3][1],g[4][0])),g[2][4]))),g[1][3]),k(w(k(w(x(g[3][1],g[4][3]),x(-g[3][3],g[4][1])),g[2][0]),w(k(w(x(g[3][0],g[4][3]),x(-g[3][3],g[4][0])),-g[2][1]),k(w(x(g[3][0],g[4][1]),x(-g[3][1],g[4][0])),g[2][3]))),-g[1][4]))),g[0][2]),w(k(w(w(k(w(k(w(x(g[3][2],g[4][4]),x(-g[3][4],g[4][2])),g[2][1]),w(k(w(x(g[3][1],g[4][4]),x(-g[3][4],g[4][1])),-g[2][2]),k(w(x(g[3][1],g[4][2]),x(-g[3][2],g[4][1])),g[2][4]))),g[1][0]),k(w(k(w(x(g[3][2],g[4][4]),x(-g[3][4],g[4][2])),g[2][0]),w(k(w(x(g[3][0],g[4][4]),x(-g[3][4],g[4][0])),-g[2][2]),k(w(x(g[3][0],g[4][2]),x(-g[3][2],g[4][0])),g[2][4]))),-g[1][1])),w(k(w(k(w(x(g[3][1],g[4][4]),x(-g[3][4],g[4][1])),g[2][0]),w(k(w(x(g[3][0],g[4][4]),x(-g[3][4],g[4][0])),-g[2][1]),k(w(x(g[3][0],g[4][1]),x(-g[3][1],g[4][0])),g[2][4]))),g[1][2]),k(w(k(w(x(g[3][1],g[4][2]),x(-g[3][2],g[4][1])),g[2][0]),w(k(w(x(g[3][0],g[4][2]),x(-g[3][2],g[4][0])),-g[2][1]),k(w(x(g[3][0],g[4][1]),x(-g[3][1],g[4][0])),g[2][2]))),-g[1][4]))),-g[0][3]),k(w(w(k(w(k(w(x(g[3][2],g[4][3]),x(-g[3][3],g[4][2])),g[2][1]),w(k(w(x(g[3][1],g[4][3]),x(-g[3][3],g[4][1])),-g[2][2]),k(w(x(g[3][1],g[4][2]),x(-g[3][2],g[4][1])),g[2][3]))),g[1][0]),k(w(k(w(x(g[3][2],g[4][3]),x(-g[3][3],g[4][2])),g[2][0]),w(k(w(x(g[3][0],g[4][3]),x(-g[3][3],g[4][0])),-g[2][2]),k(w(x(g[3][0],g[4][2]),x(-g[3][2],g[4][0])),g[2][3]))),-g[1][1])),w(k(w(k(w(x(g[3][1],g[4][3]),x(-g[3][3],g[4][1])),g[2][0]),w(k(w(x(g[3][0],g[4][3]),x(-g[3][3],g[4][0])),-g[2][1]),k(w(x(g[3][0],g[4][1]),x(-g[3][1],g[4][0])),g[2][3]))),g[1][2]),k(w(k(w(x(g[3][1],g[4][2]),x(-g[3][2],g[4][1])),g[2][0]),w(k(w(x(g[3][0],g[4][2]),x(-g[3][2],g[4][0])),-g[2][1]),k(w(x(g[3][0],g[4][1]),x(-g[3][1],g[4][0])),g[2][2]))),-g[1][3]))),g[0][4])))))}}function T(w){var k=w===2?h:w===3?v:w===4?d:w===5?_:void 0;return k(l,u,s,f)}var p=[function(){return[0]},function(k){return[k[0][0]]}];function M(w,k,x,E,S,g,C,A){return function(D){switch(D.length){case 0:return w(D);case 1:return k(D);case 2:return x(D);case 3:return E(D);case 4:return S(D);case 5:return g(D)}var z=C[D.length];return z||(z=C[D.length]=A(D.length)),z(D)}}function b(){for(;p.length<c;)p.push(T(p.length));n.exports=M.apply(void 0,p.concat([p,T]));for(var w=0;w<p.length;++w)n.exports[w]=p[w]}b()},1944:function(n,a,o){"use strict";var s=o(5250),l=o(8210);n.exports=u;function u(f,c){for(var h=s(f[0],c[0]),v=1;v<f.length;++v)h=l(h,s(f[v],c[v]));return h}},2646:function(n,a,o){"use strict";var s=o(5250),l=o(8210),u=o(8545),f=o(3012),c=6;function h(S){var g=S===3?T:S===4?p:S===5?M:b;return g(l,u,s,f)}function v(){return 0}function d(){return 0}function _(){return 0}function T(S,g,C,A){function P(D,z,O){var V=C(D[0],D[0]),B=A(V,z[0]),F=A(V,O[0]),N=C(z[0],z[0]),Z=A(N,D[0]),J=A(N,O[0]),re=C(O[0],O[0]),ue=A(re,D[0]),fe=A(re,z[0]),K=S(g(fe,J),g(Z,B)),X=g(ue,F),ae=g(K,X);return ae[ae.length-1]}return P}function p(S,g,C,A){function P(D,z,O,V){var B=S(C(D[0],D[0]),C(D[1],D[1])),F=A(B,z[0]),N=A(B,O[0]),Z=A(B,V[0]),J=S(C(z[0],z[0]),C(z[1],z[1])),re=A(J,D[0]),ue=A(J,O[0]),fe=A(J,V[0]),K=S(C(O[0],O[0]),C(O[1],O[1])),X=A(K,D[0]),ae=A(K,z[0]),oe=A(K,V[0]),me=S(C(V[0],V[0]),C(V[1],V[1])),xe=A(me,D[0]),ce=A(me,z[0]),ie=A(me,O[0]),ge=S(S(A(g(ie,oe),z[1]),S(A(g(ce,fe),-O[1]),A(g(ae,ue),V[1]))),S(A(g(ce,fe),D[1]),S(A(g(xe,Z),-z[1]),A(g(re,F),V[1])))),le=S(S(A(g(ie,oe),D[1]),S(A(g(xe,Z),-O[1]),A(g(X,N),V[1]))),S(A(g(ae,ue),D[1]),S(A(g(X,N),-z[1]),A(g(re,F),O[1])))),we=g(ge,le);return we[we.length-1]}return P}function M(S,g,C,A){function P(D,z,O,V,B){var F=S(C(D[0],D[0]),S(C(D[1],D[1]),C(D[2],D[2]))),N=A(F,z[0]),Z=A(F,O[0]),J=A(F,V[0]),re=A(F,B[0]),ue=S(C(z[0],z[0]),S(C(z[1],z[1]),C(z[2],z[2]))),fe=A(ue,D[0]),K=A(ue,O[0]),X=A(ue,V[0]),ae=A(ue,B[0]),oe=S(C(O[0],O[0]),S(C(O[1],O[1]),C(O[2],O[2]))),me=A(oe,D[0]),xe=A(oe,z[0]),ce=A(oe,V[0]),ie=A(oe,B[0]),ge=S(C(V[0],V[0]),S(C(V[1],V[1]),C(V[2],V[2]))),le=A(ge,D[0]),we=A(ge,z[0]),Re=A(ge,O[0]),qe=A(ge,B[0]),et=S(C(B[0],B[0]),S(C(B[1],B[1]),C(B[2],B[2]))),Pe=A(et,D[0]),Ie=A(et,z[0]),ut=A(et,O[0]),ft=A(et,V[0]),je=S(S(S(A(S(A(g(ft,qe),O[1]),S(A(g(ut,ie),-V[1]),A(g(Re,ce),B[1]))),z[2]),S(A(S(A(g(ft,qe),z[1]),S(A(g(Ie,ae),-V[1]),A(g(we,X),B[1]))),-O[2]),A(S(A(g(ut,ie),z[1]),S(A(g(Ie,ae),-O[1]),A(g(xe,K),B[1]))),V[2]))),S(A(S(A(g(Re,ce),z[1]),S(A(g(we,X),-O[1]),A(g(xe,K),V[1]))),-B[2]),S(A(S(A(g(ft,qe),z[1]),S(A(g(Ie,ae),-V[1]),A(g(we,X),B[1]))),D[2]),A(S(A(g(ft,qe),D[1]),S(A(g(Pe,re),-V[1]),A(g(le,J),B[1]))),-z[2])))),S(S(A(S(A(g(Ie,ae),D[1]),S(A(g(Pe,re),-z[1]),A(g(fe,N),B[1]))),V[2]),S(A(S(A(g(we,X),D[1]),S(A(g(le,J),-z[1]),A(g(fe,N),V[1]))),-B[2]),A(S(A(g(Re,ce),z[1]),S(A(g(we,X),-O[1]),A(g(xe,K),V[1]))),D[2]))),S(A(S(A(g(Re,ce),D[1]),S(A(g(le,J),-O[1]),A(g(me,Z),V[1]))),-z[2]),S(A(S(A(g(we,X),D[1]),S(A(g(le,J),-z[1]),A(g(fe,N),V[1]))),O[2]),A(S(A(g(xe,K),D[1]),S(A(g(me,Z),-z[1]),A(g(fe,N),O[1]))),-V[2]))))),_t=S(S(S(A(S(A(g(ft,qe),O[1]),S(A(g(ut,ie),-V[1]),A(g(Re,ce),B[1]))),D[2]),A(S(A(g(ft,qe),D[1]),S(A(g(Pe,re),-V[1]),A(g(le,J),B[1]))),-O[2])),S(A(S(A(g(ut,ie),D[1]),S(A(g(Pe,re),-O[1]),A(g(me,Z),B[1]))),V[2]),A(S(A(g(Re,ce),D[1]),S(A(g(le,J),-O[1]),A(g(me,Z),V[1]))),-B[2]))),S(S(A(S(A(g(ut,ie),z[1]),S(A(g(Ie,ae),-O[1]),A(g(xe,K),B[1]))),D[2]),A(S(A(g(ut,ie),D[1]),S(A(g(Pe,re),-O[1]),A(g(me,Z),B[1]))),-z[2])),S(A(S(A(g(Ie,ae),D[1]),S(A(g(Pe,re),-z[1]),A(g(fe,N),B[1]))),O[2]),A(S(A(g(xe,K),D[1]),S(A(g(me,Z),-z[1]),A(g(fe,N),O[1]))),-B[2])))),Bt=g(je,_t);return Bt[Bt.length-1]}return P}function b(S,g,C,A){function P(D,z,O,V,B,F){var N=S(S(C(D[0],D[0]),C(D[1],D[1])),S(C(D[2],D[2]),C(D[3],D[3]))),Z=A(N,z[0]),J=A(N,O[0]),re=A(N,V[0]),ue=A(N,B[0]),fe=A(N,F[0]),K=S(S(C(z[0],z[0]),C(z[1],z[1])),S(C(z[2],z[2]),C(z[3],z[3]))),X=A(K,D[0]),ae=A(K,O[0]),oe=A(K,V[0]),me=A(K,B[0]),xe=A(K,F[0]),ce=S(S(C(O[0],O[0]),C(O[1],O[1])),S(C(O[2],O[2]),C(O[3],O[3]))),ie=A(ce,D[0]),ge=A(ce,z[0]),le=A(ce,V[0]),we=A(ce,B[0]),Re=A(ce,F[0]),qe=S(S(C(V[0],V[0]),C(V[1],V[1])),S(C(V[2],V[2]),C(V[3],V[3]))),et=A(qe,D[0]),Pe=A(qe,z[0]),Ie=A(qe,O[0]),ut=A(qe,B[0]),ft=A(qe,F[0]),je=S(S(C(B[0],B[0]),C(B[1],B[1])),S(C(B[2],B[2]),C(B[3],B[3]))),_t=A(je,D[0]),Bt=A(je,z[0]),Lt=A(je,O[0]),Me=A(je,V[0]),Ze=A(je,F[0]),dt=S(S(C(F[0],F[0]),C(F[1],F[1])),S(C(F[2],F[2]),C(F[3],F[3]))),it=A(dt,D[0]),vt=A(dt,z[0]),rt=A(dt,O[0]),We=A(dt,V[0]),ht=A(dt,B[0]),mt=S(S(S(A(S(S(A(S(A(g(ht,Ze),V[1]),S(A(g(We,ft),-B[1]),A(g(Me,ut),F[1]))),O[2]),A(S(A(g(ht,Ze),O[1]),S(A(g(rt,Re),-B[1]),A(g(Lt,we),F[1]))),-V[2])),S(A(S(A(g(We,ft),O[1]),S(A(g(rt,Re),-V[1]),A(g(Ie,le),F[1]))),B[2]),A(S(A(g(Me,ut),O[1]),S(A(g(Lt,we),-V[1]),A(g(Ie,le),B[1]))),-F[2]))),z[3]),S(A(S(S(A(S(A(g(ht,Ze),V[1]),S(A(g(We,ft),-B[1]),A(g(Me,ut),F[1]))),z[2]),A(S(A(g(ht,Ze),z[1]),S(A(g(vt,xe),-B[1]),A(g(Bt,me),F[1]))),-V[2])),S(A(S(A(g(We,ft),z[1]),S(A(g(vt,xe),-V[1]),A(g(Pe,oe),F[1]))),B[2]),A(S(A(g(Me,ut),z[1]),S(A(g(Bt,me),-V[1]),A(g(Pe,oe),B[1]))),-F[2]))),-O[3]),A(S(S(A(S(A(g(ht,Ze),O[1]),S(A(g(rt,Re),-B[1]),A(g(Lt,we),F[1]))),z[2]),A(S(A(g(ht,Ze),z[1]),S(A(g(vt,xe),-B[1]),A(g(Bt,me),F[1]))),-O[2])),S(A(S(A(g(rt,Re),z[1]),S(A(g(vt,xe),-O[1]),A(g(ge,ae),F[1]))),B[2]),A(S(A(g(Lt,we),z[1]),S(A(g(Bt,me),-O[1]),A(g(ge,ae),B[1]))),-F[2]))),V[3]))),S(S(A(S(S(A(S(A(g(We,ft),O[1]),S(A(g(rt,Re),-V[1]),A(g(Ie,le),F[1]))),z[2]),A(S(A(g(We,ft),z[1]),S(A(g(vt,xe),-V[1]),A(g(Pe,oe),F[1]))),-O[2])),S(A(S(A(g(rt,Re),z[1]),S(A(g(vt,xe),-O[1]),A(g(ge,ae),F[1]))),V[2]),A(S(A(g(Ie,le),z[1]),S(A(g(Pe,oe),-O[1]),A(g(ge,ae),V[1]))),-F[2]))),-B[3]),A(S(S(A(S(A(g(Me,ut),O[1]),S(A(g(Lt,we),-V[1]),A(g(Ie,le),B[1]))),z[2]),A(S(A(g(Me,ut),z[1]),S(A(g(Bt,me),-V[1]),A(g(Pe,oe),B[1]))),-O[2])),S(A(S(A(g(Lt,we),z[1]),S(A(g(Bt,me),-O[1]),A(g(ge,ae),B[1]))),V[2]),A(S(A(g(Ie,le),z[1]),S(A(g(Pe,oe),-O[1]),A(g(ge,ae),V[1]))),-B[2]))),F[3])),S(A(S(S(A(S(A(g(ht,Ze),V[1]),S(A(g(We,ft),-B[1]),A(g(Me,ut),F[1]))),z[2]),A(S(A(g(ht,Ze),z[1]),S(A(g(vt,xe),-B[1]),A(g(Bt,me),F[1]))),-V[2])),S(A(S(A(g(We,ft),z[1]),S(A(g(vt,xe),-V[1]),A(g(Pe,oe),F[1]))),B[2]),A(S(A(g(Me,ut),z[1]),S(A(g(Bt,me),-V[1]),A(g(Pe,oe),B[1]))),-F[2]))),D[3]),A(S(S(A(S(A(g(ht,Ze),V[1]),S(A(g(We,ft),-B[1]),A(g(Me,ut),F[1]))),D[2]),A(S(A(g(ht,Ze),D[1]),S(A(g(it,fe),-B[1]),A(g(_t,ue),F[1]))),-V[2])),S(A(S(A(g(We,ft),D[1]),S(A(g(it,fe),-V[1]),A(g(et,re),F[1]))),B[2]),A(S(A(g(Me,ut),D[1]),S(A(g(_t,ue),-V[1]),A(g(et,re),B[1]))),-F[2]))),-z[3])))),S(S(S(A(S(S(A(S(A(g(ht,Ze),z[1]),S(A(g(vt,xe),-B[1]),A(g(Bt,me),F[1]))),D[2]),A(S(A(g(ht,Ze),D[1]),S(A(g(it,fe),-B[1]),A(g(_t,ue),F[1]))),-z[2])),S(A(S(A(g(vt,xe),D[1]),S(A(g(it,fe),-z[1]),A(g(X,Z),F[1]))),B[2]),A(S(A(g(Bt,me),D[1]),S(A(g(_t,ue),-z[1]),A(g(X,Z),B[1]))),-F[2]))),V[3]),A(S(S(A(S(A(g(We,ft),z[1]),S(A(g(vt,xe),-V[1]),A(g(Pe,oe),F[1]))),D[2]),A(S(A(g(We,ft),D[1]),S(A(g(it,fe),-V[1]),A(g(et,re),F[1]))),-z[2])),S(A(S(A(g(vt,xe),D[1]),S(A(g(it,fe),-z[1]),A(g(X,Z),F[1]))),V[2]),A(S(A(g(Pe,oe),D[1]),S(A(g(et,re),-z[1]),A(g(X,Z),V[1]))),-F[2]))),-B[3])),S(A(S(S(A(S(A(g(Me,ut),z[1]),S(A(g(Bt,me),-V[1]),A(g(Pe,oe),B[1]))),D[2]),A(S(A(g(Me,ut),D[1]),S(A(g(_t,ue),-V[1]),A(g(et,re),B[1]))),-z[2])),S(A(S(A(g(Bt,me),D[1]),S(A(g(_t,ue),-z[1]),A(g(X,Z),B[1]))),V[2]),A(S(A(g(Pe,oe),D[1]),S(A(g(et,re),-z[1]),A(g(X,Z),V[1]))),-B[2]))),F[3]),A(S(S(A(S(A(g(We,ft),O[1]),S(A(g(rt,Re),-V[1]),A(g(Ie,le),F[1]))),z[2]),A(S(A(g(We,ft),z[1]),S(A(g(vt,xe),-V[1]),A(g(Pe,oe),F[1]))),-O[2])),S(A(S(A(g(rt,Re),z[1]),S(A(g(vt,xe),-O[1]),A(g(ge,ae),F[1]))),V[2]),A(S(A(g(Ie,le),z[1]),S(A(g(Pe,oe),-O[1]),A(g(ge,ae),V[1]))),-F[2]))),D[3]))),S(S(A(S(S(A(S(A(g(We,ft),O[1]),S(A(g(rt,Re),-V[1]),A(g(Ie,le),F[1]))),D[2]),A(S(A(g(We,ft),D[1]),S(A(g(it,fe),-V[1]),A(g(et,re),F[1]))),-O[2])),S(A(S(A(g(rt,Re),D[1]),S(A(g(it,fe),-O[1]),A(g(ie,J),F[1]))),V[2]),A(S(A(g(Ie,le),D[1]),S(A(g(et,re),-O[1]),A(g(ie,J),V[1]))),-F[2]))),-z[3]),A(S(S(A(S(A(g(We,ft),z[1]),S(A(g(vt,xe),-V[1]),A(g(Pe,oe),F[1]))),D[2]),A(S(A(g(We,ft),D[1]),S(A(g(it,fe),-V[1]),A(g(et,re),F[1]))),-z[2])),S(A(S(A(g(vt,xe),D[1]),S(A(g(it,fe),-z[1]),A(g(X,Z),F[1]))),V[2]),A(S(A(g(Pe,oe),D[1]),S(A(g(et,re),-z[1]),A(g(X,Z),V[1]))),-F[2]))),O[3])),S(A(S(S(A(S(A(g(rt,Re),z[1]),S(A(g(vt,xe),-O[1]),A(g(ge,ae),F[1]))),D[2]),A(S(A(g(rt,Re),D[1]),S(A(g(it,fe),-O[1]),A(g(ie,J),F[1]))),-z[2])),S(A(S(A(g(vt,xe),D[1]),S(A(g(it,fe),-z[1]),A(g(X,Z),F[1]))),O[2]),A(S(A(g(ge,ae),D[1]),S(A(g(ie,J),-z[1]),A(g(X,Z),O[1]))),-F[2]))),-V[3]),A(S(S(A(S(A(g(Ie,le),z[1]),S(A(g(Pe,oe),-O[1]),A(g(ge,ae),V[1]))),D[2]),A(S(A(g(Ie,le),D[1]),S(A(g(et,re),-O[1]),A(g(ie,J),V[1]))),-z[2])),S(A(S(A(g(Pe,oe),D[1]),S(A(g(et,re),-z[1]),A(g(X,Z),V[1]))),O[2]),A(S(A(g(ge,ae),D[1]),S(A(g(ie,J),-z[1]),A(g(X,Z),O[1]))),-V[2]))),F[3]))))),er=S(S(S(A(S(S(A(S(A(g(ht,Ze),V[1]),S(A(g(We,ft),-B[1]),A(g(Me,ut),F[1]))),O[2]),A(S(A(g(ht,Ze),O[1]),S(A(g(rt,Re),-B[1]),A(g(Lt,we),F[1]))),-V[2])),S(A(S(A(g(We,ft),O[1]),S(A(g(rt,Re),-V[1]),A(g(Ie,le),F[1]))),B[2]),A(S(A(g(Me,ut),O[1]),S(A(g(Lt,we),-V[1]),A(g(Ie,le),B[1]))),-F[2]))),D[3]),S(A(S(S(A(S(A(g(ht,Ze),V[1]),S(A(g(We,ft),-B[1]),A(g(Me,ut),F[1]))),D[2]),A(S(A(g(ht,Ze),D[1]),S(A(g(it,fe),-B[1]),A(g(_t,ue),F[1]))),-V[2])),S(A(S(A(g(We,ft),D[1]),S(A(g(it,fe),-V[1]),A(g(et,re),F[1]))),B[2]),A(S(A(g(Me,ut),D[1]),S(A(g(_t,ue),-V[1]),A(g(et,re),B[1]))),-F[2]))),-O[3]),A(S(S(A(S(A(g(ht,Ze),O[1]),S(A(g(rt,Re),-B[1]),A(g(Lt,we),F[1]))),D[2]),A(S(A(g(ht,Ze),D[1]),S(A(g(it,fe),-B[1]),A(g(_t,ue),F[1]))),-O[2])),S(A(S(A(g(rt,Re),D[1]),S(A(g(it,fe),-O[1]),A(g(ie,J),F[1]))),B[2]),A(S(A(g(Lt,we),D[1]),S(A(g(_t,ue),-O[1]),A(g(ie,J),B[1]))),-F[2]))),V[3]))),S(S(A(S(S(A(S(A(g(We,ft),O[1]),S(A(g(rt,Re),-V[1]),A(g(Ie,le),F[1]))),D[2]),A(S(A(g(We,ft),D[1]),S(A(g(it,fe),-V[1]),A(g(et,re),F[1]))),-O[2])),S(A(S(A(g(rt,Re),D[1]),S(A(g(it,fe),-O[1]),A(g(ie,J),F[1]))),V[2]),A(S(A(g(Ie,le),D[1]),S(A(g(et,re),-O[1]),A(g(ie,J),V[1]))),-F[2]))),-B[3]),A(S(S(A(S(A(g(Me,ut),O[1]),S(A(g(Lt,we),-V[1]),A(g(Ie,le),B[1]))),D[2]),A(S(A(g(Me,ut),D[1]),S(A(g(_t,ue),-V[1]),A(g(et,re),B[1]))),-O[2])),S(A(S(A(g(Lt,we),D[1]),S(A(g(_t,ue),-O[1]),A(g(ie,J),B[1]))),V[2]),A(S(A(g(Ie,le),D[1]),S(A(g(et,re),-O[1]),A(g(ie,J),V[1]))),-B[2]))),F[3])),S(A(S(S(A(S(A(g(ht,Ze),O[1]),S(A(g(rt,Re),-B[1]),A(g(Lt,we),F[1]))),z[2]),A(S(A(g(ht,Ze),z[1]),S(A(g(vt,xe),-B[1]),A(g(Bt,me),F[1]))),-O[2])),S(A(S(A(g(rt,Re),z[1]),S(A(g(vt,xe),-O[1]),A(g(ge,ae),F[1]))),B[2]),A(S(A(g(Lt,we),z[1]),S(A(g(Bt,me),-O[1]),A(g(ge,ae),B[1]))),-F[2]))),D[3]),A(S(S(A(S(A(g(ht,Ze),O[1]),S(A(g(rt,Re),-B[1]),A(g(Lt,we),F[1]))),D[2]),A(S(A(g(ht,Ze),D[1]),S(A(g(it,fe),-B[1]),A(g(_t,ue),F[1]))),-O[2])),S(A(S(A(g(rt,Re),D[1]),S(A(g(it,fe),-O[1]),A(g(ie,J),F[1]))),B[2]),A(S(A(g(Lt,we),D[1]),S(A(g(_t,ue),-O[1]),A(g(ie,J),B[1]))),-F[2]))),-z[3])))),S(S(S(A(S(S(A(S(A(g(ht,Ze),z[1]),S(A(g(vt,xe),-B[1]),A(g(Bt,me),F[1]))),D[2]),A(S(A(g(ht,Ze),D[1]),S(A(g(it,fe),-B[1]),A(g(_t,ue),F[1]))),-z[2])),S(A(S(A(g(vt,xe),D[1]),S(A(g(it,fe),-z[1]),A(g(X,Z),F[1]))),B[2]),A(S(A(g(Bt,me),D[1]),S(A(g(_t,ue),-z[1]),A(g(X,Z),B[1]))),-F[2]))),O[3]),A(S(S(A(S(A(g(rt,Re),z[1]),S(A(g(vt,xe),-O[1]),A(g(ge,ae),F[1]))),D[2]),A(S(A(g(rt,Re),D[1]),S(A(g(it,fe),-O[1]),A(g(ie,J),F[1]))),-z[2])),S(A(S(A(g(vt,xe),D[1]),S(A(g(it,fe),-z[1]),A(g(X,Z),F[1]))),O[2]),A(S(A(g(ge,ae),D[1]),S(A(g(ie,J),-z[1]),A(g(X,Z),O[1]))),-F[2]))),-B[3])),S(A(S(S(A(S(A(g(Lt,we),z[1]),S(A(g(Bt,me),-O[1]),A(g(ge,ae),B[1]))),D[2]),A(S(A(g(Lt,we),D[1]),S(A(g(_t,ue),-O[1]),A(g(ie,J),B[1]))),-z[2])),S(A(S(A(g(Bt,me),D[1]),S(A(g(_t,ue),-z[1]),A(g(X,Z),B[1]))),O[2]),A(S(A(g(ge,ae),D[1]),S(A(g(ie,J),-z[1]),A(g(X,Z),O[1]))),-B[2]))),F[3]),A(S(S(A(S(A(g(Me,ut),O[1]),S(A(g(Lt,we),-V[1]),A(g(Ie,le),B[1]))),z[2]),A(S(A(g(Me,ut),z[1]),S(A(g(Bt,me),-V[1]),A(g(Pe,oe),B[1]))),-O[2])),S(A(S(A(g(Lt,we),z[1]),S(A(g(Bt,me),-O[1]),A(g(ge,ae),B[1]))),V[2]),A(S(A(g(Ie,le),z[1]),S(A(g(Pe,oe),-O[1]),A(g(ge,ae),V[1]))),-B[2]))),D[3]))),S(S(A(S(S(A(S(A(g(Me,ut),O[1]),S(A(g(Lt,we),-V[1]),A(g(Ie,le),B[1]))),D[2]),A(S(A(g(Me,ut),D[1]),S(A(g(_t,ue),-V[1]),A(g(et,re),B[1]))),-O[2])),S(A(S(A(g(Lt,we),D[1]),S(A(g(_t,ue),-O[1]),A(g(ie,J),B[1]))),V[2]),A(S(A(g(Ie,le),D[1]),S(A(g(et,re),-O[1]),A(g(ie,J),V[1]))),-B[2]))),-z[3]),A(S(S(A(S(A(g(Me,ut),z[1]),S(A(g(Bt,me),-V[1]),A(g(Pe,oe),B[1]))),D[2]),A(S(A(g(Me,ut),D[1]),S(A(g(_t,ue),-V[1]),A(g(et,re),B[1]))),-z[2])),S(A(S(A(g(Bt,me),D[1]),S(A(g(_t,ue),-z[1]),A(g(X,Z),B[1]))),V[2]),A(S(A(g(Pe,oe),D[1]),S(A(g(et,re),-z[1]),A(g(X,Z),V[1]))),-B[2]))),O[3])),S(A(S(S(A(S(A(g(Lt,we),z[1]),S(A(g(Bt,me),-O[1]),A(g(ge,ae),B[1]))),D[2]),A(S(A(g(Lt,we),D[1]),S(A(g(_t,ue),-O[1]),A(g(ie,J),B[1]))),-z[2])),S(A(S(A(g(Bt,me),D[1]),S(A(g(_t,ue),-z[1]),A(g(X,Z),B[1]))),O[2]),A(S(A(g(ge,ae),D[1]),S(A(g(ie,J),-z[1]),A(g(X,Z),O[1]))),-B[2]))),-V[3]),A(S(S(A(S(A(g(Ie,le),z[1]),S(A(g(Pe,oe),-O[1]),A(g(ge,ae),V[1]))),D[2]),A(S(A(g(Ie,le),D[1]),S(A(g(et,re),-O[1]),A(g(ie,J),V[1]))),-z[2])),S(A(S(A(g(Pe,oe),D[1]),S(A(g(et,re),-z[1]),A(g(X,Z),V[1]))),O[2]),A(S(A(g(ge,ae),D[1]),S(A(g(ie,J),-z[1]),A(g(X,Z),O[1]))),-V[2]))),B[3]))))),$t=g(mt,er);return $t[$t.length-1]}return P}var w=[v,d,_];function k(S){var g=w[S.length];return g||(g=w[S.length]=h(S.length)),g.apply(void 0,S)}function x(S,g,C,A,P,D,z,O){function V(B,F,N,Z,J,re){switch(arguments.length){case 0:case 1:return 0;case 2:return A(B,F);case 3:return P(B,F,N);case 4:return D(B,F,N,Z);case 5:return z(B,F,N,Z,J);case 6:return O(B,F,N,Z,J,re)}for(var ue=new Array(arguments.length),fe=0;fe<arguments.length;++fe)ue[fe]=arguments[fe];return S(ue)}return V}function E(){for(;w.length<=c;)w.push(h(w.length));n.exports=x.apply(void 0,[k].concat(w));for(var S=0;S<=c;++S)n.exports[S]=w[S]}E()},727:function(n,a,o){"use strict";var s=o(2962),l=6;function u(w){var k=w===2?h:w===3?v:w===4?d:w===5?_:T;return w<6?k(s[w]):k(s)}function f(){return[[0]]}function c(w,k){return[[k[0]],[w[0][0]]]}function h(w){return function(x,E){return[w([[+E[0],+x[0][1]],[+E[1],+x[1][1]]]),w([[+x[0][0],+E[0]],[+x[1][0],+E[1]]]),w(x)]}}function v(w){return function(x,E){return[w([[+E[0],+x[0][1],+x[0][2]],[+E[1],+x[1][1],+x[1][2]],[+E[2],+x[2][1],+x[2][2]]]),w([[+x[0][0],+E[0],+x[0][2]],[+x[1][0],+E[1],+x[1][2]],[+x[2][0],+E[2],+x[2][2]]]),w([[+x[0][0],+x[0][1],+E[0]],[+x[1][0],+x[1][1],+E[1]],[+x[2][0],+x[2][1],+E[2]]]),w(x)]}}function d(w){return function(x,E){return[w([[+E[0],+x[0][1],+x[0][2],+x[0][3]],[+E[1],+x[1][1],+x[1][2],+x[1][3]],[+E[2],+x[2][1],+x[2][2],+x[2][3]],[+E[3],+x[3][1],+x[3][2],+x[3][3]]]),w([[+x[0][0],+E[0],+x[0][2],+x[0][3]],[+x[1][0],+E[1],+x[1][2],+x[1][3]],[+x[2][0],+E[2],+x[2][2],+x[2][3]],[+x[3][0],+E[3],+x[3][2],+x[3][3]]]),w([[+x[0][0],+x[0][1],+E[0],+x[0][3]],[+x[1][0],+x[1][1],+E[1],+x[1][3]],[+x[2][0],+x[2][1],+E[2],+x[2][3]],[+x[3][0],+x[3][1],+E[3],+x[3][3]]]),w([[+x[0][0],+x[0][1],+x[0][2],+E[0]],[+x[1][0],+x[1][1],+x[1][2],+E[1]],[+x[2][0],+x[2][1],+x[2][2],+E[2]],[+x[3][0],+x[3][1],+x[3][2],+E[3]]]),w(x)]}}function _(w){return function(x,E){return[w([[+E[0],+x[0][1],+x[0][2],+x[0][3],+x[0][4]],[+E[1],+x[1][1],+x[1][2],+x[1][3],+x[1][4]],[+E[2],+x[2][1],+x[2][2],+x[2][3],+x[2][4]],[+E[3],+x[3][1],+x[3][2],+x[3][3],+x[3][4]],[+E[4],+x[4][1],+x[4][2],+x[4][3],+x[4][4]]]),w([[+x[0][0],+E[0],+x[0][2],+x[0][3],+x[0][4]],[+x[1][0],+E[1],+x[1][2],+x[1][3],+x[1][4]],[+x[2][0],+E[2],+x[2][2],+x[2][3],+x[2][4]],[+x[3][0],+E[3],+x[3][2],+x[3][3],+x[3][4]],[+x[4][0],+E[4],+x[4][2],+x[4][3],+x[4][4]]]),w([[+x[0][0],+x[0][1],+E[0],+x[0][3],+x[0][4]],[+x[1][0],+x[1][1],+E[1],+x[1][3],+x[1][4]],[+x[2][0],+x[2][1],+E[2],+x[2][3],+x[2][4]],[+x[3][0],+x[3][1],+E[3],+x[3][3],+x[3][4]],[+x[4][0],+x[4][1],+E[4],+x[4][3],+x[4][4]]]),w([[+x[0][0],+x[0][1],+x[0][2],+E[0],+x[0][4]],[+x[1][0],+x[1][1],+x[1][2],+E[1],+x[1][4]],[+x[2][0],+x[2][1],+x[2][2],+E[2],+x[2][4]],[+x[3][0],+x[3][1],+x[3][2],+E[3],+x[3][4]],[+x[4][0],+x[4][1],+x[4][2],+E[4],+x[4][4]]]),w([[+x[0][0],+x[0][1],+x[0][2],+x[0][3],+E[0]],[+x[1][0],+x[1][1],+x[1][2],+x[1][3],+E[1]],[+x[2][0],+x[2][1],+x[2][2],+x[2][3],+E[2]],[+x[3][0],+x[3][1],+x[3][2],+x[3][3],+E[3]],[+x[4][0],+x[4][1],+x[4][2],+x[4][3],+E[4]]]),w(x)]}}function T(w){return function(x,E){return[w([[+E[0],+x[0][1],+x[0][2],+x[0][3],+x[0][4],+x[0][5]],[+E[1],+x[1][1],+x[1][2],+x[1][3],+x[1][4],+x[1][5]],[+E[2],+x[2][1],+x[2][2],+x[2][3],+x[2][4],+x[2][5]],[+E[3],+x[3][1],+x[3][2],+x[3][3],+x[3][4],+x[3][5]],[+E[4],+x[4][1],+x[4][2],+x[4][3],+x[4][4],+x[4][5]],[+E[5],+x[5][1],+x[5][2],+x[5][3],+x[5][4],+x[5][5]]]),w([[+x[0][0],+E[0],+x[0][2],+x[0][3],+x[0][4],+x[0][5]],[+x[1][0],+E[1],+x[1][2],+x[1][3],+x[1][4],+x[1][5]],[+x[2][0],+E[2],+x[2][2],+x[2][3],+x[2][4],+x[2][5]],[+x[3][0],+E[3],+x[3][2],+x[3][3],+x[3][4],+x[3][5]],[+x[4][0],+E[4],+x[4][2],+x[4][3],+x[4][4],+x[4][5]],[+x[5][0],+E[5],+x[5][2],+x[5][3],+x[5][4],+x[5][5]]]),w([[+x[0][0],+x[0][1],+E[0],+x[0][3],+x[0][4],+x[0][5]],[+x[1][0],+x[1][1],+E[1],+x[1][3],+x[1][4],+x[1][5]],[+x[2][0],+x[2][1],+E[2],+x[2][3],+x[2][4],+x[2][5]],[+x[3][0],+x[3][1],+E[3],+x[3][3],+x[3][4],+x[3][5]],[+x[4][0],+x[4][1],+E[4],+x[4][3],+x[4][4],+x[4][5]],[+x[5][0],+x[5][1],+E[5],+x[5][3],+x[5][4],+x[5][5]]]),w([[+x[0][0],+x[0][1],+x[0][2],+E[0],+x[0][4],+x[0][5]],[+x[1][0],+x[1][1],+x[1][2],+E[1],+x[1][4],+x[1][5]],[+x[2][0],+x[2][1],+x[2][2],+E[2],+x[2][4],+x[2][5]],[+x[3][0],+x[3][1],+x[3][2],+E[3],+x[3][4],+x[3][5]],[+x[4][0],+x[4][1],+x[4][2],+E[4],+x[4][4],+x[4][5]],[+x[5][0],+x[5][1],+x[5][2],+E[5],+x[5][4],+x[5][5]]]),w([[+x[0][0],+x[0][1],+x[0][2],+x[0][3],+E[0],+x[0][5]],[+x[1][0],+x[1][1],+x[1][2],+x[1][3],+E[1],+x[1][5]],[+x[2][0],+x[2][1],+x[2][2],+x[2][3],+E[2],+x[2][5]],[+x[3][0],+x[3][1],+x[3][2],+x[3][3],+E[3],+x[3][5]],[+x[4][0],+x[4][1],+x[4][2],+x[4][3],+E[4],+x[4][5]],[+x[5][0],+x[5][1],+x[5][2],+x[5][3],+E[5],+x[5][5]]]),w([[+x[0][0],+x[0][1],+x[0][2],+x[0][3],+x[0][4],+E[0]],[+x[1][0],+x[1][1],+x[1][2],+x[1][3],+x[1][4],+E[1]],[+x[2][0],+x[2][1],+x[2][2],+x[2][3],+x[2][4],+E[2]],[+x[3][0],+x[3][1],+x[3][2],+x[3][3],+x[3][4],+E[3]],[+x[4][0],+x[4][1],+x[4][2],+x[4][3],+x[4][4],+E[4]],[+x[5][0],+x[5][1],+x[5][2],+x[5][3],+x[5][4],+E[5]]]),w(x)]}}var p=[f,c];function M(w,k,x,E,S,g,C,A){return function(D,z){switch(D.length){case 0:return w(D,z);case 1:return k(D,z);case 2:return x(D,z);case 3:return E(D,z);case 4:return S(D,z);case 5:return g(D,z)}var O=C[D.length];return O||(O=C[D.length]=A(D.length)),O(D,z)}}function b(){for(;p.length<l;)p.push(u(p.length));n.exports=M.apply(void 0,p.concat([p,u]));for(var w=0;w<l;++w)n.exports[w]=p[w]}b()},3250:function(n,a,o){"use strict";var s=o(5250),l=o(8210),u=o(3012),f=o(8545),c=5,h=11102230246251565e-32,v=(3+16*h)*h,d=(7+56*h)*h;function _(g,C,A,P){return function(z,O,V){var B=g(g(C(O[1],V[0]),C(-V[1],O[0])),g(C(z[1],O[0]),C(-O[1],z[0]))),F=g(C(z[1],V[0]),C(-V[1],z[0])),N=P(B,F);return N[N.length-1]}}function T(g,C,A,P){return function(z,O,V,B){var F=g(g(A(g(C(V[1],B[0]),C(-B[1],V[0])),O[2]),g(A(g(C(O[1],B[0]),C(-B[1],O[0])),-V[2]),A(g(C(O[1],V[0]),C(-V[1],O[0])),B[2]))),g(A(g(C(O[1],B[0]),C(-B[1],O[0])),z[2]),g(A(g(C(z[1],B[0]),C(-B[1],z[0])),-O[2]),A(g(C(z[1],O[0]),C(-O[1],z[0])),B[2])))),N=g(g(A(g(C(V[1],B[0]),C(-B[1],V[0])),z[2]),g(A(g(C(z[1],B[0]),C(-B[1],z[0])),-V[2]),A(g(C(z[1],V[0]),C(-V[1],z[0])),B[2]))),g(A(g(C(O[1],V[0]),C(-V[1],O[0])),z[2]),g(A(g(C(z[1],V[0]),C(-V[1],z[0])),-O[2]),A(g(C(z[1],O[0]),C(-O[1],z[0])),V[2])))),Z=P(F,N);return Z[Z.length-1]}}function p(g,C,A,P){return function(z,O,V,B,F){var N=g(g(g(A(g(A(g(C(B[1],F[0]),C(-F[1],B[0])),V[2]),g(A(g(C(V[1],F[0]),C(-F[1],V[0])),-B[2]),A(g(C(V[1],B[0]),C(-B[1],V[0])),F[2]))),O[3]),g(A(g(A(g(C(B[1],F[0]),C(-F[1],B[0])),O[2]),g(A(g(C(O[1],F[0]),C(-F[1],O[0])),-B[2]),A(g(C(O[1],B[0]),C(-B[1],O[0])),F[2]))),-V[3]),A(g(A(g(C(V[1],F[0]),C(-F[1],V[0])),O[2]),g(A(g(C(O[1],F[0]),C(-F[1],O[0])),-V[2]),A(g(C(O[1],V[0]),C(-V[1],O[0])),F[2]))),B[3]))),g(A(g(A(g(C(V[1],B[0]),C(-B[1],V[0])),O[2]),g(A(g(C(O[1],B[0]),C(-B[1],O[0])),-V[2]),A(g(C(O[1],V[0]),C(-V[1],O[0])),B[2]))),-F[3]),g(A(g(A(g(C(B[1],F[0]),C(-F[1],B[0])),O[2]),g(A(g(C(O[1],F[0]),C(-F[1],O[0])),-B[2]),A(g(C(O[1],B[0]),C(-B[1],O[0])),F[2]))),z[3]),A(g(A(g(C(B[1],F[0]),C(-F[1],B[0])),z[2]),g(A(g(C(z[1],F[0]),C(-F[1],z[0])),-B[2]),A(g(C(z[1],B[0]),C(-B[1],z[0])),F[2]))),-O[3])))),g(g(A(g(A(g(C(O[1],F[0]),C(-F[1],O[0])),z[2]),g(A(g(C(z[1],F[0]),C(-F[1],z[0])),-O[2]),A(g(C(z[1],O[0]),C(-O[1],z[0])),F[2]))),B[3]),g(A(g(A(g(C(O[1],B[0]),C(-B[1],O[0])),z[2]),g(A(g(C(z[1],B[0]),C(-B[1],z[0])),-O[2]),A(g(C(z[1],O[0]),C(-O[1],z[0])),B[2]))),-F[3]),A(g(A(g(C(V[1],B[0]),C(-B[1],V[0])),O[2]),g(A(g(C(O[1],B[0]),C(-B[1],O[0])),-V[2]),A(g(C(O[1],V[0]),C(-V[1],O[0])),B[2]))),z[3]))),g(A(g(A(g(C(V[1],B[0]),C(-B[1],V[0])),z[2]),g(A(g(C(z[1],B[0]),C(-B[1],z[0])),-V[2]),A(g(C(z[1],V[0]),C(-V[1],z[0])),B[2]))),-O[3]),g(A(g(A(g(C(O[1],B[0]),C(-B[1],O[0])),z[2]),g(A(g(C(z[1],B[0]),C(-B[1],z[0])),-O[2]),A(g(C(z[1],O[0]),C(-O[1],z[0])),B[2]))),V[3]),A(g(A(g(C(O[1],V[0]),C(-V[1],O[0])),z[2]),g(A(g(C(z[1],V[0]),C(-V[1],z[0])),-O[2]),A(g(C(z[1],O[0]),C(-O[1],z[0])),V[2]))),-B[3]))))),Z=g(g(g(A(g(A(g(C(B[1],F[0]),C(-F[1],B[0])),V[2]),g(A(g(C(V[1],F[0]),C(-F[1],V[0])),-B[2]),A(g(C(V[1],B[0]),C(-B[1],V[0])),F[2]))),z[3]),A(g(A(g(C(B[1],F[0]),C(-F[1],B[0])),z[2]),g(A(g(C(z[1],F[0]),C(-F[1],z[0])),-B[2]),A(g(C(z[1],B[0]),C(-B[1],z[0])),F[2]))),-V[3])),g(A(g(A(g(C(V[1],F[0]),C(-F[1],V[0])),z[2]),g(A(g(C(z[1],F[0]),C(-F[1],z[0])),-V[2]),A(g(C(z[1],V[0]),C(-V[1],z[0])),F[2]))),B[3]),A(g(A(g(C(V[1],B[0]),C(-B[1],V[0])),z[2]),g(A(g(C(z[1],B[0]),C(-B[1],z[0])),-V[2]),A(g(C(z[1],V[0]),C(-V[1],z[0])),B[2]))),-F[3]))),g(g(A(g(A(g(C(V[1],F[0]),C(-F[1],V[0])),O[2]),g(A(g(C(O[1],F[0]),C(-F[1],O[0])),-V[2]),A(g(C(O[1],V[0]),C(-V[1],O[0])),F[2]))),z[3]),A(g(A(g(C(V[1],F[0]),C(-F[1],V[0])),z[2]),g(A(g(C(z[1],F[0]),C(-F[1],z[0])),-V[2]),A(g(C(z[1],V[0]),C(-V[1],z[0])),F[2]))),-O[3])),g(A(g(A(g(C(O[1],F[0]),C(-F[1],O[0])),z[2]),g(A(g(C(z[1],F[0]),C(-F[1],z[0])),-O[2]),A(g(C(z[1],O[0]),C(-O[1],z[0])),F[2]))),V[3]),A(g(A(g(C(O[1],V[0]),C(-V[1],O[0])),z[2]),g(A(g(C(z[1],V[0]),C(-V[1],z[0])),-O[2]),A(g(C(z[1],O[0]),C(-O[1],z[0])),V[2]))),-F[3])))),J=P(N,Z);return J[J.length-1]}}function M(g){var C=g===3?_:g===4?T:p;return C(l,s,u,f)}var b=M(3),w=M(4),k=[function(){return 0},function(){return 0},function(C,A){return A[0]-C[0]},function(C,A,P){var D=(C[1]-P[1])*(A[0]-P[0]),z=(C[0]-P[0])*(A[1]-P[1]),O=D-z,V;if(D>0){if(z<=0)return O;V=D+z}else if(D<0){if(z>=0)return O;V=-(D+z)}else return O;var B=v*V;return O>=B||O<=-B?O:b(C,A,P)},function(C,A,P,D){var z=C[0]-D[0],O=A[0]-D[0],V=P[0]-D[0],B=C[1]-D[1],F=A[1]-D[1],N=P[1]-D[1],Z=C[2]-D[2],J=A[2]-D[2],re=P[2]-D[2],ue=O*N,fe=V*F,K=V*B,X=z*N,ae=z*F,oe=O*B,me=Z*(ue-fe)+J*(K-X)+re*(ae-oe),xe=(Math.abs(ue)+Math.abs(fe))*Math.abs(Z)+(Math.abs(K)+Math.abs(X))*Math.abs(J)+(Math.abs(ae)+Math.abs(oe))*Math.abs(re),ce=d*xe;return me>ce||-me>ce?me:w(C,A,P,D)}];function x(g){var C=k[g.length];return C||(C=k[g.length]=M(g.length)),C.apply(void 0,g)}function E(g,C,A,P,D,z,O){return function(B,F,N,Z,J){switch(arguments.length){case 0:case 1:return 0;case 2:return P(B,F);case 3:return D(B,F,N);case 4:return z(B,F,N,Z);case 5:return O(B,F,N,Z,J)}for(var re=new Array(arguments.length),ue=0;ue<arguments.length;++ue)re[ue]=arguments[ue];return g(re)}}function S(){for(;k.length<=c;)k.push(M(k.length));n.exports=E.apply(void 0,[x].concat(k));for(var g=0;g<=c;++g)n.exports[g]=k[g]}S()},5382:function(n,a,o){"use strict";var s=o(8210),l=o(3012);n.exports=u;function u(f,c){if(f.length===1)return l(c,f[0]);if(c.length===1)return l(f,c[0]);if(f.length===0||c.length===0)return[0];var h=[0];if(f.length<c.length)for(var v=0;v<f.length;++v)h=s(h,l(c,f[v]));else for(var v=0;v<c.length;++v)h=s(h,l(f,c[v]));return h}},3012:function(n,a,o){"use strict";var s=o(5250),l=o(9362);n.exports=u;function u(f,c){var h=f.length;if(h===1){var v=s(f[0],c);return v[0]?v:[v[1]]}var d=new Array(2*h),_=[.1,.1],T=[.1,.1],p=0;s(f[0],c,_),_[0]&&(d[p++]=_[0]);for(var M=1;M<h;++M){s(f[M],c,T);var b=_[1];l(b,T[0],_),_[0]&&(d[p++]=_[0]);var w=T[1],k=_[1],x=w+k,E=x-w,S=k-E;_[1]=x,S&&(d[p++]=S)}return _[1]&&(d[p++]=_[1]),p===0&&(d[p++]=0),d.length=p,d}},1125:function(n,a,o){"use strict";n.exports=u;var s=o(3250)[3];function l(f,c,h,v){for(var d=0;d<2;++d){var _=f[d],T=c[d],p=Math.min(_,T),M=Math.max(_,T),b=h[d],w=v[d],k=Math.min(b,w),x=Math.max(b,w);if(x<p||M<k)return!1}return!0}function u(f,c,h,v){var d=s(f,h,v),_=s(c,h,v);if(d>0&&_>0||d<0&&_<0)return!1;var T=s(h,f,c),p=s(v,f,c);return T>0&&p>0||T<0&&p<0?!1:d===0&&_===0&&T===0&&p===0?l(f,c,h,v):!0}},8545:function(n){"use strict";n.exports=o;function a(s,l){var u=s+l,f=u-s,c=u-f,h=l-f,v=s-c,d=v+h;return d?[d,u]:[u]}function o(s,l){var u=s.length|0,f=l.length|0;if(u===1&&f===1)return a(s[0],-l[0]);var c=u+f,h=new Array(c),v=0,d=0,_=0,T=Math.abs,p=s[d],M=T(p),b=-l[_],w=T(b),k,x;M<w?(x=p,d+=1,d<u&&(p=s[d],M=T(p))):(x=b,_+=1,_<f&&(b=-l[_],w=T(b))),d<u&&M<w||_>=f?(k=p,d+=1,d<u&&(p=s[d],M=T(p))):(k=b,_+=1,_<f&&(b=-l[_],w=T(b)));for(var E=k+x,S=E-k,g=x-S,C=g,A=E,P,D,z,O,V;d<u&&_<f;)M<w?(k=p,d+=1,d<u&&(p=s[d],M=T(p))):(k=b,_+=1,_<f&&(b=-l[_],w=T(b))),x=C,E=k+x,S=E-k,g=x-S,g&&(h[v++]=g),P=A+E,D=P-A,z=P-D,O=E-D,V=A-z,C=V+O,A=P;for(;d<u;)k=p,x=C,E=k+x,S=E-k,g=x-S,g&&(h[v++]=g),P=A+E,D=P-A,z=P-D,O=E-D,V=A-z,C=V+O,A=P,d+=1,d<u&&(p=s[d]);for(;_<f;)k=b,x=C,E=k+x,S=E-k,g=x-S,g&&(h[v++]=g),P=A+E,D=P-A,z=P-D,O=E-D,V=A-z,C=V+O,A=P,_+=1,_<f&&(b=-l[_]);return C&&(h[v++]=C),A&&(h[v++]=A),v||(h[v++]=0),h.length=v,h}},8210:function(n){"use strict";n.exports=o;function a(s,l){var u=s+l,f=u-s,c=u-f,h=l-f,v=s-c,d=v+h;return d?[d,u]:[u]}function o(s,l){var u=s.length|0,f=l.length|0;if(u===1&&f===1)return a(s[0],l[0]);var c=u+f,h=new Array(c),v=0,d=0,_=0,T=Math.abs,p=s[d],M=T(p),b=l[_],w=T(b),k,x;M<w?(x=p,d+=1,d<u&&(p=s[d],M=T(p))):(x=b,_+=1,_<f&&(b=l[_],w=T(b))),d<u&&M<w||_>=f?(k=p,d+=1,d<u&&(p=s[d],M=T(p))):(k=b,_+=1,_<f&&(b=l[_],w=T(b)));for(var E=k+x,S=E-k,g=x-S,C=g,A=E,P,D,z,O,V;d<u&&_<f;)M<w?(k=p,d+=1,d<u&&(p=s[d],M=T(p))):(k=b,_+=1,_<f&&(b=l[_],w=T(b))),x=C,E=k+x,S=E-k,g=x-S,g&&(h[v++]=g),P=A+E,D=P-A,z=P-D,O=E-D,V=A-z,C=V+O,A=P;for(;d<u;)k=p,x=C,E=k+x,S=E-k,g=x-S,g&&(h[v++]=g),P=A+E,D=P-A,z=P-D,O=E-D,V=A-z,C=V+O,A=P,d+=1,d<u&&(p=s[d]);for(;_<f;)k=b,x=C,E=k+x,S=E-k,g=x-S,g&&(h[v++]=g),P=A+E,D=P-A,z=P-D,O=E-D,V=A-z,C=V+O,A=P,_+=1,_<f&&(b=l[_]);return C&&(h[v++]=C),A&&(h[v++]=A),v||(h[v++]=0),h.length=v,h}},9127:function(n,a,o){"use strict";n.exports=u;var s=o(6204),l=o(5771);function u(f){return l(s(f))}},7765:function(n,a,o){"use strict";n.exports=p;var s=o(9618),l=o(1888),u=o(446),f=o(1570);function c(M){for(var b=M.length,w=0,k=0;k<b;++k)w=Math.max(w,M[k].length)|0;return w-1}function h(M,b){for(var w=M.length,k=l.mallocUint8(w),x=0;x<w;++x)k[x]=M[x]<b|0;return k}function v(M,b){for(var w=M.length,k=b*(b+1)/2*w|0,x=l.mallocUint32(k*2),E=0,S=0;S<w;++S)for(var g=M[S],b=g.length,C=0;C<b;++C)for(var A=0;A<C;++A){var P=g[A],D=g[C];x[E++]=Math.min(P,D)|0,x[E++]=Math.max(P,D)|0}var z=E/2|0;u(s(x,[z,2]));for(var O=2,S=2;S<E;S+=2)x[S-2]===x[S]&&x[S-1]===x[S+1]||(x[O++]=x[S],x[O++]=x[S+1]);return s(x,[O/2|0,2])}function d(M,b,w,k){for(var x=M.data,E=M.shape[0],S=l.mallocDouble(E),g=0,C=0;C<E;++C){var A=x[2*C],P=x[2*C+1];if(w[A]!==w[P]){var D=b[A],z=b[P];x[2*g]=A,x[2*g+1]=P,S[g++]=(z-k)/(z-D)}}return M.shape[0]=g,s(S,[g])}function _(M,b){var w=l.mallocInt32(b*2),k=M.shape[0],x=M.data;w[0]=0;for(var E=0,S=0;S<k;++S){var g=x[2*S];if(g!==E){for(w[2*E+1]=S;++E<g;)w[2*E]=S,w[2*E+1]=S;w[2*E]=S}}for(w[2*E+1]=k;++E<b;)w[2*E]=w[2*E+1]=k;return w}function T(M){for(var b=M.shape[0]|0,w=M.data,k=new Array(b),x=0;x<b;++x)k[x]=[w[2*x],w[2*x+1]];return k}function p(M,b,w,k){w=w||0,typeof k=="undefined"&&(k=c(M));var x=M.length;if(x===0||k<1)return{cells:[],vertexIds:[],vertexWeights:[]};var E=h(b,+w),S=v(M,k),g=d(S,b,E,+w),C=_(S,b.length|0),A=f(k)(M,S.data,C,E),P=T(S),D=[].slice.call(g.data,0,g.shape[0]);return l.free(E),l.free(S.data),l.free(g.data),l.free(C),{cells:A,vertexIds:P,vertexWeights:D}}},1570:function(n){"use strict";n.exports=o;var a=[function(){function l(f,c,h,v){for(var d=Math.min(h,v)|0,_=Math.max(h,v)|0,T=f[2*d],p=f[2*d+1];T<p;){var M=T+p>>1,b=c[2*M+1];if(b===_)return M;_<b?p=M:T=M+1}return T}function u(f,c,h,v){for(var d=f.length,_=[],T=0;T<d;++T)var p=f[T],M=p.length;return _}return u},function(){function l(f,c,h,v){for(var d=Math.min(h,v)|0,_=Math.max(h,v)|0,T=f[2*d],p=f[2*d+1];T<p;){var M=T+p>>1,b=c[2*M+1];if(b===_)return M;_<b?p=M:T=M+1}return T}function u(f,c,h,v){for(var d=f.length,_=[],T=0;T<d;++T){var p=f[T],M=p.length;if(M===2){var b=(v[p[0]]<<0)+(v[p[1]]<<1);if(b===0||b===3)continue;switch(b){case 0:break;case 1:_.push([l(h,c,p[0],p[1])]);break;case 2:_.push([l(h,c,p[1],p[0])]);break;case 3:break}}}return _}return u},function(){function l(f,c,h,v){for(var d=Math.min(h,v)|0,_=Math.max(h,v)|0,T=f[2*d],p=f[2*d+1];T<p;){var M=T+p>>1,b=c[2*M+1];if(b===_)return M;_<b?p=M:T=M+1}return T}function u(f,c,h,v){for(var d=f.length,_=[],T=0;T<d;++T){var p=f[T],M=p.length;if(M===3){var b=(v[p[0]]<<0)+(v[p[1]]<<1)+(v[p[2]]<<2);if(b===0||b===7)continue;switch(b){case 0:break;case 1:_.push([l(h,c,p[0],p[2]),l(h,c,p[0],p[1])]);break;case 2:_.push([l(h,c,p[1],p[0]),l(h,c,p[1],p[2])]);break;case 3:_.push([l(h,c,p[0],p[2]),l(h,c,p[1],p[2])]);break;case 4:_.push([l(h,c,p[2],p[1]),l(h,c,p[2],p[0])]);break;case 5:_.push([l(h,c,p[2],p[1]),l(h,c,p[0],p[1])]);break;case 6:_.push([l(h,c,p[1],p[0]),l(h,c,p[2],p[0])]);break;case 7:break}}else if(M===2){var b=(v[p[0]]<<0)+(v[p[1]]<<1);if(b===0||b===3)continue;switch(b){case 0:break;case 1:_.push([l(h,c,p[0],p[1])]);break;case 2:_.push([l(h,c,p[1],p[0])]);break;case 3:break}}}return _}return u},function(){function l(f,c,h,v){for(var d=Math.min(h,v)|0,_=Math.max(h,v)|0,T=f[2*d],p=f[2*d+1];T<p;){var M=T+p>>1,b=c[2*M+1];if(b===_)return M;_<b?p=M:T=M+1}return T}function u(f,c,h,v){for(var d=f.length,_=[],T=0;T<d;++T){var p=f[T],M=p.length;if(M===4){var b=(v[p[0]]<<0)+(v[p[1]]<<1)+(v[p[2]]<<2)+(v[p[3]]<<3);if(b===0||b===15)continue;switch(b){case 0:break;case 1:_.push([l(h,c,p[0],p[1]),l(h,c,p[0],p[2]),l(h,c,p[0],p[3])]);break;case 2:_.push([l(h,c,p[1],p[2]),l(h,c,p[1],p[0]),l(h,c,p[1],p[3])]);break;case 3:_.push([l(h,c,p[1],p[2]),l(h,c,p[0],p[2]),l(h,c,p[0],p[3])],[l(h,c,p[1],p[3]),l(h,c,p[1],p[2]),l(h,c,p[0],p[3])]);break;case 4:_.push([l(h,c,p[2],p[0]),l(h,c,p[2],p[1]),l(h,c,p[2],p[3])]);break;case 5:_.push([l(h,c,p[0],p[1]),l(h,c,p[2],p[1]),l(h,c,p[0],p[3])],[l(h,c,p[2],p[1]),l(h,c,p[2],p[3]),l(h,c,p[0],p[3])]);break;case 6:_.push([l(h,c,p[2],p[0]),l(h,c,p[1],p[0]),l(h,c,p[1],p[3])],[l(h,c,p[2],p[3]),l(h,c,p[2],p[0]),l(h,c,p[1],p[3])]);break;case 7:_.push([l(h,c,p[0],p[3]),l(h,c,p[1],p[3]),l(h,c,p[2],p[3])]);break;case 8:_.push([l(h,c,p[3],p[1]),l(h,c,p[3],p[0]),l(h,c,p[3],p[2])]);break;case 9:_.push([l(h,c,p[3],p[1]),l(h,c,p[0],p[1]),l(h,c,p[0],p[2])],[l(h,c,p[3],p[2]),l(h,c,p[3],p[1]),l(h,c,p[0],p[2])]);break;case 10:_.push([l(h,c,p[1],p[0]),l(h,c,p[3],p[0]),l(h,c,p[1],p[2])],[l(h,c,p[3],p[0]),l(h,c,p[3],p[2]),l(h,c,p[1],p[2])]);break;case 11:_.push([l(h,c,p[1],p[2]),l(h,c,p[0],p[2]),l(h,c,p[3],p[2])]);break;case 12:_.push([l(h,c,p[3],p[0]),l(h,c,p[2],p[0]),l(h,c,p[2],p[1])],[l(h,c,p[3],p[1]),l(h,c,p[3],p[0]),l(h,c,p[2],p[1])]);break;case 13:_.push([l(h,c,p[0],p[1]),l(h,c,p[2],p[1]),l(h,c,p[3],p[1])]);break;case 14:_.push([l(h,c,p[2],p[0]),l(h,c,p[1],p[0]),l(h,c,p[3],p[0])]);break;case 15:break}}else if(M===3){var b=(v[p[0]]<<0)+(v[p[1]]<<1)+(v[p[2]]<<2);if(b===0||b===7)continue;switch(b){case 0:break;case 1:_.push([l(h,c,p[0],p[2]),l(h,c,p[0],p[1])]);break;case 2:_.push([l(h,c,p[1],p[0]),l(h,c,p[1],p[2])]);break;case 3:_.push([l(h,c,p[0],p[2]),l(h,c,p[1],p[2])]);break;case 4:_.push([l(h,c,p[2],p[1]),l(h,c,p[2],p[0])]);break;case 5:_.push([l(h,c,p[2],p[1]),l(h,c,p[0],p[1])]);break;case 6:_.push([l(h,c,p[1],p[0]),l(h,c,p[2],p[0])]);break;case 7:break}}else if(M===2){var b=(v[p[0]]<<0)+(v[p[1]]<<1);if(b===0||b===3)continue;switch(b){case 0:break;case 1:_.push([l(h,c,p[0],p[1])]);break;case 2:_.push([l(h,c,p[1],p[0])]);break;case 3:break}}}return _}return u}];function o(s){return a[s]()}},6803:function(n,a,o){"use strict";var s,l=o(8828),u=o(1755);function f(C){for(var A=0,P=Math.max,D=0,z=C.length;D<z;++D)A=P(A,C[D].length);return A-1}s=f;function c(C){for(var A=-1,P=Math.max,D=0,z=C.length;D<z;++D)for(var O=C[D],V=0,B=O.length;V<B;++V)A=P(A,O[V]);return A+1}s=c;function h(C){for(var A=new Array(C.length),P=0,D=C.length;P<D;++P)A[P]=C[P].slice(0);return A}s=h;function v(C,A){var P=C.length,D=C.length-A.length,z=Math.min;if(D)return D;switch(P){case 0:return 0;case 1:return C[0]-A[0];case 2:var N=C[0]+C[1]-A[0]-A[1];return N||z(C[0],C[1])-z(A[0],A[1]);case 3:var O=C[0]+C[1],V=A[0]+A[1];if(N=O+C[2]-(V+A[2]),N)return N;var B=z(C[0],C[1]),F=z(A[0],A[1]),N=z(B,C[2])-z(F,A[2]);return N||z(B+C[2],O)-z(F+A[2],V);default:var Z=C.slice(0);Z.sort();var J=A.slice(0);J.sort();for(var re=0;re<P;++re)if(D=Z[re]-J[re],D)return D;return 0}}a.Fw=v;function d(C,A){return v(C[0],A[0])}function _(C,A){if(A){for(var P=C.length,D=new Array(P),z=0;z<P;++z)D[z]=[C[z],A[z]];D.sort(d);for(var z=0;z<P;++z)C[z]=D[z][0],A[z]=D[z][1];return C}else return C.sort(v),C}s=_;function T(C){if(C.length===0)return[];for(var A=1,P=C.length,D=1;D<P;++D){var z=C[D];if(v(z,C[D-1])){if(D===A){A++;continue}C[A++]=z}}return C.length=A,C}s=T;function p(C,A){for(var P=0,D=C.length-1,z=-1;P<=D;){var O=P+D>>1,V=v(C[O],A);V<=0?(V===0&&(z=O),P=O+1):V>0&&(D=O-1)}return z}s=p;function M(C,A){for(var P=new Array(C.length),D=0,z=P.length;D<z;++D)P[D]=[];for(var O=[],D=0,V=A.length;D<V;++D)for(var B=A[D],F=B.length,N=1,Z=1<<F;N<Z;++N){O.length=l.popCount(N);for(var J=0,re=0;re<F;++re)N&1<<re&&(O[J++]=B[re]);var ue=p(C,O);if(!(ue<0))for(;P[ue++].push(D),!(ue>=C.length||v(C[ue],O)!==0););}return P}s=M;function b(C,A){if(!A)return M(T(k(C,0)),C,0);for(var P=new Array(A),D=0;D<A;++D)P[D]=[];for(var D=0,z=C.length;D<z;++D)for(var O=C[D],V=0,B=O.length;V<B;++V)P[O[V]].push(D);return P}s=b;function w(C){for(var A=[],P=0,D=C.length;P<D;++P)for(var z=C[P],O=z.length|0,V=1,B=1<<O;V<B;++V){for(var F=[],N=0;N<O;++N)V>>>N&1&&F.push(z[N]);A.push(F)}return _(A)}s=w;function k(C,A){if(A<0)return[];for(var P=[],D=(1<<A+1)-1,z=0;z<C.length;++z)for(var O=C[z],V=D;V<1<<O.length;V=l.nextCombination(V)){for(var B=new Array(A+1),F=0,N=0;N<O.length;++N)V&1<<N&&(B[F++]=O[N]);P.push(B)}return _(P)}s=k;function x(C){for(var A=[],P=0,D=C.length;P<D;++P)for(var z=C[P],O=0,V=z.length;O<V;++O){for(var B=new Array(z.length-1),F=0,N=0;F<V;++F)F!==O&&(B[N++]=z[F]);A.push(B)}return _(A)}s=x;function E(C,A){for(var P=new u(A),D=0;D<C.length;++D)for(var z=C[D],O=0;O<z.length;++O)for(var V=O+1;V<z.length;++V)P.link(z[O],z[V]);for(var B=[],F=P.ranks,D=0;D<F.length;++D)F[D]=-1;for(var D=0;D<C.length;++D){var N=P.find(C[D][0]);F[N]<0?(F[N]=B.length,B.push([C[D].slice(0)])):B[F[N]].push(C[D].slice(0))}return B}function S(C){for(var A=T(_(k(C,0))),P=new u(A.length),D=0;D<C.length;++D)for(var z=C[D],O=0;O<z.length;++O)for(var V=p(A,[z[O]]),B=O+1;B<z.length;++B)P.link(V,p(A,[z[B]]));for(var F=[],N=P.ranks,D=0;D<N.length;++D)N[D]=-1;for(var D=0;D<C.length;++D){var Z=P.find(p(A,[C[D][0]]));N[Z]<0?(N[Z]=F.length,F.push([C[D].slice(0)])):F[N[Z]].push(C[D].slice(0))}return F}function g(C,A){return A?E(C,A):S(C)}s=g},3105:function(n,a){"use strict";"use restrict";var o=32;a.INT_BITS=o,a.INT_MAX=2147483647,a.INT_MIN=-1<<o-1,a.sign=function(u){return(u>0)-(u<0)},a.abs=function(u){var f=u>>o-1;return(u^f)-f},a.min=function(u,f){return f^(u^f)&-(u<f)},a.max=function(u,f){return u^(u^f)&-(u<f)},a.isPow2=function(u){return!(u&u-1)&&!!u},a.log2=function(u){var f,c;return f=(u>65535)<<4,u>>>=f,c=(u>255)<<3,u>>>=c,f|=c,c=(u>15)<<2,u>>>=c,f|=c,c=(u>3)<<1,u>>>=c,f|=c,f|u>>1},a.log10=function(u){return u>=1e9?9:u>=1e8?8:u>=1e7?7:u>=1e6?6:u>=1e5?5:u>=1e4?4:u>=1e3?3:u>=100?2:u>=10?1:0},a.popCount=function(u){return u=u-(u>>>1&1431655765),u=(u&858993459)+(u>>>2&858993459),(u+(u>>>4)&252645135)*16843009>>>24};function s(u){var f=32;return u&=-u,u&&f--,u&65535&&(f-=16),u&16711935&&(f-=8),u&252645135&&(f-=4),u&858993459&&(f-=2),u&1431655765&&(f-=1),f}a.countTrailingZeros=s,a.nextPow2=function(u){return u+=u===0,--u,u|=u>>>1,u|=u>>>2,u|=u>>>4,u|=u>>>8,u|=u>>>16,u+1},a.prevPow2=function(u){return u|=u>>>1,u|=u>>>2,u|=u>>>4,u|=u>>>8,u|=u>>>16,u-(u>>>1)},a.parity=function(u){return u^=u>>>16,u^=u>>>8,u^=u>>>4,u&=15,27030>>>u&1};var l=new Array(256);(function(u){for(var f=0;f<256;++f){var c=f,h=f,v=7;for(c>>>=1;c;c>>>=1)h<<=1,h|=c&1,--v;u[f]=h<<v&255}})(l),a.reverse=function(u){return l[u&255]<<24|l[u>>>8&255]<<16|l[u>>>16&255]<<8|l[u>>>24&255]},a.interleave2=function(u,f){return u&=65535,u=(u|u<<8)&16711935,u=(u|u<<4)&252645135,u=(u|u<<2)&858993459,u=(u|u<<1)&1431655765,f&=65535,f=(f|f<<8)&16711935,f=(f|f<<4)&252645135,f=(f|f<<2)&858993459,f=(f|f<<1)&1431655765,u|f<<1},a.deinterleave2=function(u,f){return u=u>>>f&1431655765,u=(u|u>>>1)&858993459,u=(u|u>>>2)&252645135,u=(u|u>>>4)&16711935,u=(u|u>>>16)&65535,u<<16>>16},a.interleave3=function(u,f,c){return u&=1023,u=(u|u<<16)&4278190335,u=(u|u<<8)&251719695,u=(u|u<<4)&3272356035,u=(u|u<<2)&1227133513,f&=1023,f=(f|f<<16)&4278190335,f=(f|f<<8)&251719695,f=(f|f<<4)&3272356035,f=(f|f<<2)&1227133513,u|=f<<1,c&=1023,c=(c|c<<16)&4278190335,c=(c|c<<8)&251719695,c=(c|c<<4)&3272356035,c=(c|c<<2)&1227133513,u|c<<2},a.deinterleave3=function(u,f){return u=u>>>f&1227133513,u=(u|u>>>2)&3272356035,u=(u|u>>>4)&251719695,u=(u|u>>>8)&4278190335,u=(u|u>>>16)&1023,u<<22>>22},a.nextCombination=function(u){var f=u|u-1;return f+1|(~f&-~f)-1>>>s(u)+1}},2014:function(n,a,o){"use strict";"use restrict";var s=o(3105),l=o(4623);function u(g){for(var C=0,A=Math.max,P=0,D=g.length;P<D;++P)C=A(C,g[P].length);return C-1}a.dimension=u;function f(g){for(var C=-1,A=Math.max,P=0,D=g.length;P<D;++P)for(var z=g[P],O=0,V=z.length;O<V;++O)C=A(C,z[O]);return C+1}a.countVertices=f;function c(g){for(var C=new Array(g.length),A=0,P=g.length;A<P;++A)C[A]=g[A].slice(0);return C}a.cloneCells=c;function h(g,C){var A=g.length,P=g.length-C.length,D=Math.min;if(P)return P;switch(A){case 0:return 0;case 1:return g[0]-C[0];case 2:var F=g[0]+g[1]-C[0]-C[1];return F||D(g[0],g[1])-D(C[0],C[1]);case 3:var z=g[0]+g[1],O=C[0]+C[1];if(F=z+g[2]-(O+C[2]),F)return F;var V=D(g[0],g[1]),B=D(C[0],C[1]),F=D(V,g[2])-D(B,C[2]);return F||D(V+g[2],z)-D(B+C[2],O);default:var N=g.slice(0);N.sort();var Z=C.slice(0);Z.sort();for(var J=0;J<A;++J)if(P=N[J]-Z[J],P)return P;return 0}}a.compareCells=h;function v(g,C){return h(g[0],C[0])}function d(g,C){if(C){for(var A=g.length,P=new Array(A),D=0;D<A;++D)P[D]=[g[D],C[D]];P.sort(v);for(var D=0;D<A;++D)g[D]=P[D][0],C[D]=P[D][1];return g}else return g.sort(h),g}a.normalize=d;function _(g){if(g.length===0)return[];for(var C=1,A=g.length,P=1;P<A;++P){var D=g[P];if(h(D,g[P-1])){if(P===C){C++;continue}g[C++]=D}}return g.length=C,g}a.unique=_;function T(g,C){for(var A=0,P=g.length-1,D=-1;A<=P;){var z=A+P>>1,O=h(g[z],C);O<=0?(O===0&&(D=z),A=z+1):O>0&&(P=z-1)}return D}a.findCell=T;function p(g,C){for(var A=new Array(g.length),P=0,D=A.length;P<D;++P)A[P]=[];for(var z=[],P=0,O=C.length;P<O;++P)for(var V=C[P],B=V.length,F=1,N=1<<B;F<N;++F){z.length=s.popCount(F);for(var Z=0,J=0;J<B;++J)F&1<<J&&(z[Z++]=V[J]);var re=T(g,z);if(!(re<0))for(;A[re++].push(P),!(re>=g.length||h(g[re],z)!==0););}return A}a.incidence=p;function M(g,C){if(!C)return p(_(w(g,0)),g,0);for(var A=new Array(C),P=0;P<C;++P)A[P]=[];for(var P=0,D=g.length;P<D;++P)for(var z=g[P],O=0,V=z.length;O<V;++O)A[z[O]].push(P);return A}a.dual=M;function b(g){for(var C=[],A=0,P=g.length;A<P;++A)for(var D=g[A],z=D.length|0,O=1,V=1<<z;O<V;++O){for(var B=[],F=0;F<z;++F)O>>>F&1&&B.push(D[F]);C.push(B)}return d(C)}a.explode=b;function w(g,C){if(C<0)return[];for(var A=[],P=(1<<C+1)-1,D=0;D<g.length;++D)for(var z=g[D],O=P;O<1<<z.length;O=s.nextCombination(O)){for(var V=new Array(C+1),B=0,F=0;F<z.length;++F)O&1<<F&&(V[B++]=z[F]);A.push(V)}return d(A)}a.skeleton=w;function k(g){for(var C=[],A=0,P=g.length;A<P;++A)for(var D=g[A],z=0,O=D.length;z<O;++z){for(var V=new Array(D.length-1),B=0,F=0;B<O;++B)B!==z&&(V[F++]=D[B]);C.push(V)}return d(C)}a.boundary=k;function x(g,C){for(var A=new l(C),P=0;P<g.length;++P)for(var D=g[P],z=0;z<D.length;++z)for(var O=z+1;O<D.length;++O)A.link(D[z],D[O]);for(var V=[],B=A.ranks,P=0;P<B.length;++P)B[P]=-1;for(var P=0;P<g.length;++P){var F=A.find(g[P][0]);B[F]<0?(B[F]=V.length,V.push([g[P].slice(0)])):V[B[F]].push(g[P].slice(0))}return V}function E(g){for(var C=_(d(w(g,0))),A=new l(C.length),P=0;P<g.length;++P)for(var D=g[P],z=0;z<D.length;++z)for(var O=T(C,[D[z]]),V=z+1;V<D.length;++V)A.link(O,T(C,[D[V]]));for(var B=[],F=A.ranks,P=0;P<F.length;++P)F[P]=-1;for(var P=0;P<g.length;++P){var N=A.find(T(C,[g[P][0]]));F[N]<0?(F[N]=B.length,B.push([g[P].slice(0)])):B[F[N]].push(g[P].slice(0))}return B}function S(g,C){return C?x(g,C):E(g)}a.connectedComponents=S},4623:function(n){"use strict";"use restrict";n.exports=a;function a(o){this.roots=new Array(o),this.ranks=new Array(o);for(var s=0;s<o;++s)this.roots[s]=s,this.ranks[s]=0}a.prototype.length=function(){return this.roots.length},a.prototype.makeSet=function(){var o=this.roots.length;return this.roots.push(o),this.ranks.push(0),o},a.prototype.find=function(o){for(var s=this.roots;s[o]!==o;){var l=s[o];s[o]=s[l],o=l}return o},a.prototype.link=function(o,s){var l=this.find(o),u=this.find(s);if(l!==u){var f=this.ranks,c=this.roots,h=f[l],v=f[u];h<v?c[l]=u:v<h?c[u]=l:(c[u]=l,++f[l])}}},5878:function(n,a,o){"use strict";n.exports=f;var s=o(3250),l=o(2014);function u(c,h,v){var d=Math.abs(s(c,h,v)),_=Math.sqrt(Math.pow(h[0]-v[0],2)+Math.pow(h[1]-v[1],2));return d/_}function f(c,h,v){for(var d=h.length,_=c.length,T=new Array(d),p=new Array(d),M=new Array(d),b=new Array(d),w=0;w<d;++w)T[w]=p[w]=-1,M[w]=1/0,b[w]=!1;for(var w=0;w<_;++w){var k=c[w];if(k.length!==2)throw new Error("Input must be a graph");var x=k[1],E=k[0];p[E]!==-1?p[E]=-2:p[E]=x,T[x]!==-1?T[x]=-2:T[x]=E}function S(X){if(b[X])return 1/0;var ae=T[X],oe=p[X];return ae<0||oe<0?1/0:u(h[X],h[ae],h[oe])}function g(X,ae){var oe=B[X],me=B[ae];B[X]=me,B[ae]=oe,F[oe]=ae,F[me]=X}function C(X){return M[B[X]]}function A(X){return X&1?X-1>>1:(X>>1)-1}function P(X){for(var ae=C(X);;){var oe=ae,me=2*X+1,xe=2*(X+1),ce=X;if(me<Z){var ie=C(me);ie<oe&&(ce=me,oe=ie)}if(xe<Z){var ge=C(xe);ge<oe&&(ce=xe)}if(ce===X)return X;g(X,ce),X=ce}}function D(X){for(var ae=C(X);X>0;){var oe=A(X);if(oe>=0){var me=C(oe);if(ae<me){g(X,oe),X=oe;continue}}return X}}function z(){if(Z>0){var X=B[0];return g(0,Z-1),Z-=1,P(0),X}return-1}function O(X,ae){var oe=B[X];return M[oe]===ae?X:(M[oe]=-1/0,D(X),z(),M[oe]=ae,Z+=1,D(Z-1))}function V(X){if(!b[X]){b[X]=!0;var ae=T[X],oe=p[X];T[oe]>=0&&(T[oe]=ae),p[ae]>=0&&(p[ae]=oe),F[ae]>=0&&O(F[ae],S(ae)),F[oe]>=0&&O(F[oe],S(oe))}}for(var B=[],F=new Array(d),w=0;w<d;++w){var N=M[w]=S(w);N<1/0?(F[w]=B.length,B.push(w)):F[w]=-1}for(var Z=B.length,w=Z>>1;w>=0;--w)P(w);for(;;){var J=z();if(J<0||M[J]>v)break;V(J)}for(var re=[],w=0;w<d;++w)b[w]||(F[w]=re.length,re.push(h[w].slice()));var ue=re.length;function fe(X,ae){if(X[ae]<0)return ae;var oe=ae,me=ae;do{var xe=X[me];if(!b[me]||xe<0||xe===me||(me=xe,xe=X[me],!b[me]||xe<0||xe===me))break;me=xe,oe=X[oe]}while(oe!==me);for(var ce=ae;ce!==me;ce=X[ce])X[ce]=me;return me}var K=[];return c.forEach(function(X){var ae=fe(T,X[0]),oe=fe(p,X[1]);if(ae>=0&&oe>=0&&ae!==oe){var me=F[ae],xe=F[oe];me!==xe&&K.push([me,xe])}}),l.unique(l.normalize(K)),{positions:re,edges:K}}},1303:function(n,a,o){"use strict";n.exports=u;var s=o(3250);function l(f,c){var h,v;if(c[0][0]<c[1][0])h=c[0],v=c[1];else if(c[0][0]>c[1][0])h=c[1],v=c[0];else{var d=Math.min(f[0][1],f[1][1]),_=Math.max(f[0][1],f[1][1]),T=Math.min(c[0][1],c[1][1]),p=Math.max(c[0][1],c[1][1]);return _<T?_-T:d>p?d-p:_-p}var M,b;f[0][1]<f[1][1]?(M=f[0],b=f[1]):(M=f[1],b=f[0]);var w=s(v,h,M);return w||(w=s(v,h,b),w)?w:b-v}function u(f,c){var h,v;if(c[0][0]<c[1][0])h=c[0],v=c[1];else if(c[0][0]>c[1][0])h=c[1],v=c[0];else return l(c,f);var d,_;if(f[0][0]<f[1][0])d=f[0],_=f[1];else if(f[0][0]>f[1][0])d=f[1],_=f[0];else return-l(f,c);var T=s(h,v,_),p=s(h,v,d);if(T<0){if(p<=0)return T}else if(T>0){if(p>=0)return T}else if(p)return p;if(T=s(_,d,v),p=s(_,d,h),T<0){if(p<=0)return T}else if(T>0){if(p>=0)return T}else if(p)return p;return v[0]-_[0]}},4209:function(n,a,o){"use strict";n.exports=p;var s=o(2478),l=o(3840),u=o(3250),f=o(1303);function c(M,b,w){this.slabs=M,this.coordinates=b,this.horizontal=w}var h=c.prototype;function v(M,b){return M.y-b}function d(M,b){for(var w=null;M;){var k=M.key,x,E;k[0][0]<k[1][0]?(x=k[0],E=k[1]):(x=k[1],E=k[0]);var S=u(x,E,b);if(S<0)M=M.left;else if(S>0)if(b[0]!==k[1][0])w=M,M=M.right;else{var g=d(M.right,b);if(g)return g;M=M.left}else{if(b[0]!==k[1][0])return M;var g=d(M.right,b);if(g)return g;M=M.left}}return w}h.castUp=function(M){var b=s.le(this.coordinates,M[0]);if(b<0)return-1;var w=this.slabs[b],k=d(this.slabs[b],M),x=-1;if(k&&(x=k.value),this.coordinates[b]===M[0]){var E=null;if(k&&(E=k.key),b>0){var S=d(this.slabs[b-1],M);S&&(E?f(S.key,E)>0&&(E=S.key,x=S.value):(x=S.value,E=S.key))}var g=this.horizontal[b];if(g.length>0){var C=s.ge(g,M[1],v);if(C<g.length){var A=g[C];if(M[1]===A.y){if(A.closed)return A.index;for(;C<g.length-1&&g[C+1].y===M[1];)if(C=C+1,A=g[C],A.closed)return A.index;if(A.y===M[1]&&!A.start){if(C=C+1,C>=g.length)return x;A=g[C]}}if(A.start)if(E){var P=u(E[0],E[1],[M[0],A.y]);E[0][0]>E[1][0]&&(P=-P),P>0&&(x=A.index)}else x=A.index;else A.y!==M[1]&&(x=A.index)}}}return x};function _(M,b,w,k){this.y=M,this.index=b,this.start=w,this.closed=k}function T(M,b,w,k){this.x=M,this.segment=b,this.create=w,this.index=k}function p(M){for(var b=M.length,w=2*b,k=new Array(w),x=0;x<b;++x){var E=M[x],S=E[0][0]<E[1][0];k[2*x]=new T(E[0][0],E,S,x),k[2*x+1]=new T(E[1][0],E,!S,x)}k.sort(function(B,F){var N=B.x-F.x;return N||(N=B.create-F.create,N)?N:Math.min(B.segment[0][1],B.segment[1][1])-Math.min(F.segment[0][1],F.segment[1][1])});for(var g=l(f),C=[],A=[],P=[],D=-1/0,x=0;x<w;){for(var z=k[x].x,O=[];x<w;){var V=k[x];if(V.x!==z)break;x+=1,V.segment[0][0]===V.x&&V.segment[1][0]===V.x?V.create&&(V.segment[0][1]<V.segment[1][1]?(O.push(new _(V.segment[0][1],V.index,!0,!0)),O.push(new _(V.segment[1][1],V.index,!1,!1))):(O.push(new _(V.segment[1][1],V.index,!0,!1)),O.push(new _(V.segment[0][1],V.index,!1,!0)))):V.create?g=g.insert(V.segment,V.index):g=g.remove(V.segment)}C.push(g.root),A.push(z),P.push(O)}return new c(C,A,P)}},5202:function(n,a,o){"use strict";var s=o(1944),l=o(8210);n.exports=c,n.exports.positive=h,n.exports.negative=v;function u(d,_){var T=l(s(d,_),[_[_.length-1]]);return T[T.length-1]}function f(d,_,T,p){var M=p-_,b=-_/M;b<0?b=0:b>1&&(b=1);for(var w=1-b,k=d.length,x=new Array(k),E=0;E<k;++E)x[E]=b*d[E]+w*T[E];return x}function c(d,_){for(var T=[],p=[],M=u(d[d.length-1],_),b=d[d.length-1],w=d[0],k=0;k<d.length;++k,b=w){w=d[k];var x=u(w,_);if(M<0&&x>0||M>0&&x<0){var E=f(b,x,w,M);T.push(E),p.push(E.slice())}x<0?p.push(w.slice()):x>0?T.push(w.slice()):(T.push(w.slice()),p.push(w.slice())),M=x}return{positive:T,negative:p}}function h(d,_){for(var T=[],p=u(d[d.length-1],_),M=d[d.length-1],b=d[0],w=0;w<d.length;++w,M=b){b=d[w];var k=u(b,_);(p<0&&k>0||p>0&&k<0)&&T.push(f(M,k,b,p)),k>=0&&T.push(b.slice()),p=k}return T}function v(d,_){for(var T=[],p=u(d[d.length-1],_),M=d[d.length-1],b=d[0],w=0;w<d.length;++w,M=b){b=d[w];var k=u(b,_);(p<0&&k>0||p>0&&k<0)&&T.push(f(M,k,b,p)),k<=0&&T.push(b.slice()),p=k}return T}},3387:function(n,a,o){var s;(function(){"use strict";var l={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function u(d){return c(v(d),arguments)}function f(d,_){return u.apply(null,[d].concat(_||[]))}function c(d,_){var T=1,p=d.length,M,b="",w,k,x,E,S,g,C,A;for(w=0;w<p;w++)if(typeof d[w]=="string")b+=d[w];else if(typeof d[w]=="object"){if(x=d[w],x.keys)for(M=_[T],k=0;k<x.keys.length;k++){if(M==null)throw new Error(u('[sprintf] Cannot access property "%s" of undefined value "%s"',x.keys[k],x.keys[k-1]));M=M[x.keys[k]]}else x.param_no?M=_[x.param_no]:M=_[T++];if(l.not_type.test(x.type)&&l.not_primitive.test(x.type)&&M instanceof Function&&(M=M()),l.numeric_arg.test(x.type)&&typeof M!="number"&&isNaN(M))throw new TypeError(u("[sprintf] expecting number but found %T",M));switch(l.number.test(x.type)&&(C=M>=0),x.type){case"b":M=parseInt(M,10).toString(2);break;case"c":M=String.fromCharCode(parseInt(M,10));break;case"d":case"i":M=parseInt(M,10);break;case"j":M=JSON.stringify(M,null,x.width?parseInt(x.width):0);break;case"e":M=x.precision?parseFloat(M).toExponential(x.precision):parseFloat(M).toExponential();break;case"f":M=x.precision?parseFloat(M).toFixed(x.precision):parseFloat(M);break;case"g":M=x.precision?String(Number(M.toPrecision(x.precision))):parseFloat(M);break;case"o":M=(parseInt(M,10)>>>0).toString(8);break;case"s":M=String(M),M=x.precision?M.substring(0,x.precision):M;break;case"t":M=String(!!M),M=x.precision?M.substring(0,x.precision):M;break;case"T":M=Object.prototype.toString.call(M).slice(8,-1).toLowerCase(),M=x.precision?M.substring(0,x.precision):M;break;case"u":M=parseInt(M,10)>>>0;break;case"v":M=M.valueOf(),M=x.precision?M.substring(0,x.precision):M;break;case"x":M=(parseInt(M,10)>>>0).toString(16);break;case"X":M=(parseInt(M,10)>>>0).toString(16).toUpperCase();break}l.json.test(x.type)?b+=M:(l.number.test(x.type)&&(!C||x.sign)?(A=C?"+":"-",M=M.toString().replace(l.sign,"")):A="",S=x.pad_char?x.pad_char==="0"?"0":x.pad_char.charAt(1):" ",g=x.width-(A+M).length,E=x.width&&g>0?S.repeat(g):"",b+=x.align?A+M+E:S==="0"?A+E+M:E+A+M)}return b}var h=Object.create(null);function v(d){if(h[d])return h[d];for(var _=d,T,p=[],M=0;_;){if((T=l.text.exec(_))!==null)p.push(T[0]);else if((T=l.modulo.exec(_))!==null)p.push("%");else if((T=l.placeholder.exec(_))!==null){if(T[2]){M|=1;var b=[],w=T[2],k=[];if((k=l.key.exec(w))!==null)for(b.push(k[1]);(w=w.substring(k[0].length))!=="";)if((k=l.key_access.exec(w))!==null)b.push(k[1]);else if((k=l.index_access.exec(w))!==null)b.push(k[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");T[2]=b}else M|=2;if(M===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");p.push({placeholder:T[0],param_no:T[1],keys:T[2],sign:T[3],pad_char:T[4],align:T[5],width:T[6],precision:T[7],type:T[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");_=_.substring(T[0].length)}return h[d]=p}a.sprintf=u,a.vsprintf=f,typeof window!="undefined"&&(window.sprintf=u,window.vsprintf=f,s=function(){return{sprintf:u,vsprintf:f}}.call(a,o,a,n),s!==void 0&&(n.exports=s))})()},3711:function(n,a,o){"use strict";n.exports=v;var s=o(2640),l=o(781),u={"2d":function(d,_,T){var p=d({order:_,scalarArguments:3,getters:T==="generic"?[0]:void 0,phase:function(b,w,k,x){return b>x|0},vertex:function(b,w,k,x,E,S,g,C,A,P,D,z,O){var V=(g<<0)+(C<<1)+(A<<2)+(P<<3)|0;if(!(V===0||V===15))switch(V){case 0:D.push([b-.5,w-.5]);break;case 1:D.push([b-.25-.25*(x+k-2*O)/(k-x),w-.25-.25*(E+k-2*O)/(k-E)]);break;case 2:D.push([b-.75-.25*(-x-k+2*O)/(x-k),w-.25-.25*(S+x-2*O)/(x-S)]);break;case 3:D.push([b-.5,w-.5-.5*(E+k+S+x-4*O)/(k-E+x-S)]);break;case 4:D.push([b-.25-.25*(S+E-2*O)/(E-S),w-.75-.25*(-E-k+2*O)/(E-k)]);break;case 5:D.push([b-.5-.5*(x+k+S+E-4*O)/(k-x+E-S),w-.5]);break;case 6:D.push([b-.5-.25*(-x-k+S+E)/(x-k+E-S),w-.5-.25*(-E-k+S+x)/(E-k+x-S)]);break;case 7:D.push([b-.75-.25*(S+E-2*O)/(E-S),w-.75-.25*(S+x-2*O)/(x-S)]);break;case 8:D.push([b-.75-.25*(-S-E+2*O)/(S-E),w-.75-.25*(-S-x+2*O)/(S-x)]);break;case 9:D.push([b-.5-.25*(x+k+-S-E)/(k-x+S-E),w-.5-.25*(E+k+-S-x)/(k-E+S-x)]);break;case 10:D.push([b-.5-.5*(-x-k+-S-E+4*O)/(x-k+S-E),w-.5]);break;case 11:D.push([b-.25-.25*(-S-E+2*O)/(S-E),w-.75-.25*(E+k-2*O)/(k-E)]);break;case 12:D.push([b-.5,w-.5-.5*(-E-k+-S-x+4*O)/(E-k+S-x)]);break;case 13:D.push([b-.75-.25*(x+k-2*O)/(k-x),w-.25-.25*(-S-x+2*O)/(S-x)]);break;case 14:D.push([b-.25-.25*(-x-k+2*O)/(x-k),w-.25-.25*(-E-k+2*O)/(E-k)]);break;case 15:D.push([b-.5,w-.5]);break}},cell:function(b,w,k,x,E,S,g,C,A){E?C.push([b,w]):C.push([w,b])}});return function(M,b){var w=[],k=[];return p(M,w,k,b),{positions:w,cells:k}}}};function f(d,_){var T=d.length+"d",p=u[T];if(p)return p(s,d,_)}function c(d,_){for(var T=l(d,_),p=T.length,M=new Array(p),b=new Array(p),w=0;w<p;++w)M[w]=[T[w]],b[w]=[w];return{positions:M,cells:b}}var h={};function v(d,M){if(d.dimension<=0)return{positions:[],cells:[]};if(d.dimension===1)return c(d,M);var T=d.order.join()+"-"+d.dtype,p=h[T],M=+M||0;return p||(p=h[T]=f(d.order,d.dtype)),p(d,M)}},529:function(n,a,o){"use strict";n.exports=c;var s=o(4359),l=window||process.global||{},u=l.__TEXT_CACHE||{};l.__TEXT_CACHE={};function f(h){for(var v=h.cells,d=h.positions,_=new Float32Array(v.length*6),T=0,p=0,M=0;M<v.length;++M)for(var b=v[M],w=0;w<3;++w){var k=d[b[w]];_[T++]=k[0],_[T++]=k[1]+1.4,p=Math.max(k[0],p)}return{data:_,shape:p}}function c(h,v,_){var _=_||{},T=u[h];T||(T=u[h]={" ":{data:new Float32Array(0),shape:.2}});var p=T[v];if(!p)if(v.length<=1||!/\d/.test(v))p=T[v]=f(s(v,{triangles:!0,font:h,textAlign:_.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var M=v.split(/(\d|\s)/),b=new Array(M.length),w=0,k=0,x=0;x<M.length;++x)b[x]=c(h,M[x]),w+=b[x].data.length,k+=b[x].shape,x>0&&(k+=.02);for(var E=new Float32Array(w),S=0,g=-.5*k,x=0;x<b.length;++x){for(var C=b[x].data,A=0;A<C.length;A+=2)E[S++]=C[A]+g,E[S++]=C[A+1];g+=b[x].shape+.02}p=T[v]={data:E,shape:k}}return p}},665:function(n,a,o){"use strict";var s=o(3202);n.exports=c;var l=96;function u(h,v){var d=s(getComputedStyle(h).getPropertyValue(v));return d[0]*c(d[1],h)}function f(h,v){var d=document.createElement("div");d.style["font-size"]="128"+h,v.appendChild(d);var _=u(d,"font-size")/128;return v.removeChild(d),_}function c(h,v){switch(v=v||document.body,h=(h||"px").trim().toLowerCase(),(v===window||v===document)&&(v=document.body),h){case"%":return v.clientHeight/100;case"ch":case"ex":return f(h,v);case"em":return u(v,"font-size");case"rem":return u(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return l;case"cm":return l/2.54;case"mm":return l/25.4;case"pt":return l/72;case"pc":return l/6}return 1}},7261:function(n,a,o){"use strict";n.exports=b;var s=o(9215),l=o(7608),u=o(6079),f=o(5911),c=o(3536),h=o(244);function v(w,k,x){return Math.sqrt(Math.pow(w,2)+Math.pow(k,2)+Math.pow(x,2))}function d(w){return Math.min(1,Math.max(-1,w))}function _(w){var k=Math.abs(w[0]),x=Math.abs(w[1]),E=Math.abs(w[2]),S=[0,0,0];k>Math.max(x,E)?S[2]=1:x>Math.max(k,E)?S[0]=1:S[1]=1;for(var g=0,C=0,A=0;A<3;++A)g+=w[A]*w[A],C+=S[A]*w[A];for(var A=0;A<3;++A)S[A]-=C/g*w[A];return c(S,S),S}function T(w,k,x,E,S,g,C,A){this.center=s(x),this.up=s(E),this.right=s(S),this.radius=s([g]),this.angle=s([C,A]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(w,k),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var P=0;P<16;++P)this.computedMatrix[P]=.5;this.recalcMatrix(0)}var p=T.prototype;p.setDistanceLimits=function(w,k){w>0?w=Math.log(w):w=-1/0,k>0?k=Math.log(k):k=1/0,k=Math.max(k,w),this.radius.bounds[0][0]=w,this.radius.bounds[1][0]=k},p.getDistanceLimits=function(w){var k=this.radius.bounds[0];return w?(w[0]=Math.exp(k[0][0]),w[1]=Math.exp(k[1][0]),w):[Math.exp(k[0][0]),Math.exp(k[1][0])]},p.recalcMatrix=function(w){this.center.curve(w),this.up.curve(w),this.right.curve(w),this.radius.curve(w),this.angle.curve(w);for(var k=this.computedUp,x=this.computedRight,E=0,S=0,g=0;g<3;++g)S+=k[g]*x[g],E+=k[g]*k[g];for(var C=Math.sqrt(E),A=0,g=0;g<3;++g)x[g]-=k[g]*S/E,A+=x[g]*x[g],k[g]/=C;for(var P=Math.sqrt(A),g=0;g<3;++g)x[g]/=P;var D=this.computedToward;f(D,k,x),c(D,D);for(var z=Math.exp(this.computedRadius[0]),O=this.computedAngle[0],V=this.computedAngle[1],B=Math.cos(O),F=Math.sin(O),N=Math.cos(V),Z=Math.sin(V),J=this.computedCenter,re=B*N,ue=F*N,fe=Z,K=-B*Z,X=-F*Z,ae=N,oe=this.computedEye,me=this.computedMatrix,g=0;g<3;++g){var xe=re*x[g]+ue*D[g]+fe*k[g];me[4*g+1]=K*x[g]+X*D[g]+ae*k[g],me[4*g+2]=xe,me[4*g+3]=0}var ce=me[1],ie=me[5],ge=me[9],le=me[2],we=me[6],Re=me[10],qe=ie*Re-ge*we,et=ge*le-ce*Re,Pe=ce*we-ie*le,Ie=v(qe,et,Pe);qe/=Ie,et/=Ie,Pe/=Ie,me[0]=qe,me[4]=et,me[8]=Pe;for(var g=0;g<3;++g)oe[g]=J[g]+me[2+4*g]*z;for(var g=0;g<3;++g){for(var A=0,ut=0;ut<3;++ut)A+=me[g+4*ut]*oe[ut];me[12+g]=-A}me[15]=1},p.getMatrix=function(w,k){this.recalcMatrix(w);var x=this.computedMatrix;if(k){for(var E=0;E<16;++E)k[E]=x[E];return k}return x};var M=[0,0,0];p.rotate=function(w,k,x,E){if(this.angle.move(w,k,x),E){this.recalcMatrix(w);var S=this.computedMatrix;M[0]=S[2],M[1]=S[6],M[2]=S[10];for(var g=this.computedUp,C=this.computedRight,A=this.computedToward,P=0;P<3;++P)S[4*P]=g[P],S[4*P+1]=C[P],S[4*P+2]=A[P];u(S,S,E,M);for(var P=0;P<3;++P)g[P]=S[4*P],C[P]=S[4*P+1];this.up.set(w,g[0],g[1],g[2]),this.right.set(w,C[0],C[1],C[2])}},p.pan=function(w,k,x,E){k=k||0,x=x||0,E=E||0,this.recalcMatrix(w);var S=this.computedMatrix,g=Math.exp(this.computedRadius[0]),C=S[1],A=S[5],P=S[9],D=v(C,A,P);C/=D,A/=D,P/=D;var z=S[0],O=S[4],V=S[8],B=z*C+O*A+V*P;z-=C*B,O-=A*B,V-=P*B;var F=v(z,O,V);z/=F,O/=F,V/=F;var N=z*k+C*x,Z=O*k+A*x,J=V*k+P*x;this.center.move(w,N,Z,J);var re=Math.exp(this.computedRadius[0]);re=Math.max(1e-4,re+E),this.radius.set(w,Math.log(re))},p.translate=function(w,k,x,E){this.center.move(w,k||0,x||0,E||0)},p.setMatrix=function(w,k,x,E){var S=1;typeof x=="number"&&(S=x|0),(S<0||S>3)&&(S=1);var g=(S+2)%3,C=(S+1)%3;k||(this.recalcMatrix(w),k=this.computedMatrix);var A=k[S],P=k[S+4],D=k[S+8];if(E){var O=Math.abs(A),V=Math.abs(P),B=Math.abs(D),F=Math.max(O,V,B);O===F?(A=A<0?-1:1,P=D=0):B===F?(D=D<0?-1:1,A=P=0):(P=P<0?-1:1,A=D=0)}else{var z=v(A,P,D);A/=z,P/=z,D/=z}var N=k[g],Z=k[g+4],J=k[g+8],re=N*A+Z*P+J*D;N-=A*re,Z-=P*re,J-=D*re;var ue=v(N,Z,J);N/=ue,Z/=ue,J/=ue;var fe=P*J-D*Z,K=D*N-A*J,X=A*Z-P*N,ae=v(fe,K,X);fe/=ae,K/=ae,X/=ae,this.center.jump(w,Lt,Me,Ze),this.radius.idle(w),this.up.jump(w,A,P,D),this.right.jump(w,N,Z,J);var oe,me;if(S===2){var xe=k[1],ce=k[5],ie=k[9],ge=xe*N+ce*Z+ie*J,le=xe*fe+ce*K+ie*X;et<0?oe=-Math.PI/2:oe=Math.PI/2,me=Math.atan2(le,ge)}else{var we=k[2],Re=k[6],qe=k[10],et=we*A+Re*P+qe*D,Pe=we*N+Re*Z+qe*J,Ie=we*fe+Re*K+qe*X;oe=Math.asin(d(et)),me=Math.atan2(Ie,Pe)}this.angle.jump(w,me,oe),this.recalcMatrix(w);var ut=k[2],ft=k[6],je=k[10],_t=this.computedMatrix;l(_t,k);var Bt=_t[15],Lt=_t[12]/Bt,Me=_t[13]/Bt,Ze=_t[14]/Bt,dt=Math.exp(this.computedRadius[0]);this.center.jump(w,Lt-ut*dt,Me-ft*dt,Ze-je*dt)},p.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},p.idle=function(w){this.center.idle(w),this.up.idle(w),this.right.idle(w),this.radius.idle(w),this.angle.idle(w)},p.flush=function(w){this.center.flush(w),this.up.flush(w),this.right.flush(w),this.radius.flush(w),this.angle.flush(w)},p.setDistance=function(w,k){k>0&&this.radius.set(w,Math.log(k))},p.lookAt=function(w,k,x,E){this.recalcMatrix(w),k=k||this.computedEye,x=x||this.computedCenter,E=E||this.computedUp;var S=E[0],g=E[1],C=E[2],A=v(S,g,C);if(!(A<1e-6)){S/=A,g/=A,C/=A;var P=k[0]-x[0],D=k[1]-x[1],z=k[2]-x[2],O=v(P,D,z);if(!(O<1e-6)){P/=O,D/=O,z/=O;var V=this.computedRight,B=V[0],F=V[1],N=V[2],Z=S*B+g*F+C*N;B-=Z*S,F-=Z*g,N-=Z*C;var J=v(B,F,N);if(!(J<.01&&(B=g*z-C*D,F=C*P-S*z,N=S*D-g*P,J=v(B,F,N),J<1e-6))){B/=J,F/=J,N/=J,this.up.set(w,S,g,C),this.right.set(w,B,F,N),this.center.set(w,x[0],x[1],x[2]),this.radius.set(w,Math.log(O));var re=g*N-C*F,ue=C*B-S*N,fe=S*F-g*B,K=v(re,ue,fe);re/=K,ue/=K,fe/=K;var X=S*P+g*D+C*z,ae=B*P+F*D+N*z,oe=re*P+ue*D+fe*z,me=Math.asin(d(X)),xe=Math.atan2(oe,ae),ce=this.angle._state,ie=ce[ce.length-1],ge=ce[ce.length-2];ie=ie%(2*Math.PI);var le=Math.abs(ie+2*Math.PI-xe),we=Math.abs(ie-xe),Re=Math.abs(ie-2*Math.PI-xe);le<we&&(ie+=2*Math.PI),Re<we&&(ie-=2*Math.PI),this.angle.jump(this.angle.lastT(),ie,ge),this.angle.set(w,xe,me)}}}};function b(w){w=w||{};var k=w.center||[0,0,0],x=w.up||[0,1,0],E=w.right||_(x),S=w.radius||1,g=w.theta||0,C=w.phi||0;if(k=[].slice.call(k,0,3),x=[].slice.call(x,0,3),c(x,x),E=[].slice.call(E,0,3),c(E,E),"eye"in w){var A=w.eye,P=[A[0]-k[0],A[1]-k[1],A[2]-k[2]];f(E,P,x),v(E[0],E[1],E[2])<1e-6?E=_(x):c(E,E),S=v(P[0],P[1],P[2]);var D=h(x,P)/S,z=h(E,P)/S;C=Math.acos(D),g=Math.acos(z)}return S=Math.log(S),new T(w.zoomMin,w.zoomMax,k,x,E,S,g,C)}},5250:function(n){"use strict";n.exports=o;var a=+(Math.pow(2,27)+1);function o(s,l,u){var f=s*l,c=a*s,h=c-s,v=c-h,d=s-v,_=a*l,T=_-l,p=_-T,M=l-p,b=f-v*p,w=b-d*p,k=w-v*M,x=d*M-k;return u?(u[0]=x,u[1]=f,u):[x,f]}},9362:function(n){"use strict";n.exports=a;function a(o,s,l){var u=o+s,f=u-o,c=u-f,h=s-f,v=o-c;return l?(l[0]=v+h,l[1]=u,l):[v+h,u]}},1888:function(n,a,o){"use strict";var s=o(8828),l=o(1338),u=o(4793).hp;o.g.__TYPEDARRAY_POOL||(o.g.__TYPEDARRAY_POOL={UINT8:l([32,0]),UINT16:l([32,0]),UINT32:l([32,0]),BIGUINT64:l([32,0]),INT8:l([32,0]),INT16:l([32,0]),INT32:l([32,0]),BIGINT64:l([32,0]),FLOAT:l([32,0]),DOUBLE:l([32,0]),DATA:l([32,0]),UINT8C:l([32,0]),BUFFER:l([32,0])});var f=typeof Uint8ClampedArray!="undefined",c=typeof BigUint64Array!="undefined",h=typeof BigInt64Array!="undefined",v=o.g.__TYPEDARRAY_POOL;v.UINT8C||(v.UINT8C=l([32,0])),v.BIGUINT64||(v.BIGUINT64=l([32,0])),v.BIGINT64||(v.BIGINT64=l([32,0])),v.BUFFER||(v.BUFFER=l([32,0]));var d=v.DATA,_=v.BUFFER;a.free=function(B){if(u.isBuffer(B))_[s.log2(B.length)].push(B);else{if(Object.prototype.toString.call(B)!=="[object ArrayBuffer]"&&(B=B.buffer),!B)return;var F=B.length||B.byteLength,N=s.log2(F)|0;d[N].push(B)}};function T(V){if(V){var B=V.length||V.byteLength,F=s.log2(B);d[F].push(V)}}function p(V){T(V.buffer)}a.freeUint8=a.freeUint16=a.freeUint32=a.freeBigUint64=a.freeInt8=a.freeInt16=a.freeInt32=a.freeBigInt64=a.freeFloat32=a.freeFloat=a.freeFloat64=a.freeDouble=a.freeUint8Clamped=a.freeDataView=p,a.freeArrayBuffer=T,a.freeBuffer=function(B){_[s.log2(B.length)].push(B)},a.malloc=function(B,F){if(F===void 0||F==="arraybuffer")return M(B);switch(F){case"uint8":return b(B);case"uint16":return w(B);case"uint32":return k(B);case"int8":return x(B);case"int16":return E(B);case"int32":return S(B);case"float":case"float32":return g(B);case"double":case"float64":return C(B);case"uint8_clamped":return A(B);case"bigint64":return D(B);case"biguint64":return P(B);case"buffer":return O(B);case"data":case"dataview":return z(B);default:return null}return null};function M(B){var B=s.nextPow2(B),F=s.log2(B),N=d[F];return N.length>0?N.pop():new ArrayBuffer(B)}a.mallocArrayBuffer=M;function b(V){return new Uint8Array(M(V),0,V)}a.mallocUint8=b;function w(V){return new Uint16Array(M(2*V),0,V)}a.mallocUint16=w;function k(V){return new Uint32Array(M(4*V),0,V)}a.mallocUint32=k;function x(V){return new Int8Array(M(V),0,V)}a.mallocInt8=x;function E(V){return new Int16Array(M(2*V),0,V)}a.mallocInt16=E;function S(V){return new Int32Array(M(4*V),0,V)}a.mallocInt32=S;function g(V){return new Float32Array(M(4*V),0,V)}a.mallocFloat32=a.mallocFloat=g;function C(V){return new Float64Array(M(8*V),0,V)}a.mallocFloat64=a.mallocDouble=C;function A(V){return f?new Uint8ClampedArray(M(V),0,V):b(V)}a.mallocUint8Clamped=A;function P(V){return c?new BigUint64Array(M(8*V),0,V):null}a.mallocBigUint64=P;function D(V){return h?new BigInt64Array(M(8*V),0,V):null}a.mallocBigInt64=D;function z(V){return new DataView(M(V),0,V)}a.mallocDataView=z;function O(V){V=s.nextPow2(V);var B=s.log2(V),F=_[B];return F.length>0?F.pop():new u(V)}a.mallocBuffer=O,a.clearCache=function(){for(var B=0;B<32;++B)v.UINT8[B].length=0,v.UINT16[B].length=0,v.UINT32[B].length=0,v.INT8[B].length=0,v.INT16[B].length=0,v.INT32[B].length=0,v.FLOAT[B].length=0,v.DOUBLE[B].length=0,v.BIGUINT64[B].length=0,v.BIGINT64[B].length=0,v.UINT8C[B].length=0,d[B].length=0,_[B].length=0}},1755:function(n){"use strict";"use restrict";n.exports=a;function a(s){this.roots=new Array(s),this.ranks=new Array(s);for(var l=0;l<s;++l)this.roots[l]=l,this.ranks[l]=0}var o=a.prototype;Object.defineProperty(o,"length",{get:function(){return this.roots.length}}),o.makeSet=function(){var s=this.roots.length;return this.roots.push(s),this.ranks.push(0),s},o.find=function(s){for(var l=s,u=this.roots;u[s]!==s;)s=u[s];for(;u[l]!==s;){var f=u[l];u[l]=s,l=f}return s},o.link=function(s,l){var u=this.find(s),f=this.find(l);if(u!==f){var c=this.ranks,h=this.roots,v=c[u],d=c[f];v<d?h[u]=f:d<v?h[f]=u:(h[f]=u,++c[u])}}},1682:function(n){"use strict";function a(l,u){for(var f=1,c=l.length,h=l[0],v=l[0],d=1;d<c;++d)if(v=h,h=l[d],u(h,v)){if(d===f){f++;continue}l[f++]=h}return l.length=f,l}function o(l){for(var u=1,f=l.length,c=l[0],h=l[0],v=1;v<f;++v,h=c)if(h=c,c=l[v],c!==h){if(v===u){u++;continue}l[u++]=c}return l.length=u,l}function s(l,u,f){return l.length===0?l:u?(f||l.sort(u),a(l,u)):(f||l.sort(),o(l))}n.exports=s},4359:function(n,a,o){"use strict";n.exports=f;var s=o(7718),l=null,u=null;typeof document!="undefined"&&(l=document.createElement("canvas"),l.width=8192,l.height=1024,u=l.getContext("2d"));function f(c,h){return(typeof h!="object"||h===null)&&(h={}),s(c,h.canvas||l,h.context||u,h)}},7718:function(n,a,o){n.exports=D,n.exports.processPixels=P;var s=o(3711),l=o(9618),u=o(5878),f=o(332),c=o(2538),h=o(2095),v="b",d="b|",_="i",T="i|",p="sup",M="+",b="+1",w="sub",k="-",x="-1";function E(z,O,V,B){for(var F="<"+z+">",N="</"+z+">",Z=F.length,J=N.length,re=O[0]===M||O[0]===k,ue=0,fe=-J;ue>-1&&(ue=V.indexOf(F,ue),!(ue===-1||(fe=V.indexOf(N,ue+Z),fe===-1)||fe<=ue));){for(var K=ue;K<fe+J;++K)if(K<ue+Z||K>=fe)B[K]=null,V=V.substr(0,K)+" "+V.substr(K+1);else if(B[K]!==null){var X=B[K].indexOf(O[0]);X===-1?B[K]+=O:re&&(B[K]=B[K].substr(0,X+1)+(1+parseInt(B[K][X+1]))+B[K].substr(X+2))}var ae=ue+Z,oe=V.substr(ae,fe-ae),me=oe.indexOf(F);me!==-1?ue=me:ue=fe+J}return B}function S(z,O,V){for(var B=O.textAlign||"start",F=O.textBaseline||"alphabetic",N=[1<<30,1<<30],Z=[0,0],J=z.length,re=0;re<J;++re)for(var ue=z[re],fe=0;fe<2;++fe)N[fe]=Math.min(N[fe],ue[fe])|0,Z[fe]=Math.max(Z[fe],ue[fe])|0;var K=0;switch(B){case"center":K=-.5*(N[0]+Z[0]);break;case"right":case"end":K=-Z[0];break;case"left":case"start":K=-N[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+B+"'")}var X=0;switch(F){case"hanging":case"top":X=-N[1];break;case"middle":X=-.5*(N[1]+Z[1]);break;case"alphabetic":case"ideographic":X=-3*V;break;case"bottom":X=-Z[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+F+"'")}var ae=1/V;return"lineHeight"in O?ae*=+O.lineHeight:"width"in O?ae=O.width/(Z[0]-N[0]):"height"in O&&(ae=O.height/(Z[1]-N[1])),z.map(function(oe){return[ae*(oe[0]+K),ae*(oe[1]+X)]})}function g(z,O,V,B,F,N){V=V.replace(/\n/g,""),N.breaklines===!0?V=V.replace(/\<br\>/g,`
`):V=V.replace(/\<br\>/g," ");var Z="",J=[];for(ie=0;ie<V.length;++ie)J[ie]=Z;N.bolds===!0&&(J=E(v,d,V,J)),N.italics===!0&&(J=E(_,T,V,J)),N.superscripts===!0&&(J=E(p,b,V,J)),N.subscripts===!0&&(J=E(w,x,V,J));var re=[],ue="";for(ie=0;ie<V.length;++ie)J[ie]!==null&&(ue+=V[ie],re.push(J[ie]));var fe=ue.split(`
`),K=fe.length,X=Math.round(F*B),ae=B,oe=B*2,me=0,xe=K*X+oe;z.height<xe&&(z.height=xe),O.fillStyle="#000",O.fillRect(0,0,z.width,z.height),O.fillStyle="#fff";var ce,ie,ge,le,we,Re=0,qe="";function et(){if(qe!==""){var Me=O.measureText(qe).width;O.fillText(qe,ae+ge,oe+le),ge+=Me}}function Pe(){return""+Math.round(we)+"px "}function Ie(Me,Ze){var dt=""+O.font;if(N.subscripts===!0){var it=Me.indexOf(k),vt=Ze.indexOf(k),rt=it>-1?parseInt(Me[1+it]):0,We=vt>-1?parseInt(Ze[1+vt]):0;rt!==We&&(dt=dt.replace(Pe(),"?px "),we*=Math.pow(.75,We-rt),dt=dt.replace("?px ",Pe())),le+=.25*X*(We-rt)}if(N.superscripts===!0){var ht=Me.indexOf(M),mt=Ze.indexOf(M),er=ht>-1?parseInt(Me[1+ht]):0,$t=mt>-1?parseInt(Ze[1+mt]):0;er!==$t&&(dt=dt.replace(Pe(),"?px "),we*=Math.pow(.75,$t-er),dt=dt.replace("?px ",Pe())),le-=.25*X*($t-er)}if(N.bolds===!0){var cr=Me.indexOf(d)>-1,or=Ze.indexOf(d)>-1;!cr&&or&&(vr?dt=dt.replace("italic ","italic bold "):dt="bold "+dt),cr&&!or&&(dt=dt.replace("bold ",""))}if(N.italics===!0){var vr=Me.indexOf(T)>-1,Ot=Ze.indexOf(T)>-1;!vr&&Ot&&(dt="italic "+dt),vr&&!Ot&&(dt=dt.replace("italic ",""))}O.font=dt}for(ce=0;ce<K;++ce){var ut=fe[ce]+`
`;for(ge=0,le=ce*X,we=B,qe="",ie=0;ie<ut.length;++ie){var ft=ie+Re<re.length?re[ie+Re]:re[re.length-1];Z===ft?qe+=ut[ie]:(et(),qe=ut[ie],ft!==void 0&&(Ie(Z,ft),Z=ft))}et(),Re+=ut.length;var je=Math.round(ge+2*ae)|0;me<je&&(me=je)}var _t=me,Bt=oe+X*K,Lt=l(O.getImageData(0,0,_t,Bt).data,[Bt,_t,4]);return Lt.pick(-1,-1,0).transpose(1,0)}function C(z,O){var V=s(z,128);return O?u(V.cells,V.positions,.25):{edges:V.cells,positions:V.positions}}function A(z,O,V,B){var F=C(z,B),N=S(F.positions,O,V),Z=F.edges,J=O.orientation==="ccw";if(f(N,Z),O.polygons||O.polygon||O.polyline){for(var re=h(Z,N),ue=new Array(re.length),fe=0;fe<re.length;++fe){for(var K=re[fe],X=new Array(K.length),ae=0;ae<K.length;++ae){for(var oe=K[ae],me=new Array(oe.length),xe=0;xe<oe.length;++xe)me[xe]=N[oe[xe]].slice();J&&me.reverse(),X[ae]=me}ue[fe]=X}return ue}else return O.triangles||O.triangulate||O.triangle?{cells:c(N,Z,{delaunay:!1,exterior:!1,interior:!0}),positions:N}:{edges:Z,positions:N}}function P(z,O,V){try{return A(z,O,V,!0)}catch(B){}try{return A(z,O,V,!1)}catch(B){}return O.polygons||O.polyline||O.polygon?[]:O.triangles||O.triangulate||O.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function D(z,O,V,B){var F=64,N=1.25,Z={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};B&&(B.size&&B.size>0&&(F=B.size),B.lineSpacing&&B.lineSpacing>0&&(N=B.lineSpacing),B.styletags&&B.styletags.breaklines&&(Z.breaklines=!!B.styletags.breaklines),B.styletags&&B.styletags.bolds&&(Z.bolds=!!B.styletags.bolds),B.styletags&&B.styletags.italics&&(Z.italics=!!B.styletags.italics),B.styletags&&B.styletags.subscripts&&(Z.subscripts=!!B.styletags.subscripts),B.styletags&&B.styletags.superscripts&&(Z.superscripts=!!B.styletags.superscripts)),V.font=[B.fontStyle,B.fontVariant,B.fontWeight,F+"px",B.font].filter(function(re){return re}).join(" "),V.textAlign="start",V.textBaseline="alphabetic",V.direction="ltr";var J=g(O,V,z,F,N,Z);return P(J,B,F)}},1538:function(n){(function(){"use strict";if(typeof ses!="undefined"&&ses.ok&&!ses.ok())return;function o(A){A.permitHostObjects___&&A.permitHostObjects___(o)}typeof ses!="undefined"&&(ses.weakMapPermitHostObjects=o);var s=!1;if(typeof WeakMap=="function"){var l=WeakMap;if(!(typeof navigator!="undefined"&&/Firefox/.test(navigator.userAgent))){var u=new l,f=Object.freeze({});if(u.set(f,1),u.get(f)!==1)s=!0;else{n.exports=WeakMap;return}}}var c=Object.prototype.hasOwnProperty,h=Object.getOwnPropertyNames,v=Object.defineProperty,d=Object.isExtensible,_="weakmap:",T=_+"ident:"+Math.random()+"___";if(typeof crypto!="undefined"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var p=new ArrayBuffer(25),M=new Uint8Array(p);crypto.getRandomValues(M),T=_+"rand:"+Array.prototype.map.call(M,function(A){return(A%36).toString(36)}).join("")+"___"}function b(A){return!(A.substr(0,_.length)==_&&A.substr(A.length-3)==="___")}if(v(Object,"getOwnPropertyNames",{value:function(P){return h(P).filter(b)}}),"getPropertyNames"in Object){var w=Object.getPropertyNames;v(Object,"getPropertyNames",{value:function(P){return w(P).filter(b)}})}function k(A){if(A!==Object(A))throw new TypeError("Not an object: "+A);var P=A[T];if(P&&P.key===A)return P;if(d(A)){P={key:A};try{return v(A,T,{value:P,writable:!1,enumerable:!1,configurable:!1}),P}catch(D){return}}}(function(){var A=Object.freeze;v(Object,"freeze",{value:function(O){return k(O),A(O)}});var P=Object.seal;v(Object,"seal",{value:function(O){return k(O),P(O)}});var D=Object.preventExtensions;v(Object,"preventExtensions",{value:function(O){return k(O),D(O)}})})();function x(A){return A.prototype=null,Object.freeze(A)}var E=!1;function S(){!E&&typeof console!="undefined"&&(E=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var g=0,C=function(){this instanceof C||S();var A=[],P=[],D=g++;function z(F,N){var Z,J=k(F);return J?D in J?J[D]:N:(Z=A.indexOf(F),Z>=0?P[Z]:N)}function O(F){var N=k(F);return N?D in N:A.indexOf(F)>=0}function V(F,N){var Z,J=k(F);return J?J[D]=N:(Z=A.indexOf(F),Z>=0?P[Z]=N:(Z=A.length,P[Z]=N,A[Z]=F)),this}function B(F){var N=k(F),Z,J;return N?D in N&&delete N[D]:(Z=A.indexOf(F),Z<0?!1:(J=A.length-1,A[Z]=void 0,P[Z]=P[J],A[Z]=A[J],A.length=J,P.length=J,!0))}return Object.create(C.prototype,{get___:{value:x(z)},has___:{value:x(O)},set___:{value:x(V)},delete___:{value:x(B)}})};C.prototype=Object.create(Object.prototype,{get:{value:function(P,D){return this.get___(P,D)},writable:!0,configurable:!0},has:{value:function(P){return this.has___(P)},writable:!0,configurable:!0},set:{value:function(P,D){return this.set___(P,D)},writable:!0,configurable:!0},delete:{value:function(P){return this.delete___(P)},writable:!0,configurable:!0}}),typeof l=="function"?function(){s&&typeof Proxy!="undefined"&&(Proxy=void 0);function A(){this instanceof C||S();var P=new l,D=void 0,z=!1;function O(N,Z){return D?P.has(N)?P.get(N):D.get___(N,Z):P.get(N,Z)}function V(N){return P.has(N)||(D?D.has___(N):!1)}var B;s?B=function(N,Z){return P.set(N,Z),P.has(N)||(D||(D=new C),D.set(N,Z)),this}:B=function(N,Z){if(z)try{P.set(N,Z)}catch(J){D||(D=new C),D.set___(N,Z)}else P.set(N,Z);return this};function F(N){var Z=!!P.delete(N);return D&&D.delete___(N)||Z}return Object.create(C.prototype,{get___:{value:x(O)},has___:{value:x(V)},set___:{value:x(B)},delete___:{value:x(F)},permitHostObjects___:{value:x(function(N){if(N===o)z=!0;else throw new Error("bogus call to permitHostObjects___")})}})}A.prototype=C.prototype,n.exports=A,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy!="undefined"&&(Proxy=void 0),n.exports=C)})()},236:function(n,a,o){var s=o(8284);n.exports=l;function l(){var u={};return function(f){if((typeof f!="object"||f===null)&&typeof f!="function")throw new Error("Weakmap-shim: Key must be object");var c=f.valueOf(u);return c&&c.identity===u?c:s(f,u)}}},8284:function(n){n.exports=a;function a(o,s){var l={identity:s},u=o.valueOf;return Object.defineProperty(o,"valueOf",{value:function(f){return f!==s?u.apply(this,arguments):l},writable:!0}),l}},606:function(n,a,o){var s=o(236);n.exports=l;function l(){var u=s();return{get:function(f,c){var h=u(f);return h.hasOwnProperty("value")?h.value:c},set:function(f,c){return u(f).value=c,this},has:function(f){return"value"in u(f)},delete:function(f){return delete u(f).value}}}},3349:function(n){"use strict";function a(){return function(c,h,v,d,_,T){var p=c[0],M=v[0],b=[0],w=M;d|=0;var k=0,x=M;for(k=0;k<p;++k){{var E=h[d]-T,S=h[d+w]-T;E>=0!=S>=0&&_.push(b[0]+.5+.5*(E+S)/(E-S))}d+=x,++b[0]}}}function o(){return a()}var s=o;function l(c){var h={};return function(d,_,T){var p=d.dtype,M=d.order,b=[p,M.join()].join(),w=h[b];return w||(h[b]=w=c([p,M])),w(d.shape.slice(0),d.data,d.stride,d.offset|0,_,T)}}function u(c){return l(s.bind(void 0,c))}function f(c){return u({funcName:c.funcName})}n.exports=f({funcName:"zeroCrossings"})},781:function(n,a,o){"use strict";n.exports=l;var s=o(3349);function l(u,f){var c=[];return f=+f||0,s(u.hi(u.shape[0]-1),c,f),c}},7790:function(){}},t={};function r(n){var a=t[n];if(a!==void 0)return a.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}(function(){r.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(n){if(typeof window=="object")return window}}()})(),function(){r.nmd=function(n){return n.paths=[],n.children||(n.children=[]),n}}();var i=r(1964);mCe.exports=i})()});var _Ce=ne((Uhr,xCe)=>{"use strict";xCe.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var ACe=ne((Vhr,TCe)=>{"use strict";var bCe=_Ce();TCe.exports=q4t;var wCe={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function q4t(e){var t,r=[],i=1,n;if(typeof e=="string")if(e=e.toLowerCase(),bCe[e])r=bCe[e].slice(),n="rgb";else if(e==="transparent")i=0,n="rgb",r=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(e)){var a=e.slice(1),o=a.length,s=o<=4;i=1,s?(r=[parseInt(a[0]+a[0],16),parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16)],o===4&&(i=parseInt(a[3]+a[3],16)/255)):(r=[parseInt(a[0]+a[1],16),parseInt(a[2]+a[3],16),parseInt(a[4]+a[5],16)],o===8&&(i=parseInt(a[6]+a[7],16)/255)),r[0]||(r[0]=0),r[1]||(r[1]=0),r[2]||(r[2]=0),n="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(e)){var l=t[1],u=l==="rgb",a=l.replace(/a$/,"");n=a;var o=a==="cmyk"?4:a==="gray"?1:3;r=t[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(h,v){if(/%$/.test(h))return v===o?parseFloat(h)/100:a==="rgb"?parseFloat(h)*255/100:parseFloat(h);if(a[v]==="h"){if(/deg$/.test(h))return parseFloat(h);if(wCe[h]!==void 0)return wCe[h]}return parseFloat(h)}),l===a&&r.push(1),i=u||r[o]===void 0?1:r[o],r=r.slice(0,o)}else e.length>10&&/[0-9](?:\s|\/)/.test(e)&&(r=e.match(/([0-9]+)/g).map(function(f){return parseFloat(f)}),n=e.match(/([a-z])/ig).join("").toLowerCase());else isNaN(e)?Array.isArray(e)||e.length?(r=[e[0],e[1],e[2]],n="rgb",i=e.length===4?e[3]:1):e instanceof Object&&(e.r!=null||e.red!=null||e.R!=null?(n="rgb",r=[e.r||e.red||e.R||0,e.g||e.green||e.G||0,e.b||e.blue||e.B||0]):(n="hsl",r=[e.h||e.hue||e.H||0,e.s||e.saturation||e.S||0,e.l||e.lightness||e.L||e.b||e.brightness]),i=e.a||e.alpha||e.opacity||1,e.opacity!=null&&(i/=100)):(n="rgb",r=[e>>>16,(e&65280)>>>8,e&255]);return{space:n,values:r,alpha:i}}});var SCe=ne((Hhr,MCe)=>{"use strict";MCe.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}});var kCe=ne((Ghr,ECe)=>{"use strict";var z4t=SCe();ECe.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(e){var t=e[0]/360,r=e[1]/100,i=e[2]/100,n,a,o,s,l;if(r===0)return l=i*255,[l,l,l];i<.5?a=i*(1+r):a=i+r-i*r,n=2*i-a,s=[0,0,0];for(var u=0;u<3;u++)o=t+1/3*-(u-1),o<0?o++:o>1&&o--,6*o<1?l=n+(a-n)*6*o:2*o<1?l=a:3*o<2?l=n+(a-n)*(2/3-o)*6:l=n,s[u]=l*255;return s}};z4t.hsl=function(e){var t=e[0]/255,r=e[1]/255,i=e[2]/255,n=Math.min(t,r,i),a=Math.max(t,r,i),o=a-n,s,l,u;return a===n?s=0:t===a?s=(r-i)/o:r===a?s=2+(i-t)/o:i===a&&(s=4+(t-r)/o),s=Math.min(s*60,360),s<0&&(s+=360),u=(n+a)/2,a===n?l=0:u<=.5?l=o/(a+n):l=o/(2-a-n),[s,l*100,u*100]}});var E3=ne((Yhr,CCe)=>{CCe.exports=O4t;function O4t(e,t,r){return t<r?e<t?t:e>r?r:e:e<r?r:e>t?t:e}});var rG=ne((Whr,LCe)=>{"use strict";var B4t=ACe(),N4t=kCe(),KR=E3();LCe.exports=function(t){var r,i,n,a=B4t(t);return a.space?(r=Array(3),r[0]=KR(a.values[0],0,255),r[1]=KR(a.values[1],0,255),r[2]=KR(a.values[2],0,255),a.space[0]==="h"&&(r=N4t.rgb(r)),r.push(KR(a.alpha,0,1)),r):[]}});var JR=ne((Xhr,PCe)=>{PCe.exports=function(e){switch(e){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}});var n1=ne((Zhr,RCe)=>{"use strict";var U4t=rG(),QR=E3(),V4t=JR();RCe.exports=function(t,r){(r==="float"||!r)&&(r="array"),r==="uint"&&(r="uint8"),r==="uint_clamped"&&(r="uint8_clamped");var i=V4t(r),n=new i(4),a=r!=="uint8"&&r!=="uint8_clamped";return(!t.length||typeof t=="string")&&(t=U4t(t),t[0]/=255,t[1]/=255,t[2]/=255),H4t(t)?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3]!=null?t[3]:255,a&&(n[0]/=255,n[1]/=255,n[2]/=255,n[3]/=255),n):(a?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3]!=null?t[3]:1):(n[0]=QR(Math.floor(t[0]*255),0,255),n[1]=QR(Math.floor(t[1]*255),0,255),n[2]=QR(Math.floor(t[2]*255),0,255),n[3]=t[3]==null?255:QR(Math.floor(t[3]*255),0,255)),n)};function H4t(e){return!!(e instanceof Uint8Array||e instanceof Uint8ClampedArray||Array.isArray(e)&&(e[0]>1||e[0]===0)&&(e[1]>1||e[1]===0)&&(e[2]>1||e[2]===0)&&(!e[3]||e[3]>1))}});var Dp=ne((jhr,DCe)=>{"use strict";var G4t=n1();function Y4t(e){return e?G4t(e):[0,0,0,1]}DCe.exports=Y4t});var dy=ne((Khr,NCe)=>{"use strict";var OCe=la(),W4t=Xf(),$R=n1(),eD=ul(),X4t=Ku().defaultLine,ICe=uh().isArrayOrTypedArray,nG=$R(X4t),BCe=1;function FCe(e,t){var r=e;return r[3]*=t,r}function qCe(e){if(OCe(e))return nG;var t=$R(e);return t.length?t:nG}function zCe(e){return OCe(e)?e:BCe}function Z4t(e,t,r){var i=e.color;i&&i._inputArray&&(i=i._inputArray);var n=ICe(i),a=ICe(t),o=eD.extractOpts(e),s=[],l,u,f,c,h;if(o.colorscale!==void 0?l=eD.makeColorScaleFuncFromTrace(e):l=qCe,n?u=function(d,_){return d[_]===void 0?nG:$R(l(d[_]))}:u=qCe,a?f=function(d,_){return d[_]===void 0?BCe:zCe(d[_])}:f=zCe,n||a)for(var v=0;v<r;v++)c=u(i,v),h=f(t,v),s[v]=FCe(c,h);else s=FCe($R(i),t);return s}function j4t(e){var t=eD.extractOpts(e),r=t.colorscale;return t.reversescale&&(r=eD.flipScale(t.colorscale)),r.map(function(i){var n=i[0],a=W4t(i[1]),o=a.toRgb();return{index:n,rgb:[o.r,o.g,o.b,o.a]}})}NCe.exports={formatColor:Z4t,parseColorScale:j4t}});var iG=ne((Jhr,UCe)=>{"use strict";UCe.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}});var tD=ne((Qhr,VCe)=>{"use strict";VCe.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}});var GCe=ne(($hr,HCe)=>{"use strict";var K4t=wi();function aG(e,t,r,i){if(!t||!t.visible)return null;for(var n=K4t.getComponentMethod("errorbars","makeComputeError")(t),a=new Array(e.length),o=0;o<e.length;o++){var s=n(+e[o],o);if(i.type==="log"){var l=i.c2l(e[o]),u=e[o]-s[0],f=e[o]+s[1];if(a[o]=[(i.c2l(u,!0)-l)*r,(i.c2l(f,!0)-l)*r],u>0){var c=i.c2l(u);i._lowerLogErrorBound||(i._lowerLogErrorBound=c),i._lowerErrorBound=Math.min(i._lowerLogErrorBound,c)}}else a[o]=[-s[0]*r,s[1]*r]}return a}function J4t(e){for(var t=0;t<e.length;t++)if(e[t])return e[t].length;return 0}function Q4t(e,t,r){var i=[aG(e.x,e.error_x,t[0],r.xaxis),aG(e.y,e.error_y,t[1],r.yaxis),aG(e.z,e.error_z,t[2],r.zaxis)],n=J4t(i);if(n===0)return null;for(var a=new Array(n),o=0;o<n;o++){for(var s=[[0,0,0],[0,0,0]],l=0;l<3;l++)if(i[l])for(var u=0;u<2;u++)s[u][l]=i[l][o][u];a[o]=s}return a}HCe.exports=Q4t});var $Ce=ne((evr,QCe)=>{"use strict";var $4t=yu().gl_line3d,YCe=yu().gl_scatter3d,eLt=yu().gl_error3d,tLt=yu().gl_mesh3d,rLt=yu().delaunay_triangulate,py=Wt(),KCe=Dp(),rD=dy().formatColor,nLt=EA(),oG=iG(),iLt=tD(),aLt=Xi(),oLt=td().appendArrayPointValue,sLt=GCe();function JCe(e,t){this.scene=e,this.uid=t,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var lG=JCe.prototype;lG.handlePick=function(e){if(e.object&&(e.object===this.linePlot||e.object===this.delaunayMesh||e.object===this.textMarkers||e.object===this.scatterPlot)){var t=e.index=e.data.index;return e.object.highlight&&e.object.highlight(null),this.scatterPlot&&(e.object=this.scatterPlot,this.scatterPlot.highlight(e.data)),e.textLabel="",this.textLabels&&(py.isArrayOrTypedArray(this.textLabels)?(this.textLabels[t]||this.textLabels[t]===0)&&(e.textLabel=this.textLabels[t]):e.textLabel=this.textLabels),e.traceCoordinate=[this.data.x[t],this.data.y[t],this.data.z[t]],!0}};function lLt(e,t,r){var i=(r+1)%3,n=(r+2)%3,a=[],o=[],s;for(s=0;s<e.length;++s){var l=e[s];isNaN(l[i])||!isFinite(l[i])||isNaN(l[n])||!isFinite(l[n])||(a.push([l[i],l[n]]),o.push(s))}var u=rLt(a);for(s=0;s<u.length;++s)for(var f=u[s],c=0;c<f.length;++c)f[c]=o[f[c]];return{positions:e,cells:u,meshColor:t}}function uLt(e){for(var t=[0,0,0],r=[[0,0,0],[0,0,0],[0,0,0]],i=[1,1,1],n=0;n<3;n++){var a=e[n];a&&a.copy_zstyle!==!1&&e[2].visible!==!1&&(a=e[2]),!(!a||!a.visible)&&(t[n]=a.width/2,r[n]=KCe(a.color),i[n]=a.thickness)}return{capSize:t,color:r,lineWidth:i}}function WCe(e){return e==null?0:e.indexOf("left")>-1?-1:e.indexOf("right")>-1?1:0}function XCe(e){return e==null?0:e.indexOf("top")>-1?-1:e.indexOf("bottom")>-1?1:0}function fLt(e){var t=0,r=0,i=[t,r];if(Array.isArray(e))for(var n=0;n<e.length;n++)i[n]=[t,r],e[n]&&(i[n][0]=WCe(e[n]),i[n][1]=XCe(e[n]));else i[0]=WCe(e),i[1]=XCe(e);return i}function cLt(e,t){return t(e*4)}function hLt(e){return iLt[e]}function sG(e,t,r,i,n){var a=null;if(py.isArrayOrTypedArray(e)){a=[];for(var o=0;o<t;o++)e[o]===void 0?a[o]=i:a[o]=r(e[o],n)}else a=r(e,py.identity);return a}function vLt(e,t){var r=[],i=e.fullSceneLayout,n=e.dataScale,a=i.xaxis,o=i.yaxis,s=i.zaxis,l=t.marker,u=t.line,f=t.x||[],c=t.y||[],h=t.z||[],v=f.length,d=t.xcalendar,_=t.ycalendar,T=t.zcalendar,p,M,b,w,k,x;for(k=0;k<v;k++)p=a.d2l(f[k],0,d)*n[0],M=o.d2l(c[k],0,_)*n[1],b=s.d2l(h[k],0,T)*n[2],r[k]=[p,M,b];if(Array.isArray(t.text))x=t.text;else if(py.isTypedArray(t.text))x=Array.from(t.text);else if(t.text!==void 0)for(x=new Array(v),k=0;k<v;k++)x[k]=t.text;function E(re,ue){var fe=i[re];return aLt.tickText(fe,fe.d2l(ue),!0).text}var S=t.texttemplate;if(S){var g=e.fullLayout,C=g._d3locale,A=Array.isArray(S),P=A?Math.min(S.length,v):v,D=A?function(re){return S[re]}:function(){return S};for(x=new Array(P),k=0;k<P;k++){var z={x:f[k],y:c[k],z:h[k]},O={xLabel:E("xaxis",f[k]),yLabel:E("yaxis",c[k]),zLabel:E("zaxis",h[k])},V={};oLt(V,t,k);var B=t._meta||{};x[k]=py.texttemplateString(D(k),O,C,V,z,B)}}if(w={position:r,mode:t.mode,text:x},"line"in t&&(w.lineColor=rD(u,1,v),w.lineWidth=u.width,w.lineDashes=u.dash),"marker"in t){var F=nLt(t);w.scatterColor=rD(l,1,v),w.scatterSize=sG(l.size,v,cLt,20,F),w.scatterMarker=sG(l.symbol,v,hLt,"\u25CF"),w.scatterLineWidth=l.line.width,w.scatterLineColor=rD(l.line,1,v),w.scatterAngle=0}"textposition"in t&&(w.textOffset=fLt(t.textposition),w.textColor=rD(t.textfont,1,v),w.textSize=sG(t.textfont.size,v,py.identity,12),w.textFont=t.textfont.family,w.textAngle=0);var N=["x","y","z"];for(w.project=[!1,!1,!1],w.projectScale=[1,1,1],w.projectOpacity=[1,1,1],k=0;k<3;++k){var Z=t.projection[N[k]];(w.project[k]=Z.show)&&(w.projectOpacity[k]=Z.opacity,w.projectScale[k]=Z.scale)}w.errorBounds=sLt(t,n,i);var J=uLt([t.error_x,t.error_y,t.error_z]);return w.errorColor=J.color,w.errorLineWidth=J.lineWidth,w.errorCapSize=J.capSize,w.delaunayAxis=t.surfaceaxis,w.delaunayColor=KCe(t.surfacecolor),w}function ZCe(e){if(py.isArrayOrTypedArray(e)){var t=e[0];return py.isArrayOrTypedArray(t)&&(e=t),"rgb("+e.slice(0,3).map(function(r){return Math.round(r*255)})+")"}return null}function jCe(e){return py.isArrayOrTypedArray(e)?e.length===4&&typeof e[0]=="number"?ZCe(e):e.map(ZCe):null}lG.update=function(e){var t=this.scene.glplot.gl,r,i,n,a,o=oG.solid;this.data=e;var s=vLt(this.scene,e);"mode"in s&&(this.mode=s.mode),"lineDashes"in s&&s.lineDashes in oG&&(o=oG[s.lineDashes]),this.color=jCe(s.scatterColor)||jCe(s.lineColor),this.dataPoints=s.position,r={gl:this.scene.glplot.gl,position:s.position,color:s.lineColor,lineWidth:s.lineWidth||1,dashes:o[0],dashScale:o[1],opacity:e.opacity,connectGaps:e.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(r):(this.linePlot=$4t(r),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var l=e.opacity;if(e.marker&&e.marker.opacity!==void 0&&(l*=e.marker.opacity),i={gl:this.scene.glplot.gl,position:s.position,color:s.scatterColor,size:s.scatterSize,glyph:s.scatterMarker,opacity:l,orthographic:!0,lineWidth:s.scatterLineWidth,lineColor:s.scatterLineColor,project:s.project,projectScale:s.projectScale,projectOpacity:s.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(i):(this.scatterPlot=YCe(i),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),a={gl:this.scene.glplot.gl,position:s.position,glyph:s.text,color:s.textColor,size:s.textSize,angle:s.textAngle,alignment:s.textOffset,font:s.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:e.opacity},this.textLabels=e.hovertext||e.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(a):(this.textMarkers=YCe(a),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),n={gl:this.scene.glplot.gl,position:s.position,color:s.errorColor,error:s.errorBounds,lineWidth:s.errorLineWidth,capSize:s.errorCapSize,opacity:e.opacity},this.errorBars?s.errorBounds?this.errorBars.update(n):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):s.errorBounds&&(this.errorBars=eLt(n),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),s.delaunayAxis>=0){var u=lLt(s.position,s.delaunayColor,s.delaunayAxis);u.opacity=e.opacity,this.delaunayMesh?this.delaunayMesh.update(u):(u.gl=t,this.delaunayMesh=tLt(u),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)};lG.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function dLt(e,t){var r=new JCe(e,t.uid);return r.update(t),r}QCe.exports=dLt});var vG=ne((tvr,r4e)=>{"use strict";var Fp=cu(),hG=Ps(),uG=kl().axisHoverFormat,pLt=Ba().hovertemplateAttrs,gLt=Ba().texttemplateAttrs,e4e=es(),yLt=iG(),mLt=tD(),Ip=oa().extendFlat,xLt=Xs().overrideAll,t4e=rx(),_Lt=Fp.line,R_=Fp.marker,bLt=R_.line,wLt=Ip({width:_Lt.width,dash:{valType:"enumerated",values:t4e(yLt),dflt:"solid"}},hG("line"));function fG(e){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var cG=r4e.exports=xLt({x:Fp.x,y:Fp.y,z:{valType:"data_array"},text:Ip({},Fp.text,{}),texttemplate:gLt({},{}),hovertext:Ip({},Fp.hovertext,{}),hovertemplate:pLt(),xhoverformat:uG("x"),yhoverformat:uG("y"),zhoverformat:uG("z"),mode:Ip({},Fp.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:fG("x"),y:fG("y"),z:fG("z")},connectgaps:Fp.connectgaps,line:wLt,marker:Ip({symbol:{valType:"enumerated",values:t4e(mLt),dflt:"circle",arrayOk:!0},size:Ip({},R_.size,{dflt:8}),sizeref:R_.sizeref,sizemin:R_.sizemin,sizemode:R_.sizemode,opacity:Ip({},R_.opacity,{arrayOk:!1}),colorbar:R_.colorbar,line:Ip({width:Ip({},bLt.width,{arrayOk:!1})},hG("marker.line"))},hG("marker")),textposition:Ip({},Fp.textposition,{dflt:"top center"}),textfont:{color:Fp.textfont.color,size:Fp.textfont.size,family:Ip({},Fp.textfont.family,{arrayOk:!1})},opacity:e4e.opacity,hoverinfo:Ip({},e4e.hoverinfo)},"calc","nested");cG.x.editType=cG.y.editType=cG.z.editType="calc+clearAxisTypes"});var a4e=ne((rvr,i4e)=>{"use strict";var n4e=wi(),TLt=Wt(),dG=js(),ALt=dp(),MLt=s0(),SLt=l0(),ELt=vG();i4e.exports=function(t,r,i,n){function a(v,d){return TLt.coerce(t,r,ELt,v,d)}var o=kLt(t,r,a,n);if(!o){r.visible=!1;return}a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),a("mode"),dG.hasMarkers(r)&&ALt(t,r,i,n,a,{noSelect:!0,noAngle:!0}),dG.hasLines(r)&&(a("connectgaps"),MLt(t,r,i,n,a)),dG.hasText(r)&&(a("texttemplate"),SLt(t,r,n,a,{noSelect:!0}));var s=(r.line||{}).color,l=(r.marker||{}).color;a("surfaceaxis")>=0&&a("surfacecolor",s||l);for(var u=["x","y","z"],f=0;f<3;++f){var c="projection."+u[f];a(c+".show")&&(a(c+".opacity"),a(c+".scale"))}var h=n4e.getComponentMethod("errorbars","supplyDefaults");h(t,r,s||l||i,{axis:"z"}),h(t,r,s||l||i,{axis:"y",inherit:"z"}),h(t,r,s||l||i,{axis:"x",inherit:"z"})};function kLt(e,t,r,i){var n=0,a=r("x"),o=r("y"),s=r("z"),l=n4e.getComponentMethod("calendars","handleTraceDefaults");return l(e,t,["x","y","z"],i),a&&o&&s&&(n=Math.min(a.length,o.length,s.length),t._length=t._xlength=t._ylength=t._zlength=n),n}});var pG=ne((nvr,o4e)=>{"use strict";var CLt=Z0(),LLt=pp();o4e.exports=function(t,r){var i=[{x:!1,y:!1,trace:r,t:{}}];return CLt(i,r),LLt(t,r),i}});var l4e=ne((ivr,s4e)=>{s4e.exports=PLt;function PLt(e,t){if(typeof e!="string")throw new TypeError("must specify type string");if(t=t||{},typeof document=="undefined"&&!t.canvas)return null;var r=t.canvas||document.createElement("canvas");typeof t.width=="number"&&(r.width=t.width),typeof t.height=="number"&&(r.height=t.height);var i=t,n;try{var a=[e];e.indexOf("webgl")===0&&a.push("experimental-"+e);for(var o=0;o<a.length;o++)if(n=r.getContext(a[o],i),n)return n}catch(s){n=null}return n||null}});var gG=ne((avr,u4e)=>{var RLt=l4e();u4e.exports=function(t){return RLt("webgl",t)}});var nD=ne((ovr,c4e)=>{"use strict";var f4e=_i(),DLt=function(){};c4e.exports=function(t){for(var r in t)typeof t[r]=="function"&&(t[r]=DLt);t.destroy=function(){t.container.parentNode.removeChild(t.container)};var i=document.createElement("div");i.className="no-webgl",i.style.cursor="pointer",i.style.fontSize="24px",i.style.color=f4e.defaults[0],i.style.position="absolute",i.style.left=i.style.top="0px",i.style.width=i.style.height="100%",i.style["background-color"]=f4e.lightLine,i.style["z-index"]=30;var n=document.createElement("p");return n.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",n.style.position="relative",n.style.top="50%",n.style.left="50%",n.style.height="30%",n.style.width="50%",n.style.margin="-15% 0 0 -25%",i.appendChild(n),t.container.appendChild(i),t.container.style.background="#FFFFFF",t.container.onclick=function(){window.open("https://get.webgl.org")},!1}});var d4e=ne((svr,v4e)=>{"use strict";var D_=Dp(),ILt=Wt(),FLt=["xaxis","yaxis","zaxis"];function h4e(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var qLt=h4e.prototype;qLt.merge=function(e,t){for(var r=this,i=0;i<3;++i){var n=t[FLt[i]];if(!n.visible){r.tickEnable[i]=!1,r.labelEnable[i]=!1,r.lineEnable[i]=!1,r.lineTickEnable[i]=!1,r.gridEnable[i]=!1,r.zeroEnable[i]=!1,r.backgroundEnable[i]=!1;continue}r.labels[i]=e._meta?ILt.templateString(n.title.text,e._meta):n.title.text,"font"in n.title&&(n.title.font.color&&(r.labelColor[i]=D_(n.title.font.color)),n.title.font.family&&(r.labelFont[i]=n.title.font.family),n.title.font.size&&(r.labelSize[i]=n.title.font.size)),"showline"in n&&(r.lineEnable[i]=n.showline),"linecolor"in n&&(r.lineColor[i]=D_(n.linecolor)),"linewidth"in n&&(r.lineWidth[i]=n.linewidth),"showgrid"in n&&(r.gridEnable[i]=n.showgrid),"gridcolor"in n&&(r.gridColor[i]=D_(n.gridcolor)),"gridwidth"in n&&(r.gridWidth[i]=n.gridwidth),n.type==="log"?r.zeroEnable[i]=!1:"zeroline"in n&&(r.zeroEnable[i]=n.zeroline),"zerolinecolor"in n&&(r.zeroLineColor[i]=D_(n.zerolinecolor)),"zerolinewidth"in n&&(r.zeroLineWidth[i]=n.zerolinewidth),"ticks"in n&&n.ticks?r.lineTickEnable[i]=!0:r.lineTickEnable[i]=!1,"ticklen"in n&&(r.lineTickLength[i]=r._defaultLineTickLength[i]=n.ticklen),"tickcolor"in n&&(r.lineTickColor[i]=D_(n.tickcolor)),"tickwidth"in n&&(r.lineTickWidth[i]=n.tickwidth),"tickangle"in n&&(r.tickAngle[i]=n.tickangle==="auto"?-3600:Math.PI*-n.tickangle/180),"showticklabels"in n&&(r.tickEnable[i]=n.showticklabels),"tickfont"in n&&(n.tickfont.color&&(r.tickColor[i]=D_(n.tickfont.color)),n.tickfont.family&&(r.tickFont[i]=n.tickfont.family),n.tickfont.size&&(r.tickSize[i]=n.tickfont.size)),"mirror"in n?["ticks","all","allticks"].indexOf(n.mirror)!==-1?(r.lineTickMirror[i]=!0,r.lineMirror[i]=!0):n.mirror===!0?(r.lineTickMirror[i]=!1,r.lineMirror[i]=!0):(r.lineTickMirror[i]=!1,r.lineMirror[i]=!1):r.lineMirror[i]=!1,"showbackground"in n&&n.showbackground!==!1?(r.backgroundEnable[i]=!0,r.backgroundColor[i]=D_(n.backgroundcolor)):r.backgroundEnable[i]=!1}};function zLt(e,t){var r=new h4e;return r.merge(e,t),r}v4e.exports=zLt});var y4e=ne((lvr,g4e)=>{"use strict";var OLt=Dp(),BLt=["xaxis","yaxis","zaxis"];function p4e(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var NLt=p4e.prototype;NLt.merge=function(e){for(var t=0;t<3;++t){var r=e[BLt[t]];if(!r.visible){this.enabled[t]=!1,this.drawSides[t]=!1;continue}this.enabled[t]=r.showspikes,this.colors[t]=OLt(r.spikecolor),this.drawSides[t]=r.spikesides,this.lineWidth[t]=r.spikethickness}};function ULt(e){var t=new p4e;return t.merge(e),t}g4e.exports=ULt});var _4e=ne((uvr,x4e)=>{"use strict";x4e.exports=WLt;var m4e=Xi(),VLt=Wt(),HLt=["xaxis","yaxis","zaxis"],GLt=[0,0,0];function YLt(e){for(var t=new Array(3),r=0;r<3;++r){for(var i=e[r],n=new Array(i.length),a=0;a<i.length;++a)n[a]=i[a].x;t[r]=n}return t}function WLt(e){for(var t=e.axesOptions,r=e.glplot.axesPixels,i=e.fullSceneLayout,n=[[],[],[]],a=0;a<3;++a){var o=i[HLt[a]];if(o._length=(r[a].hi-r[a].lo)*r[a].pixelsPerDataUnit/e.dataScale[a],Math.abs(o._length)===1/0||isNaN(o._length))n[a]=[];else{o._input_range=o.range.slice(),o.range[0]=r[a].lo/e.dataScale[a],o.range[1]=r[a].hi/e.dataScale[a],o._m=1/(e.dataScale[a]*r[a].pixelsPerDataUnit),o.range[0]===o.range[1]&&(o.range[0]-=1,o.range[1]+=1);var s=o.tickmode;if(o.tickmode==="auto"){o.tickmode="linear";var l=o.nticks||VLt.constrain(o._length/40,4,9);m4e.autoTicks(o,Math.abs(o.range[1]-o.range[0])/l)}for(var u=m4e.calcTicks(o,{msUTC:!0}),f=0;f<u.length;++f)u[f].x=u[f].x*e.dataScale[a],o.type==="date"&&(u[f].text=u[f].text.replace(/\<br\>/g," "));n[a]=u,o.tickmode=s}}t.ticks=n;for(var a=0;a<3;++a){GLt[a]=.5*(e.glplot.bounds[0][a]+e.glplot.bounds[1][a]);for(var f=0;f<2;++f)t.bounds[f][a]=e.glplot.bounds[f][a]}e.contourLevels=YLt(n)}});var E4e=ne((fvr,S4e)=>{"use strict";var T4e=yu().gl_plot3d,XLt=T4e.createCamera,b4e=T4e.createScene,ZLt=gG(),jLt=qA(),oD=wi(),Sv=Wt(),aD=Sv.preserveDrawingBuffer(),sD=Xi(),S0=Ol(),KLt=Dp(),JLt=nD(),QLt=LB(),$Lt=d4e(),ePt=y4e(),tPt=_4e(),rPt=Cd().applyAutorangeOptions,SE,iD,A4e=!1;function M4e(e,t){var r=document.createElement("div"),i=e.container;this.graphDiv=e.graphDiv;var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.style.position="absolute",n.style.top=n.style.left="0px",n.style.width=n.style.height="100%",n.style["z-index"]=20,n.style["pointer-events"]="none",r.appendChild(n),this.svgContainer=n,r.id=e.id,r.style.position="absolute",r.style.top=r.style.left="0px",r.style.width=r.style.height="100%",i.appendChild(r),this.fullLayout=t,this.id=e.id||"scene",this.fullSceneLayout=t[this.id],this.plotArgs=[[],{},{}],this.axesOptions=$Lt(t,t[this.id]),this.spikeOptions=ePt(t[this.id]),this.container=r,this.staticMode=!!e.staticPlot,this.pixelRatio=this.pixelRatio||e.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=oD.getComponentMethod("annotations3d","convert"),this.drawAnnotations=oD.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var _h=M4e.prototype;_h.prepareOptions=function(){var e=this,t={canvas:e.canvas,gl:e.gl,glOptions:{preserveDrawingBuffer:aD,premultipliedAlpha:!0,antialias:!0},container:e.container,axes:e.axesOptions,spikes:e.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:e.camera,pixelRatio:e.pixelRatio};if(e.staticMode){if(!iD&&(SE=document.createElement("canvas"),iD=ZLt({canvas:SE,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!iD))throw new Error("error creating static canvas/context for image server");t.gl=iD,t.canvas=SE}return t};var w4e=!0;_h.tryCreatePlot=function(){var e=this,t=e.prepareOptions(),r=!0;try{e.glplot=b4e(t)}catch(i){if(e.staticMode||!w4e||aD)r=!1;else{Sv.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{aD=t.glOptions.preserveDrawingBuffer=!0,e.glplot=b4e(t)}catch(n){aD=t.glOptions.preserveDrawingBuffer=!1,r=!1}}}return w4e=!1,r};_h.initializeGLCamera=function(){var e=this,t=e.fullSceneLayout.camera,r=t.projection.type==="orthographic";e.camera=XLt(e.container,{center:[t.center.x,t.center.y,t.center.z],eye:[t.eye.x,t.eye.y,t.eye.z],up:[t.up.x,t.up.y,t.up.z],_ortho:r,zoomMin:.01,zoomMax:100,mode:"orbit"})};_h.initializeGLPlot=function(){var e=this;e.initializeGLCamera();var t=e.tryCreatePlot();if(!t)return JLt(e);e.traces={},e.make4thDimension();var r=e.graphDiv,i=r.layout,n=function(){var o={};return e.isCameraChanged(i)&&(o[e.id+".camera"]=e.getCamera()),e.isAspectChanged(i)&&(o[e.id+".aspectratio"]=e.glplot.getAspectratio(),i[e.id].aspectmode!=="manual"&&(e.fullSceneLayout.aspectmode=i[e.id].aspectmode=o[e.id+".aspectmode"]="manual")),o},a=function(o){if(o.fullSceneLayout.dragmode!==!1){var s=n();o.saveLayout(i),o.graphDiv.emit("plotly_relayout",s)}};return e.glplot.canvas&&(e.glplot.canvas.addEventListener("mouseup",function(){a(e)}),e.glplot.canvas.addEventListener("touchstart",function(){A4e=!0}),e.glplot.canvas.addEventListener("wheel",function(o){if(r._context._scrollZoom.gl3d){if(e.camera._ortho){var s=o.deltaX>o.deltaY?1.1:.9090909090909091,l=e.glplot.getAspectratio();e.glplot.setAspectratio({x:s*l.x,y:s*l.y,z:s*l.z})}a(e)}},jLt?{passive:!1}:!1),e.glplot.canvas.addEventListener("mousemove",function(){if(e.fullSceneLayout.dragmode!==!1&&e.camera.mouseListener.buttons!==0){var o=n();e.graphDiv.emit("plotly_relayouting",o)}}),e.staticMode||e.glplot.canvas.addEventListener("webglcontextlost",function(o){r&&r.emit&&r.emit("plotly_webglcontextlost",{event:o,layer:e.id})},!1)),e.glplot.oncontextloss=function(){e.recoverContext()},e.glplot.onrender=function(){e.render()},!0};_h.render=function(){var e=this,t=e.graphDiv,r,i=e.svgContainer,n=e.container.getBoundingClientRect();t._fullLayout._calcInverseTransform(t);var a=t._fullLayout._invScaleX,o=t._fullLayout._invScaleY,s=n.width*a,l=n.height*o;i.setAttributeNS(null,"viewBox","0 0 "+s+" "+l),i.setAttributeNS(null,"width",s),i.setAttributeNS(null,"height",l),tPt(e),e.glplot.axes.update(e.axesOptions);for(var u=Object.keys(e.traces),f=null,c=e.glplot.selection,h=0;h<u.length;++h)r=e.traces[u[h]],r.data.hoverinfo!=="skip"&&r.handlePick(c)&&(f=r),r.setContourLevels&&r.setContourLevels();function v(C,A,P){var D=e.fullSceneLayout[C+"axis"];return D.type!=="log"&&(A=D.d2l(A)),sD.hoverLabelText(D,A,P)}if(f!==null){var d=QLt(e.glplot.cameraParams,c.dataCoordinate);r=f.data;var _=t._fullData[r.index],T=c.index,p={xLabel:v("x",c.traceCoordinate[0],r.xhoverformat),yLabel:v("y",c.traceCoordinate[1],r.yhoverformat),zLabel:v("z",c.traceCoordinate[2],r.zhoverformat)},M=S0.castHoverinfo(_,e.fullLayout,T),b=(M||"").split("+"),w=M&&M==="all";!_.hovertemplate&&!w&&(b.indexOf("x")===-1&&(p.xLabel=void 0),b.indexOf("y")===-1&&(p.yLabel=void 0),b.indexOf("z")===-1&&(p.zLabel=void 0),b.indexOf("text")===-1&&(c.textLabel=void 0),b.indexOf("name")===-1&&(f.name=void 0));var k,x=[];r.type==="cone"||r.type==="streamtube"?(p.uLabel=v("x",c.traceCoordinate[3],r.uhoverformat),(w||b.indexOf("u")!==-1)&&x.push("u: "+p.uLabel),p.vLabel=v("y",c.traceCoordinate[4],r.vhoverformat),(w||b.indexOf("v")!==-1)&&x.push("v: "+p.vLabel),p.wLabel=v("z",c.traceCoordinate[5],r.whoverformat),(w||b.indexOf("w")!==-1)&&x.push("w: "+p.wLabel),p.normLabel=c.traceCoordinate[6].toPrecision(3),(w||b.indexOf("norm")!==-1)&&x.push("norm: "+p.normLabel),r.type==="streamtube"&&(p.divergenceLabel=c.traceCoordinate[7].toPrecision(3),(w||b.indexOf("divergence")!==-1)&&x.push("divergence: "+p.divergenceLabel)),c.textLabel&&x.push(c.textLabel),k=x.join("<br>")):r.type==="isosurface"||r.type==="volume"?(p.valueLabel=sD.hoverLabelText(e._mockAxis,e._mockAxis.d2l(c.traceCoordinate[3]),r.valuehoverformat),x.push("value: "+p.valueLabel),c.textLabel&&x.push(c.textLabel),k=x.join("<br>")):k=c.textLabel;var E={x:c.traceCoordinate[0],y:c.traceCoordinate[1],z:c.traceCoordinate[2],data:_._input,fullData:_,curveNumber:_.index,pointNumber:T};S0.appendArrayPointValue(E,_,T),r._module.eventData&&(E=_._module.eventData(E,c,_,{},T));var S={points:[E]};if(e.fullSceneLayout.hovermode){var g=[];S0.loneHover({trace:_,x:(.5+.5*d[0]/d[3])*s,y:(.5-.5*d[1]/d[3])*l,xLabel:p.xLabel,yLabel:p.yLabel,zLabel:p.zLabel,text:k,name:f.name,color:S0.castHoverOption(_,T,"bgcolor")||f.color,borderColor:S0.castHoverOption(_,T,"bordercolor"),fontFamily:S0.castHoverOption(_,T,"font.family"),fontSize:S0.castHoverOption(_,T,"font.size"),fontColor:S0.castHoverOption(_,T,"font.color"),nameLength:S0.castHoverOption(_,T,"namelength"),textAlign:S0.castHoverOption(_,T,"align"),hovertemplate:Sv.castOption(_,T,"hovertemplate"),hovertemplateLabels:Sv.extendFlat({},E,p),eventData:[E]},{container:i,gd:t,inOut_bbox:g}),E.bbox=g[0]}c.distance<5&&(c.buttons||A4e)?t.emit("plotly_click",S):t.emit("plotly_hover",S),this.oldEventData=S}else S0.loneUnhover(i),this.oldEventData&&t.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;e.drawAnnotations(e)};_h.recoverContext=function(){var e=this;e.glplot.dispose();var t=function(){if(e.glplot.gl.isContextLost()){requestAnimationFrame(t);return}if(!e.initializeGLPlot()){Sv.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}e.plot.apply(e,e.plotArgs)};requestAnimationFrame(t)};var EE=["xaxis","yaxis","zaxis"];function nPt(e,t,r){for(var i=e.fullSceneLayout,n=0;n<3;n++){var a=EE[n],o=a.charAt(0),s=i[a],l=t[o],u=t[o+"calendar"],f=t["_"+o+"length"];if(!Sv.isArrayOrTypedArray(l))r[0][n]=Math.min(r[0][n],0),r[1][n]=Math.max(r[1][n],f-1);else for(var c,h=0;h<(f||l.length);h++)if(Sv.isArrayOrTypedArray(l[h]))for(var v=0;v<l[h].length;++v)c=s.d2l(l[h][v],0,u),!isNaN(c)&&isFinite(c)&&(r[0][n]=Math.min(r[0][n],c),r[1][n]=Math.max(r[1][n],c));else c=s.d2l(l[h],0,u),!isNaN(c)&&isFinite(c)&&(r[0][n]=Math.min(r[0][n],c),r[1][n]=Math.max(r[1][n],c))}}function iPt(e,t){for(var r=e.fullSceneLayout,i=r.annotations||[],n=0;n<3;n++)for(var a=EE[n],o=a.charAt(0),s=r[a],l=0;l<i.length;l++){var u=i[l];if(u.visible){var f=s.r2l(u[o]);!isNaN(f)&&isFinite(f)&&(t[0][n]=Math.min(t[0][n],f),t[1][n]=Math.max(t[1][n],f))}}}_h.plot=function(e,t,r){var i=this;if(i.plotArgs=[e,t,r],!i.glplot.contextLost){var n,a,o,s,l,u,f=t[i.id],c=r[i.id];i.fullLayout=t,i.fullSceneLayout=f,i.axesOptions.merge(t,f),i.spikeOptions.merge(f),i.setViewport(f),i.updateFx(f.dragmode,f.hovermode),i.camera.enableWheel=i.graphDiv._context._scrollZoom.gl3d,i.glplot.setClearColor(KLt(f.bgcolor)),i.setConvert(l),e?Array.isArray(e)||(e=[e]):e=[];var h=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(o=0;o<e.length;++o)n=e[o],!(n.visible!==!0||n._length===0)&&nPt(this,n,h);iPt(this,h);var v=[1,1,1];for(s=0;s<3;++s)h[1][s]===h[0][s]?v[s]=1:v[s]=1/(h[1][s]-h[0][s]);for(i.dataScale=v,i.convertAnnotations(this),o=0;o<e.length;++o)n=e[o],!(n.visible!==!0||n._length===0)&&(a=i.traces[n.uid],a?a.data.type===n.type?a.update(n):(a.dispose(),a=n._module.plot(this,n),i.traces[n.uid]=a):(a=n._module.plot(this,n),i.traces[n.uid]=a),a.name=n.name);var d=Object.keys(i.traces);e:for(o=0;o<d.length;++o){for(s=0;s<e.length;++s)if(e[s].uid===d[o]&&e[s].visible===!0&&e[s]._length!==0)continue e;a=i.traces[d[o]],a.dispose(),delete i.traces[d[o]]}i.glplot.objects.sort(function(J,re){return J._trace.data.index-re._trace.data.index});var _=[[0,0,0],[0,0,0]],T=[],p={};for(o=0;o<3;++o){l=f[EE[o]],u=l.type,u in p?(p[u].acc*=v[o],p[u].count+=1):p[u]={acc:v[o],count:1};var M;if(l.autorange){_[0][o]=1/0,_[1][o]=-1/0;var b=i.glplot.objects,w=i.fullSceneLayout.annotations||[],k=l._name.charAt(0);for(s=0;s<b.length;s++){var x=b[s],E=x.bounds,S=x._trace.data._pad||0;x.constructor.name==="ErrorBars"&&l._lowerLogErrorBound?_[0][o]=Math.min(_[0][o],l._lowerLogErrorBound):_[0][o]=Math.min(_[0][o],E[0][o]/v[o]-S),_[1][o]=Math.max(_[1][o],E[1][o]/v[o]+S)}for(s=0;s<w.length;s++){var g=w[s];if(g.visible){var C=l.r2l(g[k]);_[0][o]=Math.min(_[0][o],C),_[1][o]=Math.max(_[1][o],C)}}if("rangemode"in l&&l.rangemode==="tozero"&&(_[0][o]=Math.min(_[0][o],0),_[1][o]=Math.max(_[1][o],0)),_[0][o]>_[1][o])_[0][o]=-1,_[1][o]=1;else{var A=_[1][o]-_[0][o];_[0][o]-=A/32,_[1][o]+=A/32}if(M=[_[0][o],_[1][o]],M=rPt(M,l),_[0][o]=M[0],_[1][o]=M[1],l.isReversed()){var P=_[0][o];_[0][o]=_[1][o],_[1][o]=P}}else M=l.range,_[0][o]=l.r2l(M[0]),_[1][o]=l.r2l(M[1]);_[0][o]===_[1][o]&&(_[0][o]-=1,_[1][o]+=1),T[o]=_[1][o]-_[0][o],l.range=[_[0][o],_[1][o]],l.limitRange(),i.glplot.setBounds(o,{min:l.range[0]*v[o],max:l.range[1]*v[o]})}var D,z=f.aspectmode;if(z==="cube")D=[1,1,1];else if(z==="manual"){var O=f.aspectratio;D=[O.x,O.y,O.z]}else if(z==="auto"||z==="data"){var V=[1,1,1];for(o=0;o<3;++o){l=f[EE[o]],u=l.type;var B=p[u];V[o]=Math.pow(B.acc,1/B.count)/v[o]}z==="data"||Math.max.apply(null,V)/Math.min.apply(null,V)<=4?D=V:D=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");f.aspectratio.x=c.aspectratio.x=D[0],f.aspectratio.y=c.aspectratio.y=D[1],f.aspectratio.z=c.aspectratio.z=D[2],i.glplot.setAspectratio(f.aspectratio),i.viewInitial.aspectratio||(i.viewInitial.aspectratio={x:f.aspectratio.x,y:f.aspectratio.y,z:f.aspectratio.z}),i.viewInitial.aspectmode||(i.viewInitial.aspectmode=f.aspectmode);var F=f.domain||null,N=t._size||null;if(F&&N){var Z=i.container.style;Z.position="absolute",Z.left=N.l+F.x[0]*N.w+"px",Z.top=N.t+(1-F.y[1])*N.h+"px",Z.width=N.w*(F.x[1]-F.x[0])+"px",Z.height=N.h*(F.y[1]-F.y[0])+"px"}i.glplot.redraw()}};_h.destroy=function(){var e=this;e.glplot&&(e.camera.mouseListener.enabled=!1,e.container.removeEventListener("wheel",e.camera.wheelListener),e.camera=null,e.glplot.dispose(),e.container.parentNode.removeChild(e.container),e.glplot=null)};function aPt(e){return[[e.eye.x,e.eye.y,e.eye.z],[e.center.x,e.center.y,e.center.z],[e.up.x,e.up.y,e.up.z]]}function oPt(e){return{up:{x:e.up[0],y:e.up[1],z:e.up[2]},center:{x:e.center[0],y:e.center[1],z:e.center[2]},eye:{x:e.eye[0],y:e.eye[1],z:e.eye[2]},projection:{type:e._ortho===!0?"orthographic":"perspective"}}}_h.getCamera=function(){var e=this;return e.camera.view.recalcMatrix(e.camera.view.lastT()),oPt(e.camera)};_h.setViewport=function(e){var t=this,r=e.camera;t.camera.lookAt.apply(this,aPt(r)),t.glplot.setAspectratio(e.aspectratio);var i=r.projection.type==="orthographic",n=t.camera._ortho;i!==n&&(t.glplot.redraw(),t.glplot.clearRGBA(),t.glplot.dispose(),t.initializeGLPlot())};_h.isCameraChanged=function(e){var t=this,r=t.getCamera(),i=Sv.nestedProperty(e,t.id+".camera"),n=i.get();function a(u,f,c,h){var v=["up","center","eye"],d=["x","y","z"];return f[v[c]]&&u[v[c]][d[h]]===f[v[c]][d[h]]}var o=!1;if(n===void 0)o=!0;else{for(var s=0;s<3;s++)for(var l=0;l<3;l++)if(!a(r,n,s,l)){o=!0;break}(!n.projection||r.projection&&r.projection.type!==n.projection.type)&&(o=!0)}return o};_h.isAspectChanged=function(e){var t=this,r=t.glplot.getAspectratio(),i=Sv.nestedProperty(e,t.id+".aspectratio"),n=i.get();return n===void 0||n.x!==r.x||n.y!==r.y||n.z!==r.z};_h.saveLayout=function(e){var t=this,r=t.fullLayout,i,n,a,o,s,l,u=t.isCameraChanged(e),f=t.isAspectChanged(e),c=u||f;if(c){var h={};if(u&&(i=t.getCamera(),n=Sv.nestedProperty(e,t.id+".camera"),a=n.get(),h[t.id+".camera"]=a),f&&(o=t.glplot.getAspectratio(),s=Sv.nestedProperty(e,t.id+".aspectratio"),l=s.get(),h[t.id+".aspectratio"]=l),oD.call("_storeDirectGUIEdit",e,r._preGUI,h),u){n.set(i);var v=Sv.nestedProperty(r,t.id+".camera");v.set(i)}if(f){s.set(o);var d=Sv.nestedProperty(r,t.id+".aspectratio");d.set(o),t.glplot.redraw()}}return c};_h.updateFx=function(e,t){var r=this,i=r.camera;if(i)if(e==="orbit")i.mode="orbit",i.keyBindingMode="rotate";else if(e==="turntable"){i.up=[0,0,1],i.mode="turntable",i.keyBindingMode="rotate";var n=r.graphDiv,a=n._fullLayout,o=r.fullSceneLayout.camera,s=o.up.x,l=o.up.y,u=o.up.z;if(u/Math.sqrt(s*s+l*l+u*u)<.999){var f=r.id+".camera.up",c={x:0,y:0,z:1},h={};h[f]=c;var v=n.layout;oD.call("_storeDirectGUIEdit",v,a._preGUI,h),o.up=c,Sv.nestedProperty(v,f).set(c)}}else i.keyBindingMode=e;r.fullSceneLayout.hovermode=t};function sPt(e,t,r){for(var i=0,n=r-1;i<n;++i,--n)for(var a=0;a<t;++a)for(var o=0;o<4;++o){var s=4*(t*i+a)+o,l=4*(t*n+a)+o,u=e[s];e[s]=e[l],e[l]=u}}function lPt(e,t,r){for(var i=0;i<r;++i)for(var n=0;n<t;++n){var a=4*(t*i+n),o=e[a+3];if(o>0)for(var s=255/o,l=0;l<3;++l)e[a+l]=Math.min(s*e[a+l],255)}}_h.toImage=function(e){var t=this;e||(e="png"),t.staticMode&&t.container.appendChild(SE),t.glplot.redraw();var r=t.glplot.gl,i=r.drawingBufferWidth,n=r.drawingBufferHeight;r.bindFramebuffer(r.FRAMEBUFFER,null);var a=new Uint8Array(i*n*4);r.readPixels(0,0,i,n,r.RGBA,r.UNSIGNED_BYTE,a),sPt(a,i,n),lPt(a,i,n);var o=document.createElement("canvas");o.width=i,o.height=n;var s=o.getContext("2d",{willReadFrequently:!0}),l=s.createImageData(i,n);l.data.set(a),s.putImageData(l,0,0);var u;switch(e){case"jpeg":u=o.toDataURL("image/jpeg");break;case"webp":u=o.toDataURL("image/webp");break;default:u=o.toDataURL("image/png")}return t.staticMode&&t.container.removeChild(SE),u};_h.setConvert=function(){for(var e=this,t=0;t<3;t++){var r=e.fullSceneLayout[EE[t]];sD.setConvert(r,e.fullLayout),r.setScale=Sv.noop}};_h.make4thDimension=function(){var e=this,t=e.graphDiv,r=t._fullLayout;e._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},sD.setConvert(e._mockAxis,r)};S4e.exports=M4e});var C4e=ne((cvr,k4e)=>{"use strict";k4e.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}});var mG=ne((hvr,L4e)=>{"use strict";var uPt=_i(),Ga=dc(),yG=oa().extendFlat,fPt=Xs().overrideAll;L4e.exports=fPt({visible:Ga.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:uPt.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:Ga.color,categoryorder:Ga.categoryorder,categoryarray:Ga.categoryarray,title:{text:Ga.title.text,font:Ga.title.font},type:yG({},Ga.type,{values:["-","linear","log","date","category"]}),autotypenumbers:Ga.autotypenumbers,autorange:Ga.autorange,autorangeoptions:{minallowed:Ga.autorangeoptions.minallowed,maxallowed:Ga.autorangeoptions.maxallowed,clipmin:Ga.autorangeoptions.clipmin,clipmax:Ga.autorangeoptions.clipmax,include:Ga.autorangeoptions.include,editType:"plot"},rangemode:Ga.rangemode,minallowed:Ga.minallowed,maxallowed:Ga.maxallowed,range:yG({},Ga.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:Ga.minor.tickmode,nticks:Ga.nticks,tick0:Ga.tick0,dtick:Ga.dtick,tickvals:Ga.tickvals,ticktext:Ga.ticktext,ticks:Ga.ticks,mirror:Ga.mirror,ticklen:Ga.ticklen,tickwidth:Ga.tickwidth,tickcolor:Ga.tickcolor,showticklabels:Ga.showticklabels,labelalias:Ga.labelalias,tickfont:Ga.tickfont,tickangle:Ga.tickangle,tickprefix:Ga.tickprefix,showtickprefix:Ga.showtickprefix,ticksuffix:Ga.ticksuffix,showticksuffix:Ga.showticksuffix,showexponent:Ga.showexponent,exponentformat:Ga.exponentformat,minexponent:Ga.minexponent,separatethousands:Ga.separatethousands,tickformat:Ga.tickformat,tickformatstops:Ga.tickformatstops,hoverformat:Ga.hoverformat,showline:Ga.showline,linecolor:Ga.linecolor,linewidth:Ga.linewidth,showgrid:Ga.showgrid,gridcolor:yG({},Ga.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:Ga.gridwidth,zeroline:Ga.zeroline,zerolinecolor:Ga.zerolinecolor,zerolinewidth:Ga.zerolinewidth,_deprecated:{title:Ga._deprecated.title,titlefont:Ga._deprecated.titlefont}},"plot","from-root")});var wG=ne((vvr,P4e)=>{"use strict";var xG=mG(),cPt=fl().attributes,_G=oa().extendFlat,hPt=Wt().counterRegex;function bG(e,t,r){return{x:{valType:"number",dflt:e,editType:"camera"},y:{valType:"number",dflt:t,editType:"camera"},z:{valType:"number",dflt:r,editType:"camera"},editType:"camera"}}P4e.exports={_arrayAttrRegexps:[hPt("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:_G(bG(0,0,1),{}),center:_G(bG(0,0,0),{}),eye:_G(bG(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:cPt({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:xG,yaxis:xG,zaxis:xG,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}});var F4e=ne((dvr,I4e)=>{"use strict";var vPt=Xf().mix,R4e=Wt(),dPt=So(),pPt=mG(),gPt=pB(),yPt=LM(),D4e=["xaxis","yaxis","zaxis"],mPt=100*136/187;I4e.exports=function(t,r,i){var n,a;function o(u,f){return R4e.coerce(n,a,pPt,u,f)}for(var s=0;s<D4e.length;s++){var l=D4e[s];n=t[l]||{},a=dPt.newContainer(r,l),a._id=l[0]+i.scene,a._name=l,gPt(n,a,o,i),yPt(n,a,o,{font:i.font,letter:l[0],data:i.data,showGrid:!0,noAutotickangles:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:i.bgColor,calendar:i.calendar},i.fullLayout),o("gridcolor",vPt(a.color,i.bgColor,mPt).toRgbString()),o("title.text",l[0]),a.setScale=R4e.noop,o("showspikes")&&(o("spikesides"),o("spikethickness"),o("spikecolor",a.color)),o("showaxeslabels"),o("showbackground")&&o("backgroundcolor")}}});var B4e=ne((pvr,O4e)=>{"use strict";var xPt=Wt(),_Pt=_i(),bPt=wi(),wPt=Kx(),TPt=F4e(),q4e=wG(),APt=vc().getSubplotData,z4e="gl3d";O4e.exports=function(t,r,i){var n=r._basePlotModules.length>1;function a(o){if(!n){var s=xPt.validate(t[o],q4e[o]);if(s)return t[o]}}wPt(t,r,i,{type:z4e,attributes:q4e,handleDefaults:MPt,fullLayout:r,font:r.font,fullData:i,getDfltFromLayout:a,autotypenumbersDflt:r.autotypenumbers,paper_bgcolor:r.paper_bgcolor,calendar:r.calendar})};function MPt(e,t,r,i){for(var n=r("bgcolor"),a=_Pt.combine(n,i.paper_bgcolor),o=["up","center","eye"],s=0;s<o.length;s++)r("camera."+o[s]+".x"),r("camera."+o[s]+".y"),r("camera."+o[s]+".z");r("camera.projection.type");var l=!!r("aspectratio.x")&&!!r("aspectratio.y")&&!!r("aspectratio.z"),u=l?"manual":"auto",f=r("aspectmode",u);l||(e.aspectratio=t.aspectratio={x:1,y:1,z:1},f==="manual"&&(t.aspectmode="auto"),e.aspectmode=t.aspectmode);var c=APt(i.fullData,z4e,i.id);TPt(e,t,{font:i.font,scene:i.id,data:c,bgColor:a,calendar:i.calendar,autotypenumbersDflt:i.autotypenumbersDflt,fullLayout:i.fullLayout}),bPt.getComponentMethod("annotations3d","handleDefaults")(e,t,i);var h=i.getDfltFromLayout("dragmode");if(h!==!1&&!h)if(h="orbit",e.camera&&e.camera.up){var v=e.camera.up.x,d=e.camera.up.y,_=e.camera.up.z;_!==0&&(!v||!d||!_||_/Math.sqrt(v*v+d*d+_*_)>.999)&&(h="turntable")}else h="turntable";r("dragmode",h),r("hovermode",i.getDfltFromLayout("hovermode"))}});var i1=ne(Ev=>{"use strict";var SPt=Xs().overrideAll,EPt=Pg(),kPt=E4e(),CPt=vc().getSubplotData,LPt=Wt(),PPt=kd(),k3="gl3d",TG="scene";Ev.name=k3;Ev.attr=TG;Ev.idRoot=TG;Ev.idRegex=Ev.attrRegex=LPt.counterRegex("scene");Ev.attributes=C4e();Ev.layoutAttributes=wG();Ev.baseLayoutAttrOverrides=SPt({hoverlabel:EPt.hoverlabel},"plot","nested");Ev.supplyLayoutDefaults=B4e();Ev.plot=function(t){for(var r=t._fullLayout,i=t._fullData,n=r._subplots[k3],a=0;a<n.length;a++){var o=n[a],s=CPt(i,k3,o),l=r[o],u=l.camera,f=l._scene;f||(f=new kPt({id:o,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio,camera:u},r),l._scene=f),f.viewInitial||(f.viewInitial={up:{x:u.up.x,y:u.up.y,z:u.up.z},eye:{x:u.eye.x,y:u.eye.y,z:u.eye.z},center:{x:u.center.x,y:u.center.y,z:u.center.z}}),f.plot(s,r,t.layout)}};Ev.clean=function(e,t,r,i){for(var n=i._subplots[k3]||[],a=0;a<n.length;a++){var o=n[a];!t[o]&&i[o]._scene&&(i[o]._scene.destroy(),i._infolayer&&i._infolayer.selectAll(".annotation-"+o).remove())}};Ev.toSVG=function(e){for(var t=e._fullLayout,r=t._subplots[k3],i=t._size,n=0;n<r.length;n++){var a=t[r[n]],o=a.domain,s=a._scene,l=s.toImage("png"),u=t._glimages.append("svg:image");u.attr({xmlns:PPt.svg,"xlink:href":l,x:i.l+i.w*o.x[0],y:i.t+i.h*(1-o.y[1]),width:i.w*(o.x[1]-o.x[0]),height:i.h*(o.y[1]-o.y[0]),preserveAspectRatio:"none"}),s.destroy()}};Ev.cleanId=function(t){if(t.match(/^scene[0-9]*$/)){var r=t.substr(5);return r==="1"&&(r=""),TG+r}};Ev.updateFx=function(e){for(var t=e._fullLayout,r=t._subplots[k3],i=0;i<r.length;i++){var n=t[r[i]]._scene;n.updateFx(t.dragmode,t.hovermode)}}});var U4e=ne((yvr,N4e)=>{"use strict";N4e.exports={plot:$Ce(),attributes:vG(),markerSymbols:tD(),supplyDefaults:a4e(),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:pG(),moduleType:"trace",name:"scatter3d",basePlotModule:i1(),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}});var H4e=ne((mvr,V4e)=>{"use strict";V4e.exports=U4e()});var kE=ne((xvr,W4e)=>{"use strict";var G4e=_i(),lD=Ps(),AG=kl().axisHoverFormat,RPt=Ba().hovertemplateAttrs,Y4e=es(),C3=oa().extendFlat,DPt=Xs().overrideAll;function MG(e){return{valType:"boolean",dflt:!1}}function SG(e){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:MG("x"),y:MG("y"),z:MG("z")},color:{valType:"color",dflt:G4e.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:G4e.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var uD=W4e.exports=DPt(C3({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:RPt(),xhoverformat:AG("x"),yhoverformat:AG("y"),zhoverformat:AG("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},lD("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:SG("x"),y:SG("y"),z:SG("z")},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:C3({},lD.zauto,{}),zmin:C3({},lD.zmin,{}),zmax:C3({},lD.zmax,{})},hoverinfo:C3({},Y4e.hoverinfo),showlegend:C3({},Y4e.showlegend,{dflt:!1})}),"calc","nested");uD.x.editType=uD.y.editType=uD.z.editType="calc+clearAxisTypes";uD.transforms=void 0});var CG=ne((_vr,j4e)=>{"use strict";var IPt=wi(),X4e=Wt(),FPt=Kf(),qPt=kE(),EG=.1;function zPt(e,t){for(var r=[],i=32,n=0;n<i;n++){var a=n/(i-1),o=t+(1-t)*(1-Math.pow(Math.sin(e*a*Math.PI),2));r.push([a,Math.max(0,Math.min(1,o))])}return r}function OPt(e){var t=0;if(!Array.isArray(e)||e.length<2||!e[0]||!e[e.length-1]||+e[0][0]!=0||+e[e.length-1][0]!=1)return!1;for(var r=0;r<e.length;r++){var i=e[r];if(i.length!==2||+i[0]<t)return!1;t=+i[0]}return!0}function BPt(e,t,r,i){var n,a;function o(T,p){return X4e.coerce(e,t,qPt,T,p)}var s=o("x"),l=o("y"),u=o("z");if(!u||!u.length||s&&s.length<1||l&&l.length<1){t.visible=!1;return}t._xlength=Array.isArray(s)&&X4e.isArrayOrTypedArray(s[0])?u.length:u[0].length,t._ylength=u.length;var f=IPt.getComponentMethod("calendars","handleTraceDefaults");f(e,t,["x","y","z"],i),o("text"),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(T){o(T)});var c=o("surfacecolor"),h=["x","y","z"];for(n=0;n<3;++n){var v="contours."+h[n],d=o(v+".show"),_=o(v+".highlight");if(d||_)for(a=0;a<3;++a)o(v+".project."+h[a]);d&&(o(v+".color"),o(v+".width"),o(v+".usecolormap")),_&&(o(v+".highlightcolor"),o(v+".highlightwidth")),o(v+".start"),o(v+".end"),o(v+".size")}c||(kG(e,"zmin","cmin"),kG(e,"zmax","cmax"),kG(e,"zauto","cauto")),FPt(e,t,i,o,{prefix:"",cLetter:"c"}),Z4e(e,t,i,o),t._length=null}function Z4e(e,t,r,i){var n=i("opacityscale");n==="max"?t.opacityscale=[[0,EG],[1,1]]:n==="min"?t.opacityscale=[[0,1],[1,EG]]:n==="extremes"?t.opacityscale=zPt(1,EG):OPt(n)||(t.opacityscale=void 0)}function kG(e,t,r){t in e&&!(r in e)&&(e[r]=e[t])}j4e.exports={supplyDefaults:BPt,opacityscaleDefaults:Z4e}});var Q4e=ne((bvr,J4e)=>{"use strict";var K4e=gv();J4e.exports=function(t,r){r.surfacecolor?K4e(t,r,{vals:r.surfacecolor,containerStr:"",cLetter:"c"}):K4e(t,r,{vals:r.z,containerStr:"",cLetter:"c"})}});var iLe=ne((wvr,nLe)=>{"use strict";var NPt=yu().gl_surface3d,L3=yu().ndarray,UPt=yu().ndarray_linear_interpolate.d2,VPt=vP(),HPt=dP(),CE=Wt().isArrayOrTypedArray,GPt=dy().parseColorScale,$4e=Dp(),YPt=ul().extractOpts;function tLe(e,t,r){this.scene=e,this.uid=r,this.surface=t,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var E0=tLe.prototype;E0.getXat=function(e,t,r,i){var n=CE(this.data.x)?CE(this.data.x[0])?this.data.x[t][e]:this.data.x[e]:e;return r===void 0?n:i.d2l(n,0,r)};E0.getYat=function(e,t,r,i){var n=CE(this.data.y)?CE(this.data.y[0])?this.data.y[t][e]:this.data.y[t]:t;return r===void 0?n:i.d2l(n,0,r)};E0.getZat=function(e,t,r,i){var n=this.data.z[t][e];return n===null&&this.data.connectgaps&&this.data._interpolatedZ&&(n=this.data._interpolatedZ[t][e]),r===void 0?n:i.d2l(n,0,r)};E0.handlePick=function(e){if(e.object===this.surface){var t=(e.data.index[0]-1)/this.dataScaleX-1,r=(e.data.index[1]-1)/this.dataScaleY-1,i=Math.max(Math.min(Math.round(t),this.data.z[0].length-1),0),n=Math.max(Math.min(Math.round(r),this.data._ylength-1),0);e.index=[i,n],e.traceCoordinate=[this.getXat(i,n),this.getYat(i,n),this.getZat(i,n)],e.dataCoordinate=[this.getXat(i,n,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(i,n,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(i,n,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var a=0;a<3;a++){var o=e.dataCoordinate[a];o!=null&&(e.dataCoordinate[a]*=this.scene.dataScale[a])}var s=this.data.hovertext||this.data.text;return CE(s)&&s[n]&&s[n][i]!==void 0?e.textLabel=s[n][i]:s?e.textLabel=s:e.textLabel="",e.data.dataCoordinate=e.dataCoordinate.slice(),this.surface.highlight(e.data),this.scene.glplot.spikes.position=e.dataCoordinate,!0}};function WPt(e){var t=e[0].rgb,r=e[e.length-1].rgb;return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}var P3=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function XPt(e,t){if(e<t)return 0;for(var r=0;Math.floor(e%t)===0;)e/=t,r++;return r}function LG(e){for(var t=[],r=0;r<P3.length;r++){var i=P3[r];t.push(XPt(e,i))}return t}function ZPt(e){for(var t=LG(e),r=e,i=0;i<P3.length;i++)if(t[i]>0){r=P3[i];break}return r}function jPt(e,t){if(!(e<1||t<1)){for(var r=LG(e),i=LG(t),n=1,a=0;a<P3.length;a++)n*=Math.pow(P3[a],Math.max(r[a],i[a]));return n}}function KPt(e){if(e.length!==0){for(var t=1,r=0;r<e.length;r++)t=jPt(t,e[r]);return t}}E0.calcXnums=function(e){var t,r=[];for(t=1;t<e;t++){var i=this.getXat(t-1,0),n=this.getXat(t,0);n!==i&&i!==void 0&&i!==null&&n!==void 0&&n!==null?r[t-1]=Math.abs(n-i):r[t-1]=0}var a=0;for(t=1;t<e;t++)a+=r[t-1];for(t=1;t<e;t++)r[t-1]===0?r[t-1]=1:r[t-1]=Math.round(a/r[t-1]);return r};E0.calcYnums=function(e){var t,r=[];for(t=1;t<e;t++){var i=this.getYat(0,t-1),n=this.getYat(0,t);n!==i&&i!==void 0&&i!==null&&n!==void 0&&n!==null?r[t-1]=Math.abs(n-i):r[t-1]=0}var a=0;for(t=1;t<e;t++)a+=r[t-1];for(t=1;t<e;t++)r[t-1]===0?r[t-1]=1:r[t-1]=Math.round(a/r[t-1]);return r};var rLe=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],eLe=rLe[9],fD=rLe[13];E0.estimateScale=function(e,t){for(var r=t===0?this.calcXnums(e):this.calcYnums(e),i=1+KPt(r);i<eLe;)i*=2;for(;i>fD;)i--,i/=ZPt(i),i++,i<eLe&&(i=fD);var n=Math.round(i/e);return n>1?n:1};function JPt(e,t,r){var i=r[8]+r[2]*t[0]+r[5]*t[1];return e[0]=(r[6]+r[0]*t[0]+r[3]*t[1])/i,e[1]=(r[7]+r[1]*t[0]+r[4]*t[1])/i,e}function QPt(e,t,r){return $Pt(e,t,JPt,r),e}function $Pt(e,t,r,i){for(var n=[0,0],a=e.shape[0],o=e.shape[1],s=0;s<a;s++)for(var l=0;l<o;l++)r(n,[s,l],i),e.set(s,l,UPt(t,n[0],n[1]));return e}E0.refineCoords=function(e){for(var t=this.dataScaleX,r=this.dataScaleY,i=e[0].shape[0],n=e[0].shape[1],a=Math.floor(e[0].shape[0]*t+1)|0,o=Math.floor(e[0].shape[1]*r+1)|0,s=1+i+1,l=1+n+1,u=L3(new Float32Array(s*l),[s,l]),f=[1/t,0,0,0,1/r,0,0,0,1],c=0;c<e.length;++c){this.surface.padField(u,e[c]);var h=L3(new Float32Array(a*o),[a,o]);QPt(h,u,f),e[c]=h}};function e6t(e,t){for(var r=!1,i=0;i<e.length;i++)if(t===e[i]){r=!0;break}r===!1&&e.push(t)}E0.setContourLevels=function(){var e=[[],[],[]],t=[!1,!1,!1],r=!1,i,n,a;for(i=0;i<3;++i)if(this.showContour[i]&&(r=!0,this.contourSize[i]>0&&this.contourStart[i]!==null&&this.contourEnd[i]!==null&&this.contourEnd[i]>this.contourStart[i]))for(t[i]=!0,n=this.contourStart[i];n<this.contourEnd[i];n+=this.contourSize[i])a=n*this.scene.dataScale[i],e6t(e[i],a);if(r){var o=[[],[],[]];for(i=0;i<3;++i)this.showContour[i]&&(o[i]=t[i]?e[i]:this.scene.contourLevels[i]);this.surface.update({levels:o})}};E0.update=function(e){var t=this.scene,r=t.fullSceneLayout,i=this.surface,n=GPt(e),a=t.dataScale,o=e.z[0].length,s=e._ylength,l=t.contourLevels;this.data=e;var u,f,c,h,v=[];for(u=0;u<3;u++)for(v[u]=[],f=0;f<o;f++)v[u][f]=[];for(f=0;f<o;f++)for(c=0;c<s;c++)v[0][f][c]=this.getXat(f,c,e.xcalendar,r.xaxis),v[1][f][c]=this.getYat(f,c,e.ycalendar,r.yaxis),v[2][f][c]=this.getZat(f,c,e.zcalendar,r.zaxis);if(e.connectgaps)for(e._emptypoints=HPt(v[2]),VPt(v[2],e._emptypoints),e._interpolatedZ=[],f=0;f<o;f++)for(e._interpolatedZ[f]=[],c=0;c<s;c++)e._interpolatedZ[f][c]=v[2][f][c];for(u=0;u<3;u++)for(f=0;f<o;f++)for(c=0;c<s;c++)h=v[u][f][c],h==null?v[u][f][c]=NaN:h=v[u][f][c]*=a[u];for(u=0;u<3;u++)for(f=0;f<o;f++)for(c=0;c<s;c++)h=v[u][f][c],h!=null&&(this.minValues[u]>h&&(this.minValues[u]=h),this.maxValues[u]<h&&(this.maxValues[u]=h));for(u=0;u<3;u++)this.objectOffset[u]=.5*(this.minValues[u]+this.maxValues[u]);for(u=0;u<3;u++)for(f=0;f<o;f++)for(c=0;c<s;c++)h=v[u][f][c],h!=null&&(v[u][f][c]-=this.objectOffset[u]);var d=[L3(new Float32Array(o*s),[o,s]),L3(new Float32Array(o*s),[o,s]),L3(new Float32Array(o*s),[o,s])];for(u=0;u<3;u++)for(f=0;f<o;f++)for(c=0;c<s;c++)d[u].set(f,c,v[u][f][c]);v=[];var _={colormap:n,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!e.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:e.opacityscale,opacity:e.opacity},T=YPt(e);if(_.intensityBounds=[T.min,T.max],e.surfacecolor){var p=L3(new Float32Array(o*s),[o,s]);for(f=0;f<o;f++)for(c=0;c<s;c++)p.set(f,c,e.surfacecolor[c][f]);d.push(p)}else _.intensityBounds[0]*=a[2],_.intensityBounds[1]*=a[2];(fD<d[0].shape[0]||fD<d[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(d[0].shape[0],0),this.dataScaleY=this.estimateScale(d[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords(d)),e.surfacecolor&&(_.intensity=d.pop());var M=[!0,!0,!0],b=["x","y","z"];for(u=0;u<3;++u){var w=e.contours[b[u]];M[u]=w.highlight,_.showContour[u]=w.show||w.highlight,_.showContour[u]&&(_.contourProject[u]=[w.project.x,w.project.y,w.project.z],w.show?(this.showContour[u]=!0,_.levels[u]=l[u],i.highlightColor[u]=_.contourColor[u]=$4e(w.color),w.usecolormap?i.highlightTint[u]=_.contourTint[u]=0:i.highlightTint[u]=_.contourTint[u]=1,_.contourWidth[u]=w.width,this.contourStart[u]=w.start,this.contourEnd[u]=w.end,this.contourSize[u]=w.size):(this.showContour[u]=!1,this.contourStart[u]=null,this.contourEnd[u]=null,this.contourSize[u]=0),w.highlight&&(_.dynamicColor[u]=$4e(w.highlightcolor),_.dynamicWidth[u]=w.highlightwidth))}WPt(n)&&(_.vertexColor=!0),_.objectOffset=this.objectOffset,_.coords=d,i.update(_),i.visible=e.visible,i.enableDynamic=M,i.enableHighlight=M,i.snapToData=!0,"lighting"in e&&(i.ambientLight=e.lighting.ambient,i.diffuseLight=e.lighting.diffuse,i.specularLight=e.lighting.specular,i.roughness=e.lighting.roughness,i.fresnel=e.lighting.fresnel),"lightposition"in e&&(i.lightPosition=[e.lightposition.x,e.lightposition.y,e.lightposition.z])};E0.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function t6t(e,t){var r=e.glplot.gl,i=NPt({gl:r}),n=new tLe(e,i,t.uid);return i._trace=n,n.update(t),e.glplot.add(i),n}nLe.exports=t6t});var oLe=ne((Tvr,aLe)=>{"use strict";aLe.exports={attributes:kE(),supplyDefaults:CG().supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:Q4e(),plot:iLe(),moduleType:"trace",name:"surface",basePlotModule:i1(),categories:["gl3d","2dMap","showLegend"],meta:{}}});var lLe=ne((Avr,sLe)=>{"use strict";sLe.exports=oLe()});var R3=ne((Mvr,fLe)=>{"use strict";var r6t=Ps(),PG=kl().axisHoverFormat,n6t=Ba().hovertemplateAttrs,a1=kE(),uLe=es(),o1=oa().extendFlat;fLe.exports=o1({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:n6t({editType:"calc"}),xhoverformat:PG("x"),yhoverformat:PG("y"),zhoverformat:PG("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},r6t("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:a1.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:o1({},a1.contours.x.show,{}),color:a1.contours.x.color,width:a1.contours.x.width,editType:"calc"},lightposition:{x:o1({},a1.lightposition.x,{dflt:1e5}),y:o1({},a1.lightposition.y,{dflt:1e5}),z:o1({},a1.lightposition.z,{dflt:0}),editType:"calc"},lighting:o1({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},a1.lighting),hoverinfo:o1({},uLe.hoverinfo,{editType:"calc"}),showlegend:o1({},uLe.showlegend,{dflt:!1})})});var hD=ne((Svr,hLe)=>{"use strict";var i6t=Ps(),cD=kl().axisHoverFormat,a6t=Ba().hovertemplateAttrs,LE=R3(),cLe=es(),RG=oa().extendFlat,o6t=Xs().overrideAll;function DG(e){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function IG(e){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var I_=hLe.exports=o6t(RG({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:DG("x"),y:DG("y"),z:DG("z")},caps:{x:IG("x"),y:IG("y"),z:IG("z")},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:a6t(),xhoverformat:cD("x"),yhoverformat:cD("y"),zhoverformat:cD("z"),valuehoverformat:cD("value",1),showlegend:RG({},cLe.showlegend,{dflt:!1})},i6t("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:LE.opacity,lightposition:LE.lightposition,lighting:LE.lighting,flatshading:LE.flatshading,contour:LE.contour,hoverinfo:RG({},cLe.hoverinfo)}),"calc","nested");I_.flatshading.dflt=!0;I_.lighting.facenormalsepsilon.dflt=0;I_.x.editType=I_.y.editType=I_.z.editType=I_.value.editType="calc+clearAxisTypes";I_.transforms=void 0});var FG=ne((Evr,dLe)=>{"use strict";var s6t=Wt(),l6t=wi(),u6t=hD(),f6t=Kf();function c6t(e,t,r,i){function n(a,o){return s6t.coerce(e,t,u6t,a,o)}vLe(e,t,r,i,n)}function vLe(e,t,r,i,n){var a=n("isomin"),o=n("isomax");o!=null&&a!==void 0&&a!==null&&a>o&&(t.isomin=null,t.isomax=null);var s=n("x"),l=n("y"),u=n("z"),f=n("value");if(!s||!s.length||!l||!l.length||!u||!u.length||!f||!f.length){t.visible=!1;return}var c=l6t.getComponentMethod("calendars","handleTraceDefaults");c(e,t,["x","y","z"],i),n("valuehoverformat"),["x","y","z"].forEach(function(_){n(_+"hoverformat");var T="caps."+_,p=n(T+".show");p&&n(T+".fill");var M="slices."+_,b=n(M+".show");b&&(n(M+".fill"),n(M+".locations"))});var h=n("spaceframe.show");h&&n("spaceframe.fill");var v=n("surface.show");v&&(n("surface.count"),n("surface.fill"),n("surface.pattern"));var d=n("contour.show");d&&(n("contour.color"),n("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(_){n(_)}),f6t(e,t,i,n,{prefix:"",cLetter:"c"}),t._length=null}dLe.exports={supplyDefaults:c6t,supplyIsoDefaults:vLe}});var vD=ne((kvr,gLe)=>{"use strict";var zG=Wt(),h6t=gv();function v6t(e,t){t._len=Math.min(t.u.length,t.v.length,t.w.length,t.x.length,t.y.length,t.z.length),t._u=fg(t.u,t._len),t._v=fg(t.v,t._len),t._w=fg(t.w,t._len),t._x=fg(t.x,t._len),t._y=fg(t.y,t._len),t._z=fg(t.z,t._len);var r=pLe(t);t._gridFill=r.fill,t._Xs=r.Xs,t._Ys=r.Ys,t._Zs=r.Zs,t._len=r.len;var i=0,n,a,o;t.starts&&(n=fg(t.starts.x||[]),a=fg(t.starts.y||[]),o=fg(t.starts.z||[]),i=Math.min(n.length,a.length,o.length)),t._startsX=n||[],t._startsY=a||[],t._startsZ=o||[];var s=0,l=1/0,u;for(u=0;u<t._len;u++){var f=t._u[u],c=t._v[u],h=t._w[u],v=Math.sqrt(f*f+c*c+h*h);s=Math.max(s,v),l=Math.min(l,v)}for(h6t(e,t,{vals:[l,s],containerStr:"",cLetter:"c"}),u=0;u<i;u++){var d=n[u];r.xMax=Math.max(r.xMax,d),r.xMin=Math.min(r.xMin,d);var _=a[u];r.yMax=Math.max(r.yMax,_),r.yMin=Math.min(r.yMin,_);var T=o[u];r.zMax=Math.max(r.zMax,T),r.zMin=Math.min(r.zMin,T)}t._slen=i,t._normMax=s,t._xbnds=[r.xMin,r.xMax],t._ybnds=[r.yMin,r.yMax],t._zbnds=[r.zMin,r.zMax]}function pLe(e){var t=e._x,r=e._y,i=e._z,n=e._len,a,o,s,l=-1/0,u=1/0,f=-1/0,c=1/0,h=-1/0,v=1/0,d="",_,T,p,M,b,w,k,x,E;for(n&&(M=t[0],w=r[0],x=i[0]),n>1&&(b=t[n-1],k=r[n-1],E=i[n-1]),a=0;a<n;a++)l=Math.max(l,t[a]),u=Math.min(u,t[a]),f=Math.max(f,r[a]),c=Math.min(c,r[a]),h=Math.max(h,i[a]),v=Math.min(v,i[a]),!_&&t[a]!==M&&(_=!0,d+="x"),!T&&r[a]!==w&&(T=!0,d+="y"),!p&&i[a]!==x&&(p=!0,d+="z");_||(d+="x"),T||(d+="y"),p||(d+="z");var S=qG(e._x),g=qG(e._y),C=qG(e._z);d=d.replace("x",(M>b?"-":"+")+"x"),d=d.replace("y",(w>k?"-":"+")+"y"),d=d.replace("z",(x>E?"-":"+")+"z");var A=function(){n=0,S=[],g=[],C=[]};(!n||n<S.length*g.length*C.length)&&A();var P=function(xe){return xe==="x"?t:xe==="y"?r:i},D=function(xe){return xe==="x"?S:xe==="y"?g:C},z=function(xe){return xe[n-1]<xe[0]?-1:1},O=P(d[1]),V=P(d[3]),B=P(d[5]),F=D(d[1]).length,N=D(d[3]).length,Z=D(d[5]).length,J=!1,re=function(xe,ce,ie){return F*(N*xe+ce)+ie},ue=z(P(d[1])),fe=z(P(d[3])),K=z(P(d[5]));for(a=0;a<Z-1;a++){for(o=0;o<N-1;o++){for(s=0;s<F-1;s++){var X=re(a,o,s),ae=re(a,o,s+1),oe=re(a,o+1,s),me=re(a+1,o,s);if((!(O[X]*ue<O[ae]*ue)||!(V[X]*fe<V[oe]*fe)||!(B[X]*K<B[me]*K))&&(J=!0),J)break}if(J)break}if(J)break}return J&&(zG.warn("Encountered arbitrary coordinates! Unable to input data grid."),A()),{xMin:u,yMin:c,zMin:v,xMax:l,yMax:f,zMax:h,Xs:S,Ys:g,Zs:C,len:n,fill:d}}function qG(e){return zG.distinctVals(e).vals}function fg(e,t){if(t===void 0&&(t=e.length),zG.isTypedArray(e))return e.subarray(0,t);for(var r=[],i=0;i<t;i++)r[i]=+e[i];return r}gLe.exports={calc:v6t,filter:fg,processGrid:pLe}});var OG=ne((Cvr,yLe)=>{"use strict";var d6t=gv(),p6t=vD().processGrid,dD=vD().filter;yLe.exports=function(t,r){r._len=Math.min(r.x.length,r.y.length,r.z.length,r.value.length),r._x=dD(r.x,r._len),r._y=dD(r.y,r._len),r._z=dD(r.z,r._len),r._value=dD(r.value,r._len);var i=p6t(r);r._gridFill=i.fill,r._Xs=i.Xs,r._Ys=i.Ys,r._Zs=i.Zs,r._len=i.len;for(var n=1/0,a=-1/0,o=0;o<r._len;o++){var s=r._value[o];n=Math.min(n,s),a=Math.max(a,s)}r._minValues=n,r._maxValues=a,r._vMin=r.isomin===void 0||r.isomin===null?n:r.isomin,r._vMax=r.isomax===void 0||r.isomin===null?a:r.isomax,d6t(t,r,{vals:[r._vMin,r._vMax],containerStr:"",cLetter:"c"})}});var D3=ne((Lvr,mLe)=>{"use strict";mLe.exports=function(t,r,i,n){n=n||t.length;for(var a=new Array(n),o=0;o<n;o++)a[o]=[t[o],r[o],i[o]];return a}});var pD=ne((Pvr,wLe)=>{"use strict";var g6t=yu().gl_mesh3d,y6t=dy().parseColorScale,m6t=Wt().isArrayOrTypedArray,x6t=Dp(),_6t=ul().extractOpts,xLe=D3(),PE=function(e,t){for(var r=t.length-1;r>0;r--){var i=Math.min(t[r],t[r-1]),n=Math.max(t[r],t[r-1]);if(n>i&&i<e&&e<=n)return{id:r,distRatio:(n-e)/(n-i)}}return{id:0,distRatio:0}};function _Le(e,t,r){this.scene=e,this.uid=r,this.mesh=t,this.name="",this.data=null,this.showContour=!1}var BG=_Le.prototype;BG.handlePick=function(e){if(e.object===this.mesh){var t=e.data.index,r=this.data._meshX[t],i=this.data._meshY[t],n=this.data._meshZ[t],a=this.data._Ys.length,o=this.data._Zs.length,s=PE(r,this.data._Xs).id,l=PE(i,this.data._Ys).id,u=PE(n,this.data._Zs).id,f=e.index=u+o*l+o*a*s;e.traceCoordinate=[this.data._meshX[f],this.data._meshY[f],this.data._meshZ[f],this.data._value[f]];var c=this.data.hovertext||this.data.text;return m6t(c)&&c[f]!==void 0?e.textLabel=c[f]:c&&(e.textLabel=c),!0}};BG.update=function(e){var t=this.scene,r=t.fullSceneLayout;this.data=bLe(e);function i(l,u,f,c){return u.map(function(h){return l.d2l(h,0,c)*f})}var n=xLe(i(r.xaxis,e._meshX,t.dataScale[0],e.xcalendar),i(r.yaxis,e._meshY,t.dataScale[1],e.ycalendar),i(r.zaxis,e._meshZ,t.dataScale[2],e.zcalendar)),a=xLe(e._meshI,e._meshJ,e._meshK),o={positions:n,cells:a,lightPosition:[e.lightposition.x,e.lightposition.y,e.lightposition.z],ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,vertexNormalsEpsilon:e.lighting.vertexnormalsepsilon,faceNormalsEpsilon:e.lighting.facenormalsepsilon,opacity:e.opacity,contourEnable:e.contour.show,contourColor:x6t(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading},s=_6t(e);o.vertexIntensity=e._meshIntensity,o.vertexIntensityBounds=[s.min,s.max],o.colormap=y6t(e),this.mesh.update(o)};BG.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var b6t=["xyz","xzy","yxz","yzx","zxy","zyx"];function bLe(e){e._meshI=[],e._meshJ=[],e._meshK=[];var t=e.surface.show,r=e.spaceframe.show,i=e.surface.fill,n=e.spaceframe.fill,a=!1,o=!1,s=0,l,u,f=e._Xs,c=e._Ys,h=e._Zs,v=f.length,d=c.length,_=h.length,T=b6t.indexOf(e._gridFill.replace(/-/g,"").replace(/\+/g,"")),p=function(dt,it,vt){switch(T){case 5:return vt+_*it+_*d*dt;case 4:return vt+_*dt+_*v*it;case 3:return it+d*vt+d*_*dt;case 2:return it+d*dt+d*v*vt;case 1:return dt+v*vt+v*_*it;default:return dt+v*it+v*d*vt}},M=e._minValues,b=e._maxValues,w=e._vMin,k=e._vMax,x,E,S,g;function C(dt,it,vt){for(var rt=g.length,We=u;We<rt;We++)if(dt===x[We]&&it===E[We]&&vt===S[We])return We;return-1}function A(){u=l}function P(){x=[],E=[],S=[],g=[],l=0,A()}function D(dt,it,vt,rt){return x.push(dt),E.push(it),S.push(vt),g.push(rt),l++,l-1}function z(dt,it,vt){return e._meshI.push(dt),e._meshJ.push(it),e._meshK.push(vt),s++,s-1}function O(dt,it,vt){for(var rt=[],We=0;We<dt.length;We++)rt[We]=(dt[We]+it[We]+vt[We])/3;return rt}function V(dt,it,vt){for(var rt=[],We=0;We<dt.length;We++)rt[We]=dt[We]*(1-vt)+vt*it[We];return rt}var B;function F(dt){B=dt}function N(dt,it){var vt=dt[0],rt=dt[1],We=dt[2],ht=O(vt,rt,We),mt=Math.sqrt(1-B),er=V(ht,vt,mt),$t=V(ht,rt,mt),cr=V(ht,We,mt),or=it[0],vr=it[1],Ot=it[2];return{xyzv:[[vt,rt,$t],[$t,er,vt],[rt,We,cr],[cr,$t,rt],[We,vt,er],[er,cr,We]],abc:[[or,vr,-1],[-1,-1,or],[vr,Ot,-1],[-1,-1,vr],[Ot,or,-1],[-1,-1,Ot]]}}function Z(dt,it){return dt==="all"||dt===null?!0:dt.indexOf(it)>-1}function J(dt,it){return dt===null?it:dt}function re(dt,it,vt){A();var rt=[it],We=[vt];if(B>=1)rt=[it],We=[vt];else if(B>0){var ht=N(it,vt);rt=ht.xyzv,We=ht.abc}for(var mt=0;mt<rt.length;mt++){it=rt[mt],vt=We[mt];for(var er=[],$t=0;$t<3;$t++){var cr=it[$t][0],or=it[$t][1],vr=it[$t][2],Ot=it[$t][3],yt=vt[$t]>-1?vt[$t]:C(cr,or,vr);yt>-1?er[$t]=yt:er[$t]=D(cr,or,vr,J(dt,Ot))}z(er[0],er[1],er[2])}}function ue(dt,it,vt){var rt=function(We,ht,mt){re(dt,[it[We],it[ht],it[mt]],[vt[We],vt[ht],vt[mt]])};rt(0,1,2),rt(2,3,0)}function fe(dt,it,vt){var rt=function(We,ht,mt){re(dt,[it[We],it[ht],it[mt]],[vt[We],vt[ht],vt[mt]])};rt(0,1,2),rt(3,0,1),rt(2,3,0),rt(1,2,3)}function K(dt,it,vt,rt){var We=dt[3];We<vt&&(We=vt),We>rt&&(We=rt);for(var ht=(dt[3]-We)/(dt[3]-it[3]+1e-9),mt=[],er=0;er<4;er++)mt[er]=(1-ht)*dt[er]+ht*it[er];return mt}function X(dt,it,vt){return dt>=it&&dt<=vt}function ae(dt){var it=.001*(k-w);return dt>=w-it&&dt<=k+it}function oe(dt){for(var it=[],vt=0;vt<4;vt++){var rt=dt[vt];it.push([e._x[rt],e._y[rt],e._z[rt],e._value[rt]])}return it}var me=3;function xe(dt,it,vt,rt,We,ht){ht||(ht=1),vt=[-1,-1,-1];var mt=!1,er=[X(it[0][3],rt,We),X(it[1][3],rt,We),X(it[2][3],rt,We)];if(!er[0]&&!er[1]&&!er[2])return!1;var $t=function(or,vr,Ot){return ae(vr[0][3])&&ae(vr[1][3])&&ae(vr[2][3])?(re(or,vr,Ot),!0):ht<me?xe(or,vr,Ot,w,k,++ht):!1};if(er[0]&&er[1]&&er[2])return $t(dt,it,vt)||mt;var cr=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(or){if(er[or[0]]&&er[or[1]]&&!er[or[2]]){var vr=it[or[0]],Ot=it[or[1]],yt=it[or[2]],Et=K(yt,vr,rt,We),Je=K(yt,Ot,rt,We);mt=$t(dt,[Je,Et,vr],[-1,-1,vt[or[0]]])||mt,mt=$t(dt,[vr,Ot,Je],[vt[or[0]],vt[or[1]],-1])||mt,cr=!0}}),cr||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(or){if(er[or[0]]&&!er[or[1]]&&!er[or[2]]){var vr=it[or[0]],Ot=it[or[1]],yt=it[or[2]],Et=K(Ot,vr,rt,We),Je=K(yt,vr,rt,We);mt=$t(dt,[Je,Et,vr],[-1,-1,vt[or[0]]])||mt,cr=!0}}),mt}function ce(dt,it,vt,rt){var We=!1,ht=oe(it),mt=[X(ht[0][3],vt,rt),X(ht[1][3],vt,rt),X(ht[2][3],vt,rt),X(ht[3][3],vt,rt)];if(!mt[0]&&!mt[1]&&!mt[2]&&!mt[3])return We;if(mt[0]&&mt[1]&&mt[2]&&mt[3])return o&&(We=fe(dt,ht,it)||We),We;var er=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function($t){if(mt[$t[0]]&&mt[$t[1]]&&mt[$t[2]]&&!mt[$t[3]]){var cr=ht[$t[0]],or=ht[$t[1]],vr=ht[$t[2]],Ot=ht[$t[3]];if(o)We=re(dt,[cr,or,vr],[it[$t[0]],it[$t[1]],it[$t[2]]])||We;else{var yt=K(Ot,cr,vt,rt),Et=K(Ot,or,vt,rt),Je=K(Ot,vr,vt,rt);We=re(null,[yt,Et,Je],[-1,-1,-1])||We}er=!0}}),er||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function($t){if(mt[$t[0]]&&mt[$t[1]]&&!mt[$t[2]]&&!mt[$t[3]]){var cr=ht[$t[0]],or=ht[$t[1]],vr=ht[$t[2]],Ot=ht[$t[3]],yt=K(vr,cr,vt,rt),Et=K(vr,or,vt,rt),Je=K(Ot,or,vt,rt),Ke=K(Ot,cr,vt,rt);o?(We=re(dt,[cr,Ke,yt],[it[$t[0]],-1,-1])||We,We=re(dt,[or,Et,Je],[it[$t[1]],-1,-1])||We):We=ue(null,[yt,Et,Je,Ke],[-1,-1,-1,-1])||We,er=!0}}),er)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function($t){if(mt[$t[0]]&&!mt[$t[1]]&&!mt[$t[2]]&&!mt[$t[3]]){var cr=ht[$t[0]],or=ht[$t[1]],vr=ht[$t[2]],Ot=ht[$t[3]],yt=K(or,cr,vt,rt),Et=K(vr,cr,vt,rt),Je=K(Ot,cr,vt,rt);o?(We=re(dt,[cr,yt,Et],[it[$t[0]],-1,-1])||We,We=re(dt,[cr,Et,Je],[it[$t[0]],-1,-1])||We,We=re(dt,[cr,Je,yt],[it[$t[0]],-1,-1])||We):We=re(null,[yt,Et,Je],[-1,-1,-1])||We,er=!0}}),We}function ie(dt,it,vt,rt,We,ht,mt,er,$t,cr,or){var vr=!1;return a&&(Z(dt,"A")&&(vr=ce(null,[it,vt,rt,ht],cr,or)||vr),Z(dt,"B")&&(vr=ce(null,[vt,rt,We,$t],cr,or)||vr),Z(dt,"C")&&(vr=ce(null,[vt,ht,mt,$t],cr,or)||vr),Z(dt,"D")&&(vr=ce(null,[rt,ht,er,$t],cr,or)||vr),Z(dt,"E")&&(vr=ce(null,[vt,rt,ht,$t],cr,or)||vr)),o&&(vr=ce(dt,[vt,rt,ht,$t],cr,or)||vr),vr}function ge(dt,it,vt,rt,We,ht,mt,er){return[er[0]===!0?!0:xe(dt,oe([it,vt,rt]),[it,vt,rt],ht,mt),er[1]===!0?!0:xe(dt,oe([rt,We,it]),[rt,We,it],ht,mt)]}function le(dt,it,vt,rt,We,ht,mt,er,$t){return er?ge(dt,it,vt,We,rt,ht,mt,$t):ge(dt,vt,We,rt,it,ht,mt,$t)}function we(dt,it,vt,rt,We,ht,mt){var er=!1,$t,cr,or,vr,Ot=function(){er=xe(dt,[$t,cr,or],[-1,-1,-1],We,ht)||er,er=xe(dt,[or,vr,$t],[-1,-1,-1],We,ht)||er},yt=mt[0],Et=mt[1],Je=mt[2];return yt&&($t=V(oe([p(it,vt-0,rt-0)])[0],oe([p(it-1,vt-0,rt-0)])[0],yt),cr=V(oe([p(it,vt-0,rt-1)])[0],oe([p(it-1,vt-0,rt-1)])[0],yt),or=V(oe([p(it,vt-1,rt-1)])[0],oe([p(it-1,vt-1,rt-1)])[0],yt),vr=V(oe([p(it,vt-1,rt-0)])[0],oe([p(it-1,vt-1,rt-0)])[0],yt),Ot()),Et&&($t=V(oe([p(it-0,vt,rt-0)])[0],oe([p(it-0,vt-1,rt-0)])[0],Et),cr=V(oe([p(it-0,vt,rt-1)])[0],oe([p(it-0,vt-1,rt-1)])[0],Et),or=V(oe([p(it-1,vt,rt-1)])[0],oe([p(it-1,vt-1,rt-1)])[0],Et),vr=V(oe([p(it-1,vt,rt-0)])[0],oe([p(it-1,vt-1,rt-0)])[0],Et),Ot()),Je&&($t=V(oe([p(it-0,vt-0,rt)])[0],oe([p(it-0,vt-0,rt-1)])[0],Je),cr=V(oe([p(it-0,vt-1,rt)])[0],oe([p(it-0,vt-1,rt-1)])[0],Je),or=V(oe([p(it-1,vt-1,rt)])[0],oe([p(it-1,vt-1,rt-1)])[0],Je),vr=V(oe([p(it-1,vt-0,rt)])[0],oe([p(it-1,vt-0,rt-1)])[0],Je),Ot()),er}function Re(dt,it,vt,rt,We,ht,mt,er,$t,cr,or,vr){var Ot=dt;return vr?(a&&dt==="even"&&(Ot=null),ie(Ot,it,vt,rt,We,ht,mt,er,$t,cr,or)):(a&&dt==="odd"&&(Ot=null),ie(Ot,$t,er,mt,ht,We,rt,vt,it,cr,or))}function qe(dt,it,vt,rt,We){for(var ht=[],mt=0,er=0;er<it.length;er++)for(var $t=it[er],cr=1;cr<_;cr++)for(var or=1;or<d;or++)ht.push(le(dt,p($t,or-1,cr-1),p($t,or-1,cr),p($t,or,cr-1),p($t,or,cr),vt,rt,($t+or+cr)%2,We&&We[mt]?We[mt]:[])),mt++;return ht}function et(dt,it,vt,rt,We){for(var ht=[],mt=0,er=0;er<it.length;er++)for(var $t=it[er],cr=1;cr<v;cr++)for(var or=1;or<_;or++)ht.push(le(dt,p(cr-1,$t,or-1),p(cr,$t,or-1),p(cr-1,$t,or),p(cr,$t,or),vt,rt,(cr+$t+or)%2,We&&We[mt]?We[mt]:[])),mt++;return ht}function Pe(dt,it,vt,rt,We){for(var ht=[],mt=0,er=0;er<it.length;er++)for(var $t=it[er],cr=1;cr<d;cr++)for(var or=1;or<v;or++)ht.push(le(dt,p(or-1,cr-1,$t),p(or-1,cr,$t),p(or,cr-1,$t),p(or,cr,$t),vt,rt,(or+cr+$t)%2,We&&We[mt]?We[mt]:[])),mt++;return ht}function Ie(dt,it,vt){for(var rt=1;rt<_;rt++)for(var We=1;We<d;We++)for(var ht=1;ht<v;ht++)Re(dt,p(ht-1,We-1,rt-1),p(ht-1,We-1,rt),p(ht-1,We,rt-1),p(ht-1,We,rt),p(ht,We-1,rt-1),p(ht,We-1,rt),p(ht,We,rt-1),p(ht,We,rt),it,vt,(ht+We+rt)%2)}function ut(dt,it,vt){o=!0,Ie(dt,it,vt),o=!1}function ft(dt,it,vt){a=!0,Ie(dt,it,vt),a=!1}function je(dt,it,vt,rt,We,ht){for(var mt=[],er=0,$t=0;$t<it.length;$t++)for(var cr=it[$t],or=1;or<_;or++)for(var vr=1;vr<d;vr++)mt.push(we(dt,cr,vr,or,vt,rt,We[$t],ht&&ht[er]?ht[er]:[])),er++;return mt}function _t(dt,it,vt,rt,We,ht){for(var mt=[],er=0,$t=0;$t<it.length;$t++)for(var cr=it[$t],or=1;or<v;or++)for(var vr=1;vr<_;vr++)mt.push(we(dt,or,cr,vr,vt,rt,We[$t],ht&&ht[er]?ht[er]:[])),er++;return mt}function Bt(dt,it,vt,rt,We,ht){for(var mt=[],er=0,$t=0;$t<it.length;$t++)for(var cr=it[$t],or=1;or<d;or++)for(var vr=1;vr<v;vr++)mt.push(we(dt,vr,or,cr,vt,rt,We[$t],ht&&ht[er]?ht[er]:[])),er++;return mt}function Lt(dt,it){for(var vt=[],rt=dt;rt<it;rt++)vt.push(rt);return vt}function Me(){for(var dt=0;dt<v;dt++)for(var it=0;it<d;it++)for(var vt=0;vt<_;vt++){var rt=p(dt,it,vt);D(e._x[rt],e._y[rt],e._z[rt],e._value[rt])}}function Ze(){P(),Me();var dt=null;if(r&&n&&(F(n),ut(dt,w,k)),t&&i){F(i);for(var it=e.surface.pattern,vt=e.surface.count,rt=0;rt<vt;rt++){var We=vt===1?.5:rt/(vt-1),ht=(1-We)*w+We*k,mt=Math.abs(ht-M),er=Math.abs(ht-b),$t=mt>er?[M,ht]:[ht,b];ft(it,$t[0],$t[1])}}var cr=[[Math.min(w,b),Math.max(w,b)],[Math.min(M,k),Math.max(M,k)]];["x","y","z"].forEach(function(or){for(var vr=[],Ot=0;Ot<cr.length;Ot++){var yt=0,Et=cr[Ot][0],Je=cr[Ot][1],Ke=e.slices[or];if(Ke.show&&Ke.fill){F(Ke.fill);var At=[],Ee=[],de=[];if(Ke.locations.length)for(var Te=0;Te<Ke.locations.length;Te++){var nt=PE(Ke.locations[Te],or==="x"?f:or==="y"?c:h);nt.distRatio===0?At.push(nt.id):nt.id>0&&(Ee.push(nt.id),or==="x"?de.push([nt.distRatio,0,0]):or==="y"?de.push([0,nt.distRatio,0]):de.push([0,0,nt.distRatio]))}else or==="x"?At=Lt(1,v-1):or==="y"?At=Lt(1,d-1):At=Lt(1,_-1);Ee.length>0&&(or==="x"?vr[yt]=je(dt,Ee,Et,Je,de,vr[yt]):or==="y"?vr[yt]=_t(dt,Ee,Et,Je,de,vr[yt]):vr[yt]=Bt(dt,Ee,Et,Je,de,vr[yt]),yt++),At.length>0&&(or==="x"?vr[yt]=qe(dt,At,Et,Je,vr[yt]):or==="y"?vr[yt]=et(dt,At,Et,Je,vr[yt]):vr[yt]=Pe(dt,At,Et,Je,vr[yt]),yt++)}var Mt=e.caps[or];Mt.show&&Mt.fill&&(F(Mt.fill),or==="x"?vr[yt]=qe(dt,[0,v-1],Et,Je,vr[yt]):or==="y"?vr[yt]=et(dt,[0,d-1],Et,Je,vr[yt]):vr[yt]=Pe(dt,[0,_-1],Et,Je,vr[yt]),yt++)}}),s===0&&P(),e._meshX=x,e._meshY=E,e._meshZ=S,e._meshIntensity=g,e._Xs=f,e._Ys=c,e._Zs=h}return Ze(),e}function w6t(e,t){var r=e.glplot.gl,i=g6t({gl:r}),n=new _Le(e,i,t.uid);return i._trace=n,n.update(t),e.glplot.add(i),n}wLe.exports={findNearestOnAxis:PE,generateIsoMeshes:bLe,createIsosurfaceTrace:w6t}});var ALe=ne((Rvr,TLe)=>{"use strict";TLe.exports={attributes:hD(),supplyDefaults:FG().supplyDefaults,calc:OG(),colorbar:{min:"cmin",max:"cmax"},plot:pD().createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:i1(),categories:["gl3d","showLegend"],meta:{}}});var SLe=ne((Dvr,MLe)=>{"use strict";MLe.exports=ALe()});var UG=ne((Ivr,kLe)=>{"use strict";var T6t=Ps(),af=hD(),A6t=kE(),ELe=es(),NG=oa().extendFlat,M6t=Xs().overrideAll,RE=kLe.exports=M6t(NG({x:af.x,y:af.y,z:af.z,value:af.value,isomin:af.isomin,isomax:af.isomax,surface:af.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:af.slices,caps:af.caps,text:af.text,hovertext:af.hovertext,xhoverformat:af.xhoverformat,yhoverformat:af.yhoverformat,zhoverformat:af.zhoverformat,valuehoverformat:af.valuehoverformat,hovertemplate:af.hovertemplate},T6t("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:af.colorbar,opacity:af.opacity,opacityscale:A6t.opacityscale,lightposition:af.lightposition,lighting:af.lighting,flatshading:af.flatshading,contour:af.contour,hoverinfo:NG({},ELe.hoverinfo),showlegend:NG({},ELe.showlegend,{dflt:!1})}),"calc","nested");RE.x.editType=RE.y.editType=RE.z.editType=RE.value.editType="calc+clearAxisTypes";RE.transforms=void 0});var LLe=ne((Fvr,CLe)=>{"use strict";var S6t=Wt(),E6t=UG(),k6t=FG().supplyIsoDefaults,C6t=CG().opacityscaleDefaults;CLe.exports=function(t,r,i,n){function a(o,s){return S6t.coerce(t,r,E6t,o,s)}k6t(t,r,i,n,a),C6t(t,r,n,a)}});var ILe=ne((qvr,DLe)=>{"use strict";var L6t=yu().gl_mesh3d,P6t=dy().parseColorScale,R6t=Wt().isArrayOrTypedArray,D6t=Dp(),I6t=ul().extractOpts,PLe=D3(),VG=pD().findNearestOnAxis,F6t=pD().generateIsoMeshes;function RLe(e,t,r){this.scene=e,this.uid=r,this.mesh=t,this.name="",this.data=null,this.showContour=!1}var HG=RLe.prototype;HG.handlePick=function(e){if(e.object===this.mesh){var t=e.data.index,r=this.data._meshX[t],i=this.data._meshY[t],n=this.data._meshZ[t],a=this.data._Ys.length,o=this.data._Zs.length,s=VG(r,this.data._Xs).id,l=VG(i,this.data._Ys).id,u=VG(n,this.data._Zs).id,f=e.index=u+o*l+o*a*s;e.traceCoordinate=[this.data._meshX[f],this.data._meshY[f],this.data._meshZ[f],this.data._value[f]];var c=this.data.hovertext||this.data.text;return R6t(c)&&c[f]!==void 0?e.textLabel=c[f]:c&&(e.textLabel=c),!0}};HG.update=function(e){var t=this.scene,r=t.fullSceneLayout;this.data=F6t(e);function i(l,u,f,c){return u.map(function(h){return l.d2l(h,0,c)*f})}var n=PLe(i(r.xaxis,e._meshX,t.dataScale[0],e.xcalendar),i(r.yaxis,e._meshY,t.dataScale[1],e.ycalendar),i(r.zaxis,e._meshZ,t.dataScale[2],e.zcalendar)),a=PLe(e._meshI,e._meshJ,e._meshK),o={positions:n,cells:a,lightPosition:[e.lightposition.x,e.lightposition.y,e.lightposition.z],ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,vertexNormalsEpsilon:e.lighting.vertexnormalsepsilon,faceNormalsEpsilon:e.lighting.facenormalsepsilon,opacity:e.opacity,opacityscale:e.opacityscale,contourEnable:e.contour.show,contourColor:D6t(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading},s=I6t(e);o.vertexIntensity=e._meshIntensity,o.vertexIntensityBounds=[s.min,s.max],o.colormap=P6t(e),this.mesh.update(o)};HG.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function q6t(e,t){var r=e.glplot.gl,i=L6t({gl:r}),n=new RLe(e,i,t.uid);return i._trace=n,n.update(t),e.glplot.add(i),n}DLe.exports=q6t});var qLe=ne((zvr,FLe)=>{"use strict";FLe.exports={attributes:UG(),supplyDefaults:LLe(),calc:OG(),colorbar:{min:"cmin",max:"cmax"},plot:ILe(),moduleType:"trace",name:"volume",basePlotModule:i1(),categories:["gl3d","showLegend"],meta:{}}});var OLe=ne((Ovr,zLe)=>{"use strict";zLe.exports=qLe()});var ULe=ne((Bvr,NLe)=>{"use strict";var z6t=wi(),BLe=Wt(),O6t=Kf(),B6t=R3();NLe.exports=function(t,r,i,n){function a(f,c){return BLe.coerce(t,r,B6t,f,c)}function o(f){var c=f.map(function(h){var v=a(h);return v&&BLe.isArrayOrTypedArray(v)?v:null});return c.every(function(h){return h&&h.length===c[0].length})&&c}var s=o(["x","y","z"]);if(!s){r.visible=!1;return}if(o(["i","j","k"]),r.i&&(!r.j||!r.k)||r.j&&(!r.k||!r.i)||r.k&&(!r.i||!r.j)){r.visible=!1;return}var l=z6t.getComponentMethod("calendars","handleTraceDefaults");l(t,r,["x","y","z"],n),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(f){a(f)});var u=a("contour.show");u&&(a("contour.color"),a("contour.width")),"intensity"in t?(a("intensity"),a("intensitymode"),O6t(t,r,n,a,{prefix:"",cLetter:"c"})):(r.showscale=!1,"facecolor"in t?a("facecolor"):"vertexcolor"in t?a("vertexcolor"):a("color",i)),a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),r._length=null}});var HLe=ne((Nvr,VLe)=>{"use strict";var N6t=gv();VLe.exports=function(t,r){r.intensity&&N6t(t,r,{vals:r.intensity,containerStr:"",cLetter:"c"})}});var ZLe=ne((Uvr,XLe)=>{"use strict";var U6t=yu().gl_mesh3d,V6t=yu().delaunay_triangulate,H6t=yu().alpha_shape,G6t=yu().convex_hull,Y6t=dy().parseColorScale,W6t=Wt().isArrayOrTypedArray,XG=Dp(),X6t=ul().extractOpts,GLe=D3();function WLe(e,t,r){this.scene=e,this.uid=r,this.mesh=t,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var ZG=WLe.prototype;ZG.handlePick=function(e){if(e.object===this.mesh){var t=e.index=e.data.index;e.data._cellCenter?e.traceCoordinate=e.data.dataCoordinate:e.traceCoordinate=[this.data.x[t],this.data.y[t],this.data.z[t]];var r=this.data.hovertext||this.data.text;return W6t(r)&&r[t]!==void 0?e.textLabel=r[t]:r&&(e.textLabel=r),!0}};function YLe(e){for(var t=[],r=e.length,i=0;i<r;i++)t[i]=XG(e[i]);return t}function GG(e,t,r,i){for(var n=[],a=t.length,o=0;o<a;o++)n[o]=e.d2l(t[o],0,i)*r;return n}function YG(e){for(var t=[],r=e.length,i=0;i<r;i++)t[i]=Math.round(e[i]);return t}function Z6t(e,t){for(var r=["x","y","z"].indexOf(e),i=[],n=t.length,a=0;a<n;a++)i[a]=[t[a][(r+1)%3],t[a][(r+2)%3]];return V6t(i)}function WG(e,t){for(var r=e.length,i=0;i<r;i++)if(e[i]<=-.5||e[i]>=t-.5)return!1;return!0}ZG.update=function(e){var t=this.scene,r=t.fullSceneLayout;this.data=e;var i=e.x.length,n=GLe(GG(r.xaxis,e.x,t.dataScale[0],e.xcalendar),GG(r.yaxis,e.y,t.dataScale[1],e.ycalendar),GG(r.zaxis,e.z,t.dataScale[2],e.zcalendar)),a;if(e.i&&e.j&&e.k){if(e.i.length!==e.j.length||e.j.length!==e.k.length||!WG(e.i,i)||!WG(e.j,i)||!WG(e.k,i))return;a=GLe(YG(e.i),YG(e.j),YG(e.k))}else e.alphahull===0?a=G6t(n):e.alphahull>0?a=H6t(e.alphahull,n):a=Z6t(e.delaunayaxis,n);var o={positions:n,cells:a,lightPosition:[e.lightposition.x,e.lightposition.y,e.lightposition.z],ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,vertexNormalsEpsilon:e.lighting.vertexnormalsepsilon,faceNormalsEpsilon:e.lighting.facenormalsepsilon,opacity:e.opacity,contourEnable:e.contour.show,contourColor:XG(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading};if(e.intensity){var s=X6t(e);this.color="#fff";var l=e.intensitymode;o[l+"Intensity"]=e.intensity,o[l+"IntensityBounds"]=[s.min,s.max],o.colormap=Y6t(e)}else e.vertexcolor?(this.color=e.vertexcolor[0],o.vertexColors=YLe(e.vertexcolor)):e.facecolor?(this.color=e.facecolor[0],o.cellColors=YLe(e.facecolor)):(this.color=e.color,o.meshColor=XG(e.color));this.mesh.update(o)};ZG.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function j6t(e,t){var r=e.glplot.gl,i=U6t({gl:r}),n=new WLe(e,i,t.uid);return i._trace=n,n.update(t),e.glplot.add(i),n}XLe.exports=j6t});var KLe=ne((Vvr,jLe)=>{"use strict";jLe.exports={attributes:R3(),supplyDefaults:ULe(),calc:HLe(),colorbar:{min:"cmin",max:"cmax"},plot:ZLe(),moduleType:"trace",name:"mesh3d",basePlotModule:i1(),categories:["gl3d","showLegend"],meta:{}}});var QLe=ne((Hvr,JLe)=>{"use strict";JLe.exports=KLe()});var KG=ne((Gvr,ePe)=>{"use strict";var K6t=Ps(),I3=kl().axisHoverFormat,J6t=Ba().hovertemplateAttrs,Q6t=R3(),$Le=es(),jG=oa().extendFlat,DE={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:J6t({editType:"calc"},{keys:["norm"]}),uhoverformat:I3("u",1),vhoverformat:I3("v",1),whoverformat:I3("w",1),xhoverformat:I3("x"),yhoverformat:I3("y"),zhoverformat:I3("z"),showlegend:jG({},$Le.showlegend,{dflt:!1})};jG(DE,K6t("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var $6t=["opacity","lightposition","lighting"];$6t.forEach(function(e){DE[e]=Q6t[e]});DE.hoverinfo=jG({},$Le.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"});DE.transforms=void 0;ePe.exports=DE});var rPe=ne((Yvr,tPe)=>{"use strict";var eRt=Wt(),tRt=Kf(),rRt=KG();tPe.exports=function(t,r,i,n){function a(h,v){return eRt.coerce(t,r,rRt,h,v)}var o=a("u"),s=a("v"),l=a("w"),u=a("x"),f=a("y"),c=a("z");if(!o||!o.length||!s||!s.length||!l||!l.length||!u||!u.length||!f||!f.length||!c||!c.length){r.visible=!1;return}a("sizeref"),a("sizemode"),a("anchor"),a("lighting.ambient"),a("lighting.diffuse"),a("lighting.specular"),a("lighting.roughness"),a("lighting.fresnel"),a("lightposition.x"),a("lightposition.y"),a("lightposition.z"),tRt(t,r,n,a,{prefix:"",cLetter:"c"}),a("text"),a("hovertext"),a("hovertemplate"),a("uhoverformat"),a("vhoverformat"),a("whoverformat"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),r._length=null}});var iPe=ne((Wvr,nPe)=>{"use strict";var nRt=gv();nPe.exports=function(t,r){for(var i=r.u,n=r.v,a=r.w,o=Math.min(r.x.length,r.y.length,r.z.length,i.length,n.length,a.length),s=-1/0,l=1/0,u=0;u<o;u++){var f=i[u],c=n[u],h=a[u],v=Math.sqrt(f*f+c*c+h*h);s=Math.max(s,v),l=Math.min(l,v)}r._len=o,r._normMax=s,nRt(t,r,{vals:[l,s],containerStr:"",cLetter:"c"})}});var uPe=ne((Xvr,lPe)=>{"use strict";var iRt=yu().gl_cone3d,aRt=yu().gl_cone3d.createConeMesh,oRt=Wt().simpleMap,sRt=dy().parseColorScale,lRt=ul().extractOpts,uRt=Wt().isArrayOrTypedArray,aPe=D3();function oPe(e,t){this.scene=e,this.uid=t,this.mesh=null,this.data=null}var JG=oPe.prototype;JG.handlePick=function(e){if(e.object===this.mesh){var t=e.index=e.data.index,r=this.data.x[t],i=this.data.y[t],n=this.data.z[t],a=this.data.u[t],o=this.data.v[t],s=this.data.w[t];e.traceCoordinate=[r,i,n,a,o,s,Math.sqrt(a*a+o*o+s*s)];var l=this.data.hovertext||this.data.text;return uRt(l)&&l[t]!==void 0?e.textLabel=l[t]:l&&(e.textLabel=l),!0}};var fRt={xaxis:0,yaxis:1,zaxis:2},cRt={tip:1,tail:0,cm:.25,center:.5},hRt={tip:1,tail:1,cm:.75,center:.5};function sPe(e,t){var r=e.fullSceneLayout,i=e.dataScale,n={};function a(u,f){var c=r[f],h=i[fRt[f]];return oRt(u,function(v){return c.d2l(v)*h})}n.vectors=aPe(a(t.u,"xaxis"),a(t.v,"yaxis"),a(t.w,"zaxis"),t._len),n.positions=aPe(a(t.x,"xaxis"),a(t.y,"yaxis"),a(t.z,"zaxis"),t._len);var o=lRt(t);n.colormap=sRt(t),n.vertexIntensityBounds=[o.min/t._normMax,o.max/t._normMax],n.coneOffset=cRt[t.anchor],t.sizemode==="scaled"?n.coneSize=t.sizeref||.5:n.coneSize=t.sizeref&&t._normMax?t.sizeref/t._normMax:.5;var s=iRt(n),l=t.lightposition;return s.lightPosition=[l.x,l.y,l.z],s.ambient=t.lighting.ambient,s.diffuse=t.lighting.diffuse,s.specular=t.lighting.specular,s.roughness=t.lighting.roughness,s.fresnel=t.lighting.fresnel,s.opacity=t.opacity,t._pad=hRt[t.anchor]*s.vectorScale*s.coneScale*t._normMax,s}JG.update=function(e){this.data=e;var t=sPe(this.scene,e);this.mesh.update(t)};JG.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function vRt(e,t){var r=e.glplot.gl,i=sPe(e,t),n=aRt(r,i),a=new oPe(e,t.uid);return a.mesh=n,a.data=t,n._trace=a,e.glplot.add(n),a}lPe.exports=vRt});var cPe=ne((Zvr,fPe)=>{"use strict";fPe.exports={moduleType:"trace",name:"cone",basePlotModule:i1(),categories:["gl3d","showLegend"],attributes:KG(),supplyDefaults:rPe(),colorbar:{min:"cmin",max:"cmax"},calc:iPe(),plot:uPe(),eventData:function(e,t){return e.norm=t.traceCoordinate[6],e},meta:{}}});var vPe=ne((jvr,hPe)=>{"use strict";hPe.exports=cPe()});var $G=ne((Kvr,pPe)=>{"use strict";var dRt=Ps(),F3=kl().axisHoverFormat,pRt=Ba().hovertemplateAttrs,gRt=R3(),dPe=es(),QG=oa().extendFlat,IE={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:pRt({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:F3("u",1),vhoverformat:F3("v",1),whoverformat:F3("w",1),xhoverformat:F3("x"),yhoverformat:F3("y"),zhoverformat:F3("z"),showlegend:QG({},dPe.showlegend,{dflt:!1})};QG(IE,dRt("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var yRt=["opacity","lightposition","lighting"];yRt.forEach(function(e){IE[e]=gRt[e]});IE.hoverinfo=QG({},dPe.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"});IE.transforms=void 0;pPe.exports=IE});var yPe=ne((Jvr,gPe)=>{"use strict";var mRt=Wt(),xRt=Kf(),_Rt=$G();gPe.exports=function(t,r,i,n){function a(h,v){return mRt.coerce(t,r,_Rt,h,v)}var o=a("u"),s=a("v"),l=a("w"),u=a("x"),f=a("y"),c=a("z");if(!o||!o.length||!s||!s.length||!l||!l.length||!u||!u.length||!f||!f.length||!c||!c.length){r.visible=!1;return}a("starts.x"),a("starts.y"),a("starts.z"),a("maxdisplayed"),a("sizeref"),a("lighting.ambient"),a("lighting.diffuse"),a("lighting.specular"),a("lighting.roughness"),a("lighting.fresnel"),a("lightposition.x"),a("lightposition.y"),a("lightposition.z"),xRt(t,r,n,a,{prefix:"",cLetter:"c"}),a("text"),a("hovertext"),a("hovertemplate"),a("uhoverformat"),a("vhoverformat"),a("whoverformat"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),r._length=null}});var MPe=ne((Qvr,APe)=>{"use strict";var _Pe=yu().gl_streamtube3d,bRt=_Pe.createTubeMesh,wRt=Wt(),TRt=dy().parseColorScale,ARt=ul().extractOpts,mPe=D3(),bPe={xaxis:0,yaxis:1,zaxis:2};function wPe(e,t){this.scene=e,this.uid=t,this.mesh=null,this.data=null}var tY=wPe.prototype;tY.handlePick=function(e){var t=this.scene.fullSceneLayout,r=this.scene.dataScale;function i(o,s){var l=t[s],u=r[bPe[s]];return l.l2c(o)/u}if(e.object===this.mesh){var n=e.data.position,a=e.data.velocity;return e.traceCoordinate=[i(n[0],"xaxis"),i(n[1],"yaxis"),i(n[2],"zaxis"),i(a[0],"xaxis"),i(a[1],"yaxis"),i(a[2],"zaxis"),e.data.intensity*this.data._normMax,e.data.divergence],e.textLabel=this.data.hovertext||this.data.text,!0}};function xPe(e){var t=e.length,r;return t>2?r=e.slice(1,t-1):t===2?r=[(e[0]+e[1])/2]:r=e,r}function eY(e){var t=e.length;return t===1?[.5,.5]:[e[1]-e[0],e[t-1]-e[t-2]]}function TPe(e,t){var r=e.fullSceneLayout,i=e.dataScale,n=t._len,a={};function o(P,D){var z=r[D],O=i[bPe[D]];return wRt.simpleMap(P,function(V){return z.d2l(V)*O})}if(a.vectors=mPe(o(t._u,"xaxis"),o(t._v,"yaxis"),o(t._w,"zaxis"),n),!n)return{positions:[],cells:[]};var s=o(t._Xs,"xaxis"),l=o(t._Ys,"yaxis"),u=o(t._Zs,"zaxis");a.meshgrid=[s,l,u],a.gridFill=t._gridFill;var f=t._slen;if(f)a.startingPositions=mPe(o(t._startsX,"xaxis"),o(t._startsY,"yaxis"),o(t._startsZ,"zaxis"));else{for(var c=l[0],h=xPe(s),v=xPe(u),d=new Array(h.length*v.length),_=0,T=0;T<h.length;T++)for(var p=0;p<v.length;p++)d[_++]=[h[T],c,v[p]];a.startingPositions=d}a.colormap=TRt(t),a.tubeSize=t.sizeref,a.maxLength=t.maxdisplayed;var M=o(t._xbnds,"xaxis"),b=o(t._ybnds,"yaxis"),w=o(t._zbnds,"zaxis"),k=eY(s),x=eY(l),E=eY(u),S=[[M[0]-k[0],b[0]-x[0],w[0]-E[0]],[M[1]+k[1],b[1]+x[1],w[1]+E[1]]],g=_Pe(a,S),C=ARt(t);g.vertexIntensityBounds=[C.min/t._normMax,C.max/t._normMax];var A=t.lightposition;return g.lightPosition=[A.x,A.y,A.z],g.ambient=t.lighting.ambient,g.diffuse=t.lighting.diffuse,g.specular=t.lighting.specular,g.roughness=t.lighting.roughness,g.fresnel=t.lighting.fresnel,g.opacity=t.opacity,t._pad=g.tubeScale*t.sizeref*2,g}tY.update=function(e){this.data=e;var t=TPe(this.scene,e);this.mesh.update(t)};tY.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function MRt(e,t){var r=e.glplot.gl,i=TPe(e,t),n=bRt(r,i),a=new wPe(e,t.uid);return a.mesh=n,a.data=t,n._trace=a,e.glplot.add(n),a}APe.exports=MRt});var EPe=ne(($vr,SPe)=>{"use strict";SPe.exports={moduleType:"trace",name:"streamtube",basePlotModule:i1(),categories:["gl3d","showLegend"],attributes:$G(),supplyDefaults:yPe(),colorbar:{min:"cmin",max:"cmax"},calc:vD().calc,plot:MPe(),eventData:function(e,t){return e.tubex=e.x,e.tubey=e.y,e.tubez=e.z,e.tubeu=t.traceCoordinate[3],e.tubev=t.traceCoordinate[4],e.tubew=t.traceCoordinate[5],e.norm=t.traceCoordinate[6],e.divergence=t.traceCoordinate[7],delete e.x,delete e.y,delete e.z,e},meta:{}}});var CPe=ne((edr,kPe)=>{"use strict";kPe.exports=EPe()});var q3=ne((tdr,RPe)=>{"use strict";var SRt=Ba().hovertemplateAttrs,ERt=Ba().texttemplateAttrs,kRt=Y0(),cg=cu(),CRt=es(),LPe=Ps(),LRt=hc().dash,F_=oa().extendFlat,PRt=Xs().overrideAll,qp=cg.marker,PPe=cg.line,RRt=qp.line;RPe.exports=PRt({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:F_({},cg.mode,{dflt:"markers"}),text:F_({},cg.text,{}),texttemplate:ERt({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:F_({},cg.hovertext,{}),textfont:cg.textfont,textposition:cg.textposition,line:{color:PPe.color,width:PPe.width,dash:LRt},connectgaps:cg.connectgaps,marker:F_({symbol:qp.symbol,opacity:qp.opacity,angle:qp.angle,angleref:F_({},qp.angleref,{values:["previous","up","north"]}),standoff:qp.standoff,size:qp.size,sizeref:qp.sizeref,sizemin:qp.sizemin,sizemode:qp.sizemode,colorbar:qp.colorbar,line:F_({width:RRt.width},LPe("marker.line")),gradient:qp.gradient},LPe("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:kRt(),selected:cg.selected,unselected:cg.unselected,hoverinfo:F_({},CRt.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:SRt()},"calc","nested")});var IPe=ne((rdr,DPe)=>{"use strict";var rY=Wt(),nY=js(),DRt=dp(),IRt=s0(),FRt=l0(),qRt=X0(),zRt=q3();DPe.exports=function(t,r,i,n){function a(v,d){return rY.coerce(t,r,zRt,v,d)}var o=a("locations"),s;if(o&&o.length){var l=a("geojson"),u;(typeof l=="string"&&l!==""||rY.isPlainObject(l))&&(u="geojson-id");var f=a("locationmode",u);f==="geojson-id"&&a("featureidkey"),s=o.length}else{var c=a("lon")||[],h=a("lat")||[];s=Math.min(c.length,h.length)}if(!s){r.visible=!1;return}r._length=s,a("text"),a("hovertext"),a("hovertemplate"),a("mode"),nY.hasMarkers(r)&&DRt(t,r,i,n,a,{gradient:!0}),nY.hasLines(r)&&(IRt(t,r,i,n,a),a("connectgaps")),nY.hasText(r)&&(a("texttemplate"),FRt(t,r,n,a)),a("fill"),r.fill!=="none"&&qRt(t,r,i,a),rY.coerceSelectionMarkerOpacity(r,a)}});var zPe=ne((ndr,qPe)=>{"use strict";var FPe=Xi();qPe.exports=function(t,r,i){var n={},a=i[r.geo]._subplot,o=a.mockAxis,s=t.lonlat;return n.lonLabel=FPe.tickText(o,o.c2l(s[0]),!0).text,n.latLabel=FPe.tickText(o,o.c2l(s[1]),!0).text,n}});var aY=ne((idr,UPe)=>{"use strict";var iY=la(),OPe=$a().BADNUM,ORt=pp(),BRt=Z0(),NRt=gp(),URt=Wt().isArrayOrTypedArray,BPe=Wt()._;function NPe(e){return e&&typeof e=="string"}UPe.exports=function(t,r){var i=URt(r.locations),n=i?r.locations.length:r._length,a=new Array(n),o;r.geojson?o=function(h){return NPe(h)||iY(h)}:o=NPe;for(var s=0;s<n;s++){var l=a[s]={};if(i){var u=r.locations[s];l.loc=o(u)?u:null}else{var f=r.lon[s],c=r.lat[s];iY(f)&&iY(c)?l.lonlat=[+f,+c]:l.lonlat=[OPe,OPe]}}return BRt(a,r),ORt(t,r),NRt(a,r),n&&(a[0].t={labels:{lat:BPe(t,"lat:")+" ",lon:BPe(t,"lon:")+" "}}),a}});var FE=ne(bh=>{"use strict";bh.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"};bh.axesNames=["lonaxis","lataxis"];bh.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360};bh.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180};bh.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}};bh.clipPad=.001;bh.precision=.1;bh.landColor="#F0DC82";bh.waterColor="#3399FF";bh.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"};bh.sphereSVG={type:"Sphere"};bh.fillLayers={ocean:1,land:1,lakes:1};bh.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1};bh.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"];bh.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"];bh.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}});var oY=ne((gD,VPe)=>{(function(e,t){typeof gD=="object"&&typeof VPe!="undefined"?t(gD):typeof define=="function"&&define.amd?define(["exports"],t):(e=e||self,t(e.topojson=e.topojson||{}))})(gD,function(e){"use strict";function t(b){return b}function r(b){if(b==null)return t;var w,k,x=b.scale[0],E=b.scale[1],S=b.translate[0],g=b.translate[1];return function(C,A){A||(w=k=0);var P=2,D=C.length,z=new Array(D);for(z[0]=(w+=C[0])*x+S,z[1]=(k+=C[1])*E+g;P<D;)z[P]=C[P],++P;return z}}function i(b){var w=r(b.transform),k,x=1/0,E=x,S=-x,g=-x;function C(P){P=w(P),P[0]<x&&(x=P[0]),P[0]>S&&(S=P[0]),P[1]<E&&(E=P[1]),P[1]>g&&(g=P[1])}function A(P){switch(P.type){case"GeometryCollection":P.geometries.forEach(A);break;case"Point":C(P.coordinates);break;case"MultiPoint":P.coordinates.forEach(C);break}}b.arcs.forEach(function(P){for(var D=-1,z=P.length,O;++D<z;)O=w(P[D],D),O[0]<x&&(x=O[0]),O[0]>S&&(S=O[0]),O[1]<E&&(E=O[1]),O[1]>g&&(g=O[1])});for(k in b.objects)A(b.objects[k]);return[x,E,S,g]}function n(b,w){for(var k,x=b.length,E=x-w;E<--x;)k=b[E],b[E++]=b[x],b[x]=k}function a(b,w){return typeof w=="string"&&(w=b.objects[w]),w.type==="GeometryCollection"?{type:"FeatureCollection",features:w.geometries.map(function(k){return o(b,k)})}:o(b,w)}function o(b,w){var k=w.id,x=w.bbox,E=w.properties==null?{}:w.properties,S=s(b,w);return k==null&&x==null?{type:"Feature",properties:E,geometry:S}:x==null?{type:"Feature",id:k,properties:E,geometry:S}:{type:"Feature",id:k,bbox:x,properties:E,geometry:S}}function s(b,w){var k=r(b.transform),x=b.arcs;function E(D,z){z.length&&z.pop();for(var O=x[D<0?~D:D],V=0,B=O.length;V<B;++V)z.push(k(O[V],V));D<0&&n(z,B)}function S(D){return k(D)}function g(D){for(var z=[],O=0,V=D.length;O<V;++O)E(D[O],z);return z.length<2&&z.push(z[0]),z}function C(D){for(var z=g(D);z.length<4;)z.push(z[0]);return z}function A(D){return D.map(C)}function P(D){var z=D.type,O;switch(z){case"GeometryCollection":return{type:z,geometries:D.geometries.map(P)};case"Point":O=S(D.coordinates);break;case"MultiPoint":O=D.coordinates.map(S);break;case"LineString":O=g(D.arcs);break;case"MultiLineString":O=D.arcs.map(g);break;case"Polygon":O=A(D.arcs);break;case"MultiPolygon":O=D.arcs.map(A);break;default:return null}return{type:z,coordinates:O}}return P(w)}function l(b,w){var k={},x={},E={},S=[],g=-1;w.forEach(function(P,D){var z=b.arcs[P<0?~P:P],O;z.length<3&&!z[1][0]&&!z[1][1]&&(O=w[++g],w[g]=P,w[D]=O)}),w.forEach(function(P){var D=C(P),z=D[0],O=D[1],V,B;if(V=E[z])if(delete E[V.end],V.push(P),V.end=O,B=x[O]){delete x[B.start];var F=B===V?V:V.concat(B);x[F.start=V.start]=E[F.end=B.end]=F}else x[V.start]=E[V.end]=V;else if(V=x[O])if(delete x[V.start],V.unshift(P),V.start=z,B=E[z]){delete E[B.end];var N=B===V?V:B.concat(V);x[N.start=B.start]=E[N.end=V.end]=N}else x[V.start]=E[V.end]=V;else V=[P],x[V.start=z]=E[V.end=O]=V});function C(P){var D=b.arcs[P<0?~P:P],z=D[0],O;return b.transform?(O=[0,0],D.forEach(function(V){O[0]+=V[0],O[1]+=V[1]})):O=D[D.length-1],P<0?[O,z]:[z,O]}function A(P,D){for(var z in P){var O=P[z];delete D[O.start],delete O.start,delete O.end,O.forEach(function(V){k[V<0?~V:V]=1}),S.push(O)}}return A(E,x),A(x,E),w.forEach(function(P){k[P<0?~P:P]||S.push([P])}),S}function u(b){return s(b,f.apply(this,arguments))}function f(b,w,k){var x,E,S;if(arguments.length>1)x=c(b,w,k);else for(E=0,x=new Array(S=b.arcs.length);E<S;++E)x[E]=E;return{type:"MultiLineString",arcs:l(b,x)}}function c(b,w,k){var x=[],E=[],S;function g(z){var O=z<0?~z:z;(E[O]||(E[O]=[])).push({i:z,g:S})}function C(z){z.forEach(g)}function A(z){z.forEach(C)}function P(z){z.forEach(A)}function D(z){switch(S=z,z.type){case"GeometryCollection":z.geometries.forEach(D);break;case"LineString":C(z.arcs);break;case"MultiLineString":case"Polygon":A(z.arcs);break;case"MultiPolygon":P(z.arcs);break}}return D(w),E.forEach(k==null?function(z){x.push(z[0].i)}:function(z){k(z[0].g,z[z.length-1].g)&&x.push(z[0].i)}),x}function h(b){for(var w=-1,k=b.length,x,E=b[k-1],S=0;++w<k;)x=E,E=b[w],S+=x[0]*E[1]-x[1]*E[0];return Math.abs(S)}function v(b){return s(b,d.apply(this,arguments))}function d(b,w){var k={},x=[],E=[];w.forEach(S);function S(A){switch(A.type){case"GeometryCollection":A.geometries.forEach(S);break;case"Polygon":g(A.arcs);break;case"MultiPolygon":A.arcs.forEach(g);break}}function g(A){A.forEach(function(P){P.forEach(function(D){(k[D=D<0?~D:D]||(k[D]=[])).push(A)})}),x.push(A)}function C(A){return h(s(b,{type:"Polygon",arcs:[A]}).coordinates[0])}return x.forEach(function(A){if(!A._){var P=[],D=[A];for(A._=1,E.push(P);A=D.pop();)P.push(A),A.forEach(function(z){z.forEach(function(O){k[O<0?~O:O].forEach(function(V){V._||(V._=1,D.push(V))})})})}}),x.forEach(function(A){delete A._}),{type:"MultiPolygon",arcs:E.map(function(A){var P=[],D;if(A.forEach(function(F){F.forEach(function(N){N.forEach(function(Z){k[Z<0?~Z:Z].length<2&&P.push(Z)})})}),P=l(b,P),(D=P.length)>1)for(var z=1,O=C(P[0]),V,B;z<D;++z)(V=C(P[z]))>O&&(B=P[0],P[0]=P[z],P[z]=B,O=V);return P}).filter(function(A){return A.length>0})}}function _(b,w){for(var k=0,x=b.length;k<x;){var E=k+x>>>1;b[E]<w?k=E+1:x=E}return k}function T(b){var w={},k=b.map(function(){return[]});function x(F,N){F.forEach(function(Z){Z<0&&(Z=~Z);var J=w[Z];J?J.push(N):w[Z]=[N]})}function E(F,N){F.forEach(function(Z){x(Z,N)})}function S(F,N){F.type==="GeometryCollection"?F.geometries.forEach(function(Z){S(Z,N)}):F.type in g&&g[F.type](F.arcs,N)}var g={LineString:x,MultiLineString:E,Polygon:E,MultiPolygon:function(F,N){F.forEach(function(Z){E(Z,N)})}};b.forEach(S);for(var C in w)for(var A=w[C],P=A.length,D=0;D<P;++D)for(var z=D+1;z<P;++z){var O=A[D],V=A[z],B;(B=k[O])[C=_(B,V)]!==V&&B.splice(C,0,V),(B=k[V])[C=_(B,O)]!==O&&B.splice(C,0,O)}return k}function p(b){if(b==null)return t;var w,k,x=b.scale[0],E=b.scale[1],S=b.translate[0],g=b.translate[1];return function(C,A){A||(w=k=0);var P=2,D=C.length,z=new Array(D),O=Math.round((C[0]-S)/x),V=Math.round((C[1]-g)/E);for(z[0]=O-w,w=O,z[1]=V-k,k=V;P<D;)z[P]=C[P],++P;return z}}function M(b,w){if(b.transform)throw new Error("already quantized");if(!w||!w.scale){if(!((g=Math.floor(w))>=2))throw new Error("n must be \u22652");A=b.bbox||i(b);var k=A[0],x=A[1],E=A[2],S=A[3],g;w={scale:[E-k?(E-k)/(g-1):1,S-x?(S-x)/(g-1):1],translate:[k,x]}}else A=b.bbox;var C=p(w),A,P,D=b.objects,z={};function O(F){return C(F)}function V(F){var N;switch(F.type){case"GeometryCollection":N={type:"GeometryCollection",geometries:F.geometries.map(V)};break;case"Point":N={type:"Point",coordinates:O(F.coordinates)};break;case"MultiPoint":N={type:"MultiPoint",coordinates:F.coordinates.map(O)};break;default:return F}return F.id!=null&&(N.id=F.id),F.bbox!=null&&(N.bbox=F.bbox),F.properties!=null&&(N.properties=F.properties),N}function B(F){var N=0,Z=1,J=F.length,re,ue=new Array(J);for(ue[0]=C(F[0],0);++N<J;)((re=C(F[N],N))[0]||re[1])&&(ue[Z++]=re);return Z===1&&(ue[Z++]=[0,0]),ue.length=Z,ue}for(P in D)z[P]=V(D[P]);return{type:"Topology",bbox:A,transform:w,objects:z,arcs:b.arcs.map(B)}}e.bbox=i,e.feature=a,e.merge=v,e.mergeArcs=d,e.mesh=u,e.meshArcs=f,e.neighbors=T,e.quantize=M,e.transform=r,e.untransform=p,Object.defineProperty(e,"__esModule",{value:!0})})});var yD=ne((odr,HPe)=>{"use strict";var sY=HPe.exports={},VRt=FE().locationmodeToLayer,HRt=oY().feature;sY.getTopojsonName=function(e){return[e.scope.replace(/ /g,"-"),"_",e.resolution.toString(),"m"].join("")};sY.getTopojsonPath=function(e,t){return e+t+".json"};sY.getTopojsonFeatures=function(e,t){var r=VRt[e.locationmode],i=t.objects[r];return HRt(t,i).features}});var zE=ne(qE=>{"use strict";var GRt=$a().BADNUM;qE.calcTraceToLineCoords=function(e){for(var t=e[0].trace,r=t.connectgaps,i=[],n=[],a=0;a<e.length;a++){var o=e[a],s=o.lonlat;s[0]!==GRt?n.push(s):!r&&n.length>0&&(i.push(n),n=[])}return n.length>0&&i.push(n),i};qE.makeLine=function(e){return e.length===1?{type:"LineString",coordinates:e[0]}:{type:"MultiLineString",coordinates:e}};qE.makePolygon=function(e){if(e.length===1)return{type:"Polygon",coordinates:e};for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=[e[r]];return{type:"MultiPolygon",coordinates:t}};qE.makeBlank=function(){return{type:"Point",coordinates:[]}}});var YPe=ne((ldr,GPe)=>{GPe.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}});var JPe=ne(no=>{"use strict";Object.defineProperty(no,"__esModule",{value:!0});no.earthRadius=63710088e-1;no.factors={centimeters:no.earthRadius*100,centimetres:no.earthRadius*100,degrees:no.earthRadius/111325,feet:no.earthRadius*3.28084,inches:no.earthRadius*39.37,kilometers:no.earthRadius/1e3,kilometres:no.earthRadius/1e3,meters:no.earthRadius,metres:no.earthRadius,miles:no.earthRadius/1609.344,millimeters:no.earthRadius*1e3,millimetres:no.earthRadius*1e3,nauticalmiles:no.earthRadius/1852,radians:1,yards:no.earthRadius*1.0936};no.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/no.earthRadius,yards:1.0936133};no.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function s1(e,t,r){r===void 0&&(r={});var i={type:"Feature"};return(r.id===0||r.id)&&(i.id=r.id),r.bbox&&(i.bbox=r.bbox),i.properties=t||{},i.geometry=e,i}no.feature=s1;function YRt(e,t,r){switch(r===void 0&&(r={}),e){case"Point":return lY(t).geometry;case"LineString":return fY(t).geometry;case"Polygon":return uY(t).geometry;case"MultiPoint":return XPe(t).geometry;case"MultiLineString":return WPe(t).geometry;case"MultiPolygon":return ZPe(t).geometry;default:throw new Error(e+" is invalid")}}no.geometry=YRt;function lY(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!mD(e[0])||!mD(e[1]))throw new Error("coordinates must contain numbers");var i={type:"Point",coordinates:e};return s1(i,t,r)}no.point=lY;function WRt(e,t,r){return r===void 0&&(r={}),xD(e.map(function(i){return lY(i,t)}),r)}no.points=WRt;function uY(e,t,r){r===void 0&&(r={});for(var i=0,n=e;i<n.length;i++){var a=n[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<a[a.length-1].length;o++)if(a[a.length-1][o]!==a[0][o])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:e};return s1(s,t,r)}no.polygon=uY;function XRt(e,t,r){return r===void 0&&(r={}),xD(e.map(function(i){return uY(i,t)}),r)}no.polygons=XRt;function fY(e,t,r){if(r===void 0&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var i={type:"LineString",coordinates:e};return s1(i,t,r)}no.lineString=fY;function ZRt(e,t,r){return r===void 0&&(r={}),xD(e.map(function(i){return fY(i,t)}),r)}no.lineStrings=ZRt;function xD(e,t){t===void 0&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}no.featureCollection=xD;function WPe(e,t,r){r===void 0&&(r={});var i={type:"MultiLineString",coordinates:e};return s1(i,t,r)}no.multiLineString=WPe;function XPe(e,t,r){r===void 0&&(r={});var i={type:"MultiPoint",coordinates:e};return s1(i,t,r)}no.multiPoint=XPe;function ZPe(e,t,r){r===void 0&&(r={});var i={type:"MultiPolygon",coordinates:e};return s1(i,t,r)}no.multiPolygon=ZPe;function jRt(e,t,r){r===void 0&&(r={});var i={type:"GeometryCollection",geometries:e};return s1(i,t,r)}no.geometryCollection=jRt;function KRt(e,t){if(t===void 0&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r}no.round=KRt;function jPe(e,t){t===void 0&&(t="kilometers");var r=no.factors[t];if(!r)throw new Error(t+" units is invalid");return e*r}no.radiansToLength=jPe;function cY(e,t){t===void 0&&(t="kilometers");var r=no.factors[t];if(!r)throw new Error(t+" units is invalid");return e/r}no.lengthToRadians=cY;function JRt(e,t){return KPe(cY(e,t))}no.lengthToDegrees=JRt;function QRt(e){var t=e%360;return t<0&&(t+=360),t}no.bearingToAzimuth=QRt;function KPe(e){var t=e%(2*Math.PI);return t*180/Math.PI}no.radiansToDegrees=KPe;function $Rt(e){var t=e%360;return t*Math.PI/180}no.degreesToRadians=$Rt;function eDt(e,t,r){if(t===void 0&&(t="kilometers"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return jPe(cY(e,t),r)}no.convertLength=eDt;function tDt(e,t,r){if(t===void 0&&(t="meters"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var i=no.areaFactors[t];if(!i)throw new Error("invalid original units");var n=no.areaFactors[r];if(!n)throw new Error("invalid final units");return e/i*n}no.convertArea=tDt;function mD(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}no.isNumber=mD;function rDt(e){return!!e&&e.constructor===Object}no.isObject=rDt;function nDt(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(t){if(!mD(t))throw new Error("bbox must only contain numbers")})}no.validateBBox=nDt;function iDt(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}no.validateId=iDt});var r6e=ne(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0});var Qh=JPe();function OE(e,t,r){if(e!==null)for(var i,n,a,o,s,l,u,f=0,c=0,h,v=e.type,d=v==="FeatureCollection",_=v==="Feature",T=d?e.features.length:1,p=0;p<T;p++){u=d?e.features[p].geometry:_?e.geometry:e,h=u?u.type==="GeometryCollection":!1,s=h?u.geometries.length:1;for(var M=0;M<s;M++){var b=0,w=0;if(o=h?u.geometries[M]:u,o!==null){l=o.coordinates;var k=o.type;switch(f=r&&(k==="Polygon"||k==="MultiPolygon")?1:0,k){case null:break;case"Point":if(t(l,c,p,b,w)===!1)return!1;c++,b++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(t(l[i],c,p,b,w)===!1)return!1;c++,k==="MultiPoint"&&b++}k==="LineString"&&b++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(n=0;n<l[i].length-f;n++){if(t(l[i][n],c,p,b,w)===!1)return!1;c++}k==="MultiLineString"&&b++,k==="Polygon"&&w++}k==="Polygon"&&b++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(w=0,n=0;n<l[i].length;n++){for(a=0;a<l[i][n].length-f;a++){if(t(l[i][n][a],c,p,b,w)===!1)return!1;c++}w++}b++}break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(OE(o.geometries[i],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function aDt(e,t,r,i){var n=r;return OE(e,function(a,o,s,l,u){o===0&&r===void 0?n=a:n=t(n,a,o,s,l,u)},i),n}function QPe(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&t(e.features[r].properties,r)!==!1;r++);break;case"Feature":t(e.properties,0);break}}function oDt(e,t,r){var i=r;return QPe(e,function(n,a){a===0&&r===void 0?i=n:i=t(i,n,a)}),i}function $Pe(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function sDt(e,t,r){var i=r;return $Pe(e,function(n,a){a===0&&r===void 0?i=n:i=t(i,n,a)}),i}function lDt(e){var t=[];return OE(e,function(r){t.push(r)}),t}function hY(e,t){var r,i,n,a,o,s,l,u,f,c,h=0,v=e.type==="FeatureCollection",d=e.type==="Feature",_=v?e.features.length:1;for(r=0;r<_;r++){for(s=v?e.features[r].geometry:d?e.geometry:e,u=v?e.features[r].properties:d?e.properties:{},f=v?e.features[r].bbox:d?e.bbox:void 0,c=v?e.features[r].id:d?e.id:void 0,l=s?s.type==="GeometryCollection":!1,o=l?s.geometries.length:1,n=0;n<o;n++){if(a=l?s.geometries[n]:s,a===null){if(t(null,h,u,f,c)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(a,h,u,f,c)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<a.geometries.length;i++)if(t(a.geometries[i],h,u,f,c)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}h++}}function uDt(e,t,r){var i=r;return hY(e,function(n,a,o,s,l){a===0&&r===void 0?i=n:i=t(i,n,a,o,s,l)}),i}function _D(e,t){hY(e,function(r,i,n,a,o){var s=r===null?null:r.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return t(Qh.feature(r,n,{bbox:a,id:o}),i,0)===!1?!1:void 0}var l;switch(s){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<r.coordinates.length;u++){var f=r.coordinates[u],c={type:l,coordinates:f};if(t(Qh.feature(c,n),i,u)===!1)return!1}})}function fDt(e,t,r){var i=r;return _D(e,function(n,a,o){a===0&&o===0&&r===void 0?i=n:i=t(i,n,a,o)}),i}function e6e(e,t){_D(e,function(r,i,n){var a=0;if(r.geometry){var o=r.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var s,l=0,u=0,f=0;if(OE(r,function(c,h,v,d,_){if(s===void 0||i>l||d>u||_>f){s=c,l=i,u=d,f=_,a=0;return}var T=Qh.lineString([s,c],r.properties);if(t(T,i,n,_,a)===!1)return!1;a++,s=c})===!1)return!1}}})}function cDt(e,t,r){var i=r,n=!1;return e6e(e,function(a,o,s,l,u){n===!1&&r===void 0?i=a:i=t(i,a,o,s,l,u),n=!0}),i}function t6e(e,t){if(!e)throw new Error("geojson is required");_D(e,function(r,i,n){if(r.geometry!==null){var a=r.geometry.type,o=r.geometry.coordinates;switch(a){case"LineString":if(t(r,i,n,0,0)===!1)return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(t(Qh.lineString(o[s],r.properties),i,n,s)===!1)return!1;break}}})}function hDt(e,t,r){var i=r;return t6e(e,function(n,a,o,s){a===0&&r===void 0?i=n:i=t(i,n,a,o,s)}),i}function vDt(e,t){if(t=t||{},!Qh.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0,i=t.multiFeatureIndex||0,n=t.geometryIndex||0,a=t.segmentIndex||0,o=t.properties,s;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),o=o||e.features[r].properties,s=e.features[r].geometry;break;case"Feature":o=o||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var l=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=l.length+a-1),Qh.lineString([l[a],l[a+1]],o,t);case"Polygon":return n<0&&(n=l.length+n),a<0&&(a=l[n].length+a-1),Qh.lineString([l[n][a],l[n][a+1]],o,t);case"MultiLineString":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a-1),Qh.lineString([l[i][a],l[i][a+1]],o,t);case"MultiPolygon":return i<0&&(i=l.length+i),n<0&&(n=l[i].length+n),a<0&&(a=l[i][n].length-a-1),Qh.lineString([l[i][n][a],l[i][n][a+1]],o,t)}throw new Error("geojson is invalid")}function dDt(e,t){if(t=t||{},!Qh.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0,i=t.multiFeatureIndex||0,n=t.geometryIndex||0,a=t.coordIndex||0,o=t.properties,s;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),o=o||e.features[r].properties,s=e.features[r].geometry;break;case"Feature":o=o||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var l=s.coordinates;switch(s.type){case"Point":return Qh.point(l,o,t);case"MultiPoint":return i<0&&(i=l.length+i),Qh.point(l[i],o,t);case"LineString":return a<0&&(a=l.length+a),Qh.point(l[a],o,t);case"Polygon":return n<0&&(n=l.length+n),a<0&&(a=l[n].length+a),Qh.point(l[n][a],o,t);case"MultiLineString":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),Qh.point(l[i][a],o,t);case"MultiPolygon":return i<0&&(i=l.length+i),n<0&&(n=l[i].length+n),a<0&&(a=l[i][n].length-a),Qh.point(l[i][n][a],o,t)}throw new Error("geojson is invalid")}mc.coordEach=OE;mc.coordReduce=aDt;mc.propEach=QPe;mc.propReduce=oDt;mc.featureEach=$Pe;mc.featureReduce=sDt;mc.coordAll=lDt;mc.geomEach=hY;mc.geomReduce=uDt;mc.flattenEach=_D;mc.flattenReduce=fDt;mc.segmentEach=e6e;mc.segmentReduce=cDt;mc.lineEach=t6e;mc.lineReduce=hDt;mc.findSegment=vDt;mc.findPoint=dDt});var o6e=ne(dY=>{"use strict";Object.defineProperty(dY,"__esModule",{value:!0});var pDt=r6e(),n6e=6378137;function gDt(e){return pDt.geomReduce(e,function(t,r){return t+yDt(r)},0)}dY.default=gDt;function yDt(e){var t=0,r;switch(e.type){case"Polygon":return i6e(e.coordinates);case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)t+=i6e(e.coordinates[r]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function i6e(e){var t=0;if(e&&e.length>0){t+=Math.abs(a6e(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(a6e(e[r]))}return t}function a6e(e){var t,r,i,n,a,o,s,l=0,u=e.length;if(u>2){for(s=0;s<u;s++)s===u-2?(n=u-2,a=u-1,o=0):s===u-1?(n=u-1,a=0,o=1):(n=s,a=s+1,o=s+2),t=e[n],r=e[a],i=e[o],l+=(vY(i[0])-vY(t[0]))*Math.sin(vY(r[1]));l=l*n6e*n6e/2}return l}function vY(e){return e*Math.PI/180}});var xY=ne(za=>{"use strict";Object.defineProperty(za,"__esModule",{value:!0});za.earthRadius=63710088e-1;za.factors={centimeters:za.earthRadius*100,centimetres:za.earthRadius*100,degrees:za.earthRadius/111325,feet:za.earthRadius*3.28084,inches:za.earthRadius*39.37,kilometers:za.earthRadius/1e3,kilometres:za.earthRadius/1e3,meters:za.earthRadius,metres:za.earthRadius,miles:za.earthRadius/1609.344,millimeters:za.earthRadius*1e3,millimetres:za.earthRadius*1e3,nauticalmiles:za.earthRadius/1852,radians:1,yards:za.earthRadius/1.0936};za.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/za.earthRadius,yards:1/1.0936};za.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function l1(e,t,r){r===void 0&&(r={});var i={type:"Feature"};return(r.id===0||r.id)&&(i.id=r.id),r.bbox&&(i.bbox=r.bbox),i.properties=t||{},i.geometry=e,i}za.feature=l1;function mDt(e,t,r){switch(r===void 0&&(r={}),e){case"Point":return pY(t).geometry;case"LineString":return yY(t).geometry;case"Polygon":return gY(t).geometry;case"MultiPoint":return l6e(t).geometry;case"MultiLineString":return s6e(t).geometry;case"MultiPolygon":return u6e(t).geometry;default:throw new Error(e+" is invalid")}}za.geometry=mDt;function pY(e,t,r){r===void 0&&(r={});var i={type:"Point",coordinates:e};return l1(i,t,r)}za.point=pY;function xDt(e,t,r){return r===void 0&&(r={}),bD(e.map(function(i){return pY(i,t)}),r)}za.points=xDt;function gY(e,t,r){r===void 0&&(r={});for(var i=0,n=e;i<n.length;i++){var a=n[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<a[a.length-1].length;o++)if(a[a.length-1][o]!==a[0][o])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:e};return l1(s,t,r)}za.polygon=gY;function _Dt(e,t,r){return r===void 0&&(r={}),bD(e.map(function(i){return gY(i,t)}),r)}za.polygons=_Dt;function yY(e,t,r){if(r===void 0&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var i={type:"LineString",coordinates:e};return l1(i,t,r)}za.lineString=yY;function bDt(e,t,r){return r===void 0&&(r={}),bD(e.map(function(i){return yY(i,t)}),r)}za.lineStrings=bDt;function bD(e,t){t===void 0&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}za.featureCollection=bD;function s6e(e,t,r){r===void 0&&(r={});var i={type:"MultiLineString",coordinates:e};return l1(i,t,r)}za.multiLineString=s6e;function l6e(e,t,r){r===void 0&&(r={});var i={type:"MultiPoint",coordinates:e};return l1(i,t,r)}za.multiPoint=l6e;function u6e(e,t,r){r===void 0&&(r={});var i={type:"MultiPolygon",coordinates:e};return l1(i,t,r)}za.multiPolygon=u6e;function wDt(e,t,r){r===void 0&&(r={});var i={type:"GeometryCollection",geometries:e};return l1(i,t,r)}za.geometryCollection=wDt;function TDt(e,t){if(t===void 0&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r}za.round=TDt;function f6e(e,t){t===void 0&&(t="kilometers");var r=za.factors[t];if(!r)throw new Error(t+" units is invalid");return e*r}za.radiansToLength=f6e;function mY(e,t){t===void 0&&(t="kilometers");var r=za.factors[t];if(!r)throw new Error(t+" units is invalid");return e/r}za.lengthToRadians=mY;function ADt(e,t){return c6e(mY(e,t))}za.lengthToDegrees=ADt;function MDt(e){var t=e%360;return t<0&&(t+=360),t}za.bearingToAzimuth=MDt;function c6e(e){var t=e%(2*Math.PI);return t*180/Math.PI}za.radiansToDegrees=c6e;function SDt(e){var t=e%360;return t*Math.PI/180}za.degreesToRadians=SDt;function EDt(e,t,r){if(t===void 0&&(t="kilometers"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return f6e(mY(e,t),r)}za.convertLength=EDt;function kDt(e,t,r){if(t===void 0&&(t="meters"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var i=za.areaFactors[t];if(!i)throw new Error("invalid original units");var n=za.areaFactors[r];if(!n)throw new Error("invalid final units");return e/i*n}za.convertArea=kDt;function h6e(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)&&!/^\s*$/.test(e)}za.isNumber=h6e;function CDt(e){return!!e&&e.constructor===Object}za.isObject=CDt;function LDt(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(t){if(!h6e(t))throw new Error("bbox must only contain numbers")})}za.validateBBox=LDt;function PDt(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}za.validateId=PDt;function RDt(){throw new Error("method has been renamed to `radiansToDegrees`")}za.radians2degrees=RDt;function DDt(){throw new Error("method has been renamed to `degreesToRadians`")}za.degrees2radians=DDt;function IDt(){throw new Error("method has been renamed to `lengthToDegrees`")}za.distanceToDegrees=IDt;function FDt(){throw new Error("method has been renamed to `lengthToRadians`")}za.distanceToRadians=FDt;function qDt(){throw new Error("method has been renamed to `radiansToLength`")}za.radiansToDistance=qDt;function zDt(){throw new Error("method has been renamed to `bearingToAzimuth`")}za.bearingToAngle=zDt;function ODt(){throw new Error("method has been renamed to `convertLength`")}za.convertDistance=ODt});var y6e=ne(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});var $h=xY();function BE(e,t,r){if(e!==null)for(var i,n,a,o,s,l,u,f=0,c=0,h,v=e.type,d=v==="FeatureCollection",_=v==="Feature",T=d?e.features.length:1,p=0;p<T;p++){u=d?e.features[p].geometry:_?e.geometry:e,h=u?u.type==="GeometryCollection":!1,s=h?u.geometries.length:1;for(var M=0;M<s;M++){var b=0,w=0;if(o=h?u.geometries[M]:u,o!==null){l=o.coordinates;var k=o.type;switch(f=r&&(k==="Polygon"||k==="MultiPolygon")?1:0,k){case null:break;case"Point":if(t(l,c,p,b,w)===!1)return!1;c++,b++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(t(l[i],c,p,b,w)===!1)return!1;c++,k==="MultiPoint"&&b++}k==="LineString"&&b++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(n=0;n<l[i].length-f;n++){if(t(l[i][n],c,p,b,w)===!1)return!1;c++}k==="MultiLineString"&&b++,k==="Polygon"&&w++}k==="Polygon"&&b++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(w=0,n=0;n<l[i].length;n++){for(a=0;a<l[i][n].length-f;a++){if(t(l[i][n][a],c,p,b,w)===!1)return!1;c++}w++}b++}break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(BE(o.geometries[i],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function BDt(e,t,r,i){var n=r;return BE(e,function(a,o,s,l,u){o===0&&r===void 0?n=a:n=t(n,a,o,s,l,u)},i),n}function v6e(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&t(e.features[r].properties,r)!==!1;r++);break;case"Feature":t(e.properties,0);break}}function NDt(e,t,r){var i=r;return v6e(e,function(n,a){a===0&&r===void 0?i=n:i=t(i,n,a)}),i}function d6e(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function UDt(e,t,r){var i=r;return d6e(e,function(n,a){a===0&&r===void 0?i=n:i=t(i,n,a)}),i}function VDt(e){var t=[];return BE(e,function(r){t.push(r)}),t}function _Y(e,t){var r,i,n,a,o,s,l,u,f,c,h=0,v=e.type==="FeatureCollection",d=e.type==="Feature",_=v?e.features.length:1;for(r=0;r<_;r++){for(s=v?e.features[r].geometry:d?e.geometry:e,u=v?e.features[r].properties:d?e.properties:{},f=v?e.features[r].bbox:d?e.bbox:void 0,c=v?e.features[r].id:d?e.id:void 0,l=s?s.type==="GeometryCollection":!1,o=l?s.geometries.length:1,n=0;n<o;n++){if(a=l?s.geometries[n]:s,a===null){if(t(null,h,u,f,c)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(a,h,u,f,c)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<a.geometries.length;i++)if(t(a.geometries[i],h,u,f,c)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}h++}}function HDt(e,t,r){var i=r;return _Y(e,function(n,a,o,s,l){a===0&&r===void 0?i=n:i=t(i,n,a,o,s,l)}),i}function wD(e,t){_Y(e,function(r,i,n,a,o){var s=r===null?null:r.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return t($h.feature(r,n,{bbox:a,id:o}),i,0)===!1?!1:void 0}var l;switch(s){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<r.coordinates.length;u++){var f=r.coordinates[u],c={type:l,coordinates:f};if(t($h.feature(c,n),i,u)===!1)return!1}})}function GDt(e,t,r){var i=r;return wD(e,function(n,a,o){a===0&&o===0&&r===void 0?i=n:i=t(i,n,a,o)}),i}function p6e(e,t){wD(e,function(r,i,n){var a=0;if(r.geometry){var o=r.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var s,l=0,u=0,f=0;if(BE(r,function(c,h,v,d,_){if(s===void 0||i>l||d>u||_>f){s=c,l=i,u=d,f=_,a=0;return}var T=$h.lineString([s,c],r.properties);if(t(T,i,n,_,a)===!1)return!1;a++,s=c})===!1)return!1}}})}function YDt(e,t,r){var i=r,n=!1;return p6e(e,function(a,o,s,l,u){n===!1&&r===void 0?i=a:i=t(i,a,o,s,l,u),n=!0}),i}function g6e(e,t){if(!e)throw new Error("geojson is required");wD(e,function(r,i,n){if(r.geometry!==null){var a=r.geometry.type,o=r.geometry.coordinates;switch(a){case"LineString":if(t(r,i,n,0,0)===!1)return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(t($h.lineString(o[s],r.properties),i,n,s)===!1)return!1;break}}})}function WDt(e,t,r){var i=r;return g6e(e,function(n,a,o,s){a===0&&r===void 0?i=n:i=t(i,n,a,o,s)}),i}function XDt(e,t){if(t=t||{},!$h.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0,i=t.multiFeatureIndex||0,n=t.geometryIndex||0,a=t.segmentIndex||0,o=t.properties,s;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),o=o||e.features[r].properties,s=e.features[r].geometry;break;case"Feature":o=o||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var l=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=l.length+a-1),$h.lineString([l[a],l[a+1]],o,t);case"Polygon":return n<0&&(n=l.length+n),a<0&&(a=l[n].length+a-1),$h.lineString([l[n][a],l[n][a+1]],o,t);case"MultiLineString":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a-1),$h.lineString([l[i][a],l[i][a+1]],o,t);case"MultiPolygon":return i<0&&(i=l.length+i),n<0&&(n=l[i].length+n),a<0&&(a=l[i][n].length-a-1),$h.lineString([l[i][n][a],l[i][n][a+1]],o,t)}throw new Error("geojson is invalid")}function ZDt(e,t){if(t=t||{},!$h.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0,i=t.multiFeatureIndex||0,n=t.geometryIndex||0,a=t.coordIndex||0,o=t.properties,s;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),o=o||e.features[r].properties,s=e.features[r].geometry;break;case"Feature":o=o||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var l=s.coordinates;switch(s.type){case"Point":return $h.point(l,o,t);case"MultiPoint":return i<0&&(i=l.length+i),$h.point(l[i],o,t);case"LineString":return a<0&&(a=l.length+a),$h.point(l[a],o,t);case"Polygon":return n<0&&(n=l.length+n),a<0&&(a=l[n].length+a),$h.point(l[n][a],o,t);case"MultiLineString":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),$h.point(l[i][a],o,t);case"MultiPolygon":return i<0&&(i=l.length+i),n<0&&(n=l[i].length+n),a<0&&(a=l[i][n].length-a),$h.point(l[i][n][a],o,t)}throw new Error("geojson is invalid")}xc.coordEach=BE;xc.coordReduce=BDt;xc.propEach=v6e;xc.propReduce=NDt;xc.featureEach=d6e;xc.featureReduce=UDt;xc.coordAll=VDt;xc.geomEach=_Y;xc.geomReduce=HDt;xc.flattenEach=wD;xc.flattenReduce=GDt;xc.segmentEach=p6e;xc.segmentReduce=YDt;xc.lineEach=g6e;xc.lineReduce=WDt;xc.findSegment=XDt;xc.findPoint=ZDt});var m6e=ne(bY=>{"use strict";Object.defineProperty(bY,"__esModule",{value:!0});var jDt=y6e(),KDt=xY();function JDt(e,t){t===void 0&&(t={});var r=0,i=0,n=0;return jDt.coordEach(e,function(a){r+=a[0],i+=a[1],n++}),KDt.point([r/n,i/n],t.properties)}bY.default=JDt});var A6e=ne(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});io.earthRadius=63710088e-1;io.factors={centimeters:io.earthRadius*100,centimetres:io.earthRadius*100,degrees:io.earthRadius/111325,feet:io.earthRadius*3.28084,inches:io.earthRadius*39.37,kilometers:io.earthRadius/1e3,kilometres:io.earthRadius/1e3,meters:io.earthRadius,metres:io.earthRadius,miles:io.earthRadius/1609.344,millimeters:io.earthRadius*1e3,millimetres:io.earthRadius*1e3,nauticalmiles:io.earthRadius/1852,radians:1,yards:io.earthRadius*1.0936};io.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/io.earthRadius,yards:1.0936133};io.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function u1(e,t,r){r===void 0&&(r={});var i={type:"Feature"};return(r.id===0||r.id)&&(i.id=r.id),r.bbox&&(i.bbox=r.bbox),i.properties=t||{},i.geometry=e,i}io.feature=u1;function QDt(e,t,r){switch(r===void 0&&(r={}),e){case"Point":return wY(t).geometry;case"LineString":return AY(t).geometry;case"Polygon":return TY(t).geometry;case"MultiPoint":return _6e(t).geometry;case"MultiLineString":return x6e(t).geometry;case"MultiPolygon":return b6e(t).geometry;default:throw new Error(e+" is invalid")}}io.geometry=QDt;function wY(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!TD(e[0])||!TD(e[1]))throw new Error("coordinates must contain numbers");var i={type:"Point",coordinates:e};return u1(i,t,r)}io.point=wY;function $Dt(e,t,r){return r===void 0&&(r={}),AD(e.map(function(i){return wY(i,t)}),r)}io.points=$Dt;function TY(e,t,r){r===void 0&&(r={});for(var i=0,n=e;i<n.length;i++){var a=n[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<a[a.length-1].length;o++)if(a[a.length-1][o]!==a[0][o])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:e};return u1(s,t,r)}io.polygon=TY;function eIt(e,t,r){return r===void 0&&(r={}),AD(e.map(function(i){return TY(i,t)}),r)}io.polygons=eIt;function AY(e,t,r){if(r===void 0&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var i={type:"LineString",coordinates:e};return u1(i,t,r)}io.lineString=AY;function tIt(e,t,r){return r===void 0&&(r={}),AD(e.map(function(i){return AY(i,t)}),r)}io.lineStrings=tIt;function AD(e,t){t===void 0&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}io.featureCollection=AD;function x6e(e,t,r){r===void 0&&(r={});var i={type:"MultiLineString",coordinates:e};return u1(i,t,r)}io.multiLineString=x6e;function _6e(e,t,r){r===void 0&&(r={});var i={type:"MultiPoint",coordinates:e};return u1(i,t,r)}io.multiPoint=_6e;function b6e(e,t,r){r===void 0&&(r={});var i={type:"MultiPolygon",coordinates:e};return u1(i,t,r)}io.multiPolygon=b6e;function rIt(e,t,r){r===void 0&&(r={});var i={type:"GeometryCollection",geometries:e};return u1(i,t,r)}io.geometryCollection=rIt;function nIt(e,t){if(t===void 0&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r}io.round=nIt;function w6e(e,t){t===void 0&&(t="kilometers");var r=io.factors[t];if(!r)throw new Error(t+" units is invalid");return e*r}io.radiansToLength=w6e;function MY(e,t){t===void 0&&(t="kilometers");var r=io.factors[t];if(!r)throw new Error(t+" units is invalid");return e/r}io.lengthToRadians=MY;function iIt(e,t){return T6e(MY(e,t))}io.lengthToDegrees=iIt;function aIt(e){var t=e%360;return t<0&&(t+=360),t}io.bearingToAzimuth=aIt;function T6e(e){var t=e%(2*Math.PI);return t*180/Math.PI}io.radiansToDegrees=T6e;function oIt(e){var t=e%360;return t*Math.PI/180}io.degreesToRadians=oIt;function sIt(e,t,r){if(t===void 0&&(t="kilometers"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return w6e(MY(e,t),r)}io.convertLength=sIt;function lIt(e,t,r){if(t===void 0&&(t="meters"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var i=io.areaFactors[t];if(!i)throw new Error("invalid original units");var n=io.areaFactors[r];if(!n)throw new Error("invalid final units");return e/i*n}io.convertArea=lIt;function TD(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}io.isNumber=TD;function uIt(e){return!!e&&e.constructor===Object}io.isObject=uIt;function fIt(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(t){if(!TD(t))throw new Error("bbox must only contain numbers")})}io.validateBBox=fIt;function cIt(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}io.validateId=cIt});var C6e=ne(_c=>{"use strict";Object.defineProperty(_c,"__esModule",{value:!0});var ev=A6e();function NE(e,t,r){if(e!==null)for(var i,n,a,o,s,l,u,f=0,c=0,h,v=e.type,d=v==="FeatureCollection",_=v==="Feature",T=d?e.features.length:1,p=0;p<T;p++){u=d?e.features[p].geometry:_?e.geometry:e,h=u?u.type==="GeometryCollection":!1,s=h?u.geometries.length:1;for(var M=0;M<s;M++){var b=0,w=0;if(o=h?u.geometries[M]:u,o!==null){l=o.coordinates;var k=o.type;switch(f=r&&(k==="Polygon"||k==="MultiPolygon")?1:0,k){case null:break;case"Point":if(t(l,c,p,b,w)===!1)return!1;c++,b++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(t(l[i],c,p,b,w)===!1)return!1;c++,k==="MultiPoint"&&b++}k==="LineString"&&b++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(n=0;n<l[i].length-f;n++){if(t(l[i][n],c,p,b,w)===!1)return!1;c++}k==="MultiLineString"&&b++,k==="Polygon"&&w++}k==="Polygon"&&b++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(w=0,n=0;n<l[i].length;n++){for(a=0;a<l[i][n].length-f;a++){if(t(l[i][n][a],c,p,b,w)===!1)return!1;c++}w++}b++}break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(NE(o.geometries[i],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function hIt(e,t,r,i){var n=r;return NE(e,function(a,o,s,l,u){o===0&&r===void 0?n=a:n=t(n,a,o,s,l,u)},i),n}function M6e(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&t(e.features[r].properties,r)!==!1;r++);break;case"Feature":t(e.properties,0);break}}function vIt(e,t,r){var i=r;return M6e(e,function(n,a){a===0&&r===void 0?i=n:i=t(i,n,a)}),i}function S6e(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function dIt(e,t,r){var i=r;return S6e(e,function(n,a){a===0&&r===void 0?i=n:i=t(i,n,a)}),i}function pIt(e){var t=[];return NE(e,function(r){t.push(r)}),t}function SY(e,t){var r,i,n,a,o,s,l,u,f,c,h=0,v=e.type==="FeatureCollection",d=e.type==="Feature",_=v?e.features.length:1;for(r=0;r<_;r++){for(s=v?e.features[r].geometry:d?e.geometry:e,u=v?e.features[r].properties:d?e.properties:{},f=v?e.features[r].bbox:d?e.bbox:void 0,c=v?e.features[r].id:d?e.id:void 0,l=s?s.type==="GeometryCollection":!1,o=l?s.geometries.length:1,n=0;n<o;n++){if(a=l?s.geometries[n]:s,a===null){if(t(null,h,u,f,c)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(a,h,u,f,c)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<a.geometries.length;i++)if(t(a.geometries[i],h,u,f,c)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}h++}}function gIt(e,t,r){var i=r;return SY(e,function(n,a,o,s,l){a===0&&r===void 0?i=n:i=t(i,n,a,o,s,l)}),i}function MD(e,t){SY(e,function(r,i,n,a,o){var s=r===null?null:r.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return t(ev.feature(r,n,{bbox:a,id:o}),i,0)===!1?!1:void 0}var l;switch(s){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<r.coordinates.length;u++){var f=r.coordinates[u],c={type:l,coordinates:f};if(t(ev.feature(c,n),i,u)===!1)return!1}})}function yIt(e,t,r){var i=r;return MD(e,function(n,a,o){a===0&&o===0&&r===void 0?i=n:i=t(i,n,a,o)}),i}function E6e(e,t){MD(e,function(r,i,n){var a=0;if(r.geometry){var o=r.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var s,l=0,u=0,f=0;if(NE(r,function(c,h,v,d,_){if(s===void 0||i>l||d>u||_>f){s=c,l=i,u=d,f=_,a=0;return}var T=ev.lineString([s,c],r.properties);if(t(T,i,n,_,a)===!1)return!1;a++,s=c})===!1)return!1}}})}function mIt(e,t,r){var i=r,n=!1;return E6e(e,function(a,o,s,l,u){n===!1&&r===void 0?i=a:i=t(i,a,o,s,l,u),n=!0}),i}function k6e(e,t){if(!e)throw new Error("geojson is required");MD(e,function(r,i,n){if(r.geometry!==null){var a=r.geometry.type,o=r.geometry.coordinates;switch(a){case"LineString":if(t(r,i,n,0,0)===!1)return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(t(ev.lineString(o[s],r.properties),i,n,s)===!1)return!1;break}}})}function xIt(e,t,r){var i=r;return k6e(e,function(n,a,o,s){a===0&&r===void 0?i=n:i=t(i,n,a,o,s)}),i}function _It(e,t){if(t=t||{},!ev.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0,i=t.multiFeatureIndex||0,n=t.geometryIndex||0,a=t.segmentIndex||0,o=t.properties,s;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),o=o||e.features[r].properties,s=e.features[r].geometry;break;case"Feature":o=o||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var l=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=l.length+a-1),ev.lineString([l[a],l[a+1]],o,t);case"Polygon":return n<0&&(n=l.length+n),a<0&&(a=l[n].length+a-1),ev.lineString([l[n][a],l[n][a+1]],o,t);case"MultiLineString":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a-1),ev.lineString([l[i][a],l[i][a+1]],o,t);case"MultiPolygon":return i<0&&(i=l.length+i),n<0&&(n=l[i].length+n),a<0&&(a=l[i][n].length-a-1),ev.lineString([l[i][n][a],l[i][n][a+1]],o,t)}throw new Error("geojson is invalid")}function bIt(e,t){if(t=t||{},!ev.isObject(t))throw new Error("options is invalid");var r=t.featureIndex||0,i=t.multiFeatureIndex||0,n=t.geometryIndex||0,a=t.coordIndex||0,o=t.properties,s;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),o=o||e.features[r].properties,s=e.features[r].geometry;break;case"Feature":o=o||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var l=s.coordinates;switch(s.type){case"Point":return ev.point(l,o,t);case"MultiPoint":return i<0&&(i=l.length+i),ev.point(l[i],o,t);case"LineString":return a<0&&(a=l.length+a),ev.point(l[a],o,t);case"Polygon":return n<0&&(n=l.length+n),a<0&&(a=l[n].length+a),ev.point(l[n][a],o,t);case"MultiLineString":return i<0&&(i=l.length+i),a<0&&(a=l[i].length+a),ev.point(l[i][a],o,t);case"MultiPolygon":return i<0&&(i=l.length+i),n<0&&(n=l[i].length+n),a<0&&(a=l[i][n].length-a),ev.point(l[i][n][a],o,t)}throw new Error("geojson is invalid")}_c.coordEach=NE;_c.coordReduce=hIt;_c.propEach=M6e;_c.propReduce=vIt;_c.featureEach=S6e;_c.featureReduce=dIt;_c.coordAll=pIt;_c.geomEach=SY;_c.geomReduce=gIt;_c.flattenEach=MD;_c.flattenReduce=yIt;_c.segmentEach=E6e;_c.segmentReduce=mIt;_c.lineEach=k6e;_c.lineReduce=xIt;_c.findSegment=_It;_c.findPoint=bIt});var L6e=ne(kY=>{"use strict";Object.defineProperty(kY,"__esModule",{value:!0});var wIt=C6e();function EY(e){var t=[1/0,1/0,-1/0,-1/0];return wIt.coordEach(e,function(r){t[0]>r[0]&&(t[0]=r[0]),t[1]>r[1]&&(t[1]=r[1]),t[2]<r[0]&&(t[2]=r[0]),t[3]<r[1]&&(t[3]=r[1])}),t}EY.default=EY;kY.default=EY});var O3=ne((mdr,F6e)=>{"use strict";var TIt=Ai(),D6e=YPe(),AIt=o6e(),MIt=m6e(),SIt=L6e(),P6e=dA(),z3=Wy(),EIt=Lg(),kIt=nA(),SD=$A(),R6e=Object.keys(D6e),CIt={"ISO-3":P6e,"USA-states":P6e,"country names":LIt};function LIt(e){for(var t=0;t<R6e.length;t++){var r=R6e[t],i=new RegExp(D6e[r]);if(i.test(e.trim().toLowerCase()))return r}return z3.log("Unrecognized country name: "+e+"."),!1}function PIt(e,t,r){if(!t||typeof t!="string")return!1;var i=CIt[e](t),n,a,o;if(i){if(e==="USA-states")for(n=[],o=0;o<r.length;o++)a=r[o],a.properties&&a.properties.gu&&a.properties.gu==="USA"&&n.push(a);else n=r;for(o=0;o<n.length;o++)if(a=n[o],a.id===i)return a;z3.log(["Location with id",i,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function RIt(e){var t=e.geometry,r=t.coordinates,i=e.id,n=[],a,o,s,l;function u(f){for(var c=0;c<f.length-1;c++)if(f[c][0]>0&&f[c+1][0]<0)return c;return null}switch(i==="RUS"||i==="FJI"?a=function(f){var c;if(u(f)===null)c=f;else for(c=new Array(f.length),l=0;l<f.length;l++)c[l]=[f[l][0]<0?f[l][0]+360:f[l][0],f[l][1]];n.push(SD.tester(c))}:i==="ATA"?a=function(f){var c=u(f);if(c===null)return n.push(SD.tester(f));var h=new Array(f.length+1),v=0;for(l=0;l<f.length;l++)l>c?h[v++]=[f[l][0]+360,f[l][1]]:l===c?(h[v++]=f[l],h[v++]=[f[l][0],-90]):h[v++]=f[l];var d=SD.tester(h);d.pts.pop(),n.push(d)}:a=function(f){n.push(SD.tester(f))},t.type){case"MultiPolygon":for(o=0;o<r.length;o++)for(s=0;s<r[o].length;s++)a(r[o][s]);break;case"Polygon":for(o=0;o<r.length;o++)a(r[o]);break}return n}function I6e(e){var t=e.geojson,r=window.PlotlyGeoAssets||{},i=typeof t=="string"?r[t]:t;return EIt(i)?i:(z3.error("Oops ... something went wrong when fetching "+t),!1)}function DIt(e){var t=e[0].trace,r=I6e(t);if(!r)return!1;var i={},n=[],a;for(a=0;a<t._length;a++){var o=e[a];(o.loc||o.loc===0)&&(i[o.loc]=o)}function s(f){var c=kIt(f,t.featureidkey||"id").get(),h=i[c];if(h){var v=f.geometry;if(v.type==="Polygon"||v.type==="MultiPolygon"){var d={type:"Feature",id:c,geometry:v,properties:{}};d.properties.ct=IIt(d),h.fIn=f,h.fOut=d,n.push(d)}else z3.log(["Location",h.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete i[c]}switch(r.type){case"FeatureCollection":var l=r.features;for(a=0;a<l.length;a++)s(l[a]);break;case"Feature":s(r);break;default:return z3.warn(["Invalid GeoJSON type",(r.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var u in i)z3.log(["Location *"+u+"*","does not have a matching feature with id-key","*"+t.featureidkey+"*."].join(" "));return n}function IIt(e){var t=e.geometry,r;if(t.type==="MultiPolygon")for(var i=t.coordinates,n=0,a=0;a<i.length;a++){var o={type:"Polygon",coordinates:i[a]},s=AIt.default(o);s>n&&(n=s,r=o)}else r=t;return MIt.default(r).geometry.coordinates}function FIt(e){var t=window.PlotlyGeoAssets||{},r=[];function i(l){return new Promise(function(u,f){TIt.json(l,function(c,h){if(c){delete t[l];var v=c.status===404?'GeoJSON at URL "'+l+'" does not exist.':"Unexpected error while fetching from "+l;return f(new Error(v))}return t[l]=h,u(h)})})}function n(l){return new Promise(function(u,f){var c=0,h=setInterval(function(){if(t[l]&&t[l]!=="pending")return clearInterval(h),u(t[l]);if(c>100)return clearInterval(h),f("Unexpected error while fetching from "+l);c++},50)})}for(var a=0;a<e.length;a++){var o=e[a][0].trace,s=o.geojson;typeof s=="string"&&(t[s]?t[s]==="pending"&&r.push(n(s)):(t[s]="pending",r.push(i(s))))}return r}function qIt(e){return SIt.default(e)}F6e.exports={locationToFeature:PIt,feature2polygons:RIt,getTraceGeojson:I6e,extractTraceFeature:DIt,fetchTraceGeoData:FIt,computeBbox:qIt}});var CY=ne((xdr,O6e)=>{"use strict";var zIt=Ai(),OIt=aa(),q6e=_i(),z6e=Tv(),BIt=z6e.stylePoints,NIt=z6e.styleText;O6e.exports=function(t,r){r&&UIt(t,r)};function UIt(e,t){var r=t[0].trace,i=t[0].node3;i.style("opacity",t[0].trace.opacity),BIt(i,r,e),NIt(i,r,e),i.selectAll("path.js-line").style("fill","none").each(function(n){var a=zIt.select(this),o=n.trace,s=o.line||{};a.call(q6e.stroke,s.color).call(OIt.dashLine,s.dash||"",s.width||0),o.fill!=="none"&&a.call(q6e.fill,o.fillcolor)})}});var DY=ne((_dr,U6e)=>{"use strict";var B6e=Ai(),kD=Wt(),VIt=yD().getTopojsonFeatures,LY=zE(),ED=O3(),N6e=Cd().findExtremes,RY=$a().BADNUM,HIt=yp().calcMarkerSize,PY=js(),GIt=CY();function YIt(e,t,r){var i=t.layers.frontplot.select(".scatterlayer"),n=kD.makeTraceGroups(i,r,"trace scattergeo");function a(o,s){o.lonlat[0]===RY&&B6e.select(s).remove()}n.selectAll("*").remove(),n.each(function(o){var s=B6e.select(this),l=o[0].trace;if(PY.hasLines(l)||l.fill!=="none"){var u=LY.calcTraceToLineCoords(o),f=l.fill!=="none"?LY.makePolygon(u):LY.makeLine(u);s.selectAll("path.js-line").data([{geojson:f,trace:l}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}PY.hasMarkers(l)&&s.selectAll("path.point").data(kD.identity).enter().append("path").classed("point",!0).each(function(c){a(c,this)}),PY.hasText(l)&&s.selectAll("g").data(kD.identity).enter().append("g").append("text").each(function(c){a(c,this)}),GIt(e,o)})}function WIt(e,t){var r=e[0].trace,i=t[r.geo],n=i._subplot,a=r._length,o,s;if(kD.isArrayOrTypedArray(r.locations)){var l=r.locationmode,u=l==="geojson-id"?ED.extractTraceFeature(e):VIt(r,n.topojson);for(o=0;o<a;o++){s=e[o];var f=l==="geojson-id"?s.fOut:ED.locationToFeature(l,s.loc,u);s.lonlat=f?f.properties.ct:[RY,RY]}}var c={padded:!0},h,v;if(i.fitbounds==="geojson"&&r.locationmode==="geojson-id"){var d=ED.computeBbox(ED.getTraceGeojson(r));h=[d[0],d[2]],v=[d[1],d[3]]}else{for(h=new Array(a),v=new Array(a),o=0;o<a;o++)s=e[o],h[o]=s.lonlat[0],v[o]=s.lonlat[1];c.ppad=HIt(r,a)}r._extremes.lon=N6e(i.lonaxis._ax,h,c),r._extremes.lat=N6e(i.lataxis._ax,v,c)}U6e.exports={calcGeoJSON:WIt,plot:YIt}});var H6e=ne((bdr,V6e)=>{"use strict";var XIt=Ol(),ZIt=$a().BADNUM,jIt=Z2(),KIt=Wt().fillText,JIt=q3();V6e.exports=function(t,r,i){var n=t.cd,a=n[0].trace,o=t.xa,s=t.ya,l=t.subplot,u=l.projection.isLonLatOverEdges,f=l.project;function c(M){var b=M.lonlat;if(b[0]===ZIt||u(b))return 1/0;var w=f(b),k=f([r,i]),x=Math.abs(w[0]-k[0]),E=Math.abs(w[1]-k[1]),S=Math.max(3,M.mrc||0);return Math.max(Math.sqrt(x*x+E*E)-S,1-3/S)}if(XIt.getClosest(n,c,t),t.index!==!1){var h=n[t.index],v=h.lonlat,d=[o.c2p(v),s.c2p(v)],_=h.mrc||1;t.x0=d[0]-_,t.x1=d[0]+_,t.y0=d[1]-_,t.y1=d[1]+_,t.loc=h.loc,t.lon=v[0],t.lat=v[1];var T={};T[a.geo]={_subplot:l};var p=a._module.formatLabels(h,a,T);return t.lonLabel=p.lonLabel,t.latLabel=p.latLabel,t.color=jIt(a,h),t.extraText=QIt(a,h,t,n[0].t.labels),t.hovertemplate=a.hovertemplate,[t]}};function QIt(e,t,r,i){if(e.hovertemplate)return;var n=t.hi||e.hoverinfo,a=n==="all"?JIt.hoverinfo.flags:n.split("+"),o=a.indexOf("location")!==-1&&Array.isArray(e.locations),s=a.indexOf("lon")!==-1,l=a.indexOf("lat")!==-1,u=a.indexOf("text")!==-1,f=[];function c(h){return h+"\xB0"}return o?f.push(t.loc):s&&l?f.push("("+c(r.latLabel)+", "+c(r.lonLabel)+")"):s?f.push(i.lon+c(r.lonLabel)):l&&f.push(i.lat+c(r.latLabel)),u&&KIt(t,e,f),f.join("<br>")}});var Y6e=ne((wdr,G6e)=>{"use strict";G6e.exports=function(t,r,i,n,a){t.lon=r.lon,t.lat=r.lat,t.location=r.loc?r.loc:null;var o=n[a];return o.fIn&&o.fIn.properties&&(t.properties=o.fIn.properties),t}});var Z6e=ne((Tdr,X6e)=>{"use strict";var W6e=js(),$It=$a().BADNUM;X6e.exports=function(t,r){var i=t.cd,n=t.xaxis,a=t.yaxis,o=[],s=i[0].trace,l,u,f,c,h,v=!W6e.hasMarkers(s)&&!W6e.hasText(s);if(v)return[];if(r===!1)for(h=0;h<i.length;h++)i[h].selected=0;else for(h=0;h<i.length;h++)l=i[h],u=l.lonlat,u[0]!==$It&&(f=n.c2p(u),c=a.c2p(u),r.contains([f,c],null,h,t)?(o.push({pointNumber:h,lon:u[0],lat:u[1]}),l.selected=1):l.selected=0);return o}});var UE=ne((CD,j6e)=>{(function(e,t){typeof CD=="object"&&typeof j6e!="undefined"?t(CD):typeof define=="function"&&define.amd?define(["exports"],t):t(e.d3=e.d3||{})})(CD,function(e){"use strict";function t(oe,me){return oe<me?-1:oe>me?1:oe>=me?0:NaN}function r(oe){return oe.length===1&&(oe=i(oe)),{left:function(me,xe,ce,ie){for(ce==null&&(ce=0),ie==null&&(ie=me.length);ce<ie;){var ge=ce+ie>>>1;oe(me[ge],xe)<0?ce=ge+1:ie=ge}return ce},right:function(me,xe,ce,ie){for(ce==null&&(ce=0),ie==null&&(ie=me.length);ce<ie;){var ge=ce+ie>>>1;oe(me[ge],xe)>0?ie=ge:ce=ge+1}return ce}}}function i(oe){return function(me,xe){return t(oe(me),xe)}}var n=r(t),a=n.right,o=n.left;function s(oe,me){me==null&&(me=l);for(var xe=0,ce=oe.length-1,ie=oe[0],ge=new Array(ce<0?0:ce);xe<ce;)ge[xe]=me(ie,ie=oe[++xe]);return ge}function l(oe,me){return[oe,me]}function u(oe,me,xe){var ce=oe.length,ie=me.length,ge=new Array(ce*ie),le,we,Re,qe;for(xe==null&&(xe=l),le=Re=0;le<ce;++le)for(qe=oe[le],we=0;we<ie;++we,++Re)ge[Re]=xe(qe,me[we]);return ge}function f(oe,me){return me<oe?-1:me>oe?1:me>=oe?0:NaN}function c(oe){return oe===null?NaN:+oe}function h(oe,me){var xe=oe.length,ce=0,ie=-1,ge=0,le,we,Re=0;if(me==null)for(;++ie<xe;)isNaN(le=c(oe[ie]))||(we=le-ge,ge+=we/++ce,Re+=we*(le-ge));else for(;++ie<xe;)isNaN(le=c(me(oe[ie],ie,oe)))||(we=le-ge,ge+=we/++ce,Re+=we*(le-ge));if(ce>1)return Re/(ce-1)}function v(oe,me){var xe=h(oe,me);return xe&&Math.sqrt(xe)}function d(oe,me){var xe=oe.length,ce=-1,ie,ge,le;if(me==null){for(;++ce<xe;)if((ie=oe[ce])!=null&&ie>=ie)for(ge=le=ie;++ce<xe;)(ie=oe[ce])!=null&&(ge>ie&&(ge=ie),le<ie&&(le=ie))}else for(;++ce<xe;)if((ie=me(oe[ce],ce,oe))!=null&&ie>=ie)for(ge=le=ie;++ce<xe;)(ie=me(oe[ce],ce,oe))!=null&&(ge>ie&&(ge=ie),le<ie&&(le=ie));return[ge,le]}var _=Array.prototype,T=_.slice,p=_.map;function M(oe){return function(){return oe}}function b(oe){return oe}function w(oe,me,xe){oe=+oe,me=+me,xe=(ie=arguments.length)<2?(me=oe,oe=0,1):ie<3?1:+xe;for(var ce=-1,ie=Math.max(0,Math.ceil((me-oe)/xe))|0,ge=new Array(ie);++ce<ie;)ge[ce]=oe+ce*xe;return ge}var k=Math.sqrt(50),x=Math.sqrt(10),E=Math.sqrt(2);function S(oe,me,xe){var ce,ie=-1,ge,le,we;if(me=+me,oe=+oe,xe=+xe,oe===me&&xe>0)return[oe];if((ce=me<oe)&&(ge=oe,oe=me,me=ge),(we=g(oe,me,xe))===0||!isFinite(we))return[];if(we>0)for(oe=Math.ceil(oe/we),me=Math.floor(me/we),le=new Array(ge=Math.ceil(me-oe+1));++ie<ge;)le[ie]=(oe+ie)*we;else for(oe=Math.floor(oe*we),me=Math.ceil(me*we),le=new Array(ge=Math.ceil(oe-me+1));++ie<ge;)le[ie]=(oe-ie)/we;return ce&&le.reverse(),le}function g(oe,me,xe){var ce=(me-oe)/Math.max(0,xe),ie=Math.floor(Math.log(ce)/Math.LN10),ge=ce/Math.pow(10,ie);return ie>=0?(ge>=k?10:ge>=x?5:ge>=E?2:1)*Math.pow(10,ie):-Math.pow(10,-ie)/(ge>=k?10:ge>=x?5:ge>=E?2:1)}function C(oe,me,xe){var ce=Math.abs(me-oe)/Math.max(0,xe),ie=Math.pow(10,Math.floor(Math.log(ce)/Math.LN10)),ge=ce/ie;return ge>=k?ie*=10:ge>=x?ie*=5:ge>=E&&(ie*=2),me<oe?-ie:ie}function A(oe){return Math.ceil(Math.log(oe.length)/Math.LN2)+1}function P(){var oe=b,me=d,xe=A;function ce(ie){var ge,le=ie.length,we,Re=new Array(le);for(ge=0;ge<le;++ge)Re[ge]=oe(ie[ge],ge,ie);var qe=me(Re),et=qe[0],Pe=qe[1],Ie=xe(Re,et,Pe);Array.isArray(Ie)||(Ie=C(et,Pe,Ie),Ie=w(Math.ceil(et/Ie)*Ie,Pe,Ie));for(var ut=Ie.length;Ie[0]<=et;)Ie.shift(),--ut;for(;Ie[ut-1]>Pe;)Ie.pop(),--ut;var ft=new Array(ut+1),je;for(ge=0;ge<=ut;++ge)je=ft[ge]=[],je.x0=ge>0?Ie[ge-1]:et,je.x1=ge<ut?Ie[ge]:Pe;for(ge=0;ge<le;++ge)we=Re[ge],et<=we&&we<=Pe&&ft[a(Ie,we,0,ut)].push(ie[ge]);return ft}return ce.value=function(ie){return arguments.length?(oe=typeof ie=="function"?ie:M(ie),ce):oe},ce.domain=function(ie){return arguments.length?(me=typeof ie=="function"?ie:M([ie[0],ie[1]]),ce):me},ce.thresholds=function(ie){return arguments.length?(xe=typeof ie=="function"?ie:Array.isArray(ie)?M(T.call(ie)):M(ie),ce):xe},ce}function D(oe,me,xe){if(xe==null&&(xe=c),!!(ce=oe.length)){if((me=+me)<=0||ce<2)return+xe(oe[0],0,oe);if(me>=1)return+xe(oe[ce-1],ce-1,oe);var ce,ie=(ce-1)*me,ge=Math.floor(ie),le=+xe(oe[ge],ge,oe),we=+xe(oe[ge+1],ge+1,oe);return le+(we-le)*(ie-ge)}}function z(oe,me,xe){return oe=p.call(oe,c).sort(t),Math.ceil((xe-me)/(2*(D(oe,.75)-D(oe,.25))*Math.pow(oe.length,-1/3)))}function O(oe,me,xe){return Math.ceil((xe-me)/(3.5*v(oe)*Math.pow(oe.length,-1/3)))}function V(oe,me){var xe=oe.length,ce=-1,ie,ge;if(me==null){for(;++ce<xe;)if((ie=oe[ce])!=null&&ie>=ie)for(ge=ie;++ce<xe;)(ie=oe[ce])!=null&&ie>ge&&(ge=ie)}else for(;++ce<xe;)if((ie=me(oe[ce],ce,oe))!=null&&ie>=ie)for(ge=ie;++ce<xe;)(ie=me(oe[ce],ce,oe))!=null&&ie>ge&&(ge=ie);return ge}function B(oe,me){var xe=oe.length,ce=xe,ie=-1,ge,le=0;if(me==null)for(;++ie<xe;)isNaN(ge=c(oe[ie]))?--ce:le+=ge;else for(;++ie<xe;)isNaN(ge=c(me(oe[ie],ie,oe)))?--ce:le+=ge;if(ce)return le/ce}function F(oe,me){var xe=oe.length,ce=-1,ie,ge=[];if(me==null)for(;++ce<xe;)isNaN(ie=c(oe[ce]))||ge.push(ie);else for(;++ce<xe;)isNaN(ie=c(me(oe[ce],ce,oe)))||ge.push(ie);return D(ge.sort(t),.5)}function N(oe){for(var me=oe.length,xe,ce=-1,ie=0,ge,le;++ce<me;)ie+=oe[ce].length;for(ge=new Array(ie);--me>=0;)for(le=oe[me],xe=le.length;--xe>=0;)ge[--ie]=le[xe];return ge}function Z(oe,me){var xe=oe.length,ce=-1,ie,ge;if(me==null){for(;++ce<xe;)if((ie=oe[ce])!=null&&ie>=ie)for(ge=ie;++ce<xe;)(ie=oe[ce])!=null&&ge>ie&&(ge=ie)}else for(;++ce<xe;)if((ie=me(oe[ce],ce,oe))!=null&&ie>=ie)for(ge=ie;++ce<xe;)(ie=me(oe[ce],ce,oe))!=null&&ge>ie&&(ge=ie);return ge}function J(oe,me){for(var xe=me.length,ce=new Array(xe);xe--;)ce[xe]=oe[me[xe]];return ce}function re(oe,me){if(xe=oe.length){var xe,ce=0,ie=0,ge,le=oe[ie];for(me==null&&(me=t);++ce<xe;)(me(ge=oe[ce],le)<0||me(le,le)!==0)&&(le=ge,ie=ce);if(me(le,le)===0)return ie}}function ue(oe,me,xe){for(var ce=(xe==null?oe.length:xe)-(me=me==null?0:+me),ie,ge;ce;)ge=Math.random()*ce--|0,ie=oe[ce+me],oe[ce+me]=oe[ge+me],oe[ge+me]=ie;return oe}function fe(oe,me){var xe=oe.length,ce=-1,ie,ge=0;if(me==null)for(;++ce<xe;)(ie=+oe[ce])&&(ge+=ie);else for(;++ce<xe;)(ie=+me(oe[ce],ce,oe))&&(ge+=ie);return ge}function K(oe){if(!(ge=oe.length))return[];for(var me=-1,xe=Z(oe,X),ce=new Array(xe);++me<xe;)for(var ie=-1,ge,le=ce[me]=new Array(ge);++ie<ge;)le[ie]=oe[ie][me];return ce}function X(oe){return oe.length}function ae(){return K(arguments)}e.bisect=a,e.bisectRight=a,e.bisectLeft=o,e.ascending=t,e.bisector=r,e.cross=u,e.descending=f,e.deviation=v,e.extent=d,e.histogram=P,e.thresholdFreedmanDiaconis=z,e.thresholdScott=O,e.thresholdSturges=A,e.max=V,e.mean=B,e.median=F,e.merge=N,e.min=Z,e.pairs=s,e.permute=J,e.quantile=D,e.range=w,e.scan=re,e.shuffle=ue,e.sum=fe,e.ticks=S,e.tickIncrement=g,e.tickStep=C,e.transpose=K,e.variance=h,e.zip=ae,Object.defineProperty(e,"__esModule",{value:!0})})});var IY=ne((LD,K6e)=>{(function(e,t){typeof LD=="object"&&typeof K6e!="undefined"?t(LD,UE()):typeof define=="function"&&define.amd?define(["exports","d3-array"],t):(e=e||self,t(e.d3=e.d3||{},e.d3))})(LD,function(e,t){"use strict";function r(){return new i}function i(){this.reset()}i.prototype={constructor:i,reset:function(){this.s=this.t=0},add:function(Ue){a(n,Ue,this.t),a(this,n.s,this.s),this.s?this.t+=n.t:this.s=n.t},valueOf:function(){return this.s}};var n=new i;function a(Ue,at,Ht){var It=Ue.s=at+Ht,fr=It-at,Lr=It-fr;Ue.t=at-Lr+(Ht-fr)}var o=1e-6,s=1e-12,l=Math.PI,u=l/2,f=l/4,c=l*2,h=180/l,v=l/180,d=Math.abs,_=Math.atan,T=Math.atan2,p=Math.cos,M=Math.ceil,b=Math.exp,w=Math.log,k=Math.pow,x=Math.sin,E=Math.sign||function(Ue){return Ue>0?1:Ue<0?-1:0},S=Math.sqrt,g=Math.tan;function C(Ue){return Ue>1?0:Ue<-1?l:Math.acos(Ue)}function A(Ue){return Ue>1?u:Ue<-1?-u:Math.asin(Ue)}function P(Ue){return(Ue=x(Ue/2))*Ue}function D(){}function z(Ue,at){Ue&&V.hasOwnProperty(Ue.type)&&V[Ue.type](Ue,at)}var O={Feature:function(Ue,at){z(Ue.geometry,at)},FeatureCollection:function(Ue,at){for(var Ht=Ue.features,It=-1,fr=Ht.length;++It<fr;)z(Ht[It].geometry,at)}},V={Sphere:function(Ue,at){at.sphere()},Point:function(Ue,at){Ue=Ue.coordinates,at.point(Ue[0],Ue[1],Ue[2])},MultiPoint:function(Ue,at){for(var Ht=Ue.coordinates,It=-1,fr=Ht.length;++It<fr;)Ue=Ht[It],at.point(Ue[0],Ue[1],Ue[2])},LineString:function(Ue,at){B(Ue.coordinates,at,0)},MultiLineString:function(Ue,at){for(var Ht=Ue.coordinates,It=-1,fr=Ht.length;++It<fr;)B(Ht[It],at,0)},Polygon:function(Ue,at){F(Ue.coordinates,at)},MultiPolygon:function(Ue,at){for(var Ht=Ue.coordinates,It=-1,fr=Ht.length;++It<fr;)F(Ht[It],at)},GeometryCollection:function(Ue,at){for(var Ht=Ue.geometries,It=-1,fr=Ht.length;++It<fr;)z(Ht[It],at)}};function B(Ue,at,Ht){var It=-1,fr=Ue.length-Ht,Lr;for(at.lineStart();++It<fr;)Lr=Ue[It],at.point(Lr[0],Lr[1],Lr[2]);at.lineEnd()}function F(Ue,at){var Ht=-1,It=Ue.length;for(at.polygonStart();++Ht<It;)B(Ue[Ht],at,1);at.polygonEnd()}function N(Ue,at){Ue&&O.hasOwnProperty(Ue.type)?O[Ue.type](Ue,at):z(Ue,at)}var Z=r(),J=r(),re,ue,fe,K,X,ae={point:D,lineStart:D,lineEnd:D,polygonStart:function(){Z.reset(),ae.lineStart=oe,ae.lineEnd=me},polygonEnd:function(){var Ue=+Z;J.add(Ue<0?c+Ue:Ue),this.lineStart=this.lineEnd=this.point=D},sphere:function(){J.add(c)}};function oe(){ae.point=xe}function me(){ce(re,ue)}function xe(Ue,at){ae.point=ce,re=Ue,ue=at,Ue*=v,at*=v,fe=Ue,K=p(at=at/2+f),X=x(at)}function ce(Ue,at){Ue*=v,at*=v,at=at/2+f;var Ht=Ue-fe,It=Ht>=0?1:-1,fr=It*Ht,Lr=p(at),qr=x(at),Zr=X*qr,nn=K*Lr+Zr*p(fr),An=Zr*It*x(fr);Z.add(T(An,nn)),fe=Ue,K=Lr,X=qr}function ie(Ue){return J.reset(),N(Ue,ae),J*2}function ge(Ue){return[T(Ue[1],Ue[0]),A(Ue[2])]}function le(Ue){var at=Ue[0],Ht=Ue[1],It=p(Ht);return[It*p(at),It*x(at),x(Ht)]}function we(Ue,at){return Ue[0]*at[0]+Ue[1]*at[1]+Ue[2]*at[2]}function Re(Ue,at){return[Ue[1]*at[2]-Ue[2]*at[1],Ue[2]*at[0]-Ue[0]*at[2],Ue[0]*at[1]-Ue[1]*at[0]]}function qe(Ue,at){Ue[0]+=at[0],Ue[1]+=at[1],Ue[2]+=at[2]}function et(Ue,at){return[Ue[0]*at,Ue[1]*at,Ue[2]*at]}function Pe(Ue){var at=S(Ue[0]*Ue[0]+Ue[1]*Ue[1]+Ue[2]*Ue[2]);Ue[0]/=at,Ue[1]/=at,Ue[2]/=at}var Ie,ut,ft,je,_t,Bt,Lt,Me,Ze=r(),dt,it,vt={point:rt,lineStart:ht,lineEnd:mt,polygonStart:function(){vt.point=er,vt.lineStart=$t,vt.lineEnd=cr,Ze.reset(),ae.polygonStart()},polygonEnd:function(){ae.polygonEnd(),vt.point=rt,vt.lineStart=ht,vt.lineEnd=mt,Z<0?(Ie=-(ft=180),ut=-(je=90)):Ze>o?je=90:Ze<-o&&(ut=-90),it[0]=Ie,it[1]=ft},sphere:function(){Ie=-(ft=180),ut=-(je=90)}};function rt(Ue,at){dt.push(it=[Ie=Ue,ft=Ue]),at<ut&&(ut=at),at>je&&(je=at)}function We(Ue,at){var Ht=le([Ue*v,at*v]);if(Me){var It=Re(Me,Ht),fr=[It[1],-It[0],0],Lr=Re(fr,It);Pe(Lr),Lr=ge(Lr);var qr=Ue-_t,Zr=qr>0?1:-1,nn=Lr[0]*h*Zr,An,Nr=d(qr)>180;Nr^(Zr*_t<nn&&nn<Zr*Ue)?(An=Lr[1]*h,An>je&&(je=An)):(nn=(nn+360)%360-180,Nr^(Zr*_t<nn&&nn<Zr*Ue)?(An=-Lr[1]*h,An<ut&&(ut=An)):(at<ut&&(ut=at),at>je&&(je=at))),Nr?Ue<_t?or(Ie,Ue)>or(Ie,ft)&&(ft=Ue):or(Ue,ft)>or(Ie,ft)&&(Ie=Ue):ft>=Ie?(Ue<Ie&&(Ie=Ue),Ue>ft&&(ft=Ue)):Ue>_t?or(Ie,Ue)>or(Ie,ft)&&(ft=Ue):or(Ue,ft)>or(Ie,ft)&&(Ie=Ue)}else dt.push(it=[Ie=Ue,ft=Ue]);at<ut&&(ut=at),at>je&&(je=at),Me=Ht,_t=Ue}function ht(){vt.point=We}function mt(){it[0]=Ie,it[1]=ft,vt.point=rt,Me=null}function er(Ue,at){if(Me){var Ht=Ue-_t;Ze.add(d(Ht)>180?Ht+(Ht>0?360:-360):Ht)}else Bt=Ue,Lt=at;ae.point(Ue,at),We(Ue,at)}function $t(){ae.lineStart()}function cr(){er(Bt,Lt),ae.lineEnd(),d(Ze)>o&&(Ie=-(ft=180)),it[0]=Ie,it[1]=ft,Me=null}function or(Ue,at){return(at-=Ue)<0?at+360:at}function vr(Ue,at){return Ue[0]-at[0]}function Ot(Ue,at){return Ue[0]<=Ue[1]?Ue[0]<=at&&at<=Ue[1]:at<Ue[0]||Ue[1]<at}function yt(Ue){var at,Ht,It,fr,Lr,qr,Zr;if(je=ft=-(Ie=ut=1/0),dt=[],N(Ue,vt),Ht=dt.length){for(dt.sort(vr),at=1,It=dt[0],Lr=[It];at<Ht;++at)fr=dt[at],Ot(It,fr[0])||Ot(It,fr[1])?(or(It[0],fr[1])>or(It[0],It[1])&&(It[1]=fr[1]),or(fr[0],It[1])>or(It[0],It[1])&&(It[0]=fr[0])):Lr.push(It=fr);for(qr=-1/0,Ht=Lr.length-1,at=0,It=Lr[Ht];at<=Ht;It=fr,++at)fr=Lr[at],(Zr=or(It[1],fr[0]))>qr&&(qr=Zr,Ie=fr[0],ft=It[1])}return dt=it=null,Ie===1/0||ut===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ie,ut],[ft,je]]}var Et,Je,Ke,At,Ee,de,Te,nt,Mt,Kt,Jt,Fr,Vr,mr,zr,an,ni={sphere:D,point:mn,lineStart:Wi,lineEnd:Ei,polygonStart:function(){ni.lineStart=ot,ni.lineEnd=Be},polygonEnd:function(){ni.lineStart=Wi,ni.lineEnd=Ei}};function mn(Ue,at){Ue*=v,at*=v;var Ht=p(at);fi(Ht*p(Ue),Ht*x(Ue),x(at))}function fi(Ue,at,Ht){++Et,Ke+=(Ue-Ke)/Et,At+=(at-At)/Et,Ee+=(Ht-Ee)/Et}function Wi(){ni.point=si}function si(Ue,at){Ue*=v,at*=v;var Ht=p(at);mr=Ht*p(Ue),zr=Ht*x(Ue),an=x(at),ni.point=Zi,fi(mr,zr,an)}function Zi(Ue,at){Ue*=v,at*=v;var Ht=p(at),It=Ht*p(Ue),fr=Ht*x(Ue),Lr=x(at),qr=T(S((qr=zr*Lr-an*fr)*qr+(qr=an*It-mr*Lr)*qr+(qr=mr*fr-zr*It)*qr),mr*It+zr*fr+an*Lr);Je+=qr,de+=qr*(mr+(mr=It)),Te+=qr*(zr+(zr=fr)),nt+=qr*(an+(an=Lr)),fi(mr,zr,an)}function Ei(){ni.point=mn}function ot(){ni.point=lt}function Be(){xt(Fr,Vr),ni.point=mn}function lt(Ue,at){Fr=Ue,Vr=at,Ue*=v,at*=v,ni.point=xt;var Ht=p(at);mr=Ht*p(Ue),zr=Ht*x(Ue),an=x(at),fi(mr,zr,an)}function xt(Ue,at){Ue*=v,at*=v;var Ht=p(at),It=Ht*p(Ue),fr=Ht*x(Ue),Lr=x(at),qr=zr*Lr-an*fr,Zr=an*It-mr*Lr,nn=mr*fr-zr*It,An=S(qr*qr+Zr*Zr+nn*nn),Nr=A(An),tn=An&&-Nr/An;Mt+=tn*qr,Kt+=tn*Zr,Jt+=tn*nn,Je+=Nr,de+=Nr*(mr+(mr=It)),Te+=Nr*(zr+(zr=fr)),nt+=Nr*(an+(an=Lr)),fi(mr,zr,an)}function Nt(Ue){Et=Je=Ke=At=Ee=de=Te=nt=Mt=Kt=Jt=0,N(Ue,ni);var at=Mt,Ht=Kt,It=Jt,fr=at*at+Ht*Ht+It*It;return fr<s&&(at=de,Ht=Te,It=nt,Je<o&&(at=Ke,Ht=At,It=Ee),fr=at*at+Ht*Ht+It*It,fr<s)?[NaN,NaN]:[T(Ht,at)*h,A(It/S(fr))*h]}function nr(Ue){return function(){return Ue}}function yr(Ue,at){function Ht(It,fr){return It=Ue(It,fr),at(It[0],It[1])}return Ue.invert&&at.invert&&(Ht.invert=function(It,fr){return It=at.invert(It,fr),It&&Ue.invert(It[0],It[1])}),Ht}function dr(Ue,at){return[d(Ue)>l?Ue+Math.round(-Ue/c)*c:Ue,at]}dr.invert=dr;function Rr(Ue,at,Ht){return(Ue%=c)?at||Ht?yr(Yr(Ue),dn(at,Ht)):Yr(Ue):at||Ht?dn(at,Ht):dr}function Gr(Ue){return function(at,Ht){return at+=Ue,[at>l?at-c:at<-l?at+c:at,Ht]}}function Yr(Ue){var at=Gr(Ue);return at.invert=Gr(-Ue),at}function dn(Ue,at){var Ht=p(Ue),It=x(Ue),fr=p(at),Lr=x(at);function qr(Zr,nn){var An=p(nn),Nr=p(Zr)*An,tn=x(Zr)*An,rn=x(nn),wn=rn*Ht+Nr*It;return[T(tn*fr-wn*Lr,Nr*Ht-rn*It),A(wn*fr+tn*Lr)]}return qr.invert=function(Zr,nn){var An=p(nn),Nr=p(Zr)*An,tn=x(Zr)*An,rn=x(nn),wn=rn*fr-tn*Lr;return[T(tn*fr+rn*Lr,Nr*Ht+wn*It),A(wn*Ht-Nr*It)]},qr}function Wr(Ue){Ue=Rr(Ue[0]*v,Ue[1]*v,Ue.length>2?Ue[2]*v:0);function at(Ht){return Ht=Ue(Ht[0]*v,Ht[1]*v),Ht[0]*=h,Ht[1]*=h,Ht}return at.invert=function(Ht){return Ht=Ue.invert(Ht[0]*v,Ht[1]*v),Ht[0]*=h,Ht[1]*=h,Ht},at}function qn(Ue,at,Ht,It,fr,Lr){if(Ht){var qr=p(at),Zr=x(at),nn=It*Ht;fr==null?(fr=at+It*c,Lr=at-nn/2):(fr=vi(qr,fr),Lr=vi(qr,Lr),(It>0?fr<Lr:fr>Lr)&&(fr+=It*c));for(var An,Nr=fr;It>0?Nr>Lr:Nr<Lr;Nr-=nn)An=ge([qr,-Zr*p(Nr),-Zr*x(Nr)]),Ue.point(An[0],An[1])}}function vi(Ue,at){at=le(at),at[0]-=Ue,Pe(at);var Ht=C(-at[1]);return((-at[2]<0?-Ht:Ht)+c-o)%c}function Mi(){var Ue=nr([0,0]),at=nr(90),Ht=nr(6),It,fr,Lr={point:qr};function qr(nn,An){It.push(nn=fr(nn,An)),nn[0]*=h,nn[1]*=h}function Zr(){var nn=Ue.apply(this,arguments),An=at.apply(this,arguments)*v,Nr=Ht.apply(this,arguments)*v;return It=[],fr=Rr(-nn[0]*v,-nn[1]*v,0).invert,qn(Lr,An,Nr,1),nn={type:"Polygon",coordinates:[It]},It=fr=null,nn}return Zr.center=function(nn){return arguments.length?(Ue=typeof nn=="function"?nn:nr([+nn[0],+nn[1]]),Zr):Ue},Zr.radius=function(nn){return arguments.length?(at=typeof nn=="function"?nn:nr(+nn),Zr):at},Zr.precision=function(nn){return arguments.length?(Ht=typeof nn=="function"?nn:nr(+nn),Zr):Ht},Zr}function Ui(){var Ue=[],at;return{point:function(Ht,It,fr){at.push([Ht,It,fr])},lineStart:function(){Ue.push(at=[])},lineEnd:D,rejoin:function(){Ue.length>1&&Ue.push(Ue.pop().concat(Ue.shift()))},result:function(){var Ht=Ue;return Ue=[],at=null,Ht}}}function ji(Ue,at){return d(Ue[0]-at[0])<o&&d(Ue[1]-at[1])<o}function ea(Ue,at,Ht,It){this.x=Ue,this.z=at,this.o=Ht,this.e=It,this.v=!1,this.n=this.p=null}function Ra(Ue,at,Ht,It,fr){var Lr=[],qr=[],Zr,nn;if(Ue.forEach(function(Gn){if(!((Oi=Gn.length-1)<=0)){var Oi,Ii=Gn[0],Hi=Gn[Oi],Ki;if(ji(Ii,Hi)){if(!Ii[2]&&!Hi[2]){for(fr.lineStart(),Zr=0;Zr<Oi;++Zr)fr.point((Ii=Gn[Zr])[0],Ii[1]);fr.lineEnd();return}Hi[0]+=2*o}Lr.push(Ki=new ea(Ii,Gn,null,!0)),qr.push(Ki.o=new ea(Ii,null,Ki,!1)),Lr.push(Ki=new ea(Hi,Gn,null,!1)),qr.push(Ki.o=new ea(Hi,null,Ki,!0))}}),!!Lr.length){for(qr.sort(at),Li(Lr),Li(qr),Zr=0,nn=qr.length;Zr<nn;++Zr)qr[Zr].e=Ht=!Ht;for(var An=Lr[0],Nr,tn;;){for(var rn=An,wn=!0;rn.v;)if((rn=rn.n)===An)return;Nr=rn.z,fr.lineStart();do{if(rn.v=rn.o.v=!0,rn.e){if(wn)for(Zr=0,nn=Nr.length;Zr<nn;++Zr)fr.point((tn=Nr[Zr])[0],tn[1]);else It(rn.x,rn.n.x,1,fr);rn=rn.n}else{if(wn)for(Nr=rn.p.z,Zr=Nr.length-1;Zr>=0;--Zr)fr.point((tn=Nr[Zr])[0],tn[1]);else It(rn.x,rn.p.x,-1,fr);rn=rn.p}rn=rn.o,Nr=rn.z,wn=!wn}while(!rn.v);fr.lineEnd()}}}function Li(Ue){if(at=Ue.length){for(var at,Ht=0,It=Ue[0],fr;++Ht<at;)It.n=fr=Ue[Ht],fr.p=It,It=fr;It.n=fr=Ue[0],fr.p=It}}var Yn=r();function zi(Ue){return d(Ue[0])<=l?Ue[0]:E(Ue[0])*((d(Ue[0])+l)%c-l)}function ya(Ue,at){var Ht=zi(at),It=at[1],fr=x(It),Lr=[x(Ht),-p(Ht),0],qr=0,Zr=0;Yn.reset(),fr===1?It=u+o:fr===-1&&(It=-u-o);for(var nn=0,An=Ue.length;nn<An;++nn)if(tn=(Nr=Ue[nn]).length)for(var Nr,tn,rn=Nr[tn-1],wn=zi(rn),Gn=rn[1]/2+f,Oi=x(Gn),Ii=p(Gn),Hi=0;Hi<tn;++Hi,wn=On,Oi=Ji,Ii=ca,rn=Ki){var Ki=Nr[Hi],On=zi(Ki),$n=Ki[1]/2+f,Ji=x($n),ca=p($n),Ka=On-wn,mo=Ka>=0?1:-1,vo=mo*Ka,xo=vo>l,Na=Oi*Ji;if(Yn.add(T(Na*mo*x(vo),Ii*ca+Na*p(vo))),qr+=xo?Ka+mo*c:Ka,xo^wn>=Ht^On>=Ht){var bs=Re(le(rn),le(Ki));Pe(bs);var Zo=Re(Lr,bs);Pe(Zo);var Bo=(xo^Ka>=0?-1:1)*A(Zo[2]);(It>Bo||It===Bo&&(bs[0]||bs[1]))&&(Zr+=xo^Ka>=0?1:-1)}}return(qr<-o||qr<o&&Yn<-o)^Zr&1}function zn(Ue,at,Ht,It){return function(fr){var Lr=at(fr),qr=Ui(),Zr=at(qr),nn=!1,An,Nr,tn,rn={point:wn,lineStart:Oi,lineEnd:Ii,polygonStart:function(){rn.point=Hi,rn.lineStart=Ki,rn.lineEnd=On,Nr=[],An=[]},polygonEnd:function(){rn.point=wn,rn.lineStart=Oi,rn.lineEnd=Ii,Nr=t.merge(Nr);var $n=ya(An,It);Nr.length?(nn||(fr.polygonStart(),nn=!0),Ra(Nr,Ut,$n,Ht,fr)):$n&&(nn||(fr.polygonStart(),nn=!0),fr.lineStart(),Ht(null,null,1,fr),fr.lineEnd()),nn&&(fr.polygonEnd(),nn=!1),Nr=An=null},sphere:function(){fr.polygonStart(),fr.lineStart(),Ht(null,null,1,fr),fr.lineEnd(),fr.polygonEnd()}};function wn($n,Ji){Ue($n,Ji)&&fr.point($n,Ji)}function Gn($n,Ji){Lr.point($n,Ji)}function Oi(){rn.point=Gn,Lr.lineStart()}function Ii(){rn.point=wn,Lr.lineEnd()}function Hi($n,Ji){tn.push([$n,Ji]),Zr.point($n,Ji)}function Ki(){Zr.lineStart(),tn=[]}function On(){Hi(tn[0][0],tn[0][1]),Zr.lineEnd();var $n=Zr.clean(),Ji=qr.result(),ca,Ka=Ji.length,mo,vo,xo;if(tn.pop(),An.push(tn),tn=null,!!Ka){if($n&1){if(vo=Ji[0],(mo=vo.length-1)>0){for(nn||(fr.polygonStart(),nn=!0),fr.lineStart(),ca=0;ca<mo;++ca)fr.point((xo=vo[ca])[0],xo[1]);fr.lineEnd()}return}Ka>1&&$n&2&&Ji.push(Ji.pop().concat(Ji.shift())),Nr.push(Ji.filter(Xe))}}return rn}}function Xe(Ue){return Ue.length>1}function Ut(Ue,at){return((Ue=Ue.x)[0]<0?Ue[1]-u-o:u-Ue[1])-((at=at.x)[0]<0?at[1]-u-o:u-at[1])}var ur=zn(function(){return!0},br,sn,[-l,-u]);function br(Ue){var at=NaN,Ht=NaN,It=NaN,fr;return{lineStart:function(){Ue.lineStart(),fr=1},point:function(Lr,qr){var Zr=Lr>0?l:-l,nn=d(Lr-at);d(nn-l)<o?(Ue.point(at,Ht=(Ht+qr)/2>0?u:-u),Ue.point(It,Ht),Ue.lineEnd(),Ue.lineStart(),Ue.point(Zr,Ht),Ue.point(Lr,Ht),fr=0):It!==Zr&&nn>=l&&(d(at-It)<o&&(at-=It*o),d(Lr-Zr)<o&&(Lr-=Zr*o),Ht=Jr(at,Ht,Lr,qr),Ue.point(It,Ht),Ue.lineEnd(),Ue.lineStart(),Ue.point(Zr,Ht),fr=0),Ue.point(at=Lr,Ht=qr),It=Zr},lineEnd:function(){Ue.lineEnd(),at=Ht=NaN},clean:function(){return 2-fr}}}function Jr(Ue,at,Ht,It){var fr,Lr,qr=x(Ue-Ht);return d(qr)>o?_((x(at)*(Lr=p(It))*x(Ht)-x(It)*(fr=p(at))*x(Ue))/(fr*Lr*qr)):(at+It)/2}function sn(Ue,at,Ht,It){var fr;if(Ue==null)fr=Ht*u,It.point(-l,fr),It.point(0,fr),It.point(l,fr),It.point(l,0),It.point(l,-fr),It.point(0,-fr),It.point(-l,-fr),It.point(-l,0),It.point(-l,fr);else if(d(Ue[0]-at[0])>o){var Lr=Ue[0]<at[0]?l:-l;fr=Ht*Lr/2,It.point(-Lr,fr),It.point(0,fr),It.point(Lr,fr)}else It.point(at[0],at[1])}function gn(Ue){var at=p(Ue),Ht=6*v,It=at>0,fr=d(at)>o;function Lr(Nr,tn,rn,wn){qn(wn,Ue,Ht,rn,Nr,tn)}function qr(Nr,tn){return p(Nr)*p(tn)>at}function Zr(Nr){var tn,rn,wn,Gn,Oi;return{lineStart:function(){Gn=wn=!1,Oi=1},point:function(Ii,Hi){var Ki=[Ii,Hi],On,$n=qr(Ii,Hi),Ji=It?$n?0:An(Ii,Hi):$n?An(Ii+(Ii<0?l:-l),Hi):0;if(!tn&&(Gn=wn=$n)&&Nr.lineStart(),$n!==wn&&(On=nn(tn,Ki),(!On||ji(tn,On)||ji(Ki,On))&&(Ki[2]=1)),$n!==wn)Oi=0,$n?(Nr.lineStart(),On=nn(Ki,tn),Nr.point(On[0],On[1])):(On=nn(tn,Ki),Nr.point(On[0],On[1],2),Nr.lineEnd()),tn=On;else if(fr&&tn&&It^$n){var ca;!(Ji&rn)&&(ca=nn(Ki,tn,!0))&&(Oi=0,It?(Nr.lineStart(),Nr.point(ca[0][0],ca[0][1]),Nr.point(ca[1][0],ca[1][1]),Nr.lineEnd()):(Nr.point(ca[1][0],ca[1][1]),Nr.lineEnd(),Nr.lineStart(),Nr.point(ca[0][0],ca[0][1],3)))}$n&&(!tn||!ji(tn,Ki))&&Nr.point(Ki[0],Ki[1]),tn=Ki,wn=$n,rn=Ji},lineEnd:function(){wn&&Nr.lineEnd(),tn=null},clean:function(){return Oi|(Gn&&wn)<<1}}}function nn(Nr,tn,rn){var wn=le(Nr),Gn=le(tn),Oi=[1,0,0],Ii=Re(wn,Gn),Hi=we(Ii,Ii),Ki=Ii[0],On=Hi-Ki*Ki;if(!On)return!rn&&Nr;var $n=at*Hi/On,Ji=-at*Ki/On,ca=Re(Oi,Ii),Ka=et(Oi,$n),mo=et(Ii,Ji);qe(Ka,mo);var vo=ca,xo=we(Ka,vo),Na=we(vo,vo),bs=xo*xo-Na*(we(Ka,Ka)-1);if(!(bs<0)){var Zo=S(bs),Bo=et(vo,(-xo-Zo)/Na);if(qe(Bo,Ka),Bo=ge(Bo),!rn)return Bo;var hi=Nr[0],ta=tn[0],ws=Nr[1],Ml=tn[1],Yl;ta<hi&&(Yl=hi,hi=ta,ta=Yl);var iu=ta-hi,Yu=d(iu-l)<o,Hf=Yu||iu<o;if(!Yu&&Ml<ws&&(Yl=ws,ws=Ml,Ml=Yl),Hf?Yu?ws+Ml>0^Bo[1]<(d(Bo[0]-hi)<o?ws:Ml):ws<=Bo[1]&&Bo[1]<=Ml:iu>l^(hi<=Bo[0]&&Bo[0]<=ta)){var au=et(vo,(-xo+Zo)/Na);return qe(au,Ka),[Bo,ge(au)]}}}function An(Nr,tn){var rn=It?Ue:l-Ue,wn=0;return Nr<-rn?wn|=1:Nr>rn&&(wn|=2),tn<-rn?wn|=4:tn>rn&&(wn|=8),wn}return zn(qr,Zr,Lr,It?[0,-Ue]:[-l,Ue-l])}function Cr(Ue,at,Ht,It,fr,Lr){var qr=Ue[0],Zr=Ue[1],nn=at[0],An=at[1],Nr=0,tn=1,rn=nn-qr,wn=An-Zr,Gn;if(Gn=Ht-qr,!(!rn&&Gn>0)){if(Gn/=rn,rn<0){if(Gn<Nr)return;Gn<tn&&(tn=Gn)}else if(rn>0){if(Gn>tn)return;Gn>Nr&&(Nr=Gn)}if(Gn=fr-qr,!(!rn&&Gn<0)){if(Gn/=rn,rn<0){if(Gn>tn)return;Gn>Nr&&(Nr=Gn)}else if(rn>0){if(Gn<Nr)return;Gn<tn&&(tn=Gn)}if(Gn=It-Zr,!(!wn&&Gn>0)){if(Gn/=wn,wn<0){if(Gn<Nr)return;Gn<tn&&(tn=Gn)}else if(wn>0){if(Gn>tn)return;Gn>Nr&&(Nr=Gn)}if(Gn=Lr-Zr,!(!wn&&Gn<0)){if(Gn/=wn,wn<0){if(Gn>tn)return;Gn>Nr&&(Nr=Gn)}else if(wn>0){if(Gn<Nr)return;Gn<tn&&(tn=Gn)}return Nr>0&&(Ue[0]=qr+Nr*rn,Ue[1]=Zr+Nr*wn),tn<1&&(at[0]=qr+tn*rn,at[1]=Zr+tn*wn),!0}}}}}var hn=1e9,gi=-hn;function Hn(Ue,at,Ht,It){function fr(An,Nr){return Ue<=An&&An<=Ht&&at<=Nr&&Nr<=It}function Lr(An,Nr,tn,rn){var wn=0,Gn=0;if(An==null||(wn=qr(An,tn))!==(Gn=qr(Nr,tn))||nn(An,Nr)<0^tn>0)do rn.point(wn===0||wn===3?Ue:Ht,wn>1?It:at);while((wn=(wn+tn+4)%4)!==Gn);else rn.point(Nr[0],Nr[1])}function qr(An,Nr){return d(An[0]-Ue)<o?Nr>0?0:3:d(An[0]-Ht)<o?Nr>0?2:1:d(An[1]-at)<o?Nr>0?1:0:Nr>0?3:2}function Zr(An,Nr){return nn(An.x,Nr.x)}function nn(An,Nr){var tn=qr(An,1),rn=qr(Nr,1);return tn!==rn?tn-rn:tn===0?Nr[1]-An[1]:tn===1?An[0]-Nr[0]:tn===2?An[1]-Nr[1]:Nr[0]-An[0]}return function(An){var Nr=An,tn=Ui(),rn,wn,Gn,Oi,Ii,Hi,Ki,On,$n,Ji,ca,Ka={point:mo,lineStart:bs,lineEnd:Zo,polygonStart:xo,polygonEnd:Na};function mo(hi,ta){fr(hi,ta)&&Nr.point(hi,ta)}function vo(){for(var hi=0,ta=0,ws=wn.length;ta<ws;++ta)for(var Ml=wn[ta],Yl=1,iu=Ml.length,Yu=Ml[0],Hf,au,Lc=Yu[0],Pc=Yu[1];Yl<iu;++Yl)Hf=Lc,au=Pc,Yu=Ml[Yl],Lc=Yu[0],Pc=Yu[1],au<=It?Pc>It&&(Lc-Hf)*(It-au)>(Pc-au)*(Ue-Hf)&&++hi:Pc<=It&&(Lc-Hf)*(It-au)<(Pc-au)*(Ue-Hf)&&--hi;return hi}function xo(){Nr=tn,rn=[],wn=[],ca=!0}function Na(){var hi=vo(),ta=ca&&hi,ws=(rn=t.merge(rn)).length;(ta||ws)&&(An.polygonStart(),ta&&(An.lineStart(),Lr(null,null,1,An),An.lineEnd()),ws&&Ra(rn,Zr,hi,Lr,An),An.polygonEnd()),Nr=An,rn=wn=Gn=null}function bs(){Ka.point=Bo,wn&&wn.push(Gn=[]),Ji=!0,$n=!1,Ki=On=NaN}function Zo(){rn&&(Bo(Oi,Ii),Hi&&$n&&tn.rejoin(),rn.push(tn.result())),Ka.point=mo,$n&&Nr.lineEnd()}function Bo(hi,ta){var ws=fr(hi,ta);if(wn&&Gn.push([hi,ta]),Ji)Oi=hi,Ii=ta,Hi=ws,Ji=!1,ws&&(Nr.lineStart(),Nr.point(hi,ta));else if(ws&&$n)Nr.point(hi,ta);else{var Ml=[Ki=Math.max(gi,Math.min(hn,Ki)),On=Math.max(gi,Math.min(hn,On))],Yl=[hi=Math.max(gi,Math.min(hn,hi)),ta=Math.max(gi,Math.min(hn,ta))];Cr(Ml,Yl,Ue,at,Ht,It)?($n||(Nr.lineStart(),Nr.point(Ml[0],Ml[1])),Nr.point(Yl[0],Yl[1]),ws||Nr.lineEnd(),ca=!1):ws&&(Nr.lineStart(),Nr.point(hi,ta),ca=!1)}Ki=hi,On=ta,$n=ws}return Ka}}function qi(){var Ue=0,at=0,Ht=960,It=500,fr,Lr,qr;return qr={stream:function(Zr){return fr&&Lr===Zr?fr:fr=Hn(Ue,at,Ht,It)(Lr=Zr)},extent:function(Zr){return arguments.length?(Ue=+Zr[0][0],at=+Zr[0][1],Ht=+Zr[1][0],It=+Zr[1][1],fr=Lr=null,qr):[[Ue,at],[Ht,It]]}}}var fa=r(),eo,ma,so,ja={sphere:D,point:D,lineStart:Xo,lineEnd:D,polygonStart:D,polygonEnd:D};function Xo(){ja.point=ms,ja.lineEnd=Uo}function Uo(){ja.point=ja.lineEnd=D}function ms(Ue,at){Ue*=v,at*=v,eo=Ue,ma=x(at),so=p(at),ja.point=as}function as(Ue,at){Ue*=v,at*=v;var Ht=x(at),It=p(at),fr=d(Ue-eo),Lr=p(fr),qr=x(fr),Zr=It*qr,nn=so*Ht-ma*It*Lr,An=ma*Ht+so*It*Lr;fa.add(T(S(Zr*Zr+nn*nn),An)),eo=Ue,ma=Ht,so=It}function il(Ue){return fa.reset(),N(Ue,ja),+fa}var oo=[null,null],cs={type:"LineString",coordinates:oo};function Eo(Ue,at){return oo[0]=Ue,oo[1]=at,il(cs)}var hs={Feature:function(Ue,at){return Qo(Ue.geometry,at)},FeatureCollection:function(Ue,at){for(var Ht=Ue.features,It=-1,fr=Ht.length;++It<fr;)if(Qo(Ht[It].geometry,at))return!0;return!1}},Jo={Sphere:function(){return!0},Point:function(Ue,at){return Oa(Ue.coordinates,at)},MultiPoint:function(Ue,at){for(var Ht=Ue.coordinates,It=-1,fr=Ht.length;++It<fr;)if(Oa(Ht[It],at))return!0;return!1},LineString:function(Ue,at){return co(Ue.coordinates,at)},MultiLineString:function(Ue,at){for(var Ht=Ue.coordinates,It=-1,fr=Ht.length;++It<fr;)if(co(Ht[It],at))return!0;return!1},Polygon:function(Ue,at){return Al(Ue.coordinates,at)},MultiPolygon:function(Ue,at){for(var Ht=Ue.coordinates,It=-1,fr=Ht.length;++It<fr;)if(Al(Ht[It],at))return!0;return!1},GeometryCollection:function(Ue,at){for(var Ht=Ue.geometries,It=-1,fr=Ht.length;++It<fr;)if(Qo(Ht[It],at))return!0;return!1}};function Qo(Ue,at){return Ue&&Jo.hasOwnProperty(Ue.type)?Jo[Ue.type](Ue,at):!1}function Oa(Ue,at){return Eo(Ue,at)===0}function co(Ue,at){for(var Ht,It,fr,Lr=0,qr=Ue.length;Lr<qr;Lr++){if(It=Eo(Ue[Lr],at),It===0||Lr>0&&(fr=Eo(Ue[Lr],Ue[Lr-1]),fr>0&&Ht<=fr&&It<=fr&&(Ht+It-fr)*(1-Math.pow((Ht-It)/fr,2))<s*fr))return!0;Ht=It}return!1}function Al(Ue,at){return!!ya(Ue.map($l),Nu(at))}function $l(Ue){return Ue=Ue.map(Nu),Ue.pop(),Ue}function Nu(Ue){return[Ue[0]*v,Ue[1]*v]}function os(Ue,at){return(Ue&&hs.hasOwnProperty(Ue.type)?hs[Ue.type]:Qo)(Ue,at)}function vn(Ue,at,Ht){var It=t.range(Ue,at-o,Ht).concat(at);return function(fr){return It.map(function(Lr){return[fr,Lr]})}}function bi(Ue,at,Ht){var It=t.range(Ue,at-o,Ht).concat(at);return function(fr){return It.map(function(Lr){return[Lr,fr]})}}function ac(){var Ue,at,Ht,It,fr,Lr,qr,Zr,nn=10,An=nn,Nr=90,tn=360,rn,wn,Gn,Oi,Ii=2.5;function Hi(){return{type:"MultiLineString",coordinates:Ki()}}function Ki(){return t.range(M(It/Nr)*Nr,Ht,Nr).map(Gn).concat(t.range(M(Zr/tn)*tn,qr,tn).map(Oi)).concat(t.range(M(at/nn)*nn,Ue,nn).filter(function(On){return d(On%Nr)>o}).map(rn)).concat(t.range(M(Lr/An)*An,fr,An).filter(function(On){return d(On%tn)>o}).map(wn))}return Hi.lines=function(){return Ki().map(function(On){return{type:"LineString",coordinates:On}})},Hi.outline=function(){return{type:"Polygon",coordinates:[Gn(It).concat(Oi(qr).slice(1),Gn(Ht).reverse().slice(1),Oi(Zr).reverse().slice(1))]}},Hi.extent=function(On){return arguments.length?Hi.extentMajor(On).extentMinor(On):Hi.extentMinor()},Hi.extentMajor=function(On){return arguments.length?(It=+On[0][0],Ht=+On[1][0],Zr=+On[0][1],qr=+On[1][1],It>Ht&&(On=It,It=Ht,Ht=On),Zr>qr&&(On=Zr,Zr=qr,qr=On),Hi.precision(Ii)):[[It,Zr],[Ht,qr]]},Hi.extentMinor=function(On){return arguments.length?(at=+On[0][0],Ue=+On[1][0],Lr=+On[0][1],fr=+On[1][1],at>Ue&&(On=at,at=Ue,Ue=On),Lr>fr&&(On=Lr,Lr=fr,fr=On),Hi.precision(Ii)):[[at,Lr],[Ue,fr]]},Hi.step=function(On){return arguments.length?Hi.stepMajor(On).stepMinor(On):Hi.stepMinor()},Hi.stepMajor=function(On){return arguments.length?(Nr=+On[0],tn=+On[1],Hi):[Nr,tn]},Hi.stepMinor=function(On){return arguments.length?(nn=+On[0],An=+On[1],Hi):[nn,An]},Hi.precision=function(On){return arguments.length?(Ii=+On,rn=vn(Lr,fr,90),wn=bi(at,Ue,Ii),Gn=vn(Zr,qr,90),Oi=bi(It,Ht,Ii),Hi):Ii},Hi.extentMajor([[-180,-90+o],[180,90-o]]).extentMinor([[-180,-80-o],[180,80+o]])}function Pl(){return ac()()}function ss(Ue,at){var Ht=Ue[0]*v,It=Ue[1]*v,fr=at[0]*v,Lr=at[1]*v,qr=p(It),Zr=x(It),nn=p(Lr),An=x(Lr),Nr=qr*p(Ht),tn=qr*x(Ht),rn=nn*p(fr),wn=nn*x(fr),Gn=2*A(S(P(Lr-It)+qr*nn*P(fr-Ht))),Oi=x(Gn),Ii=Gn?function(Hi){var Ki=x(Hi*=Gn)/Oi,On=x(Gn-Hi)/Oi,$n=On*Nr+Ki*rn,Ji=On*tn+Ki*wn,ca=On*Zr+Ki*An;return[T(Ji,$n)*h,T(ca,S($n*$n+Ji*Ji))*h]}:function(){return[Ht*h,It*h]};return Ii.distance=Gn,Ii}function vl(Ue){return Ue}var $o=r(),Rl=r(),xu,ii,Aa,Ca,Fs={point:D,lineStart:D,lineEnd:D,polygonStart:function(){Fs.lineStart=Pf,Fs.lineEnd=Wc},polygonEnd:function(){Fs.lineStart=Fs.lineEnd=Fs.point=D,$o.add(d(Rl)),Rl.reset()},result:function(){var Ue=$o/2;return $o.reset(),Ue}};function Pf(){Fs.point=Ma}function Ma(Ue,at){Fs.point=Rf,xu=Aa=Ue,ii=Ca=at}function Rf(Ue,at){Rl.add(Ca*Ue-Aa*at),Aa=Ue,Ca=at}function Wc(){Rf(xu,ii)}var dl=1/0,ff=dl,$s=-dl,ko=$s,eu={point:_u,lineStart:D,lineEnd:D,polygonStart:D,polygonEnd:D,result:function(){var Ue=[[dl,ff],[$s,ko]];return $s=ko=-(ff=dl=1/0),Ue}};function _u(Ue,at){Ue<dl&&(dl=Ue),Ue>$s&&($s=Ue),at<ff&&(ff=at),at>ko&&(ko=at)}var Ah=0,Uu=0,nv=0,Ac=0,lo=0,Df=0,Mh=0,Us=0,xs=0,Sh,cf,To,vs,po={point:Co,lineStart:Mc,lineEnd:hf,polygonStart:function(){po.lineStart=_d,po.lineEnd=bu},polygonEnd:function(){po.point=Co,po.lineStart=Mc,po.lineEnd=hf},result:function(){var Ue=xs?[Mh/xs,Us/xs]:Df?[Ac/Df,lo/Df]:nv?[Ah/nv,Uu/nv]:[NaN,NaN];return Ah=Uu=nv=Ac=lo=Df=Mh=Us=xs=0,Ue}};function Co(Ue,at){Ah+=Ue,Uu+=at,++nv}function Mc(){po.point=qs}function qs(Ue,at){po.point=Vl,Co(To=Ue,vs=at)}function Vl(Ue,at){var Ht=Ue-To,It=at-vs,fr=S(Ht*Ht+It*It);Ac+=fr*(To+Ue)/2,lo+=fr*(vs+at)/2,Df+=fr,Co(To=Ue,vs=at)}function hf(){po.point=Co}function _d(){po.point=Wp}function bu(){Hl(Sh,cf)}function Wp(Ue,at){po.point=Hl,Co(Sh=To=Ue,cf=vs=at)}function Hl(Ue,at){var Ht=Ue-To,It=at-vs,fr=S(Ht*Ht+It*It);Ac+=fr*(To+Ue)/2,lo+=fr*(vs+at)/2,Df+=fr,fr=vs*Ue-To*at,Mh+=fr*(To+Ue),Us+=fr*(vs+at),xs+=fr*3,Co(To=Ue,vs=at)}function ho(Ue){this._context=Ue}ho.prototype={_radius:4.5,pointRadius:function(Ue){return this._radius=Ue,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(Ue,at){switch(this._point){case 0:{this._context.moveTo(Ue,at),this._point=1;break}case 1:{this._context.lineTo(Ue,at);break}default:{this._context.moveTo(Ue+this._radius,at),this._context.arc(Ue,at,this._radius,0,c);break}}},result:D};var Dv=r(),vf,Gl,iv,Eh,av,wu={point:D,lineStart:function(){wu.point=Iv},lineEnd:function(){vf&&ov(Gl,iv),wu.point=D},polygonStart:function(){vf=!0},polygonEnd:function(){vf=null},result:function(){var Ue=+Dv;return Dv.reset(),Ue}};function Iv(Ue,at){wu.point=ov,Gl=Eh=Ue,iv=av=at}function ov(Ue,at){Eh-=Ue,av-=at,Dv.add(S(Eh*Eh+av*av)),Eh=Ue,av=at}function kh(){this._string=[]}kh.prototype={_radius:4.5,_circle:sv(4.5),pointRadius:function(Ue){return(Ue=+Ue)!==this._radius&&(this._radius=Ue,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(Ue,at){switch(this._point){case 0:{this._string.push("M",Ue,",",at),this._point=1;break}case 1:{this._string.push("L",Ue,",",at);break}default:{this._circle==null&&(this._circle=sv(this._radius)),this._string.push("M",Ue,",",at,this._circle);break}}},result:function(){if(this._string.length){var Ue=this._string.join("");return this._string=[],Ue}else return null}};function sv(Ue){return"m0,"+Ue+"a"+Ue+","+Ue+" 0 1,1 0,"+-2*Ue+"a"+Ue+","+Ue+" 0 1,1 0,"+2*Ue+"z"}function bd(Ue,at){var Ht=4.5,It,fr;function Lr(qr){return qr&&(typeof Ht=="function"&&fr.pointRadius(+Ht.apply(this,arguments)),N(qr,It(fr))),fr.result()}return Lr.area=function(qr){return N(qr,It(Fs)),Fs.result()},Lr.measure=function(qr){return N(qr,It(wu)),wu.result()},Lr.bounds=function(qr){return N(qr,It(eu)),eu.result()},Lr.centroid=function(qr){return N(qr,It(po)),po.result()},Lr.projection=function(qr){return arguments.length?(It=qr==null?(Ue=null,vl):(Ue=qr).stream,Lr):Ue},Lr.context=function(qr){return arguments.length?(fr=qr==null?(at=null,new kh):new ho(at=qr),typeof Ht!="function"&&fr.pointRadius(Ht),Lr):at},Lr.pointRadius=function(qr){return arguments.length?(Ht=typeof qr=="function"?qr:(fr.pointRadius(+qr),+qr),Lr):Ht},Lr.projection(Ue).context(at)}function Hd(Ue){return{stream:If(Ue)}}function If(Ue){return function(at){var Ht=new Fv;for(var It in Ue)Ht[It]=Ue[It];return Ht.stream=at,Ht}}function Fv(){}Fv.prototype={constructor:Fv,point:function(Ue,at){this.stream.point(Ue,at)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function oc(Ue,at,Ht){var It=Ue.clipExtent&&Ue.clipExtent();return Ue.scale(150).translate([0,0]),It!=null&&Ue.clipExtent(null),N(Ht,Ue.stream(eu)),at(eu.result()),It!=null&&Ue.clipExtent(It),Ue}function Ch(Ue,at,Ht){return oc(Ue,function(It){var fr=at[1][0]-at[0][0],Lr=at[1][1]-at[0][1],qr=Math.min(fr/(It[1][0]-It[0][0]),Lr/(It[1][1]-It[0][1])),Zr=+at[0][0]+(fr-qr*(It[1][0]+It[0][0]))/2,nn=+at[0][1]+(Lr-qr*(It[1][1]+It[0][1]))/2;Ue.scale(150*qr).translate([Zr,nn])},Ht)}function Vu(Ue,at,Ht){return Ch(Ue,[[0,0],at],Ht)}function Sc(Ue,at,Ht){return oc(Ue,function(It){var fr=+at,Lr=fr/(It[1][0]-It[0][0]),qr=(fr-Lr*(It[1][0]+It[0][0]))/2,Zr=-Lr*It[0][1];Ue.scale(150*Lr).translate([qr,Zr])},Ht)}function Ff(Ue,at,Ht){return oc(Ue,function(It){var fr=+at,Lr=fr/(It[1][1]-It[0][1]),qr=-Lr*It[0][0],Zr=(fr-Lr*(It[1][1]+It[0][1]))/2;Ue.scale(150*Lr).translate([qr,Zr])},Ht)}var qv=16,zv=p(30*v);function Ov(Ue,at){return+at?uv(Ue,at):lv(Ue)}function lv(Ue){return If({point:function(at,Ht){at=Ue(at,Ht),this.stream.point(at[0],at[1])}})}function uv(Ue,at){function Ht(It,fr,Lr,qr,Zr,nn,An,Nr,tn,rn,wn,Gn,Oi,Ii){var Hi=An-It,Ki=Nr-fr,On=Hi*Hi+Ki*Ki;if(On>4*at&&Oi--){var $n=qr+rn,Ji=Zr+wn,ca=nn+Gn,Ka=S($n*$n+Ji*Ji+ca*ca),mo=A(ca/=Ka),vo=d(d(ca)-1)<o||d(Lr-tn)<o?(Lr+tn)/2:T(Ji,$n),xo=Ue(vo,mo),Na=xo[0],bs=xo[1],Zo=Na-It,Bo=bs-fr,hi=Ki*Zo-Hi*Bo;(hi*hi/On>at||d((Hi*Zo+Ki*Bo)/On-.5)>.3||qr*rn+Zr*wn+nn*Gn<zv)&&(Ht(It,fr,Lr,qr,Zr,nn,Na,bs,vo,$n/=Ka,Ji/=Ka,ca,Oi,Ii),Ii.point(Na,bs),Ht(Na,bs,vo,$n,Ji,ca,An,Nr,tn,rn,wn,Gn,Oi,Ii))}}return function(It){var fr,Lr,qr,Zr,nn,An,Nr,tn,rn,wn,Gn,Oi,Ii={point:Hi,lineStart:Ki,lineEnd:$n,polygonStart:function(){It.polygonStart(),Ii.lineStart=Ji},polygonEnd:function(){It.polygonEnd(),Ii.lineStart=Ki}};function Hi(mo,vo){mo=Ue(mo,vo),It.point(mo[0],mo[1])}function Ki(){tn=NaN,Ii.point=On,It.lineStart()}function On(mo,vo){var xo=le([mo,vo]),Na=Ue(mo,vo);Ht(tn,rn,Nr,wn,Gn,Oi,tn=Na[0],rn=Na[1],Nr=mo,wn=xo[0],Gn=xo[1],Oi=xo[2],qv,It),It.point(tn,rn)}function $n(){Ii.point=Hi,It.lineEnd()}function Ji(){Ki(),Ii.point=ca,Ii.lineEnd=Ka}function ca(mo,vo){On(fr=mo,vo),Lr=tn,qr=rn,Zr=wn,nn=Gn,An=Oi,Ii.point=On}function Ka(){Ht(tn,rn,Nr,wn,Gn,Oi,Lr,qr,fr,Zr,nn,An,qv,It),Ii.lineEnd=$n,$n()}return Ii}}var Bv=If({point:function(Ue,at){this.stream.point(Ue*v,at*v)}});function tu(Ue){return If({point:function(at,Ht){var It=Ue(at,Ht);return this.stream.point(It[0],It[1])}})}function fv(Ue,at,Ht,It,fr){function Lr(qr,Zr){return qr*=It,Zr*=fr,[at+Ue*qr,Ht-Ue*Zr]}return Lr.invert=function(qr,Zr){return[(qr-at)/Ue*It,(Ht-Zr)/Ue*fr]},Lr}function al(Ue,at,Ht,It,fr,Lr){var qr=p(Lr),Zr=x(Lr),nn=qr*Ue,An=Zr*Ue,Nr=qr/Ue,tn=Zr/Ue,rn=(Zr*Ht-qr*at)/Ue,wn=(Zr*at+qr*Ht)/Ue;function Gn(Oi,Ii){return Oi*=It,Ii*=fr,[nn*Oi-An*Ii+at,Ht-An*Oi-nn*Ii]}return Gn.invert=function(Oi,Ii){return[It*(Nr*Oi-tn*Ii+rn),fr*(wn-tn*Oi-Nr*Ii)]},Gn}function ru(Ue){return qf(function(){return Ue})()}function qf(Ue){var at,Ht=150,It=480,fr=250,Lr=0,qr=0,Zr=0,nn=0,An=0,Nr,tn=0,rn=1,wn=1,Gn=null,Oi=ur,Ii=null,Hi,Ki,On,$n=vl,Ji=.5,ca,Ka,mo,vo,xo;function Na(hi){return mo(hi[0]*v,hi[1]*v)}function bs(hi){return hi=mo.invert(hi[0],hi[1]),hi&&[hi[0]*h,hi[1]*h]}Na.stream=function(hi){return vo&&xo===hi?vo:vo=Bv(tu(Nr)(Oi(ca($n(xo=hi)))))},Na.preclip=function(hi){return arguments.length?(Oi=hi,Gn=void 0,Bo()):Oi},Na.postclip=function(hi){return arguments.length?($n=hi,Ii=Hi=Ki=On=null,Bo()):$n},Na.clipAngle=function(hi){return arguments.length?(Oi=+hi?gn(Gn=hi*v):(Gn=null,ur),Bo()):Gn*h},Na.clipExtent=function(hi){return arguments.length?($n=hi==null?(Ii=Hi=Ki=On=null,vl):Hn(Ii=+hi[0][0],Hi=+hi[0][1],Ki=+hi[1][0],On=+hi[1][1]),Bo()):Ii==null?null:[[Ii,Hi],[Ki,On]]},Na.scale=function(hi){return arguments.length?(Ht=+hi,Zo()):Ht},Na.translate=function(hi){return arguments.length?(It=+hi[0],fr=+hi[1],Zo()):[It,fr]},Na.center=function(hi){return arguments.length?(Lr=hi[0]%360*v,qr=hi[1]%360*v,Zo()):[Lr*h,qr*h]},Na.rotate=function(hi){return arguments.length?(Zr=hi[0]%360*v,nn=hi[1]%360*v,An=hi.length>2?hi[2]%360*v:0,Zo()):[Zr*h,nn*h,An*h]},Na.angle=function(hi){return arguments.length?(tn=hi%360*v,Zo()):tn*h},Na.reflectX=function(hi){return arguments.length?(rn=hi?-1:1,Zo()):rn<0},Na.reflectY=function(hi){return arguments.length?(wn=hi?-1:1,Zo()):wn<0},Na.precision=function(hi){return arguments.length?(ca=Ov(Ka,Ji=hi*hi),Bo()):S(Ji)},Na.fitExtent=function(hi,ta){return Ch(Na,hi,ta)},Na.fitSize=function(hi,ta){return Vu(Na,hi,ta)},Na.fitWidth=function(hi,ta){return Sc(Na,hi,ta)},Na.fitHeight=function(hi,ta){return Ff(Na,hi,ta)};function Zo(){var hi=al(Ht,0,0,rn,wn,tn).apply(null,at(Lr,qr)),ta=(tn?al:fv)(Ht,It-hi[0],fr-hi[1],rn,wn,tn);return Nr=Rr(Zr,nn,An),Ka=yr(at,ta),mo=yr(Nr,Ka),ca=Ov(Ka,Ji),Bo()}function Bo(){return vo=xo=null,Na}return function(){return at=Ue.apply(this,arguments),Na.invert=at.invert&&bs,Zo()}}function Vs(Ue){var at=0,Ht=l/3,It=qf(Ue),fr=It(at,Ht);return fr.parallels=function(Lr){return arguments.length?It(at=Lr[0]*v,Ht=Lr[1]*v):[at*h,Ht*h]},fr}function Xc(Ue){var at=p(Ue);function Ht(It,fr){return[It*at,x(fr)/at]}return Ht.invert=function(It,fr){return[It/at,A(fr*at)]},Ht}function zf(Ue,at){var Ht=x(Ue),It=(Ht+x(at))/2;if(d(It)<o)return Xc(Ue);var fr=1+Ht*(2*It-Ht),Lr=S(fr)/It;function qr(Zr,nn){var An=S(fr-2*It*x(nn))/It;return[An*x(Zr*=It),Lr-An*p(Zr)]}return qr.invert=function(Zr,nn){var An=Lr-nn,Nr=T(Zr,d(An))*E(An);return An*It<0&&(Nr-=l*E(Zr)*E(An)),[Nr/It,A((fr-(Zr*Zr+An*An)*It*It)/(2*It))]},qr}function Dl(){return Vs(zf).scale(155.424).center([0,33.6442])}function zs(){return Dl().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Gd(Ue){var at=Ue.length;return{point:function(Ht,It){for(var fr=-1;++fr<at;)Ue[fr].point(Ht,It)},sphere:function(){for(var Ht=-1;++Ht<at;)Ue[Ht].sphere()},lineStart:function(){for(var Ht=-1;++Ht<at;)Ue[Ht].lineStart()},lineEnd:function(){for(var Ht=-1;++Ht<at;)Ue[Ht].lineEnd()},polygonStart:function(){for(var Ht=-1;++Ht<at;)Ue[Ht].polygonStart()},polygonEnd:function(){for(var Ht=-1;++Ht<at;)Ue[Ht].polygonEnd()}}}function Yd(){var Ue,at,Ht=zs(),It,fr=Dl().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Lr,qr=Dl().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Zr,nn,An={point:function(rn,wn){nn=[rn,wn]}};function Nr(rn){var wn=rn[0],Gn=rn[1];return nn=null,It.point(wn,Gn),nn||(Lr.point(wn,Gn),nn)||(Zr.point(wn,Gn),nn)}Nr.invert=function(rn){var wn=Ht.scale(),Gn=Ht.translate(),Oi=(rn[0]-Gn[0])/wn,Ii=(rn[1]-Gn[1])/wn;return(Ii>=.12&&Ii<.234&&Oi>=-.425&&Oi<-.214?fr:Ii>=.166&&Ii<.234&&Oi>=-.214&&Oi<-.115?qr:Ht).invert(rn)},Nr.stream=function(rn){return Ue&&at===rn?Ue:Ue=Gd([Ht.stream(at=rn),fr.stream(rn),qr.stream(rn)])},Nr.precision=function(rn){return arguments.length?(Ht.precision(rn),fr.precision(rn),qr.precision(rn),tn()):Ht.precision()},Nr.scale=function(rn){return arguments.length?(Ht.scale(rn),fr.scale(rn*.35),qr.scale(rn),Nr.translate(Ht.translate())):Ht.scale()},Nr.translate=function(rn){if(!arguments.length)return Ht.translate();var wn=Ht.scale(),Gn=+rn[0],Oi=+rn[1];return It=Ht.translate(rn).clipExtent([[Gn-.455*wn,Oi-.238*wn],[Gn+.455*wn,Oi+.238*wn]]).stream(An),Lr=fr.translate([Gn-.307*wn,Oi+.201*wn]).clipExtent([[Gn-.425*wn+o,Oi+.12*wn+o],[Gn-.214*wn-o,Oi+.234*wn-o]]).stream(An),Zr=qr.translate([Gn-.205*wn,Oi+.212*wn]).clipExtent([[Gn-.214*wn+o,Oi+.166*wn+o],[Gn-.115*wn-o,Oi+.234*wn-o]]).stream(An),tn()},Nr.fitExtent=function(rn,wn){return Ch(Nr,rn,wn)},Nr.fitSize=function(rn,wn){return Vu(Nr,rn,wn)},Nr.fitWidth=function(rn,wn){return Sc(Nr,rn,wn)},Nr.fitHeight=function(rn,wn){return Ff(Nr,rn,wn)};function tn(){return Ue=at=null,Nr}return Nr.scale(1070)}function Tu(Ue){return function(at,Ht){var It=p(at),fr=p(Ht),Lr=Ue(It*fr);return[Lr*fr*x(at),Lr*x(Ht)]}}function df(Ue){return function(at,Ht){var It=S(at*at+Ht*Ht),fr=Ue(It),Lr=x(fr),qr=p(fr);return[T(at*Lr,It*qr),A(It&&Ht*Lr/It)]}}var nu=Tu(function(Ue){return S(2/(1+Ue))});nu.invert=df(function(Ue){return 2*A(Ue/2)});function Wd(){return ru(nu).scale(124.75).clipAngle(180-.001)}var Zc=Tu(function(Ue){return(Ue=C(Ue))&&Ue/x(Ue)});Zc.invert=df(function(Ue){return Ue});function jc(){return ru(Zc).scale(79.4188).clipAngle(180-.001)}function Au(Ue,at){return[Ue,w(g((u+at)/2))]}Au.invert=function(Ue,at){return[Ue,2*_(b(at))-u]};function Nv(){return cv(Au).scale(961/c)}function cv(Ue){var at=ru(Ue),Ht=at.center,It=at.scale,fr=at.translate,Lr=at.clipExtent,qr=null,Zr,nn,An;at.scale=function(tn){return arguments.length?(It(tn),Nr()):It()},at.translate=function(tn){return arguments.length?(fr(tn),Nr()):fr()},at.center=function(tn){return arguments.length?(Ht(tn),Nr()):Ht()},at.clipExtent=function(tn){return arguments.length?(tn==null?qr=Zr=nn=An=null:(qr=+tn[0][0],Zr=+tn[0][1],nn=+tn[1][0],An=+tn[1][1]),Nr()):qr==null?null:[[qr,Zr],[nn,An]]};function Nr(){var tn=l*It(),rn=at(Wr(at.rotate()).invert([0,0]));return Lr(qr==null?[[rn[0]-tn,rn[1]-tn],[rn[0]+tn,rn[1]+tn]]:Ue===Au?[[Math.max(rn[0]-tn,qr),Zr],[Math.min(rn[0]+tn,nn),An]]:[[qr,Math.max(rn[1]-tn,Zr)],[nn,Math.min(rn[1]+tn,An)]])}return Nr()}function hv(Ue){return g((u+Ue)/2)}function Uv(Ue,at){var Ht=p(Ue),It=Ue===at?x(Ue):w(Ht/p(at))/w(hv(at)/hv(Ue)),fr=Ht*k(hv(Ue),It)/It;if(!It)return Au;function Lr(qr,Zr){fr>0?Zr<-u+o&&(Zr=-u+o):Zr>u-o&&(Zr=u-o);var nn=fr/k(hv(Zr),It);return[nn*x(It*qr),fr-nn*p(It*qr)]}return Lr.invert=function(qr,Zr){var nn=fr-Zr,An=E(It)*S(qr*qr+nn*nn),Nr=T(qr,d(nn))*E(nn);return nn*It<0&&(Nr-=l*E(qr)*E(nn)),[Nr/It,2*_(k(fr/An,1/It))-u]},Lr}function Kc(){return Vs(Uv).scale(109.5).parallels([30,30])}function Of(Ue,at){return[Ue,at]}Of.invert=Of;function Ec(){return ru(Of).scale(152.63)}function Lh(Ue,at){var Ht=p(Ue),It=Ue===at?x(Ue):(Ht-p(at))/(at-Ue),fr=Ht/It+Ue;if(d(It)<o)return Of;function Lr(qr,Zr){var nn=fr-Zr,An=It*qr;return[nn*x(An),fr-nn*p(An)]}return Lr.invert=function(qr,Zr){var nn=fr-Zr,An=T(qr,d(nn))*E(nn);return nn*It<0&&(An-=l*E(qr)*E(nn)),[An/It,fr-E(It)*S(qr*qr+nn*nn)]},Lr}function wd(){return Vs(Lh).scale(131.154).center([0,13.9389])}var Oo=1.340264,Jc=-.081106,kc=893e-6,Cc=.003796,Qc=S(3)/2,pf=12;function sc(Ue,at){var Ht=A(Qc*x(at)),It=Ht*Ht,fr=It*It*It;return[Ue*p(Ht)/(Qc*(Oo+3*Jc*It+fr*(7*kc+9*Cc*It))),Ht*(Oo+Jc*It+fr*(kc+Cc*It))]}sc.invert=function(Ue,at){for(var Ht=at,It=Ht*Ht,fr=It*It*It,Lr=0,qr,Zr,nn;Lr<pf&&(Zr=Ht*(Oo+Jc*It+fr*(kc+Cc*It))-at,nn=Oo+3*Jc*It+fr*(7*kc+9*Cc*It),Ht-=qr=Zr/nn,It=Ht*Ht,fr=It*It*It,!(d(qr)<s));++Lr);return[Qc*Ue*(Oo+3*Jc*It+fr*(7*kc+9*Cc*It))/p(Ht),A(x(Ht)/Qc)]};function Vv(){return ru(sc).scale(177.158)}function Hs(Ue,at){var Ht=p(at),It=p(Ue)*Ht;return[Ht*x(Ue)/It,x(at)/It]}Hs.invert=df(_);function vv(){return ru(Hs).scale(144.049).clipAngle(60)}function Bf(){var Ue=1,at=0,Ht=0,It=1,fr=1,Lr=0,qr,Zr,nn=null,An,Nr,tn,rn=1,wn=1,Gn=If({point:function($n,Ji){var ca=On([$n,Ji]);this.stream.point(ca[0],ca[1])}}),Oi=vl,Ii,Hi;function Ki(){return rn=Ue*It,wn=Ue*fr,Ii=Hi=null,On}function On($n){var Ji=$n[0]*rn,ca=$n[1]*wn;if(Lr){var Ka=ca*qr-Ji*Zr;Ji=Ji*qr+ca*Zr,ca=Ka}return[Ji+at,ca+Ht]}return On.invert=function($n){var Ji=$n[0]-at,ca=$n[1]-Ht;if(Lr){var Ka=ca*qr+Ji*Zr;Ji=Ji*qr-ca*Zr,ca=Ka}return[Ji/rn,ca/wn]},On.stream=function($n){return Ii&&Hi===$n?Ii:Ii=Gn(Oi(Hi=$n))},On.postclip=function($n){return arguments.length?(Oi=$n,nn=An=Nr=tn=null,Ki()):Oi},On.clipExtent=function($n){return arguments.length?(Oi=$n==null?(nn=An=Nr=tn=null,vl):Hn(nn=+$n[0][0],An=+$n[0][1],Nr=+$n[1][0],tn=+$n[1][1]),Ki()):nn==null?null:[[nn,An],[Nr,tn]]},On.scale=function($n){return arguments.length?(Ue=+$n,Ki()):Ue},On.translate=function($n){return arguments.length?(at=+$n[0],Ht=+$n[1],Ki()):[at,Ht]},On.angle=function($n){return arguments.length?(Lr=$n%360*v,Zr=x(Lr),qr=p(Lr),Ki()):Lr*h},On.reflectX=function($n){return arguments.length?(It=$n?-1:1,Ki()):It<0},On.reflectY=function($n){return arguments.length?(fr=$n?-1:1,Ki()):fr<0},On.fitExtent=function($n,Ji){return Ch(On,$n,Ji)},On.fitSize=function($n,Ji){return Vu(On,$n,Ji)},On.fitWidth=function($n,Ji){return Sc(On,$n,Ji)},On.fitHeight=function($n,Ji){return Ff(On,$n,Ji)},On}function Nf(Ue,at){var Ht=at*at,It=Ht*Ht;return[Ue*(.8707-.131979*Ht+It*(-.013791+It*(.003971*Ht-.001529*It))),at*(1.007226+Ht*(.015085+It*(-.044475+.028874*Ht-.005916*It)))]}Nf.invert=function(Ue,at){var Ht=at,It=25,fr;do{var Lr=Ht*Ht,qr=Lr*Lr;Ht-=fr=(Ht*(1.007226+Lr*(.015085+qr*(-.044475+.028874*Lr-.005916*qr)))-at)/(1.007226+Lr*(.015085*3+qr*(-.044475*7+.028874*9*Lr-.005916*11*qr)))}while(d(fr)>o&&--It>0);return[Ue/(.8707+(Lr=Ht*Ht)*(-.131979+Lr*(-.013791+Lr*Lr*Lr*(.003971-.001529*Lr)))),Ht]};function Uf(){return ru(Nf).scale(175.295)}function _s(Ue,at){return[p(at)*x(Ue),x(at)]}_s.invert=df(A);function pl(){return ru(_s).scale(249.5).clipAngle(90+o)}function Hu(Ue,at){var Ht=p(at),It=1+p(Ue)*Ht;return[Ht*x(Ue)/It,x(at)/It]}Hu.invert=df(function(Ue){return 2*_(Ue)});function Vf(){return ru(Hu).scale(250).clipAngle(142)}function Gu(Ue,at){return[w(g((u+at)/2)),-Ue]}Gu.invert=function(Ue,at){return[-at,2*_(b(Ue))-u]};function Ph(){var Ue=cv(Gu),at=Ue.center,Ht=Ue.rotate;return Ue.center=function(It){return arguments.length?at([-It[1],It[0]]):(It=at(),[It[1],-It[0]])},Ue.rotate=function(It){return arguments.length?Ht([It[0],It[1],It.length>2?It[2]+90:90]):(It=Ht(),[It[0],It[1],It[2]-90])},Ht([0,0,90]).scale(159.155)}e.geoAlbers=zs,e.geoAlbersUsa=Yd,e.geoArea=ie,e.geoAzimuthalEqualArea=Wd,e.geoAzimuthalEqualAreaRaw=nu,e.geoAzimuthalEquidistant=jc,e.geoAzimuthalEquidistantRaw=Zc,e.geoBounds=yt,e.geoCentroid=Nt,e.geoCircle=Mi,e.geoClipAntimeridian=ur,e.geoClipCircle=gn,e.geoClipExtent=qi,e.geoClipRectangle=Hn,e.geoConicConformal=Kc,e.geoConicConformalRaw=Uv,e.geoConicEqualArea=Dl,e.geoConicEqualAreaRaw=zf,e.geoConicEquidistant=wd,e.geoConicEquidistantRaw=Lh,e.geoContains=os,e.geoDistance=Eo,e.geoEqualEarth=Vv,e.geoEqualEarthRaw=sc,e.geoEquirectangular=Ec,e.geoEquirectangularRaw=Of,e.geoGnomonic=vv,e.geoGnomonicRaw=Hs,e.geoGraticule=ac,e.geoGraticule10=Pl,e.geoIdentity=Bf,e.geoInterpolate=ss,e.geoLength=il,e.geoMercator=Nv,e.geoMercatorRaw=Au,e.geoNaturalEarth1=Uf,e.geoNaturalEarth1Raw=Nf,e.geoOrthographic=pl,e.geoOrthographicRaw=_s,e.geoPath=bd,e.geoProjection=ru,e.geoProjectionMutator=qf,e.geoRotation=Wr,e.geoStereographic=Vf,e.geoStereographicRaw=Hu,e.geoStream=N,e.geoTransform=Hd,e.geoTransverseMercator=Ph,e.geoTransverseMercatorRaw=Gu,Object.defineProperty(e,"__esModule",{value:!0})})});var Q6e=ne((PD,J6e)=>{(function(e,t){typeof PD=="object"&&typeof J6e!="undefined"?t(PD,IY(),UE()):typeof define=="function"&&define.amd?define(["exports","d3-geo","d3-array"],t):t(e.d3=e.d3||{},e.d3,e.d3)})(PD,function(e,t,r){"use strict";var i=Math.abs,n=Math.atan,a=Math.atan2,o=Math.cos,s=Math.exp,l=Math.floor,u=Math.log,f=Math.max,c=Math.min,h=Math.pow,v=Math.round,d=Math.sign||function(ve){return ve>0?1:ve<0?-1:0},_=Math.sin,T=Math.tan,p=1e-6,M=1e-12,b=Math.PI,w=b/2,k=b/4,x=Math.SQRT1_2,E=O(2),S=O(b),g=b*2,C=180/b,A=b/180;function P(ve){return ve?ve/Math.sin(ve):1}function D(ve){return ve>1?w:ve<-1?-w:Math.asin(ve)}function z(ve){return ve>1?0:ve<-1?b:Math.acos(ve)}function O(ve){return ve>0?Math.sqrt(ve):0}function V(ve){return ve=s(2*ve),(ve-1)/(ve+1)}function B(ve){return(s(ve)-s(-ve))/2}function F(ve){return(s(ve)+s(-ve))/2}function N(ve){return u(ve+O(ve*ve+1))}function Z(ve){return u(ve+O(ve*ve-1))}function J(ve){var be=T(ve/2),Ce=2*u(o(ve/2))/(be*be);function De(He,Ve){var Qe=o(He),zt=o(Ve),jt=_(Ve),qt=zt*Qe,Qt=-((1-qt?u((1+qt)/2)/(1-qt):-.5)+Ce/(1+qt));return[Qt*zt*_(He),Qt*jt]}return De.invert=function(He,Ve){var Qe=O(He*He+Ve*Ve),zt=-ve/2,jt=50,qt;if(!Qe)return[0,0];do{var Qt=zt/2,ar=o(Qt),_r=_(Qt),Sr=_r/ar,Hr=-u(i(ar));zt-=qt=(2/Sr*Hr-Ce*Sr-Qe)/(-Hr/(_r*_r)+1-Ce/(2*ar*ar))*(ar<0?.7:1)}while(i(qt)>p&&--jt>0);var ln=_(zt);return[a(He*ln,Qe*o(zt)),D(Ve*ln/Qe)]},De}function re(){var ve=w,be=t.geoProjectionMutator(J),Ce=be(ve);return Ce.radius=function(De){return arguments.length?be(ve=De*A):ve*C},Ce.scale(179.976).clipAngle(147)}function ue(ve,be){var Ce=o(be),De=P(z(Ce*o(ve/=2)));return[2*Ce*_(ve)*De,_(be)*De]}ue.invert=function(ve,be){if(!(ve*ve+4*be*be>b*b+p)){var Ce=ve,De=be,He=25;do{var Ve=_(Ce),Qe=_(Ce/2),zt=o(Ce/2),jt=_(De),qt=o(De),Qt=_(2*De),ar=jt*jt,_r=qt*qt,Sr=Qe*Qe,Hr=1-_r*zt*zt,ln=Hr?z(qt*zt)*O(kn=1/Hr):kn=0,kn,yi=2*ln*qt*Qe-ve,Qi=ln*jt-be,ra=kn*(_r*Sr+ln*qt*zt*ar),sa=kn*(.5*Ve*Qt-ln*2*jt*Qe),pa=kn*.25*(Qt*Qe-ln*jt*_r*Ve),Lo=kn*(ar*zt+ln*Sr*qt),jo=sa*pa-Lo*ra;if(!jo)break;var ba=(Qi*sa-yi*Lo)/jo,qa=(yi*pa-Qi*ra)/jo;Ce-=ba,De-=qa}while((i(ba)>p||i(qa)>p)&&--He>0);return[Ce,De]}};function fe(){return t.geoProjection(ue).scale(152.63)}function K(ve){var be=_(ve),Ce=o(ve),De=ve>=0?1:-1,He=T(De*ve),Ve=(1+be-Ce)/2;function Qe(zt,jt){var qt=o(jt),Qt=o(zt/=2);return[(1+qt)*_(zt),(De*jt>-a(Qt,He)-.001?0:-De*10)+Ve+_(jt)*Ce-(1+qt)*be*Qt]}return Qe.invert=function(zt,jt){var qt=0,Qt=0,ar=50;do{var _r=o(qt),Sr=_(qt),Hr=o(Qt),ln=_(Qt),kn=1+Hr,yi=kn*Sr-zt,Qi=Ve+ln*Ce-kn*be*_r-jt,ra=kn*_r/2,sa=-Sr*ln,pa=be*kn*Sr/2,Lo=Ce*Hr+be*_r*ln,jo=sa*pa-Lo*ra,ba=(Qi*sa-yi*Lo)/jo/2,qa=(yi*pa-Qi*ra)/jo;i(qa)>2&&(qa/=2),qt-=ba,Qt-=qa}while((i(ba)>p||i(qa)>p)&&--ar>0);return De*Qt>-a(o(qt),He)-.001?[qt*2,Qt]:null},Qe}function X(){var ve=20*A,be=ve>=0?1:-1,Ce=T(be*ve),De=t.geoProjectionMutator(K),He=De(ve),Ve=He.stream;return He.parallel=function(Qe){return arguments.length?(Ce=T((be=(ve=Qe*A)>=0?1:-1)*ve),De(ve)):ve*C},He.stream=function(Qe){var zt=He.rotate(),jt=Ve(Qe),qt=(He.rotate([0,0]),Ve(Qe)),Qt=He.precision();return He.rotate(zt),jt.sphere=function(){qt.polygonStart(),qt.lineStart();for(var ar=be*-180;be*ar<180;ar+=be*90)qt.point(ar,be*90);if(ve)for(;be*(ar-=3*be*Qt)>=-180;)qt.point(ar,be*-a(o(ar*A/2),Ce)*C);qt.lineEnd(),qt.polygonEnd()},jt},He.scale(218.695).center([0,28.0974])}function ae(ve,be){var Ce=T(be/2),De=O(1-Ce*Ce),He=1+De*o(ve/=2),Ve=_(ve)*De/He,Qe=Ce/He,zt=Ve*Ve,jt=Qe*Qe;return[4/3*Ve*(3+zt-3*jt),4/3*Qe*(3+3*zt-jt)]}ae.invert=function(ve,be){if(ve*=3/8,be*=3/8,!ve&&i(be)>1)return null;var Ce=ve*ve,De=be*be,He=1+Ce+De,Ve=O((He-O(He*He-4*be*be))/2),Qe=D(Ve)/3,zt=Ve?Z(i(be/Ve))/3:N(i(ve))/3,jt=o(Qe),qt=F(zt),Qt=qt*qt-jt*jt;return[d(ve)*2*a(B(zt)*jt,.25-Qt),d(be)*2*a(qt*_(Qe),.25+Qt)]};function oe(){return t.geoProjection(ae).scale(66.1603)}var me=O(8),xe=u(1+E);function ce(ve,be){var Ce=i(be);return Ce<k?[ve,u(T(k+be/2))]:[ve*o(Ce)*(2*E-1/_(Ce)),d(be)*(2*E*(Ce-k)-u(T(Ce/2)))]}ce.invert=function(ve,be){if((Ve=i(be))<xe)return[ve,2*n(s(be))-w];var Ce=k,De=25,He,Ve;do{var Qe=o(Ce/2),zt=T(Ce/2);Ce-=He=(me*(Ce-k)-u(zt)-Ve)/(me-Qe*Qe/(2*zt))}while(i(He)>M&&--De>0);return[ve/(o(Ce)*(me-1/_(Ce))),d(be)*Ce]};function ie(){return t.geoProjection(ce).scale(112.314)}function ge(ve){var be=2*b/ve;function Ce(De,He){var Ve=t.geoAzimuthalEquidistantRaw(De,He);if(i(De)>w){var Qe=a(Ve[1],Ve[0]),zt=O(Ve[0]*Ve[0]+Ve[1]*Ve[1]),jt=be*v((Qe-w)/be)+w,qt=a(_(Qe-=jt),2-o(Qe));Qe=jt+D(b/zt*_(qt))-qt,Ve[0]=zt*o(Qe),Ve[1]=zt*_(Qe)}return Ve}return Ce.invert=function(De,He){var Ve=O(De*De+He*He);if(Ve>w){var Qe=a(He,De),zt=be*v((Qe-w)/be)+w,jt=Qe>zt?-1:1,qt=Ve*o(zt-Qe),Qt=1/T(jt*z((qt-b)/O(b*(b-2*qt)+Ve*Ve)));Qe=zt+2*n((Qt+jt*O(Qt*Qt-3))/3),De=Ve*o(Qe),He=Ve*_(Qe)}return t.geoAzimuthalEquidistantRaw.invert(De,He)},Ce}function le(){var ve=5,be=t.geoProjectionMutator(ge),Ce=be(ve),De=Ce.stream,He=.01,Ve=-o(He*A),Qe=_(He*A);return Ce.lobes=function(zt){return arguments.length?be(ve=+zt):ve},Ce.stream=function(zt){var jt=Ce.rotate(),qt=De(zt),Qt=(Ce.rotate([0,0]),De(zt));return Ce.rotate(jt),qt.sphere=function(){Qt.polygonStart(),Qt.lineStart();for(var ar=0,_r=360/ve,Sr=2*b/ve,Hr=90-180/ve,ln=w;ar<ve;++ar,Hr-=_r,ln-=Sr)Qt.point(a(Qe*o(ln),Ve)*C,D(Qe*_(ln))*C),Hr<-90?(Qt.point(-90,-180-Hr-He),Qt.point(-90,-180-Hr+He)):(Qt.point(90,Hr+He),Qt.point(90,Hr-He));Qt.lineEnd(),Qt.polygonEnd()},qt},Ce.scale(87.8076).center([0,17.1875]).clipAngle(180-.001)}function we(ve,be){if(arguments.length<2&&(be=ve),be===1)return t.geoAzimuthalEqualAreaRaw;if(be===1/0)return Re;function Ce(De,He){var Ve=t.geoAzimuthalEqualAreaRaw(De/be,He);return Ve[0]*=ve,Ve}return Ce.invert=function(De,He){var Ve=t.geoAzimuthalEqualAreaRaw.invert(De/ve,He);return Ve[0]*=be,Ve},Ce}function Re(ve,be){return[ve*o(be)/o(be/=2),2*_(be)]}Re.invert=function(ve,be){var Ce=2*D(be/2);return[ve*o(Ce/2)/o(Ce),Ce]};function qe(){var ve=2,be=t.geoProjectionMutator(we),Ce=be(ve);return Ce.coefficient=function(De){return arguments.length?be(ve=+De):ve},Ce.scale(169.529)}function et(ve,be,Ce){var De=100,He,Ve,Qe;Ce=Ce===void 0?0:+Ce,be=+be;do Ve=ve(Ce),Qe=ve(Ce+p),Ve===Qe&&(Qe=Ve+p),Ce-=He=-1*p*(Ve-be)/(Ve-Qe);while(De-- >0&&i(He)>p);return De<0?NaN:Ce}function Pe(ve,be,Ce){return be===void 0&&(be=40),Ce===void 0&&(Ce=M),function(De,He,Ve,Qe){var zt,jt,qt;Ve=Ve===void 0?0:+Ve,Qe=Qe===void 0?0:+Qe;for(var Qt=0;Qt<be;Qt++){var ar=ve(Ve,Qe),_r=ar[0]-De,Sr=ar[1]-He;if(i(_r)<Ce&&i(Sr)<Ce)break;var Hr=_r*_r+Sr*Sr;if(Hr>zt){Ve-=jt/=2,Qe-=qt/=2;continue}zt=Hr;var ln=(Ve>0?-1:1)*Ce,kn=(Qe>0?-1:1)*Ce,yi=ve(Ve+ln,Qe),Qi=ve(Ve,Qe+kn),ra=(yi[0]-ar[0])/ln,sa=(yi[1]-ar[1])/ln,pa=(Qi[0]-ar[0])/kn,Lo=(Qi[1]-ar[1])/kn,jo=Lo*ra-sa*pa,ba=(i(jo)<.5?.5:1)/jo;if(jt=(Sr*pa-_r*Lo)*ba,qt=(_r*sa-Sr*ra)*ba,Ve+=jt,Qe+=qt,i(jt)<Ce&&i(qt)<Ce)break}return[Ve,Qe]}}function Ie(){var ve=we(1.68,2),be=1.4,Ce=12;function De(He,Ve){if(He+Ve<-be){var Qe=(He-Ve+1.6)*(He+Ve+be)/8;He+=Qe,Ve-=.8*Qe*_(Ve+b/2)}var zt=ve(He,Ve),jt=(1-o(He*Ve))/Ce;return zt[1]<0&&(zt[0]*=1+jt),zt[1]>0&&(zt[1]*=1+jt/1.5*zt[0]*zt[0]),zt}return De.invert=Pe(De),De}function ut(){return t.geoProjection(Ie()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function ft(ve,be){var Ce=ve*_(be),De=30,He;do be-=He=(be+_(be)-Ce)/(1+o(be));while(i(He)>p&&--De>0);return be/2}function je(ve,be,Ce){function De(He,Ve){return[ve*He*o(Ve=ft(Ce,Ve)),be*_(Ve)]}return De.invert=function(He,Ve){return Ve=D(Ve/be),[He/(ve*o(Ve)),D((2*Ve+_(2*Ve))/Ce)]},De}var _t=je(E/w,E,b);function Bt(){return t.geoProjection(_t).scale(169.529)}var Lt=2.00276,Me=1.11072;function Ze(ve,be){var Ce=ft(b,be);return[Lt*ve/(1/o(be)+Me/o(Ce)),(be+E*_(Ce))/Lt]}Ze.invert=function(ve,be){var Ce=Lt*be,De=be<0?-k:k,He=25,Ve,Qe;do Qe=Ce-E*_(De),De-=Ve=(_(2*De)+2*De-b*_(Qe))/(2*o(2*De)+2+b*o(Qe)*E*o(De));while(i(Ve)>p&&--He>0);return Qe=Ce-E*_(De),[ve*(1/o(Qe)+Me/o(De))/Lt,Qe]};function dt(){return t.geoProjection(Ze).scale(160.857)}function it(ve){var be=0,Ce=t.geoProjectionMutator(ve),De=Ce(be);return De.parallel=function(He){return arguments.length?Ce(be=He*A):be*C},De}function vt(ve,be){return[ve*o(be),be]}vt.invert=function(ve,be){return[ve/o(be),be]};function rt(){return t.geoProjection(vt).scale(152.63)}function We(ve){if(!ve)return vt;var be=1/T(ve);function Ce(De,He){var Ve=be+ve-He,Qe=Ve&&De*o(He)/Ve;return[Ve*_(Qe),be-Ve*o(Qe)]}return Ce.invert=function(De,He){var Ve=O(De*De+(He=be-He)*He),Qe=be+ve-Ve;return[Ve/o(Qe)*a(De,He),Qe]},Ce}function ht(){return it(We).scale(123.082).center([0,26.1441]).parallel(45)}function mt(ve){function be(Ce,De){var He=w-De,Ve=He&&Ce*ve*_(He)/He;return[He*_(Ve)/ve,w-He*o(Ve)]}return be.invert=function(Ce,De){var He=Ce*ve,Ve=w-De,Qe=O(He*He+Ve*Ve),zt=a(He,Ve);return[(Qe?Qe/_(Qe):1)*zt/ve,w-Qe]},be}function er(){var ve=.5,be=t.geoProjectionMutator(mt),Ce=be(ve);return Ce.fraction=function(De){return arguments.length?be(ve=+De):ve},Ce.scale(158.837)}var $t=je(1,4/b,b);function cr(){return t.geoProjection($t).scale(152.63)}function or(ve,be,Ce,De,He,Ve){var Qe=o(Ve),zt;if(i(ve)>1||i(Ve)>1)zt=z(Ce*He+be*De*Qe);else{var jt=_(ve/2),qt=_(Ve/2);zt=2*D(O(jt*jt+be*De*qt*qt))}return i(zt)>p?[zt,a(De*_(Ve),be*He-Ce*De*Qe)]:[0,0]}function vr(ve,be,Ce){return z((ve*ve+be*be-Ce*Ce)/(2*ve*be))}function Ot(ve){return ve-2*b*l((ve+b)/(2*b))}function yt(ve,be,Ce){for(var De=[[ve[0],ve[1],_(ve[1]),o(ve[1])],[be[0],be[1],_(be[1]),o(be[1])],[Ce[0],Ce[1],_(Ce[1]),o(Ce[1])]],He=De[2],Ve,Qe=0;Qe<3;++Qe,He=Ve)Ve=De[Qe],He.v=or(Ve[1]-He[1],He[3],He[2],Ve[3],Ve[2],Ve[0]-He[0]),He.point=[0,0];var zt=vr(De[0].v[0],De[2].v[0],De[1].v[0]),jt=vr(De[0].v[0],De[1].v[0],De[2].v[0]),qt=b-zt;De[2].point[1]=0,De[0].point[0]=-(De[1].point[0]=De[0].v[0]/2);var Qt=[De[2].point[0]=De[0].point[0]+De[2].v[0]*o(zt),2*(De[0].point[1]=De[1].point[1]=De[2].v[0]*_(zt))];function ar(_r,Sr){var Hr=_(Sr),ln=o(Sr),kn=new Array(3),yi;for(yi=0;yi<3;++yi){var Qi=De[yi];if(kn[yi]=or(Sr-Qi[1],Qi[3],Qi[2],ln,Hr,_r-Qi[0]),!kn[yi][0])return Qi.point;kn[yi][1]=Ot(kn[yi][1]-Qi.v[1])}var ra=Qt.slice();for(yi=0;yi<3;++yi){var sa=yi==2?0:yi+1,pa=vr(De[yi].v[0],kn[yi][0],kn[sa][0]);kn[yi][1]<0&&(pa=-pa),yi?yi==1?(pa=jt-pa,ra[0]-=kn[yi][0]*o(pa),ra[1]-=kn[yi][0]*_(pa)):(pa=qt-pa,ra[0]+=kn[yi][0]*o(pa),ra[1]+=kn[yi][0]*_(pa)):(ra[0]+=kn[yi][0]*o(pa),ra[1]-=kn[yi][0]*_(pa))}return ra[0]/=3,ra[1]/=3,ra}return ar}function Et(ve){return ve[0]*=A,ve[1]*=A,ve}function Je(){return Ke([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Ke(ve,be,Ce){var De=t.geoCentroid({type:"MultiPoint",coordinates:[ve,be,Ce]}),He=[-De[0],-De[1]],Ve=t.geoRotation(He),Qe=yt(Et(Ve(ve)),Et(Ve(be)),Et(Ve(Ce)));Qe.invert=Pe(Qe);var zt=t.geoProjection(Qe).rotate(He),jt=zt.center;return delete zt.rotate,zt.center=function(qt){return arguments.length?jt(Ve(qt)):Ve.invert(jt())},zt.clipAngle(90)}function At(ve,be){var Ce=O(1-_(be));return[2/S*ve*Ce,S*(1-Ce)]}At.invert=function(ve,be){var Ce=(Ce=be/S-1)*Ce;return[Ce>0?ve*O(b/Ce)/2:0,D(1-Ce)]};function Ee(){return t.geoProjection(At).scale(95.6464).center([0,30])}function de(ve){var be=T(ve);function Ce(De,He){return[De,(De?De/_(De):1)*(_(He)*o(De)-be*o(He))]}return Ce.invert=be?function(De,He){De&&(He*=_(De)/De);var Ve=o(De);return[De,2*a(O(Ve*Ve+be*be-He*He)-Ve,be-He)]}:function(De,He){return[De,D(De?He*T(De)/De:He)]},Ce}function Te(){return it(de).scale(249.828).clipAngle(90)}var nt=O(3);function Mt(ve,be){return[nt*ve*(2*o(2*be/3)-1)/S,nt*S*_(be/3)]}Mt.invert=function(ve,be){var Ce=3*D(be/(nt*S));return[S*ve/(nt*(2*o(2*Ce/3)-1)),Ce]};function Kt(){return t.geoProjection(Mt).scale(156.19)}function Jt(ve){var be=o(ve);function Ce(De,He){return[De*be,_(He)/be]}return Ce.invert=function(De,He){return[De/be,D(He*be)]},Ce}function Fr(){return it(Jt).parallel(38.58).scale(195.044)}function Vr(ve){var be=o(ve);function Ce(De,He){return[De*be,(1+be)*T(He/2)]}return Ce.invert=function(De,He){return[De/be,n(He/(1+be))*2]},Ce}function mr(){return it(Vr).scale(124.75)}function zr(ve,be){var Ce=O(8/(3*b));return[Ce*ve*(1-i(be)/b),Ce*be]}zr.invert=function(ve,be){var Ce=O(8/(3*b)),De=be/Ce;return[ve/(Ce*(1-i(De)/b)),De]};function an(){return t.geoProjection(zr).scale(165.664)}function ni(ve,be){var Ce=O(4-3*_(i(be)));return[2/O(6*b)*ve*Ce,d(be)*O(2*b/3)*(2-Ce)]}ni.invert=function(ve,be){var Ce=2-i(be)/O(2*b/3);return[ve*O(6*b)/(2*Ce),d(be)*D((4-Ce*Ce)/3)]};function mn(){return t.geoProjection(ni).scale(165.664)}function fi(ve,be){var Ce=O(b*(4+b));return[2/Ce*ve*(1+O(1-4*be*be/(b*b))),4/Ce*be]}fi.invert=function(ve,be){var Ce=O(b*(4+b))/2;return[ve*Ce/(1+O(1-be*be*(4+b)/(4*b))),be*Ce/2]};function Wi(){return t.geoProjection(fi).scale(180.739)}function si(ve,be){var Ce=(2+w)*_(be);be/=2;for(var De=0,He=1/0;De<10&&i(He)>p;De++){var Ve=o(be);be-=He=(be+_(be)*(Ve+2)-Ce)/(2*Ve*(1+Ve))}return[2/O(b*(4+b))*ve*(1+o(be)),2*O(b/(4+b))*_(be)]}si.invert=function(ve,be){var Ce=be*O((4+b)/b)/2,De=D(Ce),He=o(De);return[ve/(2/O(b*(4+b))*(1+He)),D((De+Ce*(He+2))/(2+w))]};function Zi(){return t.geoProjection(si).scale(180.739)}function Ei(ve,be){return[ve*(1+o(be))/O(2+b),2*be/O(2+b)]}Ei.invert=function(ve,be){var Ce=O(2+b),De=be*Ce/2;return[Ce*ve/(1+o(De)),De]};function ot(){return t.geoProjection(Ei).scale(173.044)}function Be(ve,be){for(var Ce=(1+w)*_(be),De=0,He=1/0;De<10&&i(He)>p;De++)be-=He=(be+_(be)-Ce)/(1+o(be));return Ce=O(2+b),[ve*(1+o(be))/Ce,2*be/Ce]}Be.invert=function(ve,be){var Ce=1+w,De=O(Ce/2);return[ve*2*De/(1+o(be*=De)),D((be+_(be))/Ce)]};function lt(){return t.geoProjection(Be).scale(173.044)}var xt=3+2*E;function Nt(ve,be){var Ce=_(ve/=2),De=o(ve),He=O(o(be)),Ve=o(be/=2),Qe=_(be)/(Ve+E*De*He),zt=O(2/(1+Qe*Qe)),jt=O((E*Ve+(De+Ce)*He)/(E*Ve+(De-Ce)*He));return[xt*(zt*(jt-1/jt)-2*u(jt)),xt*(zt*Qe*(jt+1/jt)-2*n(Qe))]}Nt.invert=function(ve,be){if(!(Ve=ae.invert(ve/1.2,be*1.065)))return null;var Ce=Ve[0],De=Ve[1],He=20,Ve;ve/=xt,be/=xt;do{var Qe=Ce/2,zt=De/2,jt=_(Qe),qt=o(Qe),Qt=_(zt),ar=o(zt),_r=o(De),Sr=O(_r),Hr=Qt/(ar+E*qt*Sr),ln=Hr*Hr,kn=O(2/(1+ln)),yi=E*ar+(qt+jt)*Sr,Qi=E*ar+(qt-jt)*Sr,ra=yi/Qi,sa=O(ra),pa=sa-1/sa,Lo=sa+1/sa,jo=kn*pa-2*u(sa)-ve,ba=kn*Hr*Lo-2*n(Hr)-be,qa=Qt&&x*Sr*jt*ln/Qt,ds=(E*qt*ar+Sr)/(2*(ar+E*qt*Sr)*(ar+E*qt*Sr)*Sr),ol=-.5*Hr*kn*kn*kn,el=ol*qa,to=ol*ds,Ya=(Ya=2*ar+E*Sr*(qt-jt))*Ya*sa,Il=(E*qt*ar*Sr+_r)/Ya,Sl=-(E*jt*Qt)/(Sr*Ya),Su=pa*el-2*Il/sa+kn*(Il+Il/ra),su=pa*to-2*Sl/sa+kn*(Sl+Sl/ra),Fl=Hr*Lo*el-2*qa/(1+ln)+kn*Lo*qa+kn*Hr*(Il-Il/ra),El=Hr*Lo*to-2*ds/(1+ln)+kn*Lo*ds+kn*Hr*(Sl-Sl/ra),yf=su*Fl-El*Su;if(!yf)break;var Xu=(ba*su-jo*El)/yf,Zu=(jo*Fl-ba*Su)/yf;Ce-=Xu,De=f(-w,c(w,De-Zu))}while((i(Xu)>p||i(Zu)>p)&&--He>0);return i(i(De)-w)<p?[0,De]:He&&[Ce,De]};function nr(){return t.geoProjection(Nt).scale(62.5271)}var yr=o(35*A);function dr(ve,be){var Ce=T(be/2);return[ve*yr*O(1-Ce*Ce),(1+yr)*Ce]}dr.invert=function(ve,be){var Ce=be/(1+yr);return[ve&&ve/(yr*O(1-Ce*Ce)),2*n(Ce)]};function Rr(){return t.geoProjection(dr).scale(137.152)}function Gr(ve,be){var Ce=be/2,De=o(Ce);return[2*ve/S*o(be)*De*De,S*T(Ce)]}Gr.invert=function(ve,be){var Ce=n(be/S),De=o(Ce),He=2*Ce;return[ve*S/2/(o(He)*De*De),He]};function Yr(){return t.geoProjection(Gr).scale(135.264)}function dn(ve){var be=1-ve,Ce=Ve(b,0)[0]-Ve(-b,0)[0],De=Ve(0,w)[1]-Ve(0,-w)[1],He=O(2*De/Ce);function Ve(jt,qt){var Qt=o(qt),ar=_(qt);return[Qt/(be+ve*Qt)*jt,be*qt+ve*ar]}function Qe(jt,qt){var Qt=Ve(jt,qt);return[Qt[0]*He,Qt[1]/He]}function zt(jt){return Qe(0,jt)[1]}return Qe.invert=function(jt,qt){var Qt=et(zt,qt),ar=jt/He*(ve+be/o(Qt));return[ar,Qt]},Qe}function Wr(){var ve=.5,be=t.geoProjectionMutator(dn),Ce=be(ve);return Ce.alpha=function(De){return arguments.length?be(ve=+De):ve},Ce.scale(168.725)}function qn(ve){return[ve[0]/2,D(T(ve[1]/2*A))*C]}function vi(ve){return[ve[0]*2,2*n(_(ve[1]*A))*C]}function Mi(ve){ve==null&&(ve=t.geoOrthographic);var be=ve(),Ce=t.geoEquirectangular().scale(C).precision(0).clipAngle(null).translate([0,0]);function De(Ve){return be(qn(Ve))}be.invert&&(De.invert=function(Ve){return vi(be.invert(Ve))}),De.stream=function(Ve){var Qe=be.stream(Ve),zt=Ce.stream({point:function(jt,qt){Qe.point(jt/2,D(T(-qt/2*A))*C)},lineStart:function(){Qe.lineStart()},lineEnd:function(){Qe.lineEnd()},polygonStart:function(){Qe.polygonStart()},polygonEnd:function(){Qe.polygonEnd()}});return zt.sphere=Qe.sphere,zt};function He(Ve){De[Ve]=function(){return arguments.length?(be[Ve].apply(be,arguments),De):be[Ve]()}}return De.rotate=function(Ve){return arguments.length?(Ce.rotate(Ve),De):Ce.rotate()},De.center=function(Ve){return arguments.length?(be.center(qn(Ve)),De):vi(be.center())},He("angle"),He("clipAngle"),He("clipExtent"),He("fitExtent"),He("fitHeight"),He("fitSize"),He("fitWidth"),He("scale"),He("translate"),He("precision"),De.scale(249.5)}function Ui(ve,be){var Ce=2*b/be,De=ve*ve;function He(Ve,Qe){var zt=t.geoAzimuthalEquidistantRaw(Ve,Qe),jt=zt[0],qt=zt[1],Qt=jt*jt+qt*qt;if(Qt>De){var ar=O(Qt),_r=a(qt,jt),Sr=Ce*v(_r/Ce),Hr=_r-Sr,ln=ve*o(Hr),kn=(ve*_(Hr)-Hr*_(ln))/(w-ln),yi=ji(Hr,kn),Qi=(b-ve)/ea(yi,ln,b);jt=ar;var ra=50,sa;do jt-=sa=(ve+ea(yi,ln,jt)*Qi-ar)/(yi(jt)*Qi);while(i(sa)>p&&--ra>0);qt=Hr*_(jt),jt<w&&(qt-=kn*(jt-w));var pa=_(Sr),Lo=o(Sr);zt[0]=jt*Lo-qt*pa,zt[1]=jt*pa+qt*Lo}return zt}return He.invert=function(Ve,Qe){var zt=Ve*Ve+Qe*Qe;if(zt>De){var jt=O(zt),qt=a(Qe,Ve),Qt=Ce*v(qt/Ce),ar=qt-Qt;Ve=jt*o(ar),Qe=jt*_(ar);for(var _r=Ve-w,Sr=_(Ve),Hr=Qe/Sr,ln=Ve<w?1/0:0,kn=10;;){var yi=ve*_(Hr),Qi=ve*o(Hr),ra=_(Qi),sa=w-Qi,pa=(yi-Hr*ra)/sa,Lo=ji(Hr,pa);if(i(ln)<M||!--kn)break;Hr-=ln=(Hr*Sr-pa*_r-Qe)/(Sr-_r*2*(sa*(Qi+Hr*yi*o(Qi)-ra)-yi*(yi-Hr*ra))/(sa*sa))}jt=ve+ea(Lo,Qi,Ve)*(b-ve)/ea(Lo,Qi,b),qt=Qt+Hr,Ve=jt*o(qt),Qe=jt*_(qt)}return t.geoAzimuthalEquidistantRaw.invert(Ve,Qe)},He}function ji(ve,be){return function(Ce){var De=ve*o(Ce);return Ce<w&&(De-=be),O(1+De*De)}}function ea(ve,be,Ce){for(var De=50,He=(Ce-be)/De,Ve=ve(be)+ve(Ce),Qe=1,zt=be;Qe<De;++Qe)Ve+=2*ve(zt+=He);return Ve*.5*He}function Ra(){var ve=6,be=30*A,Ce=o(be),De=_(be),He=t.geoProjectionMutator(Ui),Ve=He(be,ve),Qe=Ve.stream,zt=.01,jt=-o(zt*A),qt=_(zt*A);return Ve.radius=function(Qt){return arguments.length?(Ce=o(be=Qt*A),De=_(be),He(be,ve)):be*C},Ve.lobes=function(Qt){return arguments.length?He(be,ve=+Qt):ve},Ve.stream=function(Qt){var ar=Ve.rotate(),_r=Qe(Qt),Sr=(Ve.rotate([0,0]),Qe(Qt));return Ve.rotate(ar),_r.sphere=function(){Sr.polygonStart(),Sr.lineStart();for(var Hr=0,ln=2*b/ve,kn=0;Hr<ve;++Hr,kn-=ln)Sr.point(a(qt*o(kn),jt)*C,D(qt*_(kn))*C),Sr.point(a(De*o(kn-ln/2),Ce)*C,D(De*_(kn-ln/2))*C);Sr.lineEnd(),Sr.polygonEnd()},_r},Ve.rotate([90,-40]).scale(91.7095).clipAngle(180-.001)}function Li(ve,be,Ce,De,He,Ve,Qe,zt){arguments.length<8&&(zt=0);function jt(qt,Qt){if(!Qt)return[ve*qt/b,0];var ar=Qt*Qt,_r=ve+ar*(be+ar*(Ce+ar*De)),Sr=Qt*(He-1+ar*(Ve-zt+ar*Qe)),Hr=(_r*_r+Sr*Sr)/(2*Sr),ln=qt*D(_r/Hr)/b;return[Hr*_(ln),Qt*(1+ar*zt)+Hr*(1-o(ln))]}return jt.invert=function(qt,Qt){var ar=b*qt/ve,_r=Qt,Sr,Hr,ln=50;do{var kn=_r*_r,yi=ve+kn*(be+kn*(Ce+kn*De)),Qi=_r*(He-1+kn*(Ve-zt+kn*Qe)),ra=yi*yi+Qi*Qi,sa=2*Qi,pa=ra/sa,Lo=pa*pa,jo=D(yi/pa)/b,ba=ar*jo,qa=yi*yi,ds=(2*be+kn*(4*Ce+kn*6*De))*_r,ol=He+kn*(3*Ve+kn*5*Qe),el=2*(yi*ds+Qi*(ol-1)),to=2*(ol-1),Ya=(el*sa-ra*to)/(sa*sa),Il=o(ba),Sl=_(ba),Su=pa*Il,su=pa*Sl,Fl=ar/b*(1/O(1-qa/Lo))*(ds*pa-yi*Ya)/Lo,El=su-qt,yf=_r*(1+kn*zt)+pa-Su-Qt,Xu=Ya*Sl+Su*Fl,Zu=Su*jo,U=1+Ya-(Ya*Il-su*Fl),Q=su*jo,se=Xu*Q-U*Zu;if(!se)break;ar-=Sr=(yf*Xu-El*U)/se,_r-=Hr=(El*Q-yf*Zu)/se}while((i(Sr)>p||i(Hr)>p)&&--ln>0);return[ar,_r]},jt}var Yn=Li(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function zi(){return t.geoProjection(Yn).scale(149.995)}var ya=Li(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function zn(){return t.geoProjection(ya).scale(153.93)}var Xe=Li(5/6*b,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Ut(){return t.geoProjection(Xe).scale(130.945)}function ur(ve,be){var Ce=ve*ve,De=be*be;return[ve*(1-.162388*De)*(.87-952426e-9*Ce*Ce),be*(1+De/12)]}ur.invert=function(ve,be){var Ce=ve,De=be,He=50,Ve;do{var Qe=De*De;De-=Ve=(De*(1+Qe/12)-be)/(1+Qe/4)}while(i(Ve)>p&&--He>0);He=50,ve/=1-.162388*Qe;do{var zt=(zt=Ce*Ce)*zt;Ce-=Ve=(Ce*(.87-952426e-9*zt)-ve)/(.87-.00476213*zt)}while(i(Ve)>p&&--He>0);return[Ce,De]};function br(){return t.geoProjection(ur).scale(131.747)}var Jr=Li(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function sn(){return t.geoProjection(Jr).scale(131.087)}function gn(ve){var be=ve(w,0)[0]-ve(-w,0)[0];function Ce(De,He){var Ve=De>0?-.5:.5,Qe=ve(De+Ve*b,He);return Qe[0]-=Ve*be,Qe}return ve.invert&&(Ce.invert=function(De,He){var Ve=De>0?-.5:.5,Qe=ve.invert(De+Ve*be,He),zt=Qe[0]-Ve*b;return zt<-b?zt+=2*b:zt>b&&(zt-=2*b),Qe[0]=zt,Qe}),Ce}function Cr(ve,be){var Ce=d(ve),De=d(be),He=o(be),Ve=o(ve)*He,Qe=_(ve)*He,zt=_(De*be);ve=i(a(Qe,zt)),be=D(Ve),i(ve-w)>p&&(ve%=w);var jt=hn(ve>b/4?w-ve:ve,be);return ve>b/4&&(zt=jt[0],jt[0]=-jt[1],jt[1]=-zt),jt[0]*=Ce,jt[1]*=-De,jt}Cr.invert=function(ve,be){i(ve)>1&&(ve=d(ve)*2-ve),i(be)>1&&(be=d(be)*2-be);var Ce=d(ve),De=d(be),He=-Ce*ve,Ve=-De*be,Qe=Ve/He<1,zt=gi(Qe?Ve:He,Qe?He:Ve),jt=zt[0],qt=zt[1],Qt=o(qt);return Qe&&(jt=-w-jt),[Ce*(a(_(jt)*Qt,-_(qt))+b),De*D(o(jt)*Qt)]};function hn(ve,be){if(be===w)return[0,0];var Ce=_(be),De=Ce*Ce,He=De*De,Ve=1+He,Qe=1+3*He,zt=1-He,jt=D(1/O(Ve)),qt=zt+De*Ve*jt,Qt=(1-Ce)/qt,ar=O(Qt),_r=Qt*Ve,Sr=O(_r),Hr=ar*zt,ln,kn;if(ve===0)return[0,-(Hr+De*Sr)];var yi=o(be),Qi=1/yi,ra=2*Ce*yi,sa=(-3*De+jt*Qe)*ra,pa=(-qt*yi-(1-Ce)*sa)/(qt*qt),Lo=.5*pa/ar,jo=zt*Lo-2*De*ar*ra,ba=De*Ve*pa+Qt*Qe*ra,qa=-Qi*ra,ds=-Qi*ba,ol=-2*Qi*jo,el=4*ve/b,to;if(ve>.222*b||be<b/4&&ve>.175*b){if(ln=(Hr+De*O(_r*(1+He)-Hr*Hr))/(1+He),ve>b/4)return[ln,ln];var Ya=ln,Il=.5*ln;ln=.5*(Il+Ya),kn=50;do{var Sl=O(_r-ln*ln),Su=ln*(ol+qa*Sl)+ds*D(ln/Sr)-el;if(!Su)break;Su<0?Il=ln:Ya=ln,ln=.5*(Il+Ya)}while(i(Ya-Il)>p&&--kn>0)}else{ln=p,kn=25;do{var su=ln*ln,Fl=O(_r-su),El=ol+qa*Fl,yf=ln*El+ds*D(ln/Sr)-el,Xu=El+(ds-qa*su)/Fl;ln-=to=Fl?yf/Xu:0}while(i(to)>p&&--kn>0)}return[ln,-Hr-De*O(_r-ln*ln)]}function gi(ve,be){for(var Ce=0,De=1,He=.5,Ve=50;;){var Qe=He*He,zt=O(He),jt=D(1/O(1+Qe)),qt=1-Qe+He*(1+Qe)*jt,Qt=(1-zt)/qt,ar=O(Qt),_r=Qt*(1+Qe),Sr=ar*(1-Qe),Hr=_r-ve*ve,ln=O(Hr),kn=be+Sr+He*ln;if(i(De-Ce)<M||--Ve===0||kn===0)break;kn>0?Ce=He:De=He,He=.5*(Ce+De)}if(!Ve)return null;var yi=D(zt),Qi=o(yi),ra=1/Qi,sa=2*zt*Qi,pa=(-3*He+jt*(1+3*Qe))*sa,Lo=(-qt*Qi-(1-zt)*pa)/(qt*qt),jo=.5*Lo/ar,ba=(1-Qe)*jo-2*He*ar*sa,qa=-2*ra*ba,ds=-ra*sa,ol=-ra*(He*(1+Qe)*Lo+Qt*(1+3*Qe)*sa);return[b/4*(ve*(qa+ds*ln)+ol*D(ve/O(_r))),yi]}function Hn(){return t.geoProjection(gn(Cr)).scale(239.75)}function qi(ve,be,Ce){var De,He,Ve;return ve?(De=fa(ve,Ce),be?(He=fa(be,1-Ce),Ve=He[1]*He[1]+Ce*De[0]*De[0]*He[0]*He[0],[[De[0]*He[2]/Ve,De[1]*De[2]*He[0]*He[1]/Ve],[De[1]*He[1]/Ve,-De[0]*De[2]*He[0]*He[2]/Ve],[De[2]*He[1]*He[2]/Ve,-Ce*De[0]*De[1]*He[0]/Ve]]):[[De[0],0],[De[1],0],[De[2],0]]):(He=fa(be,1-Ce),[[0,He[0]/He[1]],[1/He[1],0],[He[2]/He[1],0]])}function fa(ve,be){var Ce,De,He,Ve,Qe;if(be<p)return Ve=_(ve),De=o(ve),Ce=be*(ve-Ve*De)/4,[Ve-Ce*De,De+Ce*Ve,1-be*Ve*Ve/2,ve-Ce];if(be>=1-p)return Ce=(1-be)/4,De=F(ve),Ve=V(ve),He=1/De,Qe=De*B(ve),[Ve+Ce*(Qe-ve)/(De*De),He-Ce*Ve*He*(Qe-ve),He+Ce*Ve*He*(Qe+ve),2*n(s(ve))-w+Ce*(Qe-ve)/De];var zt=[1,0,0,0,0,0,0,0,0],jt=[O(be),0,0,0,0,0,0,0,0],qt=0;for(De=O(1-be),Qe=1;i(jt[qt]/zt[qt])>p&&qt<8;)Ce=zt[qt++],jt[qt]=(Ce-De)/2,zt[qt]=(Ce+De)/2,De=O(Ce*De),Qe*=2;He=Qe*zt[qt]*ve;do Ve=jt[qt]*_(De=He)/zt[qt],He=(D(Ve)+He)/2;while(--qt);return[_(He),Ve=o(He),Ve/o(He-De),He]}function eo(ve,be,Ce){var De=i(ve),He=i(be),Ve=B(He);if(De){var Qe=1/_(De),zt=1/(T(De)*T(De)),jt=-(zt+Ce*(Ve*Ve*Qe*Qe)-1+Ce),qt=(Ce-1)*zt,Qt=(-jt+O(jt*jt-4*qt))/2;return[ma(n(1/O(Qt)),Ce)*d(ve),ma(n(O((Qt/zt-1)/Ce)),1-Ce)*d(be)]}return[0,ma(n(Ve),1-Ce)*d(be)]}function ma(ve,be){if(!be)return ve;if(be===1)return u(T(ve/2+k));for(var Ce=1,De=O(1-be),He=O(be),Ve=0;i(He)>p;Ve++){if(ve%b){var Qe=n(De*T(ve)/Ce);Qe<0&&(Qe+=b),ve+=Qe+~~(ve/b)*b}else ve+=ve;He=(Ce+De)/2,De=O(Ce*De),He=((Ce=He)-De)/2}return ve/(h(2,Ve)*Ce)}function so(ve,be){var Ce=(E-1)/(E+1),De=O(1-Ce*Ce),He=ma(w,De*De),Ve=-1,Qe=u(T(b/4+i(be)/2)),zt=s(Ve*Qe)/O(Ce),jt=ja(zt*o(Ve*ve),zt*_(Ve*ve)),qt=eo(jt[0],jt[1],De*De);return[-qt[1],(be>=0?1:-1)*(.5*He-qt[0])]}function ja(ve,be){var Ce=ve*ve,De=be+1,He=1-Ce-be*be;return[.5*((ve>=0?w:-w)-a(He,2*ve)),-.25*u(He*He+4*Ce)+.5*u(De*De+Ce)]}function Xo(ve,be){var Ce=be[0]*be[0]+be[1]*be[1];return[(ve[0]*be[0]+ve[1]*be[1])/Ce,(ve[1]*be[0]-ve[0]*be[1])/Ce]}so.invert=function(ve,be){var Ce=(E-1)/(E+1),De=O(1-Ce*Ce),He=ma(w,De*De),Ve=-1,Qe=qi(.5*He-be,-ve,De*De),zt=Xo(Qe[0],Qe[1]),jt=a(zt[1],zt[0])/Ve;return[jt,2*n(s(.5/Ve*u(Ce*zt[0]*zt[0]+Ce*zt[1]*zt[1])))-w]};function Uo(){return t.geoProjection(gn(so)).scale(151.496)}function ms(ve){var be=_(ve),Ce=o(ve),De=as(ve);De.invert=as(-ve);function He(Ve,Qe){var zt=De(Ve,Qe);Ve=zt[0],Qe=zt[1];var jt=_(Qe),qt=o(Qe),Qt=o(Ve),ar=z(be*jt+Ce*qt*Qt),_r=_(ar),Sr=i(_r)>p?ar/_r:1;return[Sr*Ce*_(Ve),(i(Ve)>w?Sr:-Sr)*(be*qt-Ce*jt*Qt)]}return He.invert=function(Ve,Qe){var zt=O(Ve*Ve+Qe*Qe),jt=-_(zt),qt=o(zt),Qt=zt*qt,ar=-Qe*jt,_r=zt*be,Sr=O(Qt*Qt+ar*ar-_r*_r),Hr=a(Qt*_r+ar*Sr,ar*_r-Qt*Sr),ln=(zt>w?-1:1)*a(Ve*jt,zt*o(Hr)*qt+Qe*_(Hr)*jt);return De.invert(ln,Hr)},He}function as(ve){var be=_(ve),Ce=o(ve);return function(De,He){var Ve=o(He),Qe=o(De)*Ve,zt=_(De)*Ve,jt=_(He);return[a(zt,Qe*Ce-jt*be),D(jt*Ce+Qe*be)]}}function il(){var ve=0,be=t.geoProjectionMutator(ms),Ce=be(ve),De=Ce.rotate,He=Ce.stream,Ve=t.geoCircle();return Ce.parallel=function(Qe){if(!arguments.length)return ve*C;var zt=Ce.rotate();return be(ve=Qe*A).rotate(zt)},Ce.rotate=function(Qe){return arguments.length?(De.call(Ce,[Qe[0],Qe[1]-ve*C]),Ve.center([-Qe[0],-Qe[1]]),Ce):(Qe=De.call(Ce),Qe[1]+=ve*C,Qe)},Ce.stream=function(Qe){return Qe=He(Qe),Qe.sphere=function(){Qe.polygonStart();var zt=.01,jt=Ve.radius(90-zt)().coordinates[0],qt=jt.length-1,Qt=-1,ar;for(Qe.lineStart();++Qt<qt;)Qe.point((ar=jt[Qt])[0],ar[1]);for(Qe.lineEnd(),jt=Ve.radius(90+zt)().coordinates[0],qt=jt.length-1,Qe.lineStart();--Qt>=0;)Qe.point((ar=jt[Qt])[0],ar[1]);Qe.lineEnd(),Qe.polygonEnd()},Qe},Ce.scale(79.4187).parallel(45).clipAngle(180-.001)}var oo=3,cs=D(1-1/oo)*C,Eo=Jt(0);function hs(ve){var be=cs*A,Ce=At(b,be)[0]-At(-b,be)[0],De=Eo(0,be)[1],He=At(0,be)[1],Ve=S-He,Qe=g/ve,zt=4/g,jt=De+Ve*Ve*4/g;function qt(Qt,ar){var _r,Sr=i(ar);if(Sr>be){var Hr=c(ve-1,f(0,l((Qt+b)/Qe)));Qt+=b*(ve-1)/ve-Hr*Qe,_r=At(Qt,Sr),_r[0]=_r[0]*g/Ce-g*(ve-1)/(2*ve)+Hr*g/ve,_r[1]=De+(_r[1]-He)*4*Ve/g,ar<0&&(_r[1]=-_r[1])}else _r=Eo(Qt,ar);return _r[0]*=zt,_r[1]/=jt,_r}return qt.invert=function(Qt,ar){Qt/=zt,ar*=jt;var _r=i(ar);if(_r>De){var Sr=c(ve-1,f(0,l((Qt+b)/Qe)));Qt=(Qt+b*(ve-1)/ve-Sr*Qe)*Ce/g;var Hr=At.invert(Qt,.25*(_r-De)*g/Ve+He);return Hr[0]-=b*(ve-1)/ve-Sr*Qe,ar<0&&(Hr[1]=-Hr[1]),Hr}return Eo.invert(Qt,ar)},qt}function Jo(ve,be){return[ve,be&1?90-p:cs]}function Qo(ve,be){return[ve,be&1?-90+p:-cs]}function Oa(ve){return[ve[0]*(1-p),ve[1]]}function co(ve){var be=[].concat(r.range(-180,180+ve/2,ve).map(Jo),r.range(180,-180-ve/2,-ve).map(Qo));return{type:"Polygon",coordinates:[ve===180?be.map(Oa):be]}}function Al(){var ve=4,be=t.geoProjectionMutator(hs),Ce=be(ve),De=Ce.stream;return Ce.lobes=function(He){return arguments.length?be(ve=+He):ve},Ce.stream=function(He){var Ve=Ce.rotate(),Qe=De(He),zt=(Ce.rotate([0,0]),De(He));return Ce.rotate(Ve),Qe.sphere=function(){t.geoStream(co(180/ve),zt)},Qe},Ce.scale(239.75)}function $l(ve){var be=1+ve,Ce=_(1/be),De=D(Ce),He=2*O(b/(Ve=b+4*De*be)),Ve,Qe=.5*He*(be+O(ve*(2+ve))),zt=ve*ve,jt=be*be;function qt(Qt,ar){var _r=1-_(ar),Sr,Hr;if(_r&&_r<2){var ln=w-ar,kn=25,yi;do{var Qi=_(ln),ra=o(ln),sa=De+a(Qi,be-ra),pa=1+jt-2*be*ra;ln-=yi=(ln-zt*De-be*Qi+pa*sa-.5*_r*Ve)/(2*be*Qi*sa)}while(i(yi)>M&&--kn>0);Sr=He*O(pa),Hr=Qt*sa/b}else Sr=He*(ve+_r),Hr=Qt*De/b;return[Sr*_(Hr),Qe-Sr*o(Hr)]}return qt.invert=function(Qt,ar){var _r=Qt*Qt+(ar-=Qe)*ar,Sr=(1+jt-_r/(He*He))/(2*be),Hr=z(Sr),ln=_(Hr),kn=De+a(ln,be-Sr);return[D(Qt/O(_r))*b/kn,D(1-2*(Hr-zt*De-be*ln+(1+jt-2*be*Sr)*kn)/Ve)]},qt}function Nu(){var ve=1,be=t.geoProjectionMutator($l),Ce=be(ve);return Ce.ratio=function(De){return arguments.length?be(ve=+De):ve},Ce.scale(167.774).center([0,18.67])}var os=.7109889596207567,vn=.0528035274542;function bi(ve,be){return be>-os?(ve=_t(ve,be),ve[1]+=vn,ve):vt(ve,be)}bi.invert=function(ve,be){return be>-os?_t.invert(ve,be-vn):vt.invert(ve,be)};function ac(){return t.geoProjection(bi).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function Pl(ve,be){return i(be)>os?(ve=_t(ve,be),ve[1]-=be>0?vn:-vn,ve):vt(ve,be)}Pl.invert=function(ve,be){return i(be)>os?_t.invert(ve,be+(be>0?vn:-vn)):vt.invert(ve,be)};function ss(){return t.geoProjection(Pl).scale(152.63)}function vl(ve,be,Ce,De){var He=O(4*b/(2*Ce+(1+ve-be/2)*_(2*Ce)+(ve+be)/2*_(4*Ce)+be/2*_(6*Ce))),Ve=O(De*_(Ce)*O((1+ve*o(2*Ce)+be*o(4*Ce))/(1+ve+be))),Qe=Ce*jt(1);function zt(ar){return O(1+ve*o(2*ar)+be*o(4*ar))}function jt(ar){var _r=ar*Ce;return(2*_r+(1+ve-be/2)*_(2*_r)+(ve+be)/2*_(4*_r)+be/2*_(6*_r))/Ce}function qt(ar){return zt(ar)*_(ar)}var Qt=function(ar,_r){var Sr=Ce*et(jt,Qe*_(_r)/Ce,_r/b);isNaN(Sr)&&(Sr=Ce*d(_r));var Hr=He*zt(Sr);return[Hr*Ve*ar/b*o(Sr),Hr/Ve*_(Sr)]};return Qt.invert=function(ar,_r){var Sr=et(qt,_r*Ve/He);return[ar*b/(o(Sr)*He*Ve*zt(Sr)),D(Ce*jt(Sr/Ce)/Qe)]},Ce===0&&(He=O(De/b),Qt=function(ar,_r){return[ar*He,_(_r)/He]},Qt.invert=function(ar,_r){return[ar/He,D(_r*He)]}),Qt}function $o(){var ve=1,be=0,Ce=45*A,De=2,He=t.geoProjectionMutator(vl),Ve=He(ve,be,Ce,De);return Ve.a=function(Qe){return arguments.length?He(ve=+Qe,be,Ce,De):ve},Ve.b=function(Qe){return arguments.length?He(ve,be=+Qe,Ce,De):be},Ve.psiMax=function(Qe){return arguments.length?He(ve,be,Ce=+Qe*A,De):Ce*C},Ve.ratio=function(Qe){return arguments.length?He(ve,be,Ce,De=+Qe):De},Ve.scale(180.739)}function Rl(ve,be,Ce,De,He,Ve,Qe,zt,jt,qt,Qt){if(Qt.nanEncountered)return NaN;var ar,_r,Sr,Hr,ln,kn,yi,Qi,ra,sa;if(ar=Ce-be,_r=ve(be+ar*.25),Sr=ve(Ce-ar*.25),isNaN(_r)){Qt.nanEncountered=!0;return}if(isNaN(Sr)){Qt.nanEncountered=!0;return}return Hr=ar*(De+4*_r+He)/12,ln=ar*(He+4*Sr+Ve)/12,kn=Hr+ln,sa=(kn-Qe)/15,qt>jt?(Qt.maxDepthCount++,kn+sa):Math.abs(sa)<zt?kn+sa:(yi=be+ar*.5,Qi=Rl(ve,be,yi,De,_r,He,Hr,zt*.5,jt,qt+1,Qt),isNaN(Qi)?(Qt.nanEncountered=!0,NaN):(ra=Rl(ve,yi,Ce,He,Sr,Ve,ln,zt*.5,jt,qt+1,Qt),isNaN(ra)?(Qt.nanEncountered=!0,NaN):Qi+ra))}function xu(ve,be,Ce,De,He){var Ve={maxDepthCount:0,nanEncountered:!1};De===void 0&&(De=1e-8),He===void 0&&(He=20);var Qe=ve(be),zt=ve(.5*(be+Ce)),jt=ve(Ce),qt=(Qe+4*zt+jt)*(Ce-be)/6,Qt=Rl(ve,be,Ce,Qe,zt,jt,qt,De,He,1,Ve);return Qt}function ii(ve,be,Ce){function De(Sr){return ve+(1-ve)*h(1-h(Sr,be),1/be)}function He(Sr){return xu(De,0,Sr,1e-4)}for(var Ve=1/He(1),Qe=1e3,zt=(1+1e-8)*Ve,jt=[],qt=0;qt<=Qe;qt++)jt.push(He(qt/Qe)*zt);function Qt(Sr){var Hr=0,ln=Qe,kn=Qe>>1;do jt[kn]>Sr?ln=kn:Hr=kn,kn=Hr+ln>>1;while(kn>Hr);var yi=jt[kn+1]-jt[kn];return yi&&(yi=(Sr-jt[kn+1])/yi),(kn+1+yi)/Qe}var ar=2*Qt(1)/b*Ve/Ce,_r=function(Sr,Hr){var ln=Qt(i(_(Hr))),kn=De(ln)*Sr;return ln/=ar,[kn,Hr>=0?ln:-ln]};return _r.invert=function(Sr,Hr){var ln;return Hr*=ar,i(Hr)<1&&(ln=d(Hr)*D(He(i(Hr))*Ve)),[Sr/De(i(Hr)),ln]},_r}function Aa(){var ve=0,be=2.5,Ce=1.183136,De=t.geoProjectionMutator(ii),He=De(ve,be,Ce);return He.alpha=function(Ve){return arguments.length?De(ve=+Ve,be,Ce):ve},He.k=function(Ve){return arguments.length?De(ve,be=+Ve,Ce):be},He.gamma=function(Ve){return arguments.length?De(ve,be,Ce=+Ve):Ce},He.scale(152.63)}function Ca(ve,be){return i(ve[0]-be[0])<p&&i(ve[1]-be[1])<p}function Fs(ve,be){for(var Ce=-1,De=ve.length,He=ve[0],Ve,Qe,zt,jt=[];++Ce<De;){Ve=ve[Ce],Qe=(Ve[0]-He[0])/be,zt=(Ve[1]-He[1])/be;for(var qt=0;qt<be;++qt)jt.push([He[0]+qt*Qe,He[1]+qt*zt]);He=Ve}return jt.push(Ve),jt}function Pf(ve){var be=[],Ce,De,He,Ve,Qe,zt,jt,qt=ve[0].length;for(jt=0;jt<qt;++jt)Ce=ve[0][jt],De=Ce[0][0],He=Ce[0][1],Ve=Ce[1][1],Qe=Ce[2][0],zt=Ce[2][1],be.push(Fs([[De+p,He+p],[De+p,Ve-p],[Qe-p,Ve-p],[Qe-p,zt+p]],30));for(jt=ve[1].length-1;jt>=0;--jt)Ce=ve[1][jt],De=Ce[0][0],He=Ce[0][1],Ve=Ce[1][1],Qe=Ce[2][0],zt=Ce[2][1],be.push(Fs([[Qe-p,zt-p],[Qe-p,Ve+p],[De+p,Ve+p],[De+p,He-p]],30));return{type:"Polygon",coordinates:[r.merge(be)]}}function Ma(ve,be,Ce){var De,He;function Ve(jt,qt){for(var Qt=qt<0?-1:1,ar=be[+(qt<0)],_r=0,Sr=ar.length-1;_r<Sr&&jt>ar[_r][2][0];++_r);var Hr=ve(jt-ar[_r][1][0],qt);return Hr[0]+=ve(ar[_r][1][0],Qt*qt>Qt*ar[_r][0][1]?ar[_r][0][1]:qt)[0],Hr}Ce?Ve.invert=Ce(Ve):ve.invert&&(Ve.invert=function(jt,qt){for(var Qt=He[+(qt<0)],ar=be[+(qt<0)],_r=0,Sr=Qt.length;_r<Sr;++_r){var Hr=Qt[_r];if(Hr[0][0]<=jt&&jt<Hr[1][0]&&Hr[0][1]<=qt&&qt<Hr[1][1]){var ln=ve.invert(jt-ve(ar[_r][1][0],0)[0],qt);return ln[0]+=ar[_r][1][0],Ca(Ve(ln[0],ln[1]),[jt,qt])?ln:null}}});var Qe=t.geoProjection(Ve),zt=Qe.stream;return Qe.stream=function(jt){var qt=Qe.rotate(),Qt=zt(jt),ar=(Qe.rotate([0,0]),zt(jt));return Qe.rotate(qt),Qt.sphere=function(){t.geoStream(De,ar)},Qt},Qe.lobes=function(jt){return arguments.length?(De=Pf(jt),be=jt.map(function(qt){return qt.map(function(Qt){return[[Qt[0][0]*A,Qt[0][1]*A],[Qt[1][0]*A,Qt[1][1]*A],[Qt[2][0]*A,Qt[2][1]*A]]})}),He=be.map(function(qt){return qt.map(function(Qt){var ar=ve(Qt[0][0],Qt[0][1])[0],_r=ve(Qt[2][0],Qt[2][1])[0],Sr=ve(Qt[1][0],Qt[0][1])[1],Hr=ve(Qt[1][0],Qt[1][1])[1],ln;return Sr>Hr&&(ln=Sr,Sr=Hr,Hr=ln),[[ar,Sr],[_r,Hr]]})}),Qe):be.map(function(qt){return qt.map(function(Qt){return[[Qt[0][0]*C,Qt[0][1]*C],[Qt[1][0]*C,Qt[1][1]*C],[Qt[2][0]*C,Qt[2][1]*C]]})})},be!=null&&Qe.lobes(be),Qe}var Rf=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Wc(){return Ma(Ze,Rf).scale(160.857)}var dl=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function ff(){return Ma(Pl,dl).scale(152.63)}var $s=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function ko(){return Ma(_t,$s).scale(169.529)}var eu=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function _u(){return Ma(_t,eu).scale(169.529).rotate([20,0])}var Ah=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function Uu(){return Ma(bi,Ah,Pe).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var nv=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Ac(){return Ma(vt,nv).scale(152.63).rotate([-20,0])}function lo(ve,be){return[3/g*ve*O(b*b/3-be*be),be]}lo.invert=function(ve,be){return[g/3*ve/O(b*b/3-be*be),be]};function Df(){return t.geoProjection(lo).scale(158.837)}function Mh(ve){function be(Ce,De){if(i(i(De)-w)<p)return[0,De<0?-2:2];var He=_(De),Ve=h((1+He)/(1-He),ve/2),Qe=.5*(Ve+1/Ve)+o(Ce*=ve);return[2*_(Ce)/Qe,(Ve-1/Ve)/Qe]}return be.invert=function(Ce,De){var He=i(De);if(i(He-2)<p)return Ce?null:[0,d(De)*w];if(He>2)return null;Ce/=2,De/=2;var Ve=Ce*Ce,Qe=De*De,zt=2*De/(1+Ve+Qe);return zt=h((1+zt)/(1-zt),1/ve),[a(2*Ce,1-Ve-Qe)/ve,D((zt-1)/(zt+1))]},be}function Us(){var ve=.5,be=t.geoProjectionMutator(Mh),Ce=be(ve);return Ce.spacing=function(De){return arguments.length?be(ve=+De):ve},Ce.scale(124.75)}var xs=b/E;function Sh(ve,be){return[ve*(1+O(o(be)))/2,be/(o(be/2)*o(ve/6))]}Sh.invert=function(ve,be){var Ce=i(ve),De=i(be),He=p,Ve=w;De<xs?Ve*=De/xs:He+=6*z(xs/De);for(var Qe=0;Qe<25;Qe++){var zt=_(Ve),jt=O(o(Ve)),qt=_(Ve/2),Qt=o(Ve/2),ar=_(He/6),_r=o(He/6),Sr=.5*He*(1+jt)-Ce,Hr=Ve/(Qt*_r)-De,ln=jt?-.25*He*zt/jt:0,kn=.5*(1+jt),yi=(1+.5*Ve*qt/Qt)/(Qt*_r),Qi=Ve/Qt*(ar/6)/(_r*_r),ra=ln*Qi-yi*kn,sa=(Sr*Qi-Hr*kn)/ra,pa=(Hr*ln-Sr*yi)/ra;if(Ve-=sa,He-=pa,i(sa)<p&&i(pa)<p)break}return[ve<0?-He:He,be<0?-Ve:Ve]};function cf(){return t.geoProjection(Sh).scale(97.2672)}function To(ve,be){var Ce=ve*ve,De=be*be;return[ve*(.975534+De*(-.119161+Ce*-.0143059+De*-.0547009)),be*(1.00384+Ce*(.0802894+De*-.02855+Ce*199025e-9)+De*(.0998909+De*-.0491032))]}To.invert=function(ve,be){var Ce=d(ve)*b,De=be/2,He=50;do{var Ve=Ce*Ce,Qe=De*De,zt=Ce*De,jt=Ce*(.975534+Qe*(-.119161+Ve*-.0143059+Qe*-.0547009))-ve,qt=De*(1.00384+Ve*(.0802894+Qe*-.02855+Ve*199025e-9)+Qe*(.0998909+Qe*-.0491032))-be,Qt=.975534-Qe*(.119161+3*Ve*.0143059+Qe*.0547009),ar=-zt*(2*.119161+4*.0547009*Qe+2*.0143059*Ve),_r=zt*(2*.0802894+4*199025e-9*Ve+2*-.02855*Qe),Sr=1.00384+Ve*(.0802894+199025e-9*Ve)+Qe*(3*(.0998909-.02855*Ve)-5*.0491032*Qe),Hr=ar*_r-Sr*Qt,ln=(qt*ar-jt*Sr)/Hr,kn=(jt*_r-qt*Qt)/Hr;Ce-=ln,De-=kn}while((i(ln)>p||i(kn)>p)&&--He>0);return He&&[Ce,De]};function vs(){return t.geoProjection(To).scale(139.98)}function po(ve,be){return[_(ve)/o(be),T(be)*o(ve)]}po.invert=function(ve,be){var Ce=ve*ve,De=be*be,He=De+1,Ve=Ce+He,Qe=ve?x*O((Ve-O(Ve*Ve-4*Ce))/Ce):1/O(He);return[D(ve*Qe),d(be)*z(Qe)]};function Co(){return t.geoProjection(po).scale(144.049).clipAngle(90-.001)}function Mc(ve){var be=o(ve),Ce=T(k+ve/2);function De(He,Ve){var Qe=Ve-ve,zt=i(Qe)<p?He*be:i(zt=k+Ve/2)<p||i(i(zt)-w)<p?0:He*Qe/u(T(zt)/Ce);return[zt,Qe]}return De.invert=function(He,Ve){var Qe,zt=Ve+ve;return[i(Ve)<p?He/be:i(Qe=k+zt/2)<p||i(i(Qe)-w)<p?0:He*u(T(Qe)/Ce)/Ve,zt]},De}function qs(){return it(Mc).parallel(40).scale(158.837)}function Vl(ve,be){return[ve,1.25*u(T(k+.4*be))]}Vl.invert=function(ve,be){return[ve,2.5*n(s(.8*be))-.625*b]};function hf(){return t.geoProjection(Vl).scale(108.318)}function _d(ve){var be=ve.length-1;function Ce(De,He){for(var Ve=o(He),Qe=2/(1+Ve*o(De)),zt=Qe*Ve*_(De),jt=Qe*_(He),qt=be,Qt=ve[qt],ar=Qt[0],_r=Qt[1],Sr;--qt>=0;)Qt=ve[qt],ar=Qt[0]+zt*(Sr=ar)-jt*_r,_r=Qt[1]+zt*_r+jt*Sr;return ar=zt*(Sr=ar)-jt*_r,_r=zt*_r+jt*Sr,[ar,_r]}return Ce.invert=function(De,He){var Ve=20,Qe=De,zt=He;do{for(var jt=be,qt=ve[jt],Qt=qt[0],ar=qt[1],_r=0,Sr=0,Hr;--jt>=0;)qt=ve[jt],_r=Qt+Qe*(Hr=_r)-zt*Sr,Sr=ar+Qe*Sr+zt*Hr,Qt=qt[0]+Qe*(Hr=Qt)-zt*ar,ar=qt[1]+Qe*ar+zt*Hr;_r=Qt+Qe*(Hr=_r)-zt*Sr,Sr=ar+Qe*Sr+zt*Hr,Qt=Qe*(Hr=Qt)-zt*ar-De,ar=Qe*ar+zt*Hr-He;var ln=_r*_r+Sr*Sr,kn,yi;Qe-=kn=(Qt*_r+ar*Sr)/ln,zt-=yi=(ar*_r-Qt*Sr)/ln}while(i(kn)+i(yi)>p*p&&--Ve>0);if(Ve){var Qi=O(Qe*Qe+zt*zt),ra=2*n(Qi*.5),sa=_(ra);return[a(Qe*sa,Qi*o(ra)),Qi?D(zt*sa/Qi):0]}},Ce}var bu=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Wp=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Hl=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],ho=[[.9245,0],[0,0],[.01943,0]],Dv=[[.721316,0],[0,0],[-.00881625,-.00617325]];function vf(){return wu(bu,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function Gl(){return wu(Wp,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function iv(){return wu(Hl,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Eh(){return wu(ho,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function av(){return wu(Dv,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function wu(ve,be){var Ce=t.geoProjection(_d(ve)).rotate(be).clipAngle(90),De=t.geoRotation(be),He=Ce.center;return delete Ce.rotate,Ce.center=function(Ve){return arguments.length?He(De(Ve)):De.invert(He())},Ce}var Iv=O(6),ov=O(7);function kh(ve,be){var Ce=D(7*_(be)/(3*Iv));return[Iv*ve*(2*o(2*Ce/3)-1)/ov,9*_(Ce/3)/ov]}kh.invert=function(ve,be){var Ce=3*D(be*ov/9);return[ve*ov/(Iv*(2*o(2*Ce/3)-1)),D(_(Ce)*3*Iv/7)]};function sv(){return t.geoProjection(kh).scale(164.859)}function bd(ve,be){for(var Ce=(1+x)*_(be),De=be,He=0,Ve;He<25&&(De-=Ve=(_(De/2)+_(De)-Ce)/(.5*o(De/2)+o(De)),!(i(Ve)<p));He++);return[ve*(1+2*o(De)/o(De/2))/(3*E),2*O(3)*_(De/2)/O(2+E)]}bd.invert=function(ve,be){var Ce=be*O(2+E)/(2*O(3)),De=2*D(Ce);return[3*E*ve/(1+2*o(De)/o(De/2)),D((Ce+_(De))/(1+x))]};function Hd(){return t.geoProjection(bd).scale(188.209)}function If(ve,be){for(var Ce=O(6/(4+b)),De=(1+b/4)*_(be),He=be/2,Ve=0,Qe;Ve<25&&(He-=Qe=(He/2+_(He)-De)/(.5+o(He)),!(i(Qe)<p));Ve++);return[Ce*(.5+o(He))*ve/1.5,Ce*He]}If.invert=function(ve,be){var Ce=O(6/(4+b)),De=be/Ce;return i(i(De)-w)<p&&(De=De<0?-w:w),[1.5*ve/(Ce*(.5+o(De))),D((De/2+_(De))/(1+b/4))]};function Fv(){return t.geoProjection(If).scale(166.518)}function oc(ve,be){var Ce=be*be,De=Ce*Ce,He=Ce*De;return[ve*(.84719-.13063*Ce+He*He*(-.04515+.05494*Ce-.02326*De+.00331*He)),be*(1.01183+De*De*(-.02625+.01926*Ce-.00396*De))]}oc.invert=function(ve,be){var Ce=be,De=25,He,Ve,Qe,zt;do Ve=Ce*Ce,Qe=Ve*Ve,Ce-=He=(Ce*(1.01183+Qe*Qe*(-.02625+.01926*Ve-.00396*Qe))-be)/(1.01183+Qe*Qe*(9*-.02625+11*.01926*Ve+13*-.00396*Qe));while(i(He)>M&&--De>0);return Ve=Ce*Ce,Qe=Ve*Ve,zt=Ve*Qe,[ve/(.84719-.13063*Ve+zt*zt*(-.04515+.05494*Ve-.02326*Qe+.00331*zt)),Ce]};function Ch(){return t.geoProjection(oc).scale(175.295)}function Vu(ve,be){return[ve*(1+o(be))/2,2*(be-T(be/2))]}Vu.invert=function(ve,be){for(var Ce=be/2,De=0,He=1/0;De<10&&i(He)>p;++De){var Ve=o(be/2);be-=He=(be-T(be/2)-Ce)/(1-.5/(Ve*Ve))}return[2*ve/(1+o(be)),be]};function Sc(){return t.geoProjection(Vu).scale(152.63)}var Ff=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function qv(){return Ma(we(1/0),Ff).rotate([20,0]).scale(152.63)}function zv(ve,be){var Ce=_(be),De=o(be),He=d(ve);if(ve===0||i(be)===w)return[0,be];if(be===0)return[ve,0];if(i(ve)===w)return[ve*De,w*Ce];var Ve=b/(2*ve)-2*ve/b,Qe=2*be/b,zt=(1-Qe*Qe)/(Ce-Qe),jt=Ve*Ve,qt=zt*zt,Qt=1+jt/qt,ar=1+qt/jt,_r=(Ve*Ce/zt-Ve/2)/Qt,Sr=(qt*Ce/jt+zt/2)/ar,Hr=_r*_r+De*De/Qt,ln=Sr*Sr-(qt*Ce*Ce/jt+zt*Ce-1)/ar;return[w*(_r+O(Hr)*He),w*(Sr+O(ln<0?0:ln)*d(-be*Ve)*He)]}zv.invert=function(ve,be){ve/=w,be/=w;var Ce=ve*ve,De=be*be,He=Ce+De,Ve=b*b;return[ve?(He-1+O((1-He)*(1-He)+4*Ce))/(2*ve)*w:0,et(function(Qe){return He*(b*_(Qe)-2*Qe)*b+4*Qe*Qe*(be-_(Qe))+2*b*Qe-Ve*be},0)]};function Ov(){return t.geoProjection(zv).scale(127.267)}var lv=1.0148,uv=.23185,Bv=-.14499,tu=.02406,fv=lv,al=5*uv,ru=7*Bv,qf=9*tu,Vs=1.790857183;function Xc(ve,be){var Ce=be*be;return[ve,be*(lv+Ce*Ce*(uv+Ce*(Bv+tu*Ce)))]}Xc.invert=function(ve,be){be>Vs?be=Vs:be<-Vs&&(be=-Vs);var Ce=be,De;do{var He=Ce*Ce;Ce-=De=(Ce*(lv+He*He*(uv+He*(Bv+tu*He)))-be)/(fv+He*He*(al+He*(ru+qf*He)))}while(i(De)>p);return[ve,Ce]};function zf(){return t.geoProjection(Xc).scale(139.319)}function Dl(ve,be){if(i(be)<p)return[ve,0];var Ce=T(be),De=ve*_(be);return[_(De)/Ce,be+(1-o(De))/Ce]}Dl.invert=function(ve,be){if(i(be)<p)return[ve,0];var Ce=ve*ve+be*be,De=be*.5,He=10,Ve;do{var Qe=T(De),zt=1/o(De),jt=Ce-2*be*De+De*De;De-=Ve=(Qe*jt+2*(De-be))/(2+jt*zt*zt+2*(De-be)*Qe)}while(i(Ve)>p&&--He>0);return Qe=T(De),[(i(be)<i(De+1/Qe)?D(ve*Qe):d(be)*d(ve)*(z(i(ve*Qe))+w))/_(De),De]};function zs(){return t.geoProjection(Dl).scale(103.74)}function Gd(ve,be){var Ce=df(ve[1],ve[0]),De=df(be[1],be[0]),He=Wd(Ce,De),Ve=nu(Ce)/nu(De);return Tu([1,0,ve[0][0],0,1,ve[0][1]],Tu([Ve,0,0,0,Ve,0],Tu([o(He),_(He),0,-_(He),o(He),0],[1,0,-be[0][0],0,1,-be[0][1]])))}function Yd(ve){var be=1/(ve[0]*ve[4]-ve[1]*ve[3]);return[be*ve[4],-be*ve[1],be*(ve[1]*ve[5]-ve[2]*ve[4]),-be*ve[3],be*ve[0],be*(ve[2]*ve[3]-ve[0]*ve[5])]}function Tu(ve,be){return[ve[0]*be[0]+ve[1]*be[3],ve[0]*be[1]+ve[1]*be[4],ve[0]*be[2]+ve[1]*be[5]+ve[2],ve[3]*be[0]+ve[4]*be[3],ve[3]*be[1]+ve[4]*be[4],ve[3]*be[2]+ve[4]*be[5]+ve[5]]}function df(ve,be){return[ve[0]-be[0],ve[1]-be[1]]}function nu(ve){return O(ve[0]*ve[0]+ve[1]*ve[1])}function Wd(ve,be){return a(ve[0]*be[1]-ve[1]*be[0],ve[0]*be[0]+ve[1]*be[1])}function Zc(ve,be,Ce){De(ve,{transform:null});function De(qt,Qt){if(qt.edges=cv(qt.face),Qt.face){var ar=qt.shared=Nv(qt.face,Qt.face),_r=Gd(ar.map(Qt.project),ar.map(qt.project));qt.transform=Qt.transform?Tu(Qt.transform,_r):_r;for(var Sr=Qt.edges,Hr=0,ln=Sr.length;Hr<ln;++Hr)Au(ar[0],Sr[Hr][1])&&Au(ar[1],Sr[Hr][0])&&(Sr[Hr]=qt),Au(ar[0],Sr[Hr][0])&&Au(ar[1],Sr[Hr][1])&&(Sr[Hr]=qt);for(Sr=qt.edges,Hr=0,ln=Sr.length;Hr<ln;++Hr)Au(ar[0],Sr[Hr][0])&&Au(ar[1],Sr[Hr][1])&&(Sr[Hr]=Qt),Au(ar[0],Sr[Hr][1])&&Au(ar[1],Sr[Hr][0])&&(Sr[Hr]=Qt)}else qt.transform=Qt.transform;return qt.children&&qt.children.forEach(function(kn){De(kn,qt)}),qt}function He(qt,Qt){var ar=be(qt,Qt),_r=ar.project([qt*C,Qt*C]),Sr;return(Sr=ar.transform)?[Sr[0]*_r[0]+Sr[1]*_r[1]+Sr[2],-(Sr[3]*_r[0]+Sr[4]*_r[1]+Sr[5])]:(_r[1]=-_r[1],_r)}hv(ve)&&(He.invert=function(qt,Qt){var ar=Ve(ve,[qt,-Qt]);return ar&&(ar[0]*=A,ar[1]*=A,ar)});function Ve(qt,Qt){var ar=qt.project.invert,_r=qt.transform,Sr=Qt;if(_r&&(_r=Yd(_r),Sr=[_r[0]*Sr[0]+_r[1]*Sr[1]+_r[2],_r[3]*Sr[0]+_r[4]*Sr[1]+_r[5]]),ar&&qt===Qe(Hr=ar(Sr)))return Hr;for(var Hr,ln=qt.children,kn=0,yi=ln&&ln.length;kn<yi;++kn)if(Hr=Ve(ln[kn],Qt))return Hr}function Qe(qt){return be(qt[0]*A,qt[1]*A)}var zt=t.geoProjection(He),jt=zt.stream;return zt.stream=function(qt){var Qt=zt.rotate(),ar=jt(qt),_r=(zt.rotate([0,0]),jt(qt));return zt.rotate(Qt),ar.sphere=function(){_r.polygonStart(),_r.lineStart(),jc(_r,ve),_r.lineEnd(),_r.polygonEnd()},ar},zt.angle(Ce==null?-30:Ce*C)}function jc(ve,be,Ce){var De,He=be.edges,Ve=He.length,Qe,zt={type:"MultiPoint",coordinates:be.face},jt=be.face.filter(function(ln){return i(ln[1])!==90}),qt=t.geoBounds({type:"MultiPoint",coordinates:jt}),Qt=!1,ar=-1,_r=qt[1][0]-qt[0][0],Sr=_r===180||_r===360?[(qt[0][0]+qt[1][0])/2,(qt[0][1]+qt[1][1])/2]:t.geoCentroid(zt);if(Ce)for(;++ar<Ve&&He[ar]!==Ce;);++ar;for(var Hr=0;Hr<Ve;++Hr)Qe=He[(Hr+ar)%Ve],Array.isArray(Qe)?(Qt||(ve.point((De=t.geoInterpolate(Qe[0],Sr)(p))[0],De[1]),Qt=!0),ve.point((De=t.geoInterpolate(Qe[1],Sr)(p))[0],De[1])):(Qt=!1,Qe!==Ce&&jc(ve,Qe,be))}function Au(ve,be){return ve&&be&&ve[0]===be[0]&&ve[1]===be[1]}function Nv(ve,be){for(var Ce,De,He=ve.length,Ve=null,Qe=0;Qe<He;++Qe){Ce=ve[Qe];for(var zt=be.length;--zt>=0;)if(De=be[zt],Ce[0]===De[0]&&Ce[1]===De[1]){if(Ve)return[Ve,Ce];Ve=Ce}}}function cv(ve){for(var be=ve.length,Ce=[],De=ve[be-1],He=0;He<be;++He)Ce.push([De,De=ve[He]]);return Ce}function hv(ve){return ve.project.invert||ve.children&&ve.children.some(hv)}var Uv=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Kc=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(ve){return ve.map(function(be){return Uv[be]})});function Of(ve){ve=ve||function(Ce){var De=t.geoCentroid({type:"MultiPoint",coordinates:Ce});return t.geoGnomonic().scale(1).translate([0,0]).rotate([-De[0],-De[1]])};var be=Kc.map(function(Ce){return{face:Ce,project:ve(Ce)}});return[-1,0,0,1,0,1,4,5].forEach(function(Ce,De){var He=be[Ce];He&&(He.children||(He.children=[])).push(be[De])}),Zc(be[0],function(Ce,De){return be[Ce<-b/2?De<0?6:4:Ce<0?De<0?2:0:Ce<b/2?De<0?3:1:De<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var Ec=2/O(3);function Lh(ve,be){var Ce=At(ve,be);return[Ce[0]*Ec,Ce[1]]}Lh.invert=function(ve,be){return At.invert(ve/Ec,be)};function wd(ve){ve=ve||function(Ce){var De=t.geoCentroid({type:"MultiPoint",coordinates:Ce});return t.geoProjection(Lh).translate([0,0]).scale(1).rotate(De[1]>0?[-De[0],0]:[180-De[0],180])};var be=Kc.map(function(Ce){return{face:Ce,project:ve(Ce)}});return[-1,0,0,1,0,1,4,5].forEach(function(Ce,De){var He=be[Ce];He&&(He.children||(He.children=[])).push(be[De])}),Zc(be[0],function(Ce,De){return be[Ce<-b/2?De<0?6:4:Ce<0?De<0?2:0:Ce<b/2?De<0?3:1:De<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Oo(ve){ve=ve||function(Qe){var zt=Qe.length===6?t.geoCentroid({type:"MultiPoint",coordinates:Qe}):Qe[0];return t.geoGnomonic().scale(1).translate([0,0]).rotate([-zt[0],-zt[1]])};var be=Kc.map(function(Qe){for(var zt=Qe.map(Qc),jt=zt.length,qt=zt[jt-1],Qt,ar=[],_r=0;_r<jt;++_r)Qt=zt[_r],ar.push(Cc([qt[0]*.9486832980505138+Qt[0]*.31622776601683794,qt[1]*.9486832980505138+Qt[1]*.31622776601683794,qt[2]*.9486832980505138+Qt[2]*.31622776601683794]),Cc([Qt[0]*.9486832980505138+qt[0]*.31622776601683794,Qt[1]*.9486832980505138+qt[1]*.31622776601683794,Qt[2]*.9486832980505138+qt[2]*.31622776601683794])),qt=Qt;return ar}),Ce=[],De=[-1,0,0,1,0,1,4,5];be.forEach(function(Qe,zt){for(var jt=Kc[zt],qt=jt.length,Qt=Ce[zt]=[],ar=0;ar<qt;++ar)be.push([jt[ar],Qe[(ar*2+2)%(2*qt)],Qe[(ar*2+1)%(2*qt)]]),De.push(zt),Qt.push(kc(Qc(Qe[(ar*2+2)%(2*qt)]),Qc(Qe[(ar*2+1)%(2*qt)])))});var He=be.map(function(Qe){return{project:ve(Qe),face:Qe}});De.forEach(function(Qe,zt){var jt=He[Qe];jt&&(jt.children||(jt.children=[])).push(He[zt])});function Ve(Qe,zt){var jt=o(zt),qt=[jt*o(Qe),jt*_(Qe),_(zt)],Qt=Qe<-b/2?zt<0?6:4:Qe<0?zt<0?2:0:Qe<b/2?zt<0?3:1:zt<0?7:5,ar=Ce[Qt];return He[Jc(ar[0],qt)<0?8+3*Qt:Jc(ar[1],qt)<0?8+3*Qt+1:Jc(ar[2],qt)<0?8+3*Qt+2:Qt]}return Zc(He[0],Ve).angle(-30).scale(110.625).center([0,45])}function Jc(ve,be){for(var Ce=0,De=ve.length,He=0;Ce<De;++Ce)He+=ve[Ce]*be[Ce];return He}function kc(ve,be){return[ve[1]*be[2]-ve[2]*be[1],ve[2]*be[0]-ve[0]*be[2],ve[0]*be[1]-ve[1]*be[0]]}function Cc(ve){return[a(ve[1],ve[0])*C,D(f(-1,c(1,ve[2])))*C]}function Qc(ve){var be=ve[0]*A,Ce=ve[1]*A,De=o(Ce);return[De*o(be),De*_(be),_(Ce)]}function pf(){}function sc(ve){if((Ce=ve.length)<4)return!1;for(var be=0,Ce,De=ve[Ce-1][1]*ve[0][0]-ve[Ce-1][0]*ve[0][1];++be<Ce;)De+=ve[be-1][1]*ve[be][0]-ve[be-1][0]*ve[be][1];return De<=0}function Vv(ve,be){for(var Ce=be[0],De=be[1],He=!1,Ve=0,Qe=ve.length,zt=Qe-1;Ve<Qe;zt=Ve++){var jt=ve[Ve],qt=jt[0],Qt=jt[1],ar=ve[zt],_r=ar[0],Sr=ar[1];Qt>De^Sr>De&&Ce<(_r-qt)*(De-Qt)/(Sr-Qt)+qt&&(He=!He)}return He}function Hs(ve,be){var Ce=be.stream,De;if(!Ce)throw new Error("invalid projection");switch(ve&&ve.type){case"Feature":De=Bf;break;case"FeatureCollection":De=vv;break;default:De=Uf;break}return De(ve,Ce)}function vv(ve,be){return{type:"FeatureCollection",features:ve.features.map(function(Ce){return Bf(Ce,be)})}}function Bf(ve,be){return{type:"Feature",id:ve.id,properties:ve.properties,geometry:Uf(ve.geometry,be)}}function Nf(ve,be){return{type:"GeometryCollection",geometries:ve.geometries.map(function(Ce){return Uf(Ce,be)})}}function Uf(ve,be){if(!ve)return null;if(ve.type==="GeometryCollection")return Nf(ve,be);var Ce;switch(ve.type){case"Point":Ce=Hu;break;case"MultiPoint":Ce=Hu;break;case"LineString":Ce=Vf;break;case"MultiLineString":Ce=Vf;break;case"Polygon":Ce=Gu;break;case"MultiPolygon":Ce=Gu;break;case"Sphere":Ce=Gu;break;default:return null}return t.geoStream(ve,be(Ce)),Ce.result()}var _s=[],pl=[],Hu={point:function(ve,be){_s.push([ve,be])},result:function(){var ve=_s.length?_s.length<2?{type:"Point",coordinates:_s[0]}:{type:"MultiPoint",coordinates:_s}:null;return _s=[],ve}},Vf={lineStart:pf,point:function(ve,be){_s.push([ve,be])},lineEnd:function(){_s.length&&(pl.push(_s),_s=[])},result:function(){var ve=pl.length?pl.length<2?{type:"LineString",coordinates:pl[0]}:{type:"MultiLineString",coordinates:pl}:null;return pl=[],ve}},Gu={polygonStart:pf,lineStart:pf,point:function(ve,be){_s.push([ve,be])},lineEnd:function(){var ve=_s.length;if(ve){do _s.push(_s[0].slice());while(++ve<4);pl.push(_s),_s=[]}},polygonEnd:pf,result:function(){if(!pl.length)return null;var ve=[],be=[];return pl.forEach(function(Ce){sc(Ce)?ve.push([Ce]):be.push(Ce)}),be.forEach(function(Ce){var De=Ce[0];ve.some(function(He){if(Vv(He[0],De))return He.push(Ce),!0})||ve.push([Ce])}),pl=[],ve.length?ve.length>1?{type:"MultiPolygon",coordinates:ve}:{type:"Polygon",coordinates:ve[0]}:null}};function Ph(ve){var be=ve(w,0)[0]-ve(-w,0)[0];function Ce(De,He){var Ve=i(De)<w,Qe=ve(Ve?De:De>0?De-b:De+b,He),zt=(Qe[0]-Qe[1])*x,jt=(Qe[0]+Qe[1])*x;if(Ve)return[zt,jt];var qt=be*x,Qt=zt>0^jt>0?-1:1;return[Qt*zt-d(jt)*qt,Qt*jt-d(zt)*qt]}return ve.invert&&(Ce.invert=function(De,He){var Ve=(De+He)*x,Qe=(He-De)*x,zt=i(Ve)<.5*be&&i(Qe)<.5*be;if(!zt){var jt=be*x,qt=Ve>0^Qe>0?-1:1,Qt=-qt*De+(Qe>0?1:-1)*jt,ar=-qt*He+(Ve>0?1:-1)*jt;Ve=(-Qt-ar)*x,Qe=(Qt-ar)*x}var _r=ve.invert(Ve,Qe);return zt||(_r[0]+=Ve>0?b:-b),_r}),t.geoProjection(Ce).rotate([-90,-90,45]).clipAngle(180-.001)}function Ue(){return Ph(Cr).scale(176.423)}function at(){return Ph(so).scale(111.48)}function Ht(ve,be){if(!(0<=(be=+be)&&be<=20))throw new Error("invalid digits");function Ce(qt){var Qt=qt.length,ar=2,_r=new Array(Qt);for(_r[0]=+qt[0].toFixed(be),_r[1]=+qt[1].toFixed(be);ar<Qt;)_r[ar]=qt[ar],++ar;return _r}function De(qt){return qt.map(Ce)}function He(qt){for(var Qt=Ce(qt[0]),ar=[Qt],_r=1;_r<qt.length;_r++){var Sr=Ce(qt[_r]);(Sr.length>2||Sr[0]!=Qt[0]||Sr[1]!=Qt[1])&&(ar.push(Sr),Qt=Sr)}return ar.length===1&&qt.length>1&&ar.push(Ce(qt[qt.length-1])),ar}function Ve(qt){return qt.map(He)}function Qe(qt){if(qt==null)return qt;var Qt;switch(qt.type){case"GeometryCollection":Qt={type:"GeometryCollection",geometries:qt.geometries.map(Qe)};break;case"Point":Qt={type:"Point",coordinates:Ce(qt.coordinates)};break;case"MultiPoint":Qt={type:qt.type,coordinates:De(qt.coordinates)};break;case"LineString":Qt={type:qt.type,coordinates:He(qt.coordinates)};break;case"MultiLineString":case"Polygon":Qt={type:qt.type,coordinates:Ve(qt.coordinates)};break;case"MultiPolygon":Qt={type:"MultiPolygon",coordinates:qt.coordinates.map(Ve)};break;default:return qt}return qt.bbox!=null&&(Qt.bbox=qt.bbox),Qt}function zt(qt){var Qt={type:"Feature",properties:qt.properties,geometry:Qe(qt.geometry)};return qt.id!=null&&(Qt.id=qt.id),qt.bbox!=null&&(Qt.bbox=qt.bbox),Qt}if(ve!=null)switch(ve.type){case"Feature":return zt(ve);case"FeatureCollection":{var jt={type:"FeatureCollection",features:ve.features.map(zt)};return ve.bbox!=null&&(jt.bbox=ve.bbox),jt}default:return Qe(ve)}return ve}function It(ve){var be=_(ve);function Ce(De,He){var Ve=be?T(De*be/2)/be:De/2;if(!He)return[2*Ve,-ve];var Qe=2*n(Ve*_(He)),zt=1/T(He);return[_(Qe)*zt,He+(1-o(Qe))*zt-ve]}return Ce.invert=function(De,He){if(i(He+=ve)<p)return[be?2*n(be*De/2)/be:De,0];var Ve=De*De+He*He,Qe=0,zt=10,jt;do{var qt=T(Qe),Qt=1/o(Qe),ar=Ve-2*He*Qe+Qe*Qe;Qe-=jt=(qt*ar+2*(Qe-He))/(2+ar*Qt*Qt+2*(Qe-He)*qt)}while(i(jt)>p&&--zt>0);var _r=De*(qt=T(Qe)),Sr=T(i(He)<i(Qe+1/qt)?D(_r)*.5:z(_r)*.5+b/4)/_(Qe);return[be?2*n(be*Sr)/be:2*Sr,Qe]},Ce}function fr(){return it(It).scale(131.215)}var Lr=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];Lr.forEach(function(ve){ve[1]*=1.0144});function qr(ve,be){var Ce=c(18,i(be)*36/b),De=l(Ce),He=Ce-De,Ve=(ar=Lr[De])[0],Qe=ar[1],zt=(ar=Lr[++De])[0],jt=ar[1],qt=(ar=Lr[c(19,++De)])[0],Qt=ar[1],ar;return[ve*(zt+He*(qt-Ve)/2+He*He*(qt-2*zt+Ve)/2),(be>0?w:-w)*(jt+He*(Qt-Qe)/2+He*He*(Qt-2*jt+Qe)/2)]}qr.invert=function(ve,be){var Ce=be/w,De=Ce*90,He=c(18,i(De/5)),Ve=f(0,l(He));do{var Qe=Lr[Ve][1],zt=Lr[Ve+1][1],jt=Lr[c(19,Ve+2)][1],qt=jt-Qe,Qt=jt-2*zt+Qe,ar=2*(i(Ce)-zt)/qt,_r=Qt/qt,Sr=ar*(1-_r*ar*(1-2*_r*ar));if(Sr>=0||Ve===1){De=(be>=0?5:-5)*(Sr+He);var Hr=50,ln;do He=c(18,i(De)/5),Ve=l(He),Sr=He-Ve,Qe=Lr[Ve][1],zt=Lr[Ve+1][1],jt=Lr[c(19,Ve+2)][1],De-=(ln=(be>=0?w:-w)*(zt+Sr*(jt-Qe)/2+Sr*Sr*(jt-2*zt+Qe)/2)-be)*C;while(i(ln)>M&&--Hr>0);break}}while(--Ve>=0);var kn=Lr[Ve][0],yi=Lr[Ve+1][0],Qi=Lr[c(19,Ve+2)][0];return[ve/(yi+Sr*(Qi-kn)/2+Sr*Sr*(Qi-2*yi+kn)/2),De*A]};function Zr(){return t.geoProjection(qr).scale(152.63)}function nn(ve){function be(Ce,De){var He=o(De),Ve=(ve-1)/(ve-He*o(Ce));return[Ve*He*_(Ce),Ve*_(De)]}return be.invert=function(Ce,De){var He=Ce*Ce+De*De,Ve=O(He),Qe=(ve-O(1-He*(ve+1)/(ve-1)))/((ve-1)/Ve+Ve/(ve-1));return[a(Ce*Qe,Ve*O(1-Qe*Qe)),Ve?D(De*Qe/Ve):0]},be}function An(ve,be){var Ce=nn(ve);if(!be)return Ce;var De=o(be),He=_(be);function Ve(Qe,zt){var jt=Ce(Qe,zt),qt=jt[1],Qt=qt*He/(ve-1)+De;return[jt[0]*De/Qt,qt/Qt]}return Ve.invert=function(Qe,zt){var jt=(ve-1)/(ve-1-zt*He);return Ce.invert(jt*Qe,jt*zt*De)},Ve}function Nr(){var ve=2,be=0,Ce=t.geoProjectionMutator(An),De=Ce(ve,be);return De.distance=function(He){return arguments.length?Ce(ve=+He,be):ve},De.tilt=function(He){return arguments.length?Ce(ve,be=He*A):be*C},De.scale(432.147).clipAngle(z(1/ve)*C-1e-6)}var tn=1e-4,rn=1e4,wn=-180,Gn=wn+tn,Oi=180,Ii=Oi-tn,Hi=-90,Ki=Hi+tn,On=90,$n=On-tn;function Ji(ve){return ve.length>0}function ca(ve){return Math.floor(ve*rn)/rn}function Ka(ve){return ve===Hi||ve===On?[0,ve]:[wn,ca(ve)]}function mo(ve){var be=ve[0],Ce=ve[1],De=!1;return be<=Gn?(be=wn,De=!0):be>=Ii&&(be=Oi,De=!0),Ce<=Ki?(Ce=Hi,De=!0):Ce>=$n&&(Ce=On,De=!0),De?[be,Ce]:ve}function vo(ve){return ve.map(mo)}function xo(ve,be,Ce){for(var De=0,He=ve.length;De<He;++De){var Ve=ve[De].slice();Ce.push({index:-1,polygon:be,ring:Ve});for(var Qe=0,zt=Ve.length;Qe<zt;++Qe){var jt=Ve[Qe],qt=jt[0],Qt=jt[1];if(qt<=Gn||qt>=Ii||Qt<=Ki||Qt>=$n){Ve[Qe]=mo(jt);for(var ar=Qe+1;ar<zt;++ar){var _r=Ve[ar],Sr=_r[0],Hr=_r[1];if(Sr>Gn&&Sr<Ii&&Hr>Ki&&Hr<$n)break}if(ar===Qe+1)continue;if(Qe){var ln={index:-1,polygon:be,ring:Ve.slice(0,Qe+1)};ln.ring[ln.ring.length-1]=Ka(Qt),Ce[Ce.length-1]=ln}else Ce.pop();if(ar>=zt)break;Ce.push({index:-1,polygon:be,ring:Ve=Ve.slice(ar-1)}),Ve[0]=Ka(Ve[0][1]),Qe=-1,zt=Ve.length}}}}function Na(ve){var be,Ce=ve.length,De={},He={},Ve,Qe,zt,jt,qt;for(be=0;be<Ce;++be){if(Ve=ve[be],Qe=Ve.ring[0],jt=Ve.ring[Ve.ring.length-1],Qe[0]===jt[0]&&Qe[1]===jt[1]){Ve.polygon.push(Ve.ring),ve[be]=null;continue}Ve.index=be,De[Qe]=He[jt]=Ve}for(be=0;be<Ce;++be)if(Ve=ve[be],Ve){if(Qe=Ve.ring[0],jt=Ve.ring[Ve.ring.length-1],zt=He[Qe],qt=De[jt],delete De[Qe],delete He[jt],Qe[0]===jt[0]&&Qe[1]===jt[1]){Ve.polygon.push(Ve.ring);continue}zt?(delete He[Qe],delete De[zt.ring[0]],zt.ring.pop(),ve[zt.index]=null,Ve={index:-1,polygon:zt.polygon,ring:zt.ring.concat(Ve.ring)},zt===qt?Ve.polygon.push(Ve.ring):(Ve.index=Ce++,ve.push(De[Ve.ring[0]]=He[Ve.ring[Ve.ring.length-1]]=Ve))):qt?(delete De[jt],delete He[qt.ring[qt.ring.length-1]],Ve.ring.pop(),Ve={index:Ce++,polygon:qt.polygon,ring:Ve.ring.concat(qt.ring)},ve[qt.index]=null,ve.push(De[Ve.ring[0]]=He[Ve.ring[Ve.ring.length-1]]=Ve)):(Ve.ring.push(Ve.ring[0]),Ve.polygon.push(Ve.ring))}}function bs(ve){var be={type:"Feature",geometry:Zo(ve.geometry)};return ve.id!=null&&(be.id=ve.id),ve.bbox!=null&&(be.bbox=ve.bbox),ve.properties!=null&&(be.properties=ve.properties),be}function Zo(ve){if(ve==null)return ve;var be,Ce,De,He;switch(ve.type){case"GeometryCollection":be={type:"GeometryCollection",geometries:ve.geometries.map(Zo)};break;case"Point":be={type:"Point",coordinates:mo(ve.coordinates)};break;case"MultiPoint":case"LineString":be={type:ve.type,coordinates:vo(ve.coordinates)};break;case"MultiLineString":be={type:"MultiLineString",coordinates:ve.coordinates.map(vo)};break;case"Polygon":{var Ve=[];xo(ve.coordinates,Ve,Ce=[]),Na(Ce),be={type:"Polygon",coordinates:Ve};break}case"MultiPolygon":{Ce=[],De=-1,He=ve.coordinates.length;for(var Qe=new Array(He);++De<He;)xo(ve.coordinates[De],Qe[De]=[],Ce);Na(Ce),be={type:"MultiPolygon",coordinates:Qe.filter(Ji)};break}default:return ve}return ve.bbox!=null&&(be.bbox=ve.bbox),be}function Bo(ve){if(ve==null)return ve;switch(ve.type){case"Feature":return bs(ve);case"FeatureCollection":{var be={type:"FeatureCollection",features:ve.features.map(bs)};return ve.bbox!=null&&(be.bbox=ve.bbox),be}default:return Zo(ve)}}function hi(ve,be){var Ce=T(be/2),De=_(k*Ce);return[ve*(.74482-.34588*De*De),1.70711*Ce]}hi.invert=function(ve,be){var Ce=be/1.70711,De=_(k*Ce);return[ve/(.74482-.34588*De*De),2*n(Ce)]};function ta(){return t.geoProjection(hi).scale(146.153)}function ws(ve,be,Ce){var De=t.geoInterpolate(be,Ce),He=De(.5),Ve=t.geoRotation([-He[0],-He[1]])(be),Qe=De.distance/2,zt=-D(_(Ve[1]*A)/_(Qe)),jt=[-He[0],-He[1],-(Ve[0]>0?b-zt:zt)*C],qt=t.geoProjection(ve(Qe)).rotate(jt),Qt=t.geoRotation(jt),ar=qt.center;return delete qt.rotate,qt.center=function(_r){return arguments.length?ar(Qt(_r)):Qt.invert(ar())},qt.clipAngle(90)}function Ml(ve){var be=o(ve);function Ce(De,He){var Ve=t.geoGnomonicRaw(De,He);return Ve[0]*=be,Ve}return Ce.invert=function(De,He){return t.geoGnomonicRaw.invert(De/be,He)},Ce}function Yl(){return iu([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function iu(ve,be){return ws(Ml,ve,be)}function Yu(ve){if(!(ve*=2))return t.geoAzimuthalEquidistantRaw;var be=-ve/2,Ce=-be,De=ve*ve,He=T(Ce),Ve=.5/_(Ce);function Qe(zt,jt){var qt=z(o(jt)*o(zt-be)),Qt=z(o(jt)*o(zt-Ce)),ar=jt<0?-1:1;return qt*=qt,Qt*=Qt,[(qt-Qt)/(2*ve),ar*O(4*De*Qt-(De-qt+Qt)*(De-qt+Qt))/(2*ve)]}return Qe.invert=function(zt,jt){var qt=jt*jt,Qt=o(O(qt+(_r=zt+be)*_r)),ar=o(O(qt+(_r=zt+Ce)*_r)),_r,Sr;return[a(Sr=Qt-ar,_r=(Qt+ar)*He),(jt<0?-1:1)*z(O(_r*_r+Sr*Sr)*Ve)]},Qe}function Hf(){return au([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function au(ve,be){return ws(Yu,ve,be)}function Lc(ve,be){if(i(be)<p)return[ve,0];var Ce=i(be/w),De=D(Ce);if(i(ve)<p||i(i(be)-w)<p)return[0,d(be)*b*T(De/2)];var He=o(De),Ve=i(b/ve-ve/b)/2,Qe=Ve*Ve,zt=He/(Ce+He-1),jt=zt*(2/Ce-1),qt=jt*jt,Qt=qt+Qe,ar=zt-qt,_r=Qe+zt;return[d(ve)*b*(Ve*ar+O(Qe*ar*ar-Qt*(zt*zt-qt)))/Qt,d(be)*b*(jt*_r-Ve*O((Qe+1)*Qt-_r*_r))/Qt]}Lc.invert=function(ve,be){if(i(be)<p)return[ve,0];if(i(ve)<p)return[0,w*_(2*n(be/b))];var Ce=(ve/=b)*ve,De=(be/=b)*be,He=Ce+De,Ve=He*He,Qe=-i(be)*(1+He),zt=Qe-2*De+Ce,jt=-2*Qe+1+2*De+Ve,qt=De/jt+(2*zt*zt*zt/(jt*jt*jt)-9*Qe*zt/(jt*jt))/27,Qt=(Qe-zt*zt/(3*jt))/jt,ar=2*O(-Qt/3),_r=z(3*qt/(Qt*ar))/3;return[b*(He-1+O(1+2*(Ce-De)+Ve))/(2*ve),d(be)*b*(-ar*o(_r+b/3)-zt/(3*jt))]};function Pc(){return t.geoProjection(Lc).scale(79.4183)}function lc(ve,be){if(i(be)<p)return[ve,0];var Ce=i(be/w),De=D(Ce);if(i(ve)<p||i(i(be)-w)<p)return[0,d(be)*b*T(De/2)];var He=o(De),Ve=i(b/ve-ve/b)/2,Qe=Ve*Ve,zt=He*(O(1+Qe)-Ve*He)/(1+Qe*Ce*Ce);return[d(ve)*b*zt,d(be)*b*O(1-zt*(2*Ve+zt))]}lc.invert=function(ve,be){if(!ve)return[0,w*_(2*n(be/b))];var Ce=i(ve/b),De=(1-Ce*Ce-(be/=b)*be)/(2*Ce),He=De*De,Ve=O(He+1);return[d(ve)*b*(Ve-De),d(be)*w*_(2*a(O((1-2*De*Ce)*(De+Ve)-Ce),O(Ve+De+Ce)))]};function Rh(){return t.geoProjection(lc).scale(79.4183)}function $c(ve,be){if(i(be)<p)return[ve,0];var Ce=be/w,De=D(Ce);if(i(ve)<p||i(i(be)-w)<p)return[0,b*T(De/2)];var He=(b/ve-ve/b)/2,Ve=Ce/(1+o(De));return[b*(d(ve)*O(He*He+1-Ve*Ve)-He),b*Ve]}$c.invert=function(ve,be){if(!be)return[ve,0];var Ce=be/b,De=(b*b*(1-Ce*Ce)-ve*ve)/(2*b*ve);return[ve?b*(d(ve)*O(De*De+1)-De):0,w*_(2*n(Ce))]};function uc(){return t.geoProjection($c).scale(79.4183)}function gf(ve,be){if(!be)return[ve,0];var Ce=i(be);if(!ve||Ce===w)return[0,be];var De=Ce/w,He=De*De,Ve=(8*De-He*(He+2)-5)/(2*He*(De-1)),Qe=Ve*Ve,zt=De*Ve,jt=He+Qe+2*zt,qt=De+3*Ve,Qt=ve/w,ar=Qt+1/Qt,_r=d(i(ve)-w)*O(ar*ar-4),Sr=_r*_r,Hr=jt*(He+Qe*Sr-1)+(1-He)*(He*(qt*qt+4*Qe)+12*zt*Qe+4*Qe*Qe),ln=(_r*(jt+Qe-1)+2*O(Hr))/(4*jt+Sr);return[d(ve)*w*ln,d(be)*w*O(1+_r*i(ln)-ln*ln)]}gf.invert=function(ve,be){var Ce;if(!ve||!be)return[ve,be];be/=b;var De=d(ve)*ve/w,He=(De*De-1+4*be*be)/i(De),Ve=He*He,Qe=2*be,zt=50;do{var jt=Qe*Qe,qt=(8*Qe-jt*(jt+2)-5)/(2*jt*(Qe-1)),Qt=(3*Qe-jt*Qe-10)/(2*jt*Qe),ar=qt*qt,_r=Qe*qt,Sr=Qe+qt,Hr=Sr*Sr,ln=Qe+3*qt,kn=Hr*(jt+ar*Ve-1)+(1-jt)*(jt*(ln*ln+4*ar)+ar*(12*_r+4*ar)),yi=-2*Sr*(4*_r*ar+(1-4*jt+3*jt*jt)*(1+Qt)+ar*(-6+14*jt-Ve+(-8+8*jt-2*Ve)*Qt)+_r*(-8+12*jt+(-10+10*jt-Ve)*Qt)),Qi=O(kn),ra=He*(Hr+ar-1)+2*Qi-De*(4*Hr+Ve),sa=He*(2*qt*Qt+2*Sr*(1+Qt))+yi/Qi-8*Sr*(He*(-1+ar+Hr)+2*Qi)*(1+Qt)/(Ve+4*Hr);Qe-=Ce=ra/sa}while(Ce>p&&--zt>0);return[d(ve)*(O(He*He+4)+He)*b/4,w*Qe]};function Wu(){return t.geoProjection(gf).scale(127.16)}function Dh(ve,be,Ce,De,He){function Ve(Qe,zt){var jt=Ce*_(De*zt),qt=O(1-jt*jt),Qt=O(2/(1+qt*o(Qe*=He)));return[ve*qt*Qt*_(Qe),be*jt*Qt]}return Ve.invert=function(Qe,zt){var jt=Qe/ve,qt=zt/be,Qt=O(jt*jt+qt*qt),ar=2*D(Qt/2);return[a(Qe*T(ar),ve*Qt)/He,Qt&&D(zt*_(ar)/(be*Ce*Qt))/De]},Ve}function Hv(ve,be,Ce,De){var He=b/3;ve=f(ve,p),be=f(be,p),ve=c(ve,w),be=c(be,b-p),Ce=f(Ce,0),Ce=c(Ce,100-p),De=f(De,p);var Ve=Ce/100+1,Qe=De/100,zt=z(Ve*o(He))/He,jt=_(ve)/_(zt*w),qt=be/b,Qt=O(Qe*_(ve/2)/_(be/2)),ar=Qt/O(qt*jt*zt),_r=1/(Qt*O(qt*jt*zt));return Dh(ar,_r,jt,zt,qt)}function Ih(){var ve=65*A,be=60*A,Ce=20,De=200,He=t.geoProjectionMutator(Hv),Ve=He(ve,be,Ce,De);return Ve.poleline=function(Qe){return arguments.length?He(ve=+Qe*A,be,Ce,De):ve*C},Ve.parallels=function(Qe){return arguments.length?He(ve,be=+Qe*A,Ce,De):be*C},Ve.inflation=function(Qe){return arguments.length?He(ve,be,Ce=+Qe,De):Ce},Ve.ratio=function(Qe){return arguments.length?He(ve,be,Ce,De=+Qe):De},Ve.scale(163.775)}function Gv(){return Ih().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}var Rc=4*b+3*O(3),Mu=2*O(2*b*O(3)/Rc),eh=je(Mu*O(3)/b,Mu,Rc/6);function th(){return t.geoProjection(eh).scale(176.84)}function rh(ve,be){return[ve*O(1-3*be*be/(b*b)),be]}rh.invert=function(ve,be){return[ve/O(1-3*be*be/(b*b)),be]};function Gf(){return t.geoProjection(rh).scale(152.63)}function Fh(ve,be){var Ce=o(be),De=o(ve)*Ce,He=1-De,Ve=o(ve=a(_(ve)*Ce,-_(be))),Qe=_(ve);return Ce=O(1-De*De),[Qe*Ce-Ve*He,-Ve*Ce-Qe*He]}Fh.invert=function(ve,be){var Ce=(ve*ve+be*be)/-2,De=O(-Ce*(2+Ce)),He=be*Ce+ve*De,Ve=ve*Ce-be*De,Qe=O(Ve*Ve+He*He);return[a(De*He,Qe*(1+Ce)),Qe?-D(De*Ve/Qe):0]};function Yv(){return t.geoProjection(Fh).rotate([0,-90,45]).scale(124.75).clipAngle(180-.001)}function qh(ve,be){var Ce=ue(ve,be);return[(Ce[0]+ve/w)/2,(Ce[1]+be)/2]}qh.invert=function(ve,be){var Ce=ve,De=be,He=25;do{var Ve=o(De),Qe=_(De),zt=_(2*De),jt=Qe*Qe,qt=Ve*Ve,Qt=_(Ce),ar=o(Ce/2),_r=_(Ce/2),Sr=_r*_r,Hr=1-qt*ar*ar,ln=Hr?z(Ve*ar)*O(kn=1/Hr):kn=0,kn,yi=.5*(2*ln*Ve*_r+Ce/w)-ve,Qi=.5*(ln*Qe+De)-be,ra=.5*kn*(qt*Sr+ln*Ve*ar*jt)+.5/w,sa=kn*(Qt*zt/4-ln*Qe*_r),pa=.125*kn*(zt*_r-ln*Qe*qt*Qt),Lo=.5*kn*(jt*ar+ln*Sr*Ve)+.5,jo=sa*pa-Lo*ra,ba=(Qi*sa-yi*Lo)/jo,qa=(yi*pa-Qi*ra)/jo;Ce-=ba,De-=qa}while((i(ba)>p||i(qa)>p)&&--He>0);return[Ce,De]};function ou(){return t.geoProjection(qh).scale(158.837)}e.geoNaturalEarth=t.geoNaturalEarth1,e.geoNaturalEarthRaw=t.geoNaturalEarth1Raw,e.geoAiry=re,e.geoAiryRaw=J,e.geoAitoff=fe,e.geoAitoffRaw=ue,e.geoArmadillo=X,e.geoArmadilloRaw=K,e.geoAugust=oe,e.geoAugustRaw=ae,e.geoBaker=ie,e.geoBakerRaw=ce,e.geoBerghaus=le,e.geoBerghausRaw=ge,e.geoBertin1953=ut,e.geoBertin1953Raw=Ie,e.geoBoggs=dt,e.geoBoggsRaw=Ze,e.geoBonne=ht,e.geoBonneRaw=We,e.geoBottomley=er,e.geoBottomleyRaw=mt,e.geoBromley=cr,e.geoBromleyRaw=$t,e.geoChamberlin=Ke,e.geoChamberlinRaw=yt,e.geoChamberlinAfrica=Je,e.geoCollignon=Ee,e.geoCollignonRaw=At,e.geoCraig=Te,e.geoCraigRaw=de,e.geoCraster=Kt,e.geoCrasterRaw=Mt,e.geoCylindricalEqualArea=Fr,e.geoCylindricalEqualAreaRaw=Jt,e.geoCylindricalStereographic=mr,e.geoCylindricalStereographicRaw=Vr,e.geoEckert1=an,e.geoEckert1Raw=zr,e.geoEckert2=mn,e.geoEckert2Raw=ni,e.geoEckert3=Wi,e.geoEckert3Raw=fi,e.geoEckert4=Zi,e.geoEckert4Raw=si,e.geoEckert5=ot,e.geoEckert5Raw=Ei,e.geoEckert6=lt,e.geoEckert6Raw=Be,e.geoEisenlohr=nr,e.geoEisenlohrRaw=Nt,e.geoFahey=Rr,e.geoFaheyRaw=dr,e.geoFoucaut=Yr,e.geoFoucautRaw=Gr,e.geoFoucautSinusoidal=Wr,e.geoFoucautSinusoidalRaw=dn,e.geoGilbert=Mi,e.geoGingery=Ra,e.geoGingeryRaw=Ui,e.geoGinzburg4=zi,e.geoGinzburg4Raw=Yn,e.geoGinzburg5=zn,e.geoGinzburg5Raw=ya,e.geoGinzburg6=Ut,e.geoGinzburg6Raw=Xe,e.geoGinzburg8=br,e.geoGinzburg8Raw=ur,e.geoGinzburg9=sn,e.geoGinzburg9Raw=Jr,e.geoGringorten=Hn,e.geoGringortenRaw=Cr,e.geoGuyou=Uo,e.geoGuyouRaw=so,e.geoHammer=qe,e.geoHammerRaw=we,e.geoHammerRetroazimuthal=il,e.geoHammerRetroazimuthalRaw=ms,e.geoHealpix=Al,e.geoHealpixRaw=hs,e.geoHill=Nu,e.geoHillRaw=$l,e.geoHomolosine=ss,e.geoHomolosineRaw=Pl,e.geoHufnagel=$o,e.geoHufnagelRaw=vl,e.geoHyperelliptical=Aa,e.geoHyperellipticalRaw=ii,e.geoInterrupt=Ma,e.geoInterruptedBoggs=Wc,e.geoInterruptedHomolosine=ff,e.geoInterruptedMollweide=ko,e.geoInterruptedMollweideHemispheres=_u,e.geoInterruptedSinuMollweide=Uu,e.geoInterruptedSinusoidal=Ac,e.geoKavrayskiy7=Df,e.geoKavrayskiy7Raw=lo,e.geoLagrange=Us,e.geoLagrangeRaw=Mh,e.geoLarrivee=cf,e.geoLarriveeRaw=Sh,e.geoLaskowski=vs,e.geoLaskowskiRaw=To,e.geoLittrow=Co,e.geoLittrowRaw=po,e.geoLoximuthal=qs,e.geoLoximuthalRaw=Mc,e.geoMiller=hf,e.geoMillerRaw=Vl,e.geoModifiedStereographic=wu,e.geoModifiedStereographicRaw=_d,e.geoModifiedStereographicAlaska=vf,e.geoModifiedStereographicGs48=Gl,e.geoModifiedStereographicGs50=iv,e.geoModifiedStereographicMiller=Eh,e.geoModifiedStereographicLee=av,e.geoMollweide=Bt,e.geoMollweideRaw=_t,e.geoMtFlatPolarParabolic=sv,e.geoMtFlatPolarParabolicRaw=kh,e.geoMtFlatPolarQuartic=Hd,e.geoMtFlatPolarQuarticRaw=bd,e.geoMtFlatPolarSinusoidal=Fv,e.geoMtFlatPolarSinusoidalRaw=If,e.geoNaturalEarth2=Ch,e.geoNaturalEarth2Raw=oc,e.geoNellHammer=Sc,e.geoNellHammerRaw=Vu,e.geoInterruptedQuarticAuthalic=qv,e.geoNicolosi=Ov,e.geoNicolosiRaw=zv,e.geoPatterson=zf,e.geoPattersonRaw=Xc,e.geoPolyconic=zs,e.geoPolyconicRaw=Dl,e.geoPolyhedral=Zc,e.geoPolyhedralButterfly=Of,e.geoPolyhedralCollignon=wd,e.geoPolyhedralWaterman=Oo,e.geoProject=Hs,e.geoGringortenQuincuncial=Ue,e.geoPeirceQuincuncial=at,e.geoPierceQuincuncial=at,e.geoQuantize=Ht,e.geoQuincuncial=Ph,e.geoRectangularPolyconic=fr,e.geoRectangularPolyconicRaw=It,e.geoRobinson=Zr,e.geoRobinsonRaw=qr,e.geoSatellite=Nr,e.geoSatelliteRaw=An,e.geoSinuMollweide=ac,e.geoSinuMollweideRaw=bi,e.geoSinusoidal=rt,e.geoSinusoidalRaw=vt,e.geoStitch=Bo,e.geoTimes=ta,e.geoTimesRaw=hi,e.geoTwoPointAzimuthal=iu,e.geoTwoPointAzimuthalRaw=Ml,e.geoTwoPointAzimuthalUsa=Yl,e.geoTwoPointEquidistant=au,e.geoTwoPointEquidistantRaw=Yu,e.geoTwoPointEquidistantUsa=Hf,e.geoVanDerGrinten=Pc,e.geoVanDerGrintenRaw=Lc,e.geoVanDerGrinten2=Rh,e.geoVanDerGrinten2Raw=lc,e.geoVanDerGrinten3=uc,e.geoVanDerGrinten3Raw=$c,e.geoVanDerGrinten4=Wu,e.geoVanDerGrinten4Raw=gf,e.geoWagner=Ih,e.geoWagner7=Gv,e.geoWagnerRaw=Hv,e.geoWagner4=th,e.geoWagner4Raw=eh,e.geoWagner6=Gf,e.geoWagner6Raw=rh,e.geoWiechel=Yv,e.geoWiechelRaw=Fh,e.geoWinkel3=ou,e.geoWinkel3Raw=qh,Object.defineProperty(e,"__esModule",{value:!0})})});var nRe=ne((Adr,rRe)=>{"use strict";var Cf=Ai(),FY=Wt(),eFt=wi(),B3=Math.PI/180,q_=180/Math.PI,zY={cursor:"pointer"},OY={cursor:"auto"};function tFt(e,t){var r=e.projection,i;return t._isScoped?i=rFt:t._isClipped?i=iFt:i=nFt,i(e,r)}rRe.exports=tFt;function BY(e,t){return Cf.behavior.zoom().translate(t.translate()).scale(t.scale())}function NY(e,t,r){var i=e.id,n=e.graphDiv,a=n.layout,o=a[i],s=n._fullLayout,l=s[i],u={},f={};function c(h,v){u[i+"."+h]=FY.nestedProperty(o,h).get(),eFt.call("_storeDirectGUIEdit",a,s._preGUI,u);var d=FY.nestedProperty(l,h);d.get()!==v&&(d.set(v),FY.nestedProperty(o,h).set(v),f[i+"."+h]=v)}r(c),c("projection.scale",t.scale()/e.fitScale),c("fitbounds",!1),n.emit("plotly_relayout",f)}function rFt(e,t){var r=BY(e,t);function i(){Cf.select(this).style(zY)}function n(){t.scale(Cf.event.scale).translate(Cf.event.translate),e.render(!0);var s=t.invert(e.midPt);e.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":t.scale()/e.fitScale,"geo.center.lon":s[0],"geo.center.lat":s[1]})}function a(s){var l=t.invert(e.midPt);s("center.lon",l[0]),s("center.lat",l[1])}function o(){Cf.select(this).style(OY),NY(e,t,a)}return r.on("zoomstart",i).on("zoom",n).on("zoomend",o),r}function nFt(e,t){var r=BY(e,t),i=2,n,a,o,s,l,u,f,c,h;function v(b){return t.invert(b)}function d(b){var w=v(b);if(!w)return!0;var k=t(w);return Math.abs(k[0]-b[0])>i||Math.abs(k[1]-b[1])>i}function _(){Cf.select(this).style(zY),n=Cf.mouse(this),a=t.rotate(),o=t.translate(),s=a,l=v(n)}function T(){if(u=Cf.mouse(this),d(n)){r.scale(t.scale()),r.translate(t.translate());return}t.scale(Cf.event.scale),t.translate([o[0],Cf.event.translate[1]]),l?v(u)&&(c=v(u),f=[s[0]+(c[0]-l[0]),a[1],a[2]],t.rotate(f),s=f):(n=u,l=v(n)),h=!0,e.render(!0);var b=t.rotate(),w=t.invert(e.midPt);e.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":t.scale()/e.fitScale,"geo.center.lon":w[0],"geo.center.lat":w[1],"geo.projection.rotation.lon":-b[0]})}function p(){Cf.select(this).style(OY),h&&NY(e,t,M)}function M(b){var w=t.rotate(),k=t.invert(e.midPt);b("projection.rotation.lon",-w[0]),b("center.lon",k[0]),b("center.lat",k[1])}return r.on("zoomstart",_).on("zoom",T).on("zoomend",p),r}function iFt(e,t){var r={r:t.rotate(),k:t.scale()},i=BY(e,t),n=hFt(i,"zoomstart","zoom","zoomend"),a=0,o=i.on,s;i.on("zoomstart",function(){Cf.select(this).style(zY);var h=Cf.mouse(this),v=t.rotate(),d=v,_=t.translate(),T=aFt(v);s=RD(t,h),o.call(i,"zoom",function(){var p=Cf.mouse(this);if(t.scale(r.k=Cf.event.scale),!s)h=p,s=RD(t,h);else if(RD(t,p)){t.rotate(v).translate(_);var M=RD(t,p),b=sFt(s,M),w=uFt(oFt(T,b)),k=r.r=lFt(w,s,d);(!isFinite(k[0])||!isFinite(k[1])||!isFinite(k[2]))&&(k=d),t.rotate(k),d=k}u(n.of(this,arguments))}),l(n.of(this,arguments))}).on("zoomend",function(){Cf.select(this).style(OY),o.call(i,"zoom",null),f(n.of(this,arguments)),NY(e,t,c)}).on("zoom.redraw",function(){e.render(!0);var h=t.rotate();e.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":t.scale()/e.fitScale,"geo.projection.rotation.lon":-h[0],"geo.projection.rotation.lat":-h[1]})});function l(h){a++||h({type:"zoomstart"})}function u(h){h({type:"zoom"})}function f(h){--a||h({type:"zoomend"})}function c(h){var v=t.rotate();h("projection.rotation.lon",-v[0]),h("projection.rotation.lat",-v[1])}return Cf.rebind(i,n,"on")}function RD(e,t){var r=e.invert(t);return r&&isFinite(r[0])&&isFinite(r[1])&&fFt(r)}function aFt(e){var t=.5*e[0]*B3,r=.5*e[1]*B3,i=.5*e[2]*B3,n=Math.sin(t),a=Math.cos(t),o=Math.sin(r),s=Math.cos(r),l=Math.sin(i),u=Math.cos(i);return[a*s*u+n*o*l,n*s*u-a*o*l,a*o*u+n*s*l,a*s*l-n*o*u]}function oFt(e,t){var r=e[0],i=e[1],n=e[2],a=e[3],o=t[0],s=t[1],l=t[2],u=t[3];return[r*o-i*s-n*l-a*u,r*s+i*o+n*u-a*l,r*l-i*u+n*o+a*s,r*u+i*l-n*s+a*o]}function sFt(e,t){if(!(!e||!t)){var r=cFt(e,t),i=Math.sqrt(tRe(r,r)),n=.5*Math.acos(Math.max(-1,Math.min(1,tRe(e,t)))),a=Math.sin(n)/i;return i&&[Math.cos(n),r[2]*a,-r[1]*a,r[0]*a]}}function lFt(e,t,r){var i=qY(t,2,e[0]);i=qY(i,1,e[1]),i=qY(i,0,e[2]-r[2]);var n=t[0],a=t[1],o=t[2],s=i[0],l=i[1],u=i[2],f=Math.atan2(a,n)*q_,c=Math.sqrt(n*n+a*a),h,v;Math.abs(l)>c?(v=(l>0?90:-90)-f,h=0):(v=Math.asin(l/c)*q_-f,h=Math.sqrt(c*c-l*l));var d=180-v-2*f,_=(Math.atan2(u,s)-Math.atan2(o,h))*q_,T=(Math.atan2(u,s)-Math.atan2(o,-h))*q_,p=$6e(r[0],r[1],v,_),M=$6e(r[0],r[1],d,T);return p<=M?[v,_,r[2]]:[d,T,r[2]]}function $6e(e,t,r,i){var n=eRe(r-e),a=eRe(i-t);return Math.sqrt(n*n+a*a)}function eRe(e){return(e%360+540)%360-180}function qY(e,t,r){var i=r*B3,n=e.slice(),a=t===0?1:0,o=t===2?1:2,s=Math.cos(i),l=Math.sin(i);return n[a]=e[a]*s-e[o]*l,n[o]=e[o]*s+e[a]*l,n}function uFt(e){return[Math.atan2(2*(e[0]*e[1]+e[2]*e[3]),1-2*(e[1]*e[1]+e[2]*e[2]))*q_,Math.asin(Math.max(-1,Math.min(1,2*(e[0]*e[2]-e[3]*e[1]))))*q_,Math.atan2(2*(e[0]*e[3]+e[1]*e[2]),1-2*(e[2]*e[2]+e[3]*e[3]))*q_]}function fFt(e){var t=e[0]*B3,r=e[1]*B3,i=Math.cos(r);return[i*Math.cos(t),i*Math.sin(t),Math.sin(r)]}function tRe(e,t){for(var r=0,i=0,n=e.length;i<n;++i)r+=e[i]*t[i];return r}function cFt(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function hFt(e){for(var t=0,r=arguments.length,i=[];++t<r;)i.push(arguments[t]);var n=Cf.dispatch.apply(null,i);return n.of=function(a,o){return function(s){var l;try{l=s.sourceEvent=Cf.event,s.target=e,Cf.event=s,n[s.type].apply(a,o)}finally{Cf.event=l}}},n}});var fRe=ne((Mdr,uRe)=>{"use strict";var gy=Ai(),HY=IY(),vFt=HY.geoPath,dFt=HY.geoDistance,pFt=Q6e(),gFt=wi(),HE=Wt(),yFt=HE.strTranslate,DD=_i(),VE=aa(),iRe=Ol(),mFt=Zs(),VY=Xi(),aRe=Cd().getAutoRange,UY=Hh(),xFt=Mf().prepSelect,_Ft=Mf().clearOutline,bFt=Mf().selectOnClick,wFt=nRe(),kv=FE(),TFt=O3(),sRe=yD(),AFt=oY().feature;function lRe(e){this.id=e.id,this.graphDiv=e.graphDiv,this.container=e.container,this.topojsonURL=e.topojsonURL,this.isStatic=e.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var k0=lRe.prototype;uRe.exports=function(t){return new lRe(t)};k0.plot=function(e,t,r,i){var n=this;if(i)return n.update(e,t,!0);n._geoCalcData=e,n._fullLayout=t;var a=t[this.id],o=[],s=!1;for(var l in kv.layerNameToAdjective)if(l!=="frame"&&a["show"+l]){s=!0;break}for(var u=!1,f=0;f<e.length;f++){var c=e[0][0].trace;c._geo=n,c.locationmode&&(s=!0);var h=c.marker;if(h){var v=h.angle,d=h.angleref;(v||d==="north"||d==="previous")&&(u=!0)}}if(this._hasMarkerAngles=u,s){var _=sRe.getTopojsonName(a);(n.topojson===null||_!==n.topojsonName)&&(n.topojsonName=_,PlotlyGeoAssets.topojson[n.topojsonName]===void 0&&o.push(n.fetchTopojson()))}o=o.concat(TFt.fetchTraceGeoData(e)),r.push(new Promise(function(T,p){Promise.all(o).then(function(){n.topojson=PlotlyGeoAssets.topojson[n.topojsonName],n.update(e,t),T()}).catch(p)}))};k0.fetchTopojson=function(){var e=this,t=sRe.getTopojsonPath(e.topojsonURL,e.topojsonName);return new Promise(function(r,i){gy.json(t,function(n,a){if(n)return n.status===404?i(new Error(["plotly.js could not find topojson file at",t+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):i(new Error(["unexpected error while fetching topojson file at",t].join(" ")));PlotlyGeoAssets.topojson[e.topojsonName]=a,r()})})};k0.update=function(e,t,r){var i=t[this.id];this.hasChoropleth=!1;for(var n=0;n<e.length;n++){var a=e[n],o=a[0].trace;o.type==="choropleth"&&(this.hasChoropleth=!0),o.visible===!0&&o._length>0&&o._module.calcGeoJSON(a,t)}if(!r){var s=this.updateProjection(e,t);if(s)return;(!this.viewInitial||this.scope!==i.scope)&&this.saveViewInitial(i)}this.scope=i.scope,this.updateBaseLayers(t,i),this.updateDims(t,i),this.updateFx(t,i),mFt.generalUpdatePerTraceModule(this.graphDiv,this,e,i);var l=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=l.selectAll(".point"),this.dataPoints.text=l.selectAll("text"),this.dataPaths.line=l.selectAll(".js-line");var u=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=u.selectAll("path"),this._render()};k0.updateProjection=function(e,t){var r=this.graphDiv,i=t[this.id],n=t._size,a=i.domain,o=i.projection,s=i.lonaxis,l=i.lataxis,u=s._ax,f=l._ax,c=this.projection=MFt(i),h=[[n.l+n.w*a.x[0],n.t+n.h*(1-a.y[1])],[n.l+n.w*a.x[1],n.t+n.h*(1-a.y[0])]],v=i.center||{},d=o.rotation||{},_=s.range||[],T=l.range||[];if(i.fitbounds){u._length=h[1][0]-h[0][0],f._length=h[1][1]-h[0][1],u.range=aRe(r,u),f.range=aRe(r,f);var p=(u.range[0]+u.range[1])/2,M=(f.range[0]+f.range[1])/2;if(i._isScoped)v={lon:p,lat:M};else if(i._isClipped){v={lon:p,lat:M},d={lon:p,lat:M,roll:d.roll};var b=o.type,w=kv.lonaxisSpan[b]/2||180,k=kv.lataxisSpan[b]/2||90;_=[p-w,p+w],T=[M-k,M+k]}else v={lon:p,lat:M},d={lon:p,lat:d.lat,roll:d.roll}}c.center([v.lon-d.lon,v.lat-d.lat]).rotate([-d.lon,-d.lat,d.roll]).parallels(o.parallels);var x=oRe(_,T);c.fitExtent(h,x);var E=this.bounds=c.getBounds(x),S=this.fitScale=c.scale(),g=c.translate();if(i.fitbounds){var C=c.getBounds(oRe(u.range,f.range)),A=Math.min((E[1][0]-E[0][0])/(C[1][0]-C[0][0]),(E[1][1]-E[0][1])/(C[1][1]-C[0][1]));isFinite(A)?c.scale(A*S):HE.warn("Something went wrong during"+this.id+"fitbounds computations.")}else c.scale(o.scale*S);var P=this.midPt=[(E[0][0]+E[1][0])/2,(E[0][1]+E[1][1])/2];if(c.translate([g[0]+(P[0]-g[0]),g[1]+(P[1]-g[1])]).clipExtent(E),i._isAlbersUsa){var D=c([v.lon,v.lat]),z=c.translate();c.translate([z[0]-(D[0]-z[0]),z[1]-(D[1]-z[1])])}};k0.updateBaseLayers=function(e,t){var r=this,i=r.topojson,n=r.layers,a=r.basePaths;function o(h){return h==="lonaxis"||h==="lataxis"}function s(h){return!!kv.lineLayers[h]}function l(h){return!!kv.fillLayers[h]}var u=this.hasChoropleth?kv.layersForChoropleth:kv.layers,f=u.filter(function(h){return s(h)||l(h)?t["show"+h]:o(h)?t[h].showgrid:!0}),c=r.framework.selectAll(".layer").data(f,String);c.exit().each(function(h){delete n[h],delete a[h],gy.select(this).remove()}),c.enter().append("g").attr("class",function(h){return"layer "+h}).each(function(h){var v=n[h]=gy.select(this);h==="bg"?r.bgRect=v.append("rect").style("pointer-events","all"):o(h)?a[h]=v.append("path").style("fill","none"):h==="backplot"?v.append("g").classed("choroplethlayer",!0):h==="frontplot"?v.append("g").classed("scatterlayer",!0):s(h)?a[h]=v.append("path").style("fill","none").style("stroke-miterlimit",2):l(h)&&(a[h]=v.append("path").style("stroke","none"))}),c.order(),c.each(function(h){var v=a[h],d=kv.layerNameToAdjective[h];h==="frame"?v.datum(kv.sphereSVG):s(h)||l(h)?v.datum(AFt(i,i.objects[h])):o(h)&&v.datum(SFt(h,t,e)).call(DD.stroke,t[h].gridcolor).call(VE.dashLine,t[h].griddash,t[h].gridwidth),s(h)?v.call(DD.stroke,t[d+"color"]).call(VE.dashLine,"",t[d+"width"]):l(h)&&v.call(DD.fill,t[d+"color"])})};k0.updateDims=function(e,t){var r=this.bounds,i=(t.framewidth||0)/2,n=r[0][0]-i,a=r[0][1]-i,o=r[1][0]-n+i,s=r[1][1]-a+i;VE.setRect(this.clipRect,n,a,o,s),this.bgRect.call(VE.setRect,n,a,o,s).call(DD.fill,t.bgcolor),this.xaxis._offset=n,this.xaxis._length=o,this.yaxis._offset=a,this.yaxis._length=s};k0.updateFx=function(e,t){var r=this,i=r.graphDiv,n=r.bgRect,a=e.dragmode,o=e.clickmode;if(r.isStatic)return;function s(){var c=r.viewInitial,h={};for(var v in c)h[r.id+"."+v]=c[v];gFt.call("_guiRelayout",i,h),i.emit("plotly_doubleclick",null)}function l(c){return r.projection.invert([c[0]+r.xaxis._offset,c[1]+r.yaxis._offset])}var u=function(c,h){if(h.isRect){var v=c.range={};v[r.id]=[l([h.xmin,h.ymin]),l([h.xmax,h.ymax])]}else{var d=c.lassoPoints={};d[r.id]=h.map(l)}},f={element:r.bgRect.node(),gd:i,plotinfo:{id:r.id,xaxis:r.xaxis,yaxis:r.yaxis,fillRangeItems:u},xaxes:[r.xaxis],yaxes:[r.yaxis],subplot:r.id,clickFn:function(c){c===2&&_Ft(i)}};a==="pan"?(n.node().onmousedown=null,n.call(wFt(r,t)),n.on("dblclick.zoom",s),i._context._scrollZoom.geo||n.on("wheel.zoom",null)):(a==="select"||a==="lasso")&&(n.on(".zoom",null),f.prepFn=function(c,h,v){xFt(c,h,v,f,a)},UY.init(f)),n.on("mousemove",function(){var c=r.projection.invert(HE.getPositionFromD3Event());if(!c)return UY.unhover(i,gy.event);r.xaxis.p2c=function(){return c[0]},r.yaxis.p2c=function(){return c[1]},iRe.hover(i,gy.event,r.id)}),n.on("mouseout",function(){i._dragging||UY.unhover(i,gy.event)}),n.on("click",function(){a!=="select"&&a!=="lasso"&&(o.indexOf("select")>-1&&bFt(gy.event,i,[r.xaxis],[r.yaxis],r.id,f),o.indexOf("event")>-1&&iRe.click(i,gy.event))})};k0.makeFramework=function(){var e=this,t=e.graphDiv,r=t._fullLayout,i="clip"+r._uid+e.id;e.clipDef=r._clips.append("clipPath").attr("id",i),e.clipRect=e.clipDef.append("rect"),e.framework=gy.select(e.container).append("g").attr("class","geo "+e.id).call(VE.setClipUrl,i,t),e.project=function(n){var a=e.projection(n);return a?[a[0]-e.xaxis._offset,a[1]-e.yaxis._offset]:[null,null]},e.xaxis={_id:"x",c2p:function(n){return e.project(n)[0]}},e.yaxis={_id:"y",c2p:function(n){return e.project(n)[1]}},e.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},VY.setConvert(e.mockAxis,r)};k0.saveViewInitial=function(e){var t=e.center||{},r=e.projection,i=r.rotation||{};this.viewInitial={fitbounds:e.fitbounds,"projection.scale":r.scale};var n;e._isScoped?n={"center.lon":t.lon,"center.lat":t.lat}:e._isClipped?n={"projection.rotation.lon":i.lon,"projection.rotation.lat":i.lat}:n={"center.lon":t.lon,"center.lat":t.lat,"projection.rotation.lon":i.lon},HE.extendFlat(this.viewInitial,n)};k0.render=function(e){this._hasMarkerAngles&&e?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()};k0._render=function(){var e=this.projection,t=e.getPath(),r;function i(a){var o=e(a.lonlat);return o?yFt(o[0],o[1]):null}function n(a){return e.isLonLatOverEdges(a.lonlat)?"none":null}for(r in this.basePaths)this.basePaths[r].attr("d",t);for(r in this.dataPaths)this.dataPaths[r].attr("d",function(a){return t(a.geojson)});for(r in this.dataPoints)this.dataPoints[r].attr("display",n).attr("transform",i)};function MFt(e){var t=e.projection,r=t.type,i=kv.projNames[r];i="geo"+HE.titleCase(i);for(var n=HY[i]||pFt[i],a=n(),o=e._isSatellite?Math.acos(1/t.distance)*180/Math.PI:e._isClipped?kv.lonaxisSpan[r]/2:null,s=["center","rotate","parallels","clipExtent"],l=function(c){return c?a:[]},u=0;u<s.length;u++){var f=s[u];typeof a[f]!="function"&&(a[f]=l)}return a.isLonLatOverEdges=function(c){if(a(c)===null)return!0;if(o){var h=a.rotate(),v=dFt(c,[-h[0],-h[1]]),d=o*Math.PI/180;return v>d}else return!1},a.getPath=function(){return vFt().projection(a)},a.getBounds=function(c){return a.getPath().bounds(c)},a.precision(kv.precision),e._isSatellite&&a.tilt(t.tilt).distance(t.distance),o&&a.clipAngle(o-kv.clipPad),a}function SFt(e,t,r){var i=1e-6,n=2.5,a=t[e],o=kv.scopeDefaults[t.scope],s,l,u;e==="lonaxis"?(s=o.lonaxisRange,l=o.lataxisRange,u=function(M,b){return[M,b]}):e==="lataxis"&&(s=o.lataxisRange,l=o.lonaxisRange,u=function(M,b){return[b,M]});var f={type:"linear",range:[s[0],s[1]-i],tick0:a.tick0,dtick:a.dtick};VY.setConvert(f,r);var c=VY.calcTicks(f);!t.isScoped&&e==="lonaxis"&&c.pop();for(var h=c.length,v=new Array(h),d=0;d<h;d++)for(var _=c[d].x,T=v[d]=[],p=l[0];p<l[1]+n;p+=n)T.push(u(_,p));return{type:"MultiLineString",coordinates:v}}function oRe(e,t){var r=kv.clipPad,i=e[0]+r,n=e[1]-r,a=t[0]+r,o=t[1]-r;i>0&&n<0&&(n+=360);var s=(n-i)/4;return{type:"Polygon",coordinates:[[[i,a],[i,o],[i+s,o],[i+2*s,o],[i+3*s,o],[n,o],[n,a],[n-s,a],[n-2*s,a],[n-3*s,a],[i,a]]]}}});var GY=ne((Sdr,vRe)=>{"use strict";var U3=Ku(),EFt=fl().attributes,kFt=hc().dash,N3=FE(),CFt=Xs().overrideAll,cRe=rx(),hRe={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:U3.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:kFt},LFt=vRe.exports=CFt({domain:EFt({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:cRe(N3.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:cRe(N3.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:U3.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:N3.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:N3.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:N3.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:N3.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:U3.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:U3.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:U3.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:U3.background},lonaxis:hRe,lataxis:hRe},"plot","from-root");LFt.uirevision={valType:"any",editType:"none"}});var gRe=ne((Edr,pRe)=>{"use strict";var ID=Wt(),PFt=Kx(),RFt=vc().getSubplotData,FD=FE(),DFt=GY(),dRe=FD.axesNames;pRe.exports=function(t,r,i){PFt(t,r,i,{type:"geo",attributes:DFt,handleDefaults:IFt,fullData:i,partition:"y"})};function IFt(e,t,r,i){var n=RFt(i.fullData,"geo",i.id),a=n.map(function(J){return J._expandedIndex}),o=r("resolution"),s=r("scope"),l=FD.scopeDefaults[s],u=r("projection.type",l.projType),f=t._isAlbersUsa=u==="albers usa";f&&(s=t.scope="usa");var c=t._isScoped=s!=="world",h=t._isSatellite=u==="satellite",v=t._isConic=u.indexOf("conic")!==-1||u==="albers",d=t._isClipped=!!FD.lonaxisSpan[u];if(e.visible===!1){var _=ID.extendDeep({},t._template);_.showcoastlines=!1,_.showcountries=!1,_.showframe=!1,_.showlakes=!1,_.showland=!1,_.showocean=!1,_.showrivers=!1,_.showsubunits=!1,_.lonaxis&&(_.lonaxis.showgrid=!1),_.lataxis&&(_.lataxis.showgrid=!1),t._template=_}for(var T=r("visible"),p,M=0;M<dRe.length;M++){var b=dRe[M],w=[30,10][M],k;if(c)k=l[b+"Range"];else{var x=FD[b+"Span"],E=(x[u]||x["*"])/2,S=r("projection.rotation."+b.substr(0,3),l.projRotate[M]);k=[S-E,S+E]}var g=r(b+".range",k);r(b+".tick0"),r(b+".dtick",w),p=r(b+".showgrid",T?void 0:!1),p&&(r(b+".gridcolor"),r(b+".gridwidth"),r(b+".griddash")),t[b]._ax={type:"linear",_id:b.slice(0,3),_traceIndices:a,setScale:ID.identity,c2l:ID.identity,r2l:ID.identity,autorange:!0,range:g.slice(),_m:1,_input:{}}}var C=t.lonaxis.range,A=t.lataxis.range,P=C[0],D=C[1];P>0&&D<0&&(D+=360);var z=(P+D)/2,O;if(!f){var V=c?l.projRotate:[z,0,0];O=r("projection.rotation.lon",V[0]),r("projection.rotation.lat",V[1]),r("projection.rotation.roll",V[2]),p=r("showcoastlines",!c&&T),p&&(r("coastlinecolor"),r("coastlinewidth")),p=r("showocean",T?void 0:!1),p&&r("oceancolor")}var B,F;if(f?(B=-96.6,F=38.7):(B=c?z:O,F=(A[0]+A[1])/2),r("center.lon",B),r("center.lat",F),h&&(r("projection.tilt"),r("projection.distance")),v){var N=l.projParallels||[0,60];r("projection.parallels",N)}r("projection.scale"),p=r("showland",T?void 0:!1),p&&r("landcolor"),p=r("showlakes",T?void 0:!1),p&&r("lakecolor"),p=r("showrivers",T?void 0:!1),p&&(r("rivercolor"),r("riverwidth")),p=r("showcountries",c&&s!=="usa"&&T),p&&(r("countrycolor"),r("countrywidth")),(s==="usa"||s==="north america"&&o===50)&&(r("showsubunits",T),r("subunitcolor"),r("subunitwidth")),c||(p=r("showframe",T),p&&(r("framecolor"),r("framewidth"))),r("bgcolor");var Z=r("fitbounds");Z&&(delete t.projection.scale,c?(delete t.center.lon,delete t.center.lat):d?(delete t.center.lon,delete t.center.lat,delete t.projection.rotation.lon,delete t.projection.rotation.lat,delete t.lonaxis.range,delete t.lataxis.range):(delete t.center.lon,delete t.center.lat,delete t.projection.rotation.lon))}});var YY=ne((kdr,xRe)=>{"use strict";var FFt=vc().getSubplotCalcData,qFt=Wt().counterRegex,zFt=fRe(),hg="geo",yRe=qFt(hg),mRe={};mRe[hg]={valType:"subplotid",dflt:hg,editType:"calc"};function OFt(e){for(var t=e._fullLayout,r=e.calcdata,i=t._subplots[hg],n=0;n<i.length;n++){var a=i[n],o=FFt(r,hg,a),s=t[a],l=s._subplot;l||(l=zFt({id:a,graphDiv:e,container:t._geolayer.node(),topojsonURL:e._context.topojsonURL,staticPlot:e._context.staticPlot}),t[a]._subplot=l),l.plot(o,t,e._promises)}}function BFt(e,t,r,i){for(var n=i._subplots[hg]||[],a=0;a<n.length;a++){var o=n[a],s=i[o]._subplot;!t[o]&&s&&(s.framework.remove(),s.clipDef.remove())}}function NFt(e){for(var t=e._fullLayout,r=t._subplots[hg],i=0;i<r.length;i++){var n=t[r[i]],a=n._subplot;a.updateFx(t,n)}}xRe.exports={attr:hg,name:hg,idRoot:hg,idRegex:yRe,attrRegex:yRe,attributes:mRe,layoutAttributes:GY(),supplyLayoutDefaults:gRe(),plot:OFt,updateFx:NFt,clean:BFt}});var bRe=ne((Cdr,_Re)=>{"use strict";_Re.exports={attributes:q3(),supplyDefaults:IPe(),colorbar:ph(),formatLabels:zPe(),calc:aY(),calcGeoJSON:DY().calcGeoJSON,plot:DY().plot,style:CY(),styleOnSelect:Tv().styleOnSelect,hoverPoints:H6e(),eventData:Y6e(),selectPoints:Z6e(),moduleType:"trace",name:"scattergeo",basePlotModule:YY(),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}});var TRe=ne((Ldr,wRe)=>{"use strict";wRe.exports=bRe()});var GE=ne((Pdr,SRe)=>{"use strict";var UFt=Ba().hovertemplateAttrs,c1=q3(),VFt=Ps(),ARe=es(),HFt=Ku().defaultLine,f1=oa().extendFlat,MRe=c1.marker.line;SRe.exports=f1({locations:{valType:"data_array",editType:"calc"},locationmode:c1.locationmode,z:{valType:"data_array",editType:"calc"},geojson:f1({},c1.geojson,{}),featureidkey:c1.featureidkey,text:f1({},c1.text,{}),hovertext:f1({},c1.hovertext,{}),marker:{line:{color:f1({},MRe.color,{dflt:HFt}),width:f1({},MRe.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:c1.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:c1.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:f1({},ARe.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:UFt(),showlegend:f1({},ARe.showlegend,{dflt:!1})},VFt("",{cLetter:"z",editTypeOverride:"calc"}))});var kRe=ne((Rdr,ERe)=>{"use strict";var qD=Wt(),GFt=Kf(),YFt=GE();ERe.exports=function(t,r,i,n){function a(h,v){return qD.coerce(t,r,YFt,h,v)}var o=a("locations"),s=a("z");if(!(o&&o.length&&qD.isArrayOrTypedArray(s)&&s.length)){r.visible=!1;return}r._length=Math.min(o.length,s.length);var l=a("geojson"),u;(typeof l=="string"&&l!==""||qD.isPlainObject(l))&&(u="geojson-id");var f=a("locationmode",u);f==="geojson-id"&&a("featureidkey"),a("text"),a("hovertext"),a("hovertemplate");var c=a("marker.line.width");c&&a("marker.line.color"),a("marker.opacity"),GFt(t,r,n,a,{prefix:"",cLetter:"z"}),qD.coerceSelectionMarkerOpacity(r,a)}});var WY=ne((Ddr,PRe)=>{"use strict";var CRe=la(),WFt=$a().BADNUM,XFt=gv(),ZFt=Z0(),jFt=gp();function LRe(e){return e&&typeof e=="string"}PRe.exports=function(t,r){var i=r._length,n=new Array(i),a;r.geojson?a=function(f){return LRe(f)||CRe(f)}:a=LRe;for(var o=0;o<i;o++){var s=n[o]={},l=r.locations[o],u=r.z[o];a(l)&&CRe(u)?(s.loc=l,s.z=u):(s.loc=null,s.z=WFt),s.index=o}return ZFt(n,r),XFt(t,r,{vals:r.z,containerStr:"",cLetter:"z"}),jFt(n,r),n}});var zD=ne((Idr,DRe)=>{"use strict";var KFt=Ai(),JFt=_i(),XY=aa(),QFt=ul();function $Ft(e,t){t&&RRe(e,t)}function RRe(e,t){var r=t[0].trace,i=t[0].node3,n=i.selectAll(".choroplethlocation"),a=r.marker||{},o=a.line||{},s=QFt.makeColorScaleFuncFromTrace(r);n.each(function(l){KFt.select(this).attr("fill",s(l.z)).call(JFt.stroke,l.mlc||o.color).call(XY.dashLine,"",l.mlw||o.width||0).style("opacity",a.opacity)}),XY.selectedPointStyle(n,r)}function e8t(e,t){var r=t[0].node3,i=t[0].trace;i.selectedpoints?XY.selectedPointStyle(r.selectAll(".choroplethlocation"),i):RRe(e,t)}DRe.exports={style:$Ft,styleOnSelect:e8t}});var ZY=ne((Fdr,qRe)=>{"use strict";var t8t=Ai(),IRe=Wt(),V3=O3(),r8t=yD().getTopojsonFeatures,FRe=Cd().findExtremes,n8t=zD().style;function i8t(e,t,r){var i=t.layers.backplot.select(".choroplethlayer");IRe.makeTraceGroups(i,r,"trace choropleth").each(function(n){var a=t8t.select(this),o=a.selectAll("path.choroplethlocation").data(IRe.identity);o.enter().append("path").classed("choroplethlocation",!0),o.exit().remove(),n8t(e,n)})}function a8t(e,t){for(var r=e[0].trace,i=t[r.geo],n=i._subplot,a=r.locationmode,o=r._length,s=a==="geojson-id"?V3.extractTraceFeature(e):r8t(r,n.topojson),l=[],u=[],f=0;f<o;f++){var c=e[f],h=a==="geojson-id"?c.fOut:V3.locationToFeature(a,c.loc,s);if(h){c.geojson=h,c.ct=h.properties.ct,c._polygons=V3.feature2polygons(h);var v=V3.computeBbox(h);l.push(v[0],v[2]),u.push(v[1],v[3])}else c.geojson=null}if(i.fitbounds==="geojson"&&a==="geojson-id"){var d=V3.computeBbox(V3.getTraceGeojson(r));l=[d[0],d[2]],u=[d[1],d[3]]}var _={padded:!0};r._extremes.lon=FRe(i.lonaxis._ax,l,_),r._extremes.lat=FRe(i.lataxis._ax,u,_)}qRe.exports={calcGeoJSON:a8t,plot:i8t}});var jY=ne((qdr,zRe)=>{"use strict";var o8t=Xi(),s8t=GE(),l8t=Wt().fillText;zRe.exports=function(t,r,i){var n=t.cd,a=n[0].trace,o=t.subplot,s,l,u,f,c=[r,i],h=[r+360,i];for(l=0;l<n.length;l++)if(s=n[l],f=!1,s._polygons){for(u=0;u<s._polygons.length;u++)s._polygons[u].contains(c)&&(f=!f),s._polygons[u].contains(h)&&(f=!f);if(f)break}if(!(!f||!s))return t.x0=t.x1=t.xa.c2p(s.ct),t.y0=t.y1=t.ya.c2p(s.ct),t.index=s.index,t.location=s.loc,t.z=s.z,t.zLabel=o8t.tickText(o.mockAxis,o.mockAxis.c2l(s.z),"hover").text,t.hovertemplate=s.hovertemplate,u8t(t,a,s),[t]};function u8t(e,t,r){if(!t.hovertemplate){var i=r.hi||t.hoverinfo,n=String(r.loc),a=i==="all"?s8t.hoverinfo.flags:i.split("+"),o=a.indexOf("name")!==-1,s=a.indexOf("location")!==-1,l=a.indexOf("z")!==-1,u=a.indexOf("text")!==-1,f=!o&&s,c=[];f?e.nameOverride=n:(o&&(e.nameOverride=t.name),s&&c.push(n)),l&&c.push(e.zLabel),u&&l8t(r,t,c),e.extraText=c.join("<br>")}}});var KY=ne((zdr,ORe)=>{"use strict";ORe.exports=function(t,r,i,n,a){t.location=r.location,t.z=r.z;var o=n[a];return o.fIn&&o.fIn.properties&&(t.properties=o.fIn.properties),t.ct=o.ct,t}});var JY=ne((Odr,BRe)=>{"use strict";BRe.exports=function(t,r){var i=t.cd,n=t.xaxis,a=t.yaxis,o=[],s,l,u,f,c;if(r===!1)for(s=0;s<i.length;s++)i[s].selected=0;else for(s=0;s<i.length;s++)l=i[s],u=l.ct,u&&(f=n.c2p(u),c=a.c2p(u),r.contains([f,c],null,s,t)?(o.push({pointNumber:s,lon:u[0],lat:u[1]}),l.selected=1):l.selected=0);return o}});var URe=ne((Bdr,NRe)=>{"use strict";NRe.exports={attributes:GE(),supplyDefaults:kRe(),colorbar:jx(),calc:WY(),calcGeoJSON:ZY().calcGeoJSON,plot:ZY().plot,style:zD().style,styleOnSelect:zD().styleOnSelect,hoverPoints:jY(),eventData:KY(),selectPoints:JY(),moduleType:"trace",name:"choropleth",basePlotModule:YY(),categories:["geo","noOpacity","showLegend"],meta:{}}});var HRe=ne((Ndr,VRe)=>{"use strict";VRe.exports=URe()});var OD=ne((Udr,YRe)=>{"use strict";var f8t=wi(),zp=Wt(),c8t=Z2();function h8t(e,t,r,i){var n=e.cd,a=n[0].t,o=n[0].trace,s=e.xa,l=e.ya,u=a.x,f=a.y,c=s.c2p(t),h=l.c2p(r),v=e.distance,d;if(a.tree){var _=s.p2c(c-v),T=s.p2c(c+v),p=l.p2c(h-v),M=l.p2c(h+v);i==="x"?d=a.tree.range(Math.min(_,T),Math.min(l._rl[0],l._rl[1]),Math.max(_,T),Math.max(l._rl[0],l._rl[1])):d=a.tree.range(Math.min(_,T),Math.min(p,M),Math.max(_,T),Math.max(p,M))}else d=a.ids;var b,w,k,x,E,S,g,C,A,P=v;if(i==="x"){var D=!!o.xperiodalignment,z=!!o.yperiodalignment;for(E=0;E<d.length;E++){if(b=d[E],k=u[b],S=Math.abs(s.c2p(k)-c),D){var O=s.c2p(o._xStarts[b]),V=s.c2p(o._xEnds[b]);S=c>=Math.min(O,V)&&c<=Math.max(O,V)?0:1/0}if(S<P){if(P=S,x=f[b],g=l.c2p(x)-h,z){var B=l.c2p(o._yStarts[b]),F=l.c2p(o._yEnds[b]);g=h>=Math.min(B,F)&&h<=Math.max(B,F)?0:1/0}A=Math.sqrt(S*S+g*g),w=d[E]}}}else for(E=d.length-1;E>-1;E--)b=d[E],k=u[b],x=f[b],S=s.c2p(k)-c,g=l.c2p(x)-h,C=Math.sqrt(S*S+g*g),C<P&&(P=A=C,w=b);return e.index=w,e.distance=P,e.dxy=A,w===void 0?[e]:[GRe(e,u,f,o)]}function GRe(e,t,r,i){var n=e.xa,a=e.ya,o=e.distance,s=e.dxy,l=e.index,u={pointNumber:l,x:t[l],y:r[l]};u.tx=zp.isArrayOrTypedArray(i.text)?i.text[l]:i.text,u.htx=Array.isArray(i.hovertext)?i.hovertext[l]:i.hovertext,u.data=Array.isArray(i.customdata)?i.customdata[l]:i.customdata,u.tp=Array.isArray(i.textposition)?i.textposition[l]:i.textposition;var f=i.textfont;f&&(u.ts=zp.isArrayOrTypedArray(f.size)?f.size[l]:f.size,u.tc=Array.isArray(f.color)?f.color[l]:f.color,u.tf=Array.isArray(f.family)?f.family[l]:f.family);var c=i.marker;c&&(u.ms=zp.isArrayOrTypedArray(c.size)?c.size[l]:c.size,u.mo=zp.isArrayOrTypedArray(c.opacity)?c.opacity[l]:c.opacity,u.mx=zp.isArrayOrTypedArray(c.symbol)?c.symbol[l]:c.symbol,u.ma=zp.isArrayOrTypedArray(c.angle)?c.angle[l]:c.angle,u.mc=zp.isArrayOrTypedArray(c.color)?c.color[l]:c.color);var h=c&&c.line;h&&(u.mlc=Array.isArray(h.color)?h.color[l]:h.color,u.mlw=zp.isArrayOrTypedArray(h.width)?h.width[l]:h.width);var v=c&&c.gradient;v&&v.type!=="none"&&(u.mgt=Array.isArray(v.type)?v.type[l]:v.type,u.mgc=Array.isArray(v.color)?v.color[l]:v.color);var d=n.c2p(u.x,!0),_=a.c2p(u.y,!0),T=u.mrc||1,p=i.hoverlabel;p&&(u.hbg=Array.isArray(p.bgcolor)?p.bgcolor[l]:p.bgcolor,u.hbc=Array.isArray(p.bordercolor)?p.bordercolor[l]:p.bordercolor,u.hts=zp.isArrayOrTypedArray(p.font.size)?p.font.size[l]:p.font.size,u.htc=Array.isArray(p.font.color)?p.font.color[l]:p.font.color,u.htf=Array.isArray(p.font.family)?p.font.family[l]:p.font.family,u.hnl=zp.isArrayOrTypedArray(p.namelength)?p.namelength[l]:p.namelength);var M=i.hoverinfo;M&&(u.hi=Array.isArray(M)?M[l]:M);var b=i.hovertemplate;b&&(u.ht=Array.isArray(b)?b[l]:b);var w={};w[e.index]=u;var k=i._origX,x=i._origY,E=zp.extendFlat({},e,{color:c8t(i,u),x0:d-T,x1:d+T,xLabelVal:k?k[l]:u.x,y0:_-T,y1:_+T,yLabelVal:x?x[l]:u.y,cd:w,distance:o,spikeDistance:s,hovertemplate:u.ht});return u.htx?E.text=u.htx:u.tx?E.text=u.tx:i.text&&(E.text=i.text),zp.fillText(u,i,E),f8t.getComponentMethod("errorbars","hoverInfo")(u,i,E),E}YRe.exports={hoverPoints:h8t,calcHover:GRe}});var h1=ne((Vdr,XRe)=>{"use strict";var WRe=20;XRe.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:WRe,SYMBOL_STROKE:WRe/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}});var YE=ne((Hdr,JRe)=>{"use strict";var v8t=es(),d8t=Y0(),Ul=cu(),ZRe=kl().axisHoverFormat,jRe=Ps(),p8t=rx(),QY=oa().extendFlat,g8t=Xs().overrideAll,y8t=h1().DASHES,KRe=Ul.line,yy=Ul.marker,m8t=yy.line,H3=JRe.exports=g8t({x:Ul.x,x0:Ul.x0,dx:Ul.dx,y:Ul.y,y0:Ul.y0,dy:Ul.dy,xperiod:Ul.xperiod,yperiod:Ul.yperiod,xperiod0:Ul.xperiod0,yperiod0:Ul.yperiod0,xperiodalignment:Ul.xperiodalignment,yperiodalignment:Ul.yperiodalignment,xhoverformat:ZRe("x"),yhoverformat:ZRe("y"),text:Ul.text,hovertext:Ul.hovertext,textposition:Ul.textposition,textfont:Ul.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:KRe.color,width:KRe.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:p8t(y8t),dflt:"solid"}},marker:QY({},jRe("marker"),{symbol:yy.symbol,angle:yy.angle,size:yy.size,sizeref:yy.sizeref,sizemin:yy.sizemin,sizemode:yy.sizemode,opacity:yy.opacity,colorbar:yy.colorbar,line:QY({},jRe("marker.line"),{width:m8t.width})}),connectgaps:Ul.connectgaps,fill:QY({},Ul.fill,{dflt:"none"}),fillcolor:d8t(),selected:{marker:Ul.selected.marker,textfont:Ul.selected.textfont},unselected:{marker:Ul.unselected.marker,textfont:Ul.unselected.textfont},opacity:v8t.opacity},"calc","nested");H3.x.editType=H3.y.editType=H3.x0.editType=H3.y0.editType="calc+clearAxisTypes";H3.hovertemplate=Ul.hovertemplate;H3.texttemplate=Ul.texttemplate});var BD=ne($Y=>{"use strict";var QRe=h1();$Y.isOpenSymbol=function(e){return typeof e=="string"?QRe.OPEN_RE.test(e):e%200>100};$Y.isDotSymbol=function(e){return typeof e=="string"?QRe.DOT_RE.test(e):e>200}});var tDe=ne((Ydr,eDe)=>{"use strict";var $Re=Wt(),x8t=wi(),_8t=BD(),b8t=YE(),w8t=G0(),ND=js(),T8t=O2(),A8t=o0(),M8t=dp(),S8t=s0(),E8t=X0(),k8t=l0();eDe.exports=function(t,r,i,n){function a(v,d){return $Re.coerce(t,r,b8t,v,d)}var o=t.marker?_8t.isOpenSymbol(t.marker.symbol):!1,s=ND.isBubble(t),l=T8t(t,r,n,a);if(!l){r.visible=!1;return}A8t(t,r,n,a),a("xhoverformat"),a("yhoverformat");var u=l<w8t.PTS_LINESONLY?"lines+markers":"lines";a("text"),a("hovertext"),a("hovertemplate"),a("mode",u),ND.hasMarkers(r)&&(M8t(t,r,i,n,a,{noAngleRef:!0,noStandOff:!0}),a("marker.line.width",o||s?1:0)),ND.hasLines(r)&&(a("connectgaps"),S8t(t,r,i,n,a),a("line.shape")),ND.hasText(r)&&(a("texttemplate"),k8t(t,r,n,a));var f=(r.line||{}).color,c=(r.marker||{}).color;a("fill"),r.fill!=="none"&&E8t(t,r,i,a);var h=x8t.getComponentMethod("errorbars","supplyDefaults");h(t,r,f||c||i,{axis:"y"}),h(t,r,f||c||i,{axis:"x",inherit:"y"}),$Re.coerceSelectionMarkerOpacity(r,a)}});var nDe=ne((Wdr,rDe)=>{"use strict";var C8t=hL();rDe.exports=function(t,r,i){var n=t.i;return"x"in t||(t.x=r._x[n]),"y"in t||(t.y=r._y[n]),C8t(t,r,i)}});var aDe=ne((Xdr,iDe)=>{"use strict";function L8t(e,t,r,i,n){for(var a=n+1;i<=n;){var o=i+n>>>1,s=e[o],l=r!==void 0?r(s,t):s-t;l>=0?(a=o,n=o-1):i=o+1}return a}function P8t(e,t,r,i,n){for(var a=n+1;i<=n;){var o=i+n>>>1,s=e[o],l=r!==void 0?r(s,t):s-t;l>0?(a=o,n=o-1):i=o+1}return a}function R8t(e,t,r,i,n){for(var a=i-1;i<=n;){var o=i+n>>>1,s=e[o],l=r!==void 0?r(s,t):s-t;l<0?(a=o,i=o+1):n=o-1}return a}function D8t(e,t,r,i,n){for(var a=i-1;i<=n;){var o=i+n>>>1,s=e[o],l=r!==void 0?r(s,t):s-t;l<=0?(a=o,i=o+1):n=o-1}return a}function I8t(e,t,r,i,n){for(;i<=n;){var a=i+n>>>1,o=e[a],s=r!==void 0?r(o,t):o-t;if(s===0)return a;s<=0?i=a+1:n=a-1}return-1}function WE(e,t,r,i,n,a){return typeof r=="function"?a(e,t,r,i===void 0?0:i|0,n===void 0?e.length-1:n|0):a(e,t,void 0,r===void 0?0:r|0,i===void 0?e.length-1:i|0)}iDe.exports={ge:function(e,t,r,i,n){return WE(e,t,r,i,n,L8t)},gt:function(e,t,r,i,n){return WE(e,t,r,i,n,P8t)},lt:function(e,t,r,i,n){return WE(e,t,r,i,n,R8t)},le:function(e,t,r,i,n){return WE(e,t,r,i,n,D8t)},eq:function(e,t,r,i,n){return WE(e,t,r,i,n,I8t)}}});var vg=ne((Zdr,sDe)=>{"use strict";sDe.exports=function(t,r,i){var n={},a,o;if(typeof r=="string"&&(r=oDe(r)),Array.isArray(r)){var s={};for(o=0;o<r.length;o++)s[r[o]]=!0;r=s}for(a in r)r[a]=oDe(r[a]);var l={};for(a in r){var u=r[a];if(Array.isArray(u))for(o=0;o<u.length;o++){var f=u[o];if(i&&(l[f]=!0),f in t){if(n[a]=t[f],i)for(var c=o;c<u.length;c++)l[u[c]]=!0;break}}else a in t&&(r[a]&&(n[a]=t[a]),i&&(l[a]=!0))}if(i)for(a in t)l[a]||(n[a]=t[a]);return n};var eW={};function oDe(e){return eW[e]?eW[e]:(typeof e=="string"&&(e=eW[e]=e.split(/\s*,\s*|\s+/)),e)}});var G3=ne((jdr,lDe)=>{"use strict";var F8t=vg();lDe.exports=q8t;function q8t(e){var t;return arguments.length>1&&(e=arguments),typeof e=="string"?e=e.split(/\s/).map(parseFloat):typeof e=="number"&&(e=[e]),e.length&&typeof e[0]=="number"?e.length===1?t={width:e[0],height:e[0],x:0,y:0}:e.length===2?t={width:e[0],height:e[1],x:0,y:0}:t={x:e[0],y:e[1],width:e[2]-e[0]||0,height:e[3]-e[1]||0}:e&&(e=F8t(e,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),t={x:e.left||0,y:e.top||0},e.width==null?e.right?t.width=e.right-t.x:t.width=0:t.width=e.width,e.height==null?e.bottom?t.height=e.bottom-t.y:t.height=0:t.height=e.height),t}});var z_=ne((Kdr,uDe)=>{"use strict";uDe.exports=z8t;function z8t(e,t){if(!e||e.length==null)throw Error("Argument should be an array");t==null?t=1:t=Math.floor(t);for(var r=Array(t*2),i=0;i<t;i++){for(var n=-1/0,a=1/0,o=i,s=e.length;o<s;o+=t)e[o]>n&&(n=e[o]),e[o]<a&&(a=e[o]);r[i]=a,r[t+i]=n}return r}});var cDe=ne((Jdr,fDe)=>{fDe.exports=function(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==void 0)return arguments[e]}});var O_=ne((Qdr,vDe)=>{var hDe=JR();vDe.exports=O8t;function O8t(e,t,r){if(!e)throw new TypeError("must specify data as first parameter");if(r=+(r||0)|0,Array.isArray(e)&&e[0]&&typeof e[0][0]=="number"){var i=e[0].length,n=e.length*i,a,o,s,l;(!t||typeof t=="string")&&(t=new(hDe(t||"float32"))(n+r));var u=t.length-r;if(n!==u)throw new Error("source length "+n+" ("+i+"x"+e.length+") does not match destination length "+u);for(a=0,s=r;a<e.length;a++)for(o=0;o<i;o++)t[s++]=e[a][o]===null?NaN:e[a][o]}else if(!t||typeof t=="string"){var f=hDe(t||"float32");if(Array.isArray(e)||t==="array")for(t=new f(e.length+r),a=0,s=r,l=t.length;s<l;s++,a++)t[s]=e[a]===null?NaN:e[a];else r===0?t=new f(e):(t=new f(e.length+r),t.set(e,r))}else t.set(e,r);return t}});var pDe=ne(($dr,dDe)=>{"use strict";dDe.exports=function(e){var t=typeof e;return e!==null&&(t==="object"||t==="function")}});var yDe=ne((epr,gDe)=>{"use strict";gDe.exports=Math.log2||function(e){return Math.log(e)*Math.LOG2E}});var ADe=ne((tpr,TDe)=>{"use strict";var mDe=aDe(),xDe=E3(),B8t=G3(),N8t=z_(),_De=vg(),tW=cDe(),U8t=O_(),V8t=pDe(),H8t=JR(),bDe=yDe(),G8t=1073741824;TDe.exports=function(t,r){r||(r={}),t=U8t(t,"float64"),r=_De(r,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});let i=tW(r.maxDepth,255),n=tW(r.bounds,N8t(t,2));n[0]===n[2]&&n[2]++,n[1]===n[3]&&n[3]++;let a=wDe(t,n),o=t.length>>>1,s;r.dtype||(r.dtype="array"),typeof r.dtype=="string"?s=new(H8t(r.dtype))(o):r.dtype&&(s=r.dtype,Array.isArray(s)&&(s.length=o));for(let p=0;p<o;++p)s[p]=p;let l=[],u=[],f=[],c=[];v(0,0,1,s,0,1);let h=0;for(let p=0;p<l.length;p++){let M=l[p];if(s.set)s.set(M,h);else for(let w=0,k=M.length;w<k;w++)s[w+h]=M[w];let b=h+l[p].length;c[p]=[h,b],h=b}return s.range=d,s;function v(p,M,b,w,k,x){if(!w.length)return null;let E=l[k]||(l[k]=[]),S=f[k]||(f[k]=[]),g=u[k]||(u[k]=[]),C=E.length;if(k++,k>i||x>G8t){for(let F=0;F<w.length;F++)E.push(w[F]),S.push(x),g.push(null,null,null,null);return C}if(E.push(w[0]),S.push(x),w.length<=1)return g.push(null,null,null,null),C;let A=b*.5,P=p+A,D=M+A,z=[],O=[],V=[],B=[];for(let F=1,N=w.length;F<N;F++){let Z=w[F],J=a[Z*2],re=a[Z*2+1];J<P?re<D?z.push(Z):O.push(Z):re<D?V.push(Z):B.push(Z)}return x<<=2,g.push(v(p,M,A,z,k,x),v(p,D,A,O,k,x+1),v(P,M,A,V,k,x+2),v(P,D,A,B,k,x+3)),C}function d(...p){let M;if(V8t(p[p.length-1])){let V=p.pop();!p.length&&(V.x!=null||V.l!=null||V.left!=null)&&(p=[V],M={}),M=_De(V,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else M={};p.length||(p=n);let b=B8t(...p),[w,k,x,E]=[Math.min(b.x,b.x+b.width),Math.min(b.y,b.y+b.height),Math.max(b.x,b.x+b.width),Math.max(b.y,b.y+b.height)],[S,g,C,A]=wDe([w,k,x,E],n),P=tW(M.level,l.length);if(M.d!=null){let V;typeof M.d=="number"?V=[M.d,M.d]:M.d.length&&(V=M.d),P=Math.min(Math.max(Math.ceil(-bDe(Math.abs(V[0])/(n[2]-n[0]))),Math.ceil(-bDe(Math.abs(V[1])/(n[3]-n[1])))),P)}if(P=Math.min(P,l.length),M.lod)return _(S,g,C,A,P);let D=[];z(0,0,1,0,0,1);function z(V,B,F,N,Z,J){if(Z===null||J===null)return;let re=V+F,ue=B+F;if(S>re||g>ue||C<V||A<B||N>=P||Z===J)return;let fe=l[N];J===void 0&&(J=fe.length);for(let ge=Z;ge<J;ge++){let le=fe[ge],we=t[le*2],Re=t[le*2+1];we>=w&&we<=x&&Re>=k&&Re<=E&&D.push(le)}let K=u[N],X=K[Z*4+0],ae=K[Z*4+1],oe=K[Z*4+2],me=K[Z*4+3],xe=O(K,Z+1),ce=F*.5,ie=N+1;z(V,B,ce,ie,X,ae||oe||me||xe),z(V,B+ce,ce,ie,ae,oe||me||xe),z(V+ce,B,ce,ie,oe,me||xe),z(V+ce,B+ce,ce,ie,me,xe)}function O(V,B){let F=null,N=0;for(;F===null;)if(F=V[B*4+N],N++,N>V.length)return null;return F}return D}function _(p,M,b,w,k){let x=[];for(let E=0;E<k;E++){let S=f[E],g=c[E][0],C=T(p,M,E),A=T(b,w,E),P=mDe.ge(S,C),D=mDe.gt(S,A,P,S.length-1);x[E]=[P+g,D+g]}return x}function T(p,M,b){let w=1,k=.5,x=.5,E=.5;for(let S=0;S<b;S++)w<<=2,w+=p<k?M<x?0:1:M<x?2:3,E*=.5,k+=p<k?-E:E,x+=M<x?-E:E;return w}};function wDe(e,t){let[r,i,n,a]=t,o=1/(n-r),s=1/(a-i),l=new Array(e.length);for(let u=0,f=e.length/2;u<f;u++)l[2*u]=xDe((e[2*u]-r)*o,0,1),l[2*u+1]=xDe((e[2*u+1]-i)*s,0,1);return l}});var UD=ne((rpr,MDe)=>{"use strict";MDe.exports=ADe()});var rW=ne((npr,SDe)=>{SDe.exports=Y8t;function Y8t(e){var t=0,r=0,i=0,n=0;return e.map(function(a){a=a.slice();var o=a[0],s=o.toUpperCase();if(o!=s)switch(a[0]=s,o){case"a":a[6]+=i,a[7]+=n;break;case"v":a[1]+=n;break;case"h":a[1]+=i;break;default:for(var l=1;l<a.length;)a[l++]+=i,a[l++]+=n}switch(s){case"Z":i=t,n=r;break;case"H":i=a[1];break;case"V":n=a[1];break;case"M":i=t=a[1],n=r=a[2];break;default:i=a[a.length-2],n=a[a.length-1]}return a})}});var CDe=ne((VD,kDe)=>{"use strict";Object.defineProperty(VD,"__esModule",{value:!0});var W8t=function(){function e(t,r){var i=[],n=!0,a=!1,o=void 0;try{for(var s=t[Symbol.iterator](),l;!(n=(l=s.next()).done)&&(i.push(l.value),!(r&&i.length===r));n=!0);}catch(u){a=!0,o=u}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}return i}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),XE=Math.PI*2,nW=function(t,r,i,n,a,o,s){var l=t.x,u=t.y;l*=r,u*=i;var f=n*l-a*u,c=a*l+n*u;return{x:f+o,y:c+s}},X8t=function(t,r){var i=r===1.5707963267948966?.551915024494:r===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(r/4),n=Math.cos(t),a=Math.sin(t),o=Math.cos(t+r),s=Math.sin(t+r);return[{x:n-a*i,y:a+n*i},{x:o+s*i,y:s-o*i},{x:o,y:s}]},EDe=function(t,r,i,n){var a=t*n-r*i<0?-1:1,o=t*i+r*n;return o>1&&(o=1),o<-1&&(o=-1),a*Math.acos(o)},Z8t=function(t,r,i,n,a,o,s,l,u,f,c,h){var v=Math.pow(a,2),d=Math.pow(o,2),_=Math.pow(c,2),T=Math.pow(h,2),p=v*d-v*T-d*_;p<0&&(p=0),p/=v*T+d*_,p=Math.sqrt(p)*(s===l?-1:1);var M=p*a/o*h,b=p*-o/a*c,w=f*M-u*b+(t+i)/2,k=u*M+f*b+(r+n)/2,x=(c-M)/a,E=(h-b)/o,S=(-c-M)/a,g=(-h-b)/o,C=EDe(1,0,x,E),A=EDe(x,E,S,g);return l===0&&A>0&&(A-=XE),l===1&&A<0&&(A+=XE),[w,k,C,A]},j8t=function(t){var r=t.px,i=t.py,n=t.cx,a=t.cy,o=t.rx,s=t.ry,l=t.xAxisRotation,u=l===void 0?0:l,f=t.largeArcFlag,c=f===void 0?0:f,h=t.sweepFlag,v=h===void 0?0:h,d=[];if(o===0||s===0)return[];var _=Math.sin(u*XE/360),T=Math.cos(u*XE/360),p=T*(r-n)/2+_*(i-a)/2,M=-_*(r-n)/2+T*(i-a)/2;if(p===0&&M===0)return[];o=Math.abs(o),s=Math.abs(s);var b=Math.pow(p,2)/Math.pow(o,2)+Math.pow(M,2)/Math.pow(s,2);b>1&&(o*=Math.sqrt(b),s*=Math.sqrt(b));var w=Z8t(r,i,n,a,o,s,c,v,_,T,p,M),k=W8t(w,4),x=k[0],E=k[1],S=k[2],g=k[3],C=Math.abs(g)/(XE/4);Math.abs(1-C)<1e-7&&(C=1);var A=Math.max(Math.ceil(C),1);g/=A;for(var P=0;P<A;P++)d.push(X8t(S,g)),S+=g;return d.map(function(D){var z=nW(D[0],o,s,T,_,x,E),O=z.x,V=z.y,B=nW(D[1],o,s,T,_,x,E),F=B.x,N=B.y,Z=nW(D[2],o,s,T,_,x,E),J=Z.x,re=Z.y;return{x1:O,y1:V,x2:F,y2:N,x:J,y:re}})};VD.default=j8t;kDe.exports=VD.default});var RDe=ne((ipr,PDe)=>{"use strict";PDe.exports=J8t;var K8t=CDe();function J8t(e){for(var t,r=[],i=0,n=0,a=0,o=0,s=null,l=null,u=0,f=0,c=0,h=e.length;c<h;c++){var v=e[c],d=v[0];switch(d){case"M":a=v[1],o=v[2];break;case"A":var _=K8t({px:u,py:f,cx:v[6],cy:v[7],rx:v[1],ry:v[2],xAxisRotation:v[3],largeArcFlag:v[4],sweepFlag:v[5]});if(!_.length)continue;for(var T=0,p;T<_.length;T++)p=_[T],v=["C",p.x1,p.y1,p.x2,p.y2,p.x,p.y],T<_.length-1&&r.push(v);break;case"S":var M=u,b=f;(t=="C"||t=="S")&&(M+=M-i,b+=b-n),v=["C",M,b,v[1],v[2],v[3],v[4]];break;case"T":t=="Q"||t=="T"?(s=u*2-s,l=f*2-l):(s=u,l=f),v=LDe(u,f,s,l,v[1],v[2]);break;case"Q":s=v[1],l=v[2],v=LDe(u,f,v[1],v[2],v[3],v[4]);break;case"L":v=HD(u,f,v[1],v[2]);break;case"H":v=HD(u,f,v[1],f);break;case"V":v=HD(u,f,u,v[1]);break;case"Z":v=HD(u,f,a,o);break}t=d,u=v[v.length-2],f=v[v.length-1],v.length>4?(i=v[v.length-4],n=v[v.length-3]):(i=u,n=f),r.push(v)}return r}function HD(e,t,r,i){return["C",e,t,r,i,r,i]}function LDe(e,t,r,i,n,a){return["C",e/3+2/3*r,t/3+2/3*i,n/3+2/3*r,a/3+2/3*i,n,a]}});var iW=ne((apr,DDe)=>{"use strict";DDe.exports=function(t){return typeof t!="string"?!1:(t=t.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(t)&&/[\dz]$/i.test(t)&&t.length>4))}});var qDe=ne((opr,FDe)=>{"use strict";var Q8t=kA(),$8t=rW(),eqt=RDe(),tqt=iW(),IDe=BS();FDe.exports=rqt;function rqt(e){if(Array.isArray(e)&&e.length===1&&typeof e[0]=="string"&&(e=e[0]),typeof e=="string"&&(IDe(tqt(e),"String is not an SVG path."),e=Q8t(e)),IDe(Array.isArray(e),"Argument should be a string or an array of path segments."),e=$8t(e),e=eqt(e),!e.length)return[0,0,0,0];for(var t=[1/0,1/0,-1/0,-1/0],r=0,i=e.length;r<i;r++)for(var n=e[r].slice(1),a=0;a<n.length;a+=2)n[a+0]<t[0]&&(t[0]=n[a+0]),n[a+1]<t[1]&&(t[1]=n[a+1]),n[a+0]>t[2]&&(t[2]=n[a+0]),n[a+1]>t[3]&&(t[3]=n[a+1]);return t}});var VDe=ne((spr,UDe)=>{var B_=Math.PI,zDe=NDe(120);UDe.exports=nqt;function nqt(e){for(var t,r=[],i=0,n=0,a=0,o=0,s=null,l=null,u=0,f=0,c=0,h=e.length;c<h;c++){var v=e[c],d=v[0];switch(d){case"M":a=v[1],o=v[2];break;case"A":v=BDe(u,f,v[1],v[2],NDe(v[3]),v[4],v[5],v[6],v[7]),v.unshift("C"),v.length>7&&(r.push(v.splice(0,7)),v.unshift("C"));break;case"S":var _=u,T=f;(t=="C"||t=="S")&&(_+=_-i,T+=T-n),v=["C",_,T,v[1],v[2],v[3],v[4]];break;case"T":t=="Q"||t=="T"?(s=u*2-s,l=f*2-l):(s=u,l=f),v=ODe(u,f,s,l,v[1],v[2]);break;case"Q":s=v[1],l=v[2],v=ODe(u,f,v[1],v[2],v[3],v[4]);break;case"L":v=GD(u,f,v[1],v[2]);break;case"H":v=GD(u,f,v[1],f);break;case"V":v=GD(u,f,u,v[1]);break;case"Z":v=GD(u,f,a,o);break}t=d,u=v[v.length-2],f=v[v.length-1],v.length>4?(i=v[v.length-4],n=v[v.length-3]):(i=u,n=f),r.push(v)}return r}function GD(e,t,r,i){return["C",e,t,r,i,r,i]}function ODe(e,t,r,i,n,a){return["C",e/3+2/3*r,t/3+2/3*i,n/3+2/3*r,a/3+2/3*i,n,a]}function BDe(e,t,r,i,n,a,o,s,l,u){if(u)b=u[0],w=u[1],p=u[2],M=u[3];else{var f=aW(e,t,-n);e=f.x,t=f.y,f=aW(s,l,-n),s=f.x,l=f.y;var c=(e-s)/2,h=(t-l)/2,v=c*c/(r*r)+h*h/(i*i);v>1&&(v=Math.sqrt(v),r=v*r,i=v*i);var d=r*r,_=i*i,T=(a==o?-1:1)*Math.sqrt(Math.abs((d*_-d*h*h-_*c*c)/(d*h*h+_*c*c)));T==1/0&&(T=1);var p=T*r*h/i+(e+s)/2,M=T*-i*c/r+(t+l)/2,b=Math.asin(((t-M)/i).toFixed(9)),w=Math.asin(((l-M)/i).toFixed(9));b=e<p?B_-b:b,w=s<p?B_-w:w,b<0&&(b=B_*2+b),w<0&&(w=B_*2+w),o&&b>w&&(b=b-B_*2),!o&&w>b&&(w=w-B_*2)}if(Math.abs(w-b)>zDe){var k=w,x=s,E=l;w=b+zDe*(o&&w>b?1:-1),s=p+r*Math.cos(w),l=M+i*Math.sin(w);var S=BDe(s,l,r,i,n,0,o,x,E,[w,k,p,M])}var g=Math.tan((w-b)/4),C=4/3*r*g,A=4/3*i*g,P=[2*e-(e+C*Math.sin(b)),2*t-(t-A*Math.cos(b)),s+C*Math.sin(w),l-A*Math.cos(w),s,l];if(u)return P;S&&(P=P.concat(S));for(var D=0;D<P.length;){var z=aW(P[D],P[D+1],n);P[D++]=z.x,P[D++]=z.y}return P}function aW(e,t,r){return{x:e*Math.cos(r)-t*Math.sin(r),y:e*Math.sin(r)+t*Math.cos(r)}}function NDe(e){return e*(B_/180)}});var GDe=ne((lpr,HDe)=>{var iqt=rW(),aqt=VDe(),oqt={M:"moveTo",C:"bezierCurveTo"};HDe.exports=function(e,t){e.beginPath(),aqt(iqt(t)).forEach(function(r){var i=r[0],n=r.slice(1);e[oqt[i]].apply(e,n)}),e.closePath()}});var ZDe=ne((upr,XDe)=>{"use strict";var sqt=E3();XDe.exports=lqt;var ZE=1e20;function lqt(e,t){t||(t={});var r=t.cutoff==null?.25:t.cutoff,i=t.radius==null?8:t.radius,n=t.channel||0,a,o,s,l,u,f,c,h,v,d,_;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!t.width||!t.height)throw Error("For raw data width and height should be provided by options");a=t.width,o=t.height,l=e,t.stride?f=t.stride:f=Math.floor(e.length/a/o)}else window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement?(h=e,c=h.getContext("2d"),a=h.width,o=h.height,v=c.getImageData(0,0,a,o),l=v.data,f=4):window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D?(h=e.canvas,c=e,a=h.width,o=h.height,v=c.getImageData(0,0,a,o),l=v.data,f=4):window.ImageData&&e instanceof window.ImageData&&(v=e,a=e.width,o=e.height,l=v.data,f=4);if(s=Math.max(a,o),window.Uint8ClampedArray&&l instanceof window.Uint8ClampedArray||window.Uint8Array&&l instanceof window.Uint8Array)for(u=l,l=Array(a*o),d=0,_=u.length;d<_;d++)l[d]=u[d*f+n]/255;else if(f!==1)throw Error("Raw data can have only 1 value per pixel");var T=Array(a*o),p=Array(a*o),M=Array(s),b=Array(s),w=Array(s+1),k=Array(s);for(d=0,_=a*o;d<_;d++){var x=l[d];T[d]=x===1?0:x===0?ZE:Math.pow(Math.max(0,.5-x),2),p[d]=x===1?ZE:x===0?0:Math.pow(Math.max(0,x-.5),2)}YDe(T,a,o,M,b,k,w),YDe(p,a,o,M,b,k,w);var E=window.Float32Array?new Float32Array(a*o):new Array(a*o);for(d=0,_=a*o;d<_;d++)E[d]=sqt(1-((T[d]-p[d])/i+r),0,1);return E}function YDe(e,t,r,i,n,a,o){for(var s=0;s<t;s++){for(var l=0;l<r;l++)i[l]=e[l*t+s];for(WDe(i,n,a,o,r),l=0;l<r;l++)e[l*t+s]=n[l]}for(l=0;l<r;l++){for(s=0;s<t;s++)i[s]=e[l*t+s];for(WDe(i,n,a,o,t),s=0;s<t;s++)e[l*t+s]=Math.sqrt(n[s])}}function WDe(e,t,r,i,n){r[0]=0,i[0]=-ZE,i[1]=+ZE;for(var a=1,o=0;a<n;a++){for(var s=(e[a]+a*a-(e[r[o]]+r[o]*r[o]))/(2*a-2*r[o]);s<=i[o];)o--,s=(e[a]+a*a-(e[r[o]]+r[o]*r[o]))/(2*a-2*r[o]);o++,r[o]=a,i[o]=s,i[o+1]=+ZE}for(a=0,o=0;a<n;a++){for(;i[o+1]<a;)o++;t[a]=(a-r[o])*(a-r[o])+e[r[o]]}}});var KDe=ne((fpr,jDe)=>{"use strict";var uqt=qDe(),fqt=kA(),cqt=GDe(),hqt=iW(),vqt=ZDe(),oW=document.createElement("canvas"),Cv=oW.getContext("2d");jDe.exports=dqt;function dqt(e,t){if(!hqt(e))throw Error("Argument should be valid svg path string");t||(t={});var r,i;t.shape?(r=t.shape[0],i=t.shape[1]):(r=oW.width=t.w||t.width||200,i=oW.height=t.h||t.height||200);var n=Math.min(r,i),a=t.stroke||0,o=t.viewbox||t.viewBox||uqt(e),s=[r/(o[2]-o[0]),i/(o[3]-o[1])],l=Math.min(s[0]||0,s[1]||0)/2;if(Cv.fillStyle="black",Cv.fillRect(0,0,r,i),Cv.fillStyle="white",a&&(typeof a!="number"&&(a=1),a>0?Cv.strokeStyle="white":Cv.strokeStyle="black",Cv.lineWidth=Math.abs(a)),Cv.translate(r*.5,i*.5),Cv.scale(l,l),pqt()){var u=new Path2D(e);Cv.fill(u),a&&Cv.stroke(u)}else{var f=fqt(e);cqt(Cv,f),Cv.fill(),a&&Cv.stroke()}Cv.setTransform(1,0,0,1,0,0);var c=vqt(Cv,{cutoff:t.cutoff!=null?t.cutoff:.5,radius:t.radius!=null?t.radius:n*.5});return c}var YD;function pqt(){if(YD!=null)return YD;var e=document.createElement("canvas").getContext("2d");if(e.canvas.width=e.canvas.height=1,!window.Path2D)return YD=!1;var t=new Path2D("M0,0h1v1h-1v-1Z");e.fillStyle="black",e.fill(t);var r=e.getImageData(0,0,1,1);return YD=r&&r.data&&r.data[3]===255}});var U_=ne((cpr,oIe)=>{"use strict";var XD=la(),gqt=KDe(),WD=n1(),yqt=wi(),X3=Wt(),zu=X3.isArrayOrTypedArray,Y3=aa(),JDe=zl(),QDe=dy().formatColor,W3=js(),mqt=EA(),lW=BD(),jE=h1(),xqt=Yy().DESELECTDIM,$De={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},_qt=td().appendArrayPointValue;function bqt(e,t){var r,i={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},n=e._context.plotGlPixelRatio;if(t.visible!==!0)return i;if(W3.hasText(t)&&(i.text=aIe(e,t),i.textSel=eIe(e,t,t.selected),i.textUnsel=eIe(e,t,t.unselected)),W3.hasMarkers(t)&&(i.marker=fW(e,t),i.markerSel=uW(e,t,t.selected),i.markerUnsel=uW(e,t,t.unselected),!t.unselected&&zu(t.marker.opacity))){var a=t.marker.opacity;for(i.markerUnsel.opacity=new Array(a.length),r=0;r<a.length;r++)i.markerUnsel.opacity[r]=xqt*a[r]}if(W3.hasLines(t)){i.line={overlay:!0,thickness:t.line.width*n,color:t.line.color,opacity:t.opacity};var o=(jE.DASHES[t.line.dash]||[1]).slice();for(r=0;r<o.length;++r)o[r]*=t.line.width*n;i.line.dashes=o}return t.error_x&&t.error_x.visible&&(i.errorX=tIe(t,t.error_x,n)),t.error_y&&t.error_y.visible&&(i.errorY=tIe(t,t.error_y,n)),t.fill&&t.fill!=="none"&&(i.fill={closed:!0,fill:t.fillcolor,thickness:0}),i}function aIe(e,t){var r=e._fullLayout,i=t._length,n=t.textfont,a=t.textposition,o=zu(a)?a:[a],s=n.color,l=n.size,u=n.family,f={},c,h=e._context.plotGlPixelRatio,v=t.texttemplate;if(v){f.text=[];var d=r._d3locale,_=Array.isArray(v),T=_?Math.min(v.length,i):i,p=_?function(S){return v[S]}:function(){return v};for(c=0;c<T;c++){var M={i:c},b=t._module.formatLabels(M,t,r),w={};_qt(w,t,c);var k=t._meta||{};f.text.push(X3.texttemplateString(p(c),b,d,w,M,k))}}else zu(t.text)&&t.text.length<i?f.text=t.text.slice():f.text=t.text;if(zu(f.text))for(c=f.text.length;c<i;c++)f.text[c]="";for(f.opacity=t.opacity,f.font={},f.align=[],f.baseline=[],c=0;c<o.length;c++){var x=o[c].split(/\s+/);switch(x[1]){case"left":f.align.push("right");break;case"right":f.align.push("left");break;default:f.align.push(x[1])}switch(x[0]){case"top":f.baseline.push("bottom");break;case"bottom":f.baseline.push("top");break;default:f.baseline.push(x[0])}}if(zu(s))for(f.color=new Array(i),c=0;c<i;c++)f.color[c]=s[c];else f.color=s;if(zu(l)||zu(u))for(f.font=new Array(i),c=0;c<i;c++){var E=f.font[c]={};E.size=(X3.isTypedArray(l)?l[c]:zu(l)?XD(l[c])?l[c]:0:l)*h,E.family=zu(u)?u[c]:u}else f.font={size:l*h,family:u};return f}function fW(e,t){var r=t._length,i=t.marker,n={},a,o=zu(i.symbol),s=zu(i.angle),l=zu(i.color),u=zu(i.line.color),f=zu(i.opacity),c=zu(i.size),h=zu(i.line.width),v;if(o||(v=lW.isOpenSymbol(i.symbol)),o||l||u||f||s){n.symbols=new Array(r),n.angles=new Array(r),n.colors=new Array(r),n.borderColors=new Array(r);var d=i.symbol,_=i.angle,T=QDe(i,i.opacity,r),p=QDe(i.line,i.opacity,r);if(!zu(p[0])){var M=p;for(p=Array(r),a=0;a<r;a++)p[a]=M}if(!zu(T[0])){var b=T;for(T=Array(r),a=0;a<r;a++)T[a]=b}if(!zu(d)){var w=d;for(d=Array(r),a=0;a<r;a++)d[a]=w}if(!zu(_)){var k=_;for(_=Array(r),a=0;a<r;a++)_[a]=k}for(n.symbols=d,n.angles=_,n.colors=T,n.borderColors=p,a=0;a<r;a++)o&&(v=lW.isOpenSymbol(i.symbol[a])),v&&(p[a]=T[a].slice(),T[a]=T[a].slice(),T[a][3]=0);for(n.opacity=t.opacity,n.markers=new Array(r),a=0;a<r;a++)n.markers[a]=iIe({mx:n.symbols[a],ma:n.angles[a]},t)}else v?(n.color=WD(i.color,"uint8"),n.color[3]=0,n.borderColor=WD(i.color,"uint8")):(n.color=WD(i.color,"uint8"),n.borderColor=WD(i.line.color,"uint8")),n.opacity=t.opacity*i.opacity,n.marker=iIe({mx:i.symbol,ma:i.angle},t);var x=1,E=mqt(t,x),S;if(c||h){var g=n.sizes=new Array(r),C=n.borderSizes=new Array(r),A=0,P;if(c){for(a=0;a<r;a++)g[a]=E(i.size[a]),A+=g[a];P=A/r}else for(S=E(i.size),a=0;a<r;a++)g[a]=S;if(h)for(a=0;a<r;a++)C[a]=i.line.width[a];else for(S=i.line.width,a=0;a<r;a++)C[a]=S;n.sizeAvg=P}else n.size=E(i&&i.size||10),n.borderSizes=E(i.line.width);return n}function uW(e,t,r){var i=t.marker,n={};return r&&(r.marker&&r.marker.symbol?n=fW(e,X3.extendFlat({},i,r.marker)):r.marker&&(r.marker.size&&(n.size=r.marker.size),r.marker.color&&(n.colors=r.marker.color),r.marker.opacity!==void 0&&(n.opacity=r.marker.opacity))),n}function eIe(e,t,r){var i={};if(!r)return i;if(r.textfont){var n={opacity:1,text:t.text,texttemplate:t.texttemplate,textposition:t.textposition,textfont:X3.extendFlat({},t.textfont)};r.textfont&&X3.extendFlat(n.textfont,r.textfont),i=aIe(e,n)}return i}function tIe(e,t,r){var i={capSize:t.width*2*r,lineWidth:t.thickness*r,color:t.color};return t.copy_ystyle&&(i=e.error_y),i}var rIe=jE.SYMBOL_SDF_SIZE,N_=jE.SYMBOL_SIZE,nIe=jE.SYMBOL_STROKE,sW={},wqt=Y3.symbolFuncs[0](N_*.05);function iIe(e,t){var r=e.mx;if(r==="circle")return null;var i,n,a=Y3.symbolNumber(r),o=Y3.symbolFuncs[a%100],s=!!Y3.symbolNoDot[a%100],l=!!Y3.symbolNoFill[a%100],u=lW.isDotSymbol(r);if(e.ma&&(r+="_"+e.ma),sW[r])return sW[r];var f=Y3.getMarkerAngle(e,t);return u&&!s?i=o(N_*1.1,f)+wqt:i=o(N_,f),n=gqt(i,{w:rIe,h:rIe,viewBox:[-N_,-N_,N_,N_],stroke:l?nIe:-nIe}),sW[r]=n,n||null}function Tqt(e,t,r){var i=r.length,n=i/2,a,o;if(W3.hasLines(t)&&n)if(t.line.shape==="hv"){for(a=[],o=0;o<n-1;o++)isNaN(r[o*2])||isNaN(r[o*2+1])?a.push(NaN,NaN,NaN,NaN):(a.push(r[o*2],r[o*2+1]),!isNaN(r[o*2+2])&&!isNaN(r[o*2+3])?a.push(r[o*2+2],r[o*2+1]):a.push(NaN,NaN));a.push(r[i-2],r[i-1])}else if(t.line.shape==="hvh"){for(a=[],o=0;o<n-1;o++)if(isNaN(r[o*2])||isNaN(r[o*2+1])||isNaN(r[o*2+2])||isNaN(r[o*2+3]))!isNaN(r[o*2])&&!isNaN(r[o*2+1])?a.push(r[o*2],r[o*2+1]):a.push(NaN,NaN),a.push(NaN,NaN);else{var s=(r[o*2]+r[o*2+2])/2;a.push(r[o*2],r[o*2+1],s,r[o*2+1],s,r[o*2+3])}a.push(r[i-2],r[i-1])}else if(t.line.shape==="vhv"){for(a=[],o=0;o<n-1;o++)if(isNaN(r[o*2])||isNaN(r[o*2+1])||isNaN(r[o*2+2])||isNaN(r[o*2+3]))!isNaN(r[o*2])&&!isNaN(r[o*2+1])?a.push(r[o*2],r[o*2+1]):a.push(NaN,NaN),a.push(NaN,NaN);else{var l=(r[o*2+1]+r[o*2+3])/2;a.push(r[o*2],r[o*2+1],r[o*2],l,r[o*2+2],l)}a.push(r[i-2],r[i-1])}else if(t.line.shape==="vh"){for(a=[],o=0;o<n-1;o++)isNaN(r[o*2])||isNaN(r[o*2+1])?a.push(NaN,NaN,NaN,NaN):(a.push(r[o*2],r[o*2+1]),!isNaN(r[o*2+2])&&!isNaN(r[o*2+3])?a.push(r[o*2],r[o*2+3]):a.push(NaN,NaN));a.push(r[i-2],r[i-1])}else a=r;var u=!1;for(o=0;o<a.length;o++)if(isNaN(a[o])){u=!0;break}var f=u||a.length>jE.TOO_MANY_POINTS||W3.hasMarkers(t)?"rect":"round";if(u&&t.connectgaps){var c=a[0],h=a[1];for(o=0;o<a.length;o+=2)isNaN(a[o])||isNaN(a[o+1])?(a[o]=c,a[o+1]=h):(c=a[o],h=a[o+1])}return{join:f,positions:a}}function Aqt(e,t,r,i,n){var a=yqt.getComponentMethod("errorbars","makeComputeError"),o=JDe.getFromId(e,t.xaxis,"x"),s=JDe.getFromId(e,t.yaxis,"y"),l=r.length/2,u={};function f(c,h){var v=h._id.charAt(0),d=t["error_"+v];if(d&&d.visible&&(h.type==="linear"||h.type==="log")){for(var _=a(d),T={x:0,y:1}[v],p={x:[0,1,2,3],y:[2,3,0,1]}[v],M=new Float64Array(4*l),b=1/0,w=-1/0,k=0,x=0;k<l;k++,x+=4){var E=c[k];if(XD(E)){var S=r[k*2+T],g=_(E,k),C=g[0],A=g[1];if(XD(C)&&XD(A)){var P=E-C,D=E+A;M[x+p[0]]=S-h.c2l(P),M[x+p[1]]=h.c2l(D)-S,M[x+p[2]]=0,M[x+p[3]]=0,b=Math.min(b,E-C),w=Math.max(w,E+A)}}}u[v]={positions:r,errors:M,_bnds:[b,w]}}}return f(i,o),f(n,s),u}function Mqt(e,t,r,i){var n=t._length,a={},o;if(W3.hasMarkers(t)){var s=r.font,l=r.align,u=r.baseline;for(a.offset=new Array(n),o=0;o<n;o++){var f=i.sizes?i.sizes[o]:i.size,c=zu(s)?s[o].size:s.size,h=zu(l)?l.length>1?l[o]:l[0]:l,v=zu(u)?u.length>1?u[o]:u[0]:u,d=$De[h],_=$De[v],T=f?f/.8+1:0,p=-_*T-_*.5;a.offset[o]=[d*T/c,p/c]}}return a}oIe.exports={style:bqt,markerStyle:fW,markerSelection:uW,linePositions:Tqt,errorBarPositions:Aqt,textPosition:Mqt}});var cW=ne((hpr,sIe)=>{"use strict";var ZD=Wt();sIe.exports=function(t,r){var i=r._scene,n={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},a={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return r._scene||(i=r._scene={},i.init=function(){ZD.extendFlat(i,a,n)},i.init(),i.update=function(s){var l=ZD.repeat(s,i.count);if(i.fill2d&&i.fill2d.update(l),i.scatter2d&&i.scatter2d.update(l),i.line2d&&i.line2d.update(l),i.error2d&&i.error2d.update(l.concat(l)),i.select2d&&i.select2d.update(l),i.glText)for(var u=0;u<i.count;u++)i.glText[u].update(s)},i.draw=function(){for(var s=i.count,l=i.fill2d,u=i.error2d,f=i.line2d,c=i.scatter2d,h=i.glText,v=i.select2d,d=i.selectBatch,_=i.unselectBatch,T=0;T<s;T++){if(l&&i.fillOrder[T]&&l.draw(i.fillOrder[T]),f&&i.lineOptions[T]&&f.draw(T),u&&(i.errorXOptions[T]&&u.draw(T),i.errorYOptions[T]&&u.draw(T+s)),c&&i.markerOptions[T])if(_[T].length){var p=ZD.repeat([],i.count);p[T]=_[T],c.draw(p)}else d[T].length||c.draw(T);h[T]&&i.textOptions[T]&&h[T].render()}v&&v.draw(d),i.dirty=!1},i.destroy=function(){i.fill2d&&i.fill2d.destroy&&i.fill2d.destroy(),i.scatter2d&&i.scatter2d.destroy&&i.scatter2d.destroy(),i.error2d&&i.error2d.destroy&&i.error2d.destroy(),i.line2d&&i.line2d.destroy&&i.line2d.destroy(),i.select2d&&i.select2d.destroy&&i.select2d.destroy(),i.glText&&i.glText.forEach(function(s){s.destroy&&s.destroy()}),i.lineOptions=null,i.fillOptions=null,i.markerOptions=null,i.markerSelectedOptions=null,i.markerUnselectedOptions=null,i.errorXOptions=null,i.errorYOptions=null,i.textOptions=null,i.textSelectedOptions=null,i.textUnselectedOptions=null,i.selectBatch=null,i.unselectBatch=null,r._scene=null}),i.dirty||ZD.extendFlat(i,n),i}});var vIe=ne((vpr,hIe)=>{"use strict";var Sqt=UD(),Z3=Wt(),lIe=zl(),Eqt=Cd().findExtremes,uIe=u0(),hW=yp(),kqt=hW.calcMarkerSize,Cqt=hW.calcAxisExpansion,Lqt=hW.setFirstScatter,Pqt=pp(),j3=U_(),Rqt=cW(),fIe=$a().BADNUM,Dqt=h1().TOO_MANY_POINTS;hIe.exports=function(t,r){var i=t._fullLayout,n=r._xA=lIe.getFromId(t,r.xaxis,"x"),a=r._yA=lIe.getFromId(t,r.yaxis,"y"),o=i._plots[r.xaxis+r.yaxis],s=r._length,l=s>=Dqt,u=s*2,f={},c,h=n.makeCalcdata(r,"x"),v=a.makeCalcdata(r,"y"),d=uIe(r,n,"x",h),_=uIe(r,a,"y",v),T=d.vals,p=_.vals;r._x=T,r._y=p,r.xperiodalignment&&(r._origX=h,r._xStarts=d.starts,r._xEnds=d.ends),r.yperiodalignment&&(r._origY=v,r._yStarts=_.starts,r._yEnds=_.ends);var M=new Array(u),b=new Array(s);for(c=0;c<s;c++)M[c*2]=T[c]===fIe?NaN:T[c],M[c*2+1]=p[c]===fIe?NaN:p[c],b[c]=c;if(n.type==="log")for(c=0;c<u;c+=2)M[c]=n.c2l(M[c]);if(a.type==="log")for(c=1;c<u;c+=2)M[c]=a.c2l(M[c]);l&&n.type!=="log"&&a.type!=="log"?f.tree=Sqt(M):f.ids=b,Pqt(t,r);var w=Iqt(t,o,r,M,T,p),k=Rqt(t,o);Lqt(i,r);var x;return l?w.marker&&(x=w.marker.sizeAvg||Math.max(w.marker.size,3)):x=kqt(r,s),Cqt(t,r,n,a,T,p,x),w.errorX&&cIe(r,n,w.errorX),w.errorY&&cIe(r,a,w.errorY),w.fill&&!k.fill2d&&(k.fill2d=!0),w.marker&&!k.scatter2d&&(k.scatter2d=!0),w.line&&!k.line2d&&(k.line2d=!0),(w.errorX||w.errorY)&&!k.error2d&&(k.error2d=!0),w.text&&!k.glText&&(k.glText=!0),w.marker&&(w.marker.snap=s),k.lineOptions.push(w.line),k.errorXOptions.push(w.errorX),k.errorYOptions.push(w.errorY),k.fillOptions.push(w.fill),k.markerOptions.push(w.marker),k.markerSelectedOptions.push(w.markerSel),k.markerUnselectedOptions.push(w.markerUnsel),k.textOptions.push(w.text),k.textSelectedOptions.push(w.textSel),k.textUnselectedOptions.push(w.textUnsel),k.selectBatch.push([]),k.unselectBatch.push([]),f._scene=k,f.index=k.count,f.x=T,f.y=p,f.positions=M,k.count++,[{x:!1,y:!1,t:f,trace:r}]};function cIe(e,t,r){var i=e._extremes[t._id],n=Eqt(t,r._bnds,{padded:!0});i.min=i.min.concat(n.min),i.max=i.max.concat(n.max)}function Iqt(e,t,r,i,n,a){var o=j3.style(e,r);if(o.marker&&(o.marker.positions=i),o.line&&i.length>1&&Z3.extendFlat(o.line,j3.linePositions(e,r,i)),o.errorX||o.errorY){var s=j3.errorBarPositions(e,r,i,n,a);o.errorX&&Z3.extendFlat(o.errorX,s.x),o.errorY&&Z3.extendFlat(o.errorY,s.y)}return o.text&&(Z3.extendFlat(o.text,{positions:i},j3.textPosition(e,r,o.text,o.marker)),Z3.extendFlat(o.textSel,{positions:i},j3.textPosition(e,r,o.text,o.markerSel)),Z3.extendFlat(o.textUnsel,{positions:i},j3.textPosition(e,r,o.text,o.markerUnsel))),o}});var vW=ne((dpr,pIe)=>{"use strict";var dIe=Wt(),Fqt=_i(),qqt=Yy().DESELECTDIM;function zqt(e){var t=e[0],r=t.trace,i=t.t,n=i._scene,a=i.index,o=n.selectBatch[a],s=n.unselectBatch[a],l=n.textOptions[a],u=n.textSelectedOptions[a]||{},f=n.textUnselectedOptions[a]||{},c=dIe.extendFlat({},l),h,v;if(o.length||s.length){var d=u.color,_=f.color,T=l.color,p=dIe.isArrayOrTypedArray(T);for(c.color=new Array(r._length),h=0;h<o.length;h++)v=o[h],c.color[v]=d||(p?T[v]:T);for(h=0;h<s.length;h++){v=s[h];var M=p?T[v]:T;c.color[v]=_||(d?M:Fqt.addOpacity(M,qqt))}}n.glText[a].update(c)}pIe.exports={styleTextSelection:zqt}});var dW=ne((ppr,yIe)=>{"use strict";var gIe=js(),Oqt=vW().styleTextSelection;yIe.exports=function(t,r){var i=t.cd,n=t.xaxis,a=t.yaxis,o=[],s=i[0].trace,l=i[0].t,u=s._length,f=l.x,c=l.y,h=l._scene,v=l.index;if(!h)return o;var d=gIe.hasText(s),_=gIe.hasMarkers(s),T=!_&&!d;if(s.visible!==!0||T)return o;var p=[],M=[];if(r!==!1&&!r.degenerate)for(var b=0;b<u;b++)r.contains([l.xpx[b],l.ypx[b]],!1,b,t)?(p.push(b),o.push({pointNumber:b,x:n.c2d(f[b]),y:a.c2d(c[b])})):M.push(b);if(_){var w=h.scatter2d;if(!p.length&&!M.length){var k=new Array(h.count);k[v]=h.markerOptions[v],w.update.apply(w,k)}else if(!h.selectBatch[v].length&&!h.unselectBatch[v].length){var x=new Array(h.count);x[v]=h.markerUnselectedOptions[v],w.update.apply(w,x)}}return h.selectBatch[v]=p,h.unselectBatch[v]=M,d&&Oqt(i),o}});var xIe=ne((gpr,mIe)=>{"use strict";var Bqt=OD();mIe.exports={moduleType:"trace",name:"scattergl",basePlotModule:vu(),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:YE(),supplyDefaults:tDe(),crossTraceDefaults:j7(),colorbar:ph(),formatLabels:nDe(),calc:vIe(),hoverPoints:Bqt.hoverPoints,selectPoints:dW(),meta:{}}});var bIe=ne((ypr,KD)=>{"use strict";var jD=E3();KD.exports=_Ie;KD.exports.to=_Ie;KD.exports.from=Nqt;function _Ie(e,t){t==null&&(t=!0);var r=e[0],i=e[1],n=e[2],a=e[3];a==null&&(a=t?1:255),t&&(r*=255,i*=255,n*=255,a*=255),r=jD(r,0,255)&255,i=jD(i,0,255)&255,n=jD(n,0,255)&255,a=jD(a,0,255)&255;var o=r*16777216+(i<<16)+(n<<8)+a;return o}function Nqt(e,t){e=+e;var r=e>>>24,i=(e&16711680)>>>16,n=(e&65280)>>>8,a=e&255;return t===!1?[r,i,n,a]:[r/255,i/255,n/255,a/255]}});var of=ne((mpr,TIe)=>{"use strict";var wIe=Object.getOwnPropertySymbols,Uqt=Object.prototype.hasOwnProperty,Vqt=Object.prototype.propertyIsEnumerable;function Hqt(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Gqt(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var i=Object.getOwnPropertyNames(t).map(function(a){return t[a]});if(i.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(a){n[a]=a}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch(a){return!1}}TIe.exports=Gqt()?Object.assign:function(e,t){for(var r,i=Hqt(e),n,a=1;a<arguments.length;a++){r=Object(arguments[a]);for(var o in r)Uqt.call(r,o)&&(i[o]=r[o]);if(wIe){n=wIe(r);for(var s=0;s<n.length;s++)Vqt.call(r,n[s])&&(i[n[s]]=r[n[s]])}}return i}});var MIe=ne((xpr,AIe)=>{AIe.exports=function(e){typeof e=="string"&&(e=[e]);for(var t=[].slice.call(arguments,1),r=[],i=0;i<e.length-1;i++)r.push(e[i],t[i]||"");return r.push(e[i]),r.join("")}});var pW=ne((_pr,SIe)=>{"use strict";SIe.exports=function(t,r,i){Array.isArray(i)||(i=[].slice.call(arguments,2));for(var n=0,a=i.length;n<a;n++){var o=i[n];for(var s in o)if(!(r[s]!==void 0&&!Array.isArray(r[s])&&t[s]===r[s])&&s in r){var l;if(o[s]===!0)l=r[s];else{if(o[s]===!1)continue;if(typeof o[s]=="function"&&(l=o[s](r[s],t,r),l===void 0))continue}t[s]=l}}return t}});var kIe=ne((bpr,EIe)=>{"use strict";EIe.exports=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))});var JD=ne((wpr,K3)=>{"use strict";K3.exports=KE;K3.exports.float32=K3.exports.float=KE;K3.exports.fract32=K3.exports.fract=Yqt;var CIe=new Float32Array(1);function Yqt(e,t){if(e.length){if(e instanceof Float32Array)return new Float32Array(e.length);t instanceof Float32Array||(t=KE(e));for(var r=0,i=t.length;r<i;r++)t[r]=e[r]-t[r];return t}return KE(e-KE(e))}function KE(e){return e.length?e instanceof Float32Array?e:new Float32Array(e):(CIe[0]=e,CIe[0])}});var yW=ne((Tpr,RIe)=>{"use strict";function Wqt(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,n,a,o,s=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(i=a.call(r)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(f){u=!0,n=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw n}}return s}}function Xqt(e,t){return Kqt(e)||Wqt(e,t)||PIe(e,t)||$qt()}function Zqt(e){return jqt(e)||Jqt(e)||PIe(e)||Qqt()}function jqt(e){if(Array.isArray(e))return gW(e)}function Kqt(e){if(Array.isArray(e))return e}function Jqt(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function PIe(e,t){if(e){if(typeof e=="string")return gW(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gW(e,t)}}function gW(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function Qqt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $qt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ezt=n1(),tzt=z_(),rzt=bIe(),nzt=UD(),V_=of(),QD=MIe(),izt=vg(),azt=pW(),ozt=O_(),LIe=kIe(),$D=JD(),szt=G3(),lzt=Vc;function Vc(e,t){var r=this;if(!(this instanceof Vc))return new Vc(e,t);typeof e=="function"?(t||(t={}),t.regl=e):(t=e,e=null),t&&t.length&&(t.positions=t),e=t.regl;var i=e._gl,n,a=[],o={},s=[],l=[null],u=[null],f=255,c=100;this.tooManyColors=LIe,n=e.texture({data:new Uint8Array(f*4),width:f,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),V_(this,{regl:e,gl:i,groups:s,markerCache:u,markerTextures:l,palette:a,paletteIds:o,paletteTexture:n,maxColors:f,maxSize:c,canvas:i.canvas}),this.update(t);var h={uniforms:{constPointSize:!!t.constPointSize,opacity:e.prop("opacity"),paletteSize:function(T,p){return[r.tooManyColors?0:f,n.height]},pixelRatio:e.context("pixelRatio"),scale:e.prop("scale"),scaleFract:e.prop("scaleFract"),translate:e.prop("translate"),translateFract:e.prop("translateFract"),markerTexture:e.prop("markerTexture"),paletteTexture:n},attributes:{x:function(T,p){return p.xAttr||{buffer:p.positionBuffer,stride:8,offset:0}},y:function(T,p){return p.yAttr||{buffer:p.positionBuffer,stride:8,offset:4}},xFract:function(T,p){return p.xAttr?{constant:[0,0]}:{buffer:p.positionFractBuffer,stride:8,offset:0}},yFract:function(T,p){return p.yAttr?{constant:[0,0]}:{buffer:p.positionFractBuffer,stride:8,offset:4}},size:function(T,p){return p.size.length?{buffer:p.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(p.size*255/r.maxSize)]}},borderSize:function(T,p){return p.borderSize.length?{buffer:p.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(p.borderSize*255/r.maxSize)]}},colorId:function(T,p){return p.color.length?{buffer:p.colorBuffer,stride:r.tooManyColors?8:4,offset:0}:{constant:r.tooManyColors?a.slice(p.color*4,p.color*4+4):[p.color]}},borderColorId:function(T,p){return p.borderColor.length?{buffer:p.colorBuffer,stride:r.tooManyColors?8:4,offset:r.tooManyColors?4:2}:{constant:r.tooManyColors?a.slice(p.borderColor*4,p.borderColor*4+4):[p.borderColor]}},isActive:function(T,p){return p.activation===!0?{constant:[1]}:p.activation?p.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:e.prop("viewport")},viewport:e.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:e.prop("elements"),count:e.prop("count"),offset:e.prop("offset"),primitive:"points"},v=V_({},h);v.frag=QD([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),v.vert=QD([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}
`]),this.drawMarker=e(v);var d=V_({},h);d.frag=QD([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),d.vert=QD([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),LIe&&(d.frag=d.frag.replace("smoothstep","smoothStep"),v.frag=v.frag.replace("smoothstep","smoothStep")),this.drawCircle=e(d)}Vc.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4};Vc.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this};Vc.prototype.draw=function(){for(var e=this,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var n=this.groups;if(r.length===1&&Array.isArray(r[0])&&(r[0][0]===null||Array.isArray(r[0][0]))&&(r=r[0]),this.regl._refresh(),r.length)for(var a=0;a<r.length;a++)this.drawItem(a,r[a]);else n.forEach(function(o,s){e.drawItem(s)});return this};Vc.prototype.drawItem=function(e,t){var r=this.groups,i=r[e];if(typeof t=="number"&&(e=t,i=r[t],t=null),!!(i&&i.count&&i.opacity)){i.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,i,t));for(var n=[],a=1;a<i.activation.length;a++)!i.activation[a]||i.activation[a]!==!0&&!i.activation[a].data.length||n.push.apply(n,Zqt(this.getMarkerDrawOptions(a,i,t)));n.length&&this.drawMarker(n)}};Vc.prototype.getMarkerDrawOptions=function(e,t,r){var i=t.range,n=t.tree,a=t.viewport,o=t.activation,s=t.selectionBuffer,l=t.count,u=this.regl;if(!n)return r?[V_({},t,{markerTexture:this.markerTextures[e],activation:o[e],count:r.length,elements:r,offset:0})]:[V_({},t,{markerTexture:this.markerTextures[e],activation:o[e],offset:0})];var f=[],c=n.range(i,{lod:!0,px:[(i[2]-i[0])/a.width,(i[3]-i[1])/a.height]});if(r){for(var h=o[e],v=h.data,d=new Uint8Array(l),_=0;_<r.length;_++){var T=r[_];d[T]=v?v[T]:1}s.subdata(d)}for(var p=c.length;p--;){var M=Xqt(c[p],2),b=M[0],w=M[1];f.push(V_({},t,{markerTexture:this.markerTextures[e],activation:r?s:o[e],offset:b,count:w-b}))}return f};Vc.prototype.update=function(){for(var e=this,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];if(r.length){r.length===1&&Array.isArray(r[0])&&(r=r[0]);var n=this.groups,a=this.gl,o=this.regl,s=this.maxSize,l=this.maxColors,u=this.palette;this.groups=n=r.map(function(f,c){var h=n[c];if(f===void 0)return h;f===null?f={positions:null}:typeof f=="function"?f={ondraw:f}:typeof f[0]=="number"&&(f={positions:f}),f=izt(f,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"}),f.positions===null&&(f.positions=[]),f.tooManyColors!=null&&(e.tooManyColors=f.tooManyColors),h||(n[c]=h={id:c,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:o.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:o.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:o.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:o.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:o.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},f=V_({},Vc.defaults,f)),f.positions&&!("marker"in f)&&(f.marker=h.marker,delete h.marker),f.marker&&!("positions"in f)&&(f.positions=h.positions,delete h.positions);var v=0,d=0;if(azt(h,f,[{snap:!0,size:function(B,F){return B==null&&(B=Vc.defaults.size),v+=B&&B.length?1:0,B},borderSize:function(B,F){return B==null&&(B=Vc.defaults.borderSize),v+=B&&B.length?1:0,B},opacity:parseFloat,color:function(B,F){return B==null&&(B=Vc.defaults.color),B=e.updateColor(B),d++,B},borderColor:function(B,F){return B==null&&(B=Vc.defaults.borderColor),B=e.updateColor(B),d++,B},bounds:function(B,F,N){return"range"in N||(N.range=null),B},positions:function(B,F,N){var Z=F.snap,J=F.positionBuffer,re=F.positionFractBuffer,ue=F.selectionBuffer;if(B.x||B.y)return B.x.length?F.xAttr={buffer:o.buffer(B.x),offset:0,stride:4,count:B.x.length}:F.xAttr={buffer:B.x.buffer,offset:B.x.offset*4||0,stride:(B.x.stride||1)*4,count:B.x.count},B.y.length?F.yAttr={buffer:o.buffer(B.y),offset:0,stride:4,count:B.y.length}:F.yAttr={buffer:B.y.buffer,offset:B.y.offset*4||0,stride:(B.y.stride||1)*4,count:B.y.count},F.count=Math.max(F.xAttr.count,F.yAttr.count),B;B=ozt(B,"float64");var fe=F.count=Math.floor(B.length/2),K=F.bounds=fe?tzt(B,2):null;if(!N.range&&!F.range&&(delete F.range,N.range=K),!N.marker&&!F.marker&&(delete F.marker,N.marker=null),Z&&(Z===!0||fe>Z)?F.tree=nzt(B,{bounds:K}):Z&&Z.length&&(F.tree=Z),F.tree){var X={primitive:"points",usage:"static",data:F.tree,type:"uint32"};F.elements?F.elements(X):F.elements=o.elements(X)}var ae=$D.float32(B);J({data:ae,usage:"dynamic"});var oe=$D.fract32(B,ae);return re({data:oe,usage:"dynamic"}),ue({data:new Uint8Array(fe),type:"uint8",usage:"stream"}),B}},{marker:function(B,F,N){var Z=F.activation;if(Z.forEach(function(oe){return oe&&oe.destroy&&oe.destroy()}),Z.length=0,!B||typeof B[0]=="number"){var J=e.addMarker(B);Z[J]=!0}else{for(var re=[],ue=0,fe=Math.min(B.length,F.count);ue<fe;ue++){var K=e.addMarker(B[ue]);re[K]||(re[K]=new Uint8Array(F.count)),re[K][ue]=1}for(var X=0;X<re.length;X++)if(re[X]){var ae={data:re[X],type:"uint8",usage:"static"};Z[X]?Z[X](ae):Z[X]=o.buffer(ae),Z[X].data=re[X]}}return B},range:function(B,F,N){var Z=F.bounds;if(Z)return B||(B=Z),F.scale=[1/(B[2]-B[0]),1/(B[3]-B[1])],F.translate=[-B[0],-B[1]],F.scaleFract=$D.fract(F.scale),F.translateFract=$D.fract(F.translate),B},viewport:function(B){var F=szt(B||[a.drawingBufferWidth,a.drawingBufferHeight]);return F}}]),v){var _=h,T=_.count,p=_.size,M=_.borderSize,b=_.sizeBuffer,w=new Uint8Array(T*2);if(p.length||M.length)for(var k=0;k<T;k++)w[k*2]=Math.round((p[k]==null?p:p[k])*255/s),w[k*2+1]=Math.round((M[k]==null?M:M[k])*255/s);b({data:w,usage:"dynamic"})}if(d){var x=h,E=x.count,S=x.color,g=x.borderColor,C=x.colorBuffer,A;if(e.tooManyColors){if(S.length||g.length){A=new Uint8Array(E*8);for(var P=0;P<E;P++){var D=S[P];A[P*8]=u[D*4],A[P*8+1]=u[D*4+1],A[P*8+2]=u[D*4+2],A[P*8+3]=u[D*4+3];var z=g[P];A[P*8+4]=u[z*4],A[P*8+5]=u[z*4+1],A[P*8+6]=u[z*4+2],A[P*8+7]=u[z*4+3]}}}else if(S.length||g.length){A=new Uint8Array(E*4+2);for(var O=0;O<E;O++)S[O]!=null&&(A[O*4]=S[O]%l,A[O*4+1]=Math.floor(S[O]/l)),g[O]!=null&&(A[O*4+2]=g[O]%l,A[O*4+3]=Math.floor(g[O]/l))}C({data:A||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return h})}};Vc.prototype.addMarker=function(e){var t=this.markerTextures,r=this.regl,i=this.markerCache,n=e==null?0:i.indexOf(e);if(n>=0)return n;var a;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)a=e;else{a=new Uint8Array(e.length);for(var o=0,s=e.length;o<s;o++)a[o]=e[o]*255}var l=Math.floor(Math.sqrt(a.length));return n=t.length,i.push(e),t.push(r.texture({channels:1,data:a,radius:l,mag:"linear",min:"linear"})),n};Vc.prototype.updateColor=function(e){var t=this.paletteIds,r=this.palette,i=this.maxColors;Array.isArray(e)||(e=[e]);var n=[];if(typeof e[0]=="number"){var a=[];if(Array.isArray(e))for(var o=0;o<e.length;o+=4)a.push(e.slice(o,o+4));else for(var s=0;s<e.length;s+=4)a.push(e.subarray(s,s+4));e=a}for(var l=0;l<e.length;l++){var u=e[l];u=ezt(u,"uint8");var f=rzt(u,!1);if(t[f]==null){var c=r.length;t[f]=Math.floor(c/4),r[c]=u[0],r[c+1]=u[1],r[c+2]=u[2],r[c+3]=u[3]}n[l]=t[f]}return!this.tooManyColors&&r.length>i*4&&(this.tooManyColors=!0),this.updatePalette(r),n.length===1?n[0]:n};Vc.prototype.updatePalette=function(e){if(!this.tooManyColors){var t=this.maxColors,r=this.paletteTexture,i=Math.ceil(e.length*.25/t);if(i>1){e=e.slice();for(var n=e.length*.25%t;n<i*t;n++)e.push(0,0,0,0)}r.height<i&&r.resize(t,i),r.subimage({width:Math.min(e.length*.25,t),height:i,data:e},0,0)}};Vc.prototype.destroy=function(){return this.groups.forEach(function(e){e.sizeBuffer.destroy(),e.positionBuffer.destroy(),e.positionFractBuffer.destroy(),e.colorBuffer.destroy(),e.activation.forEach(function(t){return t&&t.destroy&&t.destroy()}),e.selectionBuffer.destroy(),e.elements&&e.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(e){return e&&e.destroy&&e.destroy()}),this};var uzt=of(),fzt=function(t,r){var i=new lzt(t,r),n=i.render.bind(i);return uzt(n,{render:n,update:i.update.bind(i),draw:i.draw.bind(i),destroy:i.destroy.bind(i),regl:i.regl,gl:i.gl,canvas:i.gl.canvas,groups:i.groups,markers:i.markerCache,palette:i.palette}),n};RIe.exports=fzt});var zIe=ne((Apr,bW)=>{"use strict";bW.exports=rI;bW.exports.default=rI;function rI(e,t,r){r=r||2;var i=t&&t.length,n=i?t[0]*r:e.length,a=IIe(e,0,n,r,!0),o=[];if(!a||a.next===a.prev)return o;var s,l,u,f,c,h,v;if(i&&(a=pzt(e,t,a,r)),e.length>80*r){s=u=e[0],l=f=e[1];for(var d=r;d<n;d+=r)c=e[d],h=e[d+1],c<s&&(s=c),h<l&&(l=h),c>u&&(u=c),h>f&&(f=h);v=Math.max(u-s,f-l),v=v!==0?1/v:0}return JE(a,o,r,s,l,v),o}function IIe(e,t,r,i,n){var a,o;if(n===_W(e,t,r,i)>0)for(a=t;a<r;a+=i)o=DIe(a,e[a],e[a+1],o);else for(a=r-i;a>=t;a-=i)o=DIe(a,e[a],e[a+1],o);return o&&nI(o,o.next)&&($E(o),o=o.next),o}function v1(e,t){if(!e)return e;t||(t=e);var r=e,i;do if(i=!1,!r.steiner&&(nI(r,r.next)||Ou(r.prev,r,r.next)===0)){if($E(r),r=t=r.prev,r===r.next)break;i=!0}else r=r.next;while(i||r!==t);return t}function JE(e,t,r,i,n,a,o){if(e){!o&&a&&_zt(e,i,n,a);for(var s=e,l,u;e.prev!==e.next;){if(l=e.prev,u=e.next,a?hzt(e,i,n,a):czt(e)){t.push(l.i/r),t.push(e.i/r),t.push(u.i/r),$E(e),e=u.next,s=u.next;continue}if(e=u,e===s){o?o===1?(e=vzt(v1(e),t,r),JE(e,t,r,i,n,a,2)):o===2&&dzt(e,t,r,i,n,a):JE(v1(e),t,r,i,n,a,1);break}}}}function czt(e){var t=e.prev,r=e,i=e.next;if(Ou(t,r,i)>=0)return!1;for(var n=e.next.next;n!==e.prev;){if(J3(t.x,t.y,r.x,r.y,i.x,i.y,n.x,n.y)&&Ou(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function hzt(e,t,r,i){var n=e.prev,a=e,o=e.next;if(Ou(n,a,o)>=0)return!1;for(var s=n.x<a.x?n.x<o.x?n.x:o.x:a.x<o.x?a.x:o.x,l=n.y<a.y?n.y<o.y?n.y:o.y:a.y<o.y?a.y:o.y,u=n.x>a.x?n.x>o.x?n.x:o.x:a.x>o.x?a.x:o.x,f=n.y>a.y?n.y>o.y?n.y:o.y:a.y>o.y?a.y:o.y,c=mW(s,l,t,r,i),h=mW(u,f,t,r,i),v=e.prevZ,d=e.nextZ;v&&v.z>=c&&d&&d.z<=h;){if(v!==e.prev&&v!==e.next&&J3(n.x,n.y,a.x,a.y,o.x,o.y,v.x,v.y)&&Ou(v.prev,v,v.next)>=0||(v=v.prevZ,d!==e.prev&&d!==e.next&&J3(n.x,n.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Ou(d.prev,d,d.next)>=0))return!1;d=d.nextZ}for(;v&&v.z>=c;){if(v!==e.prev&&v!==e.next&&J3(n.x,n.y,a.x,a.y,o.x,o.y,v.x,v.y)&&Ou(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;d&&d.z<=h;){if(d!==e.prev&&d!==e.next&&J3(n.x,n.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Ou(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function vzt(e,t,r){var i=e;do{var n=i.prev,a=i.next.next;!nI(n,a)&&FIe(n,i,i.next,a)&&QE(n,a)&&QE(a,n)&&(t.push(n.i/r),t.push(i.i/r),t.push(a.i/r),$E(i),$E(i.next),i=e=a),i=i.next}while(i!==e);return v1(i)}function dzt(e,t,r,i,n,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Tzt(o,s)){var l=qIe(o,s);o=v1(o,o.next),l=v1(l,l.next),JE(o,t,r,i,n,a),JE(l,t,r,i,n,a);return}s=s.next}o=o.next}while(o!==e)}function pzt(e,t,r,i){var n=[],a,o,s,l,u;for(a=0,o=t.length;a<o;a++)s=t[a]*i,l=a<o-1?t[a+1]*i:e.length,u=IIe(e,s,l,i,!1),u===u.next&&(u.steiner=!0),n.push(wzt(u));for(n.sort(gzt),a=0;a<n.length;a++)yzt(n[a],r),r=v1(r,r.next);return r}function gzt(e,t){return e.x-t.x}function yzt(e,t){if(t=mzt(e,t),t){var r=qIe(t,e);v1(t,t.next),v1(r,r.next)}}function mzt(e,t){var r=t,i=e.x,n=e.y,a=-1/0,o;do{if(n<=r.y&&n>=r.next.y&&r.next.y!==r.y){var s=r.x+(n-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(n===r.y)return r;if(n===r.next.y)return r.next}o=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!o)return null;if(i===a)return o;var l=o,u=o.x,f=o.y,c=1/0,h;r=o;do i>=r.x&&r.x>=u&&i!==r.x&&J3(n<f?i:a,n,u,f,n<f?a:i,n,r.x,r.y)&&(h=Math.abs(n-r.y)/(i-r.x),QE(r,e)&&(h<c||h===c&&(r.x>o.x||r.x===o.x&&xzt(o,r)))&&(o=r,c=h)),r=r.next;while(r!==l);return o}function xzt(e,t){return Ou(e.prev,e,t.prev)<0&&Ou(t.next,e,e.next)<0}function _zt(e,t,r,i){var n=e;do n.z===null&&(n.z=mW(n.x,n.y,t,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,bzt(n)}function bzt(e){var t,r,i,n,a,o,s,l,u=1;do{for(r=e,e=null,a=null,o=0;r;){for(o++,i=r,s=0,t=0;t<u&&(s++,i=i.nextZ,!!i);t++);for(l=u;s>0||l>0&&i;)s!==0&&(l===0||!i||r.z<=i.z)?(n=r,r=r.nextZ,s--):(n=i,i=i.nextZ,l--),a?a.nextZ=n:e=n,n.prevZ=a,a=n;r=i}a.nextZ=null,u*=2}while(o>1);return e}function mW(e,t,r,i,n){return e=32767*(e-r)*n,t=32767*(t-i)*n,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function wzt(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function J3(e,t,r,i,n,a,o,s){return(n-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(i-s)-(r-o)*(t-s)>=0&&(r-o)*(a-s)-(n-o)*(i-s)>=0}function Tzt(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Azt(e,t)&&(QE(e,t)&&QE(t,e)&&Mzt(e,t)&&(Ou(e.prev,e,t.prev)||Ou(e,t.prev,t))||nI(e,t)&&Ou(e.prev,e,e.next)>0&&Ou(t.prev,t,t.next)>0)}function Ou(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function nI(e,t){return e.x===t.x&&e.y===t.y}function FIe(e,t,r,i){var n=tI(Ou(e,t,r)),a=tI(Ou(e,t,i)),o=tI(Ou(r,i,e)),s=tI(Ou(r,i,t));return!!(n!==a&&o!==s||n===0&&eI(e,r,t)||a===0&&eI(e,i,t)||o===0&&eI(r,e,i)||s===0&&eI(r,t,i))}function eI(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function tI(e){return e>0?1:e<0?-1:0}function Azt(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&FIe(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function QE(e,t){return Ou(e.prev,e,e.next)<0?Ou(e,t,e.next)>=0&&Ou(e,e.prev,t)>=0:Ou(e,t,e.prev)<0||Ou(e,e.next,t)<0}function Mzt(e,t){var r=e,i=!1,n=(e.x+t.x)/2,a=(e.y+t.y)/2;do r.y>a!=r.next.y>a&&r.next.y!==r.y&&n<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next;while(r!==e);return i}function qIe(e,t){var r=new xW(e.i,e.x,e.y),i=new xW(t.i,t.x,t.y),n=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,i.next=r,r.prev=i,a.next=i,i.prev=a,i}function DIe(e,t,r,i){var n=new xW(e,t,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function $E(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function xW(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}rI.deviation=function(e,t,r,i){var n=t&&t.length,a=n?t[0]*r:e.length,o=Math.abs(_W(e,0,a,r));if(n)for(var s=0,l=t.length;s<l;s++){var u=t[s]*r,f=s<l-1?t[s+1]*r:e.length;o-=Math.abs(_W(e,u,f,r))}var c=0;for(s=0;s<i.length;s+=3){var h=i[s]*r,v=i[s+1]*r,d=i[s+2]*r;c+=Math.abs((e[h]-e[d])*(e[v+1]-e[h+1])-(e[h]-e[v])*(e[d+1]-e[h+1]))}return o===0&&c===0?0:Math.abs((c-o)/o)};function _W(e,t,r,i){for(var n=0,a=t,o=r-i;a<r;a+=i)n+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return n}rI.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},i=0,n=0;n<e.length;n++){for(var a=0;a<e[n].length;a++)for(var o=0;o<t;o++)r.vertices.push(e[n][a][o]);n>0&&(i+=e[n-1].length,r.holes.push(i))}return r}});var BIe=ne((Mpr,OIe)=>{"use strict";var Szt=z_();OIe.exports=Ezt;function Ezt(e,t,r){if(!e||e.length==null)throw Error("Argument should be an array");t==null&&(t=1),r==null&&(r=Szt(e,t));for(var i=0;i<t;i++){var n=r[t+i],a=r[i],o=i,s=e.length;if(n===1/0&&a===-1/0)for(o=i;o<s;o+=t)e[o]=e[o]===n?1:e[o]===a?0:.5;else if(n===1/0)for(o=i;o<s;o+=t)e[o]=e[o]===n?1:0;else if(a===-1/0)for(o=i;o<s;o+=t)e[o]=e[o]===a?0:1;else{var l=n-a;for(o=i;o<s;o+=t)isNaN(e[o])||(e[o]=l===0?.5:(e[o]-a)/l)}}return e}});var UIe=ne((Spr,NIe)=>{"use strict";NIe.exports=function(){var e,t;if(typeof WeakMap!="function")return!1;try{e=new WeakMap([[t={},"one"],[{},"two"],[{},"three"]])}catch(r){return!1}return!(String(e)!=="[object WeakMap]"||typeof e.set!="function"||e.set({},1)!==e||typeof e.delete!="function"||typeof e.has!="function"||e.get(t)!=="one")}});var HIe=ne((Epr,VIe)=>{"use strict";VIe.exports=function(){}});var d1=ne((kpr,GIe)=>{"use strict";var kzt=HIe()();GIe.exports=function(e){return e!==kzt&&e!==null}});var wW=ne((Cpr,WIe)=>{"use strict";var Czt=Object.create,Lzt=Object.getPrototypeOf,YIe={};WIe.exports=function(){var e=Object.setPrototypeOf,t=arguments[0]||Czt;return typeof e!="function"?!1:Lzt(e(t(null),YIe))===YIe}});var TW=ne((Lpr,XIe)=>{"use strict";var Pzt=d1(),Rzt={function:!0,object:!0};XIe.exports=function(e){return Pzt(e)&&Rzt[typeof e]||!1}});var my=ne((Ppr,ZIe)=>{"use strict";var Dzt=d1();ZIe.exports=function(e){if(!Dzt(e))throw new TypeError("Cannot use null or undefined");return e}});var KIe=ne((Rpr,jIe)=>{"use strict";var AW=Object.create,iI;wW()()||(iI=MW());jIe.exports=function(){var e,t,r;return!iI||iI.level!==1?AW:(e={},t={},r={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(i){if(i==="__proto__"){t[i]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}t[i]=r}),Object.defineProperties(e,t),Object.defineProperty(iI,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:e}),function(i,n){return AW(i===null?e:i,n)})}()});var MW=ne((Dpr,JIe)=>{"use strict";var Izt=TW(),Fzt=my(),qzt=Object.prototype.isPrototypeOf,zzt=Object.defineProperty,Ozt={configurable:!0,enumerable:!1,writable:!0,value:void 0},aI;aI=function(e,t){if(Fzt(e),t===null||Izt(t))return e;throw new TypeError("Prototype must be null or an object")};JIe.exports=function(e){var t,r;return e?(e.level===2?e.set?(r=e.set,t=function(i,n){return r.call(aI(i,n),n),i}):t=function(i,n){return aI(i,n).__proto__=n,i}:t=function i(n,a){var o;return aI(n,a),o=qzt.call(i.nullPolyfill,n),o&&delete i.nullPolyfill.__proto__,a===null&&(a=i.nullPolyfill),n.__proto__=a,o&&zzt(i.nullPolyfill,"__proto__",Ozt),n},Object.defineProperty(t,"level",{configurable:!1,enumerable:!1,writable:!1,value:e.level})):null}(function(){var e=Object.create(null),t={},r,i=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(i){try{r=i.set,r.call(e,t)}catch(n){}if(Object.getPrototypeOf(e)===t)return{set:r,level:2}}return e.__proto__=t,Object.getPrototypeOf(e)===t?{level:2}:(e={},e.__proto__=t,Object.getPrototypeOf(e)===t?{level:1}:!1)}());KIe()});var oI=ne((Ipr,QIe)=>{"use strict";QIe.exports=wW()()?Object.setPrototypeOf:MW()});var eFe=ne((Fpr,$Ie)=>{"use strict";var Bzt=TW();$Ie.exports=function(e){if(!Bzt(e))throw new TypeError(e+" is not an Object");return e}});var rFe=ne((qpr,tFe)=>{"use strict";var Nzt=Object.create(null),Uzt=Math.random;tFe.exports=function(){var e;do e=Uzt().toString(36).slice(2);while(Nzt[e]);return e}});var H_=ne((zpr,nFe)=>{"use strict";var Vzt=void 0;nFe.exports=function(e){return e!==Vzt&&e!==null}});var sI=ne((Opr,iFe)=>{"use strict";var Hzt=H_(),Gzt={object:!0,function:!0,undefined:!0};iFe.exports=function(e){return Hzt(e)?hasOwnProperty.call(Gzt,typeof e):!1}});var oFe=ne((Bpr,aFe)=>{"use strict";var Yzt=sI();aFe.exports=function(e){if(!Yzt(e))return!1;try{return e.constructor?e.constructor.prototype===e:!1}catch(t){return!1}}});var lFe=ne((Npr,sFe)=>{"use strict";var Wzt=oFe();sFe.exports=function(e){if(typeof e!="function"||!hasOwnProperty.call(e,"length"))return!1;try{if(typeof e.length!="number"||typeof e.call!="function"||typeof e.apply!="function")return!1}catch(t){return!1}return!Wzt(e)}});var SW=ne((Upr,uFe)=>{"use strict";var Xzt=lFe(),Zzt=/^\s*class[\s{/}]/,jzt=Function.prototype.toString;uFe.exports=function(e){return!(!Xzt(e)||Zzt.test(jzt.call(e)))}});var cFe=ne((Vpr,fFe)=>{"use strict";fFe.exports=function(){var e=Object.assign,t;return typeof e!="function"?!1:(t={foo:"raz"},e(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}});var vFe=ne((Hpr,hFe)=>{"use strict";hFe.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}});var pFe=ne((Gpr,dFe)=>{"use strict";var Kzt=d1(),Jzt=Object.keys;dFe.exports=function(e){return Jzt(Kzt(e)?Object(e):e)}});var yFe=ne((Ypr,gFe)=>{"use strict";gFe.exports=vFe()()?Object.keys:pFe()});var xFe=ne((Wpr,mFe)=>{"use strict";var Qzt=yFe(),$zt=my(),eOt=Math.max;mFe.exports=function(e,t){var r,i,n=eOt(arguments.length,2),a;for(e=Object($zt(e)),a=function(o){try{e[o]=t[o]}catch(s){r||(r=s)}},i=1;i<n;++i)t=arguments[i],Qzt(t).forEach(a);if(r!==void 0)throw r;return e}});var lI=ne((Xpr,_Fe)=>{"use strict";_Fe.exports=cFe()()?Object.assign:xFe()});var EW=ne((Zpr,bFe)=>{"use strict";var tOt=d1(),rOt=Array.prototype.forEach,nOt=Object.create,iOt=function(e,t){var r;for(r in e)t[r]=e[r]};bFe.exports=function(e){var t=nOt(null);return rOt.call(arguments,function(r){tOt(r)&&iOt(Object(r),t)}),t}});var TFe=ne((jpr,wFe)=>{"use strict";var kW="razdwatrzy";wFe.exports=function(){return typeof kW.contains!="function"?!1:kW.contains("dwa")===!0&&kW.contains("foo")===!1}});var MFe=ne((Kpr,AFe)=>{"use strict";var aOt=String.prototype.indexOf;AFe.exports=function(e){return aOt.call(this,e,arguments[1])>-1}});var CW=ne((Jpr,SFe)=>{"use strict";SFe.exports=TFe()()?String.prototype.contains:MFe()});var xy=ne((Qpr,LFe)=>{"use strict";var uI=H_(),EFe=SW(),kFe=lI(),CFe=EW(),e5=CW(),oOt=LFe.exports=function(e,t){var r,i,n,a,o;return arguments.length<2||typeof e!="string"?(a=t,t=e,e=null):a=arguments[2],uI(e)?(r=e5.call(e,"c"),i=e5.call(e,"e"),n=e5.call(e,"w")):(r=n=!0,i=!1),o={value:t,configurable:r,enumerable:i,writable:n},a?kFe(CFe(a),o):o};oOt.gs=function(e,t,r){var i,n,a,o;return typeof e!="string"?(a=r,r=t,t=e,e=null):a=arguments[3],uI(t)?EFe(t)?uI(r)?EFe(r)||(a=r,r=void 0):r=void 0:(a=t,t=r=void 0):t=void 0,uI(e)?(i=e5.call(e,"c"),n=e5.call(e,"e")):(i=!0,n=!1),o={get:t,set:r,configurable:i,enumerable:n},a?kFe(CFe(a),o):o}});var t5=ne(($pr,RFe)=>{"use strict";var PFe=Object.prototype.toString,sOt=PFe.call(function(){return arguments}());RFe.exports=function(e){return PFe.call(e)===sOt}});var r5=ne((e0r,IFe)=>{"use strict";var DFe=Object.prototype.toString,lOt=DFe.call("");IFe.exports=function(e){return typeof e=="string"||e&&typeof e=="object"&&(e instanceof String||DFe.call(e)===lOt)||!1}});var qFe=ne((t0r,FFe)=>{"use strict";FFe.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}});var BFe=ne((r0r,OFe)=>{var zFe=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};OFe.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return zFe()}try{return __global__||zFe()}finally{delete Object.prototype.__global__}}()});var n5=ne((n0r,NFe)=>{"use strict";NFe.exports=qFe()()?globalThis:BFe()});var VFe=ne((i0r,UFe)=>{"use strict";var uOt=n5(),LW={object:!0,symbol:!0};UFe.exports=function(){var e=uOt.Symbol,t;if(typeof e!="function")return!1;t=e("test symbol");try{String(t)}catch(r){return!1}return!(!LW[typeof e.iterator]||!LW[typeof e.toPrimitive]||!LW[typeof e.toStringTag])}});var GFe=ne((a0r,HFe)=>{"use strict";HFe.exports=function(e){return e?typeof e=="symbol"?!0:!e.constructor||e.constructor.name!=="Symbol"?!1:e[e.constructor.toStringTag]==="Symbol":!1}});var PW=ne((o0r,YFe)=>{"use strict";var fOt=GFe();YFe.exports=function(e){if(!fOt(e))throw new TypeError(e+" is not a symbol");return e}});var KFe=ne((s0r,jFe)=>{"use strict";var WFe=xy(),cOt=Object.create,XFe=Object.defineProperty,hOt=Object.prototype,ZFe=cOt(null);jFe.exports=function(e){for(var t=0,r,i;ZFe[e+(t||"")];)++t;return e+=t||"",ZFe[e]=!0,r="@@"+e,XFe(hOt,r,WFe.gs(null,function(n){i||(i=!0,XFe(this,r,WFe(n)),i=!1)})),r}});var QFe=ne((l0r,JFe)=>{"use strict";var C0=xy(),sf=n5().Symbol;JFe.exports=function(e){return Object.defineProperties(e,{hasInstance:C0("",sf&&sf.hasInstance||e("hasInstance")),isConcatSpreadable:C0("",sf&&sf.isConcatSpreadable||e("isConcatSpreadable")),iterator:C0("",sf&&sf.iterator||e("iterator")),match:C0("",sf&&sf.match||e("match")),replace:C0("",sf&&sf.replace||e("replace")),search:C0("",sf&&sf.search||e("search")),species:C0("",sf&&sf.species||e("species")),split:C0("",sf&&sf.split||e("split")),toPrimitive:C0("",sf&&sf.toPrimitive||e("toPrimitive")),toStringTag:C0("",sf&&sf.toStringTag||e("toStringTag")),unscopables:C0("",sf&&sf.unscopables||e("unscopables"))})}});var t8e=ne((u0r,e8e)=>{"use strict";var $Fe=xy(),vOt=PW(),i5=Object.create(null);e8e.exports=function(e){return Object.defineProperties(e,{for:$Fe(function(t){return i5[t]?i5[t]:i5[t]=e(String(t))}),keyFor:$Fe(function(t){var r;vOt(t);for(r in i5)if(i5[r]===t)return r})})}});var i8e=ne((f0r,n8e)=>{"use strict";var dg=xy(),RW=PW(),fI=n5().Symbol,dOt=KFe(),pOt=QFe(),gOt=t8e(),yOt=Object.create,DW=Object.defineProperties,cI=Object.defineProperty,tv,Q3,r8e;if(typeof fI=="function")try{String(fI()),r8e=!0}catch(e){}else fI=null;Q3=function(t){if(this instanceof Q3)throw new TypeError("Symbol is not a constructor");return tv(t)};n8e.exports=tv=function e(t){var r;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return r8e?fI(t):(r=yOt(Q3.prototype),t=t===void 0?"":String(t),DW(r,{__description__:dg("",t),__name__:dg("",dOt(t))}))};pOt(tv);gOt(tv);DW(Q3.prototype,{constructor:dg(tv),toString:dg("",function(){return this.__name__})});DW(tv.prototype,{toString:dg(function(){return"Symbol ("+RW(this).__description__+")"}),valueOf:dg(function(){return RW(this)})});cI(tv.prototype,tv.toPrimitive,dg("",function(){var e=RW(this);return typeof e=="symbol"?e:e.toString()}));cI(tv.prototype,tv.toStringTag,dg("c","Symbol"));cI(Q3.prototype,tv.toStringTag,dg("c",tv.prototype[tv.toStringTag]));cI(Q3.prototype,tv.toPrimitive,dg("c",tv.prototype[tv.toPrimitive]))});var p1=ne((c0r,a8e)=>{"use strict";a8e.exports=VFe()()?n5().Symbol:i8e()});var s8e=ne((h0r,o8e)=>{"use strict";var mOt=my();o8e.exports=function(){return mOt(this).length=0,this}});var $3=ne((v0r,l8e)=>{"use strict";l8e.exports=function(e){if(typeof e!="function")throw new TypeError(e+" is not a function");return e}});var f8e=ne((d0r,u8e)=>{"use strict";var xOt=H_(),_Ot=sI(),bOt=Object.prototype.toString;u8e.exports=function(e){if(!xOt(e))return null;if(_Ot(e)){var t=e.toString;if(typeof t!="function"||t===bOt)return null}try{return""+e}catch(r){return null}}});var h8e=ne((p0r,c8e)=>{"use strict";c8e.exports=function(e){try{return e.toString()}catch(t){try{return String(e)}catch(r){return null}}}});var d8e=ne((g0r,v8e)=>{"use strict";var wOt=h8e(),TOt=/[\n\r\u2028\u2029]/g;v8e.exports=function(e){var t=wOt(e);return t===null?"<Non-coercible to string value>":(t.length>100&&(t=t.slice(0,99)+"\u2026"),t=t.replace(TOt,function(r){switch(r){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),t)}});var IW=ne((y0r,y8e)=>{"use strict";var p8e=H_(),AOt=sI(),MOt=f8e(),SOt=d8e(),g8e=function(e,t){return e.replace("%v",SOt(t))};y8e.exports=function(e,t,r){if(!AOt(r))throw new TypeError(g8e(t,e));if(!p8e(e)){if("default"in r)return r.default;if(r.isOptional)return null}var i=MOt(r.errorMessage);throw p8e(i)||(i=t),new TypeError(g8e(i,e))}});var x8e=ne((m0r,m8e)=>{"use strict";var EOt=IW(),kOt=H_();m8e.exports=function(e){return kOt(e)?e:EOt(e,"Cannot use %v",arguments[1])}});var b8e=ne((x0r,_8e)=>{"use strict";var COt=IW(),LOt=SW();_8e.exports=function(e){return LOt(e)?e:COt(e,"%v is not a plain function",arguments[1])}});var T8e=ne((_0r,w8e)=>{"use strict";w8e.exports=function(){var e=Array.from,t,r;return typeof e!="function"?!1:(t=["raz","dwa"],r=e(t),!!(r&&r!==t&&r[1]==="dwa"))}});var M8e=ne((b0r,A8e)=>{"use strict";var POt=Object.prototype.toString,ROt=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);A8e.exports=function(e){return typeof e=="function"&&ROt(POt.call(e))}});var E8e=ne((w0r,S8e)=>{"use strict";S8e.exports=function(){var e=Math.sign;return typeof e!="function"?!1:e(10)===1&&e(-20)===-1}});var C8e=ne((T0r,k8e)=>{"use strict";k8e.exports=function(e){return e=Number(e),isNaN(e)||e===0?e:e>0?1:-1}});var P8e=ne((A0r,L8e)=>{"use strict";L8e.exports=E8e()()?Math.sign:C8e()});var D8e=ne((M0r,R8e)=>{"use strict";var DOt=P8e(),IOt=Math.abs,FOt=Math.floor;R8e.exports=function(e){return isNaN(e)?0:(e=Number(e),e===0||!isFinite(e)?e:DOt(e)*FOt(IOt(e)))}});var F8e=ne((S0r,I8e)=>{"use strict";var qOt=D8e(),zOt=Math.max;I8e.exports=function(e){return zOt(0,qOt(e))}});var B8e=ne((E0r,O8e)=>{"use strict";var OOt=p1().iterator,BOt=t5(),NOt=M8e(),UOt=F8e(),q8e=$3(),VOt=my(),HOt=d1(),GOt=r5(),z8e=Array.isArray,FW=Function.prototype.call,G_={configurable:!0,enumerable:!0,writable:!0,value:null},qW=Object.defineProperty;O8e.exports=function(e){var t=arguments[1],r=arguments[2],i,n,a,o,s,l,u,f,c,h;if(e=Object(VOt(e)),HOt(t)&&q8e(t),!this||this===Array||!NOt(this)){if(!t){if(BOt(e))return s=e.length,s!==1?Array.apply(null,e):(o=new Array(1),o[0]=e[0],o);if(z8e(e)){for(o=new Array(s=e.length),n=0;n<s;++n)o[n]=e[n];return o}}o=[]}else i=this;if(!z8e(e)){if((c=e[OOt])!==void 0){for(u=q8e(c).call(e),i&&(o=new i),f=u.next(),n=0;!f.done;)h=t?FW.call(t,r,f.value,n):f.value,i?(G_.value=h,qW(o,n,G_)):o[n]=h,f=u.next(),++n;s=n}else if(GOt(e)){for(s=e.length,i&&(o=new i),n=0,a=0;n<s;++n)h=e[n],n+1<s&&(l=h.charCodeAt(0),l>=55296&&l<=56319&&(h+=e[++n])),h=t?FW.call(t,r,h,a):h,i?(G_.value=h,qW(o,a,G_)):o[a]=h,++a;s=a}}if(s===void 0)for(s=UOt(e.length),i&&(o=new i(s)),n=0;n<s;++n)h=t?FW.call(t,r,e[n],n):e[n],i?(G_.value=h,qW(o,n,G_)):o[n]=h;return i&&(G_.value=null,o.length=s),o}});var U8e=ne((k0r,N8e)=>{"use strict";N8e.exports=T8e()()?Array.from:B8e()});var H8e=ne((C0r,V8e)=>{"use strict";var YOt=U8e(),WOt=lI(),XOt=my();V8e.exports=function(e){var t=Object(XOt(e)),r=arguments[1],i=Object(arguments[2]);if(t!==e&&!r)return t;var n={};return r?YOt(r,function(a){(i.ensure||a in e)&&(n[a]=e[a])}):WOt(n,e),n}});var W8e=ne((L0r,Y8e)=>{"use strict";var ZOt=$3(),jOt=my(),KOt=Function.prototype.bind,G8e=Function.prototype.call,JOt=Object.keys,QOt=Object.prototype.propertyIsEnumerable;Y8e.exports=function(e,t){return function(r,i){var n,a=arguments[2],o=arguments[3];return r=Object(jOt(r)),ZOt(i),n=JOt(r),o&&n.sort(typeof o=="function"?KOt.call(o,r):void 0),typeof e!="function"&&(e=n[e]),G8e.call(e,n,function(s,l){return QOt.call(r,s)?G8e.call(i,a,r[s],s,r,l):t})}}});var Z8e=ne((P0r,X8e)=>{"use strict";X8e.exports=W8e()("forEach")});var K8e=ne((R0r,j8e)=>{"use strict";var $Ot=$3(),e7t=Z8e(),t7t=Function.prototype.call;j8e.exports=function(e,t){var r={},i=arguments[2];return $Ot(t),e7t(e,function(n,a,o,s){r[a]=t7t.call(t,i,n,a,o,s)}),r}});var eqe=ne((D0r,$8e)=>{"use strict";var r7t=H_(),n7t=x8e(),J8e=b8e(),i7t=H8e(),a7t=EW(),o7t=K8e(),s7t=Function.prototype.bind,l7t=Object.defineProperty,u7t=Object.prototype.hasOwnProperty,Q8e;Q8e=function(e,t,r){var i=n7t(t)&&J8e(t.value),n;return n=i7t(t),delete n.writable,delete n.value,n.get=function(){return!r.overwriteDefinition&&u7t.call(this,e)?i:(t.value=s7t.call(i,r.resolveContext?r.resolveContext(this):this),l7t(this,e,t),this[e])},n};$8e.exports=function(e){var t=a7t(arguments[1]);return r7t(t.resolveContext)&&J8e(t.resolveContext),o7t(e,function(r,i){return Q8e(i,r,t)})}});var zW=ne((I0r,iqe)=>{"use strict";var f7t=s8e(),c7t=lI(),h7t=$3(),v7t=my(),dd=xy(),d7t=eqe(),tqe=p1(),rqe=Object.defineProperty,nqe=Object.defineProperties,a5;iqe.exports=a5=function(e,t){if(!(this instanceof a5))throw new TypeError("Constructor requires 'new'");nqe(this,{__list__:dd("w",v7t(e)),__context__:dd("w",t),__nextIndex__:dd("w",0)}),t&&(h7t(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))};delete a5.prototype.constructor;nqe(a5.prototype,c7t({_next:dd(function(){var e;if(this.__list__){if(this.__redo__&&(e=this.__redo__.shift(),e!==void 0))return e;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:dd(function(){return this._createResult(this._next())}),_createResult:dd(function(e){return e===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:dd(function(e){return this.__list__[e]}),_unBind:dd(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:dd(function(){return"[object "+(this[tqe.toStringTag]||"Object")+"]"})},d7t({_onAdd:dd(function(e){if(!(e>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){rqe(this,"__redo__",dd("c",[e]));return}this.__redo__.forEach(function(t,r){t>=e&&(this.__redo__[r]=++t)},this),this.__redo__.push(e)}}),_onDelete:dd(function(e){var t;e>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(t=this.__redo__.indexOf(e),t!==-1&&this.__redo__.splice(t,1),this.__redo__.forEach(function(r,i){r>e&&(this.__redo__[i]=--r)},this)))}),_onClear:dd(function(){this.__redo__&&f7t.call(this.__redo__),this.__nextIndex__=0})})));rqe(a5.prototype,tqe.iterator,dd(function(){return this}))});var uqe=ne((F0r,lqe)=>{"use strict";var aqe=oI(),oqe=CW(),OW=xy(),p7t=p1(),BW=zW(),sqe=Object.defineProperty,eT;eT=lqe.exports=function(e,t){if(!(this instanceof eT))throw new TypeError("Constructor requires 'new'");BW.call(this,e),t?oqe.call(t,"key+value")?t="key+value":oqe.call(t,"key")?t="key":t="value":t="value",sqe(this,"__kind__",OW("",t))};aqe&&aqe(eT,BW);delete eT.prototype.constructor;eT.prototype=Object.create(BW.prototype,{_resolve:OW(function(e){return this.__kind__==="value"?this.__list__[e]:this.__kind__==="key+value"?[e,this.__list__[e]]:e})});sqe(eT.prototype,p7t.toStringTag,OW("c","Array Iterator"))});var vqe=ne((q0r,hqe)=>{"use strict";var fqe=oI(),hI=xy(),g7t=p1(),NW=zW(),cqe=Object.defineProperty,tT;tT=hqe.exports=function(e){if(!(this instanceof tT))throw new TypeError("Constructor requires 'new'");e=String(e),NW.call(this,e),cqe(this,"__length__",hI("",e.length))};fqe&&fqe(tT,NW);delete tT.prototype.constructor;tT.prototype=Object.create(NW.prototype,{_next:hI(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:hI(function(e){var t=this.__list__[e],r;return this.__nextIndex__===this.__length__?t:(r=t.charCodeAt(0),r>=55296&&r<=56319?t+this.__list__[this.__nextIndex__++]:t)})});cqe(tT.prototype,g7t.toStringTag,hI("c","String Iterator"))});var pqe=ne((z0r,dqe)=>{"use strict";var y7t=t5(),m7t=d1(),x7t=r5(),_7t=p1().iterator,b7t=Array.isArray;dqe.exports=function(e){return m7t(e)?b7t(e)||x7t(e)||y7t(e)?!0:typeof e[_7t]=="function":!1}});var yqe=ne((O0r,gqe)=>{"use strict";var w7t=pqe();gqe.exports=function(e){if(!w7t(e))throw new TypeError(e+" is not iterable");return e}});var UW=ne((B0r,_qe)=>{"use strict";var T7t=t5(),A7t=r5(),mqe=uqe(),M7t=vqe(),S7t=yqe(),xqe=p1().iterator;_qe.exports=function(e){return typeof S7t(e)[xqe]=="function"?e[xqe]():T7t(e)?new mqe(e):A7t(e)?new M7t(e):new mqe(e)}});var wqe=ne((N0r,bqe)=>{"use strict";var E7t=t5(),k7t=$3(),C7t=r5(),L7t=UW(),P7t=Array.isArray,VW=Function.prototype.call,R7t=Array.prototype.some;bqe.exports=function(e,t){var r,i=arguments[2],n,a,o,s,l,u,f;if(P7t(e)||E7t(e)?r="array":C7t(e)?r="string":e=L7t(e),k7t(t),a=function(){o=!0},r==="array"){R7t.call(e,function(c){return VW.call(t,i,c,a),o});return}if(r==="string"){for(l=e.length,s=0;s<l&&(u=e[s],s+1<l&&(f=u.charCodeAt(0),f>=55296&&f<=56319&&(u+=e[++s])),VW.call(t,i,u,a),!o);++s);return}for(n=e.next();!n.done;){if(VW.call(t,i,n.value,a),o)return;n=e.next()}}});var Aqe=ne((U0r,Tqe)=>{"use strict";Tqe.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()});var Eqe=ne((V0r,Sqe)=>{"use strict";var D7t=d1(),dI=oI(),vI=eFe(),I7t=my(),F7t=rFe(),_y=xy(),q7t=UW(),z7t=wqe(),O7t=p1().toStringTag,Mqe=Aqe(),B7t=Array.isArray,GW=Object.defineProperty,HW=Object.prototype.hasOwnProperty,N7t=Object.getPrototypeOf,g1;Sqe.exports=g1=function(){var e=arguments[0],t;if(!(this instanceof g1))throw new TypeError("Constructor requires 'new'");return t=Mqe&&dI&&WeakMap!==g1?dI(new WeakMap,N7t(this)):this,D7t(e)&&(B7t(e)||(e=q7t(e))),GW(t,"__weakMapData__",_y("c","$weakMap$"+F7t())),e&&z7t(e,function(r){I7t(r),t.set(r[0],r[1])}),t};Mqe&&(dI&&dI(g1,WeakMap),g1.prototype=Object.create(WeakMap.prototype,{constructor:_y(g1)}));Object.defineProperties(g1.prototype,{delete:_y(function(e){return HW.call(vI(e),this.__weakMapData__)?(delete e[this.__weakMapData__],!0):!1}),get:_y(function(e){if(HW.call(vI(e),this.__weakMapData__))return e[this.__weakMapData__]}),has:_y(function(e){return HW.call(vI(e),this.__weakMapData__)}),set:_y(function(e,t){return GW(vI(e),this.__weakMapData__,_y("c",t)),this}),toString:_y(function(){return"[object WeakMap]"})});GW(g1.prototype,O7t,_y("c","WeakMap"))});var YW=ne((H0r,kqe)=>{"use strict";kqe.exports=UIe()()?WeakMap:Eqe()});var Lqe=ne((G0r,Cqe)=>{"use strict";Cqe.exports=function(e,t,r){if(typeof Array.prototype.findIndex=="function")return e.findIndex(t,r);if(typeof t!="function")throw new TypeError("predicate must be a function");var i=Object(e),n=i.length;if(n===0)return-1;for(var a=0;a<n;a++)if(t.call(r,i[a],a,i))return a;return-1}});var ZW=ne((Y0r,Dqe)=>{"use strict";var pI=n1(),U7t=z_(),XW=of(),V7t=vg(),H7t=O_(),Pqe=zIe(),G7t=BIe(),{float32:Y7t,fract32:WW}=JD(),W7t=YW(),Rqe=G3(),X7t=Lqe(),Z7t=`
precision highp float;

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`,j7t=`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`,K7t=`
precision highp float;

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`,J7t=`
precision highp float;
varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`,Q7t=`
precision highp float;

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);


	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`,$7t=`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`;Dqe.exports=cl;function cl(e,t){if(!(this instanceof cl))return new cl(e,t);if(typeof e=="function"?(t||(t={}),t.regl=e):t=e,t.length&&(t.positions=t),e=t.regl,!e.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=e._gl,this.regl=e,this.passes=[],this.shaders=cl.shaders.has(e)?cl.shaders.get(e):cl.shaders.set(e,cl.createShaders(e)).get(e),this.update(t)}cl.dashMult=2;cl.maxPatternLength=256;cl.precisionThreshold=3e6;cl.maxPoints=1e4;cl.maxLines=2048;cl.shaders=new W7t;cl.createShaders=function(e){let t=e.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),r={primitive:"triangle strip",instances:e.prop("count"),count:4,offset:0,uniforms:{miterMode:(o,s)=>s.join==="round"?2:1,miterLimit:e.prop("miterLimit"),scale:e.prop("scale"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),translate:e.prop("translate"),thickness:e.prop("thickness"),dashTexture:e.prop("dashTexture"),opacity:e.prop("opacity"),pixelRatio:e.context("pixelRatio"),id:e.prop("id"),dashLength:e.prop("dashLength"),viewport:(o,s)=>[s.viewport.x,s.viewport.y,o.viewportWidth,o.viewportHeight],depth:e.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:(o,s)=>!s.overlay},stencil:{enable:!1},scissor:{enable:!0,box:e.prop("viewport")},viewport:e.prop("viewport")},i=e(XW({vert:Z7t,frag:j7t,attributes:{lineEnd:{buffer:t,divisor:0,stride:8,offset:0},lineTop:{buffer:t,divisor:0,stride:8,offset:4},aCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:e.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},r)),n;try{n=e(XW({cull:{enable:!0,face:"back"},vert:Q7t,frag:$7t,attributes:{lineEnd:{buffer:t,divisor:0,stride:8,offset:0},lineTop:{buffer:t,divisor:0,stride:8,offset:4},aColor:{buffer:e.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:e.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},r))}catch(o){n=i}return{fill:e({primitive:"triangle",elements:(o,s)=>s.triangles,offset:0,vert:K7t,frag:J7t,uniforms:{scale:e.prop("scale"),color:e.prop("fill"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),translate:e.prop("translate"),opacity:e.prop("opacity"),pixelRatio:e.context("pixelRatio"),id:e.prop("id"),viewport:(o,s)=>[s.viewport.x,s.viewport.y,o.viewportWidth,o.viewportHeight]},attributes:{position:{buffer:e.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:8}},blend:r.blend,depth:{enable:!1},scissor:r.scissor,stencil:r.stencil,viewport:r.viewport}),rect:i,miter:n}};cl.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null};cl.prototype.render=function(...e){e.length&&this.update(...e),this.draw()};cl.prototype.draw=function(...e){return(e.length?e:this.passes).forEach((t,r)=>{if(t&&Array.isArray(t))return this.draw(...t);typeof t=="number"&&(t=this.passes[t]),t&&t.count>1&&t.opacity&&(this.regl._refresh(),t.fill&&t.triangles&&t.triangles.length>2&&this.shaders.fill(t),t.thickness&&(t.scale[0]*t.viewport.width>cl.precisionThreshold||t.scale[1]*t.viewport.height>cl.precisionThreshold?this.shaders.rect(t):t.join==="rect"||!t.join&&(t.thickness<=2||t.count>=cl.maxPoints)?this.shaders.rect(t):this.shaders.miter(t)))}),this};cl.prototype.update=function(e){if(!e)return;e.length!=null?typeof e[0]=="number"&&(e=[{positions:e}]):Array.isArray(e)||(e=[e]);let{regl:t,gl:r}=this;if(e.forEach((n,a)=>{let o=this.passes[a];if(n!==void 0){if(n===null){this.passes[a]=null;return}if(typeof n[0]=="number"&&(n={positions:n}),n=V7t(n,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),o||(this.passes[a]=o={id:a,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:t.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:t.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:t.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:t.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},n=XW({},cl.defaults,n)),n.thickness!=null&&(o.thickness=parseFloat(n.thickness)),n.opacity!=null&&(o.opacity=parseFloat(n.opacity)),n.miterLimit!=null&&(o.miterLimit=parseFloat(n.miterLimit)),n.overlay!=null&&(o.overlay=!!n.overlay,a<cl.maxLines&&(o.depth=2*(cl.maxLines-1-a%cl.maxLines)/cl.maxLines-1)),n.join!=null&&(o.join=n.join),n.hole!=null&&(o.hole=n.hole),n.fill!=null&&(o.fill=n.fill?pI(n.fill,"uint8"):null),n.viewport!=null&&(o.viewport=Rqe(n.viewport)),o.viewport||(o.viewport=Rqe([r.drawingBufferWidth,r.drawingBufferHeight])),n.close!=null&&(o.close=n.close),n.positions===null&&(n.positions=[]),n.positions){let u,f;if(n.positions.x&&n.positions.y){let d=n.positions.x,_=n.positions.y;f=o.count=Math.max(d.length,_.length),u=new Float64Array(f*2);for(let T=0;T<f;T++)u[T*2]=d[T],u[T*2+1]=_[T]}else u=H7t(n.positions,"float64"),f=o.count=Math.floor(u.length/2);let c=o.bounds=U7t(u,2);if(o.fill){let d=[],_={},T=0;for(let p=0,M=0,b=o.count;p<b;p++){let w=u[p*2],k=u[p*2+1];isNaN(w)||isNaN(k)||w==null||k==null?(w=u[T*2],k=u[T*2+1],_[p]=T):T=p,d[M++]=w,d[M++]=k}if(n.splitNull){o.count-1 in _||(_[o.count]=o.count-1);let p=Object.keys(_).map(Number).sort((k,x)=>k-x),M=[],b=0,w=o.hole!=null?o.hole[0]:null;if(w!=null){let k=X7t(p,x=>x>=w);p=p.slice(0,k),p.push(w)}for(let k=0;k<p.length;k++){let x=d.slice(b*2,p[k]*2).concat(w?d.slice(w*2):[]),E=(o.hole||[]).map(g=>g-w+(p[k]-b)),S=Pqe(x,E);S=S.map(g=>g+b+(g+b<p[k]?0:w-p[k])),M.push(...S),b=p[k]+1}for(let k=0,x=M.length;k<x;k++)_[M[k]]!=null&&(M[k]=_[M[k]]);o.triangles=M}else{let p=Pqe(d,o.hole||[]);for(let M=0,b=p.length;M<b;M++)_[p[M]]!=null&&(p[M]=_[p[M]]);o.triangles=p}}let h=new Float64Array(u);G7t(h,2,c);let v=new Float64Array(f*2+6);o.close?u[0]===u[f*2-2]&&u[1]===u[f*2-1]?(v[0]=h[f*2-4],v[1]=h[f*2-3]):(v[0]=h[f*2-2],v[1]=h[f*2-1]):(v[0]=h[0],v[1]=h[1]),v.set(h,2),o.close?u[0]===u[f*2-2]&&u[1]===u[f*2-1]?(v[f*2+2]=h[2],v[f*2+3]=h[3],o.count-=1):(v[f*2+2]=h[0],v[f*2+3]=h[1],v[f*2+4]=h[2],v[f*2+5]=h[3]):(v[f*2+2]=h[f*2-2],v[f*2+3]=h[f*2-1],v[f*2+4]=h[f*2-2],v[f*2+5]=h[f*2-1]);var s=Y7t(v);o.positionBuffer(s);var l=WW(v,s);o.positionFractBuffer(l)}if(n.range?o.range=n.range:o.range||(o.range=o.bounds),(n.range||n.positions)&&o.count){let u=o.bounds,f=u[2]-u[0],c=u[3]-u[1],h=o.range[2]-o.range[0],v=o.range[3]-o.range[1];o.scale=[f/h,c/v],o.translate=[-o.range[0]/h+u[0]/h||0,-o.range[1]/v+u[1]/v||0],o.scaleFract=WW(o.scale),o.translateFract=WW(o.translate)}if(n.dashes){let u=0,f;if(!n.dashes||n.dashes.length<2)u=1,f=new Uint8Array([255,255,255,255,255,255,255,255]);else{u=0;for(let v=0;v<n.dashes.length;++v)u+=n.dashes[v];f=new Uint8Array(u*cl.dashMult);let c=0,h=255;for(let v=0;v<2;v++)for(let d=0;d<n.dashes.length;++d){for(let _=0,T=n.dashes[d]*cl.dashMult*.5;_<T;++_)f[c++]=h;h^=255}}o.dashLength=u,o.dashTexture({channels:1,data:f,width:f.length,height:1,mag:"linear",min:"linear"},0,0)}if(n.color){let u=o.count,f=n.color;f||(f="transparent");let c=new Uint8Array(u*4+4);if(!Array.isArray(f)||typeof f[0]=="number"){let h=pI(f,"uint8");for(let v=0;v<u+1;v++)c.set(h,v*4)}else{for(let h=0;h<u;h++){let v=pI(f[h],"uint8");c.set(v,h*4)}c.set(pI(f[0],"uint8"),u*4)}o.colorBuffer({usage:"dynamic",type:"uint8",data:c})}}}),e.length<this.passes.length){for(let n=e.length;n<this.passes.length;n++){let a=this.passes[n];a&&(a.colorBuffer.destroy(),a.positionBuffer.destroy(),a.dashTexture.destroy())}this.passes.length=e.length}let i=[];for(let n=0;n<this.passes.length;n++)this.passes[n]!==null&&i.push(this.passes[n]);return this.passes=i,this};cl.prototype.destroy=function(){return this.passes.forEach(e=>{e.colorBuffer.destroy(),e.positionBuffer.destroy(),e.dashTexture.destroy()}),this.passes.length=0,this}});var Oqe=ne((W0r,zqe)=>{"use strict";var eBt=z_(),tBt=n1(),rBt=pW(),nBt=vg(),Iqe=of(),Fqe=O_(),{float32:iBt,fract32:jW}=JD();zqe.exports=aBt;var qqe=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function aBt(e,t){if(typeof e=="function"?(t||(t={}),t.regl=e):t=e,t.length&&(t.positions=t),e=t.regl,!e.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");let r=e._gl,i,n,a,o,s,l,u={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},f=[];return o=e.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),n=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),a=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),s=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),l=e.buffer({usage:"static",type:"float",data:qqe}),d(t),i=e({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:e.prop("range"),lineWidth:e.prop("lineWidth"),capSize:e.prop("capSize"),opacity:e.prop("opacity"),scale:e.prop("scale"),translate:e.prop("translate"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),viewport:(T,p)=>[p.viewport.x,p.viewport.y,T.viewportWidth,T.viewportHeight]},attributes:{color:{buffer:o,offset:(T,p)=>p.offset*4,divisor:1},position:{buffer:n,offset:(T,p)=>p.offset*8,divisor:1},positionFract:{buffer:a,offset:(T,p)=>p.offset*8,divisor:1},error:{buffer:s,offset:(T,p)=>p.offset*16,divisor:1},direction:{buffer:l,stride:24,offset:0},lineOffset:{buffer:l,stride:24,offset:8},capOffset:{buffer:l,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:e.prop("viewport")},viewport:e.prop("viewport"),stencil:!1,instances:e.prop("count"),count:qqe.length}),Iqe(c,{update:d,draw:h,destroy:_,regl:e,gl:r,canvas:r.canvas,groups:f}),c;function c(T){T?d(T):T===null&&_(),h()}function h(T){if(typeof T=="number")return v(T);T&&!Array.isArray(T)&&(T=[T]),e._refresh(),f.forEach((p,M)=>{if(p){if(T&&(T[M]?p.draw=!0:p.draw=!1),!p.draw){p.draw=!0;return}v(M)}})}function v(T){typeof T=="number"&&(T=f[T]),T!=null&&T&&T.count&&T.color&&T.opacity&&T.positions&&T.positions.length>1&&(T.scaleRatio=[T.scale[0]*T.viewport.width,T.scale[1]*T.viewport.height],i(T),T.after&&T.after(T))}function d(T){if(!T)return;T.length!=null?typeof T[0]=="number"&&(T=[{positions:T}]):Array.isArray(T)||(T=[T]);let p=0,M=0;if(c.groups=f=T.map((k,x)=>{let E=f[x];if(k)typeof k=="function"?k={after:k}:typeof k[0]=="number"&&(k={positions:k});else return E;return k=nBt(k,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),E||(f[x]=E={id:x,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},k=Iqe({},u,k)),rBt(E,k,[{lineWidth:S=>+S*.5,capSize:S=>+S*.5,opacity:parseFloat,errors:S=>(S=Fqe(S),M+=S.length,S),positions:(S,g)=>(S=Fqe(S,"float64"),g.count=Math.floor(S.length/2),g.bounds=eBt(S,2),g.offset=p,p+=g.count,S)},{color:(S,g)=>{let C=g.count;if(S||(S="transparent"),!Array.isArray(S)||typeof S[0]=="number"){let P=S;S=Array(C);for(let D=0;D<C;D++)S[D]=P}if(S.length<C)throw Error("Not enough colors");let A=new Uint8Array(C*4);for(let P=0;P<C;P++){let D=tBt(S[P],"uint8");A.set(D,P*4)}return A},range:(S,g,C)=>{let A=g.bounds;return S||(S=A),g.scale=[1/(S[2]-S[0]),1/(S[3]-S[1])],g.translate=[-S[0],-S[1]],g.scaleFract=jW(g.scale),g.translateFract=jW(g.translate),S},viewport:S=>{let g;return Array.isArray(S)?g={x:S[0],y:S[1],width:S[2]-S[0],height:S[3]-S[1]}:S?(g={x:S.x||S.left||0,y:S.y||S.top||0},S.right?g.width=S.right-g.x:g.width=S.w||S.width||0,S.bottom?g.height=S.bottom-g.y:g.height=S.h||S.height||0):g={x:0,y:0,width:r.drawingBufferWidth,height:r.drawingBufferHeight},g}}]),E}),p||M){let k=f.reduce((g,C,A)=>g+(C?C.count:0),0),x=new Float64Array(k*2),E=new Uint8Array(k*4),S=new Float32Array(k*4);f.forEach((g,C)=>{if(!g)return;let{positions:A,count:P,offset:D,color:z,errors:O}=g;P&&(E.set(z,D*4),S.set(O,D*4),x.set(A,D*2))});var b=iBt(x);n(b);var w=jW(x,b);a(w),o(E),s(S)}}function _(){n.destroy(),a.destroy(),o.destroy(),s.destroy(),l.destroy()}}});var Uqe=ne((X0r,Nqe)=>{var Bqe=/[\'\"]/;Nqe.exports=function(t){return t?(Bqe.test(t.charAt(0))&&(t=t.substr(1)),Bqe.test(t.charAt(t.length-1))&&(t=t.substr(0,t.length-1)),t):""}});var KW=ne(()=>{});var JW=ne(()=>{});var QW=ne(()=>{});var $W=ne(()=>{});var eX=ne(()=>{});var Yqe=ne((igr,Gqe)=>{"use strict";function Vqe(e,t){if(typeof e!="string")return[e];var r=[e];typeof t=="string"||Array.isArray(t)?t={brackets:t}:t||(t={});var i=t.brackets?Array.isArray(t.brackets)?t.brackets:[t.brackets]:["{}","[]","()"],n=t.escape||"___",a=!!t.flat;i.forEach(function(l){var u=new RegExp(["\\",l[0],"[^\\",l[0],"\\",l[1],"]*\\",l[1]].join("")),f=[];function c(h,v,d){var _=r.push(h.slice(l[0].length,-l[1].length))-1;return f.push(_),n+_+n}r.forEach(function(h,v){for(var d,_=0;h!=d;)if(d=h,h=h.replace(u,c),_++>1e4)throw Error("References have circular dependency. Please, check them.");r[v]=h}),f=f.reverse(),r=r.map(function(h){return f.forEach(function(v){h=h.replace(new RegExp("(\\"+n+v+"\\"+n+")","g"),l[0]+"$1"+l[1])}),h})});var o=new RegExp("\\"+n+"([0-9]+)\\"+n);function s(l,u,f){for(var c=[],h,v=0;h=o.exec(l);){if(v++>1e4)throw Error("Circular references in parenthesis");c.push(l.slice(0,h.index)),c.push(s(u[h[1]],u)),l=l.slice(h.index+h[0].length)}return c.push(l),c}return a?r:s(r[0],r)}function Hqe(e,t){if(t&&t.flat){var r=t&&t.escape||"___",i=e[0],n;if(!i)return"";for(var a=new RegExp("\\"+r+"([0-9]+)\\"+r),o=0;i!=n;){if(o++>1e4)throw Error("Circular references in "+e);n=i,i=i.replace(a,s)}return i}return e.reduce(function l(u,f){return Array.isArray(f)&&(f=f.reduce(l,"")),u+f},"");function s(l,u){if(e[u]==null)throw Error("Reference "+u+"is undefined");return e[u]}}function tX(e,t){return Array.isArray(e)?Hqe(e,t):Vqe(e,t)}tX.parse=Vqe;tX.stringify=Hqe;Gqe.exports=tX});var Zqe=ne((agr,Xqe)=>{"use strict";var Wqe=Yqe();Xqe.exports=function(t,r,i){if(t==null)throw Error("First argument should be a string");if(r==null)throw Error("Separator should be a string or a RegExp");i?(typeof i=="string"||Array.isArray(i))&&(i={ignore:i}):i={},i.escape==null&&(i.escape=!0),i.ignore==null?i.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof i.ignore=="string"&&(i.ignore=[i.ignore]),i.ignore=i.ignore.map(function(c){return c.length===1&&(c=c+c),c}));var n=Wqe.parse(t,{flat:!0,brackets:i.ignore}),a=n[0],o=a.split(r);if(i.escape){for(var s=[],l=0;l<o.length;l++){var u=o[l],f=o[l+1];u[u.length-1]==="\\"&&u[u.length-2]!=="\\"?(s.push(u+r+f),l++):s.push(u)}o=s}for(var l=0;l<o.length;l++)n[0]=o[l],o[l]=Wqe.stringify(n,{flat:!0});return o}});var jqe=ne(()=>{});var rX=ne((lgr,Kqe)=>{"use strict";var oBt=jqe();Kqe.exports={isSize:function(t){return/^[\d\.]/.test(t)||t.indexOf("/")!==-1||oBt.indexOf(t)!==-1}}});var eze=ne((ugr,$qe)=>{"use strict";var sBt=Uqe(),lBt=KW(),uBt=JW(),fBt=QW(),cBt=$W(),hBt=eX(),nX=Zqe(),vBt=rX().isSize;$qe.exports=Qqe;var o5=Qqe.cache={};function Qqe(e){if(typeof e!="string")throw new Error("Font argument must be a string.");if(o5[e])return o5[e];if(e==="")throw new Error("Cannot parse an empty string.");if(uBt.indexOf(e)!==-1)return o5[e]={system:e};for(var t={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},r=nX(e,/\s+/),i;i=r.shift();){if(lBt.indexOf(i)!==-1)return["style","variant","weight","stretch"].forEach(function(a){t[a]=i}),o5[e]=t;if(cBt.indexOf(i)!==-1){t.style=i;continue}if(i==="normal"||i==="small-caps"){t.variant=i;continue}if(hBt.indexOf(i)!==-1){t.stretch=i;continue}if(fBt.indexOf(i)!==-1){t.weight=i;continue}if(vBt(i)){var n=nX(i,"/");if(t.size=n[0],n[1]!=null?t.lineHeight=Jqe(n[1]):r[0]==="/"&&(r.shift(),t.lineHeight=Jqe(r.shift())),!r.length)throw new Error("Missing required font-family.");return t.family=nX(r.join(" "),/\s*,\s*/).map(sBt),o5[e]=t}throw new Error("Unknown or unsupported font token: "+i)}throw new Error("Missing required font-size.")}function Jqe(e){var t=parseFloat(e);return t.toString()===e?t:e}});var aX=ne((fgr,tze)=>{"use strict";var dBt=vg(),pBt=rX().isSize,gBt=l5(KW()),yBt=l5(JW()),mBt=l5(QW()),xBt=l5($W()),_Bt=l5(eX()),bBt={normal:1,"small-caps":1},wBt={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},iX={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};tze.exports=function(t){if(t=dBt(t,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"}),t.system)return t.system&&s5(t.system,yBt),t.system;if(s5(t.style,xBt),s5(t.variant,bBt),s5(t.weight,mBt),s5(t.stretch,_Bt),t.size==null&&(t.size=iX.size),typeof t.size=="number"&&(t.size+="px"),!pBt)throw Error("Bad size value `"+t.size+"`");t.family||(t.family=iX.family),Array.isArray(t.family)&&(t.family.length||(t.family=[iX.family]),t.family=t.family.map(function(i){return wBt[i]?i:'"'+i+'"'}).join(", "));var r=[];return r.push(t.style),t.variant!==t.style&&r.push(t.variant),t.weight!==t.variant&&t.weight!==t.style&&r.push(t.weight),t.stretch!==t.weight&&t.stretch!==t.variant&&t.stretch!==t.style&&r.push(t.stretch),r.push(t.size+(t.lineHeight==null||t.lineHeight==="normal"||t.lineHeight+""=="1"?"":"/"+t.lineHeight)),r.push(t.family),r.filter(Boolean).join(" ")};function s5(e,t){if(e&&!t[e]&&!gBt[e])throw Error("Unknown keyword `"+e+"`");return e}function l5(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=1;return t}});var nze=ne((cgr,rze)=>{"use strict";rze.exports={parse:eze(),stringify:aX()}});var lX=ne((oX,sX)=>{(function(e,t){typeof oX=="object"&&typeof sX!="undefined"?sX.exports=t():typeof define=="function"&&define.amd?define(t):e.createREGL=t()})(oX,function(){"use strict";var e=function(Ye,Gt){for(var lr=Object.keys(Gt),Or=0;Or<lr.length;++Or)Ye[lr[Or]]=Gt[lr[Or]];return Ye},t=0,r=0,i=5,n=6;function a(Ye,Gt){this.id=t++,this.type=Ye,this.data=Gt}function o(Ye){return Ye.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function s(Ye){if(Ye.length===0)return[];var Gt=Ye.charAt(0),lr=Ye.charAt(Ye.length-1);if(Ye.length>1&&Gt===lr&&(Gt==='"'||Gt==="'"))return['"'+o(Ye.substr(1,Ye.length-2))+'"'];var Or=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ye);if(Or)return s(Ye.substr(0,Or.index)).concat(s(Or[1])).concat(s(Ye.substr(Or.index+Or[0].length)));var $r=Ye.split(".");if($r.length===1)return['"'+o(Ye)+'"'];for(var jr=[],Kr=0;Kr<$r.length;++Kr)jr=jr.concat(s($r[Kr]));return jr}function l(Ye){return"["+s(Ye).join("][")+"]"}function u(Ye,Gt){return new a(Ye,l(Gt+""))}function f(Ye){return typeof Ye=="function"&&!Ye._reglType||Ye instanceof a}function c(Ye,Gt){if(typeof Ye=="function")return new a(r,Ye);if(typeof Ye=="number"||typeof Ye=="boolean")return new a(i,Ye);if(Array.isArray(Ye))return new a(n,Ye.map(function(lr,Or){return c(lr,Gt+"["+Or+"]")}));if(Ye instanceof a)return Ye}var h={DynamicVariable:a,define:u,isDynamic:f,unbox:c,accessor:l},v={next:typeof requestAnimationFrame=="function"?function(Ye){return requestAnimationFrame(Ye)}:function(Ye){return setTimeout(Ye,16)},cancel:typeof cancelAnimationFrame=="function"?function(Ye){return cancelAnimationFrame(Ye)}:clearTimeout},d=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function _(){var Ye={"":0},Gt=[""];return{id:function(lr){var Or=Ye[lr];return Or||(Or=Ye[lr]=Gt.length,Gt.push(lr),Or)},str:function(lr){return Gt[lr]}}}function T(Ye,Gt,lr){var Or=document.createElement("canvas");e(Or.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),Ye.appendChild(Or),Ye===document.body&&(Or.style.position="absolute",e(Ye.style,{margin:0,padding:0}));function $r(){var xn=window.innerWidth,Qn=window.innerHeight;if(Ye!==document.body){var Wn=Or.getBoundingClientRect();xn=Wn.right-Wn.left,Qn=Wn.bottom-Wn.top}Or.width=lr*xn,Or.height=lr*Qn}var jr;Ye!==document.body&&typeof ResizeObserver=="function"?(jr=new ResizeObserver(function(){setTimeout($r)}),jr.observe(Ye)):window.addEventListener("resize",$r,!1);function Kr(){jr?jr.disconnect():window.removeEventListener("resize",$r),Ye.removeChild(Or)}return $r(),{canvas:Or,onDestroy:Kr}}function p(Ye,Gt){function lr(Or){try{return Ye.getContext(Or,Gt)}catch($r){return null}}return lr("webgl")||lr("experimental-webgl")||lr("webgl-experimental")}function M(Ye){return typeof Ye.nodeName=="string"&&typeof Ye.appendChild=="function"&&typeof Ye.getBoundingClientRect=="function"}function b(Ye){return typeof Ye.drawArrays=="function"||typeof Ye.drawElements=="function"}function w(Ye){return typeof Ye=="string"?Ye.split():Ye}function k(Ye){return typeof Ye=="string"?document.querySelector(Ye):Ye}function x(Ye){var Gt=Ye||{},lr,Or,$r,jr,Kr={},xn=[],Qn=[],Wn=typeof window=="undefined"?1:window.devicePixelRatio,Rn=!1,ia={},Un=function(Br){},Bn=function(){};if(typeof Gt=="string"?lr=document.querySelector(Gt):typeof Gt=="object"&&(M(Gt)?lr=Gt:b(Gt)?(jr=Gt,$r=jr.canvas):("gl"in Gt?jr=Gt.gl:"canvas"in Gt?$r=k(Gt.canvas):"container"in Gt&&(Or=k(Gt.container)),"attributes"in Gt&&(Kr=Gt.attributes),"extensions"in Gt&&(xn=w(Gt.extensions)),"optionalExtensions"in Gt&&(Qn=w(Gt.optionalExtensions)),"onDone"in Gt&&(Un=Gt.onDone),"profile"in Gt&&(Rn=!!Gt.profile),"pixelRatio"in Gt&&(Wn=+Gt.pixelRatio),"cachedCode"in Gt&&(ia=Gt.cachedCode))),lr&&(lr.nodeName.toLowerCase()==="canvas"?$r=lr:Or=lr),!jr){if(!$r){var _n=T(Or||document.body,Un,Wn);if(!_n)return null;$r=_n.canvas,Bn=_n.onDestroy}Kr.premultipliedAlpha===void 0&&(Kr.premultipliedAlpha=!0),jr=p($r,Kr)}return jr?{gl:jr,canvas:$r,container:Or,extensions:xn,optionalExtensions:Qn,pixelRatio:Wn,profile:Rn,cachedCode:ia,onDone:Un,onDestroy:Bn}:(Bn(),Un("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function E(Ye,Gt){var lr={};function Or(Kr){var xn=Kr.toLowerCase(),Qn;try{Qn=lr[xn]=Ye.getExtension(xn)}catch(Wn){}return!!Qn}for(var $r=0;$r<Gt.extensions.length;++$r){var jr=Gt.extensions[$r];if(!Or(jr))return Gt.onDestroy(),Gt.onDone('"'+jr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Gt.optionalExtensions.forEach(Or),{extensions:lr,restore:function(){Object.keys(lr).forEach(function(Kr){if(lr[Kr]&&!Or(Kr))throw new Error("(regl): error restoring extension "+Kr)})}}}function S(Ye,Gt){for(var lr=Array(Ye),Or=0;Or<Ye;++Or)lr[Or]=Gt(Or);return lr}var g=5120,C=5121,A=5122,P=5123,D=5124,z=5125,O=5126;function V(Ye){for(var Gt=16;Gt<=1<<28;Gt*=16)if(Ye<=Gt)return Gt;return 0}function B(Ye){var Gt,lr;return Gt=(Ye>65535)<<4,Ye>>>=Gt,lr=(Ye>255)<<3,Ye>>>=lr,Gt|=lr,lr=(Ye>15)<<2,Ye>>>=lr,Gt|=lr,lr=(Ye>3)<<1,Ye>>>=lr,Gt|=lr,Gt|Ye>>1}function F(){var Ye=S(8,function(){return[]});function Gt(jr){var Kr=V(jr),xn=Ye[B(Kr)>>2];return xn.length>0?xn.pop():new ArrayBuffer(Kr)}function lr(jr){Ye[B(jr.byteLength)>>2].push(jr)}function Or(jr,Kr){var xn=null;switch(jr){case g:xn=new Int8Array(Gt(Kr),0,Kr);break;case C:xn=new Uint8Array(Gt(Kr),0,Kr);break;case A:xn=new Int16Array(Gt(2*Kr),0,Kr);break;case P:xn=new Uint16Array(Gt(2*Kr),0,Kr);break;case D:xn=new Int32Array(Gt(4*Kr),0,Kr);break;case z:xn=new Uint32Array(Gt(4*Kr),0,Kr);break;case O:xn=new Float32Array(Gt(4*Kr),0,Kr);break;default:return null}return xn.length!==Kr?xn.subarray(0,Kr):xn}function $r(jr){lr(jr.buffer)}return{alloc:Gt,free:lr,allocType:Or,freeType:$r}}var N=F();N.zero=F();var Z=3408,J=3410,re=3411,ue=3412,fe=3413,K=3414,X=3415,ae=33901,oe=33902,me=3379,xe=3386,ce=34921,ie=36347,ge=36348,le=35661,we=35660,Re=34930,qe=36349,et=34076,Pe=34024,Ie=7936,ut=7937,ft=7938,je=35724,_t=34047,Bt=36063,Lt=34852,Me=3553,Ze=34067,dt=34069,it=33984,vt=6408,rt=5126,We=5121,ht=36160,mt=36053,er=36064,$t=16384,cr=function(Ye,Gt){var lr=1;Gt.ext_texture_filter_anisotropic&&(lr=Ye.getParameter(_t));var Or=1,$r=1;Gt.webgl_draw_buffers&&(Or=Ye.getParameter(Lt),$r=Ye.getParameter(Bt));var jr=!!Gt.oes_texture_float;if(jr){var Kr=Ye.createTexture();Ye.bindTexture(Me,Kr),Ye.texImage2D(Me,0,vt,1,1,0,vt,rt,null);var xn=Ye.createFramebuffer();if(Ye.bindFramebuffer(ht,xn),Ye.framebufferTexture2D(ht,er,Me,Kr,0),Ye.bindTexture(Me,null),Ye.checkFramebufferStatus(ht)!==mt)jr=!1;else{Ye.viewport(0,0,1,1),Ye.clearColor(1,0,0,1),Ye.clear($t);var Qn=N.allocType(rt,4);Ye.readPixels(0,0,1,1,vt,rt,Qn),Ye.getError()?jr=!1:(Ye.deleteFramebuffer(xn),Ye.deleteTexture(Kr),jr=Qn[0]===1),N.freeType(Qn)}}var Wn=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Rn=!0;if(!Wn){var ia=Ye.createTexture(),Un=N.allocType(We,36);Ye.activeTexture(it),Ye.bindTexture(Ze,ia),Ye.texImage2D(dt,0,vt,3,3,0,vt,We,Un),N.freeType(Un),Ye.bindTexture(Ze,null),Ye.deleteTexture(ia),Rn=!Ye.getError()}return{colorBits:[Ye.getParameter(J),Ye.getParameter(re),Ye.getParameter(ue),Ye.getParameter(fe)],depthBits:Ye.getParameter(K),stencilBits:Ye.getParameter(X),subpixelBits:Ye.getParameter(Z),extensions:Object.keys(Gt).filter(function(Bn){return!!Gt[Bn]}),maxAnisotropic:lr,maxDrawbuffers:Or,maxColorAttachments:$r,pointSizeDims:Ye.getParameter(ae),lineWidthDims:Ye.getParameter(oe),maxViewportDims:Ye.getParameter(xe),maxCombinedTextureUnits:Ye.getParameter(le),maxCubeMapSize:Ye.getParameter(et),maxRenderbufferSize:Ye.getParameter(Pe),maxTextureUnits:Ye.getParameter(Re),maxTextureSize:Ye.getParameter(me),maxAttributes:Ye.getParameter(ce),maxVertexUniforms:Ye.getParameter(ie),maxVertexTextureUnits:Ye.getParameter(we),maxVaryingVectors:Ye.getParameter(ge),maxFragmentUniforms:Ye.getParameter(qe),glsl:Ye.getParameter(je),renderer:Ye.getParameter(ut),vendor:Ye.getParameter(Ie),version:Ye.getParameter(ft),readFloat:jr,npotTextureCube:Rn}},or=function(Ye){return Ye instanceof Uint8Array||Ye instanceof Uint16Array||Ye instanceof Uint32Array||Ye instanceof Int8Array||Ye instanceof Int16Array||Ye instanceof Int32Array||Ye instanceof Float32Array||Ye instanceof Float64Array||Ye instanceof Uint8ClampedArray};function vr(Ye){return!!Ye&&typeof Ye=="object"&&Array.isArray(Ye.shape)&&Array.isArray(Ye.stride)&&typeof Ye.offset=="number"&&Ye.shape.length===Ye.stride.length&&(Array.isArray(Ye.data)||or(Ye.data))}var Ot=function(Ye){return Object.keys(Ye).map(function(Gt){return Ye[Gt]})},yt={shape:de,flatten:Ee};function Et(Ye,Gt,lr){for(var Or=0;Or<Gt;++Or)lr[Or]=Ye[Or]}function Je(Ye,Gt,lr,Or){for(var $r=0,jr=0;jr<Gt;++jr)for(var Kr=Ye[jr],xn=0;xn<lr;++xn)Or[$r++]=Kr[xn]}function Ke(Ye,Gt,lr,Or,$r,jr){for(var Kr=jr,xn=0;xn<Gt;++xn)for(var Qn=Ye[xn],Wn=0;Wn<lr;++Wn)for(var Rn=Qn[Wn],ia=0;ia<Or;++ia)$r[Kr++]=Rn[ia]}function At(Ye,Gt,lr,Or,$r){for(var jr=1,Kr=lr+1;Kr<Gt.length;++Kr)jr*=Gt[Kr];var xn=Gt[lr];if(Gt.length-lr===4){var Qn=Gt[lr+1],Wn=Gt[lr+2],Rn=Gt[lr+3];for(Kr=0;Kr<xn;++Kr)Ke(Ye[Kr],Qn,Wn,Rn,Or,$r),$r+=jr}else for(Kr=0;Kr<xn;++Kr)At(Ye[Kr],Gt,lr+1,Or,$r),$r+=jr}function Ee(Ye,Gt,lr,Or){var $r=1;if(Gt.length)for(var jr=0;jr<Gt.length;++jr)$r*=Gt[jr];else $r=0;var Kr=Or||N.allocType(lr,$r);switch(Gt.length){case 0:break;case 1:Et(Ye,Gt[0],Kr);break;case 2:Je(Ye,Gt[0],Gt[1],Kr);break;case 3:Ke(Ye,Gt[0],Gt[1],Gt[2],Kr,0);break;default:At(Ye,Gt,0,Kr,0)}return Kr}function de(Ye){for(var Gt=[],lr=Ye;lr.length;lr=lr[0])Gt.push(lr.length);return Gt}var Te={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},nt=5120,Mt=5122,Kt=5124,Jt=5121,Fr=5123,Vr=5125,mr=5126,zr=5126,an={int8:nt,int16:Mt,int32:Kt,uint8:Jt,uint16:Fr,uint32:Vr,float:mr,float32:zr},ni=35048,mn=35040,fi={dynamic:ni,stream:mn,static:35044},Wi=yt.flatten,si=yt.shape,Zi=35044,Ei=35040,ot=5121,Be=5126,lt=[];lt[5120]=1,lt[5122]=2,lt[5124]=4,lt[5121]=1,lt[5123]=2,lt[5125]=4,lt[5126]=4;function xt(Ye){return Te[Object.prototype.toString.call(Ye)]|0}function Nt(Ye,Gt){for(var lr=0;lr<Gt.length;++lr)Ye[lr]=Gt[lr]}function nr(Ye,Gt,lr,Or,$r,jr,Kr){for(var xn=0,Qn=0;Qn<lr;++Qn)for(var Wn=0;Wn<Or;++Wn)Ye[xn++]=Gt[$r*Qn+jr*Wn+Kr]}function yr(Ye,Gt,lr,Or){var $r=0,jr={};function Kr(Br){this.id=$r++,this.buffer=Ye.createBuffer(),this.type=Br,this.usage=Zi,this.byteLength=0,this.dimension=1,this.dtype=ot,this.persistentData=null,lr.profile&&(this.stats={size:0})}Kr.prototype.bind=function(){Ye.bindBuffer(this.type,this.buffer)},Kr.prototype.destroy=function(){Un(this)};var xn=[];function Qn(Br,cn){var Vn=xn.pop();return Vn||(Vn=new Kr(Br)),Vn.bind(),ia(Vn,cn,Ei,0,1,!1),Vn}function Wn(Br){xn.push(Br)}function Rn(Br,cn,Vn){Br.byteLength=cn.byteLength,Ye.bufferData(Br.type,cn,Vn)}function ia(Br,cn,Vn,Zn,En,mi){var ri;if(Br.usage=Vn,Array.isArray(cn)){if(Br.dtype=Zn||Be,cn.length>0){var $i;if(Array.isArray(cn[0])){ri=si(cn);for(var Cn=1,Tn=1;Tn<ri.length;++Tn)Cn*=ri[Tn];Br.dimension=Cn,$i=Wi(cn,ri,Br.dtype),Rn(Br,$i,Vn),mi?Br.persistentData=$i:N.freeType($i)}else if(typeof cn[0]=="number"){Br.dimension=En;var Pi=N.allocType(Br.dtype,cn.length);Nt(Pi,cn),Rn(Br,Pi,Vn),mi?Br.persistentData=Pi:N.freeType(Pi)}else or(cn[0])&&(Br.dimension=cn[0].length,Br.dtype=Zn||xt(cn[0])||Be,$i=Wi(cn,[cn.length,cn[0].length],Br.dtype),Rn(Br,$i,Vn),mi?Br.persistentData=$i:N.freeType($i))}}else if(or(cn))Br.dtype=Zn||xt(cn),Br.dimension=En,Rn(Br,cn,Vn),mi&&(Br.persistentData=new Uint8Array(new Uint8Array(cn.buffer)));else if(vr(cn)){ri=cn.shape;var di=cn.stride,ei=cn.offset,jn=0,Si=0,na=0,Ea=0;ri.length===1?(jn=ri[0],Si=1,na=di[0],Ea=0):ri.length===2&&(jn=ri[0],Si=ri[1],na=di[0],Ea=di[1]),Br.dtype=Zn||xt(cn.data)||Be,Br.dimension=Si;var pi=N.allocType(Br.dtype,jn*Si);nr(pi,cn.data,jn,Si,na,Ea,ei),Rn(Br,pi,Vn),mi?Br.persistentData=pi:N.freeType(pi)}else cn instanceof ArrayBuffer&&(Br.dtype=ot,Br.dimension=En,Rn(Br,cn,Vn),mi&&(Br.persistentData=new Uint8Array(new Uint8Array(cn))))}function Un(Br){Gt.bufferCount--,Or(Br);var cn=Br.buffer;Ye.deleteBuffer(cn),Br.buffer=null,delete jr[Br.id]}function Bn(Br,cn,Vn,Zn){Gt.bufferCount++;var En=new Kr(cn);jr[En.id]=En;function mi(Cn){var Tn=Zi,Pi=null,di=0,ei=0,jn=1;return Array.isArray(Cn)||or(Cn)||vr(Cn)||Cn instanceof ArrayBuffer?Pi=Cn:typeof Cn=="number"?di=Cn|0:Cn&&("data"in Cn&&(Pi=Cn.data),"usage"in Cn&&(Tn=fi[Cn.usage]),"type"in Cn&&(ei=an[Cn.type]),"dimension"in Cn&&(jn=Cn.dimension|0),"length"in Cn&&(di=Cn.length|0)),En.bind(),Pi?ia(En,Pi,Tn,ei,jn,Zn):(di&&Ye.bufferData(En.type,di,Tn),En.dtype=ei||ot,En.usage=Tn,En.dimension=jn,En.byteLength=di),lr.profile&&(En.stats.size=En.byteLength*lt[En.dtype]),mi}function ri(Cn,Tn){Ye.bufferSubData(En.type,Tn,Cn)}function $i(Cn,Tn){var Pi=(Tn||0)|0,di;if(En.bind(),or(Cn)||Cn instanceof ArrayBuffer)ri(Cn,Pi);else if(Array.isArray(Cn)){if(Cn.length>0){if(typeof Cn[0]=="number"){var ei=N.allocType(En.dtype,Cn.length);Nt(ei,Cn),ri(ei,Pi),N.freeType(ei)}else if(Array.isArray(Cn[0])||or(Cn[0])){di=si(Cn);var jn=Wi(Cn,di,En.dtype);ri(jn,Pi),N.freeType(jn)}}}else if(vr(Cn)){di=Cn.shape;var Si=Cn.stride,na=0,Ea=0,pi=0,Vi=0;di.length===1?(na=di[0],Ea=1,pi=Si[0],Vi=0):di.length===2&&(na=di[0],Ea=di[1],pi=Si[0],Vi=Si[1]);var ha=Array.isArray(Cn.data)?En.dtype:xt(Cn.data),_a=N.allocType(ha,na*Ea);nr(_a,Cn.data,na,Ea,pi,Vi,Cn.offset),ri(_a,Pi),N.freeType(_a)}return mi}return Vn||mi(Br),mi._reglType="buffer",mi._buffer=En,mi.subdata=$i,lr.profile&&(mi.stats=En.stats),mi.destroy=function(){Un(En)},mi}function _n(){Ot(jr).forEach(function(Br){Br.buffer=Ye.createBuffer(),Ye.bindBuffer(Br.type,Br.buffer),Ye.bufferData(Br.type,Br.persistentData||Br.byteLength,Br.usage)})}return lr.profile&&(Gt.getTotalBufferSize=function(){var Br=0;return Object.keys(jr).forEach(function(cn){Br+=jr[cn].stats.size}),Br}),{create:Bn,createStream:Qn,destroyStream:Wn,clear:function(){Ot(jr).forEach(Un),xn.forEach(Un)},getBuffer:function(Br){return Br&&Br._buffer instanceof Kr?Br._buffer:null},restore:_n,_initBuffer:ia}}var dr=0,Rr=0,Gr=1,Yr=1,dn=4,Wr=4,qn={points:dr,point:Rr,lines:Gr,line:Yr,triangles:dn,triangle:Wr,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},vi=0,Mi=1,Ui=4,ji=5120,ea=5121,Ra=5122,Li=5123,Yn=5124,zi=5125,ya=34963,zn=35040,Xe=35044;function Ut(Ye,Gt,lr,Or){var $r={},jr=0,Kr={uint8:ea,uint16:Li};Gt.oes_element_index_uint&&(Kr.uint32=zi);function xn(_n){this.id=jr++,$r[this.id]=this,this.buffer=_n,this.primType=Ui,this.vertCount=0,this.type=0}xn.prototype.bind=function(){this.buffer.bind()};var Qn=[];function Wn(_n){var Br=Qn.pop();return Br||(Br=new xn(lr.create(null,ya,!0,!1)._buffer)),ia(Br,_n,zn,-1,-1,0,0),Br}function Rn(_n){Qn.push(_n)}function ia(_n,Br,cn,Vn,Zn,En,mi){_n.buffer.bind();var ri;if(Br){var $i=mi;!mi&&(!or(Br)||vr(Br)&&!or(Br.data))&&($i=Gt.oes_element_index_uint?zi:Li),lr._initBuffer(_n.buffer,Br,cn,$i,3)}else Ye.bufferData(ya,En,cn),_n.buffer.dtype=ri||ea,_n.buffer.usage=cn,_n.buffer.dimension=3,_n.buffer.byteLength=En;if(ri=mi,!mi){switch(_n.buffer.dtype){case ea:case ji:ri=ea;break;case Li:case Ra:ri=Li;break;case zi:case Yn:ri=zi;break;default:}_n.buffer.dtype=ri}_n.type=ri;var Cn=Zn;Cn<0&&(Cn=_n.buffer.byteLength,ri===Li?Cn>>=1:ri===zi&&(Cn>>=2)),_n.vertCount=Cn;var Tn=Vn;if(Vn<0){Tn=Ui;var Pi=_n.buffer.dimension;Pi===1&&(Tn=vi),Pi===2&&(Tn=Mi),Pi===3&&(Tn=Ui)}_n.primType=Tn}function Un(_n){Or.elementsCount--,delete $r[_n.id],_n.buffer.destroy(),_n.buffer=null}function Bn(_n,Br){var cn=lr.create(null,ya,!0),Vn=new xn(cn._buffer);Or.elementsCount++;function Zn(En){if(!En)cn(),Vn.primType=Ui,Vn.vertCount=0,Vn.type=ea;else if(typeof En=="number")cn(En),Vn.primType=Ui,Vn.vertCount=En|0,Vn.type=ea;else{var mi=null,ri=Xe,$i=-1,Cn=-1,Tn=0,Pi=0;Array.isArray(En)||or(En)||vr(En)?mi=En:("data"in En&&(mi=En.data),"usage"in En&&(ri=fi[En.usage]),"primitive"in En&&($i=qn[En.primitive]),"count"in En&&(Cn=En.count|0),"type"in En&&(Pi=Kr[En.type]),"length"in En?Tn=En.length|0:(Tn=Cn,Pi===Li||Pi===Ra?Tn*=2:(Pi===zi||Pi===Yn)&&(Tn*=4))),ia(Vn,mi,ri,$i,Cn,Tn,Pi)}return Zn}return Zn(_n),Zn._reglType="elements",Zn._elements=Vn,Zn.subdata=function(En,mi){return cn.subdata(En,mi),Zn},Zn.destroy=function(){Un(Vn)},Zn}return{create:Bn,createStream:Wn,destroyStream:Rn,getElements:function(_n){return typeof _n=="function"&&_n._elements instanceof xn?_n._elements:null},clear:function(){Ot($r).forEach(Un)}}}var ur=new Float32Array(1),br=new Uint32Array(ur.buffer),Jr=5123;function sn(Ye){for(var Gt=N.allocType(Jr,Ye.length),lr=0;lr<Ye.length;++lr)if(isNaN(Ye[lr]))Gt[lr]=65535;else if(Ye[lr]===1/0)Gt[lr]=31744;else if(Ye[lr]===-1/0)Gt[lr]=64512;else{ur[0]=Ye[lr];var Or=br[0],$r=Or>>>31<<15,jr=(Or<<1>>>24)-127,Kr=Or>>13&1023;if(jr<-24)Gt[lr]=$r;else if(jr<-14){var xn=-14-jr;Gt[lr]=$r+(Kr+1024>>xn)}else jr>15?Gt[lr]=$r+31744:Gt[lr]=$r+(jr+15<<10)+Kr}return Gt}function gn(Ye){return Array.isArray(Ye)||or(Ye)}var Cr=34467,hn=3553,gi=34067,Hn=34069,qi=6408,fa=6406,eo=6407,ma=6409,so=6410,ja=32854,Xo=32855,Uo=36194,ms=32819,as=32820,il=33635,oo=34042,cs=6402,Eo=34041,hs=35904,Jo=35906,Qo=36193,Oa=33776,co=33777,Al=33778,$l=33779,Nu=35986,os=35987,vn=34798,bi=35840,ac=35841,Pl=35842,ss=35843,vl=36196,$o=5121,Rl=5123,xu=5125,ii=5126,Aa=10242,Ca=10243,Fs=10497,Pf=33071,Ma=33648,Rf=10240,Wc=10241,dl=9728,ff=9729,$s=9984,ko=9985,eu=9986,_u=9987,Ah=33170,Uu=4352,nv=4353,Ac=4354,lo=34046,Df=3317,Mh=37440,Us=37441,xs=37443,Sh=37444,cf=33984,To=[$s,eu,ko,_u],vs=[0,ma,so,eo,qi],po={};po[ma]=po[fa]=po[cs]=1,po[Eo]=po[so]=2,po[eo]=po[hs]=3,po[qi]=po[Jo]=4;function Co(Ye){return"[object "+Ye+"]"}var Mc=Co("HTMLCanvasElement"),qs=Co("OffscreenCanvas"),Vl=Co("CanvasRenderingContext2D"),hf=Co("ImageBitmap"),_d=Co("HTMLImageElement"),bu=Co("HTMLVideoElement"),Wp=Object.keys(Te).concat([Mc,qs,Vl,hf,_d,bu]),Hl=[];Hl[$o]=1,Hl[ii]=4,Hl[Qo]=2,Hl[Rl]=2,Hl[xu]=4;var ho=[];ho[ja]=2,ho[Xo]=2,ho[Uo]=2,ho[Eo]=4,ho[Oa]=.5,ho[co]=.5,ho[Al]=1,ho[$l]=1,ho[Nu]=.5,ho[os]=1,ho[vn]=1,ho[bi]=.5,ho[ac]=.25,ho[Pl]=.5,ho[ss]=.25,ho[vl]=.5;function Dv(Ye){return Array.isArray(Ye)&&(Ye.length===0||typeof Ye[0]=="number")}function vf(Ye){if(!Array.isArray(Ye))return!1;var Gt=Ye.length;return!(Gt===0||!gn(Ye[0]))}function Gl(Ye){return Object.prototype.toString.call(Ye)}function iv(Ye){return Gl(Ye)===Mc}function Eh(Ye){return Gl(Ye)===qs}function av(Ye){return Gl(Ye)===Vl}function wu(Ye){return Gl(Ye)===hf}function Iv(Ye){return Gl(Ye)===_d}function ov(Ye){return Gl(Ye)===bu}function kh(Ye){if(!Ye)return!1;var Gt=Gl(Ye);return Wp.indexOf(Gt)>=0?!0:Dv(Ye)||vf(Ye)||vr(Ye)}function sv(Ye){return Te[Object.prototype.toString.call(Ye)]|0}function bd(Ye,Gt){var lr=Gt.length;switch(Ye.type){case $o:case Rl:case xu:case ii:var Or=N.allocType(Ye.type,lr);Or.set(Gt),Ye.data=Or;break;case Qo:Ye.data=sn(Gt);break;default:}}function Hd(Ye,Gt){return N.allocType(Ye.type===Qo?ii:Ye.type,Gt)}function If(Ye,Gt){Ye.type===Qo?(Ye.data=sn(Gt),N.freeType(Gt)):Ye.data=Gt}function Fv(Ye,Gt,lr,Or,$r,jr){for(var Kr=Ye.width,xn=Ye.height,Qn=Ye.channels,Wn=Kr*xn*Qn,Rn=Hd(Ye,Wn),ia=0,Un=0;Un<xn;++Un)for(var Bn=0;Bn<Kr;++Bn)for(var _n=0;_n<Qn;++_n)Rn[ia++]=Gt[lr*Bn+Or*Un+$r*_n+jr];If(Ye,Rn)}function oc(Ye,Gt,lr,Or,$r,jr){var Kr;if(typeof ho[Ye]!="undefined"?Kr=ho[Ye]:Kr=po[Ye]*Hl[Gt],jr&&(Kr*=6),$r){for(var xn=0,Qn=lr;Qn>=1;)xn+=Kr*Qn*Qn,Qn/=2;return xn}else return Kr*lr*Or}function Ch(Ye,Gt,lr,Or,$r,jr,Kr){var xn={"don't care":Uu,"dont care":Uu,nice:Ac,fast:nv},Qn={repeat:Fs,clamp:Pf,mirror:Ma},Wn={nearest:dl,linear:ff},Rn=e({mipmap:_u,"nearest mipmap nearest":$s,"linear mipmap nearest":ko,"nearest mipmap linear":eu,"linear mipmap linear":_u},Wn),ia={none:0,browser:Sh},Un={uint8:$o,rgba4:ms,rgb565:il,"rgb5 a1":as},Bn={alpha:fa,luminance:ma,"luminance alpha":so,rgb:eo,rgba:qi,rgba4:ja,"rgb5 a1":Xo,rgb565:Uo},_n={};Gt.ext_srgb&&(Bn.srgb=hs,Bn.srgba=Jo),Gt.oes_texture_float&&(Un.float32=Un.float=ii),Gt.oes_texture_half_float&&(Un.float16=Un["half float"]=Qo),Gt.webgl_depth_texture&&(e(Bn,{depth:cs,"depth stencil":Eo}),e(Un,{uint16:Rl,uint32:xu,"depth stencil":oo})),Gt.webgl_compressed_texture_s3tc&&e(_n,{"rgb s3tc dxt1":Oa,"rgba s3tc dxt1":co,"rgba s3tc dxt3":Al,"rgba s3tc dxt5":$l}),Gt.webgl_compressed_texture_atc&&e(_n,{"rgb atc":Nu,"rgba atc explicit alpha":os,"rgba atc interpolated alpha":vn}),Gt.webgl_compressed_texture_pvrtc&&e(_n,{"rgb pvrtc 4bppv1":bi,"rgb pvrtc 2bppv1":ac,"rgba pvrtc 4bppv1":Pl,"rgba pvrtc 2bppv1":ss}),Gt.webgl_compressed_texture_etc1&&(_n["rgb etc1"]=vl);var Br=Array.prototype.slice.call(Ye.getParameter(Cr));Object.keys(_n).forEach(function(ee){var he=_n[ee];Br.indexOf(he)>=0&&(Bn[ee]=he)});var cn=Object.keys(Bn);lr.textureFormats=cn;var Vn=[];Object.keys(Bn).forEach(function(ee){var he=Bn[ee];Vn[he]=ee});var Zn=[];Object.keys(Un).forEach(function(ee){var he=Un[ee];Zn[he]=ee});var En=[];Object.keys(Wn).forEach(function(ee){var he=Wn[ee];En[he]=ee});var mi=[];Object.keys(Rn).forEach(function(ee){var he=Rn[ee];mi[he]=ee});var ri=[];Object.keys(Qn).forEach(function(ee){var he=Qn[ee];ri[he]=ee});var $i=cn.reduce(function(ee,he){var Se=Bn[he];return Se===ma||Se===fa||Se===ma||Se===so||Se===cs||Se===Eo||Gt.ext_srgb&&(Se===hs||Se===Jo)?ee[Se]=Se:Se===Xo||he.indexOf("rgba")>=0?ee[Se]=qi:ee[Se]=eo,ee},{});function Cn(){this.internalformat=qi,this.format=qi,this.type=$o,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Sh,this.width=0,this.height=0,this.channels=0}function Tn(ee,he){ee.internalformat=he.internalformat,ee.format=he.format,ee.type=he.type,ee.compressed=he.compressed,ee.premultiplyAlpha=he.premultiplyAlpha,ee.flipY=he.flipY,ee.unpackAlignment=he.unpackAlignment,ee.colorSpace=he.colorSpace,ee.width=he.width,ee.height=he.height,ee.channels=he.channels}function Pi(ee,he){if(!(typeof he!="object"||!he)){if("premultiplyAlpha"in he&&(ee.premultiplyAlpha=he.premultiplyAlpha),"flipY"in he&&(ee.flipY=he.flipY),"alignment"in he&&(ee.unpackAlignment=he.alignment),"colorSpace"in he&&(ee.colorSpace=ia[he.colorSpace]),"type"in he){var Se=he.type;ee.type=Un[Se]}var ze=ee.width,pt=ee.height,wt=ee.channels,gt=!1;"shape"in he?(ze=he.shape[0],pt=he.shape[1],he.shape.length===3&&(wt=he.shape[2],gt=!0)):("radius"in he&&(ze=pt=he.radius),"width"in he&&(ze=he.width),"height"in he&&(pt=he.height),"channels"in he&&(wt=he.channels,gt=!0)),ee.width=ze|0,ee.height=pt|0,ee.channels=wt|0;var Oe=!1;if("format"in he){var $e=he.format,st=ee.internalformat=Bn[$e];ee.format=$i[st],$e in Un&&("type"in he||(ee.type=Un[$e])),$e in _n&&(ee.compressed=!0),Oe=!0}!gt&&Oe?ee.channels=po[ee.format]:gt&&!Oe&&ee.channels!==vs[ee.format]&&(ee.format=ee.internalformat=vs[ee.channels])}}function di(ee){Ye.pixelStorei(Mh,ee.flipY),Ye.pixelStorei(Us,ee.premultiplyAlpha),Ye.pixelStorei(xs,ee.colorSpace),Ye.pixelStorei(Df,ee.unpackAlignment)}function ei(){Cn.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function jn(ee,he){var Se=null;if(kh(he)?Se=he:he&&(Pi(ee,he),"x"in he&&(ee.xOffset=he.x|0),"y"in he&&(ee.yOffset=he.y|0),kh(he.data)&&(Se=he.data)),he.copy){var ze=$r.viewportWidth,pt=$r.viewportHeight;ee.width=ee.width||ze-ee.xOffset,ee.height=ee.height||pt-ee.yOffset,ee.needsCopy=!0}else if(!Se)ee.width=ee.width||1,ee.height=ee.height||1,ee.channels=ee.channels||4;else if(or(Se))ee.channels=ee.channels||4,ee.data=Se,!("type"in he)&&ee.type===$o&&(ee.type=sv(Se));else if(Dv(Se))ee.channels=ee.channels||4,bd(ee,Se),ee.alignment=1,ee.needsFree=!0;else if(vr(Se)){var wt=Se.data;!Array.isArray(wt)&&ee.type===$o&&(ee.type=sv(wt));var gt=Se.shape,Oe=Se.stride,$e,st,Tt,Rt,Dt,Xt;gt.length===3?(Tt=gt[2],Xt=Oe[2]):(Tt=1,Xt=1),$e=gt[0],st=gt[1],Rt=Oe[0],Dt=Oe[1],ee.alignment=1,ee.width=$e,ee.height=st,ee.channels=Tt,ee.format=ee.internalformat=vs[Tt],ee.needsFree=!0,Fv(ee,wt,Rt,Dt,Xt,Se.offset)}else if(iv(Se)||Eh(Se)||av(Se))iv(Se)||Eh(Se)?ee.element=Se:ee.element=Se.canvas,ee.width=ee.element.width,ee.height=ee.element.height,ee.channels=4;else if(wu(Se))ee.element=Se,ee.width=Se.width,ee.height=Se.height,ee.channels=4;else if(Iv(Se))ee.element=Se,ee.width=Se.naturalWidth,ee.height=Se.naturalHeight,ee.channels=4;else if(ov(Se))ee.element=Se,ee.width=Se.videoWidth,ee.height=Se.videoHeight,ee.channels=4;else if(vf(Se)){var Vt=ee.width||Se[0].length,Ft=ee.height||Se.length,Zt=ee.channels;gn(Se[0][0])?Zt=Zt||Se[0][0].length:Zt=Zt||1;for(var Pt=yt.shape(Se),sr=1,xr=0;xr<Pt.length;++xr)sr*=Pt[xr];var Dr=Hd(ee,sr);yt.flatten(Se,Pt,"",Dr),If(ee,Dr),ee.alignment=1,ee.width=Vt,ee.height=Ft,ee.channels=Zt,ee.format=ee.internalformat=vs[Zt],ee.needsFree=!0}ee.type===ii||ee.type}function Si(ee,he,Se){var ze=ee.element,pt=ee.data,wt=ee.internalformat,gt=ee.format,Oe=ee.type,$e=ee.width,st=ee.height;di(ee),ze?Ye.texImage2D(he,Se,gt,gt,Oe,ze):ee.compressed?Ye.compressedTexImage2D(he,Se,wt,$e,st,0,pt):ee.needsCopy?(Or(),Ye.copyTexImage2D(he,Se,gt,ee.xOffset,ee.yOffset,$e,st,0)):Ye.texImage2D(he,Se,gt,$e,st,0,gt,Oe,pt||null)}function na(ee,he,Se,ze,pt){var wt=ee.element,gt=ee.data,Oe=ee.internalformat,$e=ee.format,st=ee.type,Tt=ee.width,Rt=ee.height;di(ee),wt?Ye.texSubImage2D(he,pt,Se,ze,$e,st,wt):ee.compressed?Ye.compressedTexSubImage2D(he,pt,Se,ze,Oe,Tt,Rt,gt):ee.needsCopy?(Or(),Ye.copyTexSubImage2D(he,pt,Se,ze,ee.xOffset,ee.yOffset,Tt,Rt)):Ye.texSubImage2D(he,pt,Se,ze,Tt,Rt,$e,st,gt)}var Ea=[];function pi(){return Ea.pop()||new ei}function Vi(ee){ee.needsFree&&N.freeType(ee.data),ei.call(ee),Ea.push(ee)}function ha(){Cn.call(this),this.genMipmaps=!1,this.mipmapHint=Uu,this.mipmask=0,this.images=Array(16)}function _a(ee,he,Se){var ze=ee.images[0]=pi();ee.mipmask=1,ze.width=ee.width=he,ze.height=ee.height=Se,ze.channels=ee.channels=4}function Wa(ee,he){var Se=null;if(kh(he))Se=ee.images[0]=pi(),Tn(Se,ee),jn(Se,he),ee.mipmask=1;else if(Pi(ee,he),Array.isArray(he.mipmap))for(var ze=he.mipmap,pt=0;pt<ze.length;++pt)Se=ee.images[pt]=pi(),Tn(Se,ee),Se.width>>=pt,Se.height>>=pt,jn(Se,ze[pt]),ee.mipmask|=1<<pt;else Se=ee.images[0]=pi(),Tn(Se,ee),jn(Se,he),ee.mipmask=1;Tn(ee,ee.images[0]),ee.compressed&&(ee.internalformat===Oa||ee.internalformat===co||ee.internalformat===Al||ee.internalformat)}function Ls(ee,he){for(var Se=ee.images,ze=0;ze<Se.length;++ze){if(!Se[ze])return;Si(Se[ze],he,ze)}}var lu=[];function uo(){var ee=lu.pop()||new ha;Cn.call(ee),ee.mipmask=0;for(var he=0;he<16;++he)ee.images[he]=null;return ee}function uu(ee){for(var he=ee.images,Se=0;Se<he.length;++Se)he[Se]&&Vi(he[Se]),he[Se]=null;lu.push(ee)}function ps(){this.minFilter=dl,this.magFilter=dl,this.wrapS=Pf,this.wrapT=Pf,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Uu}function Xl(ee,he){if("min"in he){var Se=he.min;ee.minFilter=Rn[Se],To.indexOf(ee.minFilter)>=0&&!("faces"in he)&&(ee.genMipmaps=!0)}if("mag"in he){var ze=he.mag;ee.magFilter=Wn[ze]}var pt=ee.wrapS,wt=ee.wrapT;if("wrap"in he){var gt=he.wrap;typeof gt=="string"?pt=wt=Qn[gt]:Array.isArray(gt)&&(pt=Qn[gt[0]],wt=Qn[gt[1]])}else{if("wrapS"in he){var Oe=he.wrapS;pt=Qn[Oe]}if("wrapT"in he){var $e=he.wrapT;wt=Qn[$e]}}if(ee.wrapS=pt,ee.wrapT=wt,"anisotropic"in he){var st=he.anisotropic;ee.anisotropic=he.anisotropic}if("mipmap"in he){var Tt=!1;switch(typeof he.mipmap){case"string":ee.mipmapHint=xn[he.mipmap],ee.genMipmaps=!0,Tt=!0;break;case"boolean":Tt=ee.genMipmaps=he.mipmap;break;case"object":ee.genMipmaps=!1,Tt=!0;break;default:}Tt&&!("min"in he)&&(ee.minFilter=$s)}}function Yf(ee,he){Ye.texParameteri(he,Wc,ee.minFilter),Ye.texParameteri(he,Rf,ee.magFilter),Ye.texParameteri(he,Aa,ee.wrapS),Ye.texParameteri(he,Ca,ee.wrapT),Gt.ext_texture_filter_anisotropic&&Ye.texParameteri(he,lo,ee.anisotropic),ee.genMipmaps&&(Ye.hint(Ah,ee.mipmapHint),Ye.generateMipmap(he))}var fc=0,As={},Zl=lr.maxTextureUnits,fu=Array(Zl).map(function(){return null});function ro(ee){Cn.call(this),this.mipmask=0,this.internalformat=qi,this.id=fc++,this.refCount=1,this.target=ee,this.texture=Ye.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new ps,Kr.profile&&(this.stats={size:0})}function Eu(ee){Ye.activeTexture(cf),Ye.bindTexture(ee.target,ee.texture)}function Ja(){var ee=fu[0];ee?Ye.bindTexture(ee.target,ee.texture):Ye.bindTexture(hn,null)}function H(ee){var he=ee.texture,Se=ee.unit,ze=ee.target;Se>=0&&(Ye.activeTexture(cf+Se),Ye.bindTexture(ze,null),fu[Se]=null),Ye.deleteTexture(he),ee.texture=null,ee.params=null,ee.pixels=null,ee.refCount=0,delete As[ee.id],jr.textureCount--}e(ro.prototype,{bind:function(){var ee=this;ee.bindCount+=1;var he=ee.unit;if(he<0){for(var Se=0;Se<Zl;++Se){var ze=fu[Se];if(ze){if(ze.bindCount>0)continue;ze.unit=-1}fu[Se]=ee,he=Se;break}he>=Zl,Kr.profile&&jr.maxTextureUnits<he+1&&(jr.maxTextureUnits=he+1),ee.unit=he,Ye.activeTexture(cf+he),Ye.bindTexture(ee.target,ee.texture)}return he},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&H(this)}});function R(ee,he){var Se=new ro(hn);As[Se.id]=Se,jr.textureCount++;function ze(gt,Oe){var $e=Se.texInfo;ps.call($e);var st=uo();return typeof gt=="number"?typeof Oe=="number"?_a(st,gt|0,Oe|0):_a(st,gt|0,gt|0):gt?(Xl($e,gt),Wa(st,gt)):_a(st,1,1),$e.genMipmaps&&(st.mipmask=(st.width<<1)-1),Se.mipmask=st.mipmask,Tn(Se,st),Se.internalformat=st.internalformat,ze.width=st.width,ze.height=st.height,Eu(Se),Ls(st,hn),Yf($e,hn),Ja(),uu(st),Kr.profile&&(Se.stats.size=oc(Se.internalformat,Se.type,st.width,st.height,$e.genMipmaps,!1)),ze.format=Vn[Se.internalformat],ze.type=Zn[Se.type],ze.mag=En[$e.magFilter],ze.min=mi[$e.minFilter],ze.wrapS=ri[$e.wrapS],ze.wrapT=ri[$e.wrapT],ze}function pt(gt,Oe,$e,st){var Tt=Oe|0,Rt=$e|0,Dt=st|0,Xt=pi();return Tn(Xt,Se),Xt.width=0,Xt.height=0,jn(Xt,gt),Xt.width=Xt.width||(Se.width>>Dt)-Tt,Xt.height=Xt.height||(Se.height>>Dt)-Rt,Eu(Se),na(Xt,hn,Tt,Rt,Dt),Ja(),Vi(Xt),ze}function wt(gt,Oe){var $e=gt|0,st=Oe|0||$e;if($e===Se.width&&st===Se.height)return ze;ze.width=Se.width=$e,ze.height=Se.height=st,Eu(Se);for(var Tt=0;Se.mipmask>>Tt;++Tt){var Rt=$e>>Tt,Dt=st>>Tt;if(!Rt||!Dt)break;Ye.texImage2D(hn,Tt,Se.format,Rt,Dt,0,Se.format,Se.type,null)}return Ja(),Kr.profile&&(Se.stats.size=oc(Se.internalformat,Se.type,$e,st,!1,!1)),ze}return ze(ee,he),ze.subimage=pt,ze.resize=wt,ze._reglType="texture2d",ze._texture=Se,Kr.profile&&(ze.stats=Se.stats),ze.destroy=function(){Se.decRef()},ze}function G(ee,he,Se,ze,pt,wt){var gt=new ro(gi);As[gt.id]=gt,jr.cubeCount++;var Oe=new Array(6);function $e(Rt,Dt,Xt,Vt,Ft,Zt){var Pt,sr=gt.texInfo;for(ps.call(sr),Pt=0;Pt<6;++Pt)Oe[Pt]=uo();if(typeof Rt=="number"||!Rt){var xr=Rt|0||1;for(Pt=0;Pt<6;++Pt)_a(Oe[Pt],xr,xr)}else if(typeof Rt=="object")if(Dt)Wa(Oe[0],Rt),Wa(Oe[1],Dt),Wa(Oe[2],Xt),Wa(Oe[3],Vt),Wa(Oe[4],Ft),Wa(Oe[5],Zt);else if(Xl(sr,Rt),Pi(gt,Rt),"faces"in Rt){var Dr=Rt.faces;for(Pt=0;Pt<6;++Pt)Tn(Oe[Pt],gt),Wa(Oe[Pt],Dr[Pt])}else for(Pt=0;Pt<6;++Pt)Wa(Oe[Pt],Rt);for(Tn(gt,Oe[0]),sr.genMipmaps?gt.mipmask=(Oe[0].width<<1)-1:gt.mipmask=Oe[0].mipmask,gt.internalformat=Oe[0].internalformat,$e.width=Oe[0].width,$e.height=Oe[0].height,Eu(gt),Pt=0;Pt<6;++Pt)Ls(Oe[Pt],Hn+Pt);for(Yf(sr,gi),Ja(),Kr.profile&&(gt.stats.size=oc(gt.internalformat,gt.type,$e.width,$e.height,sr.genMipmaps,!0)),$e.format=Vn[gt.internalformat],$e.type=Zn[gt.type],$e.mag=En[sr.magFilter],$e.min=mi[sr.minFilter],$e.wrapS=ri[sr.wrapS],$e.wrapT=ri[sr.wrapT],Pt=0;Pt<6;++Pt)uu(Oe[Pt]);return $e}function st(Rt,Dt,Xt,Vt,Ft){var Zt=Xt|0,Pt=Vt|0,sr=Ft|0,xr=pi();return Tn(xr,gt),xr.width=0,xr.height=0,jn(xr,Dt),xr.width=xr.width||(gt.width>>sr)-Zt,xr.height=xr.height||(gt.height>>sr)-Pt,Eu(gt),na(xr,Hn+Rt,Zt,Pt,sr),Ja(),Vi(xr),$e}function Tt(Rt){var Dt=Rt|0;if(Dt!==gt.width){$e.width=gt.width=Dt,$e.height=gt.height=Dt,Eu(gt);for(var Xt=0;Xt<6;++Xt)for(var Vt=0;gt.mipmask>>Vt;++Vt)Ye.texImage2D(Hn+Xt,Vt,gt.format,Dt>>Vt,Dt>>Vt,0,gt.format,gt.type,null);return Ja(),Kr.profile&&(gt.stats.size=oc(gt.internalformat,gt.type,$e.width,$e.height,!1,!0)),$e}}return $e(ee,he,Se,ze,pt,wt),$e.subimage=st,$e.resize=Tt,$e._reglType="textureCube",$e._texture=gt,Kr.profile&&($e.stats=gt.stats),$e.destroy=function(){gt.decRef()},$e}function I(){for(var ee=0;ee<Zl;++ee)Ye.activeTexture(cf+ee),Ye.bindTexture(hn,null),fu[ee]=null;Ot(As).forEach(H),jr.cubeCount=0,jr.textureCount=0}Kr.profile&&(jr.getTotalTextureSize=function(){var ee=0;return Object.keys(As).forEach(function(he){ee+=As[he].stats.size}),ee});function W(){for(var ee=0;ee<Zl;++ee){var he=fu[ee];he&&(he.bindCount=0,he.unit=-1,fu[ee]=null)}Ot(As).forEach(function(Se){Se.texture=Ye.createTexture(),Ye.bindTexture(Se.target,Se.texture);for(var ze=0;ze<32;++ze)if(Se.mipmask&1<<ze)if(Se.target===hn)Ye.texImage2D(hn,ze,Se.internalformat,Se.width>>ze,Se.height>>ze,0,Se.internalformat,Se.type,null);else for(var pt=0;pt<6;++pt)Ye.texImage2D(Hn+pt,ze,Se.internalformat,Se.width>>ze,Se.height>>ze,0,Se.internalformat,Se.type,null);Yf(Se.texInfo,Se.target)})}function te(){for(var ee=0;ee<Zl;++ee){var he=fu[ee];he&&(he.bindCount=0,he.unit=-1,fu[ee]=null),Ye.activeTexture(cf+ee),Ye.bindTexture(hn,null),Ye.bindTexture(gi,null)}}return{create2D:R,createCube:G,clear:I,getTexture:function(ee){return null},restore:W,refresh:te}}var Vu=36161,Sc=32854,Ff=32855,qv=36194,zv=33189,Ov=36168,lv=34041,uv=35907,Bv=34836,tu=34842,fv=34843,al=[];al[Sc]=2,al[Ff]=2,al[qv]=2,al[zv]=2,al[Ov]=1,al[lv]=4,al[uv]=4,al[Bv]=16,al[tu]=8,al[fv]=6;function ru(Ye,Gt,lr){return al[Ye]*Gt*lr}var qf=function(Ye,Gt,lr,Or,$r){var jr={rgba4:Sc,rgb565:qv,"rgb5 a1":Ff,depth:zv,stencil:Ov,"depth stencil":lv};Gt.ext_srgb&&(jr.srgba=uv),Gt.ext_color_buffer_half_float&&(jr.rgba16f=tu,jr.rgb16f=fv),Gt.webgl_color_buffer_float&&(jr.rgba32f=Bv);var Kr=[];Object.keys(jr).forEach(function(Bn){var _n=jr[Bn];Kr[_n]=Bn});var xn=0,Qn={};function Wn(Bn){this.id=xn++,this.refCount=1,this.renderbuffer=Bn,this.format=Sc,this.width=0,this.height=0,$r.profile&&(this.stats={size:0})}Wn.prototype.decRef=function(){--this.refCount<=0&&Rn(this)};function Rn(Bn){var _n=Bn.renderbuffer;Ye.bindRenderbuffer(Vu,null),Ye.deleteRenderbuffer(_n),Bn.renderbuffer=null,Bn.refCount=0,delete Qn[Bn.id],Or.renderbufferCount--}function ia(Bn,_n){var Br=new Wn(Ye.createRenderbuffer());Qn[Br.id]=Br,Or.renderbufferCount++;function cn(Zn,En){var mi=0,ri=0,$i=Sc;if(typeof Zn=="object"&&Zn){var Cn=Zn;if("shape"in Cn){var Tn=Cn.shape;mi=Tn[0]|0,ri=Tn[1]|0}else"radius"in Cn&&(mi=ri=Cn.radius|0),"width"in Cn&&(mi=Cn.width|0),"height"in Cn&&(ri=Cn.height|0);"format"in Cn&&($i=jr[Cn.format])}else typeof Zn=="number"?(mi=Zn|0,typeof En=="number"?ri=En|0:ri=mi):Zn||(mi=ri=1);if(!(mi===Br.width&&ri===Br.height&&$i===Br.format))return cn.width=Br.width=mi,cn.height=Br.height=ri,Br.format=$i,Ye.bindRenderbuffer(Vu,Br.renderbuffer),Ye.renderbufferStorage(Vu,$i,mi,ri),$r.profile&&(Br.stats.size=ru(Br.format,Br.width,Br.height)),cn.format=Kr[Br.format],cn}function Vn(Zn,En){var mi=Zn|0,ri=En|0||mi;return mi===Br.width&&ri===Br.height||(cn.width=Br.width=mi,cn.height=Br.height=ri,Ye.bindRenderbuffer(Vu,Br.renderbuffer),Ye.renderbufferStorage(Vu,Br.format,mi,ri),$r.profile&&(Br.stats.size=ru(Br.format,Br.width,Br.height))),cn}return cn(Bn,_n),cn.resize=Vn,cn._reglType="renderbuffer",cn._renderbuffer=Br,$r.profile&&(cn.stats=Br.stats),cn.destroy=function(){Br.decRef()},cn}$r.profile&&(Or.getTotalRenderbufferSize=function(){var Bn=0;return Object.keys(Qn).forEach(function(_n){Bn+=Qn[_n].stats.size}),Bn});function Un(){Ot(Qn).forEach(function(Bn){Bn.renderbuffer=Ye.createRenderbuffer(),Ye.bindRenderbuffer(Vu,Bn.renderbuffer),Ye.renderbufferStorage(Vu,Bn.format,Bn.width,Bn.height)}),Ye.bindRenderbuffer(Vu,null)}return{create:ia,clear:function(){Ot(Qn).forEach(Rn)},restore:Un}},Vs=36160,Xc=36161,zf=3553,Dl=34069,zs=36064,Gd=36096,Yd=36128,Tu=33306,df=36053,nu=36193,Wd=5121,Zc=5126,jc=6407,Au=6408,Nv=[];Nv[Au]=4,Nv[jc]=3;var cv=[];cv[Wd]=1,cv[Zc]=4,cv[nu]=2;function hv(Ye,Gt,lr,Or,$r,jr){var Kr={cur:null,next:null,dirty:!1,setFBO:null},xn=["rgba"],Qn=["rgba4","rgb565","rgb5 a1"];Gt.ext_srgb&&Qn.push("srgba"),Gt.ext_color_buffer_half_float&&Qn.push("rgba16f","rgb16f"),Gt.webgl_color_buffer_float&&Qn.push("rgba32f");var Wn=["uint8"];Gt.oes_texture_half_float&&Wn.push("half float","float16"),Gt.oes_texture_float&&Wn.push("float","float32");function Rn(ei,jn,Si){this.target=ei,this.texture=jn,this.renderbuffer=Si;var na=0,Ea=0;jn?(na=jn.width,Ea=jn.height):Si&&(na=Si.width,Ea=Si.height),this.width=na,this.height=Ea}function ia(ei){ei&&(ei.texture&&ei.texture._texture.decRef(),ei.renderbuffer&&ei.renderbuffer._renderbuffer.decRef())}function Un(ei,jn,Si){if(ei)if(ei.texture){var na=ei.texture._texture,Ea=Math.max(1,na.width),pi=Math.max(1,na.height);na.refCount+=1}else{var Vi=ei.renderbuffer._renderbuffer;Vi.refCount+=1}}function Bn(ei,jn){jn&&(jn.texture?Ye.framebufferTexture2D(Vs,ei,jn.target,jn.texture._texture.texture,0):Ye.framebufferRenderbuffer(Vs,ei,Xc,jn.renderbuffer._renderbuffer.renderbuffer))}function _n(ei){var jn=zf,Si=null,na=null,Ea=ei;typeof ei=="object"&&(Ea=ei.data,"target"in ei&&(jn=ei.target|0));var pi=Ea._reglType;return pi==="texture2d"||pi==="textureCube"?Si=Ea:pi==="renderbuffer"&&(na=Ea,jn=Xc),new Rn(jn,Si,na)}function Br(ei,jn,Si,na,Ea){if(Si){var pi=Or.create2D({width:ei,height:jn,format:na,type:Ea});return pi._texture.refCount=0,new Rn(zf,pi,null)}else{var Vi=$r.create({width:ei,height:jn,format:na});return Vi._renderbuffer.refCount=0,new Rn(Xc,null,Vi)}}function cn(ei){return ei&&(ei.texture||ei.renderbuffer)}function Vn(ei,jn,Si){ei&&(ei.texture?ei.texture.resize(jn,Si):ei.renderbuffer&&ei.renderbuffer.resize(jn,Si),ei.width=jn,ei.height=Si)}var Zn=0,En={};function mi(){this.id=Zn++,En[this.id]=this,this.framebuffer=Ye.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function ri(ei){ei.colorAttachments.forEach(ia),ia(ei.depthAttachment),ia(ei.stencilAttachment),ia(ei.depthStencilAttachment)}function $i(ei){var jn=ei.framebuffer;Ye.deleteFramebuffer(jn),ei.framebuffer=null,jr.framebufferCount--,delete En[ei.id]}function Cn(ei){var jn;Ye.bindFramebuffer(Vs,ei.framebuffer);var Si=ei.colorAttachments;for(jn=0;jn<Si.length;++jn)Bn(zs+jn,Si[jn]);for(jn=Si.length;jn<lr.maxColorAttachments;++jn)Ye.framebufferTexture2D(Vs,zs+jn,zf,null,0);Ye.framebufferTexture2D(Vs,Tu,zf,null,0),Ye.framebufferTexture2D(Vs,Gd,zf,null,0),Ye.framebufferTexture2D(Vs,Yd,zf,null,0),Bn(Gd,ei.depthAttachment),Bn(Yd,ei.stencilAttachment),Bn(Tu,ei.depthStencilAttachment);var na=Ye.checkFramebufferStatus(Vs);Ye.isContextLost(),Ye.bindFramebuffer(Vs,Kr.next?Kr.next.framebuffer:null),Kr.cur=Kr.next,Ye.getError()}function Tn(ei,jn){var Si=new mi;jr.framebufferCount++;function na(pi,Vi){var ha,_a=0,Wa=0,Ls=!0,lu=!0,uo=null,uu=!0,ps="rgba",Xl="uint8",Yf=1,fc=null,As=null,Zl=null,fu=!1;if(typeof pi=="number")_a=pi|0,Wa=Vi|0||_a;else if(!pi)_a=Wa=1;else{var ro=pi;if("shape"in ro){var Eu=ro.shape;_a=Eu[0],Wa=Eu[1]}else"radius"in ro&&(_a=Wa=ro.radius),"width"in ro&&(_a=ro.width),"height"in ro&&(Wa=ro.height);("color"in ro||"colors"in ro)&&(uo=ro.color||ro.colors,Array.isArray(uo)),uo||("colorCount"in ro&&(Yf=ro.colorCount|0),"colorTexture"in ro&&(uu=!!ro.colorTexture,ps="rgba4"),"colorType"in ro&&(Xl=ro.colorType,uu||(Xl==="half float"||Xl==="float16"?ps="rgba16f":(Xl==="float"||Xl==="float32")&&(ps="rgba32f"))),"colorFormat"in ro&&(ps=ro.colorFormat,xn.indexOf(ps)>=0?uu=!0:Qn.indexOf(ps)>=0&&(uu=!1))),("depthTexture"in ro||"depthStencilTexture"in ro)&&(fu=!!(ro.depthTexture||ro.depthStencilTexture)),"depth"in ro&&(typeof ro.depth=="boolean"?Ls=ro.depth:(fc=ro.depth,lu=!1)),"stencil"in ro&&(typeof ro.stencil=="boolean"?lu=ro.stencil:(As=ro.stencil,Ls=!1)),"depthStencil"in ro&&(typeof ro.depthStencil=="boolean"?Ls=lu=ro.depthStencil:(Zl=ro.depthStencil,Ls=!1,lu=!1))}var Ja=null,H=null,R=null,G=null;if(Array.isArray(uo))Ja=uo.map(_n);else if(uo)Ja=[_n(uo)];else for(Ja=new Array(Yf),ha=0;ha<Yf;++ha)Ja[ha]=Br(_a,Wa,uu,ps,Xl);_a=_a||Ja[0].width,Wa=Wa||Ja[0].height,fc?H=_n(fc):Ls&&!lu&&(H=Br(_a,Wa,fu,"depth","uint32")),As?R=_n(As):lu&&!Ls&&(R=Br(_a,Wa,!1,"stencil","uint8")),Zl?G=_n(Zl):!fc&&!As&&lu&&Ls&&(G=Br(_a,Wa,fu,"depth stencil","depth stencil"));var I=null;for(ha=0;ha<Ja.length;++ha)if(Un(Ja[ha],_a,Wa),Ja[ha]&&Ja[ha].texture){var W=Nv[Ja[ha].texture._texture.format]*cv[Ja[ha].texture._texture.type];I===null&&(I=W)}return Un(H,_a,Wa),Un(R,_a,Wa),Un(G,_a,Wa),ri(Si),Si.width=_a,Si.height=Wa,Si.colorAttachments=Ja,Si.depthAttachment=H,Si.stencilAttachment=R,Si.depthStencilAttachment=G,na.color=Ja.map(cn),na.depth=cn(H),na.stencil=cn(R),na.depthStencil=cn(G),na.width=Si.width,na.height=Si.height,Cn(Si),na}function Ea(pi,Vi){var ha=Math.max(pi|0,1),_a=Math.max(Vi|0||ha,1);if(ha===Si.width&&_a===Si.height)return na;for(var Wa=Si.colorAttachments,Ls=0;Ls<Wa.length;++Ls)Vn(Wa[Ls],ha,_a);return Vn(Si.depthAttachment,ha,_a),Vn(Si.stencilAttachment,ha,_a),Vn(Si.depthStencilAttachment,ha,_a),Si.width=na.width=ha,Si.height=na.height=_a,Cn(Si),na}return na(ei,jn),e(na,{resize:Ea,_reglType:"framebuffer",_framebuffer:Si,destroy:function(){$i(Si),ri(Si)},use:function(pi){Kr.setFBO({framebuffer:na},pi)}})}function Pi(ei){var jn=Array(6);function Si(Ea){var pi,Vi={color:null},ha=0,_a=null,Wa="rgba",Ls="uint8",lu=1;if(typeof Ea=="number")ha=Ea|0;else if(!Ea)ha=1;else{var uo=Ea;if("shape"in uo){var uu=uo.shape;ha=uu[0]}else"radius"in uo&&(ha=uo.radius|0),"width"in uo?(ha=uo.width|0,"height"in uo):"height"in uo&&(ha=uo.height|0);("color"in uo||"colors"in uo)&&(_a=uo.color||uo.colors,Array.isArray(_a)),_a||("colorCount"in uo&&(lu=uo.colorCount|0),"colorType"in uo&&(Ls=uo.colorType),"colorFormat"in uo&&(Wa=uo.colorFormat)),"depth"in uo&&(Vi.depth=uo.depth),"stencil"in uo&&(Vi.stencil=uo.stencil),"depthStencil"in uo&&(Vi.depthStencil=uo.depthStencil)}var ps;if(_a)if(Array.isArray(_a))for(ps=[],pi=0;pi<_a.length;++pi)ps[pi]=_a[pi];else ps=[_a];else{ps=Array(lu);var Xl={radius:ha,format:Wa,type:Ls};for(pi=0;pi<lu;++pi)ps[pi]=Or.createCube(Xl)}for(Vi.color=Array(ps.length),pi=0;pi<ps.length;++pi){var Yf=ps[pi];ha=ha||Yf.width,Vi.color[pi]={target:Dl,data:ps[pi]}}for(pi=0;pi<6;++pi){for(var fc=0;fc<ps.length;++fc)Vi.color[fc].target=Dl+pi;pi>0&&(Vi.depth=jn[0].depth,Vi.stencil=jn[0].stencil,Vi.depthStencil=jn[0].depthStencil),jn[pi]?jn[pi](Vi):jn[pi]=Tn(Vi)}return e(Si,{width:ha,height:ha,color:ps})}function na(Ea){var pi,Vi=Ea|0;if(Vi===Si.width)return Si;var ha=Si.color;for(pi=0;pi<ha.length;++pi)ha[pi].resize(Vi);for(pi=0;pi<6;++pi)jn[pi].resize(Vi);return Si.width=Si.height=Vi,Si}return Si(ei),e(Si,{faces:jn,resize:na,_reglType:"framebufferCube",destroy:function(){jn.forEach(function(Ea){Ea.destroy()})}})}function di(){Kr.cur=null,Kr.next=null,Kr.dirty=!0,Ot(En).forEach(function(ei){ei.framebuffer=Ye.createFramebuffer(),Cn(ei)})}return e(Kr,{getFramebuffer:function(ei){if(typeof ei=="function"&&ei._reglType==="framebuffer"){var jn=ei._framebuffer;if(jn instanceof mi)return jn}return null},create:Tn,createCube:Pi,clear:function(){Ot(En).forEach($i)},restore:di})}var Uv=5126,Kc=34962,Of=34963;function Ec(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Uv,this.offset=0,this.stride=0,this.divisor=0}function Lh(Ye,Gt,lr,Or,$r,jr,Kr){for(var xn=lr.maxAttributes,Qn=new Array(xn),Wn=0;Wn<xn;++Wn)Qn[Wn]=new Ec;var Rn=0,ia={},Un={Record:Ec,scope:{},state:Qn,currentVAO:null,targetVAO:null,restore:_n()?ri:function(){},createVAO:$i,getVAO:cn,destroyBuffer:Bn,setVAO:_n()?Vn:Zn,clear:_n()?En:function(){}};function Bn(Cn){for(var Tn=0;Tn<Qn.length;++Tn){var Pi=Qn[Tn];Pi.buffer===Cn&&(Ye.disableVertexAttribArray(Tn),Pi.buffer=null)}}function _n(){return Gt.oes_vertex_array_object}function Br(){return Gt.angle_instanced_arrays}function cn(Cn){return typeof Cn=="function"&&Cn._vao?Cn._vao:null}function Vn(Cn){if(Cn!==Un.currentVAO){var Tn=_n();Cn?Tn.bindVertexArrayOES(Cn.vao):Tn.bindVertexArrayOES(null),Un.currentVAO=Cn}}function Zn(Cn){if(Cn!==Un.currentVAO){if(Cn)Cn.bindAttrs();else{for(var Tn=Br(),Pi=0;Pi<Qn.length;++Pi){var di=Qn[Pi];di.buffer?(Ye.enableVertexAttribArray(Pi),di.buffer.bind(),Ye.vertexAttribPointer(Pi,di.size,di.type,di.normalized,di.stride,di.offfset),Tn&&di.divisor&&Tn.vertexAttribDivisorANGLE(Pi,di.divisor)):(Ye.disableVertexAttribArray(Pi),Ye.vertexAttrib4f(Pi,di.x,di.y,di.z,di.w))}Kr.elements?Ye.bindBuffer(Of,Kr.elements.buffer.buffer):Ye.bindBuffer(Of,null)}Un.currentVAO=Cn}}function En(){Ot(ia).forEach(function(Cn){Cn.destroy()})}function mi(){this.id=++Rn,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var Cn=_n();Cn?this.vao=Cn.createVertexArrayOES():this.vao=null,ia[this.id]=this,this.buffers=[]}mi.prototype.bindAttrs=function(){for(var Cn=Br(),Tn=this.attributes,Pi=0;Pi<Tn.length;++Pi){var di=Tn[Pi];di.buffer?(Ye.enableVertexAttribArray(Pi),Ye.bindBuffer(Kc,di.buffer.buffer),Ye.vertexAttribPointer(Pi,di.size,di.type,di.normalized,di.stride,di.offset),Cn&&di.divisor&&Cn.vertexAttribDivisorANGLE(Pi,di.divisor)):(Ye.disableVertexAttribArray(Pi),Ye.vertexAttrib4f(Pi,di.x,di.y,di.z,di.w))}for(var ei=Tn.length;ei<xn;++ei)Ye.disableVertexAttribArray(ei);var jn=jr.getElements(this.elements);jn?Ye.bindBuffer(Of,jn.buffer.buffer):Ye.bindBuffer(Of,null)},mi.prototype.refresh=function(){var Cn=_n();Cn&&(Cn.bindVertexArrayOES(this.vao),this.bindAttrs(),Un.currentVAO=null,Cn.bindVertexArrayOES(null))},mi.prototype.destroy=function(){if(this.vao){var Cn=_n();this===Un.currentVAO&&(Un.currentVAO=null,Cn.bindVertexArrayOES(null)),Cn.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ia[this.id]&&(delete ia[this.id],Or.vaoCount-=1)};function ri(){var Cn=_n();Cn&&Ot(ia).forEach(function(Tn){Tn.refresh()})}function $i(Cn){var Tn=new mi;Or.vaoCount+=1;function Pi(di){var ei;if(Array.isArray(di))ei=di,Tn.elements&&Tn.ownsElements&&Tn.elements.destroy(),Tn.elements=null,Tn.ownsElements=!1,Tn.offset=0,Tn.count=0,Tn.instances=-1,Tn.primitive=4;else{if(di.elements){var jn=di.elements;Tn.ownsElements?typeof jn=="function"&&jn._reglType==="elements"?(Tn.elements.destroy(),Tn.ownsElements=!1):(Tn.elements(jn),Tn.ownsElements=!1):jr.getElements(di.elements)?(Tn.elements=di.elements,Tn.ownsElements=!1):(Tn.elements=jr.create(di.elements),Tn.ownsElements=!0)}else Tn.elements=null,Tn.ownsElements=!1;ei=di.attributes,Tn.offset=0,Tn.count=-1,Tn.instances=-1,Tn.primitive=4,Tn.elements&&(Tn.count=Tn.elements._elements.vertCount,Tn.primitive=Tn.elements._elements.primType),"offset"in di&&(Tn.offset=di.offset|0),"count"in di&&(Tn.count=di.count|0),"instances"in di&&(Tn.instances=di.instances|0),"primitive"in di&&(Tn.primitive=qn[di.primitive])}var Si={},na=Tn.attributes;na.length=ei.length;for(var Ea=0;Ea<ei.length;++Ea){var pi=ei[Ea],Vi=na[Ea]=new Ec,ha=pi.data||pi;if(Array.isArray(ha)||or(ha)||vr(ha)){var _a;Tn.buffers[Ea]&&(_a=Tn.buffers[Ea],or(ha)&&_a._buffer.byteLength>=ha.byteLength?_a.subdata(ha):(_a.destroy(),Tn.buffers[Ea]=null)),Tn.buffers[Ea]||(_a=Tn.buffers[Ea]=$r.create(pi,Kc,!1,!0)),Vi.buffer=$r.getBuffer(_a),Vi.size=Vi.buffer.dimension|0,Vi.normalized=!1,Vi.type=Vi.buffer.dtype,Vi.offset=0,Vi.stride=0,Vi.divisor=0,Vi.state=1,Si[Ea]=1}else $r.getBuffer(pi)?(Vi.buffer=$r.getBuffer(pi),Vi.size=Vi.buffer.dimension|0,Vi.normalized=!1,Vi.type=Vi.buffer.dtype,Vi.offset=0,Vi.stride=0,Vi.divisor=0,Vi.state=1):$r.getBuffer(pi.buffer)?(Vi.buffer=$r.getBuffer(pi.buffer),Vi.size=(+pi.size||Vi.buffer.dimension)|0,Vi.normalized=!!pi.normalized||!1,"type"in pi?Vi.type=an[pi.type]:Vi.type=Vi.buffer.dtype,Vi.offset=(pi.offset||0)|0,Vi.stride=(pi.stride||0)|0,Vi.divisor=(pi.divisor||0)|0,Vi.state=1):"x"in pi&&(Vi.x=+pi.x||0,Vi.y=+pi.y||0,Vi.z=+pi.z||0,Vi.w=+pi.w||0,Vi.state=2)}for(var Wa=0;Wa<Tn.buffers.length;++Wa)!Si[Wa]&&Tn.buffers[Wa]&&(Tn.buffers[Wa].destroy(),Tn.buffers[Wa]=null);return Tn.refresh(),Pi}return Pi.destroy=function(){for(var di=0;di<Tn.buffers.length;++di)Tn.buffers[di]&&Tn.buffers[di].destroy();Tn.buffers.length=0,Tn.ownsElements&&(Tn.elements.destroy(),Tn.elements=null,Tn.ownsElements=!1),Tn.destroy()},Pi._vao=Tn,Pi._reglType="vao",Pi(Cn)}return Un}var wd=35632,Oo=35633,Jc=35718,kc=35721;function Cc(Ye,Gt,lr,Or){var $r={},jr={};function Kr(Br,cn,Vn,Zn){this.name=Br,this.id=cn,this.location=Vn,this.info=Zn}function xn(Br,cn){for(var Vn=0;Vn<Br.length;++Vn)if(Br[Vn].id===cn.id){Br[Vn].location=cn.location;return}Br.push(cn)}function Qn(Br,cn,Vn){var Zn=Br===wd?$r:jr,En=Zn[cn];if(!En){var mi=Gt.str(cn);En=Ye.createShader(Br),Ye.shaderSource(En,mi),Ye.compileShader(En),Zn[cn]=En}return En}var Wn={},Rn=[],ia=0;function Un(Br,cn){this.id=ia++,this.fragId=Br,this.vertId=cn,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Or.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Bn(Br,cn,Vn){var Zn,En,mi=Qn(wd,Br.fragId),ri=Qn(Oo,Br.vertId),$i=Br.program=Ye.createProgram();if(Ye.attachShader($i,mi),Ye.attachShader($i,ri),Vn)for(Zn=0;Zn<Vn.length;++Zn){var Cn=Vn[Zn];Ye.bindAttribLocation($i,Cn[0],Cn[1])}Ye.linkProgram($i);var Tn=Ye.getProgramParameter($i,Jc);Or.profile&&(Br.stats.uniformsCount=Tn);var Pi=Br.uniforms;for(Zn=0;Zn<Tn;++Zn)if(En=Ye.getActiveUniform($i,Zn),En)if(En.size>1)for(var di=0;di<En.size;++di){var ei=En.name.replace("[0]","["+di+"]");xn(Pi,new Kr(ei,Gt.id(ei),Ye.getUniformLocation($i,ei),En))}else xn(Pi,new Kr(En.name,Gt.id(En.name),Ye.getUniformLocation($i,En.name),En));var jn=Ye.getProgramParameter($i,kc);Or.profile&&(Br.stats.attributesCount=jn);var Si=Br.attributes;for(Zn=0;Zn<jn;++Zn)En=Ye.getActiveAttrib($i,Zn),En&&xn(Si,new Kr(En.name,Gt.id(En.name),Ye.getAttribLocation($i,En.name),En))}Or.profile&&(lr.getMaxUniformsCount=function(){var Br=0;return Rn.forEach(function(cn){cn.stats.uniformsCount>Br&&(Br=cn.stats.uniformsCount)}),Br},lr.getMaxAttributesCount=function(){var Br=0;return Rn.forEach(function(cn){cn.stats.attributesCount>Br&&(Br=cn.stats.attributesCount)}),Br});function _n(){$r={},jr={};for(var Br=0;Br<Rn.length;++Br)Bn(Rn[Br],null,Rn[Br].attributes.map(function(cn){return[cn.location,cn.name]}))}return{clear:function(){var Br=Ye.deleteShader.bind(Ye);Ot($r).forEach(Br),$r={},Ot(jr).forEach(Br),jr={},Rn.forEach(function(cn){Ye.deleteProgram(cn.program)}),Rn.length=0,Wn={},lr.shaderCount=0},program:function(Br,cn,Vn,Zn){var En=Wn[cn];En||(En=Wn[cn]={});var mi=En[Br];if(mi&&(mi.refCount++,!Zn))return mi;var ri=new Un(cn,Br);return lr.shaderCount++,Bn(ri,Vn,Zn),mi||(En[Br]=ri),Rn.push(ri),e(ri,{destroy:function(){if(ri.refCount--,ri.refCount<=0){Ye.deleteProgram(ri.program);var $i=Rn.indexOf(ri);Rn.splice($i,1),lr.shaderCount--}En[ri.vertId].refCount<=0&&(Ye.deleteShader(jr[ri.vertId]),delete jr[ri.vertId],delete Wn[ri.fragId][ri.vertId]),Object.keys(Wn[ri.fragId]).length||(Ye.deleteShader($r[ri.fragId]),delete $r[ri.fragId],delete Wn[ri.fragId])}})},restore:_n,shader:Qn,frag:-1,vert:-1}}var Qc=6408,pf=5121,sc=3333,Vv=5126;function Hs(Ye,Gt,lr,Or,$r,jr,Kr){function xn(Rn){var ia;Gt.next===null?ia=pf:ia=Gt.next.colorAttachments[0].texture._texture.type;var Un=0,Bn=0,_n=Or.framebufferWidth,Br=Or.framebufferHeight,cn=null;or(Rn)?cn=Rn:Rn&&(Un=Rn.x|0,Bn=Rn.y|0,_n=(Rn.width||Or.framebufferWidth-Un)|0,Br=(Rn.height||Or.framebufferHeight-Bn)|0,cn=Rn.data||null),lr();var Vn=_n*Br*4;return cn||(ia===pf?cn=new Uint8Array(Vn):ia===Vv&&(cn=cn||new Float32Array(Vn))),Ye.pixelStorei(sc,4),Ye.readPixels(Un,Bn,_n,Br,Qc,ia,cn),cn}function Qn(Rn){var ia;return Gt.setFBO({framebuffer:Rn.framebuffer},function(){ia=xn(Rn)}),ia}function Wn(Rn){return!Rn||!("framebuffer"in Rn)?xn(Rn):Qn(Rn)}return Wn}var vv=0,Bf="";function Nf(Ye){return pl(Uf(Gu(Ye)))}function Uf(Ye){return Ue(Nr(Ph(Ye),Ye.length*8))}function _s(Ye,Gt){var lr=Ph(Ye);lr.length>16&&(lr=Nr(lr,Ye.length*8));for(var Or=Array(16),$r=Array(16),jr=0;jr<16;jr++)Or[jr]=lr[jr]^909522486,$r[jr]=lr[jr]^1549556828;var Kr=Nr(Or.concat(Ph(Gt)),512+Gt.length*8);return Ue(Nr($r.concat(Kr),768))}function pl(Ye){for(var Gt=vv?"0123456789ABCDEF":"0123456789abcdef",lr="",Or,$r=0;$r<Ye.length;$r++)Or=Ye.charCodeAt($r),lr+=Gt.charAt(Or>>>4&15)+Gt.charAt(Or&15);return lr}function Hu(Ye){for(var Gt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lr="",Or=Ye.length,$r=0;$r<Or;$r+=3)for(var jr=Ye.charCodeAt($r)<<16|($r+1<Or?Ye.charCodeAt($r+1)<<8:0)|($r+2<Or?Ye.charCodeAt($r+2):0),Kr=0;Kr<4;Kr++)$r*8+Kr*6>Ye.length*8?lr+=Bf:lr+=Gt.charAt(jr>>>6*(3-Kr)&63);return lr}function Vf(Ye,Gt){var lr=Gt.length,Or=Array(),$r,jr,Kr,xn,Qn=Array(Math.ceil(Ye.length/2));for($r=0;$r<Qn.length;$r++)Qn[$r]=Ye.charCodeAt($r*2)<<8|Ye.charCodeAt($r*2+1);for(;Qn.length>0;){for(xn=Array(),Kr=0,$r=0;$r<Qn.length;$r++)Kr=(Kr<<16)+Qn[$r],jr=Math.floor(Kr/lr),Kr-=jr*lr,(xn.length>0||jr>0)&&(xn[xn.length]=jr);Or[Or.length]=Kr,Qn=xn}var Wn="";for($r=Or.length-1;$r>=0;$r--)Wn+=Gt.charAt(Or[$r]);var Rn=Math.ceil(Ye.length*8/(Math.log(Gt.length)/Math.log(2)));for($r=Wn.length;$r<Rn;$r++)Wn=Gt[0]+Wn;return Wn}function Gu(Ye){for(var Gt="",lr=-1,Or,$r;++lr<Ye.length;)Or=Ye.charCodeAt(lr),$r=lr+1<Ye.length?Ye.charCodeAt(lr+1):0,55296<=Or&&Or<=56319&&56320<=$r&&$r<=57343&&(Or=65536+((Or&1023)<<10)+($r&1023),lr++),Or<=127?Gt+=String.fromCharCode(Or):Or<=2047?Gt+=String.fromCharCode(192|Or>>>6&31,128|Or&63):Or<=65535?Gt+=String.fromCharCode(224|Or>>>12&15,128|Or>>>6&63,128|Or&63):Or<=2097151&&(Gt+=String.fromCharCode(240|Or>>>18&7,128|Or>>>12&63,128|Or>>>6&63,128|Or&63));return Gt}function Ph(Ye){for(var Gt=Array(Ye.length>>2),lr=0;lr<Gt.length;lr++)Gt[lr]=0;for(var lr=0;lr<Ye.length*8;lr+=8)Gt[lr>>5]|=(Ye.charCodeAt(lr/8)&255)<<24-lr%32;return Gt}function Ue(Ye){for(var Gt="",lr=0;lr<Ye.length*32;lr+=8)Gt+=String.fromCharCode(Ye[lr>>5]>>>24-lr%32&255);return Gt}function at(Ye,Gt){return Ye>>>Gt|Ye<<32-Gt}function Ht(Ye,Gt){return Ye>>>Gt}function It(Ye,Gt,lr){return Ye&Gt^~Ye&lr}function fr(Ye,Gt,lr){return Ye&Gt^Ye&lr^Gt&lr}function Lr(Ye){return at(Ye,2)^at(Ye,13)^at(Ye,22)}function qr(Ye){return at(Ye,6)^at(Ye,11)^at(Ye,25)}function Zr(Ye){return at(Ye,7)^at(Ye,18)^Ht(Ye,3)}function nn(Ye){return at(Ye,17)^at(Ye,19)^Ht(Ye,10)}var An=new Array(1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998);function Nr(Ye,Gt){var lr=new Array(1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225),Or=new Array(64),$r,jr,Kr,xn,Qn,Wn,Rn,ia,Un,Bn,_n,Br;for(Ye[Gt>>5]|=128<<24-Gt%32,Ye[(Gt+64>>9<<4)+15]=Gt,Un=0;Un<Ye.length;Un+=16){for($r=lr[0],jr=lr[1],Kr=lr[2],xn=lr[3],Qn=lr[4],Wn=lr[5],Rn=lr[6],ia=lr[7],Bn=0;Bn<64;Bn++)Bn<16?Or[Bn]=Ye[Bn+Un]:Or[Bn]=tn(tn(tn(nn(Or[Bn-2]),Or[Bn-7]),Zr(Or[Bn-15])),Or[Bn-16]),_n=tn(tn(tn(tn(ia,qr(Qn)),It(Qn,Wn,Rn)),An[Bn]),Or[Bn]),Br=tn(Lr($r),fr($r,jr,Kr)),ia=Rn,Rn=Wn,Wn=Qn,Qn=tn(xn,_n),xn=Kr,Kr=jr,jr=$r,$r=tn(_n,Br);lr[0]=tn($r,lr[0]),lr[1]=tn(jr,lr[1]),lr[2]=tn(Kr,lr[2]),lr[3]=tn(xn,lr[3]),lr[4]=tn(Qn,lr[4]),lr[5]=tn(Wn,lr[5]),lr[6]=tn(Rn,lr[6]),lr[7]=tn(ia,lr[7])}return lr}function tn(Ye,Gt){var lr=(Ye&65535)+(Gt&65535),Or=(Ye>>16)+(Gt>>16)+(lr>>16);return Or<<16|lr&65535}function rn(Ye){return Array.prototype.slice.call(Ye)}function wn(Ye){return rn(Ye).join("")}function Gn(Ye){var Gt=Ye&&Ye.cache,lr=0,Or=[],$r=[],jr=[];function Kr(_n,Br){var cn=Br&&Br.stable;if(!cn){for(var Vn=0;Vn<$r.length;++Vn)if($r[Vn]===_n&&!jr[Vn])return Or[Vn]}var Zn="g"+lr++;return Or.push(Zn),$r.push(_n),jr.push(cn),Zn}function xn(){var _n=[];function Br(){_n.push.apply(_n,rn(arguments))}var cn=[];function Vn(){var Zn="v"+lr++;return cn.push(Zn),arguments.length>0&&(_n.push(Zn,"="),_n.push.apply(_n,rn(arguments)),_n.push(";")),Zn}return e(Br,{def:Vn,toString:function(){return wn([cn.length>0?"var "+cn.join(",")+";":"",wn(_n)])}})}function Qn(){var _n=xn(),Br=xn(),cn=_n.toString,Vn=Br.toString;function Zn(En,mi){Br(En,mi,"=",_n.def(En,mi),";")}return e(function(){_n.apply(_n,rn(arguments))},{def:_n.def,entry:_n,exit:Br,save:Zn,set:function(En,mi,ri){Zn(En,mi),_n(En,mi,"=",ri,";")},toString:function(){return cn()+Vn()}})}function Wn(){var _n=wn(arguments),Br=Qn(),cn=Qn(),Vn=Br.toString,Zn=cn.toString;return e(Br,{then:function(){return Br.apply(Br,rn(arguments)),this},else:function(){return cn.apply(cn,rn(arguments)),this},toString:function(){var En=Zn();return En&&(En="else{"+En+"}"),wn(["if(",_n,"){",Vn(),"}",En])}})}var Rn=xn(),ia={};function Un(_n,Br){var cn=[];function Vn(){var $i="a"+cn.length;return cn.push($i),$i}Br=Br||0;for(var Zn=0;Zn<Br;++Zn)Vn();var En=Qn(),mi=En.toString,ri=ia[_n]=e(En,{arg:Vn,toString:function(){return wn(["function(",cn.join(),"){",mi(),"}"])}});return ri}function Bn(){var _n=['"use strict";',Rn,"return {"];Object.keys(ia).forEach(function(Zn){_n.push('"',Zn,'":',ia[Zn].toString(),",")}),_n.push("}");var Br=wn(_n).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),cn;if(Gt&&(cn=Nf(Br),Gt[cn]))return Gt[cn].apply(null,$r);var Vn=Function.apply(null,Or.concat(Br));return Gt&&(Gt[cn]=Vn),Vn.apply(null,$r)}return{global:Rn,link:Kr,block:xn,proc:Un,scope:Qn,cond:Wn,compile:Bn}}var Oi="xyzw".split(""),Ii=5121,Hi=1,Ki=2,On=0,$n=1,Ji=2,ca=3,Ka=4,mo=5,vo=6,xo="dither",Na="blend.enable",bs="blend.color",Zo="blend.equation",Bo="blend.func",hi="depth.enable",ta="depth.func",ws="depth.range",Ml="depth.mask",Yl="colorMask",iu="cull.enable",Yu="cull.face",Hf="frontFace",au="lineWidth",Lc="polygonOffset.enable",Pc="polygonOffset.offset",lc="sample.alpha",Rh="sample.enable",$c="sample.coverage",uc="stencil.enable",gf="stencil.mask",Wu="stencil.func",Dh="stencil.opFront",Hv="stencil.opBack",Ih="scissor.enable",Gv="scissor.box",Rc="viewport",Mu="profile",eh="framebuffer",th="vert",rh="frag",Gf="elements",Fh="primitive",Yv="count",qh="offset",ou="instances",ve="vao",be="Width",Ce="Height",De=eh+be,He=eh+Ce,Ve=Rc+be,Qe=Rc+Ce,zt="drawingBuffer",jt=zt+be,qt=zt+Ce,Qt=[Bo,Zo,Wu,Dh,Hv,$c,Rc,Gv,Pc],ar=34962,_r=34963,Sr=2884,Hr=3042,ln=3024,kn=2960,yi=2929,Qi=3089,ra=32823,sa=32926,pa=32928,Lo=5126,jo=35664,ba=35665,qa=35666,ds=5124,ol=35667,el=35668,to=35669,Ya=35670,Il=35671,Sl=35672,Su=35673,su=35674,Fl=35675,El=35676,yf=35678,Xu=35680,Zu=4,U=1028,Q=1029,se=2304,ye=2305,_e=32775,Ae=32776,Ge=519,Le=7680,tt=0,St=1,Ct=32774,rr=513,tr=36160,Tr=36064,Er={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},ir={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},gr={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},wr={cw:se,ccw:ye};function Pr(Ye){return Array.isArray(Ye)||or(Ye)||vr(Ye)}function kr(Ye){return Ye.sort(function(Gt,lr){return Gt===Rc?-1:lr===Rc?1:Gt<lr?-1:1})}function pr(Ye,Gt,lr,Or){this.thisDep=Ye,this.contextDep=Gt,this.propDep=lr,this.append=Or}function yn(Ye){return Ye&&!(Ye.thisDep||Ye.contextDep||Ye.propDep)}function bn(Ye){return new pr(!1,!1,!1,Ye)}function In(Ye,Gt){var lr=Ye.type;if(lr===On){var Or=Ye.data.length;return new pr(!0,Or>=1,Or>=2,Gt)}else if(lr===Ka){var $r=Ye.data;return new pr($r.thisDep,$r.contextDep,$r.propDep,Gt)}else{if(lr===mo)return new pr(!1,!1,!1,Gt);if(lr===vo){for(var jr=!1,Kr=!1,xn=!1,Qn=0;Qn<Ye.data.length;++Qn){var Wn=Ye.data[Qn];if(Wn.type===$n)xn=!0;else if(Wn.type===Ji)Kr=!0;else if(Wn.type===ca)jr=!0;else if(Wn.type===On){jr=!0;var Rn=Wn.data;Rn>=1&&(Kr=!0),Rn>=2&&(xn=!0)}else Wn.type===Ka&&(jr=jr||Wn.data.thisDep,Kr=Kr||Wn.data.contextDep,xn=xn||Wn.data.propDep)}return new pr(jr,Kr,xn,Gt)}else return new pr(lr===ca,lr===Ji,lr===$n,Gt)}}var Xn=new pr(!1,!1,!1,function(){});function Ci(Ye,Gt,lr,Or,$r,jr,Kr,xn,Qn,Wn,Rn,ia,Un,Bn,_n,Br){var cn=Wn.Record,Vn={add:32774,subtract:32778,"reverse subtract":32779};lr.ext_blend_minmax&&(Vn.min=_e,Vn.max=Ae);var Zn=lr.angle_instanced_arrays,En=lr.webgl_draw_buffers,mi=lr.oes_vertex_array_object,ri={dirty:!0,profile:Br.profile},$i={},Cn=[],Tn={},Pi={};function di(Oe){return Oe.replace(".","_")}function ei(Oe,$e,st){var Tt=di(Oe);Cn.push(Oe),$i[Tt]=ri[Tt]=!!st,Tn[Tt]=$e}function jn(Oe,$e,st){var Tt=di(Oe);Cn.push(Oe),Array.isArray(st)?(ri[Tt]=st.slice(),$i[Tt]=st.slice()):ri[Tt]=$i[Tt]=st,Pi[Tt]=$e}function Si(Oe){return!!isNaN(Oe)}ei(xo,ln),ei(Na,Hr),jn(bs,"blendColor",[0,0,0,0]),jn(Zo,"blendEquationSeparate",[Ct,Ct]),jn(Bo,"blendFuncSeparate",[St,tt,St,tt]),ei(hi,yi,!0),jn(ta,"depthFunc",rr),jn(ws,"depthRange",[0,1]),jn(Ml,"depthMask",!0),jn(Yl,Yl,[!0,!0,!0,!0]),ei(iu,Sr),jn(Yu,"cullFace",Q),jn(Hf,Hf,ye),jn(au,au,1),ei(Lc,ra),jn(Pc,"polygonOffset",[0,0]),ei(lc,sa),ei(Rh,pa),jn($c,"sampleCoverage",[1,!1]),ei(uc,kn),jn(gf,"stencilMask",-1),jn(Wu,"stencilFunc",[Ge,0,-1]),jn(Dh,"stencilOpSeparate",[U,Le,Le,Le]),jn(Hv,"stencilOpSeparate",[Q,Le,Le,Le]),ei(Ih,Qi),jn(Gv,"scissor",[0,0,Ye.drawingBufferWidth,Ye.drawingBufferHeight]),jn(Rc,Rc,[0,0,Ye.drawingBufferWidth,Ye.drawingBufferHeight]);var na={gl:Ye,context:Un,strings:Gt,next:$i,current:ri,draw:ia,elements:jr,buffer:$r,shader:Rn,attributes:Wn.state,vao:Wn,uniforms:Qn,framebuffer:xn,extensions:lr,timer:Bn,isBufferArgs:Pr},Ea={primTypes:qn,compareFuncs:ir,blendFuncs:Er,blendEquations:Vn,stencilOps:gr,glTypes:an,orientationType:wr};En&&(Ea.backBuffer=[Q],Ea.drawBuffer=S(Or.maxDrawbuffers,function(Oe){return Oe===0?[0]:S(Oe,function($e){return Tr+$e})}));var pi=0;function Vi(){var Oe=Gn({cache:_n}),$e=Oe.link,st=Oe.global;Oe.id=pi++,Oe.batchId="0";var Tt=$e(na),Rt=Oe.shared={props:"a0"};Object.keys(na).forEach(function(Zt){Rt[Zt]=st.def(Tt,".",Zt)});var Dt=Oe.next={},Xt=Oe.current={};Object.keys(Pi).forEach(function(Zt){Array.isArray(ri[Zt])&&(Dt[Zt]=st.def(Rt.next,".",Zt),Xt[Zt]=st.def(Rt.current,".",Zt))});var Vt=Oe.constants={};Object.keys(Ea).forEach(function(Zt){Vt[Zt]=st.def(JSON.stringify(Ea[Zt]))}),Oe.invoke=function(Zt,Pt){switch(Pt.type){case On:var sr=["this",Rt.context,Rt.props,Oe.batchId];return Zt.def($e(Pt.data),".call(",sr.slice(0,Math.max(Pt.data.length+1,4)),")");case $n:return Zt.def(Rt.props,Pt.data);case Ji:return Zt.def(Rt.context,Pt.data);case ca:return Zt.def("this",Pt.data);case Ka:return Pt.data.append(Oe,Zt),Pt.data.ref;case mo:return Pt.data.toString();case vo:return Pt.data.map(function(xr){return Oe.invoke(Zt,xr)})}},Oe.attribCache={};var Ft={};return Oe.scopeAttrib=function(Zt){var Pt=Gt.id(Zt);if(Pt in Ft)return Ft[Pt];var sr=Wn.scope[Pt];sr||(sr=Wn.scope[Pt]=new cn);var xr=Ft[Pt]=$e(sr);return xr},Oe}function ha(Oe){var $e=Oe.static,st=Oe.dynamic,Tt;if(Mu in $e){var Rt=!!$e[Mu];Tt=bn(function(Xt,Vt){return Rt}),Tt.enable=Rt}else if(Mu in st){var Dt=st[Mu];Tt=In(Dt,function(Xt,Vt){return Xt.invoke(Vt,Dt)})}return Tt}function _a(Oe,$e){var st=Oe.static,Tt=Oe.dynamic;if(eh in st){var Rt=st[eh];return Rt?(Rt=xn.getFramebuffer(Rt),bn(function(Xt,Vt){var Ft=Xt.link(Rt),Zt=Xt.shared;Vt.set(Zt.framebuffer,".next",Ft);var Pt=Zt.context;return Vt.set(Pt,"."+De,Ft+".width"),Vt.set(Pt,"."+He,Ft+".height"),Ft})):bn(function(Xt,Vt){var Ft=Xt.shared;Vt.set(Ft.framebuffer,".next","null");var Zt=Ft.context;return Vt.set(Zt,"."+De,Zt+"."+jt),Vt.set(Zt,"."+He,Zt+"."+qt),"null"})}else if(eh in Tt){var Dt=Tt[eh];return In(Dt,function(Xt,Vt){var Ft=Xt.invoke(Vt,Dt),Zt=Xt.shared,Pt=Zt.framebuffer,sr=Vt.def(Pt,".getFramebuffer(",Ft,")");Vt.set(Pt,".next",sr);var xr=Zt.context;return Vt.set(xr,"."+De,sr+"?"+sr+".width:"+xr+"."+jt),Vt.set(xr,"."+He,sr+"?"+sr+".height:"+xr+"."+qt),sr})}else return null}function Wa(Oe,$e,st){var Tt=Oe.static,Rt=Oe.dynamic;function Dt(Ft){if(Ft in Tt){var Zt=Tt[Ft],Pt=!0,sr=Zt.x|0,xr=Zt.y|0,Dr,un;return"width"in Zt?Dr=Zt.width|0:Pt=!1,"height"in Zt?un=Zt.height|0:Pt=!1,new pr(!Pt&&$e&&$e.thisDep,!Pt&&$e&&$e.contextDep,!Pt&&$e&&$e.propDep,function(ai,Nn){var fn=ai.shared.context,Ln=Dr;"width"in Zt||(Ln=Nn.def(fn,".",De,"-",sr));var Mn=un;return"height"in Zt||(Mn=Nn.def(fn,".",He,"-",xr)),[sr,xr,Ln,Mn]})}else if(Ft in Rt){var Xr=Rt[Ft],pn=In(Xr,function(ai,Nn){var fn=ai.invoke(Nn,Xr),Ln=ai.shared.context,Mn=Nn.def(fn,".x|0"),Kn=Nn.def(fn,".y|0"),xi=Nn.def('"width" in ',fn,"?",fn,".width|0:","(",Ln,".",De,"-",Mn,")"),Da=Nn.def('"height" in ',fn,"?",fn,".height|0:","(",Ln,".",He,"-",Kn,")");return[Mn,Kn,xi,Da]});return $e&&(pn.thisDep=pn.thisDep||$e.thisDep,pn.contextDep=pn.contextDep||$e.contextDep,pn.propDep=pn.propDep||$e.propDep),pn}else return $e?new pr($e.thisDep,$e.contextDep,$e.propDep,function(ai,Nn){var fn=ai.shared.context;return[0,0,Nn.def(fn,".",De),Nn.def(fn,".",He)]}):null}var Xt=Dt(Rc);if(Xt){var Vt=Xt;Xt=new pr(Xt.thisDep,Xt.contextDep,Xt.propDep,function(Ft,Zt){var Pt=Vt.append(Ft,Zt),sr=Ft.shared.context;return Zt.set(sr,"."+Ve,Pt[2]),Zt.set(sr,"."+Qe,Pt[3]),Pt})}return{viewport:Xt,scissor_box:Dt(Gv)}}function Ls(Oe,$e){var st=Oe.static,Tt=typeof st[rh]=="string"&&typeof st[th]=="string";if(Tt){if(Object.keys($e.dynamic).length>0)return null;var Rt=$e.static,Dt=Object.keys(Rt);if(Dt.length>0&&typeof Rt[Dt[0]]=="number"){for(var Xt=[],Vt=0;Vt<Dt.length;++Vt)Xt.push([Rt[Dt[Vt]]|0,Dt[Vt]]);return Xt}}return null}function lu(Oe,$e,st){var Tt=Oe.static,Rt=Oe.dynamic;function Dt(Pt){if(Pt in Tt){var sr=Gt.id(Tt[Pt]),xr=bn(function(){return sr});return xr.id=sr,xr}else if(Pt in Rt){var Dr=Rt[Pt];return In(Dr,function(un,Xr){var pn=un.invoke(Xr,Dr),ai=Xr.def(un.shared.strings,".id(",pn,")");return ai})}return null}var Xt=Dt(rh),Vt=Dt(th),Ft=null,Zt;return yn(Xt)&&yn(Vt)?(Ft=Rn.program(Vt.id,Xt.id,null,st),Zt=bn(function(Pt,sr){return Pt.link(Ft)})):Zt=new pr(Xt&&Xt.thisDep||Vt&&Vt.thisDep,Xt&&Xt.contextDep||Vt&&Vt.contextDep,Xt&&Xt.propDep||Vt&&Vt.propDep,function(Pt,sr){var xr=Pt.shared.shader,Dr;Xt?Dr=Xt.append(Pt,sr):Dr=sr.def(xr,".",rh);var un;Vt?un=Vt.append(Pt,sr):un=sr.def(xr,".",th);var Xr=xr+".program("+un+","+Dr;return sr.def(Xr+")")}),{frag:Xt,vert:Vt,progVar:Zt,program:Ft}}function uo(Oe,$e){var st=Oe.static,Tt=Oe.dynamic,Rt={},Dt=!1;function Xt(){if(ve in st){var Nn=st[ve];return Nn!==null&&Wn.getVAO(Nn)===null&&(Nn=Wn.createVAO(Nn)),Dt=!0,Rt.vao=Nn,bn(function(Ln){var Mn=Wn.getVAO(Nn);return Mn?Ln.link(Mn):"null"})}else if(ve in Tt){Dt=!0;var fn=Tt[ve];return In(fn,function(Ln,Mn){var Kn=Ln.invoke(Mn,fn);return Mn.def(Ln.shared.vao+".getVAO("+Kn+")")})}return null}var Vt=Xt(),Ft=!1;function Zt(){if(Gf in st){var Nn=st[Gf];if(Rt.elements=Nn,Pr(Nn)){var fn=Rt.elements=jr.create(Nn,!0);Nn=jr.getElements(fn),Ft=!0}else Nn&&(Nn=jr.getElements(Nn),Ft=!0);var Ln=bn(function(Kn,xi){if(Nn){var Da=Kn.link(Nn);return Kn.ELEMENTS=Da,Da}return Kn.ELEMENTS=null,null});return Ln.value=Nn,Ln}else if(Gf in Tt){Ft=!0;var Mn=Tt[Gf];return In(Mn,function(Kn,xi){var Da=Kn.shared,Pa=Da.isBufferArgs,_o=Da.elements,ua=Kn.invoke(xi,Mn),Qa=xi.def("null"),Vo=xi.def(Pa,"(",ua,")"),ml=Kn.cond(Vo).then(Qa,"=",_o,".createStream(",ua,");").else(Qa,"=",_o,".getElements(",ua,");");return xi.entry(ml),xi.exit(Kn.cond(Vo).then(_o,".destroyStream(",Qa,");")),Kn.ELEMENTS=Qa,Qa})}else if(Dt)return new pr(Vt.thisDep,Vt.contextDep,Vt.propDep,function(Kn,xi){return xi.def(Kn.shared.vao+".currentVAO?"+Kn.shared.elements+".getElements("+Kn.shared.vao+".currentVAO.elements):null")});return null}var Pt=Zt();function sr(){if(Fh in st){var Nn=st[Fh];return Rt.primitive=Nn,bn(function(Ln,Mn){return qn[Nn]})}else if(Fh in Tt){var fn=Tt[Fh];return In(fn,function(Ln,Mn){var Kn=Ln.constants.primTypes,xi=Ln.invoke(Mn,fn);return Mn.def(Kn,"[",xi,"]")})}else{if(Ft)return yn(Pt)?Pt.value?bn(function(Ln,Mn){return Mn.def(Ln.ELEMENTS,".primType")}):bn(function(){return Zu}):new pr(Pt.thisDep,Pt.contextDep,Pt.propDep,function(Ln,Mn){var Kn=Ln.ELEMENTS;return Mn.def(Kn,"?",Kn,".primType:",Zu)});if(Dt)return new pr(Vt.thisDep,Vt.contextDep,Vt.propDep,function(Ln,Mn){return Mn.def(Ln.shared.vao+".currentVAO?"+Ln.shared.vao+".currentVAO.primitive:"+Zu)})}return null}function xr(Nn,fn){if(Nn in st){var Ln=st[Nn]|0;return fn?Rt.offset=Ln:Rt.instances=Ln,bn(function(Kn,xi){return fn&&(Kn.OFFSET=Ln),Ln})}else if(Nn in Tt){var Mn=Tt[Nn];return In(Mn,function(Kn,xi){var Da=Kn.invoke(xi,Mn);return fn&&(Kn.OFFSET=Da),Da})}else if(fn){if(Ft)return bn(function(Kn,xi){return Kn.OFFSET=0,0});if(Dt)return new pr(Vt.thisDep,Vt.contextDep,Vt.propDep,function(Kn,xi){return xi.def(Kn.shared.vao+".currentVAO?"+Kn.shared.vao+".currentVAO.offset:0")})}else if(Dt)return new pr(Vt.thisDep,Vt.contextDep,Vt.propDep,function(Kn,xi){return xi.def(Kn.shared.vao+".currentVAO?"+Kn.shared.vao+".currentVAO.instances:-1")});return null}var Dr=xr(qh,!0);function un(){if(Yv in st){var Nn=st[Yv]|0;return Rt.count=Nn,bn(function(){return Nn})}else if(Yv in Tt){var fn=Tt[Yv];return In(fn,function(xi,Da){var Pa=xi.invoke(Da,fn);return Pa})}else if(Ft)if(yn(Pt)){if(Pt)return Dr?new pr(Dr.thisDep,Dr.contextDep,Dr.propDep,function(xi,Da){var Pa=Da.def(xi.ELEMENTS,".vertCount-",xi.OFFSET);return Pa}):bn(function(xi,Da){return Da.def(xi.ELEMENTS,".vertCount")});var Ln=bn(function(){return-1});return Ln}else{var Mn=new pr(Pt.thisDep||Dr.thisDep,Pt.contextDep||Dr.contextDep,Pt.propDep||Dr.propDep,function(xi,Da){var Pa=xi.ELEMENTS;return xi.OFFSET?Da.def(Pa,"?",Pa,".vertCount-",xi.OFFSET,":-1"):Da.def(Pa,"?",Pa,".vertCount:-1")});return Mn}else if(Dt){var Kn=new pr(Vt.thisDep,Vt.contextDep,Vt.propDep,function(xi,Da){return Da.def(xi.shared.vao,".currentVAO?",xi.shared.vao,".currentVAO.count:-1")});return Kn}return null}var Xr=sr(),pn=un(),ai=xr(ou,!1);return{elements:Pt,primitive:Xr,count:pn,instances:ai,offset:Dr,vao:Vt,vaoActive:Dt,elementsActive:Ft,static:Rt}}function uu(Oe,$e){var st=Oe.static,Tt=Oe.dynamic,Rt={};return Cn.forEach(function(Dt){var Xt=di(Dt);function Vt(Ft,Zt){if(Dt in st){var Pt=Ft(st[Dt]);Rt[Xt]=bn(function(){return Pt})}else if(Dt in Tt){var sr=Tt[Dt];Rt[Xt]=In(sr,function(xr,Dr){return Zt(xr,Dr,xr.invoke(Dr,sr))})}}switch(Dt){case iu:case Na:case xo:case uc:case hi:case Ih:case Lc:case lc:case Rh:case Ml:return Vt(function(Ft){return Ft},function(Ft,Zt,Pt){return Pt});case ta:return Vt(function(Ft){return ir[Ft]},function(Ft,Zt,Pt){var sr=Ft.constants.compareFuncs;return Zt.def(sr,"[",Pt,"]")});case ws:return Vt(function(Ft){return Ft},function(Ft,Zt,Pt){var sr=Zt.def("+",Pt,"[0]"),xr=Zt.def("+",Pt,"[1]");return[sr,xr]});case Bo:return Vt(function(Ft){var Zt="srcRGB"in Ft?Ft.srcRGB:Ft.src,Pt="srcAlpha"in Ft?Ft.srcAlpha:Ft.src,sr="dstRGB"in Ft?Ft.dstRGB:Ft.dst,xr="dstAlpha"in Ft?Ft.dstAlpha:Ft.dst;return[Er[Zt],Er[sr],Er[Pt],Er[xr]]},function(Ft,Zt,Pt){var sr=Ft.constants.blendFuncs;function xr(fn,Ln){var Mn=Zt.def('"',fn,Ln,'" in ',Pt,"?",Pt,".",fn,Ln,":",Pt,".",fn);return Mn}var Dr=xr("src","RGB"),un=xr("dst","RGB"),Xr=Zt.def(sr,"[",Dr,"]"),pn=Zt.def(sr,"[",xr("src","Alpha"),"]"),ai=Zt.def(sr,"[",un,"]"),Nn=Zt.def(sr,"[",xr("dst","Alpha"),"]");return[Xr,ai,pn,Nn]});case Zo:return Vt(function(Ft){if(typeof Ft=="string")return[Vn[Ft],Vn[Ft]];if(typeof Ft=="object")return[Vn[Ft.rgb],Vn[Ft.alpha]]},function(Ft,Zt,Pt){var sr=Ft.constants.blendEquations,xr=Zt.def(),Dr=Zt.def(),un=Ft.cond("typeof ",Pt,'==="string"');return un.then(xr,"=",Dr,"=",sr,"[",Pt,"];"),un.else(xr,"=",sr,"[",Pt,".rgb];",Dr,"=",sr,"[",Pt,".alpha];"),Zt(un),[xr,Dr]});case bs:return Vt(function(Ft){return S(4,function(Zt){return+Ft[Zt]})},function(Ft,Zt,Pt){return S(4,function(sr){return Zt.def("+",Pt,"[",sr,"]")})});case gf:return Vt(function(Ft){return Ft|0},function(Ft,Zt,Pt){return Zt.def(Pt,"|0")});case Wu:return Vt(function(Ft){var Zt=Ft.cmp||"keep",Pt=Ft.ref||0,sr="mask"in Ft?Ft.mask:-1;return[ir[Zt],Pt,sr]},function(Ft,Zt,Pt){var sr=Ft.constants.compareFuncs,xr=Zt.def('"cmp" in ',Pt,"?",sr,"[",Pt,".cmp]",":",Le),Dr=Zt.def(Pt,".ref|0"),un=Zt.def('"mask" in ',Pt,"?",Pt,".mask|0:-1");return[xr,Dr,un]});case Dh:case Hv:return Vt(function(Ft){var Zt=Ft.fail||"keep",Pt=Ft.zfail||"keep",sr=Ft.zpass||"keep";return[Dt===Hv?Q:U,gr[Zt],gr[Pt],gr[sr]]},function(Ft,Zt,Pt){var sr=Ft.constants.stencilOps;function xr(Dr){return Zt.def('"',Dr,'" in ',Pt,"?",sr,"[",Pt,".",Dr,"]:",Le)}return[Dt===Hv?Q:U,xr("fail"),xr("zfail"),xr("zpass")]});case Pc:return Vt(function(Ft){var Zt=Ft.factor|0,Pt=Ft.units|0;return[Zt,Pt]},function(Ft,Zt,Pt){var sr=Zt.def(Pt,".factor|0"),xr=Zt.def(Pt,".units|0");return[sr,xr]});case Yu:return Vt(function(Ft){var Zt=0;return Ft==="front"?Zt=U:Ft==="back"&&(Zt=Q),Zt},function(Ft,Zt,Pt){return Zt.def(Pt,'==="front"?',U,":",Q)});case au:return Vt(function(Ft){return Ft},function(Ft,Zt,Pt){return Pt});case Hf:return Vt(function(Ft){return wr[Ft]},function(Ft,Zt,Pt){return Zt.def(Pt+'==="cw"?'+se+":"+ye)});case Yl:return Vt(function(Ft){return Ft.map(function(Zt){return!!Zt})},function(Ft,Zt,Pt){return S(4,function(sr){return"!!"+Pt+"["+sr+"]"})});case $c:return Vt(function(Ft){var Zt="value"in Ft?Ft.value:1,Pt=!!Ft.invert;return[Zt,Pt]},function(Ft,Zt,Pt){var sr=Zt.def('"value" in ',Pt,"?+",Pt,".value:1"),xr=Zt.def("!!",Pt,".invert");return[sr,xr]})}}),Rt}function ps(Oe,$e){var st=Oe.static,Tt=Oe.dynamic,Rt={};return Object.keys(st).forEach(function(Dt){var Xt=st[Dt],Vt;if(typeof Xt=="number"||typeof Xt=="boolean")Vt=bn(function(){return Xt});else if(typeof Xt=="function"){var Ft=Xt._reglType;Ft==="texture2d"||Ft==="textureCube"?Vt=bn(function(Zt){return Zt.link(Xt)}):(Ft==="framebuffer"||Ft==="framebufferCube")&&(Vt=bn(function(Zt){return Zt.link(Xt.color[0])}))}else gn(Xt)&&(Vt=bn(function(Zt){var Pt=Zt.global.def("[",S(Xt.length,function(sr){return Xt[sr]}),"]");return Pt}));Vt.value=Xt,Rt[Dt]=Vt}),Object.keys(Tt).forEach(function(Dt){var Xt=Tt[Dt];Rt[Dt]=In(Xt,function(Vt,Ft){return Vt.invoke(Ft,Xt)})}),Rt}function Xl(Oe,$e){var st=Oe.static,Tt=Oe.dynamic,Rt={};return Object.keys(st).forEach(function(Dt){var Xt=st[Dt],Vt=Gt.id(Dt),Ft=new cn;if(Pr(Xt))Ft.state=Hi,Ft.buffer=$r.getBuffer($r.create(Xt,ar,!1,!0)),Ft.type=0;else{var Zt=$r.getBuffer(Xt);if(Zt)Ft.state=Hi,Ft.buffer=Zt,Ft.type=0;else if("constant"in Xt){var Pt=Xt.constant;Ft.buffer="null",Ft.state=Ki,typeof Pt=="number"?Ft.x=Pt:Oi.forEach(function(ai,Nn){Nn<Pt.length&&(Ft[ai]=Pt[Nn])})}else{Pr(Xt.buffer)?Zt=$r.getBuffer($r.create(Xt.buffer,ar,!1,!0)):Zt=$r.getBuffer(Xt.buffer);var sr=Xt.offset|0,xr=Xt.stride|0,Dr=Xt.size|0,un=!!Xt.normalized,Xr=0;"type"in Xt&&(Xr=an[Xt.type]);var pn=Xt.divisor|0;Ft.buffer=Zt,Ft.state=Hi,Ft.size=Dr,Ft.normalized=un,Ft.type=Xr||Zt.dtype,Ft.offset=sr,Ft.stride=xr,Ft.divisor=pn}}Rt[Dt]=bn(function(ai,Nn){var fn=ai.attribCache;if(Vt in fn)return fn[Vt];var Ln={isStream:!1};return Object.keys(Ft).forEach(function(Mn){Ln[Mn]=Ft[Mn]}),Ft.buffer&&(Ln.buffer=ai.link(Ft.buffer),Ln.type=Ln.type||Ln.buffer+".dtype"),fn[Vt]=Ln,Ln})}),Object.keys(Tt).forEach(function(Dt){var Xt=Tt[Dt];function Vt(Ft,Zt){var Pt=Ft.invoke(Zt,Xt),sr=Ft.shared,xr=Ft.constants,Dr=sr.isBufferArgs,un=sr.buffer,Xr={isStream:Zt.def(!1)},pn=new cn;pn.state=Hi,Object.keys(pn).forEach(function(Ln){Xr[Ln]=Zt.def(""+pn[Ln])});var ai=Xr.buffer,Nn=Xr.type;Zt("if(",Dr,"(",Pt,")){",Xr.isStream,"=true;",ai,"=",un,".createStream(",ar,",",Pt,");",Nn,"=",ai,".dtype;","}else{",ai,"=",un,".getBuffer(",Pt,");","if(",ai,"){",Nn,"=",ai,".dtype;",'}else if("constant" in ',Pt,"){",Xr.state,"=",Ki,";","if(typeof "+Pt+'.constant === "number"){',Xr[Oi[0]],"=",Pt,".constant;",Oi.slice(1).map(function(Ln){return Xr[Ln]}).join("="),"=0;","}else{",Oi.map(function(Ln,Mn){return Xr[Ln]+"="+Pt+".constant.length>"+Mn+"?"+Pt+".constant["+Mn+"]:0;"}).join(""),"}}else{","if(",Dr,"(",Pt,".buffer)){",ai,"=",un,".createStream(",ar,",",Pt,".buffer);","}else{",ai,"=",un,".getBuffer(",Pt,".buffer);","}",Nn,'="type" in ',Pt,"?",xr.glTypes,"[",Pt,".type]:",ai,".dtype;",Xr.normalized,"=!!",Pt,".normalized;");function fn(Ln){Zt(Xr[Ln],"=",Pt,".",Ln,"|0;")}return fn("size"),fn("offset"),fn("stride"),fn("divisor"),Zt("}}"),Zt.exit("if(",Xr.isStream,"){",un,".destroyStream(",ai,");","}"),Xr}Rt[Dt]=In(Xt,Vt)}),Rt}function Yf(Oe){var $e=Oe.static,st=Oe.dynamic,Tt={};return Object.keys($e).forEach(function(Rt){var Dt=$e[Rt];Tt[Rt]=bn(function(Xt,Vt){return typeof Dt=="number"||typeof Dt=="boolean"?""+Dt:Xt.link(Dt)})}),Object.keys(st).forEach(function(Rt){var Dt=st[Rt];Tt[Rt]=In(Dt,function(Xt,Vt){return Xt.invoke(Vt,Dt)})}),Tt}function fc(Oe,$e,st,Tt,Rt){var Dt=Oe.static,Xt=Oe.dynamic,Vt=Ls(Oe,$e),Ft=_a(Oe,Rt),Zt=Wa(Oe,Ft,Rt),Pt=uo(Oe,Rt),sr=uu(Oe,Rt),xr=lu(Oe,Rt,Vt);function Dr(fn){var Ln=Zt[fn];Ln&&(sr[fn]=Ln)}Dr(Rc),Dr(di(Gv));var un=Object.keys(sr).length>0,Xr={framebuffer:Ft,draw:Pt,shader:xr,state:sr,dirty:un,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Xr.profile=ha(Oe,Rt),Xr.uniforms=ps(st,Rt),Xr.drawVAO=Xr.scopeVAO=Pt.vao,!Xr.drawVAO&&xr.program&&!Vt&&lr.angle_instanced_arrays&&Pt.static.elements){var pn=!0,ai=xr.program.attributes.map(function(fn){var Ln=$e.static[fn];return pn=pn&&!!Ln,Ln});if(pn&&ai.length>0){var Nn=Wn.getVAO(Wn.createVAO({attributes:ai,elements:Pt.static.elements}));Xr.drawVAO=new pr(null,null,null,function(fn,Ln){return fn.link(Nn)}),Xr.useVAO=!0}}return Vt?Xr.useVAO=!0:Xr.attributes=Xl($e,Rt),Xr.context=Yf(Tt,Rt),Xr}function As(Oe,$e,st){var Tt=Oe.shared,Rt=Tt.context,Dt=Oe.scope();Object.keys(st).forEach(function(Xt){$e.save(Rt,"."+Xt);var Vt=st[Xt],Ft=Vt.append(Oe,$e);Array.isArray(Ft)?Dt(Rt,".",Xt,"=[",Ft.join(),"];"):Dt(Rt,".",Xt,"=",Ft,";")}),$e(Dt)}function Zl(Oe,$e,st,Tt){var Rt=Oe.shared,Dt=Rt.gl,Xt=Rt.framebuffer,Vt;En&&(Vt=$e.def(Rt.extensions,".webgl_draw_buffers"));var Ft=Oe.constants,Zt=Ft.drawBuffer,Pt=Ft.backBuffer,sr;st?sr=st.append(Oe,$e):sr=$e.def(Xt,".next"),Tt||$e("if(",sr,"!==",Xt,".cur){"),$e("if(",sr,"){",Dt,".bindFramebuffer(",tr,",",sr,".framebuffer);"),En&&$e(Vt,".drawBuffersWEBGL(",Zt,"[",sr,".colorAttachments.length]);"),$e("}else{",Dt,".bindFramebuffer(",tr,",null);"),En&&$e(Vt,".drawBuffersWEBGL(",Pt,");"),$e("}",Xt,".cur=",sr,";"),Tt||$e("}")}function fu(Oe,$e,st){var Tt=Oe.shared,Rt=Tt.gl,Dt=Oe.current,Xt=Oe.next,Vt=Tt.current,Ft=Tt.next,Zt=Oe.cond(Vt,".dirty");Cn.forEach(function(Pt){var sr=di(Pt);if(!(sr in st.state)){var xr,Dr;if(sr in Xt){xr=Xt[sr],Dr=Dt[sr];var un=S(ri[sr].length,function(pn){return Zt.def(xr,"[",pn,"]")});Zt(Oe.cond(un.map(function(pn,ai){return pn+"!=="+Dr+"["+ai+"]"}).join("||")).then(Rt,".",Pi[sr],"(",un,");",un.map(function(pn,ai){return Dr+"["+ai+"]="+pn}).join(";"),";"))}else{xr=Zt.def(Ft,".",sr);var Xr=Oe.cond(xr,"!==",Vt,".",sr);Zt(Xr),sr in Tn?Xr(Oe.cond(xr).then(Rt,".enable(",Tn[sr],");").else(Rt,".disable(",Tn[sr],");"),Vt,".",sr,"=",xr,";"):Xr(Rt,".",Pi[sr],"(",xr,");",Vt,".",sr,"=",xr,";")}}}),Object.keys(st.state).length===0&&Zt(Vt,".dirty=false;"),$e(Zt)}function ro(Oe,$e,st,Tt){var Rt=Oe.shared,Dt=Oe.current,Xt=Rt.current,Vt=Rt.gl,Ft;kr(Object.keys(st)).forEach(function(Zt){var Pt=st[Zt];if(!(Tt&&!Tt(Pt))){var sr=Pt.append(Oe,$e);if(Tn[Zt]){var xr=Tn[Zt];yn(Pt)?(Ft=Oe.link(sr,{stable:!0}),$e(Oe.cond(Ft).then(Vt,".enable(",xr,");").else(Vt,".disable(",xr,");")),$e(Xt,".",Zt,"=",Ft,";")):($e(Oe.cond(sr).then(Vt,".enable(",xr,");").else(Vt,".disable(",xr,");")),$e(Xt,".",Zt,"=",sr,";"))}else if(gn(sr)){var Dr=Dt[Zt];$e(Vt,".",Pi[Zt],"(",sr,");",sr.map(function(un,Xr){return Dr+"["+Xr+"]="+un}).join(";"),";")}else yn(Pt)?(Ft=Oe.link(sr,{stable:!0}),$e(Vt,".",Pi[Zt],"(",Ft,");",Xt,".",Zt,"=",Ft,";")):$e(Vt,".",Pi[Zt],"(",sr,");",Xt,".",Zt,"=",sr,";")}})}function Eu(Oe,$e){Zn&&(Oe.instancing=$e.def(Oe.shared.extensions,".angle_instanced_arrays"))}function Ja(Oe,$e,st,Tt,Rt){var Dt=Oe.shared,Xt=Oe.stats,Vt=Dt.current,Ft=Dt.timer,Zt=st.profile;function Pt(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var sr,xr;function Dr(fn){sr=$e.def(),fn(sr,"=",Pt(),";"),typeof Rt=="string"?fn(Xt,".count+=",Rt,";"):fn(Xt,".count++;"),Bn&&(Tt?(xr=$e.def(),fn(xr,"=",Ft,".getNumPendingQueries();")):fn(Ft,".beginQuery(",Xt,");"))}function un(fn){fn(Xt,".cpuTime+=",Pt(),"-",sr,";"),Bn&&(Tt?fn(Ft,".pushScopeStats(",xr,",",Ft,".getNumPendingQueries(),",Xt,");"):fn(Ft,".endQuery();"))}function Xr(fn){var Ln=$e.def(Vt,".profile");$e(Vt,".profile=",fn,";"),$e.exit(Vt,".profile=",Ln,";")}var pn;if(Zt){if(yn(Zt)){Zt.enable?(Dr($e),un($e.exit),Xr("true")):Xr("false");return}pn=Zt.append(Oe,$e),Xr(pn)}else pn=$e.def(Vt,".profile");var ai=Oe.block();Dr(ai),$e("if(",pn,"){",ai,"}");var Nn=Oe.block();un(Nn),$e.exit("if(",pn,"){",Nn,"}")}function H(Oe,$e,st,Tt,Rt){var Dt=Oe.shared;function Xt(Ft){switch(Ft){case jo:case ol:case Il:return 2;case ba:case el:case Sl:return 3;case qa:case to:case Su:return 4;default:return 1}}function Vt(Ft,Zt,Pt){var sr=Dt.gl,xr=$e.def(Ft,".location"),Dr=$e.def(Dt.attributes,"[",xr,"]"),un=Pt.state,Xr=Pt.buffer,pn=[Pt.x,Pt.y,Pt.z,Pt.w],ai=["buffer","normalized","offset","stride"];function Nn(){$e("if(!",Dr,".buffer){",sr,".enableVertexAttribArray(",xr,");}");var Ln=Pt.type,Mn;if(Pt.size?Mn=$e.def(Pt.size,"||",Zt):Mn=Zt,$e("if(",Dr,".type!==",Ln,"||",Dr,".size!==",Mn,"||",ai.map(function(xi){return Dr+"."+xi+"!=="+Pt[xi]}).join("||"),"){",sr,".bindBuffer(",ar,",",Xr,".buffer);",sr,".vertexAttribPointer(",[xr,Mn,Ln,Pt.normalized,Pt.stride,Pt.offset],");",Dr,".type=",Ln,";",Dr,".size=",Mn,";",ai.map(function(xi){return Dr+"."+xi+"="+Pt[xi]+";"}).join(""),"}"),Zn){var Kn=Pt.divisor;$e("if(",Dr,".divisor!==",Kn,"){",Oe.instancing,".vertexAttribDivisorANGLE(",[xr,Kn],");",Dr,".divisor=",Kn,";}")}}function fn(){$e("if(",Dr,".buffer){",sr,".disableVertexAttribArray(",xr,");",Dr,".buffer=null;","}if(",Oi.map(function(Ln,Mn){return Dr+"."+Ln+"!=="+pn[Mn]}).join("||"),"){",sr,".vertexAttrib4f(",xr,",",pn,");",Oi.map(function(Ln,Mn){return Dr+"."+Ln+"="+pn[Mn]+";"}).join(""),"}")}un===Hi?Nn():un===Ki?fn():($e("if(",un,"===",Hi,"){"),Nn(),$e("}else{"),fn(),$e("}"))}Tt.forEach(function(Ft){var Zt=Ft.name,Pt=st.attributes[Zt],sr;if(Pt){if(!Rt(Pt))return;sr=Pt.append(Oe,$e)}else{if(!Rt(Xn))return;var xr=Oe.scopeAttrib(Zt);sr={},Object.keys(new cn).forEach(function(Dr){sr[Dr]=$e.def(xr,".",Dr)})}Vt(Oe.link(Ft),Xt(Ft.info.type),sr)})}function R(Oe,$e,st,Tt,Rt,Dt){for(var Xt=Oe.shared,Vt=Xt.gl,Ft,Zt=0;Zt<Tt.length;++Zt){var Pt=Tt[Zt],sr=Pt.name,xr=Pt.info.type,Dr=st.uniforms[sr],un=Oe.link(Pt),Xr=un+".location",pn;if(Dr){if(!Rt(Dr))continue;if(yn(Dr)){var ai=Dr.value;if(xr===yf||xr===Xu){var Nn=Oe.link(ai._texture||ai.color[0]._texture);$e(Vt,".uniform1i(",Xr,",",Nn+".bind());"),$e.exit(Nn,".unbind();")}else if(xr===su||xr===Fl||xr===El){var fn=Oe.global.def("new Float32Array(["+Array.prototype.slice.call(ai)+"])"),Ln=2;xr===Fl?Ln=3:xr===El&&(Ln=4),$e(Vt,".uniformMatrix",Ln,"fv(",Xr,",false,",fn,");")}else{switch(xr){case Lo:Ft="1f";break;case jo:Ft="2f";break;case ba:Ft="3f";break;case qa:Ft="4f";break;case Ya:Ft="1i";break;case ds:Ft="1i";break;case Il:Ft="2i";break;case ol:Ft="2i";break;case Sl:Ft="3i";break;case el:Ft="3i";break;case Su:Ft="4i";break;case to:Ft="4i";break}$e(Vt,".uniform",Ft,"(",Xr,",",gn(ai)?Array.prototype.slice.call(ai):ai,");")}continue}else pn=Dr.append(Oe,$e)}else{if(!Rt(Xn))continue;pn=$e.def(Xt.uniforms,"[",Gt.id(sr),"]")}xr===yf?$e("if(",pn,"&&",pn,'._reglType==="framebuffer"){',pn,"=",pn,".color[0];","}"):xr===Xu&&$e("if(",pn,"&&",pn,'._reglType==="framebufferCube"){',pn,"=",pn,".color[0];","}");var Mn=1;switch(xr){case yf:case Xu:var Kn=$e.def(pn,"._texture");$e(Vt,".uniform1i(",Xr,",",Kn,".bind());"),$e.exit(Kn,".unbind();");continue;case ds:case Ya:Ft="1i";break;case ol:case Il:Ft="2i",Mn=2;break;case el:case Sl:Ft="3i",Mn=3;break;case to:case Su:Ft="4i",Mn=4;break;case Lo:Ft="1f";break;case jo:Ft="2f",Mn=2;break;case ba:Ft="3f",Mn=3;break;case qa:Ft="4f",Mn=4;break;case su:Ft="Matrix2fv";break;case Fl:Ft="Matrix3fv";break;case El:Ft="Matrix4fv";break}if(Ft.charAt(0)==="M"){$e(Vt,".uniform",Ft,"(",Xr,",");var xi=Math.pow(xr-su+2,2),Da=Oe.global.def("new Float32Array(",xi,")");Array.isArray(pn)?$e("false,(",S(xi,function(Vo){return Da+"["+Vo+"]="+pn[Vo]}),",",Da,")"):$e("false,(Array.isArray(",pn,")||",pn," instanceof Float32Array)?",pn,":(",S(xi,function(Vo){return Da+"["+Vo+"]="+pn+"["+Vo+"]"}),",",Da,")"),$e(");")}else if(Mn>1){for(var Pa=[],_o=[],ua=0;ua<Mn;++ua)Array.isArray(pn)?_o.push(pn[ua]):_o.push($e.def(pn+"["+ua+"]")),Dt&&Pa.push($e.def());Dt&&$e("if(!",Oe.batchId,"||",Pa.map(function(Vo,ml){return Vo+"!=="+_o[ml]}).join("||"),"){",Pa.map(function(Vo,ml){return Vo+"="+_o[ml]+";"}).join("")),$e(Vt,".uniform",Ft,"(",Xr,",",_o.join(","),");"),Dt&&$e("}")}else{if(Dt){var Qa=$e.def();$e("if(!",Oe.batchId,"||",Qa,"!==",pn,"){",Qa,"=",pn,";")}$e(Vt,".uniform",Ft,"(",Xr,",",pn,");"),Dt&&$e("}")}}}function G(Oe,$e,st,Tt){var Rt=Oe.shared,Dt=Rt.gl,Xt=Rt.draw,Vt=Tt.draw;function Ft(){var Mn=Vt.elements,Kn,xi=$e;return Mn?((Mn.contextDep&&Tt.contextDynamic||Mn.propDep)&&(xi=st),Kn=Mn.append(Oe,xi),Vt.elementsActive&&xi("if("+Kn+")"+Dt+".bindBuffer("+_r+","+Kn+".buffer.buffer);")):(Kn=xi.def(),xi(Kn,"=",Xt,".",Gf,";","if(",Kn,"){",Dt,".bindBuffer(",_r,",",Kn,".buffer.buffer);}","else if(",Rt.vao,".currentVAO){",Kn,"=",Oe.shared.elements+".getElements("+Rt.vao,".currentVAO.elements);",mi?"":"if("+Kn+")"+Dt+".bindBuffer("+_r+","+Kn+".buffer.buffer);","}")),Kn}function Zt(){var Mn=Vt.count,Kn,xi=$e;return Mn?((Mn.contextDep&&Tt.contextDynamic||Mn.propDep)&&(xi=st),Kn=Mn.append(Oe,xi)):Kn=xi.def(Xt,".",Yv),Kn}var Pt=Ft();function sr(Mn){var Kn=Vt[Mn];return Kn?Kn.contextDep&&Tt.contextDynamic||Kn.propDep?Kn.append(Oe,st):Kn.append(Oe,$e):$e.def(Xt,".",Mn)}var xr=sr(Fh),Dr=sr(qh),un=Zt();if(typeof un=="number"){if(un===0)return}else st("if(",un,"){"),st.exit("}");var Xr,pn;Zn&&(Xr=sr(ou),pn=Oe.instancing);var ai=Pt+".type",Nn=Vt.elements&&yn(Vt.elements)&&!Vt.vaoActive;function fn(){function Mn(){st(pn,".drawElementsInstancedANGLE(",[xr,un,ai,Dr+"<<(("+ai+"-"+Ii+")>>1)",Xr],");")}function Kn(){st(pn,".drawArraysInstancedANGLE(",[xr,Dr,un,Xr],");")}Pt&&Pt!=="null"?Nn?Mn():(st("if(",Pt,"){"),Mn(),st("}else{"),Kn(),st("}")):Kn()}function Ln(){function Mn(){st(Dt+".drawElements("+[xr,un,ai,Dr+"<<(("+ai+"-"+Ii+")>>1)"]+");")}function Kn(){st(Dt+".drawArrays("+[xr,Dr,un]+");")}Pt&&Pt!=="null"?Nn?Mn():(st("if(",Pt,"){"),Mn(),st("}else{"),Kn(),st("}")):Kn()}Zn&&(typeof Xr!="number"||Xr>=0)?typeof Xr=="string"?(st("if(",Xr,">0){"),fn(),st("}else if(",Xr,"<0){"),Ln(),st("}")):fn():Ln()}function I(Oe,$e,st,Tt,Rt){var Dt=Vi(),Xt=Dt.proc("body",Rt);return Zn&&(Dt.instancing=Xt.def(Dt.shared.extensions,".angle_instanced_arrays")),Oe(Dt,Xt,st,Tt),Dt.compile().body}function W(Oe,$e,st,Tt){Eu(Oe,$e),st.useVAO?st.drawVAO?$e(Oe.shared.vao,".setVAO(",st.drawVAO.append(Oe,$e),");"):$e(Oe.shared.vao,".setVAO(",Oe.shared.vao,".targetVAO);"):($e(Oe.shared.vao,".setVAO(null);"),H(Oe,$e,st,Tt.attributes,function(){return!0})),R(Oe,$e,st,Tt.uniforms,function(){return!0},!1),G(Oe,$e,$e,st)}function te(Oe,$e){var st=Oe.proc("draw",1);Eu(Oe,st),As(Oe,st,$e.context),Zl(Oe,st,$e.framebuffer),fu(Oe,st,$e),ro(Oe,st,$e.state),Ja(Oe,st,$e,!1,!0);var Tt=$e.shader.progVar.append(Oe,st);if(st(Oe.shared.gl,".useProgram(",Tt,".program);"),$e.shader.program)W(Oe,st,$e,$e.shader.program);else{st(Oe.shared.vao,".setVAO(null);");var Rt=Oe.global.def("{}"),Dt=st.def(Tt,".id"),Xt=st.def(Rt,"[",Dt,"]");st(Oe.cond(Xt).then(Xt,".call(this,a0);").else(Xt,"=",Rt,"[",Dt,"]=",Oe.link(function(Vt){return I(W,Oe,$e,Vt,1)}),"(",Tt,");",Xt,".call(this,a0);"))}Object.keys($e.state).length>0&&st(Oe.shared.current,".dirty=true;"),Oe.shared.vao&&st(Oe.shared.vao,".setVAO(null);")}function ee(Oe,$e,st,Tt){Oe.batchId="a1",Eu(Oe,$e);function Rt(){return!0}H(Oe,$e,st,Tt.attributes,Rt),R(Oe,$e,st,Tt.uniforms,Rt,!1),G(Oe,$e,$e,st)}function he(Oe,$e,st,Tt){Eu(Oe,$e);var Rt=st.contextDep,Dt=$e.def(),Xt="a0",Vt="a1",Ft=$e.def();Oe.shared.props=Ft,Oe.batchId=Dt;var Zt=Oe.scope(),Pt=Oe.scope();$e(Zt.entry,"for(",Dt,"=0;",Dt,"<",Vt,";++",Dt,"){",Ft,"=",Xt,"[",Dt,"];",Pt,"}",Zt.exit);function sr(ai){return ai.contextDep&&Rt||ai.propDep}function xr(ai){return!sr(ai)}if(st.needsContext&&As(Oe,Pt,st.context),st.needsFramebuffer&&Zl(Oe,Pt,st.framebuffer),ro(Oe,Pt,st.state,sr),st.profile&&sr(st.profile)&&Ja(Oe,Pt,st,!1,!0),Tt)st.useVAO?st.drawVAO?sr(st.drawVAO)?Pt(Oe.shared.vao,".setVAO(",st.drawVAO.append(Oe,Pt),");"):Zt(Oe.shared.vao,".setVAO(",st.drawVAO.append(Oe,Zt),");"):Zt(Oe.shared.vao,".setVAO(",Oe.shared.vao,".targetVAO);"):(Zt(Oe.shared.vao,".setVAO(null);"),H(Oe,Zt,st,Tt.attributes,xr),H(Oe,Pt,st,Tt.attributes,sr)),R(Oe,Zt,st,Tt.uniforms,xr,!1),R(Oe,Pt,st,Tt.uniforms,sr,!0),G(Oe,Zt,Pt,st);else{var Dr=Oe.global.def("{}"),un=st.shader.progVar.append(Oe,Pt),Xr=Pt.def(un,".id"),pn=Pt.def(Dr,"[",Xr,"]");Pt(Oe.shared.gl,".useProgram(",un,".program);","if(!",pn,"){",pn,"=",Dr,"[",Xr,"]=",Oe.link(function(ai){return I(ee,Oe,st,ai,2)}),"(",un,");}",pn,".call(this,a0[",Dt,"],",Dt,");")}}function Se(Oe,$e){var st=Oe.proc("batch",2);Oe.batchId="0",Eu(Oe,st);var Tt=!1,Rt=!0;Object.keys($e.context).forEach(function(Dr){Tt=Tt||$e.context[Dr].propDep}),Tt||(As(Oe,st,$e.context),Rt=!1);var Dt=$e.framebuffer,Xt=!1;Dt?(Dt.propDep?Tt=Xt=!0:Dt.contextDep&&Tt&&(Xt=!0),Xt||Zl(Oe,st,Dt)):Zl(Oe,st,null),$e.state.viewport&&$e.state.viewport.propDep&&(Tt=!0);function Vt(Dr){return Dr.contextDep&&Tt||Dr.propDep}fu(Oe,st,$e),ro(Oe,st,$e.state,function(Dr){return!Vt(Dr)}),(!$e.profile||!Vt($e.profile))&&Ja(Oe,st,$e,!1,"a1"),$e.contextDep=Tt,$e.needsContext=Rt,$e.needsFramebuffer=Xt;var Ft=$e.shader.progVar;if(Ft.contextDep&&Tt||Ft.propDep)he(Oe,st,$e,null);else{var Zt=Ft.append(Oe,st);if(st(Oe.shared.gl,".useProgram(",Zt,".program);"),$e.shader.program)he(Oe,st,$e,$e.shader.program);else{st(Oe.shared.vao,".setVAO(null);");var Pt=Oe.global.def("{}"),sr=st.def(Zt,".id"),xr=st.def(Pt,"[",sr,"]");st(Oe.cond(xr).then(xr,".call(this,a0,a1);").else(xr,"=",Pt,"[",sr,"]=",Oe.link(function(Dr){return I(he,Oe,$e,Dr,2)}),"(",Zt,");",xr,".call(this,a0,a1);"))}}Object.keys($e.state).length>0&&st(Oe.shared.current,".dirty=true;"),Oe.shared.vao&&st(Oe.shared.vao,".setVAO(null);")}function ze(Oe,$e){var st=Oe.proc("scope",3);Oe.batchId="a2";var Tt=Oe.shared,Rt=Tt.current;if(As(Oe,st,$e.context),$e.framebuffer&&$e.framebuffer.append(Oe,st),kr(Object.keys($e.state)).forEach(function(Vt){var Ft=$e.state[Vt],Zt=Ft.append(Oe,st);gn(Zt)?Zt.forEach(function(Pt,sr){Si(Pt)?st.set(Oe.next[Vt],"["+sr+"]",Pt):st.set(Oe.next[Vt],"["+sr+"]",Oe.link(Pt,{stable:!0}))}):yn(Ft)?st.set(Tt.next,"."+Vt,Oe.link(Zt,{stable:!0})):st.set(Tt.next,"."+Vt,Zt)}),Ja(Oe,st,$e,!0,!0),[Gf,qh,Yv,ou,Fh].forEach(function(Vt){var Ft=$e.draw[Vt];if(Ft){var Zt=Ft.append(Oe,st);Si(Zt)?st.set(Tt.draw,"."+Vt,Zt):st.set(Tt.draw,"."+Vt,Oe.link(Zt),{stable:!0})}}),Object.keys($e.uniforms).forEach(function(Vt){var Ft=$e.uniforms[Vt].append(Oe,st);Array.isArray(Ft)&&(Ft="["+Ft.map(function(Zt){return Si(Zt)?Zt:Oe.link(Zt,{stable:!0})})+"]"),st.set(Tt.uniforms,"["+Oe.link(Gt.id(Vt),{stable:!0})+"]",Ft)}),Object.keys($e.attributes).forEach(function(Vt){var Ft=$e.attributes[Vt].append(Oe,st),Zt=Oe.scopeAttrib(Vt);Object.keys(new cn).forEach(function(Pt){st.set(Zt,"."+Pt,Ft[Pt])})}),$e.scopeVAO){var Dt=$e.scopeVAO.append(Oe,st);Si(Dt)?st.set(Tt.vao,".targetVAO",Dt):st.set(Tt.vao,".targetVAO",Oe.link(Dt,{stable:!0}))}function Xt(Vt){var Ft=$e.shader[Vt];if(Ft){var Zt=Ft.append(Oe,st);Si(Zt)?st.set(Tt.shader,"."+Vt,Zt):st.set(Tt.shader,"."+Vt,Oe.link(Zt,{stable:!0}))}}Xt(th),Xt(rh),Object.keys($e.state).length>0&&(st(Rt,".dirty=true;"),st.exit(Rt,".dirty=true;")),st("a1(",Oe.shared.context,",a0,",Oe.batchId,");")}function pt(Oe){if(!(typeof Oe!="object"||gn(Oe))){for(var $e=Object.keys(Oe),st=0;st<$e.length;++st)if(h.isDynamic(Oe[$e[st]]))return!0;return!1}}function wt(Oe,$e,st){var Tt=$e.static[st];if(!Tt||!pt(Tt))return;var Rt=Oe.global,Dt=Object.keys(Tt),Xt=!1,Vt=!1,Ft=!1,Zt=Oe.global.def("{}");Dt.forEach(function(sr){var xr=Tt[sr];if(h.isDynamic(xr)){typeof xr=="function"&&(xr=Tt[sr]=h.unbox(xr));var Dr=In(xr,null);Xt=Xt||Dr.thisDep,Ft=Ft||Dr.propDep,Vt=Vt||Dr.contextDep}else{switch(Rt(Zt,".",sr,"="),typeof xr){case"number":Rt(xr);break;case"string":Rt('"',xr,'"');break;case"object":Array.isArray(xr)&&Rt("[",xr.join(),"]");break;default:Rt(Oe.link(xr));break}Rt(";")}});function Pt(sr,xr){Dt.forEach(function(Dr){var un=Tt[Dr];if(h.isDynamic(un)){var Xr=sr.invoke(xr,un);xr(Zt,".",Dr,"=",Xr,";")}})}$e.dynamic[st]=new h.DynamicVariable(Ka,{thisDep:Xt,contextDep:Vt,propDep:Ft,ref:Zt,append:Pt}),delete $e.static[st]}function gt(Oe,$e,st,Tt,Rt){var Dt=Vi();Dt.stats=Dt.link(Rt),Object.keys($e.static).forEach(function(Vt){wt(Dt,$e,Vt)}),Qt.forEach(function(Vt){wt(Dt,Oe,Vt)});var Xt=fc(Oe,$e,st,Tt,Dt);return Xt.shader.program&&(Xt.shader.program.attributes.sort(function(Vt,Ft){return Vt.name<Ft.name?-1:1}),Xt.shader.program.uniforms.sort(function(Vt,Ft){return Vt.name<Ft.name?-1:1})),te(Dt,Xt),ze(Dt,Xt),Se(Dt,Xt),e(Dt.compile(),{destroy:function(){Xt.shader.program.destroy()}})}return{next:$i,current:ri,procs:function(){var Oe=Vi(),$e=Oe.proc("poll"),st=Oe.proc("refresh"),Tt=Oe.block();$e(Tt),st(Tt);var Rt=Oe.shared,Dt=Rt.gl,Xt=Rt.next,Vt=Rt.current;Tt(Vt,".dirty=false;"),Zl(Oe,$e),Zl(Oe,st,null,!0);var Ft;Zn&&(Ft=Oe.link(Zn)),lr.oes_vertex_array_object&&st(Oe.link(lr.oes_vertex_array_object),".bindVertexArrayOES(null);");var Zt=st.def(Rt.attributes),Pt=st.def(0),sr=Oe.cond(Pt,".buffer");sr.then(Dt,".enableVertexAttribArray(i);",Dt,".bindBuffer(",ar,",",Pt,".buffer.buffer);",Dt,".vertexAttribPointer(i,",Pt,".size,",Pt,".type,",Pt,".normalized,",Pt,".stride,",Pt,".offset);").else(Dt,".disableVertexAttribArray(i);",Dt,".vertexAttrib4f(i,",Pt,".x,",Pt,".y,",Pt,".z,",Pt,".w);",Pt,".buffer=null;");var xr=Oe.link(Or.maxAttributes,{stable:!0});return st("for(var i=0;i<",xr,";++i){",Pt,"=",Zt,"[i];",sr,"}"),Zn&&st("for(var i=0;i<",xr,";++i){",Ft,".vertexAttribDivisorANGLE(i,",Zt,"[i].divisor);","}"),st(Oe.shared.vao,".currentVAO=null;",Oe.shared.vao,".setVAO(",Oe.shared.vao,".targetVAO);"),Object.keys(Tn).forEach(function(Dr){var un=Tn[Dr],Xr=Tt.def(Xt,".",Dr),pn=Oe.block();pn("if(",Xr,"){",Dt,".enable(",un,")}else{",Dt,".disable(",un,")}",Vt,".",Dr,"=",Xr,";"),st(pn),$e("if(",Xr,"!==",Vt,".",Dr,"){",pn,"}")}),Object.keys(Pi).forEach(function(Dr){var un=Pi[Dr],Xr=ri[Dr],pn,ai,Nn=Oe.block();if(Nn(Dt,".",un,"("),gn(Xr)){var fn=Xr.length;pn=Oe.global.def(Xt,".",Dr),ai=Oe.global.def(Vt,".",Dr),Nn(S(fn,function(Ln){return pn+"["+Ln+"]"}),");",S(fn,function(Ln){return ai+"["+Ln+"]="+pn+"["+Ln+"];"}).join("")),$e("if(",S(fn,function(Ln){return pn+"["+Ln+"]!=="+ai+"["+Ln+"]"}).join("||"),"){",Nn,"}")}else pn=Tt.def(Xt,".",Dr),ai=Tt.def(Vt,".",Dr),Nn(pn,");",Vt,".",Dr,"=",pn,";"),$e("if(",pn,"!==",ai,"){",Nn,"}");st(Nn)}),Oe.compile()}(),compile:gt}}function Fi(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var xa=34918,Gi=34919,va=35007,go=function(Ye,Gt){if(!Gt.ext_disjoint_timer_query)return null;var lr=[];function Or(){return lr.pop()||Gt.ext_disjoint_timer_query.createQueryEXT()}function $r(Vn){lr.push(Vn)}var jr=[];function Kr(Vn){var Zn=Or();Gt.ext_disjoint_timer_query.beginQueryEXT(va,Zn),jr.push(Zn),Bn(jr.length-1,jr.length,Vn)}function xn(){Gt.ext_disjoint_timer_query.endQueryEXT(va)}function Qn(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Wn=[];function Rn(){return Wn.pop()||new Qn}function ia(Vn){Wn.push(Vn)}var Un=[];function Bn(Vn,Zn,En){var mi=Rn();mi.startQueryIndex=Vn,mi.endQueryIndex=Zn,mi.sum=0,mi.stats=En,Un.push(mi)}var _n=[],Br=[];function cn(){var Vn,Zn,En=jr.length;if(En!==0){Br.length=Math.max(Br.length,En+1),_n.length=Math.max(_n.length,En+1),_n[0]=0,Br[0]=0;var mi=0;for(Vn=0,Zn=0;Zn<jr.length;++Zn){var ri=jr[Zn];Gt.ext_disjoint_timer_query.getQueryObjectEXT(ri,Gi)?(mi+=Gt.ext_disjoint_timer_query.getQueryObjectEXT(ri,xa),$r(ri)):jr[Vn++]=ri,_n[Zn+1]=mi,Br[Zn+1]=Vn}for(jr.length=Vn,Vn=0,Zn=0;Zn<Un.length;++Zn){var $i=Un[Zn],Cn=$i.startQueryIndex,Tn=$i.endQueryIndex;$i.sum+=_n[Tn]-_n[Cn];var Pi=Br[Cn],di=Br[Tn];di===Pi?($i.stats.gpuTime+=$i.sum/1e6,ia($i)):($i.startQueryIndex=Pi,$i.endQueryIndex=di,Un[Vn++]=$i)}Un.length=Vn}}return{beginQuery:Kr,endQuery:xn,pushScopeStats:Bn,update:cn,getNumPendingQueries:function(){return jr.length},clear:function(){lr.push.apply(lr,jr);for(var Vn=0;Vn<lr.length;Vn++)Gt.ext_disjoint_timer_query.deleteQueryEXT(lr[Vn]);jr.length=0,lr.length=0},restore:function(){jr.length=0,lr.length=0}}},Po=16384,Ao=256,Sn=1024,da=34962,Sa="webglcontextlost",La="webglcontextrestored",Ts=1,Gs=2,yl=3;function ls(Ye,Gt){for(var lr=0;lr<Ye.length;++lr)if(Ye[lr]===Gt)return lr;return-1}function Wl(Ye){var Gt=x(Ye);if(!Gt)return null;var lr=Gt.gl,Or=lr.getContextAttributes(),$r=lr.isContextLost(),jr=E(lr,Gt);if(!jr)return null;var Kr=_(),xn=Fi(),Qn=Gt.cachedCode||{},Wn=jr.extensions,Rn=go(lr,Wn),ia=d(),Un=lr.drawingBufferWidth,Bn=lr.drawingBufferHeight,_n={tick:0,time:0,viewportWidth:Un,viewportHeight:Bn,framebufferWidth:Un,framebufferHeight:Bn,drawingBufferWidth:Un,drawingBufferHeight:Bn,pixelRatio:Gt.pixelRatio},Br={},cn={elements:null,primitive:4,count:-1,offset:0,instances:-1},Vn=cr(lr,Wn),Zn=yr(lr,xn,Gt,ri),En=Ut(lr,Wn,Zn,xn),mi=Lh(lr,Wn,Vn,xn,Zn,En,cn);function ri(I){return mi.destroyBuffer(I)}var $i=Cc(lr,Kr,xn,Gt),Cn=Ch(lr,Wn,Vn,function(){di.procs.poll()},_n,xn,Gt),Tn=qf(lr,Wn,Vn,xn,Gt),Pi=hv(lr,Wn,Vn,Cn,Tn,xn),di=Ci(lr,Kr,Wn,Vn,Zn,En,Cn,Pi,Br,mi,$i,cn,_n,Rn,Qn,Gt),ei=Hs(lr,Pi,di.procs.poll,_n,Or,Wn,Vn),jn=di.next,Si=lr.canvas,na=[],Ea=[],pi=[],Vi=[Gt.onDestroy],ha=null;function _a(){if(na.length===0){Rn&&Rn.update(),ha=null;return}ha=v.next(_a),fu();for(var I=na.length-1;I>=0;--I){var W=na[I];W&&W(_n,null,0)}lr.flush(),Rn&&Rn.update()}function Wa(){!ha&&na.length>0&&(ha=v.next(_a))}function Ls(){ha&&(v.cancel(_a),ha=null)}function lu(I){I.preventDefault(),$r=!0,Ls(),Ea.forEach(function(W){W()})}function uo(I){lr.getError(),$r=!1,jr.restore(),$i.restore(),Zn.restore(),Cn.restore(),Tn.restore(),Pi.restore(),mi.restore(),Rn&&Rn.restore(),di.procs.refresh(),Wa(),pi.forEach(function(W){W()})}Si&&(Si.addEventListener(Sa,lu,!1),Si.addEventListener(La,uo,!1));function uu(){na.length=0,Ls(),Si&&(Si.removeEventListener(Sa,lu),Si.removeEventListener(La,uo)),$i.clear(),Pi.clear(),Tn.clear(),mi.clear(),Cn.clear(),En.clear(),Zn.clear(),Rn&&Rn.clear(),Vi.forEach(function(I){I()})}function ps(I){function W(Dt){var Xt=e({},Dt);delete Xt.uniforms,delete Xt.attributes,delete Xt.context,delete Xt.vao,"stencil"in Xt&&Xt.stencil.op&&(Xt.stencil.opBack=Xt.stencil.opFront=Xt.stencil.op,delete Xt.stencil.op);function Vt(Ft){if(Ft in Xt){var Zt=Xt[Ft];delete Xt[Ft],Object.keys(Zt).forEach(function(Pt){Xt[Ft+"."+Pt]=Zt[Pt]})}}return Vt("blend"),Vt("depth"),Vt("cull"),Vt("stencil"),Vt("polygonOffset"),Vt("scissor"),Vt("sample"),"vao"in Dt&&(Xt.vao=Dt.vao),Xt}function te(Dt,Xt){var Vt={},Ft={};return Object.keys(Dt).forEach(function(Zt){var Pt=Dt[Zt];if(h.isDynamic(Pt)){Ft[Zt]=h.unbox(Pt,Zt);return}else if(Xt&&Array.isArray(Pt)){for(var sr=0;sr<Pt.length;++sr)if(h.isDynamic(Pt[sr])){Ft[Zt]=h.unbox(Pt,Zt);return}}Vt[Zt]=Pt}),{dynamic:Ft,static:Vt}}var ee=te(I.context||{},!0),he=te(I.uniforms||{},!0),Se=te(I.attributes||{},!1),ze=te(W(I),!1),pt={gpuTime:0,cpuTime:0,count:0},wt=di.compile(ze,Se,he,ee,pt),gt=wt.draw,Oe=wt.batch,$e=wt.scope,st=[];function Tt(Dt){for(;st.length<Dt;)st.push(null);return st}function Rt(Dt,Xt){var Vt;if(typeof Dt=="function")return $e.call(this,null,Dt,0);if(typeof Xt=="function")if(typeof Dt=="number")for(Vt=0;Vt<Dt;++Vt)$e.call(this,null,Xt,Vt);else if(Array.isArray(Dt))for(Vt=0;Vt<Dt.length;++Vt)$e.call(this,Dt[Vt],Xt,Vt);else return $e.call(this,Dt,Xt,0);else if(typeof Dt=="number"){if(Dt>0)return Oe.call(this,Tt(Dt|0),Dt|0)}else if(Array.isArray(Dt)){if(Dt.length)return Oe.call(this,Dt,Dt.length)}else return gt.call(this,Dt)}return e(Rt,{stats:pt,destroy:function(){wt.destroy()}})}var Xl=Pi.setFBO=ps({framebuffer:h.define.call(null,Ts,"framebuffer")});function Yf(I,W){var te=0;di.procs.poll();var ee=W.color;ee&&(lr.clearColor(+ee[0]||0,+ee[1]||0,+ee[2]||0,+ee[3]||0),te|=Po),"depth"in W&&(lr.clearDepth(+W.depth),te|=Ao),"stencil"in W&&(lr.clearStencil(W.stencil|0),te|=Sn),lr.clear(te)}function fc(I){if("framebuffer"in I)if(I.framebuffer&&I.framebuffer_reglType==="framebufferCube")for(var W=0;W<6;++W)Xl(e({framebuffer:I.framebuffer.faces[W]},I),Yf);else Xl(I,Yf);else Yf(null,I)}function As(I){na.push(I);function W(){var te=ls(na,I);function ee(){var he=ls(na,ee);na[he]=na[na.length-1],na.length-=1,na.length<=0&&Ls()}na[te]=ee}return Wa(),{cancel:W}}function Zl(){var I=jn.viewport,W=jn.scissor_box;I[0]=I[1]=W[0]=W[1]=0,_n.viewportWidth=_n.framebufferWidth=_n.drawingBufferWidth=I[2]=W[2]=lr.drawingBufferWidth,_n.viewportHeight=_n.framebufferHeight=_n.drawingBufferHeight=I[3]=W[3]=lr.drawingBufferHeight}function fu(){_n.tick+=1,_n.time=Eu(),Zl(),di.procs.poll()}function ro(){Cn.refresh(),Zl(),di.procs.refresh(),Rn&&Rn.update()}function Eu(){return(d()-ia)/1e3}ro();function Ja(I,W){var te;switch(I){case"frame":return As(W);case"lost":te=Ea;break;case"restore":te=pi;break;case"destroy":te=Vi;break;default:}return te.push(W),{cancel:function(){for(var ee=0;ee<te.length;++ee)if(te[ee]===W){te[ee]=te[te.length-1],te.pop();return}}}}function H(){return Qn}function R(I){Object.entries(I).forEach(function(W){Qn[W[0]]=W[1]})}var G=e(ps,{clear:fc,prop:h.define.bind(null,Ts),context:h.define.bind(null,Gs),this:h.define.bind(null,yl),draw:ps({}),buffer:function(I){return Zn.create(I,da,!1,!1)},elements:function(I){return En.create(I,!1)},texture:Cn.create2D,cube:Cn.createCube,renderbuffer:Tn.create,framebuffer:Pi.create,framebufferCube:Pi.createCube,vao:mi.createVAO,attributes:Or,frame:As,on:Ja,limits:Vn,hasExtension:function(I){return Vn.extensions.indexOf(I.toLowerCase())>=0},read:ei,destroy:uu,_gl:lr,_refresh:ro,poll:function(){fu(),Rn&&Rn.update()},now:Eu,stats:xn,getCachedCode:H,preloadCachedCode:R});return Gt.onDone(null,G),G}return Wl})});var lze=ne((hgr,sze)=>{"use strict";var TBt=vg();sze.exports=function(t){if(t?typeof t=="string"&&(t={container:t}):t={},aze(t)?t={container:t}:ABt(t)?t={container:t}:MBt(t)?t={gl:t}:t=TBt(t,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),t.pixelRatio||(t.pixelRatio=window.pixelRatio||1),t.gl)return t.gl;if(t.canvas&&(t.container=t.canvas.parentNode),t.container){if(typeof t.container=="string"){var r=document.querySelector(t.container);if(!r)throw Error("Element "+t.container+" is not found");t.container=r}aze(t.container)?(t.canvas=t.container,t.container=t.canvas.parentNode):t.canvas||(t.canvas=oze(),t.container.appendChild(t.canvas),ize(t))}else if(!t.canvas)if(typeof document!="undefined")t.container=document.body||document.documentElement,t.canvas=oze(),t.container.appendChild(t.canvas),ize(t);else throw Error("Not DOM environment. Use headless-gl.");return t.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(i){try{t.gl=t.canvas.getContext(i,t.attrs)}catch(n){}return t.gl}),t.gl};function ize(e){if(e.container)if(e.container==document.body)document.body.style.width||(e.canvas.width=e.width||e.pixelRatio*window.innerWidth),document.body.style.height||(e.canvas.height=e.height||e.pixelRatio*window.innerHeight);else{var t=e.container.getBoundingClientRect();e.canvas.width=e.width||t.right-t.left,e.canvas.height=e.height||t.bottom-t.top}}function aze(e){return typeof e.getContext=="function"&&"width"in e&&"height"in e}function ABt(e){return typeof e.nodeName=="string"&&typeof e.appendChild=="function"&&typeof e.getBoundingClientRect=="function"}function MBt(e){return typeof e.drawArrays=="function"||typeof e.drawElements=="function"}function oze(){var e=document.createElement("canvas");return e.style.position="absolute",e.style.top=0,e.style.left=0,e}});var fze=ne((vgr,uze)=>{"use strict";var SBt=aX(),EBt=[32,126];uze.exports=kBt;function kBt(e){e=e||{};var t=e.shape?e.shape:e.canvas?[e.canvas.width,e.canvas.height]:[512,512],r=e.canvas||document.createElement("canvas"),i=e.font,n=typeof e.step=="number"?[e.step,e.step]:e.step||[32,32],a=e.chars||EBt;if(i&&typeof i!="string"&&(i=SBt(i)),!Array.isArray(a))a=String(a).split("");else if(a.length===2&&typeof a[0]=="number"&&typeof a[1]=="number"){for(var o=[],s=a[0],l=0;s<=a[1];s++)o[l++]=String.fromCharCode(s);a=o}t=t.slice(),r.width=t[0],r.height=t[1];var u=r.getContext("2d");u.fillStyle="#000",u.fillRect(0,0,r.width,r.height),u.font=i,u.textAlign="center",u.textBaseline="middle",u.fillStyle="#fff";for(var f=n[0]/2,c=n[1]/2,s=0;s<a.length;s++)u.fillText(a[s],f,c),(f+=n[0])>t[0]-n[0]/2&&(f=n[0]/2,c+=n[1]);return r}});var fX=ne(lf=>{"use strict";"use restrict";var uX=32;lf.INT_BITS=uX;lf.INT_MAX=2147483647;lf.INT_MIN=-1<<uX-1;lf.sign=function(e){return(e>0)-(e<0)};lf.abs=function(e){var t=e>>uX-1;return(e^t)-t};lf.min=function(e,t){return t^(e^t)&-(e<t)};lf.max=function(e,t){return e^(e^t)&-(e<t)};lf.isPow2=function(e){return!(e&e-1)&&!!e};lf.log2=function(e){var t,r;return t=(e>65535)<<4,e>>>=t,r=(e>255)<<3,e>>>=r,t|=r,r=(e>15)<<2,e>>>=r,t|=r,r=(e>3)<<1,e>>>=r,t|=r,t|e>>1};lf.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0};lf.popCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24};function cze(e){var t=32;return e&=-e,e&&t--,e&65535&&(t-=16),e&16711935&&(t-=8),e&252645135&&(t-=4),e&858993459&&(t-=2),e&1431655765&&(t-=1),t}lf.countTrailingZeros=cze;lf.nextPow2=function(e){return e+=e===0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1};lf.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e-(e>>>1)};lf.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,e&=15,27030>>>e&1};var u5=new Array(256);(function(e){for(var t=0;t<256;++t){var r=t,i=t,n=7;for(r>>>=1;r;r>>>=1)i<<=1,i|=r&1,--n;e[t]=i<<n&255}})(u5);lf.reverse=function(e){return u5[e&255]<<24|u5[e>>>8&255]<<16|u5[e>>>16&255]<<8|u5[e>>>24&255]};lf.interleave2=function(e,t){return e&=65535,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t&=65535,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1};lf.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=(e|e>>>1)&858993459,e=(e|e>>>2)&252645135,e=(e|e>>>4)&16711935,e=(e|e>>>16)&65535,e<<16>>16};lf.interleave3=function(e,t,r){return e&=1023,e=(e|e<<16)&4278190335,e=(e|e<<8)&251719695,e=(e|e<<4)&3272356035,e=(e|e<<2)&1227133513,t&=1023,t=(t|t<<16)&4278190335,t=(t|t<<8)&251719695,t=(t|t<<4)&3272356035,t=(t|t<<2)&1227133513,e|=t<<1,r&=1023,r=(r|r<<16)&4278190335,r=(r|r<<8)&251719695,r=(r|r<<4)&3272356035,r=(r|r<<2)&1227133513,e|r<<2};lf.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=(e|e>>>2)&3272356035,e=(e|e>>>4)&251719695,e=(e|e>>>8)&4278190335,e=(e|e>>>16)&1023,e<<22>>22};lf.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>cze(e)+1}});var dze=ne((pgr,vze)=>{"use strict";function hze(e,t,r){var i=e[r]|0;if(i<=0)return[];var n=new Array(i),a;if(r===e.length-1)for(a=0;a<i;++a)n[a]=t;else for(a=0;a<i;++a)n[a]=hze(e,t,r+1);return n}function CBt(e,t){var r,i;for(r=new Array(e),i=0;i<e;++i)r[i]=t;return r}function LBt(e,t){switch(typeof t=="undefined"&&(t=0),typeof e){case"number":if(e>0)return CBt(e|0,t);break;case"object":if(typeof e.length=="number")return hze(e,t,0);break}return[]}vze.exports=LBt});var Cze=ne(fs=>{"use strict";var y1=fX(),wh=dze(),pze=e_().Buffer;window.__TYPEDARRAY_POOL||(window.__TYPEDARRAY_POOL={UINT8:wh([32,0]),UINT16:wh([32,0]),UINT32:wh([32,0]),BIGUINT64:wh([32,0]),INT8:wh([32,0]),INT16:wh([32,0]),INT32:wh([32,0]),BIGINT64:wh([32,0]),FLOAT:wh([32,0]),DOUBLE:wh([32,0]),DATA:wh([32,0]),UINT8C:wh([32,0]),BUFFER:wh([32,0])});var PBt=typeof Uint8ClampedArray!="undefined",RBt=typeof BigUint64Array!="undefined",DBt=typeof BigInt64Array!="undefined",Lf=window.__TYPEDARRAY_POOL;Lf.UINT8C||(Lf.UINT8C=wh([32,0]));Lf.BIGUINT64||(Lf.BIGUINT64=wh([32,0]));Lf.BIGINT64||(Lf.BIGINT64=wh([32,0]));Lf.BUFFER||(Lf.BUFFER=wh([32,0]));var gI=Lf.DATA,yI=Lf.BUFFER;fs.free=function(t){if(pze.isBuffer(t))yI[y1.log2(t.length)].push(t);else{if(Object.prototype.toString.call(t)!=="[object ArrayBuffer]"&&(t=t.buffer),!t)return;var r=t.length||t.byteLength,i=y1.log2(r)|0;gI[i].push(t)}};function gze(e){if(e){var t=e.length||e.byteLength,r=y1.log2(t);gI[r].push(e)}}function IBt(e){gze(e.buffer)}fs.freeUint8=fs.freeUint16=fs.freeUint32=fs.freeBigUint64=fs.freeInt8=fs.freeInt16=fs.freeInt32=fs.freeBigInt64=fs.freeFloat32=fs.freeFloat=fs.freeFloat64=fs.freeDouble=fs.freeUint8Clamped=fs.freeDataView=IBt;fs.freeArrayBuffer=gze;fs.freeBuffer=function(t){yI[y1.log2(t.length)].push(t)};fs.malloc=function(t,r){if(r===void 0||r==="arraybuffer")return pd(t);switch(r){case"uint8":return cX(t);case"uint16":return yze(t);case"uint32":return mze(t);case"int8":return xze(t);case"int16":return _ze(t);case"int32":return bze(t);case"float":case"float32":return wze(t);case"double":case"float64":return Tze(t);case"uint8_clamped":return Aze(t);case"bigint64":return Sze(t);case"biguint64":return Mze(t);case"buffer":return kze(t);case"data":case"dataview":return Eze(t);default:return null}return null};function pd(t){var t=y1.nextPow2(t),r=y1.log2(t),i=gI[r];return i.length>0?i.pop():new ArrayBuffer(t)}fs.mallocArrayBuffer=pd;function cX(e){return new Uint8Array(pd(e),0,e)}fs.mallocUint8=cX;function yze(e){return new Uint16Array(pd(2*e),0,e)}fs.mallocUint16=yze;function mze(e){return new Uint32Array(pd(4*e),0,e)}fs.mallocUint32=mze;function xze(e){return new Int8Array(pd(e),0,e)}fs.mallocInt8=xze;function _ze(e){return new Int16Array(pd(2*e),0,e)}fs.mallocInt16=_ze;function bze(e){return new Int32Array(pd(4*e),0,e)}fs.mallocInt32=bze;function wze(e){return new Float32Array(pd(4*e),0,e)}fs.mallocFloat32=fs.mallocFloat=wze;function Tze(e){return new Float64Array(pd(8*e),0,e)}fs.mallocFloat64=fs.mallocDouble=Tze;function Aze(e){return PBt?new Uint8ClampedArray(pd(e),0,e):cX(e)}fs.mallocUint8Clamped=Aze;function Mze(e){return RBt?new BigUint64Array(pd(8*e),0,e):null}fs.mallocBigUint64=Mze;function Sze(e){return DBt?new BigInt64Array(pd(8*e),0,e):null}fs.mallocBigInt64=Sze;function Eze(e){return new DataView(pd(e),0,e)}fs.mallocDataView=Eze;function kze(e){e=y1.nextPow2(e);var t=y1.log2(e),r=yI[t];return r.length>0?r.pop():new pze(e)}fs.mallocBuffer=kze;fs.clearCache=function(){for(var t=0;t<32;++t)Lf.UINT8[t].length=0,Lf.UINT16[t].length=0,Lf.UINT32[t].length=0,Lf.INT8[t].length=0,Lf.INT16[t].length=0,Lf.INT32[t].length=0,Lf.FLOAT[t].length=0,Lf.DOUBLE[t].length=0,Lf.BIGUINT64[t].length=0,Lf.BIGINT64[t].length=0,Lf.UINT8C[t].length=0,gI[t].length=0,yI[t].length=0}});var Pze=ne((ygr,Lze)=>{"use strict";var FBt=Object.prototype.toString;Lze.exports=function(e){var t;return FBt.call(e)==="[object Object]"&&(t=Object.getPrototypeOf(e),t===null||t===Object.getPrototypeOf({}))}});var hX=ne((mgr,Rze)=>{Rze.exports=function(t,r){r||(r=[0,""]),t=String(t);var i=parseFloat(t,10);return r[0]=i,r[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"",r}});var dX=ne((xgr,Ize)=>{"use strict";var qBt=hX();Ize.exports=Dze;var f5=96;function vX(e,t){var r=qBt(getComputedStyle(e).getPropertyValue(t));return r[0]*Dze(r[1],e)}function zBt(e,t){var r=document.createElement("div");r.style["font-size"]="128"+e,t.appendChild(r);var i=vX(r,"font-size")/128;return t.removeChild(r),i}function Dze(e,t){switch(t=t||document.body,e=(e||"px").trim().toLowerCase(),(t===window||t===document)&&(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return zBt(e,t);case"em":return vX(t,"font-size");case"rem":return vX(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return f5;case"cm":return f5/2.54;case"mm":return f5/25.4;case"pt":return f5/72;case"pc":return f5/6}return 1}});var zze=ne((_gr,qze)=>{"use strict";qze.exports=_I;var OBt=_I.canvas=document.createElement("canvas"),mI=OBt.getContext("2d"),Fze=xI([32,126]);_I.createPairs=xI;_I.ascii=Fze;function _I(e,t){Array.isArray(e)&&(e=e.join(", "));var r={},i,n=16,a=.05;t&&(t.length===2&&typeof t[0]=="number"?i=xI(t):Array.isArray(t)?i=t:(t.o?i=xI(t.o):t.pairs&&(i=t.pairs),t.fontSize&&(n=t.fontSize),t.threshold!=null&&(a=t.threshold))),i||(i=Fze),mI.font=n+"px "+e;for(var o=0;o<i.length;o++){var s=i[o],l=mI.measureText(s[0]).width+mI.measureText(s[1]).width,u=mI.measureText(s).width;if(Math.abs(l-u)>n*a){var f=(u-l)/n;r[s]=f*1e3}}return r}function xI(e){for(var t=[],r=e[0];r<=e[1];r++)for(var i=String.fromCharCode(r),n=e[0];n<e[1];n++){var a=String.fromCharCode(n),o=i+a;t.push(o)}return t}});var Uze=ne((bgr,Nze)=>{"use strict";Nze.exports=m1;m1.canvas=document.createElement("canvas");m1.cache={};function m1(o,t){t||(t={}),(typeof o=="string"||Array.isArray(o))&&(t.family=o);var r=Array.isArray(t.family)?t.family.join(", "):t.family;if(!r)throw Error("`family` must be defined");var i=t.size||t.fontSize||t.em||48,n=t.weight||t.fontWeight||"",a=t.style||t.fontStyle||"",o=[a,n,i].join(" ")+"px "+r,s=t.origin||"top";if(m1.cache[r]&&i<=m1.cache[r].em)return Oze(m1.cache[r],s);var l=t.canvas||m1.canvas,u=l.getContext("2d"),f={upper:t.upper!==void 0?t.upper:"H",lower:t.lower!==void 0?t.lower:"x",descent:t.descent!==void 0?t.descent:"p",ascent:t.ascent!==void 0?t.ascent:"h",tittle:t.tittle!==void 0?t.tittle:"i",overshoot:t.overshoot!==void 0?t.overshoot:"O"},c=Math.ceil(i*1.5);l.height=c,l.width=c*.5,u.font=o;var h="H",v={top:0};u.clearRect(0,0,c,c),u.textBaseline="top",u.fillStyle="black",u.fillText(h,0,0);var d=pg(u.getImageData(0,0,c,c));u.clearRect(0,0,c,c),u.textBaseline="bottom",u.fillText(h,0,c);var _=pg(u.getImageData(0,0,c,c));v.lineHeight=v.bottom=c-_+d,u.clearRect(0,0,c,c),u.textBaseline="alphabetic",u.fillText(h,0,c);var T=pg(u.getImageData(0,0,c,c)),p=c-T-1+d;v.baseline=v.alphabetic=p,u.clearRect(0,0,c,c),u.textBaseline="middle",u.fillText(h,0,c*.5);var M=pg(u.getImageData(0,0,c,c));v.median=v.middle=c-M-1+d-c*.5,u.clearRect(0,0,c,c),u.textBaseline="hanging",u.fillText(h,0,c*.5);var b=pg(u.getImageData(0,0,c,c));v.hanging=c-b-1+d-c*.5,u.clearRect(0,0,c,c),u.textBaseline="ideographic",u.fillText(h,0,c);var w=pg(u.getImageData(0,0,c,c));if(v.ideographic=c-w-1+d,f.upper&&(u.clearRect(0,0,c,c),u.textBaseline="top",u.fillText(f.upper,0,0),v.upper=pg(u.getImageData(0,0,c,c)),v.capHeight=v.baseline-v.upper),f.lower&&(u.clearRect(0,0,c,c),u.textBaseline="top",u.fillText(f.lower,0,0),v.lower=pg(u.getImageData(0,0,c,c)),v.xHeight=v.baseline-v.lower),f.tittle&&(u.clearRect(0,0,c,c),u.textBaseline="top",u.fillText(f.tittle,0,0),v.tittle=pg(u.getImageData(0,0,c,c))),f.ascent&&(u.clearRect(0,0,c,c),u.textBaseline="top",u.fillText(f.ascent,0,0),v.ascent=pg(u.getImageData(0,0,c,c))),f.descent&&(u.clearRect(0,0,c,c),u.textBaseline="top",u.fillText(f.descent,0,0),v.descent=Bze(u.getImageData(0,0,c,c))),f.overshoot){u.clearRect(0,0,c,c),u.textBaseline="top",u.fillText(f.overshoot,0,0);var k=Bze(u.getImageData(0,0,c,c));v.overshoot=k-p}for(var x in v)v[x]/=i;return v.em=i,m1.cache[r]=v,Oze(v,s)}function Oze(e,t){var r={};typeof t=="string"&&(t=e[t]);for(var i in e)i!=="em"&&(r[i]=e[i]-t);return r}function pg(e){for(var t=e.height,r=e.data,i=3;i<r.length;i+=4)if(r[i]!==0)return Math.floor((i-3)*.25/t)}function Bze(e){for(var t=e.height,r=e.data,i=r.length-1;i>0;i-=4)if(r[i]!==0)return Math.floor((i-3)*.25/t)}});var Yze=ne((wgr,Gze)=>{"use strict";var rT=nze(),BBt=vg(),NBt=lX(),UBt=lze(),VBt=YW(),pX=n1(),HBt=fze(),x1=Cze(),GBt=G3(),YBt=Pze(),WBt=hX(),XBt=dX(),ZBt=zze(),jBt=of(),KBt=Uze(),JBt=O_(),QBt=fX(),Vze=QBt.nextPow2,Hze=new VBt,wI=!1;document.body&&(bI=document.body.appendChild(document.createElement("div")),bI.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(bI).fontStretch&&(wI=!0),document.body.removeChild(bI));var bI,Qs=function(t){$Bt(t)?(t={regl:t},this.gl=t.regl._gl):this.gl=UBt(t),this.shader=Hze.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=t.regl||NBt({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),Hze.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(YBt(t)?t:{})};Qs.prototype.createShader=function(){var t=this.regl,r=t({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:t.prop("count"),offset:t.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:t.this("sizeBuffer")},width:{offset:0,stride:8,buffer:t.this("sizeBuffer")},char:t.this("charBuffer"),position:t.this("position")},uniforms:{atlasSize:function(n,a){return[a.atlas.width,a.atlas.height]},atlasDim:function(n,a){return[a.atlas.cols,a.atlas.rows]},atlas:function(n,a){return a.atlas.texture},charStep:function(n,a){return a.atlas.step},em:function(n,a){return a.atlas.em},color:t.prop("color"),opacity:t.prop("opacity"),viewport:t.this("viewportArray"),scale:t.this("scale"),align:t.prop("align"),baseline:t.prop("baseline"),translate:t.this("translate"),positionOffset:t.prop("positionOffset")},primitive:"points",viewport:t.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`}),i={};return{regl:t,draw:r,atlas:i}};Qs.prototype.update=function(t){var r=this;if(typeof t=="string")t={text:t};else if(!t)return;t=BBt(t,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0),t.opacity!=null&&(Array.isArray(t.opacity)?this.opacity=t.opacity.map(function(fe){return parseFloat(fe)}):this.opacity=parseFloat(t.opacity)),t.viewport!=null&&(this.viewport=GBt(t.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),t.kerning!=null&&(this.kerning=t.kerning),t.offset!=null&&(typeof t.offset=="number"&&(t.offset=[t.offset,0]),this.positionOffset=JBt(t.offset)),t.direction&&(this.direction=t.direction),t.range&&(this.range=t.range,this.scale=[1/(t.range[2]-t.range[0]),1/(t.range[3]-t.range[1])],this.translate=[-t.range[0],-t.range[1]]),t.scale&&(this.scale=t.scale),t.translate&&(this.translate=t.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!t.font&&(t.font=Qs.baseFontSize+"px sans-serif");var i=!1,n=!1;if(t.font&&(Array.isArray(t.font)?t.font:[t.font]).forEach(function(fe,K){if(typeof fe=="string")try{fe=rT.parse(fe)}catch(ce){fe=rT.parse(Qs.baseFontSize+"px "+fe)}else fe=rT.parse(rT.stringify(fe));var X=rT.stringify({size:Qs.baseFontSize,family:fe.family,stretch:wI?fe.stretch:void 0,variant:fe.variant,weight:fe.weight,style:fe.style}),ae=WBt(fe.size),oe=Math.round(ae[0]*XBt(ae[1]));if(oe!==r.fontSize[K]&&(n=!0,r.fontSize[K]=oe),(!r.font[K]||X!=r.font[K].baseString)&&(i=!0,r.font[K]=Qs.fonts[X],!r.font[K])){var me=fe.family.join(", "),xe=[fe.style];fe.style!=fe.variant&&xe.push(fe.variant),fe.variant!=fe.weight&&xe.push(fe.weight),wI&&fe.weight!=fe.stretch&&xe.push(fe.stretch),r.font[K]={baseString:X,family:me,weight:fe.weight,stretch:fe.stretch,style:fe.style,variant:fe.variant,width:{},kerning:{},metrics:KBt(me,{origin:"top",fontSize:Qs.baseFontSize,fontStyle:xe.join(" ")})},Qs.fonts[X]=r.font[K]}}),(i||n)&&this.font.forEach(function(fe,K){var X=rT.stringify({size:r.fontSize[K],family:fe.family,stretch:wI?fe.stretch:void 0,variant:fe.variant,weight:fe.weight,style:fe.style});if(r.fontAtlas[K]=r.shader.atlas[X],!r.fontAtlas[K]){var ae=fe.metrics;r.shader.atlas[X]=r.fontAtlas[K]={fontString:X,step:Math.ceil(r.fontSize[K]*ae.bottom*.5)*2,em:r.fontSize[K],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:r.regl.texture()}}t.text==null&&(t.text=r.text)}),typeof t.text=="string"&&t.position&&t.position.length>2){for(var a=Array(t.position.length*.5),o=0;o<a.length;o++)a[o]=t.text;t.text=a}var s;if(t.text!=null||i){if(this.textOffsets=[0],Array.isArray(t.text)){this.count=t.text[0].length,this.counts=[this.count];for(var l=1;l<t.text.length;l++)this.textOffsets[l]=this.textOffsets[l-1]+t.text[l-1].length,this.count+=t.text[l].length,this.counts.push(t.text[l].length);this.text=t.text.join("")}else this.text=t.text,this.count=this.text.length,this.counts=[this.count];s=[],this.font.forEach(function(fe,K){Qs.atlasContext.font=fe.baseString;for(var X=r.fontAtlas[K],ae=0;ae<r.text.length;ae++){var oe=r.text.charAt(ae);if(X.ids[oe]==null&&(X.ids[oe]=X.chars.length,X.chars.push(oe),s.push(oe)),fe.width[oe]==null&&(fe.width[oe]=Qs.atlasContext.measureText(oe).width/Qs.baseFontSize,r.kerning)){var me=[];for(var xe in fe.width)me.push(xe+oe,oe+xe);jBt(fe.kerning,ZBt(fe.family,{pairs:me}))}}})}if(t.position)if(t.position.length>2){for(var u=!t.position[0].length,f=x1.mallocFloat(this.count*2),c=0,h=0;c<this.counts.length;c++){var v=this.counts[c];if(u)for(var d=0;d<v;d++)f[h++]=t.position[c*2],f[h++]=t.position[c*2+1];else for(var _=0;_<v;_++)f[h++]=t.position[c][0],f[h++]=t.position[c][1]}this.position.call?this.position({type:"float",data:f}):this.position=this.regl.buffer({type:"float",data:f}),x1.freeFloat(f)}else this.position.destroy&&this.position.destroy(),this.position={constant:t.position};if(t.text||i){var T=x1.mallocUint8(this.count),p=x1.mallocFloat(this.count*2);this.textWidth=[];for(var M=0,b=0;M<this.counts.length;M++){for(var w=this.counts[M],k=this.font[M]||this.font[0],x=this.fontAtlas[M]||this.fontAtlas[0],E=0;E<w;E++){var S=this.text.charAt(b),g=this.text.charAt(b-1);if(T[b]=x.ids[S],p[b*2]=k.width[S],E){var C=p[b*2-2],A=p[b*2],P=p[b*2-1],D=P+C*.5+A*.5;if(this.kerning){var z=k.kerning[g+S];z&&(D+=z*.001)}p[b*2+1]=D}else p[b*2+1]=p[b*2]*.5;b++}this.textWidth.push(p.length?p[b*2-2]*.5+p[b*2-1]:0)}t.align||(t.align=this.align),this.charBuffer({data:T,type:"uint8",usage:"stream"}),this.sizeBuffer({data:p,type:"float",usage:"stream"}),x1.freeUint8(T),x1.freeFloat(p),s.length&&this.font.forEach(function(fe,K){var X=r.fontAtlas[K],ae=X.step,oe=Math.floor(Qs.maxAtlasSize/ae),me=Math.min(oe,X.chars.length),xe=Math.ceil(X.chars.length/me),ce=Vze(me*ae),ie=Vze(xe*ae);X.width=ce,X.height=ie,X.rows=xe,X.cols=me,X.em&&X.texture({data:HBt({canvas:Qs.atlasCanvas,font:X.fontString,chars:X.chars,shape:[ce,ie],step:[ae,ae]})})})}if(t.align&&(this.align=t.align,this.alignOffset=this.textWidth.map(function(fe,K){var X=Array.isArray(r.align)?r.align.length>1?r.align[K]:r.align[0]:r.align;if(typeof X=="number")return X;switch(X){case"right":case"end":return-fe;case"center":case"centre":case"middle":return-fe*.5}return 0})),this.baseline==null&&t.baseline==null&&(t.baseline=0),t.baseline!=null&&(this.baseline=t.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(fe,K){var X=(r.font[K]||r.font[0]).metrics,ae=0;return ae+=X.bottom*.5,typeof fe=="number"?ae+=fe-X.baseline:ae+=-X[fe],ae*=-1,ae})),t.color!=null)if(t.color||(t.color="transparent"),typeof t.color=="string"||!isNaN(t.color))this.color=pX(t.color,"uint8");else{var O;if(typeof t.color[0]=="number"&&t.color.length>this.counts.length){var V=t.color.length;O=x1.mallocUint8(V);for(var B=(t.color.subarray||t.color.slice).bind(t.color),F=0;F<V;F+=4)O.set(pX(B(F,F+4),"uint8"),F)}else{var N=t.color.length;O=x1.mallocUint8(N*4);for(var Z=0;Z<N;Z++)O.set(pX(t.color[Z]||0,"uint8"),Z*4)}this.color=O}if(t.position||t.text||t.color||t.baseline||t.align||t.font||t.offset||t.opacity){var J=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(J){var re=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(re);for(var ue=0;ue<this.batch.length;ue++)this.batch[ue]={count:this.counts.length>1?this.counts[ue]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[ue]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(ue*4,ue*4+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[ue]:this.opacity,baseline:this.baselineOffset[ue]!=null?this.baselineOffset[ue]:this.baselineOffset[0],align:this.align?this.alignOffset[ue]!=null?this.alignOffset[ue]:this.alignOffset[0]:0,atlas:this.fontAtlas[ue]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(ue*2,ue*2+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}};Qs.prototype.destroy=function(){};Qs.prototype.kerning=!0;Qs.prototype.position={constant:new Float32Array(2)};Qs.prototype.translate=null;Qs.prototype.scale=null;Qs.prototype.font=null;Qs.prototype.text="";Qs.prototype.positionOffset=[0,0];Qs.prototype.opacity=1;Qs.prototype.color=new Uint8Array([0,0,0,255]);Qs.prototype.alignOffset=[0,0];Qs.maxAtlasSize=1024;Qs.atlasCanvas=document.createElement("canvas");Qs.atlasContext=Qs.atlasCanvas.getContext("2d",{alpha:!1});Qs.baseFontSize=64;Qs.fonts={};function $Bt(e){return typeof e=="function"&&e._gl&&e.prop&&e.texture&&e.buffer}Gze.exports=Qs});var TI=ne((Tgr,Wze)=>{"use strict";var eNt=nD(),tNt=lX();Wze.exports=function(t,r,i){var n=t._fullLayout,a=!0;return n._glcanvas.each(function(o){if(o.regl){o.regl.preloadCachedCode(i);return}if(!(o.pick&&!n._has("parcoords"))){try{o.regl=tNt({canvas:this,attributes:{antialias:!o.pick,preserveDrawingBuffer:!0},pixelRatio:t._context.plotGlPixelRatio||window.devicePixelRatio,extensions:r||[],cachedCode:i||{}})}catch(s){a=!1}o.regl||(a=!1),a&&this.addEventListener("webglcontextlost",function(s){t&&t.emit&&t.emit("plotly_webglcontextlost",{event:s,layer:o.key})},!1)}}),a||eNt({container:n._glcontainer.node()}),a}});var mX=ne((yX,Jze)=>{"use strict";var Xze=yW(),Zze=ZW(),rNt=Oqe(),jze=Yze(),gX=Wt(),nNt=r0().selectMode,iNt=TI(),aNt=js(),oNt=lB(),sNt=vW().styleTextSelection,Kze={};function lNt(e,t,r,i){var n=e._size,a=e.width*i,o=e.height*i,s=n.l*i,l=n.b*i,u=n.r*i,f=n.t*i,c=n.w*i,h=n.h*i;return[s+t.domain[0]*c,l+r.domain[0]*h,a-u-(1-t.domain[1])*c,o-f-(1-r.domain[1])*h]}var yX=Jze.exports=function(t,r,i){if(i.length){var n=t._fullLayout,a=r._scene,o=r.xaxis,s=r.yaxis,l,u;if(a){var f=iNt(t,["ANGLE_instanced_arrays","OES_element_index_uint"],Kze);if(!f){a.init();return}var c=a.count,h=n._glcanvas.data()[0].regl;if(oNt(t,r,i),a.dirty){if((a.line2d||a.error2d)&&!(a.scatter2d||a.fill2d||a.glText)&&h.clear({}),a.error2d===!0&&(a.error2d=rNt(h)),a.line2d===!0&&(a.line2d=Zze(h)),a.scatter2d===!0&&(a.scatter2d=Xze(h)),a.fill2d===!0&&(a.fill2d=Zze(h)),a.glText===!0)for(a.glText=new Array(c),l=0;l<c;l++)a.glText[l]=new jze(h);if(a.glText){if(c>a.glText.length){var v=c-a.glText.length;for(l=0;l<v;l++)a.glText.push(new jze(h))}else if(c<a.glText.length){var d=a.glText.length-c,_=a.glText.splice(c,d);_.forEach(function(N){N.destroy()})}for(l=0;l<c;l++)a.glText[l].update(a.textOptions[l])}if(a.line2d&&(a.line2d.update(a.lineOptions),a.lineOptions=a.lineOptions.map(function(N){if(N&&N.positions){for(var Z=N.positions,J=0;J<Z.length&&(isNaN(Z[J])||isNaN(Z[J+1]));)J+=2;for(var re=Z.length-2;re>J&&(isNaN(Z[re])||isNaN(Z[re+1]));)re-=2;N.positions=Z.slice(J,re+2)}return N}),a.line2d.update(a.lineOptions)),a.error2d){var T=(a.errorXOptions||[]).concat(a.errorYOptions||[]);a.error2d.update(T)}a.scatter2d&&a.scatter2d.update(a.markerOptions),a.fillOrder=gX.repeat(null,c),a.fill2d&&(a.fillOptions=a.fillOptions.map(function(N,Z){var J=i[Z];if(!(!N||!J||!J[0]||!J[0].trace)){var re=J[0],ue=re.trace,fe=re.t,K=a.lineOptions[Z],X,ae,oe=[];ue._ownfill&&oe.push(Z),ue._nexttrace&&oe.push(Z+1),oe.length&&(a.fillOrder[Z]=oe);var me=[],xe=K&&K.positions||fe.positions,ce,ie;if(ue.fill==="tozeroy"){for(ce=0;ce<xe.length&&isNaN(xe[ce+1]);)ce+=2;for(ie=xe.length-2;ie>ce&&isNaN(xe[ie+1]);)ie-=2;xe[ce+1]!==0&&(me=[xe[ce],0]),me=me.concat(xe.slice(ce,ie+2)),xe[ie+1]!==0&&(me=me.concat([xe[ie],0]))}else if(ue.fill==="tozerox"){for(ce=0;ce<xe.length&&isNaN(xe[ce]);)ce+=2;for(ie=xe.length-2;ie>ce&&isNaN(xe[ie]);)ie-=2;xe[ce]!==0&&(me=[0,xe[ce+1]]),me=me.concat(xe.slice(ce,ie+2)),xe[ie]!==0&&(me=me.concat([0,xe[ie+1]]))}else if(ue.fill==="toself"||ue.fill==="tonext"){for(me=[],X=0,N.splitNull=!0,ae=0;ae<xe.length;ae+=2)(isNaN(xe[ae])||isNaN(xe[ae+1]))&&(me=me.concat(xe.slice(X,ae)),me.push(xe[X],xe[X+1]),me.push(null,null),X=ae+2);me=me.concat(xe.slice(X)),X&&me.push(xe[X],xe[X+1])}else{var ge=ue._nexttrace;if(ge){var le=a.lineOptions[Z+1];if(le){var we=le.positions;if(ue.fill==="tonexty"){for(me=xe.slice(),Z=Math.floor(we.length/2);Z--;){var Re=we[Z*2],qe=we[Z*2+1];isNaN(Re)||isNaN(qe)||me.push(Re,qe)}N.fill=ge.fillcolor}}}}if(ue._prevtrace&&ue._prevtrace.fill==="tonext"){var et=a.lineOptions[Z-1].positions,Pe=me.length/2;X=Pe;var Ie=[X];for(ae=0;ae<et.length;ae+=2)(isNaN(et[ae])||isNaN(et[ae+1]))&&(Ie.push(ae/2+Pe+1),X=ae+2);me=me.concat(et),N.hole=Ie}return N.fillmode=ue.fill,N.opacity=ue.opacity,N.positions=me,N}}),a.fill2d.update(a.fillOptions))}var p=n.dragmode,M=nNt(p),b=n.clickmode.indexOf("select")>-1;for(l=0;l<c;l++){var w=i[l][0],k=w.trace,x=w.t,E=x.index,S=k._length,g=x.x,C=x.y;if(k.selectedpoints||M||b){if(M||(M=!0),k.selectedpoints){var A=a.selectBatch[E]=gX.selIndices2selPoints(k),P={};for(u=0;u<A.length;u++)P[A[u]]=1;var D=[];for(u=0;u<S;u++)P[u]||D.push(u);a.unselectBatch[E]=D}var z=x.xpx=new Array(S),O=x.ypx=new Array(S);for(u=0;u<S;u++)z[u]=o.c2p(g[u]),O[u]=s.c2p(C[u])}else x.xpx=x.ypx=null}if(M){if(a.select2d||(a.select2d=Xze(n._glcanvas.data()[1].regl)),a.scatter2d){var V=new Array(c);for(l=0;l<c;l++)V[l]=a.selectBatch[l].length||a.unselectBatch[l].length?a.markerUnselectedOptions[l]:{};a.scatter2d.update(V)}a.select2d&&(a.select2d.update(a.markerOptions),a.select2d.update(a.markerSelectedOptions)),a.glText&&i.forEach(function(N){var Z=((N||[])[0]||{}).trace||{};aNt.hasText(Z)&&sNt(N)})}else a.scatter2d&&a.scatter2d.update(a.markerOptions);var B={viewport:lNt(n,o,s,t._context.plotGlPixelRatio),range:[(o._rl||o.range)[0],(s._rl||s.range)[0],(o._rl||o.range)[1],(s._rl||s.range)[1]]},F=gX.repeat(B,a.count);a.fill2d&&a.fill2d.update(F),a.line2d&&a.line2d.update(F),a.error2d&&a.error2d.update(F.concat(F)),a.scatter2d&&a.scatter2d.update(F),a.select2d&&a.select2d.update(F),a.glText&&a.glText.forEach(function(N){N.update(B)})}}};yX.reglPrecompiled=Kze});var eOe=ne((Agr,$ze)=>{"use strict";var Qze=xIe();Qze.plot=mX();$ze.exports=Qze});var rOe=ne((Mgr,tOe)=>{"use strict";tOe.exports=eOe()});var xX=ne((Sgr,oOe)=>{"use strict";var uNt=cu(),aOe=Ps(),nOe=kl().axisHoverFormat,fNt=Ba().hovertemplateAttrs,c5=YE(),cNt=wf().idRegex,hNt=So().templatedArray,nT=oa().extendFlat,by=uNt.marker,vNt=by.line,dNt=nT(aOe("marker.line",{editTypeOverride:"calc"}),{width:nT({},vNt.width,{editType:"calc"}),editType:"calc"}),AI=nT(aOe("marker"),{symbol:by.symbol,angle:by.angle,size:nT({},by.size,{editType:"markerSize"}),sizeref:by.sizeref,sizemin:by.sizemin,sizemode:by.sizemode,opacity:by.opacity,colorbar:by.colorbar,line:dNt,editType:"calc"});AI.color.editType=AI.cmin.editType=AI.cmax.editType="style";function iOe(e){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:cNt[e],editType:"plot"}}}oOe.exports={dimensions:hNt("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:nT({},c5.text,{}),hovertext:nT({},c5.hovertext,{}),hovertemplate:fNt(),xhoverformat:nOe("x"),yhoverformat:nOe("y"),marker:AI,xaxes:iOe("x"),yaxes:iOe("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:c5.selected.marker,editType:"calc"},unselected:{marker:c5.unselected.marker,editType:"calc"},opacity:c5.opacity}});var MI=ne((Egr,sOe)=>{"use strict";sOe.exports=function(e,t,r,i){i||(i=1/0);var n,a;for(n=0;n<t.length;n++)a=t[n],a.visible&&(i=Math.min(i,a[r].length));for(i===1/0&&(i=0),e._length=i,n=0;n<t.length;n++)a=t[n],a.visible&&(a._length=i);return i}});var fOe=ne((kgr,uOe)=>{"use strict";var _X=Wt(),pNt=ch(),lOe=xX(),gNt=js(),yNt=dp(),mNt=MI(),xNt=BD().isOpenSymbol;uOe.exports=function(t,r,i,n){function a(v,d){return _X.coerce(t,r,lOe,v,d)}var o=pNt(t,r,{name:"dimensions",handleItemDefaults:_Nt}),s=a("diagonal.visible"),l=a("showupperhalf"),u=a("showlowerhalf"),f=mNt(r,o,"values");if(!f||!s&&!l&&!u){r.visible=!1;return}a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),yNt(t,r,i,n,a,{noAngleRef:!0,noStandOff:!0});var c=xNt(r.marker.symbol),h=gNt.isBubble(r);a("marker.line.width",c||h?1:0),bNt(t,r,n,a),_X.coerceSelectionMarkerOpacity(r,a)};function _Nt(e,t){function r(n,a){return _X.coerce(e,t,lOe.dimensions,n,a)}r("label");var i=r("values");i&&i.length?r("visible"):t.visible=!1,r("axis.type"),r("axis.matches")}function bNt(e,t,r,i){var n=t.dimensions,a=n.length,o=t.showupperhalf,s=t.showlowerhalf,l=t.diagonal.visible,u,f,c=new Array(a),h=new Array(a);for(u=0;u<a;u++){var v=u?u+1:"";c[u]="x"+v,h[u]="y"+v}var d=i("xaxes",c),_=i("yaxes",h),T=t._diag=new Array(a);t._xaxes={},t._yaxes={};var p=[],M=[];function b(P,D,z,O){if(P){var V=P.charAt(0),B=r._splomAxes[V];if(t["_"+V+"axes"][P]=1,O.push(P),!(P in B)){var F=B[P]={};z&&(F.label=z.label||"",z.visible&&z.axis&&(z.axis.type&&(F.type=z.axis.type),z.axis.matches&&(F.matches=D)))}}}var w=!l&&!s,k=!l&&!o;for(t._axesDim={},u=0;u<a;u++){var x=n[u],E=u===0,S=u===a-1,g=E&&w||S&&k?void 0:d[u],C=E&&k||S&&w?void 0:_[u];b(g,C,x,p),b(C,g,x,M),T[u]=[g,C],t._axesDim[g]=u,t._axesDim[C]=u}for(u=0;u<p.length;u++)for(f=0;f<M.length;f++){var A=p[u]+M[f];(u>f&&o||u<f&&s||u===f&&(l||!s||!o))&&(r._splomSubplots[A]=1)}(!s||!l&&o&&s)&&(r._splomGridDflt.xside="bottom",r._splomGridDflt.yside="left")}});var vOe=ne((Cgr,hOe)=>{"use strict";var cOe=Wt();hOe.exports=function(t,r){var i=t._fullLayout,n=r.uid,a=i._splomScenes;a||(a=i._splomScenes={});var o={dirty:!0,selectBatch:[],unselectBatch:[]},s={matrix:!1,selectBatch:[],unselectBatch:[]},l=a[r.uid];return l||(l=a[n]=cOe.extendFlat({},o,s),l.draw=function(){l.matrix&&l.matrix.draw&&(l.selectBatch.length||l.unselectBatch.length?l.matrix.draw(l.unselectBatch,l.selectBatch):l.matrix.draw()),l.dirty=!1},l.destroy=function(){l.matrix&&l.matrix.destroy&&l.matrix.destroy(),l.matrixOptions=null,l.selectBatch=null,l.unselectBatch=null,l=null}),l.dirty||cOe.extendFlat(l,o),l}});var gOe=ne((Lgr,pOe)=>{"use strict";var bX=Wt(),SI=zl(),wNt=yp().calcMarkerSize,TNt=yp().calcAxisExpansion,ANt=pp(),dOe=U_().markerSelection,MNt=U_().markerStyle,SNt=vOe(),ENt=$a().BADNUM,kNt=h1().TOO_MANY_POINTS;pOe.exports=function(t,r){var i=r.dimensions,n=r._length,a={},o=a.cdata=[],s=a.data=[],l=r._visibleDims=[],u,f,c,h,v;function d(b,w){for(var k=b.makeCalcdata({v:w.values,vcalendar:r.calendar},"v"),x=0;x<k.length;x++)k[x]=k[x]===ENt?NaN:k[x];o.push(k),s.push(b.type==="log"?bX.simpleMap(k,b.c2l):k)}for(u=0;u<i.length;u++)if(c=i[u],c.visible){if(h=SI.getFromId(t,r._diag[u][0]),v=SI.getFromId(t,r._diag[u][1]),h&&v&&h.type!==v.type){bX.log("Skipping splom dimension "+u+" with conflicting axis types");continue}h?(d(h,c),v&&v.type==="category"&&(v._categories=h._categories.slice())):d(v,c),l.push(u)}ANt(t,r),bX.extendFlat(a,MNt(t,r));var _=o.length,T=_*n>kNt,p;for(T?p=a.sizeAvg||Math.max(a.size,3):p=wNt(r,n),f=0;f<l.length;f++)u=l[f],c=i[u],h=SI.getFromId(t,r._diag[u][0])||{},v=SI.getFromId(t,r._diag[u][1])||{},TNt(t,r,h,v,o[f],o[f],p);var M=SNt(t,r);return M.matrix||(M.matrix=!0),M.matrixOptions=a,M.selectedOptions=dOe(t,r,r.selected),M.unselectedOptions=dOe(t,r,r.unselected),[{x:!1,y:!1,t:{},trace:r}]}});var mOe=ne((yOe,h5)=>{(function(){var e,t,r,i,n,a;typeof performance!="undefined"&&performance!==null&&performance.now?h5.exports=function(){return performance.now()}:typeof process!="undefined"&&process!==null&&process.hrtime?(h5.exports=function(){return(e()-n)/1e6},t=process.hrtime,e=function(){var o;return o=t(),o[0]*1e9+o[1]},i=e(),a=process.uptime()*1e9,n=i-a):Date.now?(h5.exports=function(){return Date.now()-r},r=Date.now()):(h5.exports=function(){return new Date().getTime()-r},r=new Date().getTime())}).call(yOe)});var _Oe=ne((Pgr,CI)=>{var CNt=mOe(),wy=window,EI=["moz","webkit"],aT="AnimationFrame",oT=wy["request"+aT],v5=wy["cancel"+aT]||wy["cancelRequest"+aT];for(iT=0;!oT&&iT<EI.length;iT++)oT=wy[EI[iT]+"Request"+aT],v5=wy[EI[iT]+"Cancel"+aT]||wy[EI[iT]+"CancelRequest"+aT];var iT;(!oT||!v5)&&(kI=0,wX=0,_1=[],xOe=1e3/60,oT=function(e){if(_1.length===0){var t=CNt(),r=Math.max(0,xOe-(t-kI));kI=r+t,setTimeout(function(){var i=_1.slice(0);_1.length=0;for(var n=0;n<i.length;n++)if(!i[n].cancelled)try{i[n].callback(kI)}catch(a){setTimeout(function(){throw a},0)}},Math.round(r))}return _1.push({handle:++wX,callback:e,cancelled:!1}),wX},v5=function(e){for(var t=0;t<_1.length;t++)_1[t].handle===e&&(_1[t].cancelled=!0)});var kI,wX,_1,xOe;CI.exports=function(e){return oT.call(wy,e)};CI.exports.cancel=function(){v5.apply(wy,arguments)};CI.exports.polyfill=function(e){e||(e=wy),e.requestAnimationFrame=oT,e.cancelAnimationFrame=v5}});var wOe=ne((Rgr,bOe)=>{bOe.exports=function(t,r){var i=typeof t=="number",n=typeof r=="number";i&&!n?(r=t,t=0):!i&&!n&&(t=0,r=0),t=t|0,r=r|0;var a=r-t;if(a<0)throw new Error("array length must be positive");for(var o=new Array(a),s=0,l=t;s<a;s++,l++)o[s]=l;return o}});var SOe=ne((Dgr,MOe)=>{"use strict";var LNt=yW(),PNt=vg(),RNt=z_(),TOe=_Oe(),DNt=wOe(),TX=G3(),INt=O_();MOe.exports=b1;function b1(e,t){if(!(this instanceof b1))return new b1(e,t);this.traces=[],this.passes={},this.regl=e,this.scatter=LNt(e),this.canvas=this.scatter.canvas}b1.prototype.render=function(...e){return e.length&&this.update(...e),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=TOe(()=>{this.draw(),this.dirty=!0,this.planned=null})):(this.draw(),this.dirty=!0,TOe(()=>{this.dirty=!1})),this)};b1.prototype.update=function(...e){if(!e.length)return;for(let i=0;i<e.length;i++)this.updateItem(i,e[i]);this.traces=this.traces.filter(Boolean);let t=[],r=0;for(let i=0;i<this.traces.length;i++){let n=this.traces[i],a=this.traces[i].passes;for(let o=0;o<a.length;o++)t.push(this.passes[a[o]]);n.passOffset=r,r+=n.passes.length}return this.scatter.update(...t),this};b1.prototype.updateItem=function(e,t){let{regl:r}=this;if(t===null)return this.traces[e]=null,this;if(!t)return this;let i=PNt(t,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),n=this.traces[e]||(this.traces[e]={id:e,buffer:r.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:TX([r._gl.drawingBufferWidth,r._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(i.color!=null&&(n.color=i.color),i.size!=null&&(n.size=i.size),i.marker!=null&&(n.marker=i.marker),i.borderColor!=null&&(n.borderColor=i.borderColor),i.borderSize!=null&&(n.borderSize=i.borderSize),i.opacity!=null&&(n.opacity=i.opacity),i.viewport&&(n.viewport=TX(i.viewport)),i.diagonal!=null&&(n.diagonal=i.diagonal),i.upper!=null&&(n.upper=i.upper),i.lower!=null&&(n.lower=i.lower),i.data){n.buffer(INt(i.data)),n.columns=i.data.length,n.count=i.data[0].length,n.bounds=[];for(let _=0;_<n.columns;_++)n.bounds[_]=RNt(i.data[_],1)}let a;i.range&&(n.range=i.range,a=n.range&&typeof n.range[0]!="number"),i.domain&&(n.domain=i.domain);let o=!1;i.padding!=null&&(Array.isArray(i.padding)&&i.padding.length===n.columns&&typeof i.padding[i.padding.length-1]=="number"?(n.padding=i.padding.map(AOe),o=!0):n.padding=AOe(i.padding));let s=n.columns,l=n.count,u=n.viewport.width,f=n.viewport.height,c=n.viewport.x,h=n.viewport.y,v=u/s,d=f/s;n.passes=[];for(let _=0;_<s;_++)for(let T=0;T<s;T++){if(!n.diagonal&&T===_||!n.upper&&_>T||!n.lower&&_<T)continue;let p=FNt(n.id,_,T),M=this.passes[p]||(this.passes[p]={});if(i.data&&(i.transpose?M.positions={x:{buffer:n.buffer,offset:T,count:l,stride:s},y:{buffer:n.buffer,offset:_,count:l,stride:s}}:M.positions={x:{buffer:n.buffer,offset:T*l,count:l},y:{buffer:n.buffer,offset:_*l,count:l}},M.bounds=LI(n.bounds,_,T)),i.domain||i.viewport||i.data){let b=o?LI(n.padding,_,T):n.padding;if(n.domain){let[w,k,x,E]=LI(n.domain,_,T);M.viewport=[c+w*u+b[0],h+k*f+b[1],c+x*u-b[2],h+E*f-b[3]]}else M.viewport=[c+T*v+v*b[0],h+_*d+d*b[1],c+(T+1)*v-v*b[2],h+(_+1)*d-d*b[3]]}i.color&&(M.color=n.color),i.size&&(M.size=n.size),i.marker&&(M.marker=n.marker),i.borderSize&&(M.borderSize=n.borderSize),i.borderColor&&(M.borderColor=n.borderColor),i.opacity&&(M.opacity=n.opacity),i.range&&(M.range=a?LI(n.range,_,T):n.range||M.bounds),n.passes.push(p)}return this};b1.prototype.draw=function(...e){if(!e.length)this.scatter.draw();else{let t=[];for(let r=0;r<e.length;r++)if(typeof e[r]=="number"){let{passes:i,passOffset:n}=this.traces[e[r]];t.push(...DNt(n,n+i.length))}else if(e[r].length){let i=e[r],{passes:n,passOffset:a}=this.traces[r];n=n.map((o,s)=>{t[a+s]=i})}this.scatter.draw(...t)}return this};b1.prototype.destroy=function(){return this.traces.forEach(e=>{e.buffer&&e.buffer.destroy&&e.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};function FNt(e,t,r){let i=e.id!=null?e.id:e,n=t,a=r;return i<<16|(n&255)<<8|a&255}function LI(e,t,r){let i,n,a,o,s,l,u,f,c=e[t],h=e[r];return c.length>2?(i=c[0],a=c[2],n=c[1],o=c[3]):c.length?(i=n=c[0],a=o=c[1]):(i=c.x,n=c.y,a=c.x+c.width,o=c.y+c.height),h.length>2?(s=h[0],u=h[2],l=h[1],f=h[3]):h.length?(s=l=h[0],u=f=h[1]):(s=h.x,l=h.y,u=h.x+h.width,f=h.y+h.height),[s,n,u,o]}function AOe(e){if(typeof e=="number")return[e,e,e,e];if(e.length===2)return[e[0],e[1],e[0],e[1]];{let t=TX(e);return[t.x,t.y,t.x+t.width,t.y+t.height]}}});var kOe=ne((Igr,EOe)=>{"use strict";var qNt=SOe(),AX=Wt(),PI=zl(),zNt=r0().selectMode;EOe.exports=function(t,r,i){if(i.length)for(var n=0;n<i.length;n++)ONt(t,i[n][0])};function ONt(e,t){var r=e._fullLayout,i=r._size,n=t.trace,a=t.t,o=r._splomScenes[n.uid],s=o.matrixOptions,l=s.cdata,u=r._glcanvas.data()[0].regl,f=r.dragmode,c,h,v,d,_;if(l.length!==0){s.lower=n.showupperhalf,s.upper=n.showlowerhalf,s.diagonal=n.diagonal.visible;var T=n._visibleDims,p=l.length,M=o.viewOpts={};for(M.ranges=new Array(p),M.domains=new Array(p),_=0;_<T.length;_++){v=T[_];var b=M.ranges[_]=new Array(4),w=M.domains[_]=new Array(4);c=PI.getFromId(e,n._diag[v][0]),c&&(b[0]=c._rl[0],b[2]=c._rl[1],w[0]=c.domain[0],w[2]=c.domain[1]),h=PI.getFromId(e,n._diag[v][1]),h&&(b[1]=h._rl[0],b[3]=h._rl[1],w[1]=h.domain[0],w[3]=h.domain[1])}var k=e._context.plotGlPixelRatio,x=i.l*k,E=i.b*k,S=i.w*k,g=i.h*k;M.viewport=[x,E,S+x,g+E],o.matrix===!0&&(o.matrix=qNt(u));var C=r.clickmode.indexOf("select")>-1,A=zNt(f)||!!n.selectedpoints||C,P=!0;if(A){var D=n._length;if(n.selectedpoints){o.selectBatch=n.selectedpoints;var z=n.selectedpoints,O={};for(v=0;v<z.length;v++)O[z[v]]=!0;var V=[];for(v=0;v<D;v++)O[v]||V.push(v);o.unselectBatch=V}var B=a.xpx=new Array(p),F=a.ypx=new Array(p);for(_=0;_<T.length;_++){if(v=T[_],c=PI.getFromId(e,n._diag[v][0]),c)for(B[_]=new Array(D),d=0;d<D;d++)B[_][d]=c.c2p(l[_][d]);if(h=PI.getFromId(e,n._diag[v][1]),h)for(F[_]=new Array(D),d=0;d<D;d++)F[_][d]=h.c2p(l[_][d])}if(o.selectBatch.length||o.unselectBatch.length){var N=AX.extendFlat({},s,o.unselectedOptions,M),Z=AX.extendFlat({},s,o.selectedOptions,M);o.matrix.update(N,Z),P=!1}}else a.xpx=a.ypx=null;if(P){var J=AX.extendFlat({},s,M);o.matrix.update(J,null)}}}});var MX=ne(COe=>{"use strict";COe.getDimIndex=function(t,r){for(var i=r._id,n=i.charAt(0),a={x:0,y:1}[n],o=t._visibleDims,s=0;s<o.length;s++){var l=o[s];if(t._diag[l][a]===i)return s}return!1}});var ROe=ne((qgr,POe)=>{"use strict";var LOe=MX(),BNt=OD().calcHover;function NNt(e,t,r){var i=e.cd,n=i[0].trace,a=e.scene,o=a.matrixOptions.cdata,s=e.xa,l=e.ya,u=s.c2p(t),f=l.c2p(r),c=e.distance,h=LOe.getDimIndex(n,s),v=LOe.getDimIndex(n,l);if(h===!1||v===!1)return[e];for(var d=o[h],_=o[v],T,p,M=c,b=0;b<d.length;b++){var w=d[b],k=_[b],x=s.c2p(w)-u,E=l.c2p(k)-f,S=Math.sqrt(x*x+E*E);S<M&&(M=p=S,T=b)}return e.index=T,e.distance=M,e.dxy=p,T===void 0?[e]:[BNt(e,d,_,n)]}POe.exports={hoverPoints:NNt}});var OOe=ne((zgr,zOe)=>{"use strict";var qOe=Wt(),DOe=qOe.pushUnique,IOe=js(),FOe=MX();zOe.exports=function(t,r){var i=t.cd,n=i[0].trace,a=i[0].t,o=t.scene,s=o.matrixOptions.cdata,l=t.xaxis,u=t.yaxis,f=[];if(!o)return f;var c=!IOe.hasMarkers(n)&&!IOe.hasText(n);if(n.visible!==!0||c)return f;var h=FOe.getDimIndex(n,l),v=FOe.getDimIndex(n,u);if(h===!1||v===!1)return f;var d=a.xpx[h],_=a.ypx[v],T=s[h],p=s[v],M=(t.scene.selectBatch||[]).slice(),b=[];if(r!==!1&&!r.degenerate)for(var w=0;w<T.length;w++)r.contains([d[w],_[w]],null,w,t)?(f.push({pointNumber:w,x:T[w],y:p[w]}),DOe(M,w)):M.indexOf(w)!==-1?DOe(M,w):b.push(w);var k=o.matrixOptions;return!M.length&&!b.length?o.matrix.update(k,null):!o.selectBatch.length&&!o.unselectBatch.length&&o.matrix.update(o.unselectedOptions,qOe.extendFlat({},k,o.selectedOptions,o.viewOpts)),o.selectBatch=M,o.unselectBatch=b,f}});var UOe=ne((Ogr,NOe)=>{"use strict";var BOe=Wt(),UNt=pp(),VNt=U_().markerStyle;NOe.exports=function(t,r){var i=r.trace,n=t._fullLayout._splomScenes[i.uid];if(n){UNt(t,i),BOe.extendFlat(n.matrixOptions,VNt(t,i));var a=BOe.extendFlat({},n.matrixOptions,n.viewOpts);n.matrix.update(a,null)}}});var HOe=ne((Bgr,VOe)=>{"use strict";var HNt=wi(),GNt=eN();VOe.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:xX(),supplyDefaults:fOe(),colorbar:ph(),calc:gOe(),plot:kOe(),hoverPoints:ROe().hoverPoints,selectPoints:OOe(),editStyle:UOe(),meta:{}};HNt.register(GNt)});var jOe=ne((Ngr,ZOe)=>{"use strict";var YNt=ZW(),WNt=wi(),XNt=TI(),ZNt=vc().getModuleCalcData,w1=vu(),GOe=zl().getFromId,YOe=Xi().shouldShowZeroLine,WOe="splom",XOe={};function jNt(e){var t=e._fullLayout,r=WNt.getModule(WOe),i=ZNt(e.calcdata,r)[0],n=XNt(e,["ANGLE_instanced_arrays","OES_element_index_uint"],XOe);n&&(t._hasOnlyLargeSploms&&SX(e),r.plot(e,{},i))}function KNt(e){var t=e.calcdata,r=e._fullLayout;r._hasOnlyLargeSploms&&SX(e);for(var i=0;i<t.length;i++){var n=t[i][0],a=n.trace,o=r._splomScenes[a.uid];a.type==="splom"&&o&&o.matrix&&JNt(e,a,o)}}function JNt(e,t,r){for(var i=r.matrixOptions.data.length,n=t._visibleDims,a=r.viewOpts.ranges=new Array(i),o=0;o<n.length;o++){var s=n[o],l=a[o]=new Array(4),u=GOe(e,t._diag[s][0]);u&&(l[0]=u.r2l(u.range[0]),l[2]=u.r2l(u.range[1]));var f=GOe(e,t._diag[s][1]);f&&(l[1]=f.r2l(f.range[0]),l[3]=f.r2l(f.range[1]))}r.selectBatch.length||r.unselectBatch.length?r.matrix.update({ranges:a},{ranges:a}):r.matrix.update({ranges:a})}function SX(e){var t=e._fullLayout,r=t._glcanvas.data()[0].regl,i=t._splomGrid;i||(i=t._splomGrid=YNt(r)),i.update(QNt(e))}function QNt(e){var t=e._context.plotGlPixelRatio,r=e._fullLayout,i=r._size,n=[0,0,r.width*t,r.height*t],a={},o;function s(x,E,S,g,C,A){S*=t,g*=t,C*=t,A*=t;var P=E[x+"color"],D=E[x+"width"],z=String(P+D);z in a?a[z].data.push(NaN,NaN,S,g,C,A):a[z]={data:[S,g,C,A],join:"rect",thickness:D*t,color:P,viewport:n,range:n,overlay:!1}}for(o in r._splomSubplots){var l=r._plots[o],u=l.xaxis,f=l.yaxis,c=u._gridVals,h=f._gridVals,v=u._offset,d=u._length,_=f._length,T=i.b+f.domain[0]*i.h,p=-f._m,M=-p*f.r2l(f.range[0],f.calendar),b,w;if(u.showgrid)for(o=0;o<c.length;o++)b=v+u.l2p(c[o].x),s("grid",u,b,T,b,T+_);if(f.showgrid)for(o=0;o<h.length;o++)w=T+M+p*h[o].x,s("grid",f,v,w,v+d,w);YOe(e,u,f)&&(b=v+u.l2p(0),s("zeroline",u,b,T,b,T+_)),YOe(e,f,u)&&(w=T+M+0,s("zeroline",f,v,w,v+d,w))}var k=[];for(o in a)k.push(a[o]);return k}function $Nt(e,t,r,i){var n={},a;if(i._splomScenes){for(a=0;a<e.length;a++){var o=e[a];o.type==="splom"&&(n[o.uid]=1)}for(a=0;a<r.length;a++){var s=r[a];if(!n[s.uid]){var l=i._splomScenes[s.uid];l&&l.destroy&&l.destroy(),i._splomScenes[s.uid]=null,delete i._splomScenes[s.uid]}}}Object.keys(i._splomScenes||{}).length===0&&delete i._splomScenes,i._splomGrid&&!t._hasOnlyLargeSploms&&i._hasOnlyLargeSploms&&(i._splomGrid.destroy(),i._splomGrid=null,delete i._splomGrid),w1.clean(e,t,r,i)}ZOe.exports={name:WOe,attr:w1.attr,attrRegex:w1.attrRegex,layoutAttributes:w1.layoutAttributes,supplyLayoutDefaults:w1.supplyLayoutDefaults,drawFramework:w1.drawFramework,plot:jNt,drag:KNt,updateGrid:SX,clean:$Nt,updateFx:w1.updateFx,toSVG:w1.toSVG,reglPrecompiled:XOe}});var QOe=ne((Ugr,JOe)=>{"use strict";var KOe=HOe();KOe.basePlotModule=jOe(),JOe.exports=KOe});var e7e=ne((Vgr,$Oe)=>{"use strict";$Oe.exports=QOe()});var kX=ne((Hgr,t7e)=>{"use strict";var EX=cu();t7e.exports={x:EX.x,y:EX.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:EX.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}});var n7e=ne((Ggr,r7e)=>{"use strict";var e9t=Wt(),t9t=kX();r7e.exports=function(t,r,i){function n(a,o){return e9t.coerce(t,r,t9t,a,o)}n("x"),n("y"),n("xbounds"),n("ybounds"),t.xy&&t.xy instanceof Float32Array&&(r.xy=t.xy),t.indices&&t.indices instanceof Int32Array&&(r.indices=t.indices),n("text"),n("marker.color",i),n("marker.opacity"),n("marker.blend"),n("marker.sizemin"),n("marker.sizemax"),n("marker.border.color",i),n("marker.border.arearatio"),r._length=null}});var l7e=ne((Ygr,s7e)=>{"use strict";var r9t=yu().gl_pointcloud2d,n9t=Wt().isArrayOrTypedArray,i7e=Dp(),a7e=Cd().findExtremes,i9t=Z2();function o7e(e,t){this.scene=e,this.uid=t,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=r9t(e.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var RI=o7e.prototype;RI.handlePick=function(e){var t=this.idToIndex[e.pointId];return{trace:this,dataCoord:e.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[t*2],this.pickXYData[t*2+1]]:[this.pickXData[t],this.pickYData[t]],textLabel:n9t(this.textLabels)?this.textLabels[t]:this.textLabels,color:this.color,name:this.name,pointIndex:t,hoverinfo:this.hoverinfo}};RI.update=function(e){this.index=e.index,this.textLabels=e.text,this.name=e.name,this.hoverinfo=e.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(e),this.color=i9t(e,{})};RI.updateFast=function(e){var t=this.xData=this.pickXData=e.x,r=this.yData=this.pickYData=e.y,i=this.pickXYData=e.xy,n=e.xbounds&&e.ybounds,a=e.indices,o,s,l,u=this.bounds,f,c,h;if(i){if(l=i,o=i.length>>>1,n)u[0]=e.xbounds[0],u[2]=e.xbounds[1],u[1]=e.ybounds[0],u[3]=e.ybounds[1];else for(h=0;h<o;h++)f=l[h*2],c=l[h*2+1],f<u[0]&&(u[0]=f),f>u[2]&&(u[2]=f),c<u[1]&&(u[1]=c),c>u[3]&&(u[3]=c);if(a)s=a;else for(s=new Int32Array(o),h=0;h<o;h++)s[h]=h}else for(o=t.length,l=new Float32Array(2*o),s=new Int32Array(o),h=0;h<o;h++)f=t[h],c=r[h],s[h]=h,l[h*2]=f,l[h*2+1]=c,f<u[0]&&(u[0]=f),f>u[2]&&(u[2]=f),c<u[1]&&(u[1]=c),c>u[3]&&(u[3]=c);this.idToIndex=s,this.pointcloudOptions.idToIndex=s,this.pointcloudOptions.positions=l;var v=i7e(e.marker.color),d=i7e(e.marker.border.color),_=e.opacity*e.marker.opacity;v[3]*=_,this.pointcloudOptions.color=v;var T=e.marker.blend;if(T===null){var p=100;T=t.length<p||r.length<p}this.pointcloudOptions.blend=T,d[3]*=_,this.pointcloudOptions.borderColor=d;var M=e.marker.sizemin,b=Math.max(e.marker.sizemax,e.marker.sizemin);this.pointcloudOptions.sizeMin=M,this.pointcloudOptions.sizeMax=b,this.pointcloudOptions.areaRatio=e.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var w=this.scene.xaxis,k=this.scene.yaxis,x=b/2||.5;e._extremes[w._id]=a7e(w,[u[0],u[2]],{ppad:x}),e._extremes[k._id]=a7e(k,[u[1],u[3]],{ppad:x})};RI.dispose=function(){this.pointcloud.dispose()};function a9t(e,t){var r=new o7e(e,t.uid);return r.update(t),r}s7e.exports=a9t});var c7e=ne((Wgr,f7e)=>{"use strict";var o9t=Xi(),Y_=Dp();function u7e(e){this.scene=e,this.gl=e.gl,this.pixelRatio=e.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var W_=u7e.prototype,s9t=["xaxis","yaxis"];W_.merge=function(e){this.titleEnable=!1,this.backgroundColor=Y_(e.plot_bgcolor);var t,r,i,n,a,o,s,l,u,f,c;for(f=0;f<2;++f){t=s9t[f];var h=t.charAt(0);for(r=e[this.scene[t]._name],i=r.title.text===this.scene.fullLayout._dfltTitle[h]?"":r.title.text,c=0;c<=2;c+=2)this.labelEnable[f+c]=!1,this.labels[f+c]=i,this.labelColor[f+c]=Y_(r.title.font.color),this.labelFont[f+c]=r.title.font.family,this.labelSize[f+c]=r.title.font.size,this.labelPad[f+c]=this.getLabelPad(t,r),this.tickEnable[f+c]=!1,this.tickColor[f+c]=Y_((r.tickfont||{}).color),this.tickAngle[f+c]=r.tickangle==="auto"?0:Math.PI*-r.tickangle/180,this.tickPad[f+c]=this.getTickPad(r),this.tickMarkLength[f+c]=0,this.tickMarkWidth[f+c]=r.tickwidth||0,this.tickMarkColor[f+c]=Y_(r.tickcolor),this.borderLineEnable[f+c]=!1,this.borderLineColor[f+c]=Y_(r.linecolor),this.borderLineWidth[f+c]=r.linewidth||0;s=this.hasSharedAxis(r),a=this.hasAxisInDfltPos(t,r)&&!s,o=this.hasAxisInAltrPos(t,r)&&!s,n=r.mirror||!1,l=s?String(n).indexOf("all")!==-1:!!n,u=s?n==="allticks":String(n).indexOf("ticks")!==-1,a?this.labelEnable[f]=!0:o&&(this.labelEnable[f+2]=!0),a?this.tickEnable[f]=r.showticklabels:o&&(this.tickEnable[f+2]=r.showticklabels),(a||l)&&(this.borderLineEnable[f]=r.showline),(o||l)&&(this.borderLineEnable[f+2]=r.showline),(a||u)&&(this.tickMarkLength[f]=this.getTickMarkLength(r)),(o||u)&&(this.tickMarkLength[f+2]=this.getTickMarkLength(r)),this.gridLineEnable[f]=r.showgrid,this.gridLineColor[f]=Y_(r.gridcolor),this.gridLineWidth[f]=r.gridwidth,this.zeroLineEnable[f]=r.zeroline,this.zeroLineColor[f]=Y_(r.zerolinecolor),this.zeroLineWidth[f]=r.zerolinewidth}};W_.hasSharedAxis=function(e){var t=this.scene,r=t.fullLayout._subplots.gl2d,i=o9t.findSubplotsWithAxis(r,e);return i.indexOf(t.id)!==0};W_.hasAxisInDfltPos=function(e,t){var r=t.side;if(e==="xaxis")return r==="bottom";if(e==="yaxis")return r==="left"};W_.hasAxisInAltrPos=function(e,t){var r=t.side;if(e==="xaxis")return r==="top";if(e==="yaxis")return r==="right"};W_.getLabelPad=function(e,t){var r=1.5,i=t.title.font.size,n=t.showticklabels;if(e==="xaxis")return t.side==="top"?-10+i*(r+(n?1:0)):-10+i*(r+(n?.5:0));if(e==="yaxis")return t.side==="right"?10+i*(r+(n?1:.5)):10+i*(r+(n?.5:0))};W_.getTickPad=function(e){return e.ticks==="outside"?10+e.ticklen:15};W_.getTickMarkLength=function(e){if(!e.ticks)return 0;var t=e.ticklen;return e.ticks==="inside"?-t:t};function l9t(e){return new u7e(e)}f7e.exports=l9t});var h7e=ne(d5=>{"use strict";function u9t(e){if(typeof e=="object"){if("buttons"in e)return e.buttons;if("which"in e){var t=e.which;if(t===2)return 4;if(t===3)return 2;if(t>0)return 1<<t-1}else if("button"in e){var t=e.button;if(t===1)return 4;if(t===2)return 2;if(t>=0)return 1<<t}}return 0}d5.buttons=u9t;function CX(e){return e.target||e.srcElement||window}d5.element=CX;function f9t(e){if(typeof e=="object"){if("offsetX"in e)return e.offsetX;var t=CX(e),r=t.getBoundingClientRect();return e.clientX-r.left}return 0}d5.x=f9t;function c9t(e){if(typeof e=="object"){if("offsetY"in e)return e.offsetY;var t=CX(e),r=t.getBoundingClientRect();return e.clientY-r.top}return 0}d5.y=c9t});var d7e=ne((Zgr,v7e)=>{"use strict";v7e.exports=h9t;var p5=h7e();function h9t(e,t){t||(t=e,e=window);var r=0,i=0,n=0,a={shift:!1,alt:!1,control:!1,meta:!1},o=!1;function s(M){var b=!1;return"altKey"in M&&(b=b||M.altKey!==a.alt,a.alt=!!M.altKey),"shiftKey"in M&&(b=b||M.shiftKey!==a.shift,a.shift=!!M.shiftKey),"ctrlKey"in M&&(b=b||M.ctrlKey!==a.control,a.control=!!M.ctrlKey),"metaKey"in M&&(b=b||M.metaKey!==a.meta,a.meta=!!M.metaKey),b}function l(M,b){var w=p5.x(b),k=p5.y(b);"buttons"in b&&(M=b.buttons|0),(M!==r||w!==i||k!==n||s(b))&&(r=M|0,i=w||0,n=k||0,t&&t(r,i,n,a))}function u(M){l(0,M)}function f(){(r||i||n||a.shift||a.alt||a.meta||a.control)&&(i=n=0,r=0,a.shift=a.alt=a.control=a.meta=!1,t&&t(0,0,0,a))}function c(M){s(M)&&t&&t(r,i,n,a)}function h(M){p5.buttons(M)===0?l(0,M):l(r,M)}function v(M){l(r|p5.buttons(M),M)}function d(M){l(r&~p5.buttons(M),M)}function _(){o||(o=!0,e.addEventListener("mousemove",h),e.addEventListener("mousedown",v),e.addEventListener("mouseup",d),e.addEventListener("mouseleave",u),e.addEventListener("mouseenter",u),e.addEventListener("mouseout",u),e.addEventListener("mouseover",u),e.addEventListener("blur",f),e.addEventListener("keyup",c),e.addEventListener("keydown",c),e.addEventListener("keypress",c),e!==window&&(window.addEventListener("blur",f),window.addEventListener("keyup",c),window.addEventListener("keydown",c),window.addEventListener("keypress",c)))}function T(){o&&(o=!1,e.removeEventListener("mousemove",h),e.removeEventListener("mousedown",v),e.removeEventListener("mouseup",d),e.removeEventListener("mouseleave",u),e.removeEventListener("mouseenter",u),e.removeEventListener("mouseout",u),e.removeEventListener("mouseover",u),e.removeEventListener("blur",f),e.removeEventListener("keyup",c),e.removeEventListener("keydown",c),e.removeEventListener("keypress",c),e!==window&&(window.removeEventListener("blur",f),window.removeEventListener("keyup",c),window.removeEventListener("keydown",c),window.removeEventListener("keypress",c)))}_();var p={element:e};return Object.defineProperties(p,{enabled:{get:function(){return o},set:function(M){M?_():T()},enumerable:!0},buttons:{get:function(){return r},enumerable:!0},x:{get:function(){return i},enumerable:!0},y:{get:function(){return n},enumerable:!0},mods:{get:function(){return a},enumerable:!0}}),p}});var g7e=ne((jgr,p7e)=>{"use strict";var v9t=dX();p7e.exports=d9t;function d9t(e,t,r){typeof e=="function"&&(r=!!t,t=e,e=window);var i=v9t("ex",e),n=function(a){r&&a.preventDefault();var o=a.deltaX||0,s=a.deltaY||0,l=a.deltaZ||0,u=a.deltaMode,f=1;switch(u){case 1:f=i;break;case 2:f=window.innerHeight;break}if(o*=f,s*=f,l*=f,o||s||l)return t(o,s,l,a)};return e.addEventListener("wheel",n),n}});var _7e=ne((Kgr,x7e)=>{"use strict";var p9t=d7e(),g9t=g7e(),y7e=fO(),m7e=wf(),LX=qA();x7e.exports=m9t;function y9t(e,t){this.element=e,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function m9t(e){var t=e.mouseContainer,r=e.glplot,i=new y9t(t,r);function n(){e.xaxis.autorange=!1,e.yaxis.autorange=!1}function a(){for(var s=e.graphDiv._fullLayout._axisConstraintGroups,l=e.xaxis._id,u=e.yaxis._id,f=0;f<s.length;f++)if(s[f][l]!==-1){if(s[f][u]!==-1)return!0;break}return!1}i.mouseListener=p9t(t,o),t.addEventListener("touchstart",function(s){var l=y7e(s.changedTouches[0],t);o(0,l[0],l[1]),o(1,l[0],l[1]),s.preventDefault()},LX?{passive:!1}:!1),t.addEventListener("touchmove",function(s){s.preventDefault();var l=y7e(s.changedTouches[0],t);o(1,l[0],l[1]),s.preventDefault()},LX?{passive:!1}:!1),t.addEventListener("touchend",function(s){o(0,i.lastPos[0],i.lastPos[1]),s.preventDefault()},LX?{passive:!1}:!1);function o(s,l,u){var f=e.calcDataBox(),c=r.viewBox,h=i.lastPos[0],v=i.lastPos[1],d=m7e.MINDRAG*r.pixelRatio,_=m7e.MINZOOM*r.pixelRatio,T,p;l*=r.pixelRatio,u*=r.pixelRatio,u=c[3]-c[1]-u;function M(S,g,C){var A=Math.min(g,C),P=Math.max(g,C);A!==P?(f[S]=A,f[S+2]=P,i.dataBox=f,e.setRanges(f)):(e.selectBox.selectBox=[0,0,1,1],e.glplot.setDirty())}switch(e.fullLayout.dragmode){case"zoom":if(s){var b=l/(c[2]-c[0])*(f[2]-f[0])+f[0],w=u/(c[3]-c[1])*(f[3]-f[1])+f[1];i.boxInited||(i.boxStart[0]=b,i.boxStart[1]=w,i.dragStart[0]=l,i.dragStart[1]=u),i.boxEnd[0]=b,i.boxEnd[1]=w,i.boxInited=!0,!i.boxEnabled&&(i.boxStart[0]!==i.boxEnd[0]||i.boxStart[1]!==i.boxEnd[1])&&(i.boxEnabled=!0);var k=Math.abs(i.dragStart[0]-l)<_,x=Math.abs(i.dragStart[1]-u)<_;if(a()&&!(k&&x)){T=i.boxEnd[0]-i.boxStart[0],p=i.boxEnd[1]-i.boxStart[1];var E=(f[3]-f[1])/(f[2]-f[0]);Math.abs(T*E)>Math.abs(p)?(i.boxEnd[1]=i.boxStart[1]+Math.abs(T)*E*(p>=0?1:-1),i.boxEnd[1]<f[1]?(i.boxEnd[1]=f[1],i.boxEnd[0]=i.boxStart[0]+(f[1]-i.boxStart[1])/Math.abs(E)):i.boxEnd[1]>f[3]&&(i.boxEnd[1]=f[3],i.boxEnd[0]=i.boxStart[0]+(f[3]-i.boxStart[1])/Math.abs(E))):(i.boxEnd[0]=i.boxStart[0]+Math.abs(p)/E*(T>=0?1:-1),i.boxEnd[0]<f[0]?(i.boxEnd[0]=f[0],i.boxEnd[1]=i.boxStart[1]+(f[0]-i.boxStart[0])*Math.abs(E)):i.boxEnd[0]>f[2]&&(i.boxEnd[0]=f[2],i.boxEnd[1]=i.boxStart[1]+(f[2]-i.boxStart[0])*Math.abs(E)))}else k&&(i.boxEnd[0]=i.boxStart[0]),x&&(i.boxEnd[1]=i.boxStart[1])}else i.boxEnabled?(T=i.boxStart[0]!==i.boxEnd[0],p=i.boxStart[1]!==i.boxEnd[1],T||p?(T&&(M(0,i.boxStart[0],i.boxEnd[0]),e.xaxis.autorange=!1),p&&(M(1,i.boxStart[1],i.boxEnd[1]),e.yaxis.autorange=!1),e.relayoutCallback()):e.glplot.setDirty(),i.boxEnabled=!1,i.boxInited=!1):i.boxInited&&(i.boxInited=!1);break;case"pan":i.boxEnabled=!1,i.boxInited=!1,s?(i.panning||(i.dragStart[0]=l,i.dragStart[1]=u),Math.abs(i.dragStart[0]-l)<d&&(l=i.dragStart[0]),Math.abs(i.dragStart[1]-u)<d&&(u=i.dragStart[1]),T=(h-l)*(f[2]-f[0])/(r.viewBox[2]-r.viewBox[0]),p=(v-u)*(f[3]-f[1])/(r.viewBox[3]-r.viewBox[1]),f[0]+=T,f[2]+=T,f[1]+=p,f[3]+=p,e.setRanges(f),i.panning=!0,i.lastInputTime=Date.now(),n(),e.cameraChanged(),e.handleAnnotations()):i.panning&&(i.panning=!1,e.relayoutCallback());break}i.lastPos[0]=l,i.lastPos[1]=u}return i.wheelListener=g9t(t,function(s,l){if(!e.scrollZoom)return!1;var u=e.calcDataBox(),f=r.viewBox,c=i.lastPos[0],h=i.lastPos[1],v=Math.exp(5*l/(f[3]-f[1])),d=c/(f[2]-f[0])*(u[2]-u[0])+u[0],_=h/(f[3]-f[1])*(u[3]-u[1])+u[1];return u[0]=(u[0]-d)*v+d,u[2]=(u[2]-d)*v+d,u[1]=(u[1]-_)*v+_,u[3]=(u[3]-_)*v+_,e.setRanges(u),i.lastInputTime=Date.now(),n(),e.cameraChanged(),e.handleAnnotations(),e.relayoutCallback(),!0},!0),i}});var k7e=ne((Jgr,E7e)=>{"use strict";var T7e=wi(),PX=Xi(),L0=Ol(),x9t=yu().gl_plot2d,_9t=yu().gl_spikes2d,b9t=yu().gl_select_box,b7e=gG(),w9t=c7e(),T9t=_7e(),A9t=nD(),A7e=mm(),M9t=A7e.enforce,w7e=A7e.clean,S9t=Cd().doAutoRange,M7e=r0(),E9t=M7e.drawMode,k9t=M7e.selectMode,C9t=["xaxis","yaxis"],g5,DI,L9t=wf().SUBPLOT_PATTERN;function S7e(e,t){this.container=e.container,this.graphDiv=e.graphDiv,this.pixelRatio=e.plotGlPixelRatio||window.devicePixelRatio,this.id=e.id,this.staticPlot=!!e.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(t),this.makeFramework(),!this.stopped&&(this.glplotOptions=w9t(this),this.glplotOptions.merge(t),this.glplot=x9t(this.glplotOptions),this.camera=T9t(this),this.traces={},this.spikes=_9t(this.glplot),this.selectBox=b9t(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}E7e.exports=S7e;var Hc=S7e.prototype;Hc.makeFramework=function(){if(this.staticPlot){if(!DI&&(g5=document.createElement("canvas"),DI=b7e({canvas:g5,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!DI))throw new Error("Error creating static canvas/context for image server");this.canvas=g5,this.gl=DI}else{var e=this.container.querySelector(".gl-canvas-focus"),t=b7e({canvas:e,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!t){A9t(this),this.stopped=!0;return}this.canvas=e,this.gl=t}var r=this.canvas;r.style.width="100%",r.style.height="100%",r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style["pointer-events"]="none",this.updateSize(r);var i=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");i.style.position="absolute",i.style.top=i.style.left="0px",i.style.width=i.style.height="100%",i.style["z-index"]=20,i.style["pointer-events"]="none";var n=this.mouseContainer=document.createElement("div");n.style.position="absolute",n.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var a=this.container;a.appendChild(i),a.appendChild(n);var o=this;n.addEventListener("mouseout",function(){o.isMouseOver=!1,o.unhover()}),n.addEventListener("mouseover",function(){o.isMouseOver=!0})};Hc.toImage=function(e){e||(e="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(g5),this.updateSize(this.canvas);var t=this.glplot.gl,r=t.drawingBufferWidth,i=t.drawingBufferHeight;t.clearColor(1,1,1,0),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),t.bindFramebuffer(t.FRAMEBUFFER,null);var n=new Uint8Array(r*i*4);t.readPixels(0,0,r,i,t.RGBA,t.UNSIGNED_BYTE,n);for(var a=0,o=i-1;a<o;++a,--o)for(var s=0;s<r;++s)for(var l=0;l<4;++l){var u=n[4*(r*a+s)+l];n[4*(r*a+s)+l]=n[4*(r*o+s)+l],n[4*(r*o+s)+l]=u}var f=document.createElement("canvas");f.width=r,f.height=i;var c=f.getContext("2d",{willReadFrequently:!0}),h=c.createImageData(r,i);h.data.set(n),c.putImageData(h,0,0);var v;switch(e){case"jpeg":v=f.toDataURL("image/jpeg");break;case"webp":v=f.toDataURL("image/webp");break;default:v=f.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(g5),v};Hc.updateSize=function(e){e||(e=this.canvas);var t=this.pixelRatio,r=this.fullLayout,i=r.width,n=r.height,a=Math.ceil(t*i)|0,o=Math.ceil(t*n)|0;return(e.width!==a||e.height!==o)&&(e.width=a,e.height=o),e};Hc.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var e=[PX.calcTicks(this.xaxis),PX.calcTicks(this.yaxis)],t=0;t<2;++t)for(var r=0;r<e[t].length;++r)e[t][r].text=e[t][r].text+"";return e};function P9t(e,t){for(var r=0;r<2;++r){var i=e[r],n=t[r];if(i.length!==n.length)return!0;for(var a=0;a<i.length;++a)if(i[a].x!==n[a].x)return!0}return!1}Hc.updateRefs=function(e){this.fullLayout=e;var t=this.id.match(L9t),r="xaxis"+t[1],i="yaxis"+t[2];this.xaxis=this.fullLayout[r],this.yaxis=this.fullLayout[i]};Hc.relayoutCallback=function(){var e=this.graphDiv,t=this.xaxis,r=this.yaxis,i=e.layout,n={},a=n[t._name+".range"]=t.range.slice(),o=n[r._name+".range"]=r.range.slice();n[t._name+".autorange"]=t.autorange,n[r._name+".autorange"]=r.autorange,T7e.call("_storeDirectGUIEdit",e.layout,e._fullLayout._preGUI,n);var s=i[t._name];s.range=a,s.autorange=t.autorange;var l=i[r._name];l.range=o,l.autorange=r.autorange,n.lastInputTime=this.camera.lastInputTime,e.emit("plotly_relayout",n)};Hc.cameraChanged=function(){var e=this.camera;this.glplot.setDataBox(this.calcDataBox());var t=this.computeTickMarks(),r=this.glplotOptions.ticks;P9t(t,r)&&(this.glplotOptions.ticks=t,this.glplotOptions.dataBox=e.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())};Hc.handleAnnotations=function(){for(var e=this.graphDiv,t=this.fullLayout.annotations,r=0;r<t.length;r++){var i=t[r];i.xref===this.xaxis._id&&i.yref===this.yaxis._id&&T7e.getComponentMethod("annotations","drawOne")(e,r)}};Hc.destroy=function(){if(this.glplot){var e=this.traces;e&&Object.keys(e).map(function(t){e[t].dispose(),delete e[t]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}};Hc.plot=function(e,t,r){var i=this.glplot;this.updateRefs(r),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(e,t),this.updateFx(r.dragmode);var n=r.width,a=r.height;this.updateSize(this.canvas);var o=this.glplotOptions;o.merge(r),o.screenBox=[0,0,n,a];var s={_fullLayout:{_axisConstraintGroups:r._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:r._size}};w7e(s,this.xaxis),w7e(s,this.yaxis);var l=r._size,u=this.xaxis.domain,f=this.yaxis.domain;o.viewBox=[l.l+u[0]*l.w,l.b+f[0]*l.h,n-l.r-(1-u[1])*l.w,a-l.t-(1-f[1])*l.h],this.mouseContainer.style.width=l.w*(u[1]-u[0])+"px",this.mouseContainer.style.height=l.h*(f[1]-f[0])+"px",this.mouseContainer.height=l.h*(f[1]-f[0]),this.mouseContainer.style.left=l.l+u[0]*l.w+"px",this.mouseContainer.style.top=l.t+(1-f[1])*l.h+"px";var c,h;for(h=0;h<2;++h)c=this[C9t[h]],c._length=o.viewBox[h+2]-o.viewBox[h],S9t(this.graphDiv,c),c.setScale();M9t(s),o.ticks=this.computeTickMarks(),o.dataBox=this.calcDataBox(),o.merge(r),i.update(o),this.glplot.draw()};Hc.calcDataBox=function(){var e=this.xaxis,t=this.yaxis,r=e.range,i=t.range,n=e.r2l,a=t.r2l;return[n(r[0]),a(i[0]),n(r[1]),a(i[1])]};Hc.setRanges=function(e){var t=this.xaxis,r=this.yaxis,i=t.l2r,n=r.l2r;t.range=[i(e[0]),i(e[2])],r.range=[n(e[1]),n(e[3])]};Hc.updateTraces=function(e,t){var r=Object.keys(this.traces),i,n,a;this.fullData=e;e:for(i=0;i<r.length;i++){var o=r[i],s=this.traces[o];for(n=0;n<e.length;n++)if(a=e[n],a.uid===o&&a.type===s.type)continue e;s.dispose(),delete this.traces[o]}for(i=0;i<e.length;i++){a=e[i];var l=t[i],u=this.traces[a.uid];u?u.update(a,l):(u=a._module.plot(this,a,l),this.traces[a.uid]=u)}this.glplot.objects.sort(function(f,c){return f._trace.index-c._trace.index})};Hc.updateFx=function(e){k9t(e)||E9t(e)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),e==="pan"?this.mouseContainer.style.cursor="move":e==="zoom"?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null};Hc.emitPointAction=function(e,t){for(var r=e.trace.uid,i=e.pointIndex,n,a=0;a<this.fullData.length;a++)this.fullData[a].uid===r&&(n=this.fullData[a]);var o={x:e.traceCoord[0],y:e.traceCoord[1],curveNumber:n.index,pointNumber:i,data:n._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};L0.appendArrayPointValue(o,n,i),this.graphDiv.emit(t,{points:[o]})};Hc.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var e=this.glplot,t=this.camera,r=t.mouseListener,i=this.lastButtonState===1&&r.buttons===0,n=this.fullLayout;this.lastButtonState=r.buttons,this.cameraChanged();var a=r.x*e.pixelRatio,o=this.canvas.height-e.pixelRatio*r.y,s;if(t.boxEnabled&&n.dragmode==="zoom"){this.selectBox.enabled=!0;for(var l=this.selectBox.selectBox=[Math.min(t.boxStart[0],t.boxEnd[0]),Math.min(t.boxStart[1],t.boxEnd[1]),Math.max(t.boxStart[0],t.boxEnd[0]),Math.max(t.boxStart[1],t.boxEnd[1])],u=0;u<2;u++)t.boxStart[u]===t.boxEnd[u]&&(l[u]=e.dataBox[u],l[u+2]=e.dataBox[u+2]);e.setDirty()}else if(!t.panning&&this.isMouseOver){this.selectBox.enabled=!1;var f=n._size,c=this.xaxis.domain,h=this.yaxis.domain;s=e.pick(a/e.pixelRatio+f.l+c[0]*f.w,o/e.pixelRatio-(f.t+(1-h[1])*f.h));var v=s&&s.object._trace.handlePick(s);if(v&&i&&this.emitPointAction(v,"plotly_click"),s&&s.object._trace.hoverinfo!=="skip"&&n.hovermode&&v&&(!this.lastPickResult||this.lastPickResult.traceUid!==v.trace.uid||this.lastPickResult.dataCoord[0]!==v.dataCoord[0]||this.lastPickResult.dataCoord[1]!==v.dataCoord[1])){var d=v;this.lastPickResult={traceUid:v.trace?v.trace.uid:null,dataCoord:v.dataCoord.slice()},this.spikes.update({center:s.dataCoord}),d.screenCoord=[((e.viewBox[2]-e.viewBox[0])*(s.dataCoord[0]-e.dataBox[0])/(e.dataBox[2]-e.dataBox[0])+e.viewBox[0])/e.pixelRatio,(this.canvas.height-(e.viewBox[3]-e.viewBox[1])*(s.dataCoord[1]-e.dataBox[1])/(e.dataBox[3]-e.dataBox[1])-e.viewBox[1])/e.pixelRatio],this.emitPointAction(v,"plotly_hover");var _=this.fullData[d.trace.index]||{},T=d.pointIndex,p=L0.castHoverinfo(_,n,T);if(p&&p!=="all"){var M=p.split("+");M.indexOf("x")===-1&&(d.traceCoord[0]=void 0),M.indexOf("y")===-1&&(d.traceCoord[1]=void 0),M.indexOf("z")===-1&&(d.traceCoord[2]=void 0),M.indexOf("text")===-1&&(d.textLabel=void 0),M.indexOf("name")===-1&&(d.name=void 0)}L0.loneHover({x:d.screenCoord[0],y:d.screenCoord[1],xLabel:this.hoverFormatter("xaxis",d.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",d.traceCoord[1]),zLabel:d.traceCoord[2],text:d.textLabel,name:d.name,color:L0.castHoverOption(_,T,"bgcolor")||d.color,borderColor:L0.castHoverOption(_,T,"bordercolor"),fontFamily:L0.castHoverOption(_,T,"font.family"),fontSize:L0.castHoverOption(_,T,"font.size"),fontColor:L0.castHoverOption(_,T,"font.color"),nameLength:L0.castHoverOption(_,T,"namelength"),textAlign:L0.castHoverOption(_,T,"align")},{container:this.svgContainer,gd:this.graphDiv})}}s||this.unhover(),e.draw()}};Hc.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),L0.loneUnhover(this.svgContainer))};Hc.hoverFormatter=function(e,t){if(t!==void 0){var r=this[e];return PX.tickText(r,r.c2l(t),"hover").text}}});var RX=ne(Lv=>{"use strict";var C7e=Xs().overrideAll,R9t=k7e(),D9t=tx(),I9t=kd(),L7e=wf(),II=vu(),F9t=Pg(),P7e=vc().getSubplotData;Lv.name="gl2d";Lv.attr=["xaxis","yaxis"];Lv.idRoot=["x","y"];Lv.idRegex=L7e.idRegex;Lv.attrRegex=L7e.attrRegex;Lv.attributes=vB();Lv.supplyLayoutDefaults=function(e,t,r){t._has("cartesian")||II.supplyLayoutDefaults(e,t,r)};Lv.layoutAttrOverrides=C7e(II.layoutAttributes,"plot","from-root");Lv.baseLayoutAttrOverrides=C7e({plot_bgcolor:D9t.plot_bgcolor,hoverlabel:F9t.hoverlabel},"plot","nested");Lv.plot=function(t){for(var r=t._fullLayout,i=t._fullData,n=r._subplots.gl2d,a=0;a<n.length;a++){var o=n[a],s=r._plots[o],l=P7e(i,"gl2d",o),u=s._scene2d;u===void 0&&(u=new R9t({id:o,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio},r),s._scene2d=u),u.plot(l,t.calcdata,r,t.layout)}};Lv.clean=function(e,t,r,i){for(var n=i._subplots.gl2d||[],a=0;a<n.length;a++){var o=n[a],s=i._plots[o];if(s._scene2d){var l=P7e(e,"gl2d",o);l.length===0&&(s._scene2d.destroy(),delete i._plots[o])}}II.clean.apply(this,arguments)};Lv.drawFramework=function(e){e._context.staticPlot||II.drawFramework(e)};Lv.toSVG=function(e){for(var t=e._fullLayout,r=t._subplots.gl2d,i=0;i<r.length;i++){var n=t._plots[r[i]],a=n._scene2d,o=a.toImage("png"),s=t._glimages.append("svg:image");s.attr({xmlns:I9t.svg,"xlink:href":o,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),a.destroy()}};Lv.updateFx=function(e){for(var t=e._fullLayout,r=t._subplots.gl2d,i=0;i<r.length;i++){var n=t._plots[r[i]]._scene2d;n.updateFx(t.dragmode)}}});var D7e=ne((eyr,R7e)=>{"use strict";var $gr=["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" ");R7e.exports={attributes:kX(),supplyDefaults:n7e(),calc:pG(),plot:l7e(),moduleType:"trace",name:"pointcloud",basePlotModule:RX(),categories:["gl","gl2d","showLegend"],meta:{}}});var F7e=ne((tyr,I7e)=>{"use strict";I7e.exports=D7e()});var IX=ne((ryr,z7e)=>{"use strict";var q9t=Xx(),z9t=Ps(),O9t=oa().extendFlat,B9t=Xs().overrideAll,q7e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],qI={};for(FI=0;FI<q7e.length;FI++)DX=q7e[FI],qI[DX]=q9t[DX];var DX,FI;qI.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"};O9t(qI,z9t("",{cLetter:"z",autoColorDflt:!1}));z7e.exports=B9t(qI,"calc","nested")});var B7e=ne((nyr,O7e)=>{"use strict";var N9t=Wt(),U9t=QM(),V9t=Kf(),H9t=IX();O7e.exports=function(t,r,i,n){function a(s,l){return N9t.coerce(t,r,H9t,s,l)}var o=U9t(t,r,a,n);if(!o){r.visible=!1;return}a("text"),a("zsmooth"),V9t(t,r,n,a,{prefix:"",cLetter:"z"})}});var H7e=ne((iyr,V7e)=>{"use strict";var G9t=yu().gl_heatmap2d,N7e=Xi(),Y9t=Dp();function U7e(e,t){this.scene=e,this.uid=t,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=G9t(e.glplot,this.options),this.heatmap._trace=this}var FX=U7e.prototype;FX.handlePick=function(e){var t=this.options,r=t.shape,i=e.pointId,n=i%r[0],a=Math.floor(i/r[0]),o=i;return{trace:this,dataCoord:e.dataCoord,traceCoord:[t.x[n],t.y[a],t.z[o]],textLabel:this.textLabels[i],name:this.name,pointIndex:[a,n],hoverinfo:this.hoverinfo}};FX.update=function(e,t){var r=t[0];this.index=e.index,this.name=e.name,this.hoverinfo=e.hoverinfo;var i=r.z;this.options.z=[].concat.apply([],i);var n=i[0].length,a=i.length;this.options.shape=[n,a],this.options.x=r.x,this.options.y=r.y,this.options.zsmooth=e.zsmooth;var o=W9t(e);this.options.colorLevels=o.colorLevels,this.options.colorValues=o.colorValues,this.textLabels=[].concat.apply([],e.text),this.heatmap.update(this.options);var s=this.scene.xaxis,l=this.scene.yaxis,u,f;e.zsmooth===!1&&(u={ppad:r.x[1]-r.x[0]},f={ppad:r.y[1]-r.y[0]}),e._extremes[s._id]=N7e.findExtremes(s,r.x,u),e._extremes[l._id]=N7e.findExtremes(l,r.y,f)};FX.dispose=function(){this.heatmap.dispose()};function W9t(e){for(var t=e.colorscale,r=e.zmin,i=e.zmax,n=t.length,a=new Array(n),o=new Array(4*n),s=0;s<n;s++){var l=t[s],u=Y9t(l[1]);a[s]=r+l[0]*(i-r);for(var f=0;f<4;f++)o[4*s+f]=u[f]}return{colorLevels:a,colorValues:o}}function X9t(e,t,r){var i=new U7e(e,t.uid);return i.update(t,r),i}V7e.exports=X9t});var Y7e=ne((oyr,G7e)=>{"use strict";var ayr=["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" ");G7e.exports={attributes:IX(),supplyDefaults:B7e(),colorbar:jx(),calc:eS(),plot:H7e(),moduleType:"trace",name:"heatmapgl",basePlotModule:RX(),categories:["gl","gl2d","2dMap"],meta:{}}});var X7e=ne((syr,W7e)=>{"use strict";W7e.exports=Y7e()});var OX=ne((lyr,Z7e)=>{"use strict";var Z9t=Ps(),qX=dc(),zX=ll(),j9t=fl().attributes,zI=oa().extendFlat,K9t=So().templatedArray;Z7e.exports={domain:j9t({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:zX({editType:"plot"}),tickfont:zX({editType:"plot"}),rangefont:zX({editType:"plot"}),dimensions:K9t("dimension",{label:{valType:"string",editType:"plot"},tickvals:zI({},qX.tickvals,{editType:"plot"}),ticktext:zI({},qX.ticktext,{editType:"plot"}),tickformat:zI({},qX.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:zI({editType:"calc"},Z9t("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}});var y5=ne((uyr,j7e)=>{"use strict";j7e.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}});var gg=ne((fyr,J7e)=>{"use strict";var J9t=dA();function K7e(e){return[e]}J7e.exports={keyFun:function(e){return e.key},repeat:K7e,descend:J9t,wrap:K7e,unwrap:function(e){return e[0]}}});var UX=ne((cyr,lBe)=>{"use strict";var Bu=y5(),P0=Ai(),Q9t=gg().keyFun,OI=gg().repeat,sT=Wt().sorterAsc,$9t=Wt().strTranslate,Q7e=Bu.bar.snapRatio;function $7e(e,t){return e*(1-Q7e)+t*Q7e}var eBe=Bu.bar.snapClose;function eUt(e,t){return e*(1-eBe)+t*eBe}function NI(e,t,r,i){if(tUt(r,i))return r;var n=e?-1:1,a=0,o=t.length-1;if(n<0){var s=a;a=o,o=s}for(var l=t[a],u=l,f=a;n*f<n*o;f+=n){var c=f+n,h=t[c];if(n*r<n*eUt(l,h))return $7e(l,u);if(n*r<n*h||c===o)return $7e(h,l);u=l,l=h}}function tUt(e,t){for(var r=0;r<t.length;r++)if(e>=t[r][0]&&e<=t[r][1])return!0;return!1}function rUt(e){e.attr("x",-Bu.bar.captureWidth/2).attr("width",Bu.bar.captureWidth)}function nUt(e){e.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function iUt(e){if(!e.brush.filterSpecified)return"0,"+e.height;for(var t=tBe(e.brush.filter.getConsolidated(),e.height),r=[0],i,n,a,o=t.length?t[0][0]:null,s=0;s<t.length;s++)i=t[s],n=i[1]-i[0],r.push(o),r.push(n),a=s+1,a<t.length&&(o=t[a][0]-i[1]);return r.push(e.height),r}function tBe(e,t){return e.map(function(r){return r.map(function(i){return Math.max(0,i*t)}).sort(sT)})}function aUt(e,t){var r=Bu.bar.handleHeight;if(!(t>e[1]+r||t<e[0]-r))return t>=.9*e[1]+.1*e[0]?"n":t<=.9*e[0]+.1*e[1]?"s":"ns"}function rBe(){P0.select(document.body).style("cursor",null)}function NX(e){e.attr("stroke-dasharray",iUt)}function BI(e,t){var r=P0.select(e).selectAll(".highlight, .highlight-shadow"),i=t?r.transition().duration(Bu.bar.snapDuration).each("end",t):r;NX(i)}function nBe(e,t){var r=e.brush,i=r.filterSpecified,n=NaN,a={},o;if(i){var s=e.height,l=r.filter.getConsolidated(),u=tBe(l,s),f=NaN,c=NaN,h=NaN;for(o=0;o<=u.length;o++){var v=u[o];if(v&&v[0]<=t&&t<=v[1]){f=o;break}else if(c=o?o-1:NaN,v&&v[0]>t){h=o;break}}if(n=f,isNaN(n)&&(isNaN(c)||isNaN(h)?n=isNaN(c)?h:c:n=t-u[c][1]<u[h][0]-t?c:h),!isNaN(n)){var d=u[n],_=aUt(d,t);_&&(a.interval=l[n],a.intervalPix=d,a.region=_)}}if(e.ordinal&&!a.region){var T=e.unitTickvals,p=e.unitToPaddedPx.invert(t);for(o=0;o<T.length;o++){var M=[T[Math.max(o-1,0)]*.25+T[o]*.75,T[Math.min(o+1,T.length-1)]*.25+T[o]*.75];if(p>=M[0]&&p<=M[1]){a.clickableOrdinalRange=M;break}}}return a}function oUt(e,t){P0.event.sourceEvent.stopPropagation();var r=t.height-P0.mouse(e)[1]-2*Bu.verticalPadding,i=t.unitToPaddedPx.invert(r),n=t.brush,a=nBe(t,r),o=a.interval,s=n.svgBrush;if(s.wasDragged=!1,s.grabbingBar=a.region==="ns",s.grabbingBar){var l=o.map(t.unitToPaddedPx);s.grabPoint=r-l[0]-Bu.verticalPadding,s.barLength=l[1]-l[0]}s.clickableOrdinalRange=a.clickableOrdinalRange,s.stayingIntervals=t.multiselect&&n.filterSpecified?n.filter.getConsolidated():[],o&&(s.stayingIntervals=s.stayingIntervals.filter(function(u){return u[0]!==o[0]&&u[1]!==o[1]})),s.startExtent=a.region?o[a.region==="s"?1:0]:i,t.parent.inBrushDrag=!0,s.brushStartCallback()}function iBe(e,t){P0.event.sourceEvent.stopPropagation();var r=t.height-P0.mouse(e)[1]-2*Bu.verticalPadding,i=t.brush.svgBrush;i.wasDragged=!0,i._dragging=!0,i.grabbingBar?i.newExtent=[r-i.grabPoint,r+i.barLength-i.grabPoint].map(t.unitToPaddedPx.invert):i.newExtent=[i.startExtent,t.unitToPaddedPx.invert(r)].sort(sT),t.brush.filterSpecified=!0,i.extent=i.stayingIntervals.concat([i.newExtent]),i.brushCallback(t),BI(e.parentNode)}function sUt(e,t){var r=t.brush,i=r.filter,n=r.svgBrush;n._dragging||(aBe(e,t),iBe(e,t),t.brush.svgBrush.wasDragged=!1),n._dragging=!1;var a=P0.event;a.sourceEvent.stopPropagation();var o=n.grabbingBar;if(n.grabbingBar=!1,n.grabLocation=void 0,t.parent.inBrushDrag=!1,rBe(),!n.wasDragged){n.wasDragged=void 0,n.clickableOrdinalRange?r.filterSpecified&&t.multiselect?n.extent.push(n.clickableOrdinalRange):(n.extent=[n.clickableOrdinalRange],r.filterSpecified=!0):o?(n.extent=n.stayingIntervals,n.extent.length===0&&BX(r)):BX(r),n.brushCallback(t),BI(e.parentNode),n.brushEndCallback(r.filterSpecified?i.getConsolidated():[]);return}var s=function(){i.set(i.getConsolidated())};if(t.ordinal){var l=t.unitTickvals;l[l.length-1]<l[0]&&l.reverse(),n.newExtent=[NI(0,l,n.newExtent[0],n.stayingIntervals),NI(1,l,n.newExtent[1],n.stayingIntervals)];var u=n.newExtent[1]>n.newExtent[0];n.extent=n.stayingIntervals.concat(u?[n.newExtent]:[]),n.extent.length||BX(r),n.brushCallback(t),u?BI(e.parentNode,s):(s(),BI(e.parentNode))}else s();n.brushEndCallback(r.filterSpecified?i.getConsolidated():[])}function aBe(e,t){var r=t.height-P0.mouse(e)[1]-2*Bu.verticalPadding,i=nBe(t,r),n="crosshair";i.clickableOrdinalRange?n="pointer":i.region&&(n=i.region+"-resize"),P0.select(document.body).style("cursor",n)}function lUt(e){e.on("mousemove",function(t){P0.event.preventDefault(),t.parent.inBrushDrag||aBe(this,t)}).on("mouseleave",function(t){t.parent.inBrushDrag||rBe()}).call(P0.behavior.drag().on("dragstart",function(t){oUt(this,t)}).on("drag",function(t){iBe(this,t)}).on("dragend",function(t){sUt(this,t)}))}function oBe(e,t){return e[0]-t[0]}function uUt(e,t,r){var i=r._context.staticPlot,n=e.selectAll(".background").data(OI);n.enter().append("rect").classed("background",!0).call(rUt).call(nUt).style("pointer-events",i?"none":"auto").attr("transform",$9t(0,Bu.verticalPadding)),n.call(lUt).attr("height",function(s){return s.height-Bu.verticalPadding});var a=e.selectAll(".highlight-shadow").data(OI);a.enter().append("line").classed("highlight-shadow",!0).attr("x",-Bu.bar.width/2).attr("stroke-width",Bu.bar.width+Bu.bar.strokeWidth).attr("stroke",t).attr("opacity",Bu.bar.strokeOpacity).attr("stroke-linecap","butt"),a.attr("y1",function(s){return s.height}).call(NX);var o=e.selectAll(".highlight").data(OI);o.enter().append("line").classed("highlight",!0).attr("x",-Bu.bar.width/2).attr("stroke-width",Bu.bar.width-Bu.bar.strokeWidth).attr("stroke",Bu.bar.fillColor).attr("opacity",Bu.bar.fillOpacity).attr("stroke-linecap","butt"),o.attr("y1",function(s){return s.height}).call(NX)}function fUt(e,t,r){var i=e.selectAll("."+Bu.cn.axisBrush).data(OI,Q9t);i.enter().append("g").classed(Bu.cn.axisBrush,!0),uUt(i,t,r)}function cUt(e){return e.svgBrush.extent.map(function(t){return t.slice()})}function BX(e){e.filterSpecified=!1,e.svgBrush.extent=[[-1/0,1/0]]}function hUt(e){return function(r){var i=r.brush,n=cUt(i),a=n.slice();i.filter.set(a),e()}}function sBe(e){for(var t=e.slice(),r=[],i,n=t.shift();n;){for(i=n.slice();(n=t.shift())&&n[0]<=i[1];)i[1]=Math.max(i[1],n[1]);r.push(i)}return r.length===1&&r[0][0]>r[0][1]&&(r=[]),r}function vUt(){var e=[],t,r;return{set:function(i){e=i.map(function(n){return n.slice().sort(sT)}).sort(oBe),e.length===1&&e[0][0]===-1/0&&e[0][1]===1/0&&(e=[[0,-1]]),t=sBe(e),r=e.reduce(function(n,a){return[Math.min(n[0],a[0]),Math.max(n[1],a[1])]},[1/0,-1/0])},get:function(){return e.slice()},getConsolidated:function(){return t},getBounds:function(){return r}}}function dUt(e,t,r,i,n,a){var o=vUt();return o.set(r),{filter:o,filterSpecified:t,svgBrush:{extent:[],brushStartCallback:i,brushCallback:hUt(n),brushEndCallback:a}}}function pUt(e,t){if(Array.isArray(e[0])?(e=e.map(function(i){return i.sort(sT)}),t.multiselect?e=sBe(e.sort(oBe)):e=[e[0]]):e=[e.sort(sT)],t.tickvals){var r=t.tickvals.slice().sort(sT);if(e=e.map(function(i){var n=[NI(0,r,i[0],[]),NI(1,r,i[1],[])];if(n[1]>n[0])return n}).filter(function(i){return i}),!e.length)return}return e.length>1?e:e[0]}lBe.exports={makeBrush:dUt,ensureAxisBrush:fUt,cleanRanges:pUt}});var cBe=ne((hyr,fBe)=>{"use strict";var X_=Wt(),gUt=Uh().hasColorscale,yUt=Kf(),mUt=fl().defaults,xUt=ch(),_Ut=Xi(),uBe=OX(),bUt=UX(),VX=y5().maxDimensionCount,wUt=MI();function TUt(e,t,r,i,n){var a=n("line.color",r);if(gUt(e,"line")&&X_.isArrayOrTypedArray(a)){if(a.length)return n("line.colorscale"),yUt(e,t,i,n,{prefix:"line.",cLetter:"c"}),a.length;t.line.color=r}return 1/0}function AUt(e,t,r,i){function n(u,f){return X_.coerce(e,t,uBe.dimensions,u,f)}var a=n("values"),o=n("visible");if(a&&a.length||(o=t.visible=!1),o){n("label"),n("tickvals"),n("ticktext"),n("tickformat");var s=n("range");t._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:s},_Ut.setConvert(t._ax,i.layout),n("multiselect");var l=n("constraintrange");l&&(t.constraintrange=bUt.cleanRanges(l,t))}}fBe.exports=function(t,r,i,n){function a(f,c){return X_.coerce(t,r,uBe,f,c)}var o=t.dimensions;Array.isArray(o)&&o.length>VX&&(X_.log("parcoords traces support up to "+VX+" dimensions at the moment"),o.splice(VX));var s=xUt(t,r,{name:"dimensions",layout:n,handleItemDefaults:AUt}),l=TUt(t,r,i,n,a);mUt(r,n,a),(!Array.isArray(s)||!s.length)&&(r.visible=!1),wUt(r,s,"values",l);var u={family:n.font.family,size:Math.round(n.font.size/1.2),color:n.font.color};X_.coerceFont(a,"labelfont",u),X_.coerceFont(a,"tickfont",u),X_.coerceFont(a,"rangefont",u),a("labelangle"),a("labelside"),a("unselected.line.color"),a("unselected.line.opacity")}});var vBe=ne((vyr,hBe)=>{"use strict";var MUt=Wt().isArrayOrTypedArray,HX=ul(),SUt=gg().wrap;hBe.exports=function(t,r){var i,n;return HX.hasColorscale(r,"line")&&MUt(r.line.color)?(i=r.line.color,n=HX.extractOpts(r.line).colorscale,HX.calc(t,r,{vals:i,containerStr:"line",cLetter:"c"})):(i=EUt(r._length),n=[[0,r.line.color],[1,r.line.color]]),SUt({lineColor:i,cscale:n})};function EUt(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=.5;return t}});var GX=ne(UI=>{"use strict";var kUt=Wt().isTypedArray;UI.convertTypedArray=function(e){return kUt(e)?Array.prototype.slice.call(e):e};UI.isOrdinal=function(e){return!!e.tickvals};UI.isVisible=function(e){return e.visible||!("visible"in e)}});var TBe=ne((pyr,wBe)=>{"use strict";var CUt=["precision highp float;","","varying vec4 fragColor;","","attribute vec4 p01_04, p05_08, p09_12, p13_16,","               p17_20, p21_24, p25_28, p29_32,","               p33_36, p37_40, p41_44, p45_48,","               p49_52, p53_56, p57_60, colors;","","uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,","             loA, hiA, loB, hiB, loC, hiC, loD, hiD;","","uniform vec2 resolution, viewBoxPos, viewBoxSize;","uniform float maskHeight;","uniform float drwLayer; // 0: context, 1: focus, 2: pick","uniform vec4 contextColor;","uniform sampler2D maskTexture, palette;","","bool isPick    = (drwLayer > 1.5);","bool isContext = (drwLayer < 0.5);","","const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);","const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);","","float val(mat4 p, mat4 v) {","    return dot(matrixCompMult(p, v) * UNITS, UNITS);","}","","float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {","    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);","    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);","    return y1 * (1.0 - ratio) + y2 * ratio;","}","","int iMod(int a, int b) {","    return a - b * (a / b);","}","","bool fOutside(float p, float lo, float hi) {","    return (lo < hi) && (lo > p || p > hi);","}","","bool vOutside(vec4 p, vec4 lo, vec4 hi) {","    return (","        fOutside(p[0], lo[0], hi[0]) ||","        fOutside(p[1], lo[1], hi[1]) ||","        fOutside(p[2], lo[2], hi[2]) ||","        fOutside(p[3], lo[3], hi[3])","    );","}","","bool mOutside(mat4 p, mat4 lo, mat4 hi) {","    return (","        vOutside(p[0], lo[0], hi[0]) ||","        vOutside(p[1], lo[1], hi[1]) ||","        vOutside(p[2], lo[2], hi[2]) ||","        vOutside(p[3], lo[3], hi[3])","    );","}","","bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {","    return mOutside(A, loA, hiA) ||","           mOutside(B, loB, hiB) ||","           mOutside(C, loC, hiC) ||","           mOutside(D, loD, hiD);","}","","bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {","    mat4 pnts[4];","    pnts[0] = A;","    pnts[1] = B;","    pnts[2] = C;","    pnts[3] = D;","","    for(int i = 0; i < 4; ++i) {","        for(int j = 0; j < 4; ++j) {","            for(int k = 0; k < 4; ++k) {","                if(0 == iMod(","                    int(255.0 * texture2D(maskTexture,","                        vec2(","                            (float(i * 2 + j / 2) + 0.5) / 8.0,","                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight","                        ))[3]","                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),","                    2","                )) return true;","            }","        }","    }","    return false;","}","","vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {","    float x = 0.5 * sign(v) + 0.5;","    float y = axisY(x, A, B, C, D);","    float z = 1.0 - abs(v);","","    z += isContext ? 0.0 : 2.0 * float(","        outsideBoundingBox(A, B, C, D) ||","        outsideRasterMask(A, B, C, D)","    );","","    return vec4(","        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,","        z,","        1.0","    );","}","","void main() {","    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);","    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);","    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);","    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);","","    float v = colors[3];","","    gl_Position = position(isContext, v, A, B, C, D);","","    fragColor =","        isContext ? vec4(contextColor) :","        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));","}"].join(`
`),LUt=["precision highp float;","","varying vec4 fragColor;","","void main() {","    gl_FragColor = fragColor;","}"].join(`
`),m5=y5().maxDimensionCount,xBe=Wt(),dBe=1e-6,VI=2048,PUt=new Uint8Array(4),pBe=new Uint8Array(4),gBe={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function RUt(e){e.read({x:0,y:0,width:1,height:1,data:PUt})}function _Be(e,t,r,i,n){var a=e._gl;a.enable(a.SCISSOR_TEST),a.scissor(t,r,i,n),e.clear({color:[0,0,0,0],depth:1})}function DUt(e,t,r,i,n,a){var o=a.key;function s(l){var u=Math.min(i,n-l*i);l===0&&(window.cancelAnimationFrame(r.currentRafs[o]),delete r.currentRafs[o],_Be(e,a.scissorX,a.scissorY,a.scissorWidth,a.viewBoxSize[1])),!r.clearOnly&&(a.count=2*u,a.offset=2*l*i,t(a),l*i+u<n&&(r.currentRafs[o]=window.requestAnimationFrame(function(){s(l+1)})),r.drawCompleted=!1)}r.drawCompleted||(RUt(e),r.drawCompleted=!0),s(0)}function IUt(e){return Math.max(dBe,Math.min(1-dBe,e))}function FUt(e,t){for(var r=new Array(256),i=0;i<256;i++)r[i]=e(i/255).concat(t);return r}function YX(e,t){return(e>>>8*t)%256/255}function qUt(e,t,r){for(var i=new Array(e*(m5+4)),n=0,a=0;a<e;a++){for(var o=0;o<m5;o++)i[n++]=o<t.length?t[o].paddedUnitValues[a]:.5;i[n++]=YX(a,2),i[n++]=YX(a,1),i[n++]=YX(a,0),i[n++]=IUt(r[a])}return i}function zUt(e,t,r){for(var i=new Array(t*8),n=0,a=0;a<t;a++)for(var o=0;o<2;o++)for(var s=0;s<4;s++){var l=e*4+s,u=r[a*64+l];l===63&&o===0&&(u*=-1),i[n++]=u}return i}function yBe(e){var t="0"+e;return t.substr(t.length-2)}function bBe(e){return e<m5?"p"+yBe(e+1)+"_"+yBe(e+4):"colors"}function OUt(e,t,r){for(var i=0;i<=m5;i+=4)e[bBe(i)](zUt(i/4,t,r))}function BUt(e){for(var t={},r=0;r<=m5;r+=4)t[bBe(r)]=e.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return t}function NUt(e,t,r,i,n,a,o,s,l,u,f,c,h,v){for(var d=[[],[]],_=0;_<64;_++)d[0][_]=_===n?1:0,d[1][_]=_===a?1:0;o*=v,s*=v,l*=v,u*=v;var T=e.lines.canvasOverdrag*v,p=e.domain,M=e.canvasWidth*v,b=e.canvasHeight*v,w=e.pad.l*v,k=e.pad.b*v,x=e.layoutHeight*v,E=e.layoutWidth*v,S=e.deselectedLines.color,g=e.deselectedLines.opacity,C=xBe.extendFlat({key:f,resolution:[M,b],viewBoxPos:[o+T,s],viewBoxSize:[l,u],i0:n,i1:a,dim0A:d[0].slice(0,16),dim0B:d[0].slice(16,32),dim0C:d[0].slice(32,48),dim0D:d[0].slice(48,64),dim1A:d[1].slice(0,16),dim1B:d[1].slice(16,32),dim1C:d[1].slice(32,48),dim1D:d[1].slice(48,64),drwLayer:c,contextColor:[S[0]/255,S[1]/255,S[2]/255,g!=="auto"?S[3]*g:Math.max(1/255,Math.pow(1/e.lines.color.length,1/3))],scissorX:(i===t?0:o+T)+(w-T)+E*p.x[0],scissorWidth:(i===r?M-o+T:l+.5)+(i===t?o+T:0),scissorY:s+k+x*p.y[0],scissorHeight:u,viewportX:w-T+E*p.x[0],viewportY:k+x*p.y[0],viewportWidth:M,viewportHeight:b},h);return C}function mBe(e){var t=VI-1,r=Math.max(0,Math.floor(e[0]*t),0),i=Math.min(t,Math.ceil(e[1]*t),t);return[Math.min(r,i),Math.max(r,i)]}wBe.exports=function(e,t){var r=t.context,i=t.pick,n=t.regl,a=n._gl,o=a.getParameter(a.ALIASED_LINE_WIDTH_RANGE),s=Math.max(o[0],Math.min(o[1],t.viewModel.plotGlPixelRatio)),l={currentRafs:{},drawCompleted:!0,clearOnly:!1},u,f,c,h,v=BUt(n),d,_=n.texture(gBe),T=[];M(t);var p=n({profile:!1,blend:{enable:r,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!r,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:n.prop("scissorX"),y:n.prop("scissorY"),width:n.prop("scissorWidth"),height:n.prop("scissorHeight")}},viewport:{x:n.prop("viewportX"),y:n.prop("viewportY"),width:n.prop("viewportWidth"),height:n.prop("viewportHeight")},dither:!1,vert:CUt,frag:LUt,primitive:"lines",lineWidth:s,attributes:v,uniforms:{resolution:n.prop("resolution"),viewBoxPos:n.prop("viewBoxPos"),viewBoxSize:n.prop("viewBoxSize"),dim0A:n.prop("dim0A"),dim1A:n.prop("dim1A"),dim0B:n.prop("dim0B"),dim1B:n.prop("dim1B"),dim0C:n.prop("dim0C"),dim1C:n.prop("dim1C"),dim0D:n.prop("dim0D"),dim1D:n.prop("dim1D"),loA:n.prop("loA"),hiA:n.prop("hiA"),loB:n.prop("loB"),hiB:n.prop("hiB"),loC:n.prop("loC"),hiC:n.prop("hiC"),loD:n.prop("loD"),hiD:n.prop("hiD"),palette:_,contextColor:n.prop("contextColor"),maskTexture:n.prop("maskTexture"),drwLayer:n.prop("drwLayer"),maskHeight:n.prop("maskHeight")},offset:n.prop("offset"),count:n.prop("count")});function M(S){u=S.model,f=S.viewModel,c=f.dimensions.slice(),h=c[0]?c[0].values.length:0;var g=u.lines,C=i?g.color.map(function(P,D){return D/g.color.length}):g.color,A=qUt(h,c,C);OUt(v,h,A),!r&&!i&&(_=n.texture(xBe.extendFlat({data:FUt(u.unitToColor,255)},gBe)))}function b(S){var g,C,A,P=[[],[]];for(A=0;A<64;A++){var D=!S&&A<c.length?c[A].brush.filter.getBounds():[-1/0,1/0];P[0][A]=D[0],P[1][A]=D[1]}var z=VI*8,O=new Array(z);for(g=0;g<z;g++)O[g]=255;if(!S)for(g=0;g<c.length;g++){var V=g%8,B=(g-V)/8,F=Math.pow(2,V),N=c[g],Z=N.brush.filter.get();if(!(Z.length<2)){var J=mBe(Z[0])[1];for(C=1;C<Z.length;C++){var re=mBe(Z[C]);for(A=J+1;A<re[0];A++)O[A*8+B]&=~F;J=Math.max(J,re[1])}}}var ue={shape:[8,VI],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:O};return d?d(ue):d=n.texture(ue),{maskTexture:d,maskHeight:VI,loA:P[0].slice(0,16),loB:P[0].slice(16,32),loC:P[0].slice(32,48),loD:P[0].slice(48,64),hiA:P[1].slice(0,16),hiB:P[1].slice(16,32),hiC:P[1].slice(32,48),hiD:P[1].slice(48,64)}}function w(S,g,C){var A=S.length,P,D,z,O=1/0,V=-1/0;for(P=0;P<A;P++)S[P].dim0.canvasX<O&&(O=S[P].dim0.canvasX,D=P),S[P].dim1.canvasX>V&&(V=S[P].dim1.canvasX,z=P);A===0&&_Be(n,0,0,u.canvasWidth,u.canvasHeight);var B=b(r);for(P=0;P<A;P++){var F=S[P],N=F.dim0.crossfilterDimensionIndex,Z=F.dim1.crossfilterDimensionIndex,J=F.canvasX,re=F.canvasY,ue=J+F.panelSizeX,fe=F.plotGlPixelRatio;if(g||!T[N]||T[N][0]!==J||T[N][1]!==ue){T[N]=[J,ue];var K=NUt(u,D,z,P,N,Z,J,re,F.panelSizeX,F.panelSizeY,F.dim0.crossfilterDimensionIndex,r?0:i?2:1,B,fe);l.clearOnly=C;var X=g?u.lines.blockLineCount:h;DUt(n,p,l,X,h,K)}}}function k(S,g){return n.read({x:S,y:g,width:1,height:1,data:pBe}),pBe}function x(S,g,C,A){var P=new Uint8Array(4*C*A);return n.read({x:S,y:g,width:C,height:A,data:P}),P}function E(){e.style["pointer-events"]="none",_.destroy(),d&&d.destroy();for(var S in v)v[S].destroy()}return{render:w,readPixel:k,readPixels:x,destroy:E,update:M}}});var OBe=ne((gyr,zBe)=>{"use strict";var bc=Ai(),Ty=Wt(),WX=Ty.isArrayOrTypedArray,LBe=Ty.numberFormat,PBe=rG(),RBe=Xi(),UUt=Ty.strRotate,yg=Ty.strTranslate,ABe=Es(),HI=aa(),MBe=ul(),jX=gg(),Op=jX.keyFun,mg=jX.repeat,DBe=jX.unwrap,lT=GX(),qo=y5(),IBe=UX(),VUt=TBe();function SBe(e,t,r){return Ty.aggNums(e,null,t,r)}function FBe(e,t){return KX(SBe(Math.min,e,t),SBe(Math.max,e,t))}function GI(e){var t=e.range;return t?KX(t[0],t[1]):FBe(e.values,e._length)}function KX(e,t){return(isNaN(e)||!isFinite(e))&&(e=0),(isNaN(t)||!isFinite(t))&&(t=0),e===t&&(e===0?(e-=1,t+=1):(e*=.9,t*=1.1)),[e,t]}function HUt(e,t){return t?function(r,i){var n=t[i];return n==null?e(r):n}:e}function GUt(e,t,r,i,n){var a=GI(r);return i?bc.scale.ordinal().domain(i.map(HUt(LBe(r.tickformat),n))).range(i.map(function(o){var s=(o-a[0])/(a[1]-a[0]);return e-t+s*(2*t-e)})):bc.scale.linear().domain(a).range([e-t,t])}function YUt(e,t){return bc.scale.linear().range([t,e-t])}function WUt(e,t){return bc.scale.linear().domain(GI(e)).range([t,1-t])}function XUt(e){if(e.tickvals){var t=GI(e);return bc.scale.ordinal().domain(e.tickvals).range(e.tickvals.map(function(r){return(r-t[0])/(t[1]-t[0])}))}}function ZUt(e){var t=e.map(function(a){return a[0]}),r=e.map(function(a){var o=PBe(a[1]);return bc.rgb("rgb("+o[0]+","+o[1]+","+o[2]+")")}),i=function(a){return function(o){return o[a]}},n="rgb".split("").map(function(a){return bc.scale.linear().clamp(!0).domain(t).range(r.map(i(a)))});return function(a){return n.map(function(o){return o(a)})}}function ZX(e){return e.dimensions.some(function(t){return t.brush.filterSpecified})}function jUt(e,t,r){var i=DBe(t),n=i.trace,a=lT.convertTypedArray(i.lineColor),o=n.line,s={color:PBe(n.unselected.line.color),opacity:n.unselected.line.opacity},l=MBe.extractOpts(o),u=l.reversescale?MBe.flipScale(i.cscale):i.cscale,f=n.domain,c=n.dimensions,h=e.width,v=n.labelangle,d=n.labelside,_=n.labelfont,T=n.tickfont,p=n.rangefont,M=Ty.extendDeepNoArrays({},o,{color:a.map(bc.scale.linear().domain(GI({values:a,range:[l.min,l.max],_length:n._length}))),blockLineCount:qo.blockLineCount,canvasOverdrag:qo.overdrag*qo.canvasPixelRatio}),b=Math.floor(h*(f.x[1]-f.x[0])),w=Math.floor(e.height*(f.y[1]-f.y[0])),k=e.margin||{l:80,r:80,t:100,b:80},x=b,E=w;return{key:r,colCount:c.filter(lT.isVisible).length,dimensions:c,tickDistance:qo.tickDistance,unitToColor:ZUt(u),lines:M,deselectedLines:s,labelAngle:v,labelSide:d,labelFont:_,tickFont:T,rangeFont:p,layoutWidth:h,layoutHeight:e.height,domain:f,translateX:f.x[0]*h,translateY:e.height-f.y[1]*e.height,pad:k,canvasWidth:x*qo.canvasPixelRatio+2*M.canvasOverdrag,canvasHeight:E*qo.canvasPixelRatio,width:x,height:E,canvasPixelRatio:qo.canvasPixelRatio}}function KUt(e,t,r){var i=r.width,n=r.height,a=r.dimensions,o=r.canvasPixelRatio,s=function(h){return i*h/Math.max(1,r.colCount-1)},l=qo.verticalPadding/n,u=YUt(n,qo.verticalPadding),f={key:r.key,xScale:s,model:r,inBrushDrag:!1},c={};return f.dimensions=a.filter(lT.isVisible).map(function(h,v){var d=WUt(h,l),_=c[h.label];c[h.label]=(_||0)+1;var T=h.label+(_?"__"+_:""),p=h.constraintrange,M=p&&p.length;M&&!WX(p[0])&&(p=[p]);var b=M?p.map(function(D){return D.map(d)}):[[-1/0,1/0]],w=function(){var D=f;D.focusLayer&&D.focusLayer.render(D.panels,!0);var z=ZX(D);!e.contextShown()&&z?(D.contextLayer&&D.contextLayer.render(D.panels,!0),e.contextShown(!0)):e.contextShown()&&!z&&(D.contextLayer&&D.contextLayer.render(D.panels,!0,!0),e.contextShown(!1))},k=h.values;k.length>h._length&&(k=k.slice(0,h._length));var x=h.tickvals,E;function S(D,z){return{val:D,text:E[z]}}function g(D,z){return D.val-z.val}if(WX(x)&&x.length){Ty.isTypedArray(x)&&(x=Array.from(x)),E=h.ticktext,!WX(E)||!E.length?E=x.map(LBe(h.tickformat)):E.length>x.length?E=E.slice(0,x.length):x.length>E.length&&(x=x.slice(0,E.length));for(var C=1;C<x.length;C++)if(x[C]<x[C-1]){for(var A=x.map(S).sort(g),P=0;P<x.length;P++)x[P]=A[P].val,E[P]=A[P].text;break}}else x=void 0;return k=lT.convertTypedArray(k),{key:T,label:h.label,tickFormat:h.tickformat,tickvals:x,ticktext:E,ordinal:lT.isOrdinal(h),multiselect:h.multiselect,xIndex:v,crossfilterDimensionIndex:v,visibleIndex:h._index,height:n,values:k,paddedUnitValues:k.map(d),unitTickvals:x&&x.map(d),xScale:s,x:s(v),canvasX:s(v)*o,unitToPaddedPx:u,domainScale:GUt(n,qo.verticalPadding,h,x,E),ordinalScale:XUt(h),parent:f,model:r,brush:IBe.makeBrush(e,M,b,function(){e.linePickActive(!1)},w,function(D){if(f.focusLayer.render(f.panels,!0),f.pickLayer&&f.pickLayer.render(f.panels,!0),e.linePickActive(!0),t&&t.filterChanged){var z=d.invert,O=D.map(function(V){return V.map(z).sort(Ty.sorterAsc)}).sort(function(V,B){return V[0]-B[0]});t.filterChanged(f.key,h._index,O)}})}}),f}function EBe(e){e.classed(qo.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function JUt(){var e=!0,t=!1;return{linePickActive:function(r){return arguments.length?e=!!r:e},contextShown:function(r){return arguments.length?t=!!r:t}}}function kBe(e,t){var r=t==="top"?1:-1,i=e*Math.PI/180,n=Math.sin(i),a=Math.cos(i);return{dir:r,dx:n,dy:a,degrees:e}}function XX(e,t,r){for(var i=t.panels||(t.panels=[]),n=e.data(),a=0;a<n.length-1;a++){var o=i[a]||(i[a]={}),s=n[a],l=n[a+1];o.dim0=s,o.dim1=l,o.canvasX=s.canvasX,o.panelSizeX=l.canvasX-s.canvasX,o.panelSizeY=t.model.canvasHeight,o.y=0,o.canvasY=0,o.plotGlPixelRatio=r}}function QUt(e){for(var t=0;t<e.length;t++)for(var r=0;r<e[t].length;r++)for(var i=e[t][r].trace,n=i.dimensions,a=0;a<n.length;a++){var o=n[a].values,s=n[a]._ax;s&&(s.range?s.range=KX(s.range[0],s.range[1]):s.range=FBe(o,i._length),s.dtick||(s.dtick=.01*(Math.abs(s.range[1]-s.range[0])||1)),s.tickformat=n[a].tickformat,RBe.calcTicks(s),s.cleanRange())}}function qBe(e,t){return RBe.tickText(e._ax,t,!1).text}function CBe(e,t){if(e.ordinal)return"";var r=e.domainScale.domain(),i=r[t?r.length-1:0];return qBe(e.model.dimensions[e.visibleIndex],i)}zBe.exports=function(t,r,i,n){var a=t._context.staticPlot,o=t._fullLayout,s=o._toppaper,l=o._glcontainer,u=t._context.plotGlPixelRatio,f=t._fullLayout.paper_bgcolor;QUt(r);var c=JUt(),h=r.filter(function(P){return DBe(P).trace.visible}).map(jUt.bind(0,i)).map(KUt.bind(0,c,n));l.each(function(P,D){return Ty.extendFlat(P,h[D])});var v=l.selectAll(".gl-canvas").each(function(P){P.viewModel=h[0],P.viewModel.plotGlPixelRatio=u,P.viewModel.paperColor=f,P.model=P.viewModel?P.viewModel.model:null}),d=null,_=v.filter(function(P){return P.pick});_.style("pointer-events",a?"none":"auto").on("mousemove",function(P){if(c.linePickActive()&&P.lineLayer&&n&&n.hover){var D=bc.event,z=this.width,O=this.height,V=bc.mouse(this),B=V[0],F=V[1];if(B<0||F<0||B>=z||F>=O)return;var N=P.lineLayer.readPixel(B,O-1-F),Z=N[3]!==0,J=Z?N[2]+256*(N[1]+256*N[0]):null,re={x:B,y:F,clientX:D.clientX,clientY:D.clientY,dataIndex:P.model.key,curveNumber:J};J!==d&&(Z?n.hover(re):n.unhover&&n.unhover(re),d=J)}}),v.style("opacity",function(P){return P.pick?0:1}),s.style("background","rgba(255, 255, 255, 0)");var T=s.selectAll("."+qo.cn.parcoords).data(h,Op);T.exit().remove(),T.enter().append("g").classed(qo.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),T.attr("transform",function(P){return yg(P.model.translateX,P.model.translateY)});var p=T.selectAll("."+qo.cn.parcoordsControlView).data(mg,Op);p.enter().append("g").classed(qo.cn.parcoordsControlView,!0),p.attr("transform",function(P){return yg(P.model.pad.l,P.model.pad.t)});var M=p.selectAll("."+qo.cn.yAxis).data(function(P){return P.dimensions},Op);M.enter().append("g").classed(qo.cn.yAxis,!0),p.each(function(P){XX(M,P,u)}),v.each(function(P){if(P.viewModel){!P.lineLayer||n?P.lineLayer=VUt(this,P):P.lineLayer.update(P),(P.key||P.key===0)&&(P.viewModel[P.key]=P.lineLayer);var D=!P.context||n;P.lineLayer.render(P.viewModel.panels,D)}}),M.attr("transform",function(P){return yg(P.xScale(P.xIndex),0)}),M.call(bc.behavior.drag().origin(function(P){return P}).on("drag",function(P){var D=P.parent;c.linePickActive(!1),P.x=Math.max(-qo.overdrag,Math.min(P.model.width+qo.overdrag,bc.event.x)),P.canvasX=P.x*P.model.canvasPixelRatio,M.sort(function(z,O){return z.x-O.x}).each(function(z,O){z.xIndex=O,z.x=P===z?z.x:z.xScale(z.xIndex),z.canvasX=z.x*z.model.canvasPixelRatio}),XX(M,D,u),M.filter(function(z){return Math.abs(P.xIndex-z.xIndex)!==0}).attr("transform",function(z){return yg(z.xScale(z.xIndex),0)}),bc.select(this).attr("transform",yg(P.x,0)),M.each(function(z,O,V){V===P.parent.key&&(D.dimensions[O]=z)}),D.contextLayer&&D.contextLayer.render(D.panels,!1,!ZX(D)),D.focusLayer.render&&D.focusLayer.render(D.panels)}).on("dragend",function(P){var D=P.parent;P.x=P.xScale(P.xIndex),P.canvasX=P.x*P.model.canvasPixelRatio,XX(M,D,u),bc.select(this).attr("transform",function(z){return yg(z.x,0)}),D.contextLayer&&D.contextLayer.render(D.panels,!1,!ZX(D)),D.focusLayer&&D.focusLayer.render(D.panels),D.pickLayer&&D.pickLayer.render(D.panels,!0),c.linePickActive(!0),n&&n.axesMoved&&n.axesMoved(D.key,D.dimensions.map(function(z){return z.crossfilterDimensionIndex}))})),M.exit().remove();var b=M.selectAll("."+qo.cn.axisOverlays).data(mg,Op);b.enter().append("g").classed(qo.cn.axisOverlays,!0),b.selectAll("."+qo.cn.axis).remove();var w=b.selectAll("."+qo.cn.axis).data(mg,Op);w.enter().append("g").classed(qo.cn.axis,!0),w.each(function(P){var D=P.model.height/P.model.tickDistance,z=P.domainScale,O=z.domain();bc.select(this).call(bc.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(D,P.tickFormat).tickValues(P.ordinal?O:null).tickFormat(function(V){return lT.isOrdinal(P)?V:qBe(P.model.dimensions[P.visibleIndex],V)}).scale(z)),HI.font(w.selectAll("text"),P.model.tickFont)}),w.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),w.selectAll("text").style("text-shadow",ABe.makeTextShadow(f)).style("cursor","default");var k=b.selectAll("."+qo.cn.axisHeading).data(mg,Op);k.enter().append("g").classed(qo.cn.axisHeading,!0);var x=k.selectAll("."+qo.cn.axisTitle).data(mg,Op);x.enter().append("text").classed(qo.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",a?"none":"auto"),x.text(function(P){return P.label}).each(function(P){var D=bc.select(this);HI.font(D,P.model.labelFont),ABe.convertToTspans(D,t)}).attr("transform",function(P){var D=kBe(P.model.labelAngle,P.model.labelSide),z=qo.axisTitleOffset;return(D.dir>0?"":yg(0,2*z+P.model.height))+UUt(D.degrees)+yg(-z*D.dx,-z*D.dy)}).attr("text-anchor",function(P){var D=kBe(P.model.labelAngle,P.model.labelSide),z=Math.abs(D.dx),O=Math.abs(D.dy);return 2*z>O?D.dir*D.dx<0?"start":"end":"middle"});var E=b.selectAll("."+qo.cn.axisExtent).data(mg,Op);E.enter().append("g").classed(qo.cn.axisExtent,!0);var S=E.selectAll("."+qo.cn.axisExtentTop).data(mg,Op);S.enter().append("g").classed(qo.cn.axisExtentTop,!0),S.attr("transform",yg(0,-qo.axisExtentOffset));var g=S.selectAll("."+qo.cn.axisExtentTopText).data(mg,Op);g.enter().append("text").classed(qo.cn.axisExtentTopText,!0).call(EBe),g.text(function(P){return CBe(P,!0)}).each(function(P){HI.font(bc.select(this),P.model.rangeFont)});var C=E.selectAll("."+qo.cn.axisExtentBottom).data(mg,Op);C.enter().append("g").classed(qo.cn.axisExtentBottom,!0),C.attr("transform",function(P){return yg(0,P.model.height+qo.axisExtentOffset)});var A=C.selectAll("."+qo.cn.axisExtentBottomText).data(mg,Op);A.enter().append("text").classed(qo.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(EBe),A.text(function(P){return CBe(P,!1)}).each(function(P){HI.font(bc.select(this),P.model.rangeFont)}),IBe.ensureAxisBrush(b,f,t)}});var QX=ne((JX,VBe)=>{"use strict";var $Ut=OBe(),eVt=TI(),BBe=GX().isVisible,UBe={};function NBe(e,t,r){var i=t.indexOf(r),n=e.indexOf(i);return n===-1&&(n+=t.length),n}function tVt(e,t){return function(i,n){return NBe(e,t,i)-NBe(e,t,n)}}var JX=VBe.exports=function(t,r){var i=t._fullLayout,n=eVt(t,[],UBe);if(n){var a={},o={},s={},l={},u=i._size;r.forEach(function(d,_){var T=d[0].trace;s[_]=T.index;var p=l[_]=T._fullInput.index;a[_]=t.data[p].dimensions,o[_]=t.data[p].dimensions.slice()});var f=function(d,_,T){var p=o[d][_],M=T.map(function(S){return S.slice()}),b="dimensions["+_+"].constraintrange",w=i._tracePreGUI[t._fullData[s[d]]._fullInput.uid];if(w[b]===void 0){var k=p.constraintrange;w[b]=k||null}var x=t._fullData[s[d]].dimensions[_];M.length?(M.length===1&&(M=M[0]),p.constraintrange=M,x.constraintrange=M.slice(),M=[M]):(delete p.constraintrange,delete x.constraintrange,M=null);var E={};E[b]=M,t.emit("plotly_restyle",[E,[l[d]]])},c=function(d){t.emit("plotly_hover",d)},h=function(d){t.emit("plotly_unhover",d)},v=function(d,_){var T=tVt(_,o[d].filter(BBe));a[d].sort(T),o[d].filter(function(p){return!BBe(p)}).sort(function(p){return o[d].indexOf(p)}).forEach(function(p){a[d].splice(a[d].indexOf(p),1),a[d].splice(o[d].indexOf(p),0,p)}),t.emit("plotly_restyle",[{dimensions:[a[d]]},[l[d]]])};$Ut(t,r,{width:u.w,height:u.h,margin:{t:u.t,r:u.r,b:u.b,l:u.l}},{filterChanged:f,hover:c,unhover:h,axesMoved:v})}};JX.reglPrecompiled=UBe});var GBe=ne(x5=>{"use strict";var HBe=Ai(),rVt=vc().getModuleCalcData,nVt=QX(),iVt=kd();x5.name="parcoords";x5.plot=function(e){var t=rVt(e.calcdata,"parcoords")[0];t.length&&nVt(e,t)};x5.clean=function(e,t,r,i){var n=i._has&&i._has("parcoords"),a=t._has&&t._has("parcoords");n&&!a&&(i._paperdiv.selectAll(".parcoords").remove(),i._glimages.selectAll("*").remove())};x5.toSVG=function(e){var t=e._fullLayout._glimages,r=HBe.select(e).selectAll(".svg-container"),i=r.filter(function(a,o){return o===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function n(){var a=this,o=a.toDataURL("image/png"),s=t.append("svg:image");s.attr({xmlns:iVt.svg,"xlink:href":o,preserveAspectRatio:"none",x:0,y:0,width:a.style.width,height:a.style.height})}i.each(n),window.setTimeout(function(){HBe.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}});var WBe=ne((myr,YBe)=>{"use strict";YBe.exports={attributes:OX(),supplyDefaults:cBe(),calc:vBe(),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:GBe(),categories:["gl","regl","noOpacity","noHover"],meta:{}}});var jBe=ne((xyr,ZBe)=>{"use strict";var XBe=WBe();XBe.plot=QX();ZBe.exports=XBe});var JBe=ne((_yr,KBe)=>{"use strict";KBe.exports=jBe()});var $X=ne((byr,tNe)=>{"use strict";var $Be=oa().extendFlat,aVt=es(),QBe=ll(),oVt=Ps(),eNe=Ba().hovertemplateAttrs,sVt=fl().attributes,lVt=$Be({editType:"calc"},oVt("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:eNe({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});tNe.exports={domain:sVt({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:$Be({},aVt.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:eNe({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:QBe({editType:"calc"}),tickfont:QBe({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:lVt,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}});var iNe=ne((wyr,nNe)=>{"use strict";var uT=Wt(),uVt=Uh().hasColorscale,fVt=Kf(),cVt=fl().defaults,hVt=ch(),rNe=$X(),vVt=MI(),dVt=uh().isTypedArraySpec;function pVt(e,t,r,i,n){n("line.shape"),n("line.hovertemplate");var a=n("line.color",i.colorway[0]);if(uVt(e,"line")&&uT.isArrayOrTypedArray(a)){if(a.length)return n("line.colorscale"),fVt(e,t,i,n,{prefix:"line.",cLetter:"c"}),a.length;t.line.color=r}return 1/0}function gVt(e,t){function r(u,f){return uT.coerce(e,t,rNe.dimensions,u,f)}var i=r("values"),n=r("visible");if(i&&i.length||(n=t.visible=!1),n){r("label"),r("displayindex",t._index);var a=e.categoryarray,o=uT.isArrayOrTypedArray(a)&&a.length>0||dVt(a),s;o&&(s="array");var l=r("categoryorder",s);l==="array"?(r("categoryarray"),r("ticktext")):(delete e.categoryarray,delete e.ticktext),!o&&l==="array"&&(t.categoryorder="trace")}}nNe.exports=function(t,r,i,n){function a(f,c){return uT.coerce(t,r,rNe,f,c)}var o=hVt(t,r,{name:"dimensions",handleItemDefaults:gVt}),s=pVt(t,r,i,n,a);cVt(r,n,a),(!Array.isArray(o)||!o.length)&&(r.visible=!1),vVt(r,o,"values",s),a("hoveron"),a("hovertemplate"),a("arrangement"),a("bundlecolors"),a("sortpaths"),a("counts");var l={family:n.font.family,size:Math.round(n.font.size),color:n.font.color};uT.coerceFont(a,"labelfont",l);var u={family:n.font.family,size:Math.round(n.font.size/1.2),color:n.font.color};uT.coerceFont(a,"tickfont",u)}});var oNe=ne((Tyr,aNe)=>{"use strict";var yVt=gg().wrap,mVt=Uh().hasColorscale,xVt=gv(),_Vt=Fq(),bVt=aa(),_5=Wt(),wVt=la();aNe.exports=function(t,r){var i=_5.filterVisible(r.dimensions);if(i.length===0)return[];var n=i.map(function(g){var C;if(g.categoryorder==="trace")C=null;else if(g.categoryorder==="array")C=g.categoryarray;else{C=_Vt(g.values);for(var A=!0,P=0;P<C.length;P++)if(!wVt(C[P])){A=!1;break}C.sort(A?_5.sorterAsc:void 0),g.categoryorder==="category descending"&&(C=C.reverse())}return CVt(g.values,C)}),a,o,s;_5.isArrayOrTypedArray(r.counts)?a=r.counts:a=[r.counts],LVt(i),i.forEach(function(g,C){PVt(g,n[C])});var l=r.line,u;l?(mVt(r,"line")&&xVt(t,r,{vals:r.line.color,containerStr:"line",cLetter:"c"}),u=bVt.tryColorscale(l)):u=_5.identity;function f(g){var C,A;return _5.isArrayOrTypedArray(l.color)?(C=l.color[g%l.color.length],A=C):C=l.color,{color:u(C),rawColor:A}}var c=i[0].values.length,h={},v=n.map(function(g){return g.inds});s=0;var d,_;for(d=0;d<c;d++){var T=[];for(_=0;_<v.length;_++)T.push(v[_][d]);o=a[d%a.length],s+=o;var p=f(d),M=T+"-"+p.rawColor;h[M]===void 0&&(h[M]=EVt(T,p.color,p.rawColor)),kVt(h[M],d,o)}var b=i.map(function(g,C){return AVt(C,g._index,g._displayindex,g.label,s)});for(d=0;d<c;d++)for(o=a[d%a.length],_=0;_<b.length;_++){var w=b[_].containerInd,k=n[_].inds[d],x=b[_].categories;if(x[k]===void 0){var E=r.dimensions[w]._categoryarray[k],S=r.dimensions[w]._ticktext[k];x[k]=MVt(_,k,E,S)}SVt(x[k],d,o)}return yVt(TVt(b,h,s))};function TVt(e,t,r){var i=e.map(function(n){return n.categories.length}).reduce(function(n,a){return Math.max(n,a)});return{dimensions:e,paths:t,trace:void 0,maxCats:i,count:r}}function AVt(e,t,r,i,n){return{dimensionInd:e,containerInd:t,displayInd:r,dimensionLabel:i,count:n,categories:[],dragX:null}}function MVt(e,t,r,i){return{dimensionInd:e,categoryInd:t,categoryValue:r,displayInd:t,categoryLabel:i,valueInds:[],count:0,dragY:null}}function SVt(e,t,r){e.valueInds.push(t),e.count+=r}function EVt(e,t,r){return{categoryInds:e,color:t,rawColor:r,valueInds:[],count:0}}function kVt(e,t,r){e.valueInds.push(t),e.count+=r}function CVt(e,t){t==null?t=[]:t=t.map(function(u){return u});var r={},i={},n=[];t.forEach(function(u,f){r[u]=0,i[u]=f});for(var a=0;a<e.length;a++){var o=e[a],s;r[o]===void 0?(r[o]=1,s=t.push(o)-1,i[o]=s):(r[o]++,s=i[o]),n.push(s)}var l=t.map(function(u){return r[u]});return{uniqueValues:t,uniqueCounts:l,inds:n}}function LVt(e){var t=e.map(function(i){return i.displayindex}),r;if(RVt(t))for(r=0;r<e.length;r++)e[r]._displayindex=e[r].displayindex;else for(r=0;r<e.length;r++)e[r]._displayindex=r}function PVt(e,t){e._categoryarray=t.uniqueValues,e.ticktext===null||e.ticktext===void 0?e._ticktext=[]:e._ticktext=e.ticktext.slice();for(var r=e._ticktext.length;r<t.uniqueValues.length;r++)e._ticktext.push(t.uniqueValues[r])}function RVt(e){for(var t=new Array(e.length),r=0;r<e.length;r++){if(e[r]<0||e[r]>=e.length||t[e[r]]!==void 0)return!1;t[e[r]]=!0}return!0}});var gNe=ne((Ayr,pNe)=>{"use strict";var zo=Ai(),DVt=(M_(),Yb(A_)).interpolateNumber,IVt=$4(),T5=Ol(),T1=Wt(),b5=T1.strTranslate,sNe=aa(),eZ=Xf(),lNe=Es();function FVt(e,t,r,i){var n=t._context.staticPlot,a=e.map(KVt.bind(0,t,r)),o=i.selectAll("g.parcatslayer").data([null]);o.enter().append("g").attr("class","parcatslayer").style("pointer-events",n?"none":"all");var s=o.selectAll("g.trace.parcats").data(a,Ay),l=s.enter().append("g").attr("class","trace parcats");s.attr("transform",function(b){return b5(b.x,b.y)}),l.append("g").attr("class","paths");var u=s.select("g.paths"),f=u.selectAll("path.path").data(function(b){return b.paths},Ay);f.attr("fill",function(b){return b.model.color});var c=f.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(b){return b.model.color}).attr("fill-opacity",0);nZ(c),f.attr("d",function(b){return b.svgD}),c.empty()||f.sort(tZ),f.exit().remove(),f.on("mouseover",qVt).on("mouseout",zVt).on("click",OVt),l.append("g").attr("class","dimensions");var h=s.select("g.dimensions"),v=h.selectAll("g.dimension").data(function(b){return b.dimensions},Ay);v.enter().append("g").attr("class","dimension"),v.attr("transform",function(b){return b5(b.x,0)}),v.exit().remove();var d=v.selectAll("g.category").data(function(b){return b.categories},Ay),_=d.enter().append("g").attr("class","category");d.attr("transform",function(b){return b5(0,b.y)}),_.append("rect").attr("class","catrect").attr("pointer-events","none"),d.select("rect.catrect").attr("fill","none").attr("width",function(b){return b.width}).attr("height",function(b){return b.height}),fNe(_);var T=d.selectAll("rect.bandrect").data(function(b){return b.bands},Ay);T.each(function(){T1.raiseToTop(this)}),T.attr("fill",function(b){return b.color});var p=T.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(b){return b.color}).attr("fill-opacity",0);T.attr("fill",function(b){return b.color}).attr("width",function(b){return b.width}).attr("height",function(b){return b.height}).attr("y",function(b){return b.y}).attr("cursor",function(b){return b.parcatsViewModel.arrangement==="fixed"?"default":b.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),aZ(p),T.exit().remove(),_.append("text").attr("class","catlabel").attr("pointer-events","none");var M=t._fullLayout.paper_bgcolor;d.select("text.catlabel").attr("text-anchor",function(b){return w5(b)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",lNe.makeTextShadow(M)).style("fill","rgb(0, 0, 0)").attr("x",function(b){return w5(b)?b.width+5:-5}).attr("y",function(b){return b.height/2}).text(function(b){return b.model.categoryLabel}).each(function(b){sNe.font(zo.select(this),b.parcatsViewModel.categorylabelfont),lNe.convertToTspans(zo.select(this),t)}),_.append("text").attr("class","dimlabel"),d.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(b){return b.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(b){return b.width/2}).attr("y",-5).text(function(b,w){return w===0?b.parcatsViewModel.model.dimensions[b.model.dimensionInd].dimensionLabel:null}).each(function(b){sNe.font(zo.select(this),b.parcatsViewModel.labelfont)}),d.selectAll("rect.bandrect").on("mouseover",YVt).on("mouseout",WVt),d.exit().remove(),v.call(zo.behavior.drag().origin(function(b){return{x:b.x,y:0}}).on("dragstart",XVt).on("drag",ZVt).on("dragend",jVt)),s.each(function(b){b.traceSelection=zo.select(this),b.pathSelection=zo.select(this).selectAll("g.paths").selectAll("path.path"),b.dimensionSelection=zo.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),s.exit().remove()}pNe.exports=function(e,t,r,i){FVt(r,e,i,t)};function Ay(e){return e.key}function w5(e){var t=e.parcatsViewModel.dimensions.length,r=e.parcatsViewModel.dimensions[t-1].model.dimensionInd;return e.model.dimensionInd===r}function tZ(e,t){return e.model.rawColor>t.model.rawColor?1:e.model.rawColor<t.model.rawColor?-1:0}function qVt(e){if(!e.parcatsViewModel.dragDimension&&e.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){T1.raiseToTop(this),iZ(zo.select(this));var t=A5(e),r=rZ(e);if(e.parcatsViewModel.graphDiv.emit("plotly_hover",{points:t,event:zo.event,constraints:r}),e.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var i=zo.mouse(this)[0],n=e.parcatsViewModel.graphDiv,a=e.parcatsViewModel.trace,o=n._fullLayout,s=o._paperdiv.node().getBoundingClientRect(),l=e.parcatsViewModel.graphDiv.getBoundingClientRect(),u,f,c;for(c=0;c<e.leftXs.length-1;c++)if(e.leftXs[c]+e.dimWidths[c]-2<=i&&i<=e.leftXs[c+1]+2){var h=e.parcatsViewModel.dimensions[c],v=e.parcatsViewModel.dimensions[c+1];u=(h.x+h.width+v.x)/2,f=(e.topYs[c]+e.topYs[c+1]+e.height)/2;break}var d=e.parcatsViewModel.x+u,_=e.parcatsViewModel.y+f,T=eZ.mostReadable(e.model.color,["black","white"]),p=e.model.count,M=p/e.parcatsViewModel.model.count,b={countLabel:p,probabilityLabel:M.toFixed(3)},w=[];e.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&w.push(["Count:",b.countLabel].join(" ")),e.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&w.push(["P:",b.probabilityLabel].join(" "));var k=w.join("<br>"),x=zo.mouse(n)[0];T5.loneHover({trace:a,x:d-s.left+l.left,y:_-s.top+l.top,text:k,color:e.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:T,idealAlign:x<d?"right":"left",hovertemplate:(a.line||{}).hovertemplate,hovertemplateLabels:b,eventData:[{data:a._input,fullData:a,count:p,probability:M}]},{container:o._hoverlayer.node(),outerContainer:o._paper.node(),gd:n})}}}function zVt(e){if(!e.parcatsViewModel.dragDimension&&(nZ(zo.select(this)),T5.loneUnhover(e.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),e.parcatsViewModel.pathSelection.sort(tZ),e.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var t=A5(e),r=rZ(e);e.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:t,event:zo.event,constraints:r})}}function A5(e){for(var t=[],r=hNe(e.parcatsViewModel),i=0;i<e.model.valueInds.length;i++){var n=e.model.valueInds[i];t.push({curveNumber:r,pointNumber:n})}return t}function rZ(e){for(var t={},r=e.parcatsViewModel.model.dimensions,i=0;i<r.length;i++){var n=r[i],a=n.categories[e.model.categoryInds[i]];t[n.containerInd]=a.categoryValue}return e.model.rawColor!==void 0&&(t.color=e.model.rawColor),t}function OVt(e){if(e.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var t=A5(e),r=rZ(e);e.parcatsViewModel.graphDiv.emit("plotly_click",{points:t,event:zo.event,constraints:r})}}function nZ(e){e.attr("fill",function(t){return t.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function iZ(e){e.attr("fill-opacity",.8).attr("stroke",function(t){return eZ.mostReadable(t.model.color,["black","white"])}).attr("stroke-width",.3)}function BVt(e){e.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function fNe(e){e.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function NVt(e){e.attr("stroke","black").attr("stroke-width",1.5)}function aZ(e){e.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function YI(e){var t=e.parcatsViewModel.pathSelection,r=e.categoryViewModel.model.dimensionInd,i=e.categoryViewModel.model.categoryInd;return t.filter(function(n){return n.model.categoryInds[r]===i&&n.model.color===e.color})}function UVt(e){var t=zo.select(e.parentNode).selectAll("rect.bandrect");t.each(function(r){var i=YI(r);iZ(i),i.each(function(){T1.raiseToTop(this)})}),BVt(zo.select(e.parentNode))}function VVt(e){var t=zo.select(e).datum(),r=YI(t);iZ(r),r.each(function(){T1.raiseToTop(this)}),zo.select(e.parentNode).selectAll("rect.bandrect").filter(function(i){return i.color===t.color}).each(function(){T1.raiseToTop(this),NVt(zo.select(this))})}function oZ(e,t,r){var i=zo.select(e).datum(),n=i.categoryViewModel.model,a=i.parcatsViewModel.graphDiv,o=zo.select(e.parentNode).selectAll("rect.bandrect"),s=[];o.each(function(u){var f=YI(u);f.each(function(c){Array.prototype.push.apply(s,A5(c))})});var l={};l[n.dimensionInd]=n.categoryValue,a.emit(t,{points:s,event:r,constraints:l})}function sZ(e,t,r){var i=zo.select(e).datum(),n=i.categoryViewModel.model,a=i.parcatsViewModel.graphDiv,o=YI(i),s=[];o.each(function(u){Array.prototype.push.apply(s,A5(u))});var l={};l[n.dimensionInd]=n.categoryValue,i.rawColor!==void 0&&(l.color=i.rawColor),a.emit(t,{points:s,event:r,constraints:l})}function cNe(e,t,r){e._fullLayout._calcInverseTransform(e);var i=e._fullLayout._invScaleX,n=e._fullLayout._invScaleY,a=zo.select(r.parentNode).select("rect.catrect"),o=a.node().getBoundingClientRect(),s=a.datum(),l=s.parcatsViewModel,u=l.model.dimensions[s.model.dimensionInd],f=l.trace,c=o.top+o.height/2,h,v;l.dimensions.length>1&&u.displayInd===l.dimensions.length-1?(h=o.left,v="left"):(h=o.left+o.width,v="right");var d=s.model.count,_=s.model.categoryLabel,T=d/s.parcatsViewModel.model.count,p={countLabel:d,categoryLabel:_,probabilityLabel:T.toFixed(3)},M=[];s.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&M.push(["Count:",p.countLabel].join(" ")),s.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&M.push(["P("+p.categoryLabel+"):",p.probabilityLabel].join(" "));var b=M.join("<br>");return{trace:f,x:i*(h-t.left),y:n*(c-t.top),text:b,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:v,hovertemplate:f.hovertemplate,hovertemplateLabels:p,eventData:[{data:f._input,fullData:f,count:d,category:_,probability:T}]}}function HVt(e,t,r){var i=[];return zo.select(r.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){var n=this;i.push(cNe(e,t,n))}),i}function GVt(e,t,r){e._fullLayout._calcInverseTransform(e);var i=e._fullLayout._invScaleX,n=e._fullLayout._invScaleY,a=r.getBoundingClientRect(),o=zo.select(r).datum(),s=o.categoryViewModel,l=s.parcatsViewModel,u=l.model.dimensions[s.model.dimensionInd],f=l.trace,c=a.y+a.height/2,h,v;l.dimensions.length>1&&u.displayInd===l.dimensions.length-1?(h=a.left,v="left"):(h=a.left+a.width,v="right");var d=s.model.categoryLabel,_=o.parcatsViewModel.model.count,T=0;o.categoryViewModel.bands.forEach(function(C){C.color===o.color&&(T+=C.count)});var p=s.model.count,M=0;l.pathSelection.each(function(C){C.model.color===o.color&&(M+=C.model.count)});var b=T/_,w=T/M,k=T/p,x={countLabel:_,categoryLabel:d,probabilityLabel:b.toFixed(3)},E=[];s.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&E.push(["Count:",x.countLabel].join(" ")),s.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(E.push("P(color \u2229 "+d+"): "+x.probabilityLabel),E.push("P("+d+" | color): "+w.toFixed(3)),E.push("P(color | "+d+"): "+k.toFixed(3)));var S=E.join("<br>"),g=eZ.mostReadable(o.color,["black","white"]);return{trace:f,x:i*(h-t.left),y:n*(c-t.top),text:S,color:o.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:g,fontSize:10,idealAlign:v,hovertemplate:f.hovertemplate,hovertemplateLabels:x,eventData:[{data:f._input,fullData:f,category:d,count:_,probability:b,categorycount:p,colorcount:M,bandcolorcount:T}]}}function YVt(e){if(!e.parcatsViewModel.dragDimension&&e.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var t=zo.mouse(this)[1];if(t<-1)return;var r=e.parcatsViewModel.graphDiv,i=r._fullLayout,n=i._paperdiv.node().getBoundingClientRect(),a=e.parcatsViewModel.hoveron,o=this;if(a==="color"?(VVt(o),sZ(o,"plotly_hover",zo.event)):(UVt(o),oZ(o,"plotly_hover",zo.event)),e.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var s;a==="category"?s=cNe(r,n,o):a==="color"?s=GVt(r,n,o):a==="dimension"&&(s=HVt(r,n,o)),s&&T5.loneHover(s,{container:i._hoverlayer.node(),outerContainer:i._paper.node(),gd:r})}}}function WVt(e){var t=e.parcatsViewModel;if(!t.dragDimension&&(nZ(t.pathSelection),fNe(t.dimensionSelection.selectAll("g.category")),aZ(t.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),T5.loneUnhover(t.graphDiv._fullLayout._hoverlayer.node()),t.pathSelection.sort(tZ),t.hoverinfoItems.indexOf("skip")===-1)){var r=e.parcatsViewModel.hoveron,i=this;r==="color"?sZ(i,"plotly_unhover",zo.event):oZ(i,"plotly_unhover",zo.event)}}function XVt(e){e.parcatsViewModel.arrangement!=="fixed"&&(e.dragDimensionDisplayInd=e.model.displayInd,e.initialDragDimensionDisplayInds=e.parcatsViewModel.model.dimensions.map(function(t){return t.displayInd}),e.dragHasMoved=!1,e.dragCategoryDisplayInd=null,zo.select(this).selectAll("g.category").select("rect.catrect").each(function(t){var r=zo.mouse(this)[0],i=zo.mouse(this)[1];-2<=r&&r<=t.width+2&&-2<=i&&i<=t.height+2&&(e.dragCategoryDisplayInd=t.model.displayInd,e.initialDragCategoryDisplayInds=e.model.categories.map(function(n){return n.displayInd}),t.model.dragY=t.y,T1.raiseToTop(this.parentNode),zo.select(this.parentNode).selectAll("rect.bandrect").each(function(n){n.y<i&&i<=n.y+n.height&&(e.potentialClickBand=this)}))}),e.parcatsViewModel.dragDimension=e,T5.loneUnhover(e.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function ZVt(e){if(e.parcatsViewModel.arrangement!=="fixed"&&(e.dragHasMoved=!0,e.dragDimensionDisplayInd!==null)){var t=e.dragDimensionDisplayInd,r=t-1,i=t+1,n=e.parcatsViewModel.dimensions[t];if(e.dragCategoryDisplayInd!==null){var a=n.categories[e.dragCategoryDisplayInd];a.model.dragY+=zo.event.dy;var o=a.model.dragY,s=a.model.displayInd,l=n.categories,u=l[s-1],f=l[s+1];u!==void 0&&o<u.y+u.height/2&&(a.model.displayInd=u.model.displayInd,u.model.displayInd=s),f!==void 0&&o+a.height>f.y+f.height/2&&(a.model.displayInd=f.model.displayInd,f.model.displayInd=s),e.dragCategoryDisplayInd=a.model.displayInd}if(e.dragCategoryDisplayInd===null||e.parcatsViewModel.arrangement==="freeform"){n.model.dragX=zo.event.x;var c=e.parcatsViewModel.dimensions[r],h=e.parcatsViewModel.dimensions[i];c!==void 0&&n.model.dragX<c.x+c.width&&(n.model.displayInd=c.model.displayInd,c.model.displayInd=t),h!==void 0&&n.model.dragX+n.width>h.x&&(n.model.displayInd=h.model.displayInd,h.model.displayInd=e.dragDimensionDisplayInd),e.dragDimensionDisplayInd=n.model.displayInd}uZ(e.parcatsViewModel),lZ(e.parcatsViewModel),dNe(e.parcatsViewModel),vNe(e.parcatsViewModel)}}function jVt(e){if(e.parcatsViewModel.arrangement!=="fixed"&&e.dragDimensionDisplayInd!==null){zo.select(this).selectAll("text").attr("font-weight","normal");var t={},r=hNe(e.parcatsViewModel),i=e.parcatsViewModel.model.dimensions.map(function(h){return h.displayInd}),n=e.initialDragDimensionDisplayInds.some(function(h,v){return h!==i[v]});n&&i.forEach(function(h,v){var d=e.parcatsViewModel.model.dimensions[v].containerInd;t["dimensions["+d+"].displayindex"]=h});var a=!1;if(e.dragCategoryDisplayInd!==null){var o=e.model.categories.map(function(h){return h.displayInd});if(a=e.initialDragCategoryDisplayInds.some(function(h,v){return h!==o[v]}),a){var s=e.model.categories.slice().sort(function(h,v){return h.displayInd-v.displayInd}),l=s.map(function(h){return h.categoryValue}),u=s.map(function(h){return h.categoryLabel});t["dimensions["+e.model.containerInd+"].categoryarray"]=[l],t["dimensions["+e.model.containerInd+"].ticktext"]=[u],t["dimensions["+e.model.containerInd+"].categoryorder"]="array"}}if(e.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!e.dragHasMoved&&e.potentialClickBand&&(e.parcatsViewModel.hoveron==="color"?sZ(e.potentialClickBand,"plotly_click",zo.event.sourceEvent):oZ(e.potentialClickBand,"plotly_click",zo.event.sourceEvent)),e.model.dragX=null,e.dragCategoryDisplayInd!==null){var f=e.parcatsViewModel.dimensions[e.dragDimensionDisplayInd].categories[e.dragCategoryDisplayInd];f.model.dragY=null,e.dragCategoryDisplayInd=null}e.dragDimensionDisplayInd=null,e.parcatsViewModel.dragDimension=null,e.dragHasMoved=null,e.potentialClickBand=null,uZ(e.parcatsViewModel),lZ(e.parcatsViewModel);var c=zo.transition().duration(300).ease("cubic-in-out");c.each(function(){dNe(e.parcatsViewModel,!0),vNe(e.parcatsViewModel,!0)}).each("end",function(){(n||a)&&IVt.restyle(e.parcatsViewModel.graphDiv,t,[r])})}}function hNe(e){for(var t,r=e.graphDiv._fullData,i=0;i<r.length;i++)if(e.key===r[i].uid){t=i;break}return t}function vNe(e,t){t===void 0&&(t=!1);function r(i){return t?i.transition():i}e.pathSelection.data(function(i){return i.paths},Ay),r(e.pathSelection).attr("d",function(i){return i.svgD})}function dNe(e,t){t===void 0&&(t=!1);function r(l){return t?l.transition():l}e.dimensionSelection.data(function(l){return l.dimensions},Ay);var i=e.dimensionSelection.selectAll("g.category").data(function(l){return l.categories},Ay);r(e.dimensionSelection).attr("transform",function(l){return b5(l.x,0)}),r(i).attr("transform",function(l){return b5(0,l.y)});var n=i.select(".dimlabel");n.text(function(l,u){return u===0?l.parcatsViewModel.model.dimensions[l.model.dimensionInd].dimensionLabel:null});var a=i.select(".catlabel");a.attr("text-anchor",function(l){return w5(l)?"start":"end"}).attr("x",function(l){return w5(l)?l.width+5:-5}).each(function(l){var u,f;w5(l)?(u=l.width+5,f="start"):(u=-5,f="end"),zo.select(this).selectAll("tspan").attr("x",u).attr("text-anchor",f)});var o=i.selectAll("rect.bandrect").data(function(l){return l.bands},Ay),s=o.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(l){return l.color}).attr("fill-opacity",0);o.attr("fill",function(l){return l.color}).attr("width",function(l){return l.width}).attr("height",function(l){return l.height}).attr("y",function(l){return l.y}),aZ(s),o.each(function(){T1.raiseToTop(this)}),o.exit().remove()}function KVt(e,t,r){var i=r[0],n=t.margin||{l:80,r:80,t:100,b:80},a=i.trace,o=a.domain,s=t.width,l=t.height,u=Math.floor(s*(o.x[1]-o.x[0])),f=Math.floor(l*(o.y[1]-o.y[0])),c=o.x[0]*s+n.l,h=t.height-o.y[1]*t.height+n.t,v=a.line.shape,d;a.hoverinfo==="all"?d=["count","probability"]:d=(a.hoverinfo||"").split("+");var _={trace:a,key:a.uid,model:i,x:c,y:h,width:u,height:f,hoveron:a.hoveron,hoverinfoItems:d,arrangement:a.arrangement,bundlecolors:a.bundlecolors,sortpaths:a.sortpaths,labelfont:a.labelfont,categorylabelfont:a.tickfont,pathShape:v,dragDimension:null,margin:n,paths:[],dimensions:[],graphDiv:e,traceSelection:null,pathSelection:null,dimensionSelection:null};return i.dimensions&&(uZ(_),lZ(_)),_}function uNe(e,t,r,i,n){var a=[],o=[],s,l;for(l=0;l<r.length-1;l++)s=DVt(r[l]+e[l],e[l+1]),a.push(s(n)),o.push(s(1-n));var u="M "+e[0]+","+t[0];for(u+="l"+r[0]+",0 ",l=1;l<r.length;l++)u+="C"+a[l-1]+","+t[l-1]+" "+o[l-1]+","+t[l]+" "+e[l]+","+t[l],u+="l"+r[l]+",0 ";for(u+="l0,"+i+" ",u+="l -"+r[r.length-1]+",0 ",l=r.length-2;l>=0;l--)u+="C"+o[l]+","+(t[l+1]+i)+" "+a[l]+","+(t[l]+i)+" "+(e[l]+r[l])+","+(t[l]+i),u+="l-"+r[l]+",0 ";return u+="Z",u}function lZ(e){var t=e.dimensions,r=e.model,i=t.map(function(D){return D.categories.map(function(z){return z.y})}),n=e.model.dimensions.map(function(D){return D.categories.map(function(z){return z.displayInd})}),a=e.model.dimensions.map(function(D){return D.displayInd}),o=e.dimensions.map(function(D){return D.model.dimensionInd}),s=t.map(function(D){return D.x}),l=t.map(function(D){return D.width}),u=[];for(var f in r.paths)r.paths.hasOwnProperty(f)&&u.push(r.paths[f]);function c(D){var z=D.categoryInds.map(function(V,B){return n[B][V]}),O=o.map(function(V){return z[V]});return O}u.sort(function(D,z){var O=c(D),V=c(z);return e.sortpaths==="backward"&&(O.reverse(),V.reverse()),O.push(D.valueInds[0]),V.push(z.valueInds[0]),e.bundlecolors&&(O.unshift(D.rawColor),V.unshift(z.rawColor)),O<V?-1:O>V?1:0});for(var h=new Array(u.length),v=t[0].model.count,d=t[0].categories.map(function(D){return D.height}).reduce(function(D,z){return D+z}),_=0;_<u.length;_++){var T=u[_],p;v>0?p=d*(T.count/v):p=0;for(var M=new Array(i.length),b=0;b<T.categoryInds.length;b++){var w=T.categoryInds[b],k=n[b][w],x=a[b];M[x]=i[x][k],i[x][k]+=p;var E=e.dimensions[x].categories[k],S=E.bands.length,g=E.bands[S-1];if(g===void 0||T.rawColor!==g.rawColor){var C=g===void 0?0:g.y+g.height;E.bands.push({key:C,color:T.color,rawColor:T.rawColor,height:p,width:E.width,count:T.count,y:C,categoryViewModel:E,parcatsViewModel:e})}else{var A=E.bands[S-1];A.height+=p,A.count+=T.count}}var P;e.pathShape==="hspline"?P=uNe(s,M,l,p,.5):P=uNe(s,M,l,p,0),h[_]={key:T.valueInds[0],model:T,height:p,leftXs:s,topYs:M,dimWidths:l,svgD:P,parcatsViewModel:e}}e.paths=h}function uZ(e){var t=e.model.dimensions.map(function(o){return{displayInd:o.displayInd,dimensionInd:o.dimensionInd}});t.sort(function(o,s){return o.displayInd-s.displayInd});var r=[];for(var i in t){var n=t[i].dimensionInd,a=e.model.dimensions[n];r.push(JVt(e,a))}e.dimensions=r}function JVt(e,t){var r=40,i=16,n=e.model.dimensions.length,a=t.displayInd,o,s,l;n>1?o=(e.width-2*r-i)/(n-1):o=0,s=r,l=s+o*a;var u=[],f=e.model.maxCats,c=t.categories.length,h=8,v=t.count,d=e.height-h*(f-1),_,T,p,M,b,w=(f-c)*h/2,k=t.categories.map(function(x){return{displayInd:x.displayInd,categoryInd:x.categoryInd}});for(k.sort(function(x,E){return x.displayInd-E.displayInd}),b=0;b<c;b++)M=k[b].categoryInd,T=t.categories[M],v>0?_=T.count/v*d:_=0,p={key:T.valueInds[0],model:T,width:i,height:_,y:T.dragY!==null?T.dragY:w,bands:[],parcatsViewModel:e},w=w+_+h,u.push(p);return{key:t.dimensionInd,x:t.dragX!==null?t.dragX:l,y:0,width:i,model:t,categories:u,parcatsViewModel:e,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}});var fZ=ne((Myr,yNe)=>{"use strict";var QVt=gNe();yNe.exports=function(t,r,i,n){var a=t._fullLayout,o=a._paper,s=a._size;QVt(t,o,r,{width:s.w,height:s.h,margin:{t:s.t,r:s.r,b:s.b,l:s.l}},i,n)}});var xNe=ne(WI=>{"use strict";var $Vt=vc().getModuleCalcData,eHt=fZ(),mNe="parcats";WI.name=mNe;WI.plot=function(e,t,r,i){var n=$Vt(e.calcdata,mNe);if(n.length){var a=n[0];eHt(e,a,r,i)}};WI.clean=function(e,t,r,i){var n=i._has&&i._has("parcats"),a=t._has&&t._has("parcats");n&&!a&&i._paperdiv.selectAll(".parcats").remove()}});var bNe=ne((Eyr,_Ne)=>{"use strict";_Ne.exports={attributes:$X(),supplyDefaults:iNe(),calc:oNe(),plot:fZ(),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:xNe(),categories:["noOpacity"],meta:{}}});var TNe=ne((kyr,wNe)=>{"use strict";wNe.exports=bNe()});var My=ne((Cyr,LNe)=>{"use strict";var tHt=rx(),ANe="1.13.4",kNe='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',MNe=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',kNe].join(" "),SNe=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),rHt=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),CNe={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:kNe,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:MNe,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:MNe,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:SNe,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:SNe,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:rHt,tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},ENe=tHt(CNe);LNe.exports={requiredVersion:ANe,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:CNe,styleValuesNonMapbox:ENe,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install @plotly/mapbox-gl@"+ANe+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",ENe.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}});var M5=ne((Lyr,INe)=>{"use strict";var PNe=Wt(),RNe=_i().defaultLine,nHt=fl().attributes,iHt=ll(),aHt=cu().textposition,oHt=Xs().overrideAll,sHt=So().templatedArray,cZ=My(),DNe=iHt({});DNe.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var lHt=INe.exports=oHt({_arrayAttrRegexps:[PNe.counterRegex("mapbox",".layers",!0)],domain:nHt({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:cZ.styleValuesMapbox.concat(cZ.styleValuesNonMapbox),dflt:cZ.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:sHt("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:RNe},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:RNe}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:DNe,textposition:PNe.extendFlat({},aHt,{arrayOk:!1})}})},"plot","from-root");lHt.uirevision={valType:"any",editType:"none"}});var XI=ne((Pyr,zNe)=>{"use strict";var uHt=Ba().hovertemplateAttrs,fHt=Ba().texttemplateAttrs,cHt=Y0(),S5=q3(),fT=cu(),FNe=M5(),hHt=es(),vHt=Ps(),Z_=oa().extendFlat,dHt=Xs().overrideAll,pHt=M5(),qNe=S5.line,cT=S5.marker;zNe.exports=dHt({lon:S5.lon,lat:S5.lat,cluster:{enabled:{valType:"boolean"},maxzoom:Z_({},pHt.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:Z_({},cT.opacity,{dflt:1})},mode:Z_({},fT.mode,{dflt:"markers"}),text:Z_({},fT.text,{}),texttemplate:fHt({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:Z_({},fT.hovertext,{}),line:{color:qNe.color,width:qNe.width},connectgaps:fT.connectgaps,marker:Z_({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:cT.opacity,size:cT.size,sizeref:cT.sizeref,sizemin:cT.sizemin,sizemode:cT.sizemode},vHt("marker")),fill:S5.fill,fillcolor:cHt(),textfont:FNe.layers.symbol.textfont,textposition:FNe.layers.symbol.textposition,below:{valType:"string"},selected:{marker:fT.selected.marker},unselected:{marker:fT.unselected.marker},hoverinfo:Z_({},hHt.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:uHt()},"calc","nested")});var NNe=ne((Ryr,BNe)=>{"use strict";var E5=Wt(),hZ=js(),gHt=dp(),yHt=s0(),mHt=l0(),xHt=X0(),ONe=XI(),_Ht=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extra Bold Italic","Open Sans Extra Bold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];BNe.exports=function(t,r,i,n){function a(_,T){return E5.coerce(t,r,ONe,_,T)}function o(_,T){return E5.coerce2(t,r,ONe,_,T)}var s=bHt(t,r,a);if(!s){r.visible=!1;return}if(a("text"),a("texttemplate"),a("hovertext"),a("hovertemplate"),a("mode"),a("below"),hZ.hasMarkers(r)){gHt(t,r,i,n,a,{noLine:!0,noAngle:!0}),a("marker.allowoverlap"),a("marker.angle");var l=r.marker;l.symbol!=="circle"&&(E5.isArrayOrTypedArray(l.size)&&(l.size=l.size[0]),E5.isArrayOrTypedArray(l.color)&&(l.color=l.color[0]))}hZ.hasLines(r)&&(yHt(t,r,i,n,a,{noDash:!0}),a("connectgaps"));var u=o("cluster.maxzoom"),f=o("cluster.step"),c=o("cluster.color",r.marker&&r.marker.color||i),h=o("cluster.size"),v=o("cluster.opacity"),d=u!==!1||f!==!1||c!==!1||h!==!1||v!==!1;a("cluster.enabled",d),hZ.hasText(r)&&mHt(t,r,n,a,{noSelect:!0,font:{family:_Ht.indexOf(n.font.family)!==-1?n.font.family:"Open Sans Regular",size:n.font.size,color:n.font.color}}),a("fill"),r.fill!=="none"&&xHt(t,r,i,a),E5.coerceSelectionMarkerOpacity(r,a)};function bHt(e,t,r){var i=r("lon")||[],n=r("lat")||[],a=Math.min(i.length,n.length);return t._length=a,a}});var vZ=ne((Dyr,VNe)=>{"use strict";var UNe=Xi();VNe.exports=function(t,r,i){var n={},a=i[r.subplot]._subplot,o=a.mockAxis,s=t.lonlat;return n.lonLabel=UNe.tickText(o,o.c2l(s[0]),!0).text,n.latLabel=UNe.tickText(o,o.c2l(s[1]),!0).text,n}});var dZ=ne((Iyr,GNe)=>{"use strict";var HNe=Wt();GNe.exports=function(t,r){var i=t.split(" "),n=i[0],a=i[1],o=HNe.isArrayOrTypedArray(r)?HNe.mean(r):r,s=.5+o/100,l=1.5+o/100,u=["",""],f=[0,0];switch(n){case"top":u[0]="top",f[1]=-l;break;case"bottom":u[0]="bottom",f[1]=l;break}switch(a){case"left":u[1]="right",f[0]=-s;break;case"right":u[1]="left",f[0]=s;break}var c;return u[0]&&u[1]?c=u.join("-"):u[0]?c=u[0]:u[1]?c=u[1]:c="center",{anchor:c,offset:f}}});var jNe=ne((Fyr,ZNe)=>{"use strict";var WNe=la(),Gc=Wt(),wHt=$a().BADNUM,jI=zE(),YNe=ul(),THt=aa(),AHt=EA(),KI=js(),MHt=dZ(),SHt=td().appendArrayPointValue,EHt=Es().NEWLINES,kHt=Es().BR_TAG_ALL;ZNe.exports=function(t,r){var i=r[0].trace,n=i.visible===!0&&i._length!==0,a=i.fill!=="none",o=KI.hasLines(i),s=KI.hasMarkers(i),l=KI.hasText(i),u=s&&i.marker.symbol==="circle",f=s&&i.marker.symbol!=="circle",c=i.cluster&&i.cluster.enabled,h=ZI("fill"),v=ZI("line"),d=ZI("circle"),_=ZI("symbol"),T={fill:h,line:v,circle:d,symbol:_};if(!n)return T;var p;if((a||o)&&(p=jI.calcTraceToLineCoords(r)),a&&(h.geojson=jI.makePolygon(p),h.layout.visibility="visible",Gc.extendFlat(h.paint,{"fill-color":i.fillcolor})),o&&(v.geojson=jI.makeLine(p),v.layout.visibility="visible",Gc.extendFlat(v.paint,{"line-width":i.line.width,"line-color":i.line.color,"line-opacity":i.opacity})),u){var M=CHt(r);d.geojson=M.geojson,d.layout.visibility="visible",c&&(d.filter=["!",["has","point_count"]],T.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":gZ(i.cluster.color,i.cluster.step),"circle-radius":gZ(i.cluster.size,i.cluster.step),"circle-opacity":gZ(i.cluster.opacity,i.cluster.step)}},T.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),Gc.extendFlat(d.paint,{"circle-color":M.mcc,"circle-radius":M.mrc,"circle-opacity":M.mo})}if(u&&c&&(d.filter=["!",["has","point_count"]]),(f||l)&&(_.geojson=LHt(r,t),Gc.extendFlat(_.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),f&&(Gc.extendFlat(_.layout,{"icon-size":i.marker.size/10}),"angle"in i.marker&&i.marker.angle!=="auto"&&Gc.extendFlat(_.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),_.layout["icon-allow-overlap"]=i.marker.allowoverlap,Gc.extendFlat(_.paint,{"icon-opacity":i.opacity*i.marker.opacity,"icon-color":i.marker.color})),l)){var b=(i.marker||{}).size,w=MHt(i.textposition,b);Gc.extendFlat(_.layout,{"text-size":i.textfont.size,"text-anchor":w.anchor,"text-offset":w.offset,"text-font":i.textfont.family.split(", ")}),Gc.extendFlat(_.paint,{"text-color":i.textfont.color,"text-opacity":i.opacity})}return T};function ZI(e){return{type:e,geojson:jI.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function CHt(e){var t=e[0].trace,r=t.marker,i=t.selectedpoints,n=Gc.isArrayOrTypedArray(r.color),a=Gc.isArrayOrTypedArray(r.size),o=Gc.isArrayOrTypedArray(r.opacity),s;function l(b){return t.opacity*b}function u(b){return b/2}var f;n&&(YNe.hasColorscale(t,"marker")?f=YNe.makeColorScaleFuncFromTrace(r):f=Gc.identity);var c;a&&(c=AHt(t));var h;o&&(h=function(b){var w=WNe(b)?+Gc.constrain(b,0,1):0;return l(w)});var v=[];for(s=0;s<e.length;s++){var d=e[s],_=d.lonlat;if(!XNe(_)){var T={};f&&(T.mcc=d.mcc=f(d.mc)),c&&(T.mrc=d.mrc=c(d.ms)),h&&(T.mo=h(d.mo)),i&&(T.selected=d.selected||0),v.push({type:"Feature",id:s+1,geometry:{type:"Point",coordinates:_},properties:T})}}var p;if(i)for(p=THt.makeSelectedPointStyleFns(t),s=0;s<v.length;s++){var M=v[s].properties;p.selectedOpacityFn&&(M.mo=l(p.selectedOpacityFn(M))),p.selectedColorFn&&(M.mcc=p.selectedColorFn(M)),p.selectedSizeFn&&(M.mrc=p.selectedSizeFn(M))}return{geojson:{type:"FeatureCollection",features:v},mcc:n||p&&p.selectedColorFn?{type:"identity",property:"mcc"}:r.color,mrc:a||p&&p.selectedSizeFn?{type:"identity",property:"mrc"}:u(r.size),mo:o||p&&p.selectedOpacityFn?{type:"identity",property:"mo"}:l(r.opacity)}}function LHt(e,t){for(var r=t._fullLayout,i=e[0].trace,n=i.marker||{},a=n.symbol,o=n.angle,s=a!=="circle"?pZ(a):JI,l=o!=="auto"?pZ(o,!0):JI,u=KI.hasText(i)?pZ(i.text):JI,f=[],c=0;c<e.length;c++){var h=e[c];if(!XNe(h.lonlat)){var v=i.texttemplate,d;if(v){var _=Array.isArray(v)?v[c]||"":v,T=i._module.formatLabels(h,i,r),p={};SHt(p,i,h.i);var M=i._meta||{};d=Gc.texttemplateString(_,T,r._d3locale,p,h,M)}else d=u(c);d&&(d=d.replace(EHt,"").replace(kHt,`
`)),f.push({type:"Feature",geometry:{type:"Point",coordinates:h.lonlat},properties:{symbol:s(c),angle:l(c),text:d}})}}return{type:"FeatureCollection",features:f}}function pZ(e,t){return Gc.isArrayOrTypedArray(e)?t?function(r){return WNe(e[r])?+e[r]:0}:function(r){return e[r]}:e?function(){return e}:JI}function JI(){return""}function XNe(e){return e[0]===wHt}function gZ(e,t){var r;if(Gc.isArrayOrTypedArray(e)&&Gc.isArrayOrTypedArray(t)){r=["step",["get","point_count"],e[0]];for(var i=1;i<e.length;i++)r.push(t[i-1],e[i])}else r=e;return r}});var $Ne=ne((qyr,QNe)=>{"use strict";var PHt=Wt(),KNe=jNe(),hT=My().traceLayerPrefix,Bp={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function JNe(e,t,r,i){this.type="scattermapbox",this.subplot=e,this.uid=t,this.clusterEnabled=r,this.isHidden=i,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol",cluster:"source-"+t+"-circle",clusterCount:"source-"+t+"-circle"},this.layerIds={fill:hT+t+"-fill",line:hT+t+"-line",circle:hT+t+"-circle",symbol:hT+t+"-symbol",cluster:hT+t+"-cluster",clusterCount:hT+t+"-cluster-count"},this.below=null}var k5=JNe.prototype;k5.addSource=function(e,t,r){var i={type:"geojson",data:t.geojson};r&&r.enabled&&PHt.extendFlat(i,{cluster:!0,clusterMaxZoom:r.maxzoom});var n=this.subplot.map.getSource(this.sourceIds[e]);n?n.setData(t.geojson):this.subplot.map.addSource(this.sourceIds[e],i)};k5.setSourceData=function(e,t){this.subplot.map.getSource(this.sourceIds[e]).setData(t.geojson)};k5.addLayer=function(e,t,r){var i={type:t.type,id:this.layerIds[e],source:this.sourceIds[e],layout:t.layout,paint:t.paint};t.filter&&(i.filter=t.filter);for(var n=this.layerIds[e],a,o=this.subplot.getMapLayers(),s=0;s<o.length;s++)if(o[s].id===n){a=!0;break}a?(this.subplot.setOptions(n,"setLayoutProperty",i.layout),i.layout.visibility==="visible"&&this.subplot.setOptions(n,"setPaintProperty",i.paint)):this.subplot.addLayer(i,r)};k5.update=function(t){var r=t[0].trace,i=this.subplot,n=i.map,a=KNe(i.gd,t),o=i.belowLookup["trace-"+this.uid],s=!!(r.cluster&&r.cluster.enabled),l=!!this.clusterEnabled,u=this;function f(b){b||u.addSource("circle",a.circle,r.cluster);for(var w=Bp.cluster,k=0;k<w.length;k++){var x=w[k],E=a[x];u.addLayer(x,E,o)}}function c(b){for(var w=Bp.cluster,k=w.length-1;k>=0;k--){var x=w[k];n.removeLayer(u.layerIds[x])}b||n.removeSource(u.sourceIds.circle)}function h(b){for(var w=Bp.nonCluster,k=0;k<w.length;k++){var x=w[k],E=a[x];b||u.addSource(x,E),u.addLayer(x,E,o)}}function v(b){for(var w=Bp.nonCluster,k=w.length-1;k>=0;k--){var x=w[k];n.removeLayer(u.layerIds[x]),b||n.removeSource(u.sourceIds[x])}}function d(b){l?c(b):v(b)}function _(b){s?f(b):h(b)}function T(){for(var b=s?Bp.cluster:Bp.nonCluster,w=0;w<b.length;w++){var k=b[w],x=a[k];x&&(i.setOptions(u.layerIds[k],"setLayoutProperty",x.layout),x.layout.visibility==="visible"&&(k!=="cluster"&&u.setSourceData(k,x),i.setOptions(u.layerIds[k],"setPaintProperty",x.paint)))}}var p=this.isHidden,M=r.visible!==!0;M?p||d():p?M||_():l!==s?(d(),_()):(this.below!==o&&(d(!0),_(!0)),T()),this.clusterEnabled=s,this.isHidden=M,this.below=o,t[0].trace._glTrace=this};k5.dispose=function(){for(var t=this.subplot.map,r=this.clusterEnabled?Bp.cluster:Bp.nonCluster,i=r.length-1;i>=0;i--){var n=r[i];t.removeLayer(this.layerIds[n]),t.removeSource(this.sourceIds[n])}};QNe.exports=function(t,r){var i=r[0].trace,n=i.cluster&&i.cluster.enabled,a=i.visible!==!0,o=new JNe(t,i.uid,n,a),s=KNe(t.gd,r),l=o.below=t.belowLookup["trace-"+i.uid],u,f,c;if(n)for(o.addSource("circle",s.circle,i.cluster),u=0;u<Bp.cluster.length;u++)f=Bp.cluster[u],c=s[f],o.addLayer(f,c,l);else for(u=0;u<Bp.nonCluster.length;u++)f=Bp.nonCluster[u],c=s[f],o.addSource(f,c,i.cluster),o.addLayer(f,c,l);return r[0].trace._glTrace=o,o}});var QI=ne((zyr,t9e)=>{"use strict";var RHt=Ol(),yZ=Wt(),DHt=Z2(),IHt=yZ.fillText,FHt=$a().BADNUM,qHt=My().traceLayerPrefix;function zHt(e,t,r){var i=e.cd,n=i[0].trace,a=e.xa,o=e.ya,s=e.subplot,l=[],u=qHt+n.uid+"-circle",f=n.cluster&&n.cluster.enabled;if(f){var c=s.map.queryRenderedFeatures(null,{layers:[u]});l=c.map(function(S){return S.id})}var h=t>=0?Math.floor((t+180)/360):Math.ceil((t-180)/360),v=h*360,d=t-v;function _(S){var g=S.lonlat;if(g[0]===FHt||f&&l.indexOf(S.i+1)===-1)return 1/0;var C=yZ.modHalf(g[0],360),A=g[1],P=s.project([C,A]),D=P.x-a.c2p([d,A]),z=P.y-o.c2p([C,r]),O=Math.max(3,S.mrc||0);return Math.max(Math.sqrt(D*D+z*z)-O,1-3/O)}if(RHt.getClosest(i,_,e),e.index!==!1){var T=i[e.index],p=T.lonlat,M=[yZ.modHalf(p[0],360)+v,p[1]],b=a.c2p(M),w=o.c2p(M),k=T.mrc||1;e.x0=b-k,e.x1=b+k,e.y0=w-k,e.y1=w+k;var x={};x[n.subplot]={_subplot:s};var E=n._module.formatLabels(T,n,x);return e.lonLabel=E.lonLabel,e.latLabel=E.latLabel,e.color=DHt(n,T),e.extraText=e9e(n,T,i[0].t.labels),e.hovertemplate=n.hovertemplate,[e]}}function e9e(e,t,r){if(e.hovertemplate)return;var i=t.hi||e.hoverinfo,n=i.split("+"),a=n.indexOf("all")!==-1,o=n.indexOf("lon")!==-1,s=n.indexOf("lat")!==-1,l=t.lonlat,u=[];function f(c){return c+"\xB0"}return a||o&&s?u.push("("+f(l[1])+", "+f(l[0])+")"):o?u.push(r.lon+f(l[0])):s&&u.push(r.lat+f(l[1])),(a||n.indexOf("text")!==-1)&&IHt(t,e,u),u.join("<br>")}t9e.exports={hoverPoints:zHt,getExtraText:e9e}});var n9e=ne((Oyr,r9e)=>{"use strict";r9e.exports=function(t,r){return t.lon=r.lon,t.lat=r.lat,t}});var a9e=ne((Byr,i9e)=>{"use strict";var OHt=Wt(),BHt=js(),NHt=$a().BADNUM;i9e.exports=function(t,r){var i=t.cd,n=t.xaxis,a=t.yaxis,o=[],s=i[0].trace,l;if(!BHt.hasMarkers(s))return[];if(r===!1)for(l=0;l<i.length;l++)i[l].selected=0;else for(l=0;l<i.length;l++){var u=i[l],f=u.lonlat;if(f[0]!==NHt){var c=[OHt.modHalf(f[0],360),f[1]],h=[n.c2p(c),a.c2p(c)];r.contains(h,null,l,t)?(o.push({pointNumber:l,lon:f[0],lat:f[1]}),u.selected=1):u.selected=0}}return o}});var _Z=ne((mZ,xZ)=>{(function(e,t){typeof mZ=="object"&&typeof xZ!="undefined"?xZ.exports=t():typeof define=="function"&&define.amd?define(t):(e=e||self,e.mapboxgl=t())})(mZ,function(){"use strict";var e,t,r;function i(n,a){if(!e)e=a;else if(!t)t=a;else{var o="var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk);",s={};e(s),r=a(s),typeof window!="undefined"&&(r.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}}return i(["exports"],function(n){"use strict";function a(y,m){return m={exports:{}},y(m,m.exports),m.exports}var o="1.13.4",s=l;function l(y,m,L,q){this.cx=3*y,this.bx=3*(L-y)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*m,this.by=3*(q-m)-this.cy,this.ay=1-this.cy-this.by,this.p1x=y,this.p1y=q,this.p2x=L,this.p2y=q}l.prototype.sampleCurveX=function(y){return((this.ax*y+this.bx)*y+this.cx)*y},l.prototype.sampleCurveY=function(y){return((this.ay*y+this.by)*y+this.cy)*y},l.prototype.sampleCurveDerivativeX=function(y){return(3*this.ax*y+2*this.bx)*y+this.cx},l.prototype.solveCurveX=function(y,m){typeof m=="undefined"&&(m=1e-6);var L,q,Y,j,$;for(Y=y,$=0;$<8;$++){if(j=this.sampleCurveX(Y)-y,Math.abs(j)<m)return Y;var pe=this.sampleCurveDerivativeX(Y);if(Math.abs(pe)<1e-6)break;Y=Y-j/pe}if(L=0,q=1,Y=y,Y<L)return L;if(Y>q)return q;for(;L<q;){if(j=this.sampleCurveX(Y),Math.abs(j-y)<m)return Y;y>j?L=Y:q=Y,Y=(q-L)*.5+L}return Y},l.prototype.solve=function(y,m){return this.sampleCurveY(this.solveCurveX(y,m))};var u=f;function f(y,m){this.x=y,this.y=m}f.prototype={clone:function(){return new f(this.x,this.y)},add:function(y){return this.clone()._add(y)},sub:function(y){return this.clone()._sub(y)},multByPoint:function(y){return this.clone()._multByPoint(y)},divByPoint:function(y){return this.clone()._divByPoint(y)},mult:function(y){return this.clone()._mult(y)},div:function(y){return this.clone()._div(y)},rotate:function(y){return this.clone()._rotate(y)},rotateAround:function(y,m){return this.clone()._rotateAround(y,m)},matMult:function(y){return this.clone()._matMult(y)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(y){return this.x===y.x&&this.y===y.y},dist:function(y){return Math.sqrt(this.distSqr(y))},distSqr:function(y){var m=y.x-this.x,L=y.y-this.y;return m*m+L*L},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(y){return Math.atan2(this.y-y.y,this.x-y.x)},angleWith:function(y){return this.angleWithSep(y.x,y.y)},angleWithSep:function(y,m){return Math.atan2(this.x*m-this.y*y,this.x*y+this.y*m)},_matMult:function(y){var m=y[0]*this.x+y[1]*this.y,L=y[2]*this.x+y[3]*this.y;return this.x=m,this.y=L,this},_add:function(y){return this.x+=y.x,this.y+=y.y,this},_sub:function(y){return this.x-=y.x,this.y-=y.y,this},_mult:function(y){return this.x*=y,this.y*=y,this},_div:function(y){return this.x/=y,this.y/=y,this},_multByPoint:function(y){return this.x*=y.x,this.y*=y.y,this},_divByPoint:function(y){return this.x/=y.x,this.y/=y.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var y=this.y;return this.y=this.x,this.x=-y,this},_rotate:function(y){var m=Math.cos(y),L=Math.sin(y),q=m*this.x-L*this.y,Y=L*this.x+m*this.y;return this.x=q,this.y=Y,this},_rotateAround:function(y,m){var L=Math.cos(y),q=Math.sin(y),Y=m.x+L*(this.x-m.x)-q*(this.y-m.y),j=m.y+q*(this.x-m.x)+L*(this.y-m.y);return this.x=Y,this.y=j,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},f.convert=function(y){return y instanceof f?y:Array.isArray(y)?new f(y[0],y[1]):y};var c=typeof self!="undefined"?self:{};function h(y,m){if(Array.isArray(y)){if(!Array.isArray(m)||y.length!==m.length)return!1;for(var L=0;L<y.length;L++)if(!h(y[L],m[L]))return!1;return!0}if(typeof y=="object"&&y!==null&&m!==null){if(typeof m!="object")return!1;var q=Object.keys(y);if(q.length!==Object.keys(m).length)return!1;for(var Y in y)if(!h(y[Y],m[Y]))return!1;return!0}return y===m}var v=Math.pow(2,53)-1;function d(y){if(y<=0)return 0;if(y>=1)return 1;var m=y*y,L=m*y;return 4*(y<.5?L:3*(y-m)+L-.75)}function _(y,m,L,q){var Y=new s(y,m,L,q);return function(j){return Y.solve(j)}}var T=_(.25,.1,.25,1);function p(y,m,L){return Math.min(L,Math.max(m,y))}function M(y,m,L){var q=L-m,Y=((y-m)%q+q)%q+m;return Y===m?L:Y}function b(y,m,L){if(!y.length)return L(null,[]);var q=y.length,Y=new Array(y.length),j=null;y.forEach(function($,pe){m($,function(ke,Fe){ke&&(j=ke),Y[pe]=Fe,--q===0&&L(j,Y)})})}function w(y){var m=[];for(var L in y)m.push(y[L]);return m}function k(y,m){var L=[];for(var q in y)q in m||L.push(q);return L}function x(y){for(var m=[],L=arguments.length-1;L-- >0;)m[L]=arguments[L+1];for(var q=0,Y=m;q<Y.length;q+=1){var j=Y[q];for(var $ in j)y[$]=j[$]}return y}function E(y,m){for(var L={},q=0;q<m.length;q++){var Y=m[q];Y in y&&(L[Y]=y[Y])}return L}var S=1;function g(){return S++}function C(){function y(m){return m?(m^Math.random()*16>>m/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,y)}return y()}function A(y){return y<=1?1:Math.pow(2,Math.ceil(Math.log(y)/Math.LN2))}function P(y){return y?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(y):!1}function D(y,m){y.forEach(function(L){m[L]&&(m[L]=m[L].bind(m))})}function z(y,m){return y.indexOf(m,y.length-m.length)!==-1}function O(y,m,L){var q={};for(var Y in y)q[Y]=m.call(L||this,y[Y],Y,y);return q}function V(y,m,L){var q={};for(var Y in y)m.call(L||this,y[Y],Y,y)&&(q[Y]=y[Y]);return q}function B(y){return Array.isArray(y)?y.map(B):typeof y=="object"&&y?O(y,B):y}function F(y,m){for(var L=0;L<y.length;L++)if(m.indexOf(y[L])>=0)return!0;return!1}var N={};function Z(y){N[y]||(typeof console!="undefined"&&console.warn(y),N[y]=!0)}function J(y,m,L){return(L.y-y.y)*(m.x-y.x)>(m.y-y.y)*(L.x-y.x)}function re(y){for(var m=0,L=0,q=y.length,Y=q-1,j=void 0,$=void 0;L<q;Y=L++)j=y[L],$=y[Y],m+=($.x-j.x)*(j.y+$.y);return m}function ue(y){var m=y[0],L=y[1],q=y[2];return L+=90,L*=Math.PI/180,q*=Math.PI/180,{x:m*Math.cos(L)*Math.sin(q),y:m*Math.sin(L)*Math.sin(q),z:m*Math.cos(q)}}function fe(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function K(y){var m=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,L={};if(y.replace(m,function(Y,j,$,pe){var ke=$||pe;return L[j]=ke?ke.toLowerCase():!0,""}),L["max-age"]){var q=parseInt(L["max-age"],10);isNaN(q)?delete L["max-age"]:L["max-age"]=q}return L}var X=null;function ae(y){if(X==null){var m=y.navigator?y.navigator.userAgent:null;X=!!y.safari||!!(m&&(/\b(iPad|iPhone|iPod)\b/.test(m)||m.match("Safari")&&!m.match("Chrome")))}return X}function oe(y){try{var m=c[y];return m.setItem("_mapbox_test_",1),m.removeItem("_mapbox_test_"),!0}catch(L){return!1}}function me(y){return c.btoa(encodeURIComponent(y).replace(/%([0-9A-F]{2})/g,function(m,L){return String.fromCharCode(+("0x"+L))}))}function xe(y){return decodeURIComponent(c.atob(y).split("").map(function(m){return"%"+("00"+m.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var ce=c.performance&&c.performance.now?c.performance.now.bind(c.performance):Date.now.bind(Date),ie=c.requestAnimationFrame||c.mozRequestAnimationFrame||c.webkitRequestAnimationFrame||c.msRequestAnimationFrame,ge=c.cancelAnimationFrame||c.mozCancelAnimationFrame||c.webkitCancelAnimationFrame||c.msCancelAnimationFrame,le,we,Re={now:ce,frame:function(m){var L=ie(m);return{cancel:function(){return ge(L)}}},getImageData:function(m,L){L===void 0&&(L=0);var q=c.document.createElement("canvas"),Y=q.getContext("2d");if(!Y)throw new Error("failed to create canvas 2d context");return q.width=m.width,q.height=m.height,Y.drawImage(m,0,0,m.width,m.height),Y.getImageData(-L,-L,m.width+2*L,m.height+2*L)},resolveURL:function(m){return le||(le=c.document.createElement("a")),le.href=m,le.href},hardwareConcurrency:c.navigator&&c.navigator.hardwareConcurrency||4,get devicePixelRatio(){return c.devicePixelRatio},get prefersReducedMotion(){return c.matchMedia?(we==null&&(we=c.matchMedia("(prefers-reduced-motion: reduce)")),we.matches):!1}},qe={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},et={supported:!1,testSupport:je},Pe,Ie=!1,ut,ft=!1;c.document&&(ut=c.document.createElement("img"),ut.onload=function(){Pe&&_t(Pe),Pe=null,ft=!0},ut.onerror=function(){Ie=!0,Pe=null},ut.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function je(y){Ie||!ut||(ft?_t(y):Pe=y)}function _t(y){var m=y.createTexture();y.bindTexture(y.TEXTURE_2D,m);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,ut),y.isContextLost())return;et.supported=!0}catch(L){}y.deleteTexture(m),Ie=!0}var Bt="01";function Lt(){for(var y="1",m="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",L="",q=0;q<10;q++)L+=m[Math.floor(Math.random()*62)];var Y=12*60*60*1e3,j=[y,Bt,L].join(""),$=Date.now()+Y;return{token:j,tokenExpiresAt:$}}var Me=function(m,L){this._transformRequestFn=m,this._customAccessToken=L,this._createSkuToken()};Me.prototype._createSkuToken=function(){var m=Lt();this._skuToken=m.token,this._skuTokenExpiresAt=m.tokenExpiresAt},Me.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Me.prototype.transformRequest=function(m,L){return this._transformRequestFn?this._transformRequestFn(m,L)||{url:m}:{url:m}},Me.prototype.normalizeStyleURL=function(m,L){if(!Ze(m))return m;var q=ht(m);return q.path="/styles/v1"+q.path,this._makeAPIURL(q,this._customAccessToken||L)},Me.prototype.normalizeGlyphsURL=function(m,L){if(!Ze(m))return m;var q=ht(m);return q.path="/fonts/v1"+q.path,this._makeAPIURL(q,this._customAccessToken||L)},Me.prototype.normalizeSourceURL=function(m,L){if(!Ze(m))return m;var q=ht(m);return q.path="/v4/"+q.authority+".json",q.params.push("secure"),this._makeAPIURL(q,this._customAccessToken||L)},Me.prototype.normalizeSpriteURL=function(m,L,q,Y){var j=ht(m);return Ze(m)?(j.path="/styles/v1"+j.path+"/sprite"+L+q,this._makeAPIURL(j,this._customAccessToken||Y)):(j.path+=""+L+q,mt(j))},Me.prototype.normalizeTileURL=function(m,L){if(this._isSkuTokenExpired()&&this._createSkuToken(),m&&!Ze(m))return m;var q=ht(m),Y=/(\.(png|jpg)\d*)(?=$)/,j=/^.+\/v4\//,$=Re.devicePixelRatio>=2||L===512?"@2x":"",pe=et.supported?".webp":"$1";q.path=q.path.replace(Y,""+$+pe),q.path=q.path.replace(j,"/"),q.path="/v4"+q.path;var ke=this._customAccessToken||rt(q.params)||qe.ACCESS_TOKEN;return qe.REQUIRE_ACCESS_TOKEN&&ke&&this._skuToken&&q.params.push("sku="+this._skuToken),this._makeAPIURL(q,ke)},Me.prototype.canonicalizeTileURL=function(m,L){var q="/v4/",Y=/\.[\w]+$/,j=ht(m);if(!j.path.match(/(^\/v4\/)/)||!j.path.match(Y))return m;var $="mapbox://tiles/";$+=j.path.replace(q,"");var pe=j.params;return L&&(pe=pe.filter(function(ke){return!ke.match(/^access_token=/)})),pe.length&&($+="?"+pe.join("&")),$},Me.prototype.canonicalizeTileset=function(m,L){for(var q=L?Ze(L):!1,Y=[],j=0,$=m.tiles||[];j<$.length;j+=1){var pe=$[j];it(pe)?Y.push(this.canonicalizeTileURL(pe,q)):Y.push(pe)}return Y},Me.prototype._makeAPIURL=function(m,L){var q="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",Y=ht(qe.API_URL);if(m.protocol=Y.protocol,m.authority=Y.authority,m.protocol==="http"){var j=m.params.indexOf("secure");j>=0&&m.params.splice(j,1)}if(Y.path!=="/"&&(m.path=""+Y.path+m.path),!qe.REQUIRE_ACCESS_TOKEN)return mt(m);if(L=L||qe.ACCESS_TOKEN,!L)throw new Error("An API access token is required to use Mapbox GL. "+q);if(L[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+q);return m.params=m.params.filter(function($){return $.indexOf("access_token")===-1}),m.params.push("access_token="+L),mt(m)};function Ze(y){return y.indexOf("mapbox:")===0}var dt=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function it(y){return dt.test(y)}function vt(y){return y.indexOf("sku=")>0&&it(y)}function rt(y){for(var m=0,L=y;m<L.length;m+=1){var q=L[m],Y=q.match(/^access_token=(.*)$/);if(Y)return Y[1]}return null}var We=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ht(y){var m=y.match(We);if(!m)throw new Error("Unable to parse URL object");return{protocol:m[1],authority:m[2],path:m[3]||"/",params:m[4]?m[4].split("&"):[]}}function mt(y){var m=y.params.length?"?"+y.params.join("&"):"";return y.protocol+"://"+y.authority+y.path+m}var er="mapbox.eventData";function $t(y){if(!y)return null;var m=y.split(".");if(!m||m.length!==3)return null;try{var L=JSON.parse(xe(m[1]));return L}catch(q){return null}}var cr=function(m){this.type=m,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};cr.prototype.getStorageKey=function(m){var L=$t(qe.ACCESS_TOKEN),q="";return L&&L.u?q=me(L.u):q=qe.ACCESS_TOKEN||"",m?er+"."+m+":"+q:er+":"+q},cr.prototype.fetchEventData=function(){var m=oe("localStorage"),L=this.getStorageKey(),q=this.getStorageKey("uuid");if(m)try{var Y=c.localStorage.getItem(L);Y&&(this.eventData=JSON.parse(Y));var j=c.localStorage.getItem(q);j&&(this.anonId=j)}catch($){Z("Unable to read from LocalStorage")}},cr.prototype.saveEventData=function(){var m=oe("localStorage"),L=this.getStorageKey(),q=this.getStorageKey("uuid");if(m)try{c.localStorage.setItem(q,this.anonId),Object.keys(this.eventData).length>=1&&c.localStorage.setItem(L,JSON.stringify(this.eventData))}catch(Y){Z("Unable to write to LocalStorage")}},cr.prototype.processRequests=function(m){},cr.prototype.postEvent=function(m,L,q,Y){var j=this;if(qe.EVENTS_URL){var $=ht(qe.EVENTS_URL);$.params.push("access_token="+(Y||qe.ACCESS_TOKEN||""));var pe={event:this.type,created:new Date(m).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:o,skuId:Bt,userId:this.anonId},ke=L?x(pe,L):pe,Fe={url:mt($),headers:{"Content-Type":"text/plain"},body:JSON.stringify([ke])};this.pendingRequest=dr(Fe,function(Ne){j.pendingRequest=null,q(Ne),j.saveEventData(),j.processRequests(Y)})}},cr.prototype.queueRequest=function(m,L){this.queue.push(m),this.processRequests(L)};var or=function(y){function m(){y.call(this,"map.load"),this.success={},this.skuToken=""}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.postMapLoadEvent=function(q,Y,j,$){this.skuToken=j,(qe.EVENTS_URL&&$||qe.ACCESS_TOKEN&&Array.isArray(q)&&q.some(function(pe){return Ze(pe)||it(pe)}))&&this.queueRequest({id:Y,timestamp:Date.now()},$)},m.prototype.processRequests=function(q){var Y=this;if(!(this.pendingRequest||this.queue.length===0)){var j=this.queue.shift(),$=j.id,pe=j.timestamp;$&&this.success[$]||(this.anonId||this.fetchEventData(),P(this.anonId)||(this.anonId=C()),this.postEvent(pe,{skuToken:this.skuToken},function(ke){ke||$&&(Y.success[$]=!0)},q))}},m}(cr),vr=function(y){function m(L){y.call(this,"appUserTurnstile"),this._customAccessToken=L}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.postTurnstileEvent=function(q,Y){qe.EVENTS_URL&&qe.ACCESS_TOKEN&&Array.isArray(q)&&q.some(function(j){return Ze(j)||it(j)})&&this.queueRequest(Date.now(),Y)},m.prototype.processRequests=function(q){var Y=this;if(!(this.pendingRequest||this.queue.length===0)){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var j=$t(qe.ACCESS_TOKEN),$=j?j.u:qe.ACCESS_TOKEN,pe=$!==this.eventData.tokenU;P(this.anonId)||(this.anonId=C(),pe=!0);var ke=this.queue.shift();if(this.eventData.lastSuccess){var Fe=new Date(this.eventData.lastSuccess),Ne=new Date(ke),ct=(ke-this.eventData.lastSuccess)/(24*60*60*1e3);pe=pe||ct>=1||ct<-1||Fe.getDate()!==Ne.getDate()}else pe=!0;if(!pe)return this.processRequests();this.postEvent(ke,{"enabled.telemetry":!1},function(kt){kt||(Y.eventData.lastSuccess=ke,Y.eventData.tokenU=$)},q)}},m}(cr),Ot=new vr,yt=Ot.postTurnstileEvent.bind(Ot),Et=new or,Je=Et.postMapLoadEvent.bind(Et),Ke="mapbox-tiles",At=500,Ee=50,de=1e3*60*7,Te;function nt(){c.caches&&!Te&&(Te=c.caches.open(Ke))}var Mt;function Kt(y,m){if(Mt===void 0)try{new Response(new ReadableStream),Mt=!0}catch(L){Mt=!1}Mt?m(y.body):y.blob().then(m)}function Jt(y,m,L){if(nt(),!!Te){var q={status:m.status,statusText:m.statusText,headers:new c.Headers};m.headers.forEach(function($,pe){return q.headers.set(pe,$)});var Y=K(m.headers.get("Cache-Control")||"");if(!Y["no-store"]){Y["max-age"]&&q.headers.set("Expires",new Date(L+Y["max-age"]*1e3).toUTCString());var j=new Date(q.headers.get("Expires")).getTime()-L;j<de||Kt(m,function($){var pe=new c.Response($,q);nt(),Te&&Te.then(function(ke){return ke.put(Fr(y.url),pe)}).catch(function(ke){return Z(ke.message)})})}}}function Fr(y){var m=y.indexOf("?");return m<0?y:y.slice(0,m)}function Vr(y,m){if(nt(),!Te)return m(null);var L=Fr(y.url);Te.then(function(q){q.match(L).then(function(Y){var j=mr(Y);q.delete(L),j&&q.put(L,Y.clone()),m(null,Y,j)}).catch(m)}).catch(m)}function mr(y){if(!y)return!1;var m=new Date(y.headers.get("Expires")||0),L=K(y.headers.get("Cache-Control")||"");return m>Date.now()&&!L["no-cache"]}var zr=1/0;function an(y){zr++,zr>Ee&&(y.getActor().send("enforceCacheSizeLimit",At),zr=0)}function ni(y){nt(),Te&&Te.then(function(m){m.keys().then(function(L){for(var q=0;q<L.length-y;q++)m.delete(L[q])})})}function mn(y){var m=c.caches.delete(Ke);y&&m.catch(y).then(function(){return y()})}function fi(y,m){At=y,Ee=m}var Wi;function si(){return Wi==null&&(Wi=c.OffscreenCanvas&&new c.OffscreenCanvas(1,1).getContext("2d")&&typeof c.createImageBitmap=="function"),Wi}var Zi={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Zi);var Ei=function(y){function m(L,q,Y){q===401&&it(Y)&&(L+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),y.call(this,L),this.status=q,this.url=Y,this.name=this.constructor.name,this.message=L}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},m}(Error),ot=fe()?function(){return self.worker&&self.worker.referrer}:function(){return(c.location.protocol==="blob:"?c.parent:c).location.href},Be=function(y){return/^file:/.test(y)||/^file:/.test(ot())&&!/^\w+:/.test(y)};function lt(y,m){var L=new c.AbortController,q=new c.Request(y.url,{method:y.method||"GET",body:y.body,credentials:y.credentials,headers:y.headers,referrer:ot(),signal:L.signal}),Y=!1,j=!1,$=vt(q.url);y.type==="json"&&q.headers.set("Accept","application/json");var pe=function(Fe,Ne,ct){if(!j){if(Fe&&Fe.message!=="SecurityError"&&Z(Fe),Ne&&ct)return ke(Ne);var kt=Date.now();c.fetch(q).then(function(bt){if(bt.ok){var Yt=$?bt.clone():null;return ke(bt,Yt,kt)}else return m(new Ei(bt.statusText,bt.status,y.url))}).catch(function(bt){bt.code!==20&&m(new Error(bt.message))})}},ke=function(Fe,Ne,ct){(y.type==="arrayBuffer"?Fe.arrayBuffer():y.type==="json"?Fe.json():Fe.text()).then(function(kt){j||(Ne&&ct&&Jt(q,Ne,ct),Y=!0,m(null,kt,Fe.headers.get("Cache-Control"),Fe.headers.get("Expires")))}).catch(function(kt){j||m(new Error(kt.message))})};return $?Vr(q,pe):pe(null,null),{cancel:function(){j=!0,Y||L.abort()}}}function xt(y,m){var L=new c.XMLHttpRequest;L.open(y.method||"GET",y.url,!0),y.type==="arrayBuffer"&&(L.responseType="arraybuffer");for(var q in y.headers)L.setRequestHeader(q,y.headers[q]);return y.type==="json"&&(L.responseType="text",L.setRequestHeader("Accept","application/json")),L.withCredentials=y.credentials==="include",L.onerror=function(){m(new Error(L.statusText))},L.onload=function(){if((L.status>=200&&L.status<300||L.status===0)&&L.response!==null){var Y=L.response;if(y.type==="json")try{Y=JSON.parse(L.response)}catch(j){return m(j)}m(null,Y,L.getResponseHeader("Cache-Control"),L.getResponseHeader("Expires"))}else m(new Ei(L.statusText,L.status,y.url))},L.send(y.body),{cancel:function(){return L.abort()}}}var Nt=function(y,m){if(!Be(y.url)){if(c.fetch&&c.Request&&c.AbortController&&c.Request.prototype.hasOwnProperty("signal"))return lt(y,m);if(fe()&&self.worker&&self.worker.actor){var L=!0;return self.worker.actor.send("getResource",y,m,void 0,L)}}return xt(y,m)},nr=function(y,m){return Nt(x(y,{type:"json"}),m)},yr=function(y,m){return Nt(x(y,{type:"arrayBuffer"}),m)},dr=function(y,m){return Nt(x(y,{method:"POST"}),m)};function Rr(y){var m=c.document.createElement("a");return m.href=y,m.protocol===c.document.location.protocol&&m.host===c.document.location.host}var Gr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Yr(y,m,L,q){var Y=new c.Image,j=c.URL;Y.onload=function(){m(null,Y),j.revokeObjectURL(Y.src),Y.onload=null,c.requestAnimationFrame(function(){Y.src=Gr})},Y.onerror=function(){return m(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var $=new c.Blob([new Uint8Array(y)],{type:"image/png"});Y.cacheControl=L,Y.expires=q,Y.src=y.byteLength?j.createObjectURL($):Gr}function dn(y,m){var L=new c.Blob([new Uint8Array(y)],{type:"image/png"});c.createImageBitmap(L).then(function(q){m(null,q)}).catch(function(q){m(new Error("Could not load image because of "+q.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}var Wr,qn,vi=function(){Wr=[],qn=0};vi();var Mi=function(y,m){if(et.supported&&(y.headers||(y.headers={}),y.headers.accept="image/webp,*/*"),qn>=qe.MAX_PARALLEL_IMAGE_REQUESTS){var L={requestParameters:y,callback:m,cancelled:!1,cancel:function(){this.cancelled=!0}};return Wr.push(L),L}qn++;var q=!1,Y=function(){if(!q)for(q=!0,qn--;Wr.length&&qn<qe.MAX_PARALLEL_IMAGE_REQUESTS;){var $=Wr.shift(),pe=$.requestParameters,ke=$.callback,Fe=$.cancelled;Fe||($.cancel=Mi(pe,ke).cancel)}},j=yr(y,function($,pe,ke,Fe){Y(),$?m($):pe&&(si()?dn(pe,m):Yr(pe,m,ke,Fe))});return{cancel:function(){j.cancel(),Y()}}},Ui=function(y,m){var L=c.document.createElement("video");L.muted=!0,L.onloadstart=function(){m(null,L)};for(var q=0;q<y.length;q++){var Y=c.document.createElement("source");Rr(y[q])||(L.crossOrigin="Anonymous"),Y.src=y[q],L.appendChild(Y)}return{cancel:function(){}}};function ji(y,m,L){var q=L[y]&&L[y].indexOf(m)!==-1;q||(L[y]=L[y]||[],L[y].push(m))}function ea(y,m,L){if(L&&L[y]){var q=L[y].indexOf(m);q!==-1&&L[y].splice(q,1)}}var Ra=function(m,L){L===void 0&&(L={}),x(this,L),this.type=m},Li=function(y){function m(L,q){q===void 0&&(q={}),y.call(this,"error",x({error:L},q))}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m}(Ra),Yn=function(){};Yn.prototype.on=function(m,L){return this._listeners=this._listeners||{},ji(m,L,this._listeners),this},Yn.prototype.off=function(m,L){return ea(m,L,this._listeners),ea(m,L,this._oneTimeListeners),this},Yn.prototype.once=function(m,L){return this._oneTimeListeners=this._oneTimeListeners||{},ji(m,L,this._oneTimeListeners),this},Yn.prototype.fire=function(m,L){typeof m=="string"&&(m=new Ra(m,L||{}));var q=m.type;if(this.listens(q)){m.target=this;for(var Y=this._listeners&&this._listeners[q]?this._listeners[q].slice():[],j=0,$=Y;j<$.length;j+=1){var pe=$[j];pe.call(this,m)}for(var ke=this._oneTimeListeners&&this._oneTimeListeners[q]?this._oneTimeListeners[q].slice():[],Fe=0,Ne=ke;Fe<Ne.length;Fe+=1){var ct=Ne[Fe];ea(q,ct,this._oneTimeListeners),ct.call(this,m)}var kt=this._eventedParent;kt&&(x(m,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),kt.fire(m))}else m instanceof Li&&console.error(m.error);return this},Yn.prototype.listens=function(m){return this._listeners&&this._listeners[m]&&this._listeners[m].length>0||this._oneTimeListeners&&this._oneTimeListeners[m]&&this._oneTimeListeners[m].length>0||this._eventedParent&&this._eventedParent.listens(m)},Yn.prototype.setEventedParent=function(m,L){return this._eventedParent=m,this._eventedParentData=L,this};var zi=8,ya={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},zn={"*":{type:"source"}},Xe=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Ut={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},ur={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},br={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Jr={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},sn={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},gn={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Cr={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},hn=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],gi={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Hn={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},qi={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},fa={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},eo={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ma={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},so={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ja={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Xo={type:"array",value:"*"},Uo={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},ms={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},as={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},il={type:"array",value:"*",minimum:1},oo={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},cs=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],Eo={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},hs={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Jo={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Qo={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Oa={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},co={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Al={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},$l={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Nu={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},os={"*":{type:"string"}},vn={$version:zi,$root:ya,sources:zn,source:Xe,source_vector:Ut,source_raster:ur,source_raster_dem:br,source_geojson:Jr,source_video:sn,source_image:gn,layer:Cr,layout:hn,layout_background:gi,layout_fill:Hn,layout_circle:qi,layout_heatmap:fa,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:eo,layout_symbol:ma,layout_raster:so,layout_hillshade:ja,filter:Xo,filter_operator:Uo,geometry_type:ms,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:as,expression:il,light:oo,paint:cs,paint_fill:Eo,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:hs,paint_circle:Jo,paint_heatmap:Qo,paint_symbol:Oa,paint_raster:co,paint_hillshade:Al,paint_background:$l,transition:Nu,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:os},bi=function(m,L,q,Y){this.message=(m?m+": ":"")+q,Y&&(this.identifier=Y),L!=null&&L.__line__&&(this.line=L.__line__)};function ac(y){var m=y.key,L=y.value;return L?[new bi(m,L,"constants have been deprecated as of v8")]:[]}function Pl(y){for(var m=[],L=arguments.length-1;L-- >0;)m[L]=arguments[L+1];for(var q=0,Y=m;q<Y.length;q+=1){var j=Y[q];for(var $ in j)y[$]=j[$]}return y}function ss(y){return y instanceof Number||y instanceof String||y instanceof Boolean?y.valueOf():y}function vl(y){if(Array.isArray(y))return y.map(vl);if(y instanceof Object&&!(y instanceof Number||y instanceof String||y instanceof Boolean)){var m={};for(var L in y)m[L]=vl(y[L]);return m}return ss(y)}var $o=function(y){function m(L,q){y.call(this,q),this.message=q,this.key=L}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m}(Error),Rl=function(m,L){L===void 0&&(L=[]),this.parent=m,this.bindings={};for(var q=0,Y=L;q<Y.length;q+=1){var j=Y[q],$=j[0],pe=j[1];this.bindings[$]=pe}};Rl.prototype.concat=function(m){return new Rl(this,m)},Rl.prototype.get=function(m){if(this.bindings[m])return this.bindings[m];if(this.parent)return this.parent.get(m);throw new Error(m+" not found in scope.")},Rl.prototype.has=function(m){return this.bindings[m]?!0:this.parent?this.parent.has(m):!1};var xu={kind:"null"},ii={kind:"number"},Aa={kind:"string"},Ca={kind:"boolean"},Fs={kind:"color"},Pf={kind:"object"},Ma={kind:"value"},Rf={kind:"error"},Wc={kind:"collator"},dl={kind:"formatted"},ff={kind:"resolvedImage"};function $s(y,m){return{kind:"array",itemType:y,N:m}}function ko(y){if(y.kind==="array"){var m=ko(y.itemType);return typeof y.N=="number"?"array<"+m+", "+y.N+">":y.itemType.kind==="value"?"array":"array<"+m+">"}else return y.kind}var eu=[xu,ii,Aa,Ca,Fs,dl,Pf,$s(Ma),ff];function _u(y,m){if(m.kind==="error")return null;if(y.kind==="array"){if(m.kind==="array"&&(m.N===0&&m.itemType.kind==="value"||!_u(y.itemType,m.itemType))&&(typeof y.N!="number"||y.N===m.N))return null}else{if(y.kind===m.kind)return null;if(y.kind==="value")for(var L=0,q=eu;L<q.length;L+=1){var Y=q[L];if(!_u(Y,m))return null}}return"Expected "+ko(y)+" but found "+ko(m)+" instead."}function Ah(y,m){return m.some(function(L){return L.kind===y.kind})}function Uu(y,m){return m.some(function(L){return L==="null"?y===null:L==="array"?Array.isArray(y):L==="object"?y&&!Array.isArray(y)&&typeof y=="object":L===typeof y})}var nv=a(function(y,m){var L={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function q(Fe){return Fe=Math.round(Fe),Fe<0?0:Fe>255?255:Fe}function Y(Fe){return Fe<0?0:Fe>1?1:Fe}function j(Fe){return Fe[Fe.length-1]==="%"?q(parseFloat(Fe)/100*255):q(parseInt(Fe))}function $(Fe){return Fe[Fe.length-1]==="%"?Y(parseFloat(Fe)/100):Y(parseFloat(Fe))}function pe(Fe,Ne,ct){return ct<0?ct+=1:ct>1&&(ct-=1),ct*6<1?Fe+(Ne-Fe)*ct*6:ct*2<1?Ne:ct*3<2?Fe+(Ne-Fe)*(2/3-ct)*6:Fe}function ke(Fe){var Ne=Fe.replace(/ /g,"").toLowerCase();if(Ne in L)return L[Ne].slice();if(Ne[0]==="#"){if(Ne.length===4){var ct=parseInt(Ne.substr(1),16);return ct>=0&&ct<=4095?[(ct&3840)>>4|(ct&3840)>>8,ct&240|(ct&240)>>4,ct&15|(ct&15)<<4,1]:null}else if(Ne.length===7){var ct=parseInt(Ne.substr(1),16);return ct>=0&&ct<=16777215?[(ct&16711680)>>16,(ct&65280)>>8,ct&255,1]:null}return null}var kt=Ne.indexOf("("),bt=Ne.indexOf(")");if(kt!==-1&&bt+1===Ne.length){var Yt=Ne.substr(0,kt),hr=Ne.substr(kt+1,bt-(kt+1)).split(","),Ir=1;switch(Yt){case"rgba":if(hr.length!==4)return null;Ir=$(hr.pop());case"rgb":return hr.length!==3?null:[j(hr[0]),j(hr[1]),j(hr[2]),Ir];case"hsla":if(hr.length!==4)return null;Ir=$(hr.pop());case"hsl":if(hr.length!==3)return null;var Ar=(parseFloat(hr[0])%360+360)%360/360,en=$(hr[1]),Ur=$(hr[2]),Qr=Ur<=.5?Ur*(en+1):Ur+en-Ur*en,on=Ur*2-Qr;return[q(pe(on,Qr,Ar+1/3)*255),q(pe(on,Qr,Ar)*255),q(pe(on,Qr,Ar-1/3)*255),Ir];default:return null}}return null}try{m.parseCSSColor=ke}catch(Fe){}}),Ac=nv.parseCSSColor,lo=function(m,L,q,Y){Y===void 0&&(Y=1),this.r=m,this.g=L,this.b=q,this.a=Y};lo.parse=function(m){if(m){if(m instanceof lo)return m;if(typeof m=="string"){var L=Ac(m);if(L)return new lo(L[0]/255*L[3],L[1]/255*L[3],L[2]/255*L[3],L[3])}}},lo.prototype.toString=function(){var m=this.toArray(),L=m[0],q=m[1],Y=m[2],j=m[3];return"rgba("+Math.round(L)+","+Math.round(q)+","+Math.round(Y)+","+j+")"},lo.prototype.toArray=function(){var m=this,L=m.r,q=m.g,Y=m.b,j=m.a;return j===0?[0,0,0,0]:[L*255/j,q*255/j,Y*255/j,j]},lo.black=new lo(0,0,0,1),lo.white=new lo(1,1,1,1),lo.transparent=new lo(0,0,0,0),lo.red=new lo(1,0,0,1);var Df=function(m,L,q){m?this.sensitivity=L?"variant":"case":this.sensitivity=L?"accent":"base",this.locale=q,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Df.prototype.compare=function(m,L){return this.collator.compare(m,L)},Df.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Mh=function(m,L,q,Y,j){this.text=m,this.image=L,this.scale=q,this.fontStack=Y,this.textColor=j},Us=function(m){this.sections=m};Us.fromString=function(m){return new Us([new Mh(m,null,null,null,null)])},Us.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(m){return m.text.length!==0||m.image&&m.image.name.length!==0})},Us.factory=function(m){return m instanceof Us?m:Us.fromString(m)},Us.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(m){return m.text}).join("")},Us.prototype.serialize=function(){for(var m=["format"],L=0,q=this.sections;L<q.length;L+=1){var Y=q[L];if(Y.image){m.push(["image",Y.image.name]);continue}m.push(Y.text);var j={};Y.fontStack&&(j["text-font"]=["literal",Y.fontStack.split(",")]),Y.scale&&(j["font-scale"]=Y.scale),Y.textColor&&(j["text-color"]=["rgba"].concat(Y.textColor.toArray())),m.push(j)}return m};var xs=function(m){this.name=m.name,this.available=m.available};xs.prototype.toString=function(){return this.name},xs.fromString=function(m){return m?new xs({name:m,available:!1}):null},xs.prototype.serialize=function(){return["image",this.name]};function Sh(y,m,L,q){if(!(typeof y=="number"&&y>=0&&y<=255&&typeof m=="number"&&m>=0&&m<=255&&typeof L=="number"&&L>=0&&L<=255)){var Y=typeof q=="number"?[y,m,L,q]:[y,m,L];return"Invalid rgba value ["+Y.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof q=="undefined"||typeof q=="number"&&q>=0&&q<=1?null:"Invalid rgba value ["+[y,m,L,q].join(", ")+"]: 'a' must be between 0 and 1."}function cf(y){if(y===null)return!0;if(typeof y=="string")return!0;if(typeof y=="boolean")return!0;if(typeof y=="number")return!0;if(y instanceof lo)return!0;if(y instanceof Df)return!0;if(y instanceof Us)return!0;if(y instanceof xs)return!0;if(Array.isArray(y)){for(var m=0,L=y;m<L.length;m+=1){var q=L[m];if(!cf(q))return!1}return!0}else if(typeof y=="object"){for(var Y in y)if(!cf(y[Y]))return!1;return!0}else return!1}function To(y){if(y===null)return xu;if(typeof y=="string")return Aa;if(typeof y=="boolean")return Ca;if(typeof y=="number")return ii;if(y instanceof lo)return Fs;if(y instanceof Df)return Wc;if(y instanceof Us)return dl;if(y instanceof xs)return ff;if(Array.isArray(y)){for(var m=y.length,L,q=0,Y=y;q<Y.length;q+=1){var j=Y[q],$=To(j);if(!L)L=$;else{if(L===$)continue;L=Ma;break}}return $s(L||Ma,m)}else return Pf}function vs(y){var m=typeof y;return y===null?"":m==="string"||m==="number"||m==="boolean"?String(y):y instanceof lo||y instanceof Us||y instanceof xs?y.toString():JSON.stringify(y)}var po=function(m,L){this.type=m,this.value=L};po.parse=function(m,L){if(m.length!==2)return L.error("'literal' expression requires exactly one argument, but found "+(m.length-1)+" instead.");if(!cf(m[1]))return L.error("invalid value");var q=m[1],Y=To(q),j=L.expectedType;return Y.kind==="array"&&Y.N===0&&j&&j.kind==="array"&&(typeof j.N!="number"||j.N===0)&&(Y=j),new po(Y,q)},po.prototype.evaluate=function(){return this.value},po.prototype.eachChild=function(){},po.prototype.outputDefined=function(){return!0},po.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof lo?["rgba"].concat(this.value.toArray()):this.value instanceof Us?this.value.serialize():this.value};var Co=function(m){this.name="ExpressionEvaluationError",this.message=m};Co.prototype.toJSON=function(){return this.message};var Mc={string:Aa,number:ii,boolean:Ca,object:Pf},qs=function(m,L){this.type=m,this.args=L};qs.parse=function(m,L){if(m.length<2)return L.error("Expected at least one argument.");var q=1,Y,j=m[0];if(j==="array"){var $;if(m.length>2){var pe=m[1];if(typeof pe!="string"||!(pe in Mc)||pe==="object")return L.error('The item type argument of "array" must be one of string, number, boolean',1);$=Mc[pe],q++}else $=Ma;var ke;if(m.length>3){if(m[2]!==null&&(typeof m[2]!="number"||m[2]<0||m[2]!==Math.floor(m[2])))return L.error('The length argument to "array" must be a positive integer literal',2);ke=m[2],q++}Y=$s($,ke)}else Y=Mc[j];for(var Fe=[];q<m.length;q++){var Ne=L.parse(m[q],q,Ma);if(!Ne)return null;Fe.push(Ne)}return new qs(Y,Fe)},qs.prototype.evaluate=function(m){for(var L=0;L<this.args.length;L++){var q=this.args[L].evaluate(m),Y=_u(this.type,To(q));if(Y){if(L===this.args.length-1)throw new Co("Expected value to be of type "+ko(this.type)+", but found "+ko(To(q))+" instead.")}else return q}return null},qs.prototype.eachChild=function(m){this.args.forEach(m)},qs.prototype.outputDefined=function(){return this.args.every(function(m){return m.outputDefined()})},qs.prototype.serialize=function(){var m=this.type,L=[m.kind];if(m.kind==="array"){var q=m.itemType;if(q.kind==="string"||q.kind==="number"||q.kind==="boolean"){L.push(q.kind);var Y=m.N;(typeof Y=="number"||this.args.length>1)&&L.push(Y)}}return L.concat(this.args.map(function(j){return j.serialize()}))};var Vl=function(m){this.type=dl,this.sections=m};Vl.parse=function(m,L){if(m.length<2)return L.error("Expected at least one argument.");var q=m[1];if(!Array.isArray(q)&&typeof q=="object")return L.error("First argument must be an image or text section.");for(var Y=[],j=!1,$=1;$<=m.length-1;++$){var pe=m[$];if(j&&typeof pe=="object"&&!Array.isArray(pe)){j=!1;var ke=null;if(pe["font-scale"]&&(ke=L.parse(pe["font-scale"],1,ii),!ke))return null;var Fe=null;if(pe["text-font"]&&(Fe=L.parse(pe["text-font"],1,$s(Aa)),!Fe))return null;var Ne=null;if(pe["text-color"]&&(Ne=L.parse(pe["text-color"],1,Fs),!Ne))return null;var ct=Y[Y.length-1];ct.scale=ke,ct.font=Fe,ct.textColor=Ne}else{var kt=L.parse(m[$],1,Ma);if(!kt)return null;var bt=kt.type.kind;if(bt!=="string"&&bt!=="value"&&bt!=="null"&&bt!=="resolvedImage")return L.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");j=!0,Y.push({content:kt,scale:null,font:null,textColor:null})}}return new Vl(Y)},Vl.prototype.evaluate=function(m){var L=function(q){var Y=q.content.evaluate(m);return To(Y)===ff?new Mh("",Y,null,null,null):new Mh(vs(Y),null,q.scale?q.scale.evaluate(m):null,q.font?q.font.evaluate(m).join(","):null,q.textColor?q.textColor.evaluate(m):null)};return new Us(this.sections.map(L))},Vl.prototype.eachChild=function(m){for(var L=0,q=this.sections;L<q.length;L+=1){var Y=q[L];m(Y.content),Y.scale&&m(Y.scale),Y.font&&m(Y.font),Y.textColor&&m(Y.textColor)}},Vl.prototype.outputDefined=function(){return!1},Vl.prototype.serialize=function(){for(var m=["format"],L=0,q=this.sections;L<q.length;L+=1){var Y=q[L];m.push(Y.content.serialize());var j={};Y.scale&&(j["font-scale"]=Y.scale.serialize()),Y.font&&(j["text-font"]=Y.font.serialize()),Y.textColor&&(j["text-color"]=Y.textColor.serialize()),m.push(j)}return m};var hf=function(m){this.type=ff,this.input=m};hf.parse=function(m,L){if(m.length!==2)return L.error("Expected two arguments.");var q=L.parse(m[1],1,Aa);return q?new hf(q):L.error("No image name provided.")},hf.prototype.evaluate=function(m){var L=this.input.evaluate(m),q=xs.fromString(L);return q&&m.availableImages&&(q.available=m.availableImages.indexOf(L)>-1),q},hf.prototype.eachChild=function(m){m(this.input)},hf.prototype.outputDefined=function(){return!1},hf.prototype.serialize=function(){return["image",this.input.serialize()]};var _d={"to-boolean":Ca,"to-color":Fs,"to-number":ii,"to-string":Aa},bu=function(m,L){this.type=m,this.args=L};bu.parse=function(m,L){if(m.length<2)return L.error("Expected at least one argument.");var q=m[0];if((q==="to-boolean"||q==="to-string")&&m.length!==2)return L.error("Expected one argument.");for(var Y=_d[q],j=[],$=1;$<m.length;$++){var pe=L.parse(m[$],$,Ma);if(!pe)return null;j.push(pe)}return new bu(Y,j)},bu.prototype.evaluate=function(m){if(this.type.kind==="boolean")return!!this.args[0].evaluate(m);if(this.type.kind==="color"){for(var L,q,Y=0,j=this.args;Y<j.length;Y+=1){var $=j[Y];if(L=$.evaluate(m),q=null,L instanceof lo)return L;if(typeof L=="string"){var pe=m.parseColor(L);if(pe)return pe}else if(Array.isArray(L)&&(L.length<3||L.length>4?q="Invalid rbga value "+JSON.stringify(L)+": expected an array containing either three or four numeric values.":q=Sh(L[0],L[1],L[2],L[3]),!q))return new lo(L[0]/255,L[1]/255,L[2]/255,L[3])}throw new Co(q||"Could not parse color from value '"+(typeof L=="string"?L:String(JSON.stringify(L)))+"'")}else if(this.type.kind==="number"){for(var ke=null,Fe=0,Ne=this.args;Fe<Ne.length;Fe+=1){var ct=Ne[Fe];if(ke=ct.evaluate(m),ke===null)return 0;var kt=Number(ke);if(!isNaN(kt))return kt}throw new Co("Could not convert "+JSON.stringify(ke)+" to number.")}else return this.type.kind==="formatted"?Us.fromString(vs(this.args[0].evaluate(m))):this.type.kind==="resolvedImage"?xs.fromString(vs(this.args[0].evaluate(m))):vs(this.args[0].evaluate(m))},bu.prototype.eachChild=function(m){this.args.forEach(m)},bu.prototype.outputDefined=function(){return this.args.every(function(m){return m.outputDefined()})},bu.prototype.serialize=function(){if(this.type.kind==="formatted")return new Vl([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new hf(this.args[0]).serialize();var m=["to-"+this.type.kind];return this.eachChild(function(L){m.push(L.serialize())}),m};var Wp=["Unknown","Point","LineString","Polygon"],Hl=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Hl.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Hl.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Wp[this.feature.type]:this.feature.type:null},Hl.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Hl.prototype.canonicalID=function(){return this.canonical},Hl.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Hl.prototype.parseColor=function(m){var L=this._parseColorCache[m];return L||(L=this._parseColorCache[m]=lo.parse(m)),L};var ho=function(m,L,q,Y){this.name=m,this.type=L,this._evaluate=q,this.args=Y};ho.prototype.evaluate=function(m){return this._evaluate(m,this.args)},ho.prototype.eachChild=function(m){this.args.forEach(m)},ho.prototype.outputDefined=function(){return!1},ho.prototype.serialize=function(){return[this.name].concat(this.args.map(function(m){return m.serialize()}))},ho.parse=function(m,L){var q,Y=m[0],j=ho.definitions[Y];if(!j)return L.error('Unknown expression "'+Y+'". If you wanted a literal array, use ["literal", [...]].',0);for(var $=Array.isArray(j)?j[0]:j.type,pe=Array.isArray(j)?[[j[1],j[2]]]:j.overloads,ke=pe.filter(function(Ni){var Yi=Ni[0];return!Array.isArray(Yi)||Yi.length===m.length-1}),Fe=null,Ne=0,ct=ke;Ne<ct.length;Ne+=1){var kt=ct[Ne],bt=kt[0],Yt=kt[1];Fe=new Vs(L.registry,L.path,null,L.scope);for(var hr=[],Ir=!1,Ar=1;Ar<m.length;Ar++){var en=m[Ar],Ur=Array.isArray(bt)?bt[Ar-1]:bt.type,Qr=Fe.parse(en,1+hr.length,Ur);if(!Qr){Ir=!0;break}hr.push(Qr)}if(!Ir){if(Array.isArray(bt)&&bt.length!==hr.length){Fe.error("Expected "+bt.length+" arguments, but found "+hr.length+" instead.");continue}for(var on=0;on<hr.length;on++){var Pn=Array.isArray(bt)?bt[on]:bt.type,oi=hr[on];Fe.concat(on+1).checkSubtype(Pn,oi.type)}if(Fe.errors.length===0)return new ho(Y,$,Yt,hr)}}if(ke.length===1)(q=L.errors).push.apply(q,Fe.errors);else{for(var ti=ke.length?ke:pe,Bi=ti.map(function(Ni){var Yi=Ni[0];return Dv(Yi)}).join(" | "),Ti=[],Ri=1;Ri<m.length;Ri++){var wa=L.parse(m[Ri],1+Ti.length);if(!wa)return null;Ti.push(ko(wa.type))}L.error("Expected arguments of type "+Bi+", but found ("+Ti.join(", ")+") instead.")}return null},ho.register=function(m,L){ho.definitions=L;for(var q in L)m[q]=ho};function Dv(y){return Array.isArray(y)?"("+y.map(ko).join(", ")+")":"("+ko(y.type)+"...)"}var vf=function(m,L,q){this.type=Wc,this.locale=q,this.caseSensitive=m,this.diacriticSensitive=L};vf.parse=function(m,L){if(m.length!==2)return L.error("Expected one argument.");var q=m[1];if(typeof q!="object"||Array.isArray(q))return L.error("Collator options argument must be an object.");var Y=L.parse(q["case-sensitive"]===void 0?!1:q["case-sensitive"],1,Ca);if(!Y)return null;var j=L.parse(q["diacritic-sensitive"]===void 0?!1:q["diacritic-sensitive"],1,Ca);if(!j)return null;var $=null;return q.locale&&($=L.parse(q.locale,1,Aa),!$)?null:new vf(Y,j,$)},vf.prototype.evaluate=function(m){return new Df(this.caseSensitive.evaluate(m),this.diacriticSensitive.evaluate(m),this.locale?this.locale.evaluate(m):null)},vf.prototype.eachChild=function(m){m(this.caseSensitive),m(this.diacriticSensitive),this.locale&&m(this.locale)},vf.prototype.outputDefined=function(){return!1},vf.prototype.serialize=function(){var m={};return m["case-sensitive"]=this.caseSensitive.serialize(),m["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(m.locale=this.locale.serialize()),["collator",m]};var Gl=8192;function iv(y,m){y[0]=Math.min(y[0],m[0]),y[1]=Math.min(y[1],m[1]),y[2]=Math.max(y[2],m[0]),y[3]=Math.max(y[3],m[1])}function Eh(y){return(180+y)/360}function av(y){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+y*Math.PI/360)))/360}function wu(y,m){return!(y[0]<=m[0]||y[2]>=m[2]||y[1]<=m[1]||y[3]>=m[3])}function Iv(y,m){var L=Eh(y[0]),q=av(y[1]),Y=Math.pow(2,m.z);return[Math.round(L*Y*Gl),Math.round(q*Y*Gl)]}function ov(y,m,L){var q=y[0]-m[0],Y=y[1]-m[1],j=y[0]-L[0],$=y[1]-L[1];return q*$-j*Y===0&&q*j<=0&&Y*$<=0}function kh(y,m,L){return m[1]>y[1]!=L[1]>y[1]&&y[0]<(L[0]-m[0])*(y[1]-m[1])/(L[1]-m[1])+m[0]}function sv(y,m){for(var L=!1,q=0,Y=m.length;q<Y;q++)for(var j=m[q],$=0,pe=j.length;$<pe-1;$++){if(ov(y,j[$],j[$+1]))return!1;kh(y,j[$],j[$+1])&&(L=!L)}return L}function bd(y,m){for(var L=0;L<m.length;L++)if(sv(y,m[L]))return!0;return!1}function Hd(y,m){return y[0]*m[1]-y[1]*m[0]}function If(y,m,L,q){var Y=y[0]-L[0],j=y[1]-L[1],$=m[0]-L[0],pe=m[1]-L[1],ke=q[0]-L[0],Fe=q[1]-L[1],Ne=Y*Fe-ke*j,ct=$*Fe-ke*pe;return Ne>0&&ct<0||Ne<0&&ct>0}function Fv(y,m,L,q){var Y=[m[0]-y[0],m[1]-y[1]],j=[q[0]-L[0],q[1]-L[1]];return Hd(j,Y)===0?!1:!!(If(y,m,L,q)&&If(L,q,y,m))}function oc(y,m,L){for(var q=0,Y=L;q<Y.length;q+=1)for(var j=Y[q],$=0;$<j.length-1;++$)if(Fv(y,m,j[$],j[$+1]))return!0;return!1}function Ch(y,m){for(var L=0;L<y.length;++L)if(!sv(y[L],m))return!1;for(var q=0;q<y.length-1;++q)if(oc(y[q],y[q+1],m))return!1;return!0}function Vu(y,m){for(var L=0;L<m.length;L++)if(Ch(y,m[L]))return!0;return!1}function Sc(y,m,L){for(var q=[],Y=0;Y<y.length;Y++){for(var j=[],$=0;$<y[Y].length;$++){var pe=Iv(y[Y][$],L);iv(m,pe),j.push(pe)}q.push(j)}return q}function Ff(y,m,L){for(var q=[],Y=0;Y<y.length;Y++){var j=Sc(y[Y],m,L);q.push(j)}return q}function qv(y,m,L,q){if(y[0]<L[0]||y[0]>L[2]){var Y=q*.5,j=y[0]-L[0]>Y?-q:L[0]-y[0]>Y?q:0;j===0&&(j=y[0]-L[2]>Y?-q:L[2]-y[0]>Y?q:0),y[0]+=j}iv(m,y)}function zv(y){y[0]=y[1]=1/0,y[2]=y[3]=-1/0}function Ov(y,m,L,q){for(var Y=Math.pow(2,q.z)*Gl,j=[q.x*Gl,q.y*Gl],$=[],pe=0,ke=y;pe<ke.length;pe+=1)for(var Fe=ke[pe],Ne=0,ct=Fe;Ne<ct.length;Ne+=1){var kt=ct[Ne],bt=[kt.x+j[0],kt.y+j[1]];qv(bt,m,L,Y),$.push(bt)}return $}function lv(y,m,L,q){for(var Y=Math.pow(2,q.z)*Gl,j=[q.x*Gl,q.y*Gl],$=[],pe=0,ke=y;pe<ke.length;pe+=1){for(var Fe=ke[pe],Ne=[],ct=0,kt=Fe;ct<kt.length;ct+=1){var bt=kt[ct],Yt=[bt.x+j[0],bt.y+j[1]];iv(m,Yt),Ne.push(Yt)}$.push(Ne)}if(m[2]-m[0]<=Y/2){zv(m);for(var hr=0,Ir=$;hr<Ir.length;hr+=1)for(var Ar=Ir[hr],en=0,Ur=Ar;en<Ur.length;en+=1){var Qr=Ur[en];qv(Qr,m,L,Y)}}return $}function uv(y,m){var L=[1/0,1/0,-1/0,-1/0],q=[1/0,1/0,-1/0,-1/0],Y=y.canonicalID();if(m.type==="Polygon"){var j=Sc(m.coordinates,q,Y),$=Ov(y.geometry(),L,q,Y);if(!wu(L,q))return!1;for(var pe=0,ke=$;pe<ke.length;pe+=1){var Fe=ke[pe];if(!sv(Fe,j))return!1}}if(m.type==="MultiPolygon"){var Ne=Ff(m.coordinates,q,Y),ct=Ov(y.geometry(),L,q,Y);if(!wu(L,q))return!1;for(var kt=0,bt=ct;kt<bt.length;kt+=1){var Yt=bt[kt];if(!bd(Yt,Ne))return!1}}return!0}function Bv(y,m){var L=[1/0,1/0,-1/0,-1/0],q=[1/0,1/0,-1/0,-1/0],Y=y.canonicalID();if(m.type==="Polygon"){var j=Sc(m.coordinates,q,Y),$=lv(y.geometry(),L,q,Y);if(!wu(L,q))return!1;for(var pe=0,ke=$;pe<ke.length;pe+=1){var Fe=ke[pe];if(!Ch(Fe,j))return!1}}if(m.type==="MultiPolygon"){var Ne=Ff(m.coordinates,q,Y),ct=lv(y.geometry(),L,q,Y);if(!wu(L,q))return!1;for(var kt=0,bt=ct;kt<bt.length;kt+=1){var Yt=bt[kt];if(!Vu(Yt,Ne))return!1}}return!0}var tu=function(m,L){this.type=Ca,this.geojson=m,this.geometries=L};tu.parse=function(m,L){if(m.length!==2)return L.error("'within' expression requires exactly one argument, but found "+(m.length-1)+" instead.");if(cf(m[1])){var q=m[1];if(q.type==="FeatureCollection")for(var Y=0;Y<q.features.length;++Y){var j=q.features[Y].geometry.type;if(j==="Polygon"||j==="MultiPolygon")return new tu(q,q.features[Y].geometry)}else if(q.type==="Feature"){var $=q.geometry.type;if($==="Polygon"||$==="MultiPolygon")return new tu(q,q.geometry)}else if(q.type==="Polygon"||q.type==="MultiPolygon")return new tu(q,q)}return L.error("'within' expression requires valid geojson object that contains polygon geometry type.")},tu.prototype.evaluate=function(m){if(m.geometry()!=null&&m.canonicalID()!=null){if(m.geometryType()==="Point")return uv(m,this.geometries);if(m.geometryType()==="LineString")return Bv(m,this.geometries)}return!1},tu.prototype.eachChild=function(){},tu.prototype.outputDefined=function(){return!0},tu.prototype.serialize=function(){return["within",this.geojson]};function fv(y){if(y instanceof ho){if(y.name==="get"&&y.args.length===1)return!1;if(y.name==="feature-state")return!1;if(y.name==="has"&&y.args.length===1)return!1;if(y.name==="properties"||y.name==="geometry-type"||y.name==="id")return!1;if(/^filter-/.test(y.name))return!1}if(y instanceof tu)return!1;var m=!0;return y.eachChild(function(L){m&&!fv(L)&&(m=!1)}),m}function al(y){if(y instanceof ho&&y.name==="feature-state")return!1;var m=!0;return y.eachChild(function(L){m&&!al(L)&&(m=!1)}),m}function ru(y,m){if(y instanceof ho&&m.indexOf(y.name)>=0)return!1;var L=!0;return y.eachChild(function(q){L&&!ru(q,m)&&(L=!1)}),L}var qf=function(m,L){this.type=L.type,this.name=m,this.boundExpression=L};qf.parse=function(m,L){if(m.length!==2||typeof m[1]!="string")return L.error("'var' expression requires exactly one string literal argument.");var q=m[1];return L.scope.has(q)?new qf(q,L.scope.get(q)):L.error('Unknown variable "'+q+'". Make sure "'+q+'" has been bound in an enclosing "let" expression before using it.',1)},qf.prototype.evaluate=function(m){return this.boundExpression.evaluate(m)},qf.prototype.eachChild=function(){},qf.prototype.outputDefined=function(){return!1},qf.prototype.serialize=function(){return["var",this.name]};var Vs=function(m,L,q,Y,j){L===void 0&&(L=[]),Y===void 0&&(Y=new Rl),j===void 0&&(j=[]),this.registry=m,this.path=L,this.key=L.map(function($){return"["+$+"]"}).join(""),this.scope=Y,this.errors=j,this.expectedType=q};Vs.prototype.parse=function(m,L,q,Y,j){return j===void 0&&(j={}),L?this.concat(L,q,Y)._parse(m,j):this._parse(m,j)},Vs.prototype._parse=function(m,L){(m===null||typeof m=="string"||typeof m=="boolean"||typeof m=="number")&&(m=["literal",m]);function q(Ne,ct,kt){return kt==="assert"?new qs(ct,[Ne]):kt==="coerce"?new bu(ct,[Ne]):Ne}if(Array.isArray(m)){if(m.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var Y=m[0];if(typeof Y!="string")return this.error("Expression name must be a string, but found "+typeof Y+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var j=this.registry[Y];if(j){var $=j.parse(m,this);if(!$)return null;if(this.expectedType){var pe=this.expectedType,ke=$.type;if((pe.kind==="string"||pe.kind==="number"||pe.kind==="boolean"||pe.kind==="object"||pe.kind==="array")&&ke.kind==="value")$=q($,pe,L.typeAnnotation||"assert");else if((pe.kind==="color"||pe.kind==="formatted"||pe.kind==="resolvedImage")&&(ke.kind==="value"||ke.kind==="string"))$=q($,pe,L.typeAnnotation||"coerce");else if(this.checkSubtype(pe,ke))return null}if(!($ instanceof po)&&$.type.kind!=="resolvedImage"&&Xc($)){var Fe=new Hl;try{$=new po($.type,$.evaluate(Fe))}catch(Ne){return this.error(Ne.message),null}}return $}return this.error('Unknown expression "'+Y+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof m=="undefined"?this.error("'undefined' value invalid. Use null instead."):typeof m=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof m+" instead.")},Vs.prototype.concat=function(m,L,q){var Y=typeof m=="number"?this.path.concat(m):this.path,j=q?this.scope.concat(q):this.scope;return new Vs(this.registry,Y,L||null,j,this.errors)},Vs.prototype.error=function(m){for(var L=[],q=arguments.length-1;q-- >0;)L[q]=arguments[q+1];var Y=""+this.key+L.map(function(j){return"["+j+"]"}).join("");this.errors.push(new $o(Y,m))},Vs.prototype.checkSubtype=function(m,L){var q=_u(m,L);return q&&this.error(q),q};function Xc(y){if(y instanceof qf)return Xc(y.boundExpression);if(y instanceof ho&&y.name==="error")return!1;if(y instanceof vf)return!1;if(y instanceof tu)return!1;var m=y instanceof bu||y instanceof qs,L=!0;return y.eachChild(function(q){m?L=L&&Xc(q):L=L&&q instanceof po}),L?fv(y)&&ru(y,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function zf(y,m){for(var L=y.length-1,q=0,Y=L,j=0,$,pe;q<=Y;)if(j=Math.floor((q+Y)/2),$=y[j],pe=y[j+1],$<=m){if(j===L||m<pe)return j;q=j+1}else if($>m)Y=j-1;else throw new Co("Input is not a number.");return 0}var Dl=function(m,L,q){this.type=m,this.input=L,this.labels=[],this.outputs=[];for(var Y=0,j=q;Y<j.length;Y+=1){var $=j[Y],pe=$[0],ke=$[1];this.labels.push(pe),this.outputs.push(ke)}};Dl.parse=function(m,L){if(m.length-1<4)return L.error("Expected at least 4 arguments, but found only "+(m.length-1)+".");if((m.length-1)%2!==0)return L.error("Expected an even number of arguments.");var q=L.parse(m[1],1,ii);if(!q)return null;var Y=[],j=null;L.expectedType&&L.expectedType.kind!=="value"&&(j=L.expectedType);for(var $=1;$<m.length;$+=2){var pe=$===1?-1/0:m[$],ke=m[$+1],Fe=$,Ne=$+1;if(typeof pe!="number")return L.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Fe);if(Y.length&&Y[Y.length-1][0]>=pe)return L.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Fe);var ct=L.parse(ke,Ne,j);if(!ct)return null;j=j||ct.type,Y.push([pe,ct])}return new Dl(j,q,Y)},Dl.prototype.evaluate=function(m){var L=this.labels,q=this.outputs;if(L.length===1)return q[0].evaluate(m);var Y=this.input.evaluate(m);if(Y<=L[0])return q[0].evaluate(m);var j=L.length;if(Y>=L[j-1])return q[j-1].evaluate(m);var $=zf(L,Y);return q[$].evaluate(m)},Dl.prototype.eachChild=function(m){m(this.input);for(var L=0,q=this.outputs;L<q.length;L+=1){var Y=q[L];m(Y)}},Dl.prototype.outputDefined=function(){return this.outputs.every(function(m){return m.outputDefined()})},Dl.prototype.serialize=function(){for(var m=["step",this.input.serialize()],L=0;L<this.labels.length;L++)L>0&&m.push(this.labels[L]),m.push(this.outputs[L].serialize());return m};function zs(y,m,L){return y*(1-L)+m*L}function Gd(y,m,L){return new lo(zs(y.r,m.r,L),zs(y.g,m.g,L),zs(y.b,m.b,L),zs(y.a,m.a,L))}function Yd(y,m,L){return y.map(function(q,Y){return zs(q,m[Y],L)})}var Tu=Object.freeze({__proto__:null,number:zs,color:Gd,array:Yd}),df=.95047,nu=1,Wd=1.08883,Zc=4/29,jc=6/29,Au=3*jc*jc,Nv=jc*jc*jc,cv=Math.PI/180,hv=180/Math.PI;function Uv(y){return y>Nv?Math.pow(y,1/3):y/Au+Zc}function Kc(y){return y>jc?y*y*y:Au*(y-Zc)}function Of(y){return 255*(y<=.0031308?12.92*y:1.055*Math.pow(y,1/2.4)-.055)}function Ec(y){return y/=255,y<=.04045?y/12.92:Math.pow((y+.055)/1.055,2.4)}function Lh(y){var m=Ec(y.r),L=Ec(y.g),q=Ec(y.b),Y=Uv((.4124564*m+.3575761*L+.1804375*q)/df),j=Uv((.2126729*m+.7151522*L+.072175*q)/nu),$=Uv((.0193339*m+.119192*L+.9503041*q)/Wd);return{l:116*j-16,a:500*(Y-j),b:200*(j-$),alpha:y.a}}function wd(y){var m=(y.l+16)/116,L=isNaN(y.a)?m:m+y.a/500,q=isNaN(y.b)?m:m-y.b/200;return m=nu*Kc(m),L=df*Kc(L),q=Wd*Kc(q),new lo(Of(3.2404542*L-1.5371385*m-.4985314*q),Of(-.969266*L+1.8760108*m+.041556*q),Of(.0556434*L-.2040259*m+1.0572252*q),y.alpha)}function Oo(y,m,L){return{l:zs(y.l,m.l,L),a:zs(y.a,m.a,L),b:zs(y.b,m.b,L),alpha:zs(y.alpha,m.alpha,L)}}function Jc(y){var m=Lh(y),L=m.l,q=m.a,Y=m.b,j=Math.atan2(Y,q)*hv;return{h:j<0?j+360:j,c:Math.sqrt(q*q+Y*Y),l:L,alpha:y.a}}function kc(y){var m=y.h*cv,L=y.c,q=y.l;return wd({l:q,a:Math.cos(m)*L,b:Math.sin(m)*L,alpha:y.alpha})}function Cc(y,m,L){var q=m-y;return y+L*(q>180||q<-180?q-360*Math.round(q/360):q)}function Qc(y,m,L){return{h:Cc(y.h,m.h,L),c:zs(y.c,m.c,L),l:zs(y.l,m.l,L),alpha:zs(y.alpha,m.alpha,L)}}var pf={forward:Lh,reverse:wd,interpolate:Oo},sc={forward:Jc,reverse:kc,interpolate:Qc},Vv=Object.freeze({__proto__:null,lab:pf,hcl:sc}),Hs=function(m,L,q,Y,j){this.type=m,this.operator=L,this.interpolation=q,this.input=Y,this.labels=[],this.outputs=[];for(var $=0,pe=j;$<pe.length;$+=1){var ke=pe[$],Fe=ke[0],Ne=ke[1];this.labels.push(Fe),this.outputs.push(Ne)}};Hs.interpolationFactor=function(m,L,q,Y){var j=0;if(m.name==="exponential")j=vv(L,m.base,q,Y);else if(m.name==="linear")j=vv(L,1,q,Y);else if(m.name==="cubic-bezier"){var $=m.controlPoints,pe=new s($[0],$[1],$[2],$[3]);j=pe.solve(vv(L,1,q,Y))}return j},Hs.parse=function(m,L){var q=m[0],Y=m[1],j=m[2],$=m.slice(3);if(!Array.isArray(Y)||Y.length===0)return L.error("Expected an interpolation type expression.",1);if(Y[0]==="linear")Y={name:"linear"};else if(Y[0]==="exponential"){var pe=Y[1];if(typeof pe!="number")return L.error("Exponential interpolation requires a numeric base.",1,1);Y={name:"exponential",base:pe}}else if(Y[0]==="cubic-bezier"){var ke=Y.slice(1);if(ke.length!==4||ke.some(function(Ar){return typeof Ar!="number"||Ar<0||Ar>1}))return L.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);Y={name:"cubic-bezier",controlPoints:ke}}else return L.error("Unknown interpolation type "+String(Y[0]),1,0);if(m.length-1<4)return L.error("Expected at least 4 arguments, but found only "+(m.length-1)+".");if((m.length-1)%2!==0)return L.error("Expected an even number of arguments.");if(j=L.parse(j,2,ii),!j)return null;var Fe=[],Ne=null;q==="interpolate-hcl"||q==="interpolate-lab"?Ne=Fs:L.expectedType&&L.expectedType.kind!=="value"&&(Ne=L.expectedType);for(var ct=0;ct<$.length;ct+=2){var kt=$[ct],bt=$[ct+1],Yt=ct+3,hr=ct+4;if(typeof kt!="number")return L.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Yt);if(Fe.length&&Fe[Fe.length-1][0]>=kt)return L.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Yt);var Ir=L.parse(bt,hr,Ne);if(!Ir)return null;Ne=Ne||Ir.type,Fe.push([kt,Ir])}return Ne.kind!=="number"&&Ne.kind!=="color"&&!(Ne.kind==="array"&&Ne.itemType.kind==="number"&&typeof Ne.N=="number")?L.error("Type "+ko(Ne)+" is not interpolatable."):new Hs(Ne,q,Y,j,Fe)},Hs.prototype.evaluate=function(m){var L=this.labels,q=this.outputs;if(L.length===1)return q[0].evaluate(m);var Y=this.input.evaluate(m);if(Y<=L[0])return q[0].evaluate(m);var j=L.length;if(Y>=L[j-1])return q[j-1].evaluate(m);var $=zf(L,Y),pe=L[$],ke=L[$+1],Fe=Hs.interpolationFactor(this.interpolation,Y,pe,ke),Ne=q[$].evaluate(m),ct=q[$+1].evaluate(m);return this.operator==="interpolate"?Tu[this.type.kind.toLowerCase()](Ne,ct,Fe):this.operator==="interpolate-hcl"?sc.reverse(sc.interpolate(sc.forward(Ne),sc.forward(ct),Fe)):pf.reverse(pf.interpolate(pf.forward(Ne),pf.forward(ct),Fe))},Hs.prototype.eachChild=function(m){m(this.input);for(var L=0,q=this.outputs;L<q.length;L+=1){var Y=q[L];m(Y)}},Hs.prototype.outputDefined=function(){return this.outputs.every(function(m){return m.outputDefined()})},Hs.prototype.serialize=function(){var m;this.interpolation.name==="linear"?m=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?m=["linear"]:m=["exponential",this.interpolation.base]:m=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var L=[this.operator,m,this.input.serialize()],q=0;q<this.labels.length;q++)L.push(this.labels[q],this.outputs[q].serialize());return L};function vv(y,m,L,q){var Y=q-L,j=y-L;return Y===0?0:m===1?j/Y:(Math.pow(m,j)-1)/(Math.pow(m,Y)-1)}var Bf=function(m,L){this.type=m,this.args=L};Bf.parse=function(m,L){if(m.length<2)return L.error("Expectected at least one argument.");var q=null,Y=L.expectedType;Y&&Y.kind!=="value"&&(q=Y);for(var j=[],$=0,pe=m.slice(1);$<pe.length;$+=1){var ke=pe[$],Fe=L.parse(ke,1+j.length,q,void 0,{typeAnnotation:"omit"});if(!Fe)return null;q=q||Fe.type,j.push(Fe)}var Ne=Y&&j.some(function(ct){return _u(Y,ct.type)});return Ne?new Bf(Ma,j):new Bf(q,j)},Bf.prototype.evaluate=function(m){for(var L=null,q=0,Y,j=0,$=this.args;j<$.length;j+=1){var pe=$[j];if(q++,L=pe.evaluate(m),L&&L instanceof xs&&!L.available&&(Y||(Y=L.name),L=null,q===this.args.length&&(L=Y)),L!==null)break}return L},Bf.prototype.eachChild=function(m){this.args.forEach(m)},Bf.prototype.outputDefined=function(){return this.args.every(function(m){return m.outputDefined()})},Bf.prototype.serialize=function(){var m=["coalesce"];return this.eachChild(function(L){m.push(L.serialize())}),m};var Nf=function(m,L){this.type=L.type,this.bindings=[].concat(m),this.result=L};Nf.prototype.evaluate=function(m){return this.result.evaluate(m)},Nf.prototype.eachChild=function(m){for(var L=0,q=this.bindings;L<q.length;L+=1){var Y=q[L];m(Y[1])}m(this.result)},Nf.parse=function(m,L){if(m.length<4)return L.error("Expected at least 3 arguments, but found "+(m.length-1)+" instead.");for(var q=[],Y=1;Y<m.length-1;Y+=2){var j=m[Y];if(typeof j!="string")return L.error("Expected string, but found "+typeof j+" instead.",Y);if(/[^a-zA-Z0-9_]/.test(j))return L.error("Variable names must contain only alphanumeric characters or '_'.",Y);var $=L.parse(m[Y+1],Y+1);if(!$)return null;q.push([j,$])}var pe=L.parse(m[m.length-1],m.length-1,L.expectedType,q);return pe?new Nf(q,pe):null},Nf.prototype.outputDefined=function(){return this.result.outputDefined()},Nf.prototype.serialize=function(){for(var m=["let"],L=0,q=this.bindings;L<q.length;L+=1){var Y=q[L],j=Y[0],$=Y[1];m.push(j,$.serialize())}return m.push(this.result.serialize()),m};var Uf=function(m,L,q){this.type=m,this.index=L,this.input=q};Uf.parse=function(m,L){if(m.length!==3)return L.error("Expected 2 arguments, but found "+(m.length-1)+" instead.");var q=L.parse(m[1],1,ii),Y=L.parse(m[2],2,$s(L.expectedType||Ma));if(!q||!Y)return null;var j=Y.type;return new Uf(j.itemType,q,Y)},Uf.prototype.evaluate=function(m){var L=this.index.evaluate(m),q=this.input.evaluate(m);if(L<0)throw new Co("Array index out of bounds: "+L+" < 0.");if(L>=q.length)throw new Co("Array index out of bounds: "+L+" > "+(q.length-1)+".");if(L!==Math.floor(L))throw new Co("Array index must be an integer, but found "+L+" instead.");return q[L]},Uf.prototype.eachChild=function(m){m(this.index),m(this.input)},Uf.prototype.outputDefined=function(){return!1},Uf.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var _s=function(m,L){this.type=Ca,this.needle=m,this.haystack=L};_s.parse=function(m,L){if(m.length!==3)return L.error("Expected 2 arguments, but found "+(m.length-1)+" instead.");var q=L.parse(m[1],1,Ma),Y=L.parse(m[2],2,Ma);return!q||!Y?null:Ah(q.type,[Ca,Aa,ii,xu,Ma])?new _s(q,Y):L.error("Expected first argument to be of type boolean, string, number or null, but found "+ko(q.type)+" instead")},_s.prototype.evaluate=function(m){var L=this.needle.evaluate(m),q=this.haystack.evaluate(m);if(!q)return!1;if(!Uu(L,["boolean","string","number","null"]))throw new Co("Expected first argument to be of type boolean, string, number or null, but found "+ko(To(L))+" instead.");if(!Uu(q,["string","array"]))throw new Co("Expected second argument to be of type array or string, but found "+ko(To(q))+" instead.");return q.indexOf(L)>=0},_s.prototype.eachChild=function(m){m(this.needle),m(this.haystack)},_s.prototype.outputDefined=function(){return!0},_s.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var pl=function(m,L,q){this.type=ii,this.needle=m,this.haystack=L,this.fromIndex=q};pl.parse=function(m,L){if(m.length<=2||m.length>=5)return L.error("Expected 3 or 4 arguments, but found "+(m.length-1)+" instead.");var q=L.parse(m[1],1,Ma),Y=L.parse(m[2],2,Ma);if(!q||!Y)return null;if(!Ah(q.type,[Ca,Aa,ii,xu,Ma]))return L.error("Expected first argument to be of type boolean, string, number or null, but found "+ko(q.type)+" instead");if(m.length===4){var j=L.parse(m[3],3,ii);return j?new pl(q,Y,j):null}else return new pl(q,Y)},pl.prototype.evaluate=function(m){var L=this.needle.evaluate(m),q=this.haystack.evaluate(m);if(!Uu(L,["boolean","string","number","null"]))throw new Co("Expected first argument to be of type boolean, string, number or null, but found "+ko(To(L))+" instead.");if(!Uu(q,["string","array"]))throw new Co("Expected second argument to be of type array or string, but found "+ko(To(q))+" instead.");if(this.fromIndex){var Y=this.fromIndex.evaluate(m);return q.indexOf(L,Y)}return q.indexOf(L)},pl.prototype.eachChild=function(m){m(this.needle),m(this.haystack),this.fromIndex&&m(this.fromIndex)},pl.prototype.outputDefined=function(){return!1},pl.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var m=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),m]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Hu=function(m,L,q,Y,j,$){this.inputType=m,this.type=L,this.input=q,this.cases=Y,this.outputs=j,this.otherwise=$};Hu.parse=function(m,L){if(m.length<5)return L.error("Expected at least 4 arguments, but found only "+(m.length-1)+".");if(m.length%2!==1)return L.error("Expected an even number of arguments.");var q,Y;L.expectedType&&L.expectedType.kind!=="value"&&(Y=L.expectedType);for(var j={},$=[],pe=2;pe<m.length-1;pe+=2){var ke=m[pe],Fe=m[pe+1];Array.isArray(ke)||(ke=[ke]);var Ne=L.concat(pe);if(ke.length===0)return Ne.error("Expected at least one branch label.");for(var ct=0,kt=ke;ct<kt.length;ct+=1){var bt=kt[ct];if(typeof bt!="number"&&typeof bt!="string")return Ne.error("Branch labels must be numbers or strings.");if(typeof bt=="number"&&Math.abs(bt)>Number.MAX_SAFE_INTEGER)return Ne.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof bt=="number"&&Math.floor(bt)!==bt)return Ne.error("Numeric branch labels must be integer values.");if(!q)q=To(bt);else if(Ne.checkSubtype(q,To(bt)))return null;if(typeof j[String(bt)]!="undefined")return Ne.error("Branch labels must be unique.");j[String(bt)]=$.length}var Yt=L.parse(Fe,pe,Y);if(!Yt)return null;Y=Y||Yt.type,$.push(Yt)}var hr=L.parse(m[1],1,Ma);if(!hr)return null;var Ir=L.parse(m[m.length-1],m.length-1,Y);return!Ir||hr.type.kind!=="value"&&L.concat(1).checkSubtype(q,hr.type)?null:new Hu(q,Y,hr,j,$,Ir)},Hu.prototype.evaluate=function(m){var L=this.input.evaluate(m),q=To(L)===this.inputType&&this.outputs[this.cases[L]]||this.otherwise;return q.evaluate(m)},Hu.prototype.eachChild=function(m){m(this.input),this.outputs.forEach(m),m(this.otherwise)},Hu.prototype.outputDefined=function(){return this.outputs.every(function(m){return m.outputDefined()})&&this.otherwise.outputDefined()},Hu.prototype.serialize=function(){for(var m=this,L=["match",this.input.serialize()],q=Object.keys(this.cases).sort(),Y=[],j={},$=0,pe=q;$<pe.length;$+=1){var ke=pe[$],Fe=j[this.cases[ke]];Fe===void 0?(j[this.cases[ke]]=Y.length,Y.push([this.cases[ke],[ke]])):Y[Fe][1].push(ke)}for(var Ne=function(hr){return m.inputType.kind==="number"?Number(hr):hr},ct=0,kt=Y;ct<kt.length;ct+=1){var bt=kt[ct],Fe=bt[0],Yt=bt[1];Yt.length===1?L.push(Ne(Yt[0])):L.push(Yt.map(Ne)),L.push(this.outputs[outputIndex$1].serialize())}return L.push(this.otherwise.serialize()),L};var Vf=function(m,L,q){this.type=m,this.branches=L,this.otherwise=q};Vf.parse=function(m,L){if(m.length<4)return L.error("Expected at least 3 arguments, but found only "+(m.length-1)+".");if(m.length%2!==0)return L.error("Expected an odd number of arguments.");var q;L.expectedType&&L.expectedType.kind!=="value"&&(q=L.expectedType);for(var Y=[],j=1;j<m.length-1;j+=2){var $=L.parse(m[j],j,Ca);if(!$)return null;var pe=L.parse(m[j+1],j+1,q);if(!pe)return null;Y.push([$,pe]),q=q||pe.type}var ke=L.parse(m[m.length-1],m.length-1,q);return ke?new Vf(q,Y,ke):null},Vf.prototype.evaluate=function(m){for(var L=0,q=this.branches;L<q.length;L+=1){var Y=q[L],j=Y[0],$=Y[1];if(j.evaluate(m))return $.evaluate(m)}return this.otherwise.evaluate(m)},Vf.prototype.eachChild=function(m){for(var L=0,q=this.branches;L<q.length;L+=1){var Y=q[L],j=Y[0],$=Y[1];m(j),m($)}m(this.otherwise)},Vf.prototype.outputDefined=function(){return this.branches.every(function(m){var L=m[0],q=m[1];return q.outputDefined()})&&this.otherwise.outputDefined()},Vf.prototype.serialize=function(){var m=["case"];return this.eachChild(function(L){m.push(L.serialize())}),m};var Gu=function(m,L,q,Y){this.type=m,this.input=L,this.beginIndex=q,this.endIndex=Y};Gu.parse=function(m,L){if(m.length<=2||m.length>=5)return L.error("Expected 3 or 4 arguments, but found "+(m.length-1)+" instead.");var q=L.parse(m[1],1,Ma),Y=L.parse(m[2],2,ii);if(!q||!Y)return null;if(!Ah(q.type,[$s(Ma),Aa,Ma]))return L.error("Expected first argument to be of type array or string, but found "+ko(q.type)+" instead");if(m.length===4){var j=L.parse(m[3],3,ii);return j?new Gu(q.type,q,Y,j):null}else return new Gu(q.type,q,Y)},Gu.prototype.evaluate=function(m){var L=this.input.evaluate(m),q=this.beginIndex.evaluate(m);if(!Uu(L,["string","array"]))throw new Co("Expected first argument to be of type array or string, but found "+ko(To(L))+" instead.");if(this.endIndex){var Y=this.endIndex.evaluate(m);return L.slice(q,Y)}return L.slice(q)},Gu.prototype.eachChild=function(m){m(this.input),m(this.beginIndex),this.endIndex&&m(this.endIndex)},Gu.prototype.outputDefined=function(){return!1},Gu.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var m=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),m]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function Ph(y,m){return y==="=="||y==="!="?m.kind==="boolean"||m.kind==="string"||m.kind==="number"||m.kind==="null"||m.kind==="value":m.kind==="string"||m.kind==="number"||m.kind==="value"}function Ue(y,m,L){return m===L}function at(y,m,L){return m!==L}function Ht(y,m,L){return m<L}function It(y,m,L){return m>L}function fr(y,m,L){return m<=L}function Lr(y,m,L){return m>=L}function qr(y,m,L,q){return q.compare(m,L)===0}function Zr(y,m,L,q){return!qr(y,m,L,q)}function nn(y,m,L,q){return q.compare(m,L)<0}function An(y,m,L,q){return q.compare(m,L)>0}function Nr(y,m,L,q){return q.compare(m,L)<=0}function tn(y,m,L,q){return q.compare(m,L)>=0}function rn(y,m,L){var q=y!=="=="&&y!=="!=";return function(){function Y(j,$,pe){this.type=Ca,this.lhs=j,this.rhs=$,this.collator=pe,this.hasUntypedArgument=j.type.kind==="value"||$.type.kind==="value"}return Y.parse=function($,pe){if($.length!==3&&$.length!==4)return pe.error("Expected two or three arguments.");var ke=$[0],Fe=pe.parse($[1],1,Ma);if(!Fe)return null;if(!Ph(ke,Fe.type))return pe.concat(1).error('"'+ke+`" comparisons are not supported for type '`+ko(Fe.type)+"'.");var Ne=pe.parse($[2],2,Ma);if(!Ne)return null;if(!Ph(ke,Ne.type))return pe.concat(2).error('"'+ke+`" comparisons are not supported for type '`+ko(Ne.type)+"'.");if(Fe.type.kind!==Ne.type.kind&&Fe.type.kind!=="value"&&Ne.type.kind!=="value")return pe.error("Cannot compare types '"+ko(Fe.type)+"' and '"+ko(Ne.type)+"'.");q&&(Fe.type.kind==="value"&&Ne.type.kind!=="value"?Fe=new qs(Ne.type,[Fe]):Fe.type.kind!=="value"&&Ne.type.kind==="value"&&(Ne=new qs(Fe.type,[Ne])));var ct=null;if($.length===4){if(Fe.type.kind!=="string"&&Ne.type.kind!=="string"&&Fe.type.kind!=="value"&&Ne.type.kind!=="value")return pe.error("Cannot use collator to compare non-string types.");if(ct=pe.parse($[3],3,Wc),!ct)return null}return new Y(Fe,Ne,ct)},Y.prototype.evaluate=function($){var pe=this.lhs.evaluate($),ke=this.rhs.evaluate($);if(q&&this.hasUntypedArgument){var Fe=To(pe),Ne=To(ke);if(Fe.kind!==Ne.kind||!(Fe.kind==="string"||Fe.kind==="number"))throw new Co('Expected arguments for "'+y+'" to be (string, string) or (number, number), but found ('+Fe.kind+", "+Ne.kind+") instead.")}if(this.collator&&!q&&this.hasUntypedArgument){var ct=To(pe),kt=To(ke);if(ct.kind!=="string"||kt.kind!=="string")return m($,pe,ke)}return this.collator?L($,pe,ke,this.collator.evaluate($)):m($,pe,ke)},Y.prototype.eachChild=function($){$(this.lhs),$(this.rhs),this.collator&&$(this.collator)},Y.prototype.outputDefined=function(){return!0},Y.prototype.serialize=function(){var $=[y];return this.eachChild(function(pe){$.push(pe.serialize())}),$},Y}()}var wn=rn("==",Ue,qr),Gn=rn("!=",at,Zr),Oi=rn("<",Ht,nn),Ii=rn(">",It,An),Hi=rn("<=",fr,Nr),Ki=rn(">=",Lr,tn),On=function(m,L,q,Y,j){this.type=Aa,this.number=m,this.locale=L,this.currency=q,this.minFractionDigits=Y,this.maxFractionDigits=j};On.parse=function(m,L){if(m.length!==3)return L.error("Expected two arguments.");var q=L.parse(m[1],1,ii);if(!q)return null;var Y=m[2];if(typeof Y!="object"||Array.isArray(Y))return L.error("NumberFormat options argument must be an object.");var j=null;if(Y.locale&&(j=L.parse(Y.locale,1,Aa),!j))return null;var $=null;if(Y.currency&&($=L.parse(Y.currency,1,Aa),!$))return null;var pe=null;if(Y["min-fraction-digits"]&&(pe=L.parse(Y["min-fraction-digits"],1,ii),!pe))return null;var ke=null;return Y["max-fraction-digits"]&&(ke=L.parse(Y["max-fraction-digits"],1,ii),!ke)?null:new On(q,j,$,pe,ke)},On.prototype.evaluate=function(m){return new Intl.NumberFormat(this.locale?this.locale.evaluate(m):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(m):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(m):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(m):void 0}).format(this.number.evaluate(m))},On.prototype.eachChild=function(m){m(this.number),this.locale&&m(this.locale),this.currency&&m(this.currency),this.minFractionDigits&&m(this.minFractionDigits),this.maxFractionDigits&&m(this.maxFractionDigits)},On.prototype.outputDefined=function(){return!1},On.prototype.serialize=function(){var m={};return this.locale&&(m.locale=this.locale.serialize()),this.currency&&(m.currency=this.currency.serialize()),this.minFractionDigits&&(m["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(m["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),m]};var $n=function(m){this.type=ii,this.input=m};$n.parse=function(m,L){if(m.length!==2)return L.error("Expected 1 argument, but found "+(m.length-1)+" instead.");var q=L.parse(m[1],1);return q?q.type.kind!=="array"&&q.type.kind!=="string"&&q.type.kind!=="value"?L.error("Expected argument of type string or array, but found "+ko(q.type)+" instead."):new $n(q):null},$n.prototype.evaluate=function(m){var L=this.input.evaluate(m);if(typeof L=="string")return L.length;if(Array.isArray(L))return L.length;throw new Co("Expected value to be of type string or array, but found "+ko(To(L))+" instead.")},$n.prototype.eachChild=function(m){m(this.input)},$n.prototype.outputDefined=function(){return!1},$n.prototype.serialize=function(){var m=["length"];return this.eachChild(function(L){m.push(L.serialize())}),m};var Ji={"==":wn,"!=":Gn,">":Ii,"<":Oi,">=":Ki,"<=":Hi,array:qs,at:Uf,boolean:qs,case:Vf,coalesce:Bf,collator:vf,format:Vl,image:hf,in:_s,"index-of":pl,interpolate:Hs,"interpolate-hcl":Hs,"interpolate-lab":Hs,length:$n,let:Nf,literal:po,match:Hu,number:qs,"number-format":On,object:qs,slice:Gu,step:Dl,string:qs,"to-boolean":bu,"to-color":bu,"to-number":bu,"to-string":bu,var:qf,within:tu};function ca(y,m){var L=m[0],q=m[1],Y=m[2],j=m[3];L=L.evaluate(y),q=q.evaluate(y),Y=Y.evaluate(y);var $=j?j.evaluate(y):1,pe=Sh(L,q,Y,$);if(pe)throw new Co(pe);return new lo(L/255*$,q/255*$,Y/255*$,$)}function Ka(y,m){return y in m}function mo(y,m){var L=m[y];return typeof L=="undefined"?null:L}function vo(y,m,L,q){for(;L<=q;){var Y=L+q>>1;if(m[Y]===y)return!0;m[Y]>y?q=Y-1:L=Y+1}return!1}function xo(y){return{type:y}}ho.register(Ji,{error:[Rf,[Aa],function(y,m){var L=m[0];throw new Co(L.evaluate(y))}],typeof:[Aa,[Ma],function(y,m){var L=m[0];return ko(To(L.evaluate(y)))}],"to-rgba":[$s(ii,4),[Fs],function(y,m){var L=m[0];return L.evaluate(y).toArray()}],rgb:[Fs,[ii,ii,ii],ca],rgba:[Fs,[ii,ii,ii,ii],ca],has:{type:Ca,overloads:[[[Aa],function(y,m){var L=m[0];return Ka(L.evaluate(y),y.properties())}],[[Aa,Pf],function(y,m){var L=m[0],q=m[1];return Ka(L.evaluate(y),q.evaluate(y))}]]},get:{type:Ma,overloads:[[[Aa],function(y,m){var L=m[0];return mo(L.evaluate(y),y.properties())}],[[Aa,Pf],function(y,m){var L=m[0],q=m[1];return mo(L.evaluate(y),q.evaluate(y))}]]},"feature-state":[Ma,[Aa],function(y,m){var L=m[0];return mo(L.evaluate(y),y.featureState||{})}],properties:[Pf,[],function(y){return y.properties()}],"geometry-type":[Aa,[],function(y){return y.geometryType()}],id:[Ma,[],function(y){return y.id()}],zoom:[ii,[],function(y){return y.globals.zoom}],"heatmap-density":[ii,[],function(y){return y.globals.heatmapDensity||0}],"line-progress":[ii,[],function(y){return y.globals.lineProgress||0}],accumulated:[Ma,[],function(y){return y.globals.accumulated===void 0?null:y.globals.accumulated}],"+":[ii,xo(ii),function(y,m){for(var L=0,q=0,Y=m;q<Y.length;q+=1){var j=Y[q];L+=j.evaluate(y)}return L}],"*":[ii,xo(ii),function(y,m){for(var L=1,q=0,Y=m;q<Y.length;q+=1){var j=Y[q];L*=j.evaluate(y)}return L}],"-":{type:ii,overloads:[[[ii,ii],function(y,m){var L=m[0],q=m[1];return L.evaluate(y)-q.evaluate(y)}],[[ii],function(y,m){var L=m[0];return-L.evaluate(y)}]]},"/":[ii,[ii,ii],function(y,m){var L=m[0],q=m[1];return L.evaluate(y)/q.evaluate(y)}],"%":[ii,[ii,ii],function(y,m){var L=m[0],q=m[1];return L.evaluate(y)%q.evaluate(y)}],ln2:[ii,[],function(){return Math.LN2}],pi:[ii,[],function(){return Math.PI}],e:[ii,[],function(){return Math.E}],"^":[ii,[ii,ii],function(y,m){var L=m[0],q=m[1];return Math.pow(L.evaluate(y),q.evaluate(y))}],sqrt:[ii,[ii],function(y,m){var L=m[0];return Math.sqrt(L.evaluate(y))}],log10:[ii,[ii],function(y,m){var L=m[0];return Math.log(L.evaluate(y))/Math.LN10}],ln:[ii,[ii],function(y,m){var L=m[0];return Math.log(L.evaluate(y))}],log2:[ii,[ii],function(y,m){var L=m[0];return Math.log(L.evaluate(y))/Math.LN2}],sin:[ii,[ii],function(y,m){var L=m[0];return Math.sin(L.evaluate(y))}],cos:[ii,[ii],function(y,m){var L=m[0];return Math.cos(L.evaluate(y))}],tan:[ii,[ii],function(y,m){var L=m[0];return Math.tan(L.evaluate(y))}],asin:[ii,[ii],function(y,m){var L=m[0];return Math.asin(L.evaluate(y))}],acos:[ii,[ii],function(y,m){var L=m[0];return Math.acos(L.evaluate(y))}],atan:[ii,[ii],function(y,m){var L=m[0];return Math.atan(L.evaluate(y))}],min:[ii,xo(ii),function(y,m){return Math.min.apply(Math,m.map(function(L){return L.evaluate(y)}))}],max:[ii,xo(ii),function(y,m){return Math.max.apply(Math,m.map(function(L){return L.evaluate(y)}))}],abs:[ii,[ii],function(y,m){var L=m[0];return Math.abs(L.evaluate(y))}],round:[ii,[ii],function(y,m){var L=m[0],q=L.evaluate(y);return q<0?-Math.round(-q):Math.round(q)}],floor:[ii,[ii],function(y,m){var L=m[0];return Math.floor(L.evaluate(y))}],ceil:[ii,[ii],function(y,m){var L=m[0];return Math.ceil(L.evaluate(y))}],"filter-==":[Ca,[Aa,Ma],function(y,m){var L=m[0],q=m[1];return y.properties()[L.value]===q.value}],"filter-id-==":[Ca,[Ma],function(y,m){var L=m[0];return y.id()===L.value}],"filter-type-==":[Ca,[Aa],function(y,m){var L=m[0];return y.geometryType()===L.value}],"filter-<":[Ca,[Aa,Ma],function(y,m){var L=m[0],q=m[1],Y=y.properties()[L.value],j=q.value;return typeof Y==typeof j&&Y<j}],"filter-id-<":[Ca,[Ma],function(y,m){var L=m[0],q=y.id(),Y=L.value;return typeof q==typeof Y&&q<Y}],"filter->":[Ca,[Aa,Ma],function(y,m){var L=m[0],q=m[1],Y=y.properties()[L.value],j=q.value;return typeof Y==typeof j&&Y>j}],"filter-id->":[Ca,[Ma],function(y,m){var L=m[0],q=y.id(),Y=L.value;return typeof q==typeof Y&&q>Y}],"filter-<=":[Ca,[Aa,Ma],function(y,m){var L=m[0],q=m[1],Y=y.properties()[L.value],j=q.value;return typeof Y==typeof j&&Y<=j}],"filter-id-<=":[Ca,[Ma],function(y,m){var L=m[0],q=y.id(),Y=L.value;return typeof q==typeof Y&&q<=Y}],"filter->=":[Ca,[Aa,Ma],function(y,m){var L=m[0],q=m[1],Y=y.properties()[L.value],j=q.value;return typeof Y==typeof j&&Y>=j}],"filter-id->=":[Ca,[Ma],function(y,m){var L=m[0],q=y.id(),Y=L.value;return typeof q==typeof Y&&q>=Y}],"filter-has":[Ca,[Ma],function(y,m){var L=m[0];return L.value in y.properties()}],"filter-has-id":[Ca,[],function(y){return y.id()!==null&&y.id()!==void 0}],"filter-type-in":[Ca,[$s(Aa)],function(y,m){var L=m[0];return L.value.indexOf(y.geometryType())>=0}],"filter-id-in":[Ca,[$s(Ma)],function(y,m){var L=m[0];return L.value.indexOf(y.id())>=0}],"filter-in-small":[Ca,[Aa,$s(Ma)],function(y,m){var L=m[0],q=m[1];return q.value.indexOf(y.properties()[L.value])>=0}],"filter-in-large":[Ca,[Aa,$s(Ma)],function(y,m){var L=m[0],q=m[1];return vo(y.properties()[L.value],q.value,0,q.value.length-1)}],all:{type:Ca,overloads:[[[Ca,Ca],function(y,m){var L=m[0],q=m[1];return L.evaluate(y)&&q.evaluate(y)}],[xo(Ca),function(y,m){for(var L=0,q=m;L<q.length;L+=1){var Y=q[L];if(!Y.evaluate(y))return!1}return!0}]]},any:{type:Ca,overloads:[[[Ca,Ca],function(y,m){var L=m[0],q=m[1];return L.evaluate(y)||q.evaluate(y)}],[xo(Ca),function(y,m){for(var L=0,q=m;L<q.length;L+=1){var Y=q[L];if(Y.evaluate(y))return!0}return!1}]]},"!":[Ca,[Ca],function(y,m){var L=m[0];return!L.evaluate(y)}],"is-supported-script":[Ca,[Aa],function(y,m){var L=m[0],q=y.globals&&y.globals.isSupportedScript;return q?q(L.evaluate(y)):!0}],upcase:[Aa,[Aa],function(y,m){var L=m[0];return L.evaluate(y).toUpperCase()}],downcase:[Aa,[Aa],function(y,m){var L=m[0];return L.evaluate(y).toLowerCase()}],concat:[Aa,xo(Ma),function(y,m){return m.map(function(L){return vs(L.evaluate(y))}).join("")}],"resolved-locale":[Aa,[Wc],function(y,m){var L=m[0];return L.evaluate(y).resolvedLocale()}]});function Na(y){return{result:"success",value:y}}function bs(y){return{result:"error",value:y}}function Zo(y){return y["property-type"]==="data-driven"||y["property-type"]==="cross-faded-data-driven"}function Bo(y){return!!y.expression&&y.expression.parameters.indexOf("zoom")>-1}function hi(y){return!!y.expression&&y.expression.interpolated}function ta(y){return y instanceof Number?"number":y instanceof String?"string":y instanceof Boolean?"boolean":Array.isArray(y)?"array":y===null?"null":typeof y}function ws(y){return typeof y=="object"&&y!==null&&!Array.isArray(y)}function Ml(y){return y}function Yl(y,m){var L=m.type==="color",q=y.stops&&typeof y.stops[0][0]=="object",Y=q||y.property!==void 0,j=q||!Y,$=y.type||(hi(m)?"exponential":"interval");if(L&&(y=Pl({},y),y.stops&&(y.stops=y.stops.map(function(ti){return[ti[0],lo.parse(ti[1])]})),y.default?y.default=lo.parse(y.default):y.default=lo.parse(m.default)),y.colorSpace&&y.colorSpace!=="rgb"&&!Vv[y.colorSpace])throw new Error("Unknown color space: "+y.colorSpace);var pe,ke,Fe;if($==="exponential")pe=au;else if($==="interval")pe=Hf;else if($==="categorical"){pe=Yu,ke=Object.create(null);for(var Ne=0,ct=y.stops;Ne<ct.length;Ne+=1){var kt=ct[Ne];ke[kt[0]]=kt[1]}Fe=typeof y.stops[0][0]}else if($==="identity")pe=Lc;else throw new Error('Unknown function type "'+$+'"');if(q){for(var bt={},Yt=[],hr=0;hr<y.stops.length;hr++){var Ir=y.stops[hr],Ar=Ir[0].zoom;bt[Ar]===void 0&&(bt[Ar]={zoom:Ar,type:y.type,property:y.property,default:y.default,stops:[]},Yt.push(Ar)),bt[Ar].stops.push([Ir[0].value,Ir[1]])}for(var en=[],Ur=0,Qr=Yt;Ur<Qr.length;Ur+=1){var on=Qr[Ur];en.push([bt[on].zoom,Yl(bt[on],m)])}var Pn={name:"linear"};return{kind:"composite",interpolationType:Pn,interpolationFactor:Hs.interpolationFactor.bind(void 0,Pn),zoomStops:en.map(function(ti){return ti[0]}),evaluate:function(Bi,Ti){var Ri=Bi.zoom;return au({stops:en,base:y.base},m,Ri).evaluate(Ri,Ti)}}}else if(j){var oi=$==="exponential"?{name:"exponential",base:y.base!==void 0?y.base:1}:null;return{kind:"camera",interpolationType:oi,interpolationFactor:Hs.interpolationFactor.bind(void 0,oi),zoomStops:y.stops.map(function(ti){return ti[0]}),evaluate:function(ti){var Bi=ti.zoom;return pe(y,m,Bi,ke,Fe)}}}else return{kind:"source",evaluate:function(Bi,Ti){var Ri=Ti&&Ti.properties?Ti.properties[y.property]:void 0;return Ri===void 0?iu(y.default,m.default):pe(y,m,Ri,ke,Fe)}}}function iu(y,m,L){if(y!==void 0)return y;if(m!==void 0)return m;if(L!==void 0)return L}function Yu(y,m,L,q,Y){var j=typeof L===Y?q[L]:void 0;return iu(j,y.default,m.default)}function Hf(y,m,L){if(ta(L)!=="number")return iu(y.default,m.default);var q=y.stops.length;if(q===1||L<=y.stops[0][0])return y.stops[0][1];if(L>=y.stops[q-1][0])return y.stops[q-1][1];var Y=zf(y.stops.map(function(j){return j[0]}),L);return y.stops[Y][1]}function au(y,m,L){var q=y.base!==void 0?y.base:1;if(ta(L)!=="number")return iu(y.default,m.default);var Y=y.stops.length;if(Y===1||L<=y.stops[0][0])return y.stops[0][1];if(L>=y.stops[Y-1][0])return y.stops[Y-1][1];var j=zf(y.stops.map(function(ct){return ct[0]}),L),$=Pc(L,q,y.stops[j][0],y.stops[j+1][0]),pe=y.stops[j][1],ke=y.stops[j+1][1],Fe=Tu[m.type]||Ml;if(y.colorSpace&&y.colorSpace!=="rgb"){var Ne=Vv[y.colorSpace];Fe=function(ct,kt){return Ne.reverse(Ne.interpolate(Ne.forward(ct),Ne.forward(kt),$))}}return typeof pe.evaluate=="function"?{evaluate:function(){for(var kt=[],bt=arguments.length;bt--;)kt[bt]=arguments[bt];var Yt=pe.evaluate.apply(void 0,kt),hr=ke.evaluate.apply(void 0,kt);if(!(Yt===void 0||hr===void 0))return Fe(Yt,hr,$)}}:Fe(pe,ke,$)}function Lc(y,m,L){return m.type==="color"?L=lo.parse(L):m.type==="formatted"?L=Us.fromString(L.toString()):m.type==="resolvedImage"?L=xs.fromString(L.toString()):ta(L)!==m.type&&(m.type!=="enum"||!m.values[L])&&(L=void 0),iu(L,y.default,m.default)}function Pc(y,m,L,q){var Y=q-L,j=y-L;return Y===0?0:m===1?j/Y:(Math.pow(m,j)-1)/(Math.pow(m,Y)-1)}var lc=function(m,L){this.expression=m,this._warningHistory={},this._evaluator=new Hl,this._defaultValue=L?Rc(L):null,this._enumValues=L&&L.type==="enum"?L.values:null};lc.prototype.evaluateWithoutErrorHandling=function(m,L,q,Y,j,$){return this._evaluator.globals=m,this._evaluator.feature=L,this._evaluator.featureState=q,this._evaluator.canonical=Y,this._evaluator.availableImages=j||null,this._evaluator.formattedSection=$,this.expression.evaluate(this._evaluator)},lc.prototype.evaluate=function(m,L,q,Y,j,$){this._evaluator.globals=m,this._evaluator.feature=L||null,this._evaluator.featureState=q||null,this._evaluator.canonical=Y,this._evaluator.availableImages=j||null,this._evaluator.formattedSection=$||null;try{var pe=this.expression.evaluate(this._evaluator);if(pe==null||typeof pe=="number"&&pe!==pe)return this._defaultValue;if(this._enumValues&&!(pe in this._enumValues))throw new Co("Expected value to be one of "+Object.keys(this._enumValues).map(function(ke){return JSON.stringify(ke)}).join(", ")+", but found "+JSON.stringify(pe)+" instead.");return pe}catch(ke){return this._warningHistory[ke.message]||(this._warningHistory[ke.message]=!0,typeof console!="undefined"&&console.warn(ke.message)),this._defaultValue}};function Rh(y){return Array.isArray(y)&&y.length>0&&typeof y[0]=="string"&&y[0]in Ji}function $c(y,m){var L=new Vs(Ji,[],m?Gv(m):void 0),q=L.parse(y,void 0,void 0,void 0,m&&m.type==="string"?{typeAnnotation:"coerce"}:void 0);return q?Na(new lc(q,m)):bs(L.errors)}var uc=function(m,L){this.kind=m,this._styleExpression=L,this.isStateDependent=m!=="constant"&&!al(L.expression)};uc.prototype.evaluateWithoutErrorHandling=function(m,L,q,Y,j,$){return this._styleExpression.evaluateWithoutErrorHandling(m,L,q,Y,j,$)},uc.prototype.evaluate=function(m,L,q,Y,j,$){return this._styleExpression.evaluate(m,L,q,Y,j,$)};var gf=function(m,L,q,Y){this.kind=m,this.zoomStops=q,this._styleExpression=L,this.isStateDependent=m!=="camera"&&!al(L.expression),this.interpolationType=Y};gf.prototype.evaluateWithoutErrorHandling=function(m,L,q,Y,j,$){return this._styleExpression.evaluateWithoutErrorHandling(m,L,q,Y,j,$)},gf.prototype.evaluate=function(m,L,q,Y,j,$){return this._styleExpression.evaluate(m,L,q,Y,j,$)},gf.prototype.interpolationFactor=function(m,L,q){return this.interpolationType?Hs.interpolationFactor(this.interpolationType,m,L,q):0};function Wu(y,m){if(y=$c(y,m),y.result==="error")return y;var L=y.value.expression,q=fv(L);if(!q&&!Zo(m))return bs([new $o("","data expressions not supported")]);var Y=ru(L,["zoom"]);if(!Y&&!Bo(m))return bs([new $o("","zoom expressions not supported")]);var j=Ih(L);if(!j&&!Y)return bs([new $o("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(j instanceof $o)return bs([j]);if(j instanceof Hs&&!hi(m))return bs([new $o("",'"interpolate" expressions cannot be used with this property')]);if(!j)return Na(q?new uc("constant",y.value):new uc("source",y.value));var $=j instanceof Hs?j.interpolation:void 0;return Na(q?new gf("camera",y.value,j.labels,$):new gf("composite",y.value,j.labels,$))}var Dh=function(m,L){this._parameters=m,this._specification=L,Pl(this,Yl(this._parameters,this._specification))};Dh.deserialize=function(m){return new Dh(m._parameters,m._specification)},Dh.serialize=function(m){return{_parameters:m._parameters,_specification:m._specification}};function Hv(y,m){if(ws(y))return new Dh(y,m);if(Rh(y)){var L=Wu(y,m);if(L.result==="error")throw new Error(L.value.map(function(Y){return Y.key+": "+Y.message}).join(", "));return L.value}else{var q=y;return typeof y=="string"&&m.type==="color"&&(q=lo.parse(y)),{kind:"constant",evaluate:function(){return q}}}}function Ih(y){var m=null;if(y instanceof Nf)m=Ih(y.result);else if(y instanceof Bf)for(var L=0,q=y.args;L<q.length;L+=1){var Y=q[L];if(m=Ih(Y),m)break}else(y instanceof Dl||y instanceof Hs)&&y.input instanceof ho&&y.input.name==="zoom"&&(m=y);return m instanceof $o||y.eachChild(function(j){var $=Ih(j);$ instanceof $o?m=$:!m&&$?m=new $o("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):m&&$&&m!==$&&(m=new $o("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),m}function Gv(y){var m={color:Fs,string:Aa,number:ii,enum:Aa,boolean:Ca,formatted:dl,resolvedImage:ff};return y.type==="array"?$s(m[y.value]||Ma,y.length):m[y.type]}function Rc(y){return y.type==="color"&&ws(y.default)?new lo(0,0,0,0):y.type==="color"?lo.parse(y.default)||null:y.default===void 0?null:y.default}function Mu(y){var m=y.key,L=y.value,q=y.valueSpec||{},Y=y.objectElementValidators||{},j=y.style,$=y.styleSpec,pe=[],ke=ta(L);if(ke!=="object")return[new bi(m,L,"object expected, "+ke+" found")];for(var Fe in L){var Ne=Fe.split(".")[0],ct=q[Ne]||q["*"],kt=void 0;if(Y[Ne])kt=Y[Ne];else if(q[Ne])kt=ba;else if(Y["*"])kt=Y["*"];else if(q["*"])kt=ba;else{pe.push(new bi(m,L[Fe],'unknown property "'+Fe+'"'));continue}pe=pe.concat(kt({key:(m&&m+".")+Fe,value:L[Fe],valueSpec:ct,style:j,styleSpec:$,object:L,objectKey:Fe},L))}for(var bt in q)Y[bt]||q[bt].required&&q[bt].default===void 0&&L[bt]===void 0&&pe.push(new bi(m,L,'missing required property "'+bt+'"'));return pe}function eh(y){var m=y.value,L=y.valueSpec,q=y.style,Y=y.styleSpec,j=y.key,$=y.arrayElementValidator||ba;if(ta(m)!=="array")return[new bi(j,m,"array expected, "+ta(m)+" found")];if(L.length&&m.length!==L.length)return[new bi(j,m,"array length "+L.length+" expected, length "+m.length+" found")];if(L["min-length"]&&m.length<L["min-length"])return[new bi(j,m,"array length at least "+L["min-length"]+" expected, length "+m.length+" found")];var pe={type:L.value,values:L.values};Y.$version<7&&(pe.function=L.function),ta(L.value)==="object"&&(pe=L.value);for(var ke=[],Fe=0;Fe<m.length;Fe++)ke=ke.concat($({array:m,arrayIndex:Fe,value:m[Fe],valueSpec:pe,style:q,styleSpec:Y,key:j+"["+Fe+"]"}));return ke}function th(y){var m=y.key,L=y.value,q=y.valueSpec,Y=ta(L);return Y==="number"&&L!==L&&(Y="NaN"),Y!=="number"?[new bi(m,L,"number expected, "+Y+" found")]:"minimum"in q&&L<q.minimum?[new bi(m,L,L+" is less than the minimum value "+q.minimum)]:"maximum"in q&&L>q.maximum?[new bi(m,L,L+" is greater than the maximum value "+q.maximum)]:[]}function rh(y){var m=y.valueSpec,L=ss(y.value.type),q,Y={},j,$,pe=L!=="categorical"&&y.value.property===void 0,ke=!pe,Fe=ta(y.value.stops)==="array"&&ta(y.value.stops[0])==="array"&&ta(y.value.stops[0][0])==="object",Ne=Mu({key:y.key,value:y.value,valueSpec:y.styleSpec.function,style:y.style,styleSpec:y.styleSpec,objectElementValidators:{stops:ct,default:Yt}});return L==="identity"&&pe&&Ne.push(new bi(y.key,y.value,'missing required property "property"')),L!=="identity"&&!y.value.stops&&Ne.push(new bi(y.key,y.value,'missing required property "stops"')),L==="exponential"&&y.valueSpec.expression&&!hi(y.valueSpec)&&Ne.push(new bi(y.key,y.value,"exponential functions not supported")),y.styleSpec.$version>=8&&(ke&&!Zo(y.valueSpec)?Ne.push(new bi(y.key,y.value,"property functions not supported")):pe&&!Bo(y.valueSpec)&&Ne.push(new bi(y.key,y.value,"zoom functions not supported"))),(L==="categorical"||Fe)&&y.value.property===void 0&&Ne.push(new bi(y.key,y.value,'"property" property is required')),Ne;function ct(hr){if(L==="identity")return[new bi(hr.key,hr.value,'identity function may not have a "stops" property')];var Ir=[],Ar=hr.value;return Ir=Ir.concat(eh({key:hr.key,value:Ar,valueSpec:hr.valueSpec,style:hr.style,styleSpec:hr.styleSpec,arrayElementValidator:kt})),ta(Ar)==="array"&&Ar.length===0&&Ir.push(new bi(hr.key,Ar,"array must have at least one stop")),Ir}function kt(hr){var Ir=[],Ar=hr.value,en=hr.key;if(ta(Ar)!=="array")return[new bi(en,Ar,"array expected, "+ta(Ar)+" found")];if(Ar.length!==2)return[new bi(en,Ar,"array length 2 expected, length "+Ar.length+" found")];if(Fe){if(ta(Ar[0])!=="object")return[new bi(en,Ar,"object expected, "+ta(Ar[0])+" found")];if(Ar[0].zoom===void 0)return[new bi(en,Ar,"object stop key must have zoom")];if(Ar[0].value===void 0)return[new bi(en,Ar,"object stop key must have value")];if($&&$>ss(Ar[0].zoom))return[new bi(en,Ar[0].zoom,"stop zoom values must appear in ascending order")];ss(Ar[0].zoom)!==$&&($=ss(Ar[0].zoom),j=void 0,Y={}),Ir=Ir.concat(Mu({key:en+"[0]",value:Ar[0],valueSpec:{zoom:{}},style:hr.style,styleSpec:hr.styleSpec,objectElementValidators:{zoom:th,value:bt}}))}else Ir=Ir.concat(bt({key:en+"[0]",value:Ar[0],valueSpec:{},style:hr.style,styleSpec:hr.styleSpec},Ar));return Rh(vl(Ar[1]))?Ir.concat([new bi(en+"[1]",Ar[1],"expressions are not allowed in function stops.")]):Ir.concat(ba({key:en+"[1]",value:Ar[1],valueSpec:m,style:hr.style,styleSpec:hr.styleSpec}))}function bt(hr,Ir){var Ar=ta(hr.value),en=ss(hr.value),Ur=hr.value!==null?hr.value:Ir;if(!q)q=Ar;else if(Ar!==q)return[new bi(hr.key,Ur,Ar+" stop domain type must match previous stop domain type "+q)];if(Ar!=="number"&&Ar!=="string"&&Ar!=="boolean")return[new bi(hr.key,Ur,"stop domain value must be a number, string, or boolean")];if(Ar!=="number"&&L!=="categorical"){var Qr="number expected, "+Ar+" found";return Zo(m)&&L===void 0&&(Qr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new bi(hr.key,Ur,Qr)]}return L==="categorical"&&Ar==="number"&&(!isFinite(en)||Math.floor(en)!==en)?[new bi(hr.key,Ur,"integer expected, found "+en)]:L!=="categorical"&&Ar==="number"&&j!==void 0&&en<j?[new bi(hr.key,Ur,"stop domain values must appear in ascending order")]:(j=en,L==="categorical"&&en in Y?[new bi(hr.key,Ur,"stop domain values must be unique")]:(Y[en]=!0,[]))}function Yt(hr){return ba({key:hr.key,value:hr.value,valueSpec:m,style:hr.style,styleSpec:hr.styleSpec})}}function Gf(y){var m=(y.expressionContext==="property"?Wu:$c)(vl(y.value),y.valueSpec);if(m.result==="error")return m.value.map(function(q){return new bi(""+y.key+q.key,y.value,q.message)});var L=m.value.expression||m.value._styleExpression.expression;if(y.expressionContext==="property"&&y.propertyKey==="text-font"&&!L.outputDefined())return[new bi(y.key,y.value,'Invalid data expression for "'+y.propertyKey+'". Output values must be contained as literals within the expression.')];if(y.expressionContext==="property"&&y.propertyType==="layout"&&!al(L))return[new bi(y.key,y.value,'"feature-state" data expressions are not supported with layout properties.')];if(y.expressionContext==="filter"&&!al(L))return[new bi(y.key,y.value,'"feature-state" data expressions are not supported with filters.')];if(y.expressionContext&&y.expressionContext.indexOf("cluster")===0){if(!ru(L,["zoom","feature-state"]))return[new bi(y.key,y.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(y.expressionContext==="cluster-initial"&&!fv(L))return[new bi(y.key,y.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Fh(y){var m=y.value,L=y.key,q=ta(m);return q!=="boolean"?[new bi(L,m,"boolean expected, "+q+" found")]:[]}function Yv(y){var m=y.key,L=y.value,q=ta(L);return q!=="string"?[new bi(m,L,"color expected, "+q+" found")]:Ac(L)===null?[new bi(m,L,'color expected, "'+L+'" found')]:[]}function qh(y){var m=y.key,L=y.value,q=y.valueSpec,Y=[];return Array.isArray(q.values)?q.values.indexOf(ss(L))===-1&&Y.push(new bi(m,L,"expected one of ["+q.values.join(", ")+"], "+JSON.stringify(L)+" found")):Object.keys(q.values).indexOf(ss(L))===-1&&Y.push(new bi(m,L,"expected one of ["+Object.keys(q.values).join(", ")+"], "+JSON.stringify(L)+" found")),Y}function ou(y){if(y===!0||y===!1)return!0;if(!Array.isArray(y)||y.length===0)return!1;switch(y[0]){case"has":return y.length>=2&&y[1]!=="$id"&&y[1]!=="$type";case"in":return y.length>=3&&(typeof y[1]!="string"||Array.isArray(y[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return y.length!==3||Array.isArray(y[1])||Array.isArray(y[2]);case"any":case"all":for(var m=0,L=y.slice(1);m<L.length;m+=1){var q=L[m];if(!ou(q)&&typeof q!="boolean")return!1}return!0;default:return!0}}var ve={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function be(y){if(y==null)return{filter:function(){return!0},needGeometry:!1};ou(y)||(y=He(y));var m=$c(y,ve);if(m.result==="error")throw new Error(m.value.map(function(q){return q.key+": "+q.message}).join(", "));var L=De(y);return{filter:function(q,Y,j){return m.value.evaluate(q,Y,{},j)},needGeometry:L}}function Ce(y,m){return y<m?-1:y>m?1:0}function De(y){if(!Array.isArray(y))return!1;if(y[0]==="within")return!0;for(var m=1;m<y.length;m++)if(De(y[m]))return!0;return!1}function He(y){if(!y)return!0;var m=y[0];if(y.length<=1)return m!=="any";var L=m==="=="?Ve(y[1],y[2],"=="):m==="!="?qt(Ve(y[1],y[2],"==")):m==="<"||m===">"||m==="<="||m===">="?Ve(y[1],y[2],m):m==="any"?Qe(y.slice(1)):m==="all"?["all"].concat(y.slice(1).map(He)):m==="none"?["all"].concat(y.slice(1).map(He).map(qt)):m==="in"?zt(y[1],y.slice(2)):m==="!in"?qt(zt(y[1],y.slice(2))):m==="has"?jt(y[1]):m==="!has"?qt(jt(y[1])):m==="within"?y:!0;return L}function Ve(y,m,L){switch(y){case"$type":return["filter-type-"+L,m];case"$id":return["filter-id-"+L,m];default:return["filter-"+L,y,m]}}function Qe(y){return["any"].concat(y.map(He))}function zt(y,m){if(m.length===0)return!1;switch(y){case"$type":return["filter-type-in",["literal",m]];case"$id":return["filter-id-in",["literal",m]];default:return m.length>200&&!m.some(function(L){return typeof L!=typeof m[0]})?["filter-in-large",y,["literal",m.sort(Ce)]]:["filter-in-small",y,["literal",m]]}}function jt(y){switch(y){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",y]}}function qt(y){return["!",y]}function Qt(y){return ou(vl(y.value))?Gf(Pl({},y,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ar(y)}function ar(y){var m=y.value,L=y.key;if(ta(m)!=="array")return[new bi(L,m,"array expected, "+ta(m)+" found")];var q=y.styleSpec,Y,j=[];if(m.length<1)return[new bi(L,m,"filter array must have at least 1 element")];switch(j=j.concat(qh({key:L+"[0]",value:m[0],valueSpec:q.filter_operator,style:y.style,styleSpec:y.styleSpec})),ss(m[0])){case"<":case"<=":case">":case">=":m.length>=2&&ss(m[1])==="$type"&&j.push(new bi(L,m,'"$type" cannot be use with operator "'+m[0]+'"'));case"==":case"!=":m.length!==3&&j.push(new bi(L,m,'filter array for operator "'+m[0]+'" must have 3 elements'));case"in":case"!in":m.length>=2&&(Y=ta(m[1]),Y!=="string"&&j.push(new bi(L+"[1]",m[1],"string expected, "+Y+" found")));for(var $=2;$<m.length;$++)Y=ta(m[$]),ss(m[1])==="$type"?j=j.concat(qh({key:L+"["+$+"]",value:m[$],valueSpec:q.geometry_type,style:y.style,styleSpec:y.styleSpec})):Y!=="string"&&Y!=="number"&&Y!=="boolean"&&j.push(new bi(L+"["+$+"]",m[$],"string, number, or boolean expected, "+Y+" found"));break;case"any":case"all":case"none":for(var pe=1;pe<m.length;pe++)j=j.concat(ar({key:L+"["+pe+"]",value:m[pe],style:y.style,styleSpec:y.styleSpec}));break;case"has":case"!has":Y=ta(m[1]),m.length!==2?j.push(new bi(L,m,'filter array for "'+m[0]+'" operator must have 2 elements')):Y!=="string"&&j.push(new bi(L+"[1]",m[1],"string expected, "+Y+" found"));break;case"within":Y=ta(m[1]),m.length!==2?j.push(new bi(L,m,'filter array for "'+m[0]+'" operator must have 2 elements')):Y!=="object"&&j.push(new bi(L+"[1]",m[1],"object expected, "+Y+" found"));break}return j}function _r(y,m){var L=y.key,q=y.style,Y=y.styleSpec,j=y.value,$=y.objectKey,pe=Y[m+"_"+y.layerType];if(!pe)return[];var ke=$.match(/^(.*)-transition$/);if(m==="paint"&&ke&&pe[ke[1]]&&pe[ke[1]].transition)return ba({key:L,value:j,valueSpec:Y.transition,style:q,styleSpec:Y});var Fe=y.valueSpec||pe[$];if(!Fe)return[new bi(L,j,'unknown property "'+$+'"')];var Ne;if(ta(j)==="string"&&Zo(Fe)&&!Fe.tokens&&(Ne=/^{([^}]+)}$/.exec(j)))return[new bi(L,j,'"'+$+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(Ne[1])+" }`.")];var ct=[];return y.layerType==="symbol"&&($==="text-field"&&q&&!q.glyphs&&ct.push(new bi(L,j,'use of "text-field" requires a style "glyphs" property')),$==="text-font"&&ws(vl(j))&&ss(j.type)==="identity"&&ct.push(new bi(L,j,'"text-font" does not support identity functions'))),ct.concat(ba({key:y.key,value:j,valueSpec:Fe,style:q,styleSpec:Y,expressionContext:"property",propertyType:m,propertyKey:$}))}function Sr(y){return _r(y,"paint")}function Hr(y){return _r(y,"layout")}function ln(y){var m=[],L=y.value,q=y.key,Y=y.style,j=y.styleSpec;!L.type&&!L.ref&&m.push(new bi(q,L,'either "type" or "ref" is required'));var $=ss(L.type),pe=ss(L.ref);if(L.id)for(var ke=ss(L.id),Fe=0;Fe<y.arrayIndex;Fe++){var Ne=Y.layers[Fe];ss(Ne.id)===ke&&m.push(new bi(q,L.id,'duplicate layer id "'+L.id+'", previously used at line '+Ne.id.__line__))}if("ref"in L){["type","source","source-layer","filter","layout"].forEach(function(Yt){Yt in L&&m.push(new bi(q,L[Yt],'"'+Yt+'" is prohibited for ref layers'))});var ct;Y.layers.forEach(function(Yt){ss(Yt.id)===pe&&(ct=Yt)}),ct?ct.ref?m.push(new bi(q,L.ref,"ref cannot reference another ref layer")):$=ss(ct.type):m.push(new bi(q,L.ref,'ref layer "'+pe+'" not found'))}else if($!=="background")if(!L.source)m.push(new bi(q,L,'missing required property "source"'));else{var kt=Y.sources&&Y.sources[L.source],bt=kt&&ss(kt.type);kt?bt==="vector"&&$==="raster"?m.push(new bi(q,L.source,'layer "'+L.id+'" requires a raster source')):bt==="raster"&&$!=="raster"?m.push(new bi(q,L.source,'layer "'+L.id+'" requires a vector source')):bt==="vector"&&!L["source-layer"]?m.push(new bi(q,L,'layer "'+L.id+'" must specify a "source-layer"')):bt==="raster-dem"&&$!=="hillshade"?m.push(new bi(q,L.source,"raster-dem source can only be used with layer type 'hillshade'.")):$==="line"&&L.paint&&L.paint["line-gradient"]&&(bt!=="geojson"||!kt.lineMetrics)&&m.push(new bi(q,L,'layer "'+L.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):m.push(new bi(q,L.source,'source "'+L.source+'" not found'))}return m=m.concat(Mu({key:q,value:L,valueSpec:j.layer,style:y.style,styleSpec:y.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return ba({key:q+".type",value:L.type,valueSpec:j.layer.type,style:y.style,styleSpec:y.styleSpec,object:L,objectKey:"type"})},filter:Qt,layout:function(hr){return Mu({layer:L,key:hr.key,value:hr.value,style:hr.style,styleSpec:hr.styleSpec,objectElementValidators:{"*":function(Ar){return Hr(Pl({layerType:$},Ar))}}})},paint:function(hr){return Mu({layer:L,key:hr.key,value:hr.value,style:hr.style,styleSpec:hr.styleSpec,objectElementValidators:{"*":function(Ar){return Sr(Pl({layerType:$},Ar))}}})}}})),m}function kn(y){var m=y.value,L=y.key,q=ta(m);return q!=="string"?[new bi(L,m,"string expected, "+q+" found")]:[]}var yi={promoteId:ra};function Qi(y){var m=y.value,L=y.key,q=y.styleSpec,Y=y.style;if(!m.type)return[new bi(L,m,'"type" is required')];var j=ss(m.type),$;switch(j){case"vector":case"raster":case"raster-dem":return $=Mu({key:L,value:m,valueSpec:q["source_"+j.replace("-","_")],style:y.style,styleSpec:q,objectElementValidators:yi}),$;case"geojson":if($=Mu({key:L,value:m,valueSpec:q.source_geojson,style:Y,styleSpec:q,objectElementValidators:yi}),m.cluster)for(var pe in m.clusterProperties){var ke=m.clusterProperties[pe],Fe=ke[0],Ne=ke[1],ct=typeof Fe=="string"?[Fe,["accumulated"],["get",pe]]:Fe;$.push.apply($,Gf({key:L+"."+pe+".map",value:Ne,expressionContext:"cluster-map"})),$.push.apply($,Gf({key:L+"."+pe+".reduce",value:ct,expressionContext:"cluster-reduce"}))}return $;case"video":return Mu({key:L,value:m,valueSpec:q.source_video,style:Y,styleSpec:q});case"image":return Mu({key:L,value:m,valueSpec:q.source_image,style:Y,styleSpec:q});case"canvas":return[new bi(L,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return qh({key:L+".type",value:m.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:Y,styleSpec:q})}}function ra(y){var m=y.key,L=y.value;if(ta(L)==="string")return kn({key:m,value:L});var q=[];for(var Y in L)q.push.apply(q,kn({key:m+"."+Y,value:L[Y]}));return q}function sa(y){var m=y.value,L=y.styleSpec,q=L.light,Y=y.style,j=[],$=ta(m);if(m===void 0)return j;if($!=="object")return j=j.concat([new bi("light",m,"object expected, "+$+" found")]),j;for(var pe in m){var ke=pe.match(/^(.*)-transition$/);ke&&q[ke[1]]&&q[ke[1]].transition?j=j.concat(ba({key:pe,value:m[pe],valueSpec:L.transition,style:Y,styleSpec:L})):q[pe]?j=j.concat(ba({key:pe,value:m[pe],valueSpec:q[pe],style:Y,styleSpec:L})):j=j.concat([new bi(pe,m[pe],'unknown property "'+pe+'"')])}return j}function pa(y){return kn(y).length===0?[]:Gf(y)}function Lo(y){return kn(y).length===0?[]:Gf(y)}var jo={"*":function(){return[]},array:eh,boolean:Fh,number:th,color:Yv,constants:ac,enum:qh,filter:Qt,function:rh,layer:ln,object:Mu,source:Qi,light:sa,string:kn,formatted:pa,resolvedImage:Lo};function ba(y){var m=y.value,L=y.valueSpec,q=y.styleSpec;if(L.expression&&ws(ss(m)))return rh(y);if(L.expression&&Rh(vl(m)))return Gf(y);if(L.type&&jo[L.type])return jo[L.type](y);var Y=Mu(Pl({},y,{valueSpec:L.type?q[L.type]:L}));return Y}function qa(y){var m=y.value,L=y.key,q=kn(y);return q.length||(m.indexOf("{fontstack}")===-1&&q.push(new bi(L,m,'"glyphs" url must include a "{fontstack}" token')),m.indexOf("{range}")===-1&&q.push(new bi(L,m,'"glyphs" url must include a "{range}" token'))),q}function ds(y,m){m===void 0&&(m=vn);var L=[];return L=L.concat(ba({key:"",value:y,valueSpec:m.$root,styleSpec:m,style:y,objectElementValidators:{glyphs:qa,"*":function(){return[]}}})),y.constants&&(L=L.concat(ac({key:"constants",value:y.constants,style:y,styleSpec:m}))),ol(L)}ds.source=el(Qi),ds.light=el(sa),ds.layer=el(ln),ds.filter=el(Qt),ds.paintProperty=el(Sr),ds.layoutProperty=el(Hr);function ol(y){return[].concat(y).sort(function(m,L){return m.line-L.line})}function el(y){return function(){for(var m=[],L=arguments.length;L--;)m[L]=arguments[L];return ol(y.apply(this,m))}}var to=ds,Ya=to.light,Il=to.paintProperty,Sl=to.layoutProperty;function Su(y,m){var L=!1;if(m&&m.length)for(var q=0,Y=m;q<Y.length;q+=1){var j=Y[q];y.fire(new Li(new Error(j.message))),L=!0}return L}var su=El,Fl=3;function El(y,m,L){var q=this.cells=[];if(y instanceof ArrayBuffer){this.arrayBuffer=y;var Y=new Int32Array(this.arrayBuffer);y=Y[0],m=Y[1],L=Y[2],this.d=m+2*L;for(var j=0;j<this.d*this.d;j++){var $=Y[Fl+j],pe=Y[Fl+j+1];q.push($===pe?null:Y.subarray($,pe))}var ke=Y[Fl+q.length],Fe=Y[Fl+q.length+1];this.keys=Y.subarray(ke,Fe),this.bboxes=Y.subarray(Fe),this.insert=this._insertReadonly}else{this.d=m+2*L;for(var Ne=0;Ne<this.d*this.d;Ne++)q.push([]);this.keys=[],this.bboxes=[]}this.n=m,this.extent=y,this.padding=L,this.scale=m/y,this.uid=0;var ct=L/m*y;this.min=-ct,this.max=y+ct}El.prototype.insert=function(y,m,L,q,Y){this._forEachCell(m,L,q,Y,this._insertCell,this.uid++),this.keys.push(y),this.bboxes.push(m),this.bboxes.push(L),this.bboxes.push(q),this.bboxes.push(Y)},El.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},El.prototype._insertCell=function(y,m,L,q,Y,j){this.cells[Y].push(j)},El.prototype.query=function(y,m,L,q,Y){var j=this.min,$=this.max;if(y<=j&&m<=j&&$<=L&&$<=q&&!Y)return Array.prototype.slice.call(this.keys);var pe=[],ke={};return this._forEachCell(y,m,L,q,this._queryCell,pe,ke,Y),pe},El.prototype._queryCell=function(y,m,L,q,Y,j,$,pe){var ke=this.cells[Y];if(ke!==null)for(var Fe=this.keys,Ne=this.bboxes,ct=0;ct<ke.length;ct++){var kt=ke[ct];if($[kt]===void 0){var bt=kt*4;(pe?pe(Ne[bt+0],Ne[bt+1],Ne[bt+2],Ne[bt+3]):y<=Ne[bt+2]&&m<=Ne[bt+3]&&L>=Ne[bt+0]&&q>=Ne[bt+1])?($[kt]=!0,j.push(Fe[kt])):$[kt]=!1}}},El.prototype._forEachCell=function(y,m,L,q,Y,j,$,pe){for(var ke=this._convertToCellCoord(y),Fe=this._convertToCellCoord(m),Ne=this._convertToCellCoord(L),ct=this._convertToCellCoord(q),kt=ke;kt<=Ne;kt++)for(var bt=Fe;bt<=ct;bt++){var Yt=this.d*bt+kt;if(!(pe&&!pe(this._convertFromCellCoord(kt),this._convertFromCellCoord(bt),this._convertFromCellCoord(kt+1),this._convertFromCellCoord(bt+1)))&&Y.call(this,y,m,L,q,Yt,j,$,pe))return}},El.prototype._convertFromCellCoord=function(y){return(y-this.padding)/this.scale},El.prototype._convertToCellCoord=function(y){return Math.max(0,Math.min(this.d-1,Math.floor(y*this.scale)+this.padding))},El.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var y=this.cells,m=Fl+this.cells.length+1+1,L=0,q=0;q<this.cells.length;q++)L+=this.cells[q].length;var Y=new Int32Array(m+L+this.keys.length+this.bboxes.length);Y[0]=this.extent,Y[1]=this.n,Y[2]=this.padding;for(var j=m,$=0;$<y.length;$++){var pe=y[$];Y[Fl+$]=j,Y.set(pe,j),j+=pe.length}return Y[Fl+y.length]=j,Y.set(this.keys,j),j+=this.keys.length,Y[Fl+y.length+1]=j,Y.set(this.bboxes,j),j+=this.bboxes.length,Y.buffer};var yf=c.ImageData,Xu=c.ImageBitmap,Zu={};function U(y,m,L){L===void 0&&(L={}),Object.defineProperty(m,"_classRegistryKey",{value:y,writeable:!1}),Zu[y]={klass:m,omit:L.omit||[],shallow:L.shallow||[]}}U("Object",Object),su.serialize=function(m,L){var q=m.toArrayBuffer();return L&&L.push(q),{buffer:q}},su.deserialize=function(m){return new su(m.buffer)},U("Grid",su),U("Color",lo),U("Error",Error),U("ResolvedImage",xs),U("StylePropertyFunction",Dh),U("StyleExpression",lc,{omit:["_evaluator"]}),U("ZoomDependentExpression",gf),U("ZoomConstantExpression",uc),U("CompoundExpression",ho,{omit:["_evaluate"]});for(var Q in Ji)Ji[Q]._classRegistryKey||U("Expression_"+Q,Ji[Q]);function se(y){return y&&typeof ArrayBuffer!="undefined"&&(y instanceof ArrayBuffer||y.constructor&&y.constructor.name==="ArrayBuffer")}function ye(y){return Xu&&y instanceof Xu}function _e(y,m){if(y==null||typeof y=="boolean"||typeof y=="number"||typeof y=="string"||y instanceof Boolean||y instanceof Number||y instanceof String||y instanceof Date||y instanceof RegExp)return y;if(se(y)||ye(y))return m&&m.push(y),y;if(ArrayBuffer.isView(y)){var L=y;return m&&m.push(L.buffer),L}if(y instanceof yf)return m&&m.push(y.data.buffer),y;if(Array.isArray(y)){for(var q=[],Y=0,j=y;Y<j.length;Y+=1){var $=j[Y];q.push(_e($,m))}return q}if(typeof y=="object"){var pe=y.constructor,ke=pe._classRegistryKey;if(!ke)throw new Error("can't serialize object of unregistered class");var Fe=pe.serialize?pe.serialize(y,m):{};if(!pe.serialize){for(var Ne in y)if(y.hasOwnProperty(Ne)&&!(Zu[ke].omit.indexOf(Ne)>=0)){var ct=y[Ne];Fe[Ne]=Zu[ke].shallow.indexOf(Ne)>=0?ct:_e(ct,m)}y instanceof Error&&(Fe.message=y.message)}if(Fe.$name)throw new Error("$name property is reserved for worker serialization logic.");return ke!=="Object"&&(Fe.$name=ke),Fe}throw new Error("can't serialize object of type "+typeof y)}function Ae(y){if(y==null||typeof y=="boolean"||typeof y=="number"||typeof y=="string"||y instanceof Boolean||y instanceof Number||y instanceof String||y instanceof Date||y instanceof RegExp||se(y)||ye(y)||ArrayBuffer.isView(y)||y instanceof yf)return y;if(Array.isArray(y))return y.map(Ae);if(typeof y=="object"){var m=y.$name||"Object",L=Zu[m],q=L.klass;if(!q)throw new Error("can't deserialize unregistered class "+m);if(q.deserialize)return q.deserialize(y);for(var Y=Object.create(q.prototype),j=0,$=Object.keys(y);j<$.length;j+=1){var pe=$[j];if(pe!=="$name"){var ke=y[pe];Y[pe]=Zu[m].shallow.indexOf(pe)>=0?ke:Ae(ke)}}return Y}throw new Error("can't deserialize object of type "+typeof y)}var Ge=function(){this.first=!0};Ge.prototype.update=function(m,L){var q=Math.floor(m);return this.first?(this.first=!1,this.lastIntegerZoom=q,this.lastIntegerZoomTime=0,this.lastZoom=m,this.lastFloorZoom=q,!0):(this.lastFloorZoom>q?(this.lastIntegerZoom=q+1,this.lastIntegerZoomTime=L):this.lastFloorZoom<q&&(this.lastIntegerZoom=q,this.lastIntegerZoomTime=L),m!==this.lastZoom?(this.lastZoom=m,this.lastFloorZoom=q,!0):!1)};var Le={"Latin-1 Supplement":function(y){return y>=128&&y<=255},Arabic:function(y){return y>=1536&&y<=1791},"Arabic Supplement":function(y){return y>=1872&&y<=1919},"Arabic Extended-A":function(y){return y>=2208&&y<=2303},"Hangul Jamo":function(y){return y>=4352&&y<=4607},"Unified Canadian Aboriginal Syllabics":function(y){return y>=5120&&y<=5759},Khmer:function(y){return y>=6016&&y<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(y){return y>=6320&&y<=6399},"General Punctuation":function(y){return y>=8192&&y<=8303},"Letterlike Symbols":function(y){return y>=8448&&y<=8527},"Number Forms":function(y){return y>=8528&&y<=8591},"Miscellaneous Technical":function(y){return y>=8960&&y<=9215},"Control Pictures":function(y){return y>=9216&&y<=9279},"Optical Character Recognition":function(y){return y>=9280&&y<=9311},"Enclosed Alphanumerics":function(y){return y>=9312&&y<=9471},"Geometric Shapes":function(y){return y>=9632&&y<=9727},"Miscellaneous Symbols":function(y){return y>=9728&&y<=9983},"Miscellaneous Symbols and Arrows":function(y){return y>=11008&&y<=11263},"CJK Radicals Supplement":function(y){return y>=11904&&y<=12031},"Kangxi Radicals":function(y){return y>=12032&&y<=12255},"Ideographic Description Characters":function(y){return y>=12272&&y<=12287},"CJK Symbols and Punctuation":function(y){return y>=12288&&y<=12351},Hiragana:function(y){return y>=12352&&y<=12447},Katakana:function(y){return y>=12448&&y<=12543},Bopomofo:function(y){return y>=12544&&y<=12591},"Hangul Compatibility Jamo":function(y){return y>=12592&&y<=12687},Kanbun:function(y){return y>=12688&&y<=12703},"Bopomofo Extended":function(y){return y>=12704&&y<=12735},"CJK Strokes":function(y){return y>=12736&&y<=12783},"Katakana Phonetic Extensions":function(y){return y>=12784&&y<=12799},"Enclosed CJK Letters and Months":function(y){return y>=12800&&y<=13055},"CJK Compatibility":function(y){return y>=13056&&y<=13311},"CJK Unified Ideographs Extension A":function(y){return y>=13312&&y<=19903},"Yijing Hexagram Symbols":function(y){return y>=19904&&y<=19967},"CJK Unified Ideographs":function(y){return y>=19968&&y<=40959},"Yi Syllables":function(y){return y>=40960&&y<=42127},"Yi Radicals":function(y){return y>=42128&&y<=42191},"Hangul Jamo Extended-A":function(y){return y>=43360&&y<=43391},"Hangul Syllables":function(y){return y>=44032&&y<=55215},"Hangul Jamo Extended-B":function(y){return y>=55216&&y<=55295},"Private Use Area":function(y){return y>=57344&&y<=63743},"CJK Compatibility Ideographs":function(y){return y>=63744&&y<=64255},"Arabic Presentation Forms-A":function(y){return y>=64336&&y<=65023},"Vertical Forms":function(y){return y>=65040&&y<=65055},"CJK Compatibility Forms":function(y){return y>=65072&&y<=65103},"Small Form Variants":function(y){return y>=65104&&y<=65135},"Arabic Presentation Forms-B":function(y){return y>=65136&&y<=65279},"Halfwidth and Fullwidth Forms":function(y){return y>=65280&&y<=65519}};function tt(y){for(var m=0,L=y;m<L.length;m+=1){var q=L[m];if(tr(q.charCodeAt(0)))return!0}return!1}function St(y){for(var m=0,L=y;m<L.length;m+=1){var q=L[m];if(!Ct(q.charCodeAt(0)))return!1}return!0}function Ct(y){return!(Le.Arabic(y)||Le["Arabic Supplement"](y)||Le["Arabic Extended-A"](y)||Le["Arabic Presentation Forms-A"](y)||Le["Arabic Presentation Forms-B"](y))}function rr(y){return y<11904?!1:!!(Le["Bopomofo Extended"](y)||Le.Bopomofo(y)||Le["CJK Compatibility Forms"](y)||Le["CJK Compatibility Ideographs"](y)||Le["CJK Compatibility"](y)||Le["CJK Radicals Supplement"](y)||Le["CJK Strokes"](y)||Le["CJK Symbols and Punctuation"](y)||Le["CJK Unified Ideographs Extension A"](y)||Le["CJK Unified Ideographs"](y)||Le["Enclosed CJK Letters and Months"](y)||Le["Halfwidth and Fullwidth Forms"](y)||Le.Hiragana(y)||Le["Ideographic Description Characters"](y)||Le["Kangxi Radicals"](y)||Le["Katakana Phonetic Extensions"](y)||Le.Katakana(y)||Le["Vertical Forms"](y)||Le["Yi Radicals"](y)||Le["Yi Syllables"](y))}function tr(y){return y===746||y===747?!0:y<4352?!1:!!(Le["Bopomofo Extended"](y)||Le.Bopomofo(y)||Le["CJK Compatibility Forms"](y)&&!(y>=65097&&y<=65103)||Le["CJK Compatibility Ideographs"](y)||Le["CJK Compatibility"](y)||Le["CJK Radicals Supplement"](y)||Le["CJK Strokes"](y)||Le["CJK Symbols and Punctuation"](y)&&!(y>=12296&&y<=12305)&&!(y>=12308&&y<=12319)&&y!==12336||Le["CJK Unified Ideographs Extension A"](y)||Le["CJK Unified Ideographs"](y)||Le["Enclosed CJK Letters and Months"](y)||Le["Hangul Compatibility Jamo"](y)||Le["Hangul Jamo Extended-A"](y)||Le["Hangul Jamo Extended-B"](y)||Le["Hangul Jamo"](y)||Le["Hangul Syllables"](y)||Le.Hiragana(y)||Le["Ideographic Description Characters"](y)||Le.Kanbun(y)||Le["Kangxi Radicals"](y)||Le["Katakana Phonetic Extensions"](y)||Le.Katakana(y)&&y!==12540||Le["Halfwidth and Fullwidth Forms"](y)&&y!==65288&&y!==65289&&y!==65293&&!(y>=65306&&y<=65310)&&y!==65339&&y!==65341&&y!==65343&&!(y>=65371&&y<=65503)&&y!==65507&&!(y>=65512&&y<=65519)||Le["Small Form Variants"](y)&&!(y>=65112&&y<=65118)&&!(y>=65123&&y<=65126)||Le["Unified Canadian Aboriginal Syllabics"](y)||Le["Unified Canadian Aboriginal Syllabics Extended"](y)||Le["Vertical Forms"](y)||Le["Yijing Hexagram Symbols"](y)||Le["Yi Syllables"](y)||Le["Yi Radicals"](y))}function Tr(y){return!!(Le["Latin-1 Supplement"](y)&&(y===167||y===169||y===174||y===177||y===188||y===189||y===190||y===215||y===247)||Le["General Punctuation"](y)&&(y===8214||y===8224||y===8225||y===8240||y===8241||y===8251||y===8252||y===8258||y===8263||y===8264||y===8265||y===8273)||Le["Letterlike Symbols"](y)||Le["Number Forms"](y)||Le["Miscellaneous Technical"](y)&&(y>=8960&&y<=8967||y>=8972&&y<=8991||y>=8996&&y<=9e3||y===9003||y>=9085&&y<=9114||y>=9150&&y<=9165||y===9167||y>=9169&&y<=9179||y>=9186&&y<=9215)||Le["Control Pictures"](y)&&y!==9251||Le["Optical Character Recognition"](y)||Le["Enclosed Alphanumerics"](y)||Le["Geometric Shapes"](y)||Le["Miscellaneous Symbols"](y)&&!(y>=9754&&y<=9759)||Le["Miscellaneous Symbols and Arrows"](y)&&(y>=11026&&y<=11055||y>=11088&&y<=11097||y>=11192&&y<=11243)||Le["CJK Symbols and Punctuation"](y)||Le.Katakana(y)||Le["Private Use Area"](y)||Le["CJK Compatibility Forms"](y)||Le["Small Form Variants"](y)||Le["Halfwidth and Fullwidth Forms"](y)||y===8734||y===8756||y===8757||y>=9984&&y<=10087||y>=10102&&y<=10131||y===65532||y===65533)}function Er(y){return!(tr(y)||Tr(y))}function ir(y){return Le.Arabic(y)||Le["Arabic Supplement"](y)||Le["Arabic Extended-A"](y)||Le["Arabic Presentation Forms-A"](y)||Le["Arabic Presentation Forms-B"](y)}function gr(y){return y>=1424&&y<=2303||Le["Arabic Presentation Forms-A"](y)||Le["Arabic Presentation Forms-B"](y)}function wr(y,m){return!(!m&&gr(y)||y>=2304&&y<=3583||y>=3840&&y<=4255||Le.Khmer(y))}function Pr(y){for(var m=0,L=y;m<L.length;m+=1){var q=L[m];if(gr(q.charCodeAt(0)))return!0}return!1}function kr(y,m){for(var L=0,q=y;L<q.length;L+=1){var Y=q[L];if(!wr(Y.charCodeAt(0),m))return!1}return!0}var pr={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},yn=null,bn=pr.unavailable,In=null,Xn=function(y){y&&typeof y=="string"&&y.indexOf("NetworkError")>-1&&(bn=pr.error),yn&&yn(y)};function Ci(){Fi.fire(new Ra("pluginStateChange",{pluginStatus:bn,pluginURL:In}))}var Fi=new Yn,xa=function(){return bn},Gi=function(y){return y({pluginStatus:bn,pluginURL:In}),Fi.on("pluginStateChange",y),y},va=function(y,m,L){if(L===void 0&&(L=!1),bn===pr.deferred||bn===pr.loading||bn===pr.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");In=Re.resolveURL(y),bn=pr.deferred,yn=m,Ci(),L||go()},go=function(){if(bn!==pr.deferred||!In)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");bn=pr.loading,Ci(),In&&yr({url:In},function(y){y?Xn(y):(bn=pr.loaded,Ci())})},Po={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return bn===pr.loaded||Po.applyArabicShaping!=null},isLoading:function(){return bn===pr.loading},setState:function(m){bn=m.pluginStatus,In=m.pluginURL},isParsed:function(){return Po.applyArabicShaping!=null&&Po.processBidirectionalText!=null&&Po.processStyledBidirectionalText!=null},getPluginURL:function(){return In}},Ao=function(){!Po.isLoading()&&!Po.isLoaded()&&xa()==="deferred"&&go()},Sn=function(m,L){this.zoom=m,L?(this.now=L.now,this.fadeDuration=L.fadeDuration,this.zoomHistory=L.zoomHistory,this.transition=L.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ge,this.transition={})};Sn.prototype.isSupportedScript=function(m){return kr(m,Po.isLoaded())},Sn.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Sn.prototype.getCrossfadeParameters=function(){var m=this.zoom,L=m-Math.floor(m),q=this.crossFadingFactor();return m>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:L+(1-L)*q}:{fromScale:.5,toScale:1,t:1-(1-q)*L}};var da=function(m,L){this.property=m,this.value=L,this.expression=Hv(L===void 0?m.specification.default:L,m.specification)};da.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},da.prototype.possiblyEvaluate=function(m,L,q){return this.property.possiblyEvaluate(this,m,L,q)};var Sa=function(m){this.property=m,this.value=new da(m,void 0)};Sa.prototype.transitioned=function(m,L){return new Ts(this.property,this.value,L,x({},m.transition,this.transition),m.now)},Sa.prototype.untransitioned=function(){return new Ts(this.property,this.value,null,{},0)};var La=function(m){this._properties=m,this._values=Object.create(m.defaultTransitionablePropertyValues)};La.prototype.getValue=function(m){return B(this._values[m].value.value)},La.prototype.setValue=function(m,L){this._values.hasOwnProperty(m)||(this._values[m]=new Sa(this._values[m].property)),this._values[m].value=new da(this._values[m].property,L===null?void 0:B(L))},La.prototype.getTransition=function(m){return B(this._values[m].transition)},La.prototype.setTransition=function(m,L){this._values.hasOwnProperty(m)||(this._values[m]=new Sa(this._values[m].property)),this._values[m].transition=B(L)||void 0},La.prototype.serialize=function(){for(var m={},L=0,q=Object.keys(this._values);L<q.length;L+=1){var Y=q[L],j=this.getValue(Y);j!==void 0&&(m[Y]=j);var $=this.getTransition(Y);$!==void 0&&(m[Y+"-transition"]=$)}return m},La.prototype.transitioned=function(m,L){for(var q=new Gs(this._properties),Y=0,j=Object.keys(this._values);Y<j.length;Y+=1){var $=j[Y];q._values[$]=this._values[$].transitioned(m,L._values[$])}return q},La.prototype.untransitioned=function(){for(var m=new Gs(this._properties),L=0,q=Object.keys(this._values);L<q.length;L+=1){var Y=q[L];m._values[Y]=this._values[Y].untransitioned()}return m};var Ts=function(m,L,q,Y,j){this.property=m,this.value=L,this.begin=j+Y.delay||0,this.end=this.begin+Y.duration||0,m.specification.transition&&(Y.delay||Y.duration)&&(this.prior=q)};Ts.prototype.possiblyEvaluate=function(m,L,q){var Y=m.now||0,j=this.value.possiblyEvaluate(m,L,q),$=this.prior;if($){if(Y>this.end)return this.prior=null,j;if(this.value.isDataDriven())return this.prior=null,j;if(Y<this.begin)return $.possiblyEvaluate(m,L,q);var pe=(Y-this.begin)/(this.end-this.begin);return this.property.interpolate($.possiblyEvaluate(m,L,q),j,d(pe))}else return j};var Gs=function(m){this._properties=m,this._values=Object.create(m.defaultTransitioningPropertyValues)};Gs.prototype.possiblyEvaluate=function(m,L,q){for(var Y=new Wl(this._properties),j=0,$=Object.keys(this._values);j<$.length;j+=1){var pe=$[j];Y._values[pe]=this._values[pe].possiblyEvaluate(m,L,q)}return Y},Gs.prototype.hasTransition=function(){for(var m=0,L=Object.keys(this._values);m<L.length;m+=1){var q=L[m];if(this._values[q].prior)return!0}return!1};var yl=function(m){this._properties=m,this._values=Object.create(m.defaultPropertyValues)};yl.prototype.getValue=function(m){return B(this._values[m].value)},yl.prototype.setValue=function(m,L){this._values[m]=new da(this._values[m].property,L===null?void 0:B(L))},yl.prototype.serialize=function(){for(var m={},L=0,q=Object.keys(this._values);L<q.length;L+=1){var Y=q[L],j=this.getValue(Y);j!==void 0&&(m[Y]=j)}return m},yl.prototype.possiblyEvaluate=function(m,L,q){for(var Y=new Wl(this._properties),j=0,$=Object.keys(this._values);j<$.length;j+=1){var pe=$[j];Y._values[pe]=this._values[pe].possiblyEvaluate(m,L,q)}return Y};var ls=function(m,L,q){this.property=m,this.value=L,this.parameters=q};ls.prototype.isConstant=function(){return this.value.kind==="constant"},ls.prototype.constantOr=function(m){return this.value.kind==="constant"?this.value.value:m},ls.prototype.evaluate=function(m,L,q,Y){return this.property.evaluate(this.value,this.parameters,m,L,q,Y)};var Wl=function(m){this._properties=m,this._values=Object.create(m.defaultPossiblyEvaluatedValues)};Wl.prototype.get=function(m){return this._values[m]};var Ye=function(m){this.specification=m};Ye.prototype.possiblyEvaluate=function(m,L){return m.expression.evaluate(L)},Ye.prototype.interpolate=function(m,L,q){var Y=Tu[this.specification.type];return Y?Y(m,L,q):m};var Gt=function(m,L){this.specification=m,this.overrides=L};Gt.prototype.possiblyEvaluate=function(m,L,q,Y){return m.expression.kind==="constant"||m.expression.kind==="camera"?new ls(this,{kind:"constant",value:m.expression.evaluate(L,null,{},q,Y)},L):new ls(this,m.expression,L)},Gt.prototype.interpolate=function(m,L,q){if(m.value.kind!=="constant"||L.value.kind!=="constant")return m;if(m.value.value===void 0||L.value.value===void 0)return new ls(this,{kind:"constant",value:void 0},m.parameters);var Y=Tu[this.specification.type];return Y?new ls(this,{kind:"constant",value:Y(m.value.value,L.value.value,q)},m.parameters):m},Gt.prototype.evaluate=function(m,L,q,Y,j,$){return m.kind==="constant"?m.value:m.evaluate(L,q,Y,j,$)};var lr=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.possiblyEvaluate=function(q,Y,j,$){if(q.value===void 0)return new ls(this,{kind:"constant",value:void 0},Y);if(q.expression.kind==="constant"){var pe=q.expression.evaluate(Y,null,{},j,$),ke=q.property.specification.type==="resolvedImage",Fe=ke&&typeof pe!="string"?pe.name:pe,Ne=this._calculate(Fe,Fe,Fe,Y);return new ls(this,{kind:"constant",value:Ne},Y)}else if(q.expression.kind==="camera"){var ct=this._calculate(q.expression.evaluate({zoom:Y.zoom-1}),q.expression.evaluate({zoom:Y.zoom}),q.expression.evaluate({zoom:Y.zoom+1}),Y);return new ls(this,{kind:"constant",value:ct},Y)}else return new ls(this,q.expression,Y)},m.prototype.evaluate=function(q,Y,j,$,pe,ke){if(q.kind==="source"){var Fe=q.evaluate(Y,j,$,pe,ke);return this._calculate(Fe,Fe,Fe,Y)}else return q.kind==="composite"?this._calculate(q.evaluate({zoom:Math.floor(Y.zoom)-1},j,$),q.evaluate({zoom:Math.floor(Y.zoom)},j,$),q.evaluate({zoom:Math.floor(Y.zoom)+1},j,$),Y):q.value},m.prototype._calculate=function(q,Y,j,$){var pe=$.zoom;return pe>$.zoomHistory.lastIntegerZoom?{from:q,to:Y}:{from:j,to:Y}},m.prototype.interpolate=function(q){return q},m}(Gt),Or=function(m){this.specification=m};Or.prototype.possiblyEvaluate=function(m,L,q,Y){if(m.value!==void 0)if(m.expression.kind==="constant"){var j=m.expression.evaluate(L,null,{},q,Y);return this._calculate(j,j,j,L)}else return this._calculate(m.expression.evaluate(new Sn(Math.floor(L.zoom-1),L)),m.expression.evaluate(new Sn(Math.floor(L.zoom),L)),m.expression.evaluate(new Sn(Math.floor(L.zoom+1),L)),L)},Or.prototype._calculate=function(m,L,q,Y){var j=Y.zoom;return j>Y.zoomHistory.lastIntegerZoom?{from:m,to:L}:{from:q,to:L}},Or.prototype.interpolate=function(m){return m};var $r=function(m){this.specification=m};$r.prototype.possiblyEvaluate=function(m,L,q,Y){return!!m.expression.evaluate(L,null,{},q,Y)},$r.prototype.interpolate=function(){return!1};var jr=function(m){this.properties=m,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(var L in m){var q=m[L];q.specification.overridable&&this.overridableProperties.push(L);var Y=this.defaultPropertyValues[L]=new da(q,void 0),j=this.defaultTransitionablePropertyValues[L]=new Sa(q);this.defaultTransitioningPropertyValues[L]=j.untransitioned(),this.defaultPossiblyEvaluatedValues[L]=Y.possiblyEvaluate({})}};U("DataDrivenProperty",Gt),U("DataConstantProperty",Ye),U("CrossFadedDataDrivenProperty",lr),U("CrossFadedProperty",Or),U("ColorRampProperty",$r);var Kr="-transition",xn=function(y){function m(L,q){if(y.call(this),this.id=L.id,this.type=L.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},L.type!=="custom"&&(L=L,this.metadata=L.metadata,this.minzoom=L.minzoom,this.maxzoom=L.maxzoom,L.type!=="background"&&(this.source=L.source,this.sourceLayer=L["source-layer"],this.filter=L.filter),q.layout&&(this._unevaluatedLayout=new yl(q.layout)),q.paint)){this._transitionablePaint=new La(q.paint);for(var Y in L.paint)this.setPaintProperty(Y,L.paint[Y],{validate:!1});for(var j in L.layout)this.setLayoutProperty(j,L.layout[j],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Wl(q.paint)}}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},m.prototype.getLayoutProperty=function(q){return q==="visibility"?this.visibility:this._unevaluatedLayout.getValue(q)},m.prototype.setLayoutProperty=function(q,Y,j){if(j===void 0&&(j={}),Y!=null){var $="layers."+this.id+".layout."+q;if(this._validate(Sl,$,q,Y,j))return}if(q==="visibility"){this.visibility=Y;return}this._unevaluatedLayout.setValue(q,Y)},m.prototype.getPaintProperty=function(q){return z(q,Kr)?this._transitionablePaint.getTransition(q.slice(0,-Kr.length)):this._transitionablePaint.getValue(q)},m.prototype.setPaintProperty=function(q,Y,j){if(j===void 0&&(j={}),Y!=null){var $="layers."+this.id+".paint."+q;if(this._validate(Il,$,q,Y,j))return!1}if(z(q,Kr))return this._transitionablePaint.setTransition(q.slice(0,-Kr.length),Y||void 0),!1;var pe=this._transitionablePaint._values[q],ke=pe.property.specification["property-type"]==="cross-faded-data-driven",Fe=pe.value.isDataDriven(),Ne=pe.value;this._transitionablePaint.setValue(q,Y),this._handleSpecialPaintPropertyUpdate(q);var ct=this._transitionablePaint._values[q].value,kt=ct.isDataDriven();return kt||Fe||ke||this._handleOverridablePaintPropertyUpdate(q,Ne,ct)},m.prototype._handleSpecialPaintPropertyUpdate=function(q){},m.prototype._handleOverridablePaintPropertyUpdate=function(q,Y,j){return!1},m.prototype.isHidden=function(q){return this.minzoom&&q<this.minzoom||this.maxzoom&&q>=this.maxzoom?!0:this.visibility==="none"},m.prototype.updateTransitions=function(q){this._transitioningPaint=this._transitionablePaint.transitioned(q,this._transitioningPaint)},m.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},m.prototype.recalculate=function(q,Y){q.getCrossfadeParameters&&(this._crossfadeParameters=q.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(q,void 0,Y)),this.paint=this._transitioningPaint.possiblyEvaluate(q,void 0,Y)},m.prototype.serialize=function(){var q={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(q.layout=q.layout||{},q.layout.visibility=this.visibility),V(q,function(Y,j){return Y!==void 0&&!(j==="layout"&&!Object.keys(Y).length)&&!(j==="paint"&&!Object.keys(Y).length)})},m.prototype._validate=function(q,Y,j,$,pe){return pe===void 0&&(pe={}),pe&&pe.validate===!1?!1:Su(this,q.call(to,{key:Y,layerType:this.type,objectKey:j,value:$,styleSpec:vn,style:{glyphs:!0,sprite:!0}}))},m.prototype.is3D=function(){return!1},m.prototype.isTileClipped=function(){return!1},m.prototype.hasOffscreenPass=function(){return!1},m.prototype.resize=function(){},m.prototype.isStateDependent=function(){for(var q in this.paint._values){var Y=this.paint.get(q);if(!(!(Y instanceof ls)||!Zo(Y.property.specification))&&(Y.value.kind==="source"||Y.value.kind==="composite")&&Y.value.isStateDependent)return!0}return!1},m}(Yn),Qn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Wn=function(m,L){this._structArray=m,this._pos1=L*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Rn=128,ia=5,Un=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};Un.serialize=function(m,L){return m._trim(),L&&(m.isTransferred=!0,L.push(m.arrayBuffer)),{length:m.length,arrayBuffer:m.arrayBuffer}},Un.deserialize=function(m){var L=Object.create(this.prototype);return L.arrayBuffer=m.arrayBuffer,L.length=m.length,L.capacity=m.arrayBuffer.byteLength/L.bytesPerElement,L._refreshViews(),L},Un.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Un.prototype.clear=function(){this.length=0},Un.prototype.resize=function(m){this.reserve(m),this.length=m},Un.prototype.reserve=function(m){if(m>this.capacity){this.capacity=Math.max(m,Math.floor(this.capacity*ia),Rn),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var L=this.uint8;this._refreshViews(),L&&this.uint8.set(L)}},Un.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};function Bn(y,m){m===void 0&&(m=1);var L=0,q=0,Y=y.map(function($){var pe=_n($.type),ke=L=Br(L,Math.max(m,pe)),Fe=$.components||1;return q=Math.max(q,pe),L+=pe*Fe,{name:$.name,type:$.type,components:Fe,offset:ke}}),j=Br(L,Math.max(q,m));return{members:Y,size:j,alignment:m}}function _n(y){return Qn[y].BYTES_PER_ELEMENT}function Br(y,m){return Math.ceil(y/m)*m}var cn=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y){var j=this.length;return this.resize(j+1),this.emplace(j,q,Y)},m.prototype.emplace=function(q,Y,j){var $=q*2;return this.int16[$+0]=Y,this.int16[$+1]=j,q},m}(Un);cn.prototype.bytesPerElement=4,U("StructArrayLayout2i4",cn);var Vn=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j,$){var pe=this.length;return this.resize(pe+1),this.emplace(pe,q,Y,j,$)},m.prototype.emplace=function(q,Y,j,$,pe){var ke=q*4;return this.int16[ke+0]=Y,this.int16[ke+1]=j,this.int16[ke+2]=$,this.int16[ke+3]=pe,q},m}(Un);Vn.prototype.bytesPerElement=8,U("StructArrayLayout4i8",Vn);var Zn=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j,$,pe,ke){var Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,q,Y,j,$,pe,ke)},m.prototype.emplace=function(q,Y,j,$,pe,ke,Fe){var Ne=q*6;return this.int16[Ne+0]=Y,this.int16[Ne+1]=j,this.int16[Ne+2]=$,this.int16[Ne+3]=pe,this.int16[Ne+4]=ke,this.int16[Ne+5]=Fe,q},m}(Un);Zn.prototype.bytesPerElement=12,U("StructArrayLayout2i4i12",Zn);var En=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j,$,pe,ke){var Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,q,Y,j,$,pe,ke)},m.prototype.emplace=function(q,Y,j,$,pe,ke,Fe){var Ne=q*4,ct=q*8;return this.int16[Ne+0]=Y,this.int16[Ne+1]=j,this.uint8[ct+4]=$,this.uint8[ct+5]=pe,this.uint8[ct+6]=ke,this.uint8[ct+7]=Fe,q},m}(Un);En.prototype.bytesPerElement=8,U("StructArrayLayout2i4ub8",En);var mi=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y){var j=this.length;return this.resize(j+1),this.emplace(j,q,Y)},m.prototype.emplace=function(q,Y,j){var $=q*2;return this.float32[$+0]=Y,this.float32[$+1]=j,q},m}(Un);mi.prototype.bytesPerElement=8,U("StructArrayLayout2f8",mi);var ri=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j,$,pe,ke,Fe,Ne,ct,kt){var bt=this.length;return this.resize(bt+1),this.emplace(bt,q,Y,j,$,pe,ke,Fe,Ne,ct,kt)},m.prototype.emplace=function(q,Y,j,$,pe,ke,Fe,Ne,ct,kt,bt){var Yt=q*10;return this.uint16[Yt+0]=Y,this.uint16[Yt+1]=j,this.uint16[Yt+2]=$,this.uint16[Yt+3]=pe,this.uint16[Yt+4]=ke,this.uint16[Yt+5]=Fe,this.uint16[Yt+6]=Ne,this.uint16[Yt+7]=ct,this.uint16[Yt+8]=kt,this.uint16[Yt+9]=bt,q},m}(Un);ri.prototype.bytesPerElement=20,U("StructArrayLayout10ui20",ri);var $i=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j,$,pe,ke,Fe,Ne,ct,kt,bt,Yt){var hr=this.length;return this.resize(hr+1),this.emplace(hr,q,Y,j,$,pe,ke,Fe,Ne,ct,kt,bt,Yt)},m.prototype.emplace=function(q,Y,j,$,pe,ke,Fe,Ne,ct,kt,bt,Yt,hr){var Ir=q*12;return this.int16[Ir+0]=Y,this.int16[Ir+1]=j,this.int16[Ir+2]=$,this.int16[Ir+3]=pe,this.uint16[Ir+4]=ke,this.uint16[Ir+5]=Fe,this.uint16[Ir+6]=Ne,this.uint16[Ir+7]=ct,this.int16[Ir+8]=kt,this.int16[Ir+9]=bt,this.int16[Ir+10]=Yt,this.int16[Ir+11]=hr,q},m}(Un);$i.prototype.bytesPerElement=24,U("StructArrayLayout4i4ui4i24",$i);var Cn=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j){var $=this.length;return this.resize($+1),this.emplace($,q,Y,j)},m.prototype.emplace=function(q,Y,j,$){var pe=q*3;return this.float32[pe+0]=Y,this.float32[pe+1]=j,this.float32[pe+2]=$,q},m}(Un);Cn.prototype.bytesPerElement=12,U("StructArrayLayout3f12",Cn);var Tn=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q){var Y=this.length;return this.resize(Y+1),this.emplace(Y,q)},m.prototype.emplace=function(q,Y){var j=q*1;return this.uint32[j+0]=Y,q},m}(Un);Tn.prototype.bytesPerElement=4,U("StructArrayLayout1ul4",Tn);var Pi=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j,$,pe,ke,Fe,Ne,ct){var kt=this.length;return this.resize(kt+1),this.emplace(kt,q,Y,j,$,pe,ke,Fe,Ne,ct)},m.prototype.emplace=function(q,Y,j,$,pe,ke,Fe,Ne,ct,kt){var bt=q*10,Yt=q*5;return this.int16[bt+0]=Y,this.int16[bt+1]=j,this.int16[bt+2]=$,this.int16[bt+3]=pe,this.int16[bt+4]=ke,this.int16[bt+5]=Fe,this.uint32[Yt+3]=Ne,this.uint16[bt+8]=ct,this.uint16[bt+9]=kt,q},m}(Un);Pi.prototype.bytesPerElement=20,U("StructArrayLayout6i1ul2ui20",Pi);var di=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j,$,pe,ke){var Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,q,Y,j,$,pe,ke)},m.prototype.emplace=function(q,Y,j,$,pe,ke,Fe){var Ne=q*6;return this.int16[Ne+0]=Y,this.int16[Ne+1]=j,this.int16[Ne+2]=$,this.int16[Ne+3]=pe,this.int16[Ne+4]=ke,this.int16[Ne+5]=Fe,q},m}(Un);di.prototype.bytesPerElement=12,U("StructArrayLayout2i2i2i12",di);var ei=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j,$,pe){var ke=this.length;return this.resize(ke+1),this.emplace(ke,q,Y,j,$,pe)},m.prototype.emplace=function(q,Y,j,$,pe,ke){var Fe=q*4,Ne=q*8;return this.float32[Fe+0]=Y,this.float32[Fe+1]=j,this.float32[Fe+2]=$,this.int16[Ne+6]=pe,this.int16[Ne+7]=ke,q},m}(Un);ei.prototype.bytesPerElement=16,U("StructArrayLayout2f1f2i16",ei);var jn=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j,$){var pe=this.length;return this.resize(pe+1),this.emplace(pe,q,Y,j,$)},m.prototype.emplace=function(q,Y,j,$,pe){var ke=q*12,Fe=q*3;return this.uint8[ke+0]=Y,this.uint8[ke+1]=j,this.float32[Fe+1]=$,this.float32[Fe+2]=pe,q},m}(Un);jn.prototype.bytesPerElement=12,U("StructArrayLayout2ub2f12",jn);var Si=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j){var $=this.length;return this.resize($+1),this.emplace($,q,Y,j)},m.prototype.emplace=function(q,Y,j,$){var pe=q*3;return this.uint16[pe+0]=Y,this.uint16[pe+1]=j,this.uint16[pe+2]=$,q},m}(Un);Si.prototype.bytesPerElement=6,U("StructArrayLayout3ui6",Si);var na=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j,$,pe,ke,Fe,Ne,ct,kt,bt,Yt,hr,Ir,Ar,en,Ur){var Qr=this.length;return this.resize(Qr+1),this.emplace(Qr,q,Y,j,$,pe,ke,Fe,Ne,ct,kt,bt,Yt,hr,Ir,Ar,en,Ur)},m.prototype.emplace=function(q,Y,j,$,pe,ke,Fe,Ne,ct,kt,bt,Yt,hr,Ir,Ar,en,Ur,Qr){var on=q*24,Pn=q*12,oi=q*48;return this.int16[on+0]=Y,this.int16[on+1]=j,this.uint16[on+2]=$,this.uint16[on+3]=pe,this.uint32[Pn+2]=ke,this.uint32[Pn+3]=Fe,this.uint32[Pn+4]=Ne,this.uint16[on+10]=ct,this.uint16[on+11]=kt,this.uint16[on+12]=bt,this.float32[Pn+7]=Yt,this.float32[Pn+8]=hr,this.uint8[oi+36]=Ir,this.uint8[oi+37]=Ar,this.uint8[oi+38]=en,this.uint32[Pn+10]=Ur,this.int16[on+22]=Qr,q},m}(Un);na.prototype.bytesPerElement=48,U("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",na);var Ea=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j,$,pe,ke,Fe,Ne,ct,kt,bt,Yt,hr,Ir,Ar,en,Ur,Qr,on,Pn,oi,ti,Bi,Ti,Ri,wa,Ni,Yi){var Xa=this.length;return this.resize(Xa+1),this.emplace(Xa,q,Y,j,$,pe,ke,Fe,Ne,ct,kt,bt,Yt,hr,Ir,Ar,en,Ur,Qr,on,Pn,oi,ti,Bi,Ti,Ri,wa,Ni,Yi)},m.prototype.emplace=function(q,Y,j,$,pe,ke,Fe,Ne,ct,kt,bt,Yt,hr,Ir,Ar,en,Ur,Qr,on,Pn,oi,ti,Bi,Ti,Ri,wa,Ni,Yi,Xa){var ga=q*34,Ro=q*17;return this.int16[ga+0]=Y,this.int16[ga+1]=j,this.int16[ga+2]=$,this.int16[ga+3]=pe,this.int16[ga+4]=ke,this.int16[ga+5]=Fe,this.int16[ga+6]=Ne,this.int16[ga+7]=ct,this.uint16[ga+8]=kt,this.uint16[ga+9]=bt,this.uint16[ga+10]=Yt,this.uint16[ga+11]=hr,this.uint16[ga+12]=Ir,this.uint16[ga+13]=Ar,this.uint16[ga+14]=en,this.uint16[ga+15]=Ur,this.uint16[ga+16]=Qr,this.uint16[ga+17]=on,this.uint16[ga+18]=Pn,this.uint16[ga+19]=oi,this.uint16[ga+20]=ti,this.uint16[ga+21]=Bi,this.uint16[ga+22]=Ti,this.uint32[Ro+12]=Ri,this.float32[Ro+13]=wa,this.float32[Ro+14]=Ni,this.float32[Ro+15]=Yi,this.float32[Ro+16]=Xa,q},m}(Un);Ea.prototype.bytesPerElement=68,U("StructArrayLayout8i15ui1ul4f68",Ea);var pi=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q){var Y=this.length;return this.resize(Y+1),this.emplace(Y,q)},m.prototype.emplace=function(q,Y){var j=q*1;return this.float32[j+0]=Y,q},m}(Un);pi.prototype.bytesPerElement=4,U("StructArrayLayout1f4",pi);var Vi=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j){var $=this.length;return this.resize($+1),this.emplace($,q,Y,j)},m.prototype.emplace=function(q,Y,j,$){var pe=q*3;return this.int16[pe+0]=Y,this.int16[pe+1]=j,this.int16[pe+2]=$,q},m}(Un);Vi.prototype.bytesPerElement=6,U("StructArrayLayout3i6",Vi);var ha=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j){var $=this.length;return this.resize($+1),this.emplace($,q,Y,j)},m.prototype.emplace=function(q,Y,j,$){var pe=q*2,ke=q*4;return this.uint32[pe+0]=Y,this.uint16[ke+2]=j,this.uint16[ke+3]=$,q},m}(Un);ha.prototype.bytesPerElement=8,U("StructArrayLayout1ul2ui8",ha);var _a=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y){var j=this.length;return this.resize(j+1),this.emplace(j,q,Y)},m.prototype.emplace=function(q,Y,j){var $=q*2;return this.uint16[$+0]=Y,this.uint16[$+1]=j,q},m}(Un);_a.prototype.bytesPerElement=4,U("StructArrayLayout2ui4",_a);var Wa=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q){var Y=this.length;return this.resize(Y+1),this.emplace(Y,q)},m.prototype.emplace=function(q,Y){var j=q*1;return this.uint16[j+0]=Y,q},m}(Un);Wa.prototype.bytesPerElement=2,U("StructArrayLayout1ui2",Wa);var Ls=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},m.prototype.emplaceBack=function(q,Y,j,$){var pe=this.length;return this.resize(pe+1),this.emplace(pe,q,Y,j,$)},m.prototype.emplace=function(q,Y,j,$,pe){var ke=q*4;return this.float32[ke+0]=Y,this.float32[ke+1]=j,this.float32[ke+2]=$,this.float32[ke+3]=pe,q},m}(Un);Ls.prototype.bytesPerElement=16,U("StructArrayLayout4f16",Ls);var lu=function(y){function m(){y.apply(this,arguments)}y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m;var L={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return L.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},L.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},L.x1.get=function(){return this._structArray.int16[this._pos2+2]},L.y1.get=function(){return this._structArray.int16[this._pos2+3]},L.x2.get=function(){return this._structArray.int16[this._pos2+4]},L.y2.get=function(){return this._structArray.int16[this._pos2+5]},L.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},L.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},L.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},L.anchorPoint.get=function(){return new u(this.anchorPointX,this.anchorPointY)},Object.defineProperties(m.prototype,L),m}(Wn);lu.prototype.size=20;var uo=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.get=function(q){return new lu(this,q)},m}(Pi);U("CollisionBoxArray",uo);var uu=function(y){function m(){y.apply(this,arguments)}y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m;var L={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return L.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},L.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},L.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},L.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},L.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},L.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},L.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},L.segment.get=function(){return this._structArray.uint16[this._pos2+10]},L.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},L.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},L.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},L.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},L.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},L.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},L.placedOrientation.set=function(q){this._structArray.uint8[this._pos1+37]=q},L.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},L.hidden.set=function(q){this._structArray.uint8[this._pos1+38]=q},L.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},L.crossTileID.set=function(q){this._structArray.uint32[this._pos4+10]=q},L.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(m.prototype,L),m}(Wn);uu.prototype.size=48;var ps=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.get=function(q){return new uu(this,q)},m}(na);U("PlacedSymbolArray",ps);var Xl=function(y){function m(){y.apply(this,arguments)}y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m;var L={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return L.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},L.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},L.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},L.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},L.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},L.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},L.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},L.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},L.key.get=function(){return this._structArray.uint16[this._pos2+8]},L.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},L.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},L.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},L.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},L.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},L.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},L.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},L.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},L.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},L.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},L.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},L.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},L.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},L.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},L.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},L.crossTileID.set=function(q){this._structArray.uint32[this._pos4+12]=q},L.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},L.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},L.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},L.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(m.prototype,L),m}(Wn);Xl.prototype.size=68;var Yf=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.get=function(q){return new Xl(this,q)},m}(Ea);U("SymbolInstanceArray",Yf);var fc=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.getoffsetX=function(q){return this.float32[q*1+0]},m}(pi);U("GlyphOffsetArray",fc);var As=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.getx=function(q){return this.int16[q*3+0]},m.prototype.gety=function(q){return this.int16[q*3+1]},m.prototype.gettileUnitDistanceFromAnchor=function(q){return this.int16[q*3+2]},m}(Vi);U("SymbolLineVertexArray",As);var Zl=function(y){function m(){y.apply(this,arguments)}y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m;var L={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return L.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},L.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},L.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(m.prototype,L),m}(Wn);Zl.prototype.size=8;var fu=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.get=function(q){return new Zl(this,q)},m}(ha);U("FeatureIndexArray",fu);var ro=Bn([{name:"a_pos",components:2,type:"Int16"}],4),Eu=ro.members,Ja=function(m){m===void 0&&(m=[]),this.segments=m};Ja.prototype.prepareSegment=function(m,L,q,Y){var j=this.segments[this.segments.length-1];return m>Ja.MAX_VERTEX_ARRAY_LENGTH&&Z("Max vertices per segment is "+Ja.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+m),(!j||j.vertexLength+m>Ja.MAX_VERTEX_ARRAY_LENGTH||j.sortKey!==Y)&&(j={vertexOffset:L.length,primitiveOffset:q.length,vertexLength:0,primitiveLength:0},Y!==void 0&&(j.sortKey=Y),this.segments.push(j)),j},Ja.prototype.get=function(){return this.segments},Ja.prototype.destroy=function(){for(var m=0,L=this.segments;m<L.length;m+=1){var q=L[m];for(var Y in q.vaos)q.vaos[Y].destroy()}},Ja.simpleSegment=function(m,L,q,Y){return new Ja([{vertexOffset:m,primitiveOffset:L,vertexLength:q,primitiveLength:Y,vaos:{},sortKey:0}])},Ja.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,U("SegmentVector",Ja);function H(y,m){return y=p(Math.floor(y),0,255),m=p(Math.floor(m),0,255),256*y+m}var R=Bn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),G=a(function(y){function m(L,q){var Y,j,$,pe,ke,Fe,Ne,ct;for(Y=L.length&3,j=L.length-Y,$=q,ke=3432918353,Fe=461845907,ct=0;ct<j;)Ne=L.charCodeAt(ct)&255|(L.charCodeAt(++ct)&255)<<8|(L.charCodeAt(++ct)&255)<<16|(L.charCodeAt(++ct)&255)<<24,++ct,Ne=(Ne&65535)*ke+(((Ne>>>16)*ke&65535)<<16)&4294967295,Ne=Ne<<15|Ne>>>17,Ne=(Ne&65535)*Fe+(((Ne>>>16)*Fe&65535)<<16)&4294967295,$^=Ne,$=$<<13|$>>>19,pe=($&65535)*5+((($>>>16)*5&65535)<<16)&4294967295,$=(pe&65535)+27492+(((pe>>>16)+58964&65535)<<16);switch(Ne=0,Y){case 3:Ne^=(L.charCodeAt(ct+2)&255)<<16;case 2:Ne^=(L.charCodeAt(ct+1)&255)<<8;case 1:Ne^=L.charCodeAt(ct)&255,Ne=(Ne&65535)*ke+(((Ne>>>16)*ke&65535)<<16)&4294967295,Ne=Ne<<15|Ne>>>17,Ne=(Ne&65535)*Fe+(((Ne>>>16)*Fe&65535)<<16)&4294967295,$^=Ne}return $^=L.length,$^=$>>>16,$=($&65535)*2246822507+((($>>>16)*2246822507&65535)<<16)&4294967295,$^=$>>>13,$=($&65535)*3266489909+((($>>>16)*3266489909&65535)<<16)&4294967295,$^=$>>>16,$>>>0}y.exports=m}),I=a(function(y){function m(L,q){for(var Y=L.length,j=q^Y,$=0,pe;Y>=4;)pe=L.charCodeAt($)&255|(L.charCodeAt(++$)&255)<<8|(L.charCodeAt(++$)&255)<<16|(L.charCodeAt(++$)&255)<<24,pe=(pe&65535)*1540483477+(((pe>>>16)*1540483477&65535)<<16),pe^=pe>>>24,pe=(pe&65535)*1540483477+(((pe>>>16)*1540483477&65535)<<16),j=(j&65535)*1540483477+(((j>>>16)*1540483477&65535)<<16)^pe,Y-=4,++$;switch(Y){case 3:j^=(L.charCodeAt($+2)&255)<<16;case 2:j^=(L.charCodeAt($+1)&255)<<8;case 1:j^=L.charCodeAt($)&255,j=(j&65535)*1540483477+(((j>>>16)*1540483477&65535)<<16)}return j^=j>>>13,j=(j&65535)*1540483477+(((j>>>16)*1540483477&65535)<<16),j^=j>>>15,j>>>0}y.exports=m}),W=G,te=G,ee=I;W.murmur3=te,W.murmur2=ee;var he=function(){this.ids=[],this.positions=[],this.indexed=!1};he.prototype.add=function(m,L,q,Y){this.ids.push(ze(m)),this.positions.push(L,q,Y)},he.prototype.getPositions=function(m){for(var L=ze(m),q=0,Y=this.ids.length-1;q<Y;){var j=q+Y>>1;this.ids[j]>=L?Y=j:q=j+1}for(var $=[];this.ids[q]===L;){var pe=this.positions[3*q],ke=this.positions[3*q+1],Fe=this.positions[3*q+2];$.push({index:pe,start:ke,end:Fe}),q++}return $},he.serialize=function(m,L){var q=new Float64Array(m.ids),Y=new Uint32Array(m.positions);return pt(q,Y,0,q.length-1),L&&L.push(q.buffer,Y.buffer),{ids:q,positions:Y}},he.deserialize=function(m){var L=new he;return L.ids=m.ids,L.positions=m.positions,L.indexed=!0,L};var Se=Math.pow(2,53)-1;function ze(y){var m=+y;return!isNaN(m)&&m<=Se?m:W(String(y))}function pt(y,m,L,q){for(;L<q;){for(var Y=y[L+q>>1],j=L-1,$=q+1;;){do j++;while(y[j]<Y);do $--;while(y[$]>Y);if(j>=$)break;wt(y,j,$),wt(m,3*j,3*$),wt(m,3*j+1,3*$+1),wt(m,3*j+2,3*$+2)}$-L<q-$?(pt(y,m,L,$),L=$+1):(pt(y,m,$+1,q),q=$)}}function wt(y,m,L){var q=y[m];y[m]=y[L],y[L]=q}U("FeaturePositionMap",he);var gt=function(m,L){this.gl=m.gl,this.location=L},Oe=function(y){function m(L,q){y.call(this,L,q),this.current=0}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.set=function(q){this.current!==q&&(this.current=q,this.gl.uniform1i(this.location,q))},m}(gt),$e=function(y){function m(L,q){y.call(this,L,q),this.current=0}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.set=function(q){this.current!==q&&(this.current=q,this.gl.uniform1f(this.location,q))},m}(gt),st=function(y){function m(L,q){y.call(this,L,q),this.current=[0,0]}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.set=function(q){(q[0]!==this.current[0]||q[1]!==this.current[1])&&(this.current=q,this.gl.uniform2f(this.location,q[0],q[1]))},m}(gt),Tt=function(y){function m(L,q){y.call(this,L,q),this.current=[0,0,0]}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.set=function(q){(q[0]!==this.current[0]||q[1]!==this.current[1]||q[2]!==this.current[2])&&(this.current=q,this.gl.uniform3f(this.location,q[0],q[1],q[2]))},m}(gt),Rt=function(y){function m(L,q){y.call(this,L,q),this.current=[0,0,0,0]}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.set=function(q){(q[0]!==this.current[0]||q[1]!==this.current[1]||q[2]!==this.current[2]||q[3]!==this.current[3])&&(this.current=q,this.gl.uniform4f(this.location,q[0],q[1],q[2],q[3]))},m}(gt),Dt=function(y){function m(L,q){y.call(this,L,q),this.current=lo.transparent}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.set=function(q){(q.r!==this.current.r||q.g!==this.current.g||q.b!==this.current.b||q.a!==this.current.a)&&(this.current=q,this.gl.uniform4f(this.location,q.r,q.g,q.b,q.a))},m}(gt),Xt=new Float32Array(16),Vt=function(y){function m(L,q){y.call(this,L,q),this.current=Xt}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.set=function(q){if(q[12]!==this.current[12]||q[0]!==this.current[0]){this.current=q,this.gl.uniformMatrix4fv(this.location,!1,q);return}for(var Y=1;Y<16;Y++)if(q[Y]!==this.current[Y]){this.current=q,this.gl.uniformMatrix4fv(this.location,!1,q);break}},m}(gt);function Ft(y){return[H(255*y.r,255*y.g),H(255*y.b,255*y.a)]}var Zt=function(m,L,q){this.value=m,this.uniformNames=L.map(function(Y){return"u_"+Y}),this.type=q};Zt.prototype.setUniform=function(m,L,q){m.set(q.constantOr(this.value))},Zt.prototype.getBinding=function(m,L,q){return this.type==="color"?new Dt(m,L):new $e(m,L)};var Pt=function(m,L){this.uniformNames=L.map(function(q){return"u_"+q}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Pt.prototype.setConstantPatternPositions=function(m,L){this.pixelRatioFrom=L.pixelRatio,this.pixelRatioTo=m.pixelRatio,this.patternFrom=L.tlbr,this.patternTo=m.tlbr},Pt.prototype.setUniform=function(m,L,q,Y){var j=Y==="u_pattern_to"?this.patternTo:Y==="u_pattern_from"?this.patternFrom:Y==="u_pixel_ratio_to"?this.pixelRatioTo:Y==="u_pixel_ratio_from"?this.pixelRatioFrom:null;j&&m.set(j)},Pt.prototype.getBinding=function(m,L,q){return q.substr(0,9)==="u_pattern"?new Rt(m,L):new $e(m,L)};var sr=function(m,L,q,Y){this.expression=m,this.type=q,this.maxValue=0,this.paintVertexAttributes=L.map(function(j){return{name:"a_"+j,type:"Float32",components:q==="color"?2:1,offset:0}}),this.paintVertexArray=new Y};sr.prototype.populatePaintArray=function(m,L,q,Y,j){var $=this.paintVertexArray.length,pe=this.expression.evaluate(new Sn(0),L,{},Y,[],j);this.paintVertexArray.resize(m),this._setPaintValue($,m,pe)},sr.prototype.updatePaintArray=function(m,L,q,Y){var j=this.expression.evaluate({zoom:0},q,Y);this._setPaintValue(m,L,j)},sr.prototype._setPaintValue=function(m,L,q){if(this.type==="color")for(var Y=Ft(q),j=m;j<L;j++)this.paintVertexArray.emplace(j,Y[0],Y[1]);else{for(var $=m;$<L;$++)this.paintVertexArray.emplace($,q);this.maxValue=Math.max(this.maxValue,Math.abs(q))}},sr.prototype.upload=function(m){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=m.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},sr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var xr=function(m,L,q,Y,j,$){this.expression=m,this.uniformNames=L.map(function(pe){return"u_"+pe+"_t"}),this.type=q,this.useIntegerZoom=Y,this.zoom=j,this.maxValue=0,this.paintVertexAttributes=L.map(function(pe){return{name:"a_"+pe,type:"Float32",components:q==="color"?4:2,offset:0}}),this.paintVertexArray=new $};xr.prototype.populatePaintArray=function(m,L,q,Y,j){var $=this.expression.evaluate(new Sn(this.zoom),L,{},Y,[],j),pe=this.expression.evaluate(new Sn(this.zoom+1),L,{},Y,[],j),ke=this.paintVertexArray.length;this.paintVertexArray.resize(m),this._setPaintValue(ke,m,$,pe)},xr.prototype.updatePaintArray=function(m,L,q,Y){var j=this.expression.evaluate({zoom:this.zoom},q,Y),$=this.expression.evaluate({zoom:this.zoom+1},q,Y);this._setPaintValue(m,L,j,$)},xr.prototype._setPaintValue=function(m,L,q,Y){if(this.type==="color")for(var j=Ft(q),$=Ft(Y),pe=m;pe<L;pe++)this.paintVertexArray.emplace(pe,j[0],j[1],$[0],$[1]);else{for(var ke=m;ke<L;ke++)this.paintVertexArray.emplace(ke,q,Y);this.maxValue=Math.max(this.maxValue,Math.abs(q),Math.abs(Y))}},xr.prototype.upload=function(m){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=m.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},xr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},xr.prototype.setUniform=function(m,L){var q=this.useIntegerZoom?Math.floor(L.zoom):L.zoom,Y=p(this.expression.interpolationFactor(q,this.zoom,this.zoom+1),0,1);m.set(Y)},xr.prototype.getBinding=function(m,L,q){return new $e(m,L)};var Dr=function(m,L,q,Y,j,$){this.expression=m,this.type=L,this.useIntegerZoom=q,this.zoom=Y,this.layerId=$,this.zoomInPaintVertexArray=new j,this.zoomOutPaintVertexArray=new j};Dr.prototype.populatePaintArray=function(m,L,q){var Y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(m),this.zoomOutPaintVertexArray.resize(m),this._setPaintValues(Y,m,L.patterns&&L.patterns[this.layerId],q)},Dr.prototype.updatePaintArray=function(m,L,q,Y,j){this._setPaintValues(m,L,q.patterns&&q.patterns[this.layerId],j)},Dr.prototype._setPaintValues=function(m,L,q,Y){if(!(!Y||!q)){var j=q.min,$=q.mid,pe=q.max,ke=Y[j],Fe=Y[$],Ne=Y[pe];if(!(!ke||!Fe||!Ne))for(var ct=m;ct<L;ct++)this.zoomInPaintVertexArray.emplace(ct,Fe.tl[0],Fe.tl[1],Fe.br[0],Fe.br[1],ke.tl[0],ke.tl[1],ke.br[0],ke.br[1],Fe.pixelRatio,ke.pixelRatio),this.zoomOutPaintVertexArray.emplace(ct,Fe.tl[0],Fe.tl[1],Fe.br[0],Fe.br[1],Ne.tl[0],Ne.tl[1],Ne.br[0],Ne.br[1],Fe.pixelRatio,Ne.pixelRatio)}},Dr.prototype.upload=function(m){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=m.createVertexBuffer(this.zoomInPaintVertexArray,R.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=m.createVertexBuffer(this.zoomOutPaintVertexArray,R.members,this.expression.isStateDependent))},Dr.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var un=function(m,L,q){this.binders={},this._buffers=[];var Y=[];for(var j in m.paint._values)if(q(j)){var $=m.paint.get(j);if(!(!($ instanceof ls)||!Zo($.property.specification))){var pe=pn(j,m.type),ke=$.value,Fe=$.property.specification.type,Ne=$.property.useIntegerZoom,ct=$.property.specification["property-type"],kt=ct==="cross-faded"||ct==="cross-faded-data-driven";if(ke.kind==="constant")this.binders[j]=kt?new Pt(ke.value,pe):new Zt(ke.value,pe,Fe),Y.push("/u_"+j);else if(ke.kind==="source"||kt){var bt=Nn(j,Fe,"source");this.binders[j]=kt?new Dr(ke,Fe,Ne,L,bt,m.id):new sr(ke,pe,Fe,bt),Y.push("/a_"+j)}else{var Yt=Nn(j,Fe,"composite");this.binders[j]=new xr(ke,pe,Fe,Ne,L,Yt),Y.push("/z_"+j)}}}this.cacheKey=Y.sort().join("")};un.prototype.getMaxValue=function(m){var L=this.binders[m];return L instanceof sr||L instanceof xr?L.maxValue:0},un.prototype.populatePaintArrays=function(m,L,q,Y,j){for(var $ in this.binders){var pe=this.binders[$];(pe instanceof sr||pe instanceof xr||pe instanceof Dr)&&pe.populatePaintArray(m,L,q,Y,j)}},un.prototype.setConstantPatternPositions=function(m,L){for(var q in this.binders){var Y=this.binders[q];Y instanceof Pt&&Y.setConstantPatternPositions(m,L)}},un.prototype.updatePaintArrays=function(m,L,q,Y,j){var $=!1;for(var pe in m)for(var ke=L.getPositions(pe),Fe=0,Ne=ke;Fe<Ne.length;Fe+=1){var ct=Ne[Fe],kt=q.feature(ct.index);for(var bt in this.binders){var Yt=this.binders[bt];if((Yt instanceof sr||Yt instanceof xr||Yt instanceof Dr)&&Yt.expression.isStateDependent===!0){var hr=Y.paint.get(bt);Yt.expression=hr.value,Yt.updatePaintArray(ct.start,ct.end,kt,m[pe],j),$=!0}}}return $},un.prototype.defines=function(){var m=[];for(var L in this.binders){var q=this.binders[L];(q instanceof Zt||q instanceof Pt)&&m.push.apply(m,q.uniformNames.map(function(Y){return"#define HAS_UNIFORM_"+Y}))}return m},un.prototype.getBinderAttributes=function(){var m=[];for(var L in this.binders){var q=this.binders[L];if(q instanceof sr||q instanceof xr)for(var Y=0;Y<q.paintVertexAttributes.length;Y++)m.push(q.paintVertexAttributes[Y].name);else if(q instanceof Dr)for(var j=0;j<R.members.length;j++)m.push(R.members[j].name)}return m},un.prototype.getBinderUniforms=function(){var m=[];for(var L in this.binders){var q=this.binders[L];if(q instanceof Zt||q instanceof Pt||q instanceof xr)for(var Y=0,j=q.uniformNames;Y<j.length;Y+=1){var $=j[Y];m.push($)}}return m},un.prototype.getPaintVertexBuffers=function(){return this._buffers},un.prototype.getUniforms=function(m,L){var q=[];for(var Y in this.binders){var j=this.binders[Y];if(j instanceof Zt||j instanceof Pt||j instanceof xr)for(var $=0,pe=j.uniformNames;$<pe.length;$+=1){var ke=pe[$];if(L[ke]){var Fe=j.getBinding(m,L[ke],ke);q.push({name:ke,property:Y,binding:Fe})}}}return q},un.prototype.setUniforms=function(m,L,q,Y){for(var j=0,$=L;j<$.length;j+=1){var pe=$[j],ke=pe.name,Fe=pe.property,Ne=pe.binding;this.binders[Fe].setUniform(Ne,Y,q.get(Fe),ke)}},un.prototype.updatePaintBuffers=function(m){this._buffers=[];for(var L in this.binders){var q=this.binders[L];if(m&&q instanceof Dr){var Y=m.fromScale===2?q.zoomInPaintVertexBuffer:q.zoomOutPaintVertexBuffer;Y&&this._buffers.push(Y)}else(q instanceof sr||q instanceof xr)&&q.paintVertexBuffer&&this._buffers.push(q.paintVertexBuffer)}},un.prototype.upload=function(m){for(var L in this.binders){var q=this.binders[L];(q instanceof sr||q instanceof xr||q instanceof Dr)&&q.upload(m)}this.updatePaintBuffers()},un.prototype.destroy=function(){for(var m in this.binders){var L=this.binders[m];(L instanceof sr||L instanceof xr||L instanceof Dr)&&L.destroy()}};var Xr=function(m,L,q){q===void 0&&(q=function(){return!0}),this.programConfigurations={};for(var Y=0,j=m;Y<j.length;Y+=1){var $=j[Y];this.programConfigurations[$.id]=new un($,L,q)}this.needsUpload=!1,this._featureMap=new he,this._bufferOffset=0};Xr.prototype.populatePaintArrays=function(m,L,q,Y,j,$){for(var pe in this.programConfigurations)this.programConfigurations[pe].populatePaintArrays(m,L,Y,j,$);L.id!==void 0&&this._featureMap.add(L.id,q,this._bufferOffset,m),this._bufferOffset=m,this.needsUpload=!0},Xr.prototype.updatePaintArrays=function(m,L,q,Y){for(var j=0,$=q;j<$.length;j+=1){var pe=$[j];this.needsUpload=this.programConfigurations[pe.id].updatePaintArrays(m,this._featureMap,L,pe,Y)||this.needsUpload}},Xr.prototype.get=function(m){return this.programConfigurations[m]},Xr.prototype.upload=function(m){if(this.needsUpload){for(var L in this.programConfigurations)this.programConfigurations[L].upload(m);this.needsUpload=!1}},Xr.prototype.destroy=function(){for(var m in this.programConfigurations)this.programConfigurations[m].destroy()};function pn(y,m){var L={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return L[y]||[y.replace(m+"-","").replace(/-/g,"_")]}function ai(y){var m={"line-pattern":{source:ri,composite:ri},"fill-pattern":{source:ri,composite:ri},"fill-extrusion-pattern":{source:ri,composite:ri}};return m[y]}function Nn(y,m,L){var q={color:{source:mi,composite:Ls},number:{source:pi,composite:mi}},Y=ai(y);return Y&&Y[L]||q[m][L]}U("ConstantBinder",Zt),U("CrossFadedConstantBinder",Pt),U("SourceExpressionBinder",sr),U("CrossFadedCompositeBinder",Dr),U("CompositeExpressionBinder",xr),U("ProgramConfiguration",un,{omit:["_buffers"]}),U("ProgramConfigurationSet",Xr);var fn=8192,Ln=15,Mn=Math.pow(2,Ln-1)-1,Kn=-Mn-1;function xi(y){for(var m=fn/y.extent,L=y.loadGeometry(),q=0;q<L.length;q++)for(var Y=L[q],j=0;j<Y.length;j++){var $=Y[j],pe=Math.round($.x*m),ke=Math.round($.y*m);$.x=p(pe,Kn,Mn),$.y=p(ke,Kn,Mn),(pe<$.x||pe>$.x+1||ke<$.y||ke>$.y+1)&&Z("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return L}function Da(y,m){return{type:y.type,id:y.id,properties:y.properties,geometry:m?xi(y):[]}}function Pa(y,m,L,q,Y){y.emplaceBack(m*2+(q+1)/2,L*2+(Y+1)/2)}var _o=function(m){this.zoom=m.zoom,this.overscaling=m.overscaling,this.layers=m.layers,this.layerIds=this.layers.map(function(L){return L.id}),this.index=m.index,this.hasPattern=!1,this.layoutVertexArray=new cn,this.indexArray=new Si,this.segments=new Ja,this.programConfigurations=new Xr(m.layers,m.zoom),this.stateDependentLayerIds=this.layers.filter(function(L){return L.isStateDependent()}).map(function(L){return L.id})};_o.prototype.populate=function(m,L,q){var Y=this.layers[0],j=[],$=null;Y.type==="circle"&&($=Y.layout.get("circle-sort-key"));for(var pe=0,ke=m;pe<ke.length;pe+=1){var Fe=ke[pe],Ne=Fe.feature,ct=Fe.id,kt=Fe.index,bt=Fe.sourceLayerIndex,Yt=this.layers[0]._featureFilter.needGeometry,hr=Da(Ne,Yt);if(this.layers[0]._featureFilter.filter(new Sn(this.zoom),hr,q)){var Ir=$?$.evaluate(hr,{},q):void 0,Ar={id:ct,properties:Ne.properties,type:Ne.type,sourceLayerIndex:bt,index:kt,geometry:Yt?hr.geometry:xi(Ne),patterns:{},sortKey:Ir};j.push(Ar)}}$&&j.sort(function(Ti,Ri){return Ti.sortKey-Ri.sortKey});for(var en=0,Ur=j;en<Ur.length;en+=1){var Qr=Ur[en],on=Qr,Pn=on.geometry,oi=on.index,ti=on.sourceLayerIndex,Bi=m[oi].feature;this.addFeature(Qr,Pn,oi,q),L.featureIndex.insert(Bi,Pn,oi,ti,this.index)}},_o.prototype.update=function(m,L,q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(m,L,this.stateDependentLayers,q)},_o.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},_o.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},_o.prototype.upload=function(m){this.uploaded||(this.layoutVertexBuffer=m.createVertexBuffer(this.layoutVertexArray,Eu),this.indexBuffer=m.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(m),this.uploaded=!0},_o.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},_o.prototype.addFeature=function(m,L,q,Y){for(var j=0,$=L;j<$.length;j+=1)for(var pe=$[j],ke=0,Fe=pe;ke<Fe.length;ke+=1){var Ne=Fe[ke],ct=Ne.x,kt=Ne.y;if(!(ct<0||ct>=fn||kt<0||kt>=fn)){var bt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,m.sortKey),Yt=bt.vertexLength;Pa(this.layoutVertexArray,ct,kt,-1,-1),Pa(this.layoutVertexArray,ct,kt,1,-1),Pa(this.layoutVertexArray,ct,kt,1,1),Pa(this.layoutVertexArray,ct,kt,-1,1),this.indexArray.emplaceBack(Yt,Yt+1,Yt+2),this.indexArray.emplaceBack(Yt,Yt+3,Yt+2),bt.vertexLength+=4,bt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,m,q,{},Y)},U("CircleBucket",_o,{omit:["layers"]});function ua(y,m){for(var L=0;L<y.length;L++)if(nh(m,y[L]))return!0;for(var q=0;q<m.length;q++)if(nh(y,m[q]))return!0;return!!Xv(y,m)}function Qa(y,m,L){return!!(nh(y,m)||Xd(m,y,L))}function Vo(y,m){if(y.length===1)return Zd(m,y[0]);for(var L=0;L<m.length;L++)for(var q=m[L],Y=0;Y<q.length;Y++)if(nh(y,q[Y]))return!0;for(var j=0;j<y.length;j++)if(Zd(m,y[j]))return!0;for(var $=0;$<m.length;$++)if(Xv(y,m[$]))return!0;return!1}function ml(y,m,L){for(var q=0;q<m.length;q++){var Y=m[q];if(y.length>=3){for(var j=0;j<Y.length;j++)if(nh(y,Y[j]))return!0}if(Wv(y,Y,L))return!0}return!1}function Wv(y,m,L){if(y.length>1){if(Xv(y,m))return!0;for(var q=0;q<m.length;q++)if(Xd(m[q],y,L))return!0}for(var Y=0;Y<y.length;Y++)if(Xd(y[Y],m,L))return!0;return!1}function Xv(y,m){if(y.length===0||m.length===0)return!1;for(var L=0;L<y.length-1;L++)for(var q=y[L],Y=y[L+1],j=0;j<m.length-1;j++){var $=m[j],pe=m[j+1];if(Td(q,Y,$,pe))return!0}return!1}function Td(y,m,L,q){return J(y,L,q)!==J(m,L,q)&&J(y,m,L)!==J(y,m,q)}function Xd(y,m,L){var q=L*L;if(m.length===1)return y.distSqr(m[0])<q;for(var Y=1;Y<m.length;Y++){var j=m[Y-1],$=m[Y];if(Mg(y,j,$)<q)return!0}return!1}function Mg(y,m,L){var q=m.distSqr(L);if(q===0)return y.distSqr(m);var Y=((y.x-m.x)*(L.x-m.x)+(y.y-m.y)*(L.y-m.y))/q;return Y<0?y.distSqr(m):Y>1?y.distSqr(L):y.distSqr(L.sub(m)._mult(Y)._add(m))}function Zd(y,m){for(var L=!1,q,Y,j,$=0;$<y.length;$++){q=y[$];for(var pe=0,ke=q.length-1;pe<q.length;ke=pe++)Y=q[pe],j=q[ke],Y.y>m.y!=j.y>m.y&&m.x<(j.x-Y.x)*(m.y-Y.y)/(j.y-Y.y)+Y.x&&(L=!L)}return L}function nh(y,m){for(var L=!1,q=0,Y=y.length-1;q<y.length;Y=q++){var j=y[q],$=y[Y];j.y>m.y!=$.y>m.y&&m.x<($.x-j.x)*(m.y-j.y)/($.y-j.y)+j.x&&(L=!L)}return L}function jd(y,m,L,q,Y){for(var j=0,$=y;j<$.length;j+=1){var pe=$[j];if(m<=pe.x&&L<=pe.y&&q>=pe.x&&Y>=pe.y)return!0}var ke=[new u(m,L),new u(m,Y),new u(q,Y),new u(q,L)];if(y.length>2)for(var Fe=0,Ne=ke;Fe<Ne.length;Fe+=1){var ct=Ne[Fe];if(nh(y,ct))return!0}for(var kt=0;kt<y.length-1;kt++){var bt=y[kt],Yt=y[kt+1];if(zh(bt,Yt,ke))return!0}return!1}function zh(y,m,L){var q=L[0],Y=L[2];if(y.x<q.x&&m.x<q.x||y.x>Y.x&&m.x>Y.x||y.y<q.y&&m.y<q.y||y.y>Y.y&&m.y>Y.y)return!1;var j=J(y,m,L[0]);return j!==J(y,m,L[1])||j!==J(y,m,L[2])||j!==J(y,m,L[3])}function ih(y,m,L){var q=m.paint.get(y).value;return q.kind==="constant"?q.value:L.programConfigurations.get(m.id).getMaxValue(y)}function Ad(y){return Math.sqrt(y[0]*y[0]+y[1]*y[1])}function Xp(y,m,L,q,Y){if(!m[0]&&!m[1])return y;var j=u.convert(m)._mult(Y);L==="viewport"&&j._rotate(-q);for(var $=[],pe=0;pe<y.length;pe++){var ke=y[pe];$.push(ke.sub(j))}return $}var Md=new jr({"circle-sort-key":new Gt(vn.layout_circle["circle-sort-key"])}),bb=new jr({"circle-radius":new Gt(vn.paint_circle["circle-radius"]),"circle-color":new Gt(vn.paint_circle["circle-color"]),"circle-blur":new Gt(vn.paint_circle["circle-blur"]),"circle-opacity":new Gt(vn.paint_circle["circle-opacity"]),"circle-translate":new Ye(vn.paint_circle["circle-translate"]),"circle-translate-anchor":new Ye(vn.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ye(vn.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ye(vn.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Gt(vn.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Gt(vn.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Gt(vn.paint_circle["circle-stroke-opacity"])}),Fy={paint:bb,layout:Md},mf=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var y=arguments,m=0,L=arguments.length;L--;)m+=y[L]*y[L];return Math.sqrt(m)});function wb(){var y=new mf(4);return mf!=Float32Array&&(y[1]=0,y[2]=0),y[0]=1,y[3]=1,y}function G1(y,m,L){var q=m[0],Y=m[1],j=m[2],$=m[3],pe=Math.sin(L),ke=Math.cos(L);return y[0]=q*ke+j*pe,y[1]=Y*ke+$*pe,y[2]=q*-pe+j*ke,y[3]=Y*-pe+$*ke,y}function Dc(){var y=new mf(9);return mf!=Float32Array&&(y[1]=0,y[2]=0,y[3]=0,y[5]=0,y[6]=0,y[7]=0),y[0]=1,y[4]=1,y[8]=1,y}function qy(y,m){var L=Math.sin(m),q=Math.cos(m);return y[0]=q,y[1]=L,y[2]=0,y[3]=-L,y[4]=q,y[5]=0,y[6]=0,y[7]=0,y[8]=1,y}function Tb(){var y=new mf(16);return mf!=Float32Array&&(y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[11]=0,y[12]=0,y[13]=0,y[14]=0),y[0]=1,y[5]=1,y[10]=1,y[15]=1,y}function Ab(y){var m=new mf(16);return m[0]=y[0],m[1]=y[1],m[2]=y[2],m[3]=y[3],m[4]=y[4],m[5]=y[5],m[6]=y[6],m[7]=y[7],m[8]=y[8],m[9]=y[9],m[10]=y[10],m[11]=y[11],m[12]=y[12],m[13]=y[13],m[14]=y[14],m[15]=y[15],m}function Mb(y){return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=1,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}function zy(y,m){var L=m[0],q=m[1],Y=m[2],j=m[3],$=m[4],pe=m[5],ke=m[6],Fe=m[7],Ne=m[8],ct=m[9],kt=m[10],bt=m[11],Yt=m[12],hr=m[13],Ir=m[14],Ar=m[15],en=L*pe-q*$,Ur=L*ke-Y*$,Qr=L*Fe-j*$,on=q*ke-Y*pe,Pn=q*Fe-j*pe,oi=Y*Fe-j*ke,ti=Ne*hr-ct*Yt,Bi=Ne*Ir-kt*Yt,Ti=Ne*Ar-bt*Yt,Ri=ct*Ir-kt*hr,wa=ct*Ar-bt*hr,Ni=kt*Ar-bt*Ir,Yi=en*Ni-Ur*wa+Qr*Ri+on*Ti-Pn*Bi+oi*ti;return Yi?(Yi=1/Yi,y[0]=(pe*Ni-ke*wa+Fe*Ri)*Yi,y[1]=(Y*wa-q*Ni-j*Ri)*Yi,y[2]=(hr*oi-Ir*Pn+Ar*on)*Yi,y[3]=(kt*Pn-ct*oi-bt*on)*Yi,y[4]=(ke*Ti-$*Ni-Fe*Bi)*Yi,y[5]=(L*Ni-Y*Ti+j*Bi)*Yi,y[6]=(Ir*Qr-Yt*oi-Ar*Ur)*Yi,y[7]=(Ne*oi-kt*Qr+bt*Ur)*Yi,y[8]=($*wa-pe*Ti+Fe*ti)*Yi,y[9]=(q*Ti-L*wa-j*ti)*Yi,y[10]=(Yt*Pn-hr*Qr+Ar*en)*Yi,y[11]=(ct*Qr-Ne*Pn-bt*en)*Yi,y[12]=(pe*Bi-$*Ri-ke*ti)*Yi,y[13]=(L*Ri-q*Bi+Y*ti)*Yi,y[14]=(hr*Ur-Yt*on-Ir*en)*Yi,y[15]=(Ne*on-ct*Ur+kt*en)*Yi,y):null}function Oy(y,m,L){var q=m[0],Y=m[1],j=m[2],$=m[3],pe=m[4],ke=m[5],Fe=m[6],Ne=m[7],ct=m[8],kt=m[9],bt=m[10],Yt=m[11],hr=m[12],Ir=m[13],Ar=m[14],en=m[15],Ur=L[0],Qr=L[1],on=L[2],Pn=L[3];return y[0]=Ur*q+Qr*pe+on*ct+Pn*hr,y[1]=Ur*Y+Qr*ke+on*kt+Pn*Ir,y[2]=Ur*j+Qr*Fe+on*bt+Pn*Ar,y[3]=Ur*$+Qr*Ne+on*Yt+Pn*en,Ur=L[4],Qr=L[5],on=L[6],Pn=L[7],y[4]=Ur*q+Qr*pe+on*ct+Pn*hr,y[5]=Ur*Y+Qr*ke+on*kt+Pn*Ir,y[6]=Ur*j+Qr*Fe+on*bt+Pn*Ar,y[7]=Ur*$+Qr*Ne+on*Yt+Pn*en,Ur=L[8],Qr=L[9],on=L[10],Pn=L[11],y[8]=Ur*q+Qr*pe+on*ct+Pn*hr,y[9]=Ur*Y+Qr*ke+on*kt+Pn*Ir,y[10]=Ur*j+Qr*Fe+on*bt+Pn*Ar,y[11]=Ur*$+Qr*Ne+on*Yt+Pn*en,Ur=L[12],Qr=L[13],on=L[14],Pn=L[15],y[12]=Ur*q+Qr*pe+on*ct+Pn*hr,y[13]=Ur*Y+Qr*ke+on*kt+Pn*Ir,y[14]=Ur*j+Qr*Fe+on*bt+Pn*Ar,y[15]=Ur*$+Qr*Ne+on*Yt+Pn*en,y}function jl(y,m,L){var q=L[0],Y=L[1],j=L[2],$,pe,ke,Fe,Ne,ct,kt,bt,Yt,hr,Ir,Ar;return m===y?(y[12]=m[0]*q+m[4]*Y+m[8]*j+m[12],y[13]=m[1]*q+m[5]*Y+m[9]*j+m[13],y[14]=m[2]*q+m[6]*Y+m[10]*j+m[14],y[15]=m[3]*q+m[7]*Y+m[11]*j+m[15]):($=m[0],pe=m[1],ke=m[2],Fe=m[3],Ne=m[4],ct=m[5],kt=m[6],bt=m[7],Yt=m[8],hr=m[9],Ir=m[10],Ar=m[11],y[0]=$,y[1]=pe,y[2]=ke,y[3]=Fe,y[4]=Ne,y[5]=ct,y[6]=kt,y[7]=bt,y[8]=Yt,y[9]=hr,y[10]=Ir,y[11]=Ar,y[12]=$*q+Ne*Y+Yt*j+m[12],y[13]=pe*q+ct*Y+hr*j+m[13],y[14]=ke*q+kt*Y+Ir*j+m[14],y[15]=Fe*q+bt*Y+Ar*j+m[15]),y}function Oh(y,m,L){var q=L[0],Y=L[1],j=L[2];return y[0]=m[0]*q,y[1]=m[1]*q,y[2]=m[2]*q,y[3]=m[3]*q,y[4]=m[4]*Y,y[5]=m[5]*Y,y[6]=m[6]*Y,y[7]=m[7]*Y,y[8]=m[8]*j,y[9]=m[9]*j,y[10]=m[10]*j,y[11]=m[11]*j,y[12]=m[12],y[13]=m[13],y[14]=m[14],y[15]=m[15],y}function Bh(y,m,L){var q=Math.sin(L),Y=Math.cos(L),j=m[4],$=m[5],pe=m[6],ke=m[7],Fe=m[8],Ne=m[9],ct=m[10],kt=m[11];return m!==y&&(y[0]=m[0],y[1]=m[1],y[2]=m[2],y[3]=m[3],y[12]=m[12],y[13]=m[13],y[14]=m[14],y[15]=m[15]),y[4]=j*Y+Fe*q,y[5]=$*Y+Ne*q,y[6]=pe*Y+ct*q,y[7]=ke*Y+kt*q,y[8]=Fe*Y-j*q,y[9]=Ne*Y-$*q,y[10]=ct*Y-pe*q,y[11]=kt*Y-ke*q,y}function Sb(y,m,L){var q=Math.sin(L),Y=Math.cos(L),j=m[0],$=m[1],pe=m[2],ke=m[3],Fe=m[4],Ne=m[5],ct=m[6],kt=m[7];return m!==y&&(y[8]=m[8],y[9]=m[9],y[10]=m[10],y[11]=m[11],y[12]=m[12],y[13]=m[13],y[14]=m[14],y[15]=m[15]),y[0]=j*Y+Fe*q,y[1]=$*Y+Ne*q,y[2]=pe*Y+ct*q,y[3]=ke*Y+kt*q,y[4]=Fe*Y-j*q,y[5]=Ne*Y-$*q,y[6]=ct*Y-pe*q,y[7]=kt*Y-ke*q,y}function UT(y,m,L,q,Y){var j=1/Math.tan(m/2),$;return y[0]=j/L,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=j,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[11]=-1,y[12]=0,y[13]=0,y[15]=0,Y!=null&&Y!==1/0?($=1/(q-Y),y[10]=(Y+q)*$,y[14]=2*Y*q*$):(y[10]=-1,y[14]=-2*q),y}function k8(y,m,L,q,Y,j,$){var pe=1/(m-L),ke=1/(q-Y),Fe=1/(j-$);return y[0]=-2*pe,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=-2*ke,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=2*Fe,y[11]=0,y[12]=(m+L)*pe,y[13]=(Y+q)*ke,y[14]=($+j)*Fe,y[15]=1,y}var C8=Oy;function Y1(){var y=new mf(3);return mf!=Float32Array&&(y[0]=0,y[1]=0,y[2]=0),y}function L8(y){var m=new mf(3);return m[0]=y[0],m[1]=y[1],m[2]=y[2],m}function Eb(y,m,L){return y[0]=m[0]+L[0],y[1]=m[1]+L[1],y[2]=m[2]+L[2],y}function P8(y,m,L){return y[0]=m[0]-L[0],y[1]=m[1]-L[1],y[2]=m[2]-L[2],y}function R8(y,m,L){return y[0]=m[0]*L,y[1]=m[1]*L,y[2]=m[2]*L,y}function VT(y,m){var L=m[0],q=m[1],Y=m[2],j=L*L+q*q+Y*Y;return j>0&&(j=1/Math.sqrt(j)),y[0]=m[0]*j,y[1]=m[1]*j,y[2]=m[2]*j,y}function Fje(y,m){return y[0]*m[0]+y[1]*m[1]+y[2]*m[2]}function qje(y,m,L){var q=m[0],Y=m[1],j=m[2],$=L[0],pe=L[1],ke=L[2];return y[0]=Y*ke-j*pe,y[1]=j*$-q*ke,y[2]=q*pe-Y*$,y}function zje(y,m,L){var q=m[0],Y=m[1],j=m[2];return y[0]=q*L[0]+Y*L[3]+j*L[6],y[1]=q*L[1]+Y*L[4]+j*L[7],y[2]=q*L[2]+Y*L[5]+j*L[8],y}var Oje=P8,MQt=function(){var y=Y1();return function(m,L,q,Y,j,$){var pe,ke;for(L||(L=3),q||(q=0),Y?ke=Math.min(Y*L+q,m.length):ke=m.length,pe=q;pe<ke;pe+=L)y[0]=m[pe],y[1]=m[pe+1],y[2]=m[pe+2],j(y,y,$),m[pe]=y[0],m[pe+1]=y[1],m[pe+2]=y[2];return m}}();function Bje(){var y=new mf(4);return mf!=Float32Array&&(y[0]=0,y[1]=0,y[2]=0,y[3]=0),y}function Nje(y,m,L){return y[0]=m[0]*L,y[1]=m[1]*L,y[2]=m[2]*L,y[3]=m[3]*L,y}function Uje(y,m){return y[0]*m[0]+y[1]*m[1]+y[2]*m[2]+y[3]*m[3]}function Q5(y,m,L){var q=m[0],Y=m[1],j=m[2],$=m[3];return y[0]=L[0]*q+L[4]*Y+L[8]*j+L[12]*$,y[1]=L[1]*q+L[5]*Y+L[9]*j+L[13]*$,y[2]=L[2]*q+L[6]*Y+L[10]*j+L[14]*$,y[3]=L[3]*q+L[7]*Y+L[11]*j+L[15]*$,y}var SQt=function(){var y=Bje();return function(m,L,q,Y,j,$){var pe,ke;for(L||(L=4),q||(q=0),Y?ke=Math.min(Y*L+q,m.length):ke=m.length,pe=q;pe<ke;pe+=L)y[0]=m[pe],y[1]=m[pe+1],y[2]=m[pe+2],y[3]=m[pe+3],j(y,y,$),m[pe]=y[0],m[pe+1]=y[1],m[pe+2]=y[2],m[pe+3]=y[3];return m}}();function Vje(){var y=new mf(2);return mf!=Float32Array&&(y[0]=0,y[1]=0),y}function Hje(y){var m=y[0],L=y[1];return m*m+L*L}var Gje=Hje,EQt=function(){var y=Vje();return function(m,L,q,Y,j,$){var pe,ke;for(L||(L=2),q||(q=0),Y?ke=Math.min(Y*L+q,m.length):ke=m.length,pe=q;pe<ke;pe+=L)y[0]=m[pe],y[1]=m[pe+1],j(y,y,$),m[pe]=y[0],m[pe+1]=y[1];return m}}(),Yje=function(y){function m(L){y.call(this,L,Fy)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.createBucket=function(q){return new _o(q)},m.prototype.queryRadius=function(q){var Y=q;return ih("circle-radius",this,Y)+ih("circle-stroke-width",this,Y)+Ad(this.paint.get("circle-translate"))},m.prototype.queryIntersectsFeature=function(q,Y,j,$,pe,ke,Fe,Ne){for(var ct=Xp(q,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),ke.angle,Fe),kt=this.paint.get("circle-radius").evaluate(Y,j),bt=this.paint.get("circle-stroke-width").evaluate(Y,j),Yt=kt+bt,hr=this.paint.get("circle-pitch-alignment")==="map",Ir=hr?ct:Wje(ct,Ne),Ar=hr?Yt*Fe:Yt,en=0,Ur=$;en<Ur.length;en+=1)for(var Qr=Ur[en],on=0,Pn=Qr;on<Pn.length;on+=1){var oi=Pn[on],ti=hr?oi:MK(oi,Ne),Bi=Ar,Ti=Q5([],[oi.x,oi.y,0,1],Ne);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Bi*=Ti[3]/ke.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Bi*=ke.cameraToCenterDistance/Ti[3]),Qa(Ir,ti,Bi))return!0}return!1},m}(xn);function MK(y,m){var L=Q5([],[y.x,y.y,0,1],m);return new u(L[0]/L[3],L[1]/L[3])}function Wje(y,m){return y.map(function(L){return MK(L,m)})}var SK=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m}(_o);U("HeatmapBucket",SK,{omit:["layers"]});function D8(y,m,L,q){var Y=m.width,j=m.height;if(!q)q=new Uint8Array(Y*j*L);else if(q instanceof Uint8ClampedArray)q=new Uint8Array(q.buffer);else if(q.length!==Y*j*L)throw new RangeError("mismatched image size");return y.width=Y,y.height=j,y.data=q,y}function EK(y,m,L){var q=m.width,Y=m.height;if(!(q===y.width&&Y===y.height)){var j=D8({},{width:q,height:Y},L);I8(y,j,{x:0,y:0},{x:0,y:0},{width:Math.min(y.width,q),height:Math.min(y.height,Y)},L),y.width=q,y.height=Y,y.data=j.data}}function I8(y,m,L,q,Y,j){if(Y.width===0||Y.height===0)return m;if(Y.width>y.width||Y.height>y.height||L.x>y.width-Y.width||L.y>y.height-Y.height)throw new RangeError("out of range source coordinates for image copy");if(Y.width>m.width||Y.height>m.height||q.x>m.width-Y.width||q.y>m.height-Y.height)throw new RangeError("out of range destination coordinates for image copy");for(var $=y.data,pe=m.data,ke=0;ke<Y.height;ke++)for(var Fe=((L.y+ke)*y.width+L.x)*j,Ne=((q.y+ke)*m.width+q.x)*j,ct=0;ct<Y.width*j;ct++)pe[Ne+ct]=$[Fe+ct];return m}var W1=function(m,L){D8(this,m,1,L)};W1.prototype.resize=function(m){EK(this,m,1)},W1.prototype.clone=function(){return new W1({width:this.width,height:this.height},new Uint8Array(this.data))},W1.copy=function(m,L,q,Y,j){I8(m,L,q,Y,j,1)};var Nh=function(m,L){D8(this,m,4,L)};Nh.prototype.resize=function(m){EK(this,m,4)},Nh.prototype.replace=function(m,L){L?this.data.set(m):m instanceof Uint8ClampedArray?this.data=new Uint8Array(m.buffer):this.data=m},Nh.prototype.clone=function(){return new Nh({width:this.width,height:this.height},new Uint8Array(this.data))},Nh.copy=function(m,L,q,Y,j){I8(m,L,q,Y,j,4)},U("AlphaImage",W1),U("RGBAImage",Nh);var Xje=new jr({"heatmap-radius":new Gt(vn.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Gt(vn.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ye(vn.paint_heatmap["heatmap-intensity"]),"heatmap-color":new $r(vn.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ye(vn.paint_heatmap["heatmap-opacity"])}),Zje={paint:Xje};function kK(y){var m={},L=y.resolution||256,q=y.clips?y.clips.length:1,Y=y.image||new Nh({width:L,height:q}),j=function(en,Ur,Qr){m[y.evaluationKey]=Qr;var on=y.expression.evaluate(m);Y.data[en+Ur+0]=Math.floor(on.r*255/on.a),Y.data[en+Ur+1]=Math.floor(on.g*255/on.a),Y.data[en+Ur+2]=Math.floor(on.b*255/on.a),Y.data[en+Ur+3]=Math.floor(on.a*255)};if(y.clips)for(var Fe=0,Ne=0;Fe<q;++Fe,Ne+=L*4)for(var ct=0,kt=0;ct<L;ct++,kt+=4){var bt=ct/(L-1),Yt=y.clips[Fe],hr=Yt.start,Ir=Yt.end,Ar=hr*(1-bt)+Ir*bt;j(Ne,kt,Ar)}else for(var $=0,pe=0;$<L;$++,pe+=4){var ke=$/(L-1);j(0,pe,ke)}return Y}var jje=function(y){function m(L){y.call(this,L,Zje),this._updateColorRamp()}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.createBucket=function(q){return new SK(q)},m.prototype._handleSpecialPaintPropertyUpdate=function(q){q==="heatmap-color"&&this._updateColorRamp()},m.prototype._updateColorRamp=function(){var q=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=kK({expression:q,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},m.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},m.prototype.queryRadius=function(){return 0},m.prototype.queryIntersectsFeature=function(){return!1},m.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},m}(xn),Kje=new jr({"hillshade-illumination-direction":new Ye(vn.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ye(vn.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ye(vn.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ye(vn.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ye(vn.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ye(vn.paint_hillshade["hillshade-accent-color"])}),Jje={paint:Kje},Qje=function(y){function m(L){y.call(this,L,Jje)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},m}(xn),$je=Bn([{name:"a_pos",components:2,type:"Int16"}],4),eKe=$je.members,F8=$5,tKe=$5;function $5(y,m,L){L=L||2;var q=m&&m.length,Y=q?m[0]*L:y.length,j=CK(y,0,Y,L,!0),$=[];if(!j||j.next===j.prev)return $;var pe,ke,Fe,Ne,ct,kt,bt;if(q&&(j=oKe(y,m,j,L)),y.length>80*L){pe=Fe=y[0],ke=Ne=y[1];for(var Yt=L;Yt<Y;Yt+=L)ct=y[Yt],kt=y[Yt+1],ct<pe&&(pe=ct),kt<ke&&(ke=kt),ct>Fe&&(Fe=ct),kt>Ne&&(Ne=kt);bt=Math.max(Fe-pe,Ne-ke),bt=bt!==0?1/bt:0}return HT(j,$,L,pe,ke,bt),$}function CK(y,m,L,q,Y){var j,$;if(Y===O8(y,m,L,q)>0)for(j=m;j<L;j+=q)$=RK(j,y[j],y[j+1],$);else for(j=L-q;j>=m;j-=q)$=RK(j,y[j],y[j+1],$);return $&&ek($,$.next)&&(YT($),$=$.next),$}function By(y,m){if(!y)return y;m||(m=y);var L=y,q;do if(q=!1,!L.steiner&&(ek(L,L.next)||ku(L.prev,L,L.next)===0)){if(YT(L),L=m=L.prev,L===L.next)break;q=!0}else L=L.next;while(q||L!==m);return m}function HT(y,m,L,q,Y,j,$){if(y){!$&&j&&cKe(y,q,Y,j);for(var pe=y,ke,Fe;y.prev!==y.next;){if(ke=y.prev,Fe=y.next,j?nKe(y,q,Y,j):rKe(y)){m.push(ke.i/L),m.push(y.i/L),m.push(Fe.i/L),YT(y),y=Fe.next,pe=Fe.next;continue}if(y=Fe,y===pe){$?$===1?(y=iKe(By(y),m,L),HT(y,m,L,q,Y,j,2)):$===2&&aKe(y,m,L,q,Y,j):HT(By(y),m,L,q,Y,j,1);break}}}}function rKe(y){var m=y.prev,L=y,q=y.next;if(ku(m,L,q)>=0)return!1;for(var Y=y.next.next;Y!==y.prev;){if(kb(m.x,m.y,L.x,L.y,q.x,q.y,Y.x,Y.y)&&ku(Y.prev,Y,Y.next)>=0)return!1;Y=Y.next}return!0}function nKe(y,m,L,q){var Y=y.prev,j=y,$=y.next;if(ku(Y,j,$)>=0)return!1;for(var pe=Y.x<j.x?Y.x<$.x?Y.x:$.x:j.x<$.x?j.x:$.x,ke=Y.y<j.y?Y.y<$.y?Y.y:$.y:j.y<$.y?j.y:$.y,Fe=Y.x>j.x?Y.x>$.x?Y.x:$.x:j.x>$.x?j.x:$.x,Ne=Y.y>j.y?Y.y>$.y?Y.y:$.y:j.y>$.y?j.y:$.y,ct=q8(pe,ke,m,L,q),kt=q8(Fe,Ne,m,L,q),bt=y.prevZ,Yt=y.nextZ;bt&&bt.z>=ct&&Yt&&Yt.z<=kt;){if(bt!==y.prev&&bt!==y.next&&kb(Y.x,Y.y,j.x,j.y,$.x,$.y,bt.x,bt.y)&&ku(bt.prev,bt,bt.next)>=0||(bt=bt.prevZ,Yt!==y.prev&&Yt!==y.next&&kb(Y.x,Y.y,j.x,j.y,$.x,$.y,Yt.x,Yt.y)&&ku(Yt.prev,Yt,Yt.next)>=0))return!1;Yt=Yt.nextZ}for(;bt&&bt.z>=ct;){if(bt!==y.prev&&bt!==y.next&&kb(Y.x,Y.y,j.x,j.y,$.x,$.y,bt.x,bt.y)&&ku(bt.prev,bt,bt.next)>=0)return!1;bt=bt.prevZ}for(;Yt&&Yt.z<=kt;){if(Yt!==y.prev&&Yt!==y.next&&kb(Y.x,Y.y,j.x,j.y,$.x,$.y,Yt.x,Yt.y)&&ku(Yt.prev,Yt,Yt.next)>=0)return!1;Yt=Yt.nextZ}return!0}function iKe(y,m,L){var q=y;do{var Y=q.prev,j=q.next.next;!ek(Y,j)&&LK(Y,q,q.next,j)&&GT(Y,j)&&GT(j,Y)&&(m.push(Y.i/L),m.push(q.i/L),m.push(j.i/L),YT(q),YT(q.next),q=y=j),q=q.next}while(q!==y);return By(q)}function aKe(y,m,L,q,Y,j){var $=y;do{for(var pe=$.next.next;pe!==$.prev;){if($.i!==pe.i&&dKe($,pe)){var ke=PK($,pe);$=By($,$.next),ke=By(ke,ke.next),HT($,m,L,q,Y,j),HT(ke,m,L,q,Y,j);return}pe=pe.next}$=$.next}while($!==y)}function oKe(y,m,L,q){var Y=[],j,$,pe,ke,Fe;for(j=0,$=m.length;j<$;j++)pe=m[j]*q,ke=j<$-1?m[j+1]*q:y.length,Fe=CK(y,pe,ke,q,!1),Fe===Fe.next&&(Fe.steiner=!0),Y.push(vKe(Fe));for(Y.sort(sKe),j=0;j<Y.length;j++)lKe(Y[j],L),L=By(L,L.next);return L}function sKe(y,m){return y.x-m.x}function lKe(y,m){if(m=uKe(y,m),m){var L=PK(m,y);By(m,m.next),By(L,L.next)}}function uKe(y,m){var L=m,q=y.x,Y=y.y,j=-1/0,$;do{if(Y<=L.y&&Y>=L.next.y&&L.next.y!==L.y){var pe=L.x+(Y-L.y)*(L.next.x-L.x)/(L.next.y-L.y);if(pe<=q&&pe>j){if(j=pe,pe===q){if(Y===L.y)return L;if(Y===L.next.y)return L.next}$=L.x<L.next.x?L:L.next}}L=L.next}while(L!==m);if(!$)return null;if(q===j)return $;var ke=$,Fe=$.x,Ne=$.y,ct=1/0,kt;L=$;do q>=L.x&&L.x>=Fe&&q!==L.x&&kb(Y<Ne?q:j,Y,Fe,Ne,Y<Ne?j:q,Y,L.x,L.y)&&(kt=Math.abs(Y-L.y)/(q-L.x),GT(L,y)&&(kt<ct||kt===ct&&(L.x>$.x||L.x===$.x&&fKe($,L)))&&($=L,ct=kt)),L=L.next;while(L!==ke);return $}function fKe(y,m){return ku(y.prev,y,m.prev)<0&&ku(m.next,y,y.next)<0}function cKe(y,m,L,q){var Y=y;do Y.z===null&&(Y.z=q8(Y.x,Y.y,m,L,q)),Y.prevZ=Y.prev,Y.nextZ=Y.next,Y=Y.next;while(Y!==y);Y.prevZ.nextZ=null,Y.prevZ=null,hKe(Y)}function hKe(y){var m,L,q,Y,j,$,pe,ke,Fe=1;do{for(L=y,y=null,j=null,$=0;L;){for($++,q=L,pe=0,m=0;m<Fe&&(pe++,q=q.nextZ,!!q);m++);for(ke=Fe;pe>0||ke>0&&q;)pe!==0&&(ke===0||!q||L.z<=q.z)?(Y=L,L=L.nextZ,pe--):(Y=q,q=q.nextZ,ke--),j?j.nextZ=Y:y=Y,Y.prevZ=j,j=Y;L=q}j.nextZ=null,Fe*=2}while($>1);return y}function q8(y,m,L,q,Y){return y=32767*(y-L)*Y,m=32767*(m-q)*Y,y=(y|y<<8)&16711935,y=(y|y<<4)&252645135,y=(y|y<<2)&858993459,y=(y|y<<1)&1431655765,m=(m|m<<8)&16711935,m=(m|m<<4)&252645135,m=(m|m<<2)&858993459,m=(m|m<<1)&1431655765,y|m<<1}function vKe(y){var m=y,L=y;do(m.x<L.x||m.x===L.x&&m.y<L.y)&&(L=m),m=m.next;while(m!==y);return L}function kb(y,m,L,q,Y,j,$,pe){return(Y-$)*(m-pe)-(y-$)*(j-pe)>=0&&(y-$)*(q-pe)-(L-$)*(m-pe)>=0&&(L-$)*(j-pe)-(Y-$)*(q-pe)>=0}function dKe(y,m){return y.next.i!==m.i&&y.prev.i!==m.i&&!pKe(y,m)&&(GT(y,m)&&GT(m,y)&&gKe(y,m)&&(ku(y.prev,y,m.prev)||ku(y,m.prev,m))||ek(y,m)&&ku(y.prev,y,y.next)>0&&ku(m.prev,m,m.next)>0)}function ku(y,m,L){return(m.y-y.y)*(L.x-m.x)-(m.x-y.x)*(L.y-m.y)}function ek(y,m){return y.x===m.x&&y.y===m.y}function LK(y,m,L,q){var Y=rk(ku(y,m,L)),j=rk(ku(y,m,q)),$=rk(ku(L,q,y)),pe=rk(ku(L,q,m));return!!(Y!==j&&$!==pe||Y===0&&tk(y,L,m)||j===0&&tk(y,q,m)||$===0&&tk(L,y,q)||pe===0&&tk(L,m,q))}function tk(y,m,L){return m.x<=Math.max(y.x,L.x)&&m.x>=Math.min(y.x,L.x)&&m.y<=Math.max(y.y,L.y)&&m.y>=Math.min(y.y,L.y)}function rk(y){return y>0?1:y<0?-1:0}function pKe(y,m){var L=y;do{if(L.i!==y.i&&L.next.i!==y.i&&L.i!==m.i&&L.next.i!==m.i&&LK(L,L.next,y,m))return!0;L=L.next}while(L!==y);return!1}function GT(y,m){return ku(y.prev,y,y.next)<0?ku(y,m,y.next)>=0&&ku(y,y.prev,m)>=0:ku(y,m,y.prev)<0||ku(y,y.next,m)<0}function gKe(y,m){var L=y,q=!1,Y=(y.x+m.x)/2,j=(y.y+m.y)/2;do L.y>j!=L.next.y>j&&L.next.y!==L.y&&Y<(L.next.x-L.x)*(j-L.y)/(L.next.y-L.y)+L.x&&(q=!q),L=L.next;while(L!==y);return q}function PK(y,m){var L=new z8(y.i,y.x,y.y),q=new z8(m.i,m.x,m.y),Y=y.next,j=m.prev;return y.next=m,m.prev=y,L.next=Y,Y.prev=L,q.next=L,L.prev=q,j.next=q,q.prev=j,q}function RK(y,m,L,q){var Y=new z8(y,m,L);return q?(Y.next=q.next,Y.prev=q,q.next.prev=Y,q.next=Y):(Y.prev=Y,Y.next=Y),Y}function YT(y){y.next.prev=y.prev,y.prev.next=y.next,y.prevZ&&(y.prevZ.nextZ=y.nextZ),y.nextZ&&(y.nextZ.prevZ=y.prevZ)}function z8(y,m,L){this.i=y,this.x=m,this.y=L,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}$5.deviation=function(y,m,L,q){var Y=m&&m.length,j=Y?m[0]*L:y.length,$=Math.abs(O8(y,0,j,L));if(Y)for(var pe=0,ke=m.length;pe<ke;pe++){var Fe=m[pe]*L,Ne=pe<ke-1?m[pe+1]*L:y.length;$-=Math.abs(O8(y,Fe,Ne,L))}var ct=0;for(pe=0;pe<q.length;pe+=3){var kt=q[pe]*L,bt=q[pe+1]*L,Yt=q[pe+2]*L;ct+=Math.abs((y[kt]-y[Yt])*(y[bt+1]-y[kt+1])-(y[kt]-y[bt])*(y[Yt+1]-y[kt+1]))}return $===0&&ct===0?0:Math.abs((ct-$)/$)};function O8(y,m,L,q){for(var Y=0,j=m,$=L-q;j<L;j+=q)Y+=(y[$]-y[j])*(y[j+1]+y[$+1]),$=j;return Y}$5.flatten=function(y){for(var m=y[0][0].length,L={vertices:[],holes:[],dimensions:m},q=0,Y=0;Y<y.length;Y++){for(var j=0;j<y[Y].length;j++)for(var $=0;$<m;$++)L.vertices.push(y[Y][j][$]);Y>0&&(q+=y[Y-1].length,L.holes.push(q))}return L},F8.default=tKe;function yKe(y,m,L,q,Y){DK(y,m,L||0,q||y.length-1,Y||mKe)}function DK(y,m,L,q,Y){for(;q>L;){if(q-L>600){var j=q-L+1,$=m-L+1,pe=Math.log(j),ke=.5*Math.exp(2*pe/3),Fe=.5*Math.sqrt(pe*ke*(j-ke)/j)*($-j/2<0?-1:1),Ne=Math.max(L,Math.floor(m-$*ke/j+Fe)),ct=Math.min(q,Math.floor(m+(j-$)*ke/j+Fe));DK(y,m,Ne,ct,Y)}var kt=y[m],bt=L,Yt=q;for(WT(y,L,m),Y(y[q],kt)>0&&WT(y,L,q);bt<Yt;){for(WT(y,bt,Yt),bt++,Yt--;Y(y[bt],kt)<0;)bt++;for(;Y(y[Yt],kt)>0;)Yt--}Y(y[L],kt)===0?WT(y,L,Yt):(Yt++,WT(y,Yt,q)),Yt<=m&&(L=Yt+1),m<=Yt&&(q=Yt-1)}}function WT(y,m,L){var q=y[m];y[m]=y[L],y[L]=q}function mKe(y,m){return y<m?-1:y>m?1:0}function B8(y,m){var L=y.length;if(L<=1)return[y];for(var q=[],Y,j,$=0;$<L;$++){var pe=re(y[$]);pe!==0&&(y[$].area=Math.abs(pe),j===void 0&&(j=pe<0),j===pe<0?(Y&&q.push(Y),Y=[y[$]]):Y.push(y[$]))}if(Y&&q.push(Y),m>1)for(var ke=0;ke<q.length;ke++)q[ke].length<=m||(yKe(q[ke],m,1,q[ke].length-1,xKe),q[ke]=q[ke].slice(0,m));return q}function xKe(y,m){return m.area-y.area}function N8(y,m,L){for(var q=L.patternDependencies,Y=!1,j=0,$=m;j<$.length;j+=1){var pe=$[j],ke=pe.paint.get(y+"-pattern");ke.isConstant()||(Y=!0);var Fe=ke.constantOr(null);Fe&&(Y=!0,q[Fe.to]=!0,q[Fe.from]=!0)}return Y}function U8(y,m,L,q,Y){for(var j=Y.patternDependencies,$=0,pe=m;$<pe.length;$+=1){var ke=pe[$],Fe=ke.paint.get(y+"-pattern"),Ne=Fe.value;if(Ne.kind!=="constant"){var ct=Ne.evaluate({zoom:q-1},L,{},Y.availableImages),kt=Ne.evaluate({zoom:q},L,{},Y.availableImages),bt=Ne.evaluate({zoom:q+1},L,{},Y.availableImages);ct=ct&&ct.name?ct.name:ct,kt=kt&&kt.name?kt.name:kt,bt=bt&&bt.name?bt.name:bt,j[ct]=!0,j[kt]=!0,j[bt]=!0,L.patterns[ke.id]={min:ct,mid:kt,max:bt}}}return L}var _Ke=500,Zp=function(m){this.zoom=m.zoom,this.overscaling=m.overscaling,this.layers=m.layers,this.layerIds=this.layers.map(function(L){return L.id}),this.index=m.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new cn,this.indexArray=new Si,this.indexArray2=new _a,this.programConfigurations=new Xr(m.layers,m.zoom),this.segments=new Ja,this.segments2=new Ja,this.stateDependentLayerIds=this.layers.filter(function(L){return L.isStateDependent()}).map(function(L){return L.id})};Zp.prototype.populate=function(m,L,q){this.hasPattern=N8("fill",this.layers,L);for(var Y=this.layers[0].layout.get("fill-sort-key"),j=[],$=0,pe=m;$<pe.length;$+=1){var ke=pe[$],Fe=ke.feature,Ne=ke.id,ct=ke.index,kt=ke.sourceLayerIndex,bt=this.layers[0]._featureFilter.needGeometry,Yt=Da(Fe,bt);if(this.layers[0]._featureFilter.filter(new Sn(this.zoom),Yt,q)){var hr=Y?Y.evaluate(Yt,{},q,L.availableImages):void 0,Ir={id:Ne,properties:Fe.properties,type:Fe.type,sourceLayerIndex:kt,index:ct,geometry:bt?Yt.geometry:xi(Fe),patterns:{},sortKey:hr};j.push(Ir)}}Y&&j.sort(function(Ti,Ri){return Ti.sortKey-Ri.sortKey});for(var Ar=0,en=j;Ar<en.length;Ar+=1){var Ur=en[Ar],Qr=Ur,on=Qr.geometry,Pn=Qr.index,oi=Qr.sourceLayerIndex;if(this.hasPattern){var ti=U8("fill",this.layers,Ur,this.zoom,L);this.patternFeatures.push(ti)}else this.addFeature(Ur,on,Pn,q,{});var Bi=m[Pn].feature;L.featureIndex.insert(Bi,on,Pn,oi,this.index)}},Zp.prototype.update=function(m,L,q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(m,L,this.stateDependentLayers,q)},Zp.prototype.addFeatures=function(m,L,q){for(var Y=0,j=this.patternFeatures;Y<j.length;Y+=1){var $=j[Y];this.addFeature($,$.geometry,$.index,L,q)}},Zp.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Zp.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Zp.prototype.upload=function(m){this.uploaded||(this.layoutVertexBuffer=m.createVertexBuffer(this.layoutVertexArray,eKe),this.indexBuffer=m.createIndexBuffer(this.indexArray),this.indexBuffer2=m.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(m),this.uploaded=!0},Zp.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Zp.prototype.addFeature=function(m,L,q,Y,j){for(var $=0,pe=B8(L,_Ke);$<pe.length;$+=1){for(var ke=pe[$],Fe=0,Ne=0,ct=ke;Ne<ct.length;Ne+=1){var kt=ct[Ne];Fe+=kt.length}for(var bt=this.segments.prepareSegment(Fe,this.layoutVertexArray,this.indexArray),Yt=bt.vertexLength,hr=[],Ir=[],Ar=0,en=ke;Ar<en.length;Ar+=1){var Ur=en[Ar];if(Ur.length!==0){Ur!==ke[0]&&Ir.push(hr.length/2);var Qr=this.segments2.prepareSegment(Ur.length,this.layoutVertexArray,this.indexArray2),on=Qr.vertexLength;this.layoutVertexArray.emplaceBack(Ur[0].x,Ur[0].y),this.indexArray2.emplaceBack(on+Ur.length-1,on),hr.push(Ur[0].x),hr.push(Ur[0].y);for(var Pn=1;Pn<Ur.length;Pn++)this.layoutVertexArray.emplaceBack(Ur[Pn].x,Ur[Pn].y),this.indexArray2.emplaceBack(on+Pn-1,on+Pn),hr.push(Ur[Pn].x),hr.push(Ur[Pn].y);Qr.vertexLength+=Ur.length,Qr.primitiveLength+=Ur.length}}for(var oi=F8(hr,Ir),ti=0;ti<oi.length;ti+=3)this.indexArray.emplaceBack(Yt+oi[ti],Yt+oi[ti+1],Yt+oi[ti+2]);bt.vertexLength+=Fe,bt.primitiveLength+=oi.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,m,q,j,Y)},U("FillBucket",Zp,{omit:["layers","patternFeatures"]});var bKe=new jr({"fill-sort-key":new Gt(vn.layout_fill["fill-sort-key"])}),wKe=new jr({"fill-antialias":new Ye(vn.paint_fill["fill-antialias"]),"fill-opacity":new Gt(vn.paint_fill["fill-opacity"]),"fill-color":new Gt(vn.paint_fill["fill-color"]),"fill-outline-color":new Gt(vn.paint_fill["fill-outline-color"]),"fill-translate":new Ye(vn.paint_fill["fill-translate"]),"fill-translate-anchor":new Ye(vn.paint_fill["fill-translate-anchor"]),"fill-pattern":new lr(vn.paint_fill["fill-pattern"])}),TKe={paint:wKe,layout:bKe},AKe=function(y){function m(L){y.call(this,L,TKe)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.recalculate=function(q,Y){y.prototype.recalculate.call(this,q,Y);var j=this.paint._values["fill-outline-color"];j.value.kind==="constant"&&j.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},m.prototype.createBucket=function(q){return new Zp(q)},m.prototype.queryRadius=function(){return Ad(this.paint.get("fill-translate"))},m.prototype.queryIntersectsFeature=function(q,Y,j,$,pe,ke,Fe){var Ne=Xp(q,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),ke.angle,Fe);return Vo(Ne,$)},m.prototype.isTileClipped=function(){return!0},m}(xn),MKe=Bn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),SKe=MKe.members,IK=Cb;function Cb(y,m,L,q,Y){this.properties={},this.extent=L,this.type=0,this._pbf=y,this._geometry=-1,this._keys=q,this._values=Y,y.readFields(EKe,this,m)}function EKe(y,m,L){y==1?m.id=L.readVarint():y==2?kKe(L,m):y==3?m.type=L.readVarint():y==4&&(m._geometry=L.pos)}function kKe(y,m){for(var L=y.readVarint()+y.pos;y.pos<L;){var q=m._keys[y.readVarint()],Y=m._values[y.readVarint()];m.properties[q]=Y}}Cb.types=["Unknown","Point","LineString","Polygon"],Cb.prototype.loadGeometry=function(){var y=this._pbf;y.pos=this._geometry;for(var m=y.readVarint()+y.pos,L=1,q=0,Y=0,j=0,$=[],pe;y.pos<m;){if(q<=0){var ke=y.readVarint();L=ke&7,q=ke>>3}if(q--,L===1||L===2)Y+=y.readSVarint(),j+=y.readSVarint(),L===1&&(pe&&$.push(pe),pe=[]),pe.push(new u(Y,j));else if(L===7)pe&&pe.push(pe[0].clone());else throw new Error("unknown command "+L)}return pe&&$.push(pe),$},Cb.prototype.bbox=function(){var y=this._pbf;y.pos=this._geometry;for(var m=y.readVarint()+y.pos,L=1,q=0,Y=0,j=0,$=1/0,pe=-1/0,ke=1/0,Fe=-1/0;y.pos<m;){if(q<=0){var Ne=y.readVarint();L=Ne&7,q=Ne>>3}if(q--,L===1||L===2)Y+=y.readSVarint(),j+=y.readSVarint(),Y<$&&($=Y),Y>pe&&(pe=Y),j<ke&&(ke=j),j>Fe&&(Fe=j);else if(L!==7)throw new Error("unknown command "+L)}return[$,ke,pe,Fe]},Cb.prototype.toGeoJSON=function(y,m,L){var q=this.extent*Math.pow(2,L),Y=this.extent*y,j=this.extent*m,$=this.loadGeometry(),pe=Cb.types[this.type],ke,Fe;function Ne(bt){for(var Yt=0;Yt<bt.length;Yt++){var hr=bt[Yt],Ir=180-(hr.y+j)*360/q;bt[Yt]=[(hr.x+Y)*360/q-180,360/Math.PI*Math.atan(Math.exp(Ir*Math.PI/180))-90]}}switch(this.type){case 1:var ct=[];for(ke=0;ke<$.length;ke++)ct[ke]=$[ke][0];$=ct,Ne($);break;case 2:for(ke=0;ke<$.length;ke++)Ne($[ke]);break;case 3:for($=CKe($),ke=0;ke<$.length;ke++)for(Fe=0;Fe<$[ke].length;Fe++)Ne($[ke][Fe]);break}$.length===1?$=$[0]:pe="Multi"+pe;var kt={type:"Feature",geometry:{type:pe,coordinates:$},properties:this.properties};return"id"in this&&(kt.id=this.id),kt};function CKe(y){var m=y.length;if(m<=1)return[y];for(var L=[],q,Y,j=0;j<m;j++){var $=LKe(y[j]);$!==0&&(Y===void 0&&(Y=$<0),Y===$<0?(q&&L.push(q),q=[y[j]]):q.push(y[j]))}return q&&L.push(q),L}function LKe(y){for(var m=0,L=0,q=y.length,Y=q-1,j,$;L<q;Y=L++)j=y[L],$=y[Y],m+=($.x-j.x)*(j.y+$.y);return m}var FK=qK;function qK(y,m){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=y,this._keys=[],this._values=[],this._features=[],y.readFields(PKe,this,m),this.length=this._features.length}function PKe(y,m,L){y===15?m.version=L.readVarint():y===1?m.name=L.readString():y===5?m.extent=L.readVarint():y===2?m._features.push(L.pos):y===3?m._keys.push(L.readString()):y===4&&m._values.push(RKe(L))}function RKe(y){for(var m=null,L=y.readVarint()+y.pos;y.pos<L;){var q=y.readVarint()>>3;m=q===1?y.readString():q===2?y.readFloat():q===3?y.readDouble():q===4?y.readVarint64():q===5?y.readVarint():q===6?y.readSVarint():q===7?y.readBoolean():null}return m}qK.prototype.feature=function(y){if(y<0||y>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[y];var m=this._pbf.readVarint()+this._pbf.pos;return new IK(this._pbf,m,this.extent,this._keys,this._values)};var DKe=IKe;function IKe(y,m){this.layers=y.readFields(FKe,{},m)}function FKe(y,m,L){if(y===3){var q=new FK(L,L.readVarint()+L.pos);q.length&&(m[q.name]=q)}}var qKe=DKe,zKe=IK,OKe=FK,Lb={VectorTile:qKe,VectorTileFeature:zKe,VectorTileLayer:OKe},BKe=Lb.VectorTileFeature.types,NKe=500,V8=Math.pow(2,13);function XT(y,m,L,q,Y,j,$,pe){y.emplaceBack(m,L,Math.floor(q*V8)*2+$,Y*V8*2,j*V8*2,Math.round(pe))}var jp=function(m){this.zoom=m.zoom,this.overscaling=m.overscaling,this.layers=m.layers,this.layerIds=this.layers.map(function(L){return L.id}),this.index=m.index,this.hasPattern=!1,this.layoutVertexArray=new Zn,this.indexArray=new Si,this.programConfigurations=new Xr(m.layers,m.zoom),this.segments=new Ja,this.stateDependentLayerIds=this.layers.filter(function(L){return L.isStateDependent()}).map(function(L){return L.id})};jp.prototype.populate=function(m,L,q){this.features=[],this.hasPattern=N8("fill-extrusion",this.layers,L);for(var Y=0,j=m;Y<j.length;Y+=1){var $=j[Y],pe=$.feature,ke=$.id,Fe=$.index,Ne=$.sourceLayerIndex,ct=this.layers[0]._featureFilter.needGeometry,kt=Da(pe,ct);if(this.layers[0]._featureFilter.filter(new Sn(this.zoom),kt,q)){var bt={id:ke,sourceLayerIndex:Ne,index:Fe,geometry:ct?kt.geometry:xi(pe),properties:pe.properties,type:pe.type,patterns:{}};this.hasPattern?this.features.push(U8("fill-extrusion",this.layers,bt,this.zoom,L)):this.addFeature(bt,bt.geometry,Fe,q,{}),L.featureIndex.insert(pe,bt.geometry,Fe,Ne,this.index,!0)}}},jp.prototype.addFeatures=function(m,L,q){for(var Y=0,j=this.features;Y<j.length;Y+=1){var $=j[Y],pe=$.geometry;this.addFeature($,pe,$.index,L,q)}},jp.prototype.update=function(m,L,q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(m,L,this.stateDependentLayers,q)},jp.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},jp.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},jp.prototype.upload=function(m){this.uploaded||(this.layoutVertexBuffer=m.createVertexBuffer(this.layoutVertexArray,SKe),this.indexBuffer=m.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(m),this.uploaded=!0},jp.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},jp.prototype.addFeature=function(m,L,q,Y,j){for(var $=0,pe=B8(L,NKe);$<pe.length;$+=1){for(var ke=pe[$],Fe=0,Ne=0,ct=ke;Ne<ct.length;Ne+=1){var kt=ct[Ne];Fe+=kt.length}for(var bt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Yt=0,hr=ke;Yt<hr.length;Yt+=1){var Ir=hr[Yt];if(Ir.length!==0&&!VKe(Ir))for(var Ar=0,en=0;en<Ir.length;en++){var Ur=Ir[en];if(en>=1){var Qr=Ir[en-1];if(!UKe(Ur,Qr)){bt.vertexLength+4>Ja.MAX_VERTEX_ARRAY_LENGTH&&(bt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var on=Ur.sub(Qr)._perp()._unit(),Pn=Qr.dist(Ur);Ar+Pn>32768&&(Ar=0),XT(this.layoutVertexArray,Ur.x,Ur.y,on.x,on.y,0,0,Ar),XT(this.layoutVertexArray,Ur.x,Ur.y,on.x,on.y,0,1,Ar),Ar+=Pn,XT(this.layoutVertexArray,Qr.x,Qr.y,on.x,on.y,0,0,Ar),XT(this.layoutVertexArray,Qr.x,Qr.y,on.x,on.y,0,1,Ar);var oi=bt.vertexLength;this.indexArray.emplaceBack(oi,oi+2,oi+1),this.indexArray.emplaceBack(oi+1,oi+2,oi+3),bt.vertexLength+=4,bt.primitiveLength+=2}}}}if(bt.vertexLength+Fe>Ja.MAX_VERTEX_ARRAY_LENGTH&&(bt=this.segments.prepareSegment(Fe,this.layoutVertexArray,this.indexArray)),BKe[m.type]==="Polygon"){for(var ti=[],Bi=[],Ti=bt.vertexLength,Ri=0,wa=ke;Ri<wa.length;Ri+=1){var Ni=wa[Ri];if(Ni.length!==0){Ni!==ke[0]&&Bi.push(ti.length/2);for(var Yi=0;Yi<Ni.length;Yi++){var Xa=Ni[Yi];XT(this.layoutVertexArray,Xa.x,Xa.y,0,0,1,1,0),ti.push(Xa.x),ti.push(Xa.y)}}}for(var ga=F8(ti,Bi),Ro=0;Ro<ga.length;Ro+=3)this.indexArray.emplaceBack(Ti+ga[Ro],Ti+ga[Ro+2],Ti+ga[Ro+1]);bt.primitiveLength+=ga.length/3,bt.vertexLength+=Fe}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,m,q,j,Y)},U("FillExtrusionBucket",jp,{omit:["layers","features"]});function UKe(y,m){return y.x===m.x&&(y.x<0||y.x>fn)||y.y===m.y&&(y.y<0||y.y>fn)}function VKe(y){return y.every(function(m){return m.x<0})||y.every(function(m){return m.x>fn})||y.every(function(m){return m.y<0})||y.every(function(m){return m.y>fn})}var HKe=new jr({"fill-extrusion-opacity":new Ye(vn["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Gt(vn["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ye(vn["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ye(vn["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new lr(vn["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Gt(vn["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Gt(vn["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ye(vn["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),GKe={paint:HKe},YKe=function(y){function m(L){y.call(this,L,GKe)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.createBucket=function(q){return new jp(q)},m.prototype.queryRadius=function(){return Ad(this.paint.get("fill-extrusion-translate"))},m.prototype.is3D=function(){return!0},m.prototype.queryIntersectsFeature=function(q,Y,j,$,pe,ke,Fe,Ne){var ct=Xp(q,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),ke.angle,Fe),kt=this.paint.get("fill-extrusion-height").evaluate(Y,j),bt=this.paint.get("fill-extrusion-base").evaluate(Y,j),Yt=ZKe(ct,Ne,ke,0),hr=XKe($,bt,kt,Ne),Ir=hr[0],Ar=hr[1];return WKe(Ir,Ar,Yt)},m}(xn);function ZT(y,m){return y.x*m.x+y.y*m.y}function zK(y,m){if(y.length===1){for(var L=0,q=m[L++],Y;!Y||q.equals(Y);)if(Y=m[L++],!Y)return 1/0;for(;L<m.length;L++){var j=m[L],$=y[0],pe=Y.sub(q),ke=j.sub(q),Fe=$.sub(q),Ne=ZT(pe,pe),ct=ZT(pe,ke),kt=ZT(ke,ke),bt=ZT(Fe,pe),Yt=ZT(Fe,ke),hr=Ne*kt-ct*ct,Ir=(kt*bt-ct*Yt)/hr,Ar=(Ne*Yt-ct*bt)/hr,en=1-Ir-Ar,Ur=q.z*en+Y.z*Ir+j.z*Ar;if(isFinite(Ur))return Ur}return 1/0}else{for(var Qr=1/0,on=0,Pn=m;on<Pn.length;on+=1){var oi=Pn[on];Qr=Math.min(Qr,oi.z)}return Qr}}function WKe(y,m,L){var q=1/0;Vo(L,m)&&(q=zK(L,m[0]));for(var Y=0;Y<m.length;Y++)for(var j=m[Y],$=y[Y],pe=0;pe<j.length-1;pe++){var ke=j[pe],Fe=j[pe+1],Ne=$[pe],ct=$[pe+1],kt=[ke,Fe,ct,Ne,ke];ua(L,kt)&&(q=Math.min(q,zK(L,kt)))}return q===1/0?!1:q}function XKe(y,m,L,q){for(var Y=[],j=[],$=q[8]*m,pe=q[9]*m,ke=q[10]*m,Fe=q[11]*m,Ne=q[8]*L,ct=q[9]*L,kt=q[10]*L,bt=q[11]*L,Yt=0,hr=y;Yt<hr.length;Yt+=1){for(var Ir=hr[Yt],Ar=[],en=[],Ur=0,Qr=Ir;Ur<Qr.length;Ur+=1){var on=Qr[Ur],Pn=on.x,oi=on.y,ti=q[0]*Pn+q[4]*oi+q[12],Bi=q[1]*Pn+q[5]*oi+q[13],Ti=q[2]*Pn+q[6]*oi+q[14],Ri=q[3]*Pn+q[7]*oi+q[15],wa=ti+$,Ni=Bi+pe,Yi=Ti+ke,Xa=Ri+Fe,ga=ti+Ne,Ro=Bi+ct,Ss=Ti+kt,Do=Ri+bt,Io=new u(wa/Xa,Ni/Xa);Io.z=Yi/Xa,Ar.push(Io);var Mo=new u(ga/Do,Ro/Do);Mo.z=Ss/Do,en.push(Mo)}Y.push(Ar),j.push(en)}return[Y,j]}function ZKe(y,m,L,q){for(var Y=[],j=0,$=y;j<$.length;j+=1){var pe=$[j],ke=[pe.x,pe.y,q,1];Q5(ke,ke,m),Y.push(new u(ke[0]/ke[3],ke[1]/ke[3]))}return Y}var jKe=Bn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),KKe=jKe.members,JKe=Bn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),QKe=JKe.members,$Ke=Lb.VectorTileFeature.types,OK=63,eJe=Math.cos(75/2*(Math.PI/180)),tJe=15,rJe=20,nJe=15,BK=1/2,NK=Math.pow(2,nJe-1)/BK,ah=function(m){var L=this;this.zoom=m.zoom,this.overscaling=m.overscaling,this.layers=m.layers,this.layerIds=this.layers.map(function(q){return q.id}),this.index=m.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(q){L.gradients[q.id]={}}),this.layoutVertexArray=new En,this.layoutVertexArray2=new mi,this.indexArray=new Si,this.programConfigurations=new Xr(m.layers,m.zoom),this.segments=new Ja,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(q){return q.isStateDependent()}).map(function(q){return q.id})};ah.prototype.populate=function(m,L,q){this.hasPattern=N8("line",this.layers,L);for(var Y=this.layers[0].layout.get("line-sort-key"),j=[],$=0,pe=m;$<pe.length;$+=1){var ke=pe[$],Fe=ke.feature,Ne=ke.id,ct=ke.index,kt=ke.sourceLayerIndex,bt=this.layers[0]._featureFilter.needGeometry,Yt=Da(Fe,bt);if(this.layers[0]._featureFilter.filter(new Sn(this.zoom),Yt,q)){var hr=Y?Y.evaluate(Yt,{},q):void 0,Ir={id:Ne,properties:Fe.properties,type:Fe.type,sourceLayerIndex:kt,index:ct,geometry:bt?Yt.geometry:xi(Fe),patterns:{},sortKey:hr};j.push(Ir)}}Y&&j.sort(function(Ti,Ri){return Ti.sortKey-Ri.sortKey});for(var Ar=0,en=j;Ar<en.length;Ar+=1){var Ur=en[Ar],Qr=Ur,on=Qr.geometry,Pn=Qr.index,oi=Qr.sourceLayerIndex;if(this.hasPattern){var ti=U8("line",this.layers,Ur,this.zoom,L);this.patternFeatures.push(ti)}else this.addFeature(Ur,on,Pn,q,{});var Bi=m[Pn].feature;L.featureIndex.insert(Bi,on,Pn,oi,this.index)}},ah.prototype.update=function(m,L,q){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(m,L,this.stateDependentLayers,q)},ah.prototype.addFeatures=function(m,L,q){for(var Y=0,j=this.patternFeatures;Y<j.length;Y+=1){var $=j[Y];this.addFeature($,$.geometry,$.index,L,q)}},ah.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ah.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ah.prototype.upload=function(m){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=m.createVertexBuffer(this.layoutVertexArray2,QKe)),this.layoutVertexBuffer=m.createVertexBuffer(this.layoutVertexArray,KKe),this.indexBuffer=m.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(m),this.uploaded=!0},ah.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ah.prototype.lineFeatureClips=function(m){if(m.properties&&m.properties.hasOwnProperty("mapbox_clip_start")&&m.properties.hasOwnProperty("mapbox_clip_end")){var L=+m.properties.mapbox_clip_start,q=+m.properties.mapbox_clip_end;return{start:L,end:q}}},ah.prototype.addFeature=function(m,L,q,Y,j){var $=this.layers[0].layout,pe=$.get("line-join").evaluate(m,{}),ke=$.get("line-cap"),Fe=$.get("line-miter-limit"),Ne=$.get("line-round-limit");this.lineClips=this.lineFeatureClips(m);for(var ct=0,kt=L;ct<kt.length;ct+=1){var bt=kt[ct];this.addLine(bt,m,pe,ke,Fe,Ne)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,m,q,j,Y)},ah.prototype.addLine=function(m,L,q,Y,j,$){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var pe=0;pe<m.length-1;pe++)this.totalDistance+=m[pe].dist(m[pe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var ke=$Ke[L.type]==="Polygon",Fe=m.length;Fe>=2&&m[Fe-1].equals(m[Fe-2]);)Fe--;for(var Ne=0;Ne<Fe-1&&m[Ne].equals(m[Ne+1]);)Ne++;if(!(Fe<(ke?3:2))){q==="bevel"&&(j=1.05);var ct=this.overscaling<=16?tJe*fn/(512*this.overscaling):0,kt=this.segments.prepareSegment(Fe*10,this.layoutVertexArray,this.indexArray),bt,Yt=void 0,hr=void 0,Ir=void 0,Ar=void 0;this.e1=this.e2=-1,ke&&(bt=m[Fe-2],Ar=m[Ne].sub(bt)._unit()._perp());for(var en=Ne;en<Fe;en++)if(hr=en===Fe-1?ke?m[Ne+1]:void 0:m[en+1],!(hr&&m[en].equals(hr))){Ar&&(Ir=Ar),bt&&(Yt=bt),bt=m[en],Ar=hr?hr.sub(bt)._unit()._perp():Ir,Ir=Ir||Ar;var Ur=Ir.add(Ar);(Ur.x!==0||Ur.y!==0)&&Ur._unit();var Qr=Ir.x*Ar.x+Ir.y*Ar.y,on=Ur.x*Ar.x+Ur.y*Ar.y,Pn=on!==0?1/on:1/0,oi=2*Math.sqrt(2-2*on),ti=on<eJe&&Yt&&hr,Bi=Ir.x*Ar.y-Ir.y*Ar.x>0;if(ti&&en>Ne){var Ti=bt.dist(Yt);if(Ti>2*ct){var Ri=bt.sub(bt.sub(Yt)._mult(ct/Ti)._round());this.updateDistance(Yt,Ri),this.addCurrentVertex(Ri,Ir,0,0,kt),Yt=Ri}}var wa=Yt&&hr,Ni=wa?q:ke?"butt":Y;if(wa&&Ni==="round"&&(Pn<$?Ni="miter":Pn<=2&&(Ni="fakeround")),Ni==="miter"&&Pn>j&&(Ni="bevel"),Ni==="bevel"&&(Pn>2&&(Ni="flipbevel"),Pn<j&&(Ni="miter")),Yt&&this.updateDistance(Yt,bt),Ni==="miter")Ur._mult(Pn),this.addCurrentVertex(bt,Ur,0,0,kt);else if(Ni==="flipbevel"){if(Pn>100)Ur=Ar.mult(-1);else{var Yi=Pn*Ir.add(Ar).mag()/Ir.sub(Ar).mag();Ur._perp()._mult(Yi*(Bi?-1:1))}this.addCurrentVertex(bt,Ur,0,0,kt),this.addCurrentVertex(bt,Ur.mult(-1),0,0,kt)}else if(Ni==="bevel"||Ni==="fakeround"){var Xa=-Math.sqrt(Pn*Pn-1),ga=Bi?Xa:0,Ro=Bi?0:Xa;if(Yt&&this.addCurrentVertex(bt,Ir,ga,Ro,kt),Ni==="fakeround")for(var Ss=Math.round(oi*180/Math.PI/rJe),Do=1;Do<Ss;Do++){var Io=Do/Ss;if(Io!==.5){var Mo=Io-.5,Os=1.0904+Qr*(-3.2452+Qr*(3.55645-Qr*1.43519)),Ws=.848013+Qr*(-1.06021+Qr*.215638);Io=Io+Io*Mo*(Io-1)*(Os*Mo*Mo+Ws)}var ql=Ar.sub(Ir)._mult(Io)._add(Ir)._unit()._mult(Bi?-1:1);this.addHalfVertex(bt,ql.x,ql.y,!1,Bi,0,kt)}hr&&this.addCurrentVertex(bt,Ar,-ga,-Ro,kt)}else if(Ni==="butt")this.addCurrentVertex(bt,Ur,0,0,kt);else if(Ni==="square"){var Kl=Yt?1:-1;this.addCurrentVertex(bt,Ur,Kl,Kl,kt)}else Ni==="round"&&(Yt&&(this.addCurrentVertex(bt,Ir,0,0,kt),this.addCurrentVertex(bt,Ir,1,1,kt,!0)),hr&&(this.addCurrentVertex(bt,Ar,-1,-1,kt,!0),this.addCurrentVertex(bt,Ar,0,0,kt)));if(ti&&en<Fe-1){var _f=bt.dist(hr);if(_f>2*ct){var Pu=bt.add(hr.sub(bt)._mult(ct/_f)._round());this.updateDistance(bt,Pu),this.addCurrentVertex(Pu,Ar,0,0,kt),bt=Pu}}}}},ah.prototype.addCurrentVertex=function(m,L,q,Y,j,$){$===void 0&&($=!1);var pe=L.x+L.y*q,ke=L.y-L.x*q,Fe=-L.x+L.y*Y,Ne=-L.y-L.x*Y;this.addHalfVertex(m,pe,ke,$,!1,q,j),this.addHalfVertex(m,Fe,Ne,$,!0,-Y,j),this.distance>NK/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(m,L,q,Y,j,$))},ah.prototype.addHalfVertex=function(m,L,q,Y,j,$,pe){var ke=m.x,Fe=m.y,Ne=this.lineClips?this.scaledDistance*(NK-1):this.scaledDistance,ct=Ne*BK;if(this.layoutVertexArray.emplaceBack((ke<<1)+(Y?1:0),(Fe<<1)+(j?1:0),Math.round(OK*L)+128,Math.round(OK*q)+128,($===0?0:$<0?-1:1)+1|(ct&63)<<2,ct>>6),this.lineClips){var kt=this.scaledDistance-this.lineClips.start,bt=this.lineClips.end-this.lineClips.start,Yt=kt/bt;this.layoutVertexArray2.emplaceBack(Yt,this.lineClipsArray.length)}var hr=pe.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,hr),pe.primitiveLength++),j?this.e2=hr:this.e1=hr},ah.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},ah.prototype.updateDistance=function(m,L){this.distance+=m.dist(L),this.updateScaledDistance()},U("LineBucket",ah,{omit:["layers","patternFeatures"]});var iJe=new jr({"line-cap":new Ye(vn.layout_line["line-cap"]),"line-join":new Gt(vn.layout_line["line-join"]),"line-miter-limit":new Ye(vn.layout_line["line-miter-limit"]),"line-round-limit":new Ye(vn.layout_line["line-round-limit"]),"line-sort-key":new Gt(vn.layout_line["line-sort-key"])}),aJe=new jr({"line-opacity":new Gt(vn.paint_line["line-opacity"]),"line-color":new Gt(vn.paint_line["line-color"]),"line-translate":new Ye(vn.paint_line["line-translate"]),"line-translate-anchor":new Ye(vn.paint_line["line-translate-anchor"]),"line-width":new Gt(vn.paint_line["line-width"]),"line-gap-width":new Gt(vn.paint_line["line-gap-width"]),"line-offset":new Gt(vn.paint_line["line-offset"]),"line-blur":new Gt(vn.paint_line["line-blur"]),"line-dasharray":new Or(vn.paint_line["line-dasharray"]),"line-pattern":new lr(vn.paint_line["line-pattern"]),"line-gradient":new $r(vn.paint_line["line-gradient"])}),UK={paint:aJe,layout:iJe},oJe=function(y){function m(){y.apply(this,arguments)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.possiblyEvaluate=function(q,Y){return Y=new Sn(Math.floor(Y.zoom),{now:Y.now,fadeDuration:Y.fadeDuration,zoomHistory:Y.zoomHistory,transition:Y.transition}),y.prototype.possiblyEvaluate.call(this,q,Y)},m.prototype.evaluate=function(q,Y,j,$){return Y=x({},Y,{zoom:Math.floor(Y.zoom)}),y.prototype.evaluate.call(this,q,Y,j,$)},m}(Gt),VK=new oJe(UK.paint.properties["line-width"].specification);VK.useIntegerZoom=!0;var sJe=function(y){function m(L){y.call(this,L,UK),this.gradientVersion=0}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype._handleSpecialPaintPropertyUpdate=function(q){if(q==="line-gradient"){var Y=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=Y._styleExpression.expression instanceof Dl,this.gradientVersion=(this.gradientVersion+1)%v}},m.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},m.prototype.recalculate=function(q,Y){y.prototype.recalculate.call(this,q,Y),this.paint._values["line-floorwidth"]=VK.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,q)},m.prototype.createBucket=function(q){return new ah(q)},m.prototype.queryRadius=function(q){var Y=q,j=HK(ih("line-width",this,Y),ih("line-gap-width",this,Y)),$=ih("line-offset",this,Y);return j/2+Math.abs($)+Ad(this.paint.get("line-translate"))},m.prototype.queryIntersectsFeature=function(q,Y,j,$,pe,ke,Fe){var Ne=Xp(q,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),ke.angle,Fe),ct=Fe/2*HK(this.paint.get("line-width").evaluate(Y,j),this.paint.get("line-gap-width").evaluate(Y,j)),kt=this.paint.get("line-offset").evaluate(Y,j);return kt&&($=lJe($,kt*Fe)),ml(Ne,$,ct)},m.prototype.isTileClipped=function(){return!0},m}(xn);function HK(y,m){return m>0?m+2*y:y}function lJe(y,m){for(var L=[],q=new u(0,0),Y=0;Y<y.length;Y++){for(var j=y[Y],$=[],pe=0;pe<j.length;pe++){var ke=j[pe-1],Fe=j[pe],Ne=j[pe+1],ct=pe===0?q:Fe.sub(ke)._unit()._perp(),kt=pe===j.length-1?q:Ne.sub(Fe)._unit()._perp(),bt=ct._add(kt)._unit(),Yt=bt.x*kt.x+bt.y*kt.y;bt._mult(1/Yt),$.push(bt._mult(m)._add(Fe))}L.push($)}return L}var uJe=Bn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),fJe=Bn([{name:"a_projected_pos",components:3,type:"Float32"}],4),kQt=Bn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),cJe=Bn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),CQt=Bn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),GK=Bn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),hJe=Bn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4),LQt=Bn([{name:"triangle",components:3,type:"Uint16"}]),PQt=Bn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),RQt=Bn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),DQt=Bn([{type:"Float32",name:"offsetX"}]),IQt=Bn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function vJe(y,m,L){var q=m.layout.get("text-transform").evaluate(L,{});return q==="uppercase"?y=y.toLocaleUpperCase():q==="lowercase"&&(y=y.toLocaleLowerCase()),Po.applyArabicShaping&&(y=Po.applyArabicShaping(y)),y}function dJe(y,m,L){return y.sections.forEach(function(q){q.text=vJe(q.text,m,L)}),y}function pJe(y){var m={},L={},q=[],Y=0;function j(Ar){q.push(y[Ar]),Y++}function $(Ar,en,Ur){var Qr=L[Ar];return delete L[Ar],L[en]=Qr,q[Qr].geometry[0].pop(),q[Qr].geometry[0]=q[Qr].geometry[0].concat(Ur[0]),Qr}function pe(Ar,en,Ur){var Qr=m[en];return delete m[en],m[Ar]=Qr,q[Qr].geometry[0].shift(),q[Qr].geometry[0]=Ur[0].concat(q[Qr].geometry[0]),Qr}function ke(Ar,en,Ur){var Qr=Ur?en[0][en[0].length-1]:en[0][0];return Ar+":"+Qr.x+":"+Qr.y}for(var Fe=0;Fe<y.length;Fe++){var Ne=y[Fe],ct=Ne.geometry,kt=Ne.text?Ne.text.toString():null;if(!kt){j(Fe);continue}var bt=ke(kt,ct),Yt=ke(kt,ct,!0);if(bt in L&&Yt in m&&L[bt]!==m[Yt]){var hr=pe(bt,Yt,ct),Ir=$(bt,Yt,q[hr].geometry);delete m[bt],delete L[Yt],L[ke(kt,q[Ir].geometry,!0)]=Ir,q[hr].geometry=null}else bt in L?$(bt,Yt,ct):Yt in m?pe(bt,Yt,ct):(j(Fe),m[bt]=Y-1,L[Yt]=Y-1)}return q.filter(function(Ar){return Ar.geometry})}var jT={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function gJe(y){for(var m="",L=0;L<y.length;L++){var q=y.charCodeAt(L+1)||null,Y=y.charCodeAt(L-1)||null,j=(!q||!Er(q)||jT[y[L+1]])&&(!Y||!Er(Y)||jT[y[L-1]]);j&&jT[y[L]]?m+=jT[y[L]]:m+=y[L]}return m}var Wf=24,yJe=function(y,m,L,q,Y){var j,$,pe=Y*8-q-1,ke=(1<<pe)-1,Fe=ke>>1,Ne=-7,ct=L?Y-1:0,kt=L?-1:1,bt=y[m+ct];for(ct+=kt,j=bt&(1<<-Ne)-1,bt>>=-Ne,Ne+=pe;Ne>0;j=j*256+y[m+ct],ct+=kt,Ne-=8);for($=j&(1<<-Ne)-1,j>>=-Ne,Ne+=q;Ne>0;$=$*256+y[m+ct],ct+=kt,Ne-=8);if(j===0)j=1-Fe;else{if(j===ke)return $?NaN:(bt?-1:1)*(1/0);$=$+Math.pow(2,q),j=j-Fe}return(bt?-1:1)*$*Math.pow(2,j-q)},mJe=function(y,m,L,q,Y,j){var $,pe,ke,Fe=j*8-Y-1,Ne=(1<<Fe)-1,ct=Ne>>1,kt=Y===23?Math.pow(2,-24)-Math.pow(2,-77):0,bt=q?0:j-1,Yt=q?1:-1,hr=m<0||m===0&&1/m<0?1:0;for(m=Math.abs(m),isNaN(m)||m===1/0?(pe=isNaN(m)?1:0,$=Ne):($=Math.floor(Math.log(m)/Math.LN2),m*(ke=Math.pow(2,-$))<1&&($--,ke*=2),$+ct>=1?m+=kt/ke:m+=kt*Math.pow(2,1-ct),m*ke>=2&&($++,ke/=2),$+ct>=Ne?(pe=0,$=Ne):$+ct>=1?(pe=(m*ke-1)*Math.pow(2,Y),$=$+ct):(pe=m*Math.pow(2,ct-1)*Math.pow(2,Y),$=0));Y>=8;y[L+bt]=pe&255,bt+=Yt,pe/=256,Y-=8);for($=$<<Y|pe,Fe+=Y;Fe>0;y[L+bt]=$&255,bt+=Yt,$/=256,Fe-=8);y[L+bt-Yt]|=hr*128},nk={read:yJe,write:mJe},ik=Ys;function Ys(y){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(y)?y:new Uint8Array(y||0),this.pos=0,this.type=0,this.length=this.buf.length}Ys.Varint=0,Ys.Fixed64=1,Ys.Bytes=2,Ys.Fixed32=5;var H8=65536*65536,YK=1/H8,xJe=12,WK=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");Ys.prototype={destroy:function(){this.buf=null},readFields:function(y,m,L){for(L=L||this.length;this.pos<L;){var q=this.readVarint(),Y=q>>3,j=this.pos;this.type=q&7,y(Y,m,this),this.pos===j&&this.skip(q)}return m},readMessage:function(y,m){return this.readFields(y,m,this.readVarint()+this.pos)},readFixed32:function(){var y=ak(this.buf,this.pos);return this.pos+=4,y},readSFixed32:function(){var y=ZK(this.buf,this.pos);return this.pos+=4,y},readFixed64:function(){var y=ak(this.buf,this.pos)+ak(this.buf,this.pos+4)*H8;return this.pos+=8,y},readSFixed64:function(){var y=ak(this.buf,this.pos)+ZK(this.buf,this.pos+4)*H8;return this.pos+=8,y},readFloat:function(){var y=nk.read(this.buf,this.pos,!0,23,4);return this.pos+=4,y},readDouble:function(){var y=nk.read(this.buf,this.pos,!0,52,8);return this.pos+=8,y},readVarint:function(y){var m=this.buf,L,q;return q=m[this.pos++],L=q&127,q<128||(q=m[this.pos++],L|=(q&127)<<7,q<128)||(q=m[this.pos++],L|=(q&127)<<14,q<128)||(q=m[this.pos++],L|=(q&127)<<21,q<128)?L:(q=m[this.pos],L|=(q&15)<<28,_Je(L,y,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var y=this.readVarint();return y%2===1?(y+1)/-2:y/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var y=this.readVarint()+this.pos,m=this.pos;return this.pos=y,y-m>=xJe&&WK?IJe(this.buf,m,y):DJe(this.buf,m,y)},readBytes:function(){var y=this.readVarint()+this.pos,m=this.buf.subarray(this.pos,y);return this.pos=y,m},readPackedVarint:function(y,m){if(this.type!==Ys.Bytes)return y.push(this.readVarint(m));var L=Sg(this);for(y=y||[];this.pos<L;)y.push(this.readVarint(m));return y},readPackedSVarint:function(y){if(this.type!==Ys.Bytes)return y.push(this.readSVarint());var m=Sg(this);for(y=y||[];this.pos<m;)y.push(this.readSVarint());return y},readPackedBoolean:function(y){if(this.type!==Ys.Bytes)return y.push(this.readBoolean());var m=Sg(this);for(y=y||[];this.pos<m;)y.push(this.readBoolean());return y},readPackedFloat:function(y){if(this.type!==Ys.Bytes)return y.push(this.readFloat());var m=Sg(this);for(y=y||[];this.pos<m;)y.push(this.readFloat());return y},readPackedDouble:function(y){if(this.type!==Ys.Bytes)return y.push(this.readDouble());var m=Sg(this);for(y=y||[];this.pos<m;)y.push(this.readDouble());return y},readPackedFixed32:function(y){if(this.type!==Ys.Bytes)return y.push(this.readFixed32());var m=Sg(this);for(y=y||[];this.pos<m;)y.push(this.readFixed32());return y},readPackedSFixed32:function(y){if(this.type!==Ys.Bytes)return y.push(this.readSFixed32());var m=Sg(this);for(y=y||[];this.pos<m;)y.push(this.readSFixed32());return y},readPackedFixed64:function(y){if(this.type!==Ys.Bytes)return y.push(this.readFixed64());var m=Sg(this);for(y=y||[];this.pos<m;)y.push(this.readFixed64());return y},readPackedSFixed64:function(y){if(this.type!==Ys.Bytes)return y.push(this.readSFixed64());var m=Sg(this);for(y=y||[];this.pos<m;)y.push(this.readSFixed64());return y},skip:function(y){var m=y&7;if(m===Ys.Varint)for(;this.buf[this.pos++]>127;);else if(m===Ys.Bytes)this.pos=this.readVarint()+this.pos;else if(m===Ys.Fixed32)this.pos+=4;else if(m===Ys.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+m)},writeTag:function(y,m){this.writeVarint(y<<3|m)},realloc:function(y){for(var m=this.length||16;m<this.pos+y;)m*=2;if(m!==this.length){var L=new Uint8Array(m);L.set(this.buf),this.buf=L,this.length=m}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(y){this.realloc(4),Rb(this.buf,y,this.pos),this.pos+=4},writeSFixed32:function(y){this.realloc(4),Rb(this.buf,y,this.pos),this.pos+=4},writeFixed64:function(y){this.realloc(8),Rb(this.buf,y&-1,this.pos),Rb(this.buf,Math.floor(y*YK),this.pos+4),this.pos+=8},writeSFixed64:function(y){this.realloc(8),Rb(this.buf,y&-1,this.pos),Rb(this.buf,Math.floor(y*YK),this.pos+4),this.pos+=8},writeVarint:function(y){if(y=+y||0,y>268435455||y<0){bJe(y,this);return}this.realloc(4),this.buf[this.pos++]=y&127|(y>127?128:0),!(y<=127)&&(this.buf[this.pos++]=(y>>>=7)&127|(y>127?128:0),!(y<=127)&&(this.buf[this.pos++]=(y>>>=7)&127|(y>127?128:0),!(y<=127)&&(this.buf[this.pos++]=y>>>7&127)))},writeSVarint:function(y){this.writeVarint(y<0?-y*2-1:y*2)},writeBoolean:function(y){this.writeVarint(!!y)},writeString:function(y){y=String(y),this.realloc(y.length*4),this.pos++;var m=this.pos;this.pos=FJe(this.buf,y,this.pos);var L=this.pos-m;L>=128&&XK(m,L,this),this.pos=m-1,this.writeVarint(L),this.pos+=L},writeFloat:function(y){this.realloc(4),nk.write(this.buf,y,this.pos,!0,23,4),this.pos+=4},writeDouble:function(y){this.realloc(8),nk.write(this.buf,y,this.pos,!0,52,8),this.pos+=8},writeBytes:function(y){var m=y.length;this.writeVarint(m),this.realloc(m);for(var L=0;L<m;L++)this.buf[this.pos++]=y[L]},writeRawMessage:function(y,m){this.pos++;var L=this.pos;y(m,this);var q=this.pos-L;q>=128&&XK(L,q,this),this.pos=L-1,this.writeVarint(q),this.pos+=q},writeMessage:function(y,m,L){this.writeTag(y,Ys.Bytes),this.writeRawMessage(m,L)},writePackedVarint:function(y,m){m.length&&this.writeMessage(y,AJe,m)},writePackedSVarint:function(y,m){m.length&&this.writeMessage(y,MJe,m)},writePackedBoolean:function(y,m){m.length&&this.writeMessage(y,kJe,m)},writePackedFloat:function(y,m){m.length&&this.writeMessage(y,SJe,m)},writePackedDouble:function(y,m){m.length&&this.writeMessage(y,EJe,m)},writePackedFixed32:function(y,m){m.length&&this.writeMessage(y,CJe,m)},writePackedSFixed32:function(y,m){m.length&&this.writeMessage(y,LJe,m)},writePackedFixed64:function(y,m){m.length&&this.writeMessage(y,PJe,m)},writePackedSFixed64:function(y,m){m.length&&this.writeMessage(y,RJe,m)},writeBytesField:function(y,m){this.writeTag(y,Ys.Bytes),this.writeBytes(m)},writeFixed32Field:function(y,m){this.writeTag(y,Ys.Fixed32),this.writeFixed32(m)},writeSFixed32Field:function(y,m){this.writeTag(y,Ys.Fixed32),this.writeSFixed32(m)},writeFixed64Field:function(y,m){this.writeTag(y,Ys.Fixed64),this.writeFixed64(m)},writeSFixed64Field:function(y,m){this.writeTag(y,Ys.Fixed64),this.writeSFixed64(m)},writeVarintField:function(y,m){this.writeTag(y,Ys.Varint),this.writeVarint(m)},writeSVarintField:function(y,m){this.writeTag(y,Ys.Varint),this.writeSVarint(m)},writeStringField:function(y,m){this.writeTag(y,Ys.Bytes),this.writeString(m)},writeFloatField:function(y,m){this.writeTag(y,Ys.Fixed32),this.writeFloat(m)},writeDoubleField:function(y,m){this.writeTag(y,Ys.Fixed64),this.writeDouble(m)},writeBooleanField:function(y,m){this.writeVarintField(y,!!m)}};function _Je(y,m,L){var q=L.buf,Y,j;if(j=q[L.pos++],Y=(j&112)>>4,j<128||(j=q[L.pos++],Y|=(j&127)<<3,j<128)||(j=q[L.pos++],Y|=(j&127)<<10,j<128)||(j=q[L.pos++],Y|=(j&127)<<17,j<128)||(j=q[L.pos++],Y|=(j&127)<<24,j<128)||(j=q[L.pos++],Y|=(j&1)<<31,j<128))return Pb(y,Y,m);throw new Error("Expected varint not more than 10 bytes")}function Sg(y){return y.type===Ys.Bytes?y.readVarint()+y.pos:y.pos+1}function Pb(y,m,L){return L?m*4294967296+(y>>>0):(m>>>0)*4294967296+(y>>>0)}function bJe(y,m){var L,q;if(y>=0?(L=y%4294967296|0,q=y/4294967296|0):(L=~(-y%4294967296),q=~(-y/4294967296),L^4294967295?L=L+1|0:(L=0,q=q+1|0)),y>=18446744073709552e3||y<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");m.realloc(10),wJe(L,q,m),TJe(q,m)}function wJe(y,m,L){L.buf[L.pos++]=y&127|128,y>>>=7,L.buf[L.pos++]=y&127|128,y>>>=7,L.buf[L.pos++]=y&127|128,y>>>=7,L.buf[L.pos++]=y&127|128,y>>>=7,L.buf[L.pos]=y&127}function TJe(y,m){var L=(y&7)<<4;m.buf[m.pos++]|=L|((y>>>=3)?128:0),y&&(m.buf[m.pos++]=y&127|((y>>>=7)?128:0),y&&(m.buf[m.pos++]=y&127|((y>>>=7)?128:0),y&&(m.buf[m.pos++]=y&127|((y>>>=7)?128:0),y&&(m.buf[m.pos++]=y&127|((y>>>=7)?128:0),y&&(m.buf[m.pos++]=y&127)))))}function XK(y,m,L){var q=m<=16383?1:m<=2097151?2:m<=268435455?3:Math.floor(Math.log(m)/(Math.LN2*7));L.realloc(q);for(var Y=L.pos-1;Y>=y;Y--)L.buf[Y+q]=L.buf[Y]}function AJe(y,m){for(var L=0;L<y.length;L++)m.writeVarint(y[L])}function MJe(y,m){for(var L=0;L<y.length;L++)m.writeSVarint(y[L])}function SJe(y,m){for(var L=0;L<y.length;L++)m.writeFloat(y[L])}function EJe(y,m){for(var L=0;L<y.length;L++)m.writeDouble(y[L])}function kJe(y,m){for(var L=0;L<y.length;L++)m.writeBoolean(y[L])}function CJe(y,m){for(var L=0;L<y.length;L++)m.writeFixed32(y[L])}function LJe(y,m){for(var L=0;L<y.length;L++)m.writeSFixed32(y[L])}function PJe(y,m){for(var L=0;L<y.length;L++)m.writeFixed64(y[L])}function RJe(y,m){for(var L=0;L<y.length;L++)m.writeSFixed64(y[L])}function ak(y,m){return(y[m]|y[m+1]<<8|y[m+2]<<16)+y[m+3]*16777216}function Rb(y,m,L){y[L]=m,y[L+1]=m>>>8,y[L+2]=m>>>16,y[L+3]=m>>>24}function ZK(y,m){return(y[m]|y[m+1]<<8|y[m+2]<<16)+(y[m+3]<<24)}function DJe(y,m,L){for(var q="",Y=m;Y<L;){var j=y[Y],$=null,pe=j>239?4:j>223?3:j>191?2:1;if(Y+pe>L)break;var ke,Fe,Ne;pe===1?j<128&&($=j):pe===2?(ke=y[Y+1],(ke&192)===128&&($=(j&31)<<6|ke&63,$<=127&&($=null))):pe===3?(ke=y[Y+1],Fe=y[Y+2],(ke&192)===128&&(Fe&192)===128&&($=(j&15)<<12|(ke&63)<<6|Fe&63,($<=2047||$>=55296&&$<=57343)&&($=null))):pe===4&&(ke=y[Y+1],Fe=y[Y+2],Ne=y[Y+3],(ke&192)===128&&(Fe&192)===128&&(Ne&192)===128&&($=(j&15)<<18|(ke&63)<<12|(Fe&63)<<6|Ne&63,($<=65535||$>=1114112)&&($=null))),$===null?($=65533,pe=1):$>65535&&($-=65536,q+=String.fromCharCode($>>>10&1023|55296),$=56320|$&1023),q+=String.fromCharCode($),Y+=pe}return q}function IJe(y,m,L){return WK.decode(y.subarray(m,L))}function FJe(y,m,L){for(var q=0,Y,j;q<m.length;q++){if(Y=m.charCodeAt(q),Y>55295&&Y<57344)if(j)if(Y<56320){y[L++]=239,y[L++]=191,y[L++]=189,j=Y;continue}else Y=j-55296<<10|Y-56320|65536,j=null;else{Y>56319||q+1===m.length?(y[L++]=239,y[L++]=191,y[L++]=189):j=Y;continue}else j&&(y[L++]=239,y[L++]=191,y[L++]=189,j=null);Y<128?y[L++]=Y:(Y<2048?y[L++]=Y>>6|192:(Y<65536?y[L++]=Y>>12|224:(y[L++]=Y>>18|240,y[L++]=Y>>12&63|128),y[L++]=Y>>6&63|128),y[L++]=Y&63|128)}return L}var G8=3;function qJe(y,m,L){y===1&&L.readMessage(zJe,m)}function zJe(y,m,L){if(y===3){var q=L.readMessage(OJe,{}),Y=q.id,j=q.bitmap,$=q.width,pe=q.height,ke=q.left,Fe=q.top,Ne=q.advance;m.push({id:Y,bitmap:new W1({width:$+2*G8,height:pe+2*G8},j),metrics:{width:$,height:pe,left:ke,top:Fe,advance:Ne}})}}function OJe(y,m,L){y===1?m.id=L.readVarint():y===2?m.bitmap=L.readBytes():y===3?m.width=L.readVarint():y===4?m.height=L.readVarint():y===5?m.left=L.readSVarint():y===6?m.top=L.readSVarint():y===7&&(m.advance=L.readVarint())}function BJe(y){return new ik(y).readFields(qJe,[])}var jK=G8;function KK(y){for(var m=0,L=0,q=0,Y=y;q<Y.length;q+=1){var j=Y[q];m+=j.w*j.h,L=Math.max(L,j.w)}y.sort(function(Ir,Ar){return Ar.h-Ir.h});for(var $=Math.max(Math.ceil(Math.sqrt(m/.95)),L),pe=[{x:0,y:0,w:$,h:1/0}],ke=0,Fe=0,Ne=0,ct=y;Ne<ct.length;Ne+=1)for(var kt=ct[Ne],bt=pe.length-1;bt>=0;bt--){var Yt=pe[bt];if(!(kt.w>Yt.w||kt.h>Yt.h)){if(kt.x=Yt.x,kt.y=Yt.y,Fe=Math.max(Fe,kt.y+kt.h),ke=Math.max(ke,kt.x+kt.w),kt.w===Yt.w&&kt.h===Yt.h){var hr=pe.pop();bt<pe.length&&(pe[bt]=hr)}else kt.h===Yt.h?(Yt.x+=kt.w,Yt.w-=kt.w):kt.w===Yt.w?(Yt.y+=kt.h,Yt.h-=kt.h):(pe.push({x:Yt.x+kt.w,y:Yt.y,w:Yt.w-kt.w,h:kt.h}),Yt.y+=kt.h,Yt.h-=kt.h);break}}return{w:ke,h:Fe,fill:m/(ke*Fe)||0}}var dv=1,ok=function(m,L){var q=L.pixelRatio,Y=L.version,j=L.stretchX,$=L.stretchY,pe=L.content;this.paddedRect=m,this.pixelRatio=q,this.stretchX=j,this.stretchY=$,this.content=pe,this.version=Y},KT={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};KT.tl.get=function(){return[this.paddedRect.x+dv,this.paddedRect.y+dv]},KT.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-dv,this.paddedRect.y+this.paddedRect.h-dv]},KT.tlbr.get=function(){return this.tl.concat(this.br)},KT.displaySize.get=function(){return[(this.paddedRect.w-dv*2)/this.pixelRatio,(this.paddedRect.h-dv*2)/this.pixelRatio]},Object.defineProperties(ok.prototype,KT);var JT=function(m,L){var q={},Y={};this.haveRenderCallbacks=[];var j=[];this.addImages(m,q,j),this.addImages(L,Y,j);var $=KK(j),pe=$.w,ke=$.h,Fe=new Nh({width:pe||1,height:ke||1});for(var Ne in m){var ct=m[Ne],kt=q[Ne].paddedRect;Nh.copy(ct.data,Fe,{x:0,y:0},{x:kt.x+dv,y:kt.y+dv},ct.data)}for(var bt in L){var Yt=L[bt],hr=Y[bt].paddedRect,Ir=hr.x+dv,Ar=hr.y+dv,en=Yt.data.width,Ur=Yt.data.height;Nh.copy(Yt.data,Fe,{x:0,y:0},{x:Ir,y:Ar},Yt.data),Nh.copy(Yt.data,Fe,{x:0,y:Ur-1},{x:Ir,y:Ar-1},{width:en,height:1}),Nh.copy(Yt.data,Fe,{x:0,y:0},{x:Ir,y:Ar+Ur},{width:en,height:1}),Nh.copy(Yt.data,Fe,{x:en-1,y:0},{x:Ir-1,y:Ar},{width:1,height:Ur}),Nh.copy(Yt.data,Fe,{x:0,y:0},{x:Ir+en,y:Ar},{width:1,height:Ur})}this.image=Fe,this.iconPositions=q,this.patternPositions=Y};JT.prototype.addImages=function(m,L,q){for(var Y in m){var j=m[Y],$={x:0,y:0,w:j.data.width+2*dv,h:j.data.height+2*dv};q.push($),L[Y]=new ok($,j),j.hasRenderCallback&&this.haveRenderCallbacks.push(Y)}},JT.prototype.patchUpdatedImages=function(m,L){m.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var q in m.updatedImages)this.patchUpdatedImage(this.iconPositions[q],m.getImage(q),L),this.patchUpdatedImage(this.patternPositions[q],m.getImage(q),L)},JT.prototype.patchUpdatedImage=function(m,L,q){if(!(!m||!L)&&m.version!==L.version){m.version=L.version;var Y=m.tl,j=Y[0],$=Y[1];q.update(L.data,void 0,{x:j,y:$})}},U("ImagePosition",ok),U("ImageAtlas",JT);var Zv={horizontal:1,vertical:2,horizontalOnly:3},QT=-17;function NJe(y){for(var m=0,L=y;m<L.length;m+=1){var q=L[m];if(q.positionedGlyphs.length!==0)return!1}return!0}var JK=57344,QK=63743,Db=function(){this.scale=1,this.fontStack="",this.imageName=null};Db.forText=function(m,L){var q=new Db;return q.scale=m||1,q.fontStack=L,q},Db.forImage=function(m){var L=new Db;return L.imageName=m,L};var Ic=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};Ic.fromFeature=function(m,L){for(var q=new Ic,Y=0;Y<m.sections.length;Y++){var j=m.sections[Y];j.image?q.addImageSection(j):q.addTextSection(j,L)}return q},Ic.prototype.length=function(){return this.text.length},Ic.prototype.getSection=function(m){return this.sections[this.sectionIndex[m]]},Ic.prototype.getSectionIndex=function(m){return this.sectionIndex[m]},Ic.prototype.getCharCode=function(m){return this.text.charCodeAt(m)},Ic.prototype.verticalizePunctuation=function(){this.text=gJe(this.text)},Ic.prototype.trim=function(){for(var m=0,L=0;L<this.text.length&&R0[this.text.charCodeAt(L)];L++)m++;for(var q=this.text.length,Y=this.text.length-1;Y>=0&&Y>=m&&R0[this.text.charCodeAt(Y)];Y--)q--;this.text=this.text.substring(m,q),this.sectionIndex=this.sectionIndex.slice(m,q)},Ic.prototype.substring=function(m,L){var q=new Ic;return q.text=this.text.substring(m,L),q.sectionIndex=this.sectionIndex.slice(m,L),q.sections=this.sections,q},Ic.prototype.toString=function(){return this.text},Ic.prototype.getMaxScale=function(){var m=this;return this.sectionIndex.reduce(function(L,q){return Math.max(L,m.sections[q].scale)},0)},Ic.prototype.addTextSection=function(m,L){this.text+=m.text,this.sections.push(Db.forText(m.scale,m.fontStack||L));for(var q=this.sections.length-1,Y=0;Y<m.text.length;++Y)this.sectionIndex.push(q)},Ic.prototype.addImageSection=function(m){var L=m.image?m.image.name:"";if(L.length===0){Z("Can't add FormattedSection with an empty image.");return}var q=this.getNextImageSectionCharCode();if(!q){Z("Reached maximum number of images "+(QK-JK+2));return}this.text+=String.fromCharCode(q),this.sections.push(Db.forImage(L)),this.sectionIndex.push(this.sections.length-1)},Ic.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=QK?null:++this.imageSectionID:(this.imageSectionID=JK,this.imageSectionID)};function UJe(y,m){for(var L=[],q=y.text,Y=0,j=0,$=m;j<$.length;j+=1){var pe=$[j];L.push(y.substring(Y,pe)),Y=pe}return Y<q.length&&L.push(y.substring(Y,q.length)),L}function sk(y,m,L,q,Y,j,$,pe,ke,Fe,Ne,ct,kt,bt,Yt,hr){var Ir=Ic.fromFeature(y,Y);ct===Zv.vertical&&Ir.verticalizePunctuation();var Ar,en=Po.processBidirectionalText,Ur=Po.processStyledBidirectionalText;if(en&&Ir.sections.length===1){Ar=[];for(var Qr=en(Ir.toString(),Y8(Ir,Fe,j,m,q,bt,Yt)),on=0,Pn=Qr;on<Pn.length;on+=1){var oi=Pn[on],ti=new Ic;ti.text=oi,ti.sections=Ir.sections;for(var Bi=0;Bi<oi.length;Bi++)ti.sectionIndex.push(0);Ar.push(ti)}}else if(Ur){Ar=[];for(var Ti=Ur(Ir.text,Ir.sectionIndex,Y8(Ir,Fe,j,m,q,bt,Yt)),Ri=0,wa=Ti;Ri<wa.length;Ri+=1){var Ni=wa[Ri],Yi=new Ic;Yi.text=Ni[0],Yi.sectionIndex=Ni[1],Yi.sections=Ir.sections,Ar.push(Yi)}}else Ar=UJe(Ir,Y8(Ir,Fe,j,m,q,bt,Yt));var Xa=[],ga={positionedLines:Xa,text:Ir.toString(),top:Ne[1],bottom:Ne[1],left:Ne[0],right:Ne[0],writingMode:ct,iconsInText:!1,verticalizable:!1};return GJe(ga,m,L,q,Ar,$,pe,ke,ct,Fe,kt,hr),NJe(Xa)?!1:ga}var R0={};R0[9]=!0,R0[10]=!0,R0[11]=!0,R0[12]=!0,R0[13]=!0,R0[32]=!0;var pv={};pv[10]=!0,pv[32]=!0,pv[38]=!0,pv[40]=!0,pv[41]=!0,pv[43]=!0,pv[45]=!0,pv[47]=!0,pv[173]=!0,pv[183]=!0,pv[8203]=!0,pv[8208]=!0,pv[8211]=!0,pv[8231]=!0;function $K(y,m,L,q,Y,j){if(m.imageName){var ke=q[m.imageName];return ke?ke.displaySize[0]*m.scale*Wf/j+Y:0}else{var $=L[m.fontStack],pe=$&&$[y];return pe?pe.metrics.advance*m.scale+Y:0}}function VJe(y,m,L,q,Y,j){for(var $=0,pe=0;pe<y.length();pe++){var ke=y.getSection(pe);$+=$K(y.getCharCode(pe),ke,q,Y,m,j)}var Fe=Math.max(1,Math.ceil($/L));return $/Fe}function eJ(y,m,L,q){var Y=Math.pow(y-m,2);return q?y<m?Y/2:Y*2:Y+Math.abs(L)*L}function HJe(y,m,L){var q=0;return y===10&&(q-=1e4),L&&(q+=150),(y===40||y===65288)&&(q+=50),(m===41||m===65289)&&(q+=50),q}function tJ(y,m,L,q,Y,j){for(var $=null,pe=eJ(m,L,Y,j),ke=0,Fe=q;ke<Fe.length;ke+=1){var Ne=Fe[ke],ct=m-Ne.x,kt=eJ(ct,L,Y,j)+Ne.badness;kt<=pe&&($=Ne,pe=kt)}return{index:y,x:m,priorBreak:$,badness:pe}}function rJ(y){return y?rJ(y.priorBreak).concat(y.index):[]}function Y8(y,m,L,q,Y,j,$){if(j!=="point")return[];if(!y)return[];for(var pe=[],ke=VJe(y,m,L,q,Y,$),Fe=y.text.indexOf("\u200B")>=0,Ne=0,ct=0;ct<y.length();ct++){var kt=y.getSection(ct),bt=y.getCharCode(ct);if(R0[bt]||(Ne+=$K(bt,kt,q,Y,m,$)),ct<y.length()-1){var Yt=rr(bt);(pv[bt]||Yt||kt.imageName)&&pe.push(tJ(ct+1,Ne,ke,pe,HJe(bt,y.getCharCode(ct+1),Yt&&Fe),!1))}}return rJ(tJ(y.length(),Ne,ke,pe,0,!0))}function W8(y){var m=.5,L=.5;switch(y){case"right":case"top-right":case"bottom-right":m=1;break;case"left":case"top-left":case"bottom-left":m=0;break}switch(y){case"bottom":case"bottom-right":case"bottom-left":L=1;break;case"top":case"top-right":case"top-left":L=0;break}return{horizontalAlign:m,verticalAlign:L}}function GJe(y,m,L,q,Y,j,$,pe,ke,Fe,Ne,ct){for(var kt=0,bt=QT,Yt=0,hr=0,Ir=pe==="right"?1:pe==="left"?0:.5,Ar=0,en=0,Ur=Y;en<Ur.length;en+=1){var Qr=Ur[en];Qr.trim();var on=Qr.getMaxScale(),Pn=(on-1)*Wf,oi={positionedGlyphs:[],lineOffset:0};y.positionedLines[Ar]=oi;var ti=oi.positionedGlyphs,Bi=0;if(!Qr.length()){bt+=j,++Ar;continue}for(var Ti=0;Ti<Qr.length();Ti++){var Ri=Qr.getSection(Ti),wa=Qr.getSectionIndex(Ti),Ni=Qr.getCharCode(Ti),Yi=0,Xa=null,ga=null,Ro=null,Ss=Wf,Do=!(ke===Zv.horizontal||!Ne&&!tr(Ni)||Ne&&(R0[Ni]||ir(Ni)));if(Ri.imageName){var ql=q[Ri.imageName];if(!ql)continue;Ro=Ri.imageName,y.iconsInText=y.iconsInText||!0,ga=ql.paddedRect;var Kl=ql.displaySize;Ri.scale=Ri.scale*Wf/ct,Xa={width:Kl[0],height:Kl[1],left:dv,top:-jK,advance:Do?Kl[1]:Kl[0]};var _f=Wf-Kl[1]*Ri.scale;Yi=Pn+_f,Ss=Xa.advance;var Pu=Do?Kl[0]*Ri.scale-Wf*on:Kl[1]*Ri.scale-Wf*on;Pu>0&&Pu>Bi&&(Bi=Pu)}else{var Io=L[Ri.fontStack],Mo=Io&&Io[Ni];if(Mo&&Mo.rect)ga=Mo.rect,Xa=Mo.metrics;else{var Os=m[Ri.fontStack],Ws=Os&&Os[Ni];if(!Ws)continue;Xa=Ws.metrics}Yi=(on-Ri.scale)*Wf}Do?(y.verticalizable=!0,ti.push({glyph:Ni,imageName:Ro,x:kt,y:bt+Yi,vertical:Do,scale:Ri.scale,fontStack:Ri.fontStack,sectionIndex:wa,metrics:Xa,rect:ga}),kt+=Ss*Ri.scale+Fe):(ti.push({glyph:Ni,imageName:Ro,x:kt,y:bt+Yi,vertical:Do,scale:Ri.scale,fontStack:Ri.fontStack,sectionIndex:wa,metrics:Xa,rect:ga}),kt+=Xa.advance*Ri.scale+Fe)}if(ti.length!==0){var Fc=kt-Fe;Yt=Math.max(Fc,Yt),YJe(ti,0,ti.length-1,Ir,Bi)}kt=0;var qc=j*on+Bi;oi.lineOffset=Math.max(Bi,Pn),bt+=qc,hr=Math.max(qc,hr),++Ar}var bf=bt-QT,oh=W8($),sh=oh.horizontalAlign,ju=oh.verticalAlign;WJe(y.positionedLines,Ir,sh,ju,Yt,hr,j,bf,Y.length),y.top+=-ju*bf,y.bottom=y.top+bf,y.left+=-sh*Yt,y.right=y.left+Yt}function YJe(y,m,L,q,Y){if(!(!q&&!Y))for(var j=y[L],$=j.metrics.advance*j.scale,pe=(y[L].x+$)*q,ke=m;ke<=L;ke++)y[ke].x-=pe,y[ke].y+=Y}function WJe(y,m,L,q,Y,j,$,pe,ke){var Fe=(m-L)*Y,Ne=0;j!==$?Ne=-pe*q-QT:Ne=(-q*ke+.5)*$;for(var ct=0,kt=y;ct<kt.length;ct+=1)for(var bt=kt[ct],Yt=0,hr=bt.positionedGlyphs;Yt<hr.length;Yt+=1){var Ir=hr[Yt];Ir.x+=Fe,Ir.y+=Ne}}function XJe(y,m,L){var q=W8(L),Y=q.horizontalAlign,j=q.verticalAlign,$=m[0],pe=m[1],ke=$-y.displaySize[0]*Y,Fe=ke+y.displaySize[0],Ne=pe-y.displaySize[1]*j,ct=Ne+y.displaySize[1];return{image:y,top:Ne,bottom:ct,left:ke,right:Fe}}function nJ(y,m,L,q,Y,j){var $=y.image,pe;if($.content){var ke=$.content,Fe=$.pixelRatio||1;pe=[ke[0]/Fe,ke[1]/Fe,$.displaySize[0]-ke[2]/Fe,$.displaySize[1]-ke[3]/Fe]}var Ne=m.left*j,ct=m.right*j,kt,bt,Yt,hr;L==="width"||L==="both"?(hr=Y[0]+Ne-q[3],bt=Y[0]+ct+q[1]):(hr=Y[0]+(Ne+ct-$.displaySize[0])/2,bt=hr+$.displaySize[0]);var Ir=m.top*j,Ar=m.bottom*j;return L==="height"||L==="both"?(kt=Y[1]+Ir-q[0],Yt=Y[1]+Ar+q[2]):(kt=Y[1]+(Ir+Ar-$.displaySize[1])/2,Yt=kt+$.displaySize[1]),{image:$,top:kt,right:bt,bottom:Yt,left:hr,collisionPadding:pe}}var Ib=function(y){function m(L,q,Y,j){y.call(this,L,q),this.angle=Y,j!==void 0&&(this.segment=j)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.clone=function(){return new m(this.x,this.y,this.angle,this.segment)},m}(u);U("Anchor",Ib);var Kp=128;function X8(y,m){var L=m.expression;if(L.kind==="constant"){var q=L.evaluate(new Sn(y+1));return{kind:"constant",layoutSize:q}}else{if(L.kind==="source")return{kind:"source"};for(var Y=L.zoomStops,j=L.interpolationType,$=0;$<Y.length&&Y[$]<=y;)$++;$=Math.max(0,$-1);for(var pe=$;pe<Y.length&&Y[pe]<y+1;)pe++;pe=Math.min(Y.length-1,pe);var ke=Y[$],Fe=Y[pe];if(L.kind==="composite")return{kind:"composite",minZoom:ke,maxZoom:Fe,interpolationType:j};var Ne=L.evaluate(new Sn(ke)),ct=L.evaluate(new Sn(Fe));return{kind:"camera",minZoom:ke,maxZoom:Fe,minSize:Ne,maxSize:ct,interpolationType:j}}}function iJ(y,m,L){var q=m.uSize,Y=m.uSizeT,j=L.lowerSize,$=L.upperSize;return y.kind==="source"?j/Kp:y.kind==="composite"?zs(j/Kp,$/Kp,Y):q}function aJ(y,m){var L=0,q=0;if(y.kind==="constant")q=y.layoutSize;else if(y.kind!=="source"){var Y=y.interpolationType,j=y.minZoom,$=y.maxZoom,pe=Y?p(Hs.interpolationFactor(Y,m,j,$),0,1):0;y.kind==="camera"?q=zs(y.minSize,y.maxSize,pe):L=pe}return{uSizeT:L,uSize:q}}var ZJe=Object.freeze({__proto__:null,getSizeData:X8,evaluateSizeForFeature:iJ,evaluateSizeForZoom:aJ,SIZE_PACK_FACTOR:Kp});function oJ(y,m,L,q,Y){if(m.segment===void 0)return!0;for(var j=m,$=m.segment+1,pe=0;pe>-L/2;){if($--,$<0)return!1;pe-=y[$].dist(j),j=y[$]}pe+=y[$].dist(y[$+1]),$++;for(var ke=[],Fe=0;pe<L/2;){var Ne=y[$-1],ct=y[$],kt=y[$+1];if(!kt)return!1;var bt=Ne.angleTo(ct)-ct.angleTo(kt);for(bt=Math.abs((bt+3*Math.PI)%(Math.PI*2)-Math.PI),ke.push({distance:pe,angleDelta:bt}),Fe+=bt;pe-ke[0].distance>q;)Fe-=ke.shift().angleDelta;if(Fe>Y)return!1;$++,pe+=ct.dist(kt)}return!0}function sJ(y){for(var m=0,L=0;L<y.length-1;L++)m+=y[L].dist(y[L+1]);return m}function lJ(y,m,L){return y?3/5*m*L:0}function uJ(y,m){return Math.max(y?y.right-y.left:0,m?m.right-m.left:0)}function jJe(y,m,L,q,Y,j){for(var $=lJ(L,Y,j),pe=uJ(L,q)*j,ke=0,Fe=sJ(y)/2,Ne=0;Ne<y.length-1;Ne++){var ct=y[Ne],kt=y[Ne+1],bt=ct.dist(kt);if(ke+bt>Fe){var Yt=(Fe-ke)/bt,hr=zs(ct.x,kt.x,Yt),Ir=zs(ct.y,kt.y,Yt),Ar=new Ib(hr,Ir,kt.angleTo(ct),Ne);return Ar._round(),!$||oJ(y,Ar,pe,$,m)?Ar:void 0}ke+=bt}}function KJe(y,m,L,q,Y,j,$,pe,ke){var Fe=lJ(q,j,$),Ne=uJ(q,Y),ct=Ne*$,kt=y[0].x===0||y[0].x===ke||y[0].y===0||y[0].y===ke;m-ct<m/4&&(m=ct+m/4);var bt=j*2,Yt=kt?m/2*pe%m:(Ne/2+bt)*$*pe%m;return fJ(y,Yt,m,Fe,L,ct,kt,!1,ke)}function fJ(y,m,L,q,Y,j,$,pe,ke){for(var Fe=j/2,Ne=sJ(y),ct=0,kt=m-L,bt=[],Yt=0;Yt<y.length-1;Yt++){for(var hr=y[Yt],Ir=y[Yt+1],Ar=hr.dist(Ir),en=Ir.angleTo(hr);kt+L<ct+Ar;){kt+=L;var Ur=(kt-ct)/Ar,Qr=zs(hr.x,Ir.x,Ur),on=zs(hr.y,Ir.y,Ur);if(Qr>=0&&Qr<ke&&on>=0&&on<ke&&kt-Fe>=0&&kt+Fe<=Ne){var Pn=new Ib(Qr,on,en,Yt);Pn._round(),(!q||oJ(y,Pn,j,q,Y))&&bt.push(Pn)}}ct+=Ar}return!pe&&!bt.length&&!$&&(bt=fJ(y,ct/2,L,q,Y,j,$,!0,ke)),bt}function cJ(y,m,L,q,Y){for(var j=[],$=0;$<y.length;$++)for(var pe=y[$],ke=void 0,Fe=0;Fe<pe.length-1;Fe++){var Ne=pe[Fe],ct=pe[Fe+1];Ne.x<m&&ct.x<m||(Ne.x<m?Ne=new u(m,Ne.y+(ct.y-Ne.y)*((m-Ne.x)/(ct.x-Ne.x)))._round():ct.x<m&&(ct=new u(m,Ne.y+(ct.y-Ne.y)*((m-Ne.x)/(ct.x-Ne.x)))._round()),!(Ne.y<L&&ct.y<L)&&(Ne.y<L?Ne=new u(Ne.x+(ct.x-Ne.x)*((L-Ne.y)/(ct.y-Ne.y)),L)._round():ct.y<L&&(ct=new u(Ne.x+(ct.x-Ne.x)*((L-Ne.y)/(ct.y-Ne.y)),L)._round()),!(Ne.x>=q&&ct.x>=q)&&(Ne.x>=q?Ne=new u(q,Ne.y+(ct.y-Ne.y)*((q-Ne.x)/(ct.x-Ne.x)))._round():ct.x>=q&&(ct=new u(q,Ne.y+(ct.y-Ne.y)*((q-Ne.x)/(ct.x-Ne.x)))._round()),!(Ne.y>=Y&&ct.y>=Y)&&(Ne.y>=Y?Ne=new u(Ne.x+(ct.x-Ne.x)*((Y-Ne.y)/(ct.y-Ne.y)),Y)._round():ct.y>=Y&&(ct=new u(Ne.x+(ct.x-Ne.x)*((Y-Ne.y)/(ct.y-Ne.y)),Y)._round()),(!ke||!Ne.equals(ke[ke.length-1]))&&(ke=[Ne],j.push(ke)),ke.push(ct)))))}return j}var Fb=dv;function hJ(y,m,L,q){var Y=[],j=y.image,$=j.pixelRatio,pe=j.paddedRect.w-2*Fb,ke=j.paddedRect.h-2*Fb,Fe=y.right-y.left,Ne=y.bottom-y.top,ct=j.stretchX||[[0,pe]],kt=j.stretchY||[[0,ke]],bt=function(Io,Mo){return Io+Mo[1]-Mo[0]},Yt=ct.reduce(bt,0),hr=kt.reduce(bt,0),Ir=pe-Yt,Ar=ke-hr,en=0,Ur=Yt,Qr=0,on=hr,Pn=0,oi=Ir,ti=0,Bi=Ar;if(j.content&&q){var Ti=j.content;en=lk(ct,0,Ti[0]),Qr=lk(kt,0,Ti[1]),Ur=lk(ct,Ti[0],Ti[2]),on=lk(kt,Ti[1],Ti[3]),Pn=Ti[0]-en,ti=Ti[1]-Qr,oi=Ti[2]-Ti[0]-Ur,Bi=Ti[3]-Ti[1]-on}var Ri=function(Io,Mo,Os,Ws){var ql=uk(Io.stretch-en,Ur,Fe,y.left),Kl=fk(Io.fixed-Pn,oi,Io.stretch,Yt),_f=uk(Mo.stretch-Qr,on,Ne,y.top),Pu=fk(Mo.fixed-ti,Bi,Mo.stretch,hr),Fc=uk(Os.stretch-en,Ur,Fe,y.left),qc=fk(Os.fixed-Pn,oi,Os.stretch,Yt),bf=uk(Ws.stretch-Qr,on,Ne,y.top),oh=fk(Ws.fixed-ti,Bi,Ws.stretch,hr),sh=new u(ql,_f),ju=new u(Fc,_f),lh=new u(Fc,bf),jv=new u(ql,bf),Cg=new u(Kl/$,Pu/$),Vy=new u(qc/$,oh/$),Hy=m*Math.PI/180;if(Hy){var Gy=Math.sin(Hy),Hb=Math.cos(Hy),Kd=[Hb,-Gy,Gy,Hb];sh._matMult(Kd),ju._matMult(Kd),jv._matMult(Kd),lh._matMult(Kd)}var gk=Io.stretch+Io.fixed,tq=Os.stretch+Os.fixed,yk=Mo.stretch+Mo.fixed,rq=Ws.stretch+Ws.fixed,Sd={x:j.paddedRect.x+Fb+gk,y:j.paddedRect.y+Fb+yk,w:tq-gk,h:rq-yk},Gb=oi/$/Fe,mk=Bi/$/Ne;return{tl:sh,tr:ju,bl:jv,br:lh,tex:Sd,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Cg,pixelOffsetBR:Vy,minFontScaleX:Gb,minFontScaleY:mk,isSDF:L}};if(!q||!j.stretchX&&!j.stretchY)Y.push(Ri({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:pe+1},{fixed:0,stretch:ke+1}));else for(var wa=vJ(ct,Ir,Yt),Ni=vJ(kt,Ar,hr),Yi=0;Yi<wa.length-1;Yi++)for(var Xa=wa[Yi],ga=wa[Yi+1],Ro=0;Ro<Ni.length-1;Ro++){var Ss=Ni[Ro],Do=Ni[Ro+1];Y.push(Ri(Xa,Ss,ga,Do))}return Y}function lk(y,m,L){for(var q=0,Y=0,j=y;Y<j.length;Y+=1){var $=j[Y];q+=Math.max(m,Math.min(L,$[1]))-Math.max(m,Math.min(L,$[0]))}return q}function vJ(y,m,L){for(var q=[{fixed:-Fb,stretch:0}],Y=0,j=y;Y<j.length;Y+=1){var $=j[Y],pe=$[0],ke=$[1],Fe=q[q.length-1];q.push({fixed:pe-Fe.stretch,stretch:Fe.stretch}),q.push({fixed:pe-Fe.stretch,stretch:Fe.stretch+(ke-pe)})}return q.push({fixed:m+Fb,stretch:L}),q}function uk(y,m,L,q){return y/m*L+q}function fk(y,m,L,q){return y-m*L/q}function JJe(y,m,L,q,Y,j,$,pe){for(var ke=q.layout.get("text-rotate").evaluate(j,{})*Math.PI/180,Fe=[],Ne=0,ct=m.positionedLines;Ne<ct.length;Ne+=1)for(var kt=ct[Ne],bt=0,Yt=kt.positionedGlyphs;bt<Yt.length;bt+=1){var hr=Yt[bt];if(hr.rect){var Ir=hr.rect||{},Ar=1,en=jK+Ar,Ur=!0,Qr=1,on=0,Pn=(Y||pe)&&hr.vertical,oi=hr.metrics.advance*hr.scale/2;if(pe&&m.verticalizable){var ti=(hr.scale-1)*Wf,Bi=(Wf-hr.metrics.width*hr.scale)/2;on=kt.lineOffset/2-(hr.imageName?-Bi:ti)}if(hr.imageName){var Ti=$[hr.imageName];Ur=Ti.sdf,Qr=Ti.pixelRatio,en=dv/Qr}var Ri=Y?[hr.x+oi,hr.y]:[0,0],wa=Y?[0,0]:[hr.x+oi+L[0],hr.y+L[1]-on],Ni=[0,0];Pn&&(Ni=wa,wa=[0,0]);var Yi=(hr.metrics.left-en)*hr.scale-oi+wa[0],Xa=(-hr.metrics.top-en)*hr.scale+wa[1],ga=Yi+Ir.w*hr.scale/Qr,Ro=Xa+Ir.h*hr.scale/Qr,Ss=new u(Yi,Xa),Do=new u(ga,Xa),Io=new u(Yi,Ro),Mo=new u(ga,Ro);if(Pn){var Os=new u(-oi,oi-QT),Ws=-Math.PI/2,ql=Wf/2-oi,Kl=hr.imageName?ql:0,_f=new u(5-QT-ql,-Kl),Pu=new(Function.prototype.bind.apply(u,[null].concat(Ni)));Ss._rotateAround(Ws,Os)._add(_f)._add(Pu),Do._rotateAround(Ws,Os)._add(_f)._add(Pu),Io._rotateAround(Ws,Os)._add(_f)._add(Pu),Mo._rotateAround(Ws,Os)._add(_f)._add(Pu)}if(ke){var Fc=Math.sin(ke),qc=Math.cos(ke),bf=[qc,-Fc,Fc,qc];Ss._matMult(bf),Do._matMult(bf),Io._matMult(bf),Mo._matMult(bf)}var oh=new u(0,0),sh=new u(0,0),ju=0,lh=0;Fe.push({tl:Ss,tr:Do,bl:Io,br:Mo,tex:Ir,writingMode:m.writingMode,glyphOffset:Ri,sectionIndex:hr.sectionIndex,isSDF:Ur,pixelOffsetTL:oh,pixelOffsetBR:sh,minFontScaleX:ju,minFontScaleY:lh})}}return Fe}var ck=function(m,L,q,Y,j,$,pe,ke,Fe,Ne){if(this.boxStartIndex=m.length,Fe){var ct=$.top,kt=$.bottom,bt=$.collisionPadding;bt&&(ct-=bt[1],kt+=bt[3]);var Yt=kt-ct;Yt>0&&(Yt=Math.max(10,Yt),this.circleDiameter=Yt)}else{var hr=$.top*pe-ke,Ir=$.bottom*pe+ke,Ar=$.left*pe-ke,en=$.right*pe+ke,Ur=$.collisionPadding;if(Ur&&(Ar-=Ur[0]*pe,hr-=Ur[1]*pe,en+=Ur[2]*pe,Ir+=Ur[3]*pe),Ne){var Qr=new u(Ar,hr),on=new u(en,hr),Pn=new u(Ar,Ir),oi=new u(en,Ir),ti=Ne*Math.PI/180;Qr._rotate(ti),on._rotate(ti),Pn._rotate(ti),oi._rotate(ti),Ar=Math.min(Qr.x,on.x,Pn.x,oi.x),en=Math.max(Qr.x,on.x,Pn.x,oi.x),hr=Math.min(Qr.y,on.y,Pn.y,oi.y),Ir=Math.max(Qr.y,on.y,Pn.y,oi.y)}m.emplaceBack(L.x,L.y,Ar,hr,en,Ir,q,Y,j)}this.boxEndIndex=m.length},qb=function(m,L){if(m===void 0&&(m=[]),L===void 0&&(L=QJe),this.data=m,this.length=this.data.length,this.compare=L,this.length>0)for(var q=(this.length>>1)-1;q>=0;q--)this._down(q)};qb.prototype.push=function(m){this.data.push(m),this.length++,this._up(this.length-1)},qb.prototype.pop=function(){if(this.length!==0){var m=this.data[0],L=this.data.pop();return this.length--,this.length>0&&(this.data[0]=L,this._down(0)),m}},qb.prototype.peek=function(){return this.data[0]},qb.prototype._up=function(m){for(var L=this,q=L.data,Y=L.compare,j=q[m];m>0;){var $=m-1>>1,pe=q[$];if(Y(j,pe)>=0)break;q[m]=pe,m=$}q[m]=j},qb.prototype._down=function(m){for(var L=this,q=L.data,Y=L.compare,j=this.length>>1,$=q[m];m<j;){var pe=(m<<1)+1,ke=q[pe],Fe=pe+1;if(Fe<this.length&&Y(q[Fe],ke)<0&&(pe=Fe,ke=q[Fe]),Y(ke,$)>=0)break;q[m]=ke,m=pe}q[m]=$};function QJe(y,m){return y<m?-1:y>m?1:0}function $Je(y,m,L){m===void 0&&(m=1),L===void 0&&(L=!1);for(var q=1/0,Y=1/0,j=-1/0,$=-1/0,pe=y[0],ke=0;ke<pe.length;ke++){var Fe=pe[ke];(!ke||Fe.x<q)&&(q=Fe.x),(!ke||Fe.y<Y)&&(Y=Fe.y),(!ke||Fe.x>j)&&(j=Fe.x),(!ke||Fe.y>$)&&($=Fe.y)}var Ne=j-q,ct=$-Y,kt=Math.min(Ne,ct),bt=kt/2,Yt=new qb([],eQe);if(kt===0)return new u(q,Y);for(var hr=q;hr<j;hr+=kt)for(var Ir=Y;Ir<$;Ir+=kt)Yt.push(new zb(hr+bt,Ir+bt,bt,y));for(var Ar=rQe(y),en=Yt.length;Yt.length;){var Ur=Yt.pop();(Ur.d>Ar.d||!Ar.d)&&(Ar=Ur,L&&console.log("found best %d after %d probes",Math.round(1e4*Ur.d)/1e4,en)),!(Ur.max-Ar.d<=m)&&(bt=Ur.h/2,Yt.push(new zb(Ur.p.x-bt,Ur.p.y-bt,bt,y)),Yt.push(new zb(Ur.p.x+bt,Ur.p.y-bt,bt,y)),Yt.push(new zb(Ur.p.x-bt,Ur.p.y+bt,bt,y)),Yt.push(new zb(Ur.p.x+bt,Ur.p.y+bt,bt,y)),en+=4)}return L&&(console.log("num probes: "+en),console.log("best distance: "+Ar.d)),Ar.p}function eQe(y,m){return m.max-y.max}function zb(y,m,L,q){this.p=new u(y,m),this.h=L,this.d=tQe(this.p,q),this.max=this.d+this.h*Math.SQRT2}function tQe(y,m){for(var L=!1,q=1/0,Y=0;Y<m.length;Y++)for(var j=m[Y],$=0,pe=j.length,ke=pe-1;$<pe;ke=$++){var Fe=j[$],Ne=j[ke];Fe.y>y.y!=Ne.y>y.y&&y.x<(Ne.x-Fe.x)*(y.y-Fe.y)/(Ne.y-Fe.y)+Fe.x&&(L=!L),q=Math.min(q,Mg(y,Fe,Ne))}return(L?1:-1)*Math.sqrt(q)}function rQe(y){for(var m=0,L=0,q=0,Y=y[0],j=0,$=Y.length,pe=$-1;j<$;pe=j++){var ke=Y[j],Fe=Y[pe],Ne=ke.x*Fe.y-Fe.x*ke.y;L+=(ke.x+Fe.x)*Ne,q+=(ke.y+Fe.y)*Ne,m+=Ne*3}return new zb(L/m,q/m,0,y)}var Ob=7,Z8=Number.POSITIVE_INFINITY;function dJ(y,m){function L(Y,j){var $=0,pe=0;j<0&&(j=0);var ke=j/Math.sqrt(2);switch(Y){case"top-right":case"top-left":pe=ke-Ob;break;case"bottom-right":case"bottom-left":pe=-ke+Ob;break;case"bottom":pe=-j+Ob;break;case"top":pe=j-Ob;break}switch(Y){case"top-right":case"bottom-right":$=-ke;break;case"top-left":case"bottom-left":$=ke;break;case"left":$=j;break;case"right":$=-j;break}return[$,pe]}function q(Y,j,$){var pe=0,ke=0;switch(j=Math.abs(j),$=Math.abs($),Y){case"top-right":case"top-left":case"top":ke=$-Ob;break;case"bottom-right":case"bottom-left":case"bottom":ke=-$+Ob;break}switch(Y){case"top-right":case"bottom-right":case"right":pe=-j;break;case"top-left":case"bottom-left":case"left":pe=j;break}return[pe,ke]}return m[1]!==Z8?q(y,m[0],m[1]):L(y,m[0])}function nQe(y,m,L,q,Y,j,$){y.createArrays();var pe=512*y.overscaling;y.tilePixelRatio=fn/pe,y.compareText={},y.iconsNeedLinear=!1;var ke=y.layers[0].layout,Fe=y.layers[0]._unevaluatedLayout._values,Ne={};if(y.textSizeData.kind==="composite"){var ct=y.textSizeData,kt=ct.minZoom,bt=ct.maxZoom;Ne.compositeTextSizes=[Fe["text-size"].possiblyEvaluate(new Sn(kt),$),Fe["text-size"].possiblyEvaluate(new Sn(bt),$)]}if(y.iconSizeData.kind==="composite"){var Yt=y.iconSizeData,hr=Yt.minZoom,Ir=Yt.maxZoom;Ne.compositeIconSizes=[Fe["icon-size"].possiblyEvaluate(new Sn(hr),$),Fe["icon-size"].possiblyEvaluate(new Sn(Ir),$)]}Ne.layoutTextSize=Fe["text-size"].possiblyEvaluate(new Sn(y.zoom+1),$),Ne.layoutIconSize=Fe["icon-size"].possiblyEvaluate(new Sn(y.zoom+1),$),Ne.textMaxSize=Fe["text-size"].possiblyEvaluate(new Sn(18));for(var Ar=ke.get("text-line-height")*Wf,en=ke.get("text-rotation-alignment")==="map"&&ke.get("symbol-placement")!=="point",Ur=ke.get("text-keep-upright"),Qr=ke.get("text-size"),on=function(){var ti=oi[Pn],Bi=ke.get("text-font").evaluate(ti,{},$).join(","),Ti=Qr.evaluate(ti,{},$),Ri=Ne.layoutTextSize.evaluate(ti,{},$),wa=Ne.layoutIconSize.evaluate(ti,{},$),Ni={horizontal:{},vertical:void 0},Yi=ti.text,Xa=[0,0];if(Yi){var ga=Yi.toString(),Ro=ke.get("text-letter-spacing").evaluate(ti,{},$)*Wf,Ss=St(ga)?Ro:0,Do=ke.get("text-anchor").evaluate(ti,{},$),Io=ke.get("text-variable-anchor");if(!Io){var Mo=ke.get("text-radial-offset").evaluate(ti,{},$);Mo?Xa=dJ(Do,[Mo*Wf,Z8]):Xa=ke.get("text-offset").evaluate(ti,{},$).map(function(Cg){return Cg*Wf})}var Os=en?"center":ke.get("text-justify").evaluate(ti,{},$),Ws=ke.get("symbol-placement"),ql=Ws==="point"?ke.get("text-max-width").evaluate(ti,{},$)*Wf:0,Kl=function(){y.allowVerticalPlacement&&tt(ga)&&(Ni.vertical=sk(Yi,m,L,Y,Bi,ql,Ar,Do,"left",Ss,Xa,Zv.vertical,!0,Ws,Ri,Ti))};if(!en&&Io){for(var _f=Os==="auto"?Io.map(function(Cg){return j8(Cg)}):[Os],Pu=!1,Fc=0;Fc<_f.length;Fc++){var qc=_f[Fc];if(!Ni.horizontal[qc])if(Pu)Ni.horizontal[qc]=Ni.horizontal[0];else{var bf=sk(Yi,m,L,Y,Bi,ql,Ar,"center",qc,Ss,Xa,Zv.horizontal,!1,Ws,Ri,Ti);bf&&(Ni.horizontal[qc]=bf,Pu=bf.positionedLines.length===1)}}Kl()}else{Os==="auto"&&(Os=j8(Do));var oh=sk(Yi,m,L,Y,Bi,ql,Ar,Do,Os,Ss,Xa,Zv.horizontal,!1,Ws,Ri,Ti);oh&&(Ni.horizontal[Os]=oh),Kl(),tt(ga)&&en&&Ur&&(Ni.vertical=sk(Yi,m,L,Y,Bi,ql,Ar,Do,Os,Ss,Xa,Zv.vertical,!1,Ws,Ri,Ti))}}var sh=void 0,ju=!1;if(ti.icon&&ti.icon.name){var lh=q[ti.icon.name];lh&&(sh=XJe(Y[ti.icon.name],ke.get("icon-offset").evaluate(ti,{},$),ke.get("icon-anchor").evaluate(ti,{},$)),ju=lh.sdf,y.sdfIcons===void 0?y.sdfIcons=lh.sdf:y.sdfIcons!==lh.sdf&&Z("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(lh.pixelRatio!==y.pixelRatio||ke.get("icon-rotate").constantOr(1)!==0)&&(y.iconsNeedLinear=!0))}var jv=gJ(Ni.horizontal)||Ni.vertical;y.iconsInText=jv?jv.iconsInText:!1,(jv||sh)&&iQe(y,ti,Ni,sh,q,Ne,Ri,wa,Xa,ju,$)},Pn=0,oi=y.features;Pn<oi.length;Pn+=1)on();j&&y.generateCollisionDebugBuffers()}function j8(y){switch(y){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function iQe(y,m,L,q,Y,j,$,pe,ke,Fe,Ne){var ct=j.textMaxSize.evaluate(m,{});ct===void 0&&(ct=$);var kt=y.layers[0].layout,bt=kt.get("icon-offset").evaluate(m,{},Ne),Yt=gJ(L.horizontal),hr=24,Ir=$/hr,Ar=y.tilePixelRatio*Ir,en=y.tilePixelRatio*ct/hr,Ur=y.tilePixelRatio*pe,Qr=y.tilePixelRatio*kt.get("symbol-spacing"),on=kt.get("text-padding")*y.tilePixelRatio,Pn=kt.get("icon-padding")*y.tilePixelRatio,oi=kt.get("text-max-angle")/180*Math.PI,ti=kt.get("text-rotation-alignment")==="map"&&kt.get("symbol-placement")!=="point",Bi=kt.get("icon-rotation-alignment")==="map"&&kt.get("symbol-placement")!=="point",Ti=kt.get("symbol-placement"),Ri=Qr/2,wa=kt.get("icon-text-fit"),Ni;q&&wa!=="none"&&(y.allowVerticalPlacement&&L.vertical&&(Ni=nJ(q,L.vertical,wa,kt.get("icon-text-fit-padding"),bt,Ir)),Yt&&(q=nJ(q,Yt,wa,kt.get("icon-text-fit-padding"),bt,Ir)));var Yi=function(Hb,Kd){Kd.x<0||Kd.x>=fn||Kd.y<0||Kd.y>=fn||aQe(y,Kd,Hb,L,q,Y,Ni,y.layers[0],y.collisionBoxArray,m.index,m.sourceLayerIndex,y.index,Ar,on,ti,ke,Ur,Pn,Bi,bt,m,j,Fe,Ne,$)};if(Ti==="line")for(var Xa=0,ga=cJ(m.geometry,0,0,fn,fn);Xa<ga.length;Xa+=1)for(var Ro=ga[Xa],Ss=KJe(Ro,Qr,oi,L.vertical||Yt,q,hr,en,y.overscaling,fn),Do=0,Io=Ss;Do<Io.length;Do+=1){var Mo=Io[Do],Os=Yt;(!Os||!oQe(y,Os.text,Ri,Mo))&&Yi(Ro,Mo)}else if(Ti==="line-center")for(var Ws=0,ql=m.geometry;Ws<ql.length;Ws+=1){var Kl=ql[Ws];if(Kl.length>1){var _f=jJe(Kl,oi,L.vertical||Yt,q,hr,en);_f&&Yi(Kl,_f)}}else if(m.type==="Polygon")for(var Pu=0,Fc=B8(m.geometry,0);Pu<Fc.length;Pu+=1){var qc=Fc[Pu],bf=$Je(qc,16);Yi(qc[0],new Ib(bf.x,bf.y,0))}else if(m.type==="LineString")for(var oh=0,sh=m.geometry;oh<sh.length;oh+=1){var ju=sh[oh];Yi(ju,new Ib(ju[0].x,ju[0].y,0))}else if(m.type==="Point")for(var lh=0,jv=m.geometry;lh<jv.length;lh+=1)for(var Cg=jv[lh],Vy=0,Hy=Cg;Vy<Hy.length;Vy+=1){var Gy=Hy[Vy];Yi([Gy],new Ib(Gy.x,Gy.y,0))}}var $T=255,Ny=$T*Kp;function pJ(y,m,L,q,Y,j,$,pe,ke,Fe,Ne,ct,kt,bt,Yt){var hr=JJe(m,L,pe,Y,j,$,q,y.allowVerticalPlacement),Ir=y.textSizeData,Ar=null;Ir.kind==="source"?(Ar=[Kp*Y.layout.get("text-size").evaluate($,{})],Ar[0]>Ny&&Z(y.layerIds[0]+': Value for "text-size" is >= '+$T+'. Reduce your "text-size".')):Ir.kind==="composite"&&(Ar=[Kp*bt.compositeTextSizes[0].evaluate($,{},Yt),Kp*bt.compositeTextSizes[1].evaluate($,{},Yt)],(Ar[0]>Ny||Ar[1]>Ny)&&Z(y.layerIds[0]+': Value for "text-size" is >= '+$T+'. Reduce your "text-size".')),y.addSymbols(y.text,hr,Ar,pe,j,$,Fe,m,ke.lineStartIndex,ke.lineLength,kt,Yt);for(var en=0,Ur=Ne;en<Ur.length;en+=1){var Qr=Ur[en];ct[Qr]=y.text.placedSymbolArray.length-1}return hr.length*4}function gJ(y){for(var m in y)return y[m];return null}function aQe(y,m,L,q,Y,j,$,pe,ke,Fe,Ne,ct,kt,bt,Yt,hr,Ir,Ar,en,Ur,Qr,on,Pn,oi,ti){var Bi,Ti=y.addToLineVertexArray(m,L),Ri,wa,Ni,Yi,Xa=0,ga=0,Ro=0,Ss=0,Do=-1,Io=-1,Mo={},Os=W(""),Ws=0,ql=0;if(pe._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Bi=pe.layout.get("text-offset").evaluate(Qr,{},oi).map(function(rA){return rA*Wf}),Ws=Bi[0],ql=Bi[1]):(Ws=pe.layout.get("text-radial-offset").evaluate(Qr,{},oi)*Wf,ql=Z8),y.allowVerticalPlacement&&q.vertical){var Kl=pe.layout.get("text-rotate").evaluate(Qr,{},oi),_f=Kl+90,Pu=q.vertical;Ni=new ck(ke,m,Fe,Ne,ct,Pu,kt,bt,Yt,_f),$&&(Yi=new ck(ke,m,Fe,Ne,ct,$,Ir,Ar,Yt,_f))}if(Y){var Fc=pe.layout.get("icon-rotate").evaluate(Qr,{}),qc=pe.layout.get("icon-text-fit")!=="none",bf=hJ(Y,Fc,Pn,qc),oh=$?hJ($,Fc,Pn,qc):void 0;wa=new ck(ke,m,Fe,Ne,ct,Y,Ir,Ar,!1,Fc),Xa=bf.length*4;var sh=y.iconSizeData,ju=null;sh.kind==="source"?(ju=[Kp*pe.layout.get("icon-size").evaluate(Qr,{})],ju[0]>Ny&&Z(y.layerIds[0]+': Value for "icon-size" is >= '+$T+'. Reduce your "icon-size".')):sh.kind==="composite"&&(ju=[Kp*on.compositeIconSizes[0].evaluate(Qr,{},oi),Kp*on.compositeIconSizes[1].evaluate(Qr,{},oi)],(ju[0]>Ny||ju[1]>Ny)&&Z(y.layerIds[0]+': Value for "icon-size" is >= '+$T+'. Reduce your "icon-size".')),y.addSymbols(y.icon,bf,ju,Ur,en,Qr,!1,m,Ti.lineStartIndex,Ti.lineLength,-1,oi),Do=y.icon.placedSymbolArray.length-1,oh&&(ga=oh.length*4,y.addSymbols(y.icon,oh,ju,Ur,en,Qr,Zv.vertical,m,Ti.lineStartIndex,Ti.lineLength,-1,oi),Io=y.icon.placedSymbolArray.length-1)}for(var lh in q.horizontal){var jv=q.horizontal[lh];if(!Ri){Os=W(jv.text);var Cg=pe.layout.get("text-rotate").evaluate(Qr,{},oi);Ri=new ck(ke,m,Fe,Ne,ct,jv,kt,bt,Yt,Cg)}var Vy=jv.positionedLines.length===1;if(Ro+=pJ(y,m,jv,j,pe,Yt,Qr,hr,Ti,q.vertical?Zv.horizontal:Zv.horizontalOnly,Vy?Object.keys(q.horizontal):[lh],Mo,Do,on,oi),Vy)break}q.vertical&&(Ss+=pJ(y,m,q.vertical,j,pe,Yt,Qr,hr,Ti,Zv.vertical,["vertical"],Mo,Io,on,oi));var Hy=Ri?Ri.boxStartIndex:y.collisionBoxArray.length,Gy=Ri?Ri.boxEndIndex:y.collisionBoxArray.length,Hb=Ni?Ni.boxStartIndex:y.collisionBoxArray.length,Kd=Ni?Ni.boxEndIndex:y.collisionBoxArray.length,gk=wa?wa.boxStartIndex:y.collisionBoxArray.length,tq=wa?wa.boxEndIndex:y.collisionBoxArray.length,yk=Yi?Yi.boxStartIndex:y.collisionBoxArray.length,rq=Yi?Yi.boxEndIndex:y.collisionBoxArray.length,Sd=-1,Gb=function(rA,RJ){return rA&&rA.circleDiameter?Math.max(rA.circleDiameter,RJ):RJ};Sd=Gb(Ri,Sd),Sd=Gb(Ni,Sd),Sd=Gb(wa,Sd),Sd=Gb(Yi,Sd);var mk=Sd>-1?1:0;mk&&(Sd*=ti/Wf),y.glyphOffsetArray.length>=Ms.MAX_GLYPHS&&Z("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Qr.sortKey!==void 0&&y.addToSortKeyRanges(y.symbolInstances.length,Qr.sortKey),y.symbolInstances.emplaceBack(m.x,m.y,Mo.right>=0?Mo.right:-1,Mo.center>=0?Mo.center:-1,Mo.left>=0?Mo.left:-1,Mo.vertical||-1,Do,Io,Os,Hy,Gy,Hb,Kd,gk,tq,yk,rq,Fe,Ro,Ss,Xa,ga,mk,0,kt,Ws,ql,Sd)}function oQe(y,m,L,q){var Y=y.compareText;if(!(m in Y))Y[m]=[];else for(var j=Y[m],$=j.length-1;$>=0;$--)if(q.dist(j[$])<L)return!0;return Y[m].push(q),!1}var sQe=Lb.VectorTileFeature.types,lQe=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function hk(y,m,L,q,Y,j,$,pe,ke,Fe,Ne,ct,kt){var bt=pe?Math.min(Ny,Math.round(pe[0])):0,Yt=pe?Math.min(Ny,Math.round(pe[1])):0;y.emplaceBack(m,L,Math.round(q*32),Math.round(Y*32),j,$,(bt<<1)+(ke?1:0),Yt,Fe*16,Ne*16,ct*256,kt*256)}function K8(y,m,L){y.emplaceBack(m.x,m.y,L),y.emplaceBack(m.x,m.y,L),y.emplaceBack(m.x,m.y,L),y.emplaceBack(m.x,m.y,L)}function uQe(y){for(var m=0,L=y.sections;m<L.length;m+=1){var q=L[m];if(Pr(q.text))return!0}return!1}var Bb=function(m){this.layoutVertexArray=new $i,this.indexArray=new Si,this.programConfigurations=m,this.segments=new Ja,this.dynamicLayoutVertexArray=new Cn,this.opacityVertexArray=new Tn,this.placedSymbolArray=new ps};Bb.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Bb.prototype.upload=function(m,L,q,Y){this.isEmpty()||(q&&(this.layoutVertexBuffer=m.createVertexBuffer(this.layoutVertexArray,uJe.members),this.indexBuffer=m.createIndexBuffer(this.indexArray,L),this.dynamicLayoutVertexBuffer=m.createVertexBuffer(this.dynamicLayoutVertexArray,fJe.members,!0),this.opacityVertexBuffer=m.createVertexBuffer(this.opacityVertexArray,lQe,!0),this.opacityVertexBuffer.itemSize=1),(q||Y)&&this.programConfigurations.upload(m))},Bb.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},U("SymbolBuffers",Bb);var eA=function(m,L,q){this.layoutVertexArray=new m,this.layoutAttributes=L,this.indexArray=new q,this.segments=new Ja,this.collisionVertexArray=new jn};eA.prototype.upload=function(m){this.layoutVertexBuffer=m.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=m.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=m.createVertexBuffer(this.collisionVertexArray,cJe.members,!0)},eA.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},U("CollisionBuffers",eA);var Ms=function(m){this.collisionBoxArray=m.collisionBoxArray,this.zoom=m.zoom,this.overscaling=m.overscaling,this.layers=m.layers,this.layerIds=this.layers.map(function(ke){return ke.id}),this.index=m.index,this.pixelRatio=m.pixelRatio,this.sourceLayerIndex=m.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Mb([]),this.placementViewportMatrix=Mb([]);var L=this.layers[0],q=L._unevaluatedLayout._values;this.textSizeData=X8(this.zoom,q["text-size"]),this.iconSizeData=X8(this.zoom,q["icon-size"]);var Y=this.layers[0].layout,j=Y.get("symbol-sort-key"),$=Y.get("symbol-z-order");this.canOverlap=Y.get("text-allow-overlap")||Y.get("icon-allow-overlap")||Y.get("text-ignore-placement")||Y.get("icon-ignore-placement"),this.sortFeaturesByKey=$!=="viewport-y"&&j.constantOr(1)!==void 0;var pe=$==="viewport-y"||$==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=pe&&this.canOverlap,Y.get("symbol-placement")==="point"&&(this.writingModes=Y.get("text-writing-mode").map(function(ke){return Zv[ke]})),this.stateDependentLayerIds=this.layers.filter(function(ke){return ke.isStateDependent()}).map(function(ke){return ke.id}),this.sourceID=m.sourceID};Ms.prototype.createArrays=function(){this.text=new Bb(new Xr(this.layers,this.zoom,function(m){return/^text/.test(m)})),this.icon=new Bb(new Xr(this.layers,this.zoom,function(m){return/^icon/.test(m)})),this.glyphOffsetArray=new fc,this.lineVertexArray=new As,this.symbolInstances=new Yf},Ms.prototype.calculateGlyphDependencies=function(m,L,q,Y,j){for(var $=0;$<m.length;$++)if(L[m.charCodeAt($)]=!0,(q||Y)&&j){var pe=jT[m.charAt($)];pe&&(L[pe.charCodeAt(0)]=!0)}},Ms.prototype.populate=function(m,L,q){var Y=this.layers[0],j=Y.layout,$=j.get("text-font"),pe=j.get("text-field"),ke=j.get("icon-image"),Fe=(pe.value.kind!=="constant"||pe.value.value instanceof Us&&!pe.value.value.isEmpty()||pe.value.value.toString().length>0)&&($.value.kind!=="constant"||$.value.value.length>0),Ne=ke.value.kind!=="constant"||!!ke.value.value||Object.keys(ke.parameters).length>0,ct=j.get("symbol-sort-key");if(this.features=[],!(!Fe&&!Ne)){for(var kt=L.iconDependencies,bt=L.glyphDependencies,Yt=L.availableImages,hr=new Sn(this.zoom),Ir=0,Ar=m;Ir<Ar.length;Ir+=1){var en=Ar[Ir],Ur=en.feature,Qr=en.id,on=en.index,Pn=en.sourceLayerIndex,oi=Y._featureFilter.needGeometry,ti=Da(Ur,oi);if(Y._featureFilter.filter(hr,ti,q)){oi||(ti.geometry=xi(Ur));var Bi=void 0;if(Fe){var Ti=Y.getValueAndResolveTokens("text-field",ti,q,Yt),Ri=Us.factory(Ti);uQe(Ri)&&(this.hasRTLText=!0),(!this.hasRTLText||xa()==="unavailable"||this.hasRTLText&&Po.isParsed())&&(Bi=dJe(Ri,Y,ti))}var wa=void 0;if(Ne){var Ni=Y.getValueAndResolveTokens("icon-image",ti,q,Yt);Ni instanceof xs?wa=Ni:wa=xs.fromString(Ni)}if(!(!Bi&&!wa)){var Yi=this.sortFeaturesByKey?ct.evaluate(ti,{},q):void 0,Xa={id:Qr,text:Bi,icon:wa,index:on,sourceLayerIndex:Pn,geometry:ti.geometry,properties:Ur.properties,type:sQe[Ur.type],sortKey:Yi};if(this.features.push(Xa),wa&&(kt[wa.name]=!0),Bi){var ga=$.evaluate(ti,{},q).join(","),Ro=j.get("text-rotation-alignment")==="map"&&j.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Zv.vertical)>=0;for(var Ss=0,Do=Bi.sections;Ss<Do.length;Ss+=1){var Io=Do[Ss];if(Io.image)kt[Io.image.name]=!0;else{var Mo=tt(Bi.toString()),Os=Io.fontStack||ga,Ws=bt[Os]=bt[Os]||{};this.calculateGlyphDependencies(Io.text,Ws,Ro,this.allowVerticalPlacement,Mo)}}}}}}j.get("symbol-placement")==="line"&&(this.features=pJe(this.features)),this.sortFeaturesByKey&&this.features.sort(function(ql,Kl){return ql.sortKey-Kl.sortKey})}},Ms.prototype.update=function(m,L,q){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(m,L,this.layers,q),this.icon.programConfigurations.updatePaintArrays(m,L,this.layers,q))},Ms.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Ms.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Ms.prototype.upload=function(m){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(m),this.iconCollisionBox.upload(m)),this.text.upload(m,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(m,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Ms.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Ms.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Ms.prototype.addToLineVertexArray=function(m,L){var q=this.lineVertexArray.length;if(m.segment!==void 0){for(var Y=m.dist(L[m.segment+1]),j=m.dist(L[m.segment]),$={},pe=m.segment+1;pe<L.length;pe++)$[pe]={x:L[pe].x,y:L[pe].y,tileUnitDistanceFromAnchor:Y},pe<L.length-1&&(Y+=L[pe+1].dist(L[pe]));for(var ke=m.segment||0;ke>=0;ke--)$[ke]={x:L[ke].x,y:L[ke].y,tileUnitDistanceFromAnchor:j},ke>0&&(j+=L[ke-1].dist(L[ke]));for(var Fe=0;Fe<L.length;Fe++){var Ne=$[Fe];this.lineVertexArray.emplaceBack(Ne.x,Ne.y,Ne.tileUnitDistanceFromAnchor)}}return{lineStartIndex:q,lineLength:this.lineVertexArray.length-q}},Ms.prototype.addSymbols=function(m,L,q,Y,j,$,pe,ke,Fe,Ne,ct,kt){for(var bt=m.indexArray,Yt=m.layoutVertexArray,hr=m.segments.prepareSegment(4*L.length,Yt,bt,this.canOverlap?$.sortKey:void 0),Ir=this.glyphOffsetArray.length,Ar=hr.vertexLength,en=this.allowVerticalPlacement&&pe===Zv.vertical?Math.PI/2:0,Ur=$.text&&$.text.sections,Qr=0;Qr<L.length;Qr++){var on=L[Qr],Pn=on.tl,oi=on.tr,ti=on.bl,Bi=on.br,Ti=on.tex,Ri=on.pixelOffsetTL,wa=on.pixelOffsetBR,Ni=on.minFontScaleX,Yi=on.minFontScaleY,Xa=on.glyphOffset,ga=on.isSDF,Ro=on.sectionIndex,Ss=hr.vertexLength,Do=Xa[1];hk(Yt,ke.x,ke.y,Pn.x,Do+Pn.y,Ti.x,Ti.y,q,ga,Ri.x,Ri.y,Ni,Yi),hk(Yt,ke.x,ke.y,oi.x,Do+oi.y,Ti.x+Ti.w,Ti.y,q,ga,wa.x,Ri.y,Ni,Yi),hk(Yt,ke.x,ke.y,ti.x,Do+ti.y,Ti.x,Ti.y+Ti.h,q,ga,Ri.x,wa.y,Ni,Yi),hk(Yt,ke.x,ke.y,Bi.x,Do+Bi.y,Ti.x+Ti.w,Ti.y+Ti.h,q,ga,wa.x,wa.y,Ni,Yi),K8(m.dynamicLayoutVertexArray,ke,en),bt.emplaceBack(Ss,Ss+1,Ss+2),bt.emplaceBack(Ss+1,Ss+2,Ss+3),hr.vertexLength+=4,hr.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Xa[0]),(Qr===L.length-1||Ro!==L[Qr+1].sectionIndex)&&m.programConfigurations.populatePaintArrays(Yt.length,$,$.index,{},kt,Ur&&Ur[Ro])}m.placedSymbolArray.emplaceBack(ke.x,ke.y,Ir,this.glyphOffsetArray.length-Ir,Ar,Fe,Ne,ke.segment,q?q[0]:0,q?q[1]:0,Y[0],Y[1],pe,0,!1,0,ct)},Ms.prototype._addCollisionDebugVertex=function(m,L,q,Y,j,$){return L.emplaceBack(0,0),m.emplaceBack(q.x,q.y,Y,j,Math.round($.x),Math.round($.y))},Ms.prototype.addCollisionDebugVertices=function(m,L,q,Y,j,$,pe){var ke=j.segments.prepareSegment(4,j.layoutVertexArray,j.indexArray),Fe=ke.vertexLength,Ne=j.layoutVertexArray,ct=j.collisionVertexArray,kt=pe.anchorX,bt=pe.anchorY;this._addCollisionDebugVertex(Ne,ct,$,kt,bt,new u(m,L)),this._addCollisionDebugVertex(Ne,ct,$,kt,bt,new u(q,L)),this._addCollisionDebugVertex(Ne,ct,$,kt,bt,new u(q,Y)),this._addCollisionDebugVertex(Ne,ct,$,kt,bt,new u(m,Y)),ke.vertexLength+=4;var Yt=j.indexArray;Yt.emplaceBack(Fe,Fe+1),Yt.emplaceBack(Fe+1,Fe+2),Yt.emplaceBack(Fe+2,Fe+3),Yt.emplaceBack(Fe+3,Fe),ke.primitiveLength+=4},Ms.prototype.addDebugCollisionBoxes=function(m,L,q,Y){for(var j=m;j<L;j++){var $=this.collisionBoxArray.get(j),pe=$.x1,ke=$.y1,Fe=$.x2,Ne=$.y2;this.addCollisionDebugVertices(pe,ke,Fe,Ne,Y?this.textCollisionBox:this.iconCollisionBox,$.anchorPoint,q)}},Ms.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new eA(di,GK.members,_a),this.iconCollisionBox=new eA(di,GK.members,_a);for(var m=0;m<this.symbolInstances.length;m++){var L=this.symbolInstances.get(m);this.addDebugCollisionBoxes(L.textBoxStartIndex,L.textBoxEndIndex,L,!0),this.addDebugCollisionBoxes(L.verticalTextBoxStartIndex,L.verticalTextBoxEndIndex,L,!0),this.addDebugCollisionBoxes(L.iconBoxStartIndex,L.iconBoxEndIndex,L,!1),this.addDebugCollisionBoxes(L.verticalIconBoxStartIndex,L.verticalIconBoxEndIndex,L,!1)}},Ms.prototype._deserializeCollisionBoxesForSymbol=function(m,L,q,Y,j,$,pe,ke,Fe){for(var Ne={},ct=L;ct<q;ct++){var kt=m.get(ct);Ne.textBox={x1:kt.x1,y1:kt.y1,x2:kt.x2,y2:kt.y2,anchorPointX:kt.anchorPointX,anchorPointY:kt.anchorPointY},Ne.textFeatureIndex=kt.featureIndex;break}for(var bt=Y;bt<j;bt++){var Yt=m.get(bt);Ne.verticalTextBox={x1:Yt.x1,y1:Yt.y1,x2:Yt.x2,y2:Yt.y2,anchorPointX:Yt.anchorPointX,anchorPointY:Yt.anchorPointY},Ne.verticalTextFeatureIndex=Yt.featureIndex;break}for(var hr=$;hr<pe;hr++){var Ir=m.get(hr);Ne.iconBox={x1:Ir.x1,y1:Ir.y1,x2:Ir.x2,y2:Ir.y2,anchorPointX:Ir.anchorPointX,anchorPointY:Ir.anchorPointY},Ne.iconFeatureIndex=Ir.featureIndex;break}for(var Ar=ke;Ar<Fe;Ar++){var en=m.get(Ar);Ne.verticalIconBox={x1:en.x1,y1:en.y1,x2:en.x2,y2:en.y2,anchorPointX:en.anchorPointX,anchorPointY:en.anchorPointY},Ne.verticalIconFeatureIndex=en.featureIndex;break}return Ne},Ms.prototype.deserializeCollisionBoxes=function(m){this.collisionArrays=[];for(var L=0;L<this.symbolInstances.length;L++){var q=this.symbolInstances.get(L);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(m,q.textBoxStartIndex,q.textBoxEndIndex,q.verticalTextBoxStartIndex,q.verticalTextBoxEndIndex,q.iconBoxStartIndex,q.iconBoxEndIndex,q.verticalIconBoxStartIndex,q.verticalIconBoxEndIndex))}},Ms.prototype.hasTextData=function(){return this.text.segments.get().length>0},Ms.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Ms.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Ms.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Ms.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Ms.prototype.addIndicesForPlacedSymbol=function(m,L){for(var q=m.placedSymbolArray.get(L),Y=q.vertexStartIndex+q.numGlyphs*4,j=q.vertexStartIndex;j<Y;j+=4)m.indexArray.emplaceBack(j,j+1,j+2),m.indexArray.emplaceBack(j+1,j+2,j+3)},Ms.prototype.getSortedSymbolIndexes=function(m){if(this.sortedAngle===m&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var L=Math.sin(m),q=Math.cos(m),Y=[],j=[],$=[],pe=0;pe<this.symbolInstances.length;++pe){$.push(pe);var ke=this.symbolInstances.get(pe);Y.push(Math.round(L*ke.anchorX+q*ke.anchorY)|0),j.push(ke.featureIndex)}return $.sort(function(Fe,Ne){return Y[Fe]-Y[Ne]||j[Ne]-j[Fe]}),$},Ms.prototype.addToSortKeyRanges=function(m,L){var q=this.sortKeyRanges[this.sortKeyRanges.length-1];q&&q.sortKey===L?q.symbolInstanceEnd=m+1:this.sortKeyRanges.push({sortKey:L,symbolInstanceStart:m,symbolInstanceEnd:m+1})},Ms.prototype.sortFeatures=function(m){var L=this;if(this.sortFeaturesByY&&this.sortedAngle!==m&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(m),this.sortedAngle=m,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var q=0,Y=this.symbolInstanceIndexes;q<Y.length;q+=1){var j=Y[q],$=this.symbolInstances.get(j);this.featureSortOrder.push($.featureIndex),[$.rightJustifiedTextSymbolIndex,$.centerJustifiedTextSymbolIndex,$.leftJustifiedTextSymbolIndex].forEach(function(pe,ke,Fe){pe>=0&&Fe.indexOf(pe)===ke&&L.addIndicesForPlacedSymbol(L.text,pe)}),$.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,$.verticalPlacedTextSymbolIndex),$.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,$.placedIconSymbolIndex),$.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,$.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},U("SymbolBucket",Ms,{omit:["layers","collisionBoxArray","features","compareText"]}),Ms.MAX_GLYPHS=65535,Ms.addDynamicAttributes=K8;function fQe(y,m){return m.replace(/{([^{}]+)}/g,function(L,q){return q in y?String(y[q]):""})}var cQe=new jr({"symbol-placement":new Ye(vn.layout_symbol["symbol-placement"]),"symbol-spacing":new Ye(vn.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ye(vn.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Gt(vn.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ye(vn.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ye(vn.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ye(vn.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ye(vn.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ye(vn.layout_symbol["icon-rotation-alignment"]),"icon-size":new Gt(vn.layout_symbol["icon-size"]),"icon-text-fit":new Ye(vn.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ye(vn.layout_symbol["icon-text-fit-padding"]),"icon-image":new Gt(vn.layout_symbol["icon-image"]),"icon-rotate":new Gt(vn.layout_symbol["icon-rotate"]),"icon-padding":new Ye(vn.layout_symbol["icon-padding"]),"icon-keep-upright":new Ye(vn.layout_symbol["icon-keep-upright"]),"icon-offset":new Gt(vn.layout_symbol["icon-offset"]),"icon-anchor":new Gt(vn.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ye(vn.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ye(vn.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ye(vn.layout_symbol["text-rotation-alignment"]),"text-field":new Gt(vn.layout_symbol["text-field"]),"text-font":new Gt(vn.layout_symbol["text-font"]),"text-size":new Gt(vn.layout_symbol["text-size"]),"text-max-width":new Gt(vn.layout_symbol["text-max-width"]),"text-line-height":new Ye(vn.layout_symbol["text-line-height"]),"text-letter-spacing":new Gt(vn.layout_symbol["text-letter-spacing"]),"text-justify":new Gt(vn.layout_symbol["text-justify"]),"text-radial-offset":new Gt(vn.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ye(vn.layout_symbol["text-variable-anchor"]),"text-anchor":new Gt(vn.layout_symbol["text-anchor"]),"text-max-angle":new Ye(vn.layout_symbol["text-max-angle"]),"text-writing-mode":new Ye(vn.layout_symbol["text-writing-mode"]),"text-rotate":new Gt(vn.layout_symbol["text-rotate"]),"text-padding":new Ye(vn.layout_symbol["text-padding"]),"text-keep-upright":new Ye(vn.layout_symbol["text-keep-upright"]),"text-transform":new Gt(vn.layout_symbol["text-transform"]),"text-offset":new Gt(vn.layout_symbol["text-offset"]),"text-allow-overlap":new Ye(vn.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ye(vn.layout_symbol["text-ignore-placement"]),"text-optional":new Ye(vn.layout_symbol["text-optional"])}),hQe=new jr({"icon-opacity":new Gt(vn.paint_symbol["icon-opacity"]),"icon-color":new Gt(vn.paint_symbol["icon-color"]),"icon-halo-color":new Gt(vn.paint_symbol["icon-halo-color"]),"icon-halo-width":new Gt(vn.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Gt(vn.paint_symbol["icon-halo-blur"]),"icon-translate":new Ye(vn.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ye(vn.paint_symbol["icon-translate-anchor"]),"text-opacity":new Gt(vn.paint_symbol["text-opacity"]),"text-color":new Gt(vn.paint_symbol["text-color"],{runtimeType:Fs,getOverride:function(y){return y.textColor},hasOverride:function(y){return!!y.textColor}}),"text-halo-color":new Gt(vn.paint_symbol["text-halo-color"]),"text-halo-width":new Gt(vn.paint_symbol["text-halo-width"]),"text-halo-blur":new Gt(vn.paint_symbol["text-halo-blur"]),"text-translate":new Ye(vn.paint_symbol["text-translate"]),"text-translate-anchor":new Ye(vn.paint_symbol["text-translate-anchor"])}),J8={paint:hQe,layout:cQe},Nb=function(m){this.type=m.property.overrides?m.property.overrides.runtimeType:xu,this.defaultValue=m};Nb.prototype.evaluate=function(m){if(m.formattedSection){var L=this.defaultValue.property.overrides;if(L&&L.hasOverride(m.formattedSection))return L.getOverride(m.formattedSection)}return m.feature&&m.featureState?this.defaultValue.evaluate(m.feature,m.featureState):this.defaultValue.property.specification.default},Nb.prototype.eachChild=function(m){if(!this.defaultValue.isConstant()){var L=this.defaultValue.value;m(L._styleExpression.expression)}},Nb.prototype.outputDefined=function(){return!1},Nb.prototype.serialize=function(){return null},U("FormatSectionOverride",Nb,{omit:["defaultValue"]});var vQe=function(y){function m(L){y.call(this,L,J8)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.recalculate=function(q,Y){if(y.prototype.recalculate.call(this,q,Y),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var j=this.layout.get("text-writing-mode");if(j){for(var $=[],pe=0,ke=j;pe<ke.length;pe+=1){var Fe=ke[pe];$.indexOf(Fe)<0&&$.push(Fe)}this.layout._values["text-writing-mode"]=$}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},m.prototype.getValueAndResolveTokens=function(q,Y,j,$){var pe=this.layout.get(q).evaluate(Y,{},j,$),ke=this._unevaluatedLayout._values[q];return!ke.isDataDriven()&&!Rh(ke.value)&&pe?fQe(Y.properties,pe):pe},m.prototype.createBucket=function(q){return new Ms(q)},m.prototype.queryRadius=function(){return 0},m.prototype.queryIntersectsFeature=function(){return!1},m.prototype._setPaintOverrides=function(){for(var q=0,Y=J8.paint.overridableProperties;q<Y.length;q+=1){var j=Y[q];if(m.hasPaintOverride(this.layout,j)){var $=this.paint.get(j),pe=new Nb($),ke=new lc(pe,$.property.specification),Fe=null;$.value.kind==="constant"||$.value.kind==="source"?Fe=new uc("source",ke):Fe=new gf("composite",ke,$.value.zoomStops,$.value._interpolationType),this.paint._values[j]=new ls($.property,Fe,$.parameters)}}},m.prototype._handleOverridablePaintPropertyUpdate=function(q,Y,j){return!this.layout||Y.isDataDriven()||j.isDataDriven()?!1:m.hasPaintOverride(this.layout,q)},m.hasPaintOverride=function(q,Y){var j=q.get("text-field"),$=J8.paint.properties[Y],pe=!1,ke=function(ct){for(var kt=0,bt=ct;kt<bt.length;kt+=1){var Yt=bt[kt];if($.overrides&&$.overrides.hasOverride(Yt)){pe=!0;return}}};if(j.value.kind==="constant"&&j.value.value instanceof Us)ke(j.value.value.sections);else if(j.value.kind==="source"){var Fe=function(ct){if(!pe)if(ct instanceof po&&To(ct.value)===dl){var kt=ct.value;ke(kt.sections)}else ct instanceof Vl?ke(ct.sections):ct.eachChild(Fe)},Ne=j.value;Ne._styleExpression&&Fe(Ne._styleExpression.expression)}return pe},m}(xn),dQe=new jr({"background-color":new Ye(vn.paint_background["background-color"]),"background-pattern":new Or(vn.paint_background["background-pattern"]),"background-opacity":new Ye(vn.paint_background["background-opacity"])}),pQe={paint:dQe},gQe=function(y){function m(L){y.call(this,L,pQe)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m}(xn),yQe=new jr({"raster-opacity":new Ye(vn.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ye(vn.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ye(vn.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ye(vn.paint_raster["raster-brightness-max"]),"raster-saturation":new Ye(vn.paint_raster["raster-saturation"]),"raster-contrast":new Ye(vn.paint_raster["raster-contrast"]),"raster-resampling":new Ye(vn.paint_raster["raster-resampling"]),"raster-fade-duration":new Ye(vn.paint_raster["raster-fade-duration"])}),mQe={paint:yQe},xQe=function(y){function m(L){y.call(this,L,mQe)}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m}(xn);function _Qe(y){var m=[],L=y.id;return L===void 0&&m.push({message:"layers."+L+': missing required property "id"'}),y.render===void 0&&m.push({message:"layers."+L+': missing required method "render"'}),y.renderingMode&&y.renderingMode!=="2d"&&y.renderingMode!=="3d"&&m.push({message:"layers."+L+': property "renderingMode" must be either "2d" or "3d"'}),m}var bQe=function(y){function m(L){y.call(this,L,{}),this.implementation=L}return y&&(m.__proto__=y),m.prototype=Object.create(y&&y.prototype),m.prototype.constructor=m,m.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},m.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},m.prototype.recalculate=function(){},m.prototype.updateTransitions=function(){},m.prototype.hasTransition=function(){},m.prototype.serialize=function(){},m.prototype.onAdd=function(q){this.implementation.onAdd&&this.implementation.onAdd(q,q.painter.context.gl)},m.prototype.onRemove=function(q){this.implementation.onRemove&&this.implementation.onRemove(q,q.painter.context.gl)},m}(xn),wQe={circle:Yje,heatmap:jje,hillshade:Qje,fill:AKe,"fill-extrusion":YKe,line:sJe,symbol:vQe,background:gQe,raster:xQe};function TQe(y){return y.type==="custom"?new bQe(y):new wQe[y.type](y)}var yJ=c.HTMLImageElement,mJ=c.HTMLCanvasElement,xJ=c.HTMLVideoElement,_J=c.ImageData,vk=c.ImageBitmap,X1=function(m,L,q,Y){this.context=m,this.format=q,this.texture=m.gl.createTexture(),this.update(L,Y)};X1.prototype.update=function(m,L,q){var Y=m.width,j=m.height,$=(!this.size||this.size[0]!==Y||this.size[1]!==j)&&!q,pe=this,ke=pe.context,Fe=ke.gl;if(this.useMipmap=!!(L&&L.useMipmap),Fe.bindTexture(Fe.TEXTURE_2D,this.texture),ke.pixelStoreUnpackFlipY.set(!1),ke.pixelStoreUnpack.set(1),ke.pixelStoreUnpackPremultiplyAlpha.set(this.format===Fe.RGBA&&(!L||L.premultiply!==!1)),$)this.size=[Y,j],m instanceof yJ||m instanceof mJ||m instanceof xJ||m instanceof _J||vk&&m instanceof vk?Fe.texImage2D(Fe.TEXTURE_2D,0,this.format,this.format,Fe.UNSIGNED_BYTE,m):Fe.texImage2D(Fe.TEXTURE_2D,0,this.format,Y,j,0,this.format,Fe.UNSIGNED_BYTE,m.data);else{var Ne=q||{x:0,y:0},ct=Ne.x,kt=Ne.y;m instanceof yJ||m instanceof mJ||m instanceof xJ||m instanceof _J||vk&&m instanceof vk?Fe.texSubImage2D(Fe.TEXTURE_2D,0,ct,kt,Fe.RGBA,Fe.UNSIGNED_BYTE,m):Fe.texSubImage2D(Fe.TEXTURE_2D,0,ct,kt,Y,j,Fe.RGBA,Fe.UNSIGNED_BYTE,m.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Fe.generateMipmap(Fe.TEXTURE_2D)},X1.prototype.bind=function(m,L,q){var Y=this,j=Y.context,$=j.gl;$.bindTexture($.TEXTURE_2D,this.texture),q===$.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(q=$.LINEAR),m!==this.filter&&($.texParameteri($.TEXTURE_2D,$.TEXTURE_MAG_FILTER,m),$.texParameteri($.TEXTURE_2D,$.TEXTURE_MIN_FILTER,q||m),this.filter=m),L!==this.wrap&&($.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_S,L),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_T,L),this.wrap=L)},X1.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1===0},X1.prototype.destroy=function(){var m=this.context,L=m.gl;L.deleteTexture(this.texture),this.texture=null};var Q8=function(m){var L=this;this._callback=m,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){L._triggered=!1,L._callback()})};Q8.prototype.trigger=function(){var m=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){m._triggered=!1,m._callback()},0))},Q8.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Ub=function(m,L,q){this.target=m,this.parent=L,this.mapId=q,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},D(["receive","process"],this),this.invoker=new Q8(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=fe()?m:c};Ub.prototype.send=function(m,L,q,Y,j){var $=this;j===void 0&&(j=!1);var pe=Math.round(Math.random()*1e18).toString(36).substring(0,10);q&&(this.callbacks[pe]=q);var ke=ae(this.globalScope)?void 0:[];return this.target.postMessage({id:pe,type:m,hasCallback:!!q,targetMapId:Y,mustQueue:j,sourceMapId:this.mapId,data:_e(L,ke)},ke),{cancel:function(){q&&delete $.callbacks[pe],$.target.postMessage({id:pe,type:"<cancel>",targetMapId:Y,sourceMapId:$.mapId})}}},Ub.prototype.receive=function(m){var L=m.data,q=L.id;if(q&&!(L.targetMapId&&this.mapId!==L.targetMapId))if(L.type==="<cancel>"){delete this.tasks[q];var Y=this.cancelCallbacks[q];delete this.cancelCallbacks[q],Y&&Y()}else fe()||L.mustQueue?(this.tasks[q]=L,this.taskQueue.push(q),this.invoker.trigger()):this.processTask(q,L)},Ub.prototype.process=function(){if(this.taskQueue.length){var m=this.taskQueue.shift(),L=this.tasks[m];delete this.tasks[m],this.taskQueue.length&&this.invoker.trigger(),L&&this.processTask(m,L)}},Ub.prototype.processTask=function(m,L){var q=this;if(L.type==="<response>"){var Y=this.callbacks[m];delete this.callbacks[m],Y&&(L.error?Y(Ae(L.error)):Y(null,Ae(L.data)))}else{var j=!1,$=ae(this.globalScope)?void 0:[],pe=L.hasCallback?function(kt,bt){j=!0,delete q.cancelCallbacks[m],q.target.postMessage({id:m,type:"<response>",sourceMapId:q.mapId,error:kt?_e(kt):null,data:_e(bt,$)},$)}:function(kt){j=!0},ke=null,Fe=Ae(L.data);if(this.parent[L.type])ke=this.parent[L.type](L.sourceMapId,Fe,pe);else if(this.parent.getWorkerSource){var Ne=L.type.split("."),ct=this.parent.getWorkerSource(L.sourceMapId,Ne[0],Fe.source);ke=ct[Ne[1]](Fe,pe)}else pe(new Error("Could not find function "+L.type));!j&&ke&&ke.cancel&&(this.cancelCallbacks[m]=ke.cancel)}},Ub.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};function AQe(y,m,L){m=Math.pow(2,L)-m-1;var q=bJ(y*256,m*256,L),Y=bJ((y+1)*256,(m+1)*256,L);return q[0]+","+q[1]+","+Y[0]+","+Y[1]}function bJ(y,m,L){var q=2*Math.PI*6378137/256/Math.pow(2,L),Y=y*q-2*Math.PI*6378137/2,j=m*q-2*Math.PI*6378137/2;return[Y,j]}var Cu=function(m,L){m&&(L?this.setSouthWest(m).setNorthEast(L):m.length===4?this.setSouthWest([m[0],m[1]]).setNorthEast([m[2],m[3]]):this.setSouthWest(m[0]).setNorthEast(m[1]))};Cu.prototype.setNorthEast=function(m){return this._ne=m instanceof sl?new sl(m.lng,m.lat):sl.convert(m),this},Cu.prototype.setSouthWest=function(m){return this._sw=m instanceof sl?new sl(m.lng,m.lat):sl.convert(m),this},Cu.prototype.extend=function(m){var L=this._sw,q=this._ne,Y,j;if(m instanceof sl)Y=m,j=m;else if(m instanceof Cu){if(Y=m._sw,j=m._ne,!Y||!j)return this}else{if(Array.isArray(m))if(m.length===4||m.every(Array.isArray)){var $=m;return this.extend(Cu.convert($))}else{var pe=m;return this.extend(sl.convert(pe))}return this}return!L&&!q?(this._sw=new sl(Y.lng,Y.lat),this._ne=new sl(j.lng,j.lat)):(L.lng=Math.min(Y.lng,L.lng),L.lat=Math.min(Y.lat,L.lat),q.lng=Math.max(j.lng,q.lng),q.lat=Math.max(j.lat,q.lat)),this},Cu.prototype.getCenter=function(){return new sl((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Cu.prototype.getSouthWest=function(){return this._sw},Cu.prototype.getNorthEast=function(){return this._ne},Cu.prototype.getNorthWest=function(){return new sl(this.getWest(),this.getNorth())},Cu.prototype.getSouthEast=function(){return new sl(this.getEast(),this.getSouth())},Cu.prototype.getWest=function(){return this._sw.lng},Cu.prototype.getSouth=function(){return this._sw.lat},Cu.prototype.getEast=function(){return this._ne.lng},Cu.prototype.getNorth=function(){return this._ne.lat},Cu.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Cu.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Cu.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Cu.prototype.contains=function(m){var L=sl.convert(m),q=L.lng,Y=L.lat,j=this._sw.lat<=Y&&Y<=this._ne.lat,$=this._sw.lng<=q&&q<=this._ne.lng;return this._sw.lng>this._ne.lng&&($=this._sw.lng>=q&&q>=this._ne.lng),j&&$},Cu.convert=function(m){return!m||m instanceof Cu?m:new Cu(m)};var wJ=63710088e-1,sl=function(m,L){if(isNaN(m)||isNaN(L))throw new Error("Invalid LngLat object: ("+m+", "+L+")");if(this.lng=+m,this.lat=+L,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};sl.prototype.wrap=function(){return new sl(M(this.lng,-180,180),this.lat)},sl.prototype.toArray=function(){return[this.lng,this.lat]},sl.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},sl.prototype.distanceTo=function(m){var L=Math.PI/180,q=this.lat*L,Y=m.lat*L,j=Math.sin(q)*Math.sin(Y)+Math.cos(q)*Math.cos(Y)*Math.cos((m.lng-this.lng)*L),$=wJ*Math.acos(Math.min(j,1));return $},sl.prototype.toBounds=function(m){m===void 0&&(m=0);var L=40075017,q=360*m/L,Y=q/Math.cos(Math.PI/180*this.lat);return new Cu(new sl(this.lng-Y,this.lat-q),new sl(this.lng+Y,this.lat+q))},sl.convert=function(m){if(m instanceof sl)return m;if(Array.isArray(m)&&(m.length===2||m.length===3))return new sl(Number(m[0]),Number(m[1]));if(!Array.isArray(m)&&typeof m=="object"&&m!==null)return new sl(Number("lng"in m?m.lng:m.lon),Number(m.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var TJ=2*Math.PI*wJ;function AJ(y){return TJ*Math.cos(y*Math.PI/180)}function MJ(y){return(180+y)/360}function SJ(y){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+y*Math.PI/360)))/360}function EJ(y,m){return y/AJ(m)}function MQe(y){return y*360-180}function $8(y){var m=180-y*360;return 360/Math.PI*Math.atan(Math.exp(m*Math.PI/180))-90}function SQe(y,m){return y*AJ($8(m))}function EQe(y){return 1/Math.cos(y*Math.PI/180)}var Z1=function(m,L,q){q===void 0&&(q=0),this.x=+m,this.y=+L,this.z=+q};Z1.fromLngLat=function(m,L){L===void 0&&(L=0);var q=sl.convert(m);return new Z1(MJ(q.lng),SJ(q.lat),EJ(L,q.lat))},Z1.prototype.toLngLat=function(){return new sl(MQe(this.x),$8(this.y))},Z1.prototype.toAltitude=function(){return SQe(this.z,this.y)},Z1.prototype.meterInMercatorCoordinateUnits=function(){return 1/TJ*EQe($8(this.y))};var j1=function(m,L,q){this.z=m,this.x=L,this.y=q,this.key=tA(0,m,m,L,q)};j1.prototype.equals=function(m){return this.z===m.z&&this.x===m.x&&this.y===m.y},j1.prototype.url=function(m,L){var q=AQe(this.x,this.y,this.z),Y=kQe(this.z,this.x,this.y);return m[(this.x+this.y)%m.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(L==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",Y).replace("{bbox-epsg-3857}",q)},j1.prototype.getTilePoint=function(m){var L=Math.pow(2,this.z);return new u((m.x*L-this.x)*fn,(m.y*L-this.y)*fn)},j1.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var kJ=function(m,L){this.wrap=m,this.canonical=L,this.key=tA(m,L.z,L.z,L.x,L.y)},Lu=function(m,L,q,Y,j){this.overscaledZ=m,this.wrap=L,this.canonical=new j1(q,+Y,+j),this.key=tA(L,m,q,Y,j)};Lu.prototype.equals=function(m){return this.overscaledZ===m.overscaledZ&&this.wrap===m.wrap&&this.canonical.equals(m.canonical)},Lu.prototype.scaledTo=function(m){var L=this.canonical.z-m;return m>this.canonical.z?new Lu(m,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Lu(m,this.wrap,m,this.canonical.x>>L,this.canonical.y>>L)},Lu.prototype.calculateScaledKey=function(m,L){var q=this.canonical.z-m;return m>this.canonical.z?tA(this.wrap*+L,m,this.canonical.z,this.canonical.x,this.canonical.y):tA(this.wrap*+L,m,m,this.canonical.x>>q,this.canonical.y>>q)},Lu.prototype.isChildOf=function(m){if(m.wrap!==this.wrap)return!1;var L=this.canonical.z-m.canonical.z;return m.overscaledZ===0||m.overscaledZ<this.overscaledZ&&m.canonical.x===this.canonical.x>>L&&m.canonical.y===this.canonical.y>>L},Lu.prototype.children=function(m){if(this.overscaledZ>=m)return[new Lu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var L=this.canonical.z+1,q=this.canonical.x*2,Y=this.canonical.y*2;return[new Lu(L,this.wrap,L,q,Y),new Lu(L,this.wrap,L,q+1,Y),new Lu(L,this.wrap,L,q,Y+1),new Lu(L,this.wrap,L,q+1,Y+1)]},Lu.prototype.isLessThan=function(m){return this.wrap<m.wrap?!0:this.wrap>m.wrap?!1:this.overscaledZ<m.overscaledZ?!0:this.overscaledZ>m.overscaledZ?!1:this.canonical.x<m.canonical.x?!0:this.canonical.x>m.canonical.x?!1:this.canonical.y<m.canonical.y},Lu.prototype.wrapped=function(){return new Lu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Lu.prototype.unwrapTo=function(m){return new Lu(this.overscaledZ,m,this.canonical.z,this.canonical.x,this.canonical.y)},Lu.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Lu.prototype.toUnwrapped=function(){return new kJ(this.wrap,this.canonical)},Lu.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Lu.prototype.getTilePoint=function(m){return this.canonical.getTilePoint(new Z1(m.x-this.wrap,m.y))};function tA(y,m,L,q,Y){y*=2,y<0&&(y=y*-1-1);var j=1<<L;return(j*j*y+j*Y+q).toString(36)+L.toString(36)+m.toString(36)}function kQe(y,m,L){for(var q="",Y,j=y;j>0;j--)Y=1<<j-1,q+=(m&Y?1:0)+(L&Y?2:0);return q}U("CanonicalTileID",j1),U("OverscaledTileID",Lu,{omit:["posMatrix"]});var Eg=function(m,L,q){if(this.uid=m,L.height!==L.width)throw new RangeError("DEM tiles must be square");if(q&&q!=="mapbox"&&q!=="terrarium")return Z('"'+q+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=L.height;var Y=this.dim=L.height-2;this.data=new Uint32Array(L.data.buffer),this.encoding=q||"mapbox";for(var j=0;j<Y;j++)this.data[this._idx(-1,j)]=this.data[this._idx(0,j)],this.data[this._idx(Y,j)]=this.data[this._idx(Y-1,j)],this.data[this._idx(j,-1)]=this.data[this._idx(j,0)],this.data[this._idx(j,Y)]=this.data[this._idx(j,Y-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(Y,-1)]=this.data[this._idx(Y-1,0)],this.data[this._idx(-1,Y)]=this.data[this._idx(0,Y-1)],this.data[this._idx(Y,Y)]=this.data[this._idx(Y-1,Y-1)]};Eg.prototype.get=function(m,L){var q=new Uint8Array(this.data.buffer),Y=this._idx(m,L)*4,j=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return j(q[Y],q[Y+1],q[Y+2])},Eg.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Eg.prototype._idx=function(m,L){if(m<-1||m>=this.dim+1||L<-1||L>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(L+1)*this.stride+(m+1)},Eg.prototype._unpackMapbox=function(m,L,q){return(m*256*256+L*256+q)/10-1e4},Eg.prototype._unpackTerrarium=function(m,L,q){return m*256+L+q/256-32768},Eg.prototype.getPixels=function(){return new Nh({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Eg.prototype.backfillBorder=function(m,L,q){if(this.dim!==m.dim)throw new Error("dem dimension mismatch");var Y=L*this.dim,j=L*this.dim+this.dim,$=q*this.dim,pe=q*this.dim+this.dim;switch(L){case-1:Y=j-1;break;case 1:j=Y+1;break}switch(q){case-1:$=pe-1;break;case 1:pe=$+1;break}for(var ke=-L*this.dim,Fe=-q*this.dim,Ne=$;Ne<pe;Ne++)for(var ct=Y;ct<j;ct++)this.data[this._idx(ct,Ne)]=m.data[this._idx(ct+ke,Ne+Fe)]},U("DEMData",Eg);function CQe(y,m){var L={};if(!m)return L;for(var q=function(){var $=j[Y],pe=$.layerIds.map(function(ct){return m.getLayer(ct)}).filter(Boolean);if(pe.length!==0){$.layers=pe,$.stateDependentLayerIds&&($.stateDependentLayers=$.stateDependentLayerIds.map(function(ct){return pe.filter(function(kt){return kt.id===ct})[0]}));for(var ke=0,Fe=pe;ke<Fe.length;ke+=1){var Ne=Fe[ke];L[Ne.id]=$}}},Y=0,j=y;Y<j.length;Y+=1)q();return L}var dk=function(m){this._stringToNumber={},this._numberToString=[];for(var L=0;L<m.length;L++){var q=m[L];this._stringToNumber[q]=L,this._numberToString[L]=q}};dk.prototype.encode=function(m){return this._stringToNumber[m]},dk.prototype.decode=function(m){return this._numberToString[m]};var pk=function(m,L,q,Y,j){this.type="Feature",this._vectorTileFeature=m,m._z=L,m._x=q,m._y=Y,this.properties=m.properties,this.id=j},eq={geometry:{configurable:!0}};eq.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},eq.geometry.set=function(y){this._geometry=y},pk.prototype.toJSON=function(){var m={geometry:this.geometry};for(var L in this)L==="_geometry"||L==="_vectorTileFeature"||(m[L]=this[L]);return m},Object.defineProperties(pk.prototype,eq);var Vb=function(){this.state={},this.stateChanges={},this.deletedStates={}};Vb.prototype.updateState=function(m,L,q){var Y=String(L);if(this.stateChanges[m]=this.stateChanges[m]||{},this.stateChanges[m][Y]=this.stateChanges[m][Y]||{},x(this.stateChanges[m][Y],q),this.deletedStates[m]===null){this.deletedStates[m]={};for(var j in this.state[m])j!==Y&&(this.deletedStates[m][j]=null)}else{var $=this.deletedStates[m]&&this.deletedStates[m][Y]===null;if($){this.deletedStates[m][Y]={};for(var pe in this.state[m][Y])q[pe]||(this.deletedStates[m][Y][pe]=null)}else for(var ke in q){var Fe=this.deletedStates[m]&&this.deletedStates[m][Y]&&this.deletedStates[m][Y][ke]===null;Fe&&delete this.deletedStates[m][Y][ke]}}},Vb.prototype.removeFeatureState=function(m,L,q){var Y=this.deletedStates[m]===null;if(!Y){var j=String(L);if(this.deletedStates[m]=this.deletedStates[m]||{},q&&L!==void 0)this.deletedStates[m][j]!==null&&(this.deletedStates[m][j]=this.deletedStates[m][j]||{},this.deletedStates[m][j][q]=null);else if(L!==void 0){var $=this.stateChanges[m]&&this.stateChanges[m][j];if($){this.deletedStates[m][j]={};for(q in this.stateChanges[m][j])this.deletedStates[m][j][q]=null}else this.deletedStates[m][j]=null}else this.deletedStates[m]=null}},Vb.prototype.getState=function(m,L){var q=String(L),Y=this.state[m]||{},j=this.stateChanges[m]||{},$=x({},Y[q],j[q]);if(this.deletedStates[m]===null)return{};if(this.deletedStates[m]){var pe=this.deletedStates[m][L];if(pe===null)return{};for(var ke in pe)delete $[ke]}return $},Vb.prototype.initializeTileState=function(m,L){m.setFeatureState(this.state,L)},Vb.prototype.coalesceChanges=function(m,L){var q={};for(var Y in this.stateChanges){this.state[Y]=this.state[Y]||{};var j={};for(var $ in this.stateChanges[Y])this.state[Y][$]||(this.state[Y][$]={}),x(this.state[Y][$],this.stateChanges[Y][$]),j[$]=this.state[Y][$];q[Y]=j}for(var pe in this.deletedStates){this.state[pe]=this.state[pe]||{};var ke={};if(this.deletedStates[pe]===null)for(var Fe in this.state[pe])ke[Fe]={},this.state[pe][Fe]={};else for(var Ne in this.deletedStates[pe]){var ct=this.deletedStates[pe][Ne]===null;if(ct)this.state[pe][Ne]={};else for(var kt=0,bt=Object.keys(this.deletedStates[pe][Ne]);kt<bt.length;kt+=1){var Yt=bt[kt];delete this.state[pe][Ne][Yt]}ke[Ne]=this.state[pe][Ne]}q[pe]=q[pe]||{},x(q[pe],ke)}if(this.stateChanges={},this.deletedStates={},Object.keys(q).length!==0)for(var hr in m){var Ir=m[hr];Ir.setFeatureState(q,L)}};var kg=function(m,L){this.tileID=m,this.x=m.canonical.x,this.y=m.canonical.y,this.z=m.canonical.z,this.grid=new su(fn,16,0),this.grid3D=new su(fn,16,0),this.featureIndexArray=new fu,this.promoteId=L};kg.prototype.insert=function(m,L,q,Y,j,$){var pe=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(q,Y,j);for(var ke=$?this.grid3D:this.grid,Fe=0;Fe<L.length;Fe++){for(var Ne=L[Fe],ct=[1/0,1/0,-1/0,-1/0],kt=0;kt<Ne.length;kt++){var bt=Ne[kt];ct[0]=Math.min(ct[0],bt.x),ct[1]=Math.min(ct[1],bt.y),ct[2]=Math.max(ct[2],bt.x),ct[3]=Math.max(ct[3],bt.y)}ct[0]<fn&&ct[1]<fn&&ct[2]>=0&&ct[3]>=0&&ke.insert(pe,ct[0],ct[1],ct[2],ct[3])}},kg.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Lb.VectorTile(new ik(this.rawTileData)).layers,this.sourceLayerCoder=new dk(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},kg.prototype.query=function(m,L,q,Y){var j=this;this.loadVTLayers();for(var $=m.params||{},pe=fn/m.tileSize/m.scale,ke=be($.filter),Fe=m.queryGeometry,Ne=m.queryPadding*pe,ct=LJ(Fe),kt=this.grid.query(ct.minX-Ne,ct.minY-Ne,ct.maxX+Ne,ct.maxY+Ne),bt=LJ(m.cameraQueryGeometry),Yt=this.grid3D.query(bt.minX-Ne,bt.minY-Ne,bt.maxX+Ne,bt.maxY+Ne,function(Pn,oi,ti,Bi){return jd(m.cameraQueryGeometry,Pn-Ne,oi-Ne,ti+Ne,Bi+Ne)}),hr=0,Ir=Yt;hr<Ir.length;hr+=1){var Ar=Ir[hr];kt.push(Ar)}kt.sort(LQe);for(var en={},Ur,Qr=function(Pn){var oi=kt[Pn];if(oi!==Ur){Ur=oi;var ti=j.featureIndexArray.get(oi),Bi=null;j.loadMatchingFeature(en,ti.bucketIndex,ti.sourceLayerIndex,ti.featureIndex,ke,$.layers,$.availableImages,L,q,Y,function(Ti,Ri,wa){return Bi||(Bi=xi(Ti)),Ri.queryIntersectsFeature(Fe,Ti,wa,Bi,j.z,m.transform,pe,m.pixelPosMatrix)})}},on=0;on<kt.length;on++)Qr(on);return en},kg.prototype.loadMatchingFeature=function(m,L,q,Y,j,$,pe,ke,Fe,Ne,ct){var kt=this.bucketLayerIDs[L];if(!($&&!F($,kt))){var bt=this.sourceLayerCoder.decode(q),Yt=this.vtLayers[bt],hr=Yt.feature(Y);if(j.needGeometry){var Ir=Da(hr,!0);if(!j.filter(new Sn(this.tileID.overscaledZ),Ir,this.tileID.canonical))return}else if(!j.filter(new Sn(this.tileID.overscaledZ),hr))return;for(var Ar=this.getId(hr,bt),en=0;en<kt.length;en++){var Ur=kt[en];if(!($&&$.indexOf(Ur)<0)){var Qr=ke[Ur];if(Qr){var on={};Ar!==void 0&&Ne&&(on=Ne.getState(Qr.sourceLayer||"_geojsonTileLayer",Ar));var Pn=x({},Fe[Ur]);Pn.paint=CJ(Pn.paint,Qr.paint,hr,on,pe),Pn.layout=CJ(Pn.layout,Qr.layout,hr,on,pe);var oi=!ct||ct(hr,Qr,on);if(oi){var ti=new pk(hr,this.z,this.x,this.y,Ar);ti.layer=Pn;var Bi=m[Ur];Bi===void 0&&(Bi=m[Ur]=[]),Bi.push({featureIndex:Y,feature:ti,intersectionZ:oi})}}}}}},kg.prototype.lookupSymbolFeatures=function(m,L,q,Y,j,$,pe,ke){var Fe={};this.loadVTLayers();for(var Ne=be(j),ct=0,kt=m;ct<kt.length;ct+=1){var bt=kt[ct];this.loadMatchingFeature(Fe,q,Y,bt,Ne,$,pe,ke,L)}return Fe},kg.prototype.hasLayer=function(m){for(var L=0,q=this.bucketLayerIDs;L<q.length;L+=1)for(var Y=q[L],j=0,$=Y;j<$.length;j+=1){var pe=$[j];if(m===pe)return!0}return!1},kg.prototype.getId=function(m,L){var q=m.id;if(this.promoteId){var Y=typeof this.promoteId=="string"?this.promoteId:this.promoteId[L];q=m.properties[Y],typeof q=="boolean"&&(q=Number(q))}return q},U("FeatureIndex",kg,{omit:["rawTileData","sourceLayerCoder"]});function CJ(y,m,L,q,Y){return O(y,function(j,$){var pe=m instanceof Wl?m.get($):null;return pe&&pe.evaluate?pe.evaluate(L,q,Y):pe})}function LJ(y){for(var m=1/0,L=1/0,q=-1/0,Y=-1/0,j=0,$=y;j<$.length;j+=1){var pe=$[j];m=Math.min(m,pe.x),L=Math.min(L,pe.y),q=Math.max(q,pe.x),Y=Math.max(Y,pe.y)}return{minX:m,minY:L,maxX:q,maxY:Y}}function LQe(y,m){return m-y}var PQe=3e4,xf=function(m,L){this.tileID=m,this.uid=g(),this.uses=0,this.tileSize=L,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};xf.prototype.registerFadeDuration=function(m){var L=m+this.timeAdded;L<Re.now()||this.fadeEndTime&&L<this.fadeEndTime||(this.fadeEndTime=L)},xf.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},xf.prototype.loadVectorData=function(m,L,q){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!m){this.collisionBoxArray=new uo;return}m.featureIndex&&(this.latestFeatureIndex=m.featureIndex,m.rawTileData?(this.latestRawTileData=m.rawTileData,this.latestFeatureIndex.rawTileData=m.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=m.collisionBoxArray,this.buckets=CQe(m.buckets,L.style),this.hasSymbolBuckets=!1;for(var Y in this.buckets){var j=this.buckets[Y];if(j instanceof Ms)if(this.hasSymbolBuckets=!0,q)j.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var $ in this.buckets){var pe=this.buckets[$];if(pe instanceof Ms&&pe.hasRTLText){this.hasRTLText=!0,Ao();break}}this.queryPadding=0;for(var ke in this.buckets){var Fe=this.buckets[ke];this.queryPadding=Math.max(this.queryPadding,L.style.getLayer(ke).queryRadius(Fe))}m.imageAtlas&&(this.imageAtlas=m.imageAtlas),m.glyphAtlasImage&&(this.glyphAtlasImage=m.glyphAtlasImage)},xf.prototype.unloadVectorData=function(){for(var m in this.buckets)this.buckets[m].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},xf.prototype.getBucket=function(m){return this.buckets[m.id]},xf.prototype.upload=function(m){for(var L in this.buckets){var q=this.buckets[L];q.uploadPending()&&q.upload(m)}var Y=m.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new X1(m,this.imageAtlas.image,Y.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new X1(m,this.glyphAtlasImage,Y.ALPHA),this.glyphAtlasImage=null)},xf.prototype.prepare=function(m){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(m,this.imageAtlasTexture)},xf.prototype.queryRenderedFeatures=function(m,L,q,Y,j,$,pe,ke,Fe,Ne){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:Y,cameraQueryGeometry:j,scale:$,tileSize:this.tileSize,pixelPosMatrix:Ne,transform:ke,params:pe,queryPadding:this.queryPadding*Fe},m,L,q)},xf.prototype.querySourceFeatures=function(m,L){var q=this.latestFeatureIndex;if(!(!q||!q.rawTileData)){var Y=q.loadVTLayers(),j=L?L.sourceLayer:"",$=Y._geojsonTileLayer||Y[j];if($)for(var pe=be(L&&L.filter),ke=this.tileID.canonical,Fe=ke.z,Ne=ke.x,ct=ke.y,kt={z:Fe,x:Ne,y:ct},bt=0;bt<$.length;bt++){var Yt=$.feature(bt);if(pe.needGeometry){var hr=Da(Yt,!0);if(!pe.filter(new Sn(this.tileID.overscaledZ),hr,this.tileID.canonical))continue}else if(!pe.filter(new Sn(this.tileID.overscaledZ),Yt))continue;var Ir=q.getId(Yt,j),Ar=new pk(Yt,Fe,Ne,ct,Ir);Ar.tile=kt,m.push(Ar)}}},xf.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},xf.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},xf.prototype.setExpiryData=function(m){var L=this.expirationTime;if(m.cacheControl){var q=K(m.cacheControl);q["max-age"]&&(this.expirationTime=Date.now()+q["max-age"]*1e3)}else m.expires&&(this.expirationTime=new Date(m.expires).getTime());if(this.expirationTime){var Y=Date.now(),j=!1;if(this.expirationTime>Y)j=!1;else if(!L)j=!0;else if(this.expirationTime<L)j=!0;else{var $=this.expirationTime-L;$?this.expirationTime=Y+Math.max($,PQe):j=!0}j?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},xf.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},xf.prototype.setFeatureState=function(m,L){if(!(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(m).length===0)){var q=this.latestFeatureIndex.loadVTLayers();for(var Y in this.buckets)if(L.style.hasLayer(Y)){var j=this.buckets[Y],$=j.layers[0].sourceLayer||"_geojsonTileLayer",pe=q[$],ke=m[$];if(!(!pe||!ke||Object.keys(ke).length===0)){j.update(ke,pe,this.imageAtlas&&this.imageAtlas.patternPositions||{});var Fe=L&&L.style&&L.style.getLayer(Y);Fe&&(this.queryPadding=Math.max(this.queryPadding,Fe.queryRadius(j)))}}}},xf.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},xf.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Re.now()},xf.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},xf.prototype.setHoldDuration=function(m){this.symbolFadeHoldUntil=Re.now()+m},xf.prototype.setDependencies=function(m,L){for(var q={},Y=0,j=L;Y<j.length;Y+=1){var $=j[Y];q[$]=!0}this.dependencies[m]=q},xf.prototype.hasDependency=function(m,L){for(var q=0,Y=m;q<Y.length;q+=1){var j=Y[q],$=this.dependencies[j];if($)for(var pe=0,ke=L;pe<ke.length;pe+=1){var Fe=ke[pe];if($[Fe])return!0}}return!1};var RQe=["type","source","source-layer","minzoom","maxzoom","filter","layout"],Uy=c.performance,PJ=function(m){this._marks={start:[m.url,"start"].join("#"),end:[m.url,"end"].join("#"),measure:m.url.toString()},Uy.mark(this._marks.start)};PJ.prototype.finish=function(){Uy.mark(this._marks.end);var m=Uy.getEntriesByName(this._marks.measure);return m.length===0&&(Uy.measure(this._marks.measure,this._marks.start,this._marks.end),m=Uy.getEntriesByName(this._marks.measure),Uy.clearMarks(this._marks.start),Uy.clearMarks(this._marks.end),Uy.clearMeasures(this._marks.measure)),m},n.Actor=Ub,n.AlphaImage=W1,n.CanonicalTileID=j1,n.CollisionBoxArray=uo,n.Color=lo,n.DEMData=Eg,n.DataConstantProperty=Ye,n.DictionaryCoder=dk,n.EXTENT=fn,n.ErrorEvent=Li,n.EvaluationParameters=Sn,n.Event=Ra,n.Evented=Yn,n.FeatureIndex=kg,n.FillBucket=Zp,n.FillExtrusionBucket=jp,n.ImageAtlas=JT,n.ImagePosition=ok,n.LineBucket=ah,n.LngLat=sl,n.LngLatBounds=Cu,n.MercatorCoordinate=Z1,n.ONE_EM=Wf,n.OverscaledTileID=Lu,n.Point=u,n.Point$1=u,n.Properties=jr,n.Protobuf=ik,n.RGBAImage=Nh,n.RequestManager=Me,n.RequestPerformance=PJ,n.ResourceType=Zi,n.SegmentVector=Ja,n.SourceFeatureState=Vb,n.StructArrayLayout1ui2=Wa,n.StructArrayLayout2f1f2i16=ei,n.StructArrayLayout2i4=cn,n.StructArrayLayout3ui6=Si,n.StructArrayLayout4i8=Vn,n.SymbolBucket=Ms,n.Texture=X1,n.Tile=xf,n.Transitionable=La,n.Uniform1f=$e,n.Uniform1i=Oe,n.Uniform2f=st,n.Uniform3f=Tt,n.Uniform4f=Rt,n.UniformColor=Dt,n.UniformMatrix4f=Vt,n.UnwrappedTileID=kJ,n.ValidationError=bi,n.WritingMode=Zv,n.ZoomHistory=Ge,n.add=Eb,n.addDynamicAttributes=K8,n.asyncAll=b,n.bezier=_,n.bindAll=D,n.browser=Re,n.cacheEntryPossiblyAdded=an,n.clamp=p,n.clearTileCache=mn,n.clipLine=cJ,n.clone=Ab,n.clone$1=B,n.clone$2=L8,n.collisionCircleLayout=hJe,n.config=qe,n.create=Tb,n.create$1=Dc,n.create$2=wb,n.createCommonjsModule=a,n.createExpression=$c,n.createLayout=Bn,n.createStyleLayer=TQe,n.cross=qje,n.deepEqual=h,n.dot=Fje,n.dot$1=Uje,n.ease=T,n.emitValidationErrors=Su,n.endsWith=z,n.enforceCacheSizeLimit=ni,n.evaluateSizeForFeature=iJ,n.evaluateSizeForZoom=aJ,n.evaluateVariableOffset=dJ,n.evented=Fi,n.extend=x,n.featureFilter=be,n.filterObject=V,n.fromRotation=qy,n.getAnchorAlignment=W8,n.getAnchorJustification=j8,n.getArrayBuffer=yr,n.getImage=Mi,n.getJSON=nr,n.getRTLTextPluginStatus=xa,n.getReferrer=ot,n.getVideo=Ui,n.identity=Mb,n.invert=zy,n.isChar=Le,n.isMapboxURL=Ze,n.keysDifference=k,n.makeRequest=Nt,n.mapObject=O,n.mercatorXfromLng=MJ,n.mercatorYfromLat=SJ,n.mercatorZfromAltitude=EJ,n.mul=C8,n.multiply=Oy,n.mvt=Lb,n.nextPowerOfTwo=A,n.normalize=VT,n.number=zs,n.offscreenCanvasSupported=si,n.ortho=k8,n.parseGlyphPBF=BJe,n.pbf=ik,n.performSymbolLayout=nQe,n.perspective=UT,n.pick=E,n.plugin=Po,n.polygonIntersectsPolygon=ua,n.postMapLoadEvent=Je,n.postTurnstileEvent=yt,n.potpack=KK,n.refProperties=RQe,n.register=U,n.registerForPluginStateChange=Gi,n.renderColorRamp=kK,n.rotate=G1,n.rotateX=Bh,n.rotateZ=Sb,n.scale=Oh,n.scale$1=Nje,n.scale$2=R8,n.setCacheLimits=fi,n.setRTLTextPlugin=va,n.sphericalToCartesian=ue,n.sqrLen=Gje,n.styleSpec=vn,n.sub=Oje,n.symbolSize=ZJe,n.transformMat3=zje,n.transformMat4=Q5,n.translate=jl,n.triggerPluginCompletionEvent=Xn,n.uniqueId=g,n.validateCustomStyleLayer=_Qe,n.validateLight=Ya,n.validateStyle=to,n.values=w,n.vectorTile=Lb,n.version=o,n.warnOnce=Z,n.webpSupported=et,n.window=c,n.wrap=M}),i(["./shared"],function(n){"use strict";function a(ot){var Be=typeof ot;if(Be==="number"||Be==="boolean"||Be==="string"||ot===void 0||ot===null)return JSON.stringify(ot);if(Array.isArray(ot)){for(var lt="[",xt=0,Nt=ot;xt<Nt.length;xt+=1){var nr=Nt[xt];lt+=a(nr)+","}return lt+"]"}for(var yr=Object.keys(ot).sort(),dr="{",Rr=0;Rr<yr.length;Rr++)dr+=JSON.stringify(yr[Rr])+":"+a(ot[yr[Rr]])+",";return dr+"}"}function o(ot){for(var Be="",lt=0,xt=n.refProperties;lt<xt.length;lt+=1){var Nt=xt[lt];Be+="/"+a(ot[Nt])}return Be}function s(ot,Be){for(var lt={},xt=0;xt<ot.length;xt++){var Nt=Be&&Be[ot[xt].id]||o(ot[xt]);Be&&(Be[ot[xt].id]=Nt);var nr=lt[Nt];nr||(nr=lt[Nt]=[]),nr.push(ot[xt])}var yr=[];for(var dr in lt)yr.push(lt[dr]);return yr}var l=function(Be){this.keyCache={},Be&&this.replace(Be)};l.prototype.replace=function(Be){this._layerConfigs={},this._layers={},this.update(Be,[])},l.prototype.update=function(Be,lt){for(var xt=this,Nt=0,nr=Be;Nt<nr.length;Nt+=1){var yr=nr[Nt];this._layerConfigs[yr.id]=yr;var dr=this._layers[yr.id]=n.createStyleLayer(yr);dr._featureFilter=n.featureFilter(dr.filter),this.keyCache[yr.id]&&delete this.keyCache[yr.id]}for(var Rr=0,Gr=lt;Rr<Gr.length;Rr+=1){var Yr=Gr[Rr];delete this.keyCache[Yr],delete this._layerConfigs[Yr],delete this._layers[Yr]}this.familiesBySource={};for(var dn=s(n.values(this._layerConfigs),this.keyCache),Wr=0,qn=dn;Wr<qn.length;Wr+=1){var vi=qn[Wr],Mi=vi.map(function(Yn){return xt._layers[Yn.id]}),Ui=Mi[0];if(Ui.visibility!=="none"){var ji=Ui.source||"",ea=this.familiesBySource[ji];ea||(ea=this.familiesBySource[ji]={});var Ra=Ui.sourceLayer||"_geojsonTileLayer",Li=ea[Ra];Li||(Li=ea[Ra]=[]),Li.push(Mi)}}};var u=1,f=function(Be){var lt={},xt=[];for(var Nt in Be){var nr=Be[Nt],yr=lt[Nt]={};for(var dr in nr){var Rr=nr[+dr];if(!(!Rr||Rr.bitmap.width===0||Rr.bitmap.height===0)){var Gr={x:0,y:0,w:Rr.bitmap.width+2*u,h:Rr.bitmap.height+2*u};xt.push(Gr),yr[dr]={rect:Gr,metrics:Rr.metrics}}}}var Yr=n.potpack(xt),dn=Yr.w,Wr=Yr.h,qn=new n.AlphaImage({width:dn||1,height:Wr||1});for(var vi in Be){var Mi=Be[vi];for(var Ui in Mi){var ji=Mi[+Ui];if(!(!ji||ji.bitmap.width===0||ji.bitmap.height===0)){var ea=lt[vi][Ui].rect;n.AlphaImage.copy(ji.bitmap,qn,{x:0,y:0},{x:ea.x+u,y:ea.y+u},ji.bitmap)}}}this.image=qn,this.positions=lt};n.register("GlyphAtlas",f);var c=function(Be){this.tileID=new n.OverscaledTileID(Be.tileID.overscaledZ,Be.tileID.wrap,Be.tileID.canonical.z,Be.tileID.canonical.x,Be.tileID.canonical.y),this.uid=Be.uid,this.zoom=Be.zoom,this.pixelRatio=Be.pixelRatio,this.tileSize=Be.tileSize,this.source=Be.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Be.showCollisionBoxes,this.collectResourceTiming=!!Be.collectResourceTiming,this.returnDependencies=!!Be.returnDependencies,this.promoteId=Be.promoteId};c.prototype.parse=function(Be,lt,xt,Nt,nr){var yr=this;this.status="parsing",this.data=Be,this.collisionBoxArray=new n.CollisionBoxArray;var dr=new n.DictionaryCoder(Object.keys(Be.layers).sort()),Rr=new n.FeatureIndex(this.tileID,this.promoteId);Rr.bucketLayerIDs=[];var Gr={},Yr={featureIndex:Rr,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:xt},dn=lt.familiesBySource[this.source];for(var Wr in dn){var qn=Be.layers[Wr];if(qn){qn.version===1&&n.warnOnce('Vector tile source "'+this.source+'" layer "'+Wr+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var vi=dr.encode(Wr),Mi=[],Ui=0;Ui<qn.length;Ui++){var ji=qn.feature(Ui),ea=Rr.getId(ji,Wr);Mi.push({feature:ji,id:ea,index:Ui,sourceLayerIndex:vi})}for(var Ra=0,Li=dn[Wr];Ra<Li.length;Ra+=1){var Yn=Li[Ra],zi=Yn[0];if(!(zi.minzoom&&this.zoom<Math.floor(zi.minzoom))&&!(zi.maxzoom&&this.zoom>=zi.maxzoom)&&zi.visibility!=="none"){h(Yn,this.zoom,xt);var ya=Gr[zi.id]=zi.createBucket({index:Rr.bucketLayerIDs.length,layers:Yn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:vi,sourceID:this.source});ya.populate(Mi,Yr,this.tileID.canonical),Rr.bucketLayerIDs.push(Yn.map(function(Cr){return Cr.id}))}}}}var zn,Xe,Ut,ur,br=n.mapObject(Yr.glyphDependencies,function(Cr){return Object.keys(Cr).map(Number)});Object.keys(br).length?Nt.send("getGlyphs",{uid:this.uid,stacks:br},function(Cr,hn){zn||(zn=Cr,Xe=hn,gn.call(yr))}):Xe={};var Jr=Object.keys(Yr.iconDependencies);Jr.length?Nt.send("getImages",{icons:Jr,source:this.source,tileID:this.tileID,type:"icons"},function(Cr,hn){zn||(zn=Cr,Ut=hn,gn.call(yr))}):Ut={};var sn=Object.keys(Yr.patternDependencies);sn.length?Nt.send("getImages",{icons:sn,source:this.source,tileID:this.tileID,type:"patterns"},function(Cr,hn){zn||(zn=Cr,ur=hn,gn.call(yr))}):ur={},gn.call(this);function gn(){if(zn)return nr(zn);if(Xe&&Ut&&ur){var Cr=new f(Xe),hn=new n.ImageAtlas(Ut,ur);for(var gi in Gr){var Hn=Gr[gi];Hn instanceof n.SymbolBucket?(h(Hn.layers,this.zoom,xt),n.performSymbolLayout(Hn,Xe,Cr.positions,Ut,hn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Hn.hasPattern&&(Hn instanceof n.LineBucket||Hn instanceof n.FillBucket||Hn instanceof n.FillExtrusionBucket)&&(h(Hn.layers,this.zoom,xt),Hn.addFeatures(Yr,this.tileID.canonical,hn.patternPositions))}this.status="done",nr(null,{buckets:n.values(Gr).filter(function(qi){return!qi.isEmpty()}),featureIndex:Rr,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Cr.image,imageAtlas:hn,glyphMap:this.returnDependencies?Xe:null,iconMap:this.returnDependencies?Ut:null,glyphPositions:this.returnDependencies?Cr.positions:null})}}};function h(ot,Be,lt){for(var xt=new n.EvaluationParameters(Be),Nt=0,nr=ot;Nt<nr.length;Nt+=1){var yr=nr[Nt];yr.recalculate(xt,lt)}}function v(ot,Be){var lt=n.getArrayBuffer(ot.request,function(xt,Nt,nr,yr){xt?Be(xt):Nt&&Be(null,{vectorTile:new n.vectorTile.VectorTile(new n.pbf(Nt)),rawData:Nt,cacheControl:nr,expires:yr})});return function(){lt.cancel(),Be()}}var d=function(Be,lt,xt,Nt){this.actor=Be,this.layerIndex=lt,this.availableImages=xt,this.loadVectorData=Nt||v,this.loading={},this.loaded={}};d.prototype.loadTile=function(Be,lt){var xt=this,Nt=Be.uid;this.loading||(this.loading={});var nr=Be&&Be.request&&Be.request.collectResourceTiming?new n.RequestPerformance(Be.request):!1,yr=this.loading[Nt]=new c(Be);yr.abort=this.loadVectorData(Be,function(dr,Rr){if(delete xt.loading[Nt],dr||!Rr)return yr.status="done",xt.loaded[Nt]=yr,lt(dr);var Gr=Rr.rawData,Yr={};Rr.expires&&(Yr.expires=Rr.expires),Rr.cacheControl&&(Yr.cacheControl=Rr.cacheControl);var dn={};if(nr){var Wr=nr.finish();Wr&&(dn.resourceTiming=JSON.parse(JSON.stringify(Wr)))}yr.vectorTile=Rr.vectorTile,yr.parse(Rr.vectorTile,xt.layerIndex,xt.availableImages,xt.actor,function(qn,vi){if(qn||!vi)return lt(qn);lt(null,n.extend({rawTileData:Gr.slice(0)},vi,Yr,dn))}),xt.loaded=xt.loaded||{},xt.loaded[Nt]=yr})},d.prototype.reloadTile=function(Be,lt){var xt=this,Nt=this.loaded,nr=Be.uid,yr=this;if(Nt&&Nt[nr]){var dr=Nt[nr];dr.showCollisionBoxes=Be.showCollisionBoxes;var Rr=function(Gr,Yr){var dn=dr.reloadCallback;dn&&(delete dr.reloadCallback,dr.parse(dr.vectorTile,yr.layerIndex,xt.availableImages,yr.actor,dn)),lt(Gr,Yr)};dr.status==="parsing"?dr.reloadCallback=Rr:dr.status==="done"&&(dr.vectorTile?dr.parse(dr.vectorTile,this.layerIndex,this.availableImages,this.actor,Rr):Rr())}},d.prototype.abortTile=function(Be,lt){var xt=this.loading,Nt=Be.uid;xt&&xt[Nt]&&xt[Nt].abort&&(xt[Nt].abort(),delete xt[Nt]),lt()},d.prototype.removeTile=function(Be,lt){var xt=this.loaded,Nt=Be.uid;xt&&xt[Nt]&&delete xt[Nt],lt()};var _=n.window.ImageBitmap,T=function(){this.loaded={}};T.prototype.loadTile=function(Be,lt){var xt=Be.uid,Nt=Be.encoding,nr=Be.rawImageData,yr=_&&nr instanceof _?this.getImageData(nr):nr,dr=new n.DEMData(xt,yr,Nt);this.loaded=this.loaded||{},this.loaded[xt]=dr,lt(null,dr)},T.prototype.getImageData=function(Be){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(Be.width,Be.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Be.width,this.offscreenCanvas.height=Be.height,this.offscreenCanvasContext.drawImage(Be,0,0,Be.width,Be.height);var lt=this.offscreenCanvasContext.getImageData(-1,-1,Be.width+2,Be.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new n.RGBAImage({width:lt.width,height:lt.height},lt.data)},T.prototype.removeTile=function(Be){var lt=this.loaded,xt=Be.uid;lt&&lt[xt]&&delete lt[xt]};var p=M;function M(ot,Be){var lt=ot&&ot.type,xt;if(lt==="FeatureCollection")for(xt=0;xt<ot.features.length;xt++)M(ot.features[xt],Be);else if(lt==="GeometryCollection")for(xt=0;xt<ot.geometries.length;xt++)M(ot.geometries[xt],Be);else if(lt==="Feature")M(ot.geometry,Be);else if(lt==="Polygon")b(ot.coordinates,Be);else if(lt==="MultiPolygon")for(xt=0;xt<ot.coordinates.length;xt++)b(ot.coordinates[xt],Be);return ot}function b(ot,Be){if(ot.length!==0){w(ot[0],Be);for(var lt=1;lt<ot.length;lt++)w(ot[lt],!Be)}}function w(ot,Be){for(var lt=0,xt=0,Nt=ot.length,nr=Nt-1;xt<Nt;nr=xt++)lt+=(ot[xt][0]-ot[nr][0])*(ot[nr][1]+ot[xt][1]);lt>=0!=!!Be&&ot.reverse()}var k=n.vectorTile.VectorTileFeature.prototype.toGeoJSON,x=function(Be){this._feature=Be,this.extent=n.EXTENT,this.type=Be.type,this.properties=Be.tags,"id"in Be&&!isNaN(Be.id)&&(this.id=parseInt(Be.id,10))};x.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Be=[],lt=0,xt=this._feature.geometry;lt<xt.length;lt+=1){var Nt=xt[lt];Be.push([new n.Point$1(Nt[0],Nt[1])])}return Be}else{for(var nr=[],yr=0,dr=this._feature.geometry;yr<dr.length;yr+=1){for(var Rr=dr[yr],Gr=[],Yr=0,dn=Rr;Yr<dn.length;Yr+=1){var Wr=dn[Yr];Gr.push(new n.Point$1(Wr[0],Wr[1]))}nr.push(Gr)}return nr}},x.prototype.toGeoJSON=function(Be,lt,xt){return k.call(this,Be,lt,xt)};var E=function(Be){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=n.EXTENT,this.length=Be.length,this._features=Be};E.prototype.feature=function(Be){return new x(this._features[Be])};var S=n.vectorTile.VectorTileFeature,g=C;function C(ot,Be){this.options=Be||{},this.features=ot,this.length=ot.length}C.prototype.feature=function(ot){return new A(this.features[ot],this.options.extent)};function A(ot,Be){this.id=typeof ot.id=="number"?ot.id:void 0,this.type=ot.type,this.rawGeometry=ot.type===1?[ot.geometry]:ot.geometry,this.properties=ot.tags,this.extent=Be||4096}A.prototype.loadGeometry=function(){var ot=this.rawGeometry;this.geometry=[];for(var Be=0;Be<ot.length;Be++){for(var lt=ot[Be],xt=[],Nt=0;Nt<lt.length;Nt++)xt.push(new n.Point$1(lt[Nt][0],lt[Nt][1]));this.geometry.push(xt)}return this.geometry},A.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ot=this.geometry,Be=1/0,lt=-1/0,xt=1/0,Nt=-1/0,nr=0;nr<ot.length;nr++)for(var yr=ot[nr],dr=0;dr<yr.length;dr++){var Rr=yr[dr];Be=Math.min(Be,Rr.x),lt=Math.max(lt,Rr.x),xt=Math.min(xt,Rr.y),Nt=Math.max(Nt,Rr.y)}return[Be,xt,lt,Nt]},A.prototype.toGeoJSON=S.prototype.toGeoJSON;var P=V,D=V,z=B,O=g;function V(ot){var Be=new n.pbf;return F(ot,Be),Be.finish()}function B(ot,Be){Be=Be||{};var lt={};for(var xt in ot)lt[xt]=new g(ot[xt].features,Be),lt[xt].name=xt,lt[xt].version=Be.version,lt[xt].extent=Be.extent;return V({layers:lt})}function F(ot,Be){for(var lt in ot.layers)Be.writeMessage(3,N,ot.layers[lt])}function N(ot,Be){Be.writeVarintField(15,ot.version||1),Be.writeStringField(1,ot.name||""),Be.writeVarintField(5,ot.extent||4096);var lt,xt={keys:[],values:[],keycache:{},valuecache:{}};for(lt=0;lt<ot.length;lt++)xt.feature=ot.feature(lt),Be.writeMessage(2,Z,xt);var Nt=xt.keys;for(lt=0;lt<Nt.length;lt++)Be.writeStringField(3,Nt[lt]);var nr=xt.values;for(lt=0;lt<nr.length;lt++)Be.writeMessage(4,K,nr[lt])}function Z(ot,Be){var lt=ot.feature;lt.id!==void 0&&Be.writeVarintField(1,lt.id),Be.writeMessage(2,J,ot),Be.writeVarintField(3,lt.type),Be.writeMessage(4,fe,lt)}function J(ot,Be){var lt=ot.feature,xt=ot.keys,Nt=ot.values,nr=ot.keycache,yr=ot.valuecache;for(var dr in lt.properties){var Rr=nr[dr];typeof Rr=="undefined"&&(xt.push(dr),Rr=xt.length-1,nr[dr]=Rr),Be.writeVarint(Rr);var Gr=lt.properties[dr],Yr=typeof Gr;Yr!=="string"&&Yr!=="boolean"&&Yr!=="number"&&(Gr=JSON.stringify(Gr));var dn=Yr+":"+Gr,Wr=yr[dn];typeof Wr=="undefined"&&(Nt.push(Gr),Wr=Nt.length-1,yr[dn]=Wr),Be.writeVarint(Wr)}}function re(ot,Be){return(Be<<3)+(ot&7)}function ue(ot){return ot<<1^ot>>31}function fe(ot,Be){for(var lt=ot.loadGeometry(),xt=ot.type,Nt=0,nr=0,yr=lt.length,dr=0;dr<yr;dr++){var Rr=lt[dr],Gr=1;xt===1&&(Gr=Rr.length),Be.writeVarint(re(1,Gr));for(var Yr=xt===3?Rr.length-1:Rr.length,dn=0;dn<Yr;dn++){dn===1&&xt!==1&&Be.writeVarint(re(2,Yr-1));var Wr=Rr[dn].x-Nt,qn=Rr[dn].y-nr;Be.writeVarint(ue(Wr)),Be.writeVarint(ue(qn)),Nt+=Wr,nr+=qn}xt===3&&Be.writeVarint(re(7,1))}}function K(ot,Be){var lt=typeof ot;lt==="string"?Be.writeStringField(1,ot):lt==="boolean"?Be.writeBooleanField(7,ot):lt==="number"&&(ot%1!==0?Be.writeDoubleField(3,ot):ot<0?Be.writeSVarintField(6,ot):Be.writeVarintField(5,ot))}P.fromVectorTileJs=D,P.fromGeojsonVt=z,P.GeoJSONWrapper=O;function X(ot,Be,lt,xt,Nt,nr){if(!(Nt-xt<=lt)){var yr=xt+Nt>>1;ae(ot,Be,yr,xt,Nt,nr%2),X(ot,Be,lt,xt,yr-1,nr+1),X(ot,Be,lt,yr+1,Nt,nr+1)}}function ae(ot,Be,lt,xt,Nt,nr){for(;Nt>xt;){if(Nt-xt>600){var yr=Nt-xt+1,dr=lt-xt+1,Rr=Math.log(yr),Gr=.5*Math.exp(2*Rr/3),Yr=.5*Math.sqrt(Rr*Gr*(yr-Gr)/yr)*(dr-yr/2<0?-1:1),dn=Math.max(xt,Math.floor(lt-dr*Gr/yr+Yr)),Wr=Math.min(Nt,Math.floor(lt+(yr-dr)*Gr/yr+Yr));ae(ot,Be,lt,dn,Wr,nr)}var qn=Be[2*lt+nr],vi=xt,Mi=Nt;for(oe(ot,Be,xt,lt),Be[2*Nt+nr]>qn&&oe(ot,Be,xt,Nt);vi<Mi;){for(oe(ot,Be,vi,Mi),vi++,Mi--;Be[2*vi+nr]<qn;)vi++;for(;Be[2*Mi+nr]>qn;)Mi--}Be[2*xt+nr]===qn?oe(ot,Be,xt,Mi):(Mi++,oe(ot,Be,Mi,Nt)),Mi<=lt&&(xt=Mi+1),lt<=Mi&&(Nt=Mi-1)}}function oe(ot,Be,lt,xt){me(ot,lt,xt),me(Be,2*lt,2*xt),me(Be,2*lt+1,2*xt+1)}function me(ot,Be,lt){var xt=ot[Be];ot[Be]=ot[lt],ot[lt]=xt}function xe(ot,Be,lt,xt,Nt,nr,yr){for(var dr=[0,ot.length-1,0],Rr=[],Gr,Yr;dr.length;){var dn=dr.pop(),Wr=dr.pop(),qn=dr.pop();if(Wr-qn<=yr){for(var vi=qn;vi<=Wr;vi++)Gr=Be[2*vi],Yr=Be[2*vi+1],Gr>=lt&&Gr<=Nt&&Yr>=xt&&Yr<=nr&&Rr.push(ot[vi]);continue}var Mi=Math.floor((qn+Wr)/2);Gr=Be[2*Mi],Yr=Be[2*Mi+1],Gr>=lt&&Gr<=Nt&&Yr>=xt&&Yr<=nr&&Rr.push(ot[Mi]);var Ui=(dn+1)%2;(dn===0?lt<=Gr:xt<=Yr)&&(dr.push(qn),dr.push(Mi-1),dr.push(Ui)),(dn===0?Nt>=Gr:nr>=Yr)&&(dr.push(Mi+1),dr.push(Wr),dr.push(Ui))}return Rr}function ce(ot,Be,lt,xt,Nt,nr){for(var yr=[0,ot.length-1,0],dr=[],Rr=Nt*Nt;yr.length;){var Gr=yr.pop(),Yr=yr.pop(),dn=yr.pop();if(Yr-dn<=nr){for(var Wr=dn;Wr<=Yr;Wr++)ie(Be[2*Wr],Be[2*Wr+1],lt,xt)<=Rr&&dr.push(ot[Wr]);continue}var qn=Math.floor((dn+Yr)/2),vi=Be[2*qn],Mi=Be[2*qn+1];ie(vi,Mi,lt,xt)<=Rr&&dr.push(ot[qn]);var Ui=(Gr+1)%2;(Gr===0?lt-Nt<=vi:xt-Nt<=Mi)&&(yr.push(dn),yr.push(qn-1),yr.push(Ui)),(Gr===0?lt+Nt>=vi:xt+Nt>=Mi)&&(yr.push(qn+1),yr.push(Yr),yr.push(Ui))}return dr}function ie(ot,Be,lt,xt){var Nt=ot-lt,nr=Be-xt;return Nt*Nt+nr*nr}var ge=function(ot){return ot[0]},le=function(ot){return ot[1]},we=function(Be,lt,xt,Nt,nr){lt===void 0&&(lt=ge),xt===void 0&&(xt=le),Nt===void 0&&(Nt=64),nr===void 0&&(nr=Float64Array),this.nodeSize=Nt,this.points=Be;for(var yr=Be.length<65536?Uint16Array:Uint32Array,dr=this.ids=new yr(Be.length),Rr=this.coords=new nr(Be.length*2),Gr=0;Gr<Be.length;Gr++)dr[Gr]=Gr,Rr[2*Gr]=lt(Be[Gr]),Rr[2*Gr+1]=xt(Be[Gr]);X(dr,Rr,Nt,0,dr.length-1,0)};we.prototype.range=function(Be,lt,xt,Nt){return xe(this.ids,this.coords,Be,lt,xt,Nt,this.nodeSize)},we.prototype.within=function(Be,lt,xt){return ce(this.ids,this.coords,Be,lt,xt,this.nodeSize)};var Re={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(ot){return ot}},qe=function(Be){this.options=Lt(Object.create(Re),Be),this.trees=new Array(this.options.maxZoom+1)};qe.prototype.load=function(Be){var lt=this.options,xt=lt.log,Nt=lt.minZoom,nr=lt.maxZoom,yr=lt.nodeSize;xt&&console.time("total time");var dr="prepare "+Be.length+" points";xt&&console.time(dr),this.points=Be;for(var Rr=[],Gr=0;Gr<Be.length;Gr++)Be[Gr].geometry&&Rr.push(Pe(Be[Gr],Gr));this.trees[nr+1]=new we(Rr,Me,Ze,yr,Float32Array),xt&&console.timeEnd(dr);for(var Yr=nr;Yr>=Nt;Yr--){var dn=+Date.now();Rr=this._cluster(Rr,Yr),this.trees[Yr]=new we(Rr,Me,Ze,yr,Float32Array),xt&&console.log("z%d: %d clusters in %dms",Yr,Rr.length,+Date.now()-dn)}return xt&&console.timeEnd("total time"),this},qe.prototype.getClusters=function(Be,lt){var xt=((Be[0]+180)%360+360)%360-180,Nt=Math.max(-90,Math.min(90,Be[1])),nr=Be[2]===180?180:((Be[2]+180)%360+360)%360-180,yr=Math.max(-90,Math.min(90,Be[3]));if(Be[2]-Be[0]>=360)xt=-180,nr=180;else if(xt>nr){var dr=this.getClusters([xt,Nt,180,yr],lt),Rr=this.getClusters([-180,Nt,nr,yr],lt);return dr.concat(Rr)}for(var Gr=this.trees[this._limitZoom(lt)],Yr=Gr.range(ft(xt),je(yr),ft(nr),je(Nt)),dn=[],Wr=0,qn=Yr;Wr<qn.length;Wr+=1){var vi=qn[Wr],Mi=Gr.points[vi];dn.push(Mi.numPoints?Ie(Mi):this.points[Mi.index])}return dn},qe.prototype.getChildren=function(Be){var lt=this._getOriginId(Be),xt=this._getOriginZoom(Be),Nt="No cluster with the specified id.",nr=this.trees[xt];if(!nr)throw new Error(Nt);var yr=nr.points[lt];if(!yr)throw new Error(Nt);for(var dr=this.options.radius/(this.options.extent*Math.pow(2,xt-1)),Rr=nr.within(yr.x,yr.y,dr),Gr=[],Yr=0,dn=Rr;Yr<dn.length;Yr+=1){var Wr=dn[Yr],qn=nr.points[Wr];qn.parentId===Be&&Gr.push(qn.numPoints?Ie(qn):this.points[qn.index])}if(Gr.length===0)throw new Error(Nt);return Gr},qe.prototype.getLeaves=function(Be,lt,xt){lt=lt||10,xt=xt||0;var Nt=[];return this._appendLeaves(Nt,Be,lt,xt,0),Nt},qe.prototype.getTile=function(Be,lt,xt){var Nt=this.trees[this._limitZoom(Be)],nr=Math.pow(2,Be),yr=this.options,dr=yr.extent,Rr=yr.radius,Gr=Rr/dr,Yr=(xt-Gr)/nr,dn=(xt+1+Gr)/nr,Wr={features:[]};return this._addTileFeatures(Nt.range((lt-Gr)/nr,Yr,(lt+1+Gr)/nr,dn),Nt.points,lt,xt,nr,Wr),lt===0&&this._addTileFeatures(Nt.range(1-Gr/nr,Yr,1,dn),Nt.points,nr,xt,nr,Wr),lt===nr-1&&this._addTileFeatures(Nt.range(0,Yr,Gr/nr,dn),Nt.points,-1,xt,nr,Wr),Wr.features.length?Wr:null},qe.prototype.getClusterExpansionZoom=function(Be){for(var lt=this._getOriginZoom(Be)-1;lt<=this.options.maxZoom;){var xt=this.getChildren(Be);if(lt++,xt.length!==1)break;Be=xt[0].properties.cluster_id}return lt},qe.prototype._appendLeaves=function(Be,lt,xt,Nt,nr){for(var yr=this.getChildren(lt),dr=0,Rr=yr;dr<Rr.length;dr+=1){var Gr=Rr[dr],Yr=Gr.properties;if(Yr&&Yr.cluster?nr+Yr.point_count<=Nt?nr+=Yr.point_count:nr=this._appendLeaves(Be,Yr.cluster_id,xt,Nt,nr):nr<Nt?nr++:Be.push(Gr),Be.length===xt)break}return nr},qe.prototype._addTileFeatures=function(Be,lt,xt,Nt,nr,yr){for(var dr=0,Rr=Be;dr<Rr.length;dr+=1){var Gr=Rr[dr],Yr=lt[Gr],dn=Yr.numPoints,Wr={type:1,geometry:[[Math.round(this.options.extent*(Yr.x*nr-xt)),Math.round(this.options.extent*(Yr.y*nr-Nt))]],tags:dn?ut(Yr):this.points[Yr.index].properties},qn=void 0;dn?qn=Yr.id:this.options.generateId?qn=Yr.index:this.points[Yr.index].id&&(qn=this.points[Yr.index].id),qn!==void 0&&(Wr.id=qn),yr.features.push(Wr)}},qe.prototype._limitZoom=function(Be){return Math.max(this.options.minZoom,Math.min(+Be,this.options.maxZoom+1))},qe.prototype._cluster=function(Be,lt){for(var xt=[],Nt=this.options,nr=Nt.radius,yr=Nt.extent,dr=Nt.reduce,Rr=Nt.minPoints,Gr=nr/(yr*Math.pow(2,lt)),Yr=0;Yr<Be.length;Yr++){var dn=Be[Yr];if(!(dn.zoom<=lt)){dn.zoom=lt;for(var Wr=this.trees[lt+1],qn=Wr.within(dn.x,dn.y,Gr),vi=dn.numPoints||1,Mi=vi,Ui=0,ji=qn;Ui<ji.length;Ui+=1){var ea=ji[Ui],Ra=Wr.points[ea];Ra.zoom>lt&&(Mi+=Ra.numPoints||1)}if(Mi>=Rr){for(var Li=dn.x*vi,Yn=dn.y*vi,zi=dr&&vi>1?this._map(dn,!0):null,ya=(Yr<<5)+(lt+1)+this.points.length,zn=0,Xe=qn;zn<Xe.length;zn+=1){var Ut=Xe[zn],ur=Wr.points[Ut];if(!(ur.zoom<=lt)){ur.zoom=lt;var br=ur.numPoints||1;Li+=ur.x*br,Yn+=ur.y*br,ur.parentId=ya,dr&&(zi||(zi=this._map(dn,!0)),dr(zi,this._map(ur)))}}dn.parentId=ya,xt.push(et(Li/Mi,Yn/Mi,ya,Mi,zi))}else if(xt.push(dn),Mi>1)for(var Jr=0,sn=qn;Jr<sn.length;Jr+=1){var gn=sn[Jr],Cr=Wr.points[gn];Cr.zoom<=lt||(Cr.zoom=lt,xt.push(Cr))}}}return xt},qe.prototype._getOriginId=function(Be){return Be-this.points.length>>5},qe.prototype._getOriginZoom=function(Be){return(Be-this.points.length)%32},qe.prototype._map=function(Be,lt){if(Be.numPoints)return lt?Lt({},Be.properties):Be.properties;var xt=this.points[Be.index].properties,Nt=this.options.map(xt);return lt&&Nt===xt?Lt({},Nt):Nt};function et(ot,Be,lt,xt,Nt){return{x:ot,y:Be,zoom:1/0,id:lt,parentId:-1,numPoints:xt,properties:Nt}}function Pe(ot,Be){var lt=ot.geometry.coordinates,xt=lt[0],Nt=lt[1];return{x:ft(xt),y:je(Nt),zoom:1/0,index:Be,parentId:-1}}function Ie(ot){return{type:"Feature",id:ot.id,properties:ut(ot),geometry:{type:"Point",coordinates:[_t(ot.x),Bt(ot.y)]}}}function ut(ot){var Be=ot.numPoints,lt=Be>=1e4?Math.round(Be/1e3)+"k":Be>=1e3?Math.round(Be/100)/10+"k":Be;return Lt(Lt({},ot.properties),{cluster:!0,cluster_id:ot.id,point_count:Be,point_count_abbreviated:lt})}function ft(ot){return ot/360+.5}function je(ot){var Be=Math.sin(ot*Math.PI/180),lt=.5-.25*Math.log((1+Be)/(1-Be))/Math.PI;return lt<0?0:lt>1?1:lt}function _t(ot){return(ot-.5)*360}function Bt(ot){var Be=(180-ot*360)*Math.PI/180;return 360*Math.atan(Math.exp(Be))/Math.PI-90}function Lt(ot,Be){for(var lt in Be)ot[lt]=Be[lt];return ot}function Me(ot){return ot.x}function Ze(ot){return ot.y}function dt(ot,Be,lt,xt){for(var Nt=xt,nr=lt-Be>>1,yr=lt-Be,dr,Rr=ot[Be],Gr=ot[Be+1],Yr=ot[lt],dn=ot[lt+1],Wr=Be+3;Wr<lt;Wr+=3){var qn=it(ot[Wr],ot[Wr+1],Rr,Gr,Yr,dn);if(qn>Nt)dr=Wr,Nt=qn;else if(qn===Nt){var vi=Math.abs(Wr-nr);vi<yr&&(dr=Wr,yr=vi)}}Nt>xt&&(dr-Be>3&&dt(ot,Be,dr,xt),ot[dr+2]=Nt,lt-dr>3&&dt(ot,dr,lt,xt))}function it(ot,Be,lt,xt,Nt,nr){var yr=Nt-lt,dr=nr-xt;if(yr!==0||dr!==0){var Rr=((ot-lt)*yr+(Be-xt)*dr)/(yr*yr+dr*dr);Rr>1?(lt=Nt,xt=nr):Rr>0&&(lt+=yr*Rr,xt+=dr*Rr)}return yr=ot-lt,dr=Be-xt,yr*yr+dr*dr}function vt(ot,Be,lt,xt){var Nt={id:typeof ot=="undefined"?null:ot,type:Be,geometry:lt,tags:xt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return rt(Nt),Nt}function rt(ot){var Be=ot.geometry,lt=ot.type;if(lt==="Point"||lt==="MultiPoint"||lt==="LineString")We(ot,Be);else if(lt==="Polygon"||lt==="MultiLineString")for(var xt=0;xt<Be.length;xt++)We(ot,Be[xt]);else if(lt==="MultiPolygon")for(xt=0;xt<Be.length;xt++)for(var Nt=0;Nt<Be[xt].length;Nt++)We(ot,Be[xt][Nt])}function We(ot,Be){for(var lt=0;lt<Be.length;lt+=3)ot.minX=Math.min(ot.minX,Be[lt]),ot.minY=Math.min(ot.minY,Be[lt+1]),ot.maxX=Math.max(ot.maxX,Be[lt]),ot.maxY=Math.max(ot.maxY,Be[lt+1])}function ht(ot,Be){var lt=[];if(ot.type==="FeatureCollection")for(var xt=0;xt<ot.features.length;xt++)mt(lt,ot.features[xt],Be,xt);else ot.type==="Feature"?mt(lt,ot,Be):mt(lt,{geometry:ot},Be);return lt}function mt(ot,Be,lt,xt){if(Be.geometry){var Nt=Be.geometry.coordinates,nr=Be.geometry.type,yr=Math.pow(lt.tolerance/((1<<lt.maxZoom)*lt.extent),2),dr=[],Rr=Be.id;if(lt.promoteId?Rr=Be.properties[lt.promoteId]:lt.generateId&&(Rr=xt||0),nr==="Point")er(Nt,dr);else if(nr==="MultiPoint")for(var Gr=0;Gr<Nt.length;Gr++)er(Nt[Gr],dr);else if(nr==="LineString")$t(Nt,dr,yr,!1);else if(nr==="MultiLineString")if(lt.lineMetrics){for(Gr=0;Gr<Nt.length;Gr++)dr=[],$t(Nt[Gr],dr,yr,!1),ot.push(vt(Rr,"LineString",dr,Be.properties));return}else cr(Nt,dr,yr,!1);else if(nr==="Polygon")cr(Nt,dr,yr,!0);else if(nr==="MultiPolygon")for(Gr=0;Gr<Nt.length;Gr++){var Yr=[];cr(Nt[Gr],Yr,yr,!0),dr.push(Yr)}else if(nr==="GeometryCollection"){for(Gr=0;Gr<Be.geometry.geometries.length;Gr++)mt(ot,{id:Rr,geometry:Be.geometry.geometries[Gr],properties:Be.properties},lt,xt);return}else throw new Error("Input data is not a valid GeoJSON object.");ot.push(vt(Rr,nr,dr,Be.properties))}}function er(ot,Be){Be.push(or(ot[0])),Be.push(vr(ot[1])),Be.push(0)}function $t(ot,Be,lt,xt){for(var Nt,nr,yr=0,dr=0;dr<ot.length;dr++){var Rr=or(ot[dr][0]),Gr=vr(ot[dr][1]);Be.push(Rr),Be.push(Gr),Be.push(0),dr>0&&(xt?yr+=(Nt*Gr-Rr*nr)/2:yr+=Math.sqrt(Math.pow(Rr-Nt,2)+Math.pow(Gr-nr,2))),Nt=Rr,nr=Gr}var Yr=Be.length-3;Be[2]=1,dt(Be,0,Yr,lt),Be[Yr+2]=1,Be.size=Math.abs(yr),Be.start=0,Be.end=Be.size}function cr(ot,Be,lt,xt){for(var Nt=0;Nt<ot.length;Nt++){var nr=[];$t(ot[Nt],nr,lt,xt),Be.push(nr)}}function or(ot){return ot/360+.5}function vr(ot){var Be=Math.sin(ot*Math.PI/180),lt=.5-.25*Math.log((1+Be)/(1-Be))/Math.PI;return lt<0?0:lt>1?1:lt}function Ot(ot,Be,lt,xt,Nt,nr,yr,dr){if(lt/=Be,xt/=Be,nr>=lt&&yr<xt)return ot;if(yr<lt||nr>=xt)return null;for(var Rr=[],Gr=0;Gr<ot.length;Gr++){var Yr=ot[Gr],dn=Yr.geometry,Wr=Yr.type,qn=Nt===0?Yr.minX:Yr.minY,vi=Nt===0?Yr.maxX:Yr.maxY;if(qn>=lt&&vi<xt){Rr.push(Yr);continue}else if(vi<lt||qn>=xt)continue;var Mi=[];if(Wr==="Point"||Wr==="MultiPoint")yt(dn,Mi,lt,xt,Nt);else if(Wr==="LineString")Et(dn,Mi,lt,xt,Nt,!1,dr.lineMetrics);else if(Wr==="MultiLineString")Ke(dn,Mi,lt,xt,Nt,!1);else if(Wr==="Polygon")Ke(dn,Mi,lt,xt,Nt,!0);else if(Wr==="MultiPolygon")for(var Ui=0;Ui<dn.length;Ui++){var ji=[];Ke(dn[Ui],ji,lt,xt,Nt,!0),ji.length&&Mi.push(ji)}if(Mi.length){if(dr.lineMetrics&&Wr==="LineString"){for(Ui=0;Ui<Mi.length;Ui++)Rr.push(vt(Yr.id,Wr,Mi[Ui],Yr.tags));continue}(Wr==="LineString"||Wr==="MultiLineString")&&(Mi.length===1?(Wr="LineString",Mi=Mi[0]):Wr="MultiLineString"),(Wr==="Point"||Wr==="MultiPoint")&&(Wr=Mi.length===3?"Point":"MultiPoint"),Rr.push(vt(Yr.id,Wr,Mi,Yr.tags))}}return Rr.length?Rr:null}function yt(ot,Be,lt,xt,Nt){for(var nr=0;nr<ot.length;nr+=3){var yr=ot[nr+Nt];yr>=lt&&yr<=xt&&(Be.push(ot[nr]),Be.push(ot[nr+1]),Be.push(ot[nr+2]))}}function Et(ot,Be,lt,xt,Nt,nr,yr){for(var dr=Je(ot),Rr=Nt===0?Ee:de,Gr=ot.start,Yr,dn,Wr=0;Wr<ot.length-3;Wr+=3){var qn=ot[Wr],vi=ot[Wr+1],Mi=ot[Wr+2],Ui=ot[Wr+3],ji=ot[Wr+4],ea=Nt===0?qn:vi,Ra=Nt===0?Ui:ji,Li=!1;yr&&(Yr=Math.sqrt(Math.pow(qn-Ui,2)+Math.pow(vi-ji,2))),ea<lt?Ra>lt&&(dn=Rr(dr,qn,vi,Ui,ji,lt),yr&&(dr.start=Gr+Yr*dn)):ea>xt?Ra<xt&&(dn=Rr(dr,qn,vi,Ui,ji,xt),yr&&(dr.start=Gr+Yr*dn)):At(dr,qn,vi,Mi),Ra<lt&&ea>=lt&&(dn=Rr(dr,qn,vi,Ui,ji,lt),Li=!0),Ra>xt&&ea<=xt&&(dn=Rr(dr,qn,vi,Ui,ji,xt),Li=!0),!nr&&Li&&(yr&&(dr.end=Gr+Yr*dn),Be.push(dr),dr=Je(ot)),yr&&(Gr+=Yr)}var Yn=ot.length-3;qn=ot[Yn],vi=ot[Yn+1],Mi=ot[Yn+2],ea=Nt===0?qn:vi,ea>=lt&&ea<=xt&&At(dr,qn,vi,Mi),Yn=dr.length-3,nr&&Yn>=3&&(dr[Yn]!==dr[0]||dr[Yn+1]!==dr[1])&&At(dr,dr[0],dr[1],dr[2]),dr.length&&Be.push(dr)}function Je(ot){var Be=[];return Be.size=ot.size,Be.start=ot.start,Be.end=ot.end,Be}function Ke(ot,Be,lt,xt,Nt,nr){for(var yr=0;yr<ot.length;yr++)Et(ot[yr],Be,lt,xt,Nt,nr,!1)}function At(ot,Be,lt,xt){ot.push(Be),ot.push(lt),ot.push(xt)}function Ee(ot,Be,lt,xt,Nt,nr){var yr=(nr-Be)/(xt-Be);return ot.push(nr),ot.push(lt+(Nt-lt)*yr),ot.push(1),yr}function de(ot,Be,lt,xt,Nt,nr){var yr=(nr-lt)/(Nt-lt);return ot.push(Be+(xt-Be)*yr),ot.push(nr),ot.push(1),yr}function Te(ot,Be){var lt=Be.buffer/Be.extent,xt=ot,Nt=Ot(ot,1,-1-lt,lt,0,-1,2,Be),nr=Ot(ot,1,1-lt,2+lt,0,-1,2,Be);return(Nt||nr)&&(xt=Ot(ot,1,-lt,1+lt,0,-1,2,Be)||[],Nt&&(xt=nt(Nt,1).concat(xt)),nr&&(xt=xt.concat(nt(nr,-1)))),xt}function nt(ot,Be){for(var lt=[],xt=0;xt<ot.length;xt++){var Nt=ot[xt],nr=Nt.type,yr;if(nr==="Point"||nr==="MultiPoint"||nr==="LineString")yr=Mt(Nt.geometry,Be);else if(nr==="MultiLineString"||nr==="Polygon"){yr=[];for(var dr=0;dr<Nt.geometry.length;dr++)yr.push(Mt(Nt.geometry[dr],Be))}else if(nr==="MultiPolygon")for(yr=[],dr=0;dr<Nt.geometry.length;dr++){for(var Rr=[],Gr=0;Gr<Nt.geometry[dr].length;Gr++)Rr.push(Mt(Nt.geometry[dr][Gr],Be));yr.push(Rr)}lt.push(vt(Nt.id,nr,yr,Nt.tags))}return lt}function Mt(ot,Be){var lt=[];lt.size=ot.size,ot.start!==void 0&&(lt.start=ot.start,lt.end=ot.end);for(var xt=0;xt<ot.length;xt+=3)lt.push(ot[xt]+Be,ot[xt+1],ot[xt+2]);return lt}function Kt(ot,Be){if(ot.transformed)return ot;var lt=1<<ot.z,xt=ot.x,Nt=ot.y,nr,yr,dr;for(nr=0;nr<ot.features.length;nr++){var Rr=ot.features[nr],Gr=Rr.geometry,Yr=Rr.type;if(Rr.geometry=[],Yr===1)for(yr=0;yr<Gr.length;yr+=2)Rr.geometry.push(Jt(Gr[yr],Gr[yr+1],Be,lt,xt,Nt));else for(yr=0;yr<Gr.length;yr++){var dn=[];for(dr=0;dr<Gr[yr].length;dr+=2)dn.push(Jt(Gr[yr][dr],Gr[yr][dr+1],Be,lt,xt,Nt));Rr.geometry.push(dn)}}return ot.transformed=!0,ot}function Jt(ot,Be,lt,xt,Nt,nr){return[Math.round(lt*(ot*xt-Nt)),Math.round(lt*(Be*xt-nr))]}function Fr(ot,Be,lt,xt,Nt){for(var nr=Be===Nt.maxZoom?0:Nt.tolerance/((1<<Be)*Nt.extent),yr={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:lt,y:xt,z:Be,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},dr=0;dr<ot.length;dr++){yr.numFeatures++,Vr(yr,ot[dr],nr,Nt);var Rr=ot[dr].minX,Gr=ot[dr].minY,Yr=ot[dr].maxX,dn=ot[dr].maxY;Rr<yr.minX&&(yr.minX=Rr),Gr<yr.minY&&(yr.minY=Gr),Yr>yr.maxX&&(yr.maxX=Yr),dn>yr.maxY&&(yr.maxY=dn)}return yr}function Vr(ot,Be,lt,xt){var Nt=Be.geometry,nr=Be.type,yr=[];if(nr==="Point"||nr==="MultiPoint")for(var dr=0;dr<Nt.length;dr+=3)yr.push(Nt[dr]),yr.push(Nt[dr+1]),ot.numPoints++,ot.numSimplified++;else if(nr==="LineString")mr(yr,Nt,ot,lt,!1,!1);else if(nr==="MultiLineString"||nr==="Polygon")for(dr=0;dr<Nt.length;dr++)mr(yr,Nt[dr],ot,lt,nr==="Polygon",dr===0);else if(nr==="MultiPolygon")for(var Rr=0;Rr<Nt.length;Rr++){var Gr=Nt[Rr];for(dr=0;dr<Gr.length;dr++)mr(yr,Gr[dr],ot,lt,!0,dr===0)}if(yr.length){var Yr=Be.tags||null;if(nr==="LineString"&&xt.lineMetrics){Yr={};for(var dn in Be.tags)Yr[dn]=Be.tags[dn];Yr.mapbox_clip_start=Nt.start/Nt.size,Yr.mapbox_clip_end=Nt.end/Nt.size}var Wr={geometry:yr,type:nr==="Polygon"||nr==="MultiPolygon"?3:nr==="LineString"||nr==="MultiLineString"?2:1,tags:Yr};Be.id!==null&&(Wr.id=Be.id),ot.features.push(Wr)}}function mr(ot,Be,lt,xt,Nt,nr){var yr=xt*xt;if(xt>0&&Be.size<(Nt?yr:xt)){lt.numPoints+=Be.length/3;return}for(var dr=[],Rr=0;Rr<Be.length;Rr+=3)(xt===0||Be[Rr+2]>yr)&&(lt.numSimplified++,dr.push(Be[Rr]),dr.push(Be[Rr+1])),lt.numPoints++;Nt&&zr(dr,nr),ot.push(dr)}function zr(ot,Be){for(var lt=0,xt=0,Nt=ot.length,nr=Nt-2;xt<Nt;nr=xt,xt+=2)lt+=(ot[xt]-ot[nr])*(ot[xt+1]+ot[nr+1]);if(lt>0===Be)for(xt=0,Nt=ot.length;xt<Nt/2;xt+=2){var yr=ot[xt],dr=ot[xt+1];ot[xt]=ot[Nt-2-xt],ot[xt+1]=ot[Nt-1-xt],ot[Nt-2-xt]=yr,ot[Nt-1-xt]=dr}}function an(ot,Be){return new ni(ot,Be)}function ni(ot,Be){Be=this.options=fi(Object.create(this.options),Be);var lt=Be.debug;if(lt&&console.time("preprocess data"),Be.maxZoom<0||Be.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Be.promoteId&&Be.generateId)throw new Error("promoteId and generateId cannot be used together.");var xt=ht(ot,Be);this.tiles={},this.tileCoords=[],lt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Be.indexMaxZoom,Be.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),xt=Te(xt,Be),xt.length&&this.splitTile(xt,0,0,0),lt&&(xt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}ni.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ni.prototype.splitTile=function(ot,Be,lt,xt,Nt,nr,yr){for(var dr=[ot,Be,lt,xt],Rr=this.options,Gr=Rr.debug;dr.length;){xt=dr.pop(),lt=dr.pop(),Be=dr.pop(),ot=dr.pop();var Yr=1<<Be,dn=mn(Be,lt,xt),Wr=this.tiles[dn];if(!Wr&&(Gr>1&&console.time("creation"),Wr=this.tiles[dn]=Fr(ot,Be,lt,xt,Rr),this.tileCoords.push({z:Be,x:lt,y:xt}),Gr)){Gr>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Be,lt,xt,Wr.numFeatures,Wr.numPoints,Wr.numSimplified),console.timeEnd("creation"));var qn="z"+Be;this.stats[qn]=(this.stats[qn]||0)+1,this.total++}if(Wr.source=ot,Nt){if(Be===Rr.maxZoom||Be===Nt)continue;var vi=1<<Nt-Be;if(lt!==Math.floor(nr/vi)||xt!==Math.floor(yr/vi))continue}else if(Be===Rr.indexMaxZoom||Wr.numPoints<=Rr.indexMaxPoints)continue;if(Wr.source=null,ot.length!==0){Gr>1&&console.time("clipping");var Mi=.5*Rr.buffer/Rr.extent,Ui=.5-Mi,ji=.5+Mi,ea=1+Mi,Ra,Li,Yn,zi,ya,zn;Ra=Li=Yn=zi=null,ya=Ot(ot,Yr,lt-Mi,lt+ji,0,Wr.minX,Wr.maxX,Rr),zn=Ot(ot,Yr,lt+Ui,lt+ea,0,Wr.minX,Wr.maxX,Rr),ot=null,ya&&(Ra=Ot(ya,Yr,xt-Mi,xt+ji,1,Wr.minY,Wr.maxY,Rr),Li=Ot(ya,Yr,xt+Ui,xt+ea,1,Wr.minY,Wr.maxY,Rr),ya=null),zn&&(Yn=Ot(zn,Yr,xt-Mi,xt+ji,1,Wr.minY,Wr.maxY,Rr),zi=Ot(zn,Yr,xt+Ui,xt+ea,1,Wr.minY,Wr.maxY,Rr),zn=null),Gr>1&&console.timeEnd("clipping"),dr.push(Ra||[],Be+1,lt*2,xt*2),dr.push(Li||[],Be+1,lt*2,xt*2+1),dr.push(Yn||[],Be+1,lt*2+1,xt*2),dr.push(zi||[],Be+1,lt*2+1,xt*2+1)}}},ni.prototype.getTile=function(ot,Be,lt){var xt=this.options,Nt=xt.extent,nr=xt.debug;if(ot<0||ot>24)return null;var yr=1<<ot;Be=(Be%yr+yr)%yr;var dr=mn(ot,Be,lt);if(this.tiles[dr])return Kt(this.tiles[dr],Nt);nr>1&&console.log("drilling down to z%d-%d-%d",ot,Be,lt);for(var Rr=ot,Gr=Be,Yr=lt,dn;!dn&&Rr>0;)Rr--,Gr=Math.floor(Gr/2),Yr=Math.floor(Yr/2),dn=this.tiles[mn(Rr,Gr,Yr)];return!dn||!dn.source?null:(nr>1&&console.log("found parent tile z%d-%d-%d",Rr,Gr,Yr),nr>1&&console.time("drilling down"),this.splitTile(dn.source,Rr,Gr,Yr,ot,Be,lt),nr>1&&console.timeEnd("drilling down"),this.tiles[dr]?Kt(this.tiles[dr],Nt):null)};function mn(ot,Be,lt){return((1<<ot)*lt+Be)*32+ot}function fi(ot,Be){for(var lt in Be)ot[lt]=Be[lt];return ot}function Wi(ot,Be){var lt=ot.tileID.canonical;if(!this._geoJSONIndex)return Be(null,null);var xt=this._geoJSONIndex.getTile(lt.z,lt.x,lt.y);if(!xt)return Be(null,null);var Nt=new E(xt.features),nr=P(Nt);(nr.byteOffset!==0||nr.byteLength!==nr.buffer.byteLength)&&(nr=new Uint8Array(nr)),Be(null,{vectorTile:Nt,rawData:nr.buffer})}var si=function(ot){function Be(lt,xt,Nt,nr){ot.call(this,lt,xt,Nt,Wi),nr&&(this.loadGeoJSON=nr)}return ot&&(Be.__proto__=ot),Be.prototype=Object.create(ot&&ot.prototype),Be.prototype.constructor=Be,Be.prototype.loadData=function(xt,Nt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Nt,this._pendingLoadDataParams=xt,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Be.prototype._loadData=function(){var xt=this;if(!(!this._pendingCallback||!this._pendingLoadDataParams)){var Nt=this._pendingCallback,nr=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var yr=nr&&nr.request&&nr.request.collectResourceTiming?new n.RequestPerformance(nr.request):!1;this.loadGeoJSON(nr,function(dr,Rr){if(dr||!Rr)return Nt(dr);if(typeof Rr!="object")return Nt(new Error("Input data given to '"+nr.source+"' is not a valid GeoJSON object."));p(Rr,!0);try{if(nr.filter){var Gr=n.createExpression(nr.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Gr.result==="error")throw new Error(Gr.value.map(function(qn){return qn.key+": "+qn.message}).join(", "));var Yr=Rr.features.filter(function(qn){return Gr.value.evaluate({zoom:0},qn)});Rr={type:"FeatureCollection",features:Yr}}xt._geoJSONIndex=nr.cluster?new qe(Zi(nr)).load(Rr.features):an(Rr,nr.geojsonVtOptions)}catch(qn){return Nt(qn)}xt.loaded={};var dn={};if(yr){var Wr=yr.finish();Wr&&(dn.resourceTiming={},dn.resourceTiming[nr.source]=JSON.parse(JSON.stringify(Wr)))}Nt(null,dn)})}},Be.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Be.prototype.reloadTile=function(xt,Nt){var nr=this.loaded,yr=xt.uid;return nr&&nr[yr]?ot.prototype.reloadTile.call(this,xt,Nt):this.loadTile(xt,Nt)},Be.prototype.loadGeoJSON=function(xt,Nt){if(xt.request)n.getJSON(xt.request,Nt);else if(typeof xt.data=="string")try{return Nt(null,JSON.parse(xt.data))}catch(nr){return Nt(new Error("Input data given to '"+xt.source+"' is not a valid GeoJSON object."))}else return Nt(new Error("Input data given to '"+xt.source+"' is not a valid GeoJSON object."))},Be.prototype.removeSource=function(xt,Nt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Nt()},Be.prototype.getClusterExpansionZoom=function(xt,Nt){try{Nt(null,this._geoJSONIndex.getClusterExpansionZoom(xt.clusterId))}catch(nr){Nt(nr)}},Be.prototype.getClusterChildren=function(xt,Nt){try{Nt(null,this._geoJSONIndex.getChildren(xt.clusterId))}catch(nr){Nt(nr)}},Be.prototype.getClusterLeaves=function(xt,Nt){try{Nt(null,this._geoJSONIndex.getLeaves(xt.clusterId,xt.limit,xt.offset))}catch(nr){Nt(nr)}},Be}(d);function Zi(ot){var Be=ot.superclusterOptions,lt=ot.clusterProperties;if(!lt||!Be)return Be;for(var xt={},Nt={},nr={accumulated:null,zoom:0},yr={properties:null},dr=Object.keys(lt),Rr=0,Gr=dr;Rr<Gr.length;Rr+=1){var Yr=Gr[Rr],dn=lt[Yr],Wr=dn[0],qn=dn[1],vi=n.createExpression(qn),Mi=n.createExpression(typeof Wr=="string"?[Wr,["accumulated"],["get",Yr]]:Wr);xt[Yr]=vi.value,Nt[Yr]=Mi.value}return Be.map=function(Ui){yr.properties=Ui;for(var ji={},ea=0,Ra=dr;ea<Ra.length;ea+=1){var Li=Ra[ea];ji[Li]=xt[Li].evaluate(nr,yr)}return ji},Be.reduce=function(Ui,ji){yr.properties=ji;for(var ea=0,Ra=dr;ea<Ra.length;ea+=1){var Li=Ra[ea];nr.accumulated=Ui[Li],Ui[Li]=Nt[Li].evaluate(nr,yr)}},Be}var Ei=function(Be){var lt=this;this.self=Be,this.actor=new n.Actor(Be,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:d,geojson:si},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(xt,Nt){if(lt.workerSourceTypes[xt])throw new Error('Worker source with name "'+xt+'" already registered.');lt.workerSourceTypes[xt]=Nt},this.self.registerRTLTextPlugin=function(xt){if(n.plugin.isParsed())throw new Error("RTL text plugin already registered.");n.plugin.applyArabicShaping=xt.applyArabicShaping,n.plugin.processBidirectionalText=xt.processBidirectionalText,n.plugin.processStyledBidirectionalText=xt.processStyledBidirectionalText}};return Ei.prototype.setReferrer=function(Be,lt){this.referrer=lt},Ei.prototype.setImages=function(Be,lt,xt){this.availableImages[Be]=lt;for(var Nt in this.workerSources[Be]){var nr=this.workerSources[Be][Nt];for(var yr in nr)nr[yr].availableImages=lt}xt()},Ei.prototype.setLayers=function(Be,lt,xt){this.getLayerIndex(Be).replace(lt),xt()},Ei.prototype.updateLayers=function(Be,lt,xt){this.getLayerIndex(Be).update(lt.layers,lt.removedIds),xt()},Ei.prototype.loadTile=function(Be,lt,xt){this.getWorkerSource(Be,lt.type,lt.source).loadTile(lt,xt)},Ei.prototype.loadDEMTile=function(Be,lt,xt){this.getDEMWorkerSource(Be,lt.source).loadTile(lt,xt)},Ei.prototype.reloadTile=function(Be,lt,xt){this.getWorkerSource(Be,lt.type,lt.source).reloadTile(lt,xt)},Ei.prototype.abortTile=function(Be,lt,xt){this.getWorkerSource(Be,lt.type,lt.source).abortTile(lt,xt)},Ei.prototype.removeTile=function(Be,lt,xt){this.getWorkerSource(Be,lt.type,lt.source).removeTile(lt,xt)},Ei.prototype.removeDEMTile=function(Be,lt){this.getDEMWorkerSource(Be,lt.source).removeTile(lt)},Ei.prototype.removeSource=function(Be,lt,xt){if(!(!this.workerSources[Be]||!this.workerSources[Be][lt.type]||!this.workerSources[Be][lt.type][lt.source])){var Nt=this.workerSources[Be][lt.type][lt.source];delete this.workerSources[Be][lt.type][lt.source],Nt.removeSource!==void 0?Nt.removeSource(lt,xt):xt()}},Ei.prototype.loadWorkerSource=function(Be,lt,xt){try{this.self.importScripts(lt.url),xt()}catch(Nt){xt(Nt.toString())}},Ei.prototype.syncRTLPluginState=function(Be,lt,xt){try{n.plugin.setState(lt);var Nt=n.plugin.getPluginURL();if(n.plugin.isLoaded()&&!n.plugin.isParsed()&&Nt!=null){this.self.importScripts(Nt);var nr=n.plugin.isParsed(),yr=nr?void 0:new Error("RTL Text Plugin failed to import scripts from "+Nt);xt(yr,nr)}}catch(dr){xt(dr.toString())}},Ei.prototype.getAvailableImages=function(Be){var lt=this.availableImages[Be];return lt||(lt=[]),lt},Ei.prototype.getLayerIndex=function(Be){var lt=this.layerIndexes[Be];return lt||(lt=this.layerIndexes[Be]=new l),lt},Ei.prototype.getWorkerSource=function(Be,lt,xt){var Nt=this;if(this.workerSources[Be]||(this.workerSources[Be]={}),this.workerSources[Be][lt]||(this.workerSources[Be][lt]={}),!this.workerSources[Be][lt][xt]){var nr={send:function(yr,dr,Rr){Nt.actor.send(yr,dr,Rr,Be)}};this.workerSources[Be][lt][xt]=new this.workerSourceTypes[lt](nr,this.getLayerIndex(Be),this.getAvailableImages(Be))}return this.workerSources[Be][lt][xt]},Ei.prototype.getDEMWorkerSource=function(Be,lt){return this.demWorkerSources[Be]||(this.demWorkerSources[Be]={}),this.demWorkerSources[Be][lt]||(this.demWorkerSources[Be][lt]=new T),this.demWorkerSources[Be][lt]},Ei.prototype.enforceCacheSizeLimit=function(Be,lt){n.enforceCacheSizeLimit(lt)},typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new Ei(self)),Ei}),i(["./shared"],function(n){"use strict";var a=n.createCommonjsModule(function(H){H.exports?H.exports=R:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=R,window.mapboxgl.notSupportedReason=G);function R(Tt){return!G(Tt)}function G(Tt){if(!I())return"not a browser";if(!W())return"insufficent Array support";if(!te())return"insufficient Function support";if(!ee())return"insufficient Object support";if(!he())return"insufficient JSON support";if(!Se())return"insufficient worker support";if(!ze())return"insufficient Uint8ClampedArray support";if(!pt())return"insufficient ArrayBuffer support";if(!wt())return"insufficient Canvas/getImageData support";if(!Oe(Tt&&Tt.failIfMajorPerformanceCaveat))return"insufficient WebGL support"}function I(){return typeof window!="undefined"&&typeof document!="undefined"}function W(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function te(){return Function.prototype&&Function.prototype.bind}function ee(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function he(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function Se(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Tt=new Blob([""],{type:"text/javascript"}),Rt=URL.createObjectURL(Tt),Dt,Xt;try{Xt=new Worker(Rt),Dt=!0}catch(Vt){Dt=!1}return Xt&&Xt.terminate(),URL.revokeObjectURL(Rt),Dt}function ze(){return"Uint8ClampedArray"in window}function pt(){return ArrayBuffer.isView}function wt(){var Tt=document.createElement("canvas");Tt.width=Tt.height=1;var Rt=Tt.getContext("2d");if(!Rt)return!1;var Dt=Rt.getImageData(0,0,1,1);return Dt&&Dt.width===Tt.width}var gt={};function Oe(Tt){return gt[Tt]===void 0&&(gt[Tt]=st(Tt)),gt[Tt]}R.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};function $e(Tt){var Rt=document.createElement("canvas"),Dt=Object.create(R.webGLContextAttributes);return Dt.failIfMajorPerformanceCaveat=Tt,Rt.probablySupportsContext?Rt.probablySupportsContext("webgl",Dt)||Rt.probablySupportsContext("experimental-webgl",Dt):Rt.supportsContext?Rt.supportsContext("webgl",Dt)||Rt.supportsContext("experimental-webgl",Dt):Rt.getContext("webgl",Dt)||Rt.getContext("experimental-webgl",Dt)}function st(Tt){var Rt=$e(Tt);if(!Rt)return!1;var Dt=Rt.createShader(Rt.VERTEX_SHADER);return!Dt||Rt.isContextLost()?!1:(Rt.shaderSource(Dt,"void main() {}"),Rt.compileShader(Dt),Rt.getShaderParameter(Dt,Rt.COMPILE_STATUS)===!0)}}),o={};o.create=function(H,R,G){var I=n.window.document.createElement(H);return R!==void 0&&(I.className=R),G&&G.appendChild(I),I},o.createNS=function(H,R){var G=n.window.document.createElementNS(H,R);return G};var s=n.window.document&&n.window.document.documentElement.style;function l(H){if(!s)return H[0];for(var R=0;R<H.length;R++)if(H[R]in s)return H[R];return H[0]}var u=l(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),f;o.disableDrag=function(){s&&u&&(f=s[u],s[u]="none")},o.enableDrag=function(){s&&u&&(s[u]=f)};var c=l(["transform","WebkitTransform"]);o.setTransform=function(H,R){H.style[c]=R};var h=!1;try{var v=Object.defineProperty({},"passive",{get:function(){h=!0}});n.window.addEventListener("test",v,v),n.window.removeEventListener("test",v,v)}catch(H){h=!1}o.addEventListener=function(H,R,G,I){I===void 0&&(I={}),"passive"in I&&h?H.addEventListener(R,G,I):H.addEventListener(R,G,I.capture)},o.removeEventListener=function(H,R,G,I){I===void 0&&(I={}),"passive"in I&&h?H.removeEventListener(R,G,I):H.removeEventListener(R,G,I.capture)};var d=function(H){H.preventDefault(),H.stopPropagation(),n.window.removeEventListener("click",d,!0)};o.suppressClick=function(){n.window.addEventListener("click",d,!0),n.window.setTimeout(function(){n.window.removeEventListener("click",d,!0)},0)},o.mousePos=function(H,R){var G=H.getBoundingClientRect();return new n.Point(R.clientX-G.left-H.clientLeft,R.clientY-G.top-H.clientTop)},o.touchPos=function(H,R){for(var G=H.getBoundingClientRect(),I=[],W=0;W<R.length;W++)I.push(new n.Point(R[W].clientX-G.left-H.clientLeft,R[W].clientY-G.top-H.clientTop));return I},o.mouseButton=function(H){return typeof n.window.InstallTrigger!="undefined"&&H.button===2&&H.ctrlKey&&n.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:H.button},o.remove=function(H){H.parentNode&&H.parentNode.removeChild(H)};function _(H,R,G){var I,W,te,ee=n.browser.devicePixelRatio>1?"@2x":"",he=n.getJSON(R.transformRequest(R.normalizeSpriteURL(H,ee,".json"),n.ResourceType.SpriteJSON),function(pt,wt){he=null,te||(te=pt,I=wt,ze())}),Se=n.getImage(R.transformRequest(R.normalizeSpriteURL(H,ee,".png"),n.ResourceType.SpriteImage),function(pt,wt){Se=null,te||(te=pt,W=wt,ze())});function ze(){if(te)G(te);else if(I&&W){var pt=n.browser.getImageData(W),wt={};for(var gt in I){var Oe=I[gt],$e=Oe.width,st=Oe.height,Tt=Oe.x,Rt=Oe.y,Dt=Oe.sdf,Xt=Oe.pixelRatio,Vt=Oe.stretchX,Ft=Oe.stretchY,Zt=Oe.content,Pt=new n.RGBAImage({width:$e,height:st});n.RGBAImage.copy(pt,Pt,{x:Tt,y:Rt},{x:0,y:0},{width:$e,height:st}),wt[gt]={data:Pt,pixelRatio:Xt,sdf:Dt,stretchX:Vt,stretchY:Ft,content:Zt}}G(null,wt)}}return{cancel:function(){he&&(he.cancel(),he=null),Se&&(Se.cancel(),Se=null)}}}function T(H){var R=H.userImage;if(R&&R.render){var G=R.render();if(G)return H.data.replace(new Uint8Array(R.data.buffer)),!0}return!1}var p=1,M=function(H){function R(){H.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new n.RGBAImage({width:1,height:1}),this.dirty=!0}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.isLoaded=function(){return this.loaded},R.prototype.setLoaded=function(I){if(this.loaded!==I&&(this.loaded=I,I)){for(var W=0,te=this.requestors;W<te.length;W+=1){var ee=te[W],he=ee.ids,Se=ee.callback;this._notify(he,Se)}this.requestors=[]}},R.prototype.getImage=function(I){return this.images[I]},R.prototype.addImage=function(I,W){this._validate(I,W)&&(this.images[I]=W)},R.prototype._validate=function(I,W){var te=!0;return this._validateStretch(W.stretchX,W.data&&W.data.width)||(this.fire(new n.ErrorEvent(new Error('Image "'+I+'" has invalid "stretchX" value'))),te=!1),this._validateStretch(W.stretchY,W.data&&W.data.height)||(this.fire(new n.ErrorEvent(new Error('Image "'+I+'" has invalid "stretchY" value'))),te=!1),this._validateContent(W.content,W)||(this.fire(new n.ErrorEvent(new Error('Image "'+I+'" has invalid "content" value'))),te=!1),te},R.prototype._validateStretch=function(I,W){if(!I)return!0;for(var te=0,ee=0,he=I;ee<he.length;ee+=1){var Se=he[ee];if(Se[0]<te||Se[1]<Se[0]||W<Se[1])return!1;te=Se[1]}return!0},R.prototype._validateContent=function(I,W){return I?!(I.length!==4||I[0]<0||W.data.width<I[0]||I[1]<0||W.data.height<I[1]||I[2]<0||W.data.width<I[2]||I[3]<0||W.data.height<I[3]||I[2]<I[0]||I[3]<I[1]):!0},R.prototype.updateImage=function(I,W){var te=this.images[I];W.version=te.version+1,this.images[I]=W,this.updatedImages[I]=!0},R.prototype.removeImage=function(I){var W=this.images[I];delete this.images[I],delete this.patterns[I],W.userImage&&W.userImage.onRemove&&W.userImage.onRemove()},R.prototype.listImages=function(){return Object.keys(this.images)},R.prototype.getImages=function(I,W){var te=!0;if(!this.isLoaded())for(var ee=0,he=I;ee<he.length;ee+=1){var Se=he[ee];this.images[Se]||(te=!1)}this.isLoaded()||te?this._notify(I,W):this.requestors.push({ids:I,callback:W})},R.prototype._notify=function(I,W){for(var te={},ee=0,he=I;ee<he.length;ee+=1){var Se=he[ee];this.images[Se]||this.fire(new n.Event("styleimagemissing",{id:Se}));var ze=this.images[Se];ze?te[Se]={data:ze.data.clone(),pixelRatio:ze.pixelRatio,sdf:ze.sdf,version:ze.version,stretchX:ze.stretchX,stretchY:ze.stretchY,content:ze.content,hasRenderCallback:!!(ze.userImage&&ze.userImage.render)}:n.warnOnce('Image "'+Se+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}W(null,te)},R.prototype.getPixelSize=function(){var I=this.atlasImage,W=I.width,te=I.height;return{width:W,height:te}},R.prototype.getPattern=function(I){var W=this.patterns[I],te=this.getImage(I);if(!te)return null;if(W&&W.position.version===te.version)return W.position;if(W)W.position.version=te.version;else{var ee=te.data.width+p*2,he=te.data.height+p*2,Se={w:ee,h:he,x:0,y:0},ze=new n.ImagePosition(Se,te);this.patterns[I]={bin:Se,position:ze}}return this._updatePatternAtlas(),this.patterns[I].position},R.prototype.bind=function(I){var W=I.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new n.Texture(I,this.atlasImage,W.RGBA),this.atlasTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE)},R.prototype._updatePatternAtlas=function(){var I=[];for(var W in this.patterns)I.push(this.patterns[W].bin);var te=n.potpack(I),ee=te.w,he=te.h,Se=this.atlasImage;Se.resize({width:ee||1,height:he||1});for(var ze in this.patterns){var pt=this.patterns[ze],wt=pt.bin,gt=wt.x+p,Oe=wt.y+p,$e=this.images[ze].data,st=$e.width,Tt=$e.height;n.RGBAImage.copy($e,Se,{x:0,y:0},{x:gt,y:Oe},{width:st,height:Tt}),n.RGBAImage.copy($e,Se,{x:0,y:Tt-1},{x:gt,y:Oe-1},{width:st,height:1}),n.RGBAImage.copy($e,Se,{x:0,y:0},{x:gt,y:Oe+Tt},{width:st,height:1}),n.RGBAImage.copy($e,Se,{x:st-1,y:0},{x:gt-1,y:Oe},{width:1,height:Tt}),n.RGBAImage.copy($e,Se,{x:0,y:0},{x:gt+st,y:Oe},{width:1,height:Tt})}this.dirty=!0},R.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},R.prototype.dispatchRenderCallbacks=function(I){for(var W=0,te=I;W<te.length;W+=1){var ee=te[W];if(!this.callbackDispatchedThisFrame[ee]){this.callbackDispatchedThisFrame[ee]=!0;var he=this.images[ee],Se=T(he);Se&&this.updateImage(ee,he)}}},R}(n.Evented);function b(H,R,G,I,W){var te=R*256,ee=te+255,he=I.transformRequest(I.normalizeGlyphsURL(G).replace("{fontstack}",H).replace("{range}",te+"-"+ee),n.ResourceType.Glyphs);n.getArrayBuffer(he,function(Se,ze){if(Se)W(Se);else if(ze){for(var pt={},wt=0,gt=n.parseGlyphPBF(ze);wt<gt.length;wt+=1){var Oe=gt[wt];pt[Oe.id]=Oe}W(null,pt)}})}var w=E,k=E,x=1e20;function E(H,R,G,I,W,te){this.fontSize=H||24,this.buffer=R===void 0?3:R,this.cutoff=I||.25,this.fontFamily=W||"sans-serif",this.fontWeight=te||"normal",this.radius=G||8;var ee=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=ee,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(ee*ee),this.gridInner=new Float64Array(ee*ee),this.f=new Float64Array(ee),this.d=new Float64Array(ee),this.z=new Float64Array(ee+1),this.v=new Int16Array(ee),this.middle=Math.round(ee/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}E.prototype.draw=function(H){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(H,this.buffer,this.middle);for(var R=this.ctx.getImageData(0,0,this.size,this.size),G=new Uint8ClampedArray(this.size*this.size),I=0;I<this.size*this.size;I++){var W=R.data[I*4+3]/255;this.gridOuter[I]=W===1?0:W===0?x:Math.pow(Math.max(0,.5-W),2),this.gridInner[I]=W===1?x:W===0?0:Math.pow(Math.max(0,W-.5),2)}for(S(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),S(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),I=0;I<this.size*this.size;I++){var te=this.gridOuter[I]-this.gridInner[I];G[I]=Math.max(0,Math.min(255,Math.round(255-255*(te/this.radius+this.cutoff))))}return G};function S(H,R,G,I,W,te,ee){for(var he=0;he<R;he++){for(var Se=0;Se<G;Se++)I[Se]=H[Se*R+he];for(g(I,W,te,ee,G),Se=0;Se<G;Se++)H[Se*R+he]=W[Se]}for(Se=0;Se<G;Se++){for(he=0;he<R;he++)I[he]=H[Se*R+he];for(g(I,W,te,ee,R),he=0;he<R;he++)H[Se*R+he]=Math.sqrt(W[he])}}function g(H,R,G,I,W){G[0]=0,I[0]=-x,I[1]=+x;for(var te=1,ee=0;te<W;te++){for(var he=(H[te]+te*te-(H[G[ee]]+G[ee]*G[ee]))/(2*te-2*G[ee]);he<=I[ee];)ee--,he=(H[te]+te*te-(H[G[ee]]+G[ee]*G[ee]))/(2*te-2*G[ee]);ee++,G[ee]=te,I[ee]=he,I[ee+1]=+x}for(te=0,ee=0;te<W;te++){for(;I[ee+1]<te;)ee++;R[te]=(te-G[ee])*(te-G[ee])+H[G[ee]]}}w.default=k;var C=function(R,G){this.requestManager=R,this.localIdeographFontFamily=G,this.entries={}};C.prototype.setURL=function(R){this.url=R},C.prototype.getGlyphs=function(R,G){var I=this,W=[];for(var te in R)for(var ee=0,he=R[te];ee<he.length;ee+=1){var Se=he[ee];W.push({stack:te,id:Se})}n.asyncAll(W,function(ze,pt){var wt=ze.stack,gt=ze.id,Oe=I.entries[wt];Oe||(Oe=I.entries[wt]={glyphs:{},requests:{},ranges:{}});var $e=Oe.glyphs[gt];if($e!==void 0){pt(null,{stack:wt,id:gt,glyph:$e});return}if($e=I._tinySDF(Oe,wt,gt),$e){Oe.glyphs[gt]=$e,pt(null,{stack:wt,id:gt,glyph:$e});return}var st=Math.floor(gt/256);if(st*256>65535){pt(new Error("glyphs > 65535 not supported"));return}if(Oe.ranges[st]){pt(null,{stack:wt,id:gt,glyph:$e});return}var Tt=Oe.requests[st];Tt||(Tt=Oe.requests[st]=[],C.loadGlyphRange(wt,st,I.url,I.requestManager,function(Rt,Dt){if(Dt){for(var Xt in Dt)I._doesCharSupportLocalGlyph(+Xt)||(Oe.glyphs[+Xt]=Dt[+Xt]);Oe.ranges[st]=!0}for(var Vt=0,Ft=Tt;Vt<Ft.length;Vt+=1){var Zt=Ft[Vt];Zt(Rt,Dt)}delete Oe.requests[st]})),Tt.push(function(Rt,Dt){Rt?pt(Rt):Dt&&pt(null,{stack:wt,id:gt,glyph:Dt[gt]||null})})},function(ze,pt){if(ze)G(ze);else if(pt){for(var wt={},gt=0,Oe=pt;gt<Oe.length;gt+=1){var $e=Oe[gt],st=$e.stack,Tt=$e.id,Rt=$e.glyph;(wt[st]||(wt[st]={}))[Tt]=Rt&&{id:Rt.id,bitmap:Rt.bitmap.clone(),metrics:Rt.metrics}}G(null,wt)}})},C.prototype._doesCharSupportLocalGlyph=function(R){return!!this.localIdeographFontFamily&&(n.isChar["CJK Unified Ideographs"](R)||n.isChar["Hangul Syllables"](R)||n.isChar.Hiragana(R)||n.isChar.Katakana(R))},C.prototype._tinySDF=function(R,G,I){var W=this.localIdeographFontFamily;if(W&&this._doesCharSupportLocalGlyph(I)){var te=R.tinySDF;if(!te){var ee="400";/bold/i.test(G)?ee="900":/medium/i.test(G)?ee="500":/light/i.test(G)&&(ee="200"),te=R.tinySDF=new C.TinySDF(24,3,8,.25,W,ee)}return{id:I,bitmap:new n.AlphaImage({width:30,height:30},te.draw(String.fromCharCode(I))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},C.loadGlyphRange=b,C.TinySDF=w;var A=function(){this.specification=n.styleSpec.light.position};A.prototype.possiblyEvaluate=function(R,G){return n.sphericalToCartesian(R.expression.evaluate(G))},A.prototype.interpolate=function(R,G,I){return{x:n.number(R.x,G.x,I),y:n.number(R.y,G.y,I),z:n.number(R.z,G.z,I)}};var P=new n.Properties({anchor:new n.DataConstantProperty(n.styleSpec.light.anchor),position:new A,color:new n.DataConstantProperty(n.styleSpec.light.color),intensity:new n.DataConstantProperty(n.styleSpec.light.intensity)}),D="-transition",z=function(H){function R(G){H.call(this),this._transitionable=new n.Transitionable(P),this.setLight(G),this._transitioning=this._transitionable.untransitioned()}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getLight=function(){return this._transitionable.serialize()},R.prototype.setLight=function(I,W){if(W===void 0&&(W={}),!this._validate(n.validateLight,I,W))for(var te in I){var ee=I[te];n.endsWith(te,D)?this._transitionable.setTransition(te.slice(0,-D.length),ee):this._transitionable.setValue(te,ee)}},R.prototype.updateTransitions=function(I){this._transitioning=this._transitionable.transitioned(I,this._transitioning)},R.prototype.hasTransition=function(){return this._transitioning.hasTransition()},R.prototype.recalculate=function(I){this.properties=this._transitioning.possiblyEvaluate(I)},R.prototype._validate=function(I,W,te){return te&&te.validate===!1?!1:n.emitValidationErrors(this,I.call(n.validateStyle,n.extend({value:W,style:{glyphs:!0,sprite:!0},styleSpec:n.styleSpec})))},R}(n.Evented),O=function(R,G){this.width=R,this.height=G,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};O.prototype.getDash=function(R,G){var I=R.join(",")+String(G);return this.dashEntry[I]||(this.dashEntry[I]=this.addDash(R,G)),this.dashEntry[I]},O.prototype.getDashRanges=function(R,G,I){var W=R.length%2===1,te=[],ee=W?-R[R.length-1]*I:0,he=R[0]*I,Se=!0;te.push({left:ee,right:he,isDash:Se,zeroLength:R[0]===0});for(var ze=R[0],pt=1;pt<R.length;pt++){Se=!Se;var wt=R[pt];ee=ze*I,ze+=wt,he=ze*I,te.push({left:ee,right:he,isDash:Se,zeroLength:wt===0})}return te},O.prototype.addRoundDash=function(R,G,I){for(var W=G/2,te=-I;te<=I;te++)for(var ee=this.nextRow+I+te,he=this.width*ee,Se=0,ze=R[Se],pt=0;pt<this.width;pt++){pt/ze.right>1&&(ze=R[++Se]);var wt=Math.abs(pt-ze.left),gt=Math.abs(pt-ze.right),Oe=Math.min(wt,gt),$e=void 0,st=te/I*(W+1);if(ze.isDash){var Tt=W-Math.abs(st);$e=Math.sqrt(Oe*Oe+Tt*Tt)}else $e=W-Math.sqrt(Oe*Oe+st*st);this.data[he+pt]=Math.max(0,Math.min(255,$e+128))}},O.prototype.addRegularDash=function(R){for(var G=R.length-1;G>=0;--G){var I=R[G],W=R[G+1];I.zeroLength?R.splice(G,1):W&&W.isDash===I.isDash&&(W.left=I.left,R.splice(G,1))}var te=R[0],ee=R[R.length-1];te.isDash===ee.isDash&&(te.left=ee.left-this.width,ee.right=te.right+this.width);for(var he=this.width*this.nextRow,Se=0,ze=R[Se],pt=0;pt<this.width;pt++){pt/ze.right>1&&(ze=R[++Se]);var wt=Math.abs(pt-ze.left),gt=Math.abs(pt-ze.right),Oe=Math.min(wt,gt),$e=ze.isDash?Oe:-Oe;this.data[he+pt]=Math.max(0,Math.min(255,$e+128))}},O.prototype.addDash=function(R,G){var I=G?7:0,W=2*I+1;if(this.nextRow+W>this.height)return n.warnOnce("LineAtlas out of space"),null;for(var te=0,ee=0;ee<R.length;ee++)te+=R[ee];if(te!==0){var he=this.width/te,Se=this.getDashRanges(R,this.width,he);G?this.addRoundDash(Se,he,I):this.addRegularDash(Se)}var ze={y:(this.nextRow+I+.5)/this.height,height:2*I/this.height,width:te};return this.nextRow+=W,this.dirty=!0,ze},O.prototype.bind=function(R){var G=R.gl;this.texture?(G.bindTexture(G.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,G.texSubImage2D(G.TEXTURE_2D,0,0,0,this.width,this.height,G.ALPHA,G.UNSIGNED_BYTE,this.data))):(this.texture=G.createTexture(),G.bindTexture(G.TEXTURE_2D,this.texture),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_S,G.REPEAT),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_WRAP_T,G.REPEAT),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,G.LINEAR),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,G.LINEAR),G.texImage2D(G.TEXTURE_2D,0,G.ALPHA,this.width,this.height,0,G.ALPHA,G.UNSIGNED_BYTE,this.data))};var V=function H(R,G){this.workerPool=R,this.actors=[],this.currentActor=0,this.id=n.uniqueId();for(var I=this.workerPool.acquire(this.id),W=0;W<I.length;W++){var te=I[W],ee=new H.Actor(te,G,this.id);ee.name="Worker "+W,this.actors.push(ee)}};V.prototype.broadcast=function(R,G,I){I=I||function(){},n.asyncAll(this.actors,function(W,te){W.send(R,G,te)},I)},V.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},V.prototype.remove=function(){this.actors.forEach(function(R){R.remove()}),this.actors=[],this.workerPool.release(this.id)},V.Actor=n.Actor;function B(H,R,G){var I=function(W,te){if(W)return G(W);if(te){var ee=n.pick(n.extend(te,H),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);te.vector_layers&&(ee.vectorLayers=te.vector_layers,ee.vectorLayerIds=ee.vectorLayers.map(function(he){return he.id})),ee.tiles=R.canonicalizeTileset(ee,H.url),G(null,ee)}};return H.url?n.getJSON(R.transformRequest(R.normalizeSourceURL(H.url),n.ResourceType.Source),I):n.browser.frame(function(){return I(null,H)})}var F=function(R,G,I){this.bounds=n.LngLatBounds.convert(this.validateBounds(R)),this.minzoom=G||0,this.maxzoom=I||24};F.prototype.validateBounds=function(R){return!Array.isArray(R)||R.length!==4?[-180,-90,180,90]:[Math.max(-180,R[0]),Math.max(-90,R[1]),Math.min(180,R[2]),Math.min(90,R[3])]},F.prototype.contains=function(R){var G=Math.pow(2,R.z),I={minX:Math.floor(n.mercatorXfromLng(this.bounds.getWest())*G),minY:Math.floor(n.mercatorYfromLat(this.bounds.getNorth())*G),maxX:Math.ceil(n.mercatorXfromLng(this.bounds.getEast())*G),maxY:Math.ceil(n.mercatorYfromLat(this.bounds.getSouth())*G)},W=R.x>=I.minX&&R.x<I.maxX&&R.y>=I.minY&&R.y<I.maxY;return W};var N=function(H){function R(G,I,W,te){if(H.call(this),this.id=G,this.dispatcher=W,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,n.extend(this,n.pick(I,["url","scheme","tileSize","promoteId"])),this._options=n.extend({type:"vector"},I),this._collectResourceTiming=I.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(te)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.load=function(){var I=this;this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=B(this._options,this.map._requestManager,function(W,te){I._tileJSONRequest=null,I._loaded=!0,W?I.fire(new n.ErrorEvent(W)):te&&(n.extend(I,te),te.bounds&&(I.tileBounds=new F(te.bounds,I.minzoom,I.maxzoom)),n.postTurnstileEvent(te.tiles,I.map._requestManager._customAccessToken),n.postMapLoadEvent(te.tiles,I.map._getMapId(),I.map._requestManager._skuToken,I.map._requestManager._customAccessToken),I.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})),I.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})))})},R.prototype.loaded=function(){return this._loaded},R.prototype.hasTile=function(I){return!this.tileBounds||this.tileBounds.contains(I.canonical)},R.prototype.onAdd=function(I){this.map=I,this.load()},R.prototype.setSourceProperty=function(I){this._tileJSONRequest&&this._tileJSONRequest.cancel(),I();var W=this.map.style.sourceCaches[this.id];W.clearTiles(),this.load()},R.prototype.setTiles=function(I){var W=this;return this.setSourceProperty(function(){W._options.tiles=I}),this},R.prototype.setUrl=function(I){var W=this;return this.setSourceProperty(function(){W.url=I,W._options.url=I}),this},R.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},R.prototype.serialize=function(){return n.extend({},this._options)},R.prototype.loadTile=function(I,W){var te=this.map._requestManager.normalizeTileURL(I.tileID.canonical.url(this.tiles,this.scheme)),ee={request:this.map._requestManager.transformRequest(te,n.ResourceType.Tile),uid:I.uid,tileID:I.tileID,zoom:I.tileID.overscaledZ,tileSize:this.tileSize*I.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:n.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};ee.request.collectResourceTiming=this._collectResourceTiming,!I.actor||I.state==="expired"?(I.actor=this.dispatcher.getActor(),I.request=I.actor.send("loadTile",ee,he.bind(this))):I.state==="loading"?I.reloadCallback=W:I.request=I.actor.send("reloadTile",ee,he.bind(this));function he(Se,ze){if(delete I.request,I.aborted)return W(null);if(Se&&Se.status!==404)return W(Se);ze&&ze.resourceTiming&&(I.resourceTiming=ze.resourceTiming),this.map._refreshExpiredTiles&&ze&&I.setExpiryData(ze),I.loadVectorData(ze,this.map.painter),n.cacheEntryPossiblyAdded(this.dispatcher),W(null),I.reloadCallback&&(this.loadTile(I,I.reloadCallback),I.reloadCallback=null)}},R.prototype.abortTile=function(I){I.request&&(I.request.cancel(),delete I.request),I.actor&&I.actor.send("abortTile",{uid:I.uid,type:this.type,source:this.id},void 0)},R.prototype.unloadTile=function(I){I.unloadVectorData(),I.actor&&I.actor.send("removeTile",{uid:I.uid,type:this.type,source:this.id},void 0)},R.prototype.hasTransition=function(){return!1},R}(n.Evented),Z=function(H){function R(G,I,W,te){H.call(this),this.id=G,this.dispatcher=W,this.setEventedParent(te),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=n.extend({type:"raster"},I),n.extend(this,n.pick(I,["url","scheme","tileSize"]))}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.load=function(){var I=this;this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=B(this._options,this.map._requestManager,function(W,te){I._tileJSONRequest=null,I._loaded=!0,W?I.fire(new n.ErrorEvent(W)):te&&(n.extend(I,te),te.bounds&&(I.tileBounds=new F(te.bounds,I.minzoom,I.maxzoom)),n.postTurnstileEvent(te.tiles),n.postMapLoadEvent(te.tiles,I.map._getMapId(),I.map._requestManager._skuToken),I.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})),I.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})))})},R.prototype.loaded=function(){return this._loaded},R.prototype.onAdd=function(I){this.map=I,this.load()},R.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},R.prototype.serialize=function(){return n.extend({},this._options)},R.prototype.hasTile=function(I){return!this.tileBounds||this.tileBounds.contains(I.canonical)},R.prototype.loadTile=function(I,W){var te=this,ee=this.map._requestManager.normalizeTileURL(I.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);I.request=n.getImage(this.map._requestManager.transformRequest(ee,n.ResourceType.Tile),function(he,Se){if(delete I.request,I.aborted)I.state="unloaded",W(null);else if(he)I.state="errored",W(he);else if(Se){te.map._refreshExpiredTiles&&I.setExpiryData(Se),delete Se.cacheControl,delete Se.expires;var ze=te.map.painter.context,pt=ze.gl;I.texture=te.map.painter.getTileTexture(Se.width),I.texture?I.texture.update(Se,{useMipmap:!0}):(I.texture=new n.Texture(ze,Se,pt.RGBA,{useMipmap:!0}),I.texture.bind(pt.LINEAR,pt.CLAMP_TO_EDGE,pt.LINEAR_MIPMAP_NEAREST),ze.extTextureFilterAnisotropic&&pt.texParameterf(pt.TEXTURE_2D,ze.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ze.extTextureFilterAnisotropicMax)),I.state="loaded",n.cacheEntryPossiblyAdded(te.dispatcher),W(null)}})},R.prototype.abortTile=function(I,W){I.request&&(I.request.cancel(),delete I.request),W()},R.prototype.unloadTile=function(I,W){I.texture&&this.map.painter.saveTileTexture(I.texture),W()},R.prototype.hasTransition=function(){return!1},R}(n.Evented),J=function(H){function R(G,I,W,te){H.call(this,G,I,W,te),this.type="raster-dem",this.maxzoom=22,this._options=n.extend({type:"raster-dem"},I),this.encoding=I.encoding||"mapbox"}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},R.prototype.loadTile=function(I,W){var te=this.map._requestManager.normalizeTileURL(I.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);I.request=n.getImage(this.map._requestManager.transformRequest(te,n.ResourceType.Tile),ee.bind(this)),I.neighboringTiles=this._getNeighboringTiles(I.tileID);function ee(Se,ze){if(delete I.request,I.aborted)I.state="unloaded",W(null);else if(Se)I.state="errored",W(Se);else if(ze){this.map._refreshExpiredTiles&&I.setExpiryData(ze),delete ze.cacheControl,delete ze.expires;var pt=n.window.ImageBitmap&&ze instanceof n.window.ImageBitmap&&n.offscreenCanvasSupported(),wt=pt?ze:n.browser.getImageData(ze,1),gt={uid:I.uid,coord:I.tileID,source:this.id,rawImageData:wt,encoding:this.encoding};(!I.actor||I.state==="expired")&&(I.actor=this.dispatcher.getActor(),I.actor.send("loadDEMTile",gt,he.bind(this)))}}function he(Se,ze){Se&&(I.state="errored",W(Se)),ze&&(I.dem=ze,I.needsHillshadePrepare=!0,I.state="loaded",W(null))}},R.prototype._getNeighboringTiles=function(I){var W=I.canonical,te=Math.pow(2,W.z),ee=(W.x-1+te)%te,he=W.x===0?I.wrap-1:I.wrap,Se=(W.x+1+te)%te,ze=W.x+1===te?I.wrap+1:I.wrap,pt={};return pt[new n.OverscaledTileID(I.overscaledZ,he,W.z,ee,W.y).key]={backfilled:!1},pt[new n.OverscaledTileID(I.overscaledZ,ze,W.z,Se,W.y).key]={backfilled:!1},W.y>0&&(pt[new n.OverscaledTileID(I.overscaledZ,he,W.z,ee,W.y-1).key]={backfilled:!1},pt[new n.OverscaledTileID(I.overscaledZ,I.wrap,W.z,W.x,W.y-1).key]={backfilled:!1},pt[new n.OverscaledTileID(I.overscaledZ,ze,W.z,Se,W.y-1).key]={backfilled:!1}),W.y+1<te&&(pt[new n.OverscaledTileID(I.overscaledZ,he,W.z,ee,W.y+1).key]={backfilled:!1},pt[new n.OverscaledTileID(I.overscaledZ,I.wrap,W.z,W.x,W.y+1).key]={backfilled:!1},pt[new n.OverscaledTileID(I.overscaledZ,ze,W.z,Se,W.y+1).key]={backfilled:!1}),pt},R.prototype.unloadTile=function(I){I.demTexture&&this.map.painter.saveTileTexture(I.demTexture),I.fbo&&(I.fbo.destroy(),delete I.fbo),I.dem&&delete I.dem,delete I.neighboringTiles,I.state="unloaded",I.actor&&I.actor.send("removeDEMTile",{uid:I.uid,source:this.id})},R}(Z),re=function(H){function R(G,I,W,te){H.call(this),this.id=G,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=W.getActor(),this.setEventedParent(te),this._data=I.data,this._options=n.extend({},I),this._collectResourceTiming=I.collectResourceTiming,this._resourceTiming=[],I.maxzoom!==void 0&&(this.maxzoom=I.maxzoom),I.type&&(this.type=I.type),I.attribution&&(this.attribution=I.attribution),this.promoteId=I.promoteId;var ee=n.EXTENT/this.tileSize;this.workerOptions=n.extend({source:this.id,cluster:I.cluster||!1,geojsonVtOptions:{buffer:(I.buffer!==void 0?I.buffer:128)*ee,tolerance:(I.tolerance!==void 0?I.tolerance:.375)*ee,extent:n.EXTENT,maxZoom:this.maxzoom,lineMetrics:I.lineMetrics||!1,generateId:I.generateId||!1},superclusterOptions:{maxZoom:I.clusterMaxZoom!==void 0?Math.min(I.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,I.clusterMinPoints||2),extent:n.EXTENT,radius:(I.clusterRadius||50)*ee,log:!1,generateId:I.generateId||!1},clusterProperties:I.clusterProperties,filter:I.filter},I.workerOptions)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.load=function(){var I=this;this.fire(new n.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(W){if(W){I.fire(new n.ErrorEvent(W));return}var te={dataType:"source",sourceDataType:"metadata"};I._collectResourceTiming&&I._resourceTiming&&I._resourceTiming.length>0&&(te.resourceTiming=I._resourceTiming,I._resourceTiming=[]),I.fire(new n.Event("data",te))})},R.prototype.onAdd=function(I){this.map=I,this.load()},R.prototype.setData=function(I){var W=this;return this._data=I,this.fire(new n.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(te){if(te){W.fire(new n.ErrorEvent(te));return}var ee={dataType:"source",sourceDataType:"content"};W._collectResourceTiming&&W._resourceTiming&&W._resourceTiming.length>0&&(ee.resourceTiming=W._resourceTiming,W._resourceTiming=[]),W.fire(new n.Event("data",ee))}),this},R.prototype.getClusterExpansionZoom=function(I,W){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:I,source:this.id},W),this},R.prototype.getClusterChildren=function(I,W){return this.actor.send("geojson.getClusterChildren",{clusterId:I,source:this.id},W),this},R.prototype.getClusterLeaves=function(I,W,te,ee){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:I,limit:W,offset:te},ee),this},R.prototype._updateWorkerData=function(I){var W=this;this._loaded=!1;var te=n.extend({},this.workerOptions),ee=this._data;typeof ee=="string"?(te.request=this.map._requestManager.transformRequest(n.browser.resolveURL(ee),n.ResourceType.Source),te.request.collectResourceTiming=this._collectResourceTiming):te.data=JSON.stringify(ee),this.actor.send(this.type+".loadData",te,function(he,Se){W._removed||Se&&Se.abandoned||(W._loaded=!0,Se&&Se.resourceTiming&&Se.resourceTiming[W.id]&&(W._resourceTiming=Se.resourceTiming[W.id].slice(0)),W.actor.send(W.type+".coalesce",{source:te.source},null),I(he))})},R.prototype.loaded=function(){return this._loaded},R.prototype.loadTile=function(I,W){var te=this,ee=I.actor?"reloadTile":"loadTile";I.actor=this.actor;var he={type:this.type,uid:I.uid,tileID:I.tileID,zoom:I.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:n.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};I.request=this.actor.send(ee,he,function(Se,ze){return delete I.request,I.unloadVectorData(),I.aborted?W(null):Se?W(Se):(I.loadVectorData(ze,te.map.painter,ee==="reloadTile"),W(null))})},R.prototype.abortTile=function(I){I.request&&(I.request.cancel(),delete I.request),I.aborted=!0},R.prototype.unloadTile=function(I){I.unloadVectorData(),this.actor.send("removeTile",{uid:I.uid,type:this.type,source:this.id})},R.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},R.prototype.serialize=function(){return n.extend({},this._options,{type:this.type,data:this._data})},R.prototype.hasTransition=function(){return!1},R}(n.Evented),ue=n.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),fe=function(H){function R(G,I,W,te){H.call(this),this.id=G,this.dispatcher=W,this.coordinates=I.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(te),this.options=I}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.load=function(I,W){var te=this;this._loaded=!1,this.fire(new n.Event("dataloading",{dataType:"source"})),this.url=this.options.url,n.getImage(this.map._requestManager.transformRequest(this.url,n.ResourceType.Image),function(ee,he){te._loaded=!0,ee?te.fire(new n.ErrorEvent(ee)):he&&(te.image=he,I&&(te.coordinates=I),W&&W(),te._finishLoading())})},R.prototype.loaded=function(){return this._loaded},R.prototype.updateImage=function(I){var W=this;return!this.image||!I.url?this:(this.options.url=I.url,this.load(I.coordinates,function(){W.texture=null}),this)},R.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"metadata"})))},R.prototype.onAdd=function(I){this.map=I,this.load()},R.prototype.setCoordinates=function(I){var W=this;this.coordinates=I;var te=I.map(n.MercatorCoordinate.fromLngLat);this.tileID=K(te),this.minzoom=this.maxzoom=this.tileID.z;var ee=te.map(function(he){return W.tileID.getTilePoint(he)._round()});return this._boundsArray=new n.StructArrayLayout4i8,this._boundsArray.emplaceBack(ee[0].x,ee[0].y,0,0),this._boundsArray.emplaceBack(ee[1].x,ee[1].y,n.EXTENT,0),this._boundsArray.emplaceBack(ee[3].x,ee[3].y,0,n.EXTENT),this._boundsArray.emplaceBack(ee[2].x,ee[2].y,n.EXTENT,n.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new n.Event("data",{dataType:"source",sourceDataType:"content"})),this},R.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||!this.image)){var I=this.map.painter.context,W=I.gl;this.boundsBuffer||(this.boundsBuffer=I.createVertexBuffer(this._boundsArray,ue.members)),this.boundsSegments||(this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new n.Texture(I,this.image,W.RGBA),this.texture.bind(W.LINEAR,W.CLAMP_TO_EDGE));for(var te in this.tiles){var ee=this.tiles[te];ee.state!=="loaded"&&(ee.state="loaded",ee.texture=this.texture)}}},R.prototype.loadTile=function(I,W){this.tileID&&this.tileID.equals(I.tileID.canonical)?(this.tiles[String(I.tileID.wrap)]=I,I.buckets={},W(null)):(I.state="errored",W(null))},R.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},R.prototype.hasTransition=function(){return!1},R}(n.Evented);function K(H){for(var R=1/0,G=1/0,I=-1/0,W=-1/0,te=0,ee=H;te<ee.length;te+=1){var he=ee[te];R=Math.min(R,he.x),G=Math.min(G,he.y),I=Math.max(I,he.x),W=Math.max(W,he.y)}var Se=I-R,ze=W-G,pt=Math.max(Se,ze),wt=Math.max(0,Math.floor(-Math.log(pt)/Math.LN2)),gt=Math.pow(2,wt);return new n.CanonicalTileID(wt,Math.floor((R+I)/2*gt),Math.floor((G+W)/2*gt))}var X=function(H){function R(G,I,W,te){H.call(this,G,I,W,te),this.roundZoom=!0,this.type="video",this.options=I}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.load=function(){var I=this;this._loaded=!1;var W=this.options;this.urls=[];for(var te=0,ee=W.urls;te<ee.length;te+=1){var he=ee[te];this.urls.push(this.map._requestManager.transformRequest(he,n.ResourceType.Source).url)}n.getVideo(this.urls,function(Se,ze){I._loaded=!0,Se?I.fire(new n.ErrorEvent(Se)):ze&&(I.video=ze,I.video.loop=!0,I.video.addEventListener("playing",function(){I.map.triggerRepaint()}),I.map&&I.video.play(),I._finishLoading())})},R.prototype.pause=function(){this.video&&this.video.pause()},R.prototype.play=function(){this.video&&this.video.play()},R.prototype.seek=function(I){if(this.video){var W=this.video.seekable;I<W.start(0)||I>W.end(0)?this.fire(new n.ErrorEvent(new n.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+W.start(0)+" and "+W.end(0)+"-second mark."))):this.video.currentTime=I}},R.prototype.getVideo=function(){return this.video},R.prototype.onAdd=function(I){this.map||(this.map=I,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},R.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var I=this.map.painter.context,W=I.gl;this.boundsBuffer||(this.boundsBuffer=I.createVertexBuffer(this._boundsArray,ue.members)),this.boundsSegments||(this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(W.LINEAR,W.CLAMP_TO_EDGE),W.texSubImage2D(W.TEXTURE_2D,0,0,0,W.RGBA,W.UNSIGNED_BYTE,this.video)):(this.texture=new n.Texture(I,this.video,W.RGBA),this.texture.bind(W.LINEAR,W.CLAMP_TO_EDGE));for(var te in this.tiles){var ee=this.tiles[te];ee.state!=="loaded"&&(ee.state="loaded",ee.texture=this.texture)}}},R.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},R.prototype.hasTransition=function(){return this.video&&!this.video.paused},R}(fe),ae=function(H){function R(G,I,W,te){H.call(this,G,I,W,te),I.coordinates?(!Array.isArray(I.coordinates)||I.coordinates.length!==4||I.coordinates.some(function(ee){return!Array.isArray(ee)||ee.length!==2||ee.some(function(he){return typeof he!="number"})}))&&this.fire(new n.ErrorEvent(new n.ValidationError("sources."+G,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new n.ErrorEvent(new n.ValidationError("sources."+G,null,'missing required property "coordinates"'))),I.animate&&typeof I.animate!="boolean"&&this.fire(new n.ErrorEvent(new n.ValidationError("sources."+G,null,'optional "animate" property must be a boolean value'))),I.canvas?typeof I.canvas!="string"&&!(I.canvas instanceof n.window.HTMLCanvasElement)&&this.fire(new n.ErrorEvent(new n.ValidationError("sources."+G,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new n.ErrorEvent(new n.ValidationError("sources."+G,null,'missing required property "canvas"'))),this.options=I,this.animate=I.animate!==void 0?I.animate:!0}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof n.window.HTMLCanvasElement?this.options.canvas:n.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new n.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},R.prototype.getCanvas=function(){return this.canvas},R.prototype.onAdd=function(I){this.map=I,this.load(),this.canvas&&this.animate&&this.play()},R.prototype.onRemove=function(){this.pause()},R.prototype.prepare=function(){var I=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,I=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,I=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var W=this.map.painter.context,te=W.gl;this.boundsBuffer||(this.boundsBuffer=W.createVertexBuffer(this._boundsArray,ue.members)),this.boundsSegments||(this.boundsSegments=n.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(I||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new n.Texture(W,this.canvas,te.RGBA,{premultiply:!0});for(var ee in this.tiles){var he=this.tiles[ee];he.state!=="loaded"&&(he.state="loaded",he.texture=this.texture)}}},R.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},R.prototype.hasTransition=function(){return this._playing},R.prototype._hasInvalidDimensions=function(){for(var I=0,W=[this.canvas.width,this.canvas.height];I<W.length;I+=1){var te=W[I];if(isNaN(te)||te<=0)return!0}return!1},R}(fe),oe={vector:N,raster:Z,"raster-dem":J,geojson:re,video:X,image:fe,canvas:ae},me=function(H,R,G,I){var W=new oe[R.type](H,R,G,I);if(W.id!==H)throw new Error("Expected Source id to be "+H+" instead of "+W.id);return n.bindAll(["load","abort","unload","serialize","prepare"],W),W},xe=function(H){return oe[H]},ce=function(H,R){oe[H]=R};function ie(H,R){var G=n.identity([]);return n.translate(G,G,[1,1,0]),n.scale(G,G,[H.width*.5,H.height*.5,1]),n.multiply(G,G,H.calculatePosMatrix(R.toUnwrapped()))}function ge(H,R,G){if(H)for(var I=0,W=H;I<W.length;I+=1){var te=W[I],ee=R[te];if(ee&&ee.source===G&&ee.type==="fill-extrusion")return!0}else for(var he in R){var Se=R[he];if(Se.source===G&&Se.type==="fill-extrusion")return!0}return!1}function le(H,R,G,I,W,te){var ee=ge(W&&W.layers,R,H.id),he=te.maxPitchScaleFactor(),Se=H.tilesIn(I,he,ee);Se.sort(qe);for(var ze=[],pt=0,wt=Se;pt<wt.length;pt+=1){var gt=wt[pt];ze.push({wrappedTileID:gt.tileID.wrapped().key,queryResults:gt.tile.queryRenderedFeatures(R,G,H._state,gt.queryGeometry,gt.cameraQueryGeometry,gt.scale,W,te,he,ie(H.transform,gt.tileID))})}var Oe=et(ze);for(var $e in Oe)Oe[$e].forEach(function(st){var Tt=st.feature,Rt=H.getFeatureState(Tt.layer["source-layer"],Tt.id);Tt.source=Tt.layer.source,Tt.layer["source-layer"]&&(Tt.sourceLayer=Tt.layer["source-layer"]),Tt.state=Rt});return Oe}function we(H,R,G,I,W,te,ee){for(var he={},Se=te.queryRenderedSymbols(I),ze=[],pt=0,wt=Object.keys(Se).map(Number);pt<wt.length;pt+=1){var gt=wt[pt];ze.push(ee[gt])}ze.sort(qe);for(var Oe=function(){var Dt=st[$e],Xt=Dt.featureIndex.lookupSymbolFeatures(Se[Dt.bucketInstanceId],R,Dt.bucketIndex,Dt.sourceLayerIndex,W.filter,W.layers,W.availableImages,H);for(var Vt in Xt){var Ft=he[Vt]=he[Vt]||[],Zt=Xt[Vt];Zt.sort(function(Dr,un){var Xr=Dt.featureSortOrder;if(Xr){var pn=Xr.indexOf(Dr.featureIndex),ai=Xr.indexOf(un.featureIndex);return ai-pn}else return un.featureIndex-Dr.featureIndex});for(var Pt=0,sr=Zt;Pt<sr.length;Pt+=1){var xr=sr[Pt];Ft.push(xr)}}},$e=0,st=ze;$e<st.length;$e+=1)Oe();var Tt=function(Dt){he[Dt].forEach(function(Xt){var Vt=Xt.feature,Ft=H[Dt],Zt=G[Ft.source],Pt=Zt.getFeatureState(Vt.layer["source-layer"],Vt.id);Vt.source=Vt.layer.source,Vt.layer["source-layer"]&&(Vt.sourceLayer=Vt.layer["source-layer"]),Vt.state=Pt})};for(var Rt in he)Tt(Rt);return he}function Re(H,R){for(var G=H.getRenderableIds().map(function(Se){return H.getTileByID(Se)}),I=[],W={},te=0;te<G.length;te++){var ee=G[te],he=ee.tileID.canonical.key;W[he]||(W[he]=!0,ee.querySourceFeatures(I,R))}return I}function qe(H,R){var G=H.tileID,I=R.tileID;return G.overscaledZ-I.overscaledZ||G.canonical.y-I.canonical.y||G.wrap-I.wrap||G.canonical.x-I.canonical.x}function et(H){for(var R={},G={},I=0,W=H;I<W.length;I+=1){var te=W[I],ee=te.queryResults,he=te.wrappedTileID,Se=G[he]=G[he]||{};for(var ze in ee)for(var pt=ee[ze],wt=Se[ze]=Se[ze]||{},gt=R[ze]=R[ze]||[],Oe=0,$e=pt;Oe<$e.length;Oe+=1){var st=$e[Oe];wt[st.featureIndex]||(wt[st.featureIndex]=!0,gt.push(st))}}return R}var Pe=function(R,G){this.max=R,this.onRemove=G,this.reset()};Pe.prototype.reset=function(){for(var R in this.data)for(var G=0,I=this.data[R];G<I.length;G+=1){var W=I[G];W.timeout&&clearTimeout(W.timeout),this.onRemove(W.value)}return this.data={},this.order=[],this},Pe.prototype.add=function(R,G,I){var W=this,te=R.wrapped().key;this.data[te]===void 0&&(this.data[te]=[]);var ee={value:G,timeout:void 0};if(I!==void 0&&(ee.timeout=setTimeout(function(){W.remove(R,ee)},I)),this.data[te].push(ee),this.order.push(te),this.order.length>this.max){var he=this._getAndRemoveByKey(this.order[0]);he&&this.onRemove(he)}return this},Pe.prototype.has=function(R){return R.wrapped().key in this.data},Pe.prototype.getAndRemove=function(R){return this.has(R)?this._getAndRemoveByKey(R.wrapped().key):null},Pe.prototype._getAndRemoveByKey=function(R){var G=this.data[R].shift();return G.timeout&&clearTimeout(G.timeout),this.data[R].length===0&&delete this.data[R],this.order.splice(this.order.indexOf(R),1),G.value},Pe.prototype.getByKey=function(R){var G=this.data[R];return G?G[0].value:null},Pe.prototype.get=function(R){if(!this.has(R))return null;var G=this.data[R.wrapped().key][0];return G.value},Pe.prototype.remove=function(R,G){if(!this.has(R))return this;var I=R.wrapped().key,W=G===void 0?0:this.data[I].indexOf(G),te=this.data[I][W];return this.data[I].splice(W,1),te.timeout&&clearTimeout(te.timeout),this.data[I].length===0&&delete this.data[I],this.onRemove(te.value),this.order.splice(this.order.indexOf(I),1),this},Pe.prototype.setMaxSize=function(R){for(this.max=R;this.order.length>this.max;){var G=this._getAndRemoveByKey(this.order[0]);G&&this.onRemove(G)}return this},Pe.prototype.filter=function(R){var G=[];for(var I in this.data)for(var W=0,te=this.data[I];W<te.length;W+=1){var ee=te[W];R(ee.value)||G.push(ee)}for(var he=0,Se=G;he<Se.length;he+=1){var ze=Se[he];this.remove(ze.value.tileID,ze)}};var Ie=function(R,G,I){this.context=R;var W=R.gl;this.buffer=W.createBuffer(),this.dynamicDraw=!!I,this.context.unbindVAO(),R.bindElementBuffer.set(this.buffer),W.bufferData(W.ELEMENT_ARRAY_BUFFER,G.arrayBuffer,this.dynamicDraw?W.DYNAMIC_DRAW:W.STATIC_DRAW),this.dynamicDraw||delete G.arrayBuffer};Ie.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Ie.prototype.updateData=function(R){var G=this.context.gl;this.context.unbindVAO(),this.bind(),G.bufferSubData(G.ELEMENT_ARRAY_BUFFER,0,R.arrayBuffer)},Ie.prototype.destroy=function(){var R=this.context.gl;this.buffer&&(R.deleteBuffer(this.buffer),delete this.buffer)};var ut={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ft=function(R,G,I,W){this.length=G.length,this.attributes=I,this.itemSize=G.bytesPerElement,this.dynamicDraw=W,this.context=R;var te=R.gl;this.buffer=te.createBuffer(),R.bindVertexBuffer.set(this.buffer),te.bufferData(te.ARRAY_BUFFER,G.arrayBuffer,this.dynamicDraw?te.DYNAMIC_DRAW:te.STATIC_DRAW),this.dynamicDraw||delete G.arrayBuffer};ft.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ft.prototype.updateData=function(R){var G=this.context.gl;this.bind(),G.bufferSubData(G.ARRAY_BUFFER,0,R.arrayBuffer)},ft.prototype.enableAttributes=function(R,G){for(var I=0;I<this.attributes.length;I++){var W=this.attributes[I],te=G.attributes[W.name];te!==void 0&&R.enableVertexAttribArray(te)}},ft.prototype.setVertexAttribPointers=function(R,G,I){for(var W=0;W<this.attributes.length;W++){var te=this.attributes[W],ee=G.attributes[te.name];ee!==void 0&&R.vertexAttribPointer(ee,te.components,R[ut[te.type]],!1,this.itemSize,te.offset+this.itemSize*(I||0))}},ft.prototype.destroy=function(){var R=this.context.gl;this.buffer&&(R.deleteBuffer(this.buffer),delete this.buffer)};var je=function(R){this.gl=R.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};je.prototype.get=function(){return this.current},je.prototype.set=function(R){},je.prototype.getDefault=function(){return this.default},je.prototype.setDefault=function(){this.set(this.default)};var _t=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return n.Color.transparent},R.prototype.set=function(I){var W=this.current;I.r===W.r&&I.g===W.g&&I.b===W.b&&I.a===W.a&&!this.dirty||(this.gl.clearColor(I.r,I.g,I.b,I.a),this.current=I,this.dirty=!1)},R}(je),Bt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return 1},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.clearDepth(I),this.current=I,this.dirty=!1)},R}(je),Lt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return 0},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.clearStencil(I),this.current=I,this.dirty=!1)},R}(je),Me=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return[!0,!0,!0,!0]},R.prototype.set=function(I){var W=this.current;I[0]===W[0]&&I[1]===W[1]&&I[2]===W[2]&&I[3]===W[3]&&!this.dirty||(this.gl.colorMask(I[0],I[1],I[2],I[3]),this.current=I,this.dirty=!1)},R}(je),Ze=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!0},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.depthMask(I),this.current=I,this.dirty=!1)},R}(je),dt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return 255},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.stencilMask(I),this.current=I,this.dirty=!1)},R}(je),it=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},R.prototype.set=function(I){var W=this.current;I.func===W.func&&I.ref===W.ref&&I.mask===W.mask&&!this.dirty||(this.gl.stencilFunc(I.func,I.ref,I.mask),this.current=I,this.dirty=!1)},R}(je),vt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){var I=this.gl;return[I.KEEP,I.KEEP,I.KEEP]},R.prototype.set=function(I){var W=this.current;I[0]===W[0]&&I[1]===W[1]&&I[2]===W[2]&&!this.dirty||(this.gl.stencilOp(I[0],I[1],I[2]),this.current=I,this.dirty=!1)},R}(je),rt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;I?W.enable(W.STENCIL_TEST):W.disable(W.STENCIL_TEST),this.current=I,this.dirty=!1}},R}(je),We=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return[0,1]},R.prototype.set=function(I){var W=this.current;I[0]===W[0]&&I[1]===W[1]&&!this.dirty||(this.gl.depthRange(I[0],I[1]),this.current=I,this.dirty=!1)},R}(je),ht=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;I?W.enable(W.DEPTH_TEST):W.disable(W.DEPTH_TEST),this.current=I,this.dirty=!1}},R}(je),mt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return this.gl.LESS},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.depthFunc(I),this.current=I,this.dirty=!1)},R}(je),er=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;I?W.enable(W.BLEND):W.disable(W.BLEND),this.current=I,this.dirty=!1}},R}(je),$t=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){var I=this.gl;return[I.ONE,I.ZERO]},R.prototype.set=function(I){var W=this.current;I[0]===W[0]&&I[1]===W[1]&&!this.dirty||(this.gl.blendFunc(I[0],I[1]),this.current=I,this.dirty=!1)},R}(je),cr=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return n.Color.transparent},R.prototype.set=function(I){var W=this.current;I.r===W.r&&I.g===W.g&&I.b===W.b&&I.a===W.a&&!this.dirty||(this.gl.blendColor(I.r,I.g,I.b,I.a),this.current=I,this.dirty=!1)},R}(je),or=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return this.gl.FUNC_ADD},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.blendEquation(I),this.current=I,this.dirty=!1)},R}(je),vr=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;I?W.enable(W.CULL_FACE):W.disable(W.CULL_FACE),this.current=I,this.dirty=!1}},R}(je),Ot=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return this.gl.BACK},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.cullFace(I),this.current=I,this.dirty=!1)},R}(je),yt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return this.gl.CCW},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.frontFace(I),this.current=I,this.dirty=!1)},R}(je),Et=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.useProgram(I),this.current=I,this.dirty=!1)},R}(je),Je=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return this.gl.TEXTURE0},R.prototype.set=function(I){I===this.current&&!this.dirty||(this.gl.activeTexture(I),this.current=I,this.dirty=!1)},R}(je),Ke=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){var I=this.gl;return[0,0,I.drawingBufferWidth,I.drawingBufferHeight]},R.prototype.set=function(I){var W=this.current;I[0]===W[0]&&I[1]===W[1]&&I[2]===W[2]&&I[3]===W[3]&&!this.dirty||(this.gl.viewport(I[0],I[1],I[2],I[3]),this.current=I,this.dirty=!1)},R}(je),At=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;W.bindFramebuffer(W.FRAMEBUFFER,I),this.current=I,this.dirty=!1}},R}(je),Ee=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;W.bindRenderbuffer(W.RENDERBUFFER,I),this.current=I,this.dirty=!1}},R}(je),de=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;W.bindTexture(W.TEXTURE_2D,I),this.current=I,this.dirty=!1}},R}(je),Te=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;W.bindBuffer(W.ARRAY_BUFFER,I),this.current=I,this.dirty=!1}},R}(je),nt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(I){var W=this.gl;W.bindBuffer(W.ELEMENT_ARRAY_BUFFER,I),this.current=I,this.dirty=!1},R}(je),Mt=function(H){function R(G){H.call(this,G),this.vao=G.extVertexArrayObject}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R.prototype.set=function(I){!this.vao||I===this.current&&!this.dirty||(this.vao.bindVertexArrayOES(I),this.current=I,this.dirty=!1)},R}(je),Kt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return 4},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;W.pixelStorei(W.UNPACK_ALIGNMENT,I),this.current=I,this.dirty=!1}},R}(je),Jt=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I),this.current=I,this.dirty=!1}},R}(je),Fr=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return!1},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){var W=this.gl;W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,I),this.current=I,this.dirty=!1}},R}(je),Vr=function(H){function R(G,I){H.call(this,G),this.context=G,this.parent=I}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getDefault=function(){return null},R}(je),mr=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.setDirty=function(){this.dirty=!0},R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var W=this.gl;W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_2D,I,0),this.current=I,this.dirty=!1}},R}(Vr),zr=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.set=function(I){if(!(I===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var W=this.gl;W.framebufferRenderbuffer(W.FRAMEBUFFER,W.DEPTH_ATTACHMENT,W.RENDERBUFFER,I),this.current=I,this.dirty=!1}},R}(Vr),an=function(R,G,I,W){this.context=R,this.width=G,this.height=I;var te=R.gl,ee=this.framebuffer=te.createFramebuffer();this.colorAttachment=new mr(R,ee),W&&(this.depthAttachment=new zr(R,ee))};an.prototype.destroy=function(){var R=this.context.gl,G=this.colorAttachment.get();if(G&&R.deleteTexture(G),this.depthAttachment){var I=this.depthAttachment.get();I&&R.deleteRenderbuffer(I)}R.deleteFramebuffer(this.framebuffer)};var ni=519,mn=function(R,G,I){this.func=R,this.mask=G,this.range=I};mn.ReadOnly=!1,mn.ReadWrite=!0,mn.disabled=new mn(ni,mn.ReadOnly,[0,1]);var fi=519,Wi=7680,si=function(R,G,I,W,te,ee){this.test=R,this.ref=G,this.mask=I,this.fail=W,this.depthFail=te,this.pass=ee};si.disabled=new si({func:fi,mask:0},0,0,Wi,Wi,Wi);var Zi=0,Ei=1,ot=771,Be=function(R,G,I){this.blendFunction=R,this.blendColor=G,this.mask=I};Be.Replace=[Ei,Zi],Be.disabled=new Be(Be.Replace,n.Color.transparent,[!1,!1,!1,!1]),Be.unblended=new Be(Be.Replace,n.Color.transparent,[!0,!0,!0,!0]),Be.alphaBlended=new Be([Ei,ot],n.Color.transparent,[!0,!0,!0,!0]);var lt=1029,xt=2305,Nt=function(R,G,I){this.enable=R,this.mode=G,this.frontFace=I};Nt.disabled=new Nt(!1,lt,xt),Nt.backCCW=new Nt(!0,lt,xt);var nr=function(R){this.gl=R,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new _t(this),this.clearDepth=new Bt(this),this.clearStencil=new Lt(this),this.colorMask=new Me(this),this.depthMask=new Ze(this),this.stencilMask=new dt(this),this.stencilFunc=new it(this),this.stencilOp=new vt(this),this.stencilTest=new rt(this),this.depthRange=new We(this),this.depthTest=new ht(this),this.depthFunc=new mt(this),this.blend=new er(this),this.blendFunc=new $t(this),this.blendColor=new cr(this),this.blendEquation=new or(this),this.cullFace=new vr(this),this.cullFaceSide=new Ot(this),this.frontFace=new yt(this),this.program=new Et(this),this.activeTexture=new Je(this),this.viewport=new Ke(this),this.bindFramebuffer=new At(this),this.bindRenderbuffer=new Ee(this),this.bindTexture=new de(this),this.bindVertexBuffer=new Te(this),this.bindElementBuffer=new nt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Mt(this),this.pixelStoreUnpack=new Kt(this),this.pixelStoreUnpackPremultiplyAlpha=new Jt(this),this.pixelStoreUnpackFlipY=new Fr(this),this.extTextureFilterAnisotropic=R.getExtension("EXT_texture_filter_anisotropic")||R.getExtension("MOZ_EXT_texture_filter_anisotropic")||R.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=R.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=R.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(R.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=R.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=R.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=R.getParameter(R.MAX_TEXTURE_SIZE)};nr.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},nr.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},nr.prototype.createIndexBuffer=function(R,G){return new Ie(this,R,G)},nr.prototype.createVertexBuffer=function(R,G,I){return new ft(this,R,G,I)},nr.prototype.createRenderbuffer=function(R,G,I){var W=this.gl,te=W.createRenderbuffer();return this.bindRenderbuffer.set(te),W.renderbufferStorage(W.RENDERBUFFER,R,G,I),this.bindRenderbuffer.set(null),te},nr.prototype.createFramebuffer=function(R,G,I){return new an(this,R,G,I)},nr.prototype.clear=function(R){var G=R.color,I=R.depth,W=this.gl,te=0;G&&(te|=W.COLOR_BUFFER_BIT,this.clearColor.set(G),this.colorMask.set([!0,!0,!0,!0])),typeof I!="undefined"&&(te|=W.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(I),this.depthMask.set(!0)),W.clear(te)},nr.prototype.setCullFace=function(R){R.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(R.mode),this.frontFace.set(R.frontFace))},nr.prototype.setDepthMode=function(R){R.func===this.gl.ALWAYS&&!R.mask?this.depthTest.set(!1):(this.depthTest.set(!0),this.depthFunc.set(R.func),this.depthMask.set(R.mask),this.depthRange.set(R.range))},nr.prototype.setStencilMode=function(R){R.test.func===this.gl.ALWAYS&&!R.mask?this.stencilTest.set(!1):(this.stencilTest.set(!0),this.stencilMask.set(R.mask),this.stencilOp.set([R.fail,R.depthFail,R.pass]),this.stencilFunc.set({func:R.test.func,ref:R.ref,mask:R.test.mask}))},nr.prototype.setColorMode=function(R){n.deepEqual(R.blendFunction,Be.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(R.blendFunction),this.blendColor.set(R.blendColor)),this.colorMask.set(R.mask)},nr.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var yr=function(H){function R(G,I,W){var te=this;H.call(this),this.id=G,this.dispatcher=W,this.on("data",function(ee){ee.dataType==="source"&&ee.sourceDataType==="metadata"&&(te._sourceLoaded=!0),te._sourceLoaded&&!te._paused&&ee.dataType==="source"&&ee.sourceDataType==="content"&&(te.reload(),te.transform&&te.update(te.transform))}),this.on("error",function(){te._sourceErrored=!0}),this._source=me(G,I,W,this),this._tiles={},this._cache=new Pe(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new n.SourceFeatureState}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.onAdd=function(I){this.map=I,this._maxTileCacheSize=I?I._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(I)},R.prototype.onRemove=function(I){this._source&&this._source.onRemove&&this._source.onRemove(I)},R.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var I in this._tiles){var W=this._tiles[I];if(W.state!=="loaded"&&W.state!=="errored")return!1}return!0},R.prototype.getSource=function(){return this._source},R.prototype.pause=function(){this._paused=!0},R.prototype.resume=function(){if(this._paused){var I=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,I&&this.reload(),this.transform&&this.update(this.transform)}},R.prototype._loadTile=function(I,W){return this._source.loadTile(I,W)},R.prototype._unloadTile=function(I){if(this._source.unloadTile)return this._source.unloadTile(I,function(){})},R.prototype._abortTile=function(I){if(this._source.abortTile)return this._source.abortTile(I,function(){})},R.prototype.serialize=function(){return this._source.serialize()},R.prototype.prepare=function(I){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var W in this._tiles){var te=this._tiles[W];te.upload(I),te.prepare(this.map.style.imageManager)}},R.prototype.getIds=function(){return n.values(this._tiles).map(function(I){return I.tileID}).sort(dr).map(function(I){return I.key})},R.prototype.getRenderableIds=function(I){var W=this,te=[];for(var ee in this._tiles)this._isIdRenderable(ee,I)&&te.push(this._tiles[ee]);return I?te.sort(function(he,Se){var ze=he.tileID,pt=Se.tileID,wt=new n.Point(ze.canonical.x,ze.canonical.y)._rotate(W.transform.angle),gt=new n.Point(pt.canonical.x,pt.canonical.y)._rotate(W.transform.angle);return ze.overscaledZ-pt.overscaledZ||gt.y-wt.y||gt.x-wt.x}).map(function(he){return he.tileID.key}):te.map(function(he){return he.tileID}).sort(dr).map(function(he){return he.key})},R.prototype.hasRenderableParent=function(I){var W=this.findLoadedParent(I,0);return W?this._isIdRenderable(W.tileID.key):!1},R.prototype._isIdRenderable=function(I,W){return this._tiles[I]&&this._tiles[I].hasData()&&!this._coveredTiles[I]&&(W||!this._tiles[I].holdingForFade())},R.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(var I in this._tiles)this._tiles[I].state!=="errored"&&this._reloadTile(I,"reloading")},R.prototype._reloadTile=function(I,W){var te=this._tiles[I];te&&(te.state!=="loading"&&(te.state=W),this._loadTile(te,this._tileLoaded.bind(this,te,I,W)))},R.prototype._tileLoaded=function(I,W,te,ee){if(ee){I.state="errored",ee.status!==404?this._source.fire(new n.ErrorEvent(ee,{tile:I})):this.update(this.transform);return}I.timeAdded=n.browser.now(),te==="expired"&&(I.refreshedUponExpiration=!0),this._setTileReloadTimer(W,I),this.getSource().type==="raster-dem"&&I.dem&&this._backfillDEM(I),this._state.initializeTileState(I,this.map?this.map.painter:null),this._source.fire(new n.Event("data",{dataType:"source",tile:I,coord:I.tileID}))},R.prototype._backfillDEM=function(I){for(var W=this.getRenderableIds(),te=0;te<W.length;te++){var ee=W[te];if(I.neighboringTiles&&I.neighboringTiles[ee]){var he=this.getTileByID(ee);Se(I,he),Se(he,I)}}function Se(ze,pt){ze.needsHillshadePrepare=!0;var wt=pt.tileID.canonical.x-ze.tileID.canonical.x,gt=pt.tileID.canonical.y-ze.tileID.canonical.y,Oe=Math.pow(2,ze.tileID.canonical.z),$e=pt.tileID.key;wt===0&&gt===0||Math.abs(gt)>1||(Math.abs(wt)>1&&(Math.abs(wt+Oe)===1?wt+=Oe:Math.abs(wt-Oe)===1&&(wt-=Oe)),!(!pt.dem||!ze.dem)&&(ze.dem.backfillBorder(pt.dem,wt,gt),ze.neighboringTiles&&ze.neighboringTiles[$e]&&(ze.neighboringTiles[$e].backfilled=!0)))}},R.prototype.getTile=function(I){return this.getTileByID(I.key)},R.prototype.getTileByID=function(I){return this._tiles[I]},R.prototype._retainLoadedChildren=function(I,W,te,ee){for(var he in this._tiles){var Se=this._tiles[he];if(!(ee[he]||!Se.hasData()||Se.tileID.overscaledZ<=W||Se.tileID.overscaledZ>te)){for(var ze=Se.tileID;Se&&Se.tileID.overscaledZ>W+1;){var pt=Se.tileID.scaledTo(Se.tileID.overscaledZ-1);Se=this._tiles[pt.key],Se&&Se.hasData()&&(ze=pt)}for(var wt=ze;wt.overscaledZ>W;)if(wt=wt.scaledTo(wt.overscaledZ-1),I[wt.key]){ee[ze.key]=ze;break}}}},R.prototype.findLoadedParent=function(I,W){if(I.key in this._loadedParentTiles){var te=this._loadedParentTiles[I.key];return te&&te.tileID.overscaledZ>=W?te:null}for(var ee=I.overscaledZ-1;ee>=W;ee--){var he=I.scaledTo(ee),Se=this._getLoadedTile(he);if(Se)return Se}},R.prototype._getLoadedTile=function(I){var W=this._tiles[I.key];if(W&&W.hasData())return W;var te=this._cache.getByKey(I.wrapped().key);return te},R.prototype.updateCacheSize=function(I){var W=Math.ceil(I.width/this._source.tileSize)+1,te=Math.ceil(I.height/this._source.tileSize)+1,ee=W*te,he=5,Se=Math.floor(ee*he),ze=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,Se):Se;this._cache.setMaxSize(ze)},R.prototype.handleWrapJump=function(I){var W=this._prevLng===void 0?I:this._prevLng,te=I-W,ee=te/360,he=Math.round(ee);if(this._prevLng=I,he){var Se={};for(var ze in this._tiles){var pt=this._tiles[ze];pt.tileID=pt.tileID.unwrapTo(pt.tileID.wrap+he),Se[pt.tileID.key]=pt}this._tiles=Se;for(var wt in this._timers)clearTimeout(this._timers[wt]),delete this._timers[wt];for(var gt in this._tiles){var Oe=this._tiles[gt];this._setTileReloadTimer(gt,Oe)}}},R.prototype.update=function(I){var W=this;if(this.transform=I,!(!this._sourceLoaded||this._paused)){this.updateCacheSize(I),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};var te;this.used?this._source.tileID?te=I.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Dr){return new n.OverscaledTileID(Dr.canonical.z,Dr.wrap,Dr.canonical.z,Dr.canonical.x,Dr.canonical.y)}):(te=I.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(te=te.filter(function(Dr){return W._source.hasTile(Dr)}))):te=[];var ee=I.coveringZoomLevel(this._source),he=Math.max(ee-R.maxOverzooming,this._source.minzoom),Se=Math.max(ee+R.maxUnderzooming,this._source.minzoom),ze=this._updateRetainedTiles(te,ee);if(Rr(this._source.type)){for(var pt={},wt={},gt=Object.keys(ze),Oe=0,$e=gt;Oe<$e.length;Oe+=1){var st=$e[Oe],Tt=ze[st],Rt=this._tiles[st];if(!(!Rt||Rt.fadeEndTime&&Rt.fadeEndTime<=n.browser.now())){var Dt=this.findLoadedParent(Tt,he);Dt&&(this._addTile(Dt.tileID),pt[Dt.tileID.key]=Dt.tileID),wt[st]=Tt}}this._retainLoadedChildren(wt,ee,Se,ze);for(var Xt in pt)ze[Xt]||(this._coveredTiles[Xt]=!0,ze[Xt]=pt[Xt])}for(var Vt in ze)this._tiles[Vt].clearFadeHold();for(var Ft=n.keysDifference(this._tiles,ze),Zt=0,Pt=Ft;Zt<Pt.length;Zt+=1){var sr=Pt[Zt],xr=this._tiles[sr];xr.hasSymbolBuckets&&!xr.holdingForFade()?xr.setHoldDuration(this.map._fadeDuration):(!xr.hasSymbolBuckets||xr.symbolFadeFinished())&&this._removeTile(sr)}this._updateLoadedParentTileCache()}},R.prototype.releaseSymbolFadeTiles=function(){for(var I in this._tiles)this._tiles[I].holdingForFade()&&this._removeTile(I)},R.prototype._updateRetainedTiles=function(I,W){for(var te={},ee={},he=Math.max(W-R.maxOverzooming,this._source.minzoom),Se=Math.max(W+R.maxUnderzooming,this._source.minzoom),ze={},pt=0,wt=I;pt<wt.length;pt+=1){var gt=wt[pt],Oe=this._addTile(gt);te[gt.key]=gt,!Oe.hasData()&&W<this._source.maxzoom&&(ze[gt.key]=gt)}this._retainLoadedChildren(ze,W,Se,te);for(var $e=0,st=I;$e<st.length;$e+=1){var Tt=st[$e],Rt=this._tiles[Tt.key];if(!Rt.hasData()){if(W+1>this._source.maxzoom){var Dt=Tt.children(this._source.maxzoom)[0],Xt=this.getTile(Dt);if(Xt&&Xt.hasData()){te[Dt.key]=Dt;continue}}else{var Vt=Tt.children(this._source.maxzoom);if(te[Vt[0].key]&&te[Vt[1].key]&&te[Vt[2].key]&&te[Vt[3].key])continue}for(var Ft=Rt.wasRequested(),Zt=Tt.overscaledZ-1;Zt>=he;--Zt){var Pt=Tt.scaledTo(Zt);if(ee[Pt.key]||(ee[Pt.key]=!0,Rt=this.getTile(Pt),!Rt&&Ft&&(Rt=this._addTile(Pt)),Rt&&(te[Pt.key]=Pt,Ft=Rt.wasRequested(),Rt.hasData())))break}}}return te},R.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var I in this._tiles){for(var W=[],te=void 0,ee=this._tiles[I].tileID;ee.overscaledZ>0;){if(ee.key in this._loadedParentTiles){te=this._loadedParentTiles[ee.key];break}W.push(ee.key);var he=ee.scaledTo(ee.overscaledZ-1);if(te=this._getLoadedTile(he),te)break;ee=he}for(var Se=0,ze=W;Se<ze.length;Se+=1){var pt=ze[Se];this._loadedParentTiles[pt]=te}}},R.prototype._addTile=function(I){var W=this._tiles[I.key];if(W)return W;W=this._cache.getAndRemove(I),W&&(this._setTileReloadTimer(I.key,W),W.tileID=I,this._state.initializeTileState(W,this.map?this.map.painter:null),this._cacheTimers[I.key]&&(clearTimeout(this._cacheTimers[I.key]),delete this._cacheTimers[I.key],this._setTileReloadTimer(I.key,W)));var te=!!W;return te||(W=new n.Tile(I,this._source.tileSize*I.overscaleFactor()),this._loadTile(W,this._tileLoaded.bind(this,W,I.key,W.state))),W?(W.uses++,this._tiles[I.key]=W,te||this._source.fire(new n.Event("dataloading",{tile:W,coord:W.tileID,dataType:"source"})),W):null},R.prototype._setTileReloadTimer=function(I,W){var te=this;I in this._timers&&(clearTimeout(this._timers[I]),delete this._timers[I]);var ee=W.getExpiryTimeout();ee&&(this._timers[I]=setTimeout(function(){te._reloadTile(I,"expired"),delete te._timers[I]},ee))},R.prototype._removeTile=function(I){var W=this._tiles[I];W&&(W.uses--,delete this._tiles[I],this._timers[I]&&(clearTimeout(this._timers[I]),delete this._timers[I]),!(W.uses>0)&&(W.hasData()&&W.state!=="reloading"?this._cache.add(W.tileID,W,W.getExpiryTimeout()):(W.aborted=!0,this._abortTile(W),this._unloadTile(W))))},R.prototype.clearTiles=function(){this._shouldReloadOnResume=!1,this._paused=!1;for(var I in this._tiles)this._removeTile(I);this._cache.reset()},R.prototype.tilesIn=function(I,W,te){var ee=this,he=[],Se=this.transform;if(!Se)return he;for(var ze=te?Se.getCameraQueryGeometry(I):I,pt=I.map(function(Zt){return Se.pointCoordinate(Zt)}),wt=ze.map(function(Zt){return Se.pointCoordinate(Zt)}),gt=this.getIds(),Oe=1/0,$e=1/0,st=-1/0,Tt=-1/0,Rt=0,Dt=wt;Rt<Dt.length;Rt+=1){var Xt=Dt[Rt];Oe=Math.min(Oe,Xt.x),$e=Math.min($e,Xt.y),st=Math.max(st,Xt.x),Tt=Math.max(Tt,Xt.y)}for(var Vt=function(Zt){var Pt=ee._tiles[gt[Zt]];if(!Pt.holdingForFade()){var sr=Pt.tileID,xr=Math.pow(2,Se.zoom-Pt.tileID.overscaledZ),Dr=W*Pt.queryPadding*n.EXTENT/Pt.tileSize/xr,un=[sr.getTilePoint(new n.MercatorCoordinate(Oe,$e)),sr.getTilePoint(new n.MercatorCoordinate(st,Tt))];if(un[0].x-Dr<n.EXTENT&&un[0].y-Dr<n.EXTENT&&un[1].x+Dr>=0&&un[1].y+Dr>=0){var Xr=pt.map(function(ai){return sr.getTilePoint(ai)}),pn=wt.map(function(ai){return sr.getTilePoint(ai)});he.push({tile:Pt,tileID:sr,queryGeometry:Xr,cameraQueryGeometry:pn,scale:xr})}}},Ft=0;Ft<gt.length;Ft++)Vt(Ft);return he},R.prototype.getVisibleCoordinates=function(I){for(var W=this,te=this.getRenderableIds(I).map(function(ze){return W._tiles[ze].tileID}),ee=0,he=te;ee<he.length;ee+=1){var Se=he[ee];Se.posMatrix=this.transform.calculatePosMatrix(Se.toUnwrapped())}return te},R.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Rr(this._source.type))for(var I in this._tiles){var W=this._tiles[I];if(W.fadeEndTime!==void 0&&W.fadeEndTime>=n.browser.now())return!0}return!1},R.prototype.setFeatureState=function(I,W,te){I=I||"_geojsonTileLayer",this._state.updateState(I,W,te)},R.prototype.removeFeatureState=function(I,W,te){I=I||"_geojsonTileLayer",this._state.removeFeatureState(I,W,te)},R.prototype.getFeatureState=function(I,W){return I=I||"_geojsonTileLayer",this._state.getState(I,W)},R.prototype.setDependencies=function(I,W,te){var ee=this._tiles[I];ee&&ee.setDependencies(W,te)},R.prototype.reloadTilesForDependencies=function(I,W){for(var te in this._tiles){var ee=this._tiles[te];ee.hasDependency(I,W)&&this._reloadTile(te,"reloading")}this._cache.filter(function(he){return!he.hasDependency(I,W)})},R}(n.Evented);yr.maxOverzooming=10,yr.maxUnderzooming=3;function dr(H,R){var G=Math.abs(H.wrap*2)-+(H.wrap<0),I=Math.abs(R.wrap*2)-+(R.wrap<0);return H.overscaledZ-R.overscaledZ||I-G||R.canonical.y-H.canonical.y||R.canonical.x-H.canonical.x}function Rr(H){return H==="raster"||H==="image"||H==="video"}function Gr(){return new n.window.Worker(Ja.workerUrl)}var Yr="mapboxgl_preloaded_worker_pool",dn=function(){this.active={}};dn.prototype.acquire=function(R){if(!this.workers)for(this.workers=[];this.workers.length<dn.workerCount;)this.workers.push(new Gr);return this.active[R]=!0,this.workers.slice()},dn.prototype.release=function(R){delete this.active[R],this.numActive()===0&&(this.workers.forEach(function(G){G.terminate()}),this.workers=null)},dn.prototype.isPreloaded=function(){return!!this.active[Yr]},dn.prototype.numActive=function(){return Object.keys(this.active).length};var Wr=Math.floor(n.browser.hardwareConcurrency/2);dn.workerCount=Math.max(Math.min(Wr,6),1);var qn;function vi(){return qn||(qn=new dn),qn}function Mi(){var H=vi();H.acquire(Yr)}function Ui(){var H=qn;H&&(H.isPreloaded()&&H.numActive()===1?(H.release(Yr),qn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function ji(H,R){var G={};for(var I in H)I!=="ref"&&(G[I]=H[I]);return n.refProperties.forEach(function(W){W in R&&(G[W]=R[W])}),G}function ea(H){H=H.slice();for(var R=Object.create(null),G=0;G<H.length;G++)R[H[G].id]=H[G];for(var I=0;I<H.length;I++)"ref"in H[I]&&(H[I]=ji(H[I],R[H[I].ref]));return H}function Ra(){var H={},R=n.styleSpec.$version;for(var G in n.styleSpec.$root){var I=n.styleSpec.$root[G];if(I.required){var W=null;G==="version"?W=R:I.type==="array"?W=[]:W={},W!=null&&(H[G]=W)}}return H}var Li={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Yn(H,R,G){G.push({command:Li.addSource,args:[H,R[H]]})}function zi(H,R,G){R.push({command:Li.removeSource,args:[H]}),G[H]=!0}function ya(H,R,G,I){zi(H,G,I),Yn(H,R,G)}function zn(H,R,G){var I;for(I in H[G])if(H[G].hasOwnProperty(I)&&I!=="data"&&!n.deepEqual(H[G][I],R[G][I]))return!1;for(I in R[G])if(R[G].hasOwnProperty(I)&&I!=="data"&&!n.deepEqual(H[G][I],R[G][I]))return!1;return!0}function Xe(H,R,G,I){H=H||{},R=R||{};var W;for(W in H)H.hasOwnProperty(W)&&(R.hasOwnProperty(W)||zi(W,G,I));for(W in R)R.hasOwnProperty(W)&&(H.hasOwnProperty(W)?n.deepEqual(H[W],R[W])||(H[W].type==="geojson"&&R[W].type==="geojson"&&zn(H,R,W)?G.push({command:Li.setGeoJSONSourceData,args:[W,R[W].data]}):ya(W,R,G,I)):Yn(W,R,G))}function Ut(H,R,G,I,W,te){H=H||{},R=R||{};var ee;for(ee in H)H.hasOwnProperty(ee)&&(n.deepEqual(H[ee],R[ee])||G.push({command:te,args:[I,ee,R[ee],W]}));for(ee in R)!R.hasOwnProperty(ee)||H.hasOwnProperty(ee)||n.deepEqual(H[ee],R[ee])||G.push({command:te,args:[I,ee,R[ee],W]})}function ur(H){return H.id}function br(H,R){return H[R.id]=R,H}function Jr(H,R,G){H=H||[],R=R||[];var I=H.map(ur),W=R.map(ur),te=H.reduce(br,{}),ee=R.reduce(br,{}),he=I.slice(),Se=Object.create(null),ze,pt,wt,gt,Oe,$e,st;for(ze=0,pt=0;ze<I.length;ze++)wt=I[ze],ee.hasOwnProperty(wt)?pt++:(G.push({command:Li.removeLayer,args:[wt]}),he.splice(he.indexOf(wt,pt),1));for(ze=0,pt=0;ze<W.length;ze++)wt=W[W.length-1-ze],he[he.length-1-ze]!==wt&&(te.hasOwnProperty(wt)?(G.push({command:Li.removeLayer,args:[wt]}),he.splice(he.lastIndexOf(wt,he.length-pt),1)):pt++,$e=he[he.length-ze],G.push({command:Li.addLayer,args:[ee[wt],$e]}),he.splice(he.length-ze,0,wt),Se[wt]=!0);for(ze=0;ze<W.length;ze++)if(wt=W[ze],gt=te[wt],Oe=ee[wt],!(Se[wt]||n.deepEqual(gt,Oe))){if(!n.deepEqual(gt.source,Oe.source)||!n.deepEqual(gt["source-layer"],Oe["source-layer"])||!n.deepEqual(gt.type,Oe.type)){G.push({command:Li.removeLayer,args:[wt]}),$e=he[he.lastIndexOf(wt)+1],G.push({command:Li.addLayer,args:[Oe,$e]});continue}Ut(gt.layout,Oe.layout,G,wt,null,Li.setLayoutProperty),Ut(gt.paint,Oe.paint,G,wt,null,Li.setPaintProperty),n.deepEqual(gt.filter,Oe.filter)||G.push({command:Li.setFilter,args:[wt,Oe.filter]}),(!n.deepEqual(gt.minzoom,Oe.minzoom)||!n.deepEqual(gt.maxzoom,Oe.maxzoom))&&G.push({command:Li.setLayerZoomRange,args:[wt,Oe.minzoom,Oe.maxzoom]});for(st in gt)gt.hasOwnProperty(st)&&(st==="layout"||st==="paint"||st==="filter"||st==="metadata"||st==="minzoom"||st==="maxzoom"||(st.indexOf("paint.")===0?Ut(gt[st],Oe[st],G,wt,st.slice(6),Li.setPaintProperty):n.deepEqual(gt[st],Oe[st])||G.push({command:Li.setLayerProperty,args:[wt,st,Oe[st]]})));for(st in Oe)!Oe.hasOwnProperty(st)||gt.hasOwnProperty(st)||st==="layout"||st==="paint"||st==="filter"||st==="metadata"||st==="minzoom"||st==="maxzoom"||(st.indexOf("paint.")===0?Ut(gt[st],Oe[st],G,wt,st.slice(6),Li.setPaintProperty):n.deepEqual(gt[st],Oe[st])||G.push({command:Li.setLayerProperty,args:[wt,st,Oe[st]]}))}}function sn(H,R){if(!H)return[{command:Li.setStyle,args:[R]}];var G=[];try{if(!n.deepEqual(H.version,R.version))return[{command:Li.setStyle,args:[R]}];n.deepEqual(H.center,R.center)||G.push({command:Li.setCenter,args:[R.center]}),n.deepEqual(H.zoom,R.zoom)||G.push({command:Li.setZoom,args:[R.zoom]}),n.deepEqual(H.bearing,R.bearing)||G.push({command:Li.setBearing,args:[R.bearing]}),n.deepEqual(H.pitch,R.pitch)||G.push({command:Li.setPitch,args:[R.pitch]}),n.deepEqual(H.sprite,R.sprite)||G.push({command:Li.setSprite,args:[R.sprite]}),n.deepEqual(H.glyphs,R.glyphs)||G.push({command:Li.setGlyphs,args:[R.glyphs]}),n.deepEqual(H.transition,R.transition)||G.push({command:Li.setTransition,args:[R.transition]}),n.deepEqual(H.light,R.light)||G.push({command:Li.setLight,args:[R.light]});var I={},W=[];Xe(H.sources,R.sources,W,I);var te=[];H.layers&&H.layers.forEach(function(ee){I[ee.source]?G.push({command:Li.removeLayer,args:[ee.id]}):te.push(ee)}),G=G.concat(W),Jr(te,R.layers,G)}catch(ee){console.warn("Unable to compute style diff:",ee),G=[{command:Li.setStyle,args:[R]}]}return G}var gn=function(R,G){this.reset(R,G)};gn.prototype.reset=function(R,G){this.points=R||[],this._distances=[0];for(var I=1;I<this.points.length;I++)this._distances[I]=this._distances[I-1]+this.points[I].dist(this.points[I-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(G||0,this.length*.5),this.paddedLength=this.length-this.padding*2},gn.prototype.lerp=function(R){if(this.points.length===1)return this.points[0];R=n.clamp(R,0,1);for(var G=1,I=this._distances[G],W=R*this.paddedLength+this.padding;I<W&&G<this._distances.length;)I=this._distances[++G];var te=G-1,ee=this._distances[te],he=I-ee,Se=he>0?(W-ee)/he:0;return this.points[te].mult(1-Se).add(this.points[G].mult(Se))};var Cr=function(R,G,I){var W=this.boxCells=[],te=this.circleCells=[];this.xCellCount=Math.ceil(R/I),this.yCellCount=Math.ceil(G/I);for(var ee=0;ee<this.xCellCount*this.yCellCount;ee++)W.push([]),te.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=R,this.height=G,this.xScale=this.xCellCount/R,this.yScale=this.yCellCount/G,this.boxUid=0,this.circleUid=0};Cr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Cr.prototype.insert=function(R,G,I,W,te){this._forEachCell(G,I,W,te,this._insertBoxCell,this.boxUid++),this.boxKeys.push(R),this.bboxes.push(G),this.bboxes.push(I),this.bboxes.push(W),this.bboxes.push(te)},Cr.prototype.insertCircle=function(R,G,I,W){this._forEachCell(G-W,I-W,G+W,I+W,this._insertCircleCell,this.circleUid++),this.circleKeys.push(R),this.circles.push(G),this.circles.push(I),this.circles.push(W)},Cr.prototype._insertBoxCell=function(R,G,I,W,te,ee){this.boxCells[te].push(ee)},Cr.prototype._insertCircleCell=function(R,G,I,W,te,ee){this.circleCells[te].push(ee)},Cr.prototype._query=function(R,G,I,W,te,ee){if(I<0||R>this.width||W<0||G>this.height)return te?!1:[];var he=[];if(R<=0&&G<=0&&this.width<=I&&this.height<=W){if(te)return!0;for(var Se=0;Se<this.boxKeys.length;Se++)he.push({key:this.boxKeys[Se],x1:this.bboxes[Se*4],y1:this.bboxes[Se*4+1],x2:this.bboxes[Se*4+2],y2:this.bboxes[Se*4+3]});for(var ze=0;ze<this.circleKeys.length;ze++){var pt=this.circles[ze*3],wt=this.circles[ze*3+1],gt=this.circles[ze*3+2];he.push({key:this.circleKeys[ze],x1:pt-gt,y1:wt-gt,x2:pt+gt,y2:wt+gt})}return ee?he.filter(ee):he}else{var Oe={hitTest:te,seenUids:{box:{},circle:{}}};return this._forEachCell(R,G,I,W,this._queryCell,he,Oe,ee),te?he.length>0:he}},Cr.prototype._queryCircle=function(R,G,I,W,te){var ee=R-I,he=R+I,Se=G-I,ze=G+I;if(he<0||ee>this.width||ze<0||Se>this.height)return W?!1:[];var pt=[],wt={hitTest:W,circle:{x:R,y:G,radius:I},seenUids:{box:{},circle:{}}};return this._forEachCell(ee,Se,he,ze,this._queryCellCircle,pt,wt,te),W?pt.length>0:pt},Cr.prototype.query=function(R,G,I,W,te){return this._query(R,G,I,W,!1,te)},Cr.prototype.hitTest=function(R,G,I,W,te){return this._query(R,G,I,W,!0,te)},Cr.prototype.hitTestCircle=function(R,G,I,W){return this._queryCircle(R,G,I,!0,W)},Cr.prototype._queryCell=function(R,G,I,W,te,ee,he,Se){var ze=he.seenUids,pt=this.boxCells[te];if(pt!==null)for(var wt=this.bboxes,gt=0,Oe=pt;gt<Oe.length;gt+=1){var $e=Oe[gt];if(!ze.box[$e]){ze.box[$e]=!0;var st=$e*4;if(R<=wt[st+2]&&G<=wt[st+3]&&I>=wt[st+0]&&W>=wt[st+1]&&(!Se||Se(this.boxKeys[$e]))){if(he.hitTest)return ee.push(!0),!0;ee.push({key:this.boxKeys[$e],x1:wt[st],y1:wt[st+1],x2:wt[st+2],y2:wt[st+3]})}}}var Tt=this.circleCells[te];if(Tt!==null)for(var Rt=this.circles,Dt=0,Xt=Tt;Dt<Xt.length;Dt+=1){var Vt=Xt[Dt];if(!ze.circle[Vt]){ze.circle[Vt]=!0;var Ft=Vt*3;if(this._circleAndRectCollide(Rt[Ft],Rt[Ft+1],Rt[Ft+2],R,G,I,W)&&(!Se||Se(this.circleKeys[Vt]))){if(he.hitTest)return ee.push(!0),!0;var Zt=Rt[Ft],Pt=Rt[Ft+1],sr=Rt[Ft+2];ee.push({key:this.circleKeys[Vt],x1:Zt-sr,y1:Pt-sr,x2:Zt+sr,y2:Pt+sr})}}}},Cr.prototype._queryCellCircle=function(R,G,I,W,te,ee,he,Se){var ze=he.circle,pt=he.seenUids,wt=this.boxCells[te];if(wt!==null)for(var gt=this.bboxes,Oe=0,$e=wt;Oe<$e.length;Oe+=1){var st=$e[Oe];if(!pt.box[st]){pt.box[st]=!0;var Tt=st*4;if(this._circleAndRectCollide(ze.x,ze.y,ze.radius,gt[Tt+0],gt[Tt+1],gt[Tt+2],gt[Tt+3])&&(!Se||Se(this.boxKeys[st])))return ee.push(!0),!0}}var Rt=this.circleCells[te];if(Rt!==null)for(var Dt=this.circles,Xt=0,Vt=Rt;Xt<Vt.length;Xt+=1){var Ft=Vt[Xt];if(!pt.circle[Ft]){pt.circle[Ft]=!0;var Zt=Ft*3;if(this._circlesCollide(Dt[Zt],Dt[Zt+1],Dt[Zt+2],ze.x,ze.y,ze.radius)&&(!Se||Se(this.circleKeys[Ft])))return ee.push(!0),!0}}},Cr.prototype._forEachCell=function(R,G,I,W,te,ee,he,Se){for(var ze=this._convertToXCellCoord(R),pt=this._convertToYCellCoord(G),wt=this._convertToXCellCoord(I),gt=this._convertToYCellCoord(W),Oe=ze;Oe<=wt;Oe++)for(var $e=pt;$e<=gt;$e++){var st=this.xCellCount*$e+Oe;if(te.call(this,R,G,I,W,st,ee,he,Se))return}},Cr.prototype._convertToXCellCoord=function(R){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(R*this.xScale)))},Cr.prototype._convertToYCellCoord=function(R){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(R*this.yScale)))},Cr.prototype._circlesCollide=function(R,G,I,W,te,ee){var he=W-R,Se=te-G,ze=I+ee;return ze*ze>he*he+Se*Se},Cr.prototype._circleAndRectCollide=function(R,G,I,W,te,ee,he){var Se=(ee-W)/2,ze=Math.abs(R-(W+Se));if(ze>Se+I)return!1;var pt=(he-te)/2,wt=Math.abs(G-(te+pt));if(wt>pt+I)return!1;if(ze<=Se||wt<=pt)return!0;var gt=ze-Se,Oe=wt-pt;return gt*gt+Oe*Oe<=I*I};function hn(H,R,G,I,W){var te=n.create();return R?(n.scale(te,te,[1/W,1/W,1]),G||n.rotateZ(te,te,I.angle)):n.multiply(te,I.labelPlaneMatrix,H),te}function gi(H,R,G,I,W){if(R){var te=n.clone(H);return n.scale(te,te,[W,W,1]),G||n.rotateZ(te,te,-I.angle),te}else return I.glCoordMatrix}function Hn(H,R){var G=[H.x,H.y,0,1];il(G,G,R);var I=G[3];return{point:new n.Point(G[0]/I,G[1]/I),signedDistanceFromCamera:I}}function qi(H,R){return .5+.5*(H/R)}function fa(H,R){var G=H[0]/H[3],I=H[1]/H[3],W=G>=-R[0]&&G<=R[0]&&I>=-R[1]&&I<=R[1];return W}function eo(H,R,G,I,W,te,ee,he){var Se=I?H.textSizeData:H.iconSizeData,ze=n.evaluateSizeForZoom(Se,G.transform.zoom),pt=[256/G.width*2+1,256/G.height*2+1],wt=I?H.text.dynamicLayoutVertexArray:H.icon.dynamicLayoutVertexArray;wt.clear();for(var gt=H.lineVertexArray,Oe=I?H.text.placedSymbolArray:H.icon.placedSymbolArray,$e=G.transform.width/G.transform.height,st=!1,Tt=0;Tt<Oe.length;Tt++){var Rt=Oe.get(Tt);if(Rt.hidden||Rt.writingMode===n.WritingMode.vertical&&!st){as(Rt.numGlyphs,wt);continue}st=!1;var Dt=[Rt.anchorX,Rt.anchorY,0,1];if(n.transformMat4(Dt,Dt,R),!fa(Dt,pt)){as(Rt.numGlyphs,wt);continue}var Xt=Dt[3],Vt=qi(G.transform.cameraToCenterDistance,Xt),Ft=n.evaluateSizeForFeature(Se,ze,Rt),Zt=ee?Ft/Vt:Ft*Vt,Pt=new n.Point(Rt.anchorX,Rt.anchorY),sr=Hn(Pt,W).point,xr={},Dr=ja(Rt,Zt,!1,he,R,W,te,H.glyphOffsetArray,gt,wt,sr,Pt,xr,$e);st=Dr.useVertical,(Dr.notEnoughRoom||st||Dr.needsFlipping&&ja(Rt,Zt,!0,he,R,W,te,H.glyphOffsetArray,gt,wt,sr,Pt,xr,$e).notEnoughRoom)&&as(Rt.numGlyphs,wt)}I?H.text.dynamicLayoutVertexBuffer.updateData(wt):H.icon.dynamicLayoutVertexBuffer.updateData(wt)}function ma(H,R,G,I,W,te,ee,he,Se,ze,pt){var wt=he.glyphStartIndex+he.numGlyphs,gt=he.lineStartIndex,Oe=he.lineStartIndex+he.lineLength,$e=R.getoffsetX(he.glyphStartIndex),st=R.getoffsetX(wt-1),Tt=Uo(H*$e,G,I,W,te,ee,he.segment,gt,Oe,Se,ze,pt);if(!Tt)return null;var Rt=Uo(H*st,G,I,W,te,ee,he.segment,gt,Oe,Se,ze,pt);return Rt?{first:Tt,last:Rt}:null}function so(H,R,G,I){if(H===n.WritingMode.horizontal){var W=Math.abs(G.y-R.y),te=Math.abs(G.x-R.x)*I;if(W>te)return{useVertical:!0}}return(H===n.WritingMode.vertical?R.y<G.y:R.x>G.x)?{needsFlipping:!0}:null}function ja(H,R,G,I,W,te,ee,he,Se,ze,pt,wt,gt,Oe){var $e=R/24,st=H.lineOffsetX*$e,Tt=H.lineOffsetY*$e,Rt;if(H.numGlyphs>1){var Dt=H.glyphStartIndex+H.numGlyphs,Xt=H.lineStartIndex,Vt=H.lineStartIndex+H.lineLength,Ft=ma($e,he,st,Tt,G,pt,wt,H,Se,te,gt);if(!Ft)return{notEnoughRoom:!0};var Zt=Hn(Ft.first.point,ee).point,Pt=Hn(Ft.last.point,ee).point;if(I&&!G){var sr=so(H.writingMode,Zt,Pt,Oe);if(sr)return sr}Rt=[Ft.first];for(var xr=H.glyphStartIndex+1;xr<Dt-1;xr++)Rt.push(Uo($e*he.getoffsetX(xr),st,Tt,G,pt,wt,H.segment,Xt,Vt,Se,te,gt));Rt.push(Ft.last)}else{if(I&&!G){var Dr=Hn(wt,W).point,un=H.lineStartIndex+H.segment+1,Xr=new n.Point(Se.getx(un),Se.gety(un)),pn=Hn(Xr,W),ai=pn.signedDistanceFromCamera>0?pn.point:Xo(wt,Xr,Dr,1,W),Nn=so(H.writingMode,Dr,ai,Oe);if(Nn)return Nn}var fn=Uo($e*he.getoffsetX(H.glyphStartIndex),st,Tt,G,pt,wt,H.segment,H.lineStartIndex,H.lineStartIndex+H.lineLength,Se,te,gt);if(!fn)return{notEnoughRoom:!0};Rt=[fn]}for(var Ln=0,Mn=Rt;Ln<Mn.length;Ln+=1){var Kn=Mn[Ln];n.addDynamicAttributes(ze,Kn.point,Kn.angle)}return{}}function Xo(H,R,G,I,W){var te=Hn(H.add(H.sub(R)._unit()),W).point,ee=G.sub(te);return G.add(ee._mult(I/ee.mag()))}function Uo(H,R,G,I,W,te,ee,he,Se,ze,pt,wt){var gt=I?H-R:H+R,Oe=gt>0?1:-1,$e=0;I&&(Oe*=-1,$e=Math.PI),Oe<0&&($e+=Math.PI);for(var st=Oe>0?he+ee:he+ee+1,Tt=W,Rt=W,Dt=0,Xt=0,Vt=Math.abs(gt),Ft=[];Dt+Xt<=Vt;){if(st+=Oe,st<he||st>=Se)return null;if(Rt=Tt,Ft.push(Tt),Tt=wt[st],Tt===void 0){var Zt=new n.Point(ze.getx(st),ze.gety(st)),Pt=Hn(Zt,pt);if(Pt.signedDistanceFromCamera>0)Tt=wt[st]=Pt.point;else{var sr=st-Oe,xr=Dt===0?te:new n.Point(ze.getx(sr),ze.gety(sr));Tt=Xo(xr,Zt,Rt,Vt-Dt+1,pt)}}Dt+=Xt,Xt=Rt.dist(Tt)}var Dr=(Vt-Dt)/Xt,un=Tt.sub(Rt),Xr=un.mult(Dr)._add(Rt);Xr._add(un._unit()._perp()._mult(G*Oe));var pn=$e+Math.atan2(Tt.y-Rt.y,Tt.x-Rt.x);return Ft.push(Xr),{point:Xr,angle:pn,path:Ft}}var ms=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function as(H,R){for(var G=0;G<H;G++){var I=R.length;R.resize(I+4),R.float32.set(ms,I*3)}}function il(H,R,G){var I=R[0],W=R[1];return H[0]=G[0]*I+G[4]*W+G[12],H[1]=G[1]*I+G[5]*W+G[13],H[3]=G[3]*I+G[7]*W+G[15],H}var oo=100,cs=function(R,G,I){G===void 0&&(G=new Cr(R.width+2*oo,R.height+2*oo,25)),I===void 0&&(I=new Cr(R.width+2*oo,R.height+2*oo,25)),this.transform=R,this.grid=G,this.ignoredGrid=I,this.pitchfactor=Math.cos(R._pitch)*R.cameraToCenterDistance,this.screenRightBoundary=R.width+oo,this.screenBottomBoundary=R.height+oo,this.gridRightBoundary=R.width+2*oo,this.gridBottomBoundary=R.height+2*oo};cs.prototype.placeCollisionBox=function(R,G,I,W,te){var ee=this.projectAndGetPerspectiveRatio(W,R.anchorPointX,R.anchorPointY),he=I*ee.perspectiveRatio,Se=R.x1*he+ee.point.x,ze=R.y1*he+ee.point.y,pt=R.x2*he+ee.point.x,wt=R.y2*he+ee.point.y;return!this.isInsideGrid(Se,ze,pt,wt)||!G&&this.grid.hitTest(Se,ze,pt,wt,te)?{box:[],offscreen:!1}:{box:[Se,ze,pt,wt],offscreen:this.isOffscreen(Se,ze,pt,wt)}},cs.prototype.placeCollisionCircles=function(R,G,I,W,te,ee,he,Se,ze,pt,wt,gt,Oe){var $e=[],st=new n.Point(G.anchorX,G.anchorY),Tt=Hn(st,ee),Rt=qi(this.transform.cameraToCenterDistance,Tt.signedDistanceFromCamera),Dt=pt?te/Rt:te*Rt,Xt=Dt/n.ONE_EM,Vt=Hn(st,he).point,Ft={},Zt=G.lineOffsetX*Xt,Pt=G.lineOffsetY*Xt,sr=ma(Xt,W,Zt,Pt,!1,Vt,st,G,I,he,Ft),xr=!1,Dr=!1,un=!0;if(sr){for(var Xr=gt*.5*Rt+Oe,pn=new n.Point(-oo,-oo),ai=new n.Point(this.screenRightBoundary,this.screenBottomBoundary),Nn=new gn,fn=sr.first,Ln=sr.last,Mn=[],Kn=fn.path.length-1;Kn>=1;Kn--)Mn.push(fn.path[Kn]);for(var xi=1;xi<Ln.path.length;xi++)Mn.push(Ln.path[xi]);var Da=Xr*2.5;if(Se){var Pa=Mn.map(function(Md){return Hn(Md,Se)});Pa.some(function(Md){return Md.signedDistanceFromCamera<=0})?Mn=[]:Mn=Pa.map(function(Md){return Md.point})}var _o=[];if(Mn.length>0){for(var ua=Mn[0].clone(),Qa=Mn[0].clone(),Vo=1;Vo<Mn.length;Vo++)ua.x=Math.min(ua.x,Mn[Vo].x),ua.y=Math.min(ua.y,Mn[Vo].y),Qa.x=Math.max(Qa.x,Mn[Vo].x),Qa.y=Math.max(Qa.y,Mn[Vo].y);ua.x>=pn.x&&Qa.x<=ai.x&&ua.y>=pn.y&&Qa.y<=ai.y?_o=[Mn]:Qa.x<pn.x||ua.x>ai.x||Qa.y<pn.y||ua.y>ai.y?_o=[]:_o=n.clipLine([Mn],pn.x,pn.y,ai.x,ai.y)}for(var ml=0,Wv=_o;ml<Wv.length;ml+=1){var Xv=Wv[ml];Nn.reset(Xv,Xr*.25);var Td=0;Nn.length<=.5*Xr?Td=1:Td=Math.ceil(Nn.paddedLength/Da)+1;for(var Xd=0;Xd<Td;Xd++){var Mg=Xd/Math.max(Td-1,1),Zd=Nn.lerp(Mg),nh=Zd.x+oo,jd=Zd.y+oo;$e.push(nh,jd,Xr,0);var zh=nh-Xr,ih=jd-Xr,Ad=nh+Xr,Xp=jd+Xr;if(un=un&&this.isOffscreen(zh,ih,Ad,Xp),Dr=Dr||this.isInsideGrid(zh,ih,Ad,Xp),!R&&this.grid.hitTestCircle(nh,jd,Xr,wt)&&(xr=!0,!ze))return{circles:[],offscreen:!1,collisionDetected:xr}}}}return{circles:!ze&&xr||!Dr?[]:$e,offscreen:un,collisionDetected:xr}},cs.prototype.queryRenderedSymbols=function(R){if(R.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var G=[],I=1/0,W=1/0,te=-1/0,ee=-1/0,he=0,Se=R;he<Se.length;he+=1){var ze=Se[he],pt=new n.Point(ze.x+oo,ze.y+oo);I=Math.min(I,pt.x),W=Math.min(W,pt.y),te=Math.max(te,pt.x),ee=Math.max(ee,pt.y),G.push(pt)}for(var wt=this.grid.query(I,W,te,ee).concat(this.ignoredGrid.query(I,W,te,ee)),gt={},Oe={},$e=0,st=wt;$e<st.length;$e+=1){var Tt=st[$e],Rt=Tt.key;if(gt[Rt.bucketInstanceId]===void 0&&(gt[Rt.bucketInstanceId]={}),!gt[Rt.bucketInstanceId][Rt.featureIndex]){var Dt=[new n.Point(Tt.x1,Tt.y1),new n.Point(Tt.x2,Tt.y1),new n.Point(Tt.x2,Tt.y2),new n.Point(Tt.x1,Tt.y2)];n.polygonIntersectsPolygon(G,Dt)&&(gt[Rt.bucketInstanceId][Rt.featureIndex]=!0,Oe[Rt.bucketInstanceId]===void 0&&(Oe[Rt.bucketInstanceId]=[]),Oe[Rt.bucketInstanceId].push(Rt.featureIndex))}}return Oe},cs.prototype.insertCollisionBox=function(R,G,I,W,te){var ee=G?this.ignoredGrid:this.grid,he={bucketInstanceId:I,featureIndex:W,collisionGroupID:te};ee.insert(he,R[0],R[1],R[2],R[3])},cs.prototype.insertCollisionCircles=function(R,G,I,W,te){for(var ee=G?this.ignoredGrid:this.grid,he={bucketInstanceId:I,featureIndex:W,collisionGroupID:te},Se=0;Se<R.length;Se+=4)ee.insertCircle(he,R[Se],R[Se+1],R[Se+2])},cs.prototype.projectAndGetPerspectiveRatio=function(R,G,I){var W=[G,I,0,1];il(W,W,R);var te=new n.Point((W[0]/W[3]+1)/2*this.transform.width+oo,(-W[1]/W[3]+1)/2*this.transform.height+oo);return{point:te,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/W[3])}},cs.prototype.isOffscreen=function(R,G,I,W){return I<oo||R>=this.screenRightBoundary||W<oo||G>this.screenBottomBoundary},cs.prototype.isInsideGrid=function(R,G,I,W){return I>=0&&R<this.gridRightBoundary&&W>=0&&G<this.gridBottomBoundary},cs.prototype.getViewportMatrix=function(){var R=n.identity([]);return n.translate(R,R,[-oo,-oo,0]),R};function Eo(H,R,G){return R*(n.EXTENT/(H.tileSize*Math.pow(2,G-H.tileID.overscaledZ)))}var hs=function(R,G,I,W){R?this.opacity=Math.max(0,Math.min(1,R.opacity+(R.placed?G:-G))):this.opacity=W&&I?1:0,this.placed=I};hs.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Jo=function(R,G,I,W,te){this.text=new hs(R?R.text:null,G,I,te),this.icon=new hs(R?R.icon:null,G,W,te)};Jo.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Qo=function(R,G,I){this.text=R,this.icon=G,this.skipFade=I},Oa=function(){this.invProjMatrix=n.create(),this.viewportMatrix=n.create(),this.circles=[]},co=function(R,G,I,W,te){this.bucketInstanceId=R,this.featureIndex=G,this.sourceLayerIndex=I,this.bucketIndex=W,this.tileID=te},Al=function(R){this.crossSourceCollisions=R,this.maxGroupID=0,this.collisionGroups={}};Al.prototype.get=function(R){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[R]){var G=++this.maxGroupID;this.collisionGroups[R]={ID:G,predicate:function(I){return I.collisionGroupID===G}}}return this.collisionGroups[R]};function $l(H,R,G,I,W){var te=n.getAnchorAlignment(H),ee=te.horizontalAlign,he=te.verticalAlign,Se=-(ee-.5)*R,ze=-(he-.5)*G,pt=n.evaluateVariableOffset(H,I);return new n.Point(Se+pt[0]*W,ze+pt[1]*W)}function Nu(H,R,G,I,W,te){var ee=H.x1,he=H.x2,Se=H.y1,ze=H.y2,pt=H.anchorPointX,wt=H.anchorPointY,gt=new n.Point(R,G);return I&&gt._rotate(W?te:-te),{x1:ee+gt.x,y1:Se+gt.y,x2:he+gt.x,y2:ze+gt.y,anchorPointX:pt,anchorPointY:wt}}var os=function(R,G,I,W){this.transform=R.clone(),this.collisionIndex=new cs(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=G,this.retainedQueryData={},this.collisionGroups=new Al(I),this.collisionCircleArrays={},this.prevPlacement=W,W&&(W.prevPlacement=void 0),this.placedOrientations={}};os.prototype.getBucketParts=function(R,G,I,W){var te=I.getBucket(G),ee=I.latestFeatureIndex;if(!(!te||!ee||G.id!==te.layerIds[0])){var he=I.collisionBoxArray,Se=te.layers[0].layout,ze=Math.pow(2,this.transform.zoom-I.tileID.overscaledZ),pt=I.tileSize/n.EXTENT,wt=this.transform.calculatePosMatrix(I.tileID.toUnwrapped()),gt=Se.get("text-pitch-alignment")==="map",Oe=Se.get("text-rotation-alignment")==="map",$e=Eo(I,1,this.transform.zoom),st=hn(wt,gt,Oe,this.transform,$e),Tt=null;if(gt){var Rt=gi(wt,gt,Oe,this.transform,$e);Tt=n.multiply([],this.transform.labelPlaneMatrix,Rt)}this.retainedQueryData[te.bucketInstanceId]=new co(te.bucketInstanceId,ee,te.sourceLayerIndex,te.index,I.tileID);var Dt={bucket:te,layout:Se,posMatrix:wt,textLabelPlaneMatrix:st,labelToScreenMatrix:Tt,scale:ze,textPixelRatio:pt,holdingForFade:I.holdingForFade(),collisionBoxArray:he,partiallyEvaluatedTextSize:n.evaluateSizeForZoom(te.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(te.sourceID)};if(W)for(var Xt=0,Vt=te.sortKeyRanges;Xt<Vt.length;Xt+=1){var Ft=Vt[Xt],Zt=Ft.sortKey,Pt=Ft.symbolInstanceStart,sr=Ft.symbolInstanceEnd;R.push({sortKey:Zt,symbolInstanceStart:Pt,symbolInstanceEnd:sr,parameters:Dt})}else R.push({symbolInstanceStart:0,symbolInstanceEnd:te.symbolInstances.length,parameters:Dt})}},os.prototype.attemptAnchorPlacement=function(R,G,I,W,te,ee,he,Se,ze,pt,wt,gt,Oe,$e,st){var Tt=[gt.textOffset0,gt.textOffset1],Rt=$l(R,I,W,Tt,te),Dt=this.collisionIndex.placeCollisionBox(Nu(G,Rt.x,Rt.y,ee,he,this.transform.angle),wt,Se,ze,pt.predicate);if(st){var Xt=this.collisionIndex.placeCollisionBox(Nu(st,Rt.x,Rt.y,ee,he,this.transform.angle),wt,Se,ze,pt.predicate);if(Xt.box.length===0)return}if(Dt.box.length>0){var Vt;return this.prevPlacement&&this.prevPlacement.variableOffsets[gt.crossTileID]&&this.prevPlacement.placements[gt.crossTileID]&&this.prevPlacement.placements[gt.crossTileID].text&&(Vt=this.prevPlacement.variableOffsets[gt.crossTileID].anchor),this.variableOffsets[gt.crossTileID]={textOffset:Tt,width:I,height:W,anchor:R,textBoxScale:te,prevAnchor:Vt},this.markUsedJustification(Oe,R,gt,$e),Oe.allowVerticalPlacement&&(this.markUsedOrientation(Oe,$e,gt),this.placedOrientations[gt.crossTileID]=$e),{shift:Rt,placedGlyphBoxes:Dt}}},os.prototype.placeLayerBucketPart=function(R,G,I){var W=this,te=R.parameters,ee=te.bucket,he=te.layout,Se=te.posMatrix,ze=te.textLabelPlaneMatrix,pt=te.labelToScreenMatrix,wt=te.textPixelRatio,gt=te.holdingForFade,Oe=te.collisionBoxArray,$e=te.partiallyEvaluatedTextSize,st=te.collisionGroup,Tt=he.get("text-optional"),Rt=he.get("icon-optional"),Dt=he.get("text-allow-overlap"),Xt=he.get("icon-allow-overlap"),Vt=he.get("text-rotation-alignment")==="map",Ft=he.get("text-pitch-alignment")==="map",Zt=he.get("icon-text-fit")!=="none",Pt=he.get("symbol-z-order")==="viewport-y",sr=Dt&&(Xt||!ee.hasIconData()||Rt),xr=Xt&&(Dt||!ee.hasTextData()||Tt);!ee.collisionArrays&&Oe&&ee.deserializeCollisionBoxes(Oe);var Dr=function(fn,Ln){if(!G[fn.crossTileID]){if(gt){W.placements[fn.crossTileID]=new Qo(!1,!1,!1);return}var Mn=!1,Kn=!1,xi=!0,Da=null,Pa={box:null,offscreen:null},_o={box:null,offscreen:null},ua=null,Qa=null,Vo=null,ml=0,Wv=0,Xv=0;Ln.textFeatureIndex?ml=Ln.textFeatureIndex:fn.useRuntimeCollisionCircles&&(ml=fn.featureIndex),Ln.verticalTextFeatureIndex&&(Wv=Ln.verticalTextFeatureIndex);var Td=Ln.textBox;if(Td){var Xd=function(jl){var Oh=n.WritingMode.horizontal;if(ee.allowVerticalPlacement&&!jl&&W.prevPlacement){var Bh=W.prevPlacement.placedOrientations[fn.crossTileID];Bh&&(W.placedOrientations[fn.crossTileID]=Bh,Oh=Bh,W.markUsedOrientation(ee,Oh,fn))}return Oh},Mg=function(jl,Oh){if(ee.allowVerticalPlacement&&fn.numVerticalGlyphVertices>0&&Ln.verticalTextBox)for(var Bh=0,Sb=ee.writingModes;Bh<Sb.length;Bh+=1){var UT=Sb[Bh];if(UT===n.WritingMode.vertical?(Pa=Oh(),_o=Pa):Pa=jl(),Pa&&Pa.box&&Pa.box.length)break}else Pa=jl()};if(he.get("text-variable-anchor")){var zh=he.get("text-variable-anchor");if(W.prevPlacement&&W.prevPlacement.variableOffsets[fn.crossTileID]){var ih=W.prevPlacement.variableOffsets[fn.crossTileID];zh.indexOf(ih.anchor)>0&&(zh=zh.filter(function(jl){return jl!==ih.anchor}),zh.unshift(ih.anchor))}var Ad=function(jl,Oh,Bh){for(var Sb=jl.x2-jl.x1,UT=jl.y2-jl.y1,k8=fn.textBoxScale,C8=Zt&&!Xt?Oh:null,Y1={box:[],offscreen:!1},L8=Dt?zh.length*2:zh.length,Eb=0;Eb<L8;++Eb){var P8=zh[Eb%zh.length],R8=Eb>=zh.length,VT=W.attemptAnchorPlacement(P8,jl,Sb,UT,k8,Vt,Ft,wt,Se,st,R8,fn,ee,Bh,C8);if(VT&&(Y1=VT.placedGlyphBoxes,Y1&&Y1.box&&Y1.box.length)){Mn=!0,Da=VT.shift;break}}return Y1},Xp=function(){return Ad(Td,Ln.iconBox,n.WritingMode.horizontal)},Md=function(){var jl=Ln.verticalTextBox,Oh=Pa&&Pa.box&&Pa.box.length;return ee.allowVerticalPlacement&&!Oh&&fn.numVerticalGlyphVertices>0&&jl?Ad(jl,Ln.verticalIconBox,n.WritingMode.vertical):{box:null,offscreen:null}};Mg(Xp,Md),Pa&&(Mn=Pa.box,xi=Pa.offscreen);var bb=Xd(Pa&&Pa.box);if(!Mn&&W.prevPlacement){var Fy=W.prevPlacement.variableOffsets[fn.crossTileID];Fy&&(W.variableOffsets[fn.crossTileID]=Fy,W.markUsedJustification(ee,Fy.anchor,fn,bb))}}else{var Zd=function(jl,Oh){var Bh=W.collisionIndex.placeCollisionBox(jl,Dt,wt,Se,st.predicate);return Bh&&Bh.box&&Bh.box.length&&(W.markUsedOrientation(ee,Oh,fn),W.placedOrientations[fn.crossTileID]=Oh),Bh},nh=function(){return Zd(Td,n.WritingMode.horizontal)},jd=function(){var jl=Ln.verticalTextBox;return ee.allowVerticalPlacement&&fn.numVerticalGlyphVertices>0&&jl?Zd(jl,n.WritingMode.vertical):{box:null,offscreen:null}};Mg(nh,jd),Xd(Pa&&Pa.box&&Pa.box.length)}}if(ua=Pa,Mn=ua&&ua.box&&ua.box.length>0,xi=ua&&ua.offscreen,fn.useRuntimeCollisionCircles){var mf=ee.text.placedSymbolArray.get(fn.centerJustifiedTextSymbolIndex),wb=n.evaluateSizeForFeature(ee.textSizeData,$e,mf),G1=he.get("text-padding"),Dc=fn.collisionCircleDiameter;Qa=W.collisionIndex.placeCollisionCircles(Dt,mf,ee.lineVertexArray,ee.glyphOffsetArray,wb,Se,ze,pt,I,Ft,st.predicate,Dc,G1),Mn=Dt||Qa.circles.length>0&&!Qa.collisionDetected,xi=xi&&Qa.offscreen}if(Ln.iconFeatureIndex&&(Xv=Ln.iconFeatureIndex),Ln.iconBox){var qy=function(jl){var Oh=Zt&&Da?Nu(jl,Da.x,Da.y,Vt,Ft,W.transform.angle):jl;return W.collisionIndex.placeCollisionBox(Oh,Xt,wt,Se,st.predicate)};_o&&_o.box&&_o.box.length&&Ln.verticalIconBox?(Vo=qy(Ln.verticalIconBox),Kn=Vo.box.length>0):(Vo=qy(Ln.iconBox),Kn=Vo.box.length>0),xi=xi&&Vo.offscreen}var Tb=Tt||fn.numHorizontalGlyphVertices===0&&fn.numVerticalGlyphVertices===0,Ab=Rt||fn.numIconVertices===0;if(!Tb&&!Ab?Kn=Mn=Kn&&Mn:Ab?Tb||(Kn=Kn&&Mn):Mn=Kn&&Mn,Mn&&ua&&ua.box&&(_o&&_o.box&&Wv?W.collisionIndex.insertCollisionBox(ua.box,he.get("text-ignore-placement"),ee.bucketInstanceId,Wv,st.ID):W.collisionIndex.insertCollisionBox(ua.box,he.get("text-ignore-placement"),ee.bucketInstanceId,ml,st.ID)),Kn&&Vo&&W.collisionIndex.insertCollisionBox(Vo.box,he.get("icon-ignore-placement"),ee.bucketInstanceId,Xv,st.ID),Qa&&(Mn&&W.collisionIndex.insertCollisionCircles(Qa.circles,he.get("text-ignore-placement"),ee.bucketInstanceId,ml,st.ID),I)){var Mb=ee.bucketInstanceId,zy=W.collisionCircleArrays[Mb];zy===void 0&&(zy=W.collisionCircleArrays[Mb]=new Oa);for(var Oy=0;Oy<Qa.circles.length;Oy+=4)zy.circles.push(Qa.circles[Oy+0]),zy.circles.push(Qa.circles[Oy+1]),zy.circles.push(Qa.circles[Oy+2]),zy.circles.push(Qa.collisionDetected?1:0)}W.placements[fn.crossTileID]=new Qo(Mn||sr,Kn||xr,xi||ee.justReloaded),G[fn.crossTileID]=!0}};if(Pt)for(var un=ee.getSortedSymbolIndexes(this.transform.angle),Xr=un.length-1;Xr>=0;--Xr){var pn=un[Xr];Dr(ee.symbolInstances.get(pn),ee.collisionArrays[pn])}else for(var ai=R.symbolInstanceStart;ai<R.symbolInstanceEnd;ai++)Dr(ee.symbolInstances.get(ai),ee.collisionArrays[ai]);if(I&&ee.bucketInstanceId in this.collisionCircleArrays){var Nn=this.collisionCircleArrays[ee.bucketInstanceId];n.invert(Nn.invProjMatrix,Se),Nn.viewportMatrix=this.collisionIndex.getViewportMatrix()}ee.justReloaded=!1},os.prototype.markUsedJustification=function(R,G,I,W){var te={left:I.leftJustifiedTextSymbolIndex,center:I.centerJustifiedTextSymbolIndex,right:I.rightJustifiedTextSymbolIndex},ee;W===n.WritingMode.vertical?ee=I.verticalPlacedTextSymbolIndex:ee=te[n.getAnchorJustification(G)];for(var he=[I.leftJustifiedTextSymbolIndex,I.centerJustifiedTextSymbolIndex,I.rightJustifiedTextSymbolIndex,I.verticalPlacedTextSymbolIndex],Se=0,ze=he;Se<ze.length;Se+=1){var pt=ze[Se];pt>=0&&(ee>=0&&pt!==ee?R.text.placedSymbolArray.get(pt).crossTileID=0:R.text.placedSymbolArray.get(pt).crossTileID=I.crossTileID)}},os.prototype.markUsedOrientation=function(R,G,I){for(var W=G===n.WritingMode.horizontal||G===n.WritingMode.horizontalOnly?G:0,te=G===n.WritingMode.vertical?G:0,ee=[I.leftJustifiedTextSymbolIndex,I.centerJustifiedTextSymbolIndex,I.rightJustifiedTextSymbolIndex],he=0,Se=ee;he<Se.length;he+=1){var ze=Se[he];R.text.placedSymbolArray.get(ze).placedOrientation=W}I.verticalPlacedTextSymbolIndex&&(R.text.placedSymbolArray.get(I.verticalPlacedTextSymbolIndex).placedOrientation=te)},os.prototype.commit=function(R){this.commitTime=R,this.zoomAtLastRecencyCheck=this.transform.zoom;var G=this.prevPlacement,I=!1;this.prevZoomAdjustment=G?G.zoomAdjustment(this.transform.zoom):0;var W=G?G.symbolFadeChange(R):1,te=G?G.opacities:{},ee=G?G.variableOffsets:{},he=G?G.placedOrientations:{};for(var Se in this.placements){var ze=this.placements[Se],pt=te[Se];pt?(this.opacities[Se]=new Jo(pt,W,ze.text,ze.icon),I=I||ze.text!==pt.text.placed||ze.icon!==pt.icon.placed):(this.opacities[Se]=new Jo(null,W,ze.text,ze.icon,ze.skipFade),I=I||ze.text||ze.icon)}for(var wt in te){var gt=te[wt];if(!this.opacities[wt]){var Oe=new Jo(gt,W,!1,!1);Oe.isHidden()||(this.opacities[wt]=Oe,I=I||gt.text.placed||gt.icon.placed)}}for(var $e in ee)!this.variableOffsets[$e]&&this.opacities[$e]&&!this.opacities[$e].isHidden()&&(this.variableOffsets[$e]=ee[$e]);for(var st in he)!this.placedOrientations[st]&&this.opacities[st]&&!this.opacities[st].isHidden()&&(this.placedOrientations[st]=he[st]);I?this.lastPlacementChangeTime=R:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=G?G.lastPlacementChangeTime:R)},os.prototype.updateLayerOpacities=function(R,G){for(var I={},W=0,te=G;W<te.length;W+=1){var ee=te[W],he=ee.getBucket(R);he&&ee.latestFeatureIndex&&R.id===he.layerIds[0]&&this.updateBucketOpacities(he,I,ee.collisionBoxArray)}},os.prototype.updateBucketOpacities=function(R,G,I){var W=this;R.hasTextData()&&R.text.opacityVertexArray.clear(),R.hasIconData()&&R.icon.opacityVertexArray.clear(),R.hasIconCollisionBoxData()&&R.iconCollisionBox.collisionVertexArray.clear(),R.hasTextCollisionBoxData()&&R.textCollisionBox.collisionVertexArray.clear();var te=R.layers[0].layout,ee=new Jo(null,0,!1,!1,!0),he=te.get("text-allow-overlap"),Se=te.get("icon-allow-overlap"),ze=te.get("text-variable-anchor"),pt=te.get("text-rotation-alignment")==="map",wt=te.get("text-pitch-alignment")==="map",gt=te.get("icon-text-fit")!=="none",Oe=new Jo(null,0,he&&(Se||!R.hasIconData()||te.get("icon-optional")),Se&&(he||!R.hasTextData()||te.get("text-optional")),!0);!R.collisionArrays&&I&&(R.hasIconCollisionBoxData()||R.hasTextCollisionBoxData())&&R.deserializeCollisionBoxes(I);for(var $e=function(Dt,Xt,Vt){for(var Ft=0;Ft<Xt/4;Ft++)Dt.opacityVertexArray.emplaceBack(Vt)},st=function(Dt){var Xt=R.symbolInstances.get(Dt),Vt=Xt.numHorizontalGlyphVertices,Ft=Xt.numVerticalGlyphVertices,Zt=Xt.crossTileID,Pt=G[Zt],sr=W.opacities[Zt];Pt?sr=ee:sr||(sr=Oe,W.opacities[Zt]=sr),G[Zt]=!0;var xr=Vt>0||Ft>0,Dr=Xt.numIconVertices>0,un=W.placedOrientations[Xt.crossTileID],Xr=un===n.WritingMode.vertical,pn=un===n.WritingMode.horizontal||un===n.WritingMode.horizontalOnly;if(xr){var ai=xu(sr.text),Nn=Xr?ii:ai;$e(R.text,Vt,Nn);var fn=pn?ii:ai;$e(R.text,Ft,fn);var Ln=sr.text.isHidden();[Xt.rightJustifiedTextSymbolIndex,Xt.centerJustifiedTextSymbolIndex,Xt.leftJustifiedTextSymbolIndex].forEach(function(Xv){Xv>=0&&(R.text.placedSymbolArray.get(Xv).hidden=Ln||Xr?1:0)}),Xt.verticalPlacedTextSymbolIndex>=0&&(R.text.placedSymbolArray.get(Xt.verticalPlacedTextSymbolIndex).hidden=Ln||pn?1:0);var Mn=W.variableOffsets[Xt.crossTileID];Mn&&W.markUsedJustification(R,Mn.anchor,Xt,un);var Kn=W.placedOrientations[Xt.crossTileID];Kn&&(W.markUsedJustification(R,"left",Xt,Kn),W.markUsedOrientation(R,Kn,Xt))}if(Dr){var xi=xu(sr.icon),Da=!(gt&&Xt.verticalPlacedIconSymbolIndex&&Xr);if(Xt.placedIconSymbolIndex>=0){var Pa=Da?xi:ii;$e(R.icon,Xt.numIconVertices,Pa),R.icon.placedSymbolArray.get(Xt.placedIconSymbolIndex).hidden=sr.icon.isHidden()}if(Xt.verticalPlacedIconSymbolIndex>=0){var _o=Da?ii:xi;$e(R.icon,Xt.numVerticalIconVertices,_o),R.icon.placedSymbolArray.get(Xt.verticalPlacedIconSymbolIndex).hidden=sr.icon.isHidden()}}if(R.hasIconCollisionBoxData()||R.hasTextCollisionBoxData()){var ua=R.collisionArrays[Dt];if(ua){var Qa=new n.Point(0,0);if(ua.textBox||ua.verticalTextBox){var Vo=!0;if(ze){var ml=W.variableOffsets[Zt];ml?(Qa=$l(ml.anchor,ml.width,ml.height,ml.textOffset,ml.textBoxScale),pt&&Qa._rotate(wt?W.transform.angle:-W.transform.angle)):Vo=!1}ua.textBox&&vn(R.textCollisionBox.collisionVertexArray,sr.text.placed,!Vo||Xr,Qa.x,Qa.y),ua.verticalTextBox&&vn(R.textCollisionBox.collisionVertexArray,sr.text.placed,!Vo||pn,Qa.x,Qa.y)}var Wv=!!(!pn&&ua.verticalIconBox);ua.iconBox&&vn(R.iconCollisionBox.collisionVertexArray,sr.icon.placed,Wv,gt?Qa.x:0,gt?Qa.y:0),ua.verticalIconBox&&vn(R.iconCollisionBox.collisionVertexArray,sr.icon.placed,!Wv,gt?Qa.x:0,gt?Qa.y:0)}}},Tt=0;Tt<R.symbolInstances.length;Tt++)st(Tt);if(R.sortFeatures(this.transform.angle),this.retainedQueryData[R.bucketInstanceId]&&(this.retainedQueryData[R.bucketInstanceId].featureSortOrder=R.featureSortOrder),R.hasTextData()&&R.text.opacityVertexBuffer&&R.text.opacityVertexBuffer.updateData(R.text.opacityVertexArray),R.hasIconData()&&R.icon.opacityVertexBuffer&&R.icon.opacityVertexBuffer.updateData(R.icon.opacityVertexArray),R.hasIconCollisionBoxData()&&R.iconCollisionBox.collisionVertexBuffer&&R.iconCollisionBox.collisionVertexBuffer.updateData(R.iconCollisionBox.collisionVertexArray),R.hasTextCollisionBoxData()&&R.textCollisionBox.collisionVertexBuffer&&R.textCollisionBox.collisionVertexBuffer.updateData(R.textCollisionBox.collisionVertexArray),R.bucketInstanceId in this.collisionCircleArrays){var Rt=this.collisionCircleArrays[R.bucketInstanceId];R.placementInvProjMatrix=Rt.invProjMatrix,R.placementViewportMatrix=Rt.viewportMatrix,R.collisionCircleArray=Rt.circles,delete this.collisionCircleArrays[R.bucketInstanceId]}},os.prototype.symbolFadeChange=function(R){return this.fadeDuration===0?1:(R-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},os.prototype.zoomAdjustment=function(R){return Math.max(0,(this.transform.zoom-R)/1.5)},os.prototype.hasTransitions=function(R){return this.stale||R-this.lastPlacementChangeTime<this.fadeDuration},os.prototype.stillRecent=function(R,G){var I=this.zoomAtLastRecencyCheck===G?1-this.zoomAdjustment(G):1;return this.zoomAtLastRecencyCheck=G,this.commitTime+this.fadeDuration*I>R},os.prototype.setStale=function(){this.stale=!0};function vn(H,R,G,I,W){H.emplaceBack(R?1:0,G?1:0,I||0,W||0),H.emplaceBack(R?1:0,G?1:0,I||0,W||0),H.emplaceBack(R?1:0,G?1:0,I||0,W||0),H.emplaceBack(R?1:0,G?1:0,I||0,W||0)}var bi=Math.pow(2,25),ac=Math.pow(2,24),Pl=Math.pow(2,17),ss=Math.pow(2,16),vl=Math.pow(2,9),$o=Math.pow(2,8),Rl=Math.pow(2,1);function xu(H){if(H.opacity===0&&!H.placed)return 0;if(H.opacity===1&&H.placed)return 4294967295;var R=H.placed?1:0,G=Math.floor(H.opacity*127);return G*bi+R*ac+G*Pl+R*ss+G*vl+R*$o+G*Rl+R}var ii=0,Aa=function(R){this._sortAcrossTiles=R.layout.get("symbol-z-order")!=="viewport-y"&&R.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Aa.prototype.continuePlacement=function(R,G,I,W,te){for(var ee=this._bucketParts;this._currentTileIndex<R.length;){var he=R[this._currentTileIndex];if(G.getBucketParts(ee,W,he,this._sortAcrossTiles),this._currentTileIndex++,te())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ee.sort(function(ze,pt){return ze.sortKey-pt.sortKey}));this._currentPartIndex<ee.length;){var Se=ee[this._currentPartIndex];if(G.placeLayerBucketPart(Se,this._seenCrossTileIDs,I),this._currentPartIndex++,te())return!0}return!1};var Ca=function(R,G,I,W,te,ee,he){this.placement=new os(R,te,ee,he),this._currentPlacementIndex=G.length-1,this._forceFullPlacement=I,this._showCollisionBoxes=W,this._done=!1};Ca.prototype.isDone=function(){return this._done},Ca.prototype.continuePlacement=function(R,G,I){for(var W=this,te=n.browser.now(),ee=function(){var wt=n.browser.now()-te;return W._forceFullPlacement?!1:wt>2};this._currentPlacementIndex>=0;){var he=R[this._currentPlacementIndex],Se=G[he],ze=this.placement.collisionIndex.transform.zoom;if(Se.type==="symbol"&&(!Se.minzoom||Se.minzoom<=ze)&&(!Se.maxzoom||Se.maxzoom>ze)){this._inProgressLayer||(this._inProgressLayer=new Aa(Se));var pt=this._inProgressLayer.continuePlacement(I[Se.source],this.placement,this._showCollisionBoxes,Se,ee);if(pt)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Ca.prototype.commit=function(R){return this.placement.commit(R),this.placement};var Fs=512/n.EXTENT/2,Pf=function(R,G,I){this.tileID=R,this.indexedSymbolInstances={},this.bucketInstanceId=I;for(var W=0;W<G.length;W++){var te=G.get(W),ee=te.key;this.indexedSymbolInstances[ee]||(this.indexedSymbolInstances[ee]=[]),this.indexedSymbolInstances[ee].push({crossTileID:te.crossTileID,coord:this.getScaledCoordinates(te,R)})}};Pf.prototype.getScaledCoordinates=function(R,G){var I=G.canonical.z-this.tileID.canonical.z,W=Fs/Math.pow(2,I);return{x:Math.floor((G.canonical.x*n.EXTENT+R.anchorX)*W),y:Math.floor((G.canonical.y*n.EXTENT+R.anchorY)*W)}},Pf.prototype.findMatches=function(R,G,I){for(var W=this.tileID.canonical.z<G.canonical.z?1:Math.pow(2,this.tileID.canonical.z-G.canonical.z),te=0;te<R.length;te++){var ee=R.get(te);if(!ee.crossTileID){var he=this.indexedSymbolInstances[ee.key];if(he)for(var Se=this.getScaledCoordinates(ee,G),ze=0,pt=he;ze<pt.length;ze+=1){var wt=pt[ze];if(Math.abs(wt.coord.x-Se.x)<=W&&Math.abs(wt.coord.y-Se.y)<=W&&!I[wt.crossTileID]){I[wt.crossTileID]=!0,ee.crossTileID=wt.crossTileID;break}}}}};var Ma=function(){this.maxCrossTileID=0};Ma.prototype.generate=function(){return++this.maxCrossTileID};var Rf=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Rf.prototype.handleWrapJump=function(R){var G=Math.round((R-this.lng)/360);if(G!==0)for(var I in this.indexes){var W=this.indexes[I],te={};for(var ee in W){var he=W[ee];he.tileID=he.tileID.unwrapTo(he.tileID.wrap+G),te[he.tileID.key]=he}this.indexes[I]=te}this.lng=R},Rf.prototype.addBucket=function(R,G,I){if(this.indexes[R.overscaledZ]&&this.indexes[R.overscaledZ][R.key]){if(this.indexes[R.overscaledZ][R.key].bucketInstanceId===G.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(R.overscaledZ,this.indexes[R.overscaledZ][R.key])}for(var W=0;W<G.symbolInstances.length;W++){var te=G.symbolInstances.get(W);te.crossTileID=0}this.usedCrossTileIDs[R.overscaledZ]||(this.usedCrossTileIDs[R.overscaledZ]={});var ee=this.usedCrossTileIDs[R.overscaledZ];for(var he in this.indexes){var Se=this.indexes[he];if(Number(he)>R.overscaledZ)for(var ze in Se){var pt=Se[ze];pt.tileID.isChildOf(R)&&pt.findMatches(G.symbolInstances,R,ee)}else{var wt=R.scaledTo(Number(he)),gt=Se[wt.key];gt&&gt.findMatches(G.symbolInstances,R,ee)}}for(var Oe=0;Oe<G.symbolInstances.length;Oe++){var $e=G.symbolInstances.get(Oe);$e.crossTileID||($e.crossTileID=I.generate(),ee[$e.crossTileID]=!0)}return this.indexes[R.overscaledZ]===void 0&&(this.indexes[R.overscaledZ]={}),this.indexes[R.overscaledZ][R.key]=new Pf(R,G.symbolInstances,G.bucketInstanceId),!0},Rf.prototype.removeBucketCrossTileIDs=function(R,G){for(var I in G.indexedSymbolInstances)for(var W=0,te=G.indexedSymbolInstances[I];W<te.length;W+=1){var ee=te[W];delete this.usedCrossTileIDs[R][ee.crossTileID]}},Rf.prototype.removeStaleBuckets=function(R){var G=!1;for(var I in this.indexes){var W=this.indexes[I];for(var te in W)R[W[te].bucketInstanceId]||(this.removeBucketCrossTileIDs(I,W[te]),delete W[te],G=!0)}return G};var Wc=function(){this.layerIndexes={},this.crossTileIDs=new Ma,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Wc.prototype.addLayer=function(R,G,I){var W=this.layerIndexes[R.id];W===void 0&&(W=this.layerIndexes[R.id]=new Rf);var te=!1,ee={};W.handleWrapJump(I);for(var he=0,Se=G;he<Se.length;he+=1){var ze=Se[he],pt=ze.getBucket(R);!pt||R.id!==pt.layerIds[0]||(pt.bucketInstanceId||(pt.bucketInstanceId=++this.maxBucketInstanceId),W.addBucket(ze.tileID,pt,this.crossTileIDs)&&(te=!0),ee[pt.bucketInstanceId]=!0)}return W.removeStaleBuckets(ee)&&(te=!0),te},Wc.prototype.pruneUnusedLayers=function(R){var G={};R.forEach(function(W){G[W]=!0});for(var I in this.layerIndexes)G[I]||delete this.layerIndexes[I]};var dl=function(H,R){return n.emitValidationErrors(H,R&&R.filter(function(G){return G.identifier!=="source.canvas"}))},ff=n.pick(Li,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),$s=n.pick(Li,["setCenter","setZoom","setBearing","setPitch"]),ko=Ra(),eu=function(H){function R(G,I){var W=this;I===void 0&&(I={}),H.call(this),this.map=G,this.dispatcher=new V(vi(),this),this.imageManager=new M,this.imageManager.setEventedParent(this),this.glyphManager=new C(G._requestManager,I.localIdeographFontFamily),this.lineAtlas=new O(256,512),this.crossTileSymbolIndex=new Wc,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new n.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",n.getReferrer());var te=this;this._rtlTextPluginCallback=R.registerForPluginStateChange(function(ee){var he={pluginStatus:ee.pluginStatus,pluginURL:ee.pluginURL};te.dispatcher.broadcast("syncRTLPluginState",he,function(Se,ze){if(n.triggerPluginCompletionEvent(Se),ze){var pt=ze.every(function(gt){return gt});if(pt)for(var wt in te.sourceCaches)te.sourceCaches[wt].reload()}})}),this.on("data",function(ee){if(!(ee.dataType!=="source"||ee.sourceDataType!=="metadata")){var he=W.sourceCaches[ee.sourceId];if(he){var Se=he.getSource();if(!(!Se||!Se.vectorLayerIds))for(var ze in W._layers){var pt=W._layers[ze];pt.source===Se.id&&W._validateLayer(pt)}}}})}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.loadURL=function(I,W){var te=this;W===void 0&&(W={}),this.fire(new n.Event("dataloading",{dataType:"style"}));var ee=typeof W.validate=="boolean"?W.validate:!n.isMapboxURL(I);I=this.map._requestManager.normalizeStyleURL(I,W.accessToken);var he=this.map._requestManager.transformRequest(I,n.ResourceType.Style);this._request=n.getJSON(he,function(Se,ze){te._request=null,Se?te.fire(new n.ErrorEvent(Se)):ze&&te._load(ze,ee)})},R.prototype.loadJSON=function(I,W){var te=this;W===void 0&&(W={}),this.fire(new n.Event("dataloading",{dataType:"style"})),this._request=n.browser.frame(function(){te._request=null,te._load(I,W.validate!==!1)})},R.prototype.loadEmpty=function(){this.fire(new n.Event("dataloading",{dataType:"style"})),this._load(ko,!1)},R.prototype._load=function(I,W){if(!(W&&dl(this,n.validateStyle(I)))){this._loaded=!0,this.stylesheet=I;for(var te in I.sources)this.addSource(te,I.sources[te],{validate:!1});I.sprite?this._loadSprite(I.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(I.glyphs);var ee=ea(this.stylesheet.layers);this._order=ee.map(function(pt){return pt.id}),this._layers={},this._serializedLayers={};for(var he=0,Se=ee;he<Se.length;he+=1){var ze=Se[he];ze=n.createStyleLayer(ze),ze.setEventedParent(this,{layer:{id:ze.id}}),this._layers[ze.id]=ze,this._serializedLayers[ze.id]=ze.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new z(this.stylesheet.light),this.fire(new n.Event("data",{dataType:"style"})),this.fire(new n.Event("style.load"))}},R.prototype._loadSprite=function(I){var W=this;this._spriteRequest=_(I,this.map._requestManager,function(te,ee){if(W._spriteRequest=null,te)W.fire(new n.ErrorEvent(te));else if(ee)for(var he in ee)W.imageManager.addImage(he,ee[he]);W.imageManager.setLoaded(!0),W._availableImages=W.imageManager.listImages(),W.dispatcher.broadcast("setImages",W._availableImages),W.fire(new n.Event("data",{dataType:"style"}))})},R.prototype._validateLayer=function(I){var W=this.sourceCaches[I.source];if(W){var te=I.sourceLayer;if(te){var ee=W.getSource();(ee.type==="geojson"||ee.vectorLayerIds&&ee.vectorLayerIds.indexOf(te)===-1)&&this.fire(new n.ErrorEvent(new Error('Source layer "'+te+'" does not exist on source "'+ee.id+'" as specified by style layer "'+I.id+'"')))}}},R.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var I in this.sourceCaches)if(!this.sourceCaches[I].loaded())return!1;return!!this.imageManager.isLoaded()},R.prototype._serializeLayers=function(I){for(var W=[],te=0,ee=I;te<ee.length;te+=1){var he=ee[te],Se=this._layers[he];Se.type!=="custom"&&W.push(Se.serialize())}return W},R.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var I in this.sourceCaches)if(this.sourceCaches[I].hasTransition())return!0;for(var W in this._layers)if(this._layers[W].hasTransition())return!0;return!1},R.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},R.prototype.update=function(I){if(this._loaded){var W=this._changed;if(this._changed){var te=Object.keys(this._updatedLayers),ee=Object.keys(this._removedLayers);(te.length||ee.length)&&this._updateWorkerLayers(te,ee);for(var he in this._updatedSources){var Se=this._updatedSources[he];Se==="reload"?this._reloadSource(he):Se==="clear"&&this._clearSource(he)}this._updateTilesForChangedImages();for(var ze in this._updatedPaintProps)this._layers[ze].updateTransitions(I);this.light.updateTransitions(I),this._resetUpdates()}var pt={};for(var wt in this.sourceCaches){var gt=this.sourceCaches[wt];pt[wt]=gt.used,gt.used=!1}for(var Oe=0,$e=this._order;Oe<$e.length;Oe+=1){var st=$e[Oe],Tt=this._layers[st];Tt.recalculate(I,this._availableImages),!Tt.isHidden(I.zoom)&&Tt.source&&(this.sourceCaches[Tt.source].used=!0)}for(var Rt in pt){var Dt=this.sourceCaches[Rt];pt[Rt]!==Dt.used&&Dt.fire(new n.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Rt}))}this.light.recalculate(I),this.z=I.zoom,W&&this.fire(new n.Event("data",{dataType:"style"}))}},R.prototype._updateTilesForChangedImages=function(){var I=Object.keys(this._changedImages);if(I.length){for(var W in this.sourceCaches)this.sourceCaches[W].reloadTilesForDependencies(["icons","patterns"],I);this._changedImages={}}},R.prototype._updateWorkerLayers=function(I,W){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(I),removedIds:W})},R.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},R.prototype.setState=function(I){var W=this;if(this._checkLoaded(),dl(this,n.validateStyle(I)))return!1;I=n.clone$1(I),I.layers=ea(I.layers);var te=sn(this.serialize(),I).filter(function(he){return!(he.command in $s)});if(te.length===0)return!1;var ee=te.filter(function(he){return!(he.command in ff)});if(ee.length>0)throw new Error("Unimplemented: "+ee.map(function(he){return he.command}).join(", ")+".");return te.forEach(function(he){he.command!=="setTransition"&&W[he.command].apply(W,he.args)}),this.stylesheet=I,!0},R.prototype.addImage=function(I,W){if(this.getImage(I))return this.fire(new n.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(I,W),this._afterImageUpdated(I)},R.prototype.updateImage=function(I,W){this.imageManager.updateImage(I,W)},R.prototype.getImage=function(I){return this.imageManager.getImage(I)},R.prototype.removeImage=function(I){if(!this.getImage(I))return this.fire(new n.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(I),this._afterImageUpdated(I)},R.prototype._afterImageUpdated=function(I){this._availableImages=this.imageManager.listImages(),this._changedImages[I]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new n.Event("data",{dataType:"style"}))},R.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},R.prototype.addSource=function(I,W,te){var ee=this;if(te===void 0&&(te={}),this._checkLoaded(),this.sourceCaches[I]!==void 0)throw new Error("There is already a source with this ID");if(!W.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(W).join(", ")+".");var he=["vector","raster","geojson","video","image"],Se=he.indexOf(W.type)>=0;if(!(Se&&this._validate(n.validateStyle.source,"sources."+I,W,null,te))){this.map&&this.map._collectResourceTiming&&(W.collectResourceTiming=!0);var ze=this.sourceCaches[I]=new yr(I,W,this.dispatcher);ze.style=this,ze.setEventedParent(this,function(){return{isSourceLoaded:ee.loaded(),source:ze.serialize(),sourceId:I}}),ze.onAdd(this.map),this._changed=!0}},R.prototype.removeSource=function(I){if(this._checkLoaded(),this.sourceCaches[I]===void 0)throw new Error("There is no source with this ID");for(var W in this._layers)if(this._layers[W].source===I)return this.fire(new n.ErrorEvent(new Error('Source "'+I+'" cannot be removed while layer "'+W+'" is using it.')));var te=this.sourceCaches[I];delete this.sourceCaches[I],delete this._updatedSources[I],te.fire(new n.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:I})),te.setEventedParent(null),te.clearTiles(),te.onRemove&&te.onRemove(this.map),this._changed=!0},R.prototype.setGeoJSONSourceData=function(I,W){this._checkLoaded();var te=this.sourceCaches[I].getSource();te.setData(W),this._changed=!0},R.prototype.getSource=function(I){return this.sourceCaches[I]&&this.sourceCaches[I].getSource()},R.prototype.addLayer=function(I,W,te){te===void 0&&(te={}),this._checkLoaded();var ee=I.id;if(this.getLayer(ee)){this.fire(new n.ErrorEvent(new Error('Layer with id "'+ee+'" already exists on this map')));return}var he;if(I.type==="custom"){if(dl(this,n.validateCustomStyleLayer(I)))return;he=n.createStyleLayer(I)}else{if(typeof I.source=="object"&&(this.addSource(ee,I.source),I=n.clone$1(I),I=n.extend(I,{source:ee})),this._validate(n.validateStyle.layer,"layers."+ee,I,{arrayIndex:-1},te))return;he=n.createStyleLayer(I),this._validateLayer(he),he.setEventedParent(this,{layer:{id:ee}}),this._serializedLayers[he.id]=he.serialize()}var Se=W?this._order.indexOf(W):this._order.length;if(W&&Se===-1){this.fire(new n.ErrorEvent(new Error('Layer with id "'+W+'" does not exist on this map.')));return}if(this._order.splice(Se,0,ee),this._layerOrderChanged=!0,this._layers[ee]=he,this._removedLayers[ee]&&he.source&&he.type!=="custom"){var ze=this._removedLayers[ee];delete this._removedLayers[ee],ze.type!==he.type?this._updatedSources[he.source]="clear":(this._updatedSources[he.source]="reload",this.sourceCaches[he.source].pause())}this._updateLayer(he),he.onAdd&&he.onAdd(this.map)},R.prototype.moveLayer=function(I,W){this._checkLoaded(),this._changed=!0;var te=this._layers[I];if(!te){this.fire(new n.ErrorEvent(new Error("The layer '"+I+"' does not exist in the map's style and cannot be moved.")));return}if(I!==W){var ee=this._order.indexOf(I);this._order.splice(ee,1);var he=W?this._order.indexOf(W):this._order.length;if(W&&he===-1){this.fire(new n.ErrorEvent(new Error('Layer with id "'+W+'" does not exist on this map.')));return}this._order.splice(he,0,I),this._layerOrderChanged=!0}},R.prototype.removeLayer=function(I){this._checkLoaded();var W=this._layers[I];if(!W){this.fire(new n.ErrorEvent(new Error("The layer '"+I+"' does not exist in the map's style and cannot be removed.")));return}W.setEventedParent(null);var te=this._order.indexOf(I);this._order.splice(te,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[I]=W,delete this._layers[I],delete this._serializedLayers[I],delete this._updatedLayers[I],delete this._updatedPaintProps[I],W.onRemove&&W.onRemove(this.map)},R.prototype.getLayer=function(I){return this._layers[I]},R.prototype.hasLayer=function(I){return I in this._layers},R.prototype.setLayerZoomRange=function(I,W,te){this._checkLoaded();var ee=this.getLayer(I);if(!ee){this.fire(new n.ErrorEvent(new Error("The layer '"+I+"' does not exist in the map's style and cannot have zoom extent.")));return}ee.minzoom===W&&ee.maxzoom===te||(W!=null&&(ee.minzoom=W),te!=null&&(ee.maxzoom=te),this._updateLayer(ee))},R.prototype.setFilter=function(I,W,te){te===void 0&&(te={}),this._checkLoaded();var ee=this.getLayer(I);if(!ee){this.fire(new n.ErrorEvent(new Error("The layer '"+I+"' does not exist in the map's style and cannot be filtered.")));return}if(!n.deepEqual(ee.filter,W)){if(W==null){ee.filter=void 0,this._updateLayer(ee);return}this._validate(n.validateStyle.filter,"layers."+ee.id+".filter",W,null,te)||(ee.filter=n.clone$1(W),this._updateLayer(ee))}},R.prototype.getFilter=function(I){return n.clone$1(this.getLayer(I).filter)},R.prototype.setLayoutProperty=function(I,W,te,ee){ee===void 0&&(ee={}),this._checkLoaded();var he=this.getLayer(I);if(!he){this.fire(new n.ErrorEvent(new Error("The layer '"+I+"' does not exist in the map's style and cannot be styled.")));return}n.deepEqual(he.getLayoutProperty(W),te)||(he.setLayoutProperty(W,te,ee),this._updateLayer(he))},R.prototype.getLayoutProperty=function(I,W){var te=this.getLayer(I);if(!te){this.fire(new n.ErrorEvent(new Error("The layer '"+I+"' does not exist in the map's style.")));return}return te.getLayoutProperty(W)},R.prototype.setPaintProperty=function(I,W,te,ee){ee===void 0&&(ee={}),this._checkLoaded();var he=this.getLayer(I);if(!he){this.fire(new n.ErrorEvent(new Error("The layer '"+I+"' does not exist in the map's style and cannot be styled.")));return}if(!n.deepEqual(he.getPaintProperty(W),te)){var Se=he.setPaintProperty(W,te,ee);Se&&this._updateLayer(he),this._changed=!0,this._updatedPaintProps[I]=!0}},R.prototype.getPaintProperty=function(I,W){return this.getLayer(I).getPaintProperty(W)},R.prototype.setFeatureState=function(I,W){this._checkLoaded();var te=I.source,ee=I.sourceLayer,he=this.sourceCaches[te];if(he===void 0){this.fire(new n.ErrorEvent(new Error("The source '"+te+"' does not exist in the map's style.")));return}var Se=he.getSource().type;if(Se==="geojson"&&ee){this.fire(new n.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(Se==="vector"&&!ee){this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}I.id===void 0&&this.fire(new n.ErrorEvent(new Error("The feature id parameter must be provided."))),he.setFeatureState(ee,I.id,W)},R.prototype.removeFeatureState=function(I,W){this._checkLoaded();var te=I.source,ee=this.sourceCaches[te];if(ee===void 0){this.fire(new n.ErrorEvent(new Error("The source '"+te+"' does not exist in the map's style.")));return}var he=ee.getSource().type,Se=he==="vector"?I.sourceLayer:void 0;if(he==="vector"&&!Se){this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(W&&typeof I.id!="string"&&typeof I.id!="number"){this.fire(new n.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));return}ee.removeFeatureState(Se,I.id,W)},R.prototype.getFeatureState=function(I){this._checkLoaded();var W=I.source,te=I.sourceLayer,ee=this.sourceCaches[W];if(ee===void 0){this.fire(new n.ErrorEvent(new Error("The source '"+W+"' does not exist in the map's style.")));return}var he=ee.getSource().type;if(he==="vector"&&!te){this.fire(new n.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}return I.id===void 0&&this.fire(new n.ErrorEvent(new Error("The feature id parameter must be provided."))),ee.getFeatureState(te,I.id)},R.prototype.getTransition=function(){return n.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},R.prototype.serialize=function(){return n.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:n.mapObject(this.sourceCaches,function(I){return I.serialize()}),layers:this._serializeLayers(this._order)},function(I){return I!==void 0})},R.prototype._updateLayer=function(I){this._updatedLayers[I.id]=!0,I.source&&!this._updatedSources[I.source]&&this.sourceCaches[I.source].getSource().type!=="raster"&&(this._updatedSources[I.source]="reload",this.sourceCaches[I.source].pause()),this._changed=!0},R.prototype._flattenAndSortRenderedFeatures=function(I){for(var W=this,te=function(pn){return W._layers[pn].type==="fill-extrusion"},ee={},he=[],Se=this._order.length-1;Se>=0;Se--){var ze=this._order[Se];if(te(ze)){ee[ze]=Se;for(var pt=0,wt=I;pt<wt.length;pt+=1){var gt=wt[pt],Oe=gt[ze];if(Oe)for(var $e=0,st=Oe;$e<st.length;$e+=1){var Tt=st[$e];he.push(Tt)}}}}he.sort(function(pn,ai){return ai.intersectionZ-pn.intersectionZ});for(var Rt=[],Dt=this._order.length-1;Dt>=0;Dt--){var Xt=this._order[Dt];if(te(Xt))for(var Vt=he.length-1;Vt>=0;Vt--){var Ft=he[Vt].feature;if(ee[Ft.layer.id]<Dt)break;Rt.push(Ft),he.pop()}else for(var Zt=0,Pt=I;Zt<Pt.length;Zt+=1){var sr=Pt[Zt],xr=sr[Xt];if(xr)for(var Dr=0,un=xr;Dr<un.length;Dr+=1){var Xr=un[Dr];Rt.push(Xr.feature)}}}return Rt},R.prototype.queryRenderedFeatures=function(I,W,te){W&&W.filter&&this._validate(n.validateStyle.filter,"queryRenderedFeatures.filter",W.filter,null,W);var ee={};if(W&&W.layers){if(!Array.isArray(W.layers))return this.fire(new n.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var he=0,Se=W.layers;he<Se.length;he+=1){var ze=Se[he],pt=this._layers[ze];if(!pt)return this.fire(new n.ErrorEvent(new Error("The layer '"+ze+"' does not exist in the map's style and cannot be queried for features."))),[];ee[pt.source]=!0}}var wt=[];W.availableImages=this._availableImages;for(var gt in this.sourceCaches)W.layers&&!ee[gt]||wt.push(le(this.sourceCaches[gt],this._layers,this._serializedLayers,I,W,te));return this.placement&&wt.push(we(this._layers,this._serializedLayers,this.sourceCaches,I,W,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(wt)},R.prototype.querySourceFeatures=function(I,W){W&&W.filter&&this._validate(n.validateStyle.filter,"querySourceFeatures.filter",W.filter,null,W);var te=this.sourceCaches[I];return te?Re(te,W):[]},R.prototype.addSourceType=function(I,W,te){if(R.getSourceType(I))return te(new Error('A source type called "'+I+'" already exists.'));if(R.setSourceType(I,W),!W.workerSourceURL)return te(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:I,url:W.workerSourceURL},te)},R.prototype.getLight=function(){return this.light.getLight()},R.prototype.setLight=function(I,W){W===void 0&&(W={}),this._checkLoaded();var te=this.light.getLight(),ee=!1;for(var he in I)if(!n.deepEqual(I[he],te[he])){ee=!0;break}if(ee){var Se={now:n.browser.now(),transition:n.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(I,W),this.light.updateTransitions(Se)}},R.prototype._validate=function(I,W,te,ee,he){return he===void 0&&(he={}),he&&he.validate===!1?!1:dl(this,I.call(n.validateStyle,n.extend({key:W,style:this.serialize(),value:te,styleSpec:n.styleSpec},ee)))},R.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),n.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var I in this._layers){var W=this._layers[I];W.setEventedParent(null)}for(var te in this.sourceCaches)this.sourceCaches[te].clearTiles(),this.sourceCaches[te].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},R.prototype._clearSource=function(I){this.sourceCaches[I].clearTiles()},R.prototype._reloadSource=function(I){this.sourceCaches[I].resume(),this.sourceCaches[I].reload()},R.prototype._updateSources=function(I){for(var W in this.sourceCaches)this.sourceCaches[W].update(I)},R.prototype._generateCollisionBoxes=function(){for(var I in this.sourceCaches)this._reloadSource(I)},R.prototype._updatePlacement=function(I,W,te,ee,he){he===void 0&&(he=!1);for(var Se=!1,ze=!1,pt={},wt=0,gt=this._order;wt<gt.length;wt+=1){var Oe=gt[wt],$e=this._layers[Oe];if($e.type==="symbol"){if(!pt[$e.source]){var st=this.sourceCaches[$e.source];pt[$e.source]=st.getRenderableIds(!0).map(function(Zt){return st.getTileByID(Zt)}).sort(function(Zt,Pt){return Pt.tileID.overscaledZ-Zt.tileID.overscaledZ||(Zt.tileID.isLessThan(Pt.tileID)?-1:1)})}var Tt=this.crossTileSymbolIndex.addLayer($e,pt[$e.source],I.center.lng);Se=Se||Tt}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),he=he||this._layerOrderChanged||te===0,(he||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(n.browser.now(),I.zoom))&&(this.pauseablePlacement=new Ca(I,this._order,he,W,te,ee,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,pt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(n.browser.now()),ze=!0),Se&&this.pauseablePlacement.placement.setStale()),ze||Se)for(var Rt=0,Dt=this._order;Rt<Dt.length;Rt+=1){var Xt=Dt[Rt],Vt=this._layers[Xt];Vt.type==="symbol"&&this.placement.updateLayerOpacities(Vt,pt[Vt.source])}var Ft=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(n.browser.now());return Ft},R.prototype._releaseSymbolFadeTiles=function(){for(var I in this.sourceCaches)this.sourceCaches[I].releaseSymbolFadeTiles()},R.prototype.getImages=function(I,W,te){this.imageManager.getImages(W.icons,te),this._updateTilesForChangedImages();var ee=this.sourceCaches[W.source];ee&&ee.setDependencies(W.tileID.key,W.type,W.icons)},R.prototype.getGlyphs=function(I,W,te){this.glyphManager.getGlyphs(W.stacks,te)},R.prototype.getResource=function(I,W,te){return n.makeRequest(W,te)},R}(n.Evented);eu.getSourceType=xe,eu.setSourceType=ce,eu.registerForPluginStateChange=n.registerForPluginStateChange;var _u=n.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ah=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,Uu=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`,nv=`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ac="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",lo=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Df="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",Mh=`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Us=`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`,xs="void main() {gl_FragColor=vec4(1.0);}",Sh="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",cf=`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,To=`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`,vs=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,po="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",Co="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",Mc="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",qs="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",Vl="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",hf="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",_d="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",bu=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Wp=`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`,Hl=`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ho=`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Dv=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,vf=`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Gl=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,iv=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`,Eh=`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,av=`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`,wu=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Iv=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`,ov=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,kh="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",sv=`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,bd="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",Hd=`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,If=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Fv=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,oc=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Ch=`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Vu=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`,Sc=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ff=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`,qv=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,zv="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",Ov=`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,lv=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`,uv=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Bv=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`,tu=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,fv=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`,al=Oo(Ah,Uu),ru=Oo(nv,Ac),qf=Oo(lo,Df),Vs=Oo(Mh,Us),Xc=Oo(xs,Sh),zf=Oo(cf,To),Dl=Oo(vs,po),zs=Oo(Co,Mc),Gd=Oo(qs,Vl),Yd=Oo(hf,_d),Tu=Oo(bu,Wp),df=Oo(Hl,ho),nu=Oo(Dv,vf),Wd=Oo(Gl,iv),Zc=Oo(Eh,av),jc=Oo(wu,Iv),Au=Oo(ov,kh),Nv=Oo(sv,bd),cv=Oo(Hd,If),hv=Oo(Fv,oc),Uv=Oo(Ch,Vu),Kc=Oo(Sc,Ff),Of=Oo(qv,zv),Ec=Oo(Ov,lv),Lh=Oo(uv,Bv),wd=Oo(tu,fv);function Oo(H,R){var G=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,I=R.match(/attribute ([\w]+) ([\w]+)/g),W=H.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),te=R.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),ee=te?te.concat(W):W,he={};return H=H.replace(G,function(Se,ze,pt,wt,gt){return he[gt]=!0,ze==="define"?`
#ifndef HAS_UNIFORM_u_`+gt+`
varying `+pt+" "+wt+" "+gt+`;
#else
uniform `+pt+" "+wt+" u_"+gt+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+gt+`
    `+pt+" "+wt+" "+gt+" = u_"+gt+`;
#endif
`}),R=R.replace(G,function(Se,ze,pt,wt,gt){var Oe=wt==="float"?"vec2":"vec4",$e=gt.match(/color/)?"color":Oe;return he[gt]?ze==="define"?`
#ifndef HAS_UNIFORM_u_`+gt+`
uniform lowp float u_`+gt+`_t;
attribute `+pt+" "+Oe+" a_"+gt+`;
varying `+pt+" "+wt+" "+gt+`;
#else
uniform `+pt+" "+wt+" u_"+gt+`;
#endif
`:$e==="vec4"?`
#ifndef HAS_UNIFORM_u_`+gt+`
    `+gt+" = a_"+gt+`;
#else
    `+pt+" "+wt+" "+gt+" = u_"+gt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+gt+`
    `+gt+" = unpack_mix_"+$e+"(a_"+gt+", u_"+gt+`_t);
#else
    `+pt+" "+wt+" "+gt+" = u_"+gt+`;
#endif
`:ze==="define"?`
#ifndef HAS_UNIFORM_u_`+gt+`
uniform lowp float u_`+gt+`_t;
attribute `+pt+" "+Oe+" a_"+gt+`;
#else
uniform `+pt+" "+wt+" u_"+gt+`;
#endif
`:$e==="vec4"?`
#ifndef HAS_UNIFORM_u_`+gt+`
    `+pt+" "+wt+" "+gt+" = a_"+gt+`;
#else
    `+pt+" "+wt+" "+gt+" = u_"+gt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+gt+`
    `+pt+" "+wt+" "+gt+" = unpack_mix_"+$e+"(a_"+gt+", u_"+gt+`_t);
#else
    `+pt+" "+wt+" "+gt+" = u_"+gt+`;
#endif
`}),{fragmentSource:H,vertexSource:R,staticAttributes:I,staticUniforms:ee}}var Jc=Object.freeze({__proto__:null,prelude:al,background:ru,backgroundPattern:qf,circle:Vs,clippingMask:Xc,heatmap:zf,heatmapTexture:Dl,collisionBox:zs,collisionCircle:Gd,debug:Yd,fill:Tu,fillOutline:df,fillOutlinePattern:nu,fillPattern:Wd,fillExtrusion:Zc,fillExtrusionPattern:jc,hillshadePrepare:Au,hillshade:Nv,line:cv,lineGradient:hv,linePattern:Uv,lineSDF:Kc,raster:Of,symbolIcon:Ec,symbolSDF:Lh,symbolTextAndIcon:wd}),kc=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};kc.prototype.bind=function(R,G,I,W,te,ee,he,Se){this.context=R;for(var ze=this.boundPaintVertexBuffers.length!==W.length,pt=0;!ze&&pt<W.length;pt++)this.boundPaintVertexBuffers[pt]!==W[pt]&&(ze=!0);var wt=!this.vao||this.boundProgram!==G||this.boundLayoutVertexBuffer!==I||ze||this.boundIndexBuffer!==te||this.boundVertexOffset!==ee||this.boundDynamicVertexBuffer!==he||this.boundDynamicVertexBuffer2!==Se;!R.extVertexArrayObject||wt?this.freshBind(G,I,W,te,ee,he,Se):(R.bindVertexArrayOES.set(this.vao),he&&he.bind(),te&&te.dynamicDraw&&te.bind(),Se&&Se.bind())},kc.prototype.freshBind=function(R,G,I,W,te,ee,he){var Se,ze=R.numAttributes,pt=this.context,wt=pt.gl;if(pt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=pt.extVertexArrayObject.createVertexArrayOES(),pt.bindVertexArrayOES.set(this.vao),Se=0,this.boundProgram=R,this.boundLayoutVertexBuffer=G,this.boundPaintVertexBuffers=I,this.boundIndexBuffer=W,this.boundVertexOffset=te,this.boundDynamicVertexBuffer=ee,this.boundDynamicVertexBuffer2=he;else{Se=pt.currentNumAttributes||0;for(var gt=ze;gt<Se;gt++)wt.disableVertexAttribArray(gt)}G.enableAttributes(wt,R);for(var Oe=0,$e=I;Oe<$e.length;Oe+=1){var st=$e[Oe];st.enableAttributes(wt,R)}ee&&ee.enableAttributes(wt,R),he&&he.enableAttributes(wt,R),G.bind(),G.setVertexAttribPointers(wt,R,te);for(var Tt=0,Rt=I;Tt<Rt.length;Tt+=1){var Dt=Rt[Tt];Dt.bind(),Dt.setVertexAttribPointers(wt,R,te)}ee&&(ee.bind(),ee.setVertexAttribPointers(wt,R,te)),W&&W.bind(),he&&(he.bind(),he.setVertexAttribPointers(wt,R,te)),pt.currentNumAttributes=ze},kc.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};function Cc(H){for(var R=[],G=0;G<H.length;G++)if(H[G]!==null){var I=H[G].split(" ");R.push(I.pop())}return R}var Qc=function(R,G,I,W,te,ee){var he=R.gl;this.program=he.createProgram();for(var Se=Cc(I.staticAttributes),ze=W?W.getBinderAttributes():[],pt=Se.concat(ze),wt=I.staticUniforms?Cc(I.staticUniforms):[],gt=W?W.getBinderUniforms():[],Oe=wt.concat(gt),$e=[],st=0,Tt=Oe;st<Tt.length;st+=1){var Rt=Tt[st];$e.indexOf(Rt)<0&&$e.push(Rt)}var Dt=W?W.defines():[];ee&&Dt.push("#define OVERDRAW_INSPECTOR;");var Xt=Dt.concat(al.fragmentSource,I.fragmentSource).join(`
`),Vt=Dt.concat(al.vertexSource,I.vertexSource).join(`
`),Ft=he.createShader(he.FRAGMENT_SHADER);if(he.isContextLost()){this.failedToCreate=!0;return}he.shaderSource(Ft,Xt),he.compileShader(Ft),he.attachShader(this.program,Ft);var Zt=he.createShader(he.VERTEX_SHADER);if(he.isContextLost()){this.failedToCreate=!0;return}he.shaderSource(Zt,Vt),he.compileShader(Zt),he.attachShader(this.program,Zt),this.attributes={};var Pt={};this.numAttributes=pt.length;for(var sr=0;sr<this.numAttributes;sr++)pt[sr]&&(he.bindAttribLocation(this.program,sr,pt[sr]),this.attributes[pt[sr]]=sr);he.linkProgram(this.program),he.deleteShader(Zt),he.deleteShader(Ft);for(var xr=0;xr<$e.length;xr++){var Dr=$e[xr];if(Dr&&!Pt[Dr]){var un=he.getUniformLocation(this.program,Dr);un&&(Pt[Dr]=un)}}this.fixedUniforms=te(R,Pt),this.binderUniforms=W?W.getUniforms(R,Pt):[]};Qc.prototype.draw=function(R,G,I,W,te,ee,he,Se,ze,pt,wt,gt,Oe,$e,st,Tt){var Rt,Dt=R.gl;if(!this.failedToCreate){R.program.set(this.program),R.setDepthMode(I),R.setStencilMode(W),R.setColorMode(te),R.setCullFace(ee);for(var Xt in this.fixedUniforms)this.fixedUniforms[Xt].set(he[Xt]);$e&&$e.setUniforms(R,this.binderUniforms,gt,{zoom:Oe});for(var Vt=(Rt={},Rt[Dt.LINES]=2,Rt[Dt.TRIANGLES]=3,Rt[Dt.LINE_STRIP]=1,Rt)[G],Ft=0,Zt=wt.get();Ft<Zt.length;Ft+=1){var Pt=Zt[Ft],sr=Pt.vaos||(Pt.vaos={}),xr=sr[Se]||(sr[Se]=new kc);xr.bind(R,this,ze,$e?$e.getPaintVertexBuffers():[],pt,Pt.vertexOffset,st,Tt),Dt.drawElements(G,Pt.primitiveLength*Vt,Dt.UNSIGNED_SHORT,Pt.primitiveOffset*Vt*2)}}};function pf(H,R,G){var I=1/Eo(G,1,R.transform.tileZoom),W=Math.pow(2,G.tileID.overscaledZ),te=G.tileSize*Math.pow(2,R.transform.tileZoom)/W,ee=te*(G.tileID.canonical.x+G.tileID.wrap*W),he=te*G.tileID.canonical.y;return{u_image:0,u_texsize:G.imageAtlasTexture.size,u_scale:[I,H.fromScale,H.toScale],u_fade:H.t,u_pixel_coord_upper:[ee>>16,he>>16],u_pixel_coord_lower:[ee&65535,he&65535]}}function sc(H,R,G,I){var W=G.imageManager.getPattern(H.from.toString()),te=G.imageManager.getPattern(H.to.toString()),ee=G.imageManager.getPixelSize(),he=ee.width,Se=ee.height,ze=Math.pow(2,I.tileID.overscaledZ),pt=I.tileSize*Math.pow(2,G.transform.tileZoom)/ze,wt=pt*(I.tileID.canonical.x+I.tileID.wrap*ze),gt=pt*I.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:W.tl,u_pattern_br_a:W.br,u_pattern_tl_b:te.tl,u_pattern_br_b:te.br,u_texsize:[he,Se],u_mix:R.t,u_pattern_size_a:W.displaySize,u_pattern_size_b:te.displaySize,u_scale_a:R.fromScale,u_scale_b:R.toScale,u_tile_units_to_pixels:1/Eo(I,1,G.transform.tileZoom),u_pixel_coord_upper:[wt>>16,gt>>16],u_pixel_coord_lower:[wt&65535,gt&65535]}}var Vv=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_lightpos:new n.Uniform3f(H,R.u_lightpos),u_lightintensity:new n.Uniform1f(H,R.u_lightintensity),u_lightcolor:new n.Uniform3f(H,R.u_lightcolor),u_vertical_gradient:new n.Uniform1f(H,R.u_vertical_gradient),u_opacity:new n.Uniform1f(H,R.u_opacity)}},Hs=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_lightpos:new n.Uniform3f(H,R.u_lightpos),u_lightintensity:new n.Uniform1f(H,R.u_lightintensity),u_lightcolor:new n.Uniform3f(H,R.u_lightcolor),u_vertical_gradient:new n.Uniform1f(H,R.u_vertical_gradient),u_height_factor:new n.Uniform1f(H,R.u_height_factor),u_image:new n.Uniform1i(H,R.u_image),u_texsize:new n.Uniform2f(H,R.u_texsize),u_pixel_coord_upper:new n.Uniform2f(H,R.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(H,R.u_pixel_coord_lower),u_scale:new n.Uniform3f(H,R.u_scale),u_fade:new n.Uniform1f(H,R.u_fade),u_opacity:new n.Uniform1f(H,R.u_opacity)}},vv=function(H,R,G,I){var W=R.style.light,te=W.properties.get("position"),ee=[te.x,te.y,te.z],he=n.create$1();W.properties.get("anchor")==="viewport"&&n.fromRotation(he,-R.transform.angle),n.transformMat3(ee,ee,he);var Se=W.properties.get("color");return{u_matrix:H,u_lightpos:ee,u_lightintensity:W.properties.get("intensity"),u_lightcolor:[Se.r,Se.g,Se.b],u_vertical_gradient:+G,u_opacity:I}},Bf=function(H,R,G,I,W,te,ee){return n.extend(vv(H,R,G,I),pf(te,R,ee),{u_height_factor:-Math.pow(2,W.overscaledZ)/ee.tileSize/8})},Nf=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix)}},Uf=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_image:new n.Uniform1i(H,R.u_image),u_texsize:new n.Uniform2f(H,R.u_texsize),u_pixel_coord_upper:new n.Uniform2f(H,R.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(H,R.u_pixel_coord_lower),u_scale:new n.Uniform3f(H,R.u_scale),u_fade:new n.Uniform1f(H,R.u_fade)}},_s=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_world:new n.Uniform2f(H,R.u_world)}},pl=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_world:new n.Uniform2f(H,R.u_world),u_image:new n.Uniform1i(H,R.u_image),u_texsize:new n.Uniform2f(H,R.u_texsize),u_pixel_coord_upper:new n.Uniform2f(H,R.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(H,R.u_pixel_coord_lower),u_scale:new n.Uniform3f(H,R.u_scale),u_fade:new n.Uniform1f(H,R.u_fade)}},Hu=function(H){return{u_matrix:H}},Vf=function(H,R,G,I){return n.extend(Hu(H),pf(G,R,I))},Gu=function(H,R){return{u_matrix:H,u_world:R}},Ph=function(H,R,G,I,W){return n.extend(Vf(H,R,G,I),{u_world:W})},Ue=function(H,R){return{u_camera_to_center_distance:new n.Uniform1f(H,R.u_camera_to_center_distance),u_scale_with_map:new n.Uniform1i(H,R.u_scale_with_map),u_pitch_with_map:new n.Uniform1i(H,R.u_pitch_with_map),u_extrude_scale:new n.Uniform2f(H,R.u_extrude_scale),u_device_pixel_ratio:new n.Uniform1f(H,R.u_device_pixel_ratio),u_matrix:new n.UniformMatrix4f(H,R.u_matrix)}},at=function(H,R,G,I){var W=H.transform,te,ee;if(I.paint.get("circle-pitch-alignment")==="map"){var he=Eo(G,1,W.zoom);te=!0,ee=[he,he]}else te=!1,ee=W.pixelsToGLUnits;return{u_camera_to_center_distance:W.cameraToCenterDistance,u_scale_with_map:+(I.paint.get("circle-pitch-scale")==="map"),u_matrix:H.translatePosMatrix(R.posMatrix,G,I.paint.get("circle-translate"),I.paint.get("circle-translate-anchor")),u_pitch_with_map:+te,u_device_pixel_ratio:n.browser.devicePixelRatio,u_extrude_scale:ee}},Ht=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_camera_to_center_distance:new n.Uniform1f(H,R.u_camera_to_center_distance),u_pixels_to_tile_units:new n.Uniform1f(H,R.u_pixels_to_tile_units),u_extrude_scale:new n.Uniform2f(H,R.u_extrude_scale),u_overscale_factor:new n.Uniform1f(H,R.u_overscale_factor)}},It=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_inv_matrix:new n.UniformMatrix4f(H,R.u_inv_matrix),u_camera_to_center_distance:new n.Uniform1f(H,R.u_camera_to_center_distance),u_viewport_size:new n.Uniform2f(H,R.u_viewport_size)}},fr=function(H,R,G){var I=Eo(G,1,R.zoom),W=Math.pow(2,R.zoom-G.tileID.overscaledZ),te=G.tileID.overscaleFactor();return{u_matrix:H,u_camera_to_center_distance:R.cameraToCenterDistance,u_pixels_to_tile_units:I,u_extrude_scale:[R.pixelsToGLUnits[0]/(I*W),R.pixelsToGLUnits[1]/(I*W)],u_overscale_factor:te}},Lr=function(H,R,G){return{u_matrix:H,u_inv_matrix:R,u_camera_to_center_distance:G.cameraToCenterDistance,u_viewport_size:[G.width,G.height]}},qr=function(H,R){return{u_color:new n.UniformColor(H,R.u_color),u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_overlay:new n.Uniform1i(H,R.u_overlay),u_overlay_scale:new n.Uniform1f(H,R.u_overlay_scale)}},Zr=function(H,R,G){return G===void 0&&(G=1),{u_matrix:H,u_color:R,u_overlay:0,u_overlay_scale:G}},nn=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix)}},An=function(H){return{u_matrix:H}},Nr=function(H,R){return{u_extrude_scale:new n.Uniform1f(H,R.u_extrude_scale),u_intensity:new n.Uniform1f(H,R.u_intensity),u_matrix:new n.UniformMatrix4f(H,R.u_matrix)}},tn=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_world:new n.Uniform2f(H,R.u_world),u_image:new n.Uniform1i(H,R.u_image),u_color_ramp:new n.Uniform1i(H,R.u_color_ramp),u_opacity:new n.Uniform1f(H,R.u_opacity)}},rn=function(H,R,G,I){return{u_matrix:H,u_extrude_scale:Eo(R,1,G),u_intensity:I}},wn=function(H,R,G,I){var W=n.create();n.ortho(W,0,H.width,H.height,0,0,1);var te=H.context.gl;return{u_matrix:W,u_world:[te.drawingBufferWidth,te.drawingBufferHeight],u_image:G,u_color_ramp:I,u_opacity:R.paint.get("heatmap-opacity")}},Gn=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_image:new n.Uniform1i(H,R.u_image),u_latrange:new n.Uniform2f(H,R.u_latrange),u_light:new n.Uniform2f(H,R.u_light),u_shadow:new n.UniformColor(H,R.u_shadow),u_highlight:new n.UniformColor(H,R.u_highlight),u_accent:new n.UniformColor(H,R.u_accent)}},Oi=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_image:new n.Uniform1i(H,R.u_image),u_dimension:new n.Uniform2f(H,R.u_dimension),u_zoom:new n.Uniform1f(H,R.u_zoom),u_unpack:new n.Uniform4f(H,R.u_unpack)}},Ii=function(H,R,G){var I=G.paint.get("hillshade-shadow-color"),W=G.paint.get("hillshade-highlight-color"),te=G.paint.get("hillshade-accent-color"),ee=G.paint.get("hillshade-illumination-direction")*(Math.PI/180);G.paint.get("hillshade-illumination-anchor")==="viewport"&&(ee-=H.transform.angle);var he=!H.options.moving;return{u_matrix:H.transform.calculatePosMatrix(R.tileID.toUnwrapped(),he),u_image:0,u_latrange:Ki(H,R.tileID),u_light:[G.paint.get("hillshade-exaggeration"),ee],u_shadow:I,u_highlight:W,u_accent:te}},Hi=function(H,R){var G=R.stride,I=n.create();return n.ortho(I,0,n.EXTENT,-n.EXTENT,0,0,1),n.translate(I,I,[0,-n.EXTENT,0]),{u_matrix:I,u_image:1,u_dimension:[G,G],u_zoom:H.overscaledZ,u_unpack:R.getUnpackVector()}};function Ki(H,R){var G=Math.pow(2,R.canonical.z),I=R.canonical.y;return[new n.MercatorCoordinate(0,I/G).toLngLat().lat,new n.MercatorCoordinate(0,(I+1)/G).toLngLat().lat]}var On=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_ratio:new n.Uniform1f(H,R.u_ratio),u_device_pixel_ratio:new n.Uniform1f(H,R.u_device_pixel_ratio),u_units_to_pixels:new n.Uniform2f(H,R.u_units_to_pixels)}},$n=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_ratio:new n.Uniform1f(H,R.u_ratio),u_device_pixel_ratio:new n.Uniform1f(H,R.u_device_pixel_ratio),u_units_to_pixels:new n.Uniform2f(H,R.u_units_to_pixels),u_image:new n.Uniform1i(H,R.u_image),u_image_height:new n.Uniform1f(H,R.u_image_height)}},Ji=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_texsize:new n.Uniform2f(H,R.u_texsize),u_ratio:new n.Uniform1f(H,R.u_ratio),u_device_pixel_ratio:new n.Uniform1f(H,R.u_device_pixel_ratio),u_image:new n.Uniform1i(H,R.u_image),u_units_to_pixels:new n.Uniform2f(H,R.u_units_to_pixels),u_scale:new n.Uniform3f(H,R.u_scale),u_fade:new n.Uniform1f(H,R.u_fade)}},ca=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_ratio:new n.Uniform1f(H,R.u_ratio),u_device_pixel_ratio:new n.Uniform1f(H,R.u_device_pixel_ratio),u_units_to_pixels:new n.Uniform2f(H,R.u_units_to_pixels),u_patternscale_a:new n.Uniform2f(H,R.u_patternscale_a),u_patternscale_b:new n.Uniform2f(H,R.u_patternscale_b),u_sdfgamma:new n.Uniform1f(H,R.u_sdfgamma),u_image:new n.Uniform1i(H,R.u_image),u_tex_y_a:new n.Uniform1f(H,R.u_tex_y_a),u_tex_y_b:new n.Uniform1f(H,R.u_tex_y_b),u_mix:new n.Uniform1f(H,R.u_mix)}},Ka=function(H,R,G){var I=H.transform;return{u_matrix:bs(H,R,G),u_ratio:1/Eo(R,1,I.zoom),u_device_pixel_ratio:n.browser.devicePixelRatio,u_units_to_pixels:[1/I.pixelsToGLUnits[0],1/I.pixelsToGLUnits[1]]}},mo=function(H,R,G,I){return n.extend(Ka(H,R,G),{u_image:0,u_image_height:I})},vo=function(H,R,G,I){var W=H.transform,te=Na(R,W);return{u_matrix:bs(H,R,G),u_texsize:R.imageAtlasTexture.size,u_ratio:1/Eo(R,1,W.zoom),u_device_pixel_ratio:n.browser.devicePixelRatio,u_image:0,u_scale:[te,I.fromScale,I.toScale],u_fade:I.t,u_units_to_pixels:[1/W.pixelsToGLUnits[0],1/W.pixelsToGLUnits[1]]}},xo=function(H,R,G,I,W){var te=H.transform,ee=H.lineAtlas,he=Na(R,te),Se=G.layout.get("line-cap")==="round",ze=ee.getDash(I.from,Se),pt=ee.getDash(I.to,Se),wt=ze.width*W.fromScale,gt=pt.width*W.toScale;return n.extend(Ka(H,R,G),{u_patternscale_a:[he/wt,-ze.height/2],u_patternscale_b:[he/gt,-pt.height/2],u_sdfgamma:ee.width/(Math.min(wt,gt)*256*n.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:ze.y,u_tex_y_b:pt.y,u_mix:W.t})};function Na(H,R){return 1/Eo(H,1,R.tileZoom)}function bs(H,R,G){return H.translatePosMatrix(R.tileID.posMatrix,R,G.paint.get("line-translate"),G.paint.get("line-translate-anchor"))}var Zo=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_tl_parent:new n.Uniform2f(H,R.u_tl_parent),u_scale_parent:new n.Uniform1f(H,R.u_scale_parent),u_buffer_scale:new n.Uniform1f(H,R.u_buffer_scale),u_fade_t:new n.Uniform1f(H,R.u_fade_t),u_opacity:new n.Uniform1f(H,R.u_opacity),u_image0:new n.Uniform1i(H,R.u_image0),u_image1:new n.Uniform1i(H,R.u_image1),u_brightness_low:new n.Uniform1f(H,R.u_brightness_low),u_brightness_high:new n.Uniform1f(H,R.u_brightness_high),u_saturation_factor:new n.Uniform1f(H,R.u_saturation_factor),u_contrast_factor:new n.Uniform1f(H,R.u_contrast_factor),u_spin_weights:new n.Uniform3f(H,R.u_spin_weights)}},Bo=function(H,R,G,I,W){return{u_matrix:H,u_tl_parent:R,u_scale_parent:G,u_buffer_scale:1,u_fade_t:I.mix,u_opacity:I.opacity*W.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:W.paint.get("raster-brightness-min"),u_brightness_high:W.paint.get("raster-brightness-max"),u_saturation_factor:ws(W.paint.get("raster-saturation")),u_contrast_factor:ta(W.paint.get("raster-contrast")),u_spin_weights:hi(W.paint.get("raster-hue-rotate"))}};function hi(H){H*=Math.PI/180;var R=Math.sin(H),G=Math.cos(H);return[(2*G+1)/3,(-Math.sqrt(3)*R-G+1)/3,(Math.sqrt(3)*R-G+1)/3]}function ta(H){return H>0?1/(1-H):1+H}function ws(H){return H>0?1-1/(1.001-H):-H}var Ml=function(H,R){return{u_is_size_zoom_constant:new n.Uniform1i(H,R.u_is_size_zoom_constant),u_is_size_feature_constant:new n.Uniform1i(H,R.u_is_size_feature_constant),u_size_t:new n.Uniform1f(H,R.u_size_t),u_size:new n.Uniform1f(H,R.u_size),u_camera_to_center_distance:new n.Uniform1f(H,R.u_camera_to_center_distance),u_pitch:new n.Uniform1f(H,R.u_pitch),u_rotate_symbol:new n.Uniform1i(H,R.u_rotate_symbol),u_aspect_ratio:new n.Uniform1f(H,R.u_aspect_ratio),u_fade_change:new n.Uniform1f(H,R.u_fade_change),u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_label_plane_matrix:new n.UniformMatrix4f(H,R.u_label_plane_matrix),u_coord_matrix:new n.UniformMatrix4f(H,R.u_coord_matrix),u_is_text:new n.Uniform1i(H,R.u_is_text),u_pitch_with_map:new n.Uniform1i(H,R.u_pitch_with_map),u_texsize:new n.Uniform2f(H,R.u_texsize),u_texture:new n.Uniform1i(H,R.u_texture)}},Yl=function(H,R){return{u_is_size_zoom_constant:new n.Uniform1i(H,R.u_is_size_zoom_constant),u_is_size_feature_constant:new n.Uniform1i(H,R.u_is_size_feature_constant),u_size_t:new n.Uniform1f(H,R.u_size_t),u_size:new n.Uniform1f(H,R.u_size),u_camera_to_center_distance:new n.Uniform1f(H,R.u_camera_to_center_distance),u_pitch:new n.Uniform1f(H,R.u_pitch),u_rotate_symbol:new n.Uniform1i(H,R.u_rotate_symbol),u_aspect_ratio:new n.Uniform1f(H,R.u_aspect_ratio),u_fade_change:new n.Uniform1f(H,R.u_fade_change),u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_label_plane_matrix:new n.UniformMatrix4f(H,R.u_label_plane_matrix),u_coord_matrix:new n.UniformMatrix4f(H,R.u_coord_matrix),u_is_text:new n.Uniform1i(H,R.u_is_text),u_pitch_with_map:new n.Uniform1i(H,R.u_pitch_with_map),u_texsize:new n.Uniform2f(H,R.u_texsize),u_texture:new n.Uniform1i(H,R.u_texture),u_gamma_scale:new n.Uniform1f(H,R.u_gamma_scale),u_device_pixel_ratio:new n.Uniform1f(H,R.u_device_pixel_ratio),u_is_halo:new n.Uniform1i(H,R.u_is_halo)}},iu=function(H,R){return{u_is_size_zoom_constant:new n.Uniform1i(H,R.u_is_size_zoom_constant),u_is_size_feature_constant:new n.Uniform1i(H,R.u_is_size_feature_constant),u_size_t:new n.Uniform1f(H,R.u_size_t),u_size:new n.Uniform1f(H,R.u_size),u_camera_to_center_distance:new n.Uniform1f(H,R.u_camera_to_center_distance),u_pitch:new n.Uniform1f(H,R.u_pitch),u_rotate_symbol:new n.Uniform1i(H,R.u_rotate_symbol),u_aspect_ratio:new n.Uniform1f(H,R.u_aspect_ratio),u_fade_change:new n.Uniform1f(H,R.u_fade_change),u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_label_plane_matrix:new n.UniformMatrix4f(H,R.u_label_plane_matrix),u_coord_matrix:new n.UniformMatrix4f(H,R.u_coord_matrix),u_is_text:new n.Uniform1i(H,R.u_is_text),u_pitch_with_map:new n.Uniform1i(H,R.u_pitch_with_map),u_texsize:new n.Uniform2f(H,R.u_texsize),u_texsize_icon:new n.Uniform2f(H,R.u_texsize_icon),u_texture:new n.Uniform1i(H,R.u_texture),u_texture_icon:new n.Uniform1i(H,R.u_texture_icon),u_gamma_scale:new n.Uniform1f(H,R.u_gamma_scale),u_device_pixel_ratio:new n.Uniform1f(H,R.u_device_pixel_ratio),u_is_halo:new n.Uniform1i(H,R.u_is_halo)}},Yu=function(H,R,G,I,W,te,ee,he,Se,ze){var pt=W.transform;return{u_is_size_zoom_constant:+(H==="constant"||H==="source"),u_is_size_feature_constant:+(H==="constant"||H==="camera"),u_size_t:R?R.uSizeT:0,u_size:R?R.uSize:0,u_camera_to_center_distance:pt.cameraToCenterDistance,u_pitch:pt.pitch/360*2*Math.PI,u_rotate_symbol:+G,u_aspect_ratio:pt.width/pt.height,u_fade_change:W.options.fadeDuration?W.symbolFadeChange:1,u_matrix:te,u_label_plane_matrix:ee,u_coord_matrix:he,u_is_text:+Se,u_pitch_with_map:+I,u_texsize:ze,u_texture:0}},Hf=function(H,R,G,I,W,te,ee,he,Se,ze,pt){var wt=W.transform;return n.extend(Yu(H,R,G,I,W,te,ee,he,Se,ze),{u_gamma_scale:I?Math.cos(wt._pitch)*wt.cameraToCenterDistance:1,u_device_pixel_ratio:n.browser.devicePixelRatio,u_is_halo:+pt})},au=function(H,R,G,I,W,te,ee,he,Se,ze){return n.extend(Hf(H,R,G,I,W,te,ee,he,!0,Se,!0),{u_texsize_icon:ze,u_texture_icon:1})},Lc=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_opacity:new n.Uniform1f(H,R.u_opacity),u_color:new n.UniformColor(H,R.u_color)}},Pc=function(H,R){return{u_matrix:new n.UniformMatrix4f(H,R.u_matrix),u_opacity:new n.Uniform1f(H,R.u_opacity),u_image:new n.Uniform1i(H,R.u_image),u_pattern_tl_a:new n.Uniform2f(H,R.u_pattern_tl_a),u_pattern_br_a:new n.Uniform2f(H,R.u_pattern_br_a),u_pattern_tl_b:new n.Uniform2f(H,R.u_pattern_tl_b),u_pattern_br_b:new n.Uniform2f(H,R.u_pattern_br_b),u_texsize:new n.Uniform2f(H,R.u_texsize),u_mix:new n.Uniform1f(H,R.u_mix),u_pattern_size_a:new n.Uniform2f(H,R.u_pattern_size_a),u_pattern_size_b:new n.Uniform2f(H,R.u_pattern_size_b),u_scale_a:new n.Uniform1f(H,R.u_scale_a),u_scale_b:new n.Uniform1f(H,R.u_scale_b),u_pixel_coord_upper:new n.Uniform2f(H,R.u_pixel_coord_upper),u_pixel_coord_lower:new n.Uniform2f(H,R.u_pixel_coord_lower),u_tile_units_to_pixels:new n.Uniform1f(H,R.u_tile_units_to_pixels)}},lc=function(H,R,G){return{u_matrix:H,u_opacity:R,u_color:G}},Rh=function(H,R,G,I,W,te){return n.extend(sc(I,te,G,W),{u_matrix:H,u_opacity:R})},$c={fillExtrusion:Vv,fillExtrusionPattern:Hs,fill:Nf,fillPattern:Uf,fillOutline:_s,fillOutlinePattern:pl,circle:Ue,collisionBox:Ht,collisionCircle:It,debug:qr,clippingMask:nn,heatmap:Nr,heatmapTexture:tn,hillshade:Gn,hillshadePrepare:Oi,line:On,lineGradient:$n,linePattern:Ji,lineSDF:ca,raster:Zo,symbolIcon:Ml,symbolSDF:Yl,symbolTextAndIcon:iu,background:Lc,backgroundPattern:Pc},uc;function gf(H,R,G,I,W,te,ee){for(var he=H.context,Se=he.gl,ze=H.useProgram("collisionBox"),pt=[],wt=0,gt=0,Oe=0;Oe<I.length;Oe++){var $e=I[Oe],st=R.getTile($e),Tt=st.getBucket(G);if(Tt){var Rt=$e.posMatrix;(W[0]!==0||W[1]!==0)&&(Rt=H.translatePosMatrix($e.posMatrix,st,W,te));var Dt=ee?Tt.textCollisionBox:Tt.iconCollisionBox,Xt=Tt.collisionCircleArray;if(Xt.length>0){var Vt=n.create(),Ft=Rt;n.mul(Vt,Tt.placementInvProjMatrix,H.transform.glCoordMatrix),n.mul(Vt,Vt,Tt.placementViewportMatrix),pt.push({circleArray:Xt,circleOffset:gt,transform:Ft,invTransform:Vt}),wt+=Xt.length/4,gt=wt}Dt&&ze.draw(he,Se.LINES,mn.disabled,si.disabled,H.colorModeForRenderPass(),Nt.disabled,fr(Rt,H.transform,st),G.id,Dt.layoutVertexBuffer,Dt.indexBuffer,Dt.segments,null,H.transform.zoom,null,null,Dt.collisionVertexBuffer)}}if(!(!ee||!pt.length)){var Zt=H.useProgram("collisionCircle"),Pt=new n.StructArrayLayout2f1f2i16;Pt.resize(wt*4),Pt._trim();for(var sr=0,xr=0,Dr=pt;xr<Dr.length;xr+=1)for(var un=Dr[xr],Xr=0;Xr<un.circleArray.length/4;Xr++){var pn=Xr*4,ai=un.circleArray[pn+0],Nn=un.circleArray[pn+1],fn=un.circleArray[pn+2],Ln=un.circleArray[pn+3];Pt.emplace(sr++,ai,Nn,fn,Ln,0),Pt.emplace(sr++,ai,Nn,fn,Ln,1),Pt.emplace(sr++,ai,Nn,fn,Ln,2),Pt.emplace(sr++,ai,Nn,fn,Ln,3)}(!uc||uc.length<wt*2)&&(uc=Wu(wt));for(var Mn=he.createIndexBuffer(uc,!0),Kn=he.createVertexBuffer(Pt,n.collisionCircleLayout.members,!0),xi=0,Da=pt;xi<Da.length;xi+=1){var Pa=Da[xi],_o=Lr(Pa.transform,Pa.invTransform,H.transform);Zt.draw(he,Se.TRIANGLES,mn.disabled,si.disabled,H.colorModeForRenderPass(),Nt.disabled,_o,G.id,Kn,Mn,n.SegmentVector.simpleSegment(0,Pa.circleOffset*2,Pa.circleArray.length,Pa.circleArray.length/2),null,H.transform.zoom,null,null,null)}Kn.destroy(),Mn.destroy()}}function Wu(H){var R=H*2,G=new n.StructArrayLayout3ui6;G.resize(R),G._trim();for(var I=0;I<R;I++){var W=I*6;G.uint16[W+0]=I*4+0,G.uint16[W+1]=I*4+1,G.uint16[W+2]=I*4+2,G.uint16[W+3]=I*4+2,G.uint16[W+4]=I*4+3,G.uint16[W+5]=I*4+0}return G}var Dh=n.identity(new Float32Array(16));function Hv(H,R,G,I,W){if(H.renderPass==="translucent"){var te=si.disabled,ee=H.colorModeForRenderPass(),he=G.layout.get("text-variable-anchor");he&&Gv(I,H,G,R,G.layout.get("text-rotation-alignment"),G.layout.get("text-pitch-alignment"),W),G.paint.get("icon-opacity").constantOr(1)!==0&&eh(H,R,G,I,!1,G.paint.get("icon-translate"),G.paint.get("icon-translate-anchor"),G.layout.get("icon-rotation-alignment"),G.layout.get("icon-pitch-alignment"),G.layout.get("icon-keep-upright"),te,ee),G.paint.get("text-opacity").constantOr(1)!==0&&eh(H,R,G,I,!0,G.paint.get("text-translate"),G.paint.get("text-translate-anchor"),G.layout.get("text-rotation-alignment"),G.layout.get("text-pitch-alignment"),G.layout.get("text-keep-upright"),te,ee),R.map.showCollisionBoxes&&(gf(H,R,G,I,G.paint.get("text-translate"),G.paint.get("text-translate-anchor"),!0),gf(H,R,G,I,G.paint.get("icon-translate"),G.paint.get("icon-translate-anchor"),!1))}}function Ih(H,R,G,I,W,te){var ee=n.getAnchorAlignment(H),he=ee.horizontalAlign,Se=ee.verticalAlign,ze=-(he-.5)*R,pt=-(Se-.5)*G,wt=n.evaluateVariableOffset(H,I);return new n.Point((ze/W+wt[0])*te,(pt/W+wt[1])*te)}function Gv(H,R,G,I,W,te,ee){for(var he=R.transform,Se=W==="map",ze=te==="map",pt=0,wt=H;pt<wt.length;pt+=1){var gt=wt[pt],Oe=I.getTile(gt),$e=Oe.getBucket(G);if(!(!$e||!$e.text||!$e.text.segments.get().length)){var st=$e.textSizeData,Tt=n.evaluateSizeForZoom(st,he.zoom),Rt=Eo(Oe,1,R.transform.zoom),Dt=hn(gt.posMatrix,ze,Se,R.transform,Rt),Xt=G.layout.get("icon-text-fit")!=="none"&&$e.hasIconData();if(Tt){var Vt=Math.pow(2,he.zoom-Oe.tileID.overscaledZ);Rc($e,Se,ze,ee,n.symbolSize,he,Dt,gt.posMatrix,Vt,Tt,Xt)}}}}function Rc(H,R,G,I,W,te,ee,he,Se,ze,pt){var wt=H.text.placedSymbolArray,gt=H.text.dynamicLayoutVertexArray,Oe=H.icon.dynamicLayoutVertexArray,$e={};gt.clear();for(var st=0;st<wt.length;st++){var Tt=wt.get(st),Rt=H.allowVerticalPlacement&&!Tt.placedOrientation,Dt=!Tt.hidden&&Tt.crossTileID&&!Rt?I[Tt.crossTileID]:null;if(!Dt)as(Tt.numGlyphs,gt);else{var Xt=new n.Point(Tt.anchorX,Tt.anchorY),Vt=Hn(Xt,G?he:ee),Ft=qi(te.cameraToCenterDistance,Vt.signedDistanceFromCamera),Zt=W.evaluateSizeForFeature(H.textSizeData,ze,Tt)*Ft/n.ONE_EM;G&&(Zt*=H.tilePixelRatio/Se);for(var Pt=Dt.width,sr=Dt.height,xr=Dt.anchor,Dr=Dt.textOffset,un=Dt.textBoxScale,Xr=Ih(xr,Pt,sr,Dr,un,Zt),pn=G?Hn(Xt.add(Xr),ee).point:Vt.point.add(R?Xr.rotate(-te.angle):Xr),ai=H.allowVerticalPlacement&&Tt.placedOrientation===n.WritingMode.vertical?Math.PI/2:0,Nn=0;Nn<Tt.numGlyphs;Nn++)n.addDynamicAttributes(gt,pn,ai);pt&&Tt.associatedIconIndex>=0&&($e[Tt.associatedIconIndex]={shiftedAnchor:pn,angle:ai})}}if(pt){Oe.clear();for(var fn=H.icon.placedSymbolArray,Ln=0;Ln<fn.length;Ln++){var Mn=fn.get(Ln);if(Mn.hidden)as(Mn.numGlyphs,Oe);else{var Kn=$e[Ln];if(!Kn)as(Mn.numGlyphs,Oe);else for(var xi=0;xi<Mn.numGlyphs;xi++)n.addDynamicAttributes(Oe,Kn.shiftedAnchor,Kn.angle)}}H.icon.dynamicLayoutVertexBuffer.updateData(Oe)}H.text.dynamicLayoutVertexBuffer.updateData(gt)}function Mu(H,R,G){return G.iconsInText&&R?"symbolTextAndIcon":H?"symbolSDF":"symbolIcon"}function eh(H,R,G,I,W,te,ee,he,Se,ze,pt,wt){for(var gt=H.context,Oe=gt.gl,$e=H.transform,st=he==="map",Tt=Se==="map",Rt=st&&G.layout.get("symbol-placement")!=="point",Dt=st&&!Tt&&!Rt,Xt=G.layout.get("symbol-sort-key").constantOr(1)!==void 0,Vt=!1,Ft=H.depthModeForSublayer(0,mn.ReadOnly),Zt=G.layout.get("text-variable-anchor"),Pt=[],sr=0,xr=I;sr<xr.length;sr+=1){var Dr=xr[sr],un=R.getTile(Dr),Xr=un.getBucket(G);if(Xr){var pn=W?Xr.text:Xr.icon;if(!(!pn||!pn.segments.get().length)){var ai=pn.programConfigurations.get(G.id),Nn=W||Xr.sdfIcons,fn=W?Xr.textSizeData:Xr.iconSizeData,Ln=Tt||$e.pitch!==0,Mn=H.useProgram(Mu(Nn,W,Xr),ai),Kn=n.evaluateSizeForZoom(fn,$e.zoom),xi=void 0,Da=[0,0],Pa=void 0,_o=void 0,ua=null,Qa=void 0;if(W){if(Pa=un.glyphAtlasTexture,_o=Oe.LINEAR,xi=un.glyphAtlasTexture.size,Xr.iconsInText){Da=un.imageAtlasTexture.size,ua=un.imageAtlasTexture;var Vo=fn.kind==="composite"||fn.kind==="camera";Qa=Ln||H.options.rotating||H.options.zooming||Vo?Oe.LINEAR:Oe.NEAREST}}else{var ml=G.layout.get("icon-size").constantOr(0)!==1||Xr.iconsNeedLinear;Pa=un.imageAtlasTexture,_o=Nn||H.options.rotating||H.options.zooming||ml||Ln?Oe.LINEAR:Oe.NEAREST,xi=un.imageAtlasTexture.size}var Wv=Eo(un,1,H.transform.zoom),Xv=hn(Dr.posMatrix,Tt,st,H.transform,Wv),Td=gi(Dr.posMatrix,Tt,st,H.transform,Wv),Xd=Zt&&Xr.hasTextData(),Mg=G.layout.get("icon-text-fit")!=="none"&&Xd&&Xr.hasIconData();Rt&&eo(Xr,Dr.posMatrix,H,W,Xv,Td,Tt,ze);var Zd=H.translatePosMatrix(Dr.posMatrix,un,te,ee),nh=Rt||W&&Zt||Mg?Dh:Xv,jd=H.translatePosMatrix(Td,un,te,ee,!0),zh=Nn&&G.paint.get(W?"text-halo-width":"icon-halo-width").constantOr(1)!==0,ih=void 0;Nn?Xr.iconsInText?ih=au(fn.kind,Kn,Dt,Tt,H,Zd,nh,jd,xi,Da):ih=Hf(fn.kind,Kn,Dt,Tt,H,Zd,nh,jd,W,xi,!0):ih=Yu(fn.kind,Kn,Dt,Tt,H,Zd,nh,jd,W,xi);var Ad={program:Mn,buffers:pn,uniformValues:ih,atlasTexture:Pa,atlasTextureIcon:ua,atlasInterpolation:_o,atlasInterpolationIcon:Qa,isSDF:Nn,hasHalo:zh};if(Xt&&Xr.canOverlap){Vt=!0;for(var Xp=pn.segments.get(),Md=0,bb=Xp;Md<bb.length;Md+=1){var Fy=bb[Md];Pt.push({segments:new n.SegmentVector([Fy]),sortKey:Fy.sortKey,state:Ad})}}else Pt.push({segments:pn.segments,sortKey:0,state:Ad})}}}Vt&&Pt.sort(function(Tb,Ab){return Tb.sortKey-Ab.sortKey});for(var mf=0,wb=Pt;mf<wb.length;mf+=1){var G1=wb[mf],Dc=G1.state;if(gt.activeTexture.set(Oe.TEXTURE0),Dc.atlasTexture.bind(Dc.atlasInterpolation,Oe.CLAMP_TO_EDGE),Dc.atlasTextureIcon&&(gt.activeTexture.set(Oe.TEXTURE1),Dc.atlasTextureIcon&&Dc.atlasTextureIcon.bind(Dc.atlasInterpolationIcon,Oe.CLAMP_TO_EDGE)),Dc.isSDF){var qy=Dc.uniformValues;Dc.hasHalo&&(qy.u_is_halo=1,th(Dc.buffers,G1.segments,G,H,Dc.program,Ft,pt,wt,qy)),qy.u_is_halo=0}th(Dc.buffers,G1.segments,G,H,Dc.program,Ft,pt,wt,Dc.uniformValues)}}function th(H,R,G,I,W,te,ee,he,Se){var ze=I.context,pt=ze.gl;W.draw(ze,pt.TRIANGLES,te,ee,he,Nt.disabled,Se,G.id,H.layoutVertexBuffer,H.indexBuffer,R,G.paint,I.transform.zoom,H.programConfigurations.get(G.id),H.dynamicLayoutVertexBuffer,H.opacityVertexBuffer)}function rh(H,R,G,I){if(H.renderPass==="translucent"){var W=G.paint.get("circle-opacity"),te=G.paint.get("circle-stroke-width"),ee=G.paint.get("circle-stroke-opacity"),he=G.layout.get("circle-sort-key").constantOr(1)!==void 0;if(!(W.constantOr(1)===0&&(te.constantOr(1)===0||ee.constantOr(1)===0))){for(var Se=H.context,ze=Se.gl,pt=H.depthModeForSublayer(0,mn.ReadOnly),wt=si.disabled,gt=H.colorModeForRenderPass(),Oe=[],$e=0;$e<I.length;$e++){var st=I[$e],Tt=R.getTile(st),Rt=Tt.getBucket(G);if(Rt){var Dt=Rt.programConfigurations.get(G.id),Xt=H.useProgram("circle",Dt),Vt=Rt.layoutVertexBuffer,Ft=Rt.indexBuffer,Zt=at(H,st,Tt,G),Pt={programConfiguration:Dt,program:Xt,layoutVertexBuffer:Vt,indexBuffer:Ft,uniformValues:Zt};if(he)for(var sr=Rt.segments.get(),xr=0,Dr=sr;xr<Dr.length;xr+=1){var un=Dr[xr];Oe.push({segments:new n.SegmentVector([un]),sortKey:un.sortKey,state:Pt})}else Oe.push({segments:Rt.segments,sortKey:0,state:Pt})}}he&&Oe.sort(function(Pa,_o){return Pa.sortKey-_o.sortKey});for(var Xr=0,pn=Oe;Xr<pn.length;Xr+=1){var ai=pn[Xr],Nn=ai.state,fn=Nn.programConfiguration,Ln=Nn.program,Mn=Nn.layoutVertexBuffer,Kn=Nn.indexBuffer,xi=Nn.uniformValues,Da=ai.segments;Ln.draw(Se,ze.TRIANGLES,pt,wt,gt,Nt.disabled,xi,G.id,Mn,Kn,Da,G.paint,H.transform.zoom,fn)}}}}function Gf(H,R,G,I){if(G.paint.get("heatmap-opacity")!==0)if(H.renderPass==="offscreen"){var W=H.context,te=W.gl,ee=si.disabled,he=new Be([te.ONE,te.ONE],n.Color.transparent,[!0,!0,!0,!0]);Fh(W,H,G),W.clear({color:n.Color.transparent});for(var Se=0;Se<I.length;Se++){var ze=I[Se];if(!R.hasRenderableParent(ze)){var pt=R.getTile(ze),wt=pt.getBucket(G);if(wt){var gt=wt.programConfigurations.get(G.id),Oe=H.useProgram("heatmap",gt),$e=H.transform,st=$e.zoom;Oe.draw(W,te.TRIANGLES,mn.disabled,ee,he,Nt.disabled,rn(ze.posMatrix,pt,st,G.paint.get("heatmap-intensity")),G.id,wt.layoutVertexBuffer,wt.indexBuffer,wt.segments,G.paint,H.transform.zoom,gt)}}}W.viewport.set([0,0,H.width,H.height])}else H.renderPass==="translucent"&&(H.context.setColorMode(H.colorModeForRenderPass()),qh(H,G))}function Fh(H,R,G){var I=H.gl;H.activeTexture.set(I.TEXTURE1),H.viewport.set([0,0,R.width/4,R.height/4]);var W=G.heatmapFbo;if(W)I.bindTexture(I.TEXTURE_2D,W.colorAttachment.get()),H.bindFramebuffer.set(W.framebuffer);else{var te=I.createTexture();I.bindTexture(I.TEXTURE_2D,te),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,I.CLAMP_TO_EDGE),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,I.CLAMP_TO_EDGE),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.LINEAR),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.LINEAR),W=G.heatmapFbo=H.createFramebuffer(R.width/4,R.height/4,!1),Yv(H,R,te,W)}}function Yv(H,R,G,I){var W=H.gl,te=H.extRenderToTextureHalfFloat?H.extTextureHalfFloat.HALF_FLOAT_OES:W.UNSIGNED_BYTE;W.texImage2D(W.TEXTURE_2D,0,W.RGBA,R.width/4,R.height/4,0,W.RGBA,te,null),I.colorAttachment.set(G)}function qh(H,R){var G=H.context,I=G.gl,W=R.heatmapFbo;if(W){G.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,W.colorAttachment.get()),G.activeTexture.set(I.TEXTURE1);var te=R.colorRampTexture;te||(te=R.colorRampTexture=new n.Texture(G,R.colorRamp,I.RGBA)),te.bind(I.LINEAR,I.CLAMP_TO_EDGE),H.useProgram("heatmapTexture").draw(G,I.TRIANGLES,mn.disabled,si.disabled,H.colorModeForRenderPass(),Nt.disabled,wn(H,R,0,1),R.id,H.viewportBuffer,H.quadTriangleIndexBuffer,H.viewportSegments,R.paint,H.transform.zoom)}}function ou(H,R,G,I){if(H.renderPass==="translucent"){var W=G.paint.get("line-opacity"),te=G.paint.get("line-width");if(!(W.constantOr(1)===0||te.constantOr(1)===0))for(var ee=H.depthModeForSublayer(0,mn.ReadOnly),he=H.colorModeForRenderPass(),Se=G.paint.get("line-dasharray"),ze=G.paint.get("line-pattern"),pt=ze.constantOr(1),wt=G.paint.get("line-gradient"),gt=G.getCrossfadeParameters(),Oe=pt?"linePattern":Se?"lineSDF":wt?"lineGradient":"line",$e=H.context,st=$e.gl,Tt=!0,Rt=0,Dt=I;Rt<Dt.length;Rt+=1){var Xt=Dt[Rt],Vt=R.getTile(Xt);if(!(pt&&!Vt.patternsLoaded())){var Ft=Vt.getBucket(G);if(Ft){var Zt=Ft.programConfigurations.get(G.id),Pt=H.context.program.get(),sr=H.useProgram(Oe,Zt),xr=Tt||sr.program!==Pt,Dr=ze.constantOr(null);if(Dr&&Vt.imageAtlas){var un=Vt.imageAtlas,Xr=un.patternPositions[Dr.to.toString()],pn=un.patternPositions[Dr.from.toString()];Xr&&pn&&Zt.setConstantPatternPositions(Xr,pn)}var ai=pt?vo(H,Vt,G,gt):Se?xo(H,Vt,G,Se,gt):wt?mo(H,Vt,G,Ft.lineClipsArray.length):Ka(H,Vt,G);if(pt)$e.activeTexture.set(st.TEXTURE0),Vt.imageAtlasTexture.bind(st.LINEAR,st.CLAMP_TO_EDGE),Zt.updatePaintBuffers(gt);else if(Se&&(xr||H.lineAtlas.dirty))$e.activeTexture.set(st.TEXTURE0),H.lineAtlas.bind($e);else if(wt){var Nn=Ft.gradients[G.id],fn=Nn.texture;if(G.gradientVersion!==Nn.version){var Ln=256;if(G.stepInterpolant){var Mn=R.getSource().maxzoom,Kn=Xt.canonical.z===Mn?Math.ceil(1<<H.transform.maxZoom-Xt.canonical.z):1,xi=Ft.maxLineLength/n.EXTENT,Da=1024,Pa=xi*Da*Kn;Ln=n.clamp(n.nextPowerOfTwo(Pa),256,$e.maxTextureSize)}Nn.gradient=n.renderColorRamp({expression:G.gradientExpression(),evaluationKey:"lineProgress",resolution:Ln,image:Nn.gradient||void 0,clips:Ft.lineClipsArray}),Nn.texture?Nn.texture.update(Nn.gradient):Nn.texture=new n.Texture($e,Nn.gradient,st.RGBA),Nn.version=G.gradientVersion,fn=Nn.texture}$e.activeTexture.set(st.TEXTURE0),fn.bind(G.stepInterpolant?st.NEAREST:st.LINEAR,st.CLAMP_TO_EDGE)}sr.draw($e,st.TRIANGLES,ee,H.stencilModeForClipping(Xt),he,Nt.disabled,ai,G.id,Ft.layoutVertexBuffer,Ft.indexBuffer,Ft.segments,G.paint,H.transform.zoom,Zt,Ft.layoutVertexBuffer2),Tt=!1}}}}}function ve(H,R,G,I){var W=G.paint.get("fill-color"),te=G.paint.get("fill-opacity");if(te.constantOr(1)!==0){var ee=H.colorModeForRenderPass(),he=G.paint.get("fill-pattern"),Se=H.opaquePassEnabledForLayer()&&!he.constantOr(1)&&W.constantOr(n.Color.transparent).a===1&&te.constantOr(0)===1?"opaque":"translucent";if(H.renderPass===Se){var ze=H.depthModeForSublayer(1,H.renderPass==="opaque"?mn.ReadWrite:mn.ReadOnly);be(H,R,G,I,ze,ee,!1)}if(H.renderPass==="translucent"&&G.paint.get("fill-antialias")){var pt=H.depthModeForSublayer(G.getPaintProperty("fill-outline-color")?2:0,mn.ReadOnly);be(H,R,G,I,pt,ee,!0)}}}function be(H,R,G,I,W,te,ee){var he=H.context.gl,Se=G.paint.get("fill-pattern"),ze=Se&&Se.constantOr(1),pt=G.getCrossfadeParameters(),wt,gt,Oe,$e,st;ee?(gt=ze&&!G.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",wt=he.LINES):(gt=ze?"fillPattern":"fill",wt=he.TRIANGLES);for(var Tt=0,Rt=I;Tt<Rt.length;Tt+=1){var Dt=Rt[Tt],Xt=R.getTile(Dt);if(!(ze&&!Xt.patternsLoaded())){var Vt=Xt.getBucket(G);if(Vt){var Ft=Vt.programConfigurations.get(G.id),Zt=H.useProgram(gt,Ft);ze&&(H.context.activeTexture.set(he.TEXTURE0),Xt.imageAtlasTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE),Ft.updatePaintBuffers(pt));var Pt=Se.constantOr(null);if(Pt&&Xt.imageAtlas){var sr=Xt.imageAtlas,xr=sr.patternPositions[Pt.to.toString()],Dr=sr.patternPositions[Pt.from.toString()];xr&&Dr&&Ft.setConstantPatternPositions(xr,Dr)}var un=H.translatePosMatrix(Dt.posMatrix,Xt,G.paint.get("fill-translate"),G.paint.get("fill-translate-anchor"));if(!ee)$e=Vt.indexBuffer,st=Vt.segments,Oe=ze?Vf(un,H,pt,Xt):Hu(un);else{$e=Vt.indexBuffer2,st=Vt.segments2;var Xr=[he.drawingBufferWidth,he.drawingBufferHeight];Oe=gt==="fillOutlinePattern"&&ze?Ph(un,H,pt,Xt,Xr):Gu(un,Xr)}Zt.draw(H.context,wt,W,H.stencilModeForClipping(Dt),te,Nt.disabled,Oe,G.id,Vt.layoutVertexBuffer,$e,st,G.paint,H.transform.zoom,Ft)}}}}function Ce(H,R,G,I){var W=G.paint.get("fill-extrusion-opacity");if(W!==0&&H.renderPass==="translucent"){var te=new mn(H.context.gl.LEQUAL,mn.ReadWrite,H.depthRangeFor3D);if(W===1&&!G.paint.get("fill-extrusion-pattern").constantOr(1)){var ee=H.colorModeForRenderPass();De(H,R,G,I,te,si.disabled,ee)}else De(H,R,G,I,te,si.disabled,Be.disabled),De(H,R,G,I,te,H.stencilModeFor3D(),H.colorModeForRenderPass())}}function De(H,R,G,I,W,te,ee){for(var he=H.context,Se=he.gl,ze=G.paint.get("fill-extrusion-pattern"),pt=ze.constantOr(1),wt=G.getCrossfadeParameters(),gt=G.paint.get("fill-extrusion-opacity"),Oe=0,$e=I;Oe<$e.length;Oe+=1){var st=$e[Oe],Tt=R.getTile(st),Rt=Tt.getBucket(G);if(Rt){var Dt=Rt.programConfigurations.get(G.id),Xt=H.useProgram(pt?"fillExtrusionPattern":"fillExtrusion",Dt);pt&&(H.context.activeTexture.set(Se.TEXTURE0),Tt.imageAtlasTexture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE),Dt.updatePaintBuffers(wt));var Vt=ze.constantOr(null);if(Vt&&Tt.imageAtlas){var Ft=Tt.imageAtlas,Zt=Ft.patternPositions[Vt.to.toString()],Pt=Ft.patternPositions[Vt.from.toString()];Zt&&Pt&&Dt.setConstantPatternPositions(Zt,Pt)}var sr=H.translatePosMatrix(st.posMatrix,Tt,G.paint.get("fill-extrusion-translate"),G.paint.get("fill-extrusion-translate-anchor")),xr=G.paint.get("fill-extrusion-vertical-gradient"),Dr=pt?Bf(sr,H,xr,gt,st,wt,Tt):vv(sr,H,xr,gt);Xt.draw(he,he.gl.TRIANGLES,W,te,ee,Nt.backCCW,Dr,G.id,Rt.layoutVertexBuffer,Rt.indexBuffer,Rt.segments,G.paint,H.transform.zoom,Dt)}}}function He(H,R,G,I){if(!(H.renderPass!=="offscreen"&&H.renderPass!=="translucent")){for(var W=H.context,te=H.depthModeForSublayer(0,mn.ReadOnly),ee=H.colorModeForRenderPass(),he=H.renderPass==="translucent"?H.stencilConfigForOverlap(I):[{},I],Se=he[0],ze=he[1],pt=0,wt=ze;pt<wt.length;pt+=1){var gt=wt[pt],Oe=R.getTile(gt);Oe.needsHillshadePrepare&&H.renderPass==="offscreen"?Qe(H,Oe,G,te,si.disabled,ee):H.renderPass==="translucent"&&Ve(H,Oe,G,te,Se[gt.overscaledZ],ee)}W.viewport.set([0,0,H.width,H.height])}}function Ve(H,R,G,I,W,te){var ee=H.context,he=ee.gl,Se=R.fbo;if(Se){var ze=H.useProgram("hillshade");ee.activeTexture.set(he.TEXTURE0),he.bindTexture(he.TEXTURE_2D,Se.colorAttachment.get());var pt=Ii(H,R,G);ze.draw(ee,he.TRIANGLES,I,W,te,Nt.disabled,pt,G.id,H.rasterBoundsBuffer,H.quadTriangleIndexBuffer,H.rasterBoundsSegments)}}function Qe(H,R,G,I,W,te){var ee=H.context,he=ee.gl,Se=R.dem;if(Se&&Se.data){var ze=Se.dim,pt=Se.stride,wt=Se.getPixels();if(ee.activeTexture.set(he.TEXTURE1),ee.pixelStoreUnpackPremultiplyAlpha.set(!1),R.demTexture=R.demTexture||H.getTileTexture(pt),R.demTexture){var gt=R.demTexture;gt.update(wt,{premultiply:!1}),gt.bind(he.NEAREST,he.CLAMP_TO_EDGE)}else R.demTexture=new n.Texture(ee,wt,he.RGBA,{premultiply:!1}),R.demTexture.bind(he.NEAREST,he.CLAMP_TO_EDGE);ee.activeTexture.set(he.TEXTURE0);var Oe=R.fbo;if(!Oe){var $e=new n.Texture(ee,{width:ze,height:ze,data:null},he.RGBA);$e.bind(he.LINEAR,he.CLAMP_TO_EDGE),Oe=R.fbo=ee.createFramebuffer(ze,ze,!0),Oe.colorAttachment.set($e.texture)}ee.bindFramebuffer.set(Oe.framebuffer),ee.viewport.set([0,0,ze,ze]),H.useProgram("hillshadePrepare").draw(ee,he.TRIANGLES,I,W,te,Nt.disabled,Hi(R.tileID,Se),G.id,H.rasterBoundsBuffer,H.quadTriangleIndexBuffer,H.rasterBoundsSegments),R.needsHillshadePrepare=!1}}function zt(H,R,G,I){if(H.renderPass==="translucent"&&G.paint.get("raster-opacity")!==0&&I.length)for(var W=H.context,te=W.gl,ee=R.getSource(),he=H.useProgram("raster"),Se=H.colorModeForRenderPass(),ze=ee instanceof fe?[{},I]:H.stencilConfigForOverlap(I),pt=ze[0],wt=ze[1],gt=wt[wt.length-1].overscaledZ,Oe=!H.options.moving,$e=0,st=wt;$e<st.length;$e+=1){var Tt=st[$e],Rt=H.depthModeForSublayer(Tt.overscaledZ-gt,G.paint.get("raster-opacity")===1?mn.ReadWrite:mn.ReadOnly,te.LESS),Dt=R.getTile(Tt),Xt=H.transform.calculatePosMatrix(Tt.toUnwrapped(),Oe);Dt.registerFadeDuration(G.paint.get("raster-fade-duration"));var Vt=R.findLoadedParent(Tt,0),Ft=jt(Dt,Vt,R,G,H.transform),Zt=void 0,Pt=void 0,sr=G.paint.get("raster-resampling")==="nearest"?te.NEAREST:te.LINEAR;W.activeTexture.set(te.TEXTURE0),Dt.texture.bind(sr,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),W.activeTexture.set(te.TEXTURE1),Vt?(Vt.texture.bind(sr,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),Zt=Math.pow(2,Vt.tileID.overscaledZ-Dt.tileID.overscaledZ),Pt=[Dt.tileID.canonical.x*Zt%1,Dt.tileID.canonical.y*Zt%1]):Dt.texture.bind(sr,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST);var xr=Bo(Xt,Pt||[0,0],Zt||1,Ft,G);ee instanceof fe?he.draw(W,te.TRIANGLES,Rt,si.disabled,Se,Nt.disabled,xr,G.id,ee.boundsBuffer,H.quadTriangleIndexBuffer,ee.boundsSegments):he.draw(W,te.TRIANGLES,Rt,pt[Tt.overscaledZ],Se,Nt.disabled,xr,G.id,H.rasterBoundsBuffer,H.quadTriangleIndexBuffer,H.rasterBoundsSegments)}}function jt(H,R,G,I,W){var te=I.paint.get("raster-fade-duration");if(te>0){var ee=n.browser.now(),he=(ee-H.timeAdded)/te,Se=R?(ee-R.timeAdded)/te:-1,ze=G.getSource(),pt=W.coveringZoomLevel({tileSize:ze.tileSize,roundZoom:ze.roundZoom}),wt=!R||Math.abs(R.tileID.overscaledZ-pt)>Math.abs(H.tileID.overscaledZ-pt),gt=wt&&H.refreshedUponExpiration?1:n.clamp(wt?he:1-Se,0,1);return H.refreshedUponExpiration&&he>=1&&(H.refreshedUponExpiration=!1),R?{opacity:1,mix:1-gt}:{opacity:gt,mix:0}}else return{opacity:1,mix:0}}function qt(H,R,G){var I=G.paint.get("background-color"),W=G.paint.get("background-opacity");if(W!==0){var te=H.context,ee=te.gl,he=H.transform,Se=he.tileSize,ze=G.paint.get("background-pattern");if(!H.isPatternMissing(ze)){var pt=!ze&&I.a===1&&W===1&&H.opaquePassEnabledForLayer()?"opaque":"translucent";if(H.renderPass===pt){var wt=si.disabled,gt=H.depthModeForSublayer(0,pt==="opaque"?mn.ReadWrite:mn.ReadOnly),Oe=H.colorModeForRenderPass(),$e=H.useProgram(ze?"backgroundPattern":"background"),st=he.coveringTiles({tileSize:Se});ze&&(te.activeTexture.set(ee.TEXTURE0),H.imageManager.bind(H.context));for(var Tt=G.getCrossfadeParameters(),Rt=0,Dt=st;Rt<Dt.length;Rt+=1){var Xt=Dt[Rt],Vt=H.transform.calculatePosMatrix(Xt.toUnwrapped()),Ft=ze?Rh(Vt,W,H,ze,{tileID:Xt,tileSize:Se},Tt):lc(Vt,W,I);$e.draw(te,ee.TRIANGLES,gt,wt,Oe,Nt.disabled,Ft,G.id,H.tileExtentBuffer,H.quadTriangleIndexBuffer,H.tileExtentSegments)}}}}}var Qt=new n.Color(1,0,0,1),ar=new n.Color(0,1,0,1),_r=new n.Color(0,0,1,1),Sr=new n.Color(1,0,1,1),Hr=new n.Color(0,1,1,1);function ln(H){var R=H.transform.padding,G=3;yi(H,H.transform.height-(R.top||0),G,Qt),yi(H,R.bottom||0,G,ar),Qi(H,R.left||0,G,_r),Qi(H,H.transform.width-(R.right||0),G,Sr);var I=H.transform.centerPoint;kn(H,I.x,H.transform.height-I.y,Hr)}function kn(H,R,G,I){var W=20,te=2;ra(H,R-te/2,G-W/2,te,W,I),ra(H,R-W/2,G-te/2,W,te,I)}function yi(H,R,G,I){ra(H,0,R+G/2,H.transform.width,G,I)}function Qi(H,R,G,I){ra(H,R-G/2,0,G,H.transform.height,I)}function ra(H,R,G,I,W,te){var ee=H.context,he=ee.gl;he.enable(he.SCISSOR_TEST),he.scissor(R*n.browser.devicePixelRatio,G*n.browser.devicePixelRatio,I*n.browser.devicePixelRatio,W*n.browser.devicePixelRatio),ee.clear({color:te}),he.disable(he.SCISSOR_TEST)}function sa(H,R,G){for(var I=0;I<G.length;I++)pa(H,R,G[I])}function pa(H,R,G){var I=H.context,W=I.gl,te=G.posMatrix,ee=H.useProgram("debug"),he=mn.disabled,Se=si.disabled,ze=H.colorModeForRenderPass(),pt="$debug";I.activeTexture.set(W.TEXTURE0),H.emptyTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE),ee.draw(I,W.LINE_STRIP,he,Se,ze,Nt.disabled,Zr(te,n.Color.red),pt,H.debugBuffer,H.tileBorderIndexBuffer,H.debugSegments);var wt=R.getTileByID(G.key).latestRawTileData,gt=wt&&wt.byteLength||0,Oe=Math.floor(gt/1024),$e=R.getTile(G).tileSize,st=512/Math.min($e,512)*(G.overscaledZ/H.transform.zoom)*.5,Tt=G.canonical.toString();G.overscaledZ!==G.canonical.z&&(Tt+=" => "+G.overscaledZ);var Rt=Tt+" "+Oe+"kb";Lo(H,Rt),ee.draw(I,W.TRIANGLES,he,Se,Be.alphaBlended,Nt.disabled,Zr(te,n.Color.transparent,st),pt,H.debugBuffer,H.quadTriangleIndexBuffer,H.debugSegments)}function Lo(H,R){H.initDebugOverlayCanvas();var G=H.debugOverlayCanvas,I=H.context.gl,W=H.debugOverlayCanvas.getContext("2d");W.clearRect(0,0,G.width,G.height),W.shadowColor="white",W.shadowBlur=2,W.lineWidth=1.5,W.strokeStyle="white",W.textBaseline="top",W.font="bold 36px Open Sans, sans-serif",W.fillText(R,5,5),W.strokeText(R,5,5),H.debugOverlayTexture.update(G),H.debugOverlayTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE)}function jo(H,R,G){var I=H.context,W=G.implementation;if(H.renderPass==="offscreen"){var te=W.prerender;te&&(H.setCustomLayerDefaults(),I.setColorMode(H.colorModeForRenderPass()),te.call(W,I.gl,H.transform.customLayerMatrix()),I.setDirty(),H.setBaseState())}else if(H.renderPass==="translucent"){H.setCustomLayerDefaults(),I.setColorMode(H.colorModeForRenderPass()),I.setStencilMode(si.disabled);var ee=W.renderingMode==="3d"?new mn(H.context.gl.LEQUAL,mn.ReadWrite,H.depthRangeFor3D):H.depthModeForSublayer(0,mn.ReadOnly);I.setDepthMode(ee),W.render(I.gl,H.transform.customLayerMatrix()),I.setDirty(),H.setBaseState(),I.bindFramebuffer.set(null)}}var ba={symbol:Hv,circle:rh,heatmap:Gf,line:ou,fill:ve,"fill-extrusion":Ce,hillshade:He,raster:zt,background:qt,debug:sa,custom:jo},qa=function(R,G){this.context=new nr(R),this.transform=G,this._tileTextures={},this.setup(),this.numSublayers=yr.maxUnderzooming+yr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Wc,this.gpuTimers={}};qa.prototype.resize=function(R,G){if(this.width=R*n.browser.devicePixelRatio,this.height=G*n.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var I=0,W=this.style._order;I<W.length;I+=1){var te=W[I];this.style._layers[te].resize()}},qa.prototype.setup=function(){var R=this.context,G=new n.StructArrayLayout2i4;G.emplaceBack(0,0),G.emplaceBack(n.EXTENT,0),G.emplaceBack(0,n.EXTENT),G.emplaceBack(n.EXTENT,n.EXTENT),this.tileExtentBuffer=R.createVertexBuffer(G,_u.members),this.tileExtentSegments=n.SegmentVector.simpleSegment(0,0,4,2);var I=new n.StructArrayLayout2i4;I.emplaceBack(0,0),I.emplaceBack(n.EXTENT,0),I.emplaceBack(0,n.EXTENT),I.emplaceBack(n.EXTENT,n.EXTENT),this.debugBuffer=R.createVertexBuffer(I,_u.members),this.debugSegments=n.SegmentVector.simpleSegment(0,0,4,5);var W=new n.StructArrayLayout4i8;W.emplaceBack(0,0,0,0),W.emplaceBack(n.EXTENT,0,n.EXTENT,0),W.emplaceBack(0,n.EXTENT,0,n.EXTENT),W.emplaceBack(n.EXTENT,n.EXTENT,n.EXTENT,n.EXTENT),this.rasterBoundsBuffer=R.createVertexBuffer(W,ue.members),this.rasterBoundsSegments=n.SegmentVector.simpleSegment(0,0,4,2);var te=new n.StructArrayLayout2i4;te.emplaceBack(0,0),te.emplaceBack(1,0),te.emplaceBack(0,1),te.emplaceBack(1,1),this.viewportBuffer=R.createVertexBuffer(te,_u.members),this.viewportSegments=n.SegmentVector.simpleSegment(0,0,4,2);var ee=new n.StructArrayLayout1ui2;ee.emplaceBack(0),ee.emplaceBack(1),ee.emplaceBack(3),ee.emplaceBack(2),ee.emplaceBack(0),this.tileBorderIndexBuffer=R.createIndexBuffer(ee);var he=new n.StructArrayLayout3ui6;he.emplaceBack(0,1,2),he.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=R.createIndexBuffer(he),this.emptyTexture=new n.Texture(R,{width:1,height:1,data:new Uint8Array([0,0,0,0])},R.gl.RGBA);var Se=this.context.gl;this.stencilClearMode=new si({func:Se.ALWAYS,mask:0},0,255,Se.ZERO,Se.ZERO,Se.ZERO)},qa.prototype.clearStencil=function(){var R=this.context,G=R.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var I=n.create();n.ortho(I,0,this.width,this.height,0,0,1),n.scale(I,I,[G.drawingBufferWidth,G.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(R,G.TRIANGLES,mn.disabled,this.stencilClearMode,Be.disabled,Nt.disabled,An(I),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},qa.prototype._renderTileClippingMasks=function(R,G){if(!(this.currentStencilSource===R.source||!R.isTileClipped()||!G||!G.length)){this.currentStencilSource=R.source;var I=this.context,W=I.gl;this.nextStencilID+G.length>256&&this.clearStencil(),I.setColorMode(Be.disabled),I.setDepthMode(mn.disabled);var te=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var ee=0,he=G;ee<he.length;ee+=1){var Se=he[ee],ze=this._tileClippingMaskIDs[Se.key]=this.nextStencilID++;te.draw(I,W.TRIANGLES,mn.disabled,new si({func:W.ALWAYS,mask:0},ze,255,W.KEEP,W.KEEP,W.REPLACE),Be.disabled,Nt.disabled,An(Se.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},qa.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var R=this.nextStencilID++,G=this.context.gl;return new si({func:G.NOTEQUAL,mask:255},R,255,G.KEEP,G.KEEP,G.REPLACE)},qa.prototype.stencilModeForClipping=function(R){var G=this.context.gl;return new si({func:G.EQUAL,mask:255},this._tileClippingMaskIDs[R.key],0,G.KEEP,G.KEEP,G.REPLACE)},qa.prototype.stencilConfigForOverlap=function(R){var G,I=this.context.gl,W=R.sort(function(ze,pt){return pt.overscaledZ-ze.overscaledZ}),te=W[W.length-1].overscaledZ,ee=W[0].overscaledZ-te+1;if(ee>1){this.currentStencilSource=void 0,this.nextStencilID+ee>256&&this.clearStencil();for(var he={},Se=0;Se<ee;Se++)he[Se+te]=new si({func:I.GEQUAL,mask:255},Se+this.nextStencilID,255,I.KEEP,I.KEEP,I.REPLACE);return this.nextStencilID+=ee,[he,W]}return[(G={},G[te]=si.disabled,G),W]},qa.prototype.colorModeForRenderPass=function(){var R=this.context.gl;if(this._showOverdrawInspector){var G=8,I=1/G;return new Be([R.CONSTANT_COLOR,R.ONE],new n.Color(I,I,I,0),[!0,!0,!0,!0])}else return this.renderPass==="opaque"?Be.unblended:Be.alphaBlended},qa.prototype.depthModeForSublayer=function(R,G,I){if(!this.opaquePassEnabledForLayer())return mn.disabled;var W=1-((1+this.currentLayer)*this.numSublayers+R)*this.depthEpsilon;return new mn(I||this.context.gl.LEQUAL,G,[W,W])},qa.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},qa.prototype.render=function(R,G){var I=this;this.style=R,this.options=G,this.lineAtlas=R.lineAtlas,this.imageManager=R.imageManager,this.glyphManager=R.glyphManager,this.symbolFadeChange=R.placement.symbolFadeChange(n.browser.now()),this.imageManager.beginFrame();var W=this.style._order,te=this.style.sourceCaches;for(var ee in te){var he=te[ee];he.used&&he.prepare(this.context)}var Se={},ze={},pt={};for(var wt in te){var gt=te[wt];Se[wt]=gt.getVisibleCoordinates(),ze[wt]=Se[wt].slice().reverse(),pt[wt]=gt.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Oe=0;Oe<W.length;Oe++){var $e=W[Oe];if(this.style._layers[$e].is3D()){this.opaquePassCutoff=Oe;break}}this.renderPass="offscreen";for(var st=0,Tt=W;st<Tt.length;st+=1){var Rt=Tt[st],Dt=this.style._layers[Rt];if(!(!Dt.hasOffscreenPass()||Dt.isHidden(this.transform.zoom))){var Xt=ze[Dt.source];Dt.type!=="custom"&&!Xt.length||this.renderLayer(this,te[Dt.source],Dt,Xt)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:G.showOverdrawInspector?n.Color.black:n.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=G.showOverdrawInspector,this.depthRangeFor3D=[0,1-(R._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=W.length-1;this.currentLayer>=0;this.currentLayer--){var Vt=this.style._layers[W[this.currentLayer]],Ft=te[Vt.source],Zt=Se[Vt.source];this._renderTileClippingMasks(Vt,Zt),this.renderLayer(this,Ft,Vt,Zt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<W.length;this.currentLayer++){var Pt=this.style._layers[W[this.currentLayer]],sr=te[Pt.source],xr=(Pt.type==="symbol"?pt:ze)[Pt.source];this._renderTileClippingMasks(Pt,Se[Pt.source]),this.renderLayer(this,sr,Pt,xr)}if(this.options.showTileBoundaries){var Dr,un,Xr=n.values(this.style._layers);Xr.forEach(function(pn){pn.source&&!pn.isHidden(I.transform.zoom)&&(pn.source!==(un&&un.id)&&(un=I.style.sourceCaches[pn.source]),(!Dr||Dr.getSource().maxzoom<un.getSource().maxzoom)&&(Dr=un))}),Dr&&ba.debug(this,Dr,Dr.getVisibleCoordinates())}this.options.showPadding&&ln(this),this.context.setDefault()},qa.prototype.renderLayer=function(R,G,I,W){I.isHidden(this.transform.zoom)||I.type!=="background"&&I.type!=="custom"&&!W.length||(this.id=I.id,this.gpuTimingStart(I),ba[I.type](R,G,I,W,this.style.placement.variableOffsets),this.gpuTimingEnd())},qa.prototype.gpuTimingStart=function(R){if(this.options.gpuTiming){var G=this.context.extTimerQuery,I=this.gpuTimers[R.id];I||(I=this.gpuTimers[R.id]={calls:0,cpuTime:0,query:G.createQueryEXT()}),I.calls++,G.beginQueryEXT(G.TIME_ELAPSED_EXT,I.query)}},qa.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var R=this.context.extTimerQuery;R.endQueryEXT(R.TIME_ELAPSED_EXT)}},qa.prototype.collectGpuTimers=function(){var R=this.gpuTimers;return this.gpuTimers={},R},qa.prototype.queryGpuTimers=function(R){var G={};for(var I in R){var W=R[I],te=this.context.extTimerQuery,ee=te.getQueryObjectEXT(W.query,te.QUERY_RESULT_EXT)/(1e3*1e3);te.deleteQueryEXT(W.query),G[I]=ee}return G},qa.prototype.translatePosMatrix=function(R,G,I,W,te){if(!I[0]&&!I[1])return R;var ee=te?W==="map"?this.transform.angle:0:W==="viewport"?-this.transform.angle:0;if(ee){var he=Math.sin(ee),Se=Math.cos(ee);I=[I[0]*Se-I[1]*he,I[0]*he+I[1]*Se]}var ze=[te?I[0]:Eo(G,I[0],this.transform.zoom),te?I[1]:Eo(G,I[1],this.transform.zoom),0],pt=new Float32Array(16);return n.translate(pt,R,ze),pt},qa.prototype.saveTileTexture=function(R){var G=this._tileTextures[R.size[0]];G?G.push(R):this._tileTextures[R.size[0]]=[R]},qa.prototype.getTileTexture=function(R){var G=this._tileTextures[R];return G&&G.length>0?G.pop():null},qa.prototype.isPatternMissing=function(R){if(!R)return!1;if(!R.from||!R.to)return!0;var G=this.imageManager.getPattern(R.from.toString()),I=this.imageManager.getPattern(R.to.toString());return!G||!I},qa.prototype.useProgram=function(R,G){this.cache=this.cache||{};var I=""+R+(G?G.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[I]||(this.cache[I]=new Qc(this.context,R,Jc[R],G,$c[R],this._showOverdrawInspector)),this.cache[I]},qa.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},qa.prototype.setBaseState=function(){var R=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(R.FUNC_ADD)},qa.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=n.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var R=this.context.gl;this.debugOverlayTexture=new n.Texture(this.context,this.debugOverlayCanvas,R.RGBA)}},qa.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var ds=function(R,G){this.points=R,this.planes=G};ds.fromInvProjectionMatrix=function(R,G,I){var W=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],te=Math.pow(2,I),ee=W.map(function(ze){return n.transformMat4([],ze,R)}).map(function(ze){return n.scale$1([],ze,1/ze[3]/G*te)}),he=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],Se=he.map(function(ze){var pt=n.sub([],ee[ze[0]],ee[ze[1]]),wt=n.sub([],ee[ze[2]],ee[ze[1]]),gt=n.normalize([],n.cross([],pt,wt)),Oe=-n.dot(gt,ee[ze[1]]);return gt.concat(Oe)});return new ds(ee,Se)};var ol=function(R,G){this.min=R,this.max=G,this.center=n.scale$2([],n.add([],this.min,this.max),.5)};ol.prototype.quadrant=function(R){for(var G=[R%2===0,R<2],I=n.clone$2(this.min),W=n.clone$2(this.max),te=0;te<G.length;te++)I[te]=G[te]?this.min[te]:this.center[te],W[te]=G[te]?this.center[te]:this.max[te];return W[2]=this.max[2],new ol(I,W)},ol.prototype.distanceX=function(R){var G=Math.max(Math.min(this.max[0],R[0]),this.min[0]);return G-R[0]},ol.prototype.distanceY=function(R){var G=Math.max(Math.min(this.max[1],R[1]),this.min[1]);return G-R[1]},ol.prototype.intersects=function(R){for(var G=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],I=!0,W=0;W<R.planes.length;W++){for(var te=R.planes[W],ee=0,he=0;he<G.length;he++)ee+=n.dot$1(te,G[he])>=0;if(ee===0)return 0;ee!==G.length&&(I=!1)}if(I)return 2;for(var Se=0;Se<3;Se++){for(var ze=Number.MAX_VALUE,pt=-Number.MAX_VALUE,wt=0;wt<R.points.length;wt++){var gt=R.points[wt][Se]-this.min[Se];ze=Math.min(ze,gt),pt=Math.max(pt,gt)}if(pt<0||ze>this.max[Se]-this.min[Se])return 0}return 1};var el=function(R,G,I,W){if(R===void 0&&(R=0),G===void 0&&(G=0),I===void 0&&(I=0),W===void 0&&(W=0),isNaN(R)||R<0||isNaN(G)||G<0||isNaN(I)||I<0||isNaN(W)||W<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=R,this.bottom=G,this.left=I,this.right=W};el.prototype.interpolate=function(R,G,I){return G.top!=null&&R.top!=null&&(this.top=n.number(R.top,G.top,I)),G.bottom!=null&&R.bottom!=null&&(this.bottom=n.number(R.bottom,G.bottom,I)),G.left!=null&&R.left!=null&&(this.left=n.number(R.left,G.left,I)),G.right!=null&&R.right!=null&&(this.right=n.number(R.right,G.right,I)),this},el.prototype.getCenter=function(R,G){var I=n.clamp((this.left+R-this.right)/2,0,R),W=n.clamp((this.top+G-this.bottom)/2,0,G);return new n.Point(I,W)},el.prototype.equals=function(R){return this.top===R.top&&this.bottom===R.bottom&&this.left===R.left&&this.right===R.right},el.prototype.clone=function(){return new el(this.top,this.bottom,this.left,this.right)},el.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var to=function(R,G,I,W,te){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=te===void 0?!0:te,this._minZoom=R||0,this._maxZoom=G||22,this._minPitch=I==null?0:I,this._maxPitch=W==null?60:W,this.setMaxBounds(),this.width=0,this.height=0,this._center=new n.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new el,this._posMatrixCache={},this._alignedPosMatrixCache={}},Ya={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};to.prototype.clone=function(){var R=new to(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return R.tileSize=this.tileSize,R.latRange=this.latRange,R.width=this.width,R.height=this.height,R._center=this._center,R.zoom=this.zoom,R.angle=this.angle,R._fov=this._fov,R._pitch=this._pitch,R._unmodified=this._unmodified,R._edgeInsets=this._edgeInsets.clone(),R._calcMatrices(),R},Ya.minZoom.get=function(){return this._minZoom},Ya.minZoom.set=function(H){this._minZoom!==H&&(this._minZoom=H,this.zoom=Math.max(this.zoom,H))},Ya.maxZoom.get=function(){return this._maxZoom},Ya.maxZoom.set=function(H){this._maxZoom!==H&&(this._maxZoom=H,this.zoom=Math.min(this.zoom,H))},Ya.minPitch.get=function(){return this._minPitch},Ya.minPitch.set=function(H){this._minPitch!==H&&(this._minPitch=H,this.pitch=Math.max(this.pitch,H))},Ya.maxPitch.get=function(){return this._maxPitch},Ya.maxPitch.set=function(H){this._maxPitch!==H&&(this._maxPitch=H,this.pitch=Math.min(this.pitch,H))},Ya.renderWorldCopies.get=function(){return this._renderWorldCopies},Ya.renderWorldCopies.set=function(H){H===void 0?H=!0:H===null&&(H=!1),this._renderWorldCopies=H},Ya.worldSize.get=function(){return this.tileSize*this.scale},Ya.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Ya.size.get=function(){return new n.Point(this.width,this.height)},Ya.bearing.get=function(){return-this.angle/Math.PI*180},Ya.bearing.set=function(H){var R=-n.wrap(H,-180,180)*Math.PI/180;this.angle!==R&&(this._unmodified=!1,this.angle=R,this._calcMatrices(),this.rotationMatrix=n.create$2(),n.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Ya.pitch.get=function(){return this._pitch/Math.PI*180},Ya.pitch.set=function(H){var R=n.clamp(H,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==R&&(this._unmodified=!1,this._pitch=R,this._calcMatrices())},Ya.fov.get=function(){return this._fov/Math.PI*180},Ya.fov.set=function(H){H=Math.max(.01,Math.min(60,H)),this._fov!==H&&(this._unmodified=!1,this._fov=H/180*Math.PI,this._calcMatrices())},Ya.zoom.get=function(){return this._zoom},Ya.zoom.set=function(H){var R=Math.min(Math.max(H,this.minZoom),this.maxZoom);this._zoom!==R&&(this._unmodified=!1,this._zoom=R,this.scale=this.zoomScale(R),this.tileZoom=Math.floor(R),this.zoomFraction=R-this.tileZoom,this._constrain(),this._calcMatrices())},Ya.center.get=function(){return this._center},Ya.center.set=function(H){H.lat===this._center.lat&&H.lng===this._center.lng||(this._unmodified=!1,this._center=H,this._constrain(),this._calcMatrices())},Ya.padding.get=function(){return this._edgeInsets.toJSON()},Ya.padding.set=function(H){this._edgeInsets.equals(H)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,H,1),this._calcMatrices())},Ya.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},to.prototype.isPaddingEqual=function(R){return this._edgeInsets.equals(R)},to.prototype.interpolatePadding=function(R,G,I){this._unmodified=!1,this._edgeInsets.interpolate(R,G,I),this._constrain(),this._calcMatrices()},to.prototype.coveringZoomLevel=function(R){var G=(R.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/R.tileSize));return Math.max(0,G)},to.prototype.getVisibleUnwrappedCoordinates=function(R){var G=[new n.UnwrappedTileID(0,R)];if(this._renderWorldCopies)for(var I=this.pointCoordinate(new n.Point(0,0)),W=this.pointCoordinate(new n.Point(this.width,0)),te=this.pointCoordinate(new n.Point(this.width,this.height)),ee=this.pointCoordinate(new n.Point(0,this.height)),he=Math.floor(Math.min(I.x,W.x,te.x,ee.x)),Se=Math.floor(Math.max(I.x,W.x,te.x,ee.x)),ze=1,pt=he-ze;pt<=Se+ze;pt++)pt!==0&&G.push(new n.UnwrappedTileID(pt,R));return G},to.prototype.coveringTiles=function(R){var G=this.coveringZoomLevel(R),I=G;if(R.minzoom!==void 0&&G<R.minzoom)return[];R.maxzoom!==void 0&&G>R.maxzoom&&(G=R.maxzoom);var W=n.MercatorCoordinate.fromLngLat(this.center),te=Math.pow(2,G),ee=[te*W.x,te*W.y,0],he=ds.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,G),Se=R.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(Se=G);var ze=3,pt=function(Xr){return{aabb:new ol([Xr*te,0,0],[(Xr+1)*te,te,0]),zoom:0,x:0,y:0,wrap:Xr,fullyVisible:!1}},wt=[],gt=[],Oe=G,$e=R.reparseOverscaled?I:G;if(this._renderWorldCopies)for(var st=1;st<=3;st++)wt.push(pt(-st)),wt.push(pt(st));for(wt.push(pt(0));wt.length>0;){var Tt=wt.pop(),Rt=Tt.x,Dt=Tt.y,Xt=Tt.fullyVisible;if(!Xt){var Vt=Tt.aabb.intersects(he);if(Vt===0)continue;Xt=Vt===2}var Ft=Tt.aabb.distanceX(ee),Zt=Tt.aabb.distanceY(ee),Pt=Math.max(Math.abs(Ft),Math.abs(Zt)),sr=ze+(1<<Oe-Tt.zoom)-2;if(Tt.zoom===Oe||Pt>sr&&Tt.zoom>=Se){gt.push({tileID:new n.OverscaledTileID(Tt.zoom===Oe?$e:Tt.zoom,Tt.wrap,Tt.zoom,Rt,Dt),distanceSq:n.sqrLen([ee[0]-.5-Rt,ee[1]-.5-Dt])});continue}for(var xr=0;xr<4;xr++){var Dr=(Rt<<1)+xr%2,un=(Dt<<1)+(xr>>1);wt.push({aabb:Tt.aabb.quadrant(xr),zoom:Tt.zoom+1,x:Dr,y:un,wrap:Tt.wrap,fullyVisible:Xt})}}return gt.sort(function(Xr,pn){return Xr.distanceSq-pn.distanceSq}).map(function(Xr){return Xr.tileID})},to.prototype.resize=function(R,G){this.width=R,this.height=G,this.pixelsToGLUnits=[2/R,-2/G],this._constrain(),this._calcMatrices()},Ya.unmodified.get=function(){return this._unmodified},to.prototype.zoomScale=function(R){return Math.pow(2,R)},to.prototype.scaleZoom=function(R){return Math.log(R)/Math.LN2},to.prototype.project=function(R){var G=n.clamp(R.lat,-this.maxValidLatitude,this.maxValidLatitude);return new n.Point(n.mercatorXfromLng(R.lng)*this.worldSize,n.mercatorYfromLat(G)*this.worldSize)},to.prototype.unproject=function(R){return new n.MercatorCoordinate(R.x/this.worldSize,R.y/this.worldSize).toLngLat()},Ya.point.get=function(){return this.project(this.center)},to.prototype.setLocationAtPoint=function(R,G){var I=this.pointCoordinate(G),W=this.pointCoordinate(this.centerPoint),te=this.locationCoordinate(R),ee=new n.MercatorCoordinate(te.x-(I.x-W.x),te.y-(I.y-W.y));this.center=this.coordinateLocation(ee),this._renderWorldCopies&&(this.center=this.center.wrap())},to.prototype.locationPoint=function(R){return this.coordinatePoint(this.locationCoordinate(R))},to.prototype.pointLocation=function(R){return this.coordinateLocation(this.pointCoordinate(R))},to.prototype.locationCoordinate=function(R){return n.MercatorCoordinate.fromLngLat(R)},to.prototype.coordinateLocation=function(R){return R.toLngLat()},to.prototype.pointCoordinate=function(R){var G=0,I=[R.x,R.y,0,1],W=[R.x,R.y,1,1];n.transformMat4(I,I,this.pixelMatrixInverse),n.transformMat4(W,W,this.pixelMatrixInverse);var te=I[3],ee=W[3],he=I[0]/te,Se=W[0]/ee,ze=I[1]/te,pt=W[1]/ee,wt=I[2]/te,gt=W[2]/ee,Oe=wt===gt?0:(G-wt)/(gt-wt);return new n.MercatorCoordinate(n.number(he,Se,Oe)/this.worldSize,n.number(ze,pt,Oe)/this.worldSize)},to.prototype.coordinatePoint=function(R){var G=[R.x*this.worldSize,R.y*this.worldSize,0,1];return n.transformMat4(G,G,this.pixelMatrix),new n.Point(G[0]/G[3],G[1]/G[3])},to.prototype.getBounds=function(){return new n.LngLatBounds().extend(this.pointLocation(new n.Point(0,0))).extend(this.pointLocation(new n.Point(this.width,0))).extend(this.pointLocation(new n.Point(this.width,this.height))).extend(this.pointLocation(new n.Point(0,this.height)))},to.prototype.getMaxBounds=function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new n.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])},to.prototype.setMaxBounds=function(R){R?(this.lngRange=[R.getWest(),R.getEast()],this.latRange=[R.getSouth(),R.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},to.prototype.calculatePosMatrix=function(R,G){G===void 0&&(G=!1);var I=R.key,W=G?this._alignedPosMatrixCache:this._posMatrixCache;if(W[I])return W[I];var te=R.canonical,ee=this.worldSize/this.zoomScale(te.z),he=te.x+Math.pow(2,te.z)*R.wrap,Se=n.identity(new Float64Array(16));return n.translate(Se,Se,[he*ee,te.y*ee,0]),n.scale(Se,Se,[ee/n.EXTENT,ee/n.EXTENT,1]),n.multiply(Se,G?this.alignedProjMatrix:this.projMatrix,Se),W[I]=new Float32Array(Se),W[I]},to.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},to.prototype._constrain=function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var R=-90,G=90,I=-180,W=180,te,ee,he,Se,ze=this.size,pt=this._unmodified;if(this.latRange){var wt=this.latRange;R=n.mercatorYfromLat(wt[1])*this.worldSize,G=n.mercatorYfromLat(wt[0])*this.worldSize,te=G-R<ze.y?ze.y/(G-R):0}if(this.lngRange){var gt=this.lngRange;I=n.mercatorXfromLng(gt[0])*this.worldSize,W=n.mercatorXfromLng(gt[1])*this.worldSize,ee=W-I<ze.x?ze.x/(W-I):0}var Oe=this.point,$e=Math.max(ee||0,te||0);if($e){this.center=this.unproject(new n.Point(ee?(W+I)/2:Oe.x,te?(G+R)/2:Oe.y)),this.zoom+=this.scaleZoom($e),this._unmodified=pt,this._constraining=!1;return}if(this.latRange){var st=Oe.y,Tt=ze.y/2;st-Tt<R&&(Se=R+Tt),st+Tt>G&&(Se=G-Tt)}if(this.lngRange){var Rt=Oe.x,Dt=ze.x/2;Rt-Dt<I&&(he=I+Dt),Rt+Dt>W&&(he=W-Dt)}(he!==void 0||Se!==void 0)&&(this.center=this.unproject(new n.Point(he!==void 0?he:Oe.x,Se!==void 0?Se:Oe.y))),this._unmodified=pt,this._constraining=!1}},to.prototype._calcMatrices=function(){if(this.height){var R=this._fov/2,G=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(R)*this.height;var I=Math.PI/2+this._pitch,W=this._fov*(.5+G.y/this.height),te=Math.sin(W)*this.cameraToCenterDistance/Math.sin(n.clamp(Math.PI-I-W,.01,Math.PI-.01)),ee=this.point,he=ee.x,Se=ee.y,ze=Math.cos(Math.PI/2-this._pitch)*te+this.cameraToCenterDistance,pt=ze*1.01,wt=this.height/50,gt=new Float64Array(16);n.perspective(gt,this._fov,this.width/this.height,wt,pt),gt[8]=-G.x*2/this.width,gt[9]=G.y*2/this.height,n.scale(gt,gt,[1,-1,1]),n.translate(gt,gt,[0,0,-this.cameraToCenterDistance]),n.rotateX(gt,gt,this._pitch),n.rotateZ(gt,gt,this.angle),n.translate(gt,gt,[-he,-Se,0]),this.mercatorMatrix=n.scale([],gt,[this.worldSize,this.worldSize,this.worldSize]),n.scale(gt,gt,[1,1,n.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=gt,this.invProjMatrix=n.invert([],this.projMatrix);var Oe=this.width%2/2,$e=this.height%2/2,st=Math.cos(this.angle),Tt=Math.sin(this.angle),Rt=he-Math.round(he)+st*Oe+Tt*$e,Dt=Se-Math.round(Se)+st*$e+Tt*Oe,Xt=new Float64Array(gt);if(n.translate(Xt,Xt,[Rt>.5?Rt-1:Rt,Dt>.5?Dt-1:Dt,0]),this.alignedProjMatrix=Xt,gt=n.create(),n.scale(gt,gt,[this.width/2,-this.height/2,1]),n.translate(gt,gt,[1,-1,0]),this.labelPlaneMatrix=gt,gt=n.create(),n.scale(gt,gt,[1,-1,1]),n.translate(gt,gt,[-1,-1,0]),n.scale(gt,gt,[2/this.width,2/this.height,1]),this.glCoordMatrix=gt,this.pixelMatrix=n.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),gt=n.invert(new Float64Array(16),this.pixelMatrix),!gt)throw new Error("failed to invert matrix");this.pixelMatrixInverse=gt,this._posMatrixCache={},this._alignedPosMatrixCache={}}},to.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var R=this.pointCoordinate(new n.Point(0,0)),G=[R.x*this.worldSize,R.y*this.worldSize,0,1],I=n.transformMat4(G,G,this.pixelMatrix);return I[3]/this.cameraToCenterDistance},to.prototype.getCameraPoint=function(){var R=this._pitch,G=Math.tan(R)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new n.Point(0,G))},to.prototype.getCameraQueryGeometry=function(R){var G=this.getCameraPoint();if(R.length===1)return[R[0],G];for(var I=G.x,W=G.y,te=G.x,ee=G.y,he=0,Se=R;he<Se.length;he+=1){var ze=Se[he];I=Math.min(I,ze.x),W=Math.min(W,ze.y),te=Math.max(te,ze.x),ee=Math.max(ee,ze.y)}return[new n.Point(I,W),new n.Point(te,W),new n.Point(te,ee),new n.Point(I,ee),new n.Point(I,W)]},Object.defineProperties(to.prototype,Ya);function Il(H,R){var G=!1,I=null,W=function(){I=null,G&&(H(),I=setTimeout(W,R),G=!1)};return function(){return G=!0,I||W(),I}}var Sl=function(R){this._hashName=R&&encodeURIComponent(R),n.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Il(this._updateHashUnthrottled.bind(this),30*1e3/100)};Sl.prototype.addTo=function(R){return this._map=R,n.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Sl.prototype.remove=function(){return n.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Sl.prototype.getHashString=function(R){var G=this._map.getCenter(),I=Math.round(this._map.getZoom()*100)/100,W=Math.ceil((I*Math.LN2+Math.log(512/360/.5))/Math.LN10),te=Math.pow(10,W),ee=Math.round(G.lng*te)/te,he=Math.round(G.lat*te)/te,Se=this._map.getBearing(),ze=this._map.getPitch(),pt="";if(R?pt+="/"+ee+"/"+he+"/"+I:pt+=I+"/"+he+"/"+ee,(Se||ze)&&(pt+="/"+Math.round(Se*10)/10),ze&&(pt+="/"+Math.round(ze)),this._hashName){var wt=this._hashName,gt=!1,Oe=n.window.location.hash.slice(1).split("&").map(function($e){var st=$e.split("=")[0];return st===wt?(gt=!0,st+"="+pt):$e}).filter(function($e){return $e});return gt||Oe.push(wt+"="+pt),"#"+Oe.join("&")}return"#"+pt},Sl.prototype._getCurrentHash=function(){var R=this,G=n.window.location.hash.replace("#","");if(this._hashName){var I;return G.split("&").map(function(W){return W.split("=")}).forEach(function(W){W[0]===R._hashName&&(I=W)}),(I&&I[1]||"").split("/")}return G.split("/")},Sl.prototype._onHashChange=function(){var R=this._getCurrentHash();if(R.length>=3&&!R.some(function(I){return isNaN(I)})){var G=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(R[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+R[2],+R[1]],zoom:+R[0],bearing:G,pitch:+(R[4]||0)}),!0}return!1},Sl.prototype._updateHashUnthrottled=function(){var R=n.window.location.href.replace(/(#.+)?$/,this.getHashString());try{n.window.history.replaceState(n.window.history.state,null,R)}catch(G){}};var Su={linearity:.3,easing:n.bezier(0,0,.3,1)},su=n.extend({deceleration:2500,maxSpeed:1400},Su),Fl=n.extend({deceleration:20,maxSpeed:1400},Su),El=n.extend({deceleration:1e3,maxSpeed:360},Su),yf=n.extend({deceleration:1e3,maxSpeed:90},Su),Xu=function(R){this._map=R,this.clear()};Xu.prototype.clear=function(){this._inertiaBuffer=[]},Xu.prototype.record=function(R){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:n.browser.now(),settings:R})},Xu.prototype._drainInertiaBuffer=function(){for(var R=this._inertiaBuffer,G=n.browser.now(),I=160;R.length>0&&G-R[0].time>I;)R.shift()},Xu.prototype._onMoveEnd=function(R){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var G={zoom:0,bearing:0,pitch:0,pan:new n.Point(0,0),pinchAround:void 0,around:void 0},I=0,W=this._inertiaBuffer;I<W.length;I+=1){var te=W[I],ee=te.settings;G.zoom+=ee.zoomDelta||0,G.bearing+=ee.bearingDelta||0,G.pitch+=ee.pitchDelta||0,ee.panDelta&&G.pan._add(ee.panDelta),ee.around&&(G.around=ee.around),ee.pinchAround&&(G.pinchAround=ee.pinchAround)}var he=this._inertiaBuffer[this._inertiaBuffer.length-1],Se=he.time-this._inertiaBuffer[0].time,ze={};if(G.pan.mag()){var pt=U(G.pan.mag(),Se,n.extend({},su,R||{}));ze.offset=G.pan.mult(pt.amount/G.pan.mag()),ze.center=this._map.transform.center,Zu(ze,pt)}if(G.zoom){var wt=U(G.zoom,Se,Fl);ze.zoom=this._map.transform.zoom+wt.amount,Zu(ze,wt)}if(G.bearing){var gt=U(G.bearing,Se,El);ze.bearing=this._map.transform.bearing+n.clamp(gt.amount,-179,179),Zu(ze,gt)}if(G.pitch){var Oe=U(G.pitch,Se,yf);ze.pitch=this._map.transform.pitch+Oe.amount,Zu(ze,Oe)}if(ze.zoom||ze.bearing){var $e=G.pinchAround===void 0?G.around:G.pinchAround;ze.around=$e?this._map.unproject($e):this._map.getCenter()}return this.clear(),n.extend(ze,{noMoveStart:!0})}};function Zu(H,R){(!H.duration||H.duration<R.duration)&&(H.duration=R.duration,H.easing=R.easing)}function U(H,R,G){var I=G.maxSpeed,W=G.linearity,te=G.deceleration,ee=n.clamp(H*W/(R/1e3),-I,I),he=Math.abs(ee)/(te*W);return{easing:G.easing,duration:he*1e3,amount:ee*(he/2)}}var Q=function(H){function R(I,W,te,ee){ee===void 0&&(ee={});var he=o.mousePos(W.getCanvasContainer(),te),Se=W.unproject(he);H.call(this,I,n.extend({point:he,lngLat:Se,originalEvent:te},ee)),this._defaultPrevented=!1,this.target=W}H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R;var G={defaultPrevented:{configurable:!0}};return R.prototype.preventDefault=function(){this._defaultPrevented=!0},G.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(R.prototype,G),R}(n.Event),se=function(H){function R(I,W,te){var ee=I==="touchend"?te.changedTouches:te.touches,he=o.touchPos(W.getCanvasContainer(),ee),Se=he.map(function(wt){return W.unproject(wt)}),ze=he.reduce(function(wt,gt,Oe,$e){return wt.add(gt.div($e.length))},new n.Point(0,0)),pt=W.unproject(ze);H.call(this,I,{points:he,point:ze,lngLats:Se,lngLat:pt,originalEvent:te}),this._defaultPrevented=!1}H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R;var G={defaultPrevented:{configurable:!0}};return R.prototype.preventDefault=function(){this._defaultPrevented=!0},G.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(R.prototype,G),R}(n.Event),ye=function(H){function R(I,W,te){H.call(this,I,{originalEvent:te}),this._defaultPrevented=!1}H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R;var G={defaultPrevented:{configurable:!0}};return R.prototype.preventDefault=function(){this._defaultPrevented=!0},G.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(R.prototype,G),R}(n.Event),_e=function(R,G){this._map=R,this._clickTolerance=G.clickTolerance};_e.prototype.reset=function(){delete this._mousedownPos},_e.prototype.wheel=function(R){return this._firePreventable(new ye(R.type,this._map,R))},_e.prototype.mousedown=function(R,G){return this._mousedownPos=G,this._firePreventable(new Q(R.type,this._map,R))},_e.prototype.mouseup=function(R){this._map.fire(new Q(R.type,this._map,R))},_e.prototype.click=function(R,G){this._mousedownPos&&this._mousedownPos.dist(G)>=this._clickTolerance||this._map.fire(new Q(R.type,this._map,R))},_e.prototype.dblclick=function(R){return this._firePreventable(new Q(R.type,this._map,R))},_e.prototype.mouseover=function(R){this._map.fire(new Q(R.type,this._map,R))},_e.prototype.mouseout=function(R){this._map.fire(new Q(R.type,this._map,R))},_e.prototype.touchstart=function(R){return this._firePreventable(new se(R.type,this._map,R))},_e.prototype.touchmove=function(R){this._map.fire(new se(R.type,this._map,R))},_e.prototype.touchend=function(R){this._map.fire(new se(R.type,this._map,R))},_e.prototype.touchcancel=function(R){this._map.fire(new se(R.type,this._map,R))},_e.prototype._firePreventable=function(R){if(this._map.fire(R),R.defaultPrevented)return{}},_e.prototype.isEnabled=function(){return!0},_e.prototype.isActive=function(){return!1},_e.prototype.enable=function(){},_e.prototype.disable=function(){};var Ae=function(R){this._map=R};Ae.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Ae.prototype.mousemove=function(R){this._map.fire(new Q(R.type,this._map,R))},Ae.prototype.mousedown=function(){this._delayContextMenu=!0},Ae.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Q("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Ae.prototype.contextmenu=function(R){this._delayContextMenu?this._contextMenuEvent=R:this._map.fire(new Q(R.type,this._map,R)),this._map.listens("contextmenu")&&R.preventDefault()},Ae.prototype.isEnabled=function(){return!0},Ae.prototype.isActive=function(){return!1},Ae.prototype.enable=function(){},Ae.prototype.disable=function(){};var Ge=function(R,G){this._map=R,this._el=R.getCanvasContainer(),this._container=R.getContainer(),this._clickTolerance=G.clickTolerance||1};Ge.prototype.isEnabled=function(){return!!this._enabled},Ge.prototype.isActive=function(){return!!this._active},Ge.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Ge.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ge.prototype.mousedown=function(R,G){this.isEnabled()&&R.shiftKey&&R.button===0&&(o.disableDrag(),this._startPos=this._lastPos=G,this._active=!0)},Ge.prototype.mousemoveWindow=function(R,G){if(this._active){var I=G;if(!(this._lastPos.equals(I)||!this._box&&I.dist(this._startPos)<this._clickTolerance)){var W=this._startPos;this._lastPos=I,this._box||(this._box=o.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",R));var te=Math.min(W.x,I.x),ee=Math.max(W.x,I.x),he=Math.min(W.y,I.y),Se=Math.max(W.y,I.y);o.setTransform(this._box,"translate("+te+"px,"+he+"px)"),this._box.style.width=ee-te+"px",this._box.style.height=Se-he+"px"}}},Ge.prototype.mouseupWindow=function(R,G){var I=this;if(this._active&&R.button===0){var W=this._startPos,te=G;if(this.reset(),o.suppressClick(),W.x===te.x&&W.y===te.y)this._fireEvent("boxzoomcancel",R);else return this._map.fire(new n.Event("boxzoomend",{originalEvent:R})),{cameraAnimation:function(ee){return ee.fitScreenCoordinates(W,te,I._map.getBearing(),{linear:!0})}}}},Ge.prototype.keydown=function(R){this._active&&R.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",R))},Ge.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(o.remove(this._box),this._box=null),o.enableDrag(),delete this._startPos,delete this._lastPos},Ge.prototype._fireEvent=function(R,G){return this._map.fire(new n.Event(R,{originalEvent:G}))};function Le(H,R){for(var G={},I=0;I<H.length;I++)G[H[I].identifier]=R[I];return G}function tt(H){for(var R=new n.Point(0,0),G=0,I=H;G<I.length;G+=1){var W=I[G];R._add(W)}return R.div(H.length)}var St=500,Ct=500,rr=30,tr=function(R){this.reset(),this.numTouches=R.numTouches};tr.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},tr.prototype.touchstart=function(R,G,I){(this.centroid||I.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=R.timeStamp),I.length===this.numTouches&&(this.centroid=tt(G),this.touches=Le(I,G)))},tr.prototype.touchmove=function(R,G,I){if(!(this.aborted||!this.centroid)){var W=Le(I,G);for(var te in this.touches){var ee=this.touches[te],he=W[te];(!he||he.dist(ee)>rr)&&(this.aborted=!0)}}},tr.prototype.touchend=function(R,G,I){if((!this.centroid||R.timeStamp-this.startTime>Ct)&&(this.aborted=!0),I.length===0){var W=!this.aborted&&this.centroid;if(this.reset(),W)return W}};var Tr=function(R){this.singleTap=new tr(R),this.numTaps=R.numTaps,this.reset()};Tr.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Tr.prototype.touchstart=function(R,G,I){this.singleTap.touchstart(R,G,I)},Tr.prototype.touchmove=function(R,G,I){this.singleTap.touchmove(R,G,I)},Tr.prototype.touchend=function(R,G,I){var W=this.singleTap.touchend(R,G,I);if(W){var te=R.timeStamp-this.lastTime<St,ee=!this.lastTap||this.lastTap.dist(W)<rr;if((!te||!ee)&&this.reset(),this.count++,this.lastTime=R.timeStamp,this.lastTap=W,this.count===this.numTaps)return this.reset(),W}};var Er=function(){this._zoomIn=new Tr({numTouches:1,numTaps:2}),this._zoomOut=new Tr({numTouches:2,numTaps:1}),this.reset()};Er.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Er.prototype.touchstart=function(R,G,I){this._zoomIn.touchstart(R,G,I),this._zoomOut.touchstart(R,G,I)},Er.prototype.touchmove=function(R,G,I){this._zoomIn.touchmove(R,G,I),this._zoomOut.touchmove(R,G,I)},Er.prototype.touchend=function(R,G,I){var W=this,te=this._zoomIn.touchend(R,G,I),ee=this._zoomOut.touchend(R,G,I);if(te)return this._active=!0,R.preventDefault(),setTimeout(function(){return W.reset()},0),{cameraAnimation:function(he){return he.easeTo({duration:300,zoom:he.getZoom()+1,around:he.unproject(te)},{originalEvent:R})}};if(ee)return this._active=!0,R.preventDefault(),setTimeout(function(){return W.reset()},0),{cameraAnimation:function(he){return he.easeTo({duration:300,zoom:he.getZoom()-1,around:he.unproject(ee)},{originalEvent:R})}}},Er.prototype.touchcancel=function(){this.reset()},Er.prototype.enable=function(){this._enabled=!0},Er.prototype.disable=function(){this._enabled=!1,this.reset()},Er.prototype.isEnabled=function(){return this._enabled},Er.prototype.isActive=function(){return this._active};var ir=0,gr=2,wr={};wr[ir]=1,wr[gr]=2;function Pr(H,R){var G=wr[R];return H.buttons===void 0||(H.buttons&G)!==G}var kr=function(R){this.reset(),this._clickTolerance=R.clickTolerance||1};kr.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},kr.prototype._correctButton=function(R,G){return!1},kr.prototype._move=function(R,G){return{}},kr.prototype.mousedown=function(R,G){if(!this._lastPoint){var I=o.mouseButton(R);this._correctButton(R,I)&&(this._lastPoint=G,this._eventButton=I)}},kr.prototype.mousemoveWindow=function(R,G){var I=this._lastPoint;if(I){if(R.preventDefault(),Pr(R,this._eventButton)){this.reset();return}if(!(!this._moved&&G.dist(I)<this._clickTolerance))return this._moved=!0,this._lastPoint=G,this._move(I,G)}},kr.prototype.mouseupWindow=function(R){if(this._lastPoint){var G=o.mouseButton(R);G===this._eventButton&&(this._moved&&o.suppressClick(),this.reset())}},kr.prototype.enable=function(){this._enabled=!0},kr.prototype.disable=function(){this._enabled=!1,this.reset()},kr.prototype.isEnabled=function(){return this._enabled},kr.prototype.isActive=function(){return this._active};var pr=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.mousedown=function(I,W){H.prototype.mousedown.call(this,I,W),this._lastPoint&&(this._active=!0)},R.prototype._correctButton=function(I,W){return W===ir&&!I.ctrlKey},R.prototype._move=function(I,W){return{around:W,panDelta:W.sub(I)}},R}(kr),yn=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype._correctButton=function(I,W){return W===ir&&I.ctrlKey||W===gr},R.prototype._move=function(I,W){var te=.8,ee=(W.x-I.x)*te;if(ee)return this._active=!0,{bearingDelta:ee}},R.prototype.contextmenu=function(I){I.preventDefault()},R}(kr),bn=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype._correctButton=function(I,W){return W===ir&&I.ctrlKey||W===gr},R.prototype._move=function(I,W){var te=-.5,ee=(W.y-I.y)*te;if(ee)return this._active=!0,{pitchDelta:ee}},R.prototype.contextmenu=function(I){I.preventDefault()},R}(kr),In=function(R){this._minTouches=1,this._clickTolerance=R.clickTolerance||1,this.reset()};In.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new n.Point(0,0)},In.prototype.touchstart=function(R,G,I){return this._calculateTransform(R,G,I)},In.prototype.touchmove=function(R,G,I){if(!(!this._active||I.length<this._minTouches))return R.preventDefault(),this._calculateTransform(R,G,I)},In.prototype.touchend=function(R,G,I){this._calculateTransform(R,G,I),this._active&&I.length<this._minTouches&&this.reset()},In.prototype.touchcancel=function(){this.reset()},In.prototype._calculateTransform=function(R,G,I){I.length>0&&(this._active=!0);var W=Le(I,G),te=new n.Point(0,0),ee=new n.Point(0,0),he=0;for(var Se in W){var ze=W[Se],pt=this._touches[Se];pt&&(te._add(ze),ee._add(ze.sub(pt)),he++,W[Se]=ze)}if(this._touches=W,!(he<this._minTouches||!ee.mag())){var wt=ee.div(he);if(this._sum._add(wt),!(this._sum.mag()<this._clickTolerance)){var gt=te.div(he);return{around:gt,panDelta:wt}}}},In.prototype.enable=function(){this._enabled=!0},In.prototype.disable=function(){this._enabled=!1,this.reset()},In.prototype.isEnabled=function(){return this._enabled},In.prototype.isActive=function(){return this._active};var Xn=function(){this.reset()};Xn.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Xn.prototype._start=function(R){},Xn.prototype._move=function(R,G,I){return{}},Xn.prototype.touchstart=function(R,G,I){this._firstTwoTouches||I.length<2||(this._firstTwoTouches=[I[0].identifier,I[1].identifier],this._start([G[0],G[1]]))},Xn.prototype.touchmove=function(R,G,I){if(this._firstTwoTouches){R.preventDefault();var W=this._firstTwoTouches,te=W[0],ee=W[1],he=Ci(I,G,te),Se=Ci(I,G,ee);if(!(!he||!Se)){var ze=this._aroundCenter?null:he.add(Se).div(2);return this._move([he,Se],ze,R)}}},Xn.prototype.touchend=function(R,G,I){if(this._firstTwoTouches){var W=this._firstTwoTouches,te=W[0],ee=W[1],he=Ci(I,G,te),Se=Ci(I,G,ee);he&&Se||(this._active&&o.suppressClick(),this.reset())}},Xn.prototype.touchcancel=function(){this.reset()},Xn.prototype.enable=function(R){this._enabled=!0,this._aroundCenter=!!R&&R.around==="center"},Xn.prototype.disable=function(){this._enabled=!1,this.reset()},Xn.prototype.isEnabled=function(){return this._enabled},Xn.prototype.isActive=function(){return this._active};function Ci(H,R,G){for(var I=0;I<H.length;I++)if(H[I].identifier===G)return R[I]}var Fi=.1;function xa(H,R){return Math.log(H/R)/Math.LN2}var Gi=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.reset=function(){H.prototype.reset.call(this),delete this._distance,delete this._startDistance},R.prototype._start=function(I){this._startDistance=this._distance=I[0].dist(I[1])},R.prototype._move=function(I,W){var te=this._distance;if(this._distance=I[0].dist(I[1]),!(!this._active&&Math.abs(xa(this._distance,this._startDistance))<Fi))return this._active=!0,{zoomDelta:xa(this._distance,te),pinchAround:W}},R}(Xn),va=25;function go(H,R){return H.angleWith(R)*180/Math.PI}var Po=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.reset=function(){H.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},R.prototype._start=function(I){this._startVector=this._vector=I[0].sub(I[1]),this._minDiameter=I[0].dist(I[1])},R.prototype._move=function(I,W){var te=this._vector;if(this._vector=I[0].sub(I[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:go(this._vector,te),pinchAround:W}},R.prototype._isBelowThreshold=function(I){this._minDiameter=Math.min(this._minDiameter,I.mag());var W=Math.PI*this._minDiameter,te=va/W*360,ee=go(I,this._startVector);return Math.abs(ee)<te},R}(Xn);function Ao(H){return Math.abs(H.y)>Math.abs(H.x)}var Sn=100,da=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.reset=function(){H.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},R.prototype._start=function(I){this._lastPoints=I,Ao(I[0].sub(I[1]))&&(this._valid=!1)},R.prototype._move=function(I,W,te){var ee=I[0].sub(this._lastPoints[0]),he=I[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(ee,he,te.timeStamp),!!this._valid){this._lastPoints=I,this._active=!0;var Se=(ee.y+he.y)/2,ze=-.5;return{pitchDelta:Se*ze}}},R.prototype.gestureBeginsVertically=function(I,W,te){if(this._valid!==void 0)return this._valid;var ee=2,he=I.mag()>=ee,Se=W.mag()>=ee;if(!(!he&&!Se)){if(!he||!Se)return this._firstMove===void 0&&(this._firstMove=te),te-this._firstMove<Sn?void 0:!1;var ze=I.y>0==W.y>0;return Ao(I)&&Ao(W)&&ze}},R}(Xn),Sa={panStep:100,bearingStep:15,pitchStep:10},La=function(){var R=Sa;this._panStep=R.panStep,this._bearingStep=R.bearingStep,this._pitchStep=R.pitchStep,this._rotationDisabled=!1};La.prototype.reset=function(){this._active=!1},La.prototype.keydown=function(R){var G=this;if(!(R.altKey||R.ctrlKey||R.metaKey)){var I=0,W=0,te=0,ee=0,he=0;switch(R.keyCode){case 61:case 107:case 171:case 187:I=1;break;case 189:case 109:case 173:I=-1;break;case 37:R.shiftKey?W=-1:(R.preventDefault(),ee=-1);break;case 39:R.shiftKey?W=1:(R.preventDefault(),ee=1);break;case 38:R.shiftKey?te=1:(R.preventDefault(),he=-1);break;case 40:R.shiftKey?te=-1:(R.preventDefault(),he=1);break;default:return}return this._rotationDisabled&&(W=0,te=0),{cameraAnimation:function(Se){var ze=Se.getZoom();Se.easeTo({duration:300,easeId:"keyboardHandler",easing:Ts,zoom:I?Math.round(ze)+I*(R.shiftKey?2:1):ze,bearing:Se.getBearing()+W*G._bearingStep,pitch:Se.getPitch()+te*G._pitchStep,offset:[-ee*G._panStep,-he*G._panStep],center:Se.getCenter()},{originalEvent:R})}}}},La.prototype.enable=function(){this._enabled=!0},La.prototype.disable=function(){this._enabled=!1,this.reset()},La.prototype.isEnabled=function(){return this._enabled},La.prototype.isActive=function(){return this._active},La.prototype.disableRotation=function(){this._rotationDisabled=!0},La.prototype.enableRotation=function(){this._rotationDisabled=!1};function Ts(H){return H*(2-H)}var Gs=4.000244140625,yl=1/100,ls=1/450,Wl=2,Ye=function(R,G){this._map=R,this._el=R.getCanvasContainer(),this._handler=G,this._delta=0,this._defaultZoomRate=yl,this._wheelZoomRate=ls,n.bindAll(["_onTimeout"],this)};Ye.prototype.setZoomRate=function(R){this._defaultZoomRate=R},Ye.prototype.setWheelZoomRate=function(R){this._wheelZoomRate=R},Ye.prototype.isEnabled=function(){return!!this._enabled},Ye.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Ye.prototype.isZooming=function(){return!!this._zooming},Ye.prototype.enable=function(R){this.isEnabled()||(this._enabled=!0,this._aroundCenter=R&&R.around==="center")},Ye.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ye.prototype.wheel=function(R){if(this.isEnabled()){var G=R.deltaMode===n.window.WheelEvent.DOM_DELTA_LINE?R.deltaY*40:R.deltaY,I=n.browser.now(),W=I-(this._lastWheelEventTime||0);this._lastWheelEventTime=I,G!==0&&G%Gs===0?this._type="wheel":G!==0&&Math.abs(G)<4?this._type="trackpad":W>400?(this._type=null,this._lastValue=G,this._timeout=setTimeout(this._onTimeout,40,R)):this._type||(this._type=Math.abs(W*G)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,G+=this._lastValue)),R.shiftKey&&G&&(G=G/4),this._type&&(this._lastWheelEvent=R,this._delta-=G,this._active||this._start(R)),R.preventDefault()}},Ye.prototype._onTimeout=function(R){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(R)},Ye.prototype._start=function(R){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var G=o.mousePos(this._el,R);this._around=n.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(G)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Ye.prototype.renderFrame=function(){var R=this;if(this._frameId&&(this._frameId=null,!!this.isActive())){var G=this._map.transform;if(this._delta!==0){var I=this._type==="wheel"&&Math.abs(this._delta)>Gs?this._wheelZoomRate:this._defaultZoomRate,W=Wl/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&W!==0&&(W=1/W);var te=typeof this._targetZoom=="number"?G.zoomScale(this._targetZoom):G.scale;this._targetZoom=Math.min(G.maxZoom,Math.max(G.minZoom,G.scaleZoom(te*W))),this._type==="wheel"&&(this._startZoom=G.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var ee=typeof this._targetZoom=="number"?this._targetZoom:G.zoom,he=this._startZoom,Se=this._easing,ze=!1,pt;if(this._type==="wheel"&&he&&Se){var wt=Math.min((n.browser.now()-this._lastWheelEventTime)/200,1),gt=Se(wt);pt=n.number(he,ee,gt),wt<1?this._frameId||(this._frameId=!0):ze=!0}else pt=ee,ze=!0;return this._active=!0,ze&&(this._active=!1,this._finishTimeout=setTimeout(function(){R._zooming=!1,R._handler._triggerRenderFrame(),delete R._targetZoom,delete R._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ze,zoomDelta:pt-G.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Ye.prototype._smoothOutEasing=function(R){var G=n.ease;if(this._prevEase){var I=this._prevEase,W=(n.browser.now()-I.start)/I.duration,te=I.easing(W+.01)-I.easing(W),ee=.27/Math.sqrt(te*te+1e-4)*.01,he=Math.sqrt(.27*.27-ee*ee);G=n.bezier(ee,he,.25,1)}return this._prevEase={start:n.browser.now(),duration:R,easing:G},G},Ye.prototype.reset=function(){this._active=!1};var Gt=function(R,G){this._clickZoom=R,this._tapZoom=G};Gt.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Gt.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Gt.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Gt.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var lr=function(){this.reset()};lr.prototype.reset=function(){this._active=!1},lr.prototype.dblclick=function(R,G){return R.preventDefault(),{cameraAnimation:function(I){I.easeTo({duration:300,zoom:I.getZoom()+(R.shiftKey?-1:1),around:I.unproject(G)},{originalEvent:R})}}},lr.prototype.enable=function(){this._enabled=!0},lr.prototype.disable=function(){this._enabled=!1,this.reset()},lr.prototype.isEnabled=function(){return this._enabled},lr.prototype.isActive=function(){return this._active};var Or=function(){this._tap=new Tr({numTouches:1,numTaps:1}),this.reset()};Or.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Or.prototype.touchstart=function(R,G,I){this._swipePoint||(this._tapTime&&R.timeStamp-this._tapTime>St&&this.reset(),this._tapTime?I.length>0&&(this._swipePoint=G[0],this._swipeTouch=I[0].identifier):this._tap.touchstart(R,G,I))},Or.prototype.touchmove=function(R,G,I){if(!this._tapTime)this._tap.touchmove(R,G,I);else if(this._swipePoint){if(I[0].identifier!==this._swipeTouch)return;var W=G[0],te=W.y-this._swipePoint.y;return this._swipePoint=W,R.preventDefault(),this._active=!0,{zoomDelta:te/128}}},Or.prototype.touchend=function(R,G,I){if(this._tapTime)this._swipePoint&&I.length===0&&this.reset();else{var W=this._tap.touchend(R,G,I);W&&(this._tapTime=R.timeStamp)}},Or.prototype.touchcancel=function(){this.reset()},Or.prototype.enable=function(){this._enabled=!0},Or.prototype.disable=function(){this._enabled=!1,this.reset()},Or.prototype.isEnabled=function(){return this._enabled},Or.prototype.isActive=function(){return this._active};var $r=function(R,G,I){this._el=R,this._mousePan=G,this._touchPan=I};$r.prototype.enable=function(R){this._inertiaOptions=R||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},$r.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},$r.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},$r.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var jr=function(R,G,I){this._pitchWithRotate=R.pitchWithRotate,this._mouseRotate=G,this._mousePitch=I};jr.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},jr.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},jr.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},jr.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Kr=function(R,G,I,W){this._el=R,this._touchZoom=G,this._touchRotate=I,this._tapDragZoom=W,this._rotationDisabled=!1,this._enabled=!0};Kr.prototype.enable=function(R){this._touchZoom.enable(R),this._rotationDisabled||this._touchRotate.enable(R),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Kr.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Kr.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Kr.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Kr.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Kr.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var xn=function(H){return H.zoom||H.drag||H.pitch||H.rotate},Qn=function(H){function R(){H.apply(this,arguments)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R}(n.Event);function Wn(H){return H.panDelta&&H.panDelta.mag()||H.zoomDelta||H.bearingDelta||H.pitchDelta}var Rn=function(R,G){this._map=R,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Xu(R),this._bearingSnap=G.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(G),n.bindAll(["handleEvent","handleWindowEvent"],this);var I=this._el;this._listeners=[[I,"touchstart",{passive:!0}],[I,"touchmove",{passive:!1}],[I,"touchend",void 0],[I,"touchcancel",void 0],[I,"mousedown",void 0],[I,"mousemove",void 0],[I,"mouseup",void 0],[n.window.document,"mousemove",{capture:!0}],[n.window.document,"mouseup",void 0],[I,"mouseover",void 0],[I,"mouseout",void 0],[I,"dblclick",void 0],[I,"click",void 0],[I,"keydown",{capture:!1}],[I,"keyup",void 0],[I,"wheel",{passive:!1}],[I,"contextmenu",void 0],[n.window,"blur",void 0]];for(var W=0,te=this._listeners;W<te.length;W+=1){var ee=te[W],he=ee[0],Se=ee[1],ze=ee[2];o.addEventListener(he,Se,he===n.window.document?this.handleWindowEvent:this.handleEvent,ze)}};Rn.prototype.destroy=function(){for(var R=0,G=this._listeners;R<G.length;R+=1){var I=G[R],W=I[0],te=I[1],ee=I[2];o.removeEventListener(W,te,W===n.window.document?this.handleWindowEvent:this.handleEvent,ee)}},Rn.prototype._addDefaultHandlers=function(R){var G=this._map,I=G.getCanvasContainer();this._add("mapEvent",new _e(G,R));var W=G.boxZoom=new Ge(G,R);this._add("boxZoom",W);var te=new Er,ee=new lr;G.doubleClickZoom=new Gt(ee,te),this._add("tapZoom",te),this._add("clickZoom",ee);var he=new Or;this._add("tapDragZoom",he);var Se=G.touchPitch=new da;this._add("touchPitch",Se);var ze=new yn(R),pt=new bn(R);G.dragRotate=new jr(R,ze,pt),this._add("mouseRotate",ze,["mousePitch"]),this._add("mousePitch",pt,["mouseRotate"]);var wt=new pr(R),gt=new In(R);G.dragPan=new $r(I,wt,gt),this._add("mousePan",wt),this._add("touchPan",gt,["touchZoom","touchRotate"]);var Oe=new Po,$e=new Gi;G.touchZoomRotate=new Kr(I,$e,Oe,he),this._add("touchRotate",Oe,["touchPan","touchZoom"]),this._add("touchZoom",$e,["touchPan","touchRotate"]);var st=G.scrollZoom=new Ye(G,this);this._add("scrollZoom",st,["mousePan"]);var Tt=G.keyboard=new La;this._add("keyboard",Tt),this._add("blockableMapEvent",new Ae(G));for(var Rt=0,Dt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Rt<Dt.length;Rt+=1){var Xt=Dt[Rt];R.interactive&&R[Xt]&&G[Xt].enable(R[Xt])}},Rn.prototype._add=function(R,G,I){this._handlers.push({handlerName:R,handler:G,allowed:I}),this._handlersById[R]=G},Rn.prototype.stop=function(R){if(!this._updatingCamera){for(var G=0,I=this._handlers;G<I.length;G+=1){var W=I[G],te=W.handler;te.reset()}this._inertia.clear(),this._fireEvents({},{},R),this._changes=[]}},Rn.prototype.isActive=function(){for(var R=0,G=this._handlers;R<G.length;R+=1){var I=G[R],W=I.handler;if(W.isActive())return!0}return!1},Rn.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Rn.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Rn.prototype.isMoving=function(){return!!xn(this._eventsInProgress)||this.isZooming()},Rn.prototype._blockedByActive=function(R,G,I){for(var W in R)if(W!==I&&(!G||G.indexOf(W)<0))return!0;return!1},Rn.prototype.handleWindowEvent=function(R){this.handleEvent(R,R.type+"Window")},Rn.prototype._getMapTouches=function(R){for(var G=[],I=0,W=R;I<W.length;I+=1){var te=W[I],ee=te.target;this._el.contains(ee)&&G.push(te)}return G},Rn.prototype.handleEvent=function(R,G){if(R.type==="blur"){this.stop(!0);return}this._updatingCamera=!0;for(var I=R.type==="renderFrame"?void 0:R,W={needsRenderFrame:!1},te={},ee={},he=R.touches?this._getMapTouches(R.touches):void 0,Se=he?o.touchPos(this._el,he):o.mousePos(this._el,R),ze=0,pt=this._handlers;ze<pt.length;ze+=1){var wt=pt[ze],gt=wt.handlerName,Oe=wt.handler,$e=wt.allowed;if(Oe.isEnabled()){var st=void 0;this._blockedByActive(ee,$e,gt)?Oe.reset():Oe[G||R.type]&&(st=Oe[G||R.type](R,Se,he),this.mergeHandlerResult(W,te,st,gt,I),st&&st.needsRenderFrame&&this._triggerRenderFrame()),(st||Oe.isActive())&&(ee[gt]=Oe)}}var Tt={};for(var Rt in this._previousActiveHandlers)ee[Rt]||(Tt[Rt]=I);this._previousActiveHandlers=ee,(Object.keys(Tt).length||Wn(W))&&(this._changes.push([W,te,Tt]),this._triggerRenderFrame()),(Object.keys(ee).length||Wn(W))&&this._map._stop(!0),this._updatingCamera=!1;var Dt=W.cameraAnimation;Dt&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Dt(this._map))},Rn.prototype.mergeHandlerResult=function(R,G,I,W,te){if(I){n.extend(R,I);var ee={handlerName:W,originalEvent:I.originalEvent||te};I.zoomDelta!==void 0&&(G.zoom=ee),I.panDelta!==void 0&&(G.drag=ee),I.pitchDelta!==void 0&&(G.pitch=ee),I.bearingDelta!==void 0&&(G.rotate=ee)}},Rn.prototype._applyChanges=function(){for(var R={},G={},I={},W=0,te=this._changes;W<te.length;W+=1){var ee=te[W],he=ee[0],Se=ee[1],ze=ee[2];he.panDelta&&(R.panDelta=(R.panDelta||new n.Point(0,0))._add(he.panDelta)),he.zoomDelta&&(R.zoomDelta=(R.zoomDelta||0)+he.zoomDelta),he.bearingDelta&&(R.bearingDelta=(R.bearingDelta||0)+he.bearingDelta),he.pitchDelta&&(R.pitchDelta=(R.pitchDelta||0)+he.pitchDelta),he.around!==void 0&&(R.around=he.around),he.pinchAround!==void 0&&(R.pinchAround=he.pinchAround),he.noInertia&&(R.noInertia=he.noInertia),n.extend(G,Se),n.extend(I,ze)}this._updateMapTransform(R,G,I),this._changes=[]},Rn.prototype._updateMapTransform=function(R,G,I){var W=this._map,te=W.transform;if(!Wn(R))return this._fireEvents(G,I,!0);var ee=R.panDelta,he=R.zoomDelta,Se=R.bearingDelta,ze=R.pitchDelta,pt=R.around,wt=R.pinchAround;wt!==void 0&&(pt=wt),W._stop(!0),pt=pt||W.transform.centerPoint;var gt=te.pointLocation(ee?pt.sub(ee):pt);Se&&(te.bearing+=Se),ze&&(te.pitch+=ze),he&&(te.zoom+=he),te.setLocationAtPoint(gt,pt),this._map._update(),R.noInertia||this._inertia.record(R),this._fireEvents(G,I,!0)},Rn.prototype._fireEvents=function(R,G,I){var W=this,te=xn(this._eventsInProgress),ee=xn(R),he={};for(var Se in R){var ze=R[Se],pt=ze.originalEvent;this._eventsInProgress[Se]||(he[Se+"start"]=pt),this._eventsInProgress[Se]=R[Se]}!te&&ee&&this._fireEvent("movestart",ee.originalEvent);for(var wt in he)this._fireEvent(wt,he[wt]);ee&&this._fireEvent("move",ee.originalEvent);for(var gt in R){var Oe=R[gt],$e=Oe.originalEvent;this._fireEvent(gt,$e)}var st={},Tt;for(var Rt in this._eventsInProgress){var Dt=this._eventsInProgress[Rt],Xt=Dt.handlerName,Vt=Dt.originalEvent;this._handlersById[Xt].isActive()||(delete this._eventsInProgress[Rt],Tt=G[Xt]||Vt,st[Rt+"end"]=Tt)}for(var Ft in st)this._fireEvent(Ft,st[Ft]);var Zt=xn(this._eventsInProgress);if(I&&(te||ee)&&!Zt){this._updatingCamera=!0;var Pt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),sr=function(xr){return xr!==0&&-W._bearingSnap<xr&&xr<W._bearingSnap};Pt?(sr(Pt.bearing||this._map.getBearing())&&(Pt.bearing=0),this._map.easeTo(Pt,{originalEvent:Tt})):(this._map.fire(new n.Event("moveend",{originalEvent:Tt})),sr(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Rn.prototype._fireEvent=function(R,G){this._map.fire(new n.Event(R,G?{originalEvent:G}:{}))},Rn.prototype._requestFrame=function(){var R=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(G){delete R._frameId,R.handleEvent(new Qn("renderFrame",{timeStamp:G})),R._applyChanges()})},Rn.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var ia=function(H){function R(G,I){H.call(this),this._moving=!1,this._zooming=!1,this.transform=G,this._bearingSnap=I.bearingSnap,n.bindAll(["_renderFrameCallback"],this)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.getCenter=function(){return new n.LngLat(this.transform.center.lng,this.transform.center.lat)},R.prototype.setCenter=function(I,W){return this.jumpTo({center:I},W)},R.prototype.panBy=function(I,W,te){return I=n.Point.convert(I).mult(-1),this.panTo(this.transform.center,n.extend({offset:I},W),te)},R.prototype.panTo=function(I,W,te){return this.easeTo(n.extend({center:I},W),te)},R.prototype.getZoom=function(){return this.transform.zoom},R.prototype.setZoom=function(I,W){return this.jumpTo({zoom:I},W),this},R.prototype.zoomTo=function(I,W,te){return this.easeTo(n.extend({zoom:I},W),te)},R.prototype.zoomIn=function(I,W){return this.zoomTo(this.getZoom()+1,I,W),this},R.prototype.zoomOut=function(I,W){return this.zoomTo(this.getZoom()-1,I,W),this},R.prototype.getBearing=function(){return this.transform.bearing},R.prototype.setBearing=function(I,W){return this.jumpTo({bearing:I},W),this},R.prototype.getPadding=function(){return this.transform.padding},R.prototype.setPadding=function(I,W){return this.jumpTo({padding:I},W),this},R.prototype.rotateTo=function(I,W,te){return this.easeTo(n.extend({bearing:I},W),te)},R.prototype.resetNorth=function(I,W){return this.rotateTo(0,n.extend({duration:1e3},I),W),this},R.prototype.resetNorthPitch=function(I,W){return this.easeTo(n.extend({bearing:0,pitch:0,duration:1e3},I),W),this},R.prototype.snapToNorth=function(I,W){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(I,W):this},R.prototype.getPitch=function(){return this.transform.pitch},R.prototype.setPitch=function(I,W){return this.jumpTo({pitch:I},W),this},R.prototype.cameraForBounds=function(I,W){I=n.LngLatBounds.convert(I);var te=W&&W.bearing||0;return this._cameraForBoxAndBearing(I.getNorthWest(),I.getSouthEast(),te,W)},R.prototype._cameraForBoxAndBearing=function(I,W,te,ee){var he={top:0,bottom:0,right:0,left:0};if(ee=n.extend({padding:he,offset:[0,0],maxZoom:this.transform.maxZoom},ee),typeof ee.padding=="number"){var Se=ee.padding;ee.padding={top:Se,bottom:Se,right:Se,left:Se}}ee.padding=n.extend(he,ee.padding);var ze=this.transform,pt=ze.padding,wt=ze.project(n.LngLat.convert(I)),gt=ze.project(n.LngLat.convert(W)),Oe=wt.rotate(-te*Math.PI/180),$e=gt.rotate(-te*Math.PI/180),st=new n.Point(Math.max(Oe.x,$e.x),Math.max(Oe.y,$e.y)),Tt=new n.Point(Math.min(Oe.x,$e.x),Math.min(Oe.y,$e.y)),Rt=st.sub(Tt),Dt=(ze.width-(pt.left+pt.right+ee.padding.left+ee.padding.right))/Rt.x,Xt=(ze.height-(pt.top+pt.bottom+ee.padding.top+ee.padding.bottom))/Rt.y;if(Xt<0||Dt<0){n.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var Vt=Math.min(ze.scaleZoom(ze.scale*Math.min(Dt,Xt)),ee.maxZoom),Ft=typeof ee.offset.x=="number"?new n.Point(ee.offset.x,ee.offset.y):n.Point.convert(ee.offset),Zt=(ee.padding.left-ee.padding.right)/2,Pt=(ee.padding.top-ee.padding.bottom)/2,sr=new n.Point(Zt,Pt),xr=sr.rotate(te*Math.PI/180),Dr=Ft.add(xr),un=Dr.mult(ze.scale/ze.zoomScale(Vt)),Xr=ze.unproject(wt.add(gt).div(2).sub(un));return{center:Xr,zoom:Vt,bearing:te}},R.prototype.fitBounds=function(I,W,te){return this._fitInternal(this.cameraForBounds(I,W),W,te)},R.prototype.fitScreenCoordinates=function(I,W,te,ee,he){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(n.Point.convert(I)),this.transform.pointLocation(n.Point.convert(W)),te,ee),ee,he)},R.prototype._fitInternal=function(I,W,te){return I?(W=n.extend(I,W),delete W.padding,W.linear?this.easeTo(W,te):this.flyTo(W,te)):this},R.prototype.jumpTo=function(I,W){this.stop();var te=this.transform,ee=!1,he=!1,Se=!1;return"zoom"in I&&te.zoom!==+I.zoom&&(ee=!0,te.zoom=+I.zoom),I.center!==void 0&&(te.center=n.LngLat.convert(I.center)),"bearing"in I&&te.bearing!==+I.bearing&&(he=!0,te.bearing=+I.bearing),"pitch"in I&&te.pitch!==+I.pitch&&(Se=!0,te.pitch=+I.pitch),I.padding!=null&&!te.isPaddingEqual(I.padding)&&(te.padding=I.padding),this.fire(new n.Event("movestart",W)).fire(new n.Event("move",W)),ee&&this.fire(new n.Event("zoomstart",W)).fire(new n.Event("zoom",W)).fire(new n.Event("zoomend",W)),he&&this.fire(new n.Event("rotatestart",W)).fire(new n.Event("rotate",W)).fire(new n.Event("rotateend",W)),Se&&this.fire(new n.Event("pitchstart",W)).fire(new n.Event("pitch",W)).fire(new n.Event("pitchend",W)),this.fire(new n.Event("moveend",W))},R.prototype.easeTo=function(I,W){var te=this;this._stop(!1,I.easeId),I=n.extend({offset:[0,0],duration:500,easing:n.ease},I),(I.animate===!1||!I.essential&&n.browser.prefersReducedMotion)&&(I.duration=0);var ee=this.transform,he=this.getZoom(),Se=this.getBearing(),ze=this.getPitch(),pt=this.getPadding(),wt="zoom"in I?+I.zoom:he,gt="bearing"in I?this._normalizeBearing(I.bearing,Se):Se,Oe="pitch"in I?+I.pitch:ze,$e="padding"in I?I.padding:ee.padding,st=n.Point.convert(I.offset),Tt=ee.centerPoint.add(st),Rt=ee.pointLocation(Tt),Dt=n.LngLat.convert(I.center||Rt);this._normalizeCenter(Dt);var Xt=ee.project(Rt),Vt=ee.project(Dt).sub(Xt),Ft=ee.zoomScale(wt-he),Zt,Pt;I.around&&(Zt=n.LngLat.convert(I.around),Pt=ee.locationPoint(Zt));var sr={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||wt!==he,this._rotating=this._rotating||Se!==gt,this._pitching=this._pitching||Oe!==ze,this._padding=!ee.isPaddingEqual($e),this._easeId=I.easeId,this._prepareEase(W,I.noMoveStart,sr),this._ease(function(xr){if(te._zooming&&(ee.zoom=n.number(he,wt,xr)),te._rotating&&(ee.bearing=n.number(Se,gt,xr)),te._pitching&&(ee.pitch=n.number(ze,Oe,xr)),te._padding&&(ee.interpolatePadding(pt,$e,xr),Tt=ee.centerPoint.add(st)),Zt)ee.setLocationAtPoint(Zt,Pt);else{var Dr=ee.zoomScale(ee.zoom-he),un=wt>he?Math.min(2,Ft):Math.max(.5,Ft),Xr=Math.pow(un,1-xr),pn=ee.unproject(Xt.add(Vt.mult(xr*Xr)).mult(Dr));ee.setLocationAtPoint(ee.renderWorldCopies?pn.wrap():pn,Tt)}te._fireMoveEvents(W)},function(xr){te._afterEase(W,xr)},I),this},R.prototype._prepareEase=function(I,W,te){te===void 0&&(te={}),this._moving=!0,!W&&!te.moving&&this.fire(new n.Event("movestart",I)),this._zooming&&!te.zooming&&this.fire(new n.Event("zoomstart",I)),this._rotating&&!te.rotating&&this.fire(new n.Event("rotatestart",I)),this._pitching&&!te.pitching&&this.fire(new n.Event("pitchstart",I))},R.prototype._fireMoveEvents=function(I){this.fire(new n.Event("move",I)),this._zooming&&this.fire(new n.Event("zoom",I)),this._rotating&&this.fire(new n.Event("rotate",I)),this._pitching&&this.fire(new n.Event("pitch",I))},R.prototype._afterEase=function(I,W){if(!(this._easeId&&W&&this._easeId===W)){delete this._easeId;var te=this._zooming,ee=this._rotating,he=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,te&&this.fire(new n.Event("zoomend",I)),ee&&this.fire(new n.Event("rotateend",I)),he&&this.fire(new n.Event("pitchend",I)),this.fire(new n.Event("moveend",I))}},R.prototype.flyTo=function(I,W){var te=this;if(!I.essential&&n.browser.prefersReducedMotion){var ee=n.pick(I,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ee,W)}this.stop(),I=n.extend({offset:[0,0],speed:1.2,curve:1.42,easing:n.ease},I);var he=this.transform,Se=this.getZoom(),ze=this.getBearing(),pt=this.getPitch(),wt=this.getPadding(),gt="zoom"in I?n.clamp(+I.zoom,he.minZoom,he.maxZoom):Se,Oe="bearing"in I?this._normalizeBearing(I.bearing,ze):ze,$e="pitch"in I?+I.pitch:pt,st="padding"in I?I.padding:he.padding,Tt=he.zoomScale(gt-Se),Rt=n.Point.convert(I.offset),Dt=he.centerPoint.add(Rt),Xt=he.pointLocation(Dt),Vt=n.LngLat.convert(I.center||Xt);this._normalizeCenter(Vt);var Ft=he.project(Xt),Zt=he.project(Vt).sub(Ft),Pt=I.curve,sr=Math.max(he.width,he.height),xr=sr/Tt,Dr=Zt.mag();if("minZoom"in I){var un=n.clamp(Math.min(I.minZoom,Se,gt),he.minZoom,he.maxZoom),Xr=sr/he.zoomScale(un-Se);Pt=Math.sqrt(Xr/Dr*2)}var pn=Pt*Pt;function ai(ua){var Qa=(xr*xr-sr*sr+(ua?-1:1)*pn*pn*Dr*Dr)/(2*(ua?xr:sr)*pn*Dr);return Math.log(Math.sqrt(Qa*Qa+1)-Qa)}function Nn(ua){return(Math.exp(ua)-Math.exp(-ua))/2}function fn(ua){return(Math.exp(ua)+Math.exp(-ua))/2}function Ln(ua){return Nn(ua)/fn(ua)}var Mn=ai(0),Kn=function(ua){return fn(Mn)/fn(Mn+Pt*ua)},xi=function(ua){return sr*((fn(Mn)*Ln(Mn+Pt*ua)-Nn(Mn))/pn)/Dr},Da=(ai(1)-Mn)/Pt;if(Math.abs(Dr)<1e-6||!isFinite(Da)){if(Math.abs(sr-xr)<1e-6)return this.easeTo(I,W);var Pa=xr<sr?-1:1;Da=Math.abs(Math.log(xr/sr))/Pt,xi=function(){return 0},Kn=function(ua){return Math.exp(Pa*Pt*ua)}}if("duration"in I)I.duration=+I.duration;else{var _o="screenSpeed"in I?+I.screenSpeed/Pt:+I.speed;I.duration=1e3*Da/_o}return I.maxDuration&&I.duration>I.maxDuration&&(I.duration=0),this._zooming=!0,this._rotating=ze!==Oe,this._pitching=$e!==pt,this._padding=!he.isPaddingEqual(st),this._prepareEase(W,!1),this._ease(function(ua){var Qa=ua*Da,Vo=1/Kn(Qa);he.zoom=ua===1?gt:Se+he.scaleZoom(Vo),te._rotating&&(he.bearing=n.number(ze,Oe,ua)),te._pitching&&(he.pitch=n.number(pt,$e,ua)),te._padding&&(he.interpolatePadding(wt,st,ua),Dt=he.centerPoint.add(Rt));var ml=ua===1?Vt:he.unproject(Ft.add(Zt.mult(xi(Qa))).mult(Vo));he.setLocationAtPoint(he.renderWorldCopies?ml.wrap():ml,Dt),te._fireMoveEvents(W)},function(){return te._afterEase(W)},I),this},R.prototype.isEasing=function(){return!!this._easeFrameId},R.prototype.stop=function(){return this._stop()},R.prototype._stop=function(I,W){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var te=this._onEaseEnd;delete this._onEaseEnd,te.call(this,W)}if(!I){var ee=this.handlers;ee&&ee.stop(!1)}return this},R.prototype._ease=function(I,W,te){te.animate===!1||te.duration===0?(I(1),W()):(this._easeStart=n.browser.now(),this._easeOptions=te,this._onEaseFrame=I,this._onEaseEnd=W,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},R.prototype._renderFrameCallback=function(){var I=Math.min((n.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(I)),I<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},R.prototype._normalizeBearing=function(I,W){I=n.wrap(I,-180,180);var te=Math.abs(I-W);return Math.abs(I-360-W)<te&&(I-=360),Math.abs(I+360-W)<te&&(I+=360),I},R.prototype._normalizeCenter=function(I){var W=this.transform;if(!(!W.renderWorldCopies||W.lngRange)){var te=I.lng-W.center.lng;I.lng+=te>180?-360:te<-180?360:0}},R}(n.Evented),Un=function(R){R===void 0&&(R={}),this.options=R,n.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Un.prototype.getDefaultPosition=function(){return"bottom-right"},Un.prototype.onAdd=function(R){var G=this.options&&this.options.compact;return this._map=R,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=o.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=o.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),G&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),G===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Un.prototype.onRemove=function(){o.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Un.prototype._setElementTitle=function(R,G){var I=this._map._getUIString("AttributionControl."+G);R.title=I,R.setAttribute("aria-label",I)},Un.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Un.prototype._updateEditLink=function(){var R=this._editLink;R||(R=this._editLink=this._container.querySelector(".mapbox-improve-map"));var G=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||n.config.ACCESS_TOKEN}];if(R){var I=G.reduce(function(W,te,ee){return te.value&&(W+=te.key+"="+te.value+(ee<G.length-1?"&":"")),W},"?");R.href=n.config.FEEDBACK_URL+"/"+I+(this._map._hash?this._map._hash.getHashString(!0):""),R.rel="noopener nofollow",this._setElementTitle(R,"MapFeedback")}},Un.prototype._updateData=function(R){R&&(R.sourceDataType==="metadata"||R.sourceDataType==="visibility"||R.dataType==="style")&&(this._updateAttributions(),this._updateEditLink())},Un.prototype._updateAttributions=function(){if(this._map.style){var R=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?R=R.concat(this.options.customAttribution.map(function(Se){return typeof Se!="string"?"":Se})):typeof this.options.customAttribution=="string"&&R.push(this.options.customAttribution)),this._map.style.stylesheet){var G=this._map.style.stylesheet;this.styleOwner=G.owner,this.styleId=G.id}var I=this._map.style.sourceCaches;for(var W in I){var te=I[W];if(te.used){var ee=te.getSource();ee.attribution&&R.indexOf(ee.attribution)<0&&R.push(ee.attribution)}}R.sort(function(Se,ze){return Se.length-ze.length}),R=R.filter(function(Se,ze){for(var pt=ze+1;pt<R.length;pt++)if(R[pt].indexOf(Se)>=0)return!1;return!0});var he=R.join(" | ");he!==this._attribHTML&&(this._attribHTML=he,R.length?(this._innerContainer.innerHTML=he,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Un.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Bn=function(){n.bindAll(["_updateLogo"],this),n.bindAll(["_updateCompact"],this)};Bn.prototype.onAdd=function(R){this._map=R,this._container=o.create("div","mapboxgl-ctrl");var G=o.create("a","mapboxgl-ctrl-logo");return G.target="_blank",G.rel="noopener nofollow",G.href="https://www.mapbox.com/",G.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),G.setAttribute("rel","noopener nofollow"),this._container.appendChild(G),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Bn.prototype.onRemove=function(){o.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Bn.prototype.getDefaultPosition=function(){return"bottom-left"},Bn.prototype._updateLogo=function(R){(!R||R.sourceDataType==="metadata")&&(this._container.style.display=this._logoRequired()?"block":"none")},Bn.prototype._logoRequired=function(){if(this._map.style){var R=this._map.style.sourceCaches;for(var G in R){var I=R[G].getSource();if(I.mapbox_logo)return!0}return!1}},Bn.prototype._updateCompact=function(){var R=this._container.children;if(R.length){var G=R[0];this._map.getCanvasContainer().offsetWidth<250?G.classList.add("mapboxgl-compact"):G.classList.remove("mapboxgl-compact")}};var _n=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};_n.prototype.add=function(R){var G=++this._id,I=this._queue;return I.push({callback:R,id:G,cancelled:!1}),G},_n.prototype.remove=function(R){for(var G=this._currentlyRunning,I=G?this._queue.concat(G):this._queue,W=0,te=I;W<te.length;W+=1){var ee=te[W];if(ee.id===R){ee.cancelled=!0;return}}},_n.prototype.run=function(R){R===void 0&&(R=0);var G=this._currentlyRunning=this._queue;this._queue=[];for(var I=0,W=G;I<W.length;I+=1){var te=W[I];if(!te.cancelled&&(te.callback(R),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},_n.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Br={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},cn=n.window.HTMLImageElement,Vn=n.window.HTMLElement,Zn=n.window.ImageBitmap,En=-2,mi=22,ri=0,$i=60,Cn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:En,maxZoom:mi,minPitch:ri,maxPitch:$i,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Tn=function(H){function R(I){var W=this;if(I=n.extend({},Cn,I),I.minZoom!=null&&I.maxZoom!=null&&I.minZoom>I.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(I.minPitch!=null&&I.maxPitch!=null&&I.minPitch>I.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(I.minPitch!=null&&I.minPitch<ri)throw new Error("minPitch must be greater than or equal to "+ri);if(I.maxPitch!=null&&I.maxPitch>$i)throw new Error("maxPitch must be less than or equal to "+$i);var te=new to(I.minZoom,I.maxZoom,I.minPitch,I.maxPitch,I.renderWorldCopies);if(H.call(this,te,I),this._interactive=I.interactive,this._maxTileCacheSize=I.maxTileCacheSize,this._failIfMajorPerformanceCaveat=I.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=I.preserveDrawingBuffer,this._antialias=I.antialias,this._trackResize=I.trackResize,this._bearingSnap=I.bearingSnap,this._refreshExpiredTiles=I.refreshExpiredTiles,this._fadeDuration=I.fadeDuration,this._crossSourceCollisions=I.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=I.collectResourceTiming,this._renderTaskQueue=new _n,this._controls=[],this._mapId=n.uniqueId(),this._locale=n.extend({},Br,I.locale),this._clickTolerance=I.clickTolerance,this._requestManager=new n.RequestManager(I.transformRequest,I.accessToken),typeof I.container=="string"){if(this._container=n.window.document.getElementById(I.container),!this._container)throw new Error("Container '"+I.container+"' not found.")}else if(I.container instanceof Vn)this._container=I.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if(I.maxBounds&&this.setMaxBounds(I.maxBounds),n.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return W._update(!1)}),this.on("moveend",function(){return W._update(!1)}),this.on("zoom",function(){return W._update(!0)}),typeof n.window!="undefined"&&(n.window.addEventListener("online",this._onWindowOnline,!1),n.window.addEventListener("resize",this._onWindowResize,!1),n.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Rn(this,I);var ee=typeof I.hash=="string"&&I.hash||void 0;this._hash=I.hash&&new Sl(ee).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:I.center,zoom:I.zoom,bearing:I.bearing,pitch:I.pitch}),I.bounds&&(this.resize(),this.fitBounds(I.bounds,n.extend({},I.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=I.localIdeographFontFamily,I.style&&this.setStyle(I.style,{localIdeographFontFamily:I.localIdeographFontFamily}),I.attributionControl&&this.addControl(new Un({customAttribution:I.customAttribution})),this.addControl(new Bn,I.logoPosition),this.on("style.load",function(){W.transform.unmodified&&W.jumpTo(W.style.stylesheet)}),this.on("data",function(he){W._update(he.dataType==="style"),W.fire(new n.Event(he.dataType+"data",he))}),this.on("dataloading",function(he){W.fire(new n.Event(he.dataType+"dataloading",he))})}H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R;var G={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return R.prototype._getMapId=function(){return this._mapId},R.prototype.addControl=function(W,te){if(te===void 0&&(W.getDefaultPosition?te=W.getDefaultPosition():te="top-right"),!W||!W.onAdd)return this.fire(new n.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var ee=W.onAdd(this);this._controls.push(W);var he=this._controlPositions[te];return te.indexOf("bottom")!==-1?he.insertBefore(ee,he.firstChild):he.appendChild(ee),this},R.prototype.removeControl=function(W){if(!W||!W.onRemove)return this.fire(new n.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var te=this._controls.indexOf(W);return te>-1&&this._controls.splice(te,1),W.onRemove(this),this},R.prototype.hasControl=function(W){return this._controls.indexOf(W)>-1},R.prototype.resize=function(W){var te=this._containerDimensions(),ee=te[0],he=te[1];this._resizeCanvas(ee,he),this.transform.resize(ee,he),this.painter.resize(ee,he);var Se=!this._moving;return Se&&(this.stop(),this.fire(new n.Event("movestart",W)).fire(new n.Event("move",W))),this.fire(new n.Event("resize",W)),Se&&this.fire(new n.Event("moveend",W)),this},R.prototype.getBounds=function(){return this.transform.getBounds()},R.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},R.prototype.setMaxBounds=function(W){return this.transform.setMaxBounds(n.LngLatBounds.convert(W)),this._update()},R.prototype.setMinZoom=function(W){if(W=W==null?En:W,W>=En&&W<=this.transform.maxZoom)return this.transform.minZoom=W,this._update(),this.getZoom()<W&&this.setZoom(W),this;throw new Error("minZoom must be between "+En+" and the current maxZoom, inclusive")},R.prototype.getMinZoom=function(){return this.transform.minZoom},R.prototype.setMaxZoom=function(W){if(W=W==null?mi:W,W>=this.transform.minZoom)return this.transform.maxZoom=W,this._update(),this.getZoom()>W&&this.setZoom(W),this;throw new Error("maxZoom must be greater than the current minZoom")},R.prototype.getMaxZoom=function(){return this.transform.maxZoom},R.prototype.setMinPitch=function(W){if(W=W==null?ri:W,W<ri)throw new Error("minPitch must be greater than or equal to "+ri);if(W>=ri&&W<=this.transform.maxPitch)return this.transform.minPitch=W,this._update(),this.getPitch()<W&&this.setPitch(W),this;throw new Error("minPitch must be between "+ri+" and the current maxPitch, inclusive")},R.prototype.getMinPitch=function(){return this.transform.minPitch},R.prototype.setMaxPitch=function(W){if(W=W==null?$i:W,W>$i)throw new Error("maxPitch must be less than or equal to "+$i);if(W>=this.transform.minPitch)return this.transform.maxPitch=W,this._update(),this.getPitch()>W&&this.setPitch(W),this;throw new Error("maxPitch must be greater than the current minPitch")},R.prototype.getMaxPitch=function(){return this.transform.maxPitch},R.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},R.prototype.setRenderWorldCopies=function(W){return this.transform.renderWorldCopies=W,this._update()},R.prototype.project=function(W){return this.transform.locationPoint(n.LngLat.convert(W))},R.prototype.unproject=function(W){return this.transform.pointLocation(n.Point.convert(W))},R.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},R.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},R.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},R.prototype._createDelegatedListener=function(W,te,ee){var he=this,Se;if(W==="mouseenter"||W==="mouseover"){var ze=!1,pt=function(Tt){var Rt=he.getLayer(te)?he.queryRenderedFeatures(Tt.point,{layers:[te]}):[];Rt.length?ze||(ze=!0,ee.call(he,new Q(W,he,Tt.originalEvent,{features:Rt}))):ze=!1},wt=function(){ze=!1};return{layer:te,listener:ee,delegates:{mousemove:pt,mouseout:wt}}}else if(W==="mouseleave"||W==="mouseout"){var gt=!1,Oe=function(Tt){var Rt=he.getLayer(te)?he.queryRenderedFeatures(Tt.point,{layers:[te]}):[];Rt.length?gt=!0:gt&&(gt=!1,ee.call(he,new Q(W,he,Tt.originalEvent)))},$e=function(Tt){gt&&(gt=!1,ee.call(he,new Q(W,he,Tt.originalEvent)))};return{layer:te,listener:ee,delegates:{mousemove:Oe,mouseout:$e}}}else{var st=function(Tt){var Rt=he.getLayer(te)?he.queryRenderedFeatures(Tt.point,{layers:[te]}):[];Rt.length&&(Tt.features=Rt,ee.call(he,Tt),delete Tt.features)};return{layer:te,listener:ee,delegates:(Se={},Se[W]=st,Se)}}},R.prototype.on=function(W,te,ee){if(ee===void 0)return H.prototype.on.call(this,W,te);var he=this._createDelegatedListener(W,te,ee);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[W]=this._delegatedListeners[W]||[],this._delegatedListeners[W].push(he);for(var Se in he.delegates)this.on(Se,he.delegates[Se]);return this},R.prototype.once=function(W,te,ee){if(ee===void 0)return H.prototype.once.call(this,W,te);var he=this._createDelegatedListener(W,te,ee);for(var Se in he.delegates)this.once(Se,he.delegates[Se]);return this},R.prototype.off=function(W,te,ee){var he=this;if(ee===void 0)return H.prototype.off.call(this,W,te);var Se=function(ze){for(var pt=ze[W],wt=0;wt<pt.length;wt++){var gt=pt[wt];if(gt.layer===te&&gt.listener===ee){for(var Oe in gt.delegates)he.off(Oe,gt.delegates[Oe]);return pt.splice(wt,1),he}}};return this._delegatedListeners&&this._delegatedListeners[W]&&Se(this._delegatedListeners),this},R.prototype.queryRenderedFeatures=function(W,te){if(!this.style)return[];te===void 0&&W!==void 0&&!(W instanceof n.Point)&&!Array.isArray(W)&&(te=W,W=void 0),te=te||{},W=W||[[0,0],[this.transform.width,this.transform.height]];var ee;if(W instanceof n.Point||typeof W[0]=="number")ee=[n.Point.convert(W)];else{var he=n.Point.convert(W[0]),Se=n.Point.convert(W[1]);ee=[he,new n.Point(Se.x,he.y),Se,new n.Point(he.x,Se.y),he]}return this.style.queryRenderedFeatures(ee,te,this.transform)},R.prototype.querySourceFeatures=function(W,te){return this.style.querySourceFeatures(W,te)},R.prototype.setStyle=function(W,te){return te=n.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},te),te.diff!==!1&&te.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&W?(this._diffStyle(W,te),this):(this._localIdeographFontFamily=te.localIdeographFontFamily,this._updateStyle(W,te))},R.prototype._getUIString=function(W){var te=this._locale[W];if(te==null)throw new Error("Missing UI string '"+W+"'");return te},R.prototype._updateStyle=function(W,te){if(this.style&&(this.style.setEventedParent(null),this.style._remove()),W)this.style=new eu(this,te||{});else return delete this.style,this;return this.style.setEventedParent(this,{style:this.style}),typeof W=="string"?this.style.loadURL(W):this.style.loadJSON(W),this},R.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new eu(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},R.prototype._diffStyle=function(W,te){var ee=this;if(typeof W=="string"){var he=this._requestManager.normalizeStyleURL(W),Se=this._requestManager.transformRequest(he,n.ResourceType.Style);n.getJSON(Se,function(ze,pt){ze?ee.fire(new n.ErrorEvent(ze)):pt&&ee._updateDiff(pt,te)})}else typeof W=="object"&&this._updateDiff(W,te)},R.prototype._updateDiff=function(W,te){try{this.style.setState(W)&&this._update(!0)}catch(ee){n.warnOnce("Unable to perform style diff: "+(ee.message||ee.error||ee)+".  Rebuilding the style from scratch."),this._updateStyle(W,te)}},R.prototype.getStyle=function(){if(this.style)return this.style.serialize()},R.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():n.warnOnce("There is no style added to the map.")},R.prototype.addSource=function(W,te){return this._lazyInitEmptyStyle(),this.style.addSource(W,te),this._update(!0)},R.prototype.isSourceLoaded=function(W){var te=this.style&&this.style.sourceCaches[W];if(te===void 0){this.fire(new n.ErrorEvent(new Error("There is no source with ID '"+W+"'")));return}return te.loaded()},R.prototype.areTilesLoaded=function(){var W=this.style&&this.style.sourceCaches;for(var te in W){var ee=W[te],he=ee._tiles;for(var Se in he){var ze=he[Se];if(!(ze.state==="loaded"||ze.state==="errored"))return!1}}return!0},R.prototype.addSourceType=function(W,te,ee){return this._lazyInitEmptyStyle(),this.style.addSourceType(W,te,ee)},R.prototype.removeSource=function(W){return this.style.removeSource(W),this._update(!0)},R.prototype.getSource=function(W){return this.style.getSource(W)},R.prototype.addImage=function(W,te,ee){ee===void 0&&(ee={});var he=ee.pixelRatio;he===void 0&&(he=1);var Se=ee.sdf;Se===void 0&&(Se=!1);var ze=ee.stretchX,pt=ee.stretchY,wt=ee.content;this._lazyInitEmptyStyle();var gt=0;if(te instanceof cn||Zn&&te instanceof Zn){var Oe=n.browser.getImageData(te),$e=Oe.width,st=Oe.height,Tt=Oe.data;this.style.addImage(W,{data:new n.RGBAImage({width:$e,height:st},Tt),pixelRatio:he,stretchX:ze,stretchY:pt,content:wt,sdf:Se,version:gt})}else{if(te.width===void 0||te.height===void 0)return this.fire(new n.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Rt=te.width,Dt=te.height,Xt=te.data,Vt=te;this.style.addImage(W,{data:new n.RGBAImage({width:Rt,height:Dt},new Uint8Array(Xt)),pixelRatio:he,stretchX:ze,stretchY:pt,content:wt,sdf:Se,version:gt,userImage:Vt}),Vt.onAdd&&Vt.onAdd(this,W)}},R.prototype.updateImage=function(W,te){var ee=this.style.getImage(W);if(!ee)return this.fire(new n.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var he=te instanceof cn||Zn&&te instanceof Zn?n.browser.getImageData(te):te,Se=he.width,ze=he.height,pt=he.data;if(Se===void 0||ze===void 0)return this.fire(new n.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(Se!==ee.data.width||ze!==ee.data.height)return this.fire(new n.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var wt=!(te instanceof cn||Zn&&te instanceof Zn);ee.data.replace(pt,wt),this.style.updateImage(W,ee)},R.prototype.hasImage=function(W){return W?!!this.style.getImage(W):(this.fire(new n.ErrorEvent(new Error("Missing required image id"))),!1)},R.prototype.removeImage=function(W){this.style.removeImage(W)},R.prototype.loadImage=function(W,te){n.getImage(this._requestManager.transformRequest(W,n.ResourceType.Image),te)},R.prototype.listImages=function(){return this.style.listImages()},R.prototype.addLayer=function(W,te){return this._lazyInitEmptyStyle(),this.style.addLayer(W,te),this._update(!0)},R.prototype.moveLayer=function(W,te){return this.style.moveLayer(W,te),this._update(!0)},R.prototype.removeLayer=function(W){return this.style.removeLayer(W),this._update(!0)},R.prototype.getLayer=function(W){return this.style.getLayer(W)},R.prototype.setLayerZoomRange=function(W,te,ee){return this.style.setLayerZoomRange(W,te,ee),this._update(!0)},R.prototype.setFilter=function(W,te,ee){return ee===void 0&&(ee={}),this.style.setFilter(W,te,ee),this._update(!0)},R.prototype.getFilter=function(W){return this.style.getFilter(W)},R.prototype.setPaintProperty=function(W,te,ee,he){return he===void 0&&(he={}),this.style.setPaintProperty(W,te,ee,he),this._update(!0)},R.prototype.getPaintProperty=function(W,te){return this.style.getPaintProperty(W,te)},R.prototype.setLayoutProperty=function(W,te,ee,he){return he===void 0&&(he={}),this.style.setLayoutProperty(W,te,ee,he),this._update(!0)},R.prototype.getLayoutProperty=function(W,te){return this.style.getLayoutProperty(W,te)},R.prototype.setLight=function(W,te){return te===void 0&&(te={}),this._lazyInitEmptyStyle(),this.style.setLight(W,te),this._update(!0)},R.prototype.getLight=function(){return this.style.getLight()},R.prototype.setFeatureState=function(W,te){return this.style.setFeatureState(W,te),this._update()},R.prototype.removeFeatureState=function(W,te){return this.style.removeFeatureState(W,te),this._update()},R.prototype.getFeatureState=function(W){return this.style.getFeatureState(W)},R.prototype.getContainer=function(){return this._container},R.prototype.getCanvasContainer=function(){return this._canvasContainer},R.prototype.getCanvas=function(){return this._canvas},R.prototype._containerDimensions=function(){var W=0,te=0;return this._container&&(W=this._container.clientWidth||400,te=this._container.clientHeight||300),[W,te]},R.prototype._detectMissingCSS=function(){var W=n.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");W!=="rgb(250, 128, 114)"&&n.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},R.prototype._setupContainer=function(){var W=this._container;W.classList.add("mapboxgl-map");var te=this._missingCSSCanary=o.create("div","mapboxgl-canary",W);te.style.visibility="hidden",this._detectMissingCSS();var ee=this._canvasContainer=o.create("div","mapboxgl-canvas-container",W);this._interactive&&ee.classList.add("mapboxgl-interactive"),this._canvas=o.create("canvas","mapboxgl-canvas",ee),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var he=this._containerDimensions();this._resizeCanvas(he[0],he[1]);var Se=this._controlContainer=o.create("div","mapboxgl-control-container",W),ze=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(pt){ze[pt]=o.create("div","mapboxgl-ctrl-"+pt,Se)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},R.prototype._resizeCanvas=function(W,te){var ee=n.browser.devicePixelRatio||1;this._canvas.width=ee*W,this._canvas.height=ee*te,this._canvas.style.width=W+"px",this._canvas.style.height=te+"px"},R.prototype._setupPainter=function(){var W=n.extend({},a.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),te=this._canvas.getContext("webgl",W)||this._canvas.getContext("experimental-webgl",W);if(!te){this.fire(new n.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new qa(te,this.transform),n.webpSupported.testSupport(te)},R.prototype._contextLost=function(W){W.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new n.Event("webglcontextlost",{originalEvent:W}))},R.prototype._contextRestored=function(W){this._setupPainter(),this.resize(),this._update(),this.fire(new n.Event("webglcontextrestored",{originalEvent:W}))},R.prototype._onMapScroll=function(W){if(W.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},R.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},R.prototype._update=function(W){return this.style?(this._styleDirty=this._styleDirty||W,this._sourcesDirty=!0,this.triggerRepaint(),this):this},R.prototype._requestRenderFrame=function(W){return this._update(),this._renderTaskQueue.add(W)},R.prototype._cancelRenderFrame=function(W){this._renderTaskQueue.remove(W)},R.prototype._render=function(W){var te=this,ee,he=0,Se=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(ee=Se.createQueryEXT(),Se.beginQueryEXT(Se.TIME_ELAPSED_EXT,ee),he=n.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(W),!this._removed){var ze=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var pt=this.transform.zoom,wt=n.browser.now();this.style.zoomHistory.update(pt,wt);var gt=new n.EvaluationParameters(pt,{now:wt,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Oe=gt.crossFadingFactor();(Oe!==1||Oe!==this._crossFadingFactor)&&(ze=!0,this._crossFadingFactor=Oe),this.style.update(gt)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new n.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new n.Event("load"))),this.style&&(this.style.hasTransitions()||ze)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var $e=n.browser.now()-he;Se.endQueryEXT(Se.TIME_ELAPSED_EXT,ee),setTimeout(function(){var Rt=Se.getQueryObjectEXT(ee,Se.QUERY_RESULT_EXT)/1e6;Se.deleteQueryEXT(ee),te.fire(new n.Event("gpu-timing-frame",{cpuTime:$e,gpuTime:Rt}))},50)}if(this.listens("gpu-timing-layer")){var st=this.painter.collectGpuTimers();setTimeout(function(){var Rt=te.painter.queryGpuTimers(st);te.fire(new n.Event("gpu-timing-layer",{layerTimes:Rt}))},50)}var Tt=this._sourcesDirty||this._styleDirty||this._placementDirty;return Tt||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new n.Event("idle")),this._loaded&&!this._fullyLoaded&&!Tt&&(this._fullyLoaded=!0),this}},R.prototype.remove=function(){this._hash&&this._hash.remove();for(var W=0,te=this._controls;W<te.length;W+=1){var ee=te[W];ee.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof n.window!="undefined"&&(n.window.removeEventListener("resize",this._onWindowResize,!1),n.window.removeEventListener("orientationchange",this._onWindowResize,!1),n.window.removeEventListener("online",this._onWindowOnline,!1));var he=this.painter.context.gl.getExtension("WEBGL_lose_context");he&&he.loseContext&&he.loseContext(),Pi(this._canvasContainer),Pi(this._controlContainer),Pi(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new n.Event("remove"))},R.prototype.triggerRepaint=function(){var W=this;this.style&&!this._frame&&(this._frame=n.browser.frame(function(te){W._frame=null,W._render(te)}))},R.prototype._onWindowOnline=function(){this._update()},R.prototype._onWindowResize=function(W){this._trackResize&&this.resize({originalEvent:W})._update()},G.showTileBoundaries.get=function(){return!!this._showTileBoundaries},G.showTileBoundaries.set=function(I){this._showTileBoundaries!==I&&(this._showTileBoundaries=I,this._update())},G.showPadding.get=function(){return!!this._showPadding},G.showPadding.set=function(I){this._showPadding!==I&&(this._showPadding=I,this._update())},G.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},G.showCollisionBoxes.set=function(I){this._showCollisionBoxes!==I&&(this._showCollisionBoxes=I,I?this.style._generateCollisionBoxes():this._update())},G.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},G.showOverdrawInspector.set=function(I){this._showOverdrawInspector!==I&&(this._showOverdrawInspector=I,this._update())},G.repaint.get=function(){return!!this._repaint},G.repaint.set=function(I){this._repaint!==I&&(this._repaint=I,this.triggerRepaint())},G.vertices.get=function(){return!!this._vertices},G.vertices.set=function(I){this._vertices=I,this._update()},R.prototype._setCacheLimits=function(W,te){n.setCacheLimits(W,te)},G.version.get=function(){return n.version},Object.defineProperties(R.prototype,G),R}(ia);function Pi(H){H.parentNode&&H.parentNode.removeChild(H)}var di={showCompass:!0,showZoom:!0,visualizePitch:!1},ei=function(R){var G=this;this.options=n.extend({},di,R),this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(I){return I.preventDefault()}),this.options.showZoom&&(n.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(I){return G._map.zoomIn({},{originalEvent:I})}),o.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(I){return G._map.zoomOut({},{originalEvent:I})}),o.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(n.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(I){G.options.visualizePitch?G._map.resetNorthPitch({},{originalEvent:I}):G._map.resetNorth({},{originalEvent:I})}),this._compassIcon=o.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ei.prototype._updateZoomButtons=function(){var R=this._map.getZoom(),G=R===this._map.getMaxZoom(),I=R===this._map.getMinZoom();this._zoomInButton.disabled=G,this._zoomOutButton.disabled=I,this._zoomInButton.setAttribute("aria-disabled",G.toString()),this._zoomOutButton.setAttribute("aria-disabled",I.toString())},ei.prototype._rotateCompassArrow=function(){var R=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=R},ei.prototype.onAdd=function(R){return this._map=R,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new jn(this._map,this._compass,this.options.visualizePitch)),this._container},ei.prototype.onRemove=function(){o.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ei.prototype._createButton=function(R,G){var I=o.create("button",R,this._container);return I.type="button",I.addEventListener("click",G),I},ei.prototype._setButtonTitle=function(R,G){var I=this._map._getUIString("NavigationControl."+G);R.title=I,R.setAttribute("aria-label",I)};var jn=function(R,G,I){I===void 0&&(I=!1),this._clickTolerance=10,this.element=G,this.mouseRotate=new yn({clickTolerance:R.dragRotate._mouseRotate._clickTolerance}),this.map=R,I&&(this.mousePitch=new bn({clickTolerance:R.dragRotate._mousePitch._clickTolerance})),n.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),o.addEventListener(G,"mousedown",this.mousedown),o.addEventListener(G,"touchstart",this.touchstart,{passive:!1}),o.addEventListener(G,"touchmove",this.touchmove),o.addEventListener(G,"touchend",this.touchend),o.addEventListener(G,"touchcancel",this.reset)};jn.prototype.down=function(R,G){this.mouseRotate.mousedown(R,G),this.mousePitch&&this.mousePitch.mousedown(R,G),o.disableDrag()},jn.prototype.move=function(R,G){var I=this.map,W=this.mouseRotate.mousemoveWindow(R,G);if(W&&W.bearingDelta&&I.setBearing(I.getBearing()+W.bearingDelta),this.mousePitch){var te=this.mousePitch.mousemoveWindow(R,G);te&&te.pitchDelta&&I.setPitch(I.getPitch()+te.pitchDelta)}},jn.prototype.off=function(){var R=this.element;o.removeEventListener(R,"mousedown",this.mousedown),o.removeEventListener(R,"touchstart",this.touchstart,{passive:!1}),o.removeEventListener(R,"touchmove",this.touchmove),o.removeEventListener(R,"touchend",this.touchend),o.removeEventListener(R,"touchcancel",this.reset),this.offTemp()},jn.prototype.offTemp=function(){o.enableDrag(),o.removeEventListener(n.window,"mousemove",this.mousemove),o.removeEventListener(n.window,"mouseup",this.mouseup)},jn.prototype.mousedown=function(R){this.down(n.extend({},R,{ctrlKey:!0,preventDefault:function(){return R.preventDefault()}}),o.mousePos(this.element,R)),o.addEventListener(n.window,"mousemove",this.mousemove),o.addEventListener(n.window,"mouseup",this.mouseup)},jn.prototype.mousemove=function(R){this.move(R,o.mousePos(this.element,R))},jn.prototype.mouseup=function(R){this.mouseRotate.mouseupWindow(R),this.mousePitch&&this.mousePitch.mouseupWindow(R),this.offTemp()},jn.prototype.touchstart=function(R){R.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=o.touchPos(this.element,R.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return R.preventDefault()}},this._startPos))},jn.prototype.touchmove=function(R){R.targetTouches.length!==1?this.reset():(this._lastPos=o.touchPos(this.element,R.targetTouches)[0],this.move({preventDefault:function(){return R.preventDefault()}},this._lastPos))},jn.prototype.touchend=function(R){R.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},jn.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};function Si(H,R,G){if(H=new n.LngLat(H.lng,H.lat),R){var I=new n.LngLat(H.lng-360,H.lat),W=new n.LngLat(H.lng+360,H.lat),te=G.locationPoint(H).distSqr(R);G.locationPoint(I).distSqr(R)<te?H=I:G.locationPoint(W).distSqr(R)<te&&(H=W)}for(;Math.abs(H.lng-G.center.lng)>180;){var ee=G.locationPoint(H);if(ee.x>=0&&ee.y>=0&&ee.x<=G.width&&ee.y<=G.height)break;H.lng>G.center.lng?H.lng-=360:H.lng+=360}return H}var na={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ea(H,R,G){var I=H.classList;for(var W in na)I.remove("mapboxgl-"+G+"-anchor-"+W);I.add("mapboxgl-"+G+"-anchor-"+R)}var pi=function(H){function R(G,I){if(H.call(this),(G instanceof n.window.HTMLElement||I)&&(G=n.extend({element:G},I)),n.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=G&&G.anchor||"center",this._color=G&&G.color||"#3FB1CE",this._scale=G&&G.scale||1,this._draggable=G&&G.draggable||!1,this._clickTolerance=G&&G.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=G&&G.rotation||0,this._rotationAlignment=G&&G.rotationAlignment||"auto",this._pitchAlignment=G&&G.pitchAlignment&&G.pitchAlignment!=="auto"?G.pitchAlignment:this._rotationAlignment,!G||!G.element){this._defaultMarker=!0,this._element=o.create("div"),this._element.setAttribute("aria-label","Map marker");var W=o.createNS("http://www.w3.org/2000/svg","svg"),te=41,ee=27;W.setAttributeNS(null,"display","block"),W.setAttributeNS(null,"height",te+"px"),W.setAttributeNS(null,"width",ee+"px"),W.setAttributeNS(null,"viewBox","0 0 "+ee+" "+te);var he=o.createNS("http://www.w3.org/2000/svg","g");he.setAttributeNS(null,"stroke","none"),he.setAttributeNS(null,"stroke-width","1"),he.setAttributeNS(null,"fill","none"),he.setAttributeNS(null,"fill-rule","evenodd");var Se=o.createNS("http://www.w3.org/2000/svg","g");Se.setAttributeNS(null,"fill-rule","nonzero");var ze=o.createNS("http://www.w3.org/2000/svg","g");ze.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ze.setAttributeNS(null,"fill","#000000");for(var pt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],wt=0,gt=pt;wt<gt.length;wt+=1){var Oe=gt[wt],$e=o.createNS("http://www.w3.org/2000/svg","ellipse");$e.setAttributeNS(null,"opacity","0.04"),$e.setAttributeNS(null,"cx","10.5"),$e.setAttributeNS(null,"cy","5.80029008"),$e.setAttributeNS(null,"rx",Oe.rx),$e.setAttributeNS(null,"ry",Oe.ry),ze.appendChild($e)}var st=o.createNS("http://www.w3.org/2000/svg","g");st.setAttributeNS(null,"fill",this._color);var Tt=o.createNS("http://www.w3.org/2000/svg","path");Tt.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),st.appendChild(Tt);var Rt=o.createNS("http://www.w3.org/2000/svg","g");Rt.setAttributeNS(null,"opacity","0.25"),Rt.setAttributeNS(null,"fill","#000000");var Dt=o.createNS("http://www.w3.org/2000/svg","path");Dt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Rt.appendChild(Dt);var Xt=o.createNS("http://www.w3.org/2000/svg","g");Xt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Xt.setAttributeNS(null,"fill","#FFFFFF");var Vt=o.createNS("http://www.w3.org/2000/svg","g");Vt.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Ft=o.createNS("http://www.w3.org/2000/svg","circle");Ft.setAttributeNS(null,"fill","#000000"),Ft.setAttributeNS(null,"opacity","0.25"),Ft.setAttributeNS(null,"cx","5.5"),Ft.setAttributeNS(null,"cy","5.5"),Ft.setAttributeNS(null,"r","5.4999962");var Zt=o.createNS("http://www.w3.org/2000/svg","circle");Zt.setAttributeNS(null,"fill","#FFFFFF"),Zt.setAttributeNS(null,"cx","5.5"),Zt.setAttributeNS(null,"cy","5.5"),Zt.setAttributeNS(null,"r","5.4999962"),Vt.appendChild(Ft),Vt.appendChild(Zt),Se.appendChild(ze),Se.appendChild(st),Se.appendChild(Rt),Se.appendChild(Xt),Se.appendChild(Vt),W.appendChild(Se),W.setAttributeNS(null,"height",te*this._scale+"px"),W.setAttributeNS(null,"width",ee*this._scale+"px"),this._element.appendChild(W),this._offset=n.Point.convert(G&&G.offset||[0,-14])}else this._element=G.element,this._offset=n.Point.convert(G&&G.offset||[0,0]);this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Pt){Pt.preventDefault()}),this._element.addEventListener("mousedown",function(Pt){Pt.preventDefault()}),Ea(this._element,this._anchor,"marker"),this._popup=null}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.addTo=function(I){return this.remove(),this._map=I,I.getCanvasContainer().appendChild(this._element),I.on("move",this._update),I.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},R.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),o.remove(this._element),this._popup&&this._popup.remove(),this},R.prototype.getLngLat=function(){return this._lngLat},R.prototype.setLngLat=function(I){return this._lngLat=n.LngLat.convert(I),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},R.prototype.getElement=function(){return this._element},R.prototype.setPopup=function(I){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),I){if(!("offset"in I.options)){var W=38.1,te=13.5,ee=Math.sqrt(Math.pow(te,2)/2);I.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-W],"bottom-left":[ee,(W-te+ee)*-1],"bottom-right":[-ee,(W-te+ee)*-1],left:[te,(W-te)*-1],right:[-te,(W-te)*-1]}:this._offset}this._popup=I,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},R.prototype._onKeyPress=function(I){var W=I.code,te=I.charCode||I.keyCode;(W==="Space"||W==="Enter"||te===32||te===13)&&this.togglePopup()},R.prototype._onMapClick=function(I){var W=I.originalEvent.target,te=this._element;this._popup&&(W===te||te.contains(W))&&this.togglePopup()},R.prototype.getPopup=function(){return this._popup},R.prototype.togglePopup=function(){var I=this._popup;if(I)I.isOpen()?I.remove():I.addTo(this._map);else return this;return this},R.prototype._update=function(I){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Si(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var W="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?W="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(W="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var te="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?te="rotateX(0deg)":this._pitchAlignment==="map"&&(te="rotateX("+this._map.getPitch()+"deg)"),(!I||I.type==="moveend")&&(this._pos=this._pos.round()),o.setTransform(this._element,na[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+te+" "+W)}},R.prototype.getOffset=function(){return this._offset},R.prototype.setOffset=function(I){return this._offset=n.Point.convert(I),this._update(),this},R.prototype._onMove=function(I){if(!this._isDragging){var W=this._clickTolerance||this._map._clickTolerance;this._isDragging=I.point.dist(this._pointerdownPos)>=W}this._isDragging&&(this._pos=I.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new n.Event("dragstart"))),this.fire(new n.Event("drag")))},R.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new n.Event("dragend")),this._state="inactive"},R.prototype._addDragHandler=function(I){this._element.contains(I.originalEvent.target)&&(I.preventDefault(),this._positionDelta=I.point.sub(this._pos).add(this._offset),this._pointerdownPos=I.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},R.prototype.setDraggable=function(I){return this._draggable=!!I,this._map&&(I?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},R.prototype.isDraggable=function(){return this._draggable},R.prototype.setRotation=function(I){return this._rotation=I||0,this._update(),this},R.prototype.getRotation=function(){return this._rotation},R.prototype.setRotationAlignment=function(I){return this._rotationAlignment=I||"auto",this._update(),this},R.prototype.getRotationAlignment=function(){return this._rotationAlignment},R.prototype.setPitchAlignment=function(I){return this._pitchAlignment=I&&I!=="auto"?I:this._rotationAlignment,this._update(),this},R.prototype.getPitchAlignment=function(){return this._pitchAlignment},R}(n.Evented),Vi={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},ha;function _a(H){ha!==void 0?H(ha):n.window.navigator.permissions!==void 0?n.window.navigator.permissions.query({name:"geolocation"}).then(function(R){ha=R.state!=="denied",H(ha)}):(ha=!!n.window.navigator.geolocation,H(ha))}var Wa=0,Ls=!1,lu=function(H){function R(G){H.call(this),this.options=n.extend({},Vi,G),n.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.onAdd=function(I){return this._map=I,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),_a(this._setupUI),this._container},R.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(n.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),o.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Wa=0,Ls=!1},R.prototype._isOutOfMapMaxBounds=function(I){var W=this._map.getMaxBounds(),te=I.coords;return W&&(te.longitude<W.getWest()||te.longitude>W.getEast()||te.latitude<W.getSouth()||te.latitude>W.getNorth())},R.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}},R.prototype._onSuccess=function(I){if(this._map){if(this._isOutOfMapMaxBounds(I)){this._setErrorState(),this.fire(new n.Event("outofmaxbounds",I)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=I,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(I),(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera(I),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new n.Event("geolocate",I)),this._finish()}},R.prototype._updateCamera=function(I){var W=new n.LngLat(I.coords.longitude,I.coords.latitude),te=I.coords.accuracy,ee=this._map.getBearing(),he=n.extend({bearing:ee},this.options.fitBoundsOptions);this._map.fitBounds(W.toBounds(te),he,{geolocateSource:!0})},R.prototype._updateMarker=function(I){if(I){var W=new n.LngLat(I.coords.longitude,I.coords.latitude);this._accuracyCircleMarker.setLngLat(W).addTo(this._map),this._userLocationDotMarker.setLngLat(W).addTo(this._map),this._accuracy=I.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},R.prototype._updateCircleRadius=function(){var I=this._map._container.clientHeight/2,W=this._map.unproject([0,I]),te=this._map.unproject([1,I]),ee=W.distanceTo(te),he=Math.ceil(2*this._accuracy/ee);this._circleElement.style.width=he+"px",this._circleElement.style.height=he+"px"},R.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},R.prototype._onError=function(I){if(this._map){if(this.options.trackUserLocation)if(I.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var W=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=W,this._geolocateButton.setAttribute("aria-label",W),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(I.code===3&&Ls)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new n.Event("error",I)),this._finish()}},R.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},R.prototype._setupUI=function(I){var W=this;if(this._container.addEventListener("contextmenu",function(he){return he.preventDefault()}),this._geolocateButton=o.create("button","mapboxgl-ctrl-geolocate",this._container),o.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",I===!1){n.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var te=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=te,this._geolocateButton.setAttribute("aria-label",te)}else{var ee=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=ee,this._geolocateButton.setAttribute("aria-label",ee)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new pi(this._dotElement),this._circleElement=o.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new pi({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(he){var Se=he.originalEvent&&he.originalEvent.type==="resize";!he.geolocateSource&&W._watchState==="ACTIVE_LOCK"&&!Se&&(W._watchState="BACKGROUND",W._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),W._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),W.fire(new n.Event("trackuserlocationend")))})},R.prototype.trigger=function(){if(!this._setup)return n.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new n.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Wa--,Ls=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new n.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new n.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Wa++;var I;Wa>1?(I={maximumAge:6e5,timeout:0},Ls=!0):(I=this.options.positionOptions,Ls=!1),this._geolocationWatchID=n.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,I)}}else n.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},R.prototype._clearWatch=function(){n.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},R}(n.Evented),uo={maxWidth:100,unit:"metric"},uu=function(R){this.options=n.extend({},uo,R),n.bindAll(["_onMove","setUnit"],this)};uu.prototype.getDefaultPosition=function(){return"bottom-left"},uu.prototype._onMove=function(){ps(this._map,this._container,this.options)},uu.prototype.onAdd=function(R){return this._map=R,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",R.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},uu.prototype.onRemove=function(){o.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},uu.prototype.setUnit=function(R){this.options.unit=R,ps(this._map,this._container,this.options)};function ps(H,R,G){var I=G&&G.maxWidth||100,W=H._container.clientHeight/2,te=H.unproject([0,W]),ee=H.unproject([I,W]),he=te.distanceTo(ee);if(G&&G.unit==="imperial"){var Se=3.2808*he;if(Se>5280){var ze=Se/5280;Xl(R,I,ze,H._getUIString("ScaleControl.Miles"))}else Xl(R,I,Se,H._getUIString("ScaleControl.Feet"))}else if(G&&G.unit==="nautical"){var pt=he/1852;Xl(R,I,pt,H._getUIString("ScaleControl.NauticalMiles"))}else he>=1e3?Xl(R,I,he/1e3,H._getUIString("ScaleControl.Kilometers")):Xl(R,I,he,H._getUIString("ScaleControl.Meters"))}function Xl(H,R,G,I){var W=fc(G),te=W/G;H.style.width=R*te+"px",H.innerHTML=W+"&nbsp;"+I}function Yf(H){var R=Math.pow(10,Math.ceil(-Math.log(H)/Math.LN10));return Math.round(H*R)/R}function fc(H){var R=Math.pow(10,(""+Math.floor(H)).length-1),G=H/R;return G=G>=10?10:G>=5?5:G>=3?3:G>=2?2:G>=1?1:Yf(G),R*G}var As=function(R){this._fullscreen=!1,R&&R.container&&(R.container instanceof n.window.HTMLElement?this._container=R.container:n.warnOnce("Full screen control 'container' must be a DOM element.")),n.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in n.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in n.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in n.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in n.window.document&&(this._fullscreenchange="MSFullscreenChange")};As.prototype.onAdd=function(R){return this._map=R,this._container||(this._container=this._map.getContainer()),this._controlContainer=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",n.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},As.prototype.onRemove=function(){o.remove(this._controlContainer),this._map=null,n.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},As.prototype._checkFullscreenSupport=function(){return!!(n.window.document.fullscreenEnabled||n.window.document.mozFullScreenEnabled||n.window.document.msFullscreenEnabled||n.window.document.webkitFullscreenEnabled)},As.prototype._setupUI=function(){var R=this._fullscreenButton=o.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);o.create("span","mapboxgl-ctrl-icon",R).setAttribute("aria-hidden",!0),R.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),n.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},As.prototype._updateTitle=function(){var R=this._getTitle();this._fullscreenButton.setAttribute("aria-label",R),this._fullscreenButton.title=R},As.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},As.prototype._isFullscreen=function(){return this._fullscreen},As.prototype._changeIcon=function(){var R=n.window.document.fullscreenElement||n.window.document.mozFullScreenElement||n.window.document.webkitFullscreenElement||n.window.document.msFullscreenElement;R===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},As.prototype._onClickFullscreen=function(){this._isFullscreen()?n.window.document.exitFullscreen?n.window.document.exitFullscreen():n.window.document.mozCancelFullScreen?n.window.document.mozCancelFullScreen():n.window.document.msExitFullscreen?n.window.document.msExitFullscreen():n.window.document.webkitCancelFullScreen&&n.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Zl={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},fu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),ro=function(H){function R(G){H.call(this),this.options=n.extend(Object.create(Zl),G),n.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return H&&(R.__proto__=H),R.prototype=Object.create(H&&H.prototype),R.prototype.constructor=R,R.prototype.addTo=function(I){return this._map&&this.remove(),this._map=I,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new n.Event("open")),this},R.prototype.isOpen=function(){return!!this._map},R.prototype.remove=function(){return this._content&&o.remove(this._content),this._container&&(o.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new n.Event("close")),this},R.prototype.getLngLat=function(){return this._lngLat},R.prototype.setLngLat=function(I){return this._lngLat=n.LngLat.convert(I),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},R.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},R.prototype.getElement=function(){return this._container},R.prototype.setText=function(I){return this.setDOMContent(n.window.document.createTextNode(I))},R.prototype.setHTML=function(I){var W=n.window.document.createDocumentFragment(),te=n.window.document.createElement("body"),ee;for(te.innerHTML=I;ee=te.firstChild,!!ee;)W.appendChild(ee);return this.setDOMContent(W)},R.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},R.prototype.setMaxWidth=function(I){return this.options.maxWidth=I,this._update(),this},R.prototype.setDOMContent=function(I){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=o.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(I),this._createCloseButton(),this._update(),this._focusFirstElement(),this},R.prototype.addClassName=function(I){this._container&&this._container.classList.add(I)},R.prototype.removeClassName=function(I){this._container&&this._container.classList.remove(I)},R.prototype.setOffset=function(I){return this.options.offset=I,this._update(),this},R.prototype.toggleClassName=function(I){if(this._container)return this._container.classList.toggle(I)},R.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=o.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},R.prototype._onMouseUp=function(I){this._update(I.point)},R.prototype._onMouseMove=function(I){this._update(I.point)},R.prototype._onDrag=function(I){this._update(I.point)},R.prototype._update=function(I){var W=this,te=this._lngLat||this._trackPointer;if(!(!this._map||!te||!this._content)&&(this._container||(this._container=o.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=o.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Oe){return W._container.classList.add(Oe)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Si(this._lngLat,this._pos,this._map.transform)),!(this._trackPointer&&!I))){var ee=this._pos=this._trackPointer&&I?I:this._map.project(this._lngLat),he=this.options.anchor,Se=Eu(this.options.offset);if(!he){var ze=this._container.offsetWidth,pt=this._container.offsetHeight,wt;ee.y+Se.bottom.y<pt?wt=["top"]:ee.y>this._map.transform.height-pt?wt=["bottom"]:wt=[],ee.x<ze/2?wt.push("left"):ee.x>this._map.transform.width-ze/2&&wt.push("right"),wt.length===0?he="bottom":he=wt.join("-")}var gt=ee.add(Se[he]).round();o.setTransform(this._container,na[he]+" translate("+gt.x+"px,"+gt.y+"px)"),Ea(this._container,he,"popup")}},R.prototype._focusFirstElement=function(){if(!(!this.options.focusAfterOpen||!this._container)){var I=this._container.querySelector(fu);I&&I.focus()}},R.prototype._onClose=function(){this.remove()},R}(n.Evented);function Eu(H){if(H)if(typeof H=="number"){var R=Math.round(Math.sqrt(.5*Math.pow(H,2)));return{center:new n.Point(0,0),top:new n.Point(0,H),"top-left":new n.Point(R,R),"top-right":new n.Point(-R,R),bottom:new n.Point(0,-H),"bottom-left":new n.Point(R,-R),"bottom-right":new n.Point(-R,-R),left:new n.Point(H,0),right:new n.Point(-H,0)}}else if(H instanceof n.Point||Array.isArray(H)){var G=n.Point.convert(H);return{center:G,top:G,"top-left":G,"top-right":G,bottom:G,"bottom-left":G,"bottom-right":G,left:G,right:G}}else return{center:n.Point.convert(H.center||[0,0]),top:n.Point.convert(H.top||[0,0]),"top-left":n.Point.convert(H["top-left"]||[0,0]),"top-right":n.Point.convert(H["top-right"]||[0,0]),bottom:n.Point.convert(H.bottom||[0,0]),"bottom-left":n.Point.convert(H["bottom-left"]||[0,0]),"bottom-right":n.Point.convert(H["bottom-right"]||[0,0]),left:n.Point.convert(H.left||[0,0]),right:n.Point.convert(H.right||[0,0])};else return Eu(new n.Point(0,0))}var Ja={version:n.version,supported:a,setRTLTextPlugin:n.setRTLTextPlugin,getRTLTextPluginStatus:n.getRTLTextPluginStatus,Map:Tn,NavigationControl:ei,GeolocateControl:lu,AttributionControl:Un,ScaleControl:uu,FullscreenControl:As,Popup:ro,Marker:pi,Style:eu,LngLat:n.LngLat,LngLatBounds:n.LngLatBounds,Point:n.Point,MercatorCoordinate:n.MercatorCoordinate,Evented:n.Evented,config:n.config,prewarm:Mi,clearPrewarmedResources:Ui,get accessToken(){return n.config.ACCESS_TOKEN},set accessToken(H){n.config.ACCESS_TOKEN=H},get baseApiUrl(){return n.config.API_URL},set baseApiUrl(H){n.config.API_URL=H},get workerCount(){return dn.workerCount},set workerCount(H){dn.workerCount=H},get maxParallelImageRequests(){return n.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(H){n.config.MAX_PARALLEL_IMAGE_REQUESTS=H},clearStorage:function(R){n.clearTileCache(R)},workerUrl:""};return Ja}),r})});var f9e=ne((Nyr,u9e)=>{"use strict";var j_=Wt(),UHt=Es().sanitizeHTML,VHt=dZ(),o9e=My();function s9e(e,t){this.subplot=e,this.uid=e.uid+"-"+t,this.index=t,this.idSource="source-"+this.uid,this.idLayer=o9e.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var Np=s9e.prototype;Np.update=function(t){this.visible?this.needsNewImage(t)?this.updateImage(t):this.needsNewSource(t)?(this.removeLayer(),this.updateSource(t),this.updateLayer(t)):this.needsNewLayer(t)?this.updateLayer(t):this.updateStyle(t):(this.updateSource(t),this.updateLayer(t)),this.visible=$I(t)};Np.needsNewImage=function(e){var t=this.subplot.map;return t.getSource(this.idSource)&&this.sourceType==="image"&&e.sourcetype==="image"&&(this.source!==e.source||JSON.stringify(this.coordinates)!==JSON.stringify(e.coordinates))};Np.needsNewSource=function(e){return this.sourceType!==e.sourcetype||JSON.stringify(this.source)!==JSON.stringify(e.source)||this.layerType!==e.type};Np.needsNewLayer=function(e){return this.layerType!==e.type||this.below!==this.subplot.belowLookup["layout-"+this.index]};Np.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]};Np.updateImage=function(e){var t=this.subplot.map;t.getSource(this.idSource).updateImage({url:e.source,coordinates:e.coordinates});var r=this.findFollowingMapboxLayerId(this.lookupBelow());r!==null&&this.subplot.map.moveLayer(this.idLayer,r)};Np.updateSource=function(e){var t=this.subplot.map;if(t.getSource(this.idSource)&&t.removeSource(this.idSource),this.sourceType=e.sourcetype,this.source=e.source,!!$I(e)){var r=HHt(e);t.addSource(this.idSource,r)}};Np.findFollowingMapboxLayerId=function(e){if(e==="traces")for(var t=this.subplot.getMapLayers(),r=0;r<t.length;r++){var i=t[r].id;if(typeof i=="string"&&i.indexOf(o9e.traceLayerPrefix)===0){e=i;break}}return e};Np.updateLayer=function(e){var t=this.subplot,r=l9e(e),i=this.lookupBelow(),n=this.findFollowingMapboxLayerId(i);this.removeLayer(),$I(e)&&t.addLayer({id:this.idLayer,source:this.idSource,"source-layer":e.sourcelayer||"",type:e.type,minzoom:e.minzoom,maxzoom:e.maxzoom,layout:r.layout,paint:r.paint},n),this.layerType=e.type,this.below=i};Np.updateStyle=function(e){if($I(e)){var t=l9e(e);this.subplot.setOptions(this.idLayer,"setLayoutProperty",t.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",t.paint)}};Np.removeLayer=function(){var e=this.subplot.map;e.getLayer(this.idLayer)&&e.removeLayer(this.idLayer)};Np.dispose=function(){var e=this.subplot.map;e.getLayer(this.idLayer)&&e.removeLayer(this.idLayer),e.getSource(this.idSource)&&e.removeSource(this.idSource)};function $I(e){if(!e.visible)return!1;var t=e.source;if(Array.isArray(t)&&t.length>0){for(var r=0;r<t.length;r++)if(typeof t[r]!="string"||t[r].length===0)return!1;return!0}return j_.isPlainObject(t)||typeof t=="string"&&t.length>0}function l9e(e){var t={},r={};switch(e.type){case"circle":j_.extendFlat(r,{"circle-radius":e.circle.radius,"circle-color":e.color,"circle-opacity":e.opacity});break;case"line":j_.extendFlat(r,{"line-width":e.line.width,"line-color":e.color,"line-opacity":e.opacity,"line-dasharray":e.line.dash});break;case"fill":j_.extendFlat(r,{"fill-color":e.color,"fill-outline-color":e.fill.outlinecolor,"fill-opacity":e.opacity});break;case"symbol":var i=e.symbol,n=VHt(i.textposition,i.iconsize);j_.extendFlat(t,{"icon-image":i.icon+"-15","icon-size":i.iconsize/10,"text-field":i.text,"text-size":i.textfont.size,"text-anchor":n.anchor,"text-offset":n.offset,"symbol-placement":i.placement}),j_.extendFlat(r,{"icon-color":e.color,"text-color":i.textfont.color,"text-opacity":e.opacity});break;case"raster":j_.extendFlat(r,{"raster-fade-duration":0,"raster-opacity":e.opacity});break}return{layout:t,paint:r}}function HHt(e){var t=e.sourcetype,r=e.source,i={type:t},n;return t==="geojson"?n="data":t==="vector"?n=typeof r=="string"?"url":"tiles":t==="raster"?(n="tiles",i.tileSize=256):t==="image"&&(n="url",i.coordinates=e.coordinates),i[n]=r,e.sourceattribution&&(i.attribution=UHt(e.sourceattribution)),i}u9e.exports=function(t,r,i){var n=new s9e(t,r);return n.update(i),n}});var x9e=ne((Uyr,m9e)=>{"use strict";var bZ=_Z(),wZ=Wt(),d9e=O3(),c9e=wi(),GHt=Xi(),YHt=Hh(),eF=Ol(),p9e=r0(),WHt=p9e.drawMode,XHt=p9e.selectMode,ZHt=Mf().prepSelect,jHt=Mf().clearOutline,KHt=Mf().clearSelectionsCache,JHt=Mf().selectOnClick,A1=My(),QHt=f9e();function g9e(e,t){this.id=t,this.gd=e;var r=e._fullLayout,i=e._context;this.container=r._glcontainer.node(),this.isStatic=i.staticPlot,this.uid=r._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(r),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var uf=g9e.prototype;uf.plot=function(e,t,r){var i=this,n=t[i.id];i.map&&n.accesstoken!==i.accessToken&&(i.map.remove(),i.map=null,i.styleObj=null,i.traceHash={},i.layerList=[]);var a;i.map?a=new Promise(function(o,s){i.updateMap(e,t,o,s)}):a=new Promise(function(o,s){i.createMap(e,t,o,s)}),r.push(a)};uf.createMap=function(e,t,r,i){var n=this,a=t[n.id],o=n.styleObj=y9e(a.style,t);n.accessToken=a.accesstoken;var s=a.bounds,l=s?[[s.west,s.south],[s.east,s.north]]:null,u=n.map=new bZ.Map({container:n.div,style:o.style,center:TZ(a.center),zoom:a.zoom,bearing:a.bearing,pitch:a.pitch,maxBounds:l,interactive:!n.isStatic,preserveDrawingBuffer:n.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new bZ.AttributionControl({compact:!0}));u._canvas.style.left="0px",u._canvas.style.top="0px",n.rejectOnError(i),n.isStatic||n.initFx(e,t);var f=[];f.push(new Promise(function(c){u.once("load",c)})),f=f.concat(d9e.fetchTraceGeoData(e)),Promise.all(f).then(function(){n.fillBelowLookup(e,t),n.updateData(e),n.updateLayout(t),n.resolveOnRender(r)}).catch(i)};uf.updateMap=function(e,t,r,i){var n=this,a=n.map,o=t[this.id];n.rejectOnError(i);var s=[],l=y9e(o.style,t);JSON.stringify(n.styleObj)!==JSON.stringify(l)&&(n.styleObj=l,a.setStyle(l.style),n.traceHash={},s.push(new Promise(function(u){a.once("styledata",u)}))),s=s.concat(d9e.fetchTraceGeoData(e)),Promise.all(s).then(function(){n.fillBelowLookup(e,t),n.updateData(e),n.updateLayout(t),n.resolveOnRender(r)}).catch(i)};uf.fillBelowLookup=function(e,t){var r=t[this.id],i=r.layers,n,a,o=this.belowLookup={},s=!1;for(n=0;n<e.length;n++){var l=e[n][0].trace,u=l._module;typeof l.below=="string"?a=l.below:u.getBelow&&(a=u.getBelow(l,this)),a===""&&(s=!0),o["trace-"+l.uid]=a||""}for(n=0;n<i.length;n++){var f=i[n];typeof f.below=="string"?a=f.below:s?a="traces":a="",o["layout-"+n]=a}var c={},h,v;for(h in o)a=o[h],c[a]?c[a].push(h):c[a]=[h];for(a in c){var d=c[a];if(d.length>1)for(n=0;n<d.length;n++)h=d[n],h.indexOf("trace-")===0?(v=h.split("trace-")[1],this.traceHash[v]&&(this.traceHash[v].below=null)):h.indexOf("layout-")===0&&(v=h.split("layout-")[1],this.layerList[v]&&(this.layerList[v].below=null))}};var h9e={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};uf.updateData=function(e){var t=this.traceHash,r,i,n,a,o=e.slice().sort(function(c,h){return h9e[c[0].trace.type]-h9e[h[0].trace.type]});for(n=0;n<o.length;n++){var s=o[n];i=s[0].trace,r=t[i.uid];var l=!1;r&&(r.type===i.type?(r.update(s),l=!0):r.dispose()),!l&&i._module&&(t[i.uid]=i._module.plot(this,s))}var u=Object.keys(t);e:for(n=0;n<u.length;n++){var f=u[n];for(a=0;a<e.length;a++)if(i=e[a][0].trace,f===i.uid)continue e;r=t[f],r.dispose(),delete t[f]}};uf.updateLayout=function(e){var t=this.map,r=e[this.id];!this.dragging&&!this.wheeling&&(t.setCenter(TZ(r.center)),t.setZoom(r.zoom),t.setBearing(r.bearing),t.setPitch(r.pitch)),this.updateLayers(e),this.updateFramework(e),this.updateFx(e),this.map.resize(),this.gd._context._scrollZoom.mapbox?t.scrollZoom.enable():t.scrollZoom.disable()};uf.resolveOnRender=function(e){var t=this.map;t.on("render",function r(){t.loaded()&&(t.off("render",r),setTimeout(e,10))})};uf.rejectOnError=function(e){var t=this.map;function r(){e(new Error(A1.mapOnErrorMsg))}t.once("error",r),t.once("style.error",r),t.once("source.error",r),t.once("tile.error",r),t.once("layer.error",r)};uf.createFramework=function(e){var t=this,r=t.div=document.createElement("div");r.id=t.uid,r.style.position="absolute",t.container.appendChild(r),t.xaxis={_id:"x",c2p:function(i){return t.project(i).x}},t.yaxis={_id:"y",c2p:function(i){return t.project(i).y}},t.updateFramework(e),t.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},GHt.setConvert(t.mockAxis,e)};uf.initFx=function(e,t){var r=this,i=r.gd,n=r.map;n.on("moveend",function(s){if(r.map){var l=i._fullLayout;if(s.originalEvent||r.wheeling){var u=l[r.id];c9e.call("_storeDirectGUIEdit",i.layout,l._preGUI,r.getViewEdits(u));var f=r.getView();u._input.center=u.center=f.center,u._input.zoom=u.zoom=f.zoom,u._input.bearing=u.bearing=f.bearing,u._input.pitch=u.pitch=f.pitch,i.emit("plotly_relayout",r.getViewEditsWithDerived(f))}s.originalEvent&&s.originalEvent.type==="mouseup"?r.dragging=!1:r.wheeling&&(r.wheeling=!1),l._rehover&&l._rehover()}}),n.on("wheel",function(){r.wheeling=!0}),n.on("mousemove",function(s){var l=r.div.getBoundingClientRect(),u=[s.originalEvent.offsetX,s.originalEvent.offsetY];s.target.getBoundingClientRect=function(){return l},r.xaxis.p2c=function(){return n.unproject(u).lng},r.yaxis.p2c=function(){return n.unproject(u).lat},i._fullLayout._rehover=function(){i._fullLayout._hoversubplot===r.id&&i._fullLayout[r.id]&&eF.hover(i,s,r.id)},eF.hover(i,s,r.id),i._fullLayout._hoversubplot=r.id});function a(){eF.loneUnhover(t._hoverlayer)}n.on("dragstart",function(){r.dragging=!0,a()}),n.on("zoomstart",a),n.on("mouseout",function(){i._fullLayout._hoversubplot=null});function o(){var s=r.getView();i.emit("plotly_relayouting",r.getViewEditsWithDerived(s))}n.on("drag",o),n.on("zoom",o),n.on("dblclick",function(){var s=i._fullLayout[r.id];c9e.call("_storeDirectGUIEdit",i.layout,i._fullLayout._preGUI,r.getViewEdits(s));var l=r.viewInitial;n.setCenter(TZ(l.center)),n.setZoom(l.zoom),n.setBearing(l.bearing),n.setPitch(l.pitch);var u=r.getView();s._input.center=s.center=u.center,s._input.zoom=s.zoom=u.zoom,s._input.bearing=s.bearing=u.bearing,s._input.pitch=s.pitch=u.pitch,i.emit("plotly_doubleclick",null),i.emit("plotly_relayout",r.getViewEditsWithDerived(u))}),r.clearOutline=function(){KHt(r.dragOptions),jHt(r.dragOptions.gd)},r.onClickInPanFn=function(s){return function(l){var u=i._fullLayout.clickmode;u.indexOf("select")>-1&&JHt(l.originalEvent,i,[r.xaxis],[r.yaxis],r.id,s),u.indexOf("event")>-1&&eF.click(i,l.originalEvent)}}};uf.updateFx=function(e){var t=this,r=t.map,i=t.gd;if(t.isStatic)return;function n(l){var u=t.map.unproject(l);return[u.lng,u.lat]}var a=e.dragmode,o;o=function(l,u){if(u.isRect){var f=l.range={};f[t.id]=[n([u.xmin,u.ymin]),n([u.xmax,u.ymax])]}else{var c=l.lassoPoints={};c[t.id]=u.map(n)}};var s=t.dragOptions;t.dragOptions=wZ.extendDeep(s||{},{dragmode:e.dragmode,element:t.div,gd:i,plotinfo:{id:t.id,domain:e[t.id].domain,xaxis:t.xaxis,yaxis:t.yaxis,fillRangeItems:o},xaxes:[t.xaxis],yaxes:[t.yaxis],subplot:t.id}),r.off("click",t.onClickInPanHandler),XHt(a)||WHt(a)?(r.dragPan.disable(),r.on("zoomstart",t.clearOutline),t.dragOptions.prepFn=function(l,u,f){ZHt(l,u,f,t.dragOptions,a)},YHt.init(t.dragOptions)):(r.dragPan.enable(),r.off("zoomstart",t.clearOutline),t.div.onmousedown=null,t.div.ontouchstart=null,t.div.removeEventListener("touchstart",t.div._ontouchstart),t.onClickInPanHandler=t.onClickInPanFn(t.dragOptions),r.on("click",t.onClickInPanHandler))};uf.updateFramework=function(e){var t=e[this.id].domain,r=e._size,i=this.div.style;i.width=r.w*(t.x[1]-t.x[0])+"px",i.height=r.h*(t.y[1]-t.y[0])+"px",i.left=r.l+t.x[0]*r.w+"px",i.top=r.t+(1-t.y[1])*r.h+"px",this.xaxis._offset=r.l+t.x[0]*r.w,this.xaxis._length=r.w*(t.x[1]-t.x[0]),this.yaxis._offset=r.t+(1-t.y[1])*r.h,this.yaxis._length=r.h*(t.y[1]-t.y[0])};uf.updateLayers=function(e){var t=e[this.id],r=t.layers,i=this.layerList,n;if(r.length!==i.length){for(n=0;n<i.length;n++)i[n].dispose();for(i=this.layerList=[],n=0;n<r.length;n++)i.push(QHt(this,n,r[n]))}else for(n=0;n<r.length;n++)i[n].update(r[n])};uf.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))};uf.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()};uf.setOptions=function(e,t,r){for(var i in r)this.map[t](e,i,r[i])};uf.getMapLayers=function(){return this.map.getStyle().layers};uf.addLayer=function(e,t){var r=this.map;if(typeof t=="string"){if(t===""){r.addLayer(e,t);return}for(var i=this.getMapLayers(),n=0;n<i.length;n++)if(t===i[n].id){r.addLayer(e,t);return}wZ.warn(["Trying to add layer with *below* value",t,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}r.addLayer(e)};uf.project=function(e){return this.map.project(new bZ.LngLat(e[0],e[1]))};uf.getView=function(){var e=this.map,t=e.getCenter(),r=t.lng,i=t.lat,n={lon:r,lat:i},a=e.getCanvas(),o=parseInt(a.style.width),s=parseInt(a.style.height);return{center:n,zoom:e.getZoom(),bearing:e.getBearing(),pitch:e.getPitch(),_derived:{coordinates:[e.unproject([0,0]).toArray(),e.unproject([o,0]).toArray(),e.unproject([o,s]).toArray(),e.unproject([0,s]).toArray()]}}};uf.getViewEdits=function(e){for(var t=this.id,r=["center","zoom","bearing","pitch"],i={},n=0;n<r.length;n++){var a=r[n];i[t+"."+a]=e[a]}return i};uf.getViewEditsWithDerived=function(e){var t=this.id,r=this.getViewEdits(e);return r[t+"._derived"]=e._derived,r};function y9e(e,t){var r={};if(wZ.isPlainObject(e))r.id=e.id,r.style=e;else if(typeof e=="string")if(r.id=e,A1.styleValuesMapbox.indexOf(e)!==-1)r.style=v9e(e);else if(A1.stylesNonMapbox[e]){r.style=A1.stylesNonMapbox[e];var i=r.style.sources["plotly-"+e],n=i?i.tiles:void 0;n&&n[0]&&n[0].slice(-9)==="?api_key="&&(n[0]+=t._mapboxAccessToken)}else r.style=e;else r.id=A1.styleValueDflt,r.style=v9e(A1.styleValueDflt);return r.transition={duration:0,delay:0},r}function v9e(e){return A1.styleUrlPrefix+e+"-"+A1.styleUrlSuffix}function TZ(e){return[e.lon,e.lat]}m9e.exports=g9e});var w9e=ne((Vyr,b9e)=>{"use strict";var AZ=Wt(),$Ht=Kx(),eGt=ch(),_9e=M5();b9e.exports=function(t,r,i){$Ht(t,r,i,{type:"mapbox",attributes:_9e,handleDefaults:tGt,partition:"y",accessToken:r._mapboxAccessToken})};function tGt(e,t,r,i){r("accesstoken",i.accessToken),r("style"),r("center.lon"),r("center.lat"),r("zoom"),r("bearing"),r("pitch");var n=r("bounds.west"),a=r("bounds.east"),o=r("bounds.south"),s=r("bounds.north");(n===void 0||a===void 0||o===void 0||s===void 0)&&delete t.bounds,eGt(e,t,{name:"layers",handleItemDefaults:rGt}),t._input=e}function rGt(e,t){function r(l,u){return AZ.coerce(e,t,_9e.layers,l,u)}var i=r("visible");if(i){var n=r("sourcetype"),a=n==="raster"||n==="image";r("source"),r("sourceattribution"),n==="vector"&&r("sourcelayer"),n==="image"&&r("coordinates");var o;a&&(o="raster");var s=r("type",o);a&&s!=="raster"&&(s=t.type="raster",AZ.log("Source types *raster* and *image* must drawn *raster* layer type.")),r("below"),r("color"),r("opacity"),r("minzoom"),r("maxzoom"),s==="circle"&&r("circle.radius"),s==="line"&&(r("line.width"),r("line.dash")),s==="fill"&&r("fill.outlinecolor"),s==="symbol"&&(r("symbol.icon"),r("symbol.iconsize"),r("symbol.text"),AZ.coerceFont(r,"symbol.textfont"),r("symbol.textposition"),r("symbol.placement"))}}});var tF=ne(gd=>{"use strict";var T9e=_Z(),xg=Wt(),MZ=xg.strTranslate,nGt=xg.strScale,iGt=vc().getSubplotCalcData,aGt=kd(),oGt=Ai(),A9e=aa(),sGt=Es(),lGt=x9e(),M1="mapbox",_g=gd.constants=My();gd.name=M1;gd.attr="subplot";gd.idRoot=M1;gd.idRegex=gd.attrRegex=xg.counterRegex(M1);gd.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}};gd.layoutAttributes=M5();gd.supplyLayoutDefaults=w9e();gd.plot=function(t){var r=t._fullLayout,i=t.calcdata,n=r._subplots[M1];if(T9e.version!==_g.requiredVersion)throw new Error(_g.wrongVersionErrorMsg);var a=uGt(t,n);T9e.accessToken=a;for(var o=0;o<n.length;o++){var s=n[o],l=iGt(i,M1,s),u=r[s],f=u._subplot;f||(f=new lGt(t,s),r[s]._subplot=f),f.viewInitial||(f.viewInitial={center:xg.extendFlat({},u.center),zoom:u.zoom,bearing:u.bearing,pitch:u.pitch}),f.plot(l,r,t._promises)}};gd.clean=function(e,t,r,i){for(var n=i._subplots[M1]||[],a=0;a<n.length;a++){var o=n[a];!t[o]&&i[o]._subplot&&i[o]._subplot.destroy()}};gd.toSVG=function(e){for(var t=e._fullLayout,r=t._subplots[M1],i=t._size,n=0;n<r.length;n++){var a=t[r[n]],o=a.domain,s=a._subplot,l=s.toImage("png"),u=t._glimages.append("svg:image");u.attr({xmlns:aGt.svg,"xlink:href":l,x:i.l+i.w*o.x[0],y:i.t+i.h*(1-o.y[1]),width:i.w*(o.x[1]-o.x[0]),height:i.h*(o.y[1]-o.y[0]),preserveAspectRatio:"none"});var f=oGt.select(a._subplot.div),c=f.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!c){var h=t._glimages.append("g");h.attr("transform",MZ(i.l+i.w*o.x[0]+10,i.t+i.h*(1-o.y[0])-31)),h.append("path").attr("d",_g.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),h.append("path").attr("d",_g.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),h.append("path").attr("d",_g.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),h.append("polygon").attr("points",_g.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var v=f.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),d=t._glimages.append("g"),_=d.append("text");_.text(v).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":v});var T=A9e.bBox(_.node()),p=i.w*(o.x[1]-o.x[0]);if(T.width>p/2){var M=v.split("|").join("<br>");_.text(M).attr("data-unformatted",M).call(sGt.convertToTspans,e),T=A9e.bBox(_.node())}_.attr("transform",MZ(-3,-T.height+8)),d.insert("rect",".static-attribution").attr({x:-T.width-6,y:-T.height-3,width:T.width+6,height:T.height+3,fill:"rgba(255, 255, 255, 0.75)"});var b=1;T.width+6>p&&(b=p/(T.width+6));var w=[i.l+i.w*o.x[1],i.t+i.h*(1-o.y[0])];d.attr("transform",MZ(w[0],w[1])+nGt(b))}};function uGt(e,t){var r=e._fullLayout,i=e._context;if(i.mapboxAccessToken==="")return"";for(var n=[],a=[],o=!1,s=!1,l=0;l<t.length;l++){var u=r[t[l]],f=u.accesstoken;M9e(u.style)&&(f?xg.pushUnique(n,f):(M9e(u._input.style)&&(xg.error("Uses Mapbox map style, but did not set an access token."),o=!0),s=!0)),f&&xg.pushUnique(a,f)}if(s){var c=o?_g.noAccessTokenErrorMsg:_g.missingStyleErrorMsg;throw xg.error(c),new Error(c)}return n.length?(n.length>1&&xg.warn(_g.multipleTokensErrorMsg),n[0]):(a.length&&xg.log(["Listed mapbox access token(s)",a.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function M9e(e){return typeof e=="string"&&(_g.styleValuesMapbox.indexOf(e)!==-1||e.indexOf("mapbox://")===0||e.indexOf("stamen")===0)}gd.updateFx=function(e){for(var t=e._fullLayout,r=t._subplots[M1],i=0;i<r.length;i++){var n=t[r[i]]._subplot;n.updateFx(t)}}});var E9e=ne((Gyr,S9e)=>{"use strict";S9e.exports={attributes:XI(),supplyDefaults:NNe(),colorbar:ph(),formatLabels:vZ(),calc:aY(),plot:$Ne(),hoverPoints:QI().hoverPoints,eventData:n9e(),selectPoints:a9e(),styleOnSelect:function(e,t){if(t){var r=t[0].trace;r._glTrace.update(t)}},moduleType:"trace",name:"scattermapbox",basePlotModule:tF(),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}});var C9e=ne((Yyr,k9e)=>{"use strict";k9e.exports=E9e()});var SZ=ne((Wyr,L9e)=>{"use strict";var Sy=GE(),fGt=Ps(),cGt=Ba().hovertemplateAttrs,hGt=es(),S1=oa().extendFlat;L9e.exports=S1({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:S1({},Sy.featureidkey,{}),below:{valType:"string",editType:"plot"},text:Sy.text,hovertext:Sy.hovertext,marker:{line:{color:S1({},Sy.marker.line.color,{editType:"plot"}),width:S1({},Sy.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:S1({},Sy.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:S1({},Sy.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:S1({},Sy.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:Sy.hoverinfo,hovertemplate:cGt({},{keys:["properties"]}),showlegend:S1({},hGt.showlegend,{dflt:!1})},fGt("",{cLetter:"z",editTypeOverride:"calc"}))});var R9e=ne((Xyr,P9e)=>{"use strict";var C5=Wt(),vGt=Kf(),dGt=SZ();P9e.exports=function(t,r,i,n){function a(f,c){return C5.coerce(t,r,dGt,f,c)}var o=a("locations"),s=a("z"),l=a("geojson");if(!C5.isArrayOrTypedArray(o)||!o.length||!C5.isArrayOrTypedArray(s)||!s.length||!(typeof l=="string"&&l!==""||C5.isPlainObject(l))){r.visible=!1;return}a("featureidkey"),r._length=Math.min(o.length,s.length),a("below"),a("text"),a("hovertext"),a("hovertemplate");var u=a("marker.line.width");u&&a("marker.line.color"),a("marker.opacity"),vGt(t,r,n,a,{prefix:"",cLetter:"z"}),C5.coerceSelectionMarkerOpacity(r,a)}});var EZ=ne((Zyr,F9e)=>{"use strict";var pGt=la(),Ey=Wt(),gGt=ul(),yGt=aa(),mGt=zE().makeBlank,D9e=O3();function xGt(e){var t=e[0].trace,r=t.visible===!0&&t._length!==0,i={layout:{visibility:"none"},paint:{}},n={layout:{visibility:"none"},paint:{}},a=t._opts={fill:i,line:n,geojson:mGt()};if(!r)return a;var o=D9e.extractTraceFeature(e);if(!o)return a;var s=gGt.makeColorScaleFuncFromTrace(t),l=t.marker,u=l.line||{},f;Ey.isArrayOrTypedArray(l.opacity)&&(f=function(M){var b=M.mo;return pGt(b)?+Ey.constrain(b,0,1):0});var c;Ey.isArrayOrTypedArray(u.color)&&(c=function(M){return M.mlc});var h;Ey.isArrayOrTypedArray(u.width)&&(h=function(M){return M.mlw});for(var v=0;v<e.length;v++){var d=e[v],_=d.fOut;if(_){var T=_.properties;T.fc=s(d.z),f&&(T.mo=f(d)),c&&(T.mlc=c(d)),h&&(T.mlw=h(d)),d.ct=T.ct,d._polygons=D9e.feature2polygons(_)}}var p=f?{type:"identity",property:"mo"}:l.opacity;return Ey.extendFlat(i.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":p}),Ey.extendFlat(n.paint,{"line-color":c?{type:"identity",property:"mlc"}:u.color,"line-width":h?{type:"identity",property:"mlw"}:u.width,"line-opacity":p}),i.layout.visibility="visible",n.layout.visibility="visible",a.geojson={type:"FeatureCollection",features:o},I9e(e),a}function I9e(e){var t=e[0].trace,r=t._opts,i;if(t.selectedpoints){for(var n=yGt.makeSelectedPointStyleFns(t),a=0;a<e.length;a++){var o=e[a];o.fOut&&(o.fOut.properties.mo2=n.selectedOpacityFn(o))}i={type:"identity",property:"mo2"}}else i=Ey.isArrayOrTypedArray(t.marker.opacity)?{type:"identity",property:"mo"}:t.marker.opacity;return Ey.extendFlat(r.fill.paint,{"fill-opacity":i}),Ey.extendFlat(r.line.paint,{"line-opacity":i}),r}F9e.exports={convert:xGt,convertOnSelect:I9e}});var N9e=ne((jyr,B9e)=>{"use strict";var z9e=EZ().convert,_Gt=EZ().convertOnSelect,q9e=My().traceLayerPrefix;function O9e(e,t){this.type="choroplethmapbox",this.subplot=e,this.uid=t,this.sourceId="source-"+t,this.layerList=[["fill",q9e+t+"-fill"],["line",q9e+t+"-line"]],this.below=null}var vT=O9e.prototype;vT.update=function(e){this._update(z9e(e)),e[0].trace._glTrace=this};vT.updateOnSelect=function(e){this._update(_Gt(e))};vT._update=function(e){var t=this.subplot,r=this.layerList,i=t.belowLookup["trace-"+this.uid];t.map.getSource(this.sourceId).setData(e.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(e,i),this.below=i);for(var n=0;n<r.length;n++){var a=r[n],o=a[0],s=a[1],l=e[o];t.setOptions(s,"setLayoutProperty",l.layout),l.layout.visibility==="visible"&&t.setOptions(s,"setPaintProperty",l.paint)}};vT._addLayers=function(e,t){for(var r=this.subplot,i=this.layerList,n=this.sourceId,a=0;a<i.length;a++){var o=i[a],s=o[0],l=e[s];r.addLayer({type:s,id:o[1],source:n,layout:l.layout,paint:l.paint},t)}};vT._removeLayers=function(){for(var e=this.subplot.map,t=this.layerList,r=t.length-1;r>=0;r--)e.removeLayer(t[r][1])};vT.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)};B9e.exports=function(t,r){var i=r[0].trace,n=new O9e(t,i.uid),a=n.sourceId,o=z9e(r),s=n.below=t.belowLookup["trace-"+i.uid];return t.map.addSource(a,{type:"geojson",data:o.geojson}),n._addLayers(o,s),r[0].trace._glTrace=n,n}});var V9e=ne((Kyr,U9e)=>{"use strict";U9e.exports={attributes:SZ(),supplyDefaults:R9e(),colorbar:jx(),calc:WY(),plot:N9e(),hoverPoints:jY(),eventData:KY(),selectPoints:JY(),styleOnSelect:function(e,t){if(t){var r=t[0].trace;r._glTrace.updateOnSelect(t)}},getBelow:function(e,t){for(var r=t.getMapLayers(),i=r.length-2;i>=0;i--){var n=r[i].id;if(typeof n=="string"&&n.indexOf("water")===0){for(var a=i+1;a<r.length;a++)if(n=r[a].id,typeof n=="string"&&n.indexOf("plotly-")===-1)return n}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:tF(),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}});var G9e=ne((Jyr,H9e)=>{"use strict";H9e.exports=V9e()});var CZ=ne((Qyr,W9e)=>{"use strict";var bGt=Ps(),wGt=Ba().hovertemplateAttrs,Y9e=es(),rF=XI(),kZ=oa().extendFlat;W9e.exports=kZ({lon:rF.lon,lat:rF.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:rF.text,hovertext:rF.hovertext,hoverinfo:kZ({},Y9e.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:wGt(),showlegend:kZ({},Y9e.showlegend,{dflt:!1})},bGt("",{cLetter:"z",editTypeOverride:"calc"}))});var Z9e=ne(($yr,X9e)=>{"use strict";var TGt=Wt(),AGt=Kf(),MGt=CZ();X9e.exports=function(t,r,i,n){function a(u,f){return TGt.coerce(t,r,MGt,u,f)}var o=a("lon")||[],s=a("lat")||[],l=Math.min(o.length,s.length);if(!l){r.visible=!1;return}r._length=l,a("z"),a("radius"),a("below"),a("text"),a("hovertext"),a("hovertemplate"),AGt(t,r,n,a,{prefix:"",cLetter:"z"})}});var J9e=ne((emr,K9e)=>{"use strict";var LZ=la(),SGt=Wt().isArrayOrTypedArray,PZ=$a().BADNUM,EGt=gv(),j9e=Wt()._;K9e.exports=function(t,r){for(var i=r._length,n=new Array(i),a=r.z,o=SGt(a)&&a.length,s=0;s<i;s++){var l=n[s]={},u=r.lon[s],f=r.lat[s];if(l.lonlat=LZ(u)&&LZ(f)?[+u,+f]:[PZ,PZ],o){var c=a[s];l.z=LZ(c)?c:PZ}}return EGt(t,r,{vals:o?a:[0,1],containerStr:"",cLetter:"z"}),i&&(n[0].t={labels:{lat:j9e(t,"lat:")+" ",lon:j9e(t,"lon:")+" "}}),n}});var rUe=ne((tmr,tUe)=>{"use strict";var kGt=la(),RZ=Wt(),Q9e=_i(),$9e=ul(),eUe=$a().BADNUM,CGt=zE().makeBlank;tUe.exports=function(t){var r=t[0].trace,i=r.visible===!0&&r._length!==0,n={layout:{visibility:"none"},paint:{}},a=r._opts={heatmap:n,geojson:CGt()};if(!i)return a;var o=[],s,l=r.z,u=r.radius,f=RZ.isArrayOrTypedArray(l)&&l.length,c=RZ.isArrayOrTypedArray(u);for(s=0;s<t.length;s++){var h=t[s],v=h.lonlat;if(v[0]!==eUe){var d={};if(f){var _=h.z;d.z=_!==eUe?_:0}c&&(d.r=kGt(u[s])&&u[s]>0?+u[s]:0),o.push({type:"Feature",geometry:{type:"Point",coordinates:v},properties:d})}}var T=$9e.extractOpts(r),p=T.reversescale?$9e.flipScale(T.colorscale):T.colorscale,M=p[0][1],b=Q9e.opacity(M)<1?M:Q9e.addOpacity(M,0),w=["interpolate",["linear"],["heatmap-density"],0,b];for(s=1;s<p.length;s++)w.push(p[s][0],p[s][1]);var k=["interpolate",["linear"],["get","z"],T.min,0,T.max,1];return RZ.extendFlat(a.heatmap.paint,{"heatmap-weight":f?k:1/(T.max-T.min),"heatmap-color":w,"heatmap-radius":c?{type:"identity",property:"r"}:r.radius,"heatmap-opacity":r.opacity}),a.geojson={type:"FeatureCollection",features:o},a.heatmap.layout.visibility="visible",a}});var oUe=ne((rmr,aUe)=>{"use strict";var nUe=rUe(),LGt=My().traceLayerPrefix;function iUe(e,t){this.type="densitymapbox",this.subplot=e,this.uid=t,this.sourceId="source-"+t,this.layerList=[["heatmap",LGt+t+"-heatmap"]],this.below=null}var nF=iUe.prototype;nF.update=function(e){var t=this.subplot,r=this.layerList,i=nUe(e),n=t.belowLookup["trace-"+this.uid];t.map.getSource(this.sourceId).setData(i.geojson),n!==this.below&&(this._removeLayers(),this._addLayers(i,n),this.below=n);for(var a=0;a<r.length;a++){var o=r[a],s=o[0],l=o[1],u=i[s];t.setOptions(l,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&t.setOptions(l,"setPaintProperty",u.paint)}};nF._addLayers=function(e,t){for(var r=this.subplot,i=this.layerList,n=this.sourceId,a=0;a<i.length;a++){var o=i[a],s=o[0],l=e[s];r.addLayer({type:s,id:o[1],source:n,layout:l.layout,paint:l.paint},t)}};nF._removeLayers=function(){for(var e=this.subplot.map,t=this.layerList,r=t.length-1;r>=0;r--)e.removeLayer(t[r][1])};nF.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)};aUe.exports=function(t,r){var i=r[0].trace,n=new iUe(t,i.uid),a=n.sourceId,o=nUe(r),s=n.below=t.belowLookup["trace-"+i.uid];return t.map.addSource(a,{type:"geojson",data:o.geojson}),n._addLayers(o,s),n}});var lUe=ne((nmr,sUe)=>{"use strict";var PGt=Xi(),RGt=QI().hoverPoints,DGt=QI().getExtraText;sUe.exports=function(t,r,i){var n=RGt(t,r,i);if(n){var a=n[0],o=a.cd,s=o[0].trace,l=o[a.index];if(delete a.color,"z"in l){var u=a.subplot.mockAxis;a.z=l.z,a.zLabel=PGt.tickText(u,u.c2l(l.z),"hover").text}return a.extraText=DGt(s,l,o[0].t.labels),[a]}}});var fUe=ne((imr,uUe)=>{"use strict";uUe.exports=function(t,r){return t.lon=r.lon,t.lat=r.lat,t.z=r.z,t}});var hUe=ne((amr,cUe)=>{"use strict";cUe.exports={attributes:CZ(),supplyDefaults:Z9e(),colorbar:jx(),formatLabels:vZ(),calc:J9e(),plot:oUe(),hoverPoints:lUe(),eventData:fUe(),getBelow:function(e,t){for(var r=t.getMapLayers(),i=0;i<r.length;i++){var n=r[i],a=n.id;if(n.type==="symbol"&&typeof a=="string"&&a.indexOf("plotly-")===-1)return a}},moduleType:"trace",name:"densitymapbox",basePlotModule:tF(),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}});var dUe=ne((omr,vUe)=>{"use strict";vUe.exports=hUe()});var IZ=ne((smr,mUe)=>{"use strict";var IGt=ll(),FGt=es(),pUe=Ku(),DZ=jb(),qGt=fl().attributes,gUe=Ba().hovertemplateAttrs,zGt=Ps(),OGt=So().templatedArray,BGt=kl().descriptionOnlyNumbers,yUe=oa().extendFlat,NGt=Xs().overrideAll,UGt=mUe.exports=NGt({hoverinfo:yUe({},FGt.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:DZ.hoverlabel,domain:qGt({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:BGt("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:IGt({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:pUe.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:DZ.hoverlabel,hovertemplate:gUe({},{keys:["value","label"]}),align:{valType:"enumerated",values:["justify","left","right","center"],dflt:"justify"}},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},hovercolor:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:pUe.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:DZ.hoverlabel,hovertemplate:gUe({},{keys:["value","label"]}),colorscales:OGt("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:yUe(zGt().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested");UGt.transforms=void 0});var TUe=ne((lmr,wUe)=>{"use strict";var K_=Wt(),iF=IZ(),VGt=_i(),xUe=Xf(),HGt=fl().defaults,_Ue=OA(),bUe=So(),GGt=ch();wUe.exports=function(t,r,i,n){function a(w,k){return K_.coerce(t,r,iF,w,k)}var o=K_.extendDeep(n.hoverlabel,t.hoverlabel),s=t.node,l=bUe.newContainer(r,"node");function u(w,k){return K_.coerce(s,l,iF.node,w,k)}u("label"),u("groups"),u("x"),u("y"),u("pad"),u("thickness"),u("line.color"),u("line.width"),u("hoverinfo",t.hoverinfo),_Ue(s,l,u,o),u("hovertemplate"),u("align");var f=n.colorway,c=function(w){return f[w%f.length]};u("color",l.label.map(function(w,k){return VGt.addOpacity(c(k),.8)})),u("customdata");var h=t.link||{},v=bUe.newContainer(r,"link");function d(w,k){return K_.coerce(h,v,iF.link,w,k)}d("label"),d("arrowlen"),d("source"),d("target"),d("value"),d("line.color"),d("line.width"),d("hoverinfo",t.hoverinfo),_Ue(h,v,d,o),d("hovertemplate");var _=xUe(n.paper_bgcolor).getLuminance()<.333,T=_?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)",p=d("color",T);function M(w){var k=xUe(w);if(!k.isValid())return w;var x=k.getAlpha();return x<=.8?k.setAlpha(x+.2):k=_?k.brighten():k.darken(),k.toRgbString()}d("hovercolor",Array.isArray(p)?p.map(M):M(p)),d("customdata"),GGt(h,v,{name:"colorscales",handleItemDefaults:YGt}),HGt(r,n,a),a("orientation"),a("valueformat"),a("valuesuffix");var b;l.x.length&&l.y.length&&(b="freeform"),a("arrangement",b),K_.coerceFont(a,"textfont",K_.extendFlat({},n.font)),r._length=null};function YGt(e,t){function r(i,n){return K_.coerce(e,t,iF.link.colorscales,i,n)}r("label"),r("cmin"),r("cmax"),r("colorscale")}});var FZ=ne((umr,AUe)=>{"use strict";AUe.exports=WGt;function WGt(e){for(var t=e.length,r=new Array(t),i=new Array(t),n=new Array(t),a=new Array(t),o=new Array(t),s=new Array(t),l=0;l<t;++l)r[l]=-1,i[l]=0,n[l]=!1,a[l]=0,o[l]=-1,s[l]=[];var u=0,f=[],c=[];function h(T){var p=[T],M=[T];for(r[T]=i[T]=u,n[T]=!0,u+=1;M.length>0;){T=M[M.length-1];var b=e[T];if(a[T]<b.length){for(var w=a[T];w<b.length;++w){var k=b[w];if(r[k]<0){r[k]=i[k]=u,n[k]=!0,u+=1,p.push(k),M.push(k);break}else n[k]&&(i[T]=Math.min(i[T],i[k])|0);o[k]>=0&&s[T].push(o[k])}a[T]=w}else{if(i[T]===r[T]){for(var x=[],E=[],S=0,w=p.length-1;w>=0;--w){var g=p[w];if(n[g]=!1,x.push(g),E.push(s[g]),S+=s[g].length,o[g]=f.length,g===T){p.length=w;break}}f.push(x);for(var C=new Array(S),w=0;w<E.length;w++)for(var A=0;A<E[w].length;A++)C[--S]=E[w][A];c.push(C)}M.pop()}}}for(var l=0;l<t;++l)r[l]<0&&h(l);for(var v,l=0;l<c.length;l++){var d=c[l];if(d.length!==0){d.sort(function(p,M){return p-M}),v=[d[0]];for(var _=1;_<d.length;_++)d[_]!==d[_-1]&&v.push(d[_]);c[l]=v}}return{components:f,adjacencyList:c}}});var kUe=ne((fmr,EUe)=>{"use strict";var XGt=FZ(),dT=Wt(),ZGt=gg().wrap,L5=dT.isArrayOrTypedArray,MUe=dT.isIndex,SUe=ul();function jGt(e){var t=e.node,r=e.link,i=[],n=L5(r.color),a=L5(r.hovercolor),o=L5(r.customdata),s={},l={},u=r.colorscales.length,f;for(f=0;f<u;f++){var c=r.colorscales[f],h=SUe.extractScale(c,{cLetter:"c"}),v=SUe.makeColorScaleFunc(h);l[c.label]=v}var d=0;for(f=0;f<r.value.length;f++)r.source[f]>d&&(d=r.source[f]),r.target[f]>d&&(d=r.target[f]);var _=d+1;e.node._count=_;var T,p=e.node.groups,M={};for(f=0;f<p.length;f++){var b=p[f];for(T=0;T<b.length;T++){var w=b[T],k=_+f;M.hasOwnProperty(w)?dT.warn("Node "+w+" is already part of a group."):M[w]=k}}var x={source:[],target:[]};for(f=0;f<r.value.length;f++){var E=r.value[f],S=r.source[f],g=r.target[f];if(E>0&&MUe(S,_)&&MUe(g,_)&&!(M.hasOwnProperty(S)&&M.hasOwnProperty(g)&&M[S]===M[g])){M.hasOwnProperty(g)&&(g=M[g]),M.hasOwnProperty(S)&&(S=M[S]),S=+S,g=+g,s[S]=s[g]=!0;var C="";r.label&&r.label[f]&&(C=r.label[f]);var A=null;C&&l.hasOwnProperty(C)&&(A=l[C]),i.push({pointNumber:f,label:C,color:n?r.color[f]:r.color,hovercolor:a?r.hovercolor[f]:r.hovercolor,customdata:o?r.customdata[f]:r.customdata,concentrationscale:A,source:S,target:g,value:+E}),x.source.push(S),x.target.push(g)}}var P=_+p.length,D=L5(t.color),z=L5(t.customdata),O=[];for(f=0;f<P;f++)if(s[f]){var V=t.label[f];O.push({group:f>_-1,childrenNodes:[],pointNumber:f,label:V,color:D?t.color[f]:t.color,customdata:z?t.customdata[f]:t.customdata})}var B=!1;return KGt(P,x.source,x.target)&&(B=!0),{circular:B,links:i,nodes:O,groups:p,groupLookup:M}}function KGt(e,t,r){for(var i=dT.init2dArray(e,0),n=0;n<Math.min(t.length,r.length);n++)if(dT.isIndex(t[n],e)&&dT.isIndex(r[n],e)){if(t[n]===r[n])return!0;i[t[n]].push(r[n])}var a=XGt(i);return a.components.some(function(o){return o.length>1})}EUe.exports=function(t,r){var i=jGt(r);return ZGt({circular:i.circular,_nodes:i.nodes,_links:i.links,_groups:i.groups,_groupLookup:i.groupLookup})}});var LUe=ne((aF,CUe)=>{(function(e,t){typeof aF=="object"&&typeof CUe!="undefined"?t(aF):typeof define=="function"&&define.amd?define(["exports"],t):(e=e||self,t(e.d3=e.d3||{}))})(aF,function(e){"use strict";function t(E){var S=+this._x.call(null,E),g=+this._y.call(null,E);return r(this.cover(S,g),S,g,E)}function r(E,S,g,C){if(isNaN(S)||isNaN(g))return E;var A,P=E._root,D={data:C},z=E._x0,O=E._y0,V=E._x1,B=E._y1,F,N,Z,J,re,ue,fe,K;if(!P)return E._root=D,E;for(;P.length;)if((re=S>=(F=(z+V)/2))?z=F:V=F,(ue=g>=(N=(O+B)/2))?O=N:B=N,A=P,!(P=P[fe=ue<<1|re]))return A[fe]=D,E;if(Z=+E._x.call(null,P.data),J=+E._y.call(null,P.data),S===Z&&g===J)return D.next=P,A?A[fe]=D:E._root=D,E;do A=A?A[fe]=new Array(4):E._root=new Array(4),(re=S>=(F=(z+V)/2))?z=F:V=F,(ue=g>=(N=(O+B)/2))?O=N:B=N;while((fe=ue<<1|re)===(K=(J>=N)<<1|Z>=F));return A[K]=P,A[fe]=D,E}function i(E){var S,g,C=E.length,A,P,D=new Array(C),z=new Array(C),O=1/0,V=1/0,B=-1/0,F=-1/0;for(g=0;g<C;++g)isNaN(A=+this._x.call(null,S=E[g]))||isNaN(P=+this._y.call(null,S))||(D[g]=A,z[g]=P,A<O&&(O=A),A>B&&(B=A),P<V&&(V=P),P>F&&(F=P));if(O>B||V>F)return this;for(this.cover(O,V).cover(B,F),g=0;g<C;++g)r(this,D[g],z[g],E[g]);return this}function n(E,S){if(isNaN(E=+E)||isNaN(S=+S))return this;var g=this._x0,C=this._y0,A=this._x1,P=this._y1;if(isNaN(g))A=(g=Math.floor(E))+1,P=(C=Math.floor(S))+1;else{for(var D=A-g,z=this._root,O,V;g>E||E>=A||C>S||S>=P;)switch(V=(S<C)<<1|E<g,O=new Array(4),O[V]=z,z=O,D*=2,V){case 0:A=g+D,P=C+D;break;case 1:g=A-D,P=C+D;break;case 2:A=g+D,C=P-D;break;case 3:g=A-D,C=P-D;break}this._root&&this._root.length&&(this._root=z)}return this._x0=g,this._y0=C,this._x1=A,this._y1=P,this}function a(){var E=[];return this.visit(function(S){if(!S.length)do E.push(S.data);while(S=S.next)}),E}function o(E){return arguments.length?this.cover(+E[0][0],+E[0][1]).cover(+E[1][0],+E[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function s(E,S,g,C,A){this.node=E,this.x0=S,this.y0=g,this.x1=C,this.y1=A}function l(E,S,g){var C,A=this._x0,P=this._y0,D,z,O,V,B=this._x1,F=this._y1,N=[],Z=this._root,J,re;for(Z&&N.push(new s(Z,A,P,B,F)),g==null?g=1/0:(A=E-g,P=S-g,B=E+g,F=S+g,g*=g);J=N.pop();)if(!(!(Z=J.node)||(D=J.x0)>B||(z=J.y0)>F||(O=J.x1)<A||(V=J.y1)<P))if(Z.length){var ue=(D+O)/2,fe=(z+V)/2;N.push(new s(Z[3],ue,fe,O,V),new s(Z[2],D,fe,ue,V),new s(Z[1],ue,z,O,fe),new s(Z[0],D,z,ue,fe)),(re=(S>=fe)<<1|E>=ue)&&(J=N[N.length-1],N[N.length-1]=N[N.length-1-re],N[N.length-1-re]=J)}else{var K=E-+this._x.call(null,Z.data),X=S-+this._y.call(null,Z.data),ae=K*K+X*X;if(ae<g){var oe=Math.sqrt(g=ae);A=E-oe,P=S-oe,B=E+oe,F=S+oe,C=Z.data}}return C}function u(E){if(isNaN(B=+this._x.call(null,E))||isNaN(F=+this._y.call(null,E)))return this;var S,g=this._root,C,A,P,D=this._x0,z=this._y0,O=this._x1,V=this._y1,B,F,N,Z,J,re,ue,fe;if(!g)return this;if(g.length)for(;;){if((J=B>=(N=(D+O)/2))?D=N:O=N,(re=F>=(Z=(z+V)/2))?z=Z:V=Z,S=g,!(g=g[ue=re<<1|J]))return this;if(!g.length)break;(S[ue+1&3]||S[ue+2&3]||S[ue+3&3])&&(C=S,fe=ue)}for(;g.data!==E;)if(A=g,!(g=g.next))return this;return(P=g.next)&&delete g.next,A?(P?A.next=P:delete A.next,this):S?(P?S[ue]=P:delete S[ue],(g=S[0]||S[1]||S[2]||S[3])&&g===(S[3]||S[2]||S[1]||S[0])&&!g.length&&(C?C[fe]=g:this._root=g),this):(this._root=P,this)}function f(E){for(var S=0,g=E.length;S<g;++S)this.remove(E[S]);return this}function c(){return this._root}function h(){var E=0;return this.visit(function(S){if(!S.length)do++E;while(S=S.next)}),E}function v(E){var S=[],g,C=this._root,A,P,D,z,O;for(C&&S.push(new s(C,this._x0,this._y0,this._x1,this._y1));g=S.pop();)if(!E(C=g.node,P=g.x0,D=g.y0,z=g.x1,O=g.y1)&&C.length){var V=(P+z)/2,B=(D+O)/2;(A=C[3])&&S.push(new s(A,V,B,z,O)),(A=C[2])&&S.push(new s(A,P,B,V,O)),(A=C[1])&&S.push(new s(A,V,D,z,B)),(A=C[0])&&S.push(new s(A,P,D,V,B))}return this}function d(E){var S=[],g=[],C;for(this._root&&S.push(new s(this._root,this._x0,this._y0,this._x1,this._y1));C=S.pop();){var A=C.node;if(A.length){var P,D=C.x0,z=C.y0,O=C.x1,V=C.y1,B=(D+O)/2,F=(z+V)/2;(P=A[0])&&S.push(new s(P,D,z,B,F)),(P=A[1])&&S.push(new s(P,B,z,O,F)),(P=A[2])&&S.push(new s(P,D,F,B,V)),(P=A[3])&&S.push(new s(P,B,F,O,V))}g.push(C)}for(;C=g.pop();)E(C.node,C.x0,C.y0,C.x1,C.y1);return this}function _(E){return E[0]}function T(E){return arguments.length?(this._x=E,this):this._x}function p(E){return E[1]}function M(E){return arguments.length?(this._y=E,this):this._y}function b(E,S,g){var C=new w(S==null?_:S,g==null?p:g,NaN,NaN,NaN,NaN);return E==null?C:C.addAll(E)}function w(E,S,g,C,A,P){this._x=E,this._y=S,this._x0=g,this._y0=C,this._x1=A,this._y1=P,this._root=void 0}function k(E){for(var S={data:E.data},g=S;E=E.next;)g=g.next={data:E.data};return S}var x=b.prototype=w.prototype;x.copy=function(){var E=new w(this._x,this._y,this._x0,this._y0,this._x1,this._y1),S=this._root,g,C;if(!S)return E;if(!S.length)return E._root=k(S),E;for(g=[{source:S,target:E._root=new Array(4)}];S=g.pop();)for(var A=0;A<4;++A)(C=S.source[A])&&(C.length?g.push({source:C,target:S.target[A]=new Array(4)}):S.target[A]=k(C));return E},x.add=t,x.addAll=i,x.cover=n,x.data=a,x.extent=o,x.find=l,x.remove=u,x.removeAll=f,x.root=c,x.size=h,x.visit=v,x.visitAfter=d,x.x=T,x.y=M,e.quadtree=b,Object.defineProperty(e,"__esModule",{value:!0})})});var sF=ne((oF,PUe)=>{(function(e,t){typeof oF=="object"&&typeof PUe!="undefined"?t(oF):typeof define=="function"&&define.amd?define(["exports"],t):t(e.d3=e.d3||{})})(oF,function(e){"use strict";var t="$";function r(){}r.prototype=i.prototype={constructor:r,has:function(_){return t+_ in this},get:function(_){return this[t+_]},set:function(_,T){return this[t+_]=T,this},remove:function(_){var T=t+_;return T in this&&delete this[T]},clear:function(){for(var _ in this)_[0]===t&&delete this[_]},keys:function(){var _=[];for(var T in this)T[0]===t&&_.push(T.slice(1));return _},values:function(){var _=[];for(var T in this)T[0]===t&&_.push(this[T]);return _},entries:function(){var _=[];for(var T in this)T[0]===t&&_.push({key:T.slice(1),value:this[T]});return _},size:function(){var _=0;for(var T in this)T[0]===t&&++_;return _},empty:function(){for(var _ in this)if(_[0]===t)return!1;return!0},each:function(_){for(var T in this)T[0]===t&&_(this[T],T.slice(1),this)}};function i(_,T){var p=new r;if(_ instanceof r)_.each(function(x,E){p.set(E,x)});else if(Array.isArray(_)){var M=-1,b=_.length,w;if(T==null)for(;++M<b;)p.set(M,_[M]);else for(;++M<b;)p.set(T(w=_[M],M,_),w)}else if(_)for(var k in _)p.set(k,_[k]);return p}function n(){var _=[],T=[],p,M,b;function w(x,E,S,g){if(E>=_.length)return p!=null&&x.sort(p),M!=null?M(x):x;for(var C=-1,A=x.length,P=_[E++],D,z,O=i(),V,B=S();++C<A;)(V=O.get(D=P(z=x[C])+""))?V.push(z):O.set(D,[z]);return O.each(function(F,N){g(B,N,w(F,E,S,g))}),B}function k(x,E){if(++E>_.length)return x;var S,g=T[E-1];return M!=null&&E>=_.length?S=x.entries():(S=[],x.each(function(C,A){S.push({key:A,values:k(C,E)})})),g!=null?S.sort(function(C,A){return g(C.key,A.key)}):S}return b={object:function(x){return w(x,0,a,o)},map:function(x){return w(x,0,s,l)},entries:function(x){return k(w(x,0,s,l),0)},key:function(x){return _.push(x),b},sortKeys:function(x){return T[_.length-1]=x,b},sortValues:function(x){return p=x,b},rollup:function(x){return M=x,b}}}function a(){return{}}function o(_,T,p){_[T]=p}function s(){return i()}function l(_,T,p){_.set(T,p)}function u(){}var f=i.prototype;u.prototype=c.prototype={constructor:u,has:f.has,add:function(_){return _+="",this[t+_]=_,this},remove:f.remove,clear:f.clear,values:f.keys,size:f.size,empty:f.empty,each:f.each};function c(_,T){var p=new u;if(_ instanceof u)_.each(function(w){p.add(w)});else if(_){var M=-1,b=_.length;if(T==null)for(;++M<b;)p.add(_[M]);else for(;++M<b;)p.add(T(_[M],M,_))}return p}function h(_){var T=[];for(var p in _)T.push(p);return T}function v(_){var T=[];for(var p in _)T.push(_[p]);return T}function d(_){var T=[];for(var p in _)T.push({key:p,value:_[p]});return T}e.nest=n,e.set=c,e.map=i,e.keys=h,e.values=v,e.entries=d,Object.defineProperty(e,"__esModule",{value:!0})})});var DUe=ne((lF,RUe)=>{(function(e,t){typeof lF=="object"&&typeof RUe!="undefined"?t(lF):typeof define=="function"&&define.amd?define(["exports"],t):(e=e||self,t(e.d3=e.d3||{}))})(lF,function(e){"use strict";var t={value:function(){}};function r(){for(var s=0,l=arguments.length,u={},f;s<l;++s){if(!(f=arguments[s]+"")||f in u||/[\s.]/.test(f))throw new Error("illegal type: "+f);u[f]=[]}return new i(u)}function i(s){this._=s}function n(s,l){return s.trim().split(/^|\s+/).map(function(u){var f="",c=u.indexOf(".");if(c>=0&&(f=u.slice(c+1),u=u.slice(0,c)),u&&!l.hasOwnProperty(u))throw new Error("unknown type: "+u);return{type:u,name:f}})}i.prototype=r.prototype={constructor:i,on:function(s,l){var u=this._,f=n(s+"",u),c,h=-1,v=f.length;if(arguments.length<2){for(;++h<v;)if((c=(s=f[h]).type)&&(c=a(u[c],s.name)))return c;return}if(l!=null&&typeof l!="function")throw new Error("invalid callback: "+l);for(;++h<v;)if(c=(s=f[h]).type)u[c]=o(u[c],s.name,l);else if(l==null)for(c in u)u[c]=o(u[c],s.name,null);return this},copy:function(){var s={},l=this._;for(var u in l)s[u]=l[u].slice();return new i(s)},call:function(s,l){if((c=arguments.length-2)>0)for(var u=new Array(c),f=0,c,h;f<c;++f)u[f]=arguments[f+2];if(!this._.hasOwnProperty(s))throw new Error("unknown type: "+s);for(h=this._[s],f=0,c=h.length;f<c;++f)h[f].value.apply(l,u)},apply:function(s,l,u){if(!this._.hasOwnProperty(s))throw new Error("unknown type: "+s);for(var f=this._[s],c=0,h=f.length;c<h;++c)f[c].value.apply(l,u)}};function a(s,l){for(var u=0,f=s.length,c;u<f;++u)if((c=s[u]).name===l)return c.value}function o(s,l,u){for(var f=0,c=s.length;f<c;++f)if(s[f].name===l){s[f]=t,s=s.slice(0,f).concat(s.slice(f+1));break}return u!=null&&s.push({name:l,value:u}),s}e.dispatch=r,Object.defineProperty(e,"__esModule",{value:!0})})});var FUe=ne((uF,IUe)=>{(function(e,t){typeof uF=="object"&&typeof IUe!="undefined"?t(uF):typeof define=="function"&&define.amd?define(["exports"],t):(e=e||self,t(e.d3=e.d3||{}))})(uF,function(e){"use strict";var t=0,r=0,i=0,n=1e3,a,o,s=0,l=0,u=0,f=typeof performance=="object"&&performance.now?performance:Date,c=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(E){setTimeout(E,17)};function h(){return l||(c(v),l=f.now()+u)}function v(){l=0}function d(){this._call=this._time=this._next=null}d.prototype=_.prototype={constructor:d,restart:function(E,S,g){if(typeof E!="function")throw new TypeError("callback is not a function");g=(g==null?h():+g)+(S==null?0:+S),!this._next&&o!==this&&(o?o._next=this:a=this,o=this),this._call=E,this._time=g,w()},stop:function(){this._call&&(this._call=null,this._time=1/0,w())}};function _(E,S,g){var C=new d;return C.restart(E,S,g),C}function T(){h(),++t;for(var E=a,S;E;)(S=l-E._time)>=0&&E._call.call(null,S),E=E._next;--t}function p(){l=(s=f.now())+u,t=r=0;try{T()}finally{t=0,b(),l=0}}function M(){var E=f.now(),S=E-s;S>n&&(u-=S,s=E)}function b(){for(var E,S=a,g,C=1/0;S;)S._call?(C>S._time&&(C=S._time),E=S,S=S._next):(g=S._next,S._next=null,S=E?E._next=g:a=g);o=E,w(C)}function w(E){if(!t){r&&(r=clearTimeout(r));var S=E-l;S>24?(E<1/0&&(r=setTimeout(p,E-f.now()-u)),i&&(i=clearInterval(i))):(i||(s=f.now(),i=setInterval(M,n)),t=1,c(p))}}function k(E,S,g){var C=new d;return S=S==null?0:+S,C.restart(function(A){C.stop(),E(A+S)},S,g),C}function x(E,S,g){var C=new d,A=S;return S==null?(C.restart(E,S,g),C):(S=+S,g=g==null?h():+g,C.restart(function P(D){D+=A,C.restart(P,A+=S,g),E(D)},S,g),C)}e.interval=x,e.now=h,e.timeout=k,e.timer=_,e.timerFlush=T,Object.defineProperty(e,"__esModule",{value:!0})})});var zUe=ne((fF,qUe)=>{(function(e,t){typeof fF=="object"&&typeof qUe!="undefined"?t(fF,LUe(),sF(),DUe(),FUe()):typeof define=="function"&&define.amd?define(["exports","d3-quadtree","d3-collection","d3-dispatch","d3-timer"],t):t(e.d3=e.d3||{},e.d3,e.d3,e.d3,e.d3)})(fF,function(e,t,r,i,n){"use strict";function a(E,S){var g;E==null&&(E=0),S==null&&(S=0);function C(){var A,P=g.length,D,z=0,O=0;for(A=0;A<P;++A)D=g[A],z+=D.x,O+=D.y;for(z=z/P-E,O=O/P-S,A=0;A<P;++A)D=g[A],D.x-=z,D.y-=O}return C.initialize=function(A){g=A},C.x=function(A){return arguments.length?(E=+A,C):E},C.y=function(A){return arguments.length?(S=+A,C):S},C}function o(E){return function(){return E}}function s(){return(Math.random()-.5)*1e-6}function l(E){return E.x+E.vx}function u(E){return E.y+E.vy}function f(E){var S,g,C=1,A=1;typeof E!="function"&&(E=o(E==null?1:+E));function P(){for(var O,V=S.length,B,F,N,Z,J,re,ue=0;ue<A;++ue)for(B=t.quadtree(S,l,u).visitAfter(D),O=0;O<V;++O)F=S[O],J=g[F.index],re=J*J,N=F.x+F.vx,Z=F.y+F.vy,B.visit(fe);function fe(K,X,ae,oe,me){var xe=K.data,ce=K.r,ie=J+ce;if(xe){if(xe.index>F.index){var ge=N-xe.x-xe.vx,le=Z-xe.y-xe.vy,we=ge*ge+le*le;we<ie*ie&&(ge===0&&(ge=s(),we+=ge*ge),le===0&&(le=s(),we+=le*le),we=(ie-(we=Math.sqrt(we)))/we*C,F.vx+=(ge*=we)*(ie=(ce*=ce)/(re+ce)),F.vy+=(le*=we)*ie,xe.vx-=ge*(ie=1-ie),xe.vy-=le*ie)}return}return X>N+ie||oe<N-ie||ae>Z+ie||me<Z-ie}}function D(O){if(O.data)return O.r=g[O.data.index];for(var V=O.r=0;V<4;++V)O[V]&&O[V].r>O.r&&(O.r=O[V].r)}function z(){if(S){var O,V=S.length,B;for(g=new Array(V),O=0;O<V;++O)B=S[O],g[B.index]=+E(B,O,S)}}return P.initialize=function(O){S=O,z()},P.iterations=function(O){return arguments.length?(A=+O,P):A},P.strength=function(O){return arguments.length?(C=+O,P):C},P.radius=function(O){return arguments.length?(E=typeof O=="function"?O:o(+O),z(),P):E},P}function c(E){return E.index}function h(E,S){var g=E.get(S);if(!g)throw new Error("missing: "+S);return g}function v(E){var S=c,g=B,C,A=o(30),P,D,z,O,V=1;E==null&&(E=[]);function B(re){return 1/Math.min(z[re.source.index],z[re.target.index])}function F(re){for(var ue=0,fe=E.length;ue<V;++ue)for(var K=0,X,ae,oe,me,xe,ce,ie;K<fe;++K)X=E[K],ae=X.source,oe=X.target,me=oe.x+oe.vx-ae.x-ae.vx||s(),xe=oe.y+oe.vy-ae.y-ae.vy||s(),ce=Math.sqrt(me*me+xe*xe),ce=(ce-P[K])/ce*re*C[K],me*=ce,xe*=ce,oe.vx-=me*(ie=O[K]),oe.vy-=xe*ie,ae.vx+=me*(ie=1-ie),ae.vy+=xe*ie}function N(){if(D){var re,ue=D.length,fe=E.length,K=r.map(D,S),X;for(re=0,z=new Array(ue);re<fe;++re)X=E[re],X.index=re,typeof X.source!="object"&&(X.source=h(K,X.source)),typeof X.target!="object"&&(X.target=h(K,X.target)),z[X.source.index]=(z[X.source.index]||0)+1,z[X.target.index]=(z[X.target.index]||0)+1;for(re=0,O=new Array(fe);re<fe;++re)X=E[re],O[re]=z[X.source.index]/(z[X.source.index]+z[X.target.index]);C=new Array(fe),Z(),P=new Array(fe),J()}}function Z(){if(D)for(var re=0,ue=E.length;re<ue;++re)C[re]=+g(E[re],re,E)}function J(){if(D)for(var re=0,ue=E.length;re<ue;++re)P[re]=+A(E[re],re,E)}return F.initialize=function(re){D=re,N()},F.links=function(re){return arguments.length?(E=re,N(),F):E},F.id=function(re){return arguments.length?(S=re,F):S},F.iterations=function(re){return arguments.length?(V=+re,F):V},F.strength=function(re){return arguments.length?(g=typeof re=="function"?re:o(+re),Z(),F):g},F.distance=function(re){return arguments.length?(A=typeof re=="function"?re:o(+re),J(),F):A},F}function d(E){return E.x}function _(E){return E.y}var T=10,p=Math.PI*(3-Math.sqrt(5));function M(E){var S,g=1,C=.001,A=1-Math.pow(C,1/300),P=0,D=.6,z=r.map(),O=n.timer(B),V=i.dispatch("tick","end");E==null&&(E=[]);function B(){F(),V.call("tick",S),g<C&&(O.stop(),V.call("end",S))}function F(J){var re,ue=E.length,fe;J===void 0&&(J=1);for(var K=0;K<J;++K)for(g+=(P-g)*A,z.each(function(X){X(g)}),re=0;re<ue;++re)fe=E[re],fe.fx==null?fe.x+=fe.vx*=D:(fe.x=fe.fx,fe.vx=0),fe.fy==null?fe.y+=fe.vy*=D:(fe.y=fe.fy,fe.vy=0);return S}function N(){for(var J=0,re=E.length,ue;J<re;++J){if(ue=E[J],ue.index=J,ue.fx!=null&&(ue.x=ue.fx),ue.fy!=null&&(ue.y=ue.fy),isNaN(ue.x)||isNaN(ue.y)){var fe=T*Math.sqrt(J),K=J*p;ue.x=fe*Math.cos(K),ue.y=fe*Math.sin(K)}(isNaN(ue.vx)||isNaN(ue.vy))&&(ue.vx=ue.vy=0)}}function Z(J){return J.initialize&&J.initialize(E),J}return N(),S={tick:F,restart:function(){return O.restart(B),S},stop:function(){return O.stop(),S},nodes:function(J){return arguments.length?(E=J,N(),z.each(Z),S):E},alpha:function(J){return arguments.length?(g=+J,S):g},alphaMin:function(J){return arguments.length?(C=+J,S):C},alphaDecay:function(J){return arguments.length?(A=+J,S):+A},alphaTarget:function(J){return arguments.length?(P=+J,S):P},velocityDecay:function(J){return arguments.length?(D=1-J,S):1-D},force:function(J,re){return arguments.length>1?(re==null?z.remove(J):z.set(J,Z(re)),S):z.get(J)},find:function(J,re,ue){var fe=0,K=E.length,X,ae,oe,me,xe;for(ue==null?ue=1/0:ue*=ue,fe=0;fe<K;++fe)me=E[fe],X=J-me.x,ae=re-me.y,oe=X*X+ae*ae,oe<ue&&(xe=me,ue=oe);return xe},on:function(J,re){return arguments.length>1?(V.on(J,re),S):V.on(J)}}}function b(){var E,S,g,C=o(-30),A,P=1,D=1/0,z=.81;function O(N){var Z,J=E.length,re=t.quadtree(E,d,_).visitAfter(B);for(g=N,Z=0;Z<J;++Z)S=E[Z],re.visit(F)}function V(){if(E){var N,Z=E.length,J;for(A=new Array(Z),N=0;N<Z;++N)J=E[N],A[J.index]=+C(J,N,E)}}function B(N){var Z=0,J,re,ue=0,fe,K,X;if(N.length){for(fe=K=X=0;X<4;++X)(J=N[X])&&(re=Math.abs(J.value))&&(Z+=J.value,ue+=re,fe+=re*J.x,K+=re*J.y);N.x=fe/ue,N.y=K/ue}else{J=N,J.x=J.data.x,J.y=J.data.y;do Z+=A[J.data.index];while(J=J.next)}N.value=Z}function F(N,Z,J,re){if(!N.value)return!0;var ue=N.x-S.x,fe=N.y-S.y,K=re-Z,X=ue*ue+fe*fe;if(K*K/z<X)return X<D&&(ue===0&&(ue=s(),X+=ue*ue),fe===0&&(fe=s(),X+=fe*fe),X<P&&(X=Math.sqrt(P*X)),S.vx+=ue*N.value*g/X,S.vy+=fe*N.value*g/X),!0;if(N.length||X>=D)return;(N.data!==S||N.next)&&(ue===0&&(ue=s(),X+=ue*ue),fe===0&&(fe=s(),X+=fe*fe),X<P&&(X=Math.sqrt(P*X)));do N.data!==S&&(K=A[N.data.index]*g/X,S.vx+=ue*K,S.vy+=fe*K);while(N=N.next)}return O.initialize=function(N){E=N,V()},O.strength=function(N){return arguments.length?(C=typeof N=="function"?N:o(+N),V(),O):C},O.distanceMin=function(N){return arguments.length?(P=N*N,O):Math.sqrt(P)},O.distanceMax=function(N){return arguments.length?(D=N*N,O):Math.sqrt(D)},O.theta=function(N){return arguments.length?(z=N*N,O):Math.sqrt(z)},O}function w(E,S,g){var C,A=o(.1),P,D;typeof E!="function"&&(E=o(+E)),S==null&&(S=0),g==null&&(g=0);function z(V){for(var B=0,F=C.length;B<F;++B){var N=C[B],Z=N.x-S||1e-6,J=N.y-g||1e-6,re=Math.sqrt(Z*Z+J*J),ue=(D[B]-re)*P[B]*V/re;N.vx+=Z*ue,N.vy+=J*ue}}function O(){if(C){var V,B=C.length;for(P=new Array(B),D=new Array(B),V=0;V<B;++V)D[V]=+E(C[V],V,C),P[V]=isNaN(D[V])?0:+A(C[V],V,C)}}return z.initialize=function(V){C=V,O()},z.strength=function(V){return arguments.length?(A=typeof V=="function"?V:o(+V),O(),z):A},z.radius=function(V){return arguments.length?(E=typeof V=="function"?V:o(+V),O(),z):E},z.x=function(V){return arguments.length?(S=+V,z):S},z.y=function(V){return arguments.length?(g=+V,z):g},z}function k(E){var S=o(.1),g,C,A;typeof E!="function"&&(E=o(E==null?0:+E));function P(z){for(var O=0,V=g.length,B;O<V;++O)B=g[O],B.vx+=(A[O]-B.x)*C[O]*z}function D(){if(g){var z,O=g.length;for(C=new Array(O),A=new Array(O),z=0;z<O;++z)C[z]=isNaN(A[z]=+E(g[z],z,g))?0:+S(g[z],z,g)}}return P.initialize=function(z){g=z,D()},P.strength=function(z){return arguments.length?(S=typeof z=="function"?z:o(+z),D(),P):S},P.x=function(z){return arguments.length?(E=typeof z=="function"?z:o(+z),D(),P):E},P}function x(E){var S=o(.1),g,C,A;typeof E!="function"&&(E=o(E==null?0:+E));function P(z){for(var O=0,V=g.length,B;O<V;++O)B=g[O],B.vy+=(A[O]-B.y)*C[O]*z}function D(){if(g){var z,O=g.length;for(C=new Array(O),A=new Array(O),z=0;z<O;++z)C[z]=isNaN(A[z]=+E(g[z],z,g))?0:+S(g[z],z,g)}}return P.initialize=function(z){g=z,D()},P.strength=function(z){return arguments.length?(S=typeof z=="function"?z:o(+z),D(),P):S},P.y=function(z){return arguments.length?(E=typeof z=="function"?z:o(+z),D(),P):E},P}e.forceCenter=a,e.forceCollide=f,e.forceLink=v,e.forceManyBody=b,e.forceRadial=w,e.forceSimulation=M,e.forceX=k,e.forceY=x,Object.defineProperty(e,"__esModule",{value:!0})})});var BUe=ne((cF,OUe)=>{(function(e,t){typeof cF=="object"&&typeof OUe!="undefined"?t(cF):typeof define=="function"&&define.amd?define(["exports"],t):(e=e||self,t(e.d3=e.d3||{}))})(cF,function(e){"use strict";var t=Math.PI,r=2*t,i=1e-6,n=r-i;function a(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function o(){return new a}a.prototype=o.prototype={constructor:a,moveTo:function(s,l){this._+="M"+(this._x0=this._x1=+s)+","+(this._y0=this._y1=+l)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(s,l){this._+="L"+(this._x1=+s)+","+(this._y1=+l)},quadraticCurveTo:function(s,l,u,f){this._+="Q"+ +s+","+ +l+","+(this._x1=+u)+","+(this._y1=+f)},bezierCurveTo:function(s,l,u,f,c,h){this._+="C"+ +s+","+ +l+","+ +u+","+ +f+","+(this._x1=+c)+","+(this._y1=+h)},arcTo:function(s,l,u,f,c){s=+s,l=+l,u=+u,f=+f,c=+c;var h=this._x1,v=this._y1,d=u-s,_=f-l,T=h-s,p=v-l,M=T*T+p*p;if(c<0)throw new Error("negative radius: "+c);if(this._x1===null)this._+="M"+(this._x1=s)+","+(this._y1=l);else if(M>i)if(!(Math.abs(p*d-_*T)>i)||!c)this._+="L"+(this._x1=s)+","+(this._y1=l);else{var b=u-h,w=f-v,k=d*d+_*_,x=b*b+w*w,E=Math.sqrt(k),S=Math.sqrt(M),g=c*Math.tan((t-Math.acos((k+M-x)/(2*E*S)))/2),C=g/S,A=g/E;Math.abs(C-1)>i&&(this._+="L"+(s+C*T)+","+(l+C*p)),this._+="A"+c+","+c+",0,0,"+ +(p*b>T*w)+","+(this._x1=s+A*d)+","+(this._y1=l+A*_)}},arc:function(s,l,u,f,c,h){s=+s,l=+l,u=+u,h=!!h;var v=u*Math.cos(f),d=u*Math.sin(f),_=s+v,T=l+d,p=1^h,M=h?f-c:c-f;if(u<0)throw new Error("negative radius: "+u);this._x1===null?this._+="M"+_+","+T:(Math.abs(this._x1-_)>i||Math.abs(this._y1-T)>i)&&(this._+="L"+_+","+T),u&&(M<0&&(M=M%r+r),M>n?this._+="A"+u+","+u+",0,1,"+p+","+(s-v)+","+(l-d)+"A"+u+","+u+",0,1,"+p+","+(this._x1=_)+","+(this._y1=T):M>i&&(this._+="A"+u+","+u+",0,"+ +(M>=t)+","+p+","+(this._x1=s+u*Math.cos(c))+","+(this._y1=l+u*Math.sin(c))))},rect:function(s,l,u,f){this._+="M"+(this._x0=this._x1=+s)+","+(this._y0=this._y1=+l)+"h"+ +u+"v"+ +f+"h"+-u+"Z"},toString:function(){return this._}},e.path=o,Object.defineProperty(e,"__esModule",{value:!0})})});var qZ=ne((hF,NUe)=>{(function(e,t){typeof hF=="object"&&typeof NUe!="undefined"?t(hF,BUe()):typeof define=="function"&&define.amd?define(["exports","d3-path"],t):(e=e||self,t(e.d3=e.d3||{},e.d3))})(hF,function(e,t){"use strict";function r(Xe){return function(){return Xe}}var i=Math.abs,n=Math.atan2,a=Math.cos,o=Math.max,s=Math.min,l=Math.sin,u=Math.sqrt,f=1e-12,c=Math.PI,h=c/2,v=2*c;function d(Xe){return Xe>1?0:Xe<-1?c:Math.acos(Xe)}function _(Xe){return Xe>=1?h:Xe<=-1?-h:Math.asin(Xe)}function T(Xe){return Xe.innerRadius}function p(Xe){return Xe.outerRadius}function M(Xe){return Xe.startAngle}function b(Xe){return Xe.endAngle}function w(Xe){return Xe&&Xe.padAngle}function k(Xe,Ut,ur,br,Jr,sn,gn,Cr){var hn=ur-Xe,gi=br-Ut,Hn=gn-Jr,qi=Cr-sn,fa=qi*hn-Hn*gi;if(!(fa*fa<f))return fa=(Hn*(Ut-sn)-qi*(Xe-Jr))/fa,[Xe+fa*hn,Ut+fa*gi]}function x(Xe,Ut,ur,br,Jr,sn,gn){var Cr=Xe-ur,hn=Ut-br,gi=(gn?sn:-sn)/u(Cr*Cr+hn*hn),Hn=gi*hn,qi=-gi*Cr,fa=Xe+Hn,eo=Ut+qi,ma=ur+Hn,so=br+qi,ja=(fa+ma)/2,Xo=(eo+so)/2,Uo=ma-fa,ms=so-eo,as=Uo*Uo+ms*ms,il=Jr-sn,oo=fa*so-ma*eo,cs=(ms<0?-1:1)*u(o(0,il*il*as-oo*oo)),Eo=(oo*ms-Uo*cs)/as,hs=(-oo*Uo-ms*cs)/as,Jo=(oo*ms+Uo*cs)/as,Qo=(-oo*Uo+ms*cs)/as,Oa=Eo-ja,co=hs-Xo,Al=Jo-ja,$l=Qo-Xo;return Oa*Oa+co*co>Al*Al+$l*$l&&(Eo=Jo,hs=Qo),{cx:Eo,cy:hs,x01:-Hn,y01:-qi,x11:Eo*(Jr/il-1),y11:hs*(Jr/il-1)}}function E(){var Xe=T,Ut=p,ur=r(0),br=null,Jr=M,sn=b,gn=w,Cr=null;function hn(){var gi,Hn,qi=+Xe.apply(this,arguments),fa=+Ut.apply(this,arguments),eo=Jr.apply(this,arguments)-h,ma=sn.apply(this,arguments)-h,so=i(ma-eo),ja=ma>eo;if(Cr||(Cr=gi=t.path()),fa<qi&&(Hn=fa,fa=qi,qi=Hn),!(fa>f))Cr.moveTo(0,0);else if(so>v-f)Cr.moveTo(fa*a(eo),fa*l(eo)),Cr.arc(0,0,fa,eo,ma,!ja),qi>f&&(Cr.moveTo(qi*a(ma),qi*l(ma)),Cr.arc(0,0,qi,ma,eo,ja));else{var Xo=eo,Uo=ma,ms=eo,as=ma,il=so,oo=so,cs=gn.apply(this,arguments)/2,Eo=cs>f&&(br?+br.apply(this,arguments):u(qi*qi+fa*fa)),hs=s(i(fa-qi)/2,+ur.apply(this,arguments)),Jo=hs,Qo=hs,Oa,co;if(Eo>f){var Al=_(Eo/qi*l(cs)),$l=_(Eo/fa*l(cs));(il-=Al*2)>f?(Al*=ja?1:-1,ms+=Al,as-=Al):(il=0,ms=as=(eo+ma)/2),(oo-=$l*2)>f?($l*=ja?1:-1,Xo+=$l,Uo-=$l):(oo=0,Xo=Uo=(eo+ma)/2)}var Nu=fa*a(Xo),os=fa*l(Xo),vn=qi*a(as),bi=qi*l(as);if(hs>f){var ac=fa*a(Uo),Pl=fa*l(Uo),ss=qi*a(ms),vl=qi*l(ms),$o;if(so<c&&($o=k(Nu,os,ss,vl,ac,Pl,vn,bi))){var Rl=Nu-$o[0],xu=os-$o[1],ii=ac-$o[0],Aa=Pl-$o[1],Ca=1/l(d((Rl*ii+xu*Aa)/(u(Rl*Rl+xu*xu)*u(ii*ii+Aa*Aa)))/2),Fs=u($o[0]*$o[0]+$o[1]*$o[1]);Jo=s(hs,(qi-Fs)/(Ca-1)),Qo=s(hs,(fa-Fs)/(Ca+1))}}oo>f?Qo>f?(Oa=x(ss,vl,Nu,os,fa,Qo,ja),co=x(ac,Pl,vn,bi,fa,Qo,ja),Cr.moveTo(Oa.cx+Oa.x01,Oa.cy+Oa.y01),Qo<hs?Cr.arc(Oa.cx,Oa.cy,Qo,n(Oa.y01,Oa.x01),n(co.y01,co.x01),!ja):(Cr.arc(Oa.cx,Oa.cy,Qo,n(Oa.y01,Oa.x01),n(Oa.y11,Oa.x11),!ja),Cr.arc(0,0,fa,n(Oa.cy+Oa.y11,Oa.cx+Oa.x11),n(co.cy+co.y11,co.cx+co.x11),!ja),Cr.arc(co.cx,co.cy,Qo,n(co.y11,co.x11),n(co.y01,co.x01),!ja))):(Cr.moveTo(Nu,os),Cr.arc(0,0,fa,Xo,Uo,!ja)):Cr.moveTo(Nu,os),!(qi>f)||!(il>f)?Cr.lineTo(vn,bi):Jo>f?(Oa=x(vn,bi,ac,Pl,qi,-Jo,ja),co=x(Nu,os,ss,vl,qi,-Jo,ja),Cr.lineTo(Oa.cx+Oa.x01,Oa.cy+Oa.y01),Jo<hs?Cr.arc(Oa.cx,Oa.cy,Jo,n(Oa.y01,Oa.x01),n(co.y01,co.x01),!ja):(Cr.arc(Oa.cx,Oa.cy,Jo,n(Oa.y01,Oa.x01),n(Oa.y11,Oa.x11),!ja),Cr.arc(0,0,qi,n(Oa.cy+Oa.y11,Oa.cx+Oa.x11),n(co.cy+co.y11,co.cx+co.x11),ja),Cr.arc(co.cx,co.cy,Jo,n(co.y11,co.x11),n(co.y01,co.x01),!ja))):Cr.arc(0,0,qi,as,ms,ja)}if(Cr.closePath(),gi)return Cr=null,gi+""||null}return hn.centroid=function(){var gi=(+Xe.apply(this,arguments)+ +Ut.apply(this,arguments))/2,Hn=(+Jr.apply(this,arguments)+ +sn.apply(this,arguments))/2-c/2;return[a(Hn)*gi,l(Hn)*gi]},hn.innerRadius=function(gi){return arguments.length?(Xe=typeof gi=="function"?gi:r(+gi),hn):Xe},hn.outerRadius=function(gi){return arguments.length?(Ut=typeof gi=="function"?gi:r(+gi),hn):Ut},hn.cornerRadius=function(gi){return arguments.length?(ur=typeof gi=="function"?gi:r(+gi),hn):ur},hn.padRadius=function(gi){return arguments.length?(br=gi==null?null:typeof gi=="function"?gi:r(+gi),hn):br},hn.startAngle=function(gi){return arguments.length?(Jr=typeof gi=="function"?gi:r(+gi),hn):Jr},hn.endAngle=function(gi){return arguments.length?(sn=typeof gi=="function"?gi:r(+gi),hn):sn},hn.padAngle=function(gi){return arguments.length?(gn=typeof gi=="function"?gi:r(+gi),hn):gn},hn.context=function(gi){return arguments.length?(Cr=gi==null?null:gi,hn):Cr},hn}function S(Xe){this._context=Xe}S.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(Xe,Ut){switch(Xe=+Xe,Ut=+Ut,this._point){case 0:this._point=1,this._line?this._context.lineTo(Xe,Ut):this._context.moveTo(Xe,Ut);break;case 1:this._point=2;default:this._context.lineTo(Xe,Ut);break}}};function g(Xe){return new S(Xe)}function C(Xe){return Xe[0]}function A(Xe){return Xe[1]}function P(){var Xe=C,Ut=A,ur=r(!0),br=null,Jr=g,sn=null;function gn(Cr){var hn,gi=Cr.length,Hn,qi=!1,fa;for(br==null&&(sn=Jr(fa=t.path())),hn=0;hn<=gi;++hn)!(hn<gi&&ur(Hn=Cr[hn],hn,Cr))===qi&&((qi=!qi)?sn.lineStart():sn.lineEnd()),qi&&sn.point(+Xe(Hn,hn,Cr),+Ut(Hn,hn,Cr));if(fa)return sn=null,fa+""||null}return gn.x=function(Cr){return arguments.length?(Xe=typeof Cr=="function"?Cr:r(+Cr),gn):Xe},gn.y=function(Cr){return arguments.length?(Ut=typeof Cr=="function"?Cr:r(+Cr),gn):Ut},gn.defined=function(Cr){return arguments.length?(ur=typeof Cr=="function"?Cr:r(!!Cr),gn):ur},gn.curve=function(Cr){return arguments.length?(Jr=Cr,br!=null&&(sn=Jr(br)),gn):Jr},gn.context=function(Cr){return arguments.length?(Cr==null?br=sn=null:sn=Jr(br=Cr),gn):br},gn}function D(){var Xe=C,Ut=null,ur=r(0),br=A,Jr=r(!0),sn=null,gn=g,Cr=null;function hn(Hn){var qi,fa,eo,ma=Hn.length,so,ja=!1,Xo,Uo=new Array(ma),ms=new Array(ma);for(sn==null&&(Cr=gn(Xo=t.path())),qi=0;qi<=ma;++qi){if(!(qi<ma&&Jr(so=Hn[qi],qi,Hn))===ja)if(ja=!ja)fa=qi,Cr.areaStart(),Cr.lineStart();else{for(Cr.lineEnd(),Cr.lineStart(),eo=qi-1;eo>=fa;--eo)Cr.point(Uo[eo],ms[eo]);Cr.lineEnd(),Cr.areaEnd()}ja&&(Uo[qi]=+Xe(so,qi,Hn),ms[qi]=+ur(so,qi,Hn),Cr.point(Ut?+Ut(so,qi,Hn):Uo[qi],br?+br(so,qi,Hn):ms[qi]))}if(Xo)return Cr=null,Xo+""||null}function gi(){return P().defined(Jr).curve(gn).context(sn)}return hn.x=function(Hn){return arguments.length?(Xe=typeof Hn=="function"?Hn:r(+Hn),Ut=null,hn):Xe},hn.x0=function(Hn){return arguments.length?(Xe=typeof Hn=="function"?Hn:r(+Hn),hn):Xe},hn.x1=function(Hn){return arguments.length?(Ut=Hn==null?null:typeof Hn=="function"?Hn:r(+Hn),hn):Ut},hn.y=function(Hn){return arguments.length?(ur=typeof Hn=="function"?Hn:r(+Hn),br=null,hn):ur},hn.y0=function(Hn){return arguments.length?(ur=typeof Hn=="function"?Hn:r(+Hn),hn):ur},hn.y1=function(Hn){return arguments.length?(br=Hn==null?null:typeof Hn=="function"?Hn:r(+Hn),hn):br},hn.lineX0=hn.lineY0=function(){return gi().x(Xe).y(ur)},hn.lineY1=function(){return gi().x(Xe).y(br)},hn.lineX1=function(){return gi().x(Ut).y(ur)},hn.defined=function(Hn){return arguments.length?(Jr=typeof Hn=="function"?Hn:r(!!Hn),hn):Jr},hn.curve=function(Hn){return arguments.length?(gn=Hn,sn!=null&&(Cr=gn(sn)),hn):gn},hn.context=function(Hn){return arguments.length?(Hn==null?sn=Cr=null:Cr=gn(sn=Hn),hn):sn},hn}function z(Xe,Ut){return Ut<Xe?-1:Ut>Xe?1:Ut>=Xe?0:NaN}function O(Xe){return Xe}function V(){var Xe=O,Ut=z,ur=null,br=r(0),Jr=r(v),sn=r(0);function gn(Cr){var hn,gi=Cr.length,Hn,qi,fa=0,eo=new Array(gi),ma=new Array(gi),so=+br.apply(this,arguments),ja=Math.min(v,Math.max(-v,Jr.apply(this,arguments)-so)),Xo,Uo=Math.min(Math.abs(ja)/gi,sn.apply(this,arguments)),ms=Uo*(ja<0?-1:1),as;for(hn=0;hn<gi;++hn)(as=ma[eo[hn]=hn]=+Xe(Cr[hn],hn,Cr))>0&&(fa+=as);for(Ut!=null?eo.sort(function(il,oo){return Ut(ma[il],ma[oo])}):ur!=null&&eo.sort(function(il,oo){return ur(Cr[il],Cr[oo])}),hn=0,qi=fa?(ja-gi*ms)/fa:0;hn<gi;++hn,so=Xo)Hn=eo[hn],as=ma[Hn],Xo=so+(as>0?as*qi:0)+ms,ma[Hn]={data:Cr[Hn],index:hn,value:as,startAngle:so,endAngle:Xo,padAngle:Uo};return ma}return gn.value=function(Cr){return arguments.length?(Xe=typeof Cr=="function"?Cr:r(+Cr),gn):Xe},gn.sortValues=function(Cr){return arguments.length?(Ut=Cr,ur=null,gn):Ut},gn.sort=function(Cr){return arguments.length?(ur=Cr,Ut=null,gn):ur},gn.startAngle=function(Cr){return arguments.length?(br=typeof Cr=="function"?Cr:r(+Cr),gn):br},gn.endAngle=function(Cr){return arguments.length?(Jr=typeof Cr=="function"?Cr:r(+Cr),gn):Jr},gn.padAngle=function(Cr){return arguments.length?(sn=typeof Cr=="function"?Cr:r(+Cr),gn):sn},gn}var B=N(g);function F(Xe){this._curve=Xe}F.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(Xe,Ut){this._curve.point(Ut*Math.sin(Xe),Ut*-Math.cos(Xe))}};function N(Xe){function Ut(ur){return new F(Xe(ur))}return Ut._curve=Xe,Ut}function Z(Xe){var Ut=Xe.curve;return Xe.angle=Xe.x,delete Xe.x,Xe.radius=Xe.y,delete Xe.y,Xe.curve=function(ur){return arguments.length?Ut(N(ur)):Ut()._curve},Xe}function J(){return Z(P().curve(B))}function re(){var Xe=D().curve(B),Ut=Xe.curve,ur=Xe.lineX0,br=Xe.lineX1,Jr=Xe.lineY0,sn=Xe.lineY1;return Xe.angle=Xe.x,delete Xe.x,Xe.startAngle=Xe.x0,delete Xe.x0,Xe.endAngle=Xe.x1,delete Xe.x1,Xe.radius=Xe.y,delete Xe.y,Xe.innerRadius=Xe.y0,delete Xe.y0,Xe.outerRadius=Xe.y1,delete Xe.y1,Xe.lineStartAngle=function(){return Z(ur())},delete Xe.lineX0,Xe.lineEndAngle=function(){return Z(br())},delete Xe.lineX1,Xe.lineInnerRadius=function(){return Z(Jr())},delete Xe.lineY0,Xe.lineOuterRadius=function(){return Z(sn())},delete Xe.lineY1,Xe.curve=function(gn){return arguments.length?Ut(N(gn)):Ut()._curve},Xe}function ue(Xe,Ut){return[(Ut=+Ut)*Math.cos(Xe-=Math.PI/2),Ut*Math.sin(Xe)]}var fe=Array.prototype.slice;function K(Xe){return Xe.source}function X(Xe){return Xe.target}function ae(Xe){var Ut=K,ur=X,br=C,Jr=A,sn=null;function gn(){var Cr,hn=fe.call(arguments),gi=Ut.apply(this,hn),Hn=ur.apply(this,hn);if(sn||(sn=Cr=t.path()),Xe(sn,+br.apply(this,(hn[0]=gi,hn)),+Jr.apply(this,hn),+br.apply(this,(hn[0]=Hn,hn)),+Jr.apply(this,hn)),Cr)return sn=null,Cr+""||null}return gn.source=function(Cr){return arguments.length?(Ut=Cr,gn):Ut},gn.target=function(Cr){return arguments.length?(ur=Cr,gn):ur},gn.x=function(Cr){return arguments.length?(br=typeof Cr=="function"?Cr:r(+Cr),gn):br},gn.y=function(Cr){return arguments.length?(Jr=typeof Cr=="function"?Cr:r(+Cr),gn):Jr},gn.context=function(Cr){return arguments.length?(sn=Cr==null?null:Cr,gn):sn},gn}function oe(Xe,Ut,ur,br,Jr){Xe.moveTo(Ut,ur),Xe.bezierCurveTo(Ut=(Ut+br)/2,ur,Ut,Jr,br,Jr)}function me(Xe,Ut,ur,br,Jr){Xe.moveTo(Ut,ur),Xe.bezierCurveTo(Ut,ur=(ur+Jr)/2,br,ur,br,Jr)}function xe(Xe,Ut,ur,br,Jr){var sn=ue(Ut,ur),gn=ue(Ut,ur=(ur+Jr)/2),Cr=ue(br,ur),hn=ue(br,Jr);Xe.moveTo(sn[0],sn[1]),Xe.bezierCurveTo(gn[0],gn[1],Cr[0],Cr[1],hn[0],hn[1])}function ce(){return ae(oe)}function ie(){return ae(me)}function ge(){var Xe=ae(xe);return Xe.angle=Xe.x,delete Xe.x,Xe.radius=Xe.y,delete Xe.y,Xe}var le={draw:function(Xe,Ut){var ur=Math.sqrt(Ut/c);Xe.moveTo(ur,0),Xe.arc(0,0,ur,0,v)}},we={draw:function(Xe,Ut){var ur=Math.sqrt(Ut/5)/2;Xe.moveTo(-3*ur,-ur),Xe.lineTo(-ur,-ur),Xe.lineTo(-ur,-3*ur),Xe.lineTo(ur,-3*ur),Xe.lineTo(ur,-ur),Xe.lineTo(3*ur,-ur),Xe.lineTo(3*ur,ur),Xe.lineTo(ur,ur),Xe.lineTo(ur,3*ur),Xe.lineTo(-ur,3*ur),Xe.lineTo(-ur,ur),Xe.lineTo(-3*ur,ur),Xe.closePath()}},Re=Math.sqrt(1/3),qe=Re*2,et={draw:function(Xe,Ut){var ur=Math.sqrt(Ut/qe),br=ur*Re;Xe.moveTo(0,-ur),Xe.lineTo(br,0),Xe.lineTo(0,ur),Xe.lineTo(-br,0),Xe.closePath()}},Pe=.8908130915292852,Ie=Math.sin(c/10)/Math.sin(7*c/10),ut=Math.sin(v/10)*Ie,ft=-Math.cos(v/10)*Ie,je={draw:function(Xe,Ut){var ur=Math.sqrt(Ut*Pe),br=ut*ur,Jr=ft*ur;Xe.moveTo(0,-ur),Xe.lineTo(br,Jr);for(var sn=1;sn<5;++sn){var gn=v*sn/5,Cr=Math.cos(gn),hn=Math.sin(gn);Xe.lineTo(hn*ur,-Cr*ur),Xe.lineTo(Cr*br-hn*Jr,hn*br+Cr*Jr)}Xe.closePath()}},_t={draw:function(Xe,Ut){var ur=Math.sqrt(Ut),br=-ur/2;Xe.rect(br,br,ur,ur)}},Bt=Math.sqrt(3),Lt={draw:function(Xe,Ut){var ur=-Math.sqrt(Ut/(Bt*3));Xe.moveTo(0,ur*2),Xe.lineTo(-Bt*ur,-ur),Xe.lineTo(Bt*ur,-ur),Xe.closePath()}},Me=-.5,Ze=Math.sqrt(3)/2,dt=1/Math.sqrt(12),it=(dt/2+1)*3,vt={draw:function(Xe,Ut){var ur=Math.sqrt(Ut/it),br=ur/2,Jr=ur*dt,sn=br,gn=ur*dt+ur,Cr=-sn,hn=gn;Xe.moveTo(br,Jr),Xe.lineTo(sn,gn),Xe.lineTo(Cr,hn),Xe.lineTo(Me*br-Ze*Jr,Ze*br+Me*Jr),Xe.lineTo(Me*sn-Ze*gn,Ze*sn+Me*gn),Xe.lineTo(Me*Cr-Ze*hn,Ze*Cr+Me*hn),Xe.lineTo(Me*br+Ze*Jr,Me*Jr-Ze*br),Xe.lineTo(Me*sn+Ze*gn,Me*gn-Ze*sn),Xe.lineTo(Me*Cr+Ze*hn,Me*hn-Ze*Cr),Xe.closePath()}},rt=[le,we,et,_t,je,Lt,vt];function We(){var Xe=r(le),Ut=r(64),ur=null;function br(){var Jr;if(ur||(ur=Jr=t.path()),Xe.apply(this,arguments).draw(ur,+Ut.apply(this,arguments)),Jr)return ur=null,Jr+""||null}return br.type=function(Jr){return arguments.length?(Xe=typeof Jr=="function"?Jr:r(Jr),br):Xe},br.size=function(Jr){return arguments.length?(Ut=typeof Jr=="function"?Jr:r(+Jr),br):Ut},br.context=function(Jr){return arguments.length?(ur=Jr==null?null:Jr,br):ur},br}function ht(){}function mt(Xe,Ut,ur){Xe._context.bezierCurveTo((2*Xe._x0+Xe._x1)/3,(2*Xe._y0+Xe._y1)/3,(Xe._x0+2*Xe._x1)/3,(Xe._y0+2*Xe._y1)/3,(Xe._x0+4*Xe._x1+Ut)/6,(Xe._y0+4*Xe._y1+ur)/6)}function er(Xe){this._context=Xe}er.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:mt(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(Xe,Ut){switch(Xe=+Xe,Ut=+Ut,this._point){case 0:this._point=1,this._line?this._context.lineTo(Xe,Ut):this._context.moveTo(Xe,Ut);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:mt(this,Xe,Ut);break}this._x0=this._x1,this._x1=Xe,this._y0=this._y1,this._y1=Ut}};function $t(Xe){return new er(Xe)}function cr(Xe){this._context=Xe}cr.prototype={areaStart:ht,areaEnd:ht,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(Xe,Ut){switch(Xe=+Xe,Ut=+Ut,this._point){case 0:this._point=1,this._x2=Xe,this._y2=Ut;break;case 1:this._point=2,this._x3=Xe,this._y3=Ut;break;case 2:this._point=3,this._x4=Xe,this._y4=Ut,this._context.moveTo((this._x0+4*this._x1+Xe)/6,(this._y0+4*this._y1+Ut)/6);break;default:mt(this,Xe,Ut);break}this._x0=this._x1,this._x1=Xe,this._y0=this._y1,this._y1=Ut}};function or(Xe){return new cr(Xe)}function vr(Xe){this._context=Xe}vr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(Xe,Ut){switch(Xe=+Xe,Ut=+Ut,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var ur=(this._x0+4*this._x1+Xe)/6,br=(this._y0+4*this._y1+Ut)/6;this._line?this._context.lineTo(ur,br):this._context.moveTo(ur,br);break;case 3:this._point=4;default:mt(this,Xe,Ut);break}this._x0=this._x1,this._x1=Xe,this._y0=this._y1,this._y1=Ut}};function Ot(Xe){return new vr(Xe)}function yt(Xe,Ut){this._basis=new er(Xe),this._beta=Ut}yt.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var Xe=this._x,Ut=this._y,ur=Xe.length-1;if(ur>0)for(var br=Xe[0],Jr=Ut[0],sn=Xe[ur]-br,gn=Ut[ur]-Jr,Cr=-1,hn;++Cr<=ur;)hn=Cr/ur,this._basis.point(this._beta*Xe[Cr]+(1-this._beta)*(br+hn*sn),this._beta*Ut[Cr]+(1-this._beta)*(Jr+hn*gn));this._x=this._y=null,this._basis.lineEnd()},point:function(Xe,Ut){this._x.push(+Xe),this._y.push(+Ut)}};var Et=function Xe(Ut){function ur(br){return Ut===1?new er(br):new yt(br,Ut)}return ur.beta=function(br){return Xe(+br)},ur}(.85);function Je(Xe,Ut,ur){Xe._context.bezierCurveTo(Xe._x1+Xe._k*(Xe._x2-Xe._x0),Xe._y1+Xe._k*(Xe._y2-Xe._y0),Xe._x2+Xe._k*(Xe._x1-Ut),Xe._y2+Xe._k*(Xe._y1-ur),Xe._x2,Xe._y2)}function Ke(Xe,Ut){this._context=Xe,this._k=(1-Ut)/6}Ke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Je(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(Xe,Ut){switch(Xe=+Xe,Ut=+Ut,this._point){case 0:this._point=1,this._line?this._context.lineTo(Xe,Ut):this._context.moveTo(Xe,Ut);break;case 1:this._point=2,this._x1=Xe,this._y1=Ut;break;case 2:this._point=3;default:Je(this,Xe,Ut);break}this._x0=this._x1,this._x1=this._x2,this._x2=Xe,this._y0=this._y1,this._y1=this._y2,this._y2=Ut}};var At=function Xe(Ut){function ur(br){return new Ke(br,Ut)}return ur.tension=function(br){return Xe(+br)},ur}(0);function Ee(Xe,Ut){this._context=Xe,this._k=(1-Ut)/6}Ee.prototype={areaStart:ht,areaEnd:ht,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(Xe,Ut){switch(Xe=+Xe,Ut=+Ut,this._point){case 0:this._point=1,this._x3=Xe,this._y3=Ut;break;case 1:this._point=2,this._context.moveTo(this._x4=Xe,this._y4=Ut);break;case 2:this._point=3,this._x5=Xe,this._y5=Ut;break;default:Je(this,Xe,Ut);break}this._x0=this._x1,this._x1=this._x2,this._x2=Xe,this._y0=this._y1,this._y1=this._y2,this._y2=Ut}};var de=function Xe(Ut){function ur(br){return new Ee(br,Ut)}return ur.tension=function(br){return Xe(+br)},ur}(0);function Te(Xe,Ut){this._context=Xe,this._k=(1-Ut)/6}Te.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(Xe,Ut){switch(Xe=+Xe,Ut=+Ut,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Je(this,Xe,Ut);break}this._x0=this._x1,this._x1=this._x2,this._x2=Xe,this._y0=this._y1,this._y1=this._y2,this._y2=Ut}};var nt=function Xe(Ut){function ur(br){return new Te(br,Ut)}return ur.tension=function(br){return Xe(+br)},ur}(0);function Mt(Xe,Ut,ur){var br=Xe._x1,Jr=Xe._y1,sn=Xe._x2,gn=Xe._y2;if(Xe._l01_a>f){var Cr=2*Xe._l01_2a+3*Xe._l01_a*Xe._l12_a+Xe._l12_2a,hn=3*Xe._l01_a*(Xe._l01_a+Xe._l12_a);br=(br*Cr-Xe._x0*Xe._l12_2a+Xe._x2*Xe._l01_2a)/hn,Jr=(Jr*Cr-Xe._y0*Xe._l12_2a+Xe._y2*Xe._l01_2a)/hn}if(Xe._l23_a>f){var gi=2*Xe._l23_2a+3*Xe._l23_a*Xe._l12_a+Xe._l12_2a,Hn=3*Xe._l23_a*(Xe._l23_a+Xe._l12_a);sn=(sn*gi+Xe._x1*Xe._l23_2a-Ut*Xe._l12_2a)/Hn,gn=(gn*gi+Xe._y1*Xe._l23_2a-ur*Xe._l12_2a)/Hn}Xe._context.bezierCurveTo(br,Jr,sn,gn,Xe._x2,Xe._y2)}function Kt(Xe,Ut){this._context=Xe,this._alpha=Ut}Kt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(Xe,Ut){if(Xe=+Xe,Ut=+Ut,this._point){var ur=this._x2-Xe,br=this._y2-Ut;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(ur*ur+br*br,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Xe,Ut):this._context.moveTo(Xe,Ut);break;case 1:this._point=2;break;case 2:this._point=3;default:Mt(this,Xe,Ut);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Xe,this._y0=this._y1,this._y1=this._y2,this._y2=Ut}};var Jt=function Xe(Ut){function ur(br){return Ut?new Kt(br,Ut):new Ke(br,0)}return ur.alpha=function(br){return Xe(+br)},ur}(.5);function Fr(Xe,Ut){this._context=Xe,this._alpha=Ut}Fr.prototype={areaStart:ht,areaEnd:ht,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(Xe,Ut){if(Xe=+Xe,Ut=+Ut,this._point){var ur=this._x2-Xe,br=this._y2-Ut;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(ur*ur+br*br,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=Xe,this._y3=Ut;break;case 1:this._point=2,this._context.moveTo(this._x4=Xe,this._y4=Ut);break;case 2:this._point=3,this._x5=Xe,this._y5=Ut;break;default:Mt(this,Xe,Ut);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Xe,this._y0=this._y1,this._y1=this._y2,this._y2=Ut}};var Vr=function Xe(Ut){function ur(br){return Ut?new Fr(br,Ut):new Ee(br,0)}return ur.alpha=function(br){return Xe(+br)},ur}(.5);function mr(Xe,Ut){this._context=Xe,this._alpha=Ut}mr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(Xe,Ut){if(Xe=+Xe,Ut=+Ut,this._point){var ur=this._x2-Xe,br=this._y2-Ut;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(ur*ur+br*br,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Mt(this,Xe,Ut);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Xe,this._y0=this._y1,this._y1=this._y2,this._y2=Ut}};var zr=function Xe(Ut){function ur(br){return Ut?new mr(br,Ut):new Te(br,0)}return ur.alpha=function(br){return Xe(+br)},ur}(.5);function an(Xe){this._context=Xe}an.prototype={areaStart:ht,areaEnd:ht,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(Xe,Ut){Xe=+Xe,Ut=+Ut,this._point?this._context.lineTo(Xe,Ut):(this._point=1,this._context.moveTo(Xe,Ut))}};function ni(Xe){return new an(Xe)}function mn(Xe){return Xe<0?-1:1}function fi(Xe,Ut,ur){var br=Xe._x1-Xe._x0,Jr=Ut-Xe._x1,sn=(Xe._y1-Xe._y0)/(br||Jr<0&&-0),gn=(ur-Xe._y1)/(Jr||br<0&&-0),Cr=(sn*Jr+gn*br)/(br+Jr);return(mn(sn)+mn(gn))*Math.min(Math.abs(sn),Math.abs(gn),.5*Math.abs(Cr))||0}function Wi(Xe,Ut){var ur=Xe._x1-Xe._x0;return ur?(3*(Xe._y1-Xe._y0)/ur-Ut)/2:Ut}function si(Xe,Ut,ur){var br=Xe._x0,Jr=Xe._y0,sn=Xe._x1,gn=Xe._y1,Cr=(sn-br)/3;Xe._context.bezierCurveTo(br+Cr,Jr+Cr*Ut,sn-Cr,gn-Cr*ur,sn,gn)}function Zi(Xe){this._context=Xe}Zi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:si(this,this._t0,Wi(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(Xe,Ut){var ur=NaN;if(Xe=+Xe,Ut=+Ut,!(Xe===this._x1&&Ut===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Xe,Ut):this._context.moveTo(Xe,Ut);break;case 1:this._point=2;break;case 2:this._point=3,si(this,Wi(this,ur=fi(this,Xe,Ut)),ur);break;default:si(this,this._t0,ur=fi(this,Xe,Ut));break}this._x0=this._x1,this._x1=Xe,this._y0=this._y1,this._y1=Ut,this._t0=ur}}};function Ei(Xe){this._context=new ot(Xe)}(Ei.prototype=Object.create(Zi.prototype)).point=function(Xe,Ut){Zi.prototype.point.call(this,Ut,Xe)};function ot(Xe){this._context=Xe}ot.prototype={moveTo:function(Xe,Ut){this._context.moveTo(Ut,Xe)},closePath:function(){this._context.closePath()},lineTo:function(Xe,Ut){this._context.lineTo(Ut,Xe)},bezierCurveTo:function(Xe,Ut,ur,br,Jr,sn){this._context.bezierCurveTo(Ut,Xe,br,ur,sn,Jr)}};function Be(Xe){return new Zi(Xe)}function lt(Xe){return new Ei(Xe)}function xt(Xe){this._context=Xe}xt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var Xe=this._x,Ut=this._y,ur=Xe.length;if(ur)if(this._line?this._context.lineTo(Xe[0],Ut[0]):this._context.moveTo(Xe[0],Ut[0]),ur===2)this._context.lineTo(Xe[1],Ut[1]);else for(var br=Nt(Xe),Jr=Nt(Ut),sn=0,gn=1;gn<ur;++sn,++gn)this._context.bezierCurveTo(br[0][sn],Jr[0][sn],br[1][sn],Jr[1][sn],Xe[gn],Ut[gn]);(this._line||this._line!==0&&ur===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(Xe,Ut){this._x.push(+Xe),this._y.push(+Ut)}};function Nt(Xe){var Ut,ur=Xe.length-1,br,Jr=new Array(ur),sn=new Array(ur),gn=new Array(ur);for(Jr[0]=0,sn[0]=2,gn[0]=Xe[0]+2*Xe[1],Ut=1;Ut<ur-1;++Ut)Jr[Ut]=1,sn[Ut]=4,gn[Ut]=4*Xe[Ut]+2*Xe[Ut+1];for(Jr[ur-1]=2,sn[ur-1]=7,gn[ur-1]=8*Xe[ur-1]+Xe[ur],Ut=1;Ut<ur;++Ut)br=Jr[Ut]/sn[Ut-1],sn[Ut]-=br,gn[Ut]-=br*gn[Ut-1];for(Jr[ur-1]=gn[ur-1]/sn[ur-1],Ut=ur-2;Ut>=0;--Ut)Jr[Ut]=(gn[Ut]-Jr[Ut+1])/sn[Ut];for(sn[ur-1]=(Xe[ur]+Jr[ur-1])/2,Ut=0;Ut<ur-1;++Ut)sn[Ut]=2*Xe[Ut+1]-Jr[Ut+1];return[Jr,sn]}function nr(Xe){return new xt(Xe)}function yr(Xe,Ut){this._context=Xe,this._t=Ut}yr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(Xe,Ut){switch(Xe=+Xe,Ut=+Ut,this._point){case 0:this._point=1,this._line?this._context.lineTo(Xe,Ut):this._context.moveTo(Xe,Ut);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,Ut),this._context.lineTo(Xe,Ut);else{var ur=this._x*(1-this._t)+Xe*this._t;this._context.lineTo(ur,this._y),this._context.lineTo(ur,Ut)}break}}this._x=Xe,this._y=Ut}};function dr(Xe){return new yr(Xe,.5)}function Rr(Xe){return new yr(Xe,0)}function Gr(Xe){return new yr(Xe,1)}function Yr(Xe,Ut){if((gn=Xe.length)>1)for(var ur=1,br,Jr,sn=Xe[Ut[0]],gn,Cr=sn.length;ur<gn;++ur)for(Jr=sn,sn=Xe[Ut[ur]],br=0;br<Cr;++br)sn[br][1]+=sn[br][0]=isNaN(Jr[br][1])?Jr[br][0]:Jr[br][1]}function dn(Xe){for(var Ut=Xe.length,ur=new Array(Ut);--Ut>=0;)ur[Ut]=Ut;return ur}function Wr(Xe,Ut){return Xe[Ut]}function qn(){var Xe=r([]),Ut=dn,ur=Yr,br=Wr;function Jr(sn){var gn=Xe.apply(this,arguments),Cr,hn=sn.length,gi=gn.length,Hn=new Array(gi),qi;for(Cr=0;Cr<gi;++Cr){for(var fa=gn[Cr],eo=Hn[Cr]=new Array(hn),ma=0,so;ma<hn;++ma)eo[ma]=so=[0,+br(sn[ma],fa,ma,sn)],so.data=sn[ma];eo.key=fa}for(Cr=0,qi=Ut(Hn);Cr<gi;++Cr)Hn[qi[Cr]].index=Cr;return ur(Hn,qi),Hn}return Jr.keys=function(sn){return arguments.length?(Xe=typeof sn=="function"?sn:r(fe.call(sn)),Jr):Xe},Jr.value=function(sn){return arguments.length?(br=typeof sn=="function"?sn:r(+sn),Jr):br},Jr.order=function(sn){return arguments.length?(Ut=sn==null?dn:typeof sn=="function"?sn:r(fe.call(sn)),Jr):Ut},Jr.offset=function(sn){return arguments.length?(ur=sn==null?Yr:sn,Jr):ur},Jr}function vi(Xe,Ut){if((br=Xe.length)>0){for(var ur,br,Jr=0,sn=Xe[0].length,gn;Jr<sn;++Jr){for(gn=ur=0;ur<br;++ur)gn+=Xe[ur][Jr][1]||0;if(gn)for(ur=0;ur<br;++ur)Xe[ur][Jr][1]/=gn}Yr(Xe,Ut)}}function Mi(Xe,Ut){if((hn=Xe.length)>0)for(var ur,br=0,Jr,sn,gn,Cr,hn,gi=Xe[Ut[0]].length;br<gi;++br)for(gn=Cr=0,ur=0;ur<hn;++ur)(sn=(Jr=Xe[Ut[ur]][br])[1]-Jr[0])>0?(Jr[0]=gn,Jr[1]=gn+=sn):sn<0?(Jr[1]=Cr,Jr[0]=Cr+=sn):(Jr[0]=0,Jr[1]=sn)}function Ui(Xe,Ut){if((Jr=Xe.length)>0){for(var ur=0,br=Xe[Ut[0]],Jr,sn=br.length;ur<sn;++ur){for(var gn=0,Cr=0;gn<Jr;++gn)Cr+=Xe[gn][ur][1]||0;br[ur][1]+=br[ur][0]=-Cr/2}Yr(Xe,Ut)}}function ji(Xe,Ut){if(!(!((gn=Xe.length)>0)||!((sn=(Jr=Xe[Ut[0]]).length)>0))){for(var ur=0,br=1,Jr,sn,gn;br<sn;++br){for(var Cr=0,hn=0,gi=0;Cr<gn;++Cr){for(var Hn=Xe[Ut[Cr]],qi=Hn[br][1]||0,fa=Hn[br-1][1]||0,eo=(qi-fa)/2,ma=0;ma<Cr;++ma){var so=Xe[Ut[ma]],ja=so[br][1]||0,Xo=so[br-1][1]||0;eo+=ja-Xo}hn+=qi,gi+=eo*qi}Jr[br-1][1]+=Jr[br-1][0]=ur,hn&&(ur-=gi/hn)}Jr[br-1][1]+=Jr[br-1][0]=ur,Yr(Xe,Ut)}}function ea(Xe){var Ut=Xe.map(Ra);return dn(Xe).sort(function(ur,br){return Ut[ur]-Ut[br]})}function Ra(Xe){for(var Ut=-1,ur=0,br=Xe.length,Jr,sn=-1/0;++Ut<br;)(Jr=+Xe[Ut][1])>sn&&(sn=Jr,ur=Ut);return ur}function Li(Xe){var Ut=Xe.map(Yn);return dn(Xe).sort(function(ur,br){return Ut[ur]-Ut[br]})}function Yn(Xe){for(var Ut=0,ur=-1,br=Xe.length,Jr;++ur<br;)(Jr=+Xe[ur][1])&&(Ut+=Jr);return Ut}function zi(Xe){return Li(Xe).reverse()}function ya(Xe){var Ut=Xe.length,ur,br,Jr=Xe.map(Yn),sn=ea(Xe),gn=0,Cr=0,hn=[],gi=[];for(ur=0;ur<Ut;++ur)br=sn[ur],gn<Cr?(gn+=Jr[br],hn.push(br)):(Cr+=Jr[br],gi.push(br));return gi.reverse().concat(hn)}function zn(Xe){return dn(Xe).reverse()}e.arc=E,e.area=D,e.areaRadial=re,e.curveBasis=$t,e.curveBasisClosed=or,e.curveBasisOpen=Ot,e.curveBundle=Et,e.curveCardinal=At,e.curveCardinalClosed=de,e.curveCardinalOpen=nt,e.curveCatmullRom=Jt,e.curveCatmullRomClosed=Vr,e.curveCatmullRomOpen=zr,e.curveLinear=g,e.curveLinearClosed=ni,e.curveMonotoneX=Be,e.curveMonotoneY=lt,e.curveNatural=nr,e.curveStep=dr,e.curveStepAfter=Gr,e.curveStepBefore=Rr,e.line=P,e.lineRadial=J,e.linkHorizontal=ce,e.linkRadial=ge,e.linkVertical=ie,e.pie=V,e.pointRadial=ue,e.radialArea=re,e.radialLine=J,e.stack=qn,e.stackOffsetDiverging=Mi,e.stackOffsetExpand=vi,e.stackOffsetNone=Yr,e.stackOffsetSilhouette=Ui,e.stackOffsetWiggle=ji,e.stackOrderAppearance=ea,e.stackOrderAscending=Li,e.stackOrderDescending=zi,e.stackOrderInsideOut=ya,e.stackOrderNone=dn,e.stackOrderReverse=zn,e.symbol=We,e.symbolCircle=le,e.symbolCross=we,e.symbolDiamond=et,e.symbolSquare=_t,e.symbolStar=je,e.symbolTriangle=Lt,e.symbolWye=vt,e.symbols=rt,Object.defineProperty(e,"__esModule",{value:!0})})});var VUe=ne((vF,UUe)=>{(function(e,t){typeof vF=="object"&&typeof UUe!="undefined"?t(vF,UE(),sF(),qZ()):typeof define=="function"&&define.amd?define(["exports","d3-array","d3-collection","d3-shape"],t):t(e.d3=e.d3||{},e.d3,e.d3,e.d3)})(vF,function(e,t,r,i){"use strict";function n(g){return g.target.depth}function a(g){return g.depth}function o(g,C){return C-1-g.height}function s(g,C){return g.sourceLinks.length?g.depth:C-1}function l(g){return g.targetLinks.length?g.depth:g.sourceLinks.length?t.min(g.sourceLinks,n)-1:0}function u(g){return function(){return g}}function f(g,C){return h(g.source,C.source)||g.index-C.index}function c(g,C){return h(g.target,C.target)||g.index-C.index}function h(g,C){return g.y0-C.y0}function v(g){return g.value}function d(g){return(g.y0+g.y1)/2}function _(g){return d(g.source)*g.value}function T(g){return d(g.target)*g.value}function p(g){return g.index}function M(g){return g.nodes}function b(g){return g.links}function w(g,C){var A=g.get(C);if(!A)throw new Error("missing: "+C);return A}var k=function(){var g=0,C=0,A=1,P=1,D=24,z=8,O=p,V=s,B=M,F=b,N=32,Z=2/3;function J(){var ae={nodes:B.apply(null,arguments),links:F.apply(null,arguments)};return re(ae),ue(ae),fe(ae),K(ae,N),X(ae),ae}J.update=function(ae){return X(ae),ae},J.nodeId=function(ae){return arguments.length?(O=typeof ae=="function"?ae:u(ae),J):O},J.nodeAlign=function(ae){return arguments.length?(V=typeof ae=="function"?ae:u(ae),J):V},J.nodeWidth=function(ae){return arguments.length?(D=+ae,J):D},J.nodePadding=function(ae){return arguments.length?(z=+ae,J):z},J.nodes=function(ae){return arguments.length?(B=typeof ae=="function"?ae:u(ae),J):B},J.links=function(ae){return arguments.length?(F=typeof ae=="function"?ae:u(ae),J):F},J.size=function(ae){return arguments.length?(g=C=0,A=+ae[0],P=+ae[1],J):[A-g,P-C]},J.extent=function(ae){return arguments.length?(g=+ae[0][0],A=+ae[1][0],C=+ae[0][1],P=+ae[1][1],J):[[g,C],[A,P]]},J.iterations=function(ae){return arguments.length?(N=+ae,J):N};function re(ae){ae.nodes.forEach(function(me,xe){me.index=xe,me.sourceLinks=[],me.targetLinks=[]});var oe=r.map(ae.nodes,O);ae.links.forEach(function(me,xe){me.index=xe;var ce=me.source,ie=me.target;typeof ce!="object"&&(ce=me.source=w(oe,ce)),typeof ie!="object"&&(ie=me.target=w(oe,ie)),ce.sourceLinks.push(me),ie.targetLinks.push(me)})}function ue(ae){ae.nodes.forEach(function(oe){oe.value=Math.max(t.sum(oe.sourceLinks,v),t.sum(oe.targetLinks,v))})}function fe(ae){var oe,me,xe;for(oe=ae.nodes,me=[],xe=0;oe.length;++xe,oe=me,me=[])oe.forEach(function(ie){ie.depth=xe,ie.sourceLinks.forEach(function(ge){me.indexOf(ge.target)<0&&me.push(ge.target)})});for(oe=ae.nodes,me=[],xe=0;oe.length;++xe,oe=me,me=[])oe.forEach(function(ie){ie.height=xe,ie.targetLinks.forEach(function(ge){me.indexOf(ge.source)<0&&me.push(ge.source)})});var ce=(A-g-D)/(xe-1);ae.nodes.forEach(function(ie){ie.x1=(ie.x0=g+Math.max(0,Math.min(xe-1,Math.floor(V.call(null,ie,xe))))*ce)+D})}function K(ae){var oe=r.nest().key(function(we){return we.x0}).sortKeys(t.ascending).entries(ae.nodes).map(function(we){return we.values});ce(),le();for(var me=1,xe=N;xe>0;--xe)ge(me*=.99),le(),ie(me),le();function ce(){var we=t.max(oe,function(et){return et.length}),Re=Z*(P-C)/(we-1);z>Re&&(z=Re);var qe=t.min(oe,function(et){return(P-C-(et.length-1)*z)/t.sum(et,v)});oe.forEach(function(et){et.forEach(function(Pe,Ie){Pe.y1=(Pe.y0=Ie)+Pe.value*qe})}),ae.links.forEach(function(et){et.width=et.value*qe})}function ie(we){oe.forEach(function(Re){Re.forEach(function(qe){if(qe.targetLinks.length){var et=(t.sum(qe.targetLinks,_)/t.sum(qe.targetLinks,v)-d(qe))*we;qe.y0+=et,qe.y1+=et}})})}function ge(we){oe.slice().reverse().forEach(function(Re){Re.forEach(function(qe){if(qe.sourceLinks.length){var et=(t.sum(qe.sourceLinks,T)/t.sum(qe.sourceLinks,v)-d(qe))*we;qe.y0+=et,qe.y1+=et}})})}function le(){oe.forEach(function(we){var Re,qe,et=C,Pe=we.length,Ie;for(we.sort(h),Ie=0;Ie<Pe;++Ie)Re=we[Ie],qe=et-Re.y0,qe>0&&(Re.y0+=qe,Re.y1+=qe),et=Re.y1+z;if(qe=et-z-P,qe>0)for(et=Re.y0-=qe,Re.y1-=qe,Ie=Pe-2;Ie>=0;--Ie)Re=we[Ie],qe=Re.y1+z-et,qe>0&&(Re.y0-=qe,Re.y1-=qe),et=Re.y0})}}function X(ae){ae.nodes.forEach(function(oe){oe.sourceLinks.sort(c),oe.targetLinks.sort(f)}),ae.nodes.forEach(function(oe){var me=oe.y0,xe=me;oe.sourceLinks.forEach(function(ce){ce.y0=me+ce.width/2,me+=ce.width}),oe.targetLinks.forEach(function(ce){ce.y1=xe+ce.width/2,xe+=ce.width})})}return J};function x(g){return[g.source.x1,g.y0]}function E(g){return[g.target.x0,g.y1]}var S=function(){return i.linkHorizontal().source(x).target(E)};e.sankey=k,e.sankeyCenter=l,e.sankeyLeft=a,e.sankeyRight=o,e.sankeyJustify=s,e.sankeyLinkHorizontal=S,Object.defineProperty(e,"__esModule",{value:!0})})});var GUe=ne((cmr,HUe)=>{var JGt=FZ();HUe.exports=function(t,r){var i=[],n=[],a=[],o={},s=[],l;function u(b){a[b]=!1,o.hasOwnProperty(b)&&Object.keys(o[b]).forEach(function(w){delete o[b][w],a[w]&&u(w)})}function f(b){var w=!1;n.push(b),a[b]=!0;var k,x;for(k=0;k<s[b].length;k++)x=s[b][k],x===l?(c(l,n),w=!0):a[x]||(w=f(x));if(w)u(b);else for(k=0;k<s[b].length;k++){x=s[b][k];var E=o[x];E||(E={},o[x]=E),E[x]=!0}return n.pop(),w}function c(b,w){var k=[].concat(w).concat(b);r?r(f):i.push(k)}function h(b){for(var w=0;w<t.length;w++)w<b&&(t[w]=[]),t[w]=t[w].filter(function(k){return k>=b})}function v(b){h(b);for(var w=t,k=JGt(w),x=k.components.filter(function(D){return D.length>1}),E=1/0,S,g=0;g<x.length;g++)for(var C=0;C<x[g].length;C++)x[g][C]<E&&(E=x[g][C],S=g);var A=x[S];if(!A)return!1;var P=t.map(function(D,z){return A.indexOf(z)===-1?[]:D.filter(function(O){return A.indexOf(O)!==-1})});return{leastVertex:E,adjList:P}}l=0;for(var d=t.length;l<d;){var _=v(l);if(l=_.leastVertex,s=_.adjList,s){for(var T=0;T<s.length;T++)for(var p=0;p<s[T].length;p++){var M=s[T][p];a[+M]=!1,o[M]={}}f(l),l=l+1}else l=d}if(!r)return i}});var WUe=ne((dF,YUe)=>{(function(e,t){typeof dF=="object"&&typeof YUe!="undefined"?t(dF,UE(),sF(),qZ(),GUe()):typeof define=="function"&&define.amd?define(["exports","d3-array","d3-collection","d3-shape","elementary-circuits-directed-graph"],t):t(e.d3=e.d3||{},e.d3,e.d3,e.d3,null)})(dF,function(e,t,r,i,n){"use strict";n=n&&n.hasOwnProperty("default")?n.default:n;function a(Pe){return Pe.target.depth}function o(Pe){return Pe.depth}function s(Pe,Ie){return Ie-1-Pe.height}function l(Pe,Ie){return Pe.sourceLinks.length?Pe.depth:Ie-1}function u(Pe){return Pe.targetLinks.length?Pe.depth:Pe.sourceLinks.length?t.min(Pe.sourceLinks,a)-1:0}function f(Pe){return function(){return Pe}}var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Pe){return typeof Pe}:function(Pe){return Pe&&typeof Symbol=="function"&&Pe.constructor===Symbol&&Pe!==Symbol.prototype?"symbol":typeof Pe};function h(Pe,Ie){return d(Pe.source,Ie.source)||Pe.index-Ie.index}function v(Pe,Ie){return d(Pe.target,Ie.target)||Pe.index-Ie.index}function d(Pe,Ie){return Pe.partOfCycle===Ie.partOfCycle?Pe.y0-Ie.y0:Pe.circularLinkType==="top"||Ie.circularLinkType==="bottom"?-1:1}function _(Pe){return Pe.value}function T(Pe){return(Pe.y0+Pe.y1)/2}function p(Pe){return T(Pe.source)}function M(Pe){return T(Pe.target)}function b(Pe){return Pe.index}function w(Pe){return Pe.nodes}function k(Pe){return Pe.links}function x(Pe,Ie){var ut=Pe.get(Ie);if(!ut)throw new Error("missing: "+Ie);return ut}function E(Pe,Ie){return Ie(Pe)}var S=25,g=10,C=.3;function A(){var Pe=0,Ie=0,ut=1,ft=1,je=24,_t,Bt=b,Lt=l,Me=w,Ze=k,dt=32,it=2,vt,rt=null;function We(){var Ot={nodes:Me.apply(null,arguments),links:Ze.apply(null,arguments)};ht(Ot),P(Ot,Bt,rt),mt(Ot),cr(Ot),D(Ot,Bt),or(Ot,dt,Bt),vr(Ot);for(var yt=4,Et=0;Et<yt;Et++)ge(Ot,ft,Bt),le(Ot,ft,Bt),xe(Ot,Ie,ft,Bt),ge(Ot,ft,Bt),le(Ot,ft,Bt);return et(Ot,Ie,ft),N(Ot,it,ft,Bt),Ot}We.nodeId=function(Ot){return arguments.length?(Bt=typeof Ot=="function"?Ot:f(Ot),We):Bt},We.nodeAlign=function(Ot){return arguments.length?(Lt=typeof Ot=="function"?Ot:f(Ot),We):Lt},We.nodeWidth=function(Ot){return arguments.length?(je=+Ot,We):je},We.nodePadding=function(Ot){return arguments.length?(_t=+Ot,We):_t},We.nodes=function(Ot){return arguments.length?(Me=typeof Ot=="function"?Ot:f(Ot),We):Me},We.links=function(Ot){return arguments.length?(Ze=typeof Ot=="function"?Ot:f(Ot),We):Ze},We.size=function(Ot){return arguments.length?(Pe=Ie=0,ut=+Ot[0],ft=+Ot[1],We):[ut-Pe,ft-Ie]},We.extent=function(Ot){return arguments.length?(Pe=+Ot[0][0],ut=+Ot[1][0],Ie=+Ot[0][1],ft=+Ot[1][1],We):[[Pe,Ie],[ut,ft]]},We.iterations=function(Ot){return arguments.length?(dt=+Ot,We):dt},We.circularLinkGap=function(Ot){return arguments.length?(it=+Ot,We):it},We.nodePaddingRatio=function(Ot){return arguments.length?(vt=+Ot,We):vt},We.sortNodes=function(Ot){return arguments.length?(rt=Ot,We):rt},We.update=function(Ot){return D(Ot,Bt),vr(Ot),Ot.links.forEach(function(yt){yt.circular&&(yt.circularLinkType=yt.y0+yt.y1<ft?"top":"bottom",yt.source.circularLinkType=yt.circularLinkType,yt.target.circularLinkType=yt.circularLinkType)}),ge(Ot,ft,Bt,!1),le(Ot,ft,Bt),N(Ot,it,ft,Bt),Ot};function ht(Ot){Ot.nodes.forEach(function(Et,Je){Et.index=Je,Et.sourceLinks=[],Et.targetLinks=[]});var yt=r.map(Ot.nodes,Bt);return Ot.links.forEach(function(Et,Je){Et.index=Je;var Ke=Et.source,At=Et.target;(typeof Ke=="undefined"?"undefined":c(Ke))!=="object"&&(Ke=Et.source=x(yt,Ke)),(typeof At=="undefined"?"undefined":c(At))!=="object"&&(At=Et.target=x(yt,At)),Ke.sourceLinks.push(Et),At.targetLinks.push(Et)}),Ot}function mt(Ot){Ot.nodes.forEach(function(yt){yt.partOfCycle=!1,yt.value=Math.max(t.sum(yt.sourceLinks,_),t.sum(yt.targetLinks,_)),yt.sourceLinks.forEach(function(Et){Et.circular&&(yt.partOfCycle=!0,yt.circularLinkType=Et.circularLinkType)}),yt.targetLinks.forEach(function(Et){Et.circular&&(yt.partOfCycle=!0,yt.circularLinkType=Et.circularLinkType)})})}function er(Ot){var yt=0,Et=0,Je=0,Ke=0,At=t.max(Ot.nodes,function(Ee){return Ee.column});return Ot.links.forEach(function(Ee){Ee.circular&&(Ee.circularLinkType=="top"?yt=yt+Ee.width:Et=Et+Ee.width,Ee.target.column==0&&(Ke=Ke+Ee.width),Ee.source.column==At&&(Je=Je+Ee.width))}),yt=yt>0?yt+S+g:yt,Et=Et>0?Et+S+g:Et,Je=Je>0?Je+S+g:Je,Ke=Ke>0?Ke+S+g:Ke,{top:yt,bottom:Et,left:Ke,right:Je}}function $t(Ot,yt){var Et=t.max(Ot.nodes,function(nt){return nt.column}),Je=ut-Pe,Ke=ft-Ie,At=Je+yt.right+yt.left,Ee=Ke+yt.top+yt.bottom,de=Je/At,Te=Ke/Ee;return Pe=Pe*de+yt.left,ut=yt.right==0?ut:ut*de,Ie=Ie*Te+yt.top,ft=ft*Te,Ot.nodes.forEach(function(nt){nt.x0=Pe+nt.column*((ut-Pe-je)/Et),nt.x1=nt.x0+je}),Te}function cr(Ot){var yt,Et,Je;for(yt=Ot.nodes,Et=[],Je=0;yt.length;++Je,yt=Et,Et=[])yt.forEach(function(Ke){Ke.depth=Je,Ke.sourceLinks.forEach(function(At){Et.indexOf(At.target)<0&&!At.circular&&Et.push(At.target)})});for(yt=Ot.nodes,Et=[],Je=0;yt.length;++Je,yt=Et,Et=[])yt.forEach(function(Ke){Ke.height=Je,Ke.targetLinks.forEach(function(At){Et.indexOf(At.source)<0&&!At.circular&&Et.push(At.source)})});Ot.nodes.forEach(function(Ke){Ke.column=Math.floor(Lt.call(null,Ke,Je))})}function or(Ot,yt,Et){var Je=r.nest().key(function(nt){return nt.column}).sortKeys(t.ascending).entries(Ot.nodes).map(function(nt){return nt.values});Ee(Et),Te();for(var Ke=1,At=yt;At>0;--At)de(Ke*=.99,Et),Te();function Ee(nt){if(vt){var Mt=1/0;Je.forEach(function(Vr){var mr=ft*vt/(Vr.length+1);Mt=mr<Mt?mr:Mt}),_t=Mt}var Kt=t.min(Je,function(Vr){return(ft-Ie-(Vr.length-1)*_t)/t.sum(Vr,_)});Kt=Kt*C,Ot.links.forEach(function(Vr){Vr.width=Vr.value*Kt});var Jt=er(Ot),Fr=$t(Ot,Jt);Kt=Kt*Fr,Ot.links.forEach(function(Vr){Vr.width=Vr.value*Kt}),Je.forEach(function(Vr){var mr=Vr.length;Vr.forEach(function(zr,an){zr.depth==Je.length-1&&mr==1||zr.depth==0&&mr==1?(zr.y0=ft/2-zr.value*Kt,zr.y1=zr.y0+zr.value*Kt):zr.partOfCycle?V(zr,nt)==0?(zr.y0=ft/2+an,zr.y1=zr.y0+zr.value*Kt):zr.circularLinkType=="top"?(zr.y0=Ie+an,zr.y1=zr.y0+zr.value*Kt):(zr.y0=ft-zr.value*Kt-an,zr.y1=zr.y0+zr.value*Kt):Jt.top==0||Jt.bottom==0?(zr.y0=(ft-Ie)/mr*an,zr.y1=zr.y0+zr.value*Kt):(zr.y0=(ft-Ie)/2-mr/2+an,zr.y1=zr.y0+zr.value*Kt)})})}function de(nt,Mt){var Kt=Je.length;Je.forEach(function(Jt){var Fr=Jt.length,Vr=Jt[0].depth;Jt.forEach(function(mr){var zr;if((mr.sourceLinks.length||mr.targetLinks.length)&&!(mr.partOfCycle&&V(mr,Mt)>0))if(Vr==0&&Fr==1)zr=mr.y1-mr.y0,mr.y0=ft/2-zr/2,mr.y1=ft/2+zr/2;else if(Vr==Kt-1&&Fr==1)zr=mr.y1-mr.y0,mr.y0=ft/2-zr/2,mr.y1=ft/2+zr/2;else{var an=0,ni=t.mean(mr.sourceLinks,M),mn=t.mean(mr.targetLinks,p);ni&&mn?an=(ni+mn)/2:an=ni||mn;var fi=(an-T(mr))*nt;mr.y0+=fi,mr.y1+=fi}})})}function Te(){Je.forEach(function(nt){var Mt,Kt,Jt=Ie,Fr=nt.length,Vr;for(nt.sort(d),Vr=0;Vr<Fr;++Vr)Mt=nt[Vr],Kt=Jt-Mt.y0,Kt>0&&(Mt.y0+=Kt,Mt.y1+=Kt),Jt=Mt.y1+_t;if(Kt=Jt-_t-ft,Kt>0)for(Jt=Mt.y0-=Kt,Mt.y1-=Kt,Vr=Fr-2;Vr>=0;--Vr)Mt=nt[Vr],Kt=Mt.y1+_t-Jt,Kt>0&&(Mt.y0-=Kt,Mt.y1-=Kt),Jt=Mt.y0})}}function vr(Ot){Ot.nodes.forEach(function(yt){yt.sourceLinks.sort(v),yt.targetLinks.sort(h)}),Ot.nodes.forEach(function(yt){var Et=yt.y0,Je=Et,Ke=yt.y1,At=Ke;yt.sourceLinks.forEach(function(Ee){Ee.circular?(Ee.y0=Ke-Ee.width/2,Ke=Ke-Ee.width):(Ee.y0=Et+Ee.width/2,Et+=Ee.width)}),yt.targetLinks.forEach(function(Ee){Ee.circular?(Ee.y1=At-Ee.width/2,At=At-Ee.width):(Ee.y1=Je+Ee.width/2,Je+=Ee.width)})})}return We}function P(Pe,Ie,ut){var ft=0;if(ut===null){for(var je=[],_t=0;_t<Pe.links.length;_t++){var Bt=Pe.links[_t],Lt=Bt.source.index,Me=Bt.target.index;je[Lt]||(je[Lt]=[]),je[Me]||(je[Me]=[]),je[Lt].indexOf(Me)===-1&&je[Lt].push(Me)}var Ze=n(je);Ze.sort(function(rt,We){return rt.length-We.length});var dt={};for(_t=0;_t<Ze.length;_t++){var it=Ze[_t],vt=it.slice(-2);dt[vt[0]]||(dt[vt[0]]={}),dt[vt[0]][vt[1]]=!0}Pe.links.forEach(function(rt){var We=rt.target.index,ht=rt.source.index;We===ht||dt[ht]&&dt[ht][We]?(rt.circular=!0,rt.circularLinkID=ft,ft=ft+1):rt.circular=!1})}else Pe.links.forEach(function(rt){rt.source[ut]<rt.target[ut]?rt.circular=!1:(rt.circular=!0,rt.circularLinkID=ft,ft=ft+1)})}function D(Pe,Ie){var ut=0,ft=0;Pe.links.forEach(function(je){je.circular&&(je.source.circularLinkType||je.target.circularLinkType?je.circularLinkType=je.source.circularLinkType?je.source.circularLinkType:je.target.circularLinkType:je.circularLinkType=ut<ft?"top":"bottom",je.circularLinkType=="top"?ut=ut+1:ft=ft+1,Pe.nodes.forEach(function(_t){(E(_t,Ie)==E(je.source,Ie)||E(_t,Ie)==E(je.target,Ie))&&(_t.circularLinkType=je.circularLinkType)}))}),Pe.links.forEach(function(je){je.circular&&(je.source.circularLinkType==je.target.circularLinkType&&(je.circularLinkType=je.source.circularLinkType),qe(je,Ie)&&(je.circularLinkType=je.source.circularLinkType))})}function z(Pe){var Ie=Math.abs(Pe.y1-Pe.y0),ut=Math.abs(Pe.target.x0-Pe.source.x1);return Math.atan(ut/Ie)}function O(Pe,Ie){return Pe.source.column<Ie.target.column?!1:!(Pe.target.column>Ie.source.column)}function V(Pe,Ie){var ut=0;Pe.sourceLinks.forEach(function(je){ut=je.circular&&!qe(je,Ie)?ut+1:ut});var ft=0;return Pe.targetLinks.forEach(function(je){ft=je.circular&&!qe(je,Ie)?ft+1:ft}),ut+ft}function B(Pe){var Ie=Pe.source.sourceLinks,ut=0;Ie.forEach(function(_t){ut=_t.circular?ut+1:ut});var ft=Pe.target.targetLinks,je=0;return ft.forEach(function(_t){je=_t.circular?je+1:je}),!(ut>1||je>1)}function F(Pe,Ie,ut){return Pe.sort(J),Pe.forEach(function(ft,je){var _t=0;if(qe(ft,ut)&&B(ft))ft.circularPathData.verticalBuffer=_t+ft.width/2;else{var Bt=0;for(Bt;Bt<je;Bt++)if(O(Pe[je],Pe[Bt])){var Lt=Pe[Bt].circularPathData.verticalBuffer+Pe[Bt].width/2+Ie;_t=Lt>_t?Lt:_t}ft.circularPathData.verticalBuffer=_t+ft.width/2}}),Pe}function N(Pe,Ie,ut,ft){var je=5,_t=t.min(Pe.links,function(Me){return Me.source.y0});Pe.links.forEach(function(Me){Me.circular&&(Me.circularPathData={})});var Bt=Pe.links.filter(function(Me){return Me.circularLinkType=="top"});F(Bt,Ie,ft);var Lt=Pe.links.filter(function(Me){return Me.circularLinkType=="bottom"});F(Lt,Ie,ft),Pe.links.forEach(function(Me){if(Me.circular){if(Me.circularPathData.arcRadius=Me.width+g,Me.circularPathData.leftNodeBuffer=je,Me.circularPathData.rightNodeBuffer=je,Me.circularPathData.sourceWidth=Me.source.x1-Me.source.x0,Me.circularPathData.sourceX=Me.source.x0+Me.circularPathData.sourceWidth,Me.circularPathData.targetX=Me.target.x0,Me.circularPathData.sourceY=Me.y0,Me.circularPathData.targetY=Me.y1,qe(Me,ft)&&B(Me))Me.circularPathData.leftSmallArcRadius=g+Me.width/2,Me.circularPathData.leftLargeArcRadius=g+Me.width/2,Me.circularPathData.rightSmallArcRadius=g+Me.width/2,Me.circularPathData.rightLargeArcRadius=g+Me.width/2,Me.circularLinkType=="bottom"?(Me.circularPathData.verticalFullExtent=Me.source.y1+S+Me.circularPathData.verticalBuffer,Me.circularPathData.verticalLeftInnerExtent=Me.circularPathData.verticalFullExtent-Me.circularPathData.leftLargeArcRadius,Me.circularPathData.verticalRightInnerExtent=Me.circularPathData.verticalFullExtent-Me.circularPathData.rightLargeArcRadius):(Me.circularPathData.verticalFullExtent=Me.source.y0-S-Me.circularPathData.verticalBuffer,Me.circularPathData.verticalLeftInnerExtent=Me.circularPathData.verticalFullExtent+Me.circularPathData.leftLargeArcRadius,Me.circularPathData.verticalRightInnerExtent=Me.circularPathData.verticalFullExtent+Me.circularPathData.rightLargeArcRadius);else{var Ze=Me.source.column,dt=Me.circularLinkType,it=Pe.links.filter(function(We){return We.source.column==Ze&&We.circularLinkType==dt});Me.circularLinkType=="bottom"?it.sort(ue):it.sort(re);var vt=0;it.forEach(function(We,ht){We.circularLinkID==Me.circularLinkID&&(Me.circularPathData.leftSmallArcRadius=g+Me.width/2+vt,Me.circularPathData.leftLargeArcRadius=g+Me.width/2+ht*Ie+vt),vt=vt+We.width}),Ze=Me.target.column,it=Pe.links.filter(function(We){return We.target.column==Ze&&We.circularLinkType==dt}),Me.circularLinkType=="bottom"?it.sort(K):it.sort(fe),vt=0,it.forEach(function(We,ht){We.circularLinkID==Me.circularLinkID&&(Me.circularPathData.rightSmallArcRadius=g+Me.width/2+vt,Me.circularPathData.rightLargeArcRadius=g+Me.width/2+ht*Ie+vt),vt=vt+We.width}),Me.circularLinkType=="bottom"?(Me.circularPathData.verticalFullExtent=Math.max(ut,Me.source.y1,Me.target.y1)+S+Me.circularPathData.verticalBuffer,Me.circularPathData.verticalLeftInnerExtent=Me.circularPathData.verticalFullExtent-Me.circularPathData.leftLargeArcRadius,Me.circularPathData.verticalRightInnerExtent=Me.circularPathData.verticalFullExtent-Me.circularPathData.rightLargeArcRadius):(Me.circularPathData.verticalFullExtent=_t-S-Me.circularPathData.verticalBuffer,Me.circularPathData.verticalLeftInnerExtent=Me.circularPathData.verticalFullExtent+Me.circularPathData.leftLargeArcRadius,Me.circularPathData.verticalRightInnerExtent=Me.circularPathData.verticalFullExtent+Me.circularPathData.rightLargeArcRadius)}Me.circularPathData.leftInnerExtent=Me.circularPathData.sourceX+Me.circularPathData.leftNodeBuffer,Me.circularPathData.rightInnerExtent=Me.circularPathData.targetX-Me.circularPathData.rightNodeBuffer,Me.circularPathData.leftFullExtent=Me.circularPathData.sourceX+Me.circularPathData.leftLargeArcRadius+Me.circularPathData.leftNodeBuffer,Me.circularPathData.rightFullExtent=Me.circularPathData.targetX-Me.circularPathData.rightLargeArcRadius-Me.circularPathData.rightNodeBuffer}if(Me.circular)Me.path=Z(Me);else{var rt=i.linkHorizontal().source(function(We){var ht=We.source.x0+(We.source.x1-We.source.x0),mt=We.y0;return[ht,mt]}).target(function(We){var ht=We.target.x0,mt=We.y1;return[ht,mt]});Me.path=rt(Me)}})}function Z(Pe){var Ie="";return Pe.circularLinkType=="top"?Ie="M"+Pe.circularPathData.sourceX+" "+Pe.circularPathData.sourceY+" L"+Pe.circularPathData.leftInnerExtent+" "+Pe.circularPathData.sourceY+" A"+Pe.circularPathData.leftLargeArcRadius+" "+Pe.circularPathData.leftSmallArcRadius+" 0 0 0 "+Pe.circularPathData.leftFullExtent+" "+(Pe.circularPathData.sourceY-Pe.circularPathData.leftSmallArcRadius)+" L"+Pe.circularPathData.leftFullExtent+" "+Pe.circularPathData.verticalLeftInnerExtent+" A"+Pe.circularPathData.leftLargeArcRadius+" "+Pe.circularPathData.leftLargeArcRadius+" 0 0 0 "+Pe.circularPathData.leftInnerExtent+" "+Pe.circularPathData.verticalFullExtent+" L"+Pe.circularPathData.rightInnerExtent+" "+Pe.circularPathData.verticalFullExtent+" A"+Pe.circularPathData.rightLargeArcRadius+" "+Pe.circularPathData.rightLargeArcRadius+" 0 0 0 "+Pe.circularPathData.rightFullExtent+" "+Pe.circularPathData.verticalRightInnerExtent+" L"+Pe.circularPathData.rightFullExtent+" "+(Pe.circularPathData.targetY-Pe.circularPathData.rightSmallArcRadius)+" A"+Pe.circularPathData.rightLargeArcRadius+" "+Pe.circularPathData.rightSmallArcRadius+" 0 0 0 "+Pe.circularPathData.rightInnerExtent+" "+Pe.circularPathData.targetY+" L"+Pe.circularPathData.targetX+" "+Pe.circularPathData.targetY:Ie="M"+Pe.circularPathData.sourceX+" "+Pe.circularPathData.sourceY+" L"+Pe.circularPathData.leftInnerExtent+" "+Pe.circularPathData.sourceY+" A"+Pe.circularPathData.leftLargeArcRadius+" "+Pe.circularPathData.leftSmallArcRadius+" 0 0 1 "+Pe.circularPathData.leftFullExtent+" "+(Pe.circularPathData.sourceY+Pe.circularPathData.leftSmallArcRadius)+" L"+Pe.circularPathData.leftFullExtent+" "+Pe.circularPathData.verticalLeftInnerExtent+" A"+Pe.circularPathData.leftLargeArcRadius+" "+Pe.circularPathData.leftLargeArcRadius+" 0 0 1 "+Pe.circularPathData.leftInnerExtent+" "+Pe.circularPathData.verticalFullExtent+" L"+Pe.circularPathData.rightInnerExtent+" "+Pe.circularPathData.verticalFullExtent+" A"+Pe.circularPathData.rightLargeArcRadius+" "+Pe.circularPathData.rightLargeArcRadius+" 0 0 1 "+Pe.circularPathData.rightFullExtent+" "+Pe.circularPathData.verticalRightInnerExtent+" L"+Pe.circularPathData.rightFullExtent+" "+(Pe.circularPathData.targetY+Pe.circularPathData.rightSmallArcRadius)+" A"+Pe.circularPathData.rightLargeArcRadius+" "+Pe.circularPathData.rightSmallArcRadius+" 0 0 1 "+Pe.circularPathData.rightInnerExtent+" "+Pe.circularPathData.targetY+" L"+Pe.circularPathData.targetX+" "+Pe.circularPathData.targetY,Ie}function J(Pe,Ie){return X(Pe)==X(Ie)?Pe.circularLinkType=="bottom"?ue(Pe,Ie):re(Pe,Ie):X(Ie)-X(Pe)}function re(Pe,Ie){return Pe.y0-Ie.y0}function ue(Pe,Ie){return Ie.y0-Pe.y0}function fe(Pe,Ie){return Pe.y1-Ie.y1}function K(Pe,Ie){return Ie.y1-Pe.y1}function X(Pe){return Pe.target.column-Pe.source.column}function ae(Pe){return Pe.target.x0-Pe.source.x1}function oe(Pe,Ie){var ut=z(Pe),ft=ae(Ie)/Math.tan(ut),je=Re(Pe)=="up"?Pe.y1+ft:Pe.y1-ft;return je}function me(Pe,Ie){var ut=z(Pe),ft=ae(Ie)/Math.tan(ut),je=Re(Pe)=="up"?Pe.y1-ft:Pe.y1+ft;return je}function xe(Pe,Ie,ut,ft){Pe.links.forEach(function(je){if(!je.circular&&je.target.column-je.source.column>1){var _t=je.source.column+1,Bt=je.target.column-1,Lt=1,Me=Bt-_t+1;for(Lt=1;_t<=Bt;_t++,Lt++)Pe.nodes.forEach(function(Ze){if(Ze.column==_t){var dt=Lt/(Me+1),it=Math.pow(1-dt,3),vt=3*dt*Math.pow(1-dt,2),rt=3*Math.pow(dt,2)*(1-dt),We=Math.pow(dt,3),ht=it*je.y0+vt*je.y0+rt*je.y1+We*je.y1,mt=ht-je.width/2,er=ht+je.width/2,$t;mt>Ze.y0&&mt<Ze.y1?($t=Ze.y1-mt+10,$t=Ze.circularLinkType=="bottom"?$t:-$t,Ze=ie(Ze,$t,Ie,ut),Pe.nodes.forEach(function(cr){E(cr,ft)==E(Ze,ft)||cr.column!=Ze.column||ce(Ze,cr)&&ie(cr,$t,Ie,ut)})):er>Ze.y0&&er<Ze.y1?($t=er-Ze.y0+10,Ze=ie(Ze,$t,Ie,ut),Pe.nodes.forEach(function(cr){E(cr,ft)==E(Ze,ft)||cr.column!=Ze.column||cr.y0<Ze.y1&&cr.y1>Ze.y1&&ie(cr,$t,Ie,ut)})):mt<Ze.y0&&er>Ze.y1&&($t=er-Ze.y0+10,Ze=ie(Ze,$t,Ie,ut),Pe.nodes.forEach(function(cr){E(cr,ft)==E(Ze,ft)||cr.column!=Ze.column||cr.y0<Ze.y1&&cr.y1>Ze.y1&&ie(cr,$t,Ie,ut)}))}})}})}function ce(Pe,Ie){return Pe.y0>Ie.y0&&Pe.y0<Ie.y1||Pe.y1>Ie.y0&&Pe.y1<Ie.y1?!0:Pe.y0<Ie.y0&&Pe.y1>Ie.y1}function ie(Pe,Ie,ut,ft){return Pe.y0+Ie>=ut&&Pe.y1+Ie<=ft&&(Pe.y0=Pe.y0+Ie,Pe.y1=Pe.y1+Ie,Pe.targetLinks.forEach(function(je){je.y1=je.y1+Ie}),Pe.sourceLinks.forEach(function(je){je.y0=je.y0+Ie})),Pe}function ge(Pe,Ie,ut,ft){Pe.nodes.forEach(function(je){ft&&je.y+(je.y1-je.y0)>Ie&&(je.y=je.y-(je.y+(je.y1-je.y0)-Ie));var _t=Pe.links.filter(function(Me){return E(Me.source,ut)==E(je,ut)}),Bt=_t.length;Bt>1&&_t.sort(function(Me,Ze){if(!Me.circular&&!Ze.circular){if(Me.target.column==Ze.target.column)return Me.y1-Ze.y1;if(we(Me,Ze)){if(Me.target.column>Ze.target.column){var dt=me(Ze,Me);return Me.y1-dt}if(Ze.target.column>Me.target.column){var it=me(Me,Ze);return it-Ze.y1}}else return Me.y1-Ze.y1}if(Me.circular&&!Ze.circular)return Me.circularLinkType=="top"?-1:1;if(Ze.circular&&!Me.circular)return Ze.circularLinkType=="top"?1:-1;if(Me.circular&&Ze.circular)return Me.circularLinkType===Ze.circularLinkType&&Me.circularLinkType=="top"?Me.target.column===Ze.target.column?Me.target.y1-Ze.target.y1:Ze.target.column-Me.target.column:Me.circularLinkType===Ze.circularLinkType&&Me.circularLinkType=="bottom"?Me.target.column===Ze.target.column?Ze.target.y1-Me.target.y1:Me.target.column-Ze.target.column:Me.circularLinkType=="top"?-1:1});var Lt=je.y0;_t.forEach(function(Me){Me.y0=Lt+Me.width/2,Lt=Lt+Me.width}),_t.forEach(function(Me,Ze){if(Me.circularLinkType=="bottom"){var dt=Ze+1,it=0;for(dt;dt<Bt;dt++)it=it+_t[dt].width;Me.y0=je.y1-it-Me.width/2}})})}function le(Pe,Ie,ut){Pe.nodes.forEach(function(ft){var je=Pe.links.filter(function(Lt){return E(Lt.target,ut)==E(ft,ut)}),_t=je.length;_t>1&&je.sort(function(Lt,Me){if(!Lt.circular&&!Me.circular){if(Lt.source.column==Me.source.column)return Lt.y0-Me.y0;if(we(Lt,Me)){if(Me.source.column<Lt.source.column){var Ze=oe(Me,Lt);return Lt.y0-Ze}if(Lt.source.column<Me.source.column){var dt=oe(Lt,Me);return dt-Me.y0}}else return Lt.y0-Me.y0}if(Lt.circular&&!Me.circular)return Lt.circularLinkType=="top"?-1:1;if(Me.circular&&!Lt.circular)return Me.circularLinkType=="top"?1:-1;if(Lt.circular&&Me.circular)return Lt.circularLinkType===Me.circularLinkType&&Lt.circularLinkType=="top"?Lt.source.column===Me.source.column?Lt.source.y1-Me.source.y1:Lt.source.column-Me.source.column:Lt.circularLinkType===Me.circularLinkType&&Lt.circularLinkType=="bottom"?Lt.source.column===Me.source.column?Lt.source.y1-Me.source.y1:Me.source.column-Lt.source.column:Lt.circularLinkType=="top"?-1:1});var Bt=ft.y0;je.forEach(function(Lt){Lt.y1=Bt+Lt.width/2,Bt=Bt+Lt.width}),je.forEach(function(Lt,Me){if(Lt.circularLinkType=="bottom"){var Ze=Me+1,dt=0;for(Ze;Ze<_t;Ze++)dt=dt+je[Ze].width;Lt.y1=ft.y1-dt-Lt.width/2}})})}function we(Pe,Ie){return Re(Pe)==Re(Ie)}function Re(Pe){return Pe.y0-Pe.y1>0?"up":"down"}function qe(Pe,Ie){return E(Pe.source,Ie)==E(Pe.target,Ie)}function et(Pe,Ie,ut){var ft=Pe.nodes,je=Pe.links,_t=!1,Bt=!1;if(je.forEach(function(vt){vt.circularLinkType=="top"?_t=!0:vt.circularLinkType=="bottom"&&(Bt=!0)}),_t==!1||Bt==!1){var Lt=t.min(ft,function(vt){return vt.y0}),Me=t.max(ft,function(vt){return vt.y1}),Ze=Me-Lt,dt=ut-Ie,it=dt/Ze;ft.forEach(function(vt){var rt=(vt.y1-vt.y0)*it;vt.y0=(vt.y0-Lt)*it,vt.y1=vt.y0+rt}),je.forEach(function(vt){vt.y0=(vt.y0-Lt)*it,vt.y1=(vt.y1-Lt)*it,vt.width=vt.width*it})}}e.sankeyCircular=A,e.sankeyCenter=u,e.sankeyLeft=o,e.sankeyRight=s,e.sankeyJustify=l,Object.defineProperty(e,"__esModule",{value:!0})})});var zZ=ne((hmr,XUe)=>{"use strict";XUe.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}});var aVe=ne((vmr,iVe)=>{"use strict";var ZUe=zUe(),QGt=(M_(),Yb(A_)).interpolateNumber,pT=Ai(),P5=VUe(),$Gt=WUe(),Ds=zZ(),gT=Xf(),J_=_i(),eYt=aa(),ky=Wt(),UZ=ky.strTranslate,tYt=ky.strRotate,VZ=gg(),R5=VZ.keyFun,pF=VZ.repeat,$Ue=VZ.unwrap,OZ=Es(),rYt=wi(),eVe=Tf(),nYt=eVe.CAP_SHIFT,iYt=eVe.LINE_SPACING,aYt=3;function oYt(e,t,r){var i=$Ue(t),n=i.trace,a=n.domain,o=n.orientation==="h",s=n.node.pad,l=n.node.thickness,u={justify:P5.sankeyJustify,left:P5.sankeyLeft,right:P5.sankeyRight,center:P5.sankeyCenter}[n.node.align],f=e.width*(a.x[1]-a.x[0]),c=e.height*(a.y[1]-a.y[0]),h=i._nodes,v=i._links,d=i.circular,_;d?_=$Gt.sankeyCircular().circularLinkGap(0):_=P5.sankey(),_.iterations(Ds.sankeyIterations).size(o?[f,c]:[c,f]).nodeWidth(l).nodePadding(s).nodeId(function(z){return z.pointNumber}).nodeAlign(u).nodes(h).links(v);var T=_();_.nodePadding()<s&&ky.warn("node.pad was reduced to ",_.nodePadding()," to fit within the figure.");var p,M,b;for(var w in i._groupLookup){var k=parseInt(i._groupLookup[w]),x;for(p=0;p<T.nodes.length;p++)if(T.nodes[p].pointNumber===k){x=T.nodes[p];break}if(x){var E={pointNumber:parseInt(w),x0:x.x0,x1:x.x1,y0:x.y0,y1:x.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};T.nodes.unshift(E),x.childrenNodes.unshift(E)}}function S(){for(p=0;p<T.nodes.length;p++){var z=T.nodes[p],O={},V,B;for(M=0;M<z.targetLinks.length;M++)B=z.targetLinks[M],V=B.source.pointNumber+":"+B.target.pointNumber,O.hasOwnProperty(V)||(O[V]=[]),O[V].push(B);var F=Object.keys(O);for(M=0;M<F.length;M++){V=F[M];var N=O[V],Z=0,J={};for(b=0;b<N.length;b++)B=N[b],J[B.label]||(J[B.label]=0),J[B.label]+=B.value,Z+=B.value;for(b=0;b<N.length;b++)B=N[b],B.flow={value:Z,labelConcentration:J[B.label]/Z,concentration:B.value/Z,links:N},B.concentrationscale&&(B.color=gT(B.concentrationscale(B.flow.labelConcentration)))}var re=0;for(M=0;M<z.sourceLinks.length;M++)re+=z.sourceLinks[M].value;for(M=0;M<z.sourceLinks.length;M++)B=z.sourceLinks[M],B.concentrationOut=B.value/re;var ue=0;for(M=0;M<z.targetLinks.length;M++)ue+=z.targetLinks[M].value;for(M=0;M<z.targetLinks.length;M++)B=z.targetLinks[M],B.concenrationIn=B.value/ue}}S();function g(z){z.forEach(function(O){var V,B,F=0,N=O.length,Z;for(O.sort(function(J,re){return J.y0-re.y0}),Z=0;Z<N;++Z)V=O[Z],V.y0>=F||(B=F-V.y0,B>1e-6&&(V.y0+=B,V.y1+=B)),F=V.y1+s})}function C(z){var O=z.map(function(re,ue){return{x0:re.x0,index:ue}}).sort(function(re,ue){return re.x0-ue.x0}),V=[],B=-1,F,N=-1/0,Z;for(p=0;p<O.length;p++){var J=z[O[p].index];J.x0>N+l&&(B+=1,F=J.x0),N=J.x0,V[B]||(V[B]=[]),V[B].push(J),Z=F-J.x0,J.x0+=Z,J.x1+=Z}return V}if(n.node.x.length&&n.node.y.length){for(p=0;p<Math.min(n.node.x.length,n.node.y.length,T.nodes.length);p++)if(n.node.x[p]&&n.node.y[p]){var A=[n.node.x[p]*f,n.node.y[p]*c];T.nodes[p].x0=A[0]-l/2,T.nodes[p].x1=A[0]+l/2;var P=T.nodes[p].y1-T.nodes[p].y0;T.nodes[p].y0=A[1]-P/2,T.nodes[p].y1=A[1]+P/2}if(n.arrangement==="snap"){h=T.nodes;var D=C(h);g(D)}_.update(T)}return{circular:d,key:r,trace:n,guid:ky.randstr(),horizontal:o,width:f,height:c,nodePad:n.node.pad,nodeLineColor:n.node.line.color,nodeLineWidth:n.node.line.width,linkLineColor:n.link.line.color,linkLineWidth:n.link.line.width,linkArrowLength:n.link.arrowlen,valueFormat:n.valueformat,valueSuffix:n.valuesuffix,textFont:n.textfont,translateX:a.x[0]*e.width+e.margin.l,translateY:e.height-a.y[1]*e.height+e.margin.t,dragParallel:o?c:f,dragPerpendicular:o?f:c,arrangement:n.arrangement,sankey:_,graph:T,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function sYt(e,t,r){var i=gT(t.color),n=gT(t.hovercolor),a=t.source.label+"|"+t.target.label,o=a+"__"+r;return t.trace=e.trace,t.curveNumber=e.trace.index,{circular:e.circular,key:o,traceId:e.key,pointNumber:t.pointNumber,link:t,tinyColorHue:J_.tinyRGB(i),tinyColorAlpha:i.getAlpha(),tinyColorHoverHue:J_.tinyRGB(n),tinyColorHoverAlpha:n.getAlpha(),linkPath:HZ,linkLineColor:e.linkLineColor,linkLineWidth:e.linkLineWidth,linkArrowLength:e.linkArrowLength,valueFormat:e.valueFormat,valueSuffix:e.valueSuffix,sankey:e.sankey,parent:e,interactionState:e.interactionState,flow:t.flow}}function lYt(e,t){var r="",i=e.width/2,n=e.circularPathData;return e.circularLinkType==="top"?r="M "+(n.targetX-t)+" "+(n.targetY+i)+" L"+(n.rightInnerExtent-t)+" "+(n.targetY+i)+"A"+(n.rightLargeArcRadius+i)+" "+(n.rightSmallArcRadius+i)+" 0 0 1 "+(n.rightFullExtent-i-t)+" "+(n.targetY-n.rightSmallArcRadius)+"L"+(n.rightFullExtent-i-t)+" "+n.verticalRightInnerExtent+"A"+(n.rightLargeArcRadius+i)+" "+(n.rightLargeArcRadius+i)+" 0 0 1 "+(n.rightInnerExtent-t)+" "+(n.verticalFullExtent-i)+"L"+n.leftInnerExtent+" "+(n.verticalFullExtent-i)+"A"+(n.leftLargeArcRadius+i)+" "+(n.leftLargeArcRadius+i)+" 0 0 1 "+(n.leftFullExtent+i)+" "+n.verticalLeftInnerExtent+"L"+(n.leftFullExtent+i)+" "+(n.sourceY-n.leftSmallArcRadius)+"A"+(n.leftLargeArcRadius+i)+" "+(n.leftSmallArcRadius+i)+" 0 0 1 "+n.leftInnerExtent+" "+(n.sourceY+i)+"L"+n.sourceX+" "+(n.sourceY+i)+"L"+n.sourceX+" "+(n.sourceY-i)+"L"+n.leftInnerExtent+" "+(n.sourceY-i)+"A"+(n.leftLargeArcRadius-i)+" "+(n.leftSmallArcRadius-i)+" 0 0 0 "+(n.leftFullExtent-i)+" "+(n.sourceY-n.leftSmallArcRadius)+"L"+(n.leftFullExtent-i)+" "+n.verticalLeftInnerExtent+"A"+(n.leftLargeArcRadius-i)+" "+(n.leftLargeArcRadius-i)+" 0 0 0 "+n.leftInnerExtent+" "+(n.verticalFullExtent+i)+"L"+(n.rightInnerExtent-t)+" "+(n.verticalFullExtent+i)+"A"+(n.rightLargeArcRadius-i)+" "+(n.rightLargeArcRadius-i)+" 0 0 0 "+(n.rightFullExtent+i-t)+" "+n.verticalRightInnerExtent+"L"+(n.rightFullExtent+i-t)+" "+(n.targetY-n.rightSmallArcRadius)+"A"+(n.rightLargeArcRadius-i)+" "+(n.rightSmallArcRadius-i)+" 0 0 0 "+(n.rightInnerExtent-t)+" "+(n.targetY-i)+"L"+(n.targetX-t)+" "+(n.targetY-i)+(t>0?"L"+n.targetX+" "+n.targetY:"")+"Z":r="M "+(n.targetX-t)+" "+(n.targetY-i)+" L"+(n.rightInnerExtent-t)+" "+(n.targetY-i)+"A"+(n.rightLargeArcRadius+i)+" "+(n.rightSmallArcRadius+i)+" 0 0 0 "+(n.rightFullExtent-i-t)+" "+(n.targetY+n.rightSmallArcRadius)+"L"+(n.rightFullExtent-i-t)+" "+n.verticalRightInnerExtent+"A"+(n.rightLargeArcRadius+i)+" "+(n.rightLargeArcRadius+i)+" 0 0 0 "+(n.rightInnerExtent-t)+" "+(n.verticalFullExtent+i)+"L"+n.leftInnerExtent+" "+(n.verticalFullExtent+i)+"A"+(n.leftLargeArcRadius+i)+" "+(n.leftLargeArcRadius+i)+" 0 0 0 "+(n.leftFullExtent+i)+" "+n.verticalLeftInnerExtent+"L"+(n.leftFullExtent+i)+" "+(n.sourceY+n.leftSmallArcRadius)+"A"+(n.leftLargeArcRadius+i)+" "+(n.leftSmallArcRadius+i)+" 0 0 0 "+n.leftInnerExtent+" "+(n.sourceY-i)+"L"+n.sourceX+" "+(n.sourceY-i)+"L"+n.sourceX+" "+(n.sourceY+i)+"L"+n.leftInnerExtent+" "+(n.sourceY+i)+"A"+(n.leftLargeArcRadius-i)+" "+(n.leftSmallArcRadius-i)+" 0 0 1 "+(n.leftFullExtent-i)+" "+(n.sourceY+n.leftSmallArcRadius)+"L"+(n.leftFullExtent-i)+" "+n.verticalLeftInnerExtent+"A"+(n.leftLargeArcRadius-i)+" "+(n.leftLargeArcRadius-i)+" 0 0 1 "+n.leftInnerExtent+" "+(n.verticalFullExtent-i)+"L"+(n.rightInnerExtent-t)+" "+(n.verticalFullExtent-i)+"A"+(n.rightLargeArcRadius-i)+" "+(n.rightLargeArcRadius-i)+" 0 0 1 "+(n.rightFullExtent+i-t)+" "+n.verticalRightInnerExtent+"L"+(n.rightFullExtent+i-t)+" "+(n.targetY+n.rightSmallArcRadius)+"A"+(n.rightLargeArcRadius-i)+" "+(n.rightSmallArcRadius-i)+" 0 0 1 "+(n.rightInnerExtent-t)+" "+(n.targetY+i)+"L"+(n.targetX-t)+" "+(n.targetY+i)+(t>0?"L"+n.targetX+" "+n.targetY:"")+"Z",r}function HZ(){var e=.5;function t(r){var i=r.linkArrowLength;if(r.link.circular)return lYt(r.link,i);var n=Math.abs((r.link.target.x0-r.link.source.x1)/2);i>n&&(i=n);var a=r.link.source.x1,o=r.link.target.x0-i,s=QGt(a,o),l=s(e),u=s(1-e),f=r.link.y0-r.link.width/2,c=r.link.y0+r.link.width/2,h=r.link.y1-r.link.width/2,v=r.link.y1+r.link.width/2,d="M"+a+","+f,_="C"+l+","+f+" "+u+","+h+" "+o+","+h,T="C"+u+","+v+" "+l+","+c+" "+a+","+c,p=i>0?"L"+(o+i)+","+(h+r.link.width/2):"";return p+="L"+o+","+v,d+_+p+T+"Z"}return t}function uYt(e,t){var r=gT(t.color),i=Ds.nodePadAcross,n=e.nodePad/2;t.dx=t.x1-t.x0,t.dy=t.y1-t.y0;var a=t.dx,o=Math.max(.5,t.dy),s="node_"+t.pointNumber;return t.group&&(s=ky.randstr()),t.trace=e.trace,t.curveNumber=e.trace.index,{index:t.pointNumber,key:s,partOfGroup:t.partOfGroup||!1,group:t.group,traceId:e.key,trace:e.trace,node:t,nodePad:e.nodePad,nodeLineColor:e.nodeLineColor,nodeLineWidth:e.nodeLineWidth,textFont:e.textFont,size:e.horizontal?e.height:e.width,visibleWidth:Math.ceil(a),visibleHeight:o,zoneX:-i,zoneY:-n,zoneWidth:a+2*i,zoneHeight:o+2*n,labelY:e.horizontal?t.dy/2+1:t.dx/2+1,left:t.originalLayer===1,sizeAcross:e.width,forceLayouts:e.forceLayouts,horizontal:e.horizontal,darkBackground:r.getBrightness()<=128,tinyColorHue:J_.tinyRGB(r),tinyColorAlpha:r.getAlpha(),valueFormat:e.valueFormat,valueSuffix:e.valueSuffix,sankey:e.sankey,graph:e.graph,arrangement:e.arrangement,uniqueNodeLabelPathId:[e.guid,e.key,s].join("_"),interactionState:e.interactionState,figure:e}}function NZ(e){e.attr("transform",function(t){return UZ(t.node.x0.toFixed(3),t.node.y0.toFixed(3))})}function fYt(e){e.call(NZ)}function tVe(e,t){e.call(fYt),t.attr("d",HZ())}function jUe(e){e.attr("width",function(t){return t.node.x1-t.node.x0}).attr("height",function(t){return t.visibleHeight})}function BZ(e){return e.link.width>1||e.linkLineWidth>0}function KUe(e){var t=UZ(e.translateX,e.translateY);return t+(e.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function JUe(e,t,r){e.on(".basic",null).on("mouseover.basic",function(i){!i.interactionState.dragInProgress&&!i.partOfGroup&&(r.hover(this,i,t),i.interactionState.hovered=[this,i])}).on("mousemove.basic",function(i){!i.interactionState.dragInProgress&&!i.partOfGroup&&(r.follow(this,i),i.interactionState.hovered=[this,i])}).on("mouseout.basic",function(i){!i.interactionState.dragInProgress&&!i.partOfGroup&&(r.unhover(this,i,t),i.interactionState.hovered=!1)}).on("click.basic",function(i){i.interactionState.hovered&&(r.unhover(this,i,t),i.interactionState.hovered=!1),!i.interactionState.dragInProgress&&!i.partOfGroup&&r.select(this,i,t)})}function cYt(e,t,r,i){var n=pT.behavior.drag().origin(function(a){return{x:a.node.x0+a.visibleWidth/2,y:a.node.y0+a.visibleHeight/2}}).on("dragstart",function(a){if(a.arrangement!=="fixed"&&(ky.ensureSingle(i._fullLayout._infolayer,"g","dragcover",function(s){i._fullLayout._dragCover=s}),ky.raiseToTop(this),a.interactionState.dragInProgress=a.node,QUe(a.node),a.interactionState.hovered&&(r.nodeEvents.unhover.apply(0,a.interactionState.hovered),a.interactionState.hovered=!1),a.arrangement==="snap")){var o=a.traceId+"|"+a.key;a.forceLayouts[o]?a.forceLayouts[o].alpha(1):hYt(e,o,a,i),vYt(e,t,a,o,i)}}).on("drag",function(a){if(a.arrangement!=="fixed"){var o=pT.event.x,s=pT.event.y;a.arrangement==="snap"?(a.node.x0=o-a.visibleWidth/2,a.node.x1=o+a.visibleWidth/2,a.node.y0=s-a.visibleHeight/2,a.node.y1=s+a.visibleHeight/2):(a.arrangement==="freeform"&&(a.node.x0=o-a.visibleWidth/2,a.node.x1=o+a.visibleWidth/2),s=Math.max(0,Math.min(a.size-a.visibleHeight/2,s)),a.node.y0=s-a.visibleHeight/2,a.node.y1=s+a.visibleHeight/2),QUe(a.node),a.arrangement!=="snap"&&(a.sankey.update(a.graph),tVe(e.filter(nVe(a)),t))}}).on("dragend",function(a){if(a.arrangement!=="fixed"){a.interactionState.dragInProgress=!1;for(var o=0;o<a.node.childrenNodes.length;o++)a.node.childrenNodes[o].x=a.node.x,a.node.childrenNodes[o].y=a.node.y;a.arrangement!=="snap"&&rVe(a,i)}});e.on(".drag",null).call(n)}function hYt(e,t,r,i){gYt(r.graph.nodes);var n=r.graph.nodes.filter(function(a){return a.originalX===r.node.originalX}).filter(function(a){return!a.partOfGroup});r.forceLayouts[t]=ZUe.forceSimulation(n).alphaDecay(0).force("collide",ZUe.forceCollide().radius(function(a){return a.dy/2+r.nodePad/2}).strength(1).iterations(Ds.forceIterations)).force("constrain",dYt(e,t,n,r,i)).stop()}function vYt(e,t,r,i,n){window.requestAnimationFrame(function a(){var o;for(o=0;o<Ds.forceTicksPerFrame;o++)r.forceLayouts[i].tick();var s=r.graph.nodes;if(yYt(s),r.sankey.update(r.graph),tVe(e.filter(nVe(r)),t),r.forceLayouts[i].alpha()>0)window.requestAnimationFrame(a);else{var l=r.node.originalX;r.node.x0=l-r.visibleWidth/2,r.node.x1=l+r.visibleWidth/2,rVe(r,n)}})}function dYt(e,t,r,i){return function(){for(var a=0,o=0;o<r.length;o++){var s=r[o];s===i.interactionState.dragInProgress?(s.x=s.lastDraggedX,s.y=s.lastDraggedY):(s.vx=(s.originalX-s.x)/Ds.forceTicksPerFrame,s.y=Math.min(i.size-s.dy/2,Math.max(s.dy/2,s.y))),a=Math.max(a,Math.abs(s.vx),Math.abs(s.vy))}!i.interactionState.dragInProgress&&a<.1&&i.forceLayouts[t].alpha()>0&&i.forceLayouts[t].alpha(0)}}function rVe(e,t){for(var r=[],i=[],n=0;n<e.graph.nodes.length;n++){var a=(e.graph.nodes[n].x0+e.graph.nodes[n].x1)/2,o=(e.graph.nodes[n].y0+e.graph.nodes[n].y1)/2;r.push(a/e.figure.width),i.push(o/e.figure.height)}rYt.call("_guiRestyle",t,{"node.x":[r],"node.y":[i]},e.trace.index).then(function(){t._fullLayout._dragCover&&t._fullLayout._dragCover.remove()})}function pYt(e){var t=[],r;for(r=0;r<e.length;r++)e[r].originalX=(e[r].x0+e[r].x1)/2,e[r].originalY=(e[r].y0+e[r].y1)/2,t.indexOf(e[r].originalX)===-1&&t.push(e[r].originalX);for(t.sort(function(i,n){return i-n}),r=0;r<e.length;r++)e[r].originalLayerIndex=t.indexOf(e[r].originalX),e[r].originalLayer=e[r].originalLayerIndex/(t.length-1)}function QUe(e){e.lastDraggedX=e.x0+e.dx/2,e.lastDraggedY=e.y0+e.dy/2}function nVe(e){return function(t){return t.node.originalX===e.node.originalX}}function gYt(e){for(var t=0;t<e.length;t++)e[t].y=(e[t].y0+e[t].y1)/2,e[t].x=(e[t].x0+e[t].x1)/2}function yYt(e){for(var t=0;t<e.length;t++)e[t].y0=e[t].y-e[t].dy/2,e[t].y1=e[t].y0+e[t].dy,e[t].x0=e[t].x-e[t].dx/2,e[t].x1=e[t].x0+e[t].dx}iVe.exports=function(e,t,r,i,n){var a=e._context.staticPlot,o=!1;ky.ensureSingle(e._fullLayout._infolayer,"g","first-render",function(){o=!0});var s=e._fullLayout._dragCover,l=r.filter(function(T){return $Ue(T).trace.visible}).map(oYt.bind(null,i)),u=t.selectAll("."+Ds.cn.sankey).data(l,R5);u.exit().remove(),u.enter().append("g").classed(Ds.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",a?"none":"auto").attr("transform",KUe),u.each(function(T,p){e._fullData[p]._sankey=T;var M="bgsankey-"+T.trace.uid+"-"+p;ky.ensureSingle(e._fullLayout._draggers,"rect",M),e._fullData[p]._bgRect=pT.select("."+M),e._fullData[p]._bgRect.style("pointer-events",a?"none":"all").attr("width",T.width).attr("height",T.height).attr("x",T.translateX).attr("y",T.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),u.transition().ease(Ds.ease).duration(Ds.duration).attr("transform",KUe);var f=u.selectAll("."+Ds.cn.sankeyLinks).data(pF,R5);f.enter().append("g").classed(Ds.cn.sankeyLinks,!0).style("fill","none");var c=f.selectAll("."+Ds.cn.sankeyLink).data(function(T){var p=T.graph.links;return p.filter(function(M){return M.value}).map(sYt.bind(null,T))},R5);c.enter().append("path").classed(Ds.cn.sankeyLink,!0).call(JUe,u,n.linkEvents),c.style("stroke",function(T){return BZ(T)?J_.tinyRGB(gT(T.linkLineColor)):T.tinyColorHue}).style("stroke-opacity",function(T){return BZ(T)?J_.opacity(T.linkLineColor):T.tinyColorAlpha}).style("fill",function(T){return T.tinyColorHue}).style("fill-opacity",function(T){return T.tinyColorAlpha}).style("stroke-width",function(T){return BZ(T)?T.linkLineWidth:1}).attr("d",HZ()),c.style("opacity",function(){return e._context.staticPlot||o||s?1:0}).transition().ease(Ds.ease).duration(Ds.duration).style("opacity",1),c.exit().transition().ease(Ds.ease).duration(Ds.duration).style("opacity",0).remove();var h=u.selectAll("."+Ds.cn.sankeyNodeSet).data(pF,R5);h.enter().append("g").classed(Ds.cn.sankeyNodeSet,!0),h.style("cursor",function(T){switch(T.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var v=h.selectAll("."+Ds.cn.sankeyNode).data(function(T){var p=T.graph.nodes;return pYt(p),p.map(uYt.bind(null,T))},R5);v.enter().append("g").classed(Ds.cn.sankeyNode,!0).call(NZ).style("opacity",function(T){return(e._context.staticPlot||o)&&!T.partOfGroup?1:0}),v.call(JUe,u,n.nodeEvents).call(cYt,c,n,e),v.transition().ease(Ds.ease).duration(Ds.duration).call(NZ).style("opacity",function(T){return T.partOfGroup?0:1}),v.exit().transition().ease(Ds.ease).duration(Ds.duration).style("opacity",0).remove();var d=v.selectAll("."+Ds.cn.nodeRect).data(pF);d.enter().append("rect").classed(Ds.cn.nodeRect,!0).call(jUe),d.style("stroke-width",function(T){return T.nodeLineWidth}).style("stroke",function(T){return J_.tinyRGB(gT(T.nodeLineColor))}).style("stroke-opacity",function(T){return J_.opacity(T.nodeLineColor)}).style("fill",function(T){return T.tinyColorHue}).style("fill-opacity",function(T){return T.tinyColorAlpha}),d.transition().ease(Ds.ease).duration(Ds.duration).call(jUe);var _=v.selectAll("."+Ds.cn.nodeLabel).data(pF);_.enter().append("text").classed(Ds.cn.nodeLabel,!0).style("cursor","default"),_.attr("data-notex",1).text(function(T){return T.node.label}).each(function(T){var p=pT.select(this);eYt.font(p,T.textFont),OZ.convertToTspans(p,e)}).style("text-shadow",OZ.makeTextShadow(e._fullLayout.paper_bgcolor)).attr("text-anchor",function(T){return T.horizontal&&T.left?"end":"start"}).attr("transform",function(T){var p=pT.select(this),M=OZ.lineCount(p),b=T.textFont.size*((M-1)*iYt-nYt),w=T.nodeLineWidth/2+aYt,k=((T.horizontal?T.visibleHeight:T.visibleWidth)-b)/2;T.horizontal&&(T.left?w=-w:w+=T.visibleWidth);var x=T.horizontal?"":"scale(-1,1)"+tYt(90);return UZ(T.horizontal?w:k,T.horizontal?k:w)+x}),_.transition().ease(Ds.ease).duration(Ds.duration)}});var WZ=ne((dmr,dVe)=>{"use strict";var rv=Ai(),YZ=Wt(),gF=YZ.numberFormat,mYt=aVe(),yT=Ol(),xYt=_i(),E1=zZ().cn,D5=YZ._;function oVe(e){return e!==""}function mT(e,t){return e.filter(function(r){return r.key===t.traceId})}function sVe(e,t){rv.select(e).select("path").style("fill-opacity",t),rv.select(e).select("rect").style("fill-opacity",t)}function lVe(e){rv.select(e).select("text.name").style("fill","black")}function uVe(e){return function(t){return e.node.sourceLinks.indexOf(t.link)!==-1||e.node.targetLinks.indexOf(t.link)!==-1}}function fVe(e){return function(t){return t.node.sourceLinks.indexOf(e.link)!==-1||t.node.targetLinks.indexOf(e.link)!==-1}}function cVe(e,t,r){t&&r&&mT(r,t).selectAll("."+E1.sankeyLink).filter(uVe(t)).call(hVe.bind(0,t,r,!1))}function GZ(e,t,r){t&&r&&mT(r,t).selectAll("."+E1.sankeyLink).filter(uVe(t)).call(vVe.bind(0,t,r,!1))}function hVe(e,t,r,i){i.style("fill",function(n){if(!n.link.concentrationscale)return n.tinyColorHoverHue}).style("fill-opacity",function(n){if(!n.link.concentrationscale)return n.tinyColorHoverAlpha}),i.each(function(n){var a=n.link.label;a!==""&&mT(t,e).selectAll("."+E1.sankeyLink).filter(function(o){return o.link.label===a}).style("fill",function(o){if(!o.link.concentrationscale)return o.tinyColorHoverHue}).style("fill-opacity",function(o){if(!o.link.concentrationscale)return o.tinyColorHoverAlpha})}),r&&mT(t,e).selectAll("."+E1.sankeyNode).filter(fVe(e)).call(cVe)}function vVe(e,t,r,i){i.style("fill",function(n){return n.tinyColorHue}).style("fill-opacity",function(n){return n.tinyColorAlpha}),i.each(function(n){var a=n.link.label;a!==""&&mT(t,e).selectAll("."+E1.sankeyLink).filter(function(o){return o.link.label===a}).style("fill",function(o){return o.tinyColorHue}).style("fill-opacity",function(o){return o.tinyColorAlpha})}),r&&mT(t,e).selectAll(E1.sankeyNode).filter(fVe(e)).call(GZ)}function yd(e,t){var r=e.hoverlabel||{},i=YZ.nestedProperty(r,t).get();return Array.isArray(i)?!1:i}dVe.exports=function(t,r){for(var i=t._fullLayout,n=i._paper,a=i._size,o=0;o<t._fullData.length;o++)if(t._fullData[o].visible&&t._fullData[o].type===E1.sankey&&!t._fullData[o]._viewInitial){var s=t._fullData[o].node;t._fullData[o]._viewInitial={node:{groups:s.groups.slice(),x:s.x.slice(),y:s.y.slice()}}}var l=function(k,x){var E=x.link;E.originalEvent=rv.event,t._hoverdata=[E],yT.click(t,{target:!0})},u=function(k,x,E){t._fullLayout.hovermode!==!1&&(rv.select(k).call(hVe.bind(0,x,E,!0)),x.link.trace.link.hoverinfo!=="skip"&&(x.link.fullData=x.link.trace,t.emit("plotly_hover",{event:rv.event,points:[x.link]})))},f=D5(t,"source:")+" ",c=D5(t,"target:")+" ",h=D5(t,"concentration:")+" ",v=D5(t,"incoming flow count:")+" ",d=D5(t,"outgoing flow count:")+" ",_=function(k,x){if(t._fullLayout.hovermode===!1)return;var E=x.link.trace.link;if(E.hoverinfo==="none"||E.hoverinfo==="skip")return;var S=[];function g(V){var B,F;V.circular?(B=(V.circularPathData.leftInnerExtent+V.circularPathData.rightInnerExtent)/2,F=V.circularPathData.verticalFullExtent):(B=(V.source.x1+V.target.x0)/2,F=(V.y0+V.y1)/2);var N=[B,F];return V.trace.orientation==="v"&&N.reverse(),N[0]+=x.parent.translateX,N[1]+=x.parent.translateY,N}for(var C=0,A=0;A<x.flow.links.length;A++){var P=x.flow.links[A];if(!(t._fullLayout.hovermode==="closest"&&x.link.pointNumber!==P.pointNumber)){x.link.pointNumber===P.pointNumber&&(C=A),P.fullData=P.trace,E=x.link.trace.link;var D=g(P),z={valueLabel:gF(x.valueFormat)(P.value)+x.valueSuffix};S.push({x:D[0],y:D[1],name:z.valueLabel,text:[P.label||"",f+P.source.label,c+P.target.label,P.concentrationscale?h+gF("%0.2f")(P.flow.labelConcentration):""].filter(oVe).join("<br>"),color:yd(E,"bgcolor")||xYt.addOpacity(P.color,1),borderColor:yd(E,"bordercolor"),fontFamily:yd(E,"font.family"),fontSize:yd(E,"font.size"),fontColor:yd(E,"font.color"),nameLength:yd(E,"namelength"),textAlign:yd(E,"align"),idealAlign:rv.event.x<D[0]?"right":"left",hovertemplate:E.hovertemplate,hovertemplateLabels:z,eventData:[P]})}}var O=yT.loneHover(S,{container:i._hoverlayer.node(),outerContainer:i._paper.node(),gd:t,anchorIndex:C});O.each(function(){var V=this;x.link.concentrationscale||sVe(V,.65),lVe(V)})},T=function(k,x,E){t._fullLayout.hovermode!==!1&&(rv.select(k).call(vVe.bind(0,x,E,!0)),x.link.trace.link.hoverinfo!=="skip"&&(x.link.fullData=x.link.trace,t.emit("plotly_unhover",{event:rv.event,points:[x.link]})),yT.loneUnhover(i._hoverlayer.node()))},p=function(k,x,E){var S=x.node;S.originalEvent=rv.event,t._hoverdata=[S],rv.select(k).call(GZ,x,E),yT.click(t,{target:!0})},M=function(k,x,E){t._fullLayout.hovermode!==!1&&(rv.select(k).call(cVe,x,E),x.node.trace.node.hoverinfo!=="skip"&&(x.node.fullData=x.node.trace,t.emit("plotly_hover",{event:rv.event,points:[x.node]})))},b=function(k,x){if(t._fullLayout.hovermode!==!1){var E=x.node.trace.node;if(!(E.hoverinfo==="none"||E.hoverinfo==="skip")){var S=rv.select(k).select("."+E1.nodeRect),g=t._fullLayout._paperdiv.node().getBoundingClientRect(),C=S.node().getBoundingClientRect(),A=C.left-2-g.left,P=C.right+2-g.left,D=C.top+C.height/4-g.top,z={valueLabel:gF(x.valueFormat)(x.node.value)+x.valueSuffix};x.node.fullData=x.node.trace,t._fullLayout._calcInverseTransform(t);var O=t._fullLayout._invScaleX,V=t._fullLayout._invScaleY,B=yT.loneHover({x0:O*A,x1:O*P,y:V*D,name:gF(x.valueFormat)(x.node.value)+x.valueSuffix,text:[x.node.label,v+x.node.targetLinks.length,d+x.node.sourceLinks.length].filter(oVe).join("<br>"),color:yd(E,"bgcolor")||x.tinyColorHue,borderColor:yd(E,"bordercolor"),fontFamily:yd(E,"font.family"),fontSize:yd(E,"font.size"),fontColor:yd(E,"font.color"),nameLength:yd(E,"namelength"),textAlign:yd(E,"align"),idealAlign:"left",hovertemplate:E.hovertemplate,hovertemplateLabels:z,eventData:[x.node]},{container:i._hoverlayer.node(),outerContainer:i._paper.node(),gd:t});sVe(B,.85),lVe(B)}}},w=function(k,x,E){t._fullLayout.hovermode!==!1&&(rv.select(k).call(GZ,x,E),x.node.trace.node.hoverinfo!=="skip"&&(x.node.fullData=x.node.trace,t.emit("plotly_unhover",{event:rv.event,points:[x.node]})),yT.loneUnhover(i._hoverlayer.node()))};mYt(t,n,r,{width:a.w,height:a.h,margin:{t:a.t,r:a.r,b:a.b,l:a.l}},{linkEvents:{hover:u,follow:_,unhover:T,select:l},nodeEvents:{hover:M,follow:b,unhover:w,select:p}})}});var pVe=ne(Q_=>{"use strict";var _Yt=Xs().overrideAll,bYt=vc().getModuleCalcData,wYt=WZ(),TYt=Pg(),AYt=e0(),MYt=Hh(),SYt=Mf().prepSelect,XZ=Wt(),EYt=wi(),yF="sankey";Q_.name=yF;Q_.baseLayoutAttrOverrides=_Yt({hoverlabel:TYt.hoverlabel},"plot","nested");Q_.plot=function(e){var t=bYt(e.calcdata,yF)[0];wYt(e,t),Q_.updateFx(e)};Q_.clean=function(e,t,r,i){var n=i._has&&i._has(yF),a=t._has&&t._has(yF);n&&!a&&(i._paperdiv.selectAll(".sankey").remove(),i._paperdiv.selectAll(".bgsankey").remove())};Q_.updateFx=function(e){for(var t=0;t<e._fullData.length;t++)kYt(e,t)};function kYt(e,t){var r=e._fullData[t],i=e._fullLayout,n=i.dragmode,a=i.dragmode==="pan"?"move":"crosshair",o=r._bgRect;if(o&&!(n==="pan"||n==="zoom")){AYt(o,a);var s={_id:"x",c2p:XZ.identity,_offset:r._sankey.translateX,_length:r._sankey.width},l={_id:"y",c2p:XZ.identity,_offset:r._sankey.translateY,_length:r._sankey.height},u={gd:e,element:o.node(),plotinfo:{id:t,xaxis:s,yaxis:l,fillRangeItems:XZ.noop},subplot:t,xaxes:[s],yaxes:[l],doneFnCompleted:function(f){var c=e._fullData[t],h,v=c.node.groups.slice(),d=[];function _(b){for(var w=c._sankey.graph.nodes,k=0;k<w.length;k++)if(w[k].pointNumber===b)return w[k]}for(var T=0;T<f.length;T++){var p=_(f[T].pointNumber);if(p)if(p.group){for(var M=0;M<p.childrenNodes.length;M++)d.push(p.childrenNodes[M].pointNumber);v[p.pointNumber-c.node._count]=!1}else d.push(p.pointNumber)}h=v.filter(Boolean).concat([d]),EYt.call("_guiRestyle",e,{"node.groups":[h]},t)}};u.prepFn=function(f,c,h){SYt(f,c,h,u,n)},MYt.init(u)}}});var yVe=ne((gmr,gVe)=>{"use strict";gVe.exports=function(t,r){for(var i=t.cd,n=[],a=i[0].trace,o=a._sankey.graph.nodes,s=0;s<o.length;s++){var l=o[s];if(!l.partOfGroup){var u=[(l.x0+l.x1)/2,(l.y0+l.y1)/2];a.orientation==="v"&&u.reverse(),r&&r.contains(u,!1,s,t)&&n.push({pointNumber:l.pointNumber})}}return n}});var xVe=ne((ymr,mVe)=>{"use strict";mVe.exports={attributes:IZ(),supplyDefaults:TUe(),calc:kUe(),plot:WZ(),moduleType:"trace",name:"sankey",basePlotModule:pVe(),selectPoints:yVe(),categories:["noOpacity"],meta:{}}});var bVe=ne((mmr,_Ve)=>{"use strict";_Ve.exports=xVe()});var TVe=ne(xT=>{"use strict";var wVe=Zs();xT.name="indicator";xT.plot=function(e,t,r,i){wVe.plotBasePlot(xT.name,e,t,r,i)};xT.clean=function(e,t,r,i){wVe.cleanBasePlot(xT.name,e,t,r,i)}});var jZ=ne((_mr,CVe)=>{"use strict";var k1=oa().extendFlat,MVe=oa().extendDeep,CYt=Xs().overrideAll,SVe=ll(),EVe=Ku(),LYt=fl().attributes,Jl=dc(),PYt=So().templatedArray,mF=Pw(),AVe=kl().descriptionOnlyNumbers,ZZ=SVe({editType:"plot",colorEditType:"plot"}),I5={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:EVe.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},kVe={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},RYt=PYt("step",MVe({},I5,{range:kVe}));CVe.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:LYt({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:k1({},ZZ,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:AVe("value")},font:k1({},ZZ,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:AVe("value")},increasing:{symbol:{valType:"string",dflt:mF.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:mF.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:mF.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:mF.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:k1({},ZZ,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:MVe({},I5,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:EVe.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:CYt({range:kVe,visible:k1({},Jl.visible,{dflt:!0}),tickmode:Jl.minor.tickmode,nticks:Jl.nticks,tick0:Jl.tick0,dtick:Jl.dtick,tickvals:Jl.tickvals,ticktext:Jl.ticktext,ticks:k1({},Jl.ticks,{dflt:"outside"}),ticklen:Jl.ticklen,tickwidth:Jl.tickwidth,tickcolor:Jl.tickcolor,ticklabelstep:Jl.ticklabelstep,showticklabels:Jl.showticklabels,labelalias:Jl.labelalias,tickfont:SVe({}),tickangle:Jl.tickangle,tickformat:Jl.tickformat,tickformatstops:Jl.tickformatstops,tickprefix:Jl.tickprefix,showtickprefix:Jl.showtickprefix,ticksuffix:Jl.ticksuffix,showticksuffix:Jl.showticksuffix,separatethousands:Jl.separatethousands,exponentformat:Jl.exponentformat,minexponent:Jl.minexponent,showexponent:Jl.showexponent,editType:"plot"},"plot"),steps:RYt,threshold:{line:{color:k1({},I5.line.color,{}),width:k1({},I5.line.width,{dflt:1}),editType:"plot"},thickness:k1({},I5.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}});var KZ=ne((bmr,LVe)=>{"use strict";LVe.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}});var DVe=ne((wmr,RVe)=>{"use strict";var _F=Wt(),bF=jZ(),DYt=fl().defaults,PVe=So(),IYt=ch(),xF=KZ(),FYt=hx(),qYt=v2(),zYt=im(),OYt=am();function BYt(e,t,r,i){function n(b,w){return _F.coerce(e,t,bF,b,w)}DYt(t,i,n),n("mode"),t._hasNumber=t.mode.indexOf("number")!==-1,t._hasDelta=t.mode.indexOf("delta")!==-1,t._hasGauge=t.mode.indexOf("gauge")!==-1;var a=n("value");t._range=[0,typeof a=="number"?1.5*a:1];var o=new Array(2),s;t._hasNumber&&(n("number.valueformat"),n("number.font.color",i.font.color),n("number.font.family",i.font.family),n("number.font.size"),t.number.font.size===void 0&&(t.number.font.size=xF.defaultNumberFontSize,o[0]=!0),n("number.prefix"),n("number.suffix"),s=t.number.font.size);var l;t._hasDelta&&(n("delta.font.color",i.font.color),n("delta.font.family",i.font.family),n("delta.font.size"),t.delta.font.size===void 0&&(t.delta.font.size=(t._hasNumber?.5:1)*(s||xF.defaultNumberFontSize),o[1]=!0),n("delta.reference",t.value),n("delta.relative"),n("delta.valueformat",t.delta.relative?"2%":""),n("delta.increasing.symbol"),n("delta.increasing.color"),n("delta.decreasing.symbol"),n("delta.decreasing.color"),n("delta.position"),n("delta.prefix"),n("delta.suffix"),l=t.delta.font.size),t._scaleNumbers=(!t._hasNumber||o[0])&&(!t._hasDelta||o[1])||!1,n("title.font.color",i.font.color),n("title.font.family",i.font.family),n("title.font.size",.25*(s||l||xF.defaultNumberFontSize)),n("title.text");var u,f,c,h;function v(b,w){return _F.coerce(u,f,bF.gauge,b,w)}function d(b,w){return _F.coerce(c,h,bF.gauge.axis,b,w)}if(t._hasGauge){u=e.gauge,u||(u={}),f=PVe.newContainer(t,"gauge"),v("shape");var _=t._isBullet=t.gauge.shape==="bullet";_||n("title.align","center");var T=t._isAngular=t.gauge.shape==="angular";T||n("align","center"),v("bgcolor",i.paper_bgcolor),v("borderwidth"),v("bordercolor"),v("bar.color"),v("bar.line.color"),v("bar.line.width");var p=xF.valueThickness*(t.gauge.shape==="bullet"?.5:1);v("bar.thickness",p),IYt(u,f,{name:"steps",handleItemDefaults:NYt}),v("threshold.value"),v("threshold.thickness"),v("threshold.line.width"),v("threshold.line.color"),c={},u&&(c=u.axis||{}),h=PVe.newContainer(f,"axis"),d("visible"),t._range=d("range",t._range);var M={noAutotickangles:!0,outerTicks:!0};FYt(c,h,d,"linear"),OYt(c,h,d,"linear",M),zYt(c,h,d,"linear",M),qYt(c,h,d,M)}else n("title.align","center"),n("align","center"),t._isAngular=t._isBullet=!1;t._length=null}function NYt(e,t){function r(i,n){return _F.coerce(e,t,bF.gauge.steps,i,n)}r("color"),r("line.color"),r("line.width"),r("range"),r("thickness")}RVe.exports={supplyDefaults:BYt}});var FVe=ne((Tmr,IVe)=>{"use strict";function UYt(e,t){var r=[],i=t.value;typeof t._lastValue!="number"&&(t._lastValue=t.value);var n=t._lastValue,a=n;return t._hasDelta&&typeof t.delta.reference=="number"&&(a=t.delta.reference),r[0]={y:i,lastY:n,delta:i-a,relativeDelta:(i-a)/a},r}IVe.exports={calc:UYt}});var UVe=ne((Amr,NVe)=>{"use strict";var nb=Ai(),VYt=(M_(),Yb(A_)).interpolate,qVe=(M_(),Yb(A_)).interpolateNumber,C1=Wt(),HYt=C1.strScale,q5=C1.strTranslate,GYt=C1.rad2deg,YYt=Tf().MID_SHIFT,rb=aa(),$_=KZ(),TF=Es(),Yc=Xi(),WYt=LM(),XYt=yL(),ZYt=dc(),_T=_i(),JZ={left:"start",center:"middle",right:"end"},eb={left:0,center:.5,right:1},zVe=/[yzafpnmkMGTPEZY]/;function z5(e){return e&&e.duration>0}NVe.exports=function(t,r,i,n){var a=t._fullLayout,o;z5(i)&&n&&(o=n()),C1.makeTraceGroups(a._indicatorlayer,r,"trace").each(function(s){var l=s[0],u=l.trace,f=nb.select(this),c=u._hasGauge,h=u._isAngular,v=u._isBullet,d=u.domain,_={w:a._size.w*(d.x[1]-d.x[0]),h:a._size.h*(d.y[1]-d.y[0]),l:a._size.l+a._size.w*d.x[0],r:a._size.r+a._size.w*(1-d.x[1]),t:a._size.t+a._size.h*(1-d.y[1]),b:a._size.b+a._size.h*d.y[0]},T=_.l+_.w/2,p=_.t+_.h/2,M=Math.min(_.w/2,_.h),b=$_.innerRadius*M,w,k,x,E=u.align||"center";if(k=p,!c)w=_.l+eb[E]*_.w,x=function(B){return OVe(B,_.w,_.h)};else if(h&&(w=T,k=p+M/2,x=function(B){return $Yt(B,.9*b)}),v){var S=$_.bulletPadding,g=1-$_.bulletNumberDomainSize+S;w=_.l+(g+(1-g)*eb[E])*_.w,x=function(B){return OVe(B,($_.bulletNumberDomainSize-S)*_.w,_.h)}}JYt(t,f,s,{numbersX:w,numbersY:k,numbersScaler:x,transitionOpts:i,onComplete:o});var C,A;c&&(C={range:u.gauge.axis.range,color:u.gauge.bgcolor,line:{color:u.gauge.bordercolor,width:0},thickness:1},A={range:u.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:u.gauge.bordercolor,width:u.gauge.borderwidth},thickness:1});var P=f.selectAll("g.angular").data(h?s:[]);P.exit().remove();var D=f.selectAll("g.angularaxis").data(h?s:[]);D.exit().remove(),h&&KYt(t,f,s,{radius:M,innerRadius:b,gauge:P,layer:D,size:_,gaugeBg:C,gaugeOutline:A,transitionOpts:i,onComplete:o});var z=f.selectAll("g.bullet").data(v?s:[]);z.exit().remove();var O=f.selectAll("g.bulletaxis").data(v?s:[]);O.exit().remove(),v&&jYt(t,f,s,{gauge:z,layer:O,size:_,gaugeBg:C,gaugeOutline:A,transitionOpts:i,onComplete:o});var V=f.selectAll("text.title").data(s);V.exit().remove(),V.enter().append("text").classed("title",!0),V.attr("text-anchor",function(){return v?JZ.right:JZ[u.title.align]}).text(u.title.text).call(rb.font,u.title.font).call(TF.convertToTspans,t),V.attr("transform",function(){var B=_.l+_.w*eb[u.title.align],F,N=$_.titlePadding,Z=rb.bBox(V.node());if(c){if(h)if(u.gauge.axis.visible){var J=rb.bBox(D.node());F=J.top-N-Z.bottom}else F=_.t+_.h/2-M/2-Z.bottom-N;v&&(F=k-(Z.top+Z.bottom)/2,B=_.l-$_.bulletPadding*_.w)}else F=u._numbersTop-N-Z.bottom;return q5(B,F)})})};function jYt(e,t,r,i){var n=r[0].trace,a=i.gauge,o=i.layer,s=i.gaugeBg,l=i.gaugeOutline,u=i.size,f=n.domain,c=i.transitionOpts,h=i.onComplete,v,d,_,T,p;a.enter().append("g").classed("bullet",!0),a.attr("transform",q5(u.l,u.t)),o.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),o.selectAll("g.xbulletaxistick,path,text").remove();var M=u.h,b=n.gauge.bar.thickness*M,w=f.x[0],k=f.x[0]+(f.x[1]-f.x[0])*(n._hasNumber||n._hasDelta?1-$_.bulletNumberDomainSize:1);v=F5(e,n.gauge.axis),v._id="xbulletaxis",v.domain=[w,k],v.setScale(),d=Yc.calcTicks(v),_=Yc.makeTransTickFn(v),T=Yc.getTickSigns(v)[2],p=u.t+u.h,v.visible&&(Yc.drawTicks(e,v,{vals:v.ticks==="inside"?Yc.clipEnds(v,d):d,layer:o,path:Yc.makeTickPath(v,p,T),transFn:_}),Yc.drawLabels(e,v,{vals:d,layer:o,transFn:_,labelFns:Yc.makeLabelFns(v,p)}));function x(D){D.attr("width",function(z){return Math.max(0,v.c2p(z.range[1])-v.c2p(z.range[0]))}).attr("x",function(z){return v.c2p(z.range[0])}).attr("y",function(z){return .5*(1-z.thickness)*M}).attr("height",function(z){return z.thickness*M})}var E=[s].concat(n.gauge.steps),S=a.selectAll("g.bg-bullet").data(E);S.enter().append("g").classed("bg-bullet",!0).append("rect"),S.select("rect").call(x).call(tb),S.exit().remove();var g=a.selectAll("g.value-bullet").data([n.gauge.bar]);g.enter().append("g").classed("value-bullet",!0).append("rect"),g.select("rect").attr("height",b).attr("y",(M-b)/2).call(tb),z5(c)?g.select("rect").transition().duration(c.duration).ease(c.easing).each("end",function(){h&&h()}).each("interrupt",function(){h&&h()}).attr("width",Math.max(0,v.c2p(Math.min(n.gauge.axis.range[1],r[0].y)))):g.select("rect").attr("width",typeof r[0].y=="number"?Math.max(0,v.c2p(Math.min(n.gauge.axis.range[1],r[0].y))):0),g.exit().remove();var C=r.filter(function(){return n.gauge.threshold.value||n.gauge.threshold.value===0}),A=a.selectAll("g.threshold-bullet").data(C);A.enter().append("g").classed("threshold-bullet",!0).append("line"),A.select("line").attr("x1",v.c2p(n.gauge.threshold.value)).attr("x2",v.c2p(n.gauge.threshold.value)).attr("y1",(1-n.gauge.threshold.thickness)/2*M).attr("y2",(1-(1-n.gauge.threshold.thickness)/2)*M).call(_T.stroke,n.gauge.threshold.line.color).style("stroke-width",n.gauge.threshold.line.width),A.exit().remove();var P=a.selectAll("g.gauge-outline").data([l]);P.enter().append("g").classed("gauge-outline",!0).append("rect"),P.select("rect").call(x).call(tb),P.exit().remove()}function KYt(e,t,r,i){var n=r[0].trace,a=i.size,o=i.radius,s=i.innerRadius,l=i.gaugeBg,u=i.gaugeOutline,f=[a.l+a.w/2,a.t+a.h/2+o/2],c=i.gauge,h=i.layer,v=i.transitionOpts,d=i.onComplete,_=Math.PI/2;function T(re){var ue=n.gauge.axis.range[0],fe=n.gauge.axis.range[1],K=(re-ue)/(fe-ue)*Math.PI-_;return K<-_?-_:K>_?_:K}function p(re){return nb.svg.arc().innerRadius((s+o)/2-re/2*(o-s)).outerRadius((s+o)/2+re/2*(o-s)).startAngle(-_)}function M(re){re.attr("d",function(ue){return p(ue.thickness).startAngle(T(ue.range[0])).endAngle(T(ue.range[1]))()})}var b,w,k,x;c.enter().append("g").classed("angular",!0),c.attr("transform",q5(f[0],f[1])),h.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),h.selectAll("g.xangularaxistick,path,text").remove(),b=F5(e,n.gauge.axis),b.type="linear",b.range=n.gauge.axis.range,b._id="xangularaxis",b.ticklabeloverflow="allow",b.setScale();var E=function(re){return(b.range[0]-re.x)/(b.range[1]-b.range[0])*Math.PI+Math.PI},S={},g=Yc.makeLabelFns(b,0),C=g.labelStandoff;S.xFn=function(re){var ue=E(re);return Math.cos(ue)*C},S.yFn=function(re){var ue=E(re),fe=Math.sin(ue)>0?.2:1;return-Math.sin(ue)*(C+re.fontSize*fe)+Math.abs(Math.cos(ue))*(re.fontSize*YYt)},S.anchorFn=function(re){var ue=E(re),fe=Math.cos(ue);return Math.abs(fe)<.1?"middle":fe>0?"start":"end"},S.heightFn=function(re,ue,fe){var K=E(re);return-.5*(1+Math.sin(K))*fe};var A=function(re){return q5(f[0]+o*Math.cos(re),f[1]-o*Math.sin(re))};k=function(re){return A(E(re))};var P=function(re){var ue=E(re);return A(ue)+"rotate("+-GYt(ue)+")"};if(w=Yc.calcTicks(b),x=Yc.getTickSigns(b)[2],b.visible){x=b.ticks==="inside"?-1:1;var D=(b.linewidth||1)/2;Yc.drawTicks(e,b,{vals:w,layer:h,path:"M"+x*D+",0h"+x*b.ticklen,transFn:P}),Yc.drawLabels(e,b,{vals:w,layer:h,transFn:k,labelFns:S})}var z=[l].concat(n.gauge.steps),O=c.selectAll("g.bg-arc").data(z);O.enter().append("g").classed("bg-arc",!0).append("path"),O.select("path").call(M).call(tb),O.exit().remove();var V=p(n.gauge.bar.thickness),B=c.selectAll("g.value-arc").data([n.gauge.bar]);B.enter().append("g").classed("value-arc",!0).append("path");var F=B.select("path");z5(v)?(F.transition().duration(v.duration).ease(v.easing).each("end",function(){d&&d()}).each("interrupt",function(){d&&d()}).attrTween("d",QYt(V,T(r[0].lastY),T(r[0].y))),n._lastValue=r[0].y):F.attr("d",typeof r[0].y=="number"?V.endAngle(T(r[0].y)):"M0,0Z"),F.call(tb),B.exit().remove(),z=[];var N=n.gauge.threshold.value;(N||N===0)&&z.push({range:[N,N],color:n.gauge.threshold.color,line:{color:n.gauge.threshold.line.color,width:n.gauge.threshold.line.width},thickness:n.gauge.threshold.thickness});var Z=c.selectAll("g.threshold-arc").data(z);Z.enter().append("g").classed("threshold-arc",!0).append("path"),Z.select("path").call(M).call(tb),Z.exit().remove();var J=c.selectAll("g.gauge-outline").data([u]);J.enter().append("g").classed("gauge-outline",!0).append("path"),J.select("path").call(M).call(tb),J.exit().remove()}function JYt(e,t,r,i){var n=r[0].trace,a=i.numbersX,o=i.numbersY,s=n.align||"center",l=JZ[s],u=i.transitionOpts,f=i.onComplete,c=C1.ensureSingle(t,"g","numbers"),h,v,d,_=[];n._hasNumber&&_.push("number"),n._hasDelta&&(_.push("delta"),n.delta.position==="left"&&_.reverse());var T=c.selectAll("text").data(_);T.enter().append("text"),T.attr("text-anchor",function(){return l}).attr("class",function(A){return A}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),T.exit().remove();function p(A,P,D,z){if(A.match("s")&&D>=0!=z>=0&&!P(D).slice(-1).match(zVe)&&!P(z).slice(-1).match(zVe)){var O=A.slice().replace("s","f").replace(/\d+/,function(B){return parseInt(B)-1}),V=F5(e,{tickformat:O});return function(B){return Math.abs(B)<1?Yc.tickText(V,B).text:P(B)}}else return P}function M(){var A=F5(e,{tickformat:n.number.valueformat},n._range);A.setScale(),Yc.prepTicks(A);var P=function(B){return Yc.tickText(A,B).text},D=n.number.suffix,z=n.number.prefix,O=c.select("text.number");function V(){var B=typeof r[0].y=="number"?z+P(r[0].y)+D:"-";O.text(B).call(rb.font,n.number.font).call(TF.convertToTspans,e)}return z5(u)?O.transition().duration(u.duration).ease(u.easing).each("end",function(){V(),f&&f()}).each("interrupt",function(){V(),f&&f()}).attrTween("text",function(){var B=nb.select(this),F=qVe(r[0].lastY,r[0].y);n._lastValue=r[0].y;var N=p(n.number.valueformat,P,r[0].lastY,r[0].y);return function(Z){B.text(z+N(F(Z))+D)}}):V(),h=BVe(z+P(r[0].y)+D,n.number.font,l,e),O}function b(){var A=F5(e,{tickformat:n.delta.valueformat},n._range);A.setScale(),Yc.prepTicks(A);var P=function(Z){return Yc.tickText(A,Z).text},D=n.delta.suffix,z=n.delta.prefix,O=function(Z){var J=n.delta.relative?Z.relativeDelta:Z.delta;return J},V=function(Z,J){return Z===0||typeof Z!="number"||isNaN(Z)?"-":(Z>0?n.delta.increasing.symbol:n.delta.decreasing.symbol)+z+J(Z)+D},B=function(Z){return Z.delta>=0?n.delta.increasing.color:n.delta.decreasing.color};n._deltaLastValue===void 0&&(n._deltaLastValue=O(r[0]));var F=c.select("text.delta");F.call(rb.font,n.delta.font).call(_T.fill,B({delta:n._deltaLastValue}));function N(){F.text(V(O(r[0]),P)).call(_T.fill,B(r[0])).call(TF.convertToTspans,e)}return z5(u)?F.transition().duration(u.duration).ease(u.easing).tween("text",function(){var Z=nb.select(this),J=O(r[0]),re=n._deltaLastValue,ue=p(n.delta.valueformat,P,re,J),fe=qVe(re,J);return n._deltaLastValue=J,function(K){Z.text(V(fe(K),ue)),Z.call(_T.fill,B({delta:fe(K)}))}}).each("end",function(){N(),f&&f()}).each("interrupt",function(){N(),f&&f()}):N(),v=BVe(V(O(r[0]),P),n.delta.font,l,e),F}var w=n.mode+n.align,k;if(n._hasDelta&&(k=b(),w+=n.delta.position+n.delta.font.size+n.delta.font.family+n.delta.valueformat,w+=n.delta.increasing.symbol+n.delta.decreasing.symbol,d=v),n._hasNumber&&(M(),w+=n.number.font.size+n.number.font.family+n.number.valueformat+n.number.suffix+n.number.prefix,d=h),n._hasDelta&&n._hasNumber){var x=[(h.left+h.right)/2,(h.top+h.bottom)/2],E=[(v.left+v.right)/2,(v.top+v.bottom)/2],S,g,C=.75*n.delta.font.size;n.delta.position==="left"&&(S=wF(n,"deltaPos",0,-1*(h.width*eb[n.align]+v.width*(1-eb[n.align])+C),w,Math.min),g=x[1]-E[1],d={width:h.width+v.width+C,height:Math.max(h.height,v.height),left:v.left+S,right:h.right,top:Math.min(h.top,v.top+g),bottom:Math.max(h.bottom,v.bottom+g)}),n.delta.position==="right"&&(S=wF(n,"deltaPos",0,h.width*(1-eb[n.align])+v.width*eb[n.align]+C,w,Math.max),g=x[1]-E[1],d={width:h.width+v.width+C,height:Math.max(h.height,v.height),left:h.left,right:v.right+S,top:Math.min(h.top,v.top+g),bottom:Math.max(h.bottom,v.bottom+g)}),n.delta.position==="bottom"&&(S=null,g=v.height,d={width:Math.max(h.width,v.width),height:h.height+v.height,left:Math.min(h.left,v.left),right:Math.max(h.right,v.right),top:h.bottom-h.height,bottom:h.bottom+v.height}),n.delta.position==="top"&&(S=null,g=h.top,d={width:Math.max(h.width,v.width),height:h.height+v.height,left:Math.min(h.left,v.left),right:Math.max(h.right,v.right),top:h.bottom-h.height-v.height,bottom:h.bottom}),k.attr({dx:S,dy:g})}(n._hasNumber||n._hasDelta)&&c.attr("transform",function(){var A=i.numbersScaler(d);w+=A[2];var P=wF(n,"numbersScale",1,A[0],w,Math.min),D;n._scaleNumbers||(P=1),n._isAngular?D=o-P*d.bottom:D=o-P*(d.top+d.bottom)/2,n._numbersTop=P*d.top+D;var z=d[s];s==="center"&&(z=(d.left+d.right)/2);var O=a-P*z;return O=wF(n,"numbersTranslate",0,O,w,Math.max),q5(O,D)+HYt(P)})}function tb(e){e.each(function(t){_T.stroke(nb.select(this),t.line.color)}).each(function(t){_T.fill(nb.select(this),t.color)}).style("stroke-width",function(t){return t.line.width})}function QYt(e,t,r){return function(){var i=VYt(t,r);return function(n){return e.endAngle(i(n))()}}}function F5(e,t,r){var i=e._fullLayout,n=C1.extendFlat({type:"linear",ticks:"outside",range:r,showline:!0},t),a={type:"linear",_id:"x"+t._id},o={letter:"x",font:i.font,noAutotickangles:!0,noHover:!0,noTickson:!0};function s(l,u){return C1.coerce(n,a,ZYt,l,u)}return WYt(n,a,s,o,i),XYt(n,a,s,o),a}function OVe(e,t,r){var i=Math.min(t/e.width,r/e.height);return[i,e,t+"x"+r]}function $Yt(e,t){var r=Math.sqrt(e.width/2*(e.width/2)+e.height*e.height),i=t/r;return[i,e,t]}function BVe(e,t,r,i){var n=document.createElementNS("http://www.w3.org/2000/svg","text"),a=nb.select(n);return a.text(e).attr("x",0).attr("y",0).attr("text-anchor",r).attr("data-unformatted",e).call(TF.convertToTspans,i).call(rb.font,t),rb.bBox(a.node())}function wF(e,t,r,i,n,a){var o="_cache"+t;e[o]&&e[o].key===n||(e[o]={key:n,value:r});var s=C1.aggNums(a,null,[e[o].value,i],2);return e[o].value=s,s}});var HVe=ne((Mmr,VVe)=>{"use strict";VVe.exports={moduleType:"trace",name:"indicator",basePlotModule:TVe(),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:jZ(),supplyDefaults:DVe().supplyDefaults,calc:FVe().calc,plot:UVe(),meta:{}}});var YVe=ne((Smr,GVe)=>{"use strict";GVe.exports=HVe()});var QZ=ne((Emr,jVe)=>{"use strict";var WVe=Lx(),AF=oa().extendFlat,eWt=Xs().overrideAll,XVe=ll(),tWt=fl().attributes,ZVe=kl().descriptionOnlyNumbers,rWt=jVe.exports=eWt({domain:tWt({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:ZVe("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:AF({},WVe.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:AF({},XVe({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:ZVe("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:AF({},WVe.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:AF({},XVe({arrayOk:!0}))}},"calc","from-root");rWt.transforms=void 0});var JVe=ne((kmr,KVe)=>{"use strict";var O5=Wt(),nWt=QZ(),iWt=fl().defaults;function aWt(e,t){for(var r=e.columnorder||[],i=e.header.values.length,n=r.slice(0,i),a=n.slice().sort(function(l,u){return l-u}),o=n.map(function(l){return a.indexOf(l)}),s=o.length;s<i;s++)o.push(s);t("columnorder",o)}KVe.exports=function(t,r,i,n){function a(o,s){return O5.coerce(t,r,nWt,o,s)}iWt(r,n,a),a("columnwidth"),a("header.values"),a("header.format"),a("header.align"),a("header.prefix"),a("header.suffix"),a("header.height"),a("header.line.width"),a("header.line.color"),a("header.fill.color"),O5.coerceFont(a,"header.font",O5.extendFlat({},n.font)),aWt(r,a),a("cells.values"),a("cells.format"),a("cells.align"),a("cells.prefix"),a("cells.suffix"),a("cells.height"),a("cells.line.width"),a("cells.line.color"),a("cells.fill.color"),O5.coerceFont(a,"cells.font",O5.extendFlat({},n.font)),r._length=null}});var $Ve=ne((Cmr,QVe)=>{"use strict";var oWt=gg().wrap;QVe.exports=function(){return oWt({})}});var $Z=ne((Lmr,eHe)=>{"use strict";eHe.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}});var uHe=ne((Pmr,lHe)=>{"use strict";var tHe=$Z(),tj=oa().extendFlat,sWt=la(),lWt=uh().isTypedArray,MF=uh().isArrayOrTypedArray;lHe.exports=function(t,r){var i=ej(r.cells.values),n=function(g){return g.slice(r.header.values.length,g.length)},a=ej(r.header.values);a.length&&!a[0].length&&(a[0]=[""],a=ej(a));var o=a.concat(n(i).map(function(){return sHe((a[0]||[""]).length)})),s=r.domain,l=Math.floor(t._fullLayout._size.w*(s.x[1]-s.x[0])),u=Math.floor(t._fullLayout._size.h*(s.y[1]-s.y[0])),f=r.header.values.length?o[0].map(function(){return r.header.height}):[tHe.emptyHeaderHeight],c=i.length?i[0].map(function(){return r.cells.height}):[],h=f.reduce(rHe,0),v=u-h,d=v+tHe.uplift,_=aHe(c,d),T=aHe(f,h),p=iHe(T,[]),M=iHe(_,p),b={},w=r._fullInput.columnorder;MF(w)&&(w=Array.from(w)),w=w.concat(n(i.map(function(g,C){return C})));var k=o.map(function(g,C){var A=MF(r.columnwidth)?r.columnwidth[Math.min(C,r.columnwidth.length-1)]:r.columnwidth;return sWt(A)?Number(A):1}),x=k.reduce(rHe,0);k=k.map(function(g){return g/x*l});var E=Math.max(rj(r.header.line.width),rj(r.cells.line.width)),S={key:r.uid+t._context.staticPlot,translateX:s.x[0]*t._fullLayout._size.w,translateY:t._fullLayout._size.h*(1-s.y[1]),size:t._fullLayout._size,width:l,maxLineWidth:E,height:u,columnOrder:w,groupHeight:u,rowBlocks:M,headerRowBlocks:p,scrollY:0,cells:tj({},r.cells,{values:i}),headerCells:tj({},r.header,{values:o}),gdColumns:o.map(function(g){return g[0]}),gdColumnsOriginalOrder:o.map(function(g){return g[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:o.map(function(g,C){var A=b[g];b[g]=(A||0)+1;var P=g+"__"+b[g];return{key:P,label:g,specIndex:C,xIndex:w[C],xScale:nHe,x:void 0,calcdata:void 0,columnWidth:k[C]}})};return S.columns.forEach(function(g){g.calcdata=S,g.x=nHe(g)}),S};function rj(e){if(MF(e)){for(var t=0,r=0;r<e.length;r++)t=Math.max(t,rj(e[r]));return t}return e}function rHe(e,t){return e+t}function ej(e){var t=e.slice(),r=1/0,i=0,n;for(n=0;n<t.length;n++)lWt(t[n])?t[n]=Array.from(t[n]):MF(t[n])||(t[n]=[t[n]]),r=Math.min(r,t[n].length),i=Math.max(i,t[n].length);if(r!==i)for(n=0;n<t.length;n++){var a=i-t[n].length;a&&(t[n]=t[n].concat(sHe(a)))}return t}function sHe(e){for(var t=new Array(e),r=0;r<e;r++)t[r]="";return t}function nHe(e){return e.calcdata.columns.reduce(function(t,r){return r.xIndex<e.xIndex?t+r.columnWidth:t},0)}function iHe(e,t){var r=Object.keys(e);return r.map(function(i){return tj({},e[i],{auxiliaryBlocks:t})})}function aHe(e,t){for(var r={},i,n=0,a=0,o=oHe(),s=0,l=0,u=0;u<e.length;u++)i=e[u],o.rows.push({rowIndex:u,rowHeight:i}),a+=i,(a>=t||u===e.length-1)&&(r[n]=o,o.key=l++,o.firstRowIndex=s,o.lastRowIndex=u,o=oHe(),n+=a,s=u+1,a=0);return r}function oHe(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}});var fHe=ne(nj=>{"use strict";var SF=oa().extendFlat;nj.splitToPanels=function(e){var t=[0,0],r=SF({},e,{key:"header",type:"header",page:0,prevPages:t,currentRepaint:[null,null],dragHandle:!0,values:e.calcdata.headerCells.values[e.specIndex],rowBlocks:e.calcdata.headerRowBlocks,calcdata:SF({},e.calcdata,{cells:e.calcdata.headerCells})}),i=SF({},e,{key:"cells1",type:"cells",page:0,prevPages:t,currentRepaint:[null,null],dragHandle:!1,values:e.calcdata.cells.values[e.specIndex],rowBlocks:e.calcdata.rowBlocks}),n=SF({},e,{key:"cells2",type:"cells",page:1,prevPages:t,currentRepaint:[null,null],dragHandle:!1,values:e.calcdata.cells.values[e.specIndex],rowBlocks:e.calcdata.rowBlocks});return[i,n,r]};nj.splitToCells=function(e){var t=uWt(e);return(e.values||[]).slice(t[0],t[1]).map(function(r,i){var n=typeof r=="string"&&r.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:i+n,key:t[0]+i,column:e,calcdata:e.calcdata,page:e.page,rowBlocks:e.rowBlocks,value:r}})};function uWt(e){var t=e.rowBlocks[e.page],r=t?t.rows[0].rowIndex:0,i=t?r+t.rows.length:0;return[r,i]}});var vj=ne((Dmr,bHe)=>{"use strict";var Di=$Z(),Tl=Ai(),ij=Wt(),fWt=ij.numberFormat,Is=gg(),aj=aa(),cWt=Es(),hWt=Wt().raiseToTop,Up=Wt().strTranslate,vWt=Wt().cancelTransition,dWt=uHe(),yHe=fHe(),cHe=_i();bHe.exports=function(t,r){var i=!t._context.staticPlot,n=t._fullLayout._paper.selectAll("."+Di.cn.table).data(r.map(function(M){var b=Is.unwrap(M),w=b.trace;return dWt(t,w)}),Is.keyFun);n.exit().remove(),n.enter().append("g").classed(Di.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),n.attr("width",function(M){return M.width+M.size.l+M.size.r}).attr("height",function(M){return M.height+M.size.t+M.size.b}).attr("transform",function(M){return Up(M.translateX,M.translateY)});var a=n.selectAll("."+Di.cn.tableControlView).data(Is.repeat,Is.keyFun),o=a.enter().append("g").classed(Di.cn.tableControlView,!0).style("box-sizing","content-box");if(i){var s="onwheel"in document?"wheel":"mousewheel";o.on("mousemove",function(M){a.filter(function(b){return M===b}).call(B5,t)}).on(s,function(M){if(!M.scrollbarState.wheeling){M.scrollbarState.wheeling=!0;var b=M.scrollY+Tl.event.deltaY,w=kF(t,a,null,b)(M);w||(Tl.event.stopPropagation(),Tl.event.preventDefault()),M.scrollbarState.wheeling=!1}}).call(B5,t,!0)}a.attr("transform",function(M){return Up(M.size.l,M.size.t)});var l=a.selectAll("."+Di.cn.scrollBackground).data(Is.repeat,Is.keyFun);l.enter().append("rect").classed(Di.cn.scrollBackground,!0).attr("fill","none"),l.attr("width",function(M){return M.width}).attr("height",function(M){return M.height}),a.each(function(M){aj.setClipUrl(Tl.select(this),hHe(t,M),t)});var u=a.selectAll("."+Di.cn.yColumn).data(function(M){return M.columns},Is.keyFun);u.enter().append("g").classed(Di.cn.yColumn,!0),u.exit().remove(),u.attr("transform",function(M){return Up(M.x,0)}),i&&u.call(Tl.behavior.drag().origin(function(M){var b=Tl.select(this);return pHe(b,M,-Di.uplift),hWt(this),M.calcdata.columnDragInProgress=!0,B5(a.filter(function(w){return M.calcdata.key===w.key}),t),M}).on("drag",function(M){var b=Tl.select(this),w=function(E){return(M===E?Tl.event.x:E.x)+E.columnWidth/2};M.x=Math.max(-Di.overdrag,Math.min(M.calcdata.width+Di.overdrag-M.columnWidth,Tl.event.x));var k=mHe(u).filter(function(E){return E.calcdata.key===M.calcdata.key}),x=k.sort(function(E,S){return w(E)-w(S)});x.forEach(function(E,S){E.xIndex=S,E.x=M===E?E.x:E.xScale(E)}),u.filter(function(E){return M!==E}).transition().ease(Di.transitionEase).duration(Di.transitionDuration).attr("transform",function(E){return Up(E.x,0)}),b.call(vWt).attr("transform",Up(M.x,-Di.uplift))}).on("dragend",function(M){var b=Tl.select(this),w=M.calcdata;M.x=M.xScale(M),M.calcdata.columnDragInProgress=!1,pHe(b,M,0),AWt(t,w,w.columns.map(function(k){return k.xIndex}))})),u.each(function(M){aj.setClipUrl(Tl.select(this),vHe(t,M),t)});var f=u.selectAll("."+Di.cn.columnBlock).data(yHe.splitToPanels,Is.keyFun);f.enter().append("g").classed(Di.cn.columnBlock,!0).attr("id",function(M){return M.key}),f.style("cursor",function(M){return M.dragHandle?"ew-resize":M.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var c=f.filter(MWt),h=f.filter(fj);i&&h.call(Tl.behavior.drag().origin(function(M){return Tl.event.stopPropagation(),M}).on("drag",kF(t,a,-1)).on("dragend",function(){})),oj(t,a,c,f),oj(t,a,h,f);var v=a.selectAll("."+Di.cn.scrollAreaClip).data(Is.repeat,Is.keyFun);v.enter().append("clipPath").classed(Di.cn.scrollAreaClip,!0).attr("id",function(M){return hHe(t,M)});var d=v.selectAll("."+Di.cn.scrollAreaClipRect).data(Is.repeat,Is.keyFun);d.enter().append("rect").classed(Di.cn.scrollAreaClipRect,!0).attr("x",-Di.overdrag).attr("y",-Di.uplift).attr("fill","none"),d.attr("width",function(M){return M.width+2*Di.overdrag}).attr("height",function(M){return M.height+Di.uplift});var _=u.selectAll("."+Di.cn.columnBoundary).data(Is.repeat,Is.keyFun);_.enter().append("g").classed(Di.cn.columnBoundary,!0);var T=u.selectAll("."+Di.cn.columnBoundaryClippath).data(Is.repeat,Is.keyFun);T.enter().append("clipPath").classed(Di.cn.columnBoundaryClippath,!0),T.attr("id",function(M){return vHe(t,M)});var p=T.selectAll("."+Di.cn.columnBoundaryRect).data(Is.repeat,Is.keyFun);p.enter().append("rect").classed(Di.cn.columnBoundaryRect,!0).attr("fill","none"),p.attr("width",function(M){return M.columnWidth+2*EF(M)}).attr("height",function(M){return M.calcdata.height+2*EF(M)+Di.uplift}).attr("x",function(M){return-EF(M)}).attr("y",function(M){return-EF(M)}),cj(null,h,a)};function EF(e){return Math.ceil(e.calcdata.maxLineWidth/2)}function hHe(e,t){return"clip"+e._fullLayout._uid+"_scrollAreaBottomClip_"+t.key}function vHe(e,t){return"clip"+e._fullLayout._uid+"_columnBoundaryClippath_"+t.calcdata.key+"_"+t.specIndex}function mHe(e){return[].concat.apply([],e.map(function(t){return t})).map(function(t){return t.__data__})}function B5(e,t,r){function i(u){var f=u.rowBlocks;return lj(f,f.length-1)+(f.length?CF(f[f.length-1],1/0):1)}var n=e.selectAll("."+Di.cn.scrollbarKit).data(Is.repeat,Is.keyFun);n.enter().append("g").classed(Di.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),n.each(function(u){var f=u.scrollbarState;f.totalHeight=i(u),f.scrollableAreaHeight=u.groupHeight-sj(u),f.currentlyVisibleHeight=Math.min(f.totalHeight,f.scrollableAreaHeight),f.ratio=f.currentlyVisibleHeight/f.totalHeight,f.barLength=Math.max(f.ratio*f.currentlyVisibleHeight,Di.goldenRatio*Di.scrollbarWidth),f.barWiggleRoom=f.currentlyVisibleHeight-f.barLength,f.wiggleRoom=Math.max(0,f.totalHeight-f.scrollableAreaHeight),f.topY=f.barWiggleRoom===0?0:u.scrollY/f.wiggleRoom*f.barWiggleRoom,f.bottomY=f.topY+f.barLength,f.dragMultiplier=f.wiggleRoom/f.barWiggleRoom}).attr("transform",function(u){var f=u.width+Di.scrollbarWidth/2+Di.scrollbarOffset;return Up(f,sj(u))});var a=n.selectAll("."+Di.cn.scrollbar).data(Is.repeat,Is.keyFun);a.enter().append("g").classed(Di.cn.scrollbar,!0);var o=a.selectAll("."+Di.cn.scrollbarSlider).data(Is.repeat,Is.keyFun);o.enter().append("g").classed(Di.cn.scrollbarSlider,!0),o.attr("transform",function(u){return Up(0,u.scrollbarState.topY||0)});var s=o.selectAll("."+Di.cn.scrollbarGlyph).data(Is.repeat,Is.keyFun);s.enter().append("line").classed(Di.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",Di.scrollbarWidth).attr("stroke-linecap","round").attr("y1",Di.scrollbarWidth/2),s.attr("y2",function(u){return u.scrollbarState.barLength-Di.scrollbarWidth/2}).attr("stroke-opacity",function(u){return u.columnDragInProgress||!u.scrollbarState.barWiggleRoom||r?0:.4}),s.transition().delay(0).duration(0),s.transition().delay(Di.scrollbarHideDelay).duration(Di.scrollbarHideDuration).attr("stroke-opacity",0);var l=a.selectAll("."+Di.cn.scrollbarCaptureZone).data(Is.repeat,Is.keyFun);l.enter().append("line").classed(Di.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",Di.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(u){var f=Tl.event.y,c=this.getBoundingClientRect(),h=u.scrollbarState,v=f-c.top,d=Tl.scale.linear().domain([0,h.scrollableAreaHeight]).range([0,h.totalHeight]).clamp(!0);h.topY<=v&&v<=h.bottomY||kF(t,e,null,d(v-h.barLength/2))(u)}).call(Tl.behavior.drag().origin(function(u){return Tl.event.stopPropagation(),u.scrollbarState.scrollbarScrollInProgress=!0,u}).on("drag",kF(t,e)).on("dragend",function(){})),l.attr("y2",function(u){return u.scrollbarState.scrollableAreaHeight}),t._context.staticPlot&&(s.remove(),l.remove())}function oj(e,t,r,i){var n=pWt(r),a=gWt(n);_Wt(a);var o=yWt(a);wWt(o);var s=xWt(a),l=mWt(s);bWt(l),xHe(l,t,i,e),hj(a)}function pWt(e){var t=e.selectAll("."+Di.cn.columnCells).data(Is.repeat,Is.keyFun);return t.enter().append("g").classed(Di.cn.columnCells,!0),t.exit().remove(),t}function gWt(e){var t=e.selectAll("."+Di.cn.columnCell).data(yHe.splitToCells,function(r){return r.keyWithinBlock});return t.enter().append("g").classed(Di.cn.columnCell,!0),t.exit().remove(),t}function yWt(e){var t=e.selectAll("."+Di.cn.cellRect).data(Is.repeat,function(r){return r.keyWithinBlock});return t.enter().append("rect").classed(Di.cn.cellRect,!0),t}function mWt(e){var t=e.selectAll("."+Di.cn.cellText).data(Is.repeat,function(r){return r.keyWithinBlock});return t.enter().append("text").classed(Di.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){Tl.event.stopPropagation()}),t}function xWt(e){var t=e.selectAll("."+Di.cn.cellTextHolder).data(Is.repeat,function(r){return r.keyWithinBlock});return t.enter().append("g").classed(Di.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),t}function _Wt(e){e.each(function(t,r){var i=t.calcdata.cells.font,n=t.column.specIndex,a={size:bg(i.size,n,r),color:bg(i.color,n,r),family:bg(i.family,n,r)};t.rowNumber=t.key,t.align=bg(t.calcdata.cells.align,n,r),t.cellBorderWidth=bg(t.calcdata.cells.line.width,n,r),t.font=a})}function bWt(e){e.each(function(t){aj.font(Tl.select(this),t.font)})}function wWt(e){e.attr("width",function(t){return t.column.columnWidth}).attr("stroke-width",function(t){return t.cellBorderWidth}).each(function(t){var r=Tl.select(this);cHe.stroke(r,bg(t.calcdata.cells.line.color,t.column.specIndex,t.rowNumber)),cHe.fill(r,bg(t.calcdata.cells.fill.color,t.column.specIndex,t.rowNumber))})}function xHe(e,t,r,i){e.text(function(n){var a=n.column.specIndex,o=n.rowNumber,s=n.value,l=typeof s=="string",u=l&&s.match(/<br>/i),f=!l||u;n.mayHaveMarkup=l&&s.match(/[<&>]/);var c=TWt(s);n.latex=c;var h=c?"":bg(n.calcdata.cells.prefix,a,o)||"",v=c?"":bg(n.calcdata.cells.suffix,a,o)||"",d=c?null:bg(n.calcdata.cells.format,a,o)||null,_=h+(d?fWt(d)(n.value):n.value)+v,T;n.wrappingNeeded=!n.wrapped&&!f&&!c&&(T=dHe(_)),n.cellHeightMayIncrease=u||c||n.mayHaveMarkup||(T===void 0?dHe(_):T),n.needsConvertToTspans=n.mayHaveMarkup||n.wrappingNeeded||n.latex;var p;if(n.wrappingNeeded){var M=Di.wrapSplitCharacter===" "?_.replace(/<a href=/ig,"<a_href="):_,b=M.split(Di.wrapSplitCharacter),w=Di.wrapSplitCharacter===" "?b.map(function(k){return k.replace(/<a_href=/ig,"<a href=")}):b;n.fragments=w.map(function(k){return{text:k,width:null}}),n.fragments.push({fragment:Di.wrapSpacer,width:null}),p=w.join(Di.lineBreaker)+Di.lineBreaker+Di.wrapSpacer}else delete n.fragments,p=_;return p}).attr("dy",function(n){return n.needsConvertToTspans?0:"0.75em"}).each(function(n){var a=this,o=Tl.select(a),s=n.wrappingNeeded?EWt:kWt;n.needsConvertToTspans?cWt.convertToTspans(o,i,s(r,a,t,i,n)):Tl.select(a.parentNode).attr("transform",function(l){return Up(_He(l),Di.cellPad)}).attr("text-anchor",function(l){return{left:"start",center:"middle",right:"end"}[l.align]})})}function TWt(e){return typeof e=="string"&&e.match(Di.latexCheck)}function dHe(e){return e.indexOf(Di.wrapSplitCharacter)!==-1}function AWt(e,t,r){var i=t.gdColumnsOriginalOrder;t.gdColumns.sort(function(n,a){return r[i.indexOf(n)]-r[i.indexOf(a)]}),t.columnorder=r,e.emit("plotly_restyle")}function bg(e,t,r){if(ij.isArrayOrTypedArray(e)){var i=e[Math.min(t,e.length-1)];return ij.isArrayOrTypedArray(i)?i[Math.min(r,i.length-1)]:i}else return e}function pHe(e,t,r){e.transition().ease(Di.releaseTransitionEase).duration(Di.releaseTransitionDuration).attr("transform",Up(t.x,r))}function fj(e){return e.type==="cells"}function MWt(e){return e.type==="header"}function sj(e){var t=e.rowBlocks.length?e.rowBlocks[0].auxiliaryBlocks:[];return t.reduce(function(r,i){return r+CF(i,1/0)},0)}function SWt(e,t,r){for(var i=[],n=0,a=0;a<e.length;a++){for(var o=e[a],s=o.rows,l=0,u=0;u<s.length;u++)l+=s[u].rowHeight;o.allRowsHeight=l;var f=n+l,c=t,h=c+r;c<f&&h>n&&i.push(a),n+=l}return i}function cj(e,t,r){var i=mHe(t)[0];if(i!==void 0){var n=i.rowBlocks,a=i.calcdata,o=lj(n,n.length),s=i.calcdata.groupHeight-sj(i),l=a.scrollY=Math.max(0,Math.min(o-s,a.scrollY)),u=SWt(n,l,s);u.length===1&&(u[0]===n.length-1?u.unshift(u[0]-1):u.push(u[0]+1)),u[0]%2&&u.reverse(),t.each(function(f,c){f.page=u[c],f.scrollY=l}),t.attr("transform",function(f){var c=lj(f.rowBlocks,f.page)-f.scrollY;return Up(0,c)}),e&&(gHe(e,r,t,u,i.prevPages,i,0),gHe(e,r,t,u,i.prevPages,i,1),B5(r,e))}}function kF(e,t,r,i){return function(a){var o=a.calcdata?a.calcdata:a,s=t.filter(function(c){return o.key===c.key}),l=r||o.scrollbarState.dragMultiplier,u=o.scrollY;o.scrollY=i===void 0?o.scrollY+l*Tl.event.dy:i;var f=s.selectAll("."+Di.cn.yColumn).selectAll("."+Di.cn.columnBlock).filter(fj);return cj(e,f,s),o.scrollY===u}}function gHe(e,t,r,i,n,a,o){var s=i[o]!==n[o];s&&(clearTimeout(a.currentRepaint[o]),a.currentRepaint[o]=setTimeout(function(){var l=r.filter(function(u,f){return f===o&&i[f]!==n[f]});oj(e,t,l,r),n[o]=i[o]}))}function EWt(e,t,r,i){return function(){var a=Tl.select(t.parentNode);a.each(function(o){var s=o.fragments;a.selectAll("tspan.line").each(function(_,T){s[T].width=this.getComputedTextLength()});var l=s[s.length-1].width,u=s.slice(0,-1),f=[],c,h,v=0,d=o.column.columnWidth-2*Di.cellPad;for(o.value="";u.length;)c=u.shift(),h=c.width+l,v+h>d&&(o.value+=f.join(Di.wrapSpacer)+Di.lineBreaker,f=[],v=0),f.push(c.text),v+=h;v&&(o.value+=f.join(Di.wrapSpacer)),o.wrapped=!0}),a.selectAll("tspan.line").remove(),xHe(a.select("."+Di.cn.cellText),r,e,i),Tl.select(t.parentNode.parentNode).call(hj)}}function kWt(e,t,r,i,n){return function(){if(!n.settledY){var o=Tl.select(t.parentNode),s=uj(n),l=n.key-s.firstRowIndex,u=s.rows[l].rowHeight,f=n.cellHeightMayIncrease?t.parentNode.getBoundingClientRect().height+2*Di.cellPad:u,c=Math.max(f,u),h=c-s.rows[l].rowHeight;h&&(s.rows[l].rowHeight=c,e.selectAll("."+Di.cn.columnCell).call(hj),cj(null,e.filter(fj),0),B5(r,i,!0)),o.attr("transform",function(){var v=this,d=v.parentNode,_=d.getBoundingClientRect(),T=Tl.select(v.parentNode).select("."+Di.cn.cellRect).node().getBoundingClientRect(),p=v.transform.baseVal.consolidate(),M=T.top-_.top+(p?p.matrix.f:Di.cellPad);return Up(_He(n,Tl.select(v.parentNode).select("."+Di.cn.cellTextHolder).node().getBoundingClientRect().width),M)}),n.settledY=!0}}}function _He(e,t){switch(e.align){case"left":return Di.cellPad;case"right":return e.column.columnWidth-(t||0)-Di.cellPad;case"center":return(e.column.columnWidth-(t||0))/2;default:return Di.cellPad}}function hj(e){e.attr("transform",function(t){var r=t.rowBlocks[0].auxiliaryBlocks.reduce(function(o,s){return o+CF(s,1/0)},0),i=uj(t),n=CF(i,t.key),a=n+r;return Up(0,a)}).selectAll("."+Di.cn.cellRect).attr("height",function(t){return LWt(uj(t),t.key).rowHeight})}function lj(e,t){for(var r=0,i=t-1;i>=0;i--)r+=CWt(e[i]);return r}function CF(e,t){for(var r=0,i=0;i<e.rows.length&&e.rows[i].rowIndex<t;i++)r+=e.rows[i].rowHeight;return r}function CWt(e){var t=e.allRowsHeight;if(t!==void 0)return t;for(var r=0,i=0;i<e.rows.length;i++)r+=e.rows[i].rowHeight;return e.allRowsHeight=r,r}function uj(e){return e.rowBlocks[e.page]}function LWt(e,t){return e.rows[t-e.firstRowIndex]}});var wHe=ne(PF=>{"use strict";var PWt=vc().getModuleCalcData,RWt=vj(),LF="table";PF.name=LF;PF.plot=function(e){var t=PWt(e.calcdata,LF)[0];t.length&&RWt(e,t)};PF.clean=function(e,t,r,i){var n=i._has&&i._has(LF),a=t._has&&t._has(LF);n&&!a&&i._paperdiv.selectAll(".table").remove()}});var AHe=ne((Fmr,THe)=>{"use strict";THe.exports={attributes:QZ(),supplyDefaults:JVe(),calc:$Ve(),plot:vj(),moduleType:"trace",name:"table",basePlotModule:wHe(),categories:["noOpacity"],meta:{}}});var SHe=ne((qmr,MHe)=>{"use strict";MHe.exports=AHe()});var LHe=ne((zmr,CHe)=>{"use strict";var dj=ll(),EHe=Ku(),pj=dc(),DWt=kl().descriptionWithDates,IWt=Xs().overrideAll,kHe=hc().dash,gj=oa().extendFlat;CHe.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:dj({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:pj.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:gj({},pj.labelalias,{editType:"calc"}),tickfont:dj({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:DWt("tick label")},tickformatstops:IWt(pj.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:EHe.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:gj({},kHe,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:gj({},kHe,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:EHe.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:dj({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}});var DF=ne((Omr,DHe)=>{"use strict";var FWt=ll(),PHe=LHe(),RHe=Ku(),RF=FWt({editType:"calc"});RF.family.dflt='"Open Sans", verdana, arial, sans-serif';RF.size.dflt=12;RF.color.dflt=RHe.defaultLine;DHe.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:PHe,baxis:PHe,font:RF,color:{valType:"color",dflt:RHe.defaultLine,editType:"plot"},transforms:void 0}});var qHe=ne((Bmr,FHe)=>{"use strict";var IHe=Wt().isArray1D;FHe.exports=function(t,r,i){var n=i("x"),a=n&&n.length,o=i("y"),s=o&&o.length;if(!a&&!s)return!1;if(r._cheater=!n,(!a||IHe(n))&&(!s||IHe(o))){var l=a?n.length:1/0;s&&(l=Math.min(l,o.length)),r.a&&r.a.length&&(l=Math.min(l,r.a.length)),r.b&&r.b.length&&(l=Math.min(l,r.b.length)),r._length=l}else r._length=null;return!0}});var BHe=ne((Nmr,OHe)=>{"use strict";var qWt=DF(),zHe=_i().addOpacity,zWt=wi(),N5=Wt(),OWt=hx(),BWt=im(),NWt=am(),UWt=dL(),VWt=B0(),HWt=m2();OHe.exports=function(t,r,i){var n=i.letter,a=i.font||{},o=qWt[n+"axis"];function s(g,C){return N5.coerce(t,r,o,g,C)}function l(g,C){return N5.coerce2(t,r,o,g,C)}i.name&&(r._name=i.name,r._id=i.name),s("autotypenumbers",i.autotypenumbersDflt);var u=s("type");if(u==="-"&&(i.data&&GWt(r,i.data),r.type==="-"?r.type="linear":u=t.type=r.type),s("smoothing"),s("cheatertype"),s("showticklabels"),s("labelprefix",n+" = "),s("labelsuffix"),s("showtickprefix"),s("showticksuffix"),s("separatethousands"),s("tickformat"),s("exponentformat"),s("minexponent"),s("showexponent"),s("categoryorder"),s("tickmode"),s("tickvals"),s("ticktext"),s("tick0"),s("dtick"),r.tickmode==="array"&&(s("arraytick0"),s("arraydtick")),s("labelpadding"),r._hovertitle=n,u==="date"){var f=zWt.getComponentMethod("calendars","handleDefaults");f(t,r,"calendar",i.calendar)}VWt(r,i.fullLayout),r.c2p=N5.identity;var c=s("color",i.dfltColor),h=c===t.color?c:a.color,v=s("title.text");v&&(N5.coerceFont(s,"title.font",{family:a.family,size:N5.bigFont(a.size),color:h}),s("title.offset")),s("tickangle");var d=s("autorange",!r.isValidRange(t.range));d&&s("rangemode"),s("range"),r.cleanRange(),s("fixedrange"),OWt(t,r,s,u),NWt(t,r,s,u,i),BWt(t,r,s,u,i),UWt(t,r,s,{data:i.data,dataAttr:n});var _=l("gridcolor",zHe(c,.3)),T=l("gridwidth"),p=l("griddash"),M=s("showgrid");M||(delete r.gridcolor,delete r.gridwidth,delete r.griddash);var b=l("startlinecolor",c),w=l("startlinewidth",T),k=s("startline",r.showgrid||!!b||!!w);k||(delete r.startlinecolor,delete r.startlinewidth);var x=l("endlinecolor",c),E=l("endlinewidth",T),S=s("endline",r.showgrid||!!x||!!E);return S||(delete r.endlinecolor,delete r.endlinewidth),M?(s("minorgridcount"),s("minorgridwidth",T),s("minorgriddash",p),s("minorgridcolor",zHe(_,.06)),r.minorgridcount||(delete r.minorgridwidth,delete r.minorgriddash,delete r.minorgridcolor)):(delete r.gridcolor,delete r.gridwidth,delete r.griddash),r.showticklabels==="none"&&(delete r.tickfont,delete r.tickangle,delete r.showexponent,delete r.exponentformat,delete r.minexponent,delete r.tickformat,delete r.showticksuffix,delete r.showtickprefix),r.showticksuffix||delete r.ticksuffix,r.showtickprefix||delete r.tickprefix,s("tickmode"),r};function GWt(e,t){if(e.type==="-"){var r=e._id,i=r.charAt(0),n=i+"calendar",a=e[n];e.type=HWt(t,a,{autotypenumbers:e.autotypenumbers})}}});var UHe=ne((Umr,NHe)=>{"use strict";var YWt=BHe(),WWt=So();NHe.exports=function(t,r,i,n,a){var o=n("a");o||(n("da"),n("a0"));var s=n("b");s||(n("db"),n("b0")),XWt(t,r,i,a)};function XWt(e,t,r,i){var n=["aaxis","baxis"];n.forEach(function(a){var o=a.charAt(0),s=e[a]||{},l=WWt.newContainer(t,a),u={noAutotickangles:!0,noTicklabelstep:!0,tickfont:"x",id:o+"axis",letter:o,font:t.font,name:a,data:e[o],calendar:t.calendar,dfltColor:i,bgColor:r.paper_bgcolor,autotypenumbersDflt:r.autotypenumbers,fullLayout:r};YWt(s,l,u),l._categories=l._categories||[],!e[a]&&s.type!=="-"&&(e[a]={type:s.type})})}});var GHe=ne((Vmr,HHe)=>{"use strict";var VHe=Wt(),ZWt=qHe(),jWt=UHe(),KWt=DF(),JWt=Ku();HHe.exports=function(t,r,i,n){function a(l,u){return VHe.coerce(t,r,KWt,l,u)}r._clipPathId="clip"+r.uid+"carpet";var o=a("color",JWt.defaultLine);if(VHe.coerceFont(a,"font"),a("carpet"),jWt(t,r,n,a,o),!r.a||!r.b){r.visible=!1;return}r.a.length<3&&(r.aaxis.smoothing=0),r.b.length<3&&(r.baxis.smoothing=0);var s=ZWt(t,r,a);s||(r.visible=!1),r._cheater&&a("cheaterslope")}});var yj=ne((Hmr,YHe)=>{"use strict";var QWt=Wt().isArrayOrTypedArray;YHe.exports=function(t,r,i){var n;for(QWt(t)?t.length>r.length&&(t=t.slice(0,r.length)):t=[],n=0;n<r.length;n++)t[n]=i(r[n]);return t}});var mj=ne((Gmr,WHe)=>{"use strict";WHe.exports=function(t,r,i){if(t.length===0)return"";var n,a=[],o=i?3:1;for(n=0;n<t.length;n+=o)a.push(t[n]+","+r[n]),i&&n<t.length-o&&(a.push("C"),a.push([t[n+1]+","+r[n+1],t[n+2]+","+r[n+2]+" "].join(" ")));return a.join(i?"":"L")}});var ZHe=ne((Ymr,XHe)=>{"use strict";XHe.exports=function(t,r,i,n,a,o){var s=a[0]*t.dpdx(r),l=a[1]*t.dpdy(i),u=1,f=1;if(o){var c=Math.sqrt(a[0]*a[0]+a[1]*a[1]),h=Math.sqrt(o[0]*o[0]+o[1]*o[1]),v=(a[0]*o[0]+a[1]*o[1])/c/h;f=Math.max(0,v)}var d=Math.atan2(l,s)*180/Math.PI;return d<-90?(d+=180,u=-u):d>90&&(d-=180,u=-u),{angle:d,flip:u,p:t.c2p(n,r,i),offsetMultplier:f}}});var rGe=ne((Wmr,tGe)=>{"use strict";var zF=Ai(),IF=aa(),FF=yj(),JHe=mj(),U5=ZHe(),xj=Es(),md=Wt(),QHe=md.strRotate,qF=md.strTranslate,$He=Tf();tGe.exports=function(t,r,i,n){var a=t._context.staticPlot,o=r.xaxis,s=r.yaxis,l=t._fullLayout,u=l._clips;md.makeTraceGroups(n,i,"trace").each(function(f){var c=zF.select(this),h=f[0],v=h.trace,d=v.aaxis,_=v.baxis,T=md.ensureSingle(c,"g","minorlayer"),p=md.ensureSingle(c,"g","majorlayer"),M=md.ensureSingle(c,"g","boundarylayer"),b=md.ensureSingle(c,"g","labellayer");c.style("opacity",v.opacity),bT(o,s,p,d,"a",d._gridlines,!0,a),bT(o,s,p,_,"b",_._gridlines,!0,a),bT(o,s,T,d,"a",d._minorgridlines,!0,a),bT(o,s,T,_,"b",_._minorgridlines,!0,a),bT(o,s,M,d,"a-boundary",d._boundarylines,a),bT(o,s,M,_,"b-boundary",_._boundarylines,a);var w=jHe(t,o,s,v,h,b,d._labels,"a-label"),k=jHe(t,o,s,v,h,b,_._labels,"b-label");eXt(t,b,v,h,o,s,w,k),$Wt(v,h,u,o,s)})};function $Wt(e,t,r,i,n){var a,o,s,l,u=r.select("#"+e._clipPathId);u.size()||(u=r.append("clipPath").classed("carpetclip",!0));var f=md.ensureSingle(u,"path","carpetboundary"),c=t.clipsegments,h=[];for(l=0;l<c.length;l++)a=c[l],o=FF([],a.x,i.c2p),s=FF([],a.y,n.c2p),h.push(JHe(o,s,a.bicubic));var v="M"+h.join("L")+"Z";u.attr("id",e._clipPathId),f.attr("d",v)}function bT(e,t,r,i,n,a,o){var s="const-"+n+"-lines",l=r.selectAll("."+s).data(a);l.enter().append("path").classed(s,!0).style("vector-effect",o?"none":"non-scaling-stroke"),l.each(function(u){var f=u,c=f.x,h=f.y,v=FF([],c,e.c2p),d=FF([],h,t.c2p),_="M"+JHe(v,d,f.smoothing),T=zF.select(this);T.attr("d",_).style("stroke-width",f.width).style("stroke",f.color).style("stroke-dasharray",IF.dashStyle(f.dash,f.width)).style("fill","none")}),l.exit().remove()}function jHe(e,t,r,i,n,a,o,s){var l=a.selectAll("text."+s).data(o);l.enter().append("text").classed(s,!0);var u=0,f={};return l.each(function(c,h){var v;if(c.axis.tickangle==="auto")v=U5(i,t,r,c.xy,c.dxy);else{var d=(c.axis.tickangle+180)*Math.PI/180;v=U5(i,t,r,c.xy,[Math.cos(d),Math.sin(d)])}h||(f={angle:v.angle,flip:v.flip});var _=(c.endAnchor?-1:1)*v.flip,T=zF.select(this).attr({"text-anchor":_>0?"start":"end","data-notex":1}).call(IF.font,c.font).text(c.text).call(xj.convertToTspans,e),p=IF.bBox(this);T.attr("transform",qF(v.p[0],v.p[1])+QHe(v.angle)+qF(c.axis.labelpadding*_,p.height*.3)),u=Math.max(u,p.width+c.axis.labelpadding)}),l.exit().remove(),f.maxExtent=u,f}function eXt(e,t,r,i,n,a,o,s){var l,u,f,c,h=md.aggNums(Math.min,null,r.a),v=md.aggNums(Math.max,null,r.a),d=md.aggNums(Math.min,null,r.b),_=md.aggNums(Math.max,null,r.b);l=.5*(h+v),u=d,f=r.ab2xy(l,u,!0),c=r.dxyda_rough(l,u),o.angle===void 0&&md.extendFlat(o,U5(r,n,a,f,r.dxydb_rough(l,u))),KHe(e,t,r,i,f,c,r.aaxis,n,a,o,"a-title"),l=h,u=.5*(d+_),f=r.ab2xy(l,u,!0),c=r.dxydb_rough(l,u),s.angle===void 0&&md.extendFlat(s,U5(r,n,a,f,r.dxyda_rough(l,u))),KHe(e,t,r,i,f,c,r.baxis,n,a,s,"b-title")}var eGe=$He.LINE_SPACING,tXt=(1-$He.MID_SHIFT)/eGe+1;function KHe(e,t,r,i,n,a,o,s,l,u,f){var c=[];o.title.text&&c.push(o.title.text);var h=t.selectAll("text."+f).data(c),v=u.maxExtent;h.enter().append("text").classed(f,!0),h.each(function(){var d=U5(r,s,l,n,a);["start","both"].indexOf(o.showticklabels)===-1&&(v=0);var _=o.title.font.size;v+=_+o.title.offset;var T=u.angle+(u.flip<0?180:0),p=(T-d.angle+450)%360,M=p>90&&p<270,b=zF.select(this);b.text(o.title.text).call(xj.convertToTspans,e),M&&(v=(-xj.lineCount(b)+tXt)*eGe*_-v),b.attr("transform",qF(d.p[0],d.p[1])+QHe(d.angle)+qF(0,v)).attr("text-anchor","middle").call(IF.font,o.title.font)}),h.exit().remove()}});var iGe=ne((Xmr,nGe)=>{"use strict";var OF=Wt().isArrayOrTypedArray;nGe.exports=function(e,t,r){var i,n,a,o,s,l,u=[],f=OF(e)?e.length:e,c=OF(t)?t.length:t,h=OF(e)?e:null,v=OF(t)?t:null;h&&(a=(h.length-1)/(h[h.length-1]-h[0])/(f-1)),v&&(o=(v.length-1)/(v[v.length-1]-v[0])/(c-1));var d,_=1/0,T=-1/0;for(n=0;n<c;n++)for(u[n]=[],l=v?(v[n]-v[0])*o:n/(c-1),i=0;i<f;i++)s=h?(h[i]-h[0])*a:i/(f-1),d=s-l*r,_=Math.min(d,_),T=Math.max(d,T),u[n][i]=d;var p=1/(T-_),M=-_*p;for(n=0;n<c;n++)for(i=0;i<f;i++)u[n][i]=p*u[n][i]+M;return u}});var lGe=ne((Zmr,sGe)=>{"use strict";var aGe=Wt().isArrayOrTypedArray;sGe.exports=function(e){return oGe(e,0)};function oGe(e,t){if(!aGe(e)||t>=10)return null;for(var r=1/0,i=-1/0,n=e.length,a=0;a<n;a++){var o=e[a];if(aGe(o)){var s=oGe(o,t+1);s&&(r=Math.min(s[0],r),i=Math.max(s[1],i))}else r=Math.min(o,r),i=Math.max(o,i)}return[r,i]}});var fGe=ne((jmr,uGe)=>{"use strict";var rXt=Xi(),L1=oa().extendFlat;uGe.exports=function(t,r,i){var n,a,o,s,l,u,f,c,h,v,d,_,T,p,M=t["_"+r],b=t[r+"axis"],w=b._gridlines=[],k=b._minorgridlines=[],x=b._boundarylines=[],E=t["_"+i],S=t[i+"axis"];b.tickmode==="array"&&(b.tickvals=M.slice());var g=t._xctrl,C=t._yctrl,A=g[0].length,P=g.length,D=t._a.length,z=t._b.length;rXt.prepTicks(b),b.tickmode==="array"&&delete b.tickvals;var O=b.smoothing?3:1;function V(F){var N,Z,J,re,ue,fe,K,X,ae,oe,me,xe,ce=[],ie=[],ge={};if(r==="b")for(Z=t.b2j(F),J=Math.floor(Math.max(0,Math.min(z-2,Z))),re=Z-J,ge.length=z,ge.crossLength=D,ge.xy=function(le){return t.evalxy([],le,Z)},ge.dxy=function(le,we){return t.dxydi([],le,J,we,re)},N=0;N<D;N++)fe=Math.min(D-2,N),K=N-fe,X=t.evalxy([],N,Z),S.smoothing&&N>0&&(ae=t.dxydi([],N-1,J,0,re),ce.push(ue[0]+ae[0]/3),ie.push(ue[1]+ae[1]/3),oe=t.dxydi([],N-1,J,1,re),ce.push(X[0]-oe[0]/3),ie.push(X[1]-oe[1]/3)),ce.push(X[0]),ie.push(X[1]),ue=X;else for(N=t.a2i(F),fe=Math.floor(Math.max(0,Math.min(D-2,N))),K=N-fe,ge.length=D,ge.crossLength=z,ge.xy=function(le){return t.evalxy([],N,le)},ge.dxy=function(le,we){return t.dxydj([],fe,le,K,we)},Z=0;Z<z;Z++)J=Math.min(z-2,Z),re=Z-J,X=t.evalxy([],N,Z),S.smoothing&&Z>0&&(me=t.dxydj([],fe,Z-1,K,0),ce.push(ue[0]+me[0]/3),ie.push(ue[1]+me[1]/3),xe=t.dxydj([],fe,Z-1,K,1),ce.push(X[0]-xe[0]/3),ie.push(X[1]-xe[1]/3)),ce.push(X[0]),ie.push(X[1]),ue=X;return ge.axisLetter=r,ge.axis=b,ge.crossAxis=S,ge.value=F,ge.constvar=i,ge.index=c,ge.x=ce,ge.y=ie,ge.smoothing=S.smoothing,ge}function B(F){var N,Z,J,re,ue,fe=[],K=[],X={};if(X.length=M.length,X.crossLength=E.length,r==="b")for(J=Math.max(0,Math.min(z-2,F)),ue=Math.min(1,Math.max(0,F-J)),X.xy=function(ae){return t.evalxy([],ae,F)},X.dxy=function(ae,oe){return t.dxydi([],ae,J,oe,ue)},N=0;N<A;N++)fe[N]=g[F*O][N],K[N]=C[F*O][N];else for(Z=Math.max(0,Math.min(D-2,F)),re=Math.min(1,Math.max(0,F-Z)),X.xy=function(ae){return t.evalxy([],F,ae)},X.dxy=function(ae,oe){return t.dxydj([],Z,ae,re,oe)},N=0;N<P;N++)fe[N]=g[N][F*O],K[N]=C[N][F*O];return X.axisLetter=r,X.axis=b,X.crossAxis=S,X.value=M[F],X.constvar=i,X.index=F,X.x=fe,X.y=K,X.smoothing=S.smoothing,X}if(b.tickmode==="array"){for(s=5e-15,l=[Math.floor((M.length-1-b.arraytick0)/b.arraydtick*(1+s)),Math.ceil(-b.arraytick0/b.arraydtick/(1+s))].sort(function(F,N){return F-N}),u=l[0]-1,f=l[1]+1,c=u;c<f;c++)a=b.arraytick0+b.arraydtick*c,!(a<0||a>M.length-1)&&w.push(L1(B(a),{color:b.gridcolor,width:b.gridwidth,dash:b.griddash}));for(c=u;c<f;c++)if(o=b.arraytick0+b.arraydtick*c,d=Math.min(o+b.arraydtick,M.length-1),!(o<0||o>M.length-1)&&!(d<0||d>M.length-1))for(_=M[o],T=M[d],n=0;n<b.minorgridcount;n++)p=d-o,!(p<=0)&&(v=_+(T-_)*(n+1)/(b.minorgridcount+1)*(b.arraydtick/p),!(v<M[0]||v>M[M.length-1])&&k.push(L1(V(v),{color:b.minorgridcolor,width:b.minorgridwidth,dash:b.minorgriddash})));b.startline&&x.push(L1(B(0),{color:b.startlinecolor,width:b.startlinewidth})),b.endline&&x.push(L1(B(M.length-1),{color:b.endlinecolor,width:b.endlinewidth}))}else{for(s=5e-15,l=[Math.floor((M[M.length-1]-b.tick0)/b.dtick*(1+s)),Math.ceil((M[0]-b.tick0)/b.dtick/(1+s))].sort(function(F,N){return F-N}),u=l[0],f=l[1],c=u;c<=f;c++)h=b.tick0+b.dtick*c,w.push(L1(V(h),{color:b.gridcolor,width:b.gridwidth,dash:b.griddash}));for(c=u-1;c<f+1;c++)for(h=b.tick0+b.dtick*c,n=0;n<b.minorgridcount;n++)v=h+b.dtick*(n+1)/(b.minorgridcount+1),!(v<M[0]||v>M[M.length-1])&&k.push(L1(V(v),{color:b.minorgridcolor,width:b.minorgridwidth,dash:b.minorgriddash}));b.startline&&x.push(L1(V(M[0]),{color:b.startlinecolor,width:b.startlinewidth})),b.endline&&x.push(L1(V(M[M.length-1]),{color:b.endlinecolor,width:b.endlinewidth}))}}});var dGe=ne((Kmr,vGe)=>{"use strict";var cGe=Xi(),hGe=oa().extendFlat;vGe.exports=function(t,r){var i,n,a,o,s,l=r._labels=[],u=r._gridlines;for(i=0;i<u.length;i++)s=u[i],["start","both"].indexOf(r.showticklabels)!==-1&&(n=cGe.tickText(r,s.value),hGe(n,{prefix:a,suffix:o,endAnchor:!0,xy:s.xy(0),dxy:s.dxy(0,0),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:i===0,isLast:i===u.length-1}),l.push(n)),["end","both"].indexOf(r.showticklabels)!==-1&&(n=cGe.tickText(r,s.value),hGe(n,{endAnchor:!1,xy:s.xy(s.crossLength-1),dxy:s.dxy(s.crossLength-2,1),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:i===0,isLast:i===u.length-1}),l.push(n))}});var gGe=ne((Jmr,pGe)=>{"use strict";pGe.exports=function(t,r,i,n){var a,o,s,l=[],u=!!i.smoothing,f=!!n.smoothing,c=t[0].length-1,h=t.length-1;for(a=0,o=[],s=[];a<=c;a++)o[a]=t[0][a],s[a]=r[0][a];for(l.push({x:o,y:s,bicubic:u}),a=0,o=[],s=[];a<=h;a++)o[a]=t[a][c],s[a]=r[a][c];for(l.push({x:o,y:s,bicubic:f}),a=c,o=[],s=[];a>=0;a--)o[c-a]=t[h][a],s[c-a]=r[h][a];for(l.push({x:o,y:s,bicubic:u}),a=h,o=[],s=[];a>=0;a--)o[h-a]=t[a][0],s[h-a]=r[a][0];return l.push({x:o,y:s,bicubic:f}),l}});var mGe=ne((Qmr,yGe)=>{"use strict";var nXt=Wt();yGe.exports=function(t,r,i){var n,a,o,s=[],l=[],u=t[0].length,f=t.length;function c(J,re){var ue=0,fe,K=0;return J>0&&(fe=t[re][J-1])!==void 0&&(K++,ue+=fe),J<u-1&&(fe=t[re][J+1])!==void 0&&(K++,ue+=fe),re>0&&(fe=t[re-1][J])!==void 0&&(K++,ue+=fe),re<f-1&&(fe=t[re+1][J])!==void 0&&(K++,ue+=fe),ue/Math.max(1,K)}var h=0;for(n=0;n<u;n++)for(a=0;a<f;a++)t[a][n]===void 0&&(s.push(n),l.push(a),t[a][n]=c(n,a)),h=Math.max(h,Math.abs(t[a][n]));if(!s.length)return t;var v,d,_,T,p,M,b,w,k,x,E,S=1e-5,g=0,C=100,A=0,P=s.length;do{for(g=0,o=0;o<P;o++){n=s[o],a=l[o];var D=0,z=0,O,V,B,F,N,Z;n===0?(N=Math.min(u-1,2),B=r[N],F=r[1],O=t[a][N],V=t[a][1],z+=V+(V-O)*(r[0]-F)/(F-B),D++):n===u-1&&(N=Math.max(0,u-3),B=r[N],F=r[u-2],O=t[a][N],V=t[a][u-2],z+=V+(V-O)*(r[u-1]-F)/(F-B),D++),(n===0||n===u-1)&&a>0&&a<f-1&&(v=i[a+1]-i[a],d=i[a]-i[a-1],z+=(d*t[a+1][n]+v*t[a-1][n])/(d+v),D++),a===0?(Z=Math.min(f-1,2),B=i[Z],F=i[1],O=t[Z][n],V=t[1][n],z+=V+(V-O)*(i[0]-F)/(F-B),D++):a===f-1&&(Z=Math.max(0,f-3),B=i[Z],F=i[f-2],O=t[Z][n],V=t[f-2][n],z+=V+(V-O)*(i[f-1]-F)/(F-B),D++),(a===0||a===f-1)&&n>0&&n<u-1&&(v=r[n+1]-r[n],d=r[n]-r[n-1],z+=(d*t[a][n+1]+v*t[a][n-1])/(d+v),D++),D?z/=D:(_=r[n+1]-r[n],T=r[n]-r[n-1],p=i[a+1]-i[a],M=i[a]-i[a-1],b=_*T*(_+T),w=p*M*(p+M),z=(b*(M*t[a+1][n]+p*t[a-1][n])+w*(T*t[a][n+1]+_*t[a][n-1]))/(w*(T+_)+b*(M+p))),k=z-t[a][n],x=k/h,g+=x*x,E=D?0:.85,t[a][n]+=k*(1+E)}g=Math.sqrt(g)}while(A++<C&&g>S);return nXt.log("Smoother converged to",g,"after",A,"iterations"),t}});var _Ge=ne(($mr,xGe)=>{"use strict";xGe.exports={RELATIVE_CULL_TOLERANCE:1e-6}});var TGe=ne((e1r,wGe)=>{"use strict";var bGe=.5;wGe.exports=function(t,r,i,n){var a=t[0]-r[0],o=t[1]-r[1],s=i[0]-r[0],l=i[1]-r[1],u=Math.pow(a*a+o*o,bGe/2),f=Math.pow(s*s+l*l,bGe/2),c=(f*f*a-u*u*s)*n,h=(f*f*o-u*u*l)*n,v=f*(u+f)*3,d=u*(u+f)*3;return[[r[0]+(v&&c/v),r[1]+(v&&h/v)],[r[0]-(d&&c/d),r[1]-(d&&h/d)]]}});var MGe=ne((t1r,AGe)=>{"use strict";var _j=TGe(),BF=Wt().ensureArray;function wT(e,t,r){var i=-.5*r[0]+1.5*t[0],n=-.5*r[1]+1.5*t[1];return[(2*i+e[0])/3,(2*n+e[1])/3]}AGe.exports=function(t,r,i,n,a,o){var s,l,u,f,c,h,v,d,_,T,p=i[0].length,M=i.length,b=a?3*p-2:p,w=o?3*M-2:M;for(t=BF(t,w),r=BF(r,w),u=0;u<w;u++)t[u]=BF(t[u],b),r[u]=BF(r[u],b);for(l=0,f=0;l<M;l++,f+=o?3:1)for(c=t[f],h=r[f],v=i[l],d=n[l],s=0,u=0;s<p;s++,u+=a?3:1)c[u]=v[s],h[u]=d[s];if(a)for(l=0,f=0;l<M;l++,f+=o?3:1){for(s=1,u=3;s<p-1;s++,u+=3)_=_j([i[l][s-1],n[l][s-1]],[i[l][s],n[l][s]],[i[l][s+1],n[l][s+1]],a),t[f][u-1]=_[0][0],r[f][u-1]=_[0][1],t[f][u+1]=_[1][0],r[f][u+1]=_[1][1];T=wT([t[f][0],r[f][0]],[t[f][2],r[f][2]],[t[f][3],r[f][3]]),t[f][1]=T[0],r[f][1]=T[1],T=wT([t[f][b-1],r[f][b-1]],[t[f][b-3],r[f][b-3]],[t[f][b-4],r[f][b-4]]),t[f][b-2]=T[0],r[f][b-2]=T[1]}if(o)for(u=0;u<b;u++){for(f=3;f<w-3;f+=3)_=_j([t[f-3][u],r[f-3][u]],[t[f][u],r[f][u]],[t[f+3][u],r[f+3][u]],o),t[f-1][u]=_[0][0],r[f-1][u]=_[0][1],t[f+1][u]=_[1][0],r[f+1][u]=_[1][1];T=wT([t[0][u],r[0][u]],[t[2][u],r[2][u]],[t[3][u],r[3][u]]),t[1][u]=T[0],r[1][u]=T[1],T=wT([t[w-1][u],r[w-1][u]],[t[w-3][u],r[w-3][u]],[t[w-4][u],r[w-4][u]]),t[w-2][u]=T[0],r[w-2][u]=T[1]}if(a&&o)for(f=1;f<w;f+=(f+1)%3===0?2:1){for(u=3;u<b-3;u+=3)_=_j([t[f][u-3],r[f][u-3]],[t[f][u],r[f][u]],[t[f][u+3],r[f][u+3]],a),t[f][u-1]=.5*(t[f][u-1]+_[0][0]),r[f][u-1]=.5*(r[f][u-1]+_[0][1]),t[f][u+1]=.5*(t[f][u+1]+_[1][0]),r[f][u+1]=.5*(r[f][u+1]+_[1][1]);T=wT([t[f][0],r[f][0]],[t[f][2],r[f][2]],[t[f][3],r[f][3]]),t[f][1]=.5*(t[f][1]+T[0]),r[f][1]=.5*(r[f][1]+T[1]),T=wT([t[f][b-1],r[f][b-1]],[t[f][b-3],r[f][b-3]],[t[f][b-4],r[f][b-4]]),t[f][b-2]=.5*(t[f][b-2]+T[0]),r[f][b-2]=.5*(r[f][b-2]+T[1])}return[t,r]}});var EGe=ne((r1r,SGe)=>{"use strict";SGe.exports=function(e,t,r,i,n){var a=t-2,o=r-2;return i&&n?function(s,l,u){s||(s=[]);var f,c,h,v,d,_,T=Math.max(0,Math.min(Math.floor(l),a)),p=Math.max(0,Math.min(Math.floor(u),o)),M=Math.max(0,Math.min(1,l-T)),b=Math.max(0,Math.min(1,u-p));T*=3,p*=3;var w=M*M,k=w*M,x=1-M,E=x*x,S=E*x,g=b*b,C=g*b,A=1-b,P=A*A,D=P*A;for(_=0;_<e.length;_++)d=e[_],f=S*d[p][T]+3*(E*M*d[p][T+1]+x*w*d[p][T+2])+k*d[p][T+3],c=S*d[p+1][T]+3*(E*M*d[p+1][T+1]+x*w*d[p+1][T+2])+k*d[p+1][T+3],h=S*d[p+2][T]+3*(E*M*d[p+2][T+1]+x*w*d[p+2][T+2])+k*d[p+2][T+3],v=S*d[p+3][T]+3*(E*M*d[p+3][T+1]+x*w*d[p+3][T+2])+k*d[p+3][T+3],s[_]=D*f+3*(P*b*c+A*g*h)+C*v;return s}:i?function(s,l,u){s||(s=[]);var f=Math.max(0,Math.min(Math.floor(l),a)),c=Math.max(0,Math.min(Math.floor(u),o)),h=Math.max(0,Math.min(1,l-f)),v=Math.max(0,Math.min(1,u-c)),d,_,T,p,M,b;f*=3;var w=h*h,k=w*h,x=1-h,E=x*x,S=E*x,g=1-v;for(M=0;M<e.length;M++)b=e[M],d=g*b[c][f]+v*b[c+1][f],_=g*b[c][f+1]+v*b[c+1][f+1],T=g*b[c][f+2]+v*b[c+1][f+1],p=g*b[c][f+3]+v*b[c+1][f+1],s[M]=S*d+3*(E*h*_+x*w*T)+k*p;return s}:n?function(s,l,u){s||(s=[]);var f=Math.max(0,Math.min(Math.floor(l),a)),c=Math.max(0,Math.min(Math.floor(u),o)),h=Math.max(0,Math.min(1,l-f)),v=Math.max(0,Math.min(1,u-c)),d,_,T,p,M,b;c*=3;var w=v*v,k=w*v,x=1-v,E=x*x,S=E*x,g=1-h;for(M=0;M<e.length;M++)b=e[M],d=g*b[c][f]+h*b[c][f+1],_=g*b[c+1][f]+h*b[c+1][f+1],T=g*b[c+2][f]+h*b[c+2][f+1],p=g*b[c+3][f]+h*b[c+3][f+1],s[M]=S*d+3*(E*v*_+x*w*T)+k*p;return s}:function(s,l,u){s||(s=[]);var f=Math.max(0,Math.min(Math.floor(l),a)),c=Math.max(0,Math.min(Math.floor(u),o)),h=Math.max(0,Math.min(1,l-f)),v=Math.max(0,Math.min(1,u-c)),d,_,T,p,M=1-v,b=1-h;for(T=0;T<e.length;T++)p=e[T],d=b*p[c][f]+h*p[c][f+1],_=b*p[c+1][f]+h*p[c+1][f+1],s[T]=M*d+v*_;return s}}});var CGe=ne((n1r,kGe)=>{"use strict";kGe.exports=function(e,t,r){return t&&r?function(i,n,a,o,s){i||(i=[]);var l,u,f,c,h,v;n*=3,a*=3;var d=o*o,_=1-o,T=_*_,p=_*o*2,M=-3*T,b=3*(T-p),w=3*(p-d),k=3*d,x=s*s,E=x*s,S=1-s,g=S*S,C=g*S;for(v=0;v<e.length;v++)h=e[v],l=M*h[a][n]+b*h[a][n+1]+w*h[a][n+2]+k*h[a][n+3],u=M*h[a+1][n]+b*h[a+1][n+1]+w*h[a+1][n+2]+k*h[a+1][n+3],f=M*h[a+2][n]+b*h[a+2][n+1]+w*h[a+2][n+2]+k*h[a+2][n+3],c=M*h[a+3][n]+b*h[a+3][n+1]+w*h[a+3][n+2]+k*h[a+3][n+3],i[v]=C*l+3*(g*s*u+S*x*f)+E*c;return i}:t?function(i,n,a,o,s){i||(i=[]);var l,u,f,c;n*=3;var h=o*o,v=1-o,d=v*v,_=v*o*2,T=-3*d,p=3*(d-_),M=3*(_-h),b=3*h,w=1-s;for(f=0;f<e.length;f++)c=e[f],l=T*c[a][n]+p*c[a][n+1]+M*c[a][n+2]+b*c[a][n+3],u=T*c[a+1][n]+p*c[a+1][n+1]+M*c[a+1][n+2]+b*c[a+1][n+3],i[f]=w*l+s*u;return i}:r?function(i,n,a,o,s){i||(i=[]);var l,u,f,c,h,v;a*=3;var d=s*s,_=d*s,T=1-s,p=T*T,M=p*T;for(h=0;h<e.length;h++)v=e[h],l=v[a][n+1]-v[a][n],u=v[a+1][n+1]-v[a+1][n],f=v[a+2][n+1]-v[a+2][n],c=v[a+3][n+1]-v[a+3][n],i[h]=M*l+3*(p*s*u+T*d*f)+_*c;return i}:function(i,n,a,o,s){i||(i=[]);var l,u,f,c,h=1-s;for(f=0;f<e.length;f++)c=e[f],l=c[a][n+1]-c[a][n],u=c[a+1][n+1]-c[a+1][n],i[f]=h*l+s*u;return i}}});var PGe=ne((i1r,LGe)=>{"use strict";LGe.exports=function(e,t,r){return t&&r?function(i,n,a,o,s){i||(i=[]);var l,u,f,c,h,v;n*=3,a*=3;var d=o*o,_=d*o,T=1-o,p=T*T,M=p*T,b=s*s,w=1-s,k=w*w,x=w*s*2,E=-3*k,S=3*(k-x),g=3*(x-b),C=3*b;for(v=0;v<e.length;v++)h=e[v],l=E*h[a][n]+S*h[a+1][n]+g*h[a+2][n]+C*h[a+3][n],u=E*h[a][n+1]+S*h[a+1][n+1]+g*h[a+2][n+1]+C*h[a+3][n+1],f=E*h[a][n+2]+S*h[a+1][n+2]+g*h[a+2][n+2]+C*h[a+3][n+2],c=E*h[a][n+3]+S*h[a+1][n+3]+g*h[a+2][n+3]+C*h[a+3][n+3],i[v]=M*l+3*(p*o*u+T*d*f)+_*c;return i}:t?function(i,n,a,o,s){i||(i=[]);var l,u,f,c,h,v;n*=3;var d=s*s,_=d*s,T=1-s,p=T*T,M=p*T;for(h=0;h<e.length;h++)v=e[h],l=v[a+1][n]-v[a][n],u=v[a+1][n+1]-v[a][n+1],f=v[a+1][n+2]-v[a][n+2],c=v[a+1][n+3]-v[a][n+3],i[h]=M*l+3*(p*s*u+T*d*f)+_*c;return i}:r?function(i,n,a,o,s){i||(i=[]);var l,u,f,c;a*=3;var h=1-o,v=s*s,d=1-s,_=d*d,T=d*s*2,p=-3*_,M=3*(_-T),b=3*(T-v),w=3*v;for(f=0;f<e.length;f++)c=e[f],l=p*c[a][n]+M*c[a+1][n]+b*c[a+2][n]+w*c[a+3][n],u=p*c[a][n+1]+M*c[a+1][n+1]+b*c[a+2][n+1]+w*c[a+3][n+1],i[f]=h*l+o*u;return i}:function(i,n,a,o,s){i||(i=[]);var l,u,f,c,h=1-o;for(f=0;f<e.length;f++)c=e[f],l=c[a+1][n]-c[a][n],u=c[a+1][n+1]-c[a][n+1],i[f]=h*l+o*u;return i}}});var FGe=ne((a1r,IGe)=>{"use strict";var RGe=_Ge(),DGe=Kk().findBin,iXt=MGe(),aXt=EGe(),oXt=CGe(),sXt=PGe();IGe.exports=function(t){var r=t._a,i=t._b,n=r.length,a=i.length,o=t.aaxis,s=t.baxis,l=r[0],u=r[n-1],f=i[0],c=i[a-1],h=r[r.length-1]-r[0],v=i[i.length-1]-i[0],d=h*RGe.RELATIVE_CULL_TOLERANCE,_=v*RGe.RELATIVE_CULL_TOLERANCE;l-=d,u+=d,f-=_,c+=_,t.isVisible=function(T,p){return T>l&&T<u&&p>f&&p<c},t.isOccluded=function(T,p){return T<l||T>u||p<f||p>c},t.setScale=function(){var T=t._x,p=t._y,M=iXt(t._xctrl,t._yctrl,T,p,o.smoothing,s.smoothing);t._xctrl=M[0],t._yctrl=M[1],t.evalxy=aXt([t._xctrl,t._yctrl],n,a,o.smoothing,s.smoothing),t.dxydi=oXt([t._xctrl,t._yctrl],o.smoothing,s.smoothing),t.dxydj=sXt([t._xctrl,t._yctrl],o.smoothing,s.smoothing)},t.i2a=function(T){var p=Math.max(0,Math.floor(T[0]),n-2),M=T[0]-p;return(1-M)*r[p]+M*r[p+1]},t.j2b=function(T){var p=Math.max(0,Math.floor(T[1]),n-2),M=T[1]-p;return(1-M)*i[p]+M*i[p+1]},t.ij2ab=function(T){return[t.i2a(T[0]),t.j2b(T[1])]},t.a2i=function(T){var p=Math.max(0,Math.min(DGe(T,r),n-2)),M=r[p],b=r[p+1];return Math.max(0,Math.min(n-1,p+(T-M)/(b-M)))},t.b2j=function(T){var p=Math.max(0,Math.min(DGe(T,i),a-2)),M=i[p],b=i[p+1];return Math.max(0,Math.min(a-1,p+(T-M)/(b-M)))},t.ab2ij=function(T){return[t.a2i(T[0]),t.b2j(T[1])]},t.i2c=function(T,p){return t.evalxy([],T,p)},t.ab2xy=function(T,p,M){if(!M&&(T<r[0]||T>r[n-1]|p<i[0]||p>i[a-1]))return[!1,!1];var b=t.a2i(T),w=t.b2j(p),k=t.evalxy([],b,w);if(M){var x=0,E=0,S=[],g,C,A,P;T<r[0]?(g=0,C=0,x=(T-r[0])/(r[1]-r[0])):T>r[n-1]?(g=n-2,C=1,x=(T-r[n-1])/(r[n-1]-r[n-2])):(g=Math.max(0,Math.min(n-2,Math.floor(b))),C=b-g),p<i[0]?(A=0,P=0,E=(p-i[0])/(i[1]-i[0])):p>i[a-1]?(A=a-2,P=1,E=(p-i[a-1])/(i[a-1]-i[a-2])):(A=Math.max(0,Math.min(a-2,Math.floor(w))),P=w-A),x&&(t.dxydi(S,g,A,C,P),k[0]+=S[0]*x,k[1]+=S[1]*x),E&&(t.dxydj(S,g,A,C,P),k[0]+=S[0]*E,k[1]+=S[1]*E)}return k},t.c2p=function(T,p,M){return[p.c2p(T[0]),M.c2p(T[1])]},t.p2x=function(T,p,M){return[p.p2c(T[0]),M.p2c(T[1])]},t.dadi=function(T){var p=Math.max(0,Math.min(r.length-2,T));return r[p+1]-r[p]},t.dbdj=function(T){var p=Math.max(0,Math.min(i.length-2,T));return i[p+1]-i[p]},t.dxyda=function(T,p,M,b){var w=t.dxydi(null,T,p,M,b),k=t.dadi(T,M);return[w[0]/k,w[1]/k]},t.dxydb=function(T,p,M,b){var w=t.dxydj(null,T,p,M,b),k=t.dbdj(p,b);return[w[0]/k,w[1]/k]},t.dxyda_rough=function(T,p,M){var b=h*(M||.1),w=t.ab2xy(T+b,p,!0),k=t.ab2xy(T-b,p,!0);return[(w[0]-k[0])*.5/b,(w[1]-k[1])*.5/b]},t.dxydb_rough=function(T,p,M){var b=v*(M||.1),w=t.ab2xy(T,p+b,!0),k=t.ab2xy(T,p-b,!0);return[(w[0]-k[0])*.5/b,(w[1]-k[1])*.5/b]},t.dpdx=function(T){return T._m},t.dpdy=function(T){return T._m}}});var HGe=ne((o1r,VGe)=>{"use strict";var NF=Xi(),qGe=Wt().isArray1D,lXt=iGe(),zGe=lGe(),OGe=fGe(),BGe=dGe(),uXt=gGe(),NGe=hP(),UGe=mGe(),fXt=fP(),cXt=FGe();VGe.exports=function(t,r){var i=NF.getFromId(t,r.xaxis),n=NF.getFromId(t,r.yaxis),a=r.aaxis,o=r.baxis,s=r.x,l=r.y,u=[];s&&qGe(s)&&u.push("x"),l&&qGe(l)&&u.push("y"),u.length&&fXt(r,a,o,"a","b",u);var f=r._a=r._a||r.a,c=r._b=r._b||r.b;s=r._x||r.x,l=r._y||r.y;var h={};if(r._cheater){var v=a.cheatertype==="index"?f.length:f,d=o.cheatertype==="index"?c.length:c;s=lXt(v,d,r.cheaterslope)}r._x=s=NGe(s),r._y=l=NGe(l),UGe(s,f,c),UGe(l,f,c),cXt(r),r.setScale();var _=zGe(s),T=zGe(l),p=.5*(_[1]-_[0]),M=.5*(_[1]+_[0]),b=.5*(T[1]-T[0]),w=.5*(T[1]+T[0]),k=1.3;return _=[M-p*k,M+p*k],T=[w-b*k,w+b*k],r._extremes[i._id]=NF.findExtremes(i,_,{padded:!0}),r._extremes[n._id]=NF.findExtremes(n,T,{padded:!0}),OGe(r,"a","b"),OGe(r,"b","a"),BGe(r,a),BGe(r,o),h.clipsegments=uXt(r._xctrl,r._yctrl,a,o),h.x=s,h.y=l,h.a=f,h.b=c,[h]}});var YGe=ne((s1r,GGe)=>{"use strict";GGe.exports={attributes:DF(),supplyDefaults:GHe(),plot:rGe(),calc:HGe(),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:vu(),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}});var XGe=ne((l1r,WGe)=>{"use strict";WGe.exports=YGe()});var bj=ne((u1r,jGe)=>{"use strict";var hXt=Y0(),Hp=cu(),vXt=es(),dXt=Ba().hovertemplateAttrs,pXt=Ba().texttemplateAttrs,ZGe=Ps(),P1=oa().extendFlat,Vp=Hp.marker,TT=Hp.line,gXt=Vp.line;jGe.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:P1({},Hp.mode,{dflt:"markers"}),text:P1({},Hp.text,{}),texttemplate:pXt({editType:"plot"},{keys:["a","b","text"]}),hovertext:P1({},Hp.hovertext,{}),line:{color:TT.color,width:TT.width,dash:TT.dash,backoff:TT.backoff,shape:P1({},TT.shape,{values:["linear","spline"]}),smoothing:TT.smoothing,editType:"calc"},connectgaps:Hp.connectgaps,fill:P1({},Hp.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:hXt(),marker:P1({symbol:Vp.symbol,opacity:Vp.opacity,maxdisplayed:Vp.maxdisplayed,angle:Vp.angle,angleref:Vp.angleref,standoff:Vp.standoff,size:Vp.size,sizeref:Vp.sizeref,sizemin:Vp.sizemin,sizemode:Vp.sizemode,line:P1({width:gXt.width,editType:"calc"},ZGe("marker.line")),gradient:Vp.gradient,editType:"calc"},ZGe("marker")),textfont:Hp.textfont,textposition:Hp.textposition,selected:Hp.selected,unselected:Hp.unselected,hoverinfo:P1({},vXt.hoverinfo,{flags:["a","b","text","name"]}),hoveron:Hp.hoveron,hovertemplate:dXt()}});var $Ge=ne((f1r,QGe)=>{"use strict";var KGe=Wt(),yXt=G0(),AT=js(),mXt=dp(),xXt=s0(),JGe=B2(),_Xt=l0(),bXt=X0(),wXt=bj();QGe.exports=function(t,r,i,n){function a(h,v){return KGe.coerce(t,r,wXt,h,v)}a("carpet"),r.xaxis="x",r.yaxis="y";var o=a("a"),s=a("b"),l=Math.min(o.length,s.length);if(!l){r.visible=!1;return}r._length=l,a("text"),a("texttemplate"),a("hovertext");var u=l<yXt.PTS_LINESONLY?"lines+markers":"lines";a("mode",u),AT.hasMarkers(r)&&mXt(t,r,i,n,a,{gradient:!0}),AT.hasLines(r)&&(xXt(t,r,i,n,a,{backoff:!0}),JGe(t,r,a),a("connectgaps")),AT.hasText(r)&&_Xt(t,r,n,a);var f=[];(AT.hasMarkers(r)||AT.hasText(r))&&(a("marker.maxdisplayed"),f.push("points")),a("fill"),r.fill!=="none"&&(bXt(t,r,i,a),AT.hasLines(r)||JGe(t,r,a)),(r.fill==="tonext"||r.fill==="toself")&&f.push("fills");var c=a("hoveron",f.join("+")||"points");c!=="fills"&&a("hovertemplate"),KGe.coerceSelectionMarkerOpacity(r,a)}});var tYe=ne((c1r,eYe)=>{"use strict";eYe.exports=function(t,r){var i={},n=r._carpet,a=n.ab2ij([t.a,t.b]),o=Math.floor(a[0]),s=a[0]-o,l=Math.floor(a[1]),u=a[1]-l,f=n.evalxy([],o,l,s,u);return i.yLabel=f[1].toFixed(3),i}});var UF=ne((h1r,rYe)=>{"use strict";rYe.exports=function(e,t){for(var r=e._fullData.length,i,n=0;n<r;n++){var a=e._fullData[n];if(a.index!==t.index&&a.type==="carpet"&&(i||(i=a),a.carpet===t.carpet))return a}return i}});var aYe=ne((v1r,iYe)=>{"use strict";var nYe=la(),TXt=pp(),AXt=Z0(),MXt=gp(),SXt=yp().calcMarkerSize,EXt=UF();iYe.exports=function(t,r){var i=r._carpetTrace=EXt(t,r);if(!(!i||!i.visible||i.visible==="legendonly")){var n;r.xaxis=i.xaxis,r.yaxis=i.yaxis;var a=r._length,o=new Array(a),s,l,u=!1;for(n=0;n<a;n++)if(s=r.a[n],l=r.b[n],nYe(s)&&nYe(l)){var f=i.ab2xy(+s,+l,!0),c=i.isVisible(+s,+l);c||(u=!0),o[n]={x:f[0],y:f[1],a:s,b:l,vis:c}}else o[n]={x:!1,y:!1};return r._needsCull=u,o[0].carpet=i,o[0].trace=r,SXt(r,a),TXt(t,r),AXt(o,r),MXt(o,r),o}}});var lYe=ne((d1r,sYe)=>{"use strict";var kXt=Y2(),oYe=Xi(),CXt=aa();sYe.exports=function(t,r,i,n){var a,o,s,l=i[0][0].carpet,u=oYe.getFromId(t,l.xaxis||"x"),f=oYe.getFromId(t,l.yaxis||"y"),c={xaxis:u,yaxis:f,plot:r.plot};for(a=0;a<i.length;a++)o=i[a][0].trace,o._xA=u,o._yA=f;for(kXt(t,c,i,n),a=0;a<i.length;a++)o=i[a][0].trace,s=n.selectAll("g.trace"+o.uid+" .js-line"),CXt.setClipUrl(s,i[a][0].carpet._clipPathId,t)}});var fYe=ne((p1r,uYe)=>{"use strict";var LXt=j2(),PXt=Wt().fillText;uYe.exports=function(t,r,i,n){var a=LXt(t,r,i,n);if(!a||a[0].index===!1)return;var o=a[0];if(o.index===void 0){var s=1-o.y0/t.ya._length,l=t.xa._length,u=l*s/2,f=l-u;return o.x0=Math.max(Math.min(o.x0,f),u),o.x1=Math.max(Math.min(o.x1,f),u),a}var c=o.cd[o.index];o.a=c.a,o.b=c.b,o.xLabelVal=void 0,o.yLabelVal=void 0;var h=o.trace,v=h._carpet,d=h._module.formatLabels(c,h);o.yLabel=d.yLabel,delete o.text;var _=[];function T(b,w){var k;b.labelprefix&&b.labelprefix.length>0?k=b.labelprefix.replace(/ = $/,""):k=b._hovertitle,_.push(k+": "+w.toFixed(3)+b.labelsuffix)}if(!h.hovertemplate){var p=c.hi||h.hoverinfo,M=p.split("+");M.indexOf("all")!==-1&&(M=["a","b","text"]),M.indexOf("a")!==-1&&T(v.aaxis,c.a),M.indexOf("b")!==-1&&T(v.baxis,c.b),_.push("y: "+o.yLabel),M.indexOf("text")!==-1&&PXt(c,h,_),o.extraText=_.join("<br>")}return a}});var hYe=ne((g1r,cYe)=>{"use strict";cYe.exports=function(t,r,i,n,a){var o=n[a];return t.a=o.a,t.b=o.b,t.y=o.y,t}});var dYe=ne((y1r,vYe)=>{"use strict";vYe.exports={attributes:bj(),supplyDefaults:$Ge(),colorbar:ph(),formatLabels:tYe(),calc:aYe(),plot:lYe(),style:Tv().style,styleOnSelect:Tv().styleOnSelect,hoverPoints:fYe(),selectPoints:K2(),eventData:hYe(),moduleType:"trace",name:"scattercarpet",basePlotModule:vu(),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}});var gYe=ne((m1r,pYe)=>{"use strict";pYe.exports=dYe()});var wj=ne((x1r,yYe)=>{"use strict";var Gp=Xx(),R1=oS(),RXt=Ps(),DXt=oa().extendFlat,wg=R1.contours;yYe.exports=DXt({carpet:{valType:"string",editType:"calc"},z:Gp.z,a:Gp.x,a0:Gp.x0,da:Gp.dx,b:Gp.y,b0:Gp.y0,db:Gp.dy,text:Gp.text,hovertext:Gp.hovertext,transpose:Gp.transpose,atype:Gp.xtype,btype:Gp.ytype,fillcolor:R1.fillcolor,autocontour:R1.autocontour,ncontours:R1.ncontours,contours:{type:wg.type,start:wg.start,end:wg.end,size:wg.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:wg.showlines,showlabels:wg.showlabels,labelfont:wg.labelfont,labelformat:wg.labelformat,operation:wg.operation,value:wg.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:R1.line.color,width:R1.line.width,dash:R1.line.dash,smoothing:R1.line.smoothing,editType:"plot"},transforms:void 0},RXt("",{cLetter:"z",autoColorDflt:!1}))});var Tj=ne((_1r,_Ye)=>{"use strict";var mYe=Wt(),IXt=QM(),xYe=wj(),FXt=m9(),qXt=kP(),zXt=CP();_Ye.exports=function(t,r,i,n){function a(u,f){return mYe.coerce(t,r,xYe,u,f)}function o(u){return mYe.coerce2(t,r,xYe,u)}if(a("carpet"),t.a&&t.b){var s=IXt(t,r,a,n,"a","b");if(!s){r.visible=!1;return}a("text");var l=a("contours.type")==="constraint";l?FXt(t,r,a,n,i,{hasHover:!1}):(qXt(t,r,a,o),zXt(t,r,a,n,{hasHover:!1}))}else r._defaultColor=i,r._length=null}});var AYe=ne((b1r,TYe)=>{"use strict";var OXt=gv(),bYe=Wt(),BXt=fP(),NXt=hP(),UXt=vP(),VXt=dP(),wYe=BN(),HXt=Tj(),GXt=UF(),YXt=o9();TYe.exports=function(t,r){var i=r._carpetTrace=GXt(t,r);if(!(!i||!i.visible||i.visible==="legendonly")){if(!r.a||!r.b){var n=t.data[i.index],a=t.data[r.index];a.a||(a.a=n.a),a.b||(a.b=n.b),HXt(a,r,r._defaultColor,t._fullLayout)}var o=WXt(t,r);return YXt(r,r._z),o}};function WXt(e,t){var r=t._carpetTrace,i=r.aaxis,n=r.baxis,a,o,s,l,u,f,c;i._minDtick=0,n._minDtick=0,bYe.isArray1D(t.z)&&BXt(t,i,n,"a","b",["z"]),a=t._a=t._a||t.a,l=t._b=t._b||t.b,a=a?i.makeCalcdata(t,"_a"):[],l=l?n.makeCalcdata(t,"_b"):[],o=t.a0||0,s=t.da||1,u=t.b0||0,f=t.db||1,c=t._z=NXt(t._z||t.z,t.transpose),t._emptypoints=VXt(c),UXt(c,t._emptypoints);var h=bYe.maxRowLength(c),v=t.xtype==="scaled"?"":a,d=wYe(t,v,o,s,h,i),_=t.ytype==="scaled"?"":l,T=wYe(t,_,u,f,c.length,n),p={a:d,b:T,z:c};return t.contours.type==="levels"&&t.contours.coloring!=="none"&&OXt(e,t,{vals:c,containerStr:"",cLetter:"z"}),[p]}});var SYe=ne((w1r,MYe)=>{"use strict";var XXt=Wt().isArrayOrTypedArray;MYe.exports=function(e,t,r,i){var n,a,o,s,l,u,f,c,h,v,d,_,T,p=XXt(r)?"a":"b",M=p==="a"?e.aaxis:e.baxis,b=M.smoothing,w=p==="a"?e.a2i:e.b2j,k=p==="a"?r:i,x=p==="a"?i:r,E=p==="a"?t.a.length:t.b.length,S=p==="a"?t.b.length:t.a.length,g=Math.floor(p==="a"?e.b2j(x):e.a2i(x)),C=p==="a"?function(re){return e.evalxy([],re,g)}:function(re){return e.evalxy([],g,re)};b&&(o=Math.max(0,Math.min(S-2,g)),s=g-o,a=p==="a"?function(re,ue){return e.dxydi([],re,o,ue,s)}:function(re,ue){return e.dxydj([],o,re,s,ue)});var A=w(k[0]),P=w(k[1]),D=A<P?1:-1,z=(P-A)*1e-8,O=D>0?Math.floor:Math.ceil,V=D>0?Math.ceil:Math.floor,B=D>0?Math.min:Math.max,F=D>0?Math.max:Math.min,N=O(A+z),Z=V(P-z);f=C(A);var J=[[f]];for(n=N;n*D<Z*D;n+=D)l=[],d=F(A,n),_=B(P,n+D),T=_-d,u=Math.max(0,Math.min(E-2,Math.floor(.5*(d+_)))),c=C(_),b&&(h=a(u,d-u),v=a(u,_-u),l.push([f[0]+h[0]/3*T,f[1]+h[1]/3*T]),l.push([c[0]-v[0]/3*T,c[1]-v[1]/3*T])),l.push(c),J.push(l),f=c;return J}});var DYe=ne((T1r,RYe)=>{"use strict";var HF=Ai(),GF=yj(),PYe=mj(),V5=aa(),Cy=Wt(),ZXt=l9(),jXt=u9(),ib=RP(),VF=lS(),KXt=v9(),JXt=h9(),QXt=d9(),$Xt=UF(),EYe=SYe();RYe.exports=function(t,r,i,n){var a=r.xaxis,o=r.yaxis;Cy.makeTraceGroups(n,i,"contour").each(function(s){var l=HF.select(this),u=s[0],f=u.trace,c=f._carpetTrace=$Xt(t,f),h=t.calcdata[c.index][0];if(!c.visible||c.visible==="legendonly")return;var v=u.a,d=u.b,_=f.contours,T=JXt(_,r,u),p=_.type==="constraint",M=_._operation,b=p?M==="="?"lines":"fill":_.coloring;function w(O){var V=c.ab2xy(O[0],O[1],!0);return[a.c2p(V[0]),o.c2p(V[1])]}var k=[[v[0],d[d.length-1]],[v[v.length-1],d[d.length-1]],[v[v.length-1],d[0]],[v[0],d[0]]];ZXt(T);var x=(v[v.length-1]-v[0])*1e-8,E=(d[d.length-1]-d[0])*1e-8;jXt(T,x,E);var S=T;_.type==="constraint"&&(S=KXt(T,M)),eZt(T,w);var g,C,A,P,D=[];for(P=h.clipsegments.length-1;P>=0;P--)g=h.clipsegments[P],C=GF([],g.x,a.c2p),A=GF([],g.y,o.c2p),C.reverse(),A.reverse(),D.push(PYe(C,A,g.bicubic));var z="M"+D.join("L")+"Z";nZt(l,h.clipsegments,a,o,p,b),iZt(f,l,a,o,S,k,w,c,h,b,z),tZt(l,T,t,u,_,r,c),V5.setClipUrl(l,c._clipPathId,t)})};function eZt(e,t){var r,i,n,a,o,s,l,u,f;for(r=0;r<e.length;r++){for(a=e[r],o=a.pedgepaths=[],s=a.ppaths=[],i=0;i<a.edgepaths.length;i++){for(f=a.edgepaths[i],l=[],n=0;n<f.length;n++)l[n]=t(f[n]);o.push(l)}for(i=0;i<a.paths.length;i++){for(f=a.paths[i],u=[],n=0;n<f.length;n++)u[n]=t(f[n]);s.push(u)}}}function tZt(e,t,r,i,n,a,o){var s=r._context.staticPlot,l=Cy.ensureSingle(e,"g","contourlines"),u=n.showlines!==!1,f=n.showlabels,c=u&&f,h=ib.createLines(l,u||f,t,s),v=ib.createLineClip(l,c,r,i.trace.uid),d=e.selectAll("g.contourlabels").data(f?[0]:[]);if(d.exit().remove(),d.enter().append("g").classed("contourlabels",!0),f){var _=a.xaxis,T=a.yaxis,p=_._length,M=T._length,b=[[[0,0],[p,0],[p,M],[0,M]]],w=[];Cy.clearLocationCache();var k=ib.labelFormatter(r,i),x=V5.tester.append("text").attr("data-notex",1).call(V5.font,n.labelfont),E={left:0,right:p,center:p/2,top:0,bottom:M,middle:M/2},S=Math.sqrt(p*p+M*M),g=VF.LABELDISTANCE*S/Math.max(1,t.length/VF.LABELINCREASE);h.each(function(C){var A=ib.calcTextOpts(C.level,k,x,r);HF.select(this).selectAll("path").each(function(P){var D=this,z=Cy.getVisibleSegment(D,E,A.height/2);if(z&&(rZt(D,P,C,z,o,A.height),!(z.len<(A.width+A.height)*VF.LABELMIN)))for(var O=Math.min(Math.ceil(z.len/g),VF.LABELMAX),V=0;V<O;V++){var B=ib.findBestTextLocation(D,z,A,w,E);if(!B)break;ib.addLabelData(B,A,w,b)}})}),x.remove(),ib.drawLabels(d,w,r,v,c?b:null)}f&&!u&&h.remove()}function rZt(e,t,r,i,n,a){for(var o,s=0;s<r.pedgepaths.length;s++)t===r.pedgepaths[s]&&(o=r.edgepaths[s]);if(!o)return;var l=n.a[0],u=n.a[n.a.length-1],f=n.b[0],c=n.b[n.b.length-1];function h(p,M){var b=0,w,k=.1;return(Math.abs(p[0]-l)<k||Math.abs(p[0]-u)<k)&&(w=CYe(n.dxydb_rough(p[0],p[1],k)),b=Math.max(b,a*LYe(M,w)/2)),(Math.abs(p[1]-f)<k||Math.abs(p[1]-c)<k)&&(w=CYe(n.dxyda_rough(p[0],p[1],k)),b=Math.max(b,a*LYe(M,w)/2)),b}var v=kYe(e,0,1),d=kYe(e,i.total,i.total-1),_=h(o[0],v),T=i.total-h(o[o.length-1],d);i.min<_&&(i.min=_),i.max>T&&(i.max=T),i.len=i.max-i.min}function kYe(e,t,r){var i=e.getPointAtLength(t),n=e.getPointAtLength(r),a=n.x-i.x,o=n.y-i.y,s=Math.sqrt(a*a+o*o);return[a/s,o/s]}function CYe(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return[e[0]/t,e[1]/t]}function LYe(e,t){var r=Math.abs(e[0]*t[0]+e[1]*t[1]),i=Math.sqrt(1-r*r);return i/r}function nZt(e,t,r,i,n,a){var o,s,l,u,f=Cy.ensureSingle(e,"g","contourbg"),c=f.selectAll("path").data(a==="fill"&&!n?[0]:[]);c.enter().append("path"),c.exit().remove();var h=[];for(u=0;u<t.length;u++)o=t[u],s=GF([],o.x,r.c2p),l=GF([],o.y,i.c2p),h.push(PYe(s,l,o.bicubic));c.attr("d","M"+h.join("L")+"Z").style("stroke","none")}function iZt(e,t,r,i,n,a,o,s,l,u,f){var c=u==="fill";c&&QXt(n,e.contours);var h=Cy.ensureSingle(t,"g","contourfill"),v=h.selectAll("path").data(c?n:[]);v.enter().append("path"),v.exit().remove(),v.each(function(d){var _=(d.prefixBoundary?f:"")+aZt(e,d,a,o,s,l,r,i);_?HF.select(this).attr("d",_).style("stroke","none"):HF.select(this).remove()})}function aZt(e,t,r,i,n,a,o,s){var l,u="",f=t.edgepaths.map(function(A,P){return P}),c=!0,h,v,d,_,T,p,M=Math.abs(r[0][0]-r[2][0])*1e-4,b=Math.abs(r[0][1]-r[2][1])*1e-4;function w(A){return Math.abs(A[1]-r[0][1])<b}function k(A){return Math.abs(A[1]-r[2][1])<b}function x(A){return Math.abs(A[0]-r[0][0])<M}function E(A){return Math.abs(A[0]-r[2][0])<M}function S(A,P){var D,z,O,V,B="";for(w(A)&&!E(A)||k(A)&&!x(A)?(V=n.aaxis,O=EYe(n,a,[A[0],P[0]],.5*(A[1]+P[1]))):(V=n.baxis,O=EYe(n,a,.5*(A[0]+P[0]),[A[1],P[1]])),D=1;D<O.length;D++)for(B+=V.smoothing?"C":"L",z=0;z<O[D].length;z++){var F=O[D][z];B+=[o.c2p(F[0]),s.c2p(F[1])]+" "}return B}for(l=0,h=null;f.length;){var g=t.edgepaths[l][0];for(h&&(u+=S(h,g)),p=V5.smoothopen(t.edgepaths[l].map(i),t.smoothing),u+=c?p:p.replace(/^M/,"L"),f.splice(f.indexOf(l),1),h=t.edgepaths[l][t.edgepaths[l].length-1],_=-1,d=0;d<4;d++){if(!h){Cy.log("Missing end?",l,t);break}for(w(h)&&!E(h)?v=r[1]:x(h)?v=r[0]:k(h)?v=r[3]:E(h)&&(v=r[2]),T=0;T<t.edgepaths.length;T++){var C=t.edgepaths[T][0];Math.abs(h[0]-v[0])<M?Math.abs(h[0]-C[0])<M&&(C[1]-h[1])*(v[1]-C[1])>=0&&(v=C,_=T):Math.abs(h[1]-v[1])<b?Math.abs(h[1]-C[1])<b&&(C[0]-h[0])*(v[0]-C[0])>=0&&(v=C,_=T):Cy.log("endpt to newendpt is not vert. or horz.",h,v,C)}if(_>=0)break;u+=S(h,v),h=v}if(_===t.edgepaths.length){Cy.log("unclosed perimeter path");break}l=_,c=f.indexOf(l)===-1,c&&(l=f[0],u+=S(h,v)+"Z",h=null)}for(l=0;l<t.paths.length;l++)u+=V5.smoothclosed(t.paths[l].map(i),t.smoothing);return u}});var FYe=ne((A1r,IYe)=>{"use strict";IYe.exports={attributes:wj(),supplyDefaults:Tj(),colorbar:FP(),calc:AYe(),plot:DYe(),style:IP(),moduleType:"trace",name:"contourcarpet",basePlotModule:vu(),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}});var zYe=ne((M1r,qYe)=>{"use strict";qYe.exports=FYe()});var XF=ne((S1r,VYe)=>{"use strict";var YF=Wt().extendFlat,WF=cu(),OYe=kl().axisHoverFormat,NYe=hc().dash,oZt=jb(),UYe=Pw(),sZt=UYe.INCREASING.COLOR,lZt=UYe.DECREASING.COLOR,Aj=WF.line;function BYe(e){return{line:{color:YF({},Aj.color,{dflt:e}),width:Aj.width,dash:NYe,editType:"style"},editType:"style"}}VYe.exports={xperiod:WF.xperiod,xperiod0:WF.xperiod0,xperiodalignment:WF.xperiodalignment,xhoverformat:OYe("x"),yhoverformat:OYe("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:YF({},Aj.width,{}),dash:YF({},NYe,{}),editType:"style"},increasing:BYe(sZt),decreasing:BYe(lZt),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:YF({},oZt.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}});var Mj=ne((E1r,HYe)=>{"use strict";var uZt=wi(),fZt=Wt();HYe.exports=function(t,r,i,n){var a=i("x"),o=i("open"),s=i("high"),l=i("low"),u=i("close");i("hoverlabel.split");var f=uZt.getComponentMethod("calendars","handleTraceDefaults");if(f(t,r,["x"],n),!!(o&&s&&l&&u)){var c=Math.min(o.length,s.length,l.length,u.length);return a&&(c=Math.min(c,fZt.minRowLength(a))),r._length=c,c}}});var WYe=ne((k1r,YYe)=>{"use strict";var cZt=Wt(),hZt=Mj(),vZt=o0(),dZt=XF();YYe.exports=function(t,r,i,n){function a(s,l){return cZt.coerce(t,r,dZt,s,l)}var o=hZt(t,r,a,n);if(!o){r.visible=!1;return}vZt(t,r,n,a,{x:!0}),a("xhoverformat"),a("yhoverformat"),a("line.width"),a("line.dash"),GYe(t,r,a,"increasing"),GYe(t,r,a,"decreasing"),a("text"),a("hovertext"),a("tickwidth"),n._requestRangeslider[r.xaxis]=!0};function GYe(e,t,r,i){r(i+".line.color"),r(i+".line.width",t.line.width),r(i+".line.dash",t.line.dash)}});var Sj=ne((C1r,ZYe)=>{"use strict";var MT=Wt(),ZF=MT._,jF=Xi(),pZt=u0(),H5=$a().BADNUM;function gZt(e,t){var r=jF.getFromId(e,t.xaxis),i=jF.getFromId(e,t.yaxis),n=mZt(e,r,t),a=t._minDiff;t._minDiff=null;var o=t._origX;t._origX=null;var s=t._xcalc;t._xcalc=null;var l=XYe(e,t,o,s,i,yZt);return t._extremes[r._id]=jF.findExtremes(r,s,{vpad:a/2}),l.length?(MT.extendFlat(l[0].t,{wHover:a/2,tickLen:n}),l):[{t:{empty:!0}}]}function yZt(e,t,r,i){return{o:e,h:t,l:r,c:i}}function XYe(e,t,r,i,n,a){for(var o=n.makeCalcdata(t,"open"),s=n.makeCalcdata(t,"high"),l=n.makeCalcdata(t,"low"),u=n.makeCalcdata(t,"close"),f=MT.isArrayOrTypedArray(t.text),c=MT.isArrayOrTypedArray(t.hovertext),h=!0,v=null,d=!!t.xperiodalignment,_=[],T=0;T<i.length;T++){var p=i[T],M=o[T],b=s[T],w=l[T],k=u[T];if(p!==H5&&M!==H5&&b!==H5&&w!==H5&&k!==H5){k===M?v!==null&&k!==v&&(h=k>v):h=k>M,v=k;var x=a(M,b,w,k);x.pos=p,x.yc=(M+k)/2,x.i=T,x.dir=h?"increasing":"decreasing",x.x=x.pos,x.y=[w,b],d&&(x.orig_p=r[T]),f&&(x.tx=t.text[T]),c&&(x.htx=t.hovertext[T]),_.push(x)}else _.push({pos:p,empty:!0})}return t._extremes[n._id]=jF.findExtremes(n,MT.concat(l,s),{padded:!0}),_.length&&(_[0].t={labels:{open:ZF(e,"open:")+" ",high:ZF(e,"high:")+" ",low:ZF(e,"low:")+" ",close:ZF(e,"close:")+" "}}),_}function mZt(e,t,r){var i=r._minDiff;if(!i){var n=e._fullData,a=[];i=1/0;var o;for(o=0;o<n.length;o++){var s=n[o];if(s.type==="ohlc"&&s.visible===!0&&s.xaxis===t._id){a.push(s);var l=t.makeCalcdata(s,"x");s._origX=l;var u=pZt(r,t,"x",l).vals;s._xcalc=u;var f=MT.distinctVals(u).minDiff;f&&isFinite(f)&&(i=Math.min(i,f))}}for(i===1/0&&(i=1),o=0;o<a.length;o++)a[o]._minDiff=i}return i*r.tickwidth}ZYe.exports={calc:gZt,calcCommon:XYe}});var JYe=ne((L1r,KYe)=>{"use strict";var xZt=Ai(),jYe=Wt();KYe.exports=function(t,r,i,n){var a=r.yaxis,o=r.xaxis,s=!!o.rangebreaks;jYe.makeTraceGroups(n,i,"trace ohlc").each(function(l){var u=xZt.select(this),f=l[0],c=f.t,h=f.trace;if(h.visible!==!0||c.empty){u.remove();return}var v=c.tickLen,d=u.selectAll("path").data(jYe.identity);d.enter().append("path"),d.exit().remove(),d.attr("d",function(_){if(_.empty)return"M0,0Z";var T=o.c2p(_.pos-v,!0),p=o.c2p(_.pos+v,!0),M=s?(T+p)/2:o.c2p(_.pos,!0),b=a.c2p(_.o,!0),w=a.c2p(_.h,!0),k=a.c2p(_.l,!0),x=a.c2p(_.c,!0);return"M"+T+","+b+"H"+M+"M"+M+","+w+"V"+k+"M"+p+","+x+"H"+M})})}});var $Ye=ne((P1r,QYe)=>{"use strict";var Ej=Ai(),_Zt=aa(),bZt=_i();QYe.exports=function(t,r,i){var n=i||Ej.select(t).selectAll("g.ohlclayer").selectAll("g.trace");n.style("opacity",function(a){return a[0].trace.opacity}),n.each(function(a){var o=a[0].trace;Ej.select(this).selectAll("path").each(function(s){if(!s.empty){var l=o[s.dir].line;Ej.select(this).style("fill","none").call(bZt.stroke,l.color).call(_Zt.dashLine,l.dash,l.width).style("opacity",o.selectedpoints&&!s.selected?.3:1)}})})}});var Cj=ne((R1r,iWe)=>{"use strict";var kj=Xi(),wZt=Wt(),KF=Ol(),TZt=_i(),AZt=Wt().fillText,eWe=Pw(),MZt={increasing:eWe.INCREASING.SYMBOL,decreasing:eWe.DECREASING.SYMBOL};function SZt(e,t,r,i){var n=e.cd,a=n[0].trace;return a.hoverlabel.split?rWe(e,t,r,i):nWe(e,t,r,i)}function tWe(e,t,r,i){var n=e.cd,a=e.xa,o=n[0].trace,s=n[0].t,l=o.type,u=l==="ohlc"?"l":"min",f=l==="ohlc"?"h":"max",c,h,v=s.bPos||0,d=function(C){return C.pos+v-t},_=s.bdPos||s.tickLen,T=s.wHover,p=Math.min(1,_/Math.abs(a.r2c(a.range[1])-a.r2c(a.range[0])));c=e.maxHoverDistance-p,h=e.maxSpikeDistance-p;function M(C){var A=d(C);return KF.inbox(A-T,A+T,c)}function b(C){var A=C[u],P=C[f];return A===P||KF.inbox(A-r,P-r,c)}function w(C){return(M(C)+b(C))/2}var k=KF.getDistanceFunction(i,M,b,w);if(KF.getClosest(n,k,e),e.index===!1)return null;var x=n[e.index];if(x.empty)return null;var E=x.dir,S=o[E],g=S.line.color;return TZt.opacity(g)&&S.line.width?e.color=g:e.color=S.fillcolor,e.x0=a.c2p(x.pos+v-_,!0),e.x1=a.c2p(x.pos+v+_,!0),e.xLabelVal=x.orig_p!==void 0?x.orig_p:x.pos,e.spikeDistance=w(x)*h/c,e.xSpike=a.c2p(x.pos,!0),e}function rWe(e,t,r,i){var n=e.cd,a=e.ya,o=n[0].trace,s=n[0].t,l=[],u=tWe(e,t,r,i);if(!u)return[];var f=u.index,c=n[f],h=c.hi||o.hoverinfo,v=h.split("+"),d=h==="all",_=d||v.indexOf("y")!==-1;if(!_)return[];for(var T=["high","open","close","low"],p={},M=0;M<T.length;M++){var b=T[M],w=o[b][u.index],k=a.c2p(w,!0),x;w in p?(x=p[w],x.yLabel+="<br>"+s.labels[b]+kj.hoverLabelText(a,w,o.yhoverformat)):(x=wZt.extendFlat({},u),x.y0=x.y1=k,x.yLabelVal=w,x.yLabel=s.labels[b]+kj.hoverLabelText(a,w,o.yhoverformat),x.name="",l.push(x),p[w]=x)}return l}function nWe(e,t,r,i){var n=e.cd,a=e.ya,o=n[0].trace,s=n[0].t,l=tWe(e,t,r,i);if(!l)return[];var u=l.index,f=n[u],c=l.index=f.i,h=f.dir;function v(w){return s.labels[w]+kj.hoverLabelText(a,o[w][c],o.yhoverformat)}var d=f.hi||o.hoverinfo,_=d.split("+"),T=d==="all",p=T||_.indexOf("y")!==-1,M=T||_.indexOf("text")!==-1,b=p?[v("open"),v("high"),v("low"),v("close")+"  "+MZt[h]]:[];return M&&AZt(f,o,b),l.extraText=b.join("<br>"),l.y0=l.y1=a.c2p(f.yc,!0),[l]}iWe.exports={hoverPoints:SZt,hoverSplit:rWe,hoverOnPoints:nWe}});var Lj=ne((D1r,aWe)=>{"use strict";aWe.exports=function(t,r){var i=t.cd,n=t.xaxis,a=t.yaxis,o=[],s,l=i[0].t.bPos||0;if(r===!1)for(s=0;s<i.length;s++)i[s].selected=0;else for(s=0;s<i.length;s++){var u=i[s];r.contains([n.c2p(u.pos+l),a.c2p(u.yc)],null,u.i,t)?(o.push({pointNumber:u.i,x:n.c2d(u.pos),y:a.c2d(u.yc)}),u.selected=1):u.selected=0}return o}});var sWe=ne((I1r,oWe)=>{"use strict";oWe.exports={moduleType:"trace",name:"ohlc",basePlotModule:vu(),categories:["cartesian","svg","showLegend"],meta:{},attributes:XF(),supplyDefaults:WYe(),calc:Sj().calc,plot:JYe(),style:$Ye(),hoverPoints:Cj().hoverPoints,selectPoints:Lj()}});var uWe=ne((F1r,lWe)=>{"use strict";lWe.exports=sWe()});var Rj=ne((q1r,hWe)=>{"use strict";var Pj=Wt().extendFlat,fWe=kl().axisHoverFormat,Bd=XF(),G5=ZM();function cWe(e){return{line:{color:Pj({},G5.line.color,{dflt:e}),width:G5.line.width,editType:"style"},fillcolor:G5.fillcolor,editType:"style"}}hWe.exports={xperiod:Bd.xperiod,xperiod0:Bd.xperiod0,xperiodalignment:Bd.xperiodalignment,xhoverformat:fWe("x"),yhoverformat:fWe("y"),x:Bd.x,open:Bd.open,high:Bd.high,low:Bd.low,close:Bd.close,line:{width:Pj({},G5.line.width,{}),editType:"style"},increasing:cWe(Bd.increasing.line.color.dflt),decreasing:cWe(Bd.decreasing.line.color.dflt),text:Bd.text,hovertext:Bd.hovertext,whiskerwidth:Pj({},G5.whiskerwidth,{dflt:0}),hoverlabel:Bd.hoverlabel}});var pWe=ne((z1r,dWe)=>{"use strict";var EZt=Wt(),kZt=_i(),CZt=Mj(),LZt=o0(),PZt=Rj();dWe.exports=function(t,r,i,n){function a(s,l){return EZt.coerce(t,r,PZt,s,l)}var o=CZt(t,r,a,n);if(!o){r.visible=!1;return}LZt(t,r,n,a,{x:!0}),a("xhoverformat"),a("yhoverformat"),a("line.width"),vWe(t,r,a,"increasing"),vWe(t,r,a,"decreasing"),a("text"),a("hovertext"),a("whiskerwidth"),n._requestRangeslider[r.xaxis]=!0};function vWe(e,t,r,i){var n=r(i+".line.color");r(i+".line.width",t.line.width),r(i+".fillcolor",kZt.addOpacity(n,.5))}});var xWe=ne((O1r,mWe)=>{"use strict";var gWe=Wt(),yWe=Xi(),RZt=u0(),DZt=Sj().calcCommon;mWe.exports=function(e,t){var r=e._fullLayout,i=yWe.getFromId(e,t.xaxis),n=yWe.getFromId(e,t.yaxis),a=i.makeCalcdata(t,"x"),o=RZt(t,i,"x",a).vals,s=DZt(e,t,a,o,n,IZt);return s.length?(gWe.extendFlat(s[0].t,{num:r._numBoxes,dPos:gWe.distinctVals(o).minDiff/2,posLetter:"x",valLetter:"y"}),r._numBoxes++,s):[{t:{empty:!0}}]};function IZt(e,t,r,i){return{min:r,q1:Math.min(e,i),med:i,q3:Math.max(e,i),max:t}}});var bWe=ne((B1r,_We)=>{"use strict";_We.exports={moduleType:"trace",name:"candlestick",basePlotModule:vu(),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:Rj(),layoutAttributes:jM(),supplyLayoutDefaults:rP().supplyLayoutDefaults,crossTraceCalc:iP().crossTraceCalc,supplyDefaults:pWe(),calc:xWe(),plot:aP().plot,layerName:"boxlayer",style:oP().style,hoverPoints:Cj().hoverPoints,selectPoints:Lj()}});var TWe=ne((N1r,wWe)=>{"use strict";wWe.exports=bWe()});var Ij=ne((U1r,AWe)=>{"use strict";var QF=Wt(),FZt=B0(),JF=QF.deg2rad,Dj=QF.rad2deg;AWe.exports=function(t,r,i){switch(FZt(t,i),t._id){case"x":case"radialaxis":qZt(t,r);break;case"angularaxis":BZt(t,r);break}};function qZt(e,t){var r=t._subplot;e.setGeometry=function(){var i=e._rl[0],n=e._rl[1],a=r.innerRadius,o=(r.radius-a)/(n-i),s=a/o,l=i>n?function(u){return u<=0}:function(u){return u>=0};e.c2g=function(u){var f=e.c2l(u)-i;return(l(f)?f:0)+s},e.g2c=function(u){return e.l2c(u+i-s)},e.g2p=function(u){return u*o},e.c2p=function(u){return e.g2p(e.c2g(u))}}}function zZt(e,t){return t==="degrees"?JF(e):e}function OZt(e,t){return t==="degrees"?Dj(e):e}function BZt(e,t){var r=e.type;if(r==="linear"){var i=e.d2c,n=e.c2d;e.d2c=function(a,o){return zZt(i(a),o)},e.c2d=function(a,o){return n(OZt(a,o))}}e.makeCalcdata=function(a,o){var s=a[o],l=a._length,u,f,c=function(T){return e.d2c(T,a.thetaunit)};if(s)for(u=new Array(l),f=0;f<l;f++)u[f]=c(s[f]);else{var h=o+"0",v="d"+o,d=h in a?c(a[h]):0,_=a[v]?c(a[v]):(e.period||2*Math.PI)/l;for(u=new Array(l),f=0;f<l;f++)u[f]=d+f*_}return u},e.setGeometry=function(){var a=t.sector,o=a.map(JF),s={clockwise:-1,counterclockwise:1}[e.direction],l=JF(e.rotation),u=function(p){return s*p+l},f=function(p){return(p-l)/s},c,h,v,d;switch(r){case"linear":h=c=QF.identity,d=JF,v=Dj,e.range=QF.isFullCircle(o)?[a[0],a[0]+360]:o.map(f).map(Dj);break;case"category":var _=e._categories.length,T=e.period?Math.max(e.period,_):_;T===0&&(T=1),h=d=function(p){return p*2*Math.PI/T},c=v=function(p){return p*T/Math.PI/2},e.range=[0,T];break}e.c2g=function(p){return u(h(p))},e.g2c=function(p){return c(f(p))},e.t2g=function(p){return u(d(p))},e.g2t=function(p){return v(f(p))}}}});var $F=ne((V1r,MWe)=>{"use strict";MWe.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}});var t8=ne((H1r,LWe)=>{"use strict";var ab=Wt(),SWe=$A().tester,Fj=ab.findIndexOfMin,kWe=ab.isAngleInsideSector,NZt=ab.angleDelta,EWe=ab.angleDist;function UZt(e,t,r,i,n){if(!kWe(t,i))return!1;var a,o;r[0]<r[1]?(a=r[0],o=r[1]):(a=r[1],o=r[0]);var s=SWe(ST(a,i[0],i[1],n)),l=SWe(ST(o,i[0],i[1],n)),u=[e*Math.cos(t),e*Math.sin(t)];return l.contains(u)&&!s.contains(u)}function CWe(e,t,r,i){var n,a,o=i[0],s=i[1],l=e8(Math.sin(t)-Math.sin(e)),u=e8(Math.cos(t)-Math.cos(e)),f=Math.tan(r),c=e8(1/f),h=l/u,v=s-h*o;return c?l&&u?(n=v/(f-h),a=f*n):u?(n=s*c,a=s):(n=o,a=o*f):l&&u?(n=0,a=v):u?(n=0,a=s):n=a=NaN,[n,a]}function VZt(e,t,r,i){var n=-t*r,a=t*t+1,o=2*(t*n-r),s=n*n+r*r-e*e,l=Math.sqrt(o*o-4*a*s),u=(-o+l)/(2*a),f=(-o-l)/(2*a);return[[u,t*u+n+i],[f,t*f+n+i]]}function HZt(e,t){var r=t.length,i=new Array(r+1),n;for(n=0;n<r;n++){var a=t[n];i[n]=[e*Math.cos(a),e*Math.sin(a)]}return i[n]=i[0].slice(),i}function GZt(e,t,r,i){var n=i.length,a=[],o,s;function l(p){return[e*Math.cos(p),e*Math.sin(p)]}function u(p,M,b){return CWe(p,M,b,l(p))}function f(p){return ab.mod(p,n)}function c(p){return kWe(p,[t,r])}var h=Fj(i,function(p){return c(p)?EWe(p,t):1/0}),v=u(i[h],i[f(h-1)],t);for(a.push(v),o=h,s=0;s<n;o++,s++){var d=i[f(o)];if(!c(d))break;a.push(l(d))}var _=Fj(i,function(p){return c(p)?EWe(p,r):1/0}),T=u(i[_],i[f(_+1)],r);return a.push(T),a.push([0,0]),a.push(a[0].slice()),a}function ST(e,t,r,i){return ab.isFullCircle([t,r])?HZt(e,i):GZt(e,t,r,i)}function YZt(e,t,r,i){for(var n=1/0,a=1/0,o=ST(e,t,r,i),s=0;s<o.length;s++){var l=o[s];n=Math.min(n,l[0]),a=Math.min(a,-l[1])}return[n,a]}function WZt(e,t){var r=function(a){var o=NZt(a,e);return o>0?o:1/0},i=Fj(t,r),n=ab.mod(i+1,t.length);return[t[i],t[n]]}function e8(e){return Math.abs(e)>1e-10?e:0}function qj(e,t,r){t=t||0,r=r||0;for(var i=e.length,n=new Array(i),a=0;a<i;a++){var o=e[a];n[a]=[t+o[0],r-o[1]]}return n}function XZt(e,t,r,i,n,a){var o=ST(e,t,r,i);return"M"+qj(o,n,a).join("L")}function ZZt(e,t,r,i,n,a,o){var s,l;e<t?(s=e,l=t):(s=t,l=e);var u=qj(ST(s,r,i,n),a,o),f=qj(ST(l,r,i,n),a,o);return"M"+f.reverse().join("L")+"M"+u.join("L")}LWe.exports={isPtInsidePolygon:UZt,findPolygonOffset:YZt,findEnclosingVertexAngles:WZt,findIntersectionXY:CWe,findXYatLength:VZt,clampTiny:e8,pathPolygon:XZt,pathPolygonAnnulus:ZZt}});var zj=ne((G1r,DWe)=>{"use strict";function PWe(e){return e<0?-1:e>0?1:0}function ET(e){var t=e[0],r=e[1];if(!isFinite(t)||!isFinite(r))return[1,0];var i=(t+1)*(t+1)+r*r;return[(t*t+r*r-1)/i,2*r/i]}function kT(e,t){var r=t[0],i=t[1];return[r*e.radius+e.cx,-i*e.radius+e.cy]}function RWe(e,t){return t*e.radius}function jZt(e,t,r,i){var n=kT(e,ET([r,t])),a=n[0],o=n[1],s=kT(e,ET([i,t])),l=s[0],u=s[1];if(t===0)return["M"+a+","+o,"L"+l+","+u].join(" ");var f=RWe(e,1/Math.abs(t));return["M"+a+","+o,"A"+f+","+f+" 0 0,"+(t<0?1:0)+" "+l+","+u].join(" ")}function KZt(e,t,r,i){var n=RWe(e,1/(t+1)),a=kT(e,ET([t,r])),o=a[0],s=a[1],l=kT(e,ET([t,i])),u=l[0],f=l[1];if(PWe(r)!==PWe(i)){var c=kT(e,ET([t,0])),h=c[0],v=c[1];return["M"+o+","+s,"A"+n+","+n+" 0 0,"+(0<r?0:1)+" "+h+","+v,"A"+n+","+n+" 0 0,"+(i<0?0:1)+u+","+f].join(" ")}return["M"+o+","+s,"A"+n+","+n+" 0 0,"+(i<r?0:1)+" "+u+","+f].join(" ")}DWe.exports={smith:ET,reactanceArc:jZt,resistanceArc:KZt,smithTransform:kT}});var Nj=ne((Y1r,VWe)=>{"use strict";var ob=Ai(),JZt=Xf(),lb=wi(),hl=Wt(),Tg=hl.strRotate,ic=hl.strTranslate,Oj=_i(),Y5=aa(),QZt=Zs(),Pv=Xi(),$Zt=B0(),ejt=Ij(),tjt=Cd().doAutoRange,Ly=P7(),i8=Hh(),IWe=Ol(),rjt=yx(),njt=Mf().prepSelect,ijt=Mf().selectOnClick,Bj=Mf().clearOutline,FWe=e0(),qWe=NA(),zWe=XA().redrawReglTraces,ajt=Tf().MID_SHIFT,D1=$F(),Py=t8(),a8=zj(),r8=a8.smith,ojt=a8.reactanceArc,sjt=a8.resistanceArc,n8=a8.smithTransform,ljt=hl._,OWe=hl.mod,I1=hl.deg2rad,sb=hl.rad2deg;function BWe(e,t,r){this.isSmith=r||!1,this.id=t,this.gd=e,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var i=e._fullLayout,n="clip"+i._uid+t;this.clipIds.forTraces=n+"-for-traces",this.clipPaths.forTraces=i._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=i["_"+(r?"smith":"polar")+"layer"].append("g").attr("class",t),this.getHole=function(a){return this.isSmith?0:a.hole},this.getSector=function(a){return this.isSmith?[0,360]:a.sector},this.getRadial=function(a){return this.isSmith?a.realaxis:a.radialaxis},this.getAngular=function(a){return this.isSmith?a.imaginaryaxis:a.angularaxis},r||(this.radialTickLayout=null,this.angularTickLayout=null)}var wc=BWe.prototype;VWe.exports=function(t,r,i){return new BWe(t,r,i)};wc.plot=function(e,t){for(var r=this,i=t[r.id],n=!1,a=0;a<e.length;a++){var o=e[a][0].trace;if(o.cliponaxis===!1){n=!0;break}}r._hasClipOnAxisFalse=n,r.updateLayers(t,i),r.updateLayout(t,i),QZt.generalUpdatePerTraceModule(r.gd,r,e,i),r.updateFx(t,i),r.isSmith&&(delete i.realaxis.range,delete i.imaginaryaxis.range)};wc.updateLayers=function(e,t){var r=this,i=r.isSmith,n=r.layers,a=r.getRadial(t),o=r.getAngular(t),s=D1.layerNames,l=s.indexOf("frontplot"),u=s.slice(0,l),f=o.layer==="below traces",c=a.layer==="below traces";f&&u.push("angular-line"),c&&u.push("radial-line"),f&&u.push("angular-axis"),c&&u.push("radial-axis"),u.push("frontplot"),f||u.push("angular-line"),c||u.push("radial-line"),f||u.push("angular-axis"),c||u.push("radial-axis");var h=(i?"smith":"polar")+"sublayer",v=r.framework.selectAll("."+h).data(u,String);v.enter().append("g").attr("class",function(d){return h+" "+d}).each(function(d){var _=n[d]=ob.select(this);switch(d){case"frontplot":i||_.append("g").classed("barlayer",!0),_.append("g").classed("scatterlayer",!0);break;case"backplot":_.append("g").classed("maplayer",!0);break;case"plotbg":n.bg=_.append("path");break;case"radial-grid":_.style("fill","none");break;case"angular-grid":_.style("fill","none");break;case"radial-line":_.append("line").style("fill","none");break;case"angular-line":_.append("path").style("fill","none");break}}),v.order()};wc.updateLayout=function(e,t){var r=this,i=r.layers,n=e._size,a=r.getRadial(t),o=r.getAngular(t),s=t.domain.x,l=t.domain.y;r.xOffset=n.l+n.w*s[0],r.yOffset=n.t+n.h*(1-l[1]);var u=r.xLength=n.w*(s[1]-s[0]),f=r.yLength=n.h*(l[1]-l[0]),c=r.getSector(t);r.sectorInRad=c.map(I1);var h=r.sectorBBox=ujt(c),v=h[2]-h[0],d=h[3]-h[1],_=f/u,T=Math.abs(d/v),p,M,b,w,k;_>T?(p=u,M=u*T,k=(f-M)/n.h/2,b=[s[0],s[1]],w=[l[0]+k,l[1]-k]):(p=f/T,M=f,k=(u-p)/n.w/2,b=[s[0]+k,s[1]-k],w=[l[0],l[1]]),r.xLength2=p,r.yLength2=M,r.xDomain2=b,r.yDomain2=w;var x=r.xOffset2=n.l+n.w*b[0],E=r.yOffset2=n.t+n.h*(1-w[1]),S=r.radius=p/v,g=r.innerRadius=r.getHole(t)*S,C=r.cx=x-S*h[0],A=r.cy=E+S*h[3],P=r.cxx=C-x,D=r.cyy=A-E,z=a.side,O;z==="counterclockwise"?(O=z,z="top"):z==="clockwise"&&(O=z,z="bottom"),r.radialAxis=r.mockAxis(e,t,a,{_id:"x",side:z,_trueSide:O,domain:[g/n.w,S/n.w]}),r.angularAxis=r.mockAxis(e,t,o,{side:"right",domain:[0,Math.PI],autorange:!1}),r.doAutoRange(e,t),r.updateAngularAxis(e,t),r.updateRadialAxis(e,t),r.updateRadialAxisTitle(e,t),r.xaxis=r.mockCartesianAxis(e,t,{_id:"x",domain:b}),r.yaxis=r.mockCartesianAxis(e,t,{_id:"y",domain:w});var V=r.pathSubplot();r.clipPaths.forTraces.select("path").attr("d",V).attr("transform",ic(P,D)),i.frontplot.attr("transform",ic(x,E)).call(Y5.setClipUrl,r._hasClipOnAxisFalse?null:r.clipIds.forTraces,r.gd),i.bg.attr("d",V).attr("transform",ic(C,A)).call(Oj.fill,t.bgcolor)};wc.mockAxis=function(e,t,r,i){var n=hl.extendFlat({},r,i);return ejt(n,t,e),n};wc.mockCartesianAxis=function(e,t,r){var i=this,n=i.isSmith,a=r._id,o=hl.extendFlat({type:"linear"},r);$Zt(o,e);var s={x:[0,2],y:[1,3]};return o.setRange=function(){var l=i.sectorBBox,u=s[a],f=i.radialAxis._rl,c=(f[1]-f[0])/(1-i.getHole(t));o.range=[l[u[0]]*c,l[u[1]]*c]},o.isPtWithinRange=a==="x"&&!n?function(l){return i.isPtInside(l)}:function(){return!0},o.setRange(),o.setScale(),o};wc.doAutoRange=function(e,t){var r=this,i=r.gd,n=r.radialAxis,a=r.getRadial(t);tjt(i,n);var o=n.range;if(a.range=o.slice(),a._input.range=o.slice(),n._rl=[n.r2l(o[0],null,"gregorian"),n.r2l(o[1],null,"gregorian")],n.minallowed!==void 0){var s=n.r2l(n.minallowed);n._rl[0]>n._rl[1]?n._rl[1]=Math.max(n._rl[1],s):n._rl[0]=Math.max(n._rl[0],s)}if(n.maxallowed!==void 0){var l=n.r2l(n.maxallowed);n._rl[0]<n._rl[1]?n._rl[1]=Math.min(n._rl[1],l):n._rl[0]=Math.min(n._rl[0],l)}};wc.updateRadialAxis=function(e,t){var r=this,i=r.gd,n=r.layers,a=r.radius,o=r.innerRadius,s=r.cx,l=r.cy,u=r.getRadial(t),f=OWe(r.getSector(t)[0],360),c=r.radialAxis,h=o<a,v=r.isSmith;v||(r.fillViewInitialKey("radialaxis.angle",u.angle),r.fillViewInitialKey("radialaxis.range",c.range.slice()),c.setGeometry()),c.tickangle==="auto"&&f>90&&f<=270&&(c.tickangle=180);var d=v?function(S){var g=n8(r,r8([S.x,0]));return ic(g[0]-s,g[1]-l)}:function(S){return ic(c.l2p(S.x)+o,0)},_=v?function(S){return sjt(r,S.x,-1/0,1/0)}:function(S){return r.pathArc(c.r2p(S.x)+o)},T=NWe(u);if(r.radialTickLayout!==T&&(n["radial-axis"].selectAll(".xtick").remove(),r.radialTickLayout=T),h){c.setScale();var p=0,M=v?(c.tickvals||[]).filter(function(S){return S>=0}).map(function(S){return Pv.tickText(c,S,!0,!1)}):Pv.calcTicks(c),b=v?M:Pv.clipEnds(c,M),w=Pv.getTickSigns(c)[2];v&&((c.ticks==="top"&&c.side==="bottom"||c.ticks==="bottom"&&c.side==="top")&&(w=-w),c.ticks==="top"&&c.side==="top"&&(p=-c.ticklen),c.ticks==="bottom"&&c.side==="bottom"&&(p=c.ticklen)),Pv.drawTicks(i,c,{vals:M,layer:n["radial-axis"],path:Pv.makeTickPath(c,0,w),transFn:d,crisp:!1}),Pv.drawGrid(i,c,{vals:b,layer:n["radial-grid"],path:_,transFn:hl.noop,crisp:!1}),Pv.drawLabels(i,c,{vals:M,layer:n["radial-axis"],transFn:d,labelFns:Pv.makeLabelFns(c,p)})}var k=r.radialAxisAngle=r.vangles?sb(UWe(I1(u.angle),r.vangles)):u.angle,x=ic(s,l),E=x+Tg(-k);W5(n["radial-axis"],h&&(u.showticklabels||u.ticks),{transform:E}),W5(n["radial-grid"],h&&u.showgrid,{transform:v?"":x}),W5(n["radial-line"].select("line"),h&&u.showline,{x1:v?-a:o,y1:0,x2:a,y2:0,transform:E}).attr("stroke-width",u.linewidth).call(Oj.stroke,u.linecolor)};wc.updateRadialAxisTitle=function(e,t,r){if(!this.isSmith){var i=this,n=i.gd,a=i.radius,o=i.cx,s=i.cy,l=i.getRadial(t),u=i.id+"title",f=0;if(l.title){var c=Y5.bBox(i.layers["radial-axis"].node()).height,h=l.title.font.size,v=l.side;f=v==="top"?h:v==="counterclockwise"?-(c+h*.4):c+h*.8}var d=r!==void 0?r:i.radialAxisAngle,_=I1(d),T=Math.cos(_),p=Math.sin(_),M=o+a/2*T+f*p,b=s-a/2*p+f*T;i.layers["radial-axis-title"]=rjt.draw(n,u,{propContainer:l,propName:i.id+".radialaxis.title",placeholder:ljt(n,"Click to enter radial axis title"),attributes:{x:M,y:b,"text-anchor":"middle"},transform:{rotate:-d}})}};wc.updateAngularAxis=function(e,t){var r=this,i=r.gd,n=r.layers,a=r.radius,o=r.innerRadius,s=r.cx,l=r.cy,u=r.getAngular(t),f=r.angularAxis,c=r.isSmith;c||(r.fillViewInitialKey("angularaxis.rotation",u.rotation),f.setGeometry(),f.setScale());var h=c?function(g){var C=n8(r,r8([0,g.x]));return Math.atan2(C[0]-s,C[1]-l)-Math.PI/2}:function(g){return f.t2g(g.x)};f.type==="linear"&&f.thetaunit==="radians"&&(f.tick0=sb(f.tick0),f.dtick=sb(f.dtick));var v=function(g){return ic(s+a*Math.cos(g),l-a*Math.sin(g))},d=c?function(g){var C=n8(r,r8([0,g.x]));return ic(C[0],C[1])}:function(g){return v(h(g))},_=c?function(g){var C=n8(r,r8([0,g.x])),A=Math.atan2(C[0]-s,C[1]-l)-Math.PI/2;return ic(C[0],C[1])+Tg(-sb(A))}:function(g){var C=h(g);return v(C)+Tg(-sb(C))},T=c?function(g){return ojt(r,g.x,0,1/0)}:function(g){var C=h(g),A=Math.cos(C),P=Math.sin(C);return"M"+[s+o*A,l-o*P]+"L"+[s+a*A,l-a*P]},p=Pv.makeLabelFns(f,0),M=p.labelStandoff,b={};b.xFn=function(g){var C=h(g);return Math.cos(C)*M},b.yFn=function(g){var C=h(g),A=Math.sin(C)>0?.2:1;return-Math.sin(C)*(M+g.fontSize*A)+Math.abs(Math.cos(C))*(g.fontSize*ajt)},b.anchorFn=function(g){var C=h(g),A=Math.cos(C);return Math.abs(A)<.1?"middle":A>0?"start":"end"},b.heightFn=function(g,C,A){var P=h(g);return-.5*(1+Math.sin(P))*A};var w=NWe(u);r.angularTickLayout!==w&&(n["angular-axis"].selectAll("."+f._id+"tick").remove(),r.angularTickLayout=w);var k=c?[1/0].concat(f.tickvals||[]).map(function(g){return Pv.tickText(f,g,!0,!1)}):Pv.calcTicks(f);c&&(k[0].text="\u221E",k[0].fontSize*=1.75);var x;if(t.gridshape==="linear"?(x=k.map(h),hl.angleDelta(x[0],x[1])<0&&(x=x.slice().reverse())):x=null,r.vangles=x,f.type==="category"&&(k=k.filter(function(g){return hl.isAngleInsideSector(h(g),r.sectorInRad)})),f.visible){var E=f.ticks==="inside"?-1:1,S=(f.linewidth||1)/2;Pv.drawTicks(i,f,{vals:k,layer:n["angular-axis"],path:"M"+E*S+",0h"+E*f.ticklen,transFn:_,crisp:!1}),Pv.drawGrid(i,f,{vals:k,layer:n["angular-grid"],path:T,transFn:hl.noop,crisp:!1}),Pv.drawLabels(i,f,{vals:k,layer:n["angular-axis"],repositionOnUpdate:!0,transFn:d,labelFns:b})}W5(n["angular-line"].select("path"),u.showline,{d:r.pathSubplot(),transform:ic(s,l)}).attr("stroke-width",u.linewidth).call(Oj.stroke,u.linecolor)};wc.updateFx=function(e,t){if(!this.gd._context.staticPlot){var r=!this.isSmith;r&&(this.updateAngularDrag(e),this.updateRadialDrag(e,t,0),this.updateRadialDrag(e,t,1)),this.updateHoverAndMainDrag(e)}};wc.updateHoverAndMainDrag=function(e){var t=this,r=t.isSmith,i=t.gd,n=t.layers,a=e._zoomlayer,o=D1.MINZOOM,s=D1.OFFEDGE,l=t.radius,u=t.innerRadius,f=t.cx,c=t.cy,h=t.cxx,v=t.cyy,d=t.sectorInRad,_=t.vangles,T=t.radialAxis,p=Py.clampTiny,M=Py.findXYatLength,b=Py.findEnclosingVertexAngles,w=D1.cornerHalfWidth,k=D1.cornerLen/2,x,E,S=Ly.makeDragger(n,"path","maindrag",e.dragmode===!1?"none":"crosshair");ob.select(S).attr("d",t.pathSubplot()).attr("transform",ic(f,c)),S.onmousemove=function(le){IWe.hover(i,le,t.id),i._fullLayout._lasthover=S,i._fullLayout._hoversubplot=t.id},S.onmouseout=function(le){i._dragging||i8.unhover(i,le)};var g={element:S,gd:i,subplot:t.id,plotinfo:{id:t.id,xaxis:t.xaxis,yaxis:t.yaxis},xaxes:[t.xaxis],yaxes:[t.yaxis]},C,A,P,D,z,O,V,B,F;function N(le,we){return Math.sqrt(le*le+we*we)}function Z(le,we){return N(le-h,we-v)}function J(le,we){return Math.atan2(v-we,le-h)}function re(le,we){return[le*Math.cos(we),le*Math.sin(-we)]}function ue(le,we){if(le===0)return t.pathSector(2*w);var Re=k/le,qe=we-Re,et=we+Re,Pe=Math.max(0,Math.min(le,l)),Ie=Pe-w,ut=Pe+w;return"M"+re(Ie,qe)+"A"+[Ie,Ie]+" 0,0,0 "+re(Ie,et)+"L"+re(ut,et)+"A"+[ut,ut]+" 0,0,1 "+re(ut,qe)+"Z"}function fe(le,we,Re){if(le===0)return t.pathSector(2*w);var qe=re(le,we),et=re(le,Re),Pe=p((qe[0]+et[0])/2),Ie=p((qe[1]+et[1])/2),ut,ft;if(Pe&&Ie){var je=Ie/Pe,_t=-1/je,Bt=M(w,je,Pe,Ie);ut=M(k,_t,Bt[0][0],Bt[0][1]),ft=M(k,_t,Bt[1][0],Bt[1][1])}else{var Lt,Me;Ie?(Lt=k,Me=w):(Lt=w,Me=k),ut=[[Pe-Lt,Ie-Me],[Pe+Lt,Ie-Me]],ft=[[Pe-Lt,Ie+Me],[Pe+Lt,Ie+Me]]}return"M"+ut.join("L")+"L"+ft.reverse().join("L")+"Z"}function K(){P=null,D=null,z=t.pathSubplot(),O=!1;var le=i._fullLayout[t.id];V=JZt(le.bgcolor).getLuminance(),B=Ly.makeZoombox(a,V,f,c,z),B.attr("fill-rule","evenodd"),F=Ly.makeCorners(a,f,c),Bj(i)}function X(le,we){return we=Math.max(Math.min(we,l),u),le<s?le=0:l-le<s?le=l:we<s?we=0:l-we<s&&(we=l),Math.abs(we-le)>o?(le<we?(P=le,D=we):(P=we,D=le),!0):(P=null,D=null,!1)}function ae(le,we){le=le||z,we=we||"M0,0Z",B.attr("d",le),F.attr("d",we),Ly.transitionZoombox(B,F,O,V),O=!0;var Re={};ie(Re),i.emit("plotly_relayouting",Re)}function oe(le,we){le=le*x,we=we*E;var Re=C+le,qe=A+we,et=Z(C,A),Pe=Math.min(Z(Re,qe),l),Ie=J(C,A),ut,ft;X(et,Pe)&&(ut=z+t.pathSector(D),P&&(ut+=t.pathSector(P)),ft=ue(P,Ie)+ue(D,Ie)),ae(ut,ft)}function me(le,we,Re,qe){var et=Py.findIntersectionXY(Re,qe,Re,[le-h,v-we]);return N(et[0],et[1])}function xe(le,we){var Re=C+le,qe=A+we,et=J(C,A),Pe=J(Re,qe),Ie=b(et,_),ut=b(Pe,_),ft=me(C,A,Ie[0],Ie[1]),je=Math.min(me(Re,qe,ut[0],ut[1]),l),_t,Bt;X(ft,je)&&(_t=z+t.pathSector(D),P&&(_t+=t.pathSector(P)),Bt=[fe(P,Ie[0],Ie[1]),fe(D,Ie[0],Ie[1])].join(" ")),ae(_t,Bt)}function ce(){if(Ly.removeZoombox(i),!(P===null||D===null)){var le={};ie(le),Ly.showDoubleClickNotifier(i),lb.call("_guiRelayout",i,le)}}function ie(le){var we=T._rl,Re=(we[1]-we[0])/(1-u/l)/l,qe=[we[0]+(P-u)*Re,we[0]+(D-u)*Re];le[t.id+".radialaxis.range"]=qe}function ge(le,we){var Re=i._fullLayout.clickmode;if(Ly.removeZoombox(i),le===2){var qe={};for(var et in t.viewInitial)qe[t.id+"."+et]=t.viewInitial[et];i.emit("plotly_doubleclick",null),lb.call("_guiRelayout",i,qe)}Re.indexOf("select")>-1&&le===1&&ijt(we,i,[t.xaxis],[t.yaxis],t.id,g),Re.indexOf("event")>-1&&IWe.click(i,we,t.id)}g.prepFn=function(le,we,Re){var qe=i._fullLayout.dragmode,et=S.getBoundingClientRect();i._fullLayout._calcInverseTransform(i);var Pe=i._fullLayout._invTransform;x=i._fullLayout._invScaleX,E=i._fullLayout._invScaleY;var Ie=hl.apply3DTransform(Pe)(we-et.left,Re-et.top);if(C=Ie[0],A=Ie[1],_){var ut=Py.findPolygonOffset(l,d[0],d[1],_);C+=h+ut[0],A+=v+ut[1]}switch(qe){case"zoom":g.clickFn=ge,r||(_?g.moveFn=xe:g.moveFn=oe,g.doneFn=ce,K(le,we,Re));break;case"select":case"lasso":njt(le,we,Re,g,qe);break}},i8.init(g)};wc.updateRadialDrag=function(e,t,r){var i=this,n=i.gd,a=i.layers,o=i.radius,s=i.innerRadius,l=i.cx,u=i.cy,f=i.radialAxis,c=D1.radialDragBoxSize,h=c/2;if(!f.visible)return;var v=I1(i.radialAxisAngle),d=f._rl,_=d[0],T=d[1],p=d[r],M=.75*(d[1]-d[0])/(1-i.getHole(t))/o,b,w,k;r?(b=l+(o+h)*Math.cos(v),w=u-(o+h)*Math.sin(v),k="radialdrag"):(b=l+(s-h)*Math.cos(v),w=u-(s-h)*Math.sin(v),k="radialdrag-inner");var x=Ly.makeRectDragger(a,k,"crosshair",-h,-h,c,c),E={element:x,gd:n};e.dragmode===!1&&(E.dragmode=!1),W5(ob.select(x),f.visible&&s<o,{transform:ic(b,w)});var S,g,C;function A(V,B){if(S)S(V,B);else{var F=[V,-B],N=[Math.cos(v),Math.sin(v)],Z=Math.abs(hl.dot(F,N)/Math.sqrt(hl.dot(F,F)));isNaN(Z)||(S=Z<.5?z:O)}var J={};P(J),n.emit("plotly_relayouting",J)}function P(V){g!==null?V[i.id+".radialaxis.angle"]=g:C!==null&&(V[i.id+".radialaxis.range["+r+"]"]=C)}function D(){g!==null?lb.call("_guiRelayout",n,i.id+".radialaxis.angle",g):C!==null&&lb.call("_guiRelayout",n,i.id+".radialaxis.range["+r+"]",C)}function z(V,B){if(r!==0){var F=b+V,N=w+B;g=Math.atan2(u-N,F-l),i.vangles&&(g=UWe(g,i.vangles)),g=sb(g);var Z=ic(l,u)+Tg(-g);a["radial-axis"].attr("transform",Z),a["radial-line"].select("line").attr("transform",Z);var J=i.gd._fullLayout,re=J[i.id];i.updateRadialAxisTitle(J,re,g)}}function O(V,B){var F=hl.dot([V,-B],[Math.cos(v),Math.sin(v)]);if(C=p-M*F,M>0!=(r?C>_:C<T)){C=null;return}var N=n._fullLayout,Z=N[i.id];f.range[r]=C,f._rl[r]=C,i.updateRadialAxis(N,Z),i.xaxis.setRange(),i.xaxis.setScale(),i.yaxis.setRange(),i.yaxis.setScale();var J=!1;for(var re in i.traceHash){var ue=i.traceHash[re],fe=hl.filterVisible(ue),K=ue[0][0].trace._module;K.plot(n,i,fe,Z),lb.traceIs(re,"gl")&&fe.length&&(J=!0)}J&&(qWe(n),zWe(n))}E.prepFn=function(){S=null,g=null,C=null,E.moveFn=A,E.doneFn=D,Bj(n)},E.clampFn=function(V,B){return Math.sqrt(V*V+B*B)<D1.MINDRAG&&(V=0,B=0),[V,B]},i8.init(E)};wc.updateAngularDrag=function(e){var t=this,r=t.gd,i=t.layers,n=t.radius,a=t.angularAxis,o=t.cx,s=t.cy,l=t.cxx,u=t.cyy,f=D1.angularDragBoxSize,c=Ly.makeDragger(i,"path","angulardrag",e.dragmode===!1?"none":"move"),h={element:c,gd:r};e.dragmode===!1?h.dragmode=!1:ob.select(c).attr("d",t.pathAnnulus(n,n+f)).attr("transform",ic(o,s)).call(FWe,"move");function v(C,A){return Math.atan2(u+f-A,C-l-f)}var d=i.frontplot.select(".scatterlayer").selectAll(".trace"),_=d.selectAll(".point"),T=d.selectAll(".textpoint"),p,M,b,w,k,x;function E(C,A){var P=t.gd._fullLayout,D=P[t.id],z=p+C*e._invScaleX,O=M+A*e._invScaleY,V=v(z,O),B=sb(V-x);if(w=b+B,i.frontplot.attr("transform",ic(t.xOffset2,t.yOffset2)+Tg([-B,l,u])),t.vangles){k=t.radialAxisAngle+B;var F=ic(o,s)+Tg(-B),N=ic(o,s)+Tg(-k);i.bg.attr("transform",F),i["radial-grid"].attr("transform",F),i["radial-axis"].attr("transform",N),i["radial-line"].select("line").attr("transform",N),t.updateRadialAxisTitle(P,D,k)}else t.clipPaths.forTraces.select("path").attr("transform",ic(l,u)+Tg(B));_.each(function(){var X=ob.select(this),ae=Y5.getTranslate(X);X.attr("transform",ic(ae.x,ae.y)+Tg([B]))}),T.each(function(){var X=ob.select(this),ae=X.select("text"),oe=Y5.getTranslate(X);X.attr("transform",Tg([B,ae.attr("x"),ae.attr("y")])+ic(oe.x,oe.y))}),a.rotation=hl.modHalf(w,360),t.updateAngularAxis(P,D),t._hasClipOnAxisFalse&&!hl.isFullCircle(t.sectorInRad)&&d.call(Y5.hideOutsideRangePoints,t);var Z=!1;for(var J in t.traceHash)if(lb.traceIs(J,"gl")){var re=t.traceHash[J],ue=hl.filterVisible(re),fe=re[0][0].trace._module;fe.plot(r,t,ue,D),ue.length&&(Z=!0)}Z&&(qWe(r),zWe(r));var K={};S(K),r.emit("plotly_relayouting",K)}function S(C){C[t.id+".angularaxis.rotation"]=w,t.vangles&&(C[t.id+".radialaxis.angle"]=k)}function g(){T.select("text").attr("transform",null);var C={};S(C),lb.call("_guiRelayout",r,C)}h.prepFn=function(C,A,P){var D=e[t.id];b=D.angularaxis.rotation;var z=c.getBoundingClientRect();p=A-z.left,M=P-z.top,r._fullLayout._calcInverseTransform(r);var O=hl.apply3DTransform(e._invTransform)(p,M);p=O[0],M=O[1],x=v(p,M),h.moveFn=E,h.doneFn=g,Bj(r)},t.vangles&&!hl.isFullCircle(t.sectorInRad)&&(h.prepFn=hl.noop,FWe(ob.select(c),null)),i8.init(h)};wc.isPtInside=function(e){if(this.isSmith)return!0;var t=this.sectorInRad,r=this.vangles,i=this.angularAxis.c2g(e.theta),n=this.radialAxis,a=n.c2l(e.r),o=n._rl,s=r?Py.isPtInsidePolygon:hl.isPtInsideSector;return s(a,i,o,t,r)};wc.pathArc=function(e){var t=this.sectorInRad,r=this.vangles,i=r?Py.pathPolygon:hl.pathArc;return i(e,t[0],t[1],r)};wc.pathSector=function(e){var t=this.sectorInRad,r=this.vangles,i=r?Py.pathPolygon:hl.pathSector;return i(e,t[0],t[1],r)};wc.pathAnnulus=function(e,t){var r=this.sectorInRad,i=this.vangles,n=i?Py.pathPolygonAnnulus:hl.pathAnnulus;return n(e,t,r[0],r[1],i)};wc.pathSubplot=function(){var e=this.innerRadius,t=this.radius;return e?this.pathAnnulus(e,t):this.pathSector(t)};wc.fillViewInitialKey=function(e,t){e in this.viewInitial||(this.viewInitial[e]=t)};function NWe(e){var t=e.ticks+String(e.ticklen)+String(e.showticklabels);return"side"in e&&(t+=e.side),t}function ujt(e){var t=e[0],r=e[1],i=r-t,n=OWe(t,360),a=n+i,o=Math.cos(I1(n)),s=Math.sin(I1(n)),l=Math.cos(I1(a)),u=Math.sin(I1(a)),f,c,h,v;return n<=90&&a>=90||n>90&&a>=450?v=1:s<=0&&u<=0?v=0:v=Math.max(s,u),n<=180&&a>=180||n>180&&a>=540?f=-1:o>=0&&l>=0?f=0:f=Math.min(o,l),n<=270&&a>=270||n>270&&a>=630?c=-1:s>=0&&u>=0?c=0:c=Math.min(s,u),a>=360?h=1:o<=0&&l<=0?h=0:h=Math.max(o,l),[f,c,h,v]}function UWe(e,t){var r=function(n){return hl.angleDist(e,n)},i=hl.findIndexOfMin(t,r);return t[i]}function W5(e,t,r){return t?(e.attr("display",null),e.attr(r)):e&&e.attr("display","none"),e}});var Uj=ne((W1r,ZWe)=>{"use strict";var fjt=Ku(),Fa=dc(),cjt=fl().attributes,Nd=Wt().extendFlat,HWe=Xs().overrideAll,GWe=HWe({color:Fa.color,showline:Nd({},Fa.showline,{dflt:!0}),linecolor:Fa.linecolor,linewidth:Fa.linewidth,showgrid:Nd({},Fa.showgrid,{dflt:!0}),gridcolor:Fa.gridcolor,gridwidth:Fa.gridwidth,griddash:Fa.griddash},"plot","from-root"),YWe=HWe({tickmode:Fa.minor.tickmode,nticks:Fa.nticks,tick0:Fa.tick0,dtick:Fa.dtick,tickvals:Fa.tickvals,ticktext:Fa.ticktext,ticks:Fa.ticks,ticklen:Fa.ticklen,tickwidth:Fa.tickwidth,tickcolor:Fa.tickcolor,ticklabelstep:Fa.ticklabelstep,showticklabels:Fa.showticklabels,labelalias:Fa.labelalias,showtickprefix:Fa.showtickprefix,tickprefix:Fa.tickprefix,showticksuffix:Fa.showticksuffix,ticksuffix:Fa.ticksuffix,showexponent:Fa.showexponent,exponentformat:Fa.exponentformat,minexponent:Fa.minexponent,separatethousands:Fa.separatethousands,tickfont:Fa.tickfont,tickangle:Fa.tickangle,tickformat:Fa.tickformat,tickformatstops:Fa.tickformatstops,layer:Fa.layer},"plot","from-root"),WWe={visible:Nd({},Fa.visible,{dflt:!0}),type:Nd({},Fa.type,{values:["-","linear","log","date","category"]}),autotypenumbers:Fa.autotypenumbers,autorangeoptions:{minallowed:Fa.autorangeoptions.minallowed,maxallowed:Fa.autorangeoptions.maxallowed,clipmin:Fa.autorangeoptions.clipmin,clipmax:Fa.autorangeoptions.clipmax,include:Fa.autorangeoptions.include,editType:"plot"},autorange:Nd({},Fa.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:Nd({},Fa.minallowed,{editType:"plot"}),maxallowed:Nd({},Fa.maxallowed,{editType:"plot"}),range:Nd({},Fa.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:Fa.categoryorder,categoryarray:Fa.categoryarray,angle:{valType:"angle",editType:"plot"},autotickangles:Fa.autotickangles,side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:Nd({},Fa.title.text,{editType:"plot",dflt:""}),font:Nd({},Fa.title.font,{editType:"plot"}),editType:"plot"},hoverformat:Fa.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:Fa._deprecated.title,titlefont:Fa._deprecated.titlefont}};Nd(WWe,GWe,YWe);var XWe={visible:Nd({},Fa.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:Fa.autotypenumbers,categoryorder:Fa.categoryorder,categoryarray:Fa.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:Fa.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};Nd(XWe,GWe,YWe);ZWe.exports={domain:cjt({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:fjt.background},radialaxis:WWe,angularaxis:XWe,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}});var QWe=ne((X1r,JWe)=>{"use strict";var o8=Wt(),hjt=_i(),vjt=So(),djt=Kx(),pjt=vc().getSubplotData,gjt=hx(),yjt=v2(),mjt=im(),xjt=am(),_jt=dL(),bjt=kM(),wjt=lO(),Tjt=m2(),KWe=Uj(),Ajt=Ij(),s8=$F(),jWe=s8.axisNames;function Mjt(e,t,r,i){var n=r("bgcolor");i.bgColor=hjt.combine(n,i.paper_bgcolor);var a=r("sector");r("hole");var o=pjt(i.fullData,s8.name,i.id),s=i.layoutOut,l;function u(A,P){return r(l+"."+A,P)}for(var f=0;f<jWe.length;f++){l=jWe[f],o8.isPlainObject(e[l])||(e[l]={});var c=e[l],h=vjt.newContainer(t,l);h._id=h._name=l,h._attr=i.id+"."+l,h._traceIndices=o.map(function(A){return A._expandedIndex});var v=s8.axisName2dataArray[l],d=Sjt(c,h,u,o,v,i);_jt(c,h,u,{axData:o,dataAttr:v});var _=u("visible");switch(Ajt(h,t,s),u("uirevision",t.uirevision),h._m=1,l){case"radialaxis":u("minallowed"),u("maxallowed");var T=u("range"),p=h.getAutorangeDflt(T),M=u("autorange",p),b;T&&(T[0]===null&&T[1]===null||(T[0]===null||T[1]===null)&&(M==="reversed"||M===!0)||T[0]!==null&&(M==="min"||M==="max reversed")||T[1]!==null&&(M==="max"||M==="min reversed"))&&(T=void 0,delete h.range,h.autorange=!0,b=!0),b||(p=h.getAutorangeDflt(T),M=u("autorange",p)),c.autorange=M,M&&(wjt(u,M,T),(d==="linear"||d==="-")&&u("rangemode"),h.isReversed()&&(h._m=-1)),h.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(d==="date"){o8.log("Polar plots do not support date angular axes yet.");for(var w=0;w<o.length;w++)o[w].visible=!1;d=c.type=h.type="linear"}u(d==="linear"?"thetaunit":"period");var k=u("direction");u("rotation",{counterclockwise:0,clockwise:90}[k]);break}if(xjt(c,h,u,h.type,{tickSuffixDflt:h.thetaunit==="degrees"?"\xB0":void 0}),_){var x,E,S,g,C=i.font||{};x=u("color"),E=x===c.color?x:C.color,S=C.size,g=C.family,gjt(c,h,u,h.type),mjt(c,h,u,h.type,{font:{color:E,size:S,family:g},noAutotickangles:l==="angularaxis"}),yjt(c,h,u,{outerTicks:!0}),bjt(c,h,u,{dfltColor:x,bgColor:i.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:KWe[l]}),u("layer"),l==="radialaxis"&&(u("side"),u("angle",a[0]),u("title.text"),o8.coerceFont(u,"title.font",{color:E,size:o8.bigFont(S),family:g}))}d!=="category"&&u("hoverformat"),h._input=c}t.angularaxis.type==="category"&&r("gridshape")}function Sjt(e,t,r,i,n,a){var o=r("autotypenumbers",a.autotypenumbersDflt),s=r("type");if(s==="-"){for(var l,u=0;u<i.length;u++)if(i[u].visible){l=i[u];break}l&&l[n]&&(t.type=Tjt(l[n],"gregorian",{noMultiCategory:!0,autotypenumbers:o})),t.type==="-"?t.type="linear":e.type=t.type}return t.type}JWe.exports=function(t,r,i){djt(t,r,i,{type:s8.name,attributes:KWe,handleDefaults:Mjt,font:r.font,autotypenumbersDflt:r.autotypenumbers,paper_bgcolor:r.paper_bgcolor,fullData:i,layoutOut:r})}});var l8=ne((Z1r,nXe)=>{"use strict";var Ejt=vc().getSubplotCalcData,kjt=Wt().counterRegex,Cjt=Nj(),eXe=$F(),tXe=eXe.attr,ub=eXe.name,$We=kjt(ub),rXe={};rXe[tXe]={valType:"subplotid",dflt:ub,editType:"calc"};function Ljt(e){for(var t=e._fullLayout,r=e.calcdata,i=t._subplots[ub],n=0;n<i.length;n++){var a=i[n],o=Ejt(r,ub,a),s=t[a]._subplot;s||(s=Cjt(e,a),t[a]._subplot=s),s.plot(o,t,e._promises)}}function Pjt(e,t,r,i){for(var n=i._subplots[ub]||[],a=i._has&&i._has("gl"),o=t._has&&t._has("gl"),s=a&&!o,l=0;l<n.length;l++){var u=n[l],f=i[u]._subplot;if(!t[u]&&f){f.framework.remove(),f.layers["radial-axis-title"].remove();for(var c in f.clipPaths)f.clipPaths[c].remove()}s&&f._scene&&(f._scene.destroy(),f._scene=null)}}nXe.exports={attr:tXe,name:ub,idRoot:ub,idRegex:$We,attrRegex:$We,attributes:rXe,layoutAttributes:Uj(),supplyLayoutDefaults:QWe(),plot:Ljt,clean:Pjt,toSVG:vu().toSVG}});var X5=ne((j1r,iXe)=>{"use strict";var Rjt=Ba().hovertemplateAttrs,Djt=Ba().texttemplateAttrs,u8=oa().extendFlat,Ijt=Y0(),Ud=cu(),Fjt=es(),CT=Ud.line;iXe.exports={mode:Ud.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:Ud.text,texttemplate:Djt({editType:"plot"},{keys:["r","theta","text"]}),hovertext:Ud.hovertext,line:{color:CT.color,width:CT.width,dash:CT.dash,backoff:CT.backoff,shape:u8({},CT.shape,{values:["linear","spline"]}),smoothing:CT.smoothing,editType:"calc"},connectgaps:Ud.connectgaps,marker:Ud.marker,cliponaxis:u8({},Ud.cliponaxis,{dflt:!1}),textposition:Ud.textposition,textfont:Ud.textfont,fill:u8({},Ud.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:Ijt(),hoverinfo:u8({},Fjt.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:Ud.hoveron,hovertemplate:Rjt(),selected:Ud.selected,unselected:Ud.unselected}});var c8=ne((K1r,sXe)=>{"use strict";var f8=Wt(),LT=js(),qjt=dp(),zjt=s0(),aXe=B2(),Ojt=l0(),Bjt=X0(),Njt=G0().PTS_LINESONLY,Ujt=X5();function Vjt(e,t,r,i){function n(s,l){return f8.coerce(e,t,Ujt,s,l)}var a=oXe(e,t,i,n);if(!a){t.visible=!1;return}n("thetaunit"),n("mode",a<Njt?"lines+markers":"lines"),n("text"),n("hovertext"),t.hoveron!=="fills"&&n("hovertemplate"),LT.hasMarkers(t)&&qjt(e,t,r,i,n,{gradient:!0}),LT.hasLines(t)&&(zjt(e,t,r,i,n,{backoff:!0}),aXe(e,t,n),n("connectgaps")),LT.hasText(t)&&(n("texttemplate"),Ojt(e,t,i,n));var o=[];(LT.hasMarkers(t)||LT.hasText(t))&&(n("cliponaxis"),n("marker.maxdisplayed"),o.push("points")),n("fill"),t.fill!=="none"&&(Bjt(e,t,r,n),LT.hasLines(t)||aXe(e,t,n)),(t.fill==="tonext"||t.fill==="toself")&&o.push("fills"),n("hoveron",o.join("+")||"points"),f8.coerceSelectionMarkerOpacity(t,n)}function oXe(e,t,r,i){var n=i("r"),a=i("theta");f8.isTypedArray(n)&&(t.r=n=Array.from(n)),f8.isTypedArray(a)&&(t.theta=a=Array.from(a));var o;if(n)a?o=Math.min(n.length,a.length):(o=n.length,i("theta0"),i("dtheta"));else{if(!a)return 0;o=t.theta.length,i("r0"),i("dr")}return t._length=o,o}sXe.exports={handleRThetaDefaults:oXe,supplyDefaults:Vjt}});var h8=ne((J1r,uXe)=>{"use strict";var Hjt=Wt(),lXe=Xi();uXe.exports=function(t,r,i){var n={},a=i[r.subplot]._subplot,o,s;a?(o=a.radialAxis,s=a.angularAxis):(a=i[r.subplot],o=a.radialaxis,s=a.angularaxis);var l=o.c2l(t.r);n.rLabel=lXe.tickText(o,l,!0).text;var u=s.thetaunit==="degrees"?Hjt.rad2deg(t.theta):t.theta;return n.thetaLabel=lXe.tickText(s,u,!0).text,n}});var hXe=ne((Q1r,cXe)=>{"use strict";var fXe=la(),Gjt=$a().BADNUM,Yjt=Xi(),Wjt=pp(),Xjt=Z0(),Zjt=gp(),jjt=yp().calcMarkerSize;cXe.exports=function(t,r){for(var i=t._fullLayout,n=r.subplot,a=i[n].radialaxis,o=i[n].angularaxis,s=a.makeCalcdata(r,"r"),l=o.makeCalcdata(r,"theta"),u=r._length,f=new Array(u),c=0;c<u;c++){var h=s[c],v=l[c],d=f[c]={};fXe(h)&&fXe(v)?(d.r=h,d.theta=v):d.r=Gjt}var _=jjt(r,u);return r._extremes.x=Yjt.findExtremes(a,s,{ppad:_}),Wjt(t,r),Xjt(f,r),Zjt(f,r),f}});var pXe=ne(($1r,dXe)=>{"use strict";var Kjt=Y2(),vXe=$a().BADNUM;dXe.exports=function(t,r,i){for(var n=r.layers.frontplot.select("g.scatterlayer"),a=r.xaxis,o=r.yaxis,s={xaxis:a,yaxis:o,plot:r.framework,layerClipId:r._hasClipOnAxisFalse?r.clipIds.forTraces:null},l=r.radialAxis,u=r.angularAxis,f=0;f<i.length;f++)for(var c=i[f],h=0;h<c.length;h++){h===0&&(c[0].trace._xA=a,c[0].trace._yA=o);var v=c[h],d=v.r;if(d===vXe)v.x=v.y=vXe;else{var _=l.c2g(d),T=u.c2g(v.theta);v.x=_*Math.cos(T),v.y=_*Math.sin(T)}}Kjt(t,s,i,n)}});var v8=ne((exr,yXe)=>{"use strict";var Jjt=j2();function Qjt(e,t,r,i){var n=Jjt(e,t,r,i);if(!(!n||n[0].index===!1)){var a=n[0];if(a.index===void 0)return n;var o=e.subplot,s=a.cd[a.index],l=a.trace;if(o.isPtInside(s))return a.xLabelVal=void 0,a.yLabelVal=void 0,gXe(s,l,o,a),a.hovertemplate=l.hovertemplate,n}}function gXe(e,t,r,i){var n=r.radialAxis,a=r.angularAxis;n._hovertitle="r",a._hovertitle="\u03B8";var o={};o[t.subplot]={_subplot:r};var s=t._module.formatLabels(e,t,o);i.rLabel=s.rLabel,i.thetaLabel=s.thetaLabel;var l=e.hi||t.hoverinfo,u=[];function f(h,v){u.push(h._hovertitle+": "+v)}if(!t.hovertemplate){var c=l.split("+");c.indexOf("all")!==-1&&(c=["r","theta","text"]),c.indexOf("r")!==-1&&f(n,i.rLabel),c.indexOf("theta")!==-1&&f(a,i.thetaLabel),c.indexOf("text")!==-1&&i.text&&(u.push(i.text),delete i.text),i.extraText=u.join("<br>")}}yXe.exports={hoverPoints:Qjt,makeHoverPointText:gXe}});var xXe=ne((txr,mXe)=>{"use strict";mXe.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:l8(),categories:["polar","symbols","showLegend","scatter-like"],attributes:X5(),supplyDefaults:c8().supplyDefaults,colorbar:ph(),formatLabels:h8(),calc:hXe(),plot:pXe(),style:Tv().style,styleOnSelect:Tv().styleOnSelect,hoverPoints:v8().hoverPoints,selectPoints:K2(),meta:{}}});var bXe=ne((rxr,_Xe)=>{"use strict";_Xe.exports=xXe()});var Vj=ne((nxr,wXe)=>{"use strict";var xd=X5(),Ry=YE(),$jt=Ba().texttemplateAttrs;wXe.exports={mode:xd.mode,r:xd.r,theta:xd.theta,r0:xd.r0,dr:xd.dr,theta0:xd.theta0,dtheta:xd.dtheta,thetaunit:xd.thetaunit,text:xd.text,texttemplate:$jt({editType:"plot"},{keys:["r","theta","text"]}),hovertext:xd.hovertext,hovertemplate:xd.hovertemplate,line:{color:Ry.line.color,width:Ry.line.width,dash:Ry.line.dash,editType:"calc"},connectgaps:Ry.connectgaps,marker:Ry.marker,fill:Ry.fill,fillcolor:Ry.fillcolor,textposition:Ry.textposition,textfont:Ry.textfont,hoverinfo:xd.hoverinfo,selected:xd.selected,unselected:xd.unselected}});var MXe=ne((ixr,AXe)=>{"use strict";var TXe=Wt(),Hj=js(),eKt=c8().handleRThetaDefaults,tKt=dp(),rKt=s0(),nKt=l0(),iKt=X0(),aKt=G0().PTS_LINESONLY,oKt=Vj();AXe.exports=function(t,r,i,n){function a(s,l){return TXe.coerce(t,r,oKt,s,l)}var o=eKt(t,r,n,a);if(!o){r.visible=!1;return}a("thetaunit"),a("mode",o<aKt?"lines+markers":"lines"),a("text"),a("hovertext"),r.hoveron!=="fills"&&a("hovertemplate"),Hj.hasMarkers(r)&&tKt(t,r,i,n,a,{noAngleRef:!0,noStandOff:!0}),Hj.hasLines(r)&&(rKt(t,r,i,n,a),a("connectgaps")),Hj.hasText(r)&&(a("texttemplate"),nKt(t,r,n,a)),a("fill"),r.fill!=="none"&&iKt(t,r,i,a),TXe.coerceSelectionMarkerOpacity(r,a)}});var EXe=ne((axr,SXe)=>{"use strict";var sKt=h8();SXe.exports=function(t,r,i){var n=t.i;return"r"in t||(t.r=r._r[n]),"theta"in t||(t.theta=r._theta[n]),sKt(t,r,i)}});var CXe=ne((oxr,kXe)=>{"use strict";var lKt=pp(),uKt=yp().calcMarkerSize,fKt=U_(),cKt=Xi(),hKt=h1().TOO_MANY_POINTS;kXe.exports=function(t,r){var i=t._fullLayout,n=r.subplot,a=i[n].radialaxis,o=i[n].angularaxis,s=r._r=a.makeCalcdata(r,"r"),l=r._theta=o.makeCalcdata(r,"theta"),u=r._length,f={};u<s.length&&(s=s.slice(0,u)),u<l.length&&(l=l.slice(0,u)),f.r=s,f.theta=l,lKt(t,r);var c=f.opts=fKt.style(t,r),h;return u<hKt?h=uKt(r,u):c.marker&&(h=2*(c.marker.sizeAvg||Math.max(c.marker.size,3))),r._extremes.x=cKt.findExtremes(a,s,{ppad:h}),[{x:!1,y:!1,t:f,trace:r}]}});var PXe=ne((sxr,LXe)=>{"use strict";var vKt=OD(),dKt=v8().makeHoverPointText;function pKt(e,t,r,i){var n=e.cd,a=n[0].t,o=a.r,s=a.theta,l=vKt.hoverPoints(e,t,r,i);if(!(!l||l[0].index===!1)){var u=l[0];if(u.index===void 0)return l;var f=e.subplot,c=u.cd[u.index],h=u.trace;if(c.r=o[u.index],c.theta=s[u.index],!!f.isPtInside(c))return u.xLabelVal=void 0,u.yLabelVal=void 0,dKt(c,h,f,u),l}}LXe.exports={hoverPoints:pKt}});var DXe=ne((lxr,RXe)=>{"use strict";RXe.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:l8(),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:Vj(),supplyDefaults:MXe(),colorbar:ph(),formatLabels:EXe(),calc:CXe(),hoverPoints:PXe().hoverPoints,selectPoints:dW(),meta:{}}});var IXe=ne((uxr,Gj)=>{"use strict";var gKt=UD(),yKt=la(),mKt=mX(),xKt=cW(),d8=U_(),p8=Wt(),_Kt=h1().TOO_MANY_POINTS,bKt={};Gj.exports=function(t,r,i){if(i.length){var n=r.radialAxis,a=r.angularAxis,o=xKt(t,r);return i.forEach(function(s){if(!(!s||!s[0]||!s[0].trace)){var l=s[0],u=l.trace,f=l.t,c=u._length,h=f.r,v=f.theta,d=f.opts,_,T=h.slice(),p=v.slice();for(_=0;_<h.length;_++)r.isPtInside({r:h[_],theta:v[_]})||(T[_]=NaN,p[_]=NaN);var M=new Array(c*2),b=Array(c),w=Array(c);for(_=0;_<c;_++){var k=T[_],x,E;if(yKt(k)){var S=n.c2g(k),g=a.c2g(p[_],u.thetaunit);x=S*Math.cos(g),E=S*Math.sin(g)}else x=E=NaN;b[_]=M[_*2]=x,w[_]=M[_*2+1]=E}f.tree=gKt(M),d.marker&&c>=_Kt&&(d.marker.cluster=f.tree),d.marker&&(d.markerSel.positions=d.markerUnsel.positions=d.marker.positions=M),d.line&&M.length>1&&p8.extendFlat(d.line,d8.linePositions(t,u,M)),d.text&&(p8.extendFlat(d.text,{positions:M},d8.textPosition(t,u,d.text,d.marker)),p8.extendFlat(d.textSel,{positions:M},d8.textPosition(t,u,d.text,d.markerSel)),p8.extendFlat(d.textUnsel,{positions:M},d8.textPosition(t,u,d.text,d.markerUnsel))),d.fill&&!o.fill2d&&(o.fill2d=!0),d.marker&&!o.scatter2d&&(o.scatter2d=!0),d.line&&!o.line2d&&(o.line2d=!0),d.text&&!o.glText&&(o.glText=!0),o.lineOptions.push(d.line),o.fillOptions.push(d.fill),o.markerOptions.push(d.marker),o.markerSelectedOptions.push(d.markerSel),o.markerUnselectedOptions.push(d.markerUnsel),o.textOptions.push(d.text),o.textSelectedOptions.push(d.textSel),o.textUnselectedOptions.push(d.textUnsel),o.selectBatch.push([]),o.unselectBatch.push([]),f.x=b,f.y=w,f.rawx=b,f.rawy=w,f.r=h,f.theta=v,f.positions=M,f._scene=o,f.index=o.count,o.count++}}),mKt(t,r,i)}};Gj.exports.reglPrecompiled=bKt});var zXe=ne((fxr,qXe)=>{"use strict";var FXe=DXe();FXe.plot=IXe();qXe.exports=FXe});var BXe=ne((cxr,OXe)=>{"use strict";OXe.exports=zXe()});var Yj=ne((hxr,NXe)=>{"use strict";var wKt=Ba().hovertemplateAttrs,PT=oa().extendFlat,F1=X5(),q1=J0();NXe.exports={r:F1.r,theta:F1.theta,r0:F1.r0,dr:F1.dr,theta0:F1.theta0,dtheta:F1.dtheta,thetaunit:F1.thetaunit,base:PT({},q1.base,{}),offset:PT({},q1.offset,{}),width:PT({},q1.width,{}),text:PT({},q1.text,{}),hovertext:PT({},q1.hovertext,{}),marker:TKt(),hoverinfo:F1.hoverinfo,hovertemplate:wKt(),selected:q1.selected,unselected:q1.unselected};function TKt(){var e=PT({},q1.marker);return delete e.cornerradius,e}});var Wj=ne((vxr,UXe)=>{"use strict";UXe.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}});var GXe=ne((dxr,HXe)=>{"use strict";var VXe=Wt(),AKt=c8().handleRThetaDefaults,MKt=KL(),SKt=Yj();HXe.exports=function(t,r,i,n){function a(s,l){return VXe.coerce(t,r,SKt,s,l)}var o=AKt(t,r,n,a);if(!o){r.visible=!1;return}a("thetaunit"),a("base"),a("offset"),a("width"),a("text"),a("hovertext"),a("hovertemplate"),MKt(t,r,a,i,n),VXe.coerceSelectionMarkerOpacity(r,a)}});var WXe=ne((pxr,YXe)=>{"use strict";var EKt=Wt(),kKt=Wj();YXe.exports=function(e,t,r){var i={},n;function a(l,u){return EKt.coerce(e[n]||{},t[n],kKt,l,u)}for(var o=0;o<r.length;o++){var s=r[o];s.type==="barpolar"&&s.visible===!0&&(n=s.subplot,i[n]||(a("barmode"),a("bargap"),i[n]=1))}}});var Xj=ne((gxr,jXe)=>{"use strict";var XXe=Uh().hasColorscale,ZXe=gv(),CKt=Wt().isArrayOrTypedArray,LKt=GM(),PKt=Ix().setGroupPositions,RKt=gp(),DKt=wi().traceIs,IKt=Wt().extendFlat;function FKt(e,t){for(var r=e._fullLayout,i=t.subplot,n=r[i].radialaxis,a=r[i].angularaxis,o=n.makeCalcdata(t,"r"),s=a.makeCalcdata(t,"theta"),l=t._length,u=new Array(l),f=o,c=s,h=0;h<l;h++)u[h]={p:c[h],s:f[h]};function v(d){var _=t[d];_!==void 0&&(t["_"+d]=CKt(_)?a.makeCalcdata(t,d):a.d2c(_,t.thetaunit))}return a.type==="linear"&&(v("width"),v("offset")),XXe(t,"marker")&&ZXe(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),XXe(t,"marker.line")&&ZXe(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),LKt(u,t),RKt(u,t),u}function qKt(e,t,r){for(var i=e.calcdata,n=[],a=0;a<i.length;a++){var o=i[a],s=o[0].trace;s.visible===!0&&DKt(s,"bar")&&s.subplot===r&&n.push(o)}var l=IKt({},t.radialaxis,{_id:"x"}),u=t.angularaxis;PKt(e,u,l,n,{mode:t.barmode,norm:t.barnorm,gap:t.bargap,groupgap:t.bargroupgap})}jXe.exports={calc:FKt,crossTraceCalc:qKt}});var QXe=ne((yxr,JXe)=>{"use strict";var KXe=Ai(),g8=la(),RT=Wt(),zKt=aa(),Zj=t8();JXe.exports=function(t,r,i){var n=t._context.staticPlot,a=r.xaxis,o=r.yaxis,s=r.radialAxis,l=r.angularAxis,u=OKt(r),f=r.layers.frontplot.select("g.barlayer");RT.makeTraceGroups(f,i,"trace bars").each(function(){var c=KXe.select(this),h=RT.ensureSingle(c,"g","points"),v=h.selectAll("g.point").data(RT.identity);v.enter().append("g").style("vector-effect",n?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),v.exit().remove(),v.each(function(d){var _=KXe.select(this),T=d.rp0=s.c2p(d.s0),p=d.rp1=s.c2p(d.s1),M=d.thetag0=l.c2g(d.p0),b=d.thetag1=l.c2g(d.p1),w;if(!g8(T)||!g8(p)||!g8(M)||!g8(b)||T===p||M===b)w="M0,0Z";else{var k=s.c2g(d.s1),x=(M+b)/2;d.ct=[a.c2p(k*Math.cos(x)),o.c2p(k*Math.sin(x))],w=u(T,p,M,b)}RT.ensureSingle(_,"path").attr("d",w)}),zKt.setClipUrl(c,r._hasClipOnAxisFalse?r.clipIds.forTraces:null,t)})};function OKt(e){var t=e.cxx,r=e.cyy;return e.vangles?function(i,n,a,o){var s,l;RT.angleDelta(a,o)>0?(s=a,l=o):(s=o,l=a);var u=Zj.findEnclosingVertexAngles(s,e.vangles)[0],f=Zj.findEnclosingVertexAngles(l,e.vangles)[1],c=[u,(s+l)/2,f];return Zj.pathPolygonAnnulus(i,n,s,l,c,t,r)}:function(i,n,a,o){return RT.pathAnnulus(i,n,a,o,t,r)}}});var eZe=ne((mxr,$Xe)=>{"use strict";var BKt=Ol(),jj=Wt(),NKt=hw().getTraceColor,UKt=jj.fillText,VKt=v8().makeHoverPointText,HKt=t8().isPtInsidePolygon;$Xe.exports=function(t,r,i){var n=t.cd,a=n[0].trace,o=t.subplot,s=o.radialAxis,l=o.angularAxis,u=o.vangles,f=u?HKt:jj.isPtInsideSector,c=t.maxHoverDistance,h=l._period||2*Math.PI,v=Math.abs(s.g2p(Math.sqrt(r*r+i*i))),d=Math.atan2(i,r);s.range[0]>s.range[1]&&(d+=Math.PI);var _=function(b){return f(v,d,[b.rp0,b.rp1],[b.thetag0,b.thetag1],u)?c+Math.min(1,Math.abs(b.thetag1-b.thetag0)/h)-1+(b.rp1-v)/(b.rp1-b.rp0)-1:1/0};if(BKt.getClosest(n,_,t),t.index!==!1){var T=t.index,p=n[T];t.x0=t.x1=p.ct[0],t.y0=t.y1=p.ct[1];var M=jj.extendFlat({},p,{r:p.s,theta:p.p});return UKt(p,a,t),VKt(M,a,o,t),t.hovertemplate=a.hovertemplate,t.color=NKt(a,p),t.xLabelVal=t.yLabelVal=void 0,p.s<0&&(t.idealAlign="left"),[t]}}});var rZe=ne((xxr,tZe)=>{"use strict";tZe.exports={moduleType:"trace",name:"barpolar",basePlotModule:l8(),categories:["polar","bar","showLegend"],attributes:Yj(),layoutAttributes:Wj(),supplyDefaults:GXe(),supplyLayoutDefaults:WXe(),calc:Xj().calc,crossTraceCalc:Xj().crossTraceCalc,plot:QXe(),colorbar:ph(),formatLabels:h8(),style:_p().style,styleOnSelect:_p().styleOnSelect,hoverPoints:eZe(),selectPoints:vw(),meta:{}}});var iZe=ne((_xr,nZe)=>{"use strict";nZe.exports=rZe()});var Kj=ne((bxr,aZe)=>{"use strict";aZe.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}});var Jj=ne((wxr,uZe)=>{"use strict";var GKt=Ku(),Ql=dc(),YKt=fl().attributes,z1=Wt().extendFlat,oZe=Xs().overrideAll,sZe=oZe({color:Ql.color,showline:z1({},Ql.showline,{dflt:!0}),linecolor:Ql.linecolor,linewidth:Ql.linewidth,showgrid:z1({},Ql.showgrid,{dflt:!0}),gridcolor:Ql.gridcolor,gridwidth:Ql.gridwidth,griddash:Ql.griddash},"plot","from-root"),lZe=oZe({ticklen:Ql.ticklen,tickwidth:z1({},Ql.tickwidth,{dflt:2}),tickcolor:Ql.tickcolor,showticklabels:Ql.showticklabels,labelalias:Ql.labelalias,showtickprefix:Ql.showtickprefix,tickprefix:Ql.tickprefix,showticksuffix:Ql.showticksuffix,ticksuffix:Ql.ticksuffix,tickfont:Ql.tickfont,tickformat:Ql.tickformat,hoverformat:Ql.hoverformat,layer:Ql.layer},"plot","from-root"),WKt=z1({visible:z1({},Ql.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:z1({},Ql.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},sZe,lZe),XKt=z1({visible:z1({},Ql.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:Ql.ticks,editType:"calc"},sZe,lZe);uZe.exports={domain:YKt({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:GKt.background},realaxis:WKt,imaginaryaxis:XKt,editType:"calc"}});var hZe=ne((Txr,cZe)=>{"use strict";var DT=Wt(),ZKt=_i(),jKt=So(),KKt=Kx(),JKt=vc().getSubplotData,QKt=am(),$Kt=im(),eJt=kM(),tJt=B0(),IT=Jj(),Qj=Kj(),fZe=Qj.axisNames,rJt=iJt(function(e){return DT.isTypedArray(e)&&(e=Array.from(e)),e.slice().reverse().map(function(t){return-t}).concat([0]).concat(e)},String);function nJt(e,t,r,i){var n=r("bgcolor");i.bgColor=ZKt.combine(n,i.paper_bgcolor);var a=JKt(i.fullData,Qj.name,i.id),o=i.layoutOut,s;function l(k,x){return r(s+"."+k,x)}for(var u=0;u<fZe.length;u++){s=fZe[u],DT.isPlainObject(e[s])||(e[s]={});var f=e[s],c=jKt.newContainer(t,s);c._id=c._name=s,c._attr=i.id+"."+s,c._traceIndices=a.map(function(k){return k._expandedIndex});var h=l("visible");if(c.type="linear",tJt(c,o),QKt(f,c,l,c.type),h){var v=s==="realaxis";if(v&&l("side"),v)l("tickvals");else{var d=rJt(t.realaxis.tickvals||IT.realaxis.tickvals.dflt);l("tickvals",d)}DT.isTypedArray(c.tickvals)&&(c.tickvals=Array.from(c.tickvals));var _,T,p,M,b=i.font||{};h&&(_=l("color"),T=_===f.color?_:b.color,p=b.size,M=b.family),$Kt(f,c,l,c.type,{noAutotickangles:!0,noTicklabelstep:!0,noAng:!v,noExp:!0,font:{color:T,size:p,family:M}}),DT.coerce2(e,t,IT,s+".ticklen"),DT.coerce2(e,t,IT,s+".tickwidth"),DT.coerce2(e,t,IT,s+".tickcolor",t.color);var w=l("ticks");w||(delete t[s].ticklen,delete t[s].tickwidth,delete t[s].tickcolor),eJt(f,c,l,{dfltColor:_,bgColor:i.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:IT[s]}),l("layer")}l("hoverformat"),delete c.type,c._input=f}}cZe.exports=function(t,r,i){KKt(t,r,i,{noUirevision:!0,type:Qj.name,attributes:IT,handleDefaults:nJt,font:r.font,paper_bgcolor:r.paper_bgcolor,fullData:i,layoutOut:r})};function iJt(e,t){var r={};return function(i){var n=t?t(i):i;if(n in r)return r[n];var a=e(i);return r[n]=a,a}}});var mZe=ne((Axr,yZe)=>{"use strict";var aJt=vc().getSubplotCalcData,oJt=Wt().counterRegex,sJt=Nj(),dZe=Kj(),pZe=dZe.attr,fb=dZe.name,vZe=oJt(fb),gZe={};gZe[pZe]={valType:"subplotid",dflt:fb,editType:"calc"};function lJt(e){for(var t=e._fullLayout,r=e.calcdata,i=t._subplots[fb],n=0;n<i.length;n++){var a=i[n],o=aJt(r,fb,a),s=t[a]._subplot;s||(s=sJt(e,a,!0),t[a]._subplot=s),s.plot(o,t,e._promises)}}function uJt(e,t,r,i){for(var n=i._subplots[fb]||[],a=0;a<n.length;a++){var o=n[a],s=i[o]._subplot;if(!t[o]&&s){s.framework.remove();for(var l in s.clipPaths)s.clipPaths[l].remove()}}}yZe.exports={attr:pZe,name:fb,idRoot:fb,idRegex:vZe,attrRegex:vZe,attributes:gZe,layoutAttributes:Jj(),supplyLayoutDefaults:hZe(),plot:lJt,clean:uJt,toSVG:vu().toSVG}});var $j=ne((Mxr,xZe)=>{"use strict";var fJt=Ba().hovertemplateAttrs,cJt=Ba().texttemplateAttrs,y8=oa().extendFlat,hJt=Y0(),Vd=cu(),vJt=es(),FT=Vd.line;xZe.exports={mode:Vd.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:Vd.text,texttemplate:cJt({editType:"plot"},{keys:["real","imag","text"]}),hovertext:Vd.hovertext,line:{color:FT.color,width:FT.width,dash:FT.dash,backoff:FT.backoff,shape:y8({},FT.shape,{values:["linear","spline"]}),smoothing:FT.smoothing,editType:"calc"},connectgaps:Vd.connectgaps,marker:Vd.marker,cliponaxis:y8({},Vd.cliponaxis,{dflt:!1}),textposition:Vd.textposition,textfont:Vd.textfont,fill:y8({},Vd.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:hJt(),hoverinfo:y8({},vJt.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:Vd.hoveron,hovertemplate:fJt(),selected:Vd.selected,unselected:Vd.unselected}});var wZe=ne((Sxr,bZe)=>{"use strict";var m8=Wt(),qT=js(),dJt=dp(),pJt=s0(),_Ze=B2(),gJt=l0(),yJt=X0(),mJt=G0().PTS_LINESONLY,xJt=$j();bZe.exports=function(t,r,i,n){function a(l,u){return m8.coerce(t,r,xJt,l,u)}var o=_Jt(t,r,n,a);if(!o){r.visible=!1;return}a("mode",o<mJt?"lines+markers":"lines"),a("text"),a("hovertext"),r.hoveron!=="fills"&&a("hovertemplate"),qT.hasMarkers(r)&&dJt(t,r,i,n,a,{gradient:!0}),qT.hasLines(r)&&(pJt(t,r,i,n,a,{backoff:!0}),_Ze(t,r,a),a("connectgaps")),qT.hasText(r)&&(a("texttemplate"),gJt(t,r,n,a));var s=[];(qT.hasMarkers(r)||qT.hasText(r))&&(a("cliponaxis"),a("marker.maxdisplayed"),s.push("points")),a("fill"),r.fill!=="none"&&(yJt(t,r,i,a),qT.hasLines(r)||_Ze(t,r,a)),(r.fill==="tonext"||r.fill==="toself")&&s.push("fills"),a("hoveron",s.join("+")||"points"),m8.coerceSelectionMarkerOpacity(r,a)};function _Jt(e,t,r,i){var n=i("real"),a=i("imag"),o;return n&&a&&(o=Math.min(n.length,a.length)),m8.isTypedArray(n)&&(t.real=n=Array.from(n)),m8.isTypedArray(a)&&(t.imag=a=Array.from(a)),t._length=o,o}});var MZe=ne((Exr,AZe)=>{"use strict";var TZe=Xi();AZe.exports=function(t,r,i){var n={},a=i[r.subplot]._subplot;return n.realLabel=TZe.tickText(a.radialAxis,t.real,!0).text,n.imagLabel=TZe.tickText(a.angularAxis,t.imag,!0).text,n}});var kZe=ne((kxr,EZe)=>{"use strict";var SZe=la(),bJt=$a().BADNUM,wJt=pp(),TJt=Z0(),AJt=gp(),MJt=yp().calcMarkerSize;EZe.exports=function(t,r){for(var i=t._fullLayout,n=r.subplot,a=i[n].realaxis,o=i[n].imaginaryaxis,s=a.makeCalcdata(r,"real"),l=o.makeCalcdata(r,"imag"),u=r._length,f=new Array(u),c=0;c<u;c++){var h=s[c],v=l[c],d=f[c]={};SZe(h)&&SZe(v)?(d.real=h,d.imag=v):d.real=bJt}return MJt(r,u),wJt(t,r),TJt(f,r),AJt(f,r),f}});var PZe=ne((Cxr,LZe)=>{"use strict";var SJt=Y2(),CZe=$a().BADNUM,EJt=zj(),kJt=EJt.smith;LZe.exports=function(t,r,i){for(var n=r.layers.frontplot.select("g.scatterlayer"),a=r.xaxis,o=r.yaxis,s={xaxis:a,yaxis:o,plot:r.framework,layerClipId:r._hasClipOnAxisFalse?r.clipIds.forTraces:null},l=0;l<i.length;l++)for(var u=i[l],f=0;f<u.length;f++){f===0&&(u[0].trace._xA=a,u[0].trace._yA=o);var c=u[f],h=c.real;if(h===CZe)c.x=c.y=CZe;else{var v=kJt([h,c.imag]);c.x=v[0],c.y=v[1]}}SJt(t,s,i,n)}});var IZe=ne((Lxr,DZe)=>{"use strict";var CJt=j2();function LJt(e,t,r,i){var n=CJt(e,t,r,i);if(!(!n||n[0].index===!1)){var a=n[0];if(a.index===void 0)return n;var o=e.subplot,s=a.cd[a.index],l=a.trace;if(o.isPtInside(s))return a.xLabelVal=void 0,a.yLabelVal=void 0,RZe(s,l,o,a),a.hovertemplate=l.hovertemplate,n}}function RZe(e,t,r,i){var n=r.radialAxis,a=r.angularAxis;n._hovertitle="real",a._hovertitle="imag";var o={};o[t.subplot]={_subplot:r};var s=t._module.formatLabels(e,t,o);i.realLabel=s.realLabel,i.imagLabel=s.imagLabel;var l=e.hi||t.hoverinfo,u=[];function f(h,v){u.push(h._hovertitle+": "+v)}if(!t.hovertemplate){var c=l.split("+");c.indexOf("all")!==-1&&(c=["real","imag","text"]),c.indexOf("real")!==-1&&f(n,i.realLabel),c.indexOf("imag")!==-1&&f(a,i.imagLabel),c.indexOf("text")!==-1&&i.text&&(u.push(i.text),delete i.text),i.extraText=u.join("<br>")}}DZe.exports={hoverPoints:LJt,makeHoverPointText:RZe}});var qZe=ne((Pxr,FZe)=>{"use strict";FZe.exports={moduleType:"trace",name:"scattersmith",basePlotModule:mZe(),categories:["smith","symbols","showLegend","scatter-like"],attributes:$j(),supplyDefaults:wZe(),colorbar:ph(),formatLabels:MZe(),calc:kZe(),plot:PZe(),style:Tv().style,styleOnSelect:Tv().styleOnSelect,hoverPoints:IZe().hoverPoints,selectPoints:K2(),meta:{}}});var OZe=ne((Rxr,zZe)=>{"use strict";zZe.exports=qZe()});var Z5=ne(BZe=>{"use strict";BZe.pointsAccessorFunction=function(e,t){for(var r,i,n=0;n<e.length&&(r=e[n],r!==t);n++)!r._indexToPoints||r.enabled===!1||(i=r._indexToPoints);var a=i?function(o){return i[o]}:function(o){return[o]};return a}});var HZe=ne(OT=>{"use strict";var PJt=Xi(),zT=Wt(),RJt=tm(),DJt=Z5().pointsAccessorFunction,mu=$a().BADNUM;OT.moduleType="transform";OT.name="aggregate";var VZe=OT.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},NZe=VZe.aggregations;OT.supplyDefaults=function(e,t){var r={},i;function n(T,p){return zT.coerce(e,r,VZe,T,p)}var a=n("enabled");if(!a)return r;var o=RJt.findArrayAttributes(t),s={};for(i=0;i<o.length;i++)s[o[i]]=1;var l=n("groups");if(!Array.isArray(l)){if(!s[l])return r.enabled=!1,r;s[l]=0}var u=e.aggregations||[],f=r.aggregations=new Array(u.length),c;function h(T,p){return zT.coerce(u[i],c,NZe,T,p)}for(i=0;i<u.length;i++){c={_index:i};var v=h("target"),d=h("func"),_=h("enabled");_&&v&&(s[v]||d==="count"&&s[v]===void 0)?(d==="stddev"&&h("funcmode"),s[v]=0,f[i]=c):f[i]={enabled:!1,_index:i}}for(i=0;i<o.length;i++)s[o[i]]&&f.push({target:o[i],func:NZe.func.dflt,enabled:!0,_index:-1});return r};OT.calcTransform=function(e,t,r){if(r.enabled){var i=r.groups,n=zT.getTargetArray(t,{target:i});if(n){var a,o,s,l,u={},f={},c=[],h=DJt(t.transforms,r),v=n.length;for(t._length&&(v=Math.min(v,t._length)),a=0;a<v;a++)o=n[a],s=u[o],s===void 0?(u[o]=c.length,l=[a],c.push(l),f[u[o]]=h(a)):(c[s].push(a),f[u[o]]=(f[u[o]]||[]).concat(h(a)));r._indexToPoints=f;var d=r.aggregations;for(a=0;a<d.length;a++)UZe(e,t,c,d[a]);typeof i=="string"&&UZe(e,t,c,{target:i,func:"first",enabled:!0}),t._length=c.length}}};function UZe(e,t,r,i){if(i.enabled){for(var n=i.target,a=zT.nestedProperty(t,n),o=a.get(),s=PJt.getDataConversions(e,t,n,o),l=IJt(i,s),u=new Array(r.length),f=0;f<r.length;f++)u[f]=l(o,r[f]);a.set(u),i.func==="count"&&zT.pushUnique(t._arrayAttrs,n)}}function IJt(e,t){var r=e.func,i=t.d2c,n=t.c2d;switch(r){case"count":return FJt;case"first":return qJt;case"last":return zJt;case"sum":return function(a,o){for(var s=0,l=0;l<o.length;l++){var u=i(a[o[l]]);u!==mu&&(s+=u)}return n(s)};case"avg":return function(a,o){for(var s=0,l=0,u=0;u<o.length;u++){var f=i(a[o[u]]);f!==mu&&(s+=f,l++)}return l?n(s/l):mu};case"min":return function(a,o){for(var s=1/0,l=0;l<o.length;l++){var u=i(a[o[l]]);u!==mu&&(s=Math.min(s,u))}return s===1/0?mu:n(s)};case"max":return function(a,o){for(var s=-1/0,l=0;l<o.length;l++){var u=i(a[o[l]]);u!==mu&&(s=Math.max(s,u))}return s===-1/0?mu:n(s)};case"range":return function(a,o){for(var s=1/0,l=-1/0,u=0;u<o.length;u++){var f=i(a[o[u]]);f!==mu&&(s=Math.min(s,f),l=Math.max(l,f))}return l===-1/0||s===1/0?mu:n(l-s)};case"change":return function(a,o){var s=i(a[o[0]]),l=i(a[o[o.length-1]]);return s===mu||l===mu?mu:n(l-s)};case"median":return function(a,o){for(var s=[],l=0;l<o.length;l++){var u=i(a[o[l]]);u!==mu&&s.push(u)}if(!s.length)return mu;s.sort(zT.sorterAsc);var f=(s.length-1)/2;return n((s[Math.floor(f)]+s[Math.ceil(f)])/2)};case"mode":return function(a,o){for(var s={},l=0,u=mu,f=0;f<o.length;f++){var c=i(a[o[f]]);if(c!==mu){var h=s[c]=(s[c]||0)+1;h>l&&(l=h,u=c)}}return l?n(u):mu};case"rms":return function(a,o){for(var s=0,l=0,u=0;u<o.length;u++){var f=i(a[o[u]]);f!==mu&&(s+=f*f,l++)}return l?n(Math.sqrt(s/l)):mu};case"stddev":return function(a,o){var s=0,l=0,u=1,f=mu,c;for(c=0;c<o.length&&f===mu;c++)f=i(a[o[c]]);if(f===mu)return mu;for(;c<o.length;c++){var h=i(a[o[c]]);if(h!==mu){var v=h-f;s+=v,l+=v*v,u++}}var d=e.funcmode==="sample"?u-1:u;return d?Math.sqrt((l-s*s/u)/d):0}}}function FJt(e,t){return t.length}function qJt(e,t){return e[t[0]]}function zJt(e,t){return e[t[t.length-1]]}});var YZe=ne((Fxr,GZe)=>{"use strict";GZe.exports=HZe()});var jZe=ne(cb=>{"use strict";var O1=Wt(),OJt=wi(),BJt=Xi(),NJt=Z5().pointsAccessorFunction,eK=aS(),WZe=eK.COMPARISON_OPS,XZe=eK.INTERVAL_OPS,ZZe=eK.SET_OPS;cb.moduleType="transform";cb.name="filter";cb.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(WZe).concat(XZe).concat(ZZe),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"};cb.supplyDefaults=function(e){var t={};function r(o,s){return O1.coerce(e,t,cb.attributes,o,s)}var i=r("enabled");if(i){var n=r("target");if(O1.isArrayOrTypedArray(n)&&n.length===0)return t.enabled=!1,t;r("preservegaps"),r("operation"),r("value");var a=OJt.getComponentMethod("calendars","handleDefaults");a(e,t,"valuecalendar",null),a(e,t,"targetcalendar",null)}return t};cb.calcTransform=function(e,t,r){if(!r.enabled)return;var i=O1.getTargetArray(t,r);if(!i)return;var n=r.target,a=i.length;t._length&&(a=Math.min(a,t._length));var o=r.targetcalendar,s=t._arrayAttrs,l=r.preservegaps;if(typeof n=="string"){var u=O1.nestedProperty(t,n+"calendar").get();u&&(o=u)}var f=BJt.getDataToCoordFunc(e,t,n,i),c=UJt(r,f,o),h={},v={},d=0;function _(k,x){for(var E=0;E<s.length;E++){var S=O1.nestedProperty(t,s[E]);k(S,x)}}var T,p;l?(T=function(k){h[k.astr]=O1.extendDeep([],k.get()),k.set(new Array(a))},p=function(k,x){var E=h[k.astr][x];k.get()[x]=E}):(T=function(k){h[k.astr]=O1.extendDeep([],k.get()),k.set([])},p=function(k,x){var E=h[k.astr][x];k.get().push(E)}),_(T);for(var M=NJt(t.transforms,r),b=0;b<a;b++){var w=c(i[b]);w?(_(p,b),v[d++]=M(b)):l&&d++}r._indexToPoints=v,t._length=d};function UJt(e,t,r){var i=e.operation,n=e.value,a=O1.isArrayOrTypedArray(n);function o(f){return f.indexOf(i)!==-1}var s=function(f){return t(f,0,e.valuecalendar)},l=function(f){return t(f,0,r)},u;switch(o(WZe)?u=s(a?n[0]:n):o(XZe)?u=a?[s(n[0]),s(n[1])]:[s(n),s(n)]:o(ZZe)&&(u=a?n.map(s):[s(n)]),i){case"=":return function(f){return l(f)===u};case"!=":return function(f){return l(f)!==u};case"<":return function(f){return l(f)<u};case"<=":return function(f){return l(f)<=u};case">":return function(f){return l(f)>u};case">=":return function(f){return l(f)>=u};case"[]":return function(f){var c=l(f);return c>=u[0]&&c<=u[1]};case"()":return function(f){var c=l(f);return c>u[0]&&c<u[1]};case"[)":return function(f){var c=l(f);return c>=u[0]&&c<u[1]};case"(]":return function(f){var c=l(f);return c>u[0]&&c<=u[1]};case"][":return function(f){var c=l(f);return c<=u[0]||c>=u[1]};case")(":return function(f){var c=l(f);return c<u[0]||c>u[1]};case"](":return function(f){var c=l(f);return c<=u[0]||c>u[1]};case")[":return function(f){var c=l(f);return c<u[0]||c>=u[1]};case"{}":return function(f){return u.indexOf(l(f))!==-1};case"}{":return function(f){return u.indexOf(l(f))===-1}}}});var JZe=ne((zxr,KZe)=>{"use strict";KZe.exports=jZe()});var QZe=ne(Dy=>{"use strict";var Rv=Wt(),VJt=tm(),HJt=Zs(),GJt=Z5().pointsAccessorFunction;Dy.moduleType="transform";Dy.name="groupby";Dy.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"};Dy.supplyDefaults=function(e,t,r){var i,n={};function a(c,h){return Rv.coerce(e,n,Dy.attributes,c,h)}var o=a("enabled");if(!o)return n;a("groups"),a("nameformat",r._dataLength>1?"%{group} (%{trace})":"%{group}");var s=e.styles,l=n.styles=[];if(s)for(i=0;i<s.length;i++){var u=l[i]={};Rv.coerce(s[i],l[i],Dy.attributes.styles,"target");var f=Rv.coerce(s[i],l[i],Dy.attributes.styles,"value");Rv.isPlainObject(f)?u.value=Rv.extendDeep({},f):f&&delete u.value}return n};Dy.transform=function(e,t){var r,i,n,a=[];for(i=0;i<e.length;i++)for(r=YJt(e[i],t),n=0;n<r.length;n++)a.push(r[n]);return a};function YJt(e,t){var r,i,n,a,o,s,l,u,f,c,h=t.transform,v=t.transformIndex,d=e.transforms[v].groups,_=GJt(e.transforms,h);if(!Rv.isArrayOrTypedArray(d)||d.length===0)return[e];var T=Rv.filterUnique(d),p=new Array(T.length),M=d.length,b=VJt.findArrayAttributes(e),w=h.styles||[],k={};for(r=0;r<w.length;r++)k[w[r].target]=w[r].value;h.styles&&(c=Rv.keyedContainer(h,"styles","target","value.name"));var x={},E={};for(r=0;r<T.length;r++){s=T[r],x[s]=r,E[s]=0,l=p[r]=Rv.extendDeepNoArrays({},e),l._group=s,l.transforms[v]._indexToPoints={};var S=null;for(c&&(S=c.get(s)),S||S===""?l.name=S:l.name=Rv.templateString(h.nameformat,{trace:e.name,group:s}),u=l.transforms,l.transforms=[],i=0;i<u.length;i++)l.transforms[i]=Rv.extendDeepNoArrays({},u[i]);for(i=0;i<b.length;i++)Rv.nestedProperty(l,b[i]).set([])}for(n=0;n<b.length;n++){for(a=b[n],i=0,f=[];i<T.length;i++)f[i]=Rv.nestedProperty(p[i],a).get();for(o=Rv.nestedProperty(e,a).get(),i=0;i<M;i++)f[x[d[i]]].push(o[i])}for(i=0;i<M;i++){l=p[x[d[i]]];var g=l.transforms[v]._indexToPoints;g[E[d[i]]]=_(i),E[d[i]]++}for(r=0;r<T.length;r++)s=T[r],l=p[r],HJt.clearExpandedTraceDefaultColors(l),l=Rv.extendDeepNoArrays(l,k[s]||{});return p}});var eje=ne((Bxr,$Ze)=>{"use strict";$Ze.exports=QZe()});var tje=ne(hb=>{"use strict";var tK=Wt(),WJt=Xi(),XJt=Z5().pointsAccessorFunction,x8=$a().BADNUM;hb.moduleType="transform";hb.name="sort";hb.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"};hb.supplyDefaults=function(e){var t={};function r(n,a){return tK.coerce(e,t,hb.attributes,n,a)}var i=r("enabled");return i&&(r("target"),r("order")),t};hb.calcTransform=function(e,t,r){if(r.enabled){var i=tK.getTargetArray(t,r);if(i){var n=r.target,a=i.length;t._length&&(a=Math.min(a,t._length));var o=t._arrayAttrs,s=WJt.getDataToCoordFunc(e,t,n,i),l=ZJt(r,i,s,a),u=XJt(t.transforms,r),f={},c,h;for(c=0;c<o.length;c++){var v=tK.nestedProperty(t,o[c]),d=v.get(),_=new Array(a);for(h=0;h<a;h++)_[h]=d[l[h]];v.set(_)}for(h=0;h<a;h++)f[h]=u(l[h]);r._indexToPoints=f,t._length=a}}};function ZJt(e,t,r,i){var n=new Array(i),a=new Array(i),o;for(o=0;o<i;o++)n[o]={v:t[o],i:o};for(n.sort(jJt(e,r)),o=0;o<i;o++)a[o]=n[o].i;return a}function jJt(e,t){switch(e.order){case"ascending":return function(r,i){var n=t(r.v),a=t(i.v);return n===x8?1:a===x8?-1:n-a};case"descending":return function(r,i){var n=t(r.v),a=t(i.v);return n===x8?1:a===x8?-1:a-n}}}});var nje=ne((Uxr,rje)=>{"use strict";rje.exports=tje()});var Th=ne((Vxr,aje)=>{var b8=of();function ije(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}b8(ije.prototype,{instance:function(e,t){e=(e||"gregorian").toLowerCase(),t=t||"";var r=this._localCals[e+"-"+t];if(!r&&this.calendars[e]&&(r=new this.calendars[e](t),this._localCals[e+"-"+t]=r),!r)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e);return r},newDate:function(e,t,r,i,n){return i=(e!=null&&e.year?e.calendar():typeof i=="string"?this.instance(i,n):i)||this.instance(),i.newDate(e,t,r)},substituteDigits:function(e){return function(t){return(t+"").replace(/[0-9]/g,function(r){return e[r]})}},substituteChineseDigits:function(e,t){return function(r){for(var i="",n=0;r>0;){var a=r%10;i=(a===0?"":e[a]+t[n])+i,n++,r=Math.floor(r/10)}return i.indexOf(e[1]+t[1])===0&&(i=i.substr(1)),i||e[0]}}});function rK(e,t,r,i){if(this._calendar=e,this._year=t,this._month=r,this._day=i,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(fo.local.invalidDate||fo.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function _8(e,t){return e=""+e,"000000".substring(0,t-e.length)+e}b8(rK.prototype,{newDate:function(e,t,r){return this._calendar.newDate(e==null?this:e,t,r)},year:function(e){return arguments.length===0?this._year:this.set(e,"y")},month:function(e){return arguments.length===0?this._month:this.set(e,"m")},day:function(e){return arguments.length===0?this._day:this.set(e,"d")},date:function(e,t,r){if(!this._calendar.isValid(e,t,r))throw(fo.local.invalidDate||fo.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=e,this._month=t,this._day=r,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,t){return this._calendar.add(this,e,t)},set:function(e,t){return this._calendar.set(this,e,t)},compareTo:function(e){if(this._calendar.name!==e._calendar.name)throw(fo.local.differentCalendars||fo.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name);var t=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return t===0?0:t<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(this.year()<0?"-":"")+_8(Math.abs(this.year()),4)+"-"+_8(this.month(),2)+"-"+_8(this.day(),2)}});function nK(){this.shortYearCutoff="+10"}b8(nK.prototype,{_validateLevel:0,newDate:function(e,t,r){return e==null?this.today():(e.year&&(this._validate(e,t,r,fo.local.invalidDate||fo.regionalOptions[""].invalidDate),r=e.day(),t=e.month(),e=e.year()),new rK(this,e,t,r))},today:function(){return this.fromJSDate(new Date)},epoch:function(e){var t=this._validate(e,this.minMonth,this.minDay,fo.local.invalidYear||fo.regionalOptions[""].invalidYear);return t.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,fo.local.invalidYear||fo.regionalOptions[""].invalidYear);return(t.year()<0?"-":"")+_8(Math.abs(t.year()),4)},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,fo.local.invalidYear||fo.regionalOptions[""].invalidYear),12},monthOfYear:function(e,t){var r=this._validate(e,t,this.minDay,fo.local.invalidMonth||fo.regionalOptions[""].invalidMonth);return(r.month()+this.monthsInYear(r)-this.firstMonth)%this.monthsInYear(r)+this.minMonth},fromMonthOfYear:function(e,t){var r=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;return this._validate(e,r,this.minDay,fo.local.invalidMonth||fo.regionalOptions[""].invalidMonth),r},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,fo.local.invalidYear||fo.regionalOptions[""].invalidYear);return this.leapYear(t)?366:365},dayOfYear:function(e,t,r){var i=this._validate(e,t,r,fo.local.invalidDate||fo.regionalOptions[""].invalidDate);return i.toJD()-this.newDate(i.year(),this.fromMonthOfYear(i.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,t,r){var i=this._validate(e,t,r,fo.local.invalidDate||fo.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(i))+2)%this.daysInWeek()},extraInfo:function(e,t,r){return this._validate(e,t,r,fo.local.invalidDate||fo.regionalOptions[""].invalidDate),{}},add:function(e,t,r){return this._validate(e,this.minMonth,this.minDay,fo.local.invalidDate||fo.regionalOptions[""].invalidDate),this._correctAdd(e,this._add(e,t,r),t,r)},_add:function(e,t,r){if(this._validateLevel++,r==="d"||r==="w"){var i=e.toJD()+t*(r==="w"?this.daysInWeek():1),n=e.calendar().fromJD(i);return this._validateLevel--,[n.year(),n.month(),n.day()]}try{var a=e.year()+(r==="y"?t:0),o=e.monthOfYear()+(r==="m"?t:0),n=e.day(),s=function(f){for(;o<f.minMonth;)a--,o+=f.monthsInYear(a);for(var c=f.monthsInYear(a);o>c-1+f.minMonth;)a++,o-=c,c=f.monthsInYear(a)};r==="y"?(e.month()!==this.fromMonthOfYear(a,o)&&(o=this.newDate(a,e.month(),this.minDay).monthOfYear()),o=Math.min(o,this.monthsInYear(a)),n=Math.min(n,this.daysInMonth(a,this.fromMonthOfYear(a,o)))):r==="m"&&(s(this),n=Math.min(n,this.daysInMonth(a,this.fromMonthOfYear(a,o))));var l=[a,this.fromMonthOfYear(a,o),n];return this._validateLevel--,l}catch(u){throw this._validateLevel--,u}},_correctAdd:function(e,t,r,i){if(!this.hasYearZero&&(i==="y"||i==="m")&&(t[0]===0||e.year()>0!=t[0]>0)){var n={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[i],a=r<0?-1:1;t=this._add(e,r*n[0]+a*n[1],n[2])}return e.date(t[0],t[1],t[2])},set:function(e,t,r){this._validate(e,this.minMonth,this.minDay,fo.local.invalidDate||fo.regionalOptions[""].invalidDate);var i=r==="y"?t:e.year(),n=r==="m"?t:e.month(),a=r==="d"?t:e.day();return(r==="y"||r==="m")&&(a=Math.min(a,this.daysInMonth(i,n))),e.date(i,n,a)},isValid:function(e,t,r){this._validateLevel++;var i=this.hasYearZero||e!==0;if(i){var n=this.newDate(e,t,this.minDay);i=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(n)&&r>=this.minDay&&r-this.minDay<this.daysInMonth(n)}return this._validateLevel--,i},toJSDate:function(e,t,r){var i=this._validate(e,t,r,fo.local.invalidDate||fo.regionalOptions[""].invalidDate);return fo.instance().fromJD(this.toJD(i)).toJSDate()},fromJSDate:function(e){return this.fromJD(fo.instance().fromJSDate(e).toJD())},_validate:function(e,t,r,i){if(e.year){if(this._validateLevel===0&&this.name!==e.calendar().name)throw(fo.local.differentCalendars||fo.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name);return e}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(e,t,r))throw i.replace(/\{0\}/,this.local.name);var n=this.newDate(e,t,r);return this._validateLevel--,n}catch(a){throw this._validateLevel--,a}}});function iK(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}iK.prototype=new nK;b8(iK.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,fo.local.invalidYear||fo.regionalOptions[""].invalidYear),r=t.year()+(t.year()<0?1:0);return r%4===0&&(r%100!==0||r%400===0)},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,fo.local.invalidMonth||fo.regionalOptions[""].invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,t,r,fo.local.invalidDate||fo.regionalOptions[""].invalidDate);e=i.year(),t=i.month(),r=i.day(),e<0&&e++,t<3&&(t+=12,e--);var n=Math.floor(e/100),a=2-n+Math.floor(n/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+r+a-1524.5},fromJD:function(e){var t=Math.floor(e+.5),r=Math.floor((t-186721625e-2)/36524.25);r=t+1+r-Math.floor(r/4);var i=r+1524,n=Math.floor((i-122.1)/365.25),a=Math.floor(365.25*n),o=Math.floor((i-a)/30.6001),s=i-a-Math.floor(o*30.6001),l=o-(o>13.5?13:1),u=n-(l>2.5?4716:4715);return u<=0&&u--,this.newDate(u,l,s)},toJSDate:function(e,t,r){var i=this._validate(e,t,r,fo.local.invalidDate||fo.regionalOptions[""].invalidDate),n=new Date(i.year(),i.month()-1,i.day());return n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.setHours(n.getHours()>12?n.getHours()+2:0),n},fromJSDate:function(e){return this.newDate(e.getFullYear(),e.getMonth()+1,e.getDate())}});var fo=aje.exports=new ije;fo.cdate=rK;fo.baseCalendar=nK;fo.calendars.gregorian=iK});var oje=ne(()=>{var aK=of(),Tc=Th();aK(Tc.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"});Tc.local=Tc.regionalOptions[""];aK(Tc.cdate.prototype,{formatDate:function(e,t){return typeof e!="string"&&(t=e,e=""),this._calendar.formatDate(e||"",this,t)}});aK(Tc.baseCalendar.prototype,{UNIX_EPOCH:Tc.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:Tc.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(e,t,r){if(typeof e!="string"&&(r=t,t=e,e=""),!t)return"";if(t.calendar()!==this)throw Tc.local.invalidFormat||Tc.regionalOptions[""].invalidFormat;e=e||this.local.dateFormat,r=r||{};for(var i=r.dayNamesShort||this.local.dayNamesShort,n=r.dayNames||this.local.dayNames,a=r.monthNumbers||this.local.monthNumbers,o=r.monthNamesShort||this.local.monthNamesShort,s=r.monthNames||this.local.monthNames,l=r.calculateWeek||this.local.calculateWeek,u=function(w,k){for(var x=1;b+x<e.length&&e.charAt(b+x)===w;)x++;return b+=x-1,Math.floor(x/(k||1))>1},f=function(w,k,x,E){var S=""+k;if(u(w,E))for(;S.length<x;)S="0"+S;return S},c=function(w,k,x,E){return u(w)?E[k]:x[k]},h=this,v=function(w){return typeof a=="function"?a.call(h,w,u("m")):T(f("m",w.month(),2))},d=function(w,k){return k?typeof s=="function"?s.call(h,w):s[w.month()-h.minMonth]:typeof o=="function"?o.call(h,w):o[w.month()-h.minMonth]},_=this.local.digits,T=function(w){return r.localNumbers&&_?_(w):w},p="",M=!1,b=0;b<e.length;b++)if(M)e.charAt(b)==="'"&&!u("'")?M=!1:p+=e.charAt(b);else switch(e.charAt(b)){case"d":p+=T(f("d",t.day(),2));break;case"D":p+=c("D",t.dayOfWeek(),i,n);break;case"o":p+=f("o",t.dayOfYear(),3);break;case"w":p+=f("w",t.weekOfYear(),2);break;case"m":p+=v(t);break;case"M":p+=d(t,u("M"));break;case"y":p+=u("y",2)?t.year():(t.year()%100<10?"0":"")+t.year()%100;break;case"Y":u("Y",2),p+=t.formatYear();break;case"J":p+=t.toJD();break;case"@":p+=(t.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":p+=(t.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":u("'")?p+="'":M=!0;break;default:p+=e.charAt(b)}return p},parseDate:function(e,t,r){if(t==null)throw Tc.local.invalidArguments||Tc.regionalOptions[""].invalidArguments;if(t=typeof t=="object"?t.toString():t+"",t==="")return null;e=e||this.local.dateFormat,r=r||{};var i=r.shortYearCutoff||this.shortYearCutoff;i=typeof i!="string"?i:this.today().year()%100+parseInt(i,10);for(var n=r.dayNamesShort||this.local.dayNamesShort,a=r.dayNames||this.local.dayNames,o=r.parseMonth||this.local.parseMonth,s=r.monthNumbers||this.local.monthNumbers,l=r.monthNamesShort||this.local.monthNamesShort,u=r.monthNames||this.local.monthNames,f=-1,c=-1,h=-1,v=-1,d=-1,_=!1,T=!1,p=function(P,D){for(var z=1;g+z<e.length&&e.charAt(g+z)===P;)z++;return g+=z-1,Math.floor(z/(D||1))>1},M=function(P,D){var z=p(P,D),O=[2,3,z?4:2,z?4:2,10,11,20]["oyYJ@!".indexOf(P)+1],V=new RegExp("^-?\\d{1,"+O+"}"),B=t.substring(S).match(V);if(!B)throw(Tc.local.missingNumberAt||Tc.regionalOptions[""].missingNumberAt).replace(/\{0\}/,S);return S+=B[0].length,parseInt(B[0],10)},b=this,w=function(){if(typeof s=="function"){p("m");var P=s.call(b,t.substring(S));return S+=P.length,P}return M("m")},k=function(P,D,z,O){for(var V=p(P,O)?z:D,B=0;B<V.length;B++)if(t.substr(S,V[B].length).toLowerCase()===V[B].toLowerCase())return S+=V[B].length,B+b.minMonth;throw(Tc.local.unknownNameAt||Tc.regionalOptions[""].unknownNameAt).replace(/\{0\}/,S)},x=function(){if(typeof u=="function"){var P=p("M")?u.call(b,t.substring(S)):l.call(b,t.substring(S));return S+=P.length,P}return k("M",l,u)},E=function(){if(t.charAt(S)!==e.charAt(g))throw(Tc.local.unexpectedLiteralAt||Tc.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,S);S++},S=0,g=0;g<e.length;g++)if(T)e.charAt(g)==="'"&&!p("'")?T=!1:E();else switch(e.charAt(g)){case"d":v=M("d");break;case"D":k("D",n,a);break;case"o":d=M("o");break;case"w":M("w");break;case"m":h=w();break;case"M":h=x();break;case"y":var C=g;_=!p("y",2),g=C,c=M("y",2);break;case"Y":c=M("Y",2);break;case"J":f=M("J")+.5,t.charAt(S)==="."&&(S++,M("J"));break;case"@":f=M("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":f=M("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":S=t.length;break;case"'":p("'")?E():T=!0;break;default:E()}if(S<t.length)throw Tc.local.unexpectedText||Tc.regionalOptions[""].unexpectedText;if(c===-1?c=this.today().year():c<100&&_&&(c+=i===-1?1900:this.today().year()-this.today().year()%100-(c<=i?0:100)),typeof h=="string"&&(h=o.call(this,c,h)),d>-1){h=1,v=d;for(var A=this.daysInMonth(c,h);v>A;A=this.daysInMonth(c,h))h++,v-=A}return f>-1?this.fromJD(f):this.newDate(c,h,v)},determineDate:function(e,t,r,i,n){r&&typeof r!="object"&&(n=i,i=r,r=null),typeof i!="string"&&(n=i,i="");var a=this,o=function(s){try{return a.parseDate(i,s,n)}catch(c){}s=s.toLowerCase();for(var l=(s.match(/^c/)&&r?r.newDate():null)||a.today(),u=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,f=u.exec(s);f;)l.add(parseInt(f[1],10),f[2]||"d"),f=u.exec(s);return l};return t=t?t.newDate():null,e=e==null?t:typeof e=="string"?o(e):typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?t:a.today().add(e,"d"):a.newDate(e),e}})});var sje=ne(()=>{var B1=Th(),KJt=of(),oK=B1.instance();function w8(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}w8.prototype=new B1.baseCalendar;KJt(w8.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(e,t){if(typeof e=="string"){var r=e.match(QJt);return r?r[0]:""}var i=this._validateYear(e),n=e.month(),a=""+this.toChineseMonth(i,n);return t&&a.length<2&&(a="0"+a),this.isIntercalaryMonth(i,n)&&(a+="i"),a},monthNames:function(e){if(typeof e=="string"){var t=e.match($Jt);return t?t[0]:""}var r=this._validateYear(e),i=e.month(),n=this.toChineseMonth(r,i),a=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][n-1];return this.isIntercalaryMonth(r,i)&&(a="\u95F0"+a),a},monthNamesShort:function(e){if(typeof e=="string"){var t=e.match(eQt);return t?t[0]:""}var r=this._validateYear(e),i=e.month(),n=this.toChineseMonth(r,i),a=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][n-1];return this.isIntercalaryMonth(r,i)&&(a="\u95F0"+a),a},parseMonth:function(e,t){e=this._validateYear(e);var r=parseInt(t),i;if(isNaN(r))t[0]==="\u95F0"&&(i=!0,t=t.substring(1)),t[t.length-1]==="\u6708"&&(t=t.substring(0,t.length-1)),r=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(t);else{var n=t[t.length-1];i=n==="i"||n==="I"}var a=this.toMonthIndex(e,r,i);return a},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(e,t){if(e.year&&(e=e.year()),typeof e!="number"||e<1888||e>2111)throw t.replace(/\{0\}/,this.local.name);return e},toMonthIndex:function(e,t,r){var i=this.intercalaryMonth(e),n=r&&t!==i;if(n||t<1||t>12)throw B1.local.invalidMonth.replace(/\{0\}/,this.local.name);var a;return i?!r&&t<=i?a=t-1:a=t:a=t-1,a},toChineseMonth:function(e,t){e.year&&(e=e.year(),t=e.month());var r=this.intercalaryMonth(e),i=r?12:11;if(t<0||t>i)throw B1.local.invalidMonth.replace(/\{0\}/,this.local.name);var n;return r?t<r?n=t+1:n=t:n=t+1,n},intercalaryMonth:function(e){e=this._validateYear(e);var t=N1[e-N1[0]],r=t>>13;return r},isIntercalaryMonth:function(e,t){e.year&&(e=e.year(),t=e.month());var r=this.intercalaryMonth(e);return!!r&&r===t},leapYear:function(e){return this.intercalaryMonth(e)!==0},weekOfYear:function(e,t,r){var i=this._validateYear(e,B1.local.invalidyear),n=U1[i-U1[0]],a=n>>9&4095,o=n>>5&15,s=n&31,l;l=oK.newDate(a,o,s),l.add(4-(l.dayOfWeek()||7),"d");var u=this.toJD(e,t,r)-l.toJD();return 1+Math.floor(u/7)},monthsInYear:function(e){return this.leapYear(e)?13:12},daysInMonth:function(e,t){e.year&&(t=e.month(),e=e.year()),e=this._validateYear(e);var r=N1[e-N1[0]],i=r>>13,n=i?12:11;if(t>n)throw B1.local.invalidMonth.replace(/\{0\}/,this.local.name);var a=r&1<<12-t?30:29;return a},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,a,r,B1.local.invalidDate);e=this._validateYear(i.year()),t=i.month(),r=i.day();var n=this.isIntercalaryMonth(e,t),a=this.toChineseMonth(e,t),o=rQt(e,a,r,n);return oK.toJD(o.year,o.month,o.day)},fromJD:function(e){var t=oK.fromJD(e),r=tQt(t.year(),t.month(),t.day()),i=this.toMonthIndex(r.year,r.month,r.isIntercalary);return this.newDate(r.year,i,r.day)},fromString:function(e){var t=e.match(JJt),r=this._validateYear(+t[1]),i=+t[2],n=!!t[3],a=this.toMonthIndex(r,i,n),o=+t[4];return this.newDate(r,a,o)},add:function(e,t,r){var i=e.year(),n=e.month(),a=this.isIntercalaryMonth(i,n),o=this.toChineseMonth(i,n),s=Object.getPrototypeOf(w8.prototype).add.call(this,e,t,r);if(r==="y"){var l=s.year(),u=s.month(),f=this.isIntercalaryMonth(l,o),c=a&&f?this.toMonthIndex(l,o,!0):this.toMonthIndex(l,o,!1);c!==u&&s.month(c)}return s}});var JJt=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,QJt=/^\d?\d[iI]?/m,$Jt=/^??[]?/m,eQt=/^??[]?/m;B1.calendars.chinese=w8;var N1=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],U1=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function tQt(e,t,r,i){var n,a;if(typeof e=="object")n=e,a=t||{};else{var o=typeof e=="number"&&e>=1888&&e<=2111;if(!o)throw new Error("Solar year outside range 1888-2111");var s=typeof t=="number"&&t>=1&&t<=12;if(!s)throw new Error("Solar month outside range 1 - 12");var l=typeof r=="number"&&r>=1&&r<=31;if(!l)throw new Error("Solar day outside range 1 - 31");n={year:e,month:t,day:r},a=i||{}}var u=U1[n.year-U1[0]],f=n.year<<9|n.month<<5|n.day;a.year=f>=u?n.year:n.year-1,u=U1[a.year-U1[0]];var c=u>>9&4095,h=u>>5&15,v=u&31,d,_=new Date(c,h-1,v),T=new Date(n.year,n.month-1,n.day);d=Math.round((T-_)/(24*3600*1e3));var p=N1[a.year-N1[0]],M;for(M=0;M<13;M++){var b=p&1<<12-M?30:29;if(d<b)break;d-=b}var w=p>>13;return!w||M<w?(a.isIntercalary=!1,a.month=1+M):M===w?(a.isIntercalary=!0,a.month=M):(a.isIntercalary=!1,a.month=M),a.day=1+d,a}function rQt(e,t,r,i,n){var a,o;if(typeof e=="object")o=e,a=t||{};else{var s=typeof e=="number"&&e>=1888&&e<=2111;if(!s)throw new Error("Lunar year outside range 1888-2111");var l=typeof t=="number"&&t>=1&&t<=12;if(!l)throw new Error("Lunar month outside range 1 - 12");var u=typeof r=="number"&&r>=1&&r<=30;if(!u)throw new Error("Lunar day outside range 1 - 30");var f;typeof i=="object"?(f=!1,a=i):(f=!!i,a=n||{}),o={year:e,month:t,day:r,isIntercalary:f}}var c;c=o.day-1;var h=N1[o.year-N1[0]],v=h>>13,d;v&&(o.month>v||o.isIntercalary)?d=o.month:d=o.month-1;for(var _=0;_<d;_++){var T=h&1<<12-_?30:29;c+=T}var p=U1[o.year-U1[0]],M=p>>9&4095,b=p>>5&15,w=p&31,k=new Date(M,b-1,w+c);return a.year=k.getFullYear(),a.month=1+k.getMonth(),a.day=k.getDate(),a}});var lje=ne(()=>{var vb=Th(),nQt=of();function sK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}sK.prototype=new vb.baseCalendar;nQt(sK.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,vb.local.invalidYear),r=t.year()+(t.year()<0?1:0);return r%4===3||r%4===-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,vb.local.invalidYear||vb.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,vb.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===13&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,t,r,vb.local.invalidDate);return e=i.year(),e<0&&e++,i.day()+(i.month()-1)*30+(e-1)*365+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,r=Math.floor((t-Math.floor((t+366)/1461))/365)+1;r<=0&&r--,t=Math.floor(e)+.5-this.newDate(r,1,1).toJD();var i=Math.floor(t/30)+1,n=t-(i-1)*30+1;return this.newDate(r,i,n)}});vb.calendars.coptic=sK});var uje=ne(()=>{var Iy=Th(),iQt=of();function lK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}lK.prototype=new Iy.baseCalendar;iQt(lK.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,Iy.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,Iy.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,Iy.local.invalidYear),400},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/8)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,Iy.local.invalidMonth);return this.daysPerMonth[r.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,t,r){var i=this._validate(e,t,r,Iy.local.invalidDate);return(i.day()+1)%8},weekDay:function(e,t,r){var i=this.dayOfWeek(e,t,r);return i>=2&&i<=6},extraInfo:function(e,t,r){var i=this._validate(e,t,r,Iy.local.invalidDate);return{century:aQt[Math.floor((i.year()-1)/100)+1]||""}},toJD:function(e,t,r){var i=this._validate(e,t,r,Iy.local.invalidDate);return e=i.year()+(i.year()<0?1:0),t=i.month(),r=i.day(),r+(t>1?16:0)+(t>2?(t-2)*32:0)+(e-1)*400+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var t=Math.floor(e/400)+1;e-=(t-1)*400,e+=e>15?16:0;var r=Math.floor(e/32)+1,i=e-(r-1)*32+1;return this.newDate(t<=0?t-1:t,r,i)}});var aQt={20:"Fruitbat",21:"Anchovy"};Iy.calendars.discworld=lK});var fje=ne(()=>{var db=Th(),oQt=of();function uK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}uK.prototype=new db.baseCalendar;oQt(uK.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,db.local.invalidYear),r=t.year()+(t.year()<0?1:0);return r%4===3||r%4===-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,db.local.invalidYear||db.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,db.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===13&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,t,r,db.local.invalidDate);return e=i.year(),e<0&&e++,i.day()+(i.month()-1)*30+(e-1)*365+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,r=Math.floor((t-Math.floor((t+366)/1461))/365)+1;r<=0&&r--,t=Math.floor(e)+.5-this.newDate(r,1,1).toJD();var i=Math.floor(t/30)+1,n=t-(i-1)*30+1;return this.newDate(r,i,n)}});db.calendars.ethiopian=uK});var cje=ne(()=>{var V1=Th(),sQt=of();function fK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}fK.prototype=new V1.baseCalendar;sQt(fK.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,V1.local.invalidYear);return this._leapYear(t.year())},_leapYear:function(e){return e=e<0?e+1:e,T8(e*7+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,V1.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,V1.local.invalidYear);return e=t.year(),this.toJD(e===-1?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,V1.local.invalidMonth),t===12&&this.leapYear(e)||t===8&&T8(this.daysInYear(e),10)===5?30:t===9&&T8(this.daysInYear(e),10)===3?29:this.daysPerMonth[t-1]},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==6},extraInfo:function(e,t,r){var i=this._validate(e,t,r,V1.local.invalidDate);return{yearType:(this.leapYear(i)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(i)%10-3]}},toJD:function(e,t,r){var i=this._validate(e,t,r,V1.local.invalidDate);e=i.year(),t=i.month(),r=i.day();var n=e<=0?e+1:e,a=this.jdEpoch+this._delay1(n)+this._delay2(n)+r+1;if(t<7){for(var o=7;o<=this.monthsInYear(e);o++)a+=this.daysInMonth(e,o);for(var o=1;o<t;o++)a+=this.daysInMonth(e,o)}else for(var o=7;o<t;o++)a+=this.daysInMonth(e,o);return a},_delay1:function(e){var t=Math.floor((235*e-234)/19),r=12084+13753*t,i=t*29+Math.floor(r/25920);return T8(3*(i+1),7)<3&&i++,i},_delay2:function(e){var t=this._delay1(e-1),r=this._delay1(e),i=this._delay1(e+1);return i-r===356?2:r-t===382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var t=Math.floor((e-this.jdEpoch)*98496/35975351)-1;e>=this.toJD(t===-1?1:t+1,7,1);)t++;for(var r=e<this.toJD(t,1,1)?7:1;e>this.toJD(t,r,this.daysInMonth(t,r));)r++;var i=e-this.toJD(t,r,1)+1;return this.newDate(t,r,i)}});function T8(e,t){return e-t*Math.floor(e/t)}V1.calendars.hebrew=fK});var hje=ne(()=>{var j5=Th(),lQt=of();function cK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}cK.prototype=new j5.baseCalendar;lQt(cK.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,j5.local.invalidYear);return(t.year()*11+14)%30<11},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(e){return this.leapYear(e)?355:354},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,j5.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var i=this._validate(e,t,r,j5.local.invalidDate);return e=i.year(),t=i.month(),r=i.day(),e=e<=0?e+1:e,r+Math.ceil(29.5*(t-1))+(e-1)*354+Math.floor((3+11*e)/30)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=Math.floor((30*(e-this.jdEpoch)+10646)/10631);t=t<=0?t-1:t;var r=Math.min(12,Math.ceil((e-29-this.toJD(t,1,1))/29.5)+1),i=e-this.toJD(t,r,1)+1;return this.newDate(t,r,i)}});j5.calendars.islamic=cK});var vje=ne(()=>{var K5=Th(),uQt=of();function hK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}hK.prototype=new K5.baseCalendar;uQt(hK.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,K5.local.invalidYear),r=t.year()<0?t.year()+1:t.year();return r%4===0},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,K5.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(e,t,r){var i=this._validate(e,t,r,K5.local.invalidDate);return e=i.year(),t=i.month(),r=i.day(),e<0&&e++,t<=2&&(e--,t+=12),Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+r-1524.5},fromJD:function(e){var t=Math.floor(e+.5),r=t+1524,i=Math.floor((r-122.1)/365.25),n=Math.floor(365.25*i),a=Math.floor((r-n)/30.6001),o=a-Math.floor(a<14?1:13),s=i-Math.floor(o>2?4716:4715),l=r-n-Math.floor(30.6001*a);return s<=0&&s--,this.newDate(s,o,l)}});K5.calendars.julian=hK});var pje=ne(()=>{var Yp=Th(),fQt=of();function dK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}dK.prototype=new Yp.baseCalendar;fQt(dK.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,Yp.local.invalidYear),!1},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,Yp.local.invalidYear);e=t.year();var r=Math.floor(e/400);e=e%400,e+=e<0?400:0;var i=Math.floor(e/20);return r+"."+i+"."+e%20},forYear:function(e){if(e=e.split("."),e.length<3)throw"Invalid Mayan year";for(var t=0,r=0;r<e.length;r++){var i=parseInt(e[r],10);if(Math.abs(i)>19||r>0&&i<0)throw"Invalid Mayan year";t=t*20+i}return t},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,Yp.local.invalidYear),18},weekOfYear:function(e,t,r){return this._validate(e,t,r,Yp.local.invalidDate),0},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,Yp.local.invalidYear),360},daysInMonth:function(e,t){return this._validate(e,t,this.minDay,Yp.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(e,t,r){var i=this._validate(e,t,r,Yp.local.invalidDate);return i.day()},weekDay:function(e,t,r){return this._validate(e,t,r,Yp.local.invalidDate),!0},extraInfo:function(e,t,r){var i=this._validate(e,t,r,Yp.local.invalidDate),n=i.toJD(),a=this._toHaab(n),o=this._toTzolkin(n);return{haabMonthName:this.local.haabMonths[a[0]-1],haabMonth:a[0],haabDay:a[1],tzolkinDayName:this.local.tzolkinMonths[o[0]-1],tzolkinDay:o[0],tzolkinTrecena:o[1]}},_toHaab:function(e){e-=this.jdEpoch;var t=vK(e+8+17*20,365);return[Math.floor(t/20)+1,vK(t,20)]},_toTzolkin:function(e){return e-=this.jdEpoch,[dje(e+20,20),dje(e+4,13)]},toJD:function(e,t,r){var i=this._validate(e,t,r,Yp.local.invalidDate);return i.day()+i.month()*20+i.year()*360+this.jdEpoch},fromJD:function(e){e=Math.floor(e)+.5-this.jdEpoch;var t=Math.floor(e/360);e=e%360,e+=e<0?360:0;var r=Math.floor(e/20),i=e%20;return this.newDate(t,r,i)}});function vK(e,t){return e-t*Math.floor(e/t)}function dje(e,t){return vK(e-1,t)+1}Yp.calendars.mayan=dK});var yje=ne(()=>{var pb=Th(),cQt=of();function pK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}pK.prototype=new pb.baseCalendar;var gje=pb.instance("gregorian");cQt(pK.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,pb.local.invalidYear||pb.regionalOptions[""].invalidYear);return gje.leapYear(t.year()+(t.year()<1?1:0)+1469)},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(1-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,pb.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(n,t,r){var i=this._validate(n,t,r,pb.local.invalidMonth),n=i.year();n<0&&n++;for(var a=i.day(),o=1;o<i.month();o++)a+=this.daysPerMonth[o-1];return a+gje.toJD(n+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var t=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(t+1,1,1);)t++;for(var r=e-Math.floor(this.toJD(t,1,1)+.5)+1,i=1;r>this.daysInMonth(t,i);)r-=this.daysInMonth(t,i),i++;return this.newDate(t,i,r)}});pb.calendars.nanakshahi=pK});var mje=ne(()=>{var gb=Th(),hQt=of();function gK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}gK.prototype=new gb.baseCalendar;hQt(gK.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(e){return this.daysInYear(e)!==this.daysPerYear},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,gb.local.invalidYear);if(e=t.year(),typeof this.NEPALI_CALENDAR_DATA[e]=="undefined")return this.daysPerYear;for(var r=0,i=this.minMonth;i<=12;i++)r+=this.NEPALI_CALENDAR_DATA[e][i];return r},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,gb.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[e]=="undefined"?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[e][t]},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==6},toJD:function(e,t,r){var i=this._validate(e,t,r,gb.local.invalidDate);e=i.year(),t=i.month(),r=i.day();var n=gb.instance(),a=0,o=t,s=e;this._createMissingCalendarData(e);var l=e-(o>9||o===9&&r>=this.NEPALI_CALENDAR_DATA[s][0]?56:57);for(t!==9&&(a=r,o--);o!==9;)o<=0&&(o=12,s--),a+=this.NEPALI_CALENDAR_DATA[s][o],o--;return t===9?(a+=r-this.NEPALI_CALENDAR_DATA[s][0],a<0&&(a+=n.daysInYear(l))):a+=this.NEPALI_CALENDAR_DATA[s][9]-this.NEPALI_CALENDAR_DATA[s][0],n.newDate(l,1,1).add(a,"d").toJD()},fromJD:function(e){var t=gb.instance(),r=t.fromJD(e),i=r.year(),n=r.dayOfYear(),a=i+56;this._createMissingCalendarData(a);for(var o=9,s=this.NEPALI_CALENDAR_DATA[a][0],l=this.NEPALI_CALENDAR_DATA[a][o]-s+1;n>l;)o++,o>12&&(o=1,a++),l+=this.NEPALI_CALENDAR_DATA[a][o];var u=this.NEPALI_CALENDAR_DATA[a][o]-(l-n);return this.newDate(a,o,u)},_createMissingCalendarData:function(e){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var r=e-1;r<e+2;r++)typeof this.NEPALI_CALENDAR_DATA[r]=="undefined"&&(this.NEPALI_CALENDAR_DATA[r]=t)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}});gb.calendars.nepali=gK});var xje=ne(()=>{var BT=Th(),vQt=of();function A8(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}A8.prototype=new BT.baseCalendar;vQt(A8.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,BT.local.invalidYear);return((t.year()-(t.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-((i.dayOfWeek()+1)%7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,BT.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===12&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var i=this._validate(e,t,r,BT.local.invalidDate);e=i.year(),t=i.month(),r=i.day();var n=e-(e>=0?474:473),a=474+yK(n,2820);return r+(t<=7?(t-1)*31:(t-1)*30+6)+Math.floor((a*682-110)/2816)+(a-1)*365+Math.floor(n/2820)*1029983+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=e-this.toJD(475,1,1),r=Math.floor(t/1029983),i=yK(t,1029983),n=2820;if(i!==1029982){var a=Math.floor(i/366),o=yK(i,366);n=Math.floor((2134*a+2816*o+2815)/1028522)+a+1}var s=n+2820*r+474;s=s<=0?s-1:s;var l=e-this.toJD(s,1,1)+1,u=l<=186?Math.ceil(l/31):Math.ceil((l-6)/30),f=e-this.toJD(s,u,1)+1;return this.newDate(s,u,f)}});function yK(e,t){return e-t*Math.floor(e/t)}BT.calendars.persian=A8;BT.calendars.jalali=A8});var _je=ne(()=>{var yb=Th(),dQt=of(),M8=yb.instance();function mK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}mK.prototype=new yb.baseCalendar;dQt(mK.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,yb.local.invalidYear),r=this._t2gYear(t.year());return M8.leapYear(r)},weekOfYear:function(n,t,r){var i=this._validate(n,this.minMonth,this.minDay,yb.local.invalidYear),n=this._t2gYear(i.year());return M8.weekOfYear(n,i.month(),i.day())},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,yb.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(n,t,r){var i=this._validate(n,t,r,yb.local.invalidDate),n=this._t2gYear(i.year());return M8.toJD(n,i.month(),i.day())},fromJD:function(e){var t=M8.fromJD(e),r=this._g2tYear(t.year());return this.newDate(r,t.month(),t.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}});yb.calendars.taiwan=mK});var bje=ne(()=>{var mb=Th(),pQt=of(),S8=mb.instance();function xK(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}xK.prototype=new mb.baseCalendar;pQt(xK.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,mb.local.invalidYear),r=this._t2gYear(t.year());return S8.leapYear(r)},weekOfYear:function(n,t,r){var i=this._validate(n,this.minMonth,this.minDay,mb.local.invalidYear),n=this._t2gYear(i.year());return S8.weekOfYear(n,i.month(),i.day())},daysInMonth:function(e,t){var r=this._validate(e,t,this.minDay,mb.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,t,r){return(this.dayOfWeek(e,t,r)||7)<6},toJD:function(n,t,r){var i=this._validate(n,t,r,mb.local.invalidDate),n=this._t2gYear(i.year());return S8.toJD(n,i.month(),i.day())},fromJD:function(e){var t=S8.fromJD(e),r=this._g2tYear(t.year());return this.newDate(r,t.month(),t.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}});mb.calendars.thai=xK});var wje=ne(()=>{var xb=Th(),gQt=of();function _K(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}_K.prototype=new xb.baseCalendar;gQt(_K.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,xb.local.invalidYear);return this.daysInYear(t.year())===355},weekOfYear:function(e,t,r){var i=this.newDate(e,t,r);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var t=0,r=1;r<=12;r++)t+=this.daysInMonth(e,r);return t},daysInMonth:function(e,t){for(var r=this._validate(e,t,this.minDay,xb.local.invalidMonth),i=r.toJD()-24e5+.5,n=0,a=0;a<H1.length;a++){if(H1[a]>i)return H1[n]-H1[n-1];n++}return 30},weekDay:function(e,t,r){return this.dayOfWeek(e,t,r)!==5},toJD:function(e,t,r){var i=this._validate(e,t,r,xb.local.invalidDate),n=12*(i.year()-1)+i.month()-15292,a=i.day()+H1[n-1]-1;return a+24e5-.5},fromJD:function(e){for(var t=e-24e5+.5,r=0,i=0;i<H1.length&&!(H1[i]>t);i++)r++;var n=r+15292,a=Math.floor((n-1)/12),o=a+1,s=n-12*a,l=t-H1[r-1]+1;return this.newDate(o,s,l)},isValid:function(e,t,r){var i=xb.baseCalendar.prototype.isValid.apply(this,arguments);return i&&(e=e.year!=null?e.year:e,i=e>=1276&&e<=1500),i},_validate:function(e,t,r,i){var n=xb.baseCalendar.prototype._validate.apply(this,arguments);if(n.year<1276||n.year>1500)throw i.replace(/\{0\}/,this.local.name);return n}});xb.calendars.ummalqura=_K;var H1=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]});var Aje=ne((x_r,Tje)=>{"use strict";Tje.exports=Th();oje();sje();lje();uje();fje();cje();hje();vje();pje();yje();mje();xje();_je();bje();wje()});var Pje=ne((__r,Lje)=>{"use strict";var Sje=Aje(),J5=Wt(),Eje=$a(),yQt=Eje.EPOCHJD,mQt=Eje.ONEDAY,TK={valType:"enumerated",values:J5.sortObjectKeys(Sje.calendars),editType:"calc",dflt:"gregorian"},kje=function(e,t,r,i){var n={};return n[r]=TK,J5.coerce(e,t,n,r,i)},xQt=function(e,t,r,i){for(var n=0;n<r.length;n++)kje(e,t,r[n]+"calendar",i.calendar)},_Qt={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},bQt={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},wQt={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},E8="##",TQt={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:E8,w:E8,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function AQt(e,t,r){for(var i=Math.floor((t+.05)/mQt)+yQt,n=Cje(r).fromJD(i),a=0,o,s,l,u,f;(a=e.indexOf("%",a))!==-1;)o=e.charAt(a+1),o==="0"||o==="-"||o==="_"?(l=3,s=e.charAt(a+2),o==="_"&&(o="-")):(s=o,o="0",l=2),u=TQt[s],u?(u===E8?f=E8:f=n.formatDate(u[o]),e=e.substr(0,a)+f+e.substr(a+l),a+=f.length):a+=l;return e}var Mje={};function Cje(e){var t=Mje[e];return t||(t=Mje[e]=Sje.instance(e),t)}function _b(e){return J5.extendFlat({},TK,{description:e})}function AK(e){return"Sets the calendar system to use with `"+e+"` date data."}var wK={xcalendar:_b(AK("x"))},Ag=J5.extendFlat({},wK,{ycalendar:_b(AK("y"))}),bK=J5.extendFlat({},Ag,{zcalendar:_b(AK("z"))}),NT=_b(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));Lje.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:Ag,bar:Ag,box:Ag,heatmap:Ag,contour:Ag,histogram:Ag,histogram2d:Ag,histogram2dcontour:Ag,scatter3d:bK,surface:bK,mesh3d:bK,scattergl:Ag,ohlc:wK,candlestick:wK},layout:{calendar:_b(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:NT},yaxis:{calendar:NT},scene:{xaxis:{calendar:NT},yaxis:{calendar:NT},zaxis:{calendar:NT}},polar:{radialaxis:{calendar:NT}}},transforms:{filter:{valuecalendar:_b(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:_b(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:TK,handleDefaults:kje,handleTraceDefaults:xQt,CANONICAL_SUNDAY:bQt,CANONICAL_TICK:_Qt,DFLTRANGE:wQt,getCal:Cje,worldCalFmt:AQt}});var Dje=ne((b_r,Rje)=>{"use strict";Rje.exports=Pje()});var Ije=m0e();Ije.register([_ge(),sye(),gme(),qme(),jme(),Y1e(),ixe(),Gxe(),x_e(),ebe(),Nbe(),$Me(),USe(),P5e(),mke(),Zke(),yCe(),H4e(),lLe(),SLe(),OLe(),QLe(),vPe(),CPe(),TRe(),HRe(),rOe(),e7e(),F7e(),X7e(),JBe(),TNe(),C9e(),G9e(),dUe(),bVe(),YVe(),SHe(),XGe(),gYe(),zYe(),uWe(),TWe(),bXe(),BXe(),iZe(),OZe(),YZe(),JZe(),eje(),nje(),Dje()]);module.exports=Ije;
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*!
 * pad-left <https://github.com/jonschlinkert/pad-left>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT license.
 */
/*!
 * repeat-string <https://github.com/jonschlinkert/repeat-string>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */
/*! Bundled license information:

native-promise-only/lib/npo.src.js:
  (*! Native Promise Only
      v0.8.1 (c) Kyle Simpson
      MIT License: http://getify.mit-license.org
  *)

polybooljs/index.js:
  (*
   * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
   * @license MIT
   * @preserve Project Home: https://github.com/voidqk/polybooljs
   *)

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

assert/build/internal/util/comparisons.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
   * @license  MIT
   *)

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)
*/
if (typeof module.exports == "object" && typeof exports == "object") {
  var __cp = (to, from, except, desc) => {
    if ((from && typeof from === "object") || typeof from === "function") {
      for (let key of Object.getOwnPropertyNames(from)) {
        if (!Object.prototype.hasOwnProperty.call(to, key) && key !== except)
        Object.defineProperty(to, key, {
          get: () => from[key],
          enumerable: !(desc = Object.getOwnPropertyDescriptor(from, key)) || desc.enumerable,
        });
      }
    }
    return to;
  };
  module.exports = __cp(module.exports, exports);
}
return module.exports;
}))
